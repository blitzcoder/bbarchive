<!DOCTYPE html><html lang="en" ><head ><title >Asynchronous images loading issue</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Asynchronous images loading issue</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Asynchronous images loading issue</a><br><br>
<a name="2119229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LilMonkey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, monkey experts!<br><br>I am developing a game with several locations. A player can only proceed from one location  to the neighbour one. For instance, if you are currently in the location #3, you can go either deeper (to the level #4) or backwards (to the level #2). Each location contains a bunch of images, which are needed to be loaded into the RAM. <br><br>What I want to do is to load levels images manually while step-by-step diving deeper. If I am at the level #2, I want level #3 images to be loaded silently in the background, without any visible consequences. So, each time I'm diving a level deeper, I am launching the mojo's LoadImageAsync() method for each of the next level images.<br><br>Here where the issue comes: while images have not (asynchronously!) loaded yet, the UI of my application freezes. Seemes like one of the background threads, loading images, is working inside the main thread of my application, which is responsible for the User Interface. It only unfreezes when all the images are already loaded and all the  OnLoadImageComplete() methods have fired.<br><br>So, I wonder, is there a way to load images REALLY in background, without making the main thread waiting? Thanks in advance. <br><br></td></tr></table><br>
<a name="2119239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pharmhaus</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Here where the issue comes: while images have not (asynchronously!) loaded yet, the UI of my application freezes.<br> <br></div><br>Monkey pulls the images back from the loader to the mainthread when you call UpdateAsyncEvents().<br>It then initalizes some open gl stuff for a loaded image.<br><br><div class="quote"> <br>So, each time I'm diving a level deeper, I am launching the mojo's LoadImageAsync() method for each of the next level images.<br> <br></div><br>If you don't do so already have you tried to load the images asynchronously one after another?<br>Maybe pulling the images back all at once causes a bottleneck.<br><br>Also what kind of platform/target are we talking about? <br><br></td></tr></table><br>
<a name="2119293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maxminwu</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried the Ubuntu Platform ? I also meet the same problem. while images have not (asynchronously!) loaded yet is the same to me . <br><br></td></tr></table><br>
<a name="2119295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LilMonkey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The platform I am testing on is GLFW3. <br><div class="quote"> If you don't do so already have you tried to load the images asynchronously one after another? <br></div><br>It makes no sence, as it will take a lot of time, I need them to load in parallel threads.<br><div class="quote"> Maybe pulling the images back all at once causes a bottleneck. <br></div><br>It doesn't seem so, in this case GUI would lag only at the moment of images pulling. In my case mainthread freezes for the whole period of images loading.<br><div class="quote"> Have you tried the Ubuntu Platform ? <br></div><br>No, I haven't. My final target platform is iOS<br><br>For the moment I have a temporary "solution" - I just draw a static "load screen", which holds until all the images have asynchronously loaded. But I still hope to find a real solution to achieve manual loading while diving into deeper levels.<br><br>BTW, images loading process takes 2 seconds. App's update rate is 60. Thus, my app should update itself 120 times while images loading process. I placed markers in Update() method. Weird thing - it fires only 4-5 times per that 2 seconds (which means it doesn't completely freezes!). After the loading has been done, it continues updating normally. <br><br></td></tr></table><br>
<a name="2119294"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
