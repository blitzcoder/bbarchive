<!DOCTYPE html><html lang="en" ><head ><title >Null object for Object Timer?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Null object for Object Timer?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Null object for Object Timer?</a><br><br>
<a name="2085036"></a>

<a name="2085037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >underdrummer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, I'm new to Monkey X and the forums. I have a Fantom Engine question. I hope it's okay to ask it here. <br>I want to use CreateObjTmer just for the timer. I don't need OnUpdateTimer to do anything to an object but the parameters for the overload are ftObject, TimerId. So I created a generic object and assigned it Null. It still doesn't work. Do you have to use a non-null object for CreateObjTimer? <br>OnObjectUpdate Method<br>...<br>CreateObjTimer(g.generic, g.tmShotTime, 3000)<br><br>'OnObjectTimer Method<br>	Method OnObjectTimer:Int(timerId:Int, obj:ftObject)<br>		'check for shot Time timer<br>		If timerId = g.tmShotTime Then<br>			'timer is done so allow player to shoot again<br>			g.playerCanShoot = True<br>			'reset bulletCount (give player 3 more shots before timer fires again)<br>			g.bulletCount = 0<br>		Endif<br>Is it not possible to use Null objects here?<br>Thanks. <br><br></td></tr></table><br>
<a name="2085046"></a>

<a name="2085047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might be better off posting this in the FantomEngine thread as it is not obvious from your title that this is related to FantomEngine, so Mike might not see it.<br><br>Try here: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=5315" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=5315</a> <br><br></td></tr></table><br>
<a name="2085048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi underdummer,<br><br>next time just prefix your topic title with fantomEngine. Makes it easier to find. Or ask at my own forum.<br><br>Anyway, <b>ftEngine.CreateTimer</b> is what you might need. A null object won't work as there is a reference between an object and a timer when you create the timer like you had. And the object needs to be updated for the object timer to update. So use use ftEngine.CreateTimer. That should work. <br><br></td></tr></table><br>
<a name="2085080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >underdrummer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi MikeHart,<br><br>Thank you for the response . I will use fantomEngine in my subject next time I post on Monkey X. Should I be asking fantomEngine questions on this website forum or the fantomGL support forum? <br>Anyways, I replaced my CreateObjTimer with CreateTimer but it's not working. When using CreateTimer, <br>is the timer still updated in the OnObjectTimer() Method? I did not get a compile error but my app acts as if the timer never triggered. <br>Thanks. <br><br></td></tr></table><br>
<a name="2085086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will post a sample over the day. <br><br></td></tr></table><br>
<a name="2085107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here you go:<br><br><pre class=code>
Strict

#rem
	Script:			Timer.monkey
	Description:	Sample script to show how to use timer
	Author: 		Michael Hartlef
	Version:      	1.0
#End

' Set the AutoSuspend functionality to TRUE so OnResume/OnSuspend are called
#MOJO_AUTO_SUSPEND_ENABLED=True

' Import the fantomEngine framework which imports mojo itself
Import fantomEngine

' The _g variable holds an instance to the cGame class
Global _g:cGame

'***************************************
' The cGame class controls the app
Class cGame Extends App
	' Create a field to store the instance of the cEngine class, which is an instance
	' of the ftEngine class itself
	Field fE:cEngine

	' Define two constants for timer IDs	
	Const engineTimer:Int = 1
	Const objectTimer:Int = 2
	
	
	'------------------------------------------
	Method OnCreate:Int()
		' Set the update rate of Mojo's OnUpdate events to be determined by the devices refresh rate.
		SetUpdateRate(0)
		
		' Create an instance of the fantomEngine, which was created via the cEngine class
		fE = New cEngine
	
		' Create a timer without a connection to an object which creates new circles at every second
		fE.CreateTimer(engineTimer, 1000, -1)
		

		Return 0
	End
	'------------------------------------------
	Method OnUpdate:Int()
		' If the CLOSE key was hit, exit the app ... needed for GLFW and Android I think. 
		If KeyHit( KEY_CLOSE ) Then fE.ExitApp()
		
		' Determine the delta time and the update factor for the engine
		Local timeDelta:Float = Float(fE.CalcDeltaTime())/60.0

		' Update all objects of the engine
		If fE.GetPaused() = False Then
			fE.Update(timeDelta)
		Endif
		Return 0
	End
	'------------------------------------------
	Method OnRender:Int()
		' Check if the engine is not paused
		If fE.GetPaused() = False Then
			' Clear the screen 
			Cls 255,0,0
		
			' Render all visible objects of the engine
			fE.Render()
		Endif
		Return 0
	End
End	

'***************************************
' The cEngine class extends the ftEngine class to override the On... methods
Class cEngine Extends ftEngine
	'------------------------------------------
	Method OnObjectTimer:Int(timerId:Int, obj:ftObject)
		' This method is called when an objects' timer was being fired.
		If timerId = _g.objectTimer
			obj.Remove()
		Endif
		Return 0
	End	

    '------------------------------------------
	Method OnTimer:Int(timerId:Int)
		' This method is called when an engine timer was being fired.
		If timerId = _g.engineTimer
			' Create a simple circle
			Local circle := self.CreateCircle(20,Rnd(self.GetCanvasWidth()),Rnd(self.GetCanvasHeight()))

			' Two ways to create an object bound timer
			' circle.CreateTimer(_g.objectTimer, 1500)
			self.CreateObjTimer(circle, _g.objectTimer, 1500)
		Endif
		Return 0
	End	
End

'***************************************
Function Main:Int()
	' Create an instance of the cGame class and store it inside the global var 'g'
	_g = New cGame
	
	Return 0
End


</pre> <br><br></td></tr></table><br>
<a name="2085262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >underdrummer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you MikeHart. I can now use CreateTimer like a pro! <br><br></td></tr></table><br>
<a name="2085286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> :-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
