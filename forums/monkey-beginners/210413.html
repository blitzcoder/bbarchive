<!DOCTYPE html><html lang="en" ><head ><title >Saving values as metadata and expanding arrays</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Saving values as metadata and expanding arrays</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Saving values as metadata and expanding arrays</a><br><br>
<a name="2117057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RedGTurtlepa</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was thinking about creating a large game, but I wanted to keep track of "zones" by arrays which save the state of the entities moving around my maps. And each zone would have its own data. But I am wondering, can monkey handle infinite expanding arrays or is there a limit, and does Monkey just work directly with XML and ini or can i make up my own type of save files.<br><br>Anyone know of a good resource or framework for this? Should I get Ignition X or just experiment with saving and loading arrays to files and see what happens? <br><br></td></tr></table><br>
<a name="2117077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pharmhaus</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>and does Monkey just work directly with XML and ini or can i make up my own type of save files.<br> <br></div><br>There is a json module which works very well and is easy to use. There is also XML here in the forums.<br><div class="quote"> <br>But I am wondering, can monkey handle infinite expanding arrays or is there a limit<br> <br></div><br>Resizing arrays is the wrong way to go because expanding an array requires copying all current elements. The time for that increases with the number of elements (read: infinite time for infinite large array).<br>Your best bet is probably a similar approach to <a href="https://www.youtube.com/watch?v=t5LKXTGM004" target="_blank">the binding of isaac</a> were everything is splitted up into small rooms.<br>You could generate and load/store these rooms using a predefined pattern.<br>Also the amount of data that you actually need could be a lot smaller than you think. <br><br></td></tr></table><br>
<a name="2117092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Capn Lee</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> this is usually solved by splitting your world into chunks. set each area defined by size and create a separate file for each chunk. if it is too far away from where the player is then save it out to a file and if they start getting closer to it then load that file. then you don't have to worry about an array spanning out to any kind of theoretical limit and it will mean far less memory usage.<br><br>Unless each zone is small enough that this was already your plan, but either way, try not to think of the whole game world as a single map, it can look that way to the player but you'll thank yourself later if you keep the size of the data you deal with down <br><br></td></tr></table><br>
<a name="2117096"></a>

<a name="2117097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> And remember that,  as Pharmhaus said, the data might be smaller than you think.  E.g. if you have 100 entities which need saving per zone, and each needs 100 bytes of state, that's still only 1 MB per 100 zones...<br><br>Of course, it all depends what you are doing - are zones procedurally generated or pre-generated?  The latter might use quite a lot of memory - though again, 200 x 200 of 1 byte terrain tiles is still only 40K, if that's the way you're going.<br><br>The other issue is whether your game is asset-heavy: do different zones have different environmental and monster graphics?  Or can everything in your game fit on a single spritesheet? <br><br></td></tr></table><br>
<a name="2117103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RedGTurtlepa</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Pharmhaus <br><div class="quote">  There is a json module which works very well and is easy to use. There is also XML here in the forums. <br></div><br><br>Thanks I will definately check it out<br><br><div class="quote">  Resizing arrays is the wrong way to go because expanding an array requires copying all current elements. The time for that increases with the number of elements (read: infinite time for infinite large array).<br>Your best bet is probably a similar approach to the binding of isaac were everything is splitted up into small rooms.<br>You could generate and load/store these rooms using a predefined pattern.<br>Also the amount of data that you actually need could be a lot smaller than you think. <br></div><br><br>yes I had thought about approaching it this way, I think it might be best and work with something I have already created and defined with shfting elements. Hmmm<br><br>@Capn Lee<br><div class="quote">  this is usually solved by splitting your world into chunks. set each area defined by size and create a separate file for each chunk. if it is too far away from where the player is then save it out to a file and if they start getting closer to it then load that file. then you don't have to worry about an array spanning out to any kind of theoretical limit and it will mean far less memory usage.<br><br>Unless each zone is small enough that this was already your plan, but either way, try not to think of the whole game world as a single map, it can look that way to the player but you'll thank yourself later if you keep the size of the data you deal with down <br></div><br>I remember reading a blog about this process, and it was similar to I think how Terraria handled loading its zones. Or maybe it wasnt. I will probably look into this as you can make the size of zones quite variable and save alot of performance.<br><br>@Gerry Quinn<br><div class="quote"> And remember that, as Pharmhaus said, the data might be smaller than you think. E.g. if you have 100 entities which need saving per zone, and each needs 100 bytes of state, that's still only 1 MB per 100 zones...<br><br>Of course, it all depends what you are doing - are zones procedurally generated or pre-generated? The latter might use quite a lot of memory - though again, 200 x 200 of 1 byte terrain tiles is still only 40K, if that's the way you're going.<br><br>The other issue is whether your game is asset-heavy: do different zones have different environmental and monster graphics? Or can everything in your game fit on a single spritesheet? <br></div><br><br>to first answer the spritesheet question, I was thinking (though not sure) of having a few generic variations to some simple art, and manipulating R,G,B values of the artwork according to my need for the entity/class holding it to make the illusion of there being more gear than available or artwork than is. Not sure if Monkey X supports such sprite manipulation, but either way not many,. The zones would share alot of art, what I wanted to is manage large amounts of unique zone space, and in each space store entity specific data and also transitional data to neighboring zones. <br><br></td></tr></table><br>
<a name="2117129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Monkey has ReadPixels and WritePixels functions for direct sprite manipulation, though you don't want to be doing a huge amount of this.  You can also just draw a white or greyscale object in different colours, as is done for fonts, to vary the colour of a soldier's shield and helmet, for example. <br><br></td></tr></table><br>
<a name="2119085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RedGTurtlepa</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wait a moment, Monkey X/mojo doesnt use a camera. So the area or space I render to is an infinite screen surface? I'm trying to make heads or tails of the mojo module's graphicsDevice but it is a little confusing to me, it seems that the surface itself can go on forever? Or is it the object data holding all renderable material is stored in its supposed x and y coordinates which can go off the screen but be held in memory.<br><br>So suppose I wanted a scrollable camera to go over a zone, I'm actually rendering all graphics at an offset from my single viewport screenwidth and screenheight and just moving all rendered objects in unison? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
