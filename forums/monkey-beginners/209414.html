<!DOCTYPE html><html lang="en" ><head ><title >Including source code ? (Solved)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Including source code ? (Solved)</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Including source code ? (Solved)</a><br><br>
<a name="2097777"></a>

<a name="2097778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Is it possible with Monkey to include source code ?<br><br>I dont' mean build a function library but really include a piece of source code like the preprocessor command {$I} in Pascal syntax or #include in C/C++.<br><br>Thank you<br>Golomp <br><br></td></tr></table><br>
<a name="2097686"></a>

<a name="2097708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You mean like what C++ does when you use "cpp" files, instead of headers? For one thing, in C++ that's not usually the best approach, but that's another topic. That's what it sounds like, and that has been purged from Monkey for the sake of modularity and consistency. Importing ('Import') works better, and there aren't any major differences. BlitzMax and Blitz Basic have Include, though. BlitzMax's 'Import' works differently than Monkey's, however.<br><br>Just stick to using proper imports, they're what the language was built around. <br><br></td></tr></table><br>
<a name="2097718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you ImmutableOctet.<br><br>And between Ted and Trans batch process, is it possible to include a preprocessing file?<br><br>thank you<br>Golomp <br><br></td></tr></table><br>
<a name="2097769"></a>

<a name="2097770"></a>

<a name="2097771"></a>

<a name="2097772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I'm understanding the Pascal nomenclature, you want a file that sets up preprocessor functionality ala C++'s header setup, right? Because that's not really a thing in Monkey either (Not in the same way, that is). But it's not like I didn't try to convince Mark otherwise. Monkey's preprocessor unfortunately can't be used value-wise. In other words, you can't go define a variable with the preprocessor, and use its value in-line with your code (Like what's done with C++). That can be done with the external languages, though. For example, C++ based targets have the "CFG_" prefix in front of Monkey's preprocessor variables (This may change at some point; use at your own risk).<br><br>Everything else can basically be done without a preprocessor in Monkey. Constants are basically preprocessed, anyway; that's why you can have constants in functions. That's also why it can be both good and bad to use constants for strings. On one hand, you have a unified storage for the string (Global), but people can modify it if it's public to them. On the other hand, you have strings generated every time you use that constant. In the case of constants, they're usually better, as it makes the memory footprint smaller, and they're handled differently on some targets (Mostly memory-wise; they're functionality is effectively the same).<br><br>As for just managing the preprocessor, then you can have a separate module for that. Monkey has its own "CONFIG.monkey" file it generates, which is basically just a normal module. You can do the same thing with any other module, in fact, <a href="https://github.com/Regal-Internet-Brothers/preprocessor" target="_blank">I've done that before</a>.<br><br>The preprocessor can be used in any file, though. And as of V82(A), the change I proposed to the preprocessor has been implemented. This means imports are counted into the preprocessing step, so you can preprocess before, and after your imports.<br><br><b>If that's not what you're talking about, then I'm lost.</b><br><br>The only other thing I can think of is writing your own preprocessor, or modifying 'trans' yourself. <br><br></td></tr></table><br>
<a name="2097762"></a>

<a name="2097763"></a>

<a name="2097764"></a>

<a name="2097765"></a>

<a name="2097776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi ImmutableOctet,<br><br>Thank you for your explanations, i know better Monkey internal now.<br><br>Excuse me if my question was not very clear and/or if i confuse you, i am french and sometime it's not very easy to explain myself. <br>(well, even in french i have the same problem ;)<br><br>My question was just about including a pure piece of code (for example an array of integer for a matrix. This array is generated by an other program and is large)<br>I think i am going to use the import possibilities to manage it and i am going to generate the source code of a little library in text format (i mean the array plus the source code around to obtain a correct monkey source file).<br>After that the import will do the job.<br><br>Thank you again ImmutableOctet.<br><br>Regards<br>Golomp <br><br></td></tr></table><br>
<a name="2097782"></a>

<a name="2097783"></a>

<a name="2097784"></a>

<a name="2097785"></a>

<a name="2097786"></a>

<a name="2097787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the array is very large, then using an external (Non-source) file might be ideal. You'd have to load it with one of the loading methods, though. In the case of games, the file would normally be located in the application's "BUILD_FILE_NAME_HERE.data" folder (A similar setup as the "*.build" folder). This isn't required for some targets; for example, the C++ Tool (STDCPP) target can deal with any file-locations, as there's normally not a data-folder. Most (If not all) other desktop targets can read data from other locations. Android also has support for other storage locations. From there, you could read the file using either <a href="http://www.monkey-x.com/docs/html/Modules_brl.filestream_FileStream.html#Open" target="_blank">'FileStream.Open'</a> (This will open a stream you'll need to read from; generally preferable, but not always needed), <a href="http://www.monkey-x.com/docs/html/Modules_mojo.app.html#LoadString" target="_blank">'LoadString'</a> (This loads the entire file into a string; the size is limited on some targets), or <b><a href="http://www.monkey-x.com/docs/html/Modules_brl.databuffer_DataBuffer.html#Load" target="_blank">'DataBuffer.Load'</a> (If you need all of the data at once, and you don't need to deal with it until later, this is your best bet)</b>. If it's very large, and you want your code to be elegant / not huge, then you should do this. Smaller amounts of data can be stored in arrays via Monkey without any problems. Also note that the 'LoadString' option is not available for the C++ Tool (STDCPP) target without using the semi-deprecated <a href="http://www.monkey-x.com/docs/html/Modules_os.html" target="_blank">'os'</a> module (Desktop C++ targets only).<br><br>Data commonly stored in the executable's storage sector is usually small, and tends to be done for the sake of reducing runtime cost. If you're simply dealing with data from an external source, loading from a file is recommended.<br><br>If you go the 'DataBuffer' route, you'll be able to either peek (Read) the data from it, or you can use the <a href="http://www.monkey-x.com/docs/html/Modules_brl.datastream_DataStream.html" target="_blank">'DataStream'</a> class.<br><br><b>I'd recommend using a <a href="http://www.monkey-x.com/docs/html/Modules_brl.databuffer_DataBuffer.html" target="_blank">'DataBuffer'</a> (Via <a href="http://www.monkey-x.com/docs/html/Modules_brl.databuffer_DataBuffer.html#Load" target="_blank">'DataBuffer.Load'</a>), and simply using the <a href="http://www.monkey-x.com/docs/html/Modules_brl.databuffer_DataBuffer.html#PeekInts" target="_blank">'PeekInts'</a> method, once the data has been loaded. This will provide a standard integer array for you to use.</b><br><br>Also note that 'Import' can also be used for non-source files (Not always the best setup), this will save them to the "*.data" folder when compiling.<br><br>If the data you're dealing with is actually generated by code you can use in Monkey, then it's really up to you about how you should handle this. <br><br></td></tr></table><br>
<a name="2097781"></a>

<a name="2097790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Golomp,<br><br>if you try to load Monkey source code at runtime, then I am pretty sure that the answer is no. Even using import won't help you here. All code must be translated and compiled when you build the app. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
