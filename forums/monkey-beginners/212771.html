<!DOCTYPE html><html lang="en" ><head ><title >Objects not moving</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Objects not moving</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Objects not moving</a><br><br>
<a name="2125680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >probson</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I have a year 13(17/18) year old young lad who has made a game in Monkey_X. He has made it so that the menu is made up of 4 backgrounds so that when he presses down key it changes image. This works but have to go onto new table in Chrome and back on to see this happen.<br><br>The same happens in his main game. He has a zombie on the screen and the X and Y is updating as if you print them out can see them moving. Again the zombie even though told to move isn't. So you go off tab and back on and it does move. <br><br>How can I fix this? Tried loads to try and move this forward but not sure how.<br><br>Import zombie<br>Import barricade																'Libraries and globals<br>Import mojo		<br>																								'This loads a set of commands to be used throughout the	development of the program <br>Global Game:apocdefence																			'This assigns the name "apocdefence" to the variable Game<br><br>																								'Main program starts here<br>Function Main ()			<br>	Game = New apocdefence																		'This declares the New Game as apocdefence <br>End																								'This marks the End of the function Main<br><br>																								'Main game class<br>Class apocdefence Extends App																	'Indicates that apocdefence App can be edited <br>	Field menu:Image 	<br>	Field arrow:Image  																			'This states that variable menu is an Image 																		<br>	Global GameState:String = "MENU"															'GameState is the current state of the game <br>	Global menu_number:Int	 <br>	Global options_numberx:Int 		<br>	Global options_numbery:Int															'Defines the menu_number as an integer so it can be counted for different images<br>	Field zombie_test:Zombie<br>	Field barricade:Barricade<br>	Field background:Image 	<br>	Field options:Image<br>	Field instructions:Image<br>	<br>	 <br>	Method OnCreate ()																			'Every variable is defined here such as menu and menu_number<br>																								'All the game initialisation goes in here<br>		SetUpdateRate 60																		'How often the program checks for change in the game such as object intersection 																						'This loads the image saved in the pink font colour <br>		menu_number = 0 <br>		options_numberx = 0		<br>		options_numbery = 0	<br>																								'This sets the menu_number to 0 displaying the play game image <br>		zombie_test = New Zombie()<br>		barricade = New Barricade()<br>		menu = LoadImage ("APOCALYPSETITLE-Play Game.png")<br>		options = LoadImage ("apocdefenceoptions.png")<br>		background = LoadImage("apocbackground.png")<br>		instructions = LoadImage("apocinstructions.png")<br>	End<br><br>	Method OnUpdate ()<br>																								'All the game logic goes in here:<br>		Select GameState<br>			Case "MENU"																			'This shows the case as menu so it can be updated <br>					<br>					<br>					If menu_number &lt;3															'Sets a limit so menu_number cannot be greater than 3<br>						If KeyHit (KEY_DOWN) Then menu_number = menu_number + 1					'When down key is pressed then the menu_number will add one<br>					End If<br>						If menu_number &gt;0														'Menu number cannot be lower than 0 <br>						If KeyHit (KEY_UP) Then menu_number = menu_number - 1					'If key is up then the menu_number is changed to menu_number -1<br>					End If<br>				<br>				<br>				<br>				<br>				<br>				<br>				<br>				If menu_number = 0 And  KeyHit (KEY_SPACE) Then 								'Sets case to Playing when space is pressed over "play game"<br>					GameState = "PLAYING"<br>				<br>				Elseif menu_number = 1 And KeyHit (KEY_SPACE) Then 								'Sets Case to options if space is hit over "options"<br>					GameState =  "OPTIONS"<br>					<br>				Elseif menu_number = 2 And KeyHit (KEY_SPACE) Then								'Sets case to instructions changing  <br>					GameState = "INSTRUCTIONS"<br>					<br>				Elseif menu_number = 3 And KeyHit (KEY_SPACE) Then <br>					GameState = "EXIT"<br>				Endif<br>			<br>			<br>			<br>			Case "OPTIONS" 	<br>																								'When the case is options, options image is loaded<br>					<br>				'arrow = LoadImage ("apocdefarrow.png")<br>	<br>																								'Loads arrow when case is options and menu is loade<br>				If options_numberx &lt;2															'Sets a limit so options_number cannot be greater than 3<br>						If KeyHit (KEY_DOWN) Then options_numberx = options_numberx + 1			'When down key is pressed then the options_number will add one<br>					End If<br>						If options_numberx &gt;0													'Options number cannot be lower than 0 <br>						If KeyHit (KEY_UP) Then options_numberx = options_numberx - 1			'If key is up then the options_number is changed to options_number -1<br>					End If<br>					<br>				<br>				If options_numbery &lt;1															'Sets a limit so options_number cannot be greater than 3<br>						If KeyHit (KEY_RIGHT) Then options_numbery = options_numbery + 1		'When down key is pressed then the options_number will add one<br>					End If<br>						If options_numbery &gt;0													'Options number cannot be lower than 0 <br>						If KeyHit (KEY_LEFT) Then options_numbery = options_numbery - 1			'If key is up then the options_number is changed to options_number -1<br>					End If<br>			<br>			<br>			<br>			<br>			<br>				If options_numberx = 0 And options_numbery = 0 Then<br>					<br>					End If<br>				<br>				If options_numberx = 1 And options_numbery = 0 Then<br>				<br>					End If<br>					<br>				If options_numberx = 0 And options_numbery = 1 Then<br>				<br>					End If<br>				<br>				If options_numberx = 1 And options_numbery = 1 Then<br>				<br>					End If<br>					<br>				If options_numberx = 0 And options_numbery = 2 Then<br>				<br>					End If<br>				<br>				If options_numberx = 1 And options_numbery = 2 Then<br>					<br>					End If<br>					<br>				Print(options_numberx)<br>				Print(options_numbery)<br>				<br>				<br>				<br>				<br>				<br>			Case "INSTRUCTIONS"																	'When the case is instructions, the user can return by pressing space<br>				<br>				<br>				If KeyHit(KEY_SPACE) Then GameState = "MENU"<br>			<br>			<br>			<br>			Case "PLAYING"<br>			<br>				zombie_test.move()<br>				barricade.barricadeimage()<br>			<br>				<br>			Case "EXIT"<br>			<br>			<br>			<br>			<br>		End<br>	End<br><br>	Method OnRender ()<br>																								'All the graphics drawing goes in here<br>		Select GameState<br>			Case "MENU"<br>				Cls 0,0,0<br>				DrawImage menu, 0,0<br>			Case "INSTRUCTIONS"<br>				Cls 0,0,0<br>				DrawImage instructions, 0,0<br>			Case "OPTIONS" <br>				Cls 0,0,0<br>				DrawImage options, 0,0<br>				DrawImage arrow, 210,106														'Draws arrows at certain position on screen around word "on" or "off"<br>				DrawImage arrow, 210,178<br>				DrawImage arrow, 210,250<br>			Case "PLAYING" <br>				Cls 0,0,0<br>				DrawImage background, 0,0<br>				DrawImage zombie_test.sprite, zombie_test.zombie_x ,  zombie_test.zombie_y<br>				Print(zombie_test.zombie_x)<br>				'DrawImage barricade.wall, barricade.barricade_x ,  barricade.barricade_y<br>				<br>		<br>				<br>				<br>				<br>			End<br>	End<br>End <br><br></td></tr></table><br>
<a name="2125681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >probson</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to add to this if you put in the print command in playing it only updates when click on and off. Put this in the on update it works no problem. So it's if this part of code only executes when click on and off in on playing state. I just can't work it out at all. <br><br></td></tr></table><br>
<a name="2125683"></a>

<a name="2125684"></a>

<a name="2125685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dubbsta</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="2125686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >probson</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Confused is the full stop meant to mean something? <br><br></td></tr></table><br>
<a name="2125687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >probson</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I see what mean with print command. So can see the X been updated BUT the zombie is still static on screen until you click off window and go back on. Surely someone else has had this issue before and found a solution? <br><br></td></tr></table><br>
<a name="2125689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I created a stripped down version.  It works okay,  Press SPACE at start to go to PLAYING, and the zombie moves.  But if you go to OPTIONS, there's no way back!  Maybe you intend to test for SPACE during options case to get back and do whatever the options do.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Import mojo	
'This loads a set of commands to be used throughout the	development of the program 
Global Game:apocdefence	'This assigns the name "apocdefence" to the variable Game

'Main program starts here
Function Main()	
	Game = New apocdefence	'This declares the New Game as apocdefence 
End	'This marks the End of the function Main

'Main game class
Class apocdefence Extends App	'Indicates that apocdefence App can be edited 

	Global GameState:String = "MENU"	'GameState is the current state of the game 
	Global menu_number:Int	 
	Global options_numberx:Int 
	Global options_numbery:Int	'Defines the menu_number as an integer so it can be counted for different images

	Field xZombie:Int

	Method OnCreate ()	'Every variable is defined here such as menu and menu_number
		'All the game initialisation goes in here
		SetUpdateRate 30	'How often the program checks for change in the game such as object intersection 'This loads the image saved in the pink font colour 
		menu_number = 0 
		options_numberx = 0	
		options_numbery = 0	
		'This sets the menu_number to 0 displaying the play game image 
		xZombie = 100
		
	End

	Method OnUpdate ()
		'All the game logic goes in here:
		Select GameState
			Case "MENU"	'This shows the case as menu so it can be updated 


				If menu_number &lt;3	'Sets a limit so menu_number cannot be greater than 3
					If KeyHit (KEY_DOWN) 
						menu_number = menu_number + 1	'When down key is pressed then the menu_number will add one
						Print menu_number
					End
				End If
				If menu_number &gt;0	'Menu number cannot be lower than 0 
					If KeyHit (KEY_UP) 
						menu_number = menu_number - 1	'If key is up then the menu_number is changed to menu_number -1
						Print menu_number
					End
				End If

				If menu_number = 0 And KeyHit (KEY_SPACE) Then 'Sets case to Playing when space is pressed over "play game"
					GameState = "PLAYING"

				Elseif menu_number = 1 And KeyHit (KEY_SPACE) Then 'Sets Case to options if space is hit over "options"
					GameState = "OPTIONS"

				Elseif menu_number = 2 And KeyHit (KEY_SPACE) Then	'Sets case to instructions changing 
					GameState = "INSTRUCTIONS"

				Elseif menu_number = 3 And KeyHit (KEY_SPACE) Then 
					GameState = "EXIT"
				Endif



			Case "OPTIONS" 
				'When the case is options, options image is loaded

				'arrow = LoadImage ("apocdefarrow.png")

				'Loads arrow when case is options and menu is loade
				If options_numberx &lt;2	'Sets a limit so options_number cannot be greater than 3
					If KeyHit (KEY_DOWN) 
						options_numberx = options_numberx + 1	'When down key is pressed then the options_number will add one
						Print "d"
					End
				End If
				If options_numberx &gt;0	'Options number cannot be lower than 0 
					If KeyHit (KEY_UP) Then options_numberx = options_numberx - 1	'If key is up then the options_number is changed to options_number -1
				End If


				If options_numbery &lt;1	'Sets a limit so options_number cannot be greater than 3
					If KeyHit (KEY_RIGHT) Then options_numbery = options_numbery + 1	'When down key is pressed then the options_number will add one
				End If
				If options_numbery &gt;0	'Options number cannot be lower than 0 
					If KeyHit (KEY_LEFT) Then options_numbery = options_numbery - 1	'If key is up then the options_number is changed to options_number -1
				End If

				Print "options"
				Print(options_numberx)
				Print(options_numbery)





			Case "INSTRUCTIONS"	'When the case is instructions, the user can return by pressing space


				If KeyHit(KEY_SPACE) Then GameState = "MENU"



			Case "PLAYING"
				xZombie += 1


			Case "EXIT"
				Error( "exit" )

		End Select
	End


	Method OnRender ()
		'All the graphics drawing goes in here
		Select GameState
			Case "MENU"
				Cls 0,0,0
			Case "INSTRUCTIONS"
				Cls 0,0,255
			Case "OPTIONS" 
				Cls 0,255,0
			Case "PLAYING" 
				Cls 255,0,0
				SetColor( 255, 255, 255 )
				DrawCircle( xZombie, 100, 10 )
		End Select
	End

End
</textarea><br><br>PS.  Check use of 'codebox'  so you can copy in code and see it properly formatted as above! <br><br></td></tr></table><br>
<a name="2125698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >probson</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Gerry that is great. I found it in the end. It was because he had on update a reference to a method in his class which was using same identifier for a barrier image. As it was swapping the image there it doesn't update on screen until that has updated. <br><br>So will need to get back to drawing board with that part of his game.  Yeah he hadn't implemented that part of the game. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
