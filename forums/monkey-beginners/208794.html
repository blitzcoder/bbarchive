<!DOCTYPE html><html lang="en" ><head ><title >Tiled Backgrounds?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tiled Backgrounds?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Tiled Backgrounds?</a><br><br>
<a name="2091779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Spinal</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just curious, does anyone have a good method for a multi-layered tiles background? It seems that modern software/hardware methods are not geared towards tile maps and displaying a couple of thousand 16x16 sprites it a little crazy.<br><br>I'm currently just looping through the visible portion of my map and throwing sprites onto the screen and using Scale(scaleX,scaleY) to upscale the  20x15 tile screen to fit my resolution.<br>This is OK when using a single layer, but my current game requires at least 4, possibly 8 layers for the background only, then theres character and enemy sprites on top of that.<br><br>I'm not doing anything special with the background, so the tiles don't need to get updated much at all.<br>Does anyone have an example of a good method to display a tiled background at a decent frame rate? What can I do to speed up the process? for example, can I render the whole level to a giant image and just scroll the single image (per layer) around at a decent speed? <br><br></td></tr></table><br>
<a name="2091781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Diddy is free and supports .tmx maps made with Tiled Map Editor, multiple layers and object layers are supported though I can't confirm how many before performance is affected, as well as isometric maps etc<br><br><a href="https://code.google.com/p/diddy/wiki/TileEngine" target="_blank">https://code.google.com/p/diddy/wiki/TileEngine</a><br><br>The huge single image might work depending on the target image sizes, but it's not the best idea.<br>You could design your levels on one massive canvas you find it easier than designing tiles, then chop it into tiles and update/display as per a normal tilemap. <br><br></td></tr></table><br>
<a name="2091783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would suggest you use an atlas if you aren't already.  Essentially you pack all your images (or your tileset at least) into one big image, then copy sections of it rather than the whole thing.  The benefit is that the graphics engine will bundle all (or most) of your drawing commands into one until you change to another texture.<br><br><a href="http://en.wikipedia.org/wiki/Texture_atlas" target="_blank">http://en.wikipedia.org/wiki/Texture_atlas</a><br><br>Some forum posts:<br><a href="http://www.monkey-x.com/Community/posts.php?topic=8414" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=8414</a><br><a href="http://www.monkey-x.com/Community/posts.php?topic=5279" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=5279</a><br><a href="http://www.monkey-x.com/Community/posts.php?topic=6057" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=6057</a><br><br>Diddy example:<br><a href="http://code.google.com/p/diddy/source/browse/examples/SpriteAtlas/spriteAtlas.monkey" target="_blank">http://code.google.com/p/diddy/source/browse/examples/SpriteAtlas/spriteAtlas.monkey</a> <br><br></td></tr></table><br>
<a name="2091872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Spinal</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> So is there any difference between Loadimage with frames and Loadimage as a whole image and using grabimage to get the frames?<br>My current tile sheep is one large image, and i'm loading the tiles like so - <br><pre class=code>
tiles = LoadImage("tileset.png",16,16,256,0)
</pre><br><br>with x1,x2,y1,y2 being one tile either side of the screen<br><pre class=code>
	For y = y1 To y2
		For x = x1 To x2
			t = LevelMap[x+400*y]-1
			s = BackgroundMap[x+400*y]-1
			Local tx = (x*TileSize) - LevX
			Local ty = (y*TileSize) - LevY
			' No parallaxing (yet) so the background can go directly behind the foreground
			If s &gt;= 0 Then DrawImage(tiles,x,y,0,TileSize,TileSize, s)
			If t &gt;= 0 Then DrawImage(tiles,x,y,0,TileSize,TileSize, t)
		Next
	Next

</pre><br><br>I'm getting around 55fps.<br>Anything I can do better? <br><br></td></tr></table><br>
<a name="2091873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the FPS you're getting is more likely to be caused by the computer screen refresh rate than anything else. Is it very different if you do not draw any image on screen? Have you tried with SetUpdateRate(0).<br><br>Grabbing a subimage from another image and drawing it is the same as drawing a portion of an image. No different performance involved.<br><br>Now, if you're using HTML5, be sure to draw all images with color 255,255,255 or it'll slow down your rendering tremendously as HTML5 does not have proper support for "tinting" images. <br><br></td></tr></table><br>
<a name="2091985"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Salmakis</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> on some projects i used to draw 4 layers out of 16x16 tiled images without any performance problems, even when i zoomed out so that 1 tile is then like 4x4 or something (at least on glfw this still was smooth)<br><br>Draw layer after layer, and use only 1 image per layer, so that you only do draw calls with the same image in a row, instead of draw all layers of a tile in 1 run.<br>seems like changing the texture is a bottleneck, and like ziggy said try to avoid colored images on html5, or if you want to use colored images on html5 check out the mungo-fork forums here and how to get the mungo html5target, wich is alot faster at all and dont got any problems with setcolor =) <br><br></td></tr></table><br>
<a name="2093706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>ziggy wrote:</b><br><div class="quote"> Now, if you're using HTML5, be sure to draw all images with color 255,255,255 or it'll slow down your rendering tremendously as HTML5 does not have proper support for "tinting" images. <br></div><br><br><b>ziggy</b><br><br>Could you post example for this? <br><br></td></tr></table><br>
<a name="2093710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Salmakis</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> if y√≥u never use "SetColor" in your Project then you dont Need to worry about this, if yo do so, then make sure to make SetColor(255,255,255,255) just before you doin your render calls <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
