<!DOCTYPE html><html lang="en" ><head ><title >Coloring program using alpha less than 1.0</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Coloring program using alpha less than 1.0</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Coloring program using alpha less than 1.0</a><br><br>
<a name="2094274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >My_Fat_Fox</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working on a simple coloring game. Coloring using an alpha of 1.0 using NoOdle's DrawThickLine function works perfectly, but if I want to use alpha of less than 1.0 I run into problems with the polygons (and end ellipses) overlapping. <br><br>I want to have a single stroke of the finger/mouse (until finger or mouse is up) paint a uniform color. I have had several ideas for achieving this (such as tesselating polygons, one large polygon, writing to an array with alpha of 1 and then changing to alpha less than 1), but nothing I can get working. <br><br>Any ideas would be very much appreciated! <br><br></td></tr></table><br>
<a name="2094294"></a>

<a name="2094295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the best approach is probably to make all the individual polygon segments into one super-polygon, and draw that.  You can fake the end-ellipses with a set of polygon points too.<br><br>(Not sure what you get when super-polygon overlaps itself (user is scribbling) but it might solve part of the problem.  You could always detect scribbling and do it another way.) <br><br></td></tr></table><br>
<a name="2094363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >My_Fat_Fox</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Gerry,<br><br>I have played around with large polygons, but it gets horribly complex very quickly. <br><br>I think I have figured out a better way - in pseudocode:<br><br>Clear the screen.<br><br>SetColor to black and SetAlpha to 1.0.<br><br>Use NoOdle's DrawThickLine function, with the end ellipses set to True, to draw the required lines (they will be black with Alpha = 1.0).<br><br>ReadPixels into a screen-sized integer array (I prefer a 1-dimensional array), Array1<br><br>Set up another screen-sized Boolean array, Array2 (values are either True or False)<br><br>Use a For Next loop to read Array1 and if the value is equivalent to black,  set the equivalent value in Array2 to equal True, if not False.<br><br>Clear screen again and DrawImage your main image.<br><br>SetColor and SetAlpha to required values.<br><br>Use a nested For Next loop to read Array2 (x = 1 to width y = 1 to height) and for each value that is True, DrawPoint(x,y)<br><br>Keep adding to Array2 until the brush stroke is ended i.e. MouseDown() = False.<br><br>On the last time around draw each point and set its value in the Boolean array back to False  ready for the next brush stroke.<br><br>ReadPixels into another screen-sized array and WritePixels into your main image. This saves each brushstroke to the image you are coloring<br><br>Using a Boolean array to store the points that have been painted for each stroke of the brush is much quicker and uses fewer resources than using an array with the full color data for each pixel.<br><br>So far this seems to work OK. <br><br></td></tr></table><br>
<a name="2094362"></a>

<a name="2094361"></a>

<a name="2094417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, if ReadPixels and WritePixels are fast enough, that should be fine.  (I understand some changes have been made recently so they are faster.)<br><br>Making a big polygon from a series of pen positions isn't really that mathematically complicated, though. <br><br></td></tr></table><br>
<a name="2094418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Writing to a texture allows for even more: eg "stamps" (have done that in a simple blitzmax-painter for the youngest of a friend).<br><br>The only problem is speed and memory consumption.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="2094533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >My_Fat_Fox</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gerry Quinn,<br>Reading pixels was getting a bit slow, so I modified the code to make the DrawThickLine function generate the points inside the brush stroke, instead of drawing them, then I put them straight into the Boolean array. <br><br>The math scared me off, but maybe I should look at making a large polygon again. I just figured out how to generate the points within a rectangle, so I should be able to get my head around big polygons :-) It depends if this method is too slow. <br><br>Ron,<br>Thanks for the tip. I haven't looked at textures yet, but I will. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
