<!DOCTYPE html><html lang="en" ><head ><title >Pooling objects with Ignition X</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Pooling objects with Ignition X</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Pooling objects with Ignition X</a><br><br>
<a name="2122896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chrisbck</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm pretty new with Monkey and only recently purchased Ignition X and I'm loving both of them. I've been experimenting with pooling objects to try get my head around it as I would find this a useful feature. <br><br>I put together the following code, based on the examples, which generates a runtime error 'TypeError t_s is null' when the pool is used up. I would expect it to stop when the pool is empty like the Ignition examples?<br><br>[CODEBOX]<br>Strict<br>' Experiment to get pooling function working<br>' it will create a pool of squares and draw where mouse clicks<br><br>Import playniax.ignitionx.engine<br>Import pooledSquareClass<br><br>Global gameScene:Game<br><br>Class Game Extends iEngine<br><br>	Field square:squarePool = New squarePool<br>	Field playfield:iPlayfield<br>	Field layer:iLayer<br><br>	Method OnCreate:Int()<br>	<br>		playfield = New iPlayfield<br>		playfield.AttachLast Self<br><br>		layer = New iLayer<br>		layer.AttachLast playfield<br>		<br>		square.MakePool(10)<br>		<br>		Return 0<br>	End<br>	<br>	Method OnUpdate:Int()<br>	<br>		If TouchDown() square.MakeSquare(playfield.MouseX(), playfield.MouseY(), layer)<br>	<br>		Return 0<br>	End<br>End<br><br>Class MyApp Extends iApp<br><br>	Method OnCreate:Int()<br>		gameScene=New Game<br>		iStart 60<br>			<br>		Return 0<br>	End<br><br>End<br><br>Function Main:Int()<br>	New MyApp<br>	Return 0<br>End<br>[/CODEBOX]<br><br>[CODEBOX]<br>Strict<br>' creates a pool of squares<br><br>Import playniax.ignitionx.engine<br><br><br>Class squarePool<br><br>	Field squares:iPool<br><br>	Method MakePool:Int(poolSize_:Int)<br>		<br>		squares = New iPool(poolSize_)<br><br>		For Local i:= 0 To squares.Length-1<br>			Local square:= New iLayerRectangle<br>			square.Size(30, 30)<br>			squares.Allocate square	 <br>		Next<br>		<br>		Return 0<br>	End<br>	<br>	Method MakeSquare:Int(x_:float, y_:float, layer_:iLayer)<br>		<br>		Local s:= iLayerRectangle(squares.GetAvailable())<br>		<br>		s.AttachLast layer_<br>		s.Position(x_, y_)<br>	<br>		Return 0<br>	End<br>End<br>[/CODEBOX]<br><br>Can anyone explain where I went wrong? <br><br></td></tr></table><br>
<a name="2122895"></a>

<a name="2122898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chrisbck</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Figured it out:<br><br>[CODE]<br>Method MakeSquare:Int(x_:float, y_:float, layer_:iLayer)<br>		<br>		Local s:= iLayerRectangle(squares.GetAvailable())<br>		If s Then<br>		           s.AttachLast layer_<br>		           s.Position(x_, y_)<br>	        EndIf<br><br>		Return 0<br>	End<br>[/CODE]<br><br>Silly mistake:( <br><br></td></tr></table><br>
<a name="2122899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> okay :) <br><br></td></tr></table><br>
<a name="2122932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chrisbck</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Been playing around with this for a while now that I got it running and have a couple of questions if you don't mind.<br><br>I've got that once the Alpha property reaches zero the pooled object is available again, is there any other ways for them to become available without disabling them all, or maybe overwrite one?<br><br>What does the Ghost property do? I didn't notice any difference when i set it.<br><br>Thanks,<br>Chris <br><br></td></tr></table><br>
<a name="2122947"></a>

<a name="2122948"></a>

<a name="2122949"></a>

<a name="2122950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I've got that once the Alpha property reaches zero the pooled object is available again <br></div><br>This is with particles. When alpha is zero the objects is disabled or removed depending on Tattoo flag set or not. So it will be available again when it is disabled.<br><br><div class="quote"> What does the Ghost property do? <br></div><br>I assume your are talking about the sprite Ghost flag? This flag is used by the collision system. By default the ghost colors are set to 255 so nothing will show. To change the colors you can do something like this:<br><pre class=code>
sprite.GhostRed=255
sprite.GhostGreen=0
sprite.GhostBlue=0
</pre><br>Now the sprite will be red for one frame when a collision happens creating a flicker.<br><br>You can also set a ghost image by using GhostImagePointer. <br><br></td></tr></table><br>
<a name="2122957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chrisbck</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay thanks, I'm getting more familiar with it each day, I'm impressed so far and still scratching the surface. <br><br></td></tr></table><br>
<a name="2122969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! Great to hear... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
