<!DOCTYPE html><html lang="en" ><head ><title >Monkey Game Development Book Help</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Monkey Game Development Book Help</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Monkey Game Development Book Help</a><br><br>
<a name="2079947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nick_Ve1</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Everyone,<br>I am taking a Game Development Class, and we are using Monkey Game Development. In chapter 3 it wants to make a game called Rocket Commander it is much like Missile Command. The last part for the bombs in the CheckCollisions Method I am getting a error of cannot convert explosion to float here is the whole Method.<br><br>Method CheckCollisions:Int()<br>	<br>                 Local dist:Float<br>		<br>	For Local explosion := Eachin explosions<br>		dist = GetDistance(cx, cy, explosion.x, explosion.y)<br>			<br>		If dist &lt; explosion Then<br>			bombs.Remove(Self)<br>			game.score += expolsion.score<br>			game.totalBombsDestroyed += 1<br>			explosion.score += 100<br>		Endif<br>	Next<br>		<br>	For Local city := Eachin cities<br>		dist = GetDistance(cx, cy, city.x, city.y)<br>			<br>		If dist &lt; 30 Then<br>			bombs.Remove(Self)<br>			cities.Remove(city)<br>		Endif<br>	Next<br>		<br>	For Local launcher := Eachin launchers<br>		dist = GetDistance(cx, cy, launcher.x, launcher.y)<br>			<br>		If dist &lt; 15 Then<br>			bombs.Remove(Self)<br>			launchers.Remove(launcher)<br>		Endif<br>	Next<br>		<br>	Return True<br>End<br><br>Has anyone worked with this book and can give me some advice. <br><br></td></tr></table><br>
<a name="2079948"></a>

<a name="2079949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't seen the book but from what I can see is that explosion is an object and dist is a float.  maybe it should be dist &lt; explosion.radius? <br>post the explosion class code. maybe it will help making correct conclusion. <br><br></td></tr></table><br>
<a name="2079951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it's a book typing error<br><br>In my code this block is<br><pre class=code>    For Local explosion := Eachin explosions
      dist = GetDistance(cx, cy, explosion.x, explosion.y)
      If dist &lt; 20 Then
        bombs.Remove(Self)
        game.score += explosion.score
        game.totalBombsDestroyed += 1
        explosion.score += 100
      Endif
    Next    </pre> <br><br></td></tr></table><br>
<a name="2079957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks nikoniko for helping out. <br><br></td></tr></table><br>
<a name="2079961"></a>

<a name="2079962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> GetDistance isn't getting the actual distance between 2 points is it? If so, that's horribly inefficient for comparing distance. The book hopefully mentions that square root calculations are very heavy, especially on mobile devices. Always use the squared distance where possible.<br><br><b>Edit:</b> Let me mention that one of my games used the real distance for computations and it stopped the game from displaying more than sixty things on screen at a time without bogging down to a few frames a second. I then switched it over to use squared distances and it allowed me to put thousands of things on screen all at once without this bogging down. <br><br></td></tr></table><br>
<a name="2079963"></a>

<a name="2079964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Goodlookinguy wrote:</b><br><div class="quote">  The book hopefully mentions that square root calculations are very heavy, especially on mobile devices. Always use the squared distance where possible. <br></div><br><br>I am thinking RC is very simple game example and using square root is right as example game engine geometry. Next step - optimization! Use square funct or precalculated table of func (sqrt, sin, cos, etc) for superfast position/distance how we did in pc/xt time without math coprocessor :)<br><br>PS What is smooth font ugly in Internet Explorer?! <br><br></td></tr></table><br>
<a name="2079967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lookup tables are kinda useless now since floating point values are used more often than not.<br><br>Something like this is tons of times faster than getting the real distance and is realistic for use in modern day games. I just hope the book mentions this somewhere along the way.<br><pre class=code>For Local explosion := Eachin explosions
	dist = GetSquaredDistance(cx, cy, explosion.x, explosion.y)
	If dist &lt; 20*20
		bombs.Remove(Self)
		game.score += explosion.score
		game.totalBombsDestroyed += 1
		explosion.score += 100
	End
Next

Function GetSquaredDistance( x1:Float, y1:Float, x2:Float, y2:Float )
	Local distX:Float = x2 - x1
	Local distY:Float = y2 - y1
	Return distX * distX + distY * distY
End</pre> <br><br></td></tr></table><br>
<a name="2079968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Goodlookinguy wrote:</b><br><div class="quote"> Something like this is tons of times faster than getting the real distance and is realistic <br></div><br><br>You're right. It's the good and useful optimization example. <br><br></td></tr></table><br>
<a name="2079999"></a>

<a name="2080000"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> To me<br>dist = GetSquaredDistance(cx, cy, explosion.x, explosion.y)<br>If dist &lt; 20*20<br><br>Looks like a circle to circle collision and could be code to call a function to return a bool<br><pre class=code>
If Circle2Circle(cx, cy, explosion.x, explosion.y,10,10).....

Function Circle2Circle:Bool( x1:Float, y1:Float, x2:Float, y2:Float, r1:Float, r2:Float )
	Local dx:Float = x2 - x1
	Local dy:Float = y2 - y1
	Local ri:Float = r1 + r2
	Return ( (dx * dx) + (dy * dy) &lt;= ri * ri )
End Function</pre><br><br>An interesting article that's worth a read about the <a href="http://www.beyond3d.com/content/articles/8/" target="_blank">origin of the inverse square root function in Quake 3</a> <br><br></td></tr></table><br>
<a name="2079996"></a>

<a name="2079997"></a>

<a name="2079998"></a>

<a name="2079995"></a>

<a name="2080002"></a>

<a name="2080003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's interesting that the code matches up with a circles colliding algorithm. Although I based that algorithm on 2 vectors. And, to be fair, it doesn't actually match up completely.<br><br>This part of the line<br><pre class=code>20*20</pre><br>is precomputed to<br><pre class=code>400</pre><br>I was just doing 20*20 for readability.<br><br><b>Edit:</b> Also, I think just about everyone knows about the invsqrt function after the source code for those large games were released and it was riddled with fowl comments. <br><br></td></tr></table><br>
<a name="2080021"></a>

<a name="2080022"></a>

<a name="2080023"></a>

<a name="2080024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It can also be useful to check the bounding box first:<br><br>' Calculate dx and dy<br>If dx &gt;= - 20 And dx &lt;= 20 And dy &gt;= -20 And dy &lt;= 20<br>If dx * dx + dy * dy &lt;= 20 * 20<br>' Collision happens<br>End<br>End<br><br>Realistically, though, a missile command game is probably testing less than 100 collisions per update, and finicky optimisations are unnecessary on modern machines. <br><br></td></tr></table><br>
<a name="2080717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GuShh</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The quake sources were riddled with expressive comments not fowl! <br><br></td></tr></table><br>
<a name="2080723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Semantics. Still, they were <a href="http://andrewvos.com/2011/02/21/amount-of-profanity-in-git-commit-messages-per-programming-language/" target="_blank">working with C++</a> so I'm not surprised. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
