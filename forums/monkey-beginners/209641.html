<!DOCTYPE html><html lang="en" ><head ><title >Linux: Monkey (the binary file) not running...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Linux: Monkey (the binary file) not running...</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Linux: Monkey (the binary file) not running...</a><br><br>
<a name="2101373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> While the 77a-"free"-Monkey file could be executed without trouble, the one from "Pro 82b" doesn't.<br><br>Seems all needed files are existing<br><pre class=code>
$ ldd Monkey
	linux-vdso.so.1 =&gt;  (0x00007fff981fe000)
	libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f0806551000)
	libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f080624d000)
	libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f0806036000)
	libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f0805c71000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f080679e000)
	libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f080596b000)
</pre><br><br>Ok, so I started "Ted" within the "bin"-folder ... but the "targets" are empty (only "Debug" and "Relase" could get selected).<br><br>So I went to the board and while writing this post here - I tried "./Monkey" again - and this time it started, but again with no targets in the drop down box...<br><br>I recognized "Monkey" (or "Ted") creates a folder within "bin" named "ted_linux_RonnyPC.ini" (RonnyPC is my computer name). Contained is an ini file which lists all potential targets: "" - none.<br><br>Further checks lead me to check folder permissions (as a limitation of a folder is recursively applied to subfolders). I gave the whole "MonkeyXPro82b" folder and all subfolders an widely-ranged 755 ... and now it recognized all potential targets.<br><br>I think such things should be written in the readme of the base folder. As this does not happen with the BlitzMax-downloads, I assume they are packaged differently.<br>Nonetheless there is no need to think of every Linux programmer remembering such small annoyances each time.<br><br>Uhm ya... felt welcomed in a warm and familar way... :-) <br><br></td></tr></table><br>
<a name="2101376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, next step tried: installing android-dev-requirements.<br><br>At first I tried to reuse my libGDX-setup (having NDK, JDK etc installed) but this did not work<br><br><pre class=code>
TRANS monkey compiler V1.80
Parsing...
Semanting...
Translating...
Building...
sh: 1: /bin/ant: not found
TRANS FAILED: Android build failed.
Done.
</pre><br><br>ok ... checked "ant": "JAVA_HOME not set".<br><br>Opened my ".bashrc":<br><pre class=code>
export JAVA_HOME=/my/path/to/jdk_1.7
export PATH=$PATH:my/path/to/jdk/too:/my/path/to/monkeyfree
</pre><br><br>ok, adjusted the monkey path to reflect the new one (pro) - checked.<br>exported java_home manually, tried "ant" and got:<br><br><pre class=code>
$ ant
Buildfile: build.xml does not exist!
Build failed
</pre><br><br>So it seems to find what it should.<br><br>Restarted Monkey/Ted - tried to build and still got the same error.<br>Ok ... /bin/ant is not existing, so how to change the call to /bin/ant  - my ant is in /opt/apache-ant/bin/ant ...<br>But hey, I have an /etc/profile.d/ant.sh -- but this isn't used by Monkey too.<br><br>Ok, so I used that installer too "mxdevinstall" provided here in the forums. It installed the oracle-8-jdk and an default-installer, skipped ant etc. But re-login does not help to convince monkey of finding ant.<br><br>Ah ... and config.linux.txt ... I adjusted the paths there ... but now, again while writing a post, I just tried to append this:<br><br>ANT_PATH="/opt/apache-ant"<br><br>and restarted Monkey ... compiling now!<br><br>But aheem... I pressed "build" ... not "build and execute":<br><br><pre class=code>
....compilation steps omitted

install:
     [echo] Installing /bla/bla.buildv82b/android_new/bin/MonkeyGame-debug.apk onto default emulator or device...
     [exec] error: device not found
     [exec] - waiting for device -
</pre><br><br>Why does a "build" try to deploy the apk to a device?<br><br>I really miss the advanced options of "intellj" here... working together with the android tools and displaying attached devices.<br><br>But at least it seems to compile now....<br><br>Edit: ok, it compiled and when my device was attached, it copied it on the device.<br>Hey it also executed it ... but failed.<br><br>Why doesnt monkey open the failing lines in the monkey-files?<br><br><pre class=code>
I/[Monkey](26140): Monkey Runtime Error : length=3; index=3
I/[Monkey](26140): /bla/digmonkey/base_util_input.monkey&lt;41&gt;
I/[Monkey](26140): /bla/jam.monkey&lt;163&gt;
I/[Monkey](26140): /MonkeyXPro/modules/mojo/app.monkey&lt;105&gt;
</pre><br><br>Shouldnt it open up line 41 of the "base_util_input.monkey"-file ?<br><br>If I am not doing something wrong, this is really something which adds some needed convenience to development (I expect "Jungle" to handle that, but on Linux the clocks tick differently).<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="2101374"></a>

<a name="2101375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can honestly say that I have never had any problems getting Monkey to work with Linux, unless a new Linux distribution is released that throws a spanner in the works.<br><a href="http://www.monkey-x.com/Community/posts.php?topic=7600" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=7600</a><br><br><div class="quote"> Why does a "build" try to deploy the apk to a device? <br></div>That's one for Mark to answer. I'm not sure if it was meant to fire up the Android emulator is a device wasn't attached. But if the emulator is running then it deploys to that instead. <br><br></td></tr></table><br>
<a name="2101379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @dawlane<br>I tried to follow your post (when installing) and checked what it might do different to what I already had done ... even downloaded your script. Thread structure made it a bit hard to recognize what to do for "mint" and not "arch".<br><br>So sorry for not promoting your guide again - it will really do what it should.<br><br>I have to admit that "Mint" isnt perfect for devs, as upgrades (what they disencourage you to do) are not flawless (they break "mintsources" with forgetting to apend the new codenames so you cannot edit package sources via GUI anymore, or "add-add-repository" ...). But I fixed that before, so that shouldn't be an issue.<br><br>What I could imagine as "failure source" is the existence of previously installed SDK/NDK ... but even then: how? SDK was found then, JAVA_HOME was exported (which I had to do manually for libGDX too).<br><br>Only "problem" was "bin/ant" which was not found before... but now this is gone - without being sure whether <b>config.linux.txt:  ANT_PATH="/opt/apache-ant"</b> gets evaluated by Monkey or not (because it wasnt set "empty" by default). I assume it should - because it works now :D<br><br>Edit: App build successfully - on my Android 4.3 device I get sound but no music, on another 4.3 device it plays as it should. As music and sfx are all "ogg" this will create some more headaches to fix.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="2101378"></a>

<a name="2101377"></a>

<a name="2101380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thread structure made it a bit hard to recognize what to do for "mint" and not "arch". <br></div><br>Sorry if it was a bit hard to follow. It had to be written as a rough guide. When you consider on how many targets that Monkey supports and what is is involved to get each software development kit installed on each distribution. There is too much information to convey with the forums limitations, with all the [][/] tags and character limited posting. It gets hard to follow when updating and there is no preview. It also doesn't help me that for some reason the links for focusing on a post always take me to the last bloody page; they never use to.<br><br><b>JDK Tip</b><br>One of the first things to note about the JDK, is that not all distributions can run both the 32bit and the 64bit side by side. If for example if you are using <a href="https://www.mageia.org/en/" target="_blank">Mageia</a> 64bit, then using the 32bit version of the JDK is completely out of the question unless you completely remove the pre-installed 64bit OpenJDK; which in turn will break a hell of a lot of the system. It's not such a problem with the Debian based distributions so far as I can tell.<br><br>Monkey on the other hand as far as I know, doesn't care as long as there is a JDK there to build the apk as it should run on any JVM as long as it isn't calling and CPU native instruction code. This brings us then to the NDK, which as far as I know is still a loose end and as to date I have never seen any information on how to use it with Monkey.<br><br><div class="quote"> without being sure whether config.linux.txt: ANT_PATH="/opt/apache-ant" gets evaluated by Monkey or not <br></div>I believe it does, but I think that that you would be better ensuring that JAVA_HOME and ANT_HOME are exported as well as included in your path in your home directories .profile as you are trying to use a non distribution version of the JDK and ANT. <br><br></td></tr></table><br>
<a name="2101381"></a>

<a name="2101382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for this further going elaboration.<br><br>No I have to find out why one of my devices cannot play multiple sounds simultaneously (music + sfx). Other apps on the device do not have this problem.<br><br><br>Edit: HTML5-mserver has trouble with this pro-version too:<br><pre class=code>
Monkey Runtime Error : Failed to start MServer

{{~~(null)~~}}
</pre><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="2101386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You will have to elaborate on how you are playing the music+sfx. If you are checking for states of the channels or music, then you will more than likely find that the states cannot be determined with Android. I have come across a situation where no sound is played as a result of the next sound trying to use the same channel before the previous has finished playing.<br><br><div class="quote"> Monkey Runtime Error : Failed to start MServer <br></div>Yes I use to have this problem with the old version of Mserver. You could run a HTML5, and Ted would start the server with a browser. But would throw the error if you closed the browser and the server, and then tried to run the HTML again immediately after. Looking at the systems monitor, it appeared that the server was taking it's time shutting down. It may have had something to do with Apache running in the background, but I never bothered to investigate any further. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
