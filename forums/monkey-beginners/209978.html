<!DOCTYPE html><html lang="en" ><head ><title >Load image from memory</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Load image from memory</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Load image from memory</a><br><br>
<a name="2108407"></a>

<a name="2108408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hero</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I want to load my game resources, including graphics, from an encrypted binary container file. I just found that mojo LoadImage only supports loading from a file directly, so I am wondering what the correct way of initializing an image from memory is.<br>Would I have to use CreateImage and WritePixels?<br><br>I did not test this yet, but I have a feeling that this would be kind of slow? Are there any best practices in this regard (except not encrypting the assets)?<br><br>Thanks <br><br></td></tr></table><br>
<a name="2108413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is a mod to support loading images from memory, but it requires a trans recompile iirc.  You'd be going through a lot of trouble just to support this.  It is possible to use CreateImage but then you'd probably want to use it to create an atlas at runtime because of the way texture rendering works (there's a performance hit every time you switch textures).  My suggestion is probably to not bother, or only provide the most basic of munging routines (like glass block mosaics) to thwart casual rippers, or whoever else you're trying to thwart.  You're not going to keep out anyone serious from peeking at the raw assets. <br><br></td></tr></table><br>
<a name="2108422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hero</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info. I guess in this case I am going to use monkey only for some quick prototyping and then port everything over to either blitzmax or c#/XNA.<br><br>I spent $15.000 on the art assets of my game and I am not going to have them just sit there in a folder for anyone to copy with one mouse click. I know that when I store them encrypted someone can still copy them by screen capture but at least then that person has to put some real effort into it in order to digest the animation frames and remove background pixels from foreground sprites and so on. <br><br>Having my assets just sit there unprotected is like leaving my house door wide open and then saying "Well, if someone really wants to steal my stuff he will find a way to break into my house anyways and I should not worry about it in the first place because taking my stuff is illegal non the less."<br><br>Is there a techincal reason to not allow loading images from memory in monkey? Something todo with restrictions of some build targets? Or is there still hope for it in the future (mojo/monkey 2..)?<br><br>Thanks. <br><br></td></tr></table><br>
<a name="2108423"></a>

<a name="2108424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Having my assets just sit there unprotected is like leaving my house door wide open and then saying "Well, if someone really wants to steal my stuff he will find a way to break into my house anyways and I should not worry about it in the first place because taking my stuff is illegal non the less." <br></div><br><br>They don't have to copy by screen capture;  Using an OpenGL or DirectX dumper they can grab your assets from memory unencrypted the same way your game does, they only have to wait for the game to unencrypt the graphics for them.  Conversely, I could tell you that the illusion of security seems more important to your peace of mind towards protecting that 15k investment than the actual security you will be able to get, but that is all a matter of attitude and personal opinion.  I gave you some suggestions on how to minimally thwart casual opportunists;  if you don't think that's good enough then here is the thread I mentioned earlier, so do what you think you must:  <a href="http://www.monkey-x.com/Community/posts.php?topic=9549" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=9549</a><br><br>Alternatively, if you use Mojo2 you can munge your graphics and use a custom shader to fix them at runtime (or again blit to a surface before using).<br><br>If I had to guess a reason that mojo doesn't allow loading images directly from memory, it's possibly due to target restrictions.  Or, perhaps the need for the functionality is overstated and can be inserted anyway (at somewhat increased difficulty) for niche applications, as evidenced by the linked thread. <br><br></td></tr></table><br>
<a name="2108425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hero</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the link. I will definitly test this. <br><br>Can i just modify the monkey source files and then I am good to go or do i need to recompile monkey somehow after making the changes to the soruce code?<br><br>Thanks for your help. <br><br></td></tr></table><br>
<a name="2108577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could turn your images into RAW data (literally a pixel by pixel RGB dump), load it into memory and then use CreateImage and WritePixels to generate the final image.<br><br>A lot of work, for something that can still be broken if someone really wants to. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
