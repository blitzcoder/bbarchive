<!DOCTYPE html><html lang="en" ><head ><title >Just checking about Lists and Garbage Collection</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Just checking about Lists and Garbage Collection</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Just checking about Lists and Garbage Collection</a><br><br>
<a name="2078823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been reading up on the GC just to check my understanding of it is correct (it seems to be pretty much the same as BlitzMax), but I'd like to 100% verify something please:<br><br>If I have a list of objects and I call myList.Clear() it will null all the pointers to the objects in the list and also null any pointers in the objects (that might point to other objects for example) right?<br><br>I don't have to manually call my own Delete() method on each object in the list in order to null pointers in the object, right?<br><br>Same thing for arrays if I get a full array and just go myArray = null or myArray = [] right?<br><br>What about if one of the objects contained an image or sound? In that case I would call Discard() on the image/sound myself as the GC won't clear it, right (or will it)?  Currently I store all my images and sounds in a separate bank and just reference them as needed so it's not an issue, but I'd still like to make sure of the correct method.<br><br>I also gather there are two GC modes that operate either after every OnUpdate or every object allocation.  Which is best of iOS/Android please? Thx<br><br>Many thanks in advance for any advice. <br><br></td></tr></table><br>
<a name="2078822"></a>

<a name="2078821"></a>

<a name="2078838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Garbage collection is handled really well in monkey. You should not worry about it. Whenever something goes out of scope, it gets collected.<br><br>myList.Clear() will null all the pointers to the objects in the list but it will not null any pointers these objects have. This is handled by GC which will also handle out of scope objects resulted by your myList.Clear() as well.<br><br>However, what you said about arrays is correct.Images and Sounds are also handled by GC. But I would not recommend having images and sounds to go out of scope if they are going to use them again as they take longer to allocate memory. <br><br></td></tr></table><br>
<a name="2078839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply.  OK so nulling an array is safe too then, good to know.  <br><br>I only let images/sounds go out of scope when a level or screen isn't needed any more and can be loaded in at a later time. <br><br></td></tr></table><br>
<a name="2078847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> One thing I just noticed for the first time when reading through the docs the other day was the Pool collection type which is basically a statically allocated list, avoiding the GC. <br><br></td></tr></table><br>
<a name="2078851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I made a particle pool as that is the most commonly allocated/deallocated type of object in my games. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
