<!DOCTYPE html><html lang="en" ><head ><title >Anything wrong with ATan ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Anything wrong with ATan ?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Anything wrong with ATan ?</a><br><br>
<a name="2100088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Duke87</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Guys, I'm just coding kind of a Path-System for the Monkey-X Jam for the Vertical game.<br>I just hardcoded 6 Path-Point and stored them within Path[_PathNr][koordinate].<br>_PathNr is the number of the Path, and koorinate can be 0 for the X and 1 for the Y Value.<br><br>X and Y are the koordinates of the Ship that shall move.<br>Then i made something like this within the Update:<br>[Code]<br>Angle = ATan((Y-Path[currPath][1]) / ( X-Path[currPath][0]))<br>		<br>X += EqToFPS(Speed) * Cos(Angle) <br>Y += EqToFPS(Speed) * Sin(Angle)<br>		<br>If ll_Distance(X,Y,Path[currPath][0],Path[currPath][1]) &lt;= 15<br>    currPath +=1<br>Endif<br>[/Code]<br><br>My Ships always find Path 1 correctly but then when they should turn into Path 2, they turn exactly into the oppisite.<br><br>I also made a DrawPath() Function, and the Points are correctly coded.<br><br>Whats the mistake?<br><br>bye Duke <br><br></td></tr></table><br>
<a name="2100091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> For the life of me, I can't remember why this works, but try flipping around your X and Y parameters (Which is divided by what). Or you could flip your uses of 'Cos' and 'Sin', but that tends to be problematic. Also, 'ATan2' is a thing, it does exactly the same thing as 'ATan' for this particular case. It just makes things less cluttered. By the way, <a href="http://www.monkey-x.com/Community/posts.php?topic=9520" target="_blank">this thread might help, regarding way-points</a>. <br><br></td></tr></table><br>
<a name="2100090"></a>

<a name="2100093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Duke87</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank You. yeah i changed to ATan2. and i forgot to declare Angle as a float, so it was just an Int *my fault* i dont know why, but now it Works fine. (just because Angle was no Float? why should it then turn into the opposite direction, makes no sense to me) but  anyway, it works fine for now :D. <br><br></td></tr></table><br>
<a name="2101332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Haven't checked your code, but there's something to bear in mind when using ATan: It only gets correct results for quadrants 1 and 4, while ATan2 will return the correct value (with proper sign) in all 4 quadrants. <br><br></td></tr></table><br>
<a name="2101338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yers, use ATan2 for all general geometric purposes, ATan is just for pure trigonometry really.<br><br>Note that Mark has defined Atan2( x, y ) as ATan( x / y ).  For computational purposes this is identical to the usual Atan2( y, x ) = ATan( y / x ), as only the parameter names change.  But it contradicts the usual interpretation of x and y in the Cartesian plane coordinate system[*].  Just pretend you are using the standard form, and reverse x and y when using it.<br><br>[Of course, Cartesian coordinates still have the Y-axis pointing the opposite way to screen coordinates...] <br><br></td></tr></table><br>
<a name="2101342"></a>

<a name="2101343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Gerry Quinn: Note that Mark has defined Atan2( x, y ) as ATan( x / y ). <br></div><br>I never even noticed that.  I guess it's another non-standard quirk of Monkey.<br>The one that annoys me the most is Shr being arithmetic.  There is no non-arithmetic shift right.  Mark got it right in BlitzMax with Shr and Sar, so I don't know why he didn't bring it through into Monkey too.  Same goes with ATan2 in BlitzMax. <br><br></td></tr></table><br>
<a name="2101353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Duke87</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, the fact that ATan only works for quadrant 1 &amp; 4 would explain a lot. Thank you. Didnt know that yet. Although i fixed it, im glad to know the reason why it had such strange behaviour in some cases. <br><br></td></tr></table><br>
<a name="2101360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not that ATan is wrong - it's correct in trig.  Tan = Sin/Cos has a period of 180 degrees, even though Sin and Cos each have a period of 360 degrees. (ASin and ACos also cannot distinguish every angle of a circle, but in a different way.)<br><br>The value y/x doesn't distinguish between opposite quadrants.  ATan2 takes the signs of y and x into account to distinguish four quadrants, and also deals with any troublesome infinities.<br><br>From the point of view of game physics and geometry, you can probably forget about the existence of anything other than Sin, Cos, and ATan2. <br><br></td></tr></table><br>
<a name="2101359"></a>

<a name="2101356"></a>

<a name="2101357"></a>

<a name="2101355"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
