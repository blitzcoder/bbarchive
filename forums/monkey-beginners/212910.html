<!DOCTYPE html><html lang="en" ><head ><title >I NEED HELP!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >I NEED HELP!</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >I NEED HELP!</a><br><br>
<a name="2127424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CanisLupus</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been making a platform game and when I enter the "PLAYING" GameState, the player seems to react with the lava even though they clearly didn't interfere. WHY?<br><br>This is my code:<br>Import mojo<br><br>Global map:Int[][] = [      [1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,1],<br>                            [1,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,0,0,1,1,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],<br>                            [1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,1,1,1],<br>                            [1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<br>                            [1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1],<br>                            [1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1],<br>                            [1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1],<br>                            [1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1],<br>                            [1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,1,1,1],<br>                            [1,0,0,2,0,0,0,2,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1],<br>                            [1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],<br>                            [1,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1],<br>                            [1,0,0,0,2,0,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],<br>                            [1,0,0,0,1,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,2,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,2,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],<br>                            [1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],<br>                            [1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],<br>                            [1,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,1,1,1,1,1,1,1],<br>                            [1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<br>                            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1] ]<br><br>Const mapwidth:Int=21<br>Const mapheight:Int=110<br><br>Const tilewidth:Int=32<br>Const tileheight:Int=32<br><br>Global mapx:Int=0<br>Global mapy:Int=0<br><br>Global mapsx:Int=0<br>Global mapsy:Int=0<br><br>Global playerimage:Image<br>Global enemyimage:Image<br>Global brick:Image<br>Global spring:Image<br>Global egg:Image<br>Global win:Image<br>Global menu:Image<br>Global gameover:Image<br><br>Global rock_collection:List&lt;ROCK&gt;<br>Global lava_collection:List&lt;LAVA&gt;<br><br>Global life:Int=3<br>Global jump:Sound<br>Global springJump:Sound<br>Global hit:Sound<br><br>Global p:player = New player<br><br>Class MyGame Extends App<br><br>	Global GameState:String = "MENU"<br>	<br>    Method OnCreate()<br>        SetUpdateRate(60)<br>        <br>        menu = LoadImage ("menu.png")<br>        playerimage = LoadImage ("player.png")<br>        p.sprite = playerimage<br>        gameover = LoadImage ("gameover.png")<br>        win = LoadImage("win.png")<br>        brick = LoadImage("brick.png")<br>        spring = LoadImage("spring.png")<br>        egg = LoadImage("egg.png")<br>        jump = LoadSound("jump.ogg")<br>        springJump = LoadSound("FlutterJump.ogg")<br>        hit = LoadSound("Hit.ogg")<br><br>        <br>        rock_collection=New List&lt;ROCK&gt;<br>        rock_collection.AddLast(New ROCK(200,150))<br>		rock_collection.AddLast(New ROCK(400,200))	<br>		<br>		lava_collection = New List&lt;LAVA&gt;<br>		lava_collection.AddLast(New LAVA(0,480))					<br>        <br>    End Method<br>    <br>    Method OnUpdate()<br>    	Select GameState<br>    		Case "MENU"<br>				If KeyHit (KEY_SPACE) Then GameState="PLAYING"<br>				<br>			Case "PLAYING"<br>				If KeyHit (KEY_ESCAPE) Then GameState="MENU"  <br>								<br>				If life = 0 Then <br>					GameState="GAMEOVER"<br>					life = 3<br>				End <br>				<br>				If rectsoverlap(p.x,p.y,p.w,p.h,560,90,32,38) Then GameState = "WIN"<br>				<br>        		p.update <br>        		alignmap<br><br>        		For Local rock:=Eachin rock_collection<br>					rock.Move(-1)<br>					If rock.y&gt;480 Then<br>						rock_collection.Remove rock<br>						rock_collection.AddLast(New ROCK(Rnd(0,400),Rnd(0,200)))<br>					End <br>				End<br>				<br>				For Local lava:=Eachin lava_collection<br>					lava.Move(+.1)<br>				End<br>				<br>				For Local rock:=Eachin rock_collection<br>					If rectsoverlap(p.x,p.y,p.w,p.h,rock.x,rock.y,25,25) Then<br>						PlaySound(hit)<br>						rock_collection.Remove rock<br>						rock_collection.AddLast(New ROCK(Rnd(0,500),Rnd(0,200)))<br>						life -=1<br>					End<br>				Next<br>				<br>				For Local lava:=Eachin lava_collection<br>					If rectsoverlap(p.x,p.y,p.w,p.h,lava.x,lava.y,640,200) Then<br>						PlaySound(hit)<br>					End<br>				Next<br>				<br>				<br>        	Case "GAMEOVER"<br>        		If KeyHit (KEY_TAB) Then GameState = "MENU"<br>        	Case "WIN"<br>        		If KeyHit (KEY_TAB) Then GameState = "MENU"<br>        End<br><br>    End Method<br>    Method OnRender()<br>    	Select GameState<br>			Case "MENU"<br>				DrawImage menu, 0,0<br>			Case "PLAYING"<br>				Cls 0,0,0<br>				p.draw<br>        		drawmap<br>        		For Local rock:=Eachin rock_collection<br>					DrawImage rock.sprite, rock.x, rock.y<br>					Next<br>				For Local lava:=Eachin lava_collection<br>					DrawImage lava.sprite, lava.x, lava.y<br>					Next<br>				SetColor 255,255,255<br>        		DrawText "live = "+Int(life),0,0<br>       		Case "GAMEOVER"<br>       			DrawImage gameover,0,0<br>       		Case "WIN"<br>       			Cls 0,250,154<br>       			DrawImage win,0,0<br>        End<br>    End Method<br>End Class<br><br><br>Class player    <br>    Field x:Float=32<br>    Field y:Float=3300<br>    Field w:Int=32<br>    Field h:Int=48<br>    Field incy:Float=0<br>    Field isjumping:Bool = False<br>    Field sprite:Image<br>    Method update()<br>        ' Here the springy is handled<br>        If isjumping = True<br>            If incy&gt;0<br>                If psc(0,1) = True<br>                    incy=-5<br>                End If<br>            End If<br>        End If<br>        'Left and Right movement<br>        If KeyDown(KEY_RIGHT)<br>            For Local i=0 Until 4 ' move with 4 pixels at a time<br>                If ptc(1,0) = False<br>                    x+=1<br>                End If<br>            Next<br>        End If<br>        If KeyDown(KEY_LEFT)<br>            For Local i=0 Until 4<br>                If ptc(-1,0) = False<br>                    x-=1<br>                End If<br>            Next<br>        End If<br>        'player gravity part<br>        'if in the air and not in jump<br>        If isjumping = False<br>            If ptc(0,1) = False<br>                isjumping=True<br>                incy=0<br>            End If<br>        End If<br>        ' jump<br>        If KeyDown(KEY_SPACE)<br>        	PlaySound(jump)<br>            If isjumping = False<br>                isjumping = True<br>                incy=-4<br>            End If<br>        End If<br>        ' if we are in a jump/falling down<br>        If isjumping=True<br>            If incy&gt;=0 'if we are going down<br>                If incy&lt;4 Then incy+=.1<br>                For Local i=0 Until(incy)<br>                    If ptc(0,1) = False<br>                        y+=1<br>                    Else<br>                        isjumping = False<br>                    End If<br>                Next<br>            End If<br>            If incy&lt;0 'if we are going up<br>                incy+=.1<br>                For Local i=0 Until Abs(incy)<br>                    If ptc(0,-1) = False<br>                        y-=1<br>                    Else<br>                        incy=0<br>                    End If<br>                Next<br>            End If<br>        End If<br>    End Method<br>    Method draw()<br>		DrawImage p.sprite, p.x, p.y<br>	End Method<br><br>End Class<br><br>Class ROCK<br>	Field sprite:Image=LoadImage("rock.png")<br>	Field x:Float<br>	Field y:Float<br>	Method New(x_spawn:Float,y_spawn:Float)<br>		x = x_spawn<br>		y = y_spawn<br>	End<br>	Method Move(y_distance:Float)<br>		y-=y_distance<br>	End<br>End<br><br>Class LAVA<br>	Field sprite:Image=LoadImage("lava.png")<br>	Field x:Float<br>	Field y:Float<br>	Method New(x_spawn:Float ,y_spawn:Float )<br>		x = x_spawn<br>		y = y_spawn<br>	End<br>	Method Move(y_distance:Float)<br>		y-=y_distance<br>	End<br>End<br><br><br>'player collide with solid blocks true/false<br>Function ptc:Bool(offsetx:Int=0,offsety:Int=0)<br>    Local cx = (p.x+offsetx)/tilewidth+mapx<br>    Local cy = (p.y+offsety)/tileheight+mapy<br>    For Local y2=cy-1 Until cy+4<br>    For Local x2=cx-1 Until cx+4<br>        If x2&gt;=0 And x2&lt;mapwidth And y2&gt;=0 And y2&lt;mapheight<br>            If map[y2][x2] = 1 <br>                Local x3 = (x2-mapx)*tilewidth-32+mapsx<br>                Local y3 = (y2-mapy)*tileheight+mapsy<br>                If rectsoverlap(p.x+offsetx,p.y+offsety,p.w,p.h,x3,y3,tilewidth,tileheight) = True<br>                    Return True<br>                End If<br>            End If<br>        End If<br>    Next<br>    Next<br>    Return False<br>End Function<br><br>'player springy collision<br>Function psc:Bool(offsetx:Int=0,offsety:Int=0)<br>    Local cx = (p.x+offsetx)/tilewidth+mapx<br>    Local cy = (p.y+offsety)/tileheight+mapy<br>    For Local y2=cy-1 Until cy+4<br>    For Local x2=cx-1 Until cx+4<br>        If x2&gt;=0 And x2&lt;mapwidth And y2&gt;=0 And y2&lt;mapheight<br>            If map[y2][x2] = 2<br>                Local x3 = (x2-mapx)*tilewidth-32+mapsx<br>                Local y3 = (y2-mapy)*tileheight+mapsy<br>                If rectsoverlap(p.x+offsetx,p.y+offsety,p.w,p.h,x3,y3+tileheight/2,tilewidth,tileheight/2) = True<br>                	PlaySound(springJump)<br>                    Return True<br>                End If<br>            End If<br>        End If<br>    Next<br>    Next<br>    Return False<br>End Function<br><br>Function drawmap:Void()<br>    For Local y=0 To 14<br>    For Local x=0 To 20<br>        Local x1 = ((x*tilewidth)+mapsx)-tilewidth<br>        Local y1 = ((y*tileheight)+mapsy)<br>        Select map[y+mapy][x+mapx]<br>            Case 1<br>            	DrawImage(brick,x1,y1)<br>            Case 2<br>            	DrawImage(spring,x1+3,y1+16)<br>            Case 3<br>            	DrawImage(egg,x1,y1-2)<br>          End Select<br>     Next<br>     Next<br>     <br>End Function<br><br><br><br>Function rectsoverlap:Bool(x1:Int, y1:Int, w1:Int, h1:Int, x2:Int, y2:Int, w2:Int, h2:Int)<br>    If x1 &gt;= (x2 + w2) Or (x1 + w1) &lt;= x2 Then Return False<br>    If y1 &gt;= (y2 + h2) Or (y1 + h1) &lt;= y2 Then Return False<br>    Return True<br>End Function<br><br>Function alignmap:Bool()<br>		For Local i=0 Until 4<br>        If p.x &gt; DeviceWidth / 2<br>            If mapx+20 &lt; mapwidth-1<br>                mapsx-=1<br>                If mapsx &lt; 0 Then <br>                    mapsx = 31<br>                    mapx += 1<br>                Endif<br>                p.x-=1<br>            End If<br>        End If<br>        Next<br><br>        For Local i=0 Until 4<br>        If p.x &lt; DeviceWidth / 2<br>            If mapx &gt; 0<br>                mapsx+=1<br>                If mapsx &gt; 32 Then <br>                    mapsx = 0<br>                    mapx -= 1<br>                Endif<br>                p.x+=1<br>            End If<br>        End If<br>        Next<br>        <br>        ' scrolling down<br>        For Local i=0 Until 16<br>        If p.y &gt; DeviceHeight / 2<br>            If mapy+14 &lt; mapheight-1<br>                mapsy-=1<br>                If mapsy &lt; 0 Then <br>                    mapsy = 31<br>                    mapy += 1<br>                Endif<br>                p.y-=1<br>            End If<br>        End If<br>        Next<br>        ' scrolling up<br>        For Local i=0 Until 16<br>        If p.y &lt; DeviceHeight / 2<br>            If mapy &gt; 0<br>                mapsy+=1<br>                If mapsy &gt; 31 Then <br>                    mapsy = 0<br>                    mapy -= 1<br>                Endif<br>                p.y+=1<br>            End If<br>        End If<br>        Next<br>End Function<br><br>Function Main()<br>    New MyGame()<br>End Function <br><br></td></tr></table><br>
<a name="2127425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nobody's going to debug all that by eye, and without your images etc. it can't run.<br><br>I do notice the lava sections are rather large:<br>rectsoverlap(p.x,p.y,p.w,p.h,lava.x,lava.y,640,200) <br>Is this intended?<br><br>Anyway, the easiest way to find is to put in some print commands that print out the player and lava data when they interact.  That should probably tell you whatever is where it is not supposed to be... <br><br></td></tr></table><br>
<a name="2127426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CanisLupus</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nevermind, I just added an If that make sure the player only dies after touching the lava the second time. Thanks anyway. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
