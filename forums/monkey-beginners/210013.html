<!DOCTYPE html><html lang="en" ><head ><title >Identifier 'ObjectEnumerator' not found</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Identifier 'ObjectEnumerator' not found</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Identifier 'ObjectEnumerator' not found</a><br><br>
<a name="2108919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aim</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Screenshot <a href="https://yadi.sk/i/ydsNjy3riL5FB" target="_blank">https://yadi.sk/i/ydsNjy3riL5FB</a><br>what could be the problem? help me plz <br><br></td></tr></table><br>
<a name="2108921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aim</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> problem resolved itself. But I noticed that my game is continually increasing memory on 4 KB. In addition to the text output in the program nothing (DrawText). What do you think about this? <br><br></td></tr></table><br>
<a name="2108924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aim</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> And how to free up memory? <br>List.RemoveEach and List.Clear not free downloaded memory.<br>I dont understand for this <br><br></td></tr></table><br>
<a name="2108936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What makes you think your program does not free memory? <br><br></td></tr></table><br>
<a name="2108939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aim</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> the amount of memory in task Manager <br><br></td></tr></table><br>
<a name="2108952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bitJericho</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I looked at the code in list.monkey and it seems like the references are removed the but data is not, so the garbage collector probably won't do much for you. The relevant code is in the class Node, and is this:<br><br><pre class=code>
	Method Remove()
#If CONFIG="debug"
		If _succ._pred&lt;&gt;Self Error "Illegal operation on removed node"
#Endif
		_succ._pred=_pred
		_pred._succ = _succ
	End Method
</pre><br><br>If you consider this for a moment, you'll see this is a linked list, and it's taking it's predecessor and successor out. It can't take itself out. Self=null is not valid. What you can do is null the data you're storing out before you remove the list item. For example, in the case of a string list, just make the string blank.<br><br>Actually, I was thinking about this some more and perhaps this is a bug. I think method could null itself before it deletes its own references:<br><br><pre class=code>
	Method Remove()
#If CONFIG="debug"
		If _succ._pred&lt;&gt;Self Error "Illegal operation on removed node"
#Endif
		Self._data =Null
		_succ._pred=_pred
		_pred._succ=_succ
	End Method
</pre><br><br>However, this fails on stringlists, because you can't null strings:<br><br><a href="http://www.monkey-x.com/Community/posts.php?topic=3150&amp;post=32880" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=3150&amp;post=32880</a><br><br>Best bet is just to null your data before you delete it, even though it goes against the general rule stated in the monkey help which is "ignore the garbage collector".<br><br>Lastly, since this does erase all references to itself I'm not sure why the GC isn't taking it out. Perhaps someone more familiar with the inner workings of the GC can comment on that. <br><br></td></tr></table><br>
<a name="2108951"></a>

<a name="2108950"></a>

<a name="2108948"></a>

<a name="2108949"></a>

<a name="2108947"></a>

<a name="2108959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright, I'll get this out of the way now:<br><br>@bitJericho: That method you posted removes the object in question (The 'Node' object) from the list by removing all references to itself. It does this by taking the two references on either side, and "stitching them together" (Having them reference each other), thus making the original 'Node' object no longer referenced. Since it isn't referenced anywhere, it gets deleted when the garbage collector sees fit.<br><br>@Aim: "<b><i>But wait, there's no delete/explicit "nulling" here.</i></b>" - That's the point. The garbage collector takes care of it. On most targets, Monkey uses a deterministic approach to reference validation, meaning that a certain amount of time will be used every update to collect garbage. Because of this, memory usage can go up. "<b><i>But, hang on</i></b>", you ask,  "<b><i>wouldn't it be better to get rid of the internal data anyway, since it can't be referenced?</i></b>" - The answer is no. That node could very well be referenced, thanks to several methods previously used, meaning you could corrupt routines using the node elsewhere (Even if the links associated are undefined). The standard 'Node' classes are usually "read-only", using properties to achieve this. This means it's simple enough to delegate them, and not lose sleep over it.<br><br>So, the real question is: "<b><i>What's up with the 'String' / 'Object' / whatever it was referencing?</i></b>" - That element will be removed automatically by the garbage collector using reference counting. You don't need to make a "blank" 'String', you don't need to set the <i>reference</i> to 'Null', it'll be taken care of when the GC gets to it.<br><br>There are times when using large resources and native functionality when manually discarding is beneficial, but those situations should be as controlled as possible. Monkey (MX2 may fix this) doesn't have destructors, so this is the best option we have.<br><br>Okay, so what's up with the Task Manager? Nothing, for the most part. Things are garbage collected <i>slowly</i>, but in most cases, Monkey will reduce the memory consumption. The memory usage in the Task Manager on Windows is also a bit problematic. You see, the memory usage of a program isn't always the actual usage. On x86 and x64, you have <i>virtual</i> memory, which is handled at user-level (Where your code runs), that is separated into "pages". Pages are uniform chunks of memory that get represented in actual RAM as the operating system (Heap) sees fit. Basically, on the CPU (These days), your hardware would perform address translation. So, even though your pointers (Or in this case, references) describe "real memory", that address still gets translated into the real address space.<br><br>Windows uses what's called a working-set, this is system managed (Unless manually changed), and it basically dictates what pages your program is given. For best possible performance, your OS tries to delegate as many pages as it can within reason. When a program uses a lot of allocations (Uses of 'New'), the OS is more likely to statically give you a lot of pages. If your program doesn't have a lot of pages, then when you make a new allocation, it could mean the system will stall. By stall, I mean it'll freeze, reorder pages to be best represented in cache, including reordering other programs' pages, then continue. This is usually described as a page-miss (Or similar), where pages need to be managed by the OS. This also includes loading to and from your page file. Just think of a page file as a table of pages and their contents, which can be streamed to and from your hard drive or SSD.<br><br>That should give you a rough idea of why Windows goes crazy about memory usage of garbage collected programs. The numbers are accurate, it's just that calling 'free', 'delete' (Or anything else like that) isn't necessarily going to help, due to the predictive nature of heaps. That being said, Windows is usually pretty good about reducing page allocation. But it's been notorious for bad paging when it comes to disk activity, and stalling the entire system trying to reorganize itself.<br><br>That was a VERY basic explanation about paging, but it's the basic concept. Things get collected, but that doesn't mean Windows knows what's going on. Just realize that if your program's using a lot of memory, and you don't have gigantic buffers, Windows can probably reduce your working set to something reasonable at a later point.<br><br><b>For more information on Monkey's garbage collection, you can view some of <a href="http://www.monkey-x.com/Community/posts.php?topic=9892#106724" target="_blank">my posts here</a> (And beyond).</b> <br><br></td></tr></table><br>
<a name="2108958"></a>

<a name="2108957"></a>

<a name="2108956"></a>

<a name="2108955"></a>

<a name="2108954"></a>

<a name="2108953"></a>

<a name="2108977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aim</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, i have noticed a sharp drop in memory consumption. However, the total amount of memory is still more. I understand this problem Windows.<br>Thank you all for the answers. And excuse me for my English, I use online translator :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
