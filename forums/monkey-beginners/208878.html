<!DOCTYPE html><html lang="en" ><head ><title >Float to n decimals</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Float to n decimals</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Float to n decimals</a><br><br>
<a name="2092964"></a>

<a name="2092965"></a>

<a name="2092966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >yiotoo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am trying to transform a random number to a float with 1 decimal.<br><br>so i call the function this way<br><pre class=code>
Gravidade = Round(Rnd(1, 20), 1)
</pre><br><br>and the function is (found it on <a href="http://www.monkey-x.com/Community/posts.php?topic=753)" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=753)</a><br><pre class=code>
Function Round:Float(N:Float, DecimalPlaces:Int)
	Return Float(Int(N * Pow(10.0,DecimalPlaces))) / Pow(10.0,DecimalPlaces)
End Function
</pre><br><br>but it is not working, so i replaced the function for this (same but with steps)<br><br><pre class=code>
Function Round:Float(N:Float, DecimalPlaces:Int)
		Local i:Int
		Local j:Float
		Local jj:Float
		Print "N= " + N
		i = Int(N * Pow(10.0, DecimalPlaces))
		Print "i= " + i
		j = Float(i)
		Print "j= " + j
		jj = j / Pow(10.0, DecimalPlaces)
		Print "jj= " + jj
		
		Return jj
	
	
End Function
</pre><br><br>And i am obtening this results:<br><br>N= 1.492829442024231<br>i= 14<br>j= 14.0<br>jj= 1.3999999761581421<br><br>N= 11.15460205078125<br>i= 111<br>j= 111.0<br>jj= 11.100000381469727<br><br>N= 2.9717435836791992<br>i= 29<br>j= 29.0<br>jj= 2.9000000953674316<br><br>the number seems too close , but i can't figured out<br>How can i get a float with like 15,4 or 15,34? <br><br></td></tr></table><br>
<a name="2092967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can't control the number of decimals on any float. That's how they're computed and stored. See this: <br><br><a href="http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems" target="_blank">http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems</a><br><br>So, if you want a fixed number of digits of precision, I would recommend you to use Integer variables to store your data multiplied per 10, and just add a dot before last digit when showing this data to screen. Divide all operations that may require it by 10.0 for internal calculations. I'm afraid that's the most reliable way (paired with proper rounding). <br><br></td></tr></table><br>
<a name="2092969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >yiotoo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> that is sad, but Ty :) <br><br></td></tr></table><br>
<a name="2092973"></a>

<a name="2092974"></a>

<a name="2092975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >yiotoo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to transform the number int into an array of string, to put the dot?<br>I am having difficult to put the dot, the number could bel big or small, and has different distance between the numbers . <br><br></td></tr></table><br>
<a name="2092983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is the method I use<br><br><pre class=code>
Function FloatToString$(f#)
	Local sign$
	If f&lt;0
		f=-f
		sign="-"
	Endif
	Local i=f*10
	Local s$=i
	Local l=s.Length-1
	If l=0
		Return sign+"0."+s
	Endif
	Return sign+s[..l]+"."+s[l..]	
End Function

Function Main()
	Print FloatToString(0)
	Print FloatToString(0.1)
	Print FloatToString(-0.1)
	Print FloatToString(10.1)
	Print FloatToString(22)
End
</pre> <br><br></td></tr></table><br>
<a name="2092986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >yiotoo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks very much!! <br><br></td></tr></table><br>
<a name="2092990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> and slightly modified:<br><br><pre class=code>
Function FloatToString$(f#,dp)
	Local sign$
	If f&lt;0
		f=-f
		sign="-"
	Endif	
	Local pow=Pow(10,dp)
	Local i=f*pow
	Local s$=i
	Local l=s.Length-dp
	If l=0
		Return sign+"0."+s
	Endif
	If l&lt;0
		Return sign+"0."+"00000"[..-l]+s
	Endif	
	Return sign+s[..l]+"."+s[l..]	
End Function

Function Main()
	Local f#=1.0/10
	Print ""+f
	Print FloatToString(f,1)
	Print FloatToString(0.0,1)
	Print FloatToString(-f,1)
	Print FloatToString(10+f,1)
	Print FloatToString(22,1)
End
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
