<!DOCTYPE html><html lang="en" ><head ><title >vector movement question, movement don't stop</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >vector movement question, movement don't stop</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >vector movement question, movement don't stop</a><br><br>
<a name="2099315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> H!<br><br>Its a long time ago that I used Vectors, I hope that this is the correct way of using them.<br>The final goal is to move a object from A to Mouse Click X,Y and then stop.<br><br>I draw the image like this at the moment.<br><pre class=code>
DrawImage img, Position.X-(img.Width()/2), Position.Y-(img.Height()/2), frame
</pre><br><br>But where i'm stuck is that it has to move to my mouse x,y click.<br>It does, but its stuttering at the end, because at the that point its still adding direction.<br>Because I can't detect when its at the endpoint.<br><br><pre class=code>
Destination = New Vector(90,90) 'simulate a mouse click'
Direction = Destination.Subtract(Position)

Print Direction.Length

 ' never &lt;= 0 
If Direction.Length&lt;=0 Or Position.DistanceTo(Destination)&lt;=0
    Print "Stop"
Else
    Direction.Normalize()
    Direction.Multiply(dt.delta)	' delta fix
    Position.Add(Direction)
End
</pre><br><br>Output<br>56.56854248046875<br>55.608543395996094<br>52.848545074462891<br>52.848545074462891<br>52.548545837402344<br>51.528545379638672<br>50.568546295166016<br>49.608547210693359<br>48.528549194335938<br>47.568550109863281<br>46.608551025390625<br>45.588550567626953<br>44.568550109863281<br>43.608551025390625<br>42.528553009033203<br>41.568553924560547<br>40.548553466796875<br>39.528553009033203<br>38.448554992675781<br>37.548557281494141<br>36.528556823730469<br>35.568553924560547<br>34.548549652099609<br>33.588542938232422<br>32.568538665771484<br>31.548532485961914<br>30.528528213500977<br>29.568523406982422<br>28.548519134521484<br>27.528514862060547<br>26.568510055541992<br>25.548505783081055<br>24.528499603271484<br>23.568496704101562<br>22.548490524291992<br>21.58848762512207<br>20.568483352661133<br>19.548477172851562<br>18.588474273681641<br>17.56846809387207<br>16.608463287353516<br>15.528469085693359<br>14.568465232849121<br>13.548460006713867<br>12.528454780578613<br>11.568450927734375<br>10.548445701599121<br>9.5884418487548828<br>8.5684366226196289<br>7.5484318733215332<br>6.5284266471862793<br>5.568422794342041<br>4.5484180450439453<br>3.5284128189086914<br>2.568408727645874<br>1.5484037399291992<br>0.58839964866638184<br>0.43160530924797058<br>0.52839875221252441<br>0.49160623550415039<br>0.52839875221252441<br>0.49160623550415039<br>0.4683978259563446<br>0.55160719156265259<br>0.4683978259563446<br>0.55160719156265259<br>0.40839689970016479<br>0.61160808801651001<br>0.40839689970016479<br>0.49160623550415039<br>0.58838886022567749<br>0.43161609768867493<br>0.52838796377182007<br>0.43161609768867493<br>0.64837902784347534<br>0.31162503361701965<br>0.70837992429733276<br>0.25162410736083984<br>0.76838088035583496<br>0.25162410736083984<br>0.76838088035583496<br>0.19162318110466003<br>0.82838177680969238<br>0.19162318110466003<br>0.76838088035583496<br>0.25162410736083984<br>0.76838088035583496<br>0.19162318110466003<br>0.82838177680969238<br>0.19162318110466003<br>0.76838088035583496<br>0.25162410736083984<br>0.70837992429733276<br>0.31162503361701965<br>0.70837992429733276<br>0.25162410736083984<br>0.76838088035583496<br>0.25162410736083984<br>0.76838088035583496<br>0.19162318110466003<br>0.82838177680969238<br>0.19162318110466003<br>0.76838088035583496<br>0.25162410736083984<br>0.70837992429733276<br>0.31162503361701965<br>0.70837992429733276<br>0.31162503361701965<br>0.64837902784347534<br>0.43161609768867493<br>0.46838703751564026<br>0.55161798000335693<br>0.46838703751564026<br>0.55161798000335693<br>0.40838611125946045<br>0.61161887645721436<br>0.34838518500328064<br>0.67161983251571655<br>0.34838518500328064<br>0.67161983251571655<br>0.28838425874710083<br>0.73162072896957397<br>0.28838425874710083<br>0.67161983251571655<br>0.34838518500328064<br>0.67161983251571655<br>0.28838425874710083<br>0.73162072896957397<br>0.28838425874710083<br>0.67161983251571655<br>0.34838518500328064 <br><br></td></tr></table><br>
<a name="2099319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Duke87</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you shlould try something like &lt;= 1.3 (or even better: smaller than your delta-timing-step value).<br>I guess it's because, the chance the distance will be exactly 0.0 or even less is like 0,0000000000000000000000001%.<br>Because that would mean, that your <br>" Direction.Multiply(dt.delta)	' delta fix<br>    Position.Add(Direction)" will be exactly(!!!) the same value, than your Distance is. <br>It will add your vector*delta-step, so if the distance is like 0.5 (from left) it will add something like (1.1Pxl), so now your object is like 0.6Pxl on the right side, now it will change the vector and add again something like 1.1Pxl and move again to the left, now its again something like 0.5 Pxl on the left and so on and so on.<br><br>Edit:<br>Maybe try Position.DistanceTo(Destination)&lt;= dt.delta<br>or something like this <br><br></td></tr></table><br>
<a name="2099318"></a>

<a name="2099321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info Duke87<br>I did copy past to check If Position.DistanceTo(Destination)&lt;=dt.delta to check if that was the answer, but it's not :(<br><br>Going to try other things now ;) <br><br></td></tr></table><br>
<a name="2099322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Duke87</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> try &lt;= 1.5.<br>I'm not sure what dt.delta is. the value that i mean that has to be checked, is the delta step- value. the Pixels you shift your Object per Frame. <br><br></td></tr></table><br>
<a name="2099331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> dt.delta would be a delta facotor if your using delta time, can you post your full source or a working example ?<br><br>also If Direction.Length&lt;=0 will not be met because the output your showing is trending toward not reaching zero you can do either..<br><br>if Direction.Length&lt;1 which I assume would be 1 or there abouts.<br><br>or <br><br>if Int(Direction.Length&lt;=0) then . &lt;&lt; Typecast the float to an int to get rid of the unneeded decimals. <br><br></td></tr></table><br>
<a name="2099335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> See if that Helps:<br><pre class=code>
Import mojo

Function Main()
	New Game
End Function

Class Game Extends App

	Field Direction:Vector
	Field Position:Vector
	Field Destination:Vector
	Field v1:Vector
	Field v2:Vector
	
	Method OnCreate()
		Destination = New Vector(250,250) 'simulate a mouse click'
		Position = New Vector(90,90)
		
		SetUpdateRate 30
		
	End Method
	
	Method OnUpdate()
		Direction = New Vector(Destination).Subtract(Position)
		v1 = New Vector(Direction)		
		Direction.Normalize()
		Direction.Multiply(1.5)	' delta fix
		Position.Add(Direction)
		v2 = New Vector(Destination).Subtract(Position)
		If v2.DotProduct(v1)&lt;= 0.0 Error "Found collision" 
	End Method
	
	Method OnRender()
		Cls()
		DrawCircle Position.x,Position.y,10
		DrawRect Destination.x-4,Destination.y-4,8,8
	End Method
	
End Class

Class Vector
	Field x:Float
	Field y:Float
	
	Method New(x:Float,y:Float)
		Self.x = x
		Self.y = y
	End Method
	
	
	Method New(v:Vector)
		Self.x = v.x
		Self.y = v.y
	End Method
	
	Method Add:Vector(x:Float,y:Float)
		Self.x += x
		Self.y += y
		Return Self
	End Method
	
	Method Add:Vector(v:Vector)
		Self.x += v.x
		Self.y += v.y
		Return Self
	End Method
	
	Method Subtract:Vector(v:Vector)
		Self.x -= v.x
		Self.y -= v.y
		Return Self
	End Method
	
	Method Multiply:Vector(value:Float)
		Self.x *= value
		Self.y *= value
		Return Self
	End Method

	Method Multiply:Vector(v:Vector)
		Self.x *= v.x
		Self.y *= v.y
		Return Self
	End Method
	
	Method Divide:Vector(value:Float)
		Self.x /= value
		Self.y /= value
		Return Self
	End Method
	
	Method DotProduct:Float(v:Vector)
		Return Self.x * v.x + Self.y * v.y
	End Method

	Method Normalize:Vector()
		Divide(Magnitude())
		Return Self
	End Method
		
	Method MagnitudeSquare:Float()
		Return Self.x * Self.x + Self.y * Self.y
	End Method
	
	Method Magnitude:Float()
		Return Sqrt(MagnitudeSquare())
	End Method
	
End Class
</pre> <br><br></td></tr></table><br>
<a name="2099334"></a>

<a name="2099333"></a>

<a name="2099332"></a>

<a name="2099349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just for the record, Taiphoz, your cast was casting the boolean result of the expression, simple oversight. Also, static casting tends to be inefficient for that sort of thing, you should be using 'Ceil' and 'Floor' to approximate the position. I should also mention that Jesse's example, though potentially working, is inefficient. And when it comes to math, performance needs to be optimal. In addition to that, making new objects every update is a nightmare on the Android targets. It's best to keep this to enumerators (Even that can be a problem at times; some of my own code caches enumerators). Just because you're dealing with fields, that doesn't mean 'New' will function differently; they're not scope-allocated, they're references.<br><br>Also, Jesse, that example works, but his problem is the inconsistent position afterward. Comment out your 'Error' line, and you'll see the problem. Other than that, solid example.<br><br>Okay, so as I said above, and to some extent what Taiphoz said, use 'Ceil' and 'Floor'. Basically, taking Jesse's example, add this 'If' statement around his 'OnUpdate' routine:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' Something to this effect.
If (Ceil(Position.x) &lt;&gt; Ceil(Destination.x) And Ceil(Position.y) &lt;&gt; Ceil(Destination.y)) Then
Endif
</textarea><br><br>Note that 'Ceil' and 'Floor' can sometimes be problematic for exact comparison, so you might still need to approximate (Distance check using a "delta" value. Something like: ((X-Y) &lt; 0.5)).<br><br>There, now it won't even bother if the destination is close enough. Alternatively to this setup, you could get a more gradual <i>interpolation</i> effect by simply dividing/multiplying the position-delta (Remove the use of 'Normalize', and try 0.05 or similar; you can change this to change the "speed"). Normalizing the vector may be your intended effect, though. I personally like the multiplication approach; looks nicer to me, takes fewer operations to perform. Also keep in mind what I said above, please make new vectors as infrequently as possible. The standard C++ garbage collector Monkey comes with is good at dealing with this kind of thing, but Android (And XNA) can be problematic. <br><br></td></tr></table><br>
<a name="2099339"></a>

<a name="2099336"></a>

<a name="2099337"></a>

<a name="2099338"></a>

<a name="2099348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I should also mention that Jesse's example, though potentially working, is inefficient <br></div><br><br>my Intentions was not to show efficiency.  I save that for the advanced programmer. I was more into illustrating the proper way of checking for collision with vectors.<br>this should solve both problems :P<br><pre class=code>
Import mojo

Function Main()
	New Game
End Function

Class Game Extends App

	Field Direction:Vector
	Field Position:Vector
	Field Destination:Vector
	Field v1:Vector
	Field v2:Vector
	Field dt:Float = 7.2
	
	Method OnCreate()
		Position = New Vector(90,90)
		Direction =New Vector
		Destination = New Vector
		v1 = New Vector
		v2 = New Vector
		SetUpdateRate 30
		
	End Method
	
	Method OnUpdate()
		Destination.Set(MouseX(),MouseY()) 'simulate a mouse click'
		Direction.Set(Destination).Subtract(Position)
		v1.Set(Direction)		
		Direction.Normalize().Multiply(dt)	' delta fix
		Position.Add(Direction)
		v2.Set(Destination).Subtract(Position)
		If v2.DotProduct(v1)&lt;= 0.0 
			Position.Set(Destination)
			'Error "Found collision" 
		Endif 
	End Method
	
	Method OnRender()
		Cls()
		DrawCircle Position.x,Position.y,10
		DrawRect Destination.x-4,Destination.y-4,8,8
	End Method
	
End Class

Class Vector
	Field x:Float
	Field y:Float
	
	Method New(x:Float,y:Float)
		Self.x = x
		Self.y = y
	End Method
	
	Method Set:Vector(v:Vector)
		Self.x = v.x
		Self.y = v.y
		Return Self
	End Method
	
	Method Set:Vector(x:Float,y:Float)
		Self.x = x
		Self.y = y
		Return Self
	End Method
	
	Method New(v:Vector)
		Self.x = v.x
		Self.y = v.y
	End Method
	
	Method Add:Vector(x:Float,y:Float)
		Self.x += x
		Self.y += y
		Return Self
	End Method
	
	Method Add:Vector(v:Vector)
		Self.x += v.x
		Self.y += v.y
		Return Self
	End Method
	
	Method Subtract:Vector(v:Vector)
		Self.x -= v.x
		Self.y -= v.y
		Return Self
	End Method
	
	Method Multiply:Vector(value:Float)
		Self.x *= value
		Self.y *= value
		Return Self
	End Method
	
	Method Multiply:Vector(v:Vector)
		Self.x *= v.x
		Self.y *= v.y
		Return Self
	End Method
	
	Method Divide:Vector(value:Float)
		If value &lt;&gt; 0
			Self.x /= value
			Self.y /= value
		Else
			Self.x = 0
			Self.y = 0
		Endif
		Return Self
	End Method
	
	Method DotProduct:Float(v:Vector)
		Return Self.x * v.x + Self.y * v.y
	End Method

	Method Normalize:Vector()
		Divide(Magnitude())
		Return Self
	End Method
		
	Method MagnitudeSquare:Float()
		Return Self.x * Self.x + Self.y * Self.y
	End Method
	
	Method Magnitude:Float()
		Return Sqrt(MagnitudeSquare())
	End Method
	
End Class
</pre><br><br>Interesting how many programmers use vectors but not many know how to use Dot Product. <br><br></td></tr></table><br>
<a name="2099347"></a>

<a name="2099346"></a>

<a name="2099345"></a>

<a name="2099344"></a>

<a name="2099343"></a>

<a name="2099342"></a>

<a name="2099340"></a>

<a name="2099341"></a>

<a name="2099351"></a>

<a name="2099352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Funny enough, I didn't even think to use dot-product like this. I normally just use it to detect the <a href="https://github.com/Regal-Internet-Brothers/vector/blob/01a8614780fb5b7fad09de601edc02436b80b225/vector.monkey#L1335" target="_blank">difference between the user's acceleration and the velocity</a>, and <i>"compensate"</i> based on how much it deviates. <i>I'll get around to refactoring that module eventually</i>. If it wasn't obvious already, I'm definitely going to use your strategy in my own projects, thanks Jesse. <br><br></td></tr></table><br>
<a name="2099365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I contacted the owner yesterday and the solution was very simple.<br>I use this his vector class : <a href="http://www.monkey-x.com/Community/posts.php?topic=568" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=568</a><br><br>And I only needed to use the Method ReduceLength()<br><br>So my code is now exactly stopping at 0.0<br>With only one line.<br><br>Destination = New Vector(90,90) 'simulate a mouse click'<br>Direction = Destination.Subtract(Position)<br><br>Direction.ReduceLength(Speed*dt.delta) '' with this line it becomes 0.0 at the end.<br>If Direction.Length&lt;=0 Or Position.DistanceTo(Destination)&lt;=0<br>    Print "Yes it did Stop loop"<br>Else<br>    Direction.Normalize()<br>    Direction.Multiply(dt.delta)	' delta fix<br>    Position.Add(Direction)<br>End<br><br>' will try to make a small working example <br><br></td></tr></table><br>
<a name="2099364"></a>

<a name="2099368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I seriously need to be studying more on what you can do with classes :)  Vectors I still barely understand. I converted 5 examples from blitz basic to monkey and have been reading through that to learn to understand what is happening and what does it. The vector class here on this thread and the one linked on the code forum has methods that makes me scratch my head even more.<br><br>I am still so used to procedural programming. The example source code on this thread and in the code forum is something I wil need to read through more.<br><br>Great thread this though !! <br><br></td></tr></table><br>
<a name="2099382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Jesse I forgot to say that your code is working, testing both solutions now.<br><br>The full working code with some things cut-out is now this.<br>fully working moving a sprite from A to B using mouse click.<br><br><pre class=code>

Import mojo
Import classes.vector

Function Main:Int()
	New MyApp
	Return 0
End

Global dt:DeltaTimer

Class MyApp Extends App
	Global FPS:Int = 60
	
	Field scene:Scene = New Scene()

	Method OnCreate:Int()
		dt = New DeltaTimer(FPS)
		SetUpdateRate(FPS)
		
	'	Local sprite:Sprite = New Sprite()
	
		scene.Load()

    	sprite1.Load("atlas-thing.json")
    	sprite1.Move(50,50)
 

		Return 0
	End
	
	
	Method OnRender:Int()
		Cls(255, 255, 255)

		scene.DebugDraw()

		SetColor(255, 255, 255)
		
		sprite1.Draw()

		DrawText "Use &lt;- and -&gt; plus ENTER to change game update rate (currently " + FPS + " fps)", 0, 60
		Return 0
	End
	
	
	Method OnUpdate:Int()
		dt.UpdateDelta

		If KeyHit (KEY_LEFT)
			FPS = FPS - 10
			If FPS &lt; 10 Then FPS = 10
			SetUpdateRate FPS
		Endif
		If KeyHit (KEY_RIGHT)
			FPS = FPS + 10
			SetUpdateRate FPS
		Endif
		If KeyDown (KEY_ENTER)
			FPS = 60
			SetUpdateRate FPS
		Endif

		If MouseHit( MOUSE_LEFT )
			sprite1.MoveTo(MouseX(),MouseY())
		End

		
		sprite1.Update()
		Return 0
	End

	Method OnResume:Int()
		dt.currentticks = Millisecs()
		dt.lastticks = dt.currentticks
		Return 0
	End	
End


Class Sprite
	Field img:Image
	
	' movement
	Field Speed:Float			= 1
	Field Direction:Vector 
	Field Position:Vector
	Field Destination:Vector 

	' frame animation
	Field frames:Int = 0
	Field frame:Int
	Field frameTimer:Int
	Field frameEnd:Int
	Field frameDuration:Int[]

	Method Draw:Void()
		DrawImage img, Position.X-(img.Width()/2), Position.Y-(img.Height()/2), frame
	End

	Method Update:Void()

		' frame animation
		If frames &gt; 0
			If dt.lastticks &gt; frameTimer + frameDuration[frame]
				frame+=1
				If frame &gt; frameEnd
					frame = 0
				End
				frameTimer = Millisecs()
			End	
		End
    	

	    Direction.Set(Destination).Subtract(Position)
		Direction.ReduceLength(Speed*dt.delta)
		If Direction.Length&gt;0
			Direction.Normalize()
			Direction.Multiply(Speed*dt.delta)	' delta fix
			Position.Add(Direction)
		End
	End

	Method MoveTo:Void(_mx:Float, _my:Float)
		Destination.Set(_mx,_my)
	End

	Method Move:Void(_mx:Float, _my:Float)
		Position = New Vector(_mx,_my)
		Destination = New Vector(_mx,_my)
		Direction = New Vector
	End

End


Class DeltaTimer	
	Field targetfps:Float = 60
	Field currentticks:Float
	Field lastticks:Float
	Field frametime:Float
	Field delta:Float
	
	Method New (fps:Float)
		targetfps = fps
		lastticks = Millisecs()
	End
	
	Method UpdateDelta:Void()
		currentticks = Millisecs()
		frametime = currentticks - lastticks
		delta = frametime / (1000.0 / targetfps)
		lastticks = currentticks
	End
End
</pre> <br><br></td></tr></table><br>
<a name="2099376"></a>

<a name="2099406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good to know it was useful. I wish more programmers learn to use the Dot product. it is very useful. Many things can be resolve with it and many times will eliminate square roots and exponential math. I mainly use it for collision, distances and relationship to other vectors. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
