<!DOCTYPE html><html lang="en" ><head ><title >Why is my game lagging?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Why is my game lagging?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >Why is my game lagging?</a><br><br>
<a name="2085253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Impmaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all. I have a game that I'm making for ludum dare.<br> <br><br>I have a game that is lagging on my computer. Now, it's a pretty beefy computer, and i don't know why it's lagging. My other game which has similar code runs at 60. Also, if i restart my computer, it stops lagging. <br><br></td></tr></table><br>
<a name="2085251"></a>

<a name="2085255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There could be any number of reasons why your game is not performing like you expect it to. Please provide more details around what you are doing in the game that seems to be having problems. It seems to me you have a memory issue going on, you are rendering too many off-screen objects, or you are performing far too many loops between each screen update.<br><br>Some quick notes in general:<br>-- If you are using a tile map, make sure that you are not trying to render more than you need to make sure the scrolling renders smoothly ON-SCREEN. If you have a large map, it will take a lot of time to draw everything the belongs onscreen and what does not. <br><br>-- Make sure you destroy all objects that should no longer be in the game. If you keep adding objects that are no longer used, your game will slow down due to the amount of memory your computer has left is being used up.<br><br>When you reboot your computer, your memory is freed up and everything goes back normal until the game gets to where it lags again. <br><br>Look through your code and see where you are creating and destroying objects. <br><br></td></tr></table><br>
<a name="2085260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Impmaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The only thing I have is a player who walks around. I don't have an array or anything. Just a player and a background image.<br><br>EDIT: It seems that whenever I open chrome it starts lagging. However, I have 8 gigs of RAM, I don't know why that would be. :/ <br><br></td></tr></table><br>
<a name="2085259"></a>

<a name="2085267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> There have been reports of chrome's latest browser having issues. <br><br>Check out this post on the forums:<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=8381" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=8381</a><br><br>[EDIT] I was assuming that you are using the HTML5 target in Monkey X? If so, this link will directly apply. If not, then I'm not sure if there are any plugins you have loaded in Chrome that would make your game suffer like that. The other targets should not be affected by *ANY* web browser that I am aware of. <br><br></td></tr></table><br>
<a name="2085264"></a>

<a name="2085269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Impmaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using the desktop target :/.... <br><br></td></tr></table><br>
<a name="2085275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming you are running Windows as your desktop, try looking at the Task Manager to see how much memory AND % of CPU Usage it is consuming. This will tell you better what Chrome is doing while its running. <br><br></td></tr></table><br>
<a name="2085276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm using the desktop target :/.... <br></div>Which version of Monkey and what OS. <br><br></td></tr></table><br>
<a name="2085285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Impmaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using the latest version of Monkey, on Windows 7. Neither my GPU nor CPU are being taxed. My CPU is at like 50% usage and my gpu is at like 25%. Nothing else is lagging on my computer apart from this program. <br><br></td></tr></table><br>
<a name="2085291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You will have to reproduce the problem with some code or you will just be getting people making wild guesses. If all the Desktop sample programs that come with Monkey work as they should, then the problem is with your code. <br><br></td></tr></table><br>
<a name="2085295"></a>

<a name="2085296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Impmaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, the program that I thought was working earlier seems to be having the same lag.<br><br>Here's a link to the program though.<br><br><a href="https://www.dropbox.com/sh/fgbijlzvmi2f3z7/bk8taWXSHZ" target="_blank">https://www.dropbox.com/sh/fgbijlzvmi2f3z7/bk8taWXSHZ</a> <br><br></td></tr></table><br>
<a name="2085307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Test the code from the link, built with both MinGW 4.8.1 and VC2010 and using both Monkey77f and Monkey78g. It works as it should with no choppiness or lagging.<br>Did you open the Resource Monitor under the Performance tab in the Task Manager? It gives you a detailed view of what's going on. Sometimes I get system slow downs due so a process accessing the hard drive, so check to see if anything is thrashing it. The usual culprits for slow downs are Windows Update and Internet Security suites. There is also the chance that your hard drive needs defragging. The defrag tool that comes with windows is in one word crap. There are a good few alternative out there some are free, but you have to be wary of what you install as these need elevated privileges to access your drives and you never know what they are actually doing. <br><br></td></tr></table><br>
<a name="2085305"></a>

<a name="2085304"></a>

<a name="2085308"></a>

<a name="2085309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I first used Monkey I had what I thought were lag issues. I'm guaranteeing you that it's you and not Monkey in this case. You need to learn about translating with integers and drawing from integer points only. That is to say, cast your floats to integers. It will solve 99% of these perceived problems. <br><br></td></tr></table><br>
<a name="2085306"></a>

<a name="2085384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Impmaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> How can I cast floats to integers in Monkey X? <br><br></td></tr></table><br>
<a name="2085388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Local x:Float = 100.5
Local y:Float = 22.4
DrawImage sprite, Int(x), Int(y)</pre> <br><br></td></tr></table><br>
<a name="2085385"></a>

<a name="2085389"></a>

<a name="2085390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> To cast one value into another the syntax is type( value ).<br>e.g.<br><pre class=code>DrawImage my_image, Int(my_floatX), Int(my_floatY)</pre>. <br><br></td></tr></table><br>
<a name="2085387"></a>

<a name="2085386"></a>

<a name="2085391"></a>

<a name="2085392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Local intValue:Int = Int(3.333333) ' 3</pre><br><pre class=code>Translate(Int(x), Int(y))</pre><br><br>Using floating point numbers has a lot of inaccuracy. When the inaccuracies are changed they are never changed at precise intervals. That's what leads to some frames looking like more is happening and then other frames look like less is happening. Casting the floating point values to integers helps to deal with the inaccuracies between the frames. Just thought I would mention that. <br><br></td></tr></table><br>
<a name="2085394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Impmaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh I know that. The reason that I said it was laggy was because I was getting bad framerates with Fraps, down in the low 20s and whatnot. However, today I seem to have a steady 30, so I'm fine with that. <br><br></td></tr></table><br>
<a name="2085398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> You never mentioned you were using recording software. Screen recording software has a tendency to slow down a majority of computers. <br><br></td></tr></table><br>
<a name="2085399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Impmaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not actually recording anything. I'm just using Fraps to have the little frame rate counter in the corner of my screen. And in any case, my computer should be fast enough to run it. I can run Far Cry 3 on almost max graphics at 50-60 fps. I have a gtx 760 in here. I haven't recorded much, but my brother records league of legends matches with fraps sometimes and it doesn't lag. So there must be an out of date Java runtime or something on my computer, whatever Monkey X uses as it's language. <br><br></td></tr></table><br>
<a name="2085404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Desktop target uses native CPU machine code.<br>The only targets that use JAVA are HTML5 and Android.<br>Monkey X translates your code into a code that can be compiled by another compiler into what code the target use natively.<br>That's why it can target a number of platforms, and why others can be easily added.<br><br>If you are suffering lag then something is running in the background. <br><br></td></tr></table><br>
<a name="2085403"></a>

<a name="2085402"></a>

<a name="2085400"></a>

<a name="2085401"></a>

<a name="2085416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The only targets that use JAVA are HTML5 and Android. <br></div><br>Sorry, but that is incorrect. Java is produced only for Android, and for the HTML5 target <b>JavaScript</b> is generated.<br><br>Java is different to JavaScript. <br><br></td></tr></table><br>
<a name="2085421"></a>

<a name="2085422"></a>

<a name="2085424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills:Yeah I keep forgetting that. But you still need a JAVA Runtime installed to use either type. <br><br></td></tr></table><br>
<a name="2085438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> No you don't... For HTML 5 you just need a modern browser. <br><br></td></tr></table><br>
<a name="2085447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills: I stand corrected. I must brush up on the the latest thing with web browsers. Current modern browsers have their own JavaScript Engine process virtual machine. In stalling Oracles Java 7 comes bundled with the Mozilla base Rhino JavaScript Engine while Java 8 is Nashorn. Google have their own version. <br><br></td></tr></table><br>
<a name="2085448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just on the subject of floats and ints, that can give an effect that may look like lag, but isn't.  If you have a sprite moving 7.4 pixels per frame,and it gets painted on exact pixels, it will be seen to move 7 pixels in some frames and 8 in others.  This stuttering isn't lag, though - the framerate doesn't change.  Rounding the movement down to 7 pixels per frame will give a smoother motion, though. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
