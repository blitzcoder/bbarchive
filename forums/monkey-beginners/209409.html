<!DOCTYPE html><html lang="en" ><head ><title >^ character, what is that in Monkey?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >^ character, what is that in Monkey?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=528" >Monkey Beginners</a>/<a href="#bottom" >^ character, what is that in Monkey?</a><br><br>
<a name="2097619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was converting code from the internet and came upon a error message with monkey called unexpected token. I wanted to make a circle to rectangle collision function.<br><br>What does this ^ character do in c++? And what do you do to replace that?<br><br>Here the collision function with the characters inside it.<br><br><pre class=code>
Function circlerectcollide:Bool(cx:Int,cy:Int,cr:Int, rx:Int,ry:Int,rw:Int,rh:Int)

    Local circledistancex = Abs(cx - rx)
    Local circledistancey = Abs(cy - ry)

    If (circledistancex &gt; (rw/2 + cr)) Then Return False
    If (circledistancey &gt; (rh/2 + cr)) Then Return False

    If (circledistancex &lt;= (rw/2)) Then Return True 
    If (circledistancey &lt;= (rh/2)) Then Return True

    Local cornerdistancesq = (circledistancex - rw/2)^2 + (circledistancey - rh/2)^2

    Return (cornerDistancesq &lt;= (cr^2))
End Function
</pre> <br><br></td></tr></table><br>
<a name="2097620"></a>

<a name="2097621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's the bit-wise XOR operator. <br><br>Just Google "C++ bit-wise XOR"<br><br>This "~" appears to be the Monkey equivalent. Without the quotes. <br><br></td></tr></table><br>
<a name="2097622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for the info :) <br><br></td></tr></table><br>
<a name="2097623"></a>

<a name="2097624"></a>

<a name="2097625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just for the record, if you need to raise something to a specific power, the correct thing to do is to use 'Pow'. Assuming this was pseudo code, this might have intended "Pow(X, 2)" (Where X is the number in question). If it was C++ code, however, you probably should be using XOR. For a full list of operators and their meanings, <a href="http://www.monkey-x.com/docs/html/Programming_Language%20reference.html#expressions" target="_blank">click here</a>. The '~' operator in Monkey can also be used as a unary (Single "argument"; appears on the left side: ~X, -X, etc) bitwise compliment (Also known as "bitwise not", or bit inversion). And as CGV said, '~' is also the XOR operator within binary "argument" contexts (X ~ Y). <br><br></td></tr></table><br>
<a name="2097627"></a>

<a name="2097628"></a>

<a name="2097629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xor and shl and commands like that make my head spin :) When I was young I bought a 68000 assembler book and memorised all the commands. I never understood how to use them. I found Amos and Blitz Basic then and that made things simpler.<br><br>On the same page on stackoverflow where I found the c++ code I found another c++ function that I was able to convert and it worked directly. The clamp command was in monkey so it was no problem.<br><br>The code I have now is below. I was planning on programming a part of Pang (amiga game) and needed to get collisions between balls and blocks.<br><br><pre class=code>
Function circlerectcollide:Bool(cx:Int,cy:Int,cr:Int, rx:Int,ry:Int,rw:Int,rh:Int)
	Local closestx:Float = Clamp(cx, rx, rx+rw)
	Local closesty:Float = Clamp(cy, ry, ry+rh)
	Local distancex :Float = cx - closestx
	Local distancey:Float = cy - closesty
	Local distancesquared:Float = (distancex * distancex) + (distancey * distancey)
	Return distancesquared &lt; (cr * cr)
End Function
</pre> <br><br></td></tr></table><br>
<a name="2097644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tend to explicitly multiply x by x when I want to square it, rather than call Pow() or similar.  Maybe I'm behind the times, but my instincts are it could be faster. <br><br></td></tr></table><br>
<a name="2097648"></a>

<a name="2097649"></a>

<a name="2097650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Ancell</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> CGV:<br>It's the bit-wise XOR operator.  <br></div><br><br>I XOR is a tilde symbol though isn't it?, or do both symbols (~ ^) do the same thing? :-/ <br><br></td></tr></table><br>
<a name="2097652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I'm reading correctly ^ is c++ and ~ is monkey :) <br><br></td></tr></table><br>
<a name="2097654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I modified the first code I posted with the ~ character but the function did not give the right results. I have not really investigated into what was wrong since I have the other version with the Clamp command used that works without problems. <br><br></td></tr></table><br>
<a name="2097659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pharmhaus</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way it looks it's probably a Pow (as suggested by ImmutableOctet) and not XOR.<br>Try to replace the lines with this and check if it works as expected:<br><pre class=code>
Local cornerdistancesq = Pow(circledistancex - rw / 2, 2) + Pow(circledistancey - rh / 2, 2)

Return (cornerDistancesq &lt;= Pow(cr,2))
</pre><br>Other potential pitfalls include misread C++ source code / porting mistakes which might not be visible immediately.<br>Happens to me every now and then and later you're wondering why things dont work as expected... <br><br></td></tr></table><br>
<a name="2097677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is code where the first collision function now works with the Pow command. Thing is I need to decrease the circle x and y with half the radius or it to be correct. But it works :)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo

Global circlex:Int=320
Global circley:Int=240
Global circleradius:Int=50

Class MyGame Extends App

    Method OnCreate()
        SetUpdateRate(60)
    End Method
    Method OnUpdate()        
    End Method
    Method OnRender()
        Cls 0,0,0 
        SetColor 255,255,255
        DrawText "Move the rectangle in the circle to see collision.",0,0
        Local coll:Bool=circlerectcollide(circlex,circley,circleradius,MouseX(),MouseY(),50,50)
        If coll=True
            DrawText "Collision",2,16
        End If
        DrawRect MouseX(),MouseY(),50,50
        DrawCircle circlex,circley,circleradius
    End Method
End Class

Function circlerectcollide:Bool(cx:Int,cy:Int,cr:Int, rx:Int,ry:Int,rw:Int,rh:Int)
	cx-=cr/2
	cy-=cr/2
    Local circledistancex = Abs(cx - rx)
    Local circledistancey = Abs(cy - ry)

    If (circledistancex &gt; (rw/2 + cr)) Then Return False
    If (circledistancey &gt; (rh/2 + cr)) Then Return False

    If (circledistancex &lt;= (rw/2)) Then Return True 
    If (circledistancey &lt;= (rh/2)) Then Return True

    Local cornerdistancesq = Pow(circledistancex - rw / 2, 2) + Pow(circledistancey - rh / 2, 2)
	Return (cornerdistancesq &lt;= Pow(cr,2))
End Function

Function Main()
    New MyGame()
End Function
</textarea> <br><br></td></tr></table><br>
<a name="2097680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. It doesn't work. If you increase the size of the rectangle it returns inaccurate results. <br><br></td></tr></table><br>
<a name="2097681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure you weren't looking for 'Sqrt' instead of dividing by two, Pakz? Because that'd be the Pythagorean theorem, and likely the approximation you want. <br><br></td></tr></table><br>
<a name="2097682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Ancell</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> EdzUp:<br>If I'm reading correctly ^ is c++ and ~ is monkey :)  <br></div><br><br>I haven't touched C++ for a few years, but yeah!, I'm pretty sure you're right. <br><br></td></tr></table><br>
<a name="2097683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> it expects center handles:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo

Class Circle
  Field x:Float
  Field y:Float
  Field radius:Float
  
  Method New(x:float,y:float,radius:float)
    Self.x = x
    Self.y = y
    Self.radius = radius
  End Method
  
  Method Render()
    DrawCircle x,y,radius
  End method

End Class

CLass Rectangle
  Field x:Float
  Field y:Float
  Field width:Float
  Field height:Float
  
  Method New(x:Float,y:Float,width:Float,height:Float)
    Self.x = x
    Self.y = y
    Self.width = width
    Self.height = height
  End Method
  
  Method Update()
    x = MouseX()
    y = MouseY()
  End Method

  Method Render:Void()
    DrawRect x-width/2,y-height/2,width,height
  End method
End Class

Class MyGame Extends App
    Field circle:Circle
    Field rect:Rectangle
    Method OnCreate()
        circle = New Circle(200,200,40)
        rect = New Rectangle(0,0,150,150)
        SetUpdateRate(60)
    End Method
    
    Method OnUpdate()
        rect.Update()
    End Method
    
    Method OnRender()
        Cls 0,0,0 
        SetColor 255,255,255
        DrawText "Move the rectangle in the circle to see collision.",0,0
        Local coll:Bool=circlerectcollide(circle.x,circle.y,circle.radius,rect.x,rect.y,rect.width,rect.height)
        If coll=True
            DrawText "Collision",2,16
        End If
        rect.Render()
        circle.Render()
    End Method
End Class

Function circlerectcollide:Bool(cx:Int,cy:Int,cr:Int, rx:Int,ry:Int,rw:Int,rh:Int)
    Local circledistancex = Abs(cx - rx)
    Local circledistancey = Abs(cy - ry)

    If (circledistancex &gt; (rw/2 + cr)) Then Return False
    If (circledistancey &gt; (rh/2 + cr)) Then Return False

    If (circledistancex &lt;= (rw/2)) Then Return True 
    If (circledistancey &lt;= (rh/2)) Then Return True

    Local cornerdistancesq = Pow(circledistancex - rw / 2, 2) + Pow(circledistancey - rh / 2, 2)
	Return (cornerdistancesq &lt;= Pow(cr,2))
End Function

Function Main()
    New MyGame()
End Function
</textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
