<!DOCTYPE html><html lang="en" ><head ><title >Loading resources in the background?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Loading resources in the background?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Loading resources in the background?</a><br><br>
<a name="2023169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anatol</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm just wondering if there's any way in Monkeycode to load resources "in the background", i.e. to load images/sounds while the update loop is running.<br><br>I frequently need to load and discard full screen (768 x 1024) images and sound files. This is managed by a sort of a resource manager that preloads and discards resources as necessary - this happens in OnUpdate(). I just notice a very obvious stutter (the app freezes temporarily) of up to 1-2 seconds when some more heavy resources are preloaded. I especially notice a significant stutter on an iPad compared to (local) HTML5.<br><br>I can find other ways to make this less obvious (luckily the sound doesn't stop playing) but for the off-chance that loading in the background is possible somehow I would appreciate any hints, even if this is just possible on certain targets.<br><br>Cheers!<br>Anatol <br><br></td></tr></table><br>
<a name="2023210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can certainly load things in the background in Flash using the URLLoader object. <br><br></td></tr></table><br>
<a name="2023221"></a>

<a name="2023222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do this in all my games.<br><br>The process is this:<br><br>1) Enter a pre-loading screen that just displays my "Loading" screen image.<br><br>2) Step forward to the actual loading method that then loads all the bitmaps, sounds, level xml, etc.  All the while, the loading image is displaying because I showed it in the pre-loading screen where - right after the loading image was displayed, it triggered my app to go to the loading method.<br><br>3) The loading screen also displays the loading graphic.<br><br>4) Once all the data has been loaded, I have it move on to the next part of my game.<br><br>EDIT: I do all my loading in OnUpdate.  OnCreate just moves me into the Pre-Loading state for my game, then to Loading, then to a Menu. <br><br></td></tr></table><br>
<a name="2023220"></a>

<a name="2023252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anatol</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Thank you for your suggestions.<br><br>Hm, yes, a loading screen would work well for games in between levels. I'm working on an interactive book, however, and for this any screen between pages is not really a good solution - it would pull you right out of the story.<br><br>I can work around that in some ways and keep the music playing and maybe generally freeze any animations on page turns. Or I find a way to load resources in the background, in a way that doesn't temporarily freeze the OnUpdate loop. Maybe some targets (like Flash) or hopefully iOS provide a way to do that. I'm thinking of calling a function/method in OnUpdate that initiates loading resources but doesn't "interfere" with OnUpdate and doesn't delay the processing of further Monkey code. I'll look further into this - and if that's possible at all I assume it's a target specific customisation. Maybe some changes in mojo/native? Brrrr.... If I find a solution I'll post it here.<br><br>Basically on every page turn the code discards and loads resources, the app always has the resources of the current, previous and next page loaded. E.g. when I turn from page 3 (loaded resources: page 2,3,4) to page 4 the resources of page 2 are discarded and page 5 is preloaded.<br><br>Anyway, I'll keep looking for a solution. Any further ideas are still very much appreciated!<br><br>Cheers! <br><br></td></tr></table><br>
<a name="2023263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >secondgear</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What we are missing is support for multiple threads. I don't know if all target platforms support threading. <br><br></td></tr></table><br>
<a name="2023291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >offtehcuff</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could roll your own resource loaders. You'd have to read in X amount of data each frame and when the whole files is loaded turn it into whatever type of resource it is. <br><br>You could also load more forward pages. The typical usage is to keep reading forward so you can try to improve that part of the experience. This is common in linear games. Everything is seamless until you try to backtrack. The game has to stop and reload the previous area.<br><br>I would say on page 3 you could have 2,3,4,5 and if space is really limited 3,4,5. Think about it this way; if the reader has stopped to go back the flow is already broken. They can wait the 3 seconds to go back.<br><br>Combine the 2 suggestions and you should be constantly 2 pages ahead and no single read operation will slow down the book. <br><br></td></tr></table><br>
<a name="2023338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anatol</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for these suggestions, offtehcuff. I will give it a try - it'll still take me a while as I have to iron out some other issues first. I'll post here again if I find a workable solution; it sounds like these 2 suggestions could solve the issue. <br><br></td></tr></table><br>
<a name="2023367"></a>

<a name="2023369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rixarn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been very busy with some work projects but I'm building a framework for my IPAD game. The framework itself will be BSD and it's composed of a collection of modules (some months ago I released one of the modules, a state machine module). The resource manager module allows you to do exactly what you want. It's easy to use (I think) but the reason I haven't published it yet is that it lacks proper documentation.<br><br>If you like I can email to you the framework with some simple instructions. In any case, I expect to release it in the following weeks. <br><br>Good luck! <br><br></td></tr></table><br>
<a name="2023390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anatol</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Rixam,<br><br>that would be very kind! If you don't mind to email it to me, that would be fantastic!<br><br>I really appreciate the community here. I don't have a game programming background, but once I have a bit more solid experience with Monkey I hope I can contribute more myself.<br><br>Cheers! <br><br></td></tr></table><br>
<a name="2023492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rixarn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anatol,<br><br>I'm testing the framework before emailing to you, because I don't want to hand broken code he he... (The loading part at least) Once I've sorted out the bugs I'll make a public release. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
