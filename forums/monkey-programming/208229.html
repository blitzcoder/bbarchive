<!DOCTYPE html><html lang="en" ><head ><title >Autofit Portrait vs Landscape</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Autofit Portrait vs Landscape</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Autofit Portrait vs Landscape</a><br><br>
<a name="2082816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> - <br><br></td></tr></table><br>
<a name="2082813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am using autofit and am still trying to understand how to make my game properly fit the screen when it is in portrait and landscape modes for multiple devices.<br><br>Currently, I am modifying CONFIG.MONKEY for the glfw target to replicate this<br><br>Here are my results for portrait<br><pre class=code>#GLFW_WINDOW_WIDTH=640
#GLFW_WINDOW_HEIGHT=960</pre><br><img src="http://i274.photobucket.com/albums/jj265/Erebel55/Portrait_zps01b95159.png"><br><br>Here are my results for landscape<br><pre class=code>#GLFW_WINDOW_WIDTH=960
#GLFW_WINDOW_HEIGHT=640</pre><br><img src="http://i274.photobucket.com/albums/jj265/Erebel55/landscape_zps62145397.png"><br><br>I am satisfied with the results for landscape, as it is filling the entire screen.  However, I would like portrait to fill the entire screen as well. The height isn't being adjusted to fill the entire screen.<br><br>Would I need to modify the tile map's width/height when the device changes to portrait? Or how would you go about doing this?<br><br>Here is my cut down code with placeholder images<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import mojo
Import autofit

' Game Width and Height
Const WIDTH# = 960
Const HEIGHT# = 640

Global game:MyGame

Function Main:int()
	game = new MyGame()
	return 0
End Function

Class MyGame Extends App 
	Field level:Level

	Field frameRate# = 200
	Field ms# = 0
	Field tmpMs#
	Field numTicks#
	Field lastNumTicks#
	Field maxMs% = 50
	Field lastTime#
	
	' controls
	Field moveLeftButton:Button
	Field moveRightButton:Button
	Field jumpButton:Button

	Method OnCreate:Int()

		SetUpdateRate 60
		
		' Set virtual display size
		SetVirtualDisplay WIDTH, HEIGHT
		
		level = new Level()
		level.Load()
		
		moveLeftButton = New Button("left_button_placeholder.png", 100, 550, True)
		moveRightButton = New Button("right_button_placeholder.png", 180, 550, True)
		jumpButton = New Button("jump_button_placeholder.png", 700, 550, True)
		
		' timing
		ms = 1000 / frameRate
		numTicks = 0
		lastNumTicks = 1
		lastTime = Millisecs()
		
		return 0
	End Method
	
	Method OnUpdate:Int()
		local now% = Millisecs()
		
		If now &lt; lastTime
			numTicks = lastNumTicks
		Else
			tmpMs = now - lastTime
			If tmpMs &gt; maxMs tmpMs = maxMs
			numTicks = tmpMs / ms
		Endif
	
		lastTime = now
		lastNumTicks = numTicks
	
		For Local i% = 1 to Floor(numTicks)
            'player.Update()
		Next
		
		Return 0
	End Method
	
	Method OnRender:Int()
		
		UpdateVirtualDisplay()
		Cls 
		'PushMatrix 
		level.Draw()
		
		' don't scale controls
		PushMatrix
			'Scale 1,1
			
			' draw buttons
			moveLeftButton.Draw()
			moveRightButton.Draw()
			jumpButton.Draw()
		PopMatrix
		return 0
	End Method	
End Class

Class Level
	Const TILE_SIZE% = 32
	Const TILE_NUM_FRAMES:Int = 8 ' number of frames in the tileset
	
	Field map:Tile[][]
	Field width%, height%
	Field pixelWidth% = 0 ' of map
	Field pixelHeight% = 0 ' of map
	
	Field tileSetImage:Image
	Field backgroundImage:Image
	
	Global level1:=[
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,
		2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]

	Method Load:Void()
		
		width = 30
		height = 20
		
		pixelWidth = width * TILE_SIZE
		pixelHeight = height * TILE_SIZE
		
		map = tileArray(width, height)
		
		tileSetImage = LoadImage("test_tiles_padded.png", 34, 32, TILE_NUM_FRAMES, Image.XPadding) ' 34 = 32 + (1 pixel padding * 2 sides)
		backgroundImage = LoadImage("background3.png")
		
		For Local x:Int = 0 To width - 1
			For Local y:Int = 0 To height - 1
				map[x][y] = New Tile((level1 [ x + y * width ] ))
			Next
		Next
		
	End Method
	
	Method Draw:Void()
		' Draw background image
		DrawImage backgroundImage, 0, 0
		
		' Draw tiles
		For Local x% = 0 To width - 1
			For Local y% = 0 To height - 1
				If map[x][y].frame &gt; 0 ' don't draw blank tiles
					DrawImage tileSetImage, Int(x * TILE_SIZE), Int(y*TILE_SIZE), map[x][y].frame
				Endif
			Next
		Next
	End Method
	
End Class

Class Tile
	Field frame:Int ' tile index
	
	Method New(frame:Int=0)
		self.frame = frame
	End Method
End Class

Class Button
    Field image:Image
    Field x:Int, y:Int
    Field width:Int, height:Int
    Field visible:Bool
    
    Method New(image:String, x:Int, y:Int, visible:Bool=False)
        Self.image = LoadImage(image)
        Self.x = x
        Self.y = y
        width = Self.image.Width()
        height = Self.image.Height()
        Self.visible = visible
    End Method
    
    Method Draw:Void()
        If visible = True
            DrawImage image, x, y
        Endif
    End Method
End Class

Function tileArray:Tile[][](x_size:Int, y_size:Int)
	Local map:Tile[x_size][]
	For Local x:Int=0 Until x_size
	   map[x]=New Tile[y_size]
	Next
	Return map
End Function
</textarea><br><br>Here are the placeholder images you will need<br><a href="https://dl.dropboxusercontent.com/u/106998981/images.zip" target="_blank">https://dl.dropboxusercontent.com/u/106998981/images.zip</a><br><br>My background image is 960x640 and my tiles are 32x32 (without padding)<br><br>Also, on a side note I am trying to make it so the control buttons (left/right/jump) aren't scaled with everything else.  I don't think it makes since to stretch these, as your fingers don't change size. (I already opened a thread for that topic <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=8220" target="_blank">here</a>)<br><br>I appreciate the help as always :)<br>Thank you! <br><br></td></tr></table><br>
<a name="2082812"></a>

<a name="2082810"></a>

<a name="2082811"></a>

<a name="2082809"></a>

<a name="2082808"></a>

<a name="2082807"></a>

<a name="2082806"></a>

<a name="2082805"></a>

<a name="2082804"></a>

<a name="2082803"></a>

<a name="2082802"></a>

<a name="2082801"></a>

<a name="2082800"></a>

<a name="2082799"></a>

<a name="2082798"></a>

<a name="2082873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do believe DeviceWidth() / DeviceHeight() update when auto rotating at least on Android.  Can't say about ios.<br><br>I also believe that autofit auto crops the game to the scissor rectangle specified by the screen dimensions you feed it in SetVirtualDisplay.  You would probably have to change this value when you detect a screen rotation to "break out" of that box.  Then, you'll have to re-adjust pretty much everything else.  Or, you can kill the scissoring Autofit does and work "outside" the screen dimensions.<br><br>With <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=4963" target="_blank">AutoScale</a>, no cropping is done without your explicit letterboxing.  You can use DeviceX() / DeviceY() to specify coordinates relative to a position within the actual device dimensions, instead of the virtual screen.  If you did switch, however, I can't give you in-depth tech support to solve your problem at this time. I can just tell you that it's possible, and wouldn't require hacking the module. <br><br></td></tr></table><br>
<a name="2082872"></a>

<a name="2082908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the input Nobuyuki.  I took a look at Autoscale and dropped it in.  It seemed to give the same results, so I assume I need to make a custom letterbox.<br><br>Yeah my first attempt at getting it to work with autofit is as follows.<br><br>I added a function to autofit to surface device_changed<br><pre class=code>Function GetDisplayChanged:Int()
	Return VirtualDisplay.Display.device_changed
End Function</pre><br><br>With that I can check to see when the display changed and calculate the orientation (landscape or portrait) correctly.<br><br>I store two background images (one 960x640 and one 640x960)<br>When I detect a change in the display I change the background image to the appropriate one.  That all is working fine, however I'm not sure how to go about converting my tilemap data.<br><pre class=code>
Method ChangeOrientation:Void()
    ' if orientation has changed
    If GetDisplayChanged() Or currentBackgroundImage = Null
        ' landscape
        If game.screenOrientation = 1 
            currentBackgroundImage = backgroundImage[0]
            SetVirtualDisplay WIDTH, HEIGHT
        ' portrait
        Else
            currentBackgroundImage = backgroundImage[1]
            SetVirtualDisplay HEIGHT, WIDTH
        Endif
    Endif
End Method
</pre><br><br>Was hoping someone else has done this and there is a better way :/ <br><br></td></tr></table><br>
<a name="2082906"></a>

<a name="2082905"></a>

<a name="2082904"></a>

<a name="2082903"></a>

<a name="2082902"></a>

<a name="2082913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has everyone else really just locked the user in one orientation mode? <br><br></td></tr></table><br>
<a name="2082919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b><u><a href="http://socoder.net/monkey/342-Retroball/MonkeyGame.html" target="_blank">Link to one of my games</a></u></b><br><br>No, don't be silly.  Give the player options, that's what they're there for.<br><br>I don't use the standard "Autofit" method. I wrote my own rescaling gubbins from scratch, and it's allowed me to do a few extra things.<br>The main important thing that I do, though, is that I don't confine my game to "640 x 480" or any other specifically predefined resolution.<br><br>The way I do it is approximately this...<br>I "suggest" an approximate width/height that I'd like to use.  My default is the standard 640x480.<br>in OnRender, the code finds the current DisplayWidth and DisplayHeight, and figures out an approximate scale that neatly transforms my 640x480 into the size available.<br>It takes aspect ratios and other such things into account, and results in a very approximate new set of co-ordinates and scaling numbers to ensure my game scales into the given screensize.<br>An Orientation global is set to either 0 (portrait) or 1 (landscape)<br>Next, it divides the screen resolution by the scaler, to give me a new resolution (more globals - jscrw and jscrh) which I then make use of during my coding..<br>0,0 = top left<br>jscrw,jscrh = bottom right.<br>and everything else scales neatly inbetween.<br><br>You need to stop focussing on your expected co-ordinate system, and instead learn to work with a more freeform system.  Although I can roughly assume there's going to be around about 640 pixels wide, if the player plays in portrait, my system instead focuses on the 480 height more than the width.  I need to take things like that into consideration when designing multi-orientation games.<br>The game linked above is an incredibly complex one, since it scales a grid into the screen's size, and focusses the gameplay within the arena.  Generally I tend to go for scrolling games, nowadays, as they're much less confined to unknown screen resolutions!<br><br>I've said it many times on this forum, and will say it again.<br>Make a testcard!<br>If you click the AGameAWeek logo on my game's main menu, you'll see a testcard pop up.<br>The testcard is made up of an approximate number of squares, some circles, and a bunch of differently shaded coloured blocks along the edges.<br>You can click on any of the resolutions on the right of the screen, and should find the testcard redefines itself to fit snuggly into whatever resolution you throw at it.<br>It took an alarming amount of time and effort to make the testcard work as well as it does, and as I tried various different things, I learned little skills about how to line things up, and how to keep things looking roughly "in the right place" no matter what the resolution.<br>It was a FANTASTIC learning experience, and I'm really glad I did it.<br>Give it a go. <br><br></td></tr></table><br>
<a name="2082947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I assumed it was something that DruggedBunny or therevills have done with autofit.  But if not, that would be nice to know as well. I don't really have the free time to go off and code an autofit system of my own, which is why I picked up DruggedBunny's. Please let me know. <br><br></td></tr></table><br>
<a name="2082934"></a>

<a name="2083108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am still interested in others experience with orientation and autofit. MikeHart, therevills, DruggedBunny?? <br><br></td></tr></table><br>
<a name="2083051"></a>

<a name="2083041"></a>

<a name="2083103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Up <br><br></td></tr></table><br>
<a name="2083107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I decide on the screen's orientation for the game and then code the game based on that. If you want the game to be played in landscape and portrait you would need to design your game screens to look good in both.<br><br>With AutoFit, it will add "black bars" to keep the ratio correct so I don't think AutoFit is the solution you want to use. When setting the virtual resolution within Diddy there is an extra parameter called "useAspectRatio" which uses the aspect ratio if set to true, if you set it to false the screen will use the entire device view.... but it will stretch your graphics since it does not care about the aspect ratio.<br><br>It all comes down to a game design decision. <br><br></td></tr></table><br>
<a name="2083114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the input :)<br><br>I am hoping to get rid of the blackbars and instead use the entire device view.  I will look at useAspectRatio.<br><br>Edit:<br>Ahh just realized you said in diddy. I assume autofit doesn't do this by itself.  I will take a look. <br><br></td></tr></table><br>
<a name="2083113"></a>

<a name="2083120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just quickly knocked up this example:<br><pre class=code>Strict

Import mojo

Function Main:Int()
	New MyApp()
	Return True
End

Class MyApp Extends App
	Field deviceWidth:Int
	Field deviceHeight:Int
	Field screenHeight:Int
	Field screenWidth:Int
	Field screenWidthRatio:Float
	Field screenHeightRatio:Float
		
	Method OnCreate:Int()
		SetScreenSize(320, 160)
		SetUpdateRate(60)
		Return True
	End
	
	Method OnRender:Int()
		PushMatrix
			Scale screenWidthRatio, screenHeightRatio
			
			Cls(100, 100, 200)
			
			' Draw an X		
			SetColor(255, 255, 255)
			DrawLine(0, 0, screenWidth, screenHeight)
			SetColor(255, 0, 255)
			DrawLine(0, screenHeight, screenWidth, 0)
			
			' Draw Shapes
			SetColor(255, 0, 0)
			DrawRect(200, 100, 100, 100)
			SetColor(255, 255, 0)
			DrawOval(200, 300, 100, 100)
			
		PopMatrix
		
		SetAlpha(0.5)
		DrawText("Screen Width        = " + screenWidth, 10, 10)
		DrawText("Screen Height       = " + screenHeight, 10, 20)
		DrawText("Device Width        = " + deviceWidth, 10, 30)
		DrawText("Device Height       = " + deviceHeight, 10, 40)
		DrawText("Screen Width Ratio  = " + screenWidthRatio, 10, 50)
		DrawText("Screen Height Ratio = " + screenHeightRatio, 10, 60)
		
		DrawText("MouseX              = " + MouseX(), 10, 80)
		DrawText("MouseY              = " + MouseY(), 10, 90)
		DrawText("Virtual MouseX      = " + MouseX() / screenWidthRatio, 10, 100)
		DrawText("Virtual MouseY      = " + MouseY() / screenHeightRatio, 10, 110)
		
		DrawText("Press 1 to set screen to 320x160", 10, 130)
		DrawText("Press 2 to set screen to 640x480", 10, 140)
		DrawText("Press 3 to set screen to 1920x1080", 10, 150)
		SetAlpha(1)
		
		Return True
	End
	
	Method OnUpdate:Int()
		If KeyHit(KEY_1)
			SetScreenSize(320, 160)
		Else If KeyHit(KEY_2)
			SetScreenSize(640, 480)
		Else If KeyHit(KEY_3)
			SetScreenSize(1920, 1080)
		End
		Return True
	End
	
	Method SetScreenSize:Void(w:Int, h:Int)
		' set the screen width and height
		screenWidth = w
		screenHeight = h
		
		' set the device width and height
		deviceWidth = DeviceWidth()
		deviceHeight = DeviceHeight()
		
		' calculate the ratios
		screenWidthRatio = Float(deviceWidth) / screenWidth
		screenHeightRatio = Float(deviceHeight) / screenHeight
	End
End</pre><br><br>So this will always fill the device's screen. Press 1-3 to change the virtual screen size. <br><br></td></tr></table><br>
<a name="2083117"></a>

<a name="2083118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you!!! I will try this out :) <br><br></td></tr></table><br>
<a name="2083125"></a>

<a name="2083126"></a>

<a name="2083127"></a>

<a name="2083128"></a>

<a name="2083129"></a>

<a name="2083130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your code worked as advertised.  I see what you mean with the image distortion because of the aspect ratio now though.  If I wanted the images to still look good without black bars, would I need two sets of graphics? One for landscape and one for portrait? Or is there some other way to handle this?<br><br>For example, the pink square in the middle of this screenshot is a 32x32 image that gets skewed because of the ratio.<br><img src="https://dl.dropboxusercontent.com/u/106998981/aspect_ratio.png"> <br><br></td></tr></table><br>
<a name="2083145"></a>

<a name="2083146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Again, it comes down to a game design decision and how it will affect gameplay.<br><br>There are a few blog posts relating to this issue:<br><br>* <a href="http://blog.gemserk.com/2013/01/22/our-solution-to-handle-multiple-screen-sizes-in-android-part-one/" target="_blank">http://blog.gemserk.com/2013/01/22/our-solution-to-handle-multiple-screen-sizes-in-android-part-one/</a><br>* <a href="http://anidea.com/technology/designer%E2%80%99s-guide-to-supporting-multiple-android-device-screens/" target="_blank">http://anidea.com/technology/designer%E2%80%99s-guide-to-supporting-multiple-android-device-screens/</a><br>* <a href="http://wiki.starling-framework.org/manual/multi-resolution_development" target="_blank">http://wiki.starling-framework.org/manual/multi-resolution_development</a><br><br>Also another approach is show more of the game, Replica Island does this - it is a tile based platform game and if you have a larger screen it scales but also shows more of the level.<br><br><div class="quote"> <b>Coping with Different Aspect Ratios</b><br><br>Replica Island serves as a very useful example of the aspect ratio problem. The game was originally designed to fit on a 480×320-pixel screen, including all “the sprites,” such as the robot and the doctor, the tiles of “the world,” and the UI elements (the buttons at the bottom left and the status info at the top of the screen). When the game is rendered on a Hero, each pixel in the sprite bitmaps maps to exactly one pixel on the screen. On a Nexus One, everything is scaled up while rendering, so one pixel of a sprite actually takes up 1.5 pixels on the screen. In other words, a 32×32-pixel sprite will be 48×48 pixels on the screen. This scaling factor is easily calculated using the following equations:<br><br>scaling factor (on x-axis) = screen width in pixels / target width in pixels<br>scaling factor (on y-axis) = screen height in pixels / target height in pixels<br><br>The target width and height are equal to the screen resolution for which the graphical assets were designed; in Replica Island, the dimensions are 480×320 pixels. For the Nexus One, there is a scaling factor of 1.66 on the x axis and a scaling factor of 1.5 on the y axis. Why are the scaling factors on the two axes different?<br><br>This is due to the fact that two screen resolutions have different aspect ratios. If we simply stretch a 480×320-pixel image to an 800×480-pixel image, the original image is stretched on the x axis. For most games, this will be insignificant, so we can simply draw our graphical assets for a specific target resolution and stretch them to the actual screen resolution while rendering (remember the Bitmap.drawBitmap() method).<br><br>However, for some games, you might want to use a more complicated method. Figure 5-3 shows Replica Island scaled up from 480×320 to 800×480 pixels and overlaid with a faint image of how it actually looks.<br><br>Replica Island performs normal stretching on the y axis using the scaling factor we just calculated (1.5), but instead of using the x-axis scaling factor (1.66), which would squish the image, it uses the y-axis scaling factor. This trick allows all objects on the screen to keep their aspect ratio. A 32×32-pixel sprite becomes 48×48 pixels instead of 53×48 pixels. However, this also means that our coordinate system is no longer bounded between (0,0) and (479,319); instead, it ranges from (0,0) to (533,319). This is why we see more of Replica Island on a Nexus One than on an HTC Hero.<br><br>Note, however, that using this fancy method might be inappropriate for some games.  For example, if the world size depends on the screen aspect ratio, players with wider screens could have an unfair advantage. This would be the case for a game like StarCraft 2. Finally, if you  want the entire game to fit onto a single screen, like in Mr. Nom, it is better to use the  simpler stretching method; if we use the second version, there will be blank space left over  on wider screens. <br></div><br><br>* Apress Beginning Android Games 2nd Edition <br><br></td></tr></table><br>
<a name="2083143"></a>

<a name="2083144"></a>

<a name="2083153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another couple of options:<br><br>1) Use <b>UpdateVirtualDisplay True, False</b> and set the zoom so that the edge with borders touches the outside of the display (which means the display is zoomed in and you place the other two edges outside of the display -- so as therevills says, you have to decide if you can work your gameplay to fit that inner area. On aufofitdemo.monkey, for example, the smaller border touches the outer edge when zoomed to 1.2; I never quite figured out the maths behind this, so you'd have to figure that out if you need to target 'any' display. Not ideal, since everything would be zoomed in, but of course it depends on the game and its graphics.<br><br>2) Customise autofit.monkey so that it doesn't clear the outer area (look at VirtualDisplay.UpdateVirtualDisplay -- near the end there is a section commented "Draw borders at full device size", followed by a SetScissor and a Cls -- this is what draws the black borders. You could then call a function to draw your own custom borders just after the Cls. You can access all of the VirtualDisplay fields from there (they're all commented as to what they do) and pass anything you need to your function. (The SetScissor/Scale/Translate after that are where the virtual display is set.)<br><br>If you go with the latter, you may need to import some of your game files at the top of autofit.monkey so it can see external functions, images, etc. Also, remember you need to use DeviceWidth/DeviceHeight and not VDeviceWidth/VDeviceHeight if you draw in that section. The fields <i>widthborder/heightborder</i> and <i>offx/offy</i> should help you draw only in the right area, from memory...<br><br>Just make a backup and have a play with it! <br><br></td></tr></table><br>
<a name="2083152"></a>

<a name="2083200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> My game is also a tile-based platformer, however it doesn't scroll.<br><br>@therevills: My game design choice is like Mr. Nom.  I want the entire game to fit onto the screen regardless of the screen size or orientation.  I like the code you provided me however if I want to support both portrait and landscape; the aspect ratio problem makes the graphics look unprofessional in this case.<br><br>@DruggedBunny: I had looked into UpdateVirtualDisplay True, False.  However, since I wanted the entire game to fit onto the screen regardless of the screen size or orientation that didn't seem to work.  Since when you zoom in you lose some of the game. I think I may be able to live with blackbars but with my code right now I have a virtual display size of 960x640 and the blackbars are HUGE when in portrait. <br><br></td></tr></table><br>
<a name="2083187"></a>

<a name="2083188"></a>

<a name="2083184"></a>

<a name="2083185"></a>

<a name="2083218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> the aspect ratio problem makes the graphics look unprofessional in this case <br></div><br><br>Maybe try doing it the Replica Island way:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Strict

Import mojo

Function Main:Int()
	New MyApp()
	Return True
End

Class MyApp Extends App
	Field deviceWidth:Int
	Field deviceHeight:Int
	Field screenHeight:Int
	Field screenWidth:Int
	Field screenWidthRatio:Float
	Field screenHeightRatio:Float
		
	Method OnCreate:Int()
		SetScreenSize(480, 320)
		SetUpdateRate(60)
		Return True
	End
	
	Method OnRender:Int()
		PushMatrix
			Scale screenWidthRatio, screenHeightRatio
			
			Cls(100, 100, 200)
			
			' Draw an X		
			SetColor(255, 255, 255)
			DrawLine(0, 0, screenWidth, screenHeight)
			SetColor(255, 0, 255)
			DrawLine(0, screenHeight, screenWidth, 0)
			
			' Draw Shapes
			SetColor(255, 0, 0)
			DrawRect(200, 100, 100, 100)
			DrawRect(1200, 100, 100, 100)
			SetColor(255, 255, 0)
			DrawOval(200, 300, 100, 100)
			
		PopMatrix
		
		SetAlpha(0.5)
		DrawText("Screen Width        = " + screenWidth, 10, 10)
		DrawText("Screen Height       = " + screenHeight, 10, 20)
		DrawText("Device Width        = " + deviceWidth, 10, 30)
		DrawText("Device Height       = " + deviceHeight, 10, 40)
		DrawText("Screen Width Ratio  = " + screenWidthRatio, 10, 50)
		DrawText("Screen Height Ratio = " + screenHeightRatio, 10, 60)
		
		DrawText("MouseX              = " + MouseX(), 10, 80)
		DrawText("MouseY              = " + MouseY(), 10, 90)
		DrawText("Virtual MouseX      = " + MouseX() / screenWidthRatio, 10, 100)
		DrawText("Virtual MouseY      = " + MouseY() / screenHeightRatio, 10, 110)
		
		DrawText("Press 1 to set screen to 480x320 (aspectRatio = true)", 10, 130)
		DrawText("Press 2 to set screen to 480x320 (aspectRatio = false)", 10, 140)
		DrawText("Press 3 to set screen to 640x480 (aspectRatio = true)", 10, 150)
		DrawText("Press 4 to set screen to 640x480 (aspectRatio = false)", 10, 160)
		DrawText("Press 5 to set screen to 1920x1080 (aspectRatio = true)", 10, 170)
		DrawText("Press 6 to set screen to 1920x1080 (aspectRatio = false)", 10, 180)
		SetAlpha(1)
		
		Return True
	End
	
	Method OnUpdate:Int()	
		If KeyHit(KEY_1)
			SetScreenSize(480, 320)
		Else If KeyHit(KEY_2)
			SetScreenSize(480, 320, False)
		Else If KeyHit(KEY_3)
			SetScreenSize(640, 480)
		Else If KeyHit(KEY_4)
			SetScreenSize(640, 480, False)
		Else If KeyHit(KEY_5)
			SetScreenSize(1920, 1080)
		Else If KeyHit(KEY_6)
			SetScreenSize(1920, 1080, False)
		End
		Return True
	End
	
	Method SetScreenSize:Void(w:Int, h:Int, aspectRatio:Bool = True)
		' set the screen width and height
		screenWidth = w
		screenHeight = h
		
		' set the device width and height
		deviceWidth = DeviceWidth()
		deviceHeight = DeviceHeight()
		
		' calculate the ratios
		screenHeightRatio = Float(deviceHeight) / screenHeight
		If Not aspectRatio
			screenWidthRatio = screenHeightRatio
		Else
			screenWidthRatio = Float(deviceWidth) / screenWidth
		End
	End
End</textarea> <br><br></td></tr></table><br>
<a name="2083329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you again therevills, you have been very kind.<br><br>Let me restate what I am doing, just to make sure I am being clear on everything<br>  - Single screen game (no scrolling)<br>  - Right now I am coding against a 960x640 resolution (no reason behind this except that it is my iphone4's resolution in landscape)<br>  - I want the game to work in both landscape and portrait without noticeably distorting graphics or changing the size of the playing field.<br>  - Since this is a single screen game, everything must fit on the screen regardless of orientation or resolution.<br>  - Background image should scale to fill the screen.<br>  - Controls are at the bottom of the screen.<br><br>Here is what I'm working with now, when using 960x640 (aspectRatio = false) it is cutting off a lot of the playing field to the right. And the background isn't being scaled.<br><br>Portrait:<br><img src="https://dl.dropboxusercontent.com/u/106998981/game.png"><br><br>Landscape:<br><img src="https://dl.dropboxusercontent.com/u/106998981/game_landscape.png"><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import mojo

Function Main:Int()
	New MyApp()
	Return True
End

Class MyApp Extends App
	Field deviceWidth:Int
	Field deviceHeight:Int
	Field screenHeight:Int
	Field screenWidth:Int
	Field screenWidthRatio:Float
	Field screenHeightRatio:Float
	
	Field backgroundImage:Image
	Field squareImage:Image
		
	Method OnCreate:Int()
		SetScreenSize(960, 640)
		SetUpdateRate(60)
		
		backgroundImage = LoadImage("background3.png")
		squareImage = LoadImage("square.png") ' 32x32 pixel square
		Return True
	End
	
	Method OnRender:Int()
		PushMatrix
			Scale screenWidthRatio, screenHeightRatio
			
			Cls(100, 100, 200)
			
			DrawImage backgroundImage, 0, 0
			DrawImage squareImage, 400, 100
			
			' Draw an X		
			SetColor(255, 255, 255)
			DrawLine(0, 0, screenWidth, screenHeight)
			SetColor(255, 0, 255)
			DrawLine(0, screenHeight, screenWidth, 0)
			
			' Draw Shapes
			SetColor(255, 0, 0)
			DrawRect(200, 100, 100, 100)
			DrawRect(1200, 100, 100, 100)
			SetColor(255, 255, 0)
			DrawOval(200, 300, 100, 100)
			
		PopMatrix
		
		SetAlpha(0.5)
		DrawText("Screen Width        = " + screenWidth, 10, 10)
		DrawText("Screen Height       = " + screenHeight, 10, 20)
		DrawText("Device Width        = " + deviceWidth, 10, 30)
		DrawText("Device Height       = " + deviceHeight, 10, 40)
		DrawText("Screen Width Ratio  = " + screenWidthRatio, 10, 50)
		DrawText("Screen Height Ratio = " + screenHeightRatio, 10, 60)
		
		DrawText("MouseX              = " + MouseX(), 10, 80)
		DrawText("MouseY              = " + MouseY(), 10, 90)
		DrawText("Virtual MouseX      = " + MouseX() / screenWidthRatio, 10, 100)
		DrawText("Virtual MouseY      = " + MouseY() / screenHeightRatio, 10, 110)
		
		DrawText("Press 1 to set screen to 480x320 (aspectRatio = true)", 10, 130)
		DrawText("Press 2 to set screen to 480x320 (aspectRatio = false)", 10, 140)
		DrawText("Press 3 to set screen to 1136x640 (aspectRatio = true)", 10, 150)
		DrawText("Press 4 to set screen to 1136x640 (aspectRatio = false)", 10, 160)
		DrawText("Press 5 to set screen to 640x1136 (aspectRatio = true)", 10, 170)
		DrawText("Press 6 to set screen to 640x1136 (aspectRatio = false)", 10, 180)
		DrawText("Press 7 to set screen to 960x640 (aspectRatio = true)", 10, 190)
		DrawText("Press 8 to set screen to 960x640 (aspectRatio = false)", 10, 200)
		DrawText("Press 9 to set screen to 640x960 (aspectRatio = true)", 10, 210)
		DrawText("Press 0 to set screen to 640x960 (aspectRatio = false)", 10, 220)
		SetAlpha(1)
		
		Return True
	End
	
	Method OnUpdate:Int()	
		If KeyHit(KEY_1)
			SetScreenSize(480, 320)
		Else If KeyHit(KEY_2)
			SetScreenSize(480, 320, False)
		Else If KeyHit(KEY_3)
			SetScreenSize(1136, 640)
		Else If KeyHit(KEY_4)
			SetScreenSize(1136, 640, False)
		Else If KeyHit(KEY_5)
			SetScreenSize(640, 1136)
		Else If KeyHit(KEY_6)
			SetScreenSize(640, 1136, False)
		Else If KeyHit(KEY_7)
			SetScreenSize(960, 640)
		Else If KeyHit(KEY_8)
			SetScreenSize(960, 640, False)
		Else If KeyHit(KEY_9)
			SetScreenSize(640, 960)
		Else If KeyHit(KEY_0)
			SetScreenSize(640, 960, False)
		Endif
		Return True
	End
	
	Method SetScreenSize:Void(w:Int, h:Int, aspectRatio:Bool = True)
		' set the screen width and height
		screenWidth = w
		screenHeight = h
		
		' set the device width and height
		deviceWidth = DeviceWidth()
		deviceHeight = DeviceHeight()
		
		' calculate the ratios
		screenHeightRatio = Float(deviceHeight) / screenHeight
		If Not aspectRatio
			screenWidthRatio = screenHeightRatio
		Else
			screenWidthRatio = Float(deviceWidth) / screenWidth
		End
	End
End
</textarea><br><br>Images<br><a href="https://dl.dropboxusercontent.com/u/106998981/images2.zip" target="_blank">https://dl.dropboxusercontent.com/u/106998981/images2.zip</a><br><br>I am changing between the following within CONFIG.MONKEY to represent the different orientations<br><br>Portrait<br><pre class=code>
#GLFW_WINDOW_WIDTH=640
#GLFW_WINDOW_HEIGHT=960
</pre><br><br>Landscape<br><pre class=code>
#GLFW_WINDOW_WIDTH=960
#GLFW_WINDOW_HEIGHT=640
</pre> <br><br></td></tr></table><br>
<a name="2083277"></a>

<a name="2083276"></a>

<a name="2083274"></a>

<a name="2083272"></a>

<a name="2083330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get what you are trying to do and it sounds like the holy grail :)<br><br>It depends on the type of game - have a look at Candy Crush and see how they deal with changing the orientation.<br><br>Landscape:<br><img src="https://dl.dropboxusercontent.com/u/35103024/ScreenShots/cc_landscape.png"><br><br>Portrait:<br><img src="https://dl.dropboxusercontent.com/u/35103024/ScreenShots/cc_portrait.png"> <br><br></td></tr></table><br>
<a name="2083328"></a>

<a name="2083332"></a>

<a name="2083333"></a>

<a name="2083334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, it looks like the change the ui all around for candy crush.<br><br>It is frustrating that something this seemingly simple is taking me so long.<br><br>Let me explain my game design, maybe that will help.<br><br>I have a background image that should fill the entire screen.<br>On top of that I randomly place platforms (using tiles)<br>The player jumps from platform to platform (like doodle jump)<br>No scrolling.<br>Three control buttons at the bottom of the screen.<br>The user should be free to change orientations while the game is running.<br><br>If I cant do this with scaling, would i instead need to covert the coordinates for the player and tiles when changing orientations?<br><br>I am hoping not to lock the player in one specific orientation, however if I can't figure this out soon I may be forced to :/ <br><br></td></tr></table><br>
<a name="2083336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Yeah, it looks like the change the ui all around for candy crush. <br></div><br><br>Not only that but it looks like they change the size of the grid:<br><img src="https://dl.dropboxusercontent.com/u/35103024/ScreenShots/cc_landscape_and_portrait.png"><br><br><div class="quote"> On top of that I randomly place platforms (using tiles)<br>The player jumps from platform to platform (like doodle jump) <br></div><br>It sounds doable... but of course in the landscape mode there will be more platforms horizontally and vice visa for portrait, which will affect game play.<br><br>A lot of games have one huge background which fits landscape, but crops it and centers it for portrait. <br><br></td></tr></table><br>
<a name="2083338"></a>

<a name="2083339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> My current background has vitals on the edges so I'm not sure if I could just crop it.  Scaling the background actually doesn't look very skewed.  Its the tiles and player that looked skewed.<br><br>I think I may be over complicating things :(<br><br>I liked the Replica Island approach. I also liked the Virtual Viewport approach in the link you provided <a href="http://blog.gemserk.com/2013/01/22/our-solution-to-handle-multiple-screen-sizes-in-android-part-one/" target="_blank">http://blog.gemserk.com/2013/01/22/our-solution-to-handle-multiple-screen-sizes-in-android-part-one/</a><br><br>These seem to fix the issue with varying screen sizes.  However, since the screen size varies so much between landscape and portrait they don't seem to address that :(<br><br>I also found this link<br><a href="http://v-play.net/doc/vplay-different-screen-sizes/#approaches-for-content-scaling" target="_blank">http://v-play.net/doc/vplay-different-screen-sizes/#approaches-for-content-scaling</a> <br><br></td></tr></table><br>
<a name="2083341"></a>

<a name="2083342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Going back to you Replica Island implementation.  Did I bork something when I added my images and numbers in?  The results weren't as I expected.<br><br>Also, rikman seems to have gotten this working; however his link is dead as it is very old :/<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=2756" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=2756</a> <br><br></td></tr></table><br>
<a name="2083343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or if I have to have blackbars, how big would these be? Is there an equation to calculate this? Is there anyway to limit these?<br><br>The blackbars in my original example, were HUGE and took up about as much space as the game.  This is obviously unacceptable. <br><br></td></tr></table><br>
<a name="2083345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raph</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> erebel,<br><br>Have you done a mockup in a graphics program of what the screen should look like in both portrait and landscape? I am having real trouble picturing how it would play given the description you gave.<br><br>One of my games (not done yet) does exactly what Candy Crush does. What I do is that I detect which of the two it is, and I move UI elements around based on the orientation. The playfield changes size also, and it's based on grid squares being a percentage of the screen size.<br><br>It was enough of a pain that I have started making my own GUI system with anchoring logic and all placement and sizes done in percentages. Still debugging that though. <br><br></td></tr></table><br>
<a name="2083353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> My current background has vitals on the edges so I'm not sure if I could just crop it.  <br></div><br>What do you mean by vitals?<br><br><div class="quote">  Did I bork something when I added my images and numbers in?  <br></div><br>Nope, that technique is designed to work when you increase the viewport not the orientation.<br><br><div class="quote"> Or if I have to have blackbars, how big would these be? <br></div><br>All depends on the device.<br><br>The way you have described your game, sounds to me like it should be set to be either landscape or portrait, not both - as it will affect the gameplay too much. Whereas something like a Match 3 game is confined to a playable grid, your game needs the whole screen. <br><br></td></tr></table><br>
<a name="2083352"></a>

<a name="2083355"></a>

<a name="2083356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> By vitals, I just mean the background image has leaves on the left and right edges that I would rather not crop out.<br><br>So there arent any techniques for doing this for orientation as well? :(<br><br>I only have a few graphics, maybe I should include these in different sizes? No idea what sizes I would need to cover all devices though. This isnt ideal, but it would be nice to know if it could work.<br><br>I could limit the playable grid; but it seems like I would have to limit it too much since the ratios differ so much between orientations. For example, the safe area while in portrait is pretty small vertically compared to while in landscape. <br><br></td></tr></table><br>
<a name="2083381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there anyway I could mess with the projection matrix to get this working?<br><br>Something like this<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=5384" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=5384</a><br><br>I haven't used the opengl module yet and am not really sure how it mixes with DrawImage and such. <br><br></td></tr></table><br>
<a name="2083394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I actually think Raph asked a very relevant question -- it is hard to picture how you intend the game to appear in horizontal mode versus portrait mode. <br><br></td></tr></table><br>
<a name="2083396"></a>

<a name="2083397"></a>

<a name="2083398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree DruggedBunny,  I will see if I can mock something like that up.<br><br>Currently when my game is in portrait mode it is very small and unplayable.<br><br>After thinking about it some more this is what I am thinking..<br><br>  - <b>Background</b> should be scaled to fit entirely on the screen (I think we can ignore aspect ratio here because the image is so big)<br>  - <b>Platforms</b> should remain on the screen regardless of position when the orientation changes. Aspect ratio is important here because the tiles are 32x32 and look very odd when skewed.<br>  - <b>Player</b> should remain on the screen regardless of position when the orientation changes.  Aspect ratio is important here as well because the image is fairly small and any skewing is noticeable.<br>  - <b>UI elements</b> such as control buttons and hud elements (such as score).  These need to remain in the same area of the screen regardless of orientation and remain close to the same size. <br><br></td></tr></table><br>
<a name="2083409"></a>

<a name="2083415"></a>

<a name="2083416"></a>

<a name="2083417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have attempted to draw this out in a paint program..<br><br>Landscape<br><img src="https://dl.dropboxusercontent.com/u/106998981/landscape_goal.png"><br><br>Portrait (option 1)<br><img src="https://dl.dropboxusercontent.com/u/106998981/portrait_goal.png"><br><br>Portrait (option 2)<br><img src="https://dl.dropboxusercontent.com/u/106998981/portrait_goal2.png"><br><br>I want to keep the tiles square and fit the background to the screen.  And keep the platforms in the same relative position in each orientation. <br><br></td></tr></table><br>
<a name="2083524"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> So you want to be able to change the orientation at run time and have the platforms in the same relative position... how is that not going to affect game play?<br><br>For example, say your platform is at 800, 100 in landscape mode then the user rotates the device, now the platform is at 533, 150. Are you going to change the player's overall speed and jump amount to compensate or keep them the same?<br><br>It could be a funky game mechanic if you don't and the player has to keep changing orientation to jump on the platforms.... although it might annoy them too much too ;) <br><br></td></tr></table><br>
<a name="2083546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I was hoping to just scale it all, so I didnt have to worry about converting coordinates, speed, and things like that. But it doesnt look possible to support landscape and portrait without either skewing all the graphics (because of the aspect ratio), introducing huge black bars, or cropping the playing field :( <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
