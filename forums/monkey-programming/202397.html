<!DOCTYPE html><html lang="en" ><head ><title >pubnub module</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >pubnub module</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >pubnub module</a><br><br>
<a name="2023762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Following from my previous thread where someone was talking about networking in monkey, I spent a little time today getting pubnub working in html5 and flash!<br><br>See the demo here:<br><a href="http://www.skn3.com/junk/pubnub/MonkeyGameHtml.html" target="_blank">http://www.skn3.com/junk/pubnub/MonkeyGameHtml.html</a><br><br>It was incredibly straight forward, and doesn't require anything special to be done to your project files. The required pubnub source and dom elements are attached at runtime.<br><br>You can download the example + module here:<br><a href="http://www.skn3.com/junk/pubnub/pubnub.zip" target="_blank">http://www.skn3.com/junk/pubnub/pubnub.zip</a><br><br>I don't really have time to continue development on it and just wanted to have a try. Is anyone willing (got the time?) to continue where I left off and implement this for the other targets?<br><br>[update] I tweaked the demo to use hard coded font colors (seperate font for each color) and not apply any SetColor ... so it now shouldn't run like a dog :D<br><br>[update again]I have now added a flash target to the module! You can check the example and switch between html5 and flash versions... <br><br></td></tr></table><br>
<a name="2023749"></a>

<a name="2023736"></a>

<a name="2023739"></a>

<a name="2023743"></a>

<a name="2023744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice demo,<br>it says on the website 5 million messages per month are free ^_^<br>the messages are held on the pubnub servers? <br><br></td></tr></table><br>
<a name="2023745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks,<br>Yup 5 million free which is pretty damn good and no need to pay for a server as its stored on theirs :D <br><br></td></tr></table><br>
<a name="2023750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fryman</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like it and will use it! <br><br></td></tr></table><br>
<a name="2023763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updated with a flash target... <br><br></td></tr></table><br>
<a name="2023764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks skn3. Just what I needed. <br><br></td></tr></table><br>
<a name="2023767"></a>

<a name="2023768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent work! That editor is so nice and fluent... Any chance you'll make that into a library? :) <br><br></td></tr></table><br>
<a name="2023775"></a>

<a name="2023776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> 5 million messages can be used up very quickly. Just do the math.<br><br>But thanks for the module. It is always good to have more possibilities. <br><br></td></tr></table><br>
<a name="2023800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1 thousand people could play for 39 minutes a day at 70 messages a minute (1 a second plus 10 additional). Yeah not a huge amount, but fairly good for messing around with! I wonder what the limit of number of accounts is, you could potentially setup a webserver to list running games and then divert connecting users to appropriate pubnub account keys, each with their own 5 million message limit. I dunno if that breaks any terms/conditions they have though...<br><br>Thanks for comments btw, now any brave soul want to tackle one of the other targets?<br><br>A decent server would cost you about minimum £100 a month plus then the additional time of coding a steady infrastructure that can scale... lets say minimum 4 months (probably more like a 8-12) of development? starts to work out less expensive then you first think...<br><br>There is another service <a href="http://www.pusher.com" target="_blank">http://www.pusher.com</a> that offers a more competitive rate! I wonder how hard it would be to write a "dirty" pubnub server in node.js or something! (and then swap out the destination in the library)<br><br><div class="quote"> Excellent work! That editor is so nice and fluent... Any chance you'll make that into a library? :) <br></div><br><br>Do you mean the chat pane and input box? take a look at the sample code its fairly straightforward, nothing fancy. <br><br></td></tr></table><br>
<a name="2023786"></a>

<a name="2023787"></a>

<a name="2023783"></a>

<a name="2023813"></a>

<a name="2023814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> huh?<br><br><div class="quote"> 1 thousand people could play for 39 minutes a day at 70 messages a minute (1 a second plus 10 additional) <br></div>. <br><br>I get then 81.900.000 messages in on Month. <br><br>1000 people x 39 minutes/day x 30 days x 70 messages/minute. <br><br></td></tr></table><br>
<a name="2023812"></a>

<a name="2023825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whoops I miss-calculated!<br><br>So roughly twenty people could play for 2 hours a day on 70 messages a minute.<br><br>(5,000,000 / (70 * 60) / 2 / 30) <br><br></td></tr></table><br>
<a name="2026740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is really cool! :) <br><br></td></tr></table><br>
<a name="2026800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indeed. They lowered this to 1 mio. messages free per month. What does "message" mean in this context? <br><br></td></tr></table><br>
<a name="2026808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh cool they have a pay as you go method now... much better!<br><br>A message is any message pushed to them or pushed from them to a user. So that means if you had 250 people subscribed to a channel and 1 message was sent that would count as 251 messages. 1 used to send to pubnub and 250 to send that back out to all of the subscribers.<br><br>So in this context.. if I send a message on the demo and 4 people are connected that is 5 messages.<br><br>The pricing model is not that great for indies but I guess their new scaled pricing is a bit better! <br><br></td></tr></table><br>
<a name="2026806"></a>

<a name="2026807"></a>

<a name="2026849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice! I did notice on HTML5 (Safari) I don't see any chat history, it loads the history in flash version. <br><br></td></tr></table><br>
<a name="2026879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I noticed that intermittently. Maybe Xaron could nail that bug, I'm sure its probably just a typo or something... <br><br></td></tr></table><br>
<a name="2027167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah well. Got it to work under Android. :)<br><br>Ok, but now I have the problem that I have strings in Javascript but JSON objects in Android. So if I send something from Android to HTML5 I get something like<br><br><pre class=code>
object Object
</pre><br><br>as return value. JSON objects are just pairs, so the first one is the key and the second one is the value. But I have no clue at the moment how to make a string from an JSON object in Javascript (HTML5)?<br><br>In Java I just do (in a loop):<br><pre class=code>
JSONObject o = response.getJSONObject( i );
String s = o.getString( _jsonKey );
</pre> <br><br></td></tr></table><br>
<a name="2027201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you force communication to be string based (eg convert json to string before sending) then you could rely on the each of the targets own json implementation to then translate back to json object?<br><br>or have I misunderstood?<br><br>[edit] this could also help?<br><a href="http://stackoverflow.com/questions/1116708/getting-first-json-property" target="_blank">http://stackoverflow.com/questions/1116708/getting-first-json-property</a> <br><br></td></tr></table><br>
<a name="2027200"></a>

<a name="2027210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aman</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will this be combined with mnet or be a standalone module? There are multiple topics around the forum about this and it started to be hard to follow all of them. <br><br></td></tr></table><br>
<a name="2027224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xaron is combining this into mnet :D <br><br></td></tr></table><br>
<a name="2027239"></a>

<a name="2027240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes!<br><br>So the next version of MNet will have http requests and pubnub.<br><br>And BTW: I got my problem solved! So messaging from Android to HTML5 and back works (in between of course too)! <br><br></td></tr></table><br>
<a name="2027553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is killer stuff :) <br><br></td></tr></table><br>
<a name="2027830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, what was the issue? <br><br>I still think it would be cool to write a pubnub server to bypass message limits! Maybe I'll write one in nodejs when I find a minute..... When! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
