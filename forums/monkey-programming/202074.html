<!DOCTYPE html><html lang="en" ><head ><title >sprintf</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >sprintf</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >sprintf</a><br><br>
<a name="2019888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >luggage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any kind of string formatting in Monkey?  I'd like to be able to do something like...<br><br>sprintf(myString, "%04d", index );<br><br>and that gives me a string like "0001" and so on.  <br><br>Thanks! <br><br></td></tr></table><br>
<a name="2019893"></a>

<a name="2019894"></a>

<a name="2019895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately Monkey does not support varargs, so no.  You could probably write your own to accept an array...<br><pre class=code>Local str:String = Format("%04d", [index])</pre><br><br>Edit: you might have trouble with typecasting arrays though.<br><br>Edit #2: Mark, can we get some better autoboxing with Object?  It'd be great to be able to do this:<br><br><pre class=code>Local o:Object = 3</pre><br>And it assigns o = IntObject(3).<br><br>Similar with arrays:<br><pre class=code>Local o:Object[] = [3]</pre><br>Should create an Object[] array with one element, being an IntObject. <br><br></td></tr></table><br>
<a name="2019935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >luggage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks.  Bit of a gap that.  Worked around it for now as I only needed the example given so manually pad it out. <br><br></td></tr></table><br>
<a name="2019986"></a>

<a name="2019988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've added a simple sprintf implementation to Diddy.  Unfortunately Monkey doesn't autobox to Object (please, Mark?), so you'll need to manually do it with the B() function (B stands for Box).<br><pre class=code>Print Format("%04d", B(index))</pre><br>It doesn't do a lot of error checking right now, so be careful. :)<br><br>Edit:<br>Supported format types: %d (integer), %f (float), %c (character), %s (string), %S (uppercase string), %x (integer as hex), %X (integer as uppercase hex).<br>All types except %c support a width and optional right-alignment (specified with a minus).<br>All numeric types support a padding 0 (exclusive to right-alignment).<br>%f currently truncates floats rather than rounding them (I'll fix this eventually). <br><br></td></tr></table><br>
<a name="2019985"></a>

<a name="2020025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm a bit wary of this 'auto boxing to object' mainly because it would mean IntObject, FloatObject and StringObject would all become a core part of the language (which they currently aren't) - not necessarily a bad thing, but not something done lightly.<br><br>But in addition, if auto boxing just produces a plain 'Object', well, Objects aren't all that useful on their own and you're still left with the issue of having to work out what type of object it is, either with a 'suck it and see' downcast, or via some 'meta data' like your type tags plus a downcast. But perhaps I have this wrong - I haven't done much boxing stuff...<br><br>I'd actually be less wary of autoboxing to something 'useful' - like some kind of Variant object with ToInt, ToFloat etc methods. Perhaps this could be a base class of IntObject, FloatObject etc? Which is starting to sound like something that could be useful in interpreted Monkey...<br><br>But as far as the original question goes, I tend to think this approach...<br><br>Function Format$( value,precision=blah,flags=etc )<br>Function Format$( value#,precision=blah,flags=etc )<br>Function Format$( value$,precision=blah,flags=etc )<br><br>...and just concatenating results together is better anyway - more efficient, less confusing (I HATE those godamn printf docs!) and just plain more Monkey like.<br><br>Semi-related: another thing I was thinking of adding in the early days of Monkey was a simple kind of varargs mechanism. Basically, the idea was that if the last param of a function was an array, client code could specify the array without the need for [ and ]. So, Print could become...<br><br>Function Print( arg$[] )<br><br>...and could then be used with varargs, eg:<br><br>Print x<br>Print x,y,z<br><br>...not sure what print would insert between items, but you get the idea. <br><br></td></tr></table><br>
<a name="2020033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haxored boxes.monkey to make them all extend an Autobox class, hoping Monkey would work its magic.  Alas, no dice.  That's probably the best option I think.  Maybe you could call the class Primitive?<br><br>As for the Format overloads, that's fine, but oldschool coders will want printf-style. :) <br><br></td></tr></table><br>
<a name="2020052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >luggage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Samah:  Excellent job on adding Format into Diddy, that looks spot on and will cover the vast majority of use cases.  <br><br>I don't mind the overloaded method either, I just tend to use whatever an API gives me. <br><br></td></tr></table><br>
<a name="2020079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Followup:<br>It appears that if the arguments are defined as String instead of Object, Monkey will accept primitives without the need for a boxing wrapper function.<br>This will now work as expected:<br><pre class=code>Print Format("%d,%s,%05.1f", 1, "foo", 3.1415)
1,foo,003.1</pre><br>Fixed in revision 324.<br>Edit: Remember that %% will escape a % character. <br><br></td></tr></table><br>
<a name="2020078"></a>

<a name="2020077"></a>

<a name="2020076"></a>

<a name="2020075"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
