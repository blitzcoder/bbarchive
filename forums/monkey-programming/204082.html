<!DOCTYPE html><html lang="en" ><head ><title >Diddy - Leaving a Screen, Re-entering?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Diddy - Leaving a Screen, Re-entering?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Diddy - Leaving a Screen, Re-entering?</a><br><br>
<a name="2043833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a part in diddy that handles the code I insert to deal with leaving a screen?<br><br>It would be handy because then I could do any resetting of lists/objects etc!<br><br>Apologies if there is something there and I'm just not looking properly!<br><br>[edit] I'm not using the current Monkey version released a few days ago, also using the current diddy compatible with the previous version of Monkey, Monkey 66<br><br>[edit] Ok! I figured I could use the start method of each screen for this. Basically check if things exist already when entering the screen and if so null them and reset any globals etc! Seems to work fine so far! <br><br></td></tr></table><br>
<a name="2043831"></a>

<a name="2043832"></a>

<a name="2043838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, I normally reset stuff in the Start method or you could use the Kill() method. Kill() gets called once the current screen has finished fading. <br><br></td></tr></table><br>
<a name="2043861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would just create a new Screen instance every time. <br><br></td></tr></table><br>
<a name="2043922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! Good point but I may have things I want to keep active. If not then yes that seems a better way.<br><br>Unrelated to that; diddy's RectsOverlap does not take in to account midhandled images; or does it?<br><br>I'm just passing the x, y and width, height to rectsoverlap and the collision is way off! <br><br></td></tr></table><br>
<a name="2043925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> diddy's RectsOverlap does not take in to account midhandled images; or does it? <br></div><br><br>If you are just using the function RectsOverlap(x, y, width, height) then no, as it doesn't know anything about the image you are applying it to.<br><br>You could do this:[monkeycode]<br>img = new GameImage("blah")<br>x = 100<br>y = 100<br>If RectsOverlap(x - img.image.HandleX(), y - img.image.HandleY(), img.w, img.h) Then Print "BOOM!"<br>[/monkeycode]<br><br>If you are using a sprite, it will automatically set up a hitbox for you using the image handles, then use the sprite.Collide(sprite) method. <br><br></td></tr></table><br>
<a name="2043926"></a>

<a name="2043928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is deffo juicy! :) Thanks!<br><br>[edit] Just tried that and it produces the same result.I think I know what the problem is. If the image is say 100x50 but is a .png with alpha and the visible sprite is actually 80x30 then the methods used take in to account the whole image and not the image with alpha or the actual area covered by the image.<br><br>A little math and I have it fixed now. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
