<!DOCTYPE html><html lang="en" ><head ><title >Level design and format.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Level design and format.</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Level design and format.</a><br><br>
<a name="2073693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pulling this conversation over here from face book to try and get some more points of view..<br><br>I'm working on a game at the moment, where my levels are a collection of tiles, currently my class has the following fields, and most of these would be stored in file.<br><br><pre class=code>
	field x:Float
	field y:Float
	field velx:Float
	field vely:float
	field radius:Float
	field mass:Float
	field life:int
	field hexTile:int
	field hexGlow:Int
	field sprite:GameImage
	field shake:bool
	field shakeForce:Int
	field shakeDuration:Int
	field shakeTime:int
	Field powerup:Int
</pre><br><br>I will probably expand this set of fields as I expand the functionality of the tiles themselves, my question is what would best suit this data in terms of file format for my levels.<br><br>I guess my options at the moment (using diddy) would be Json,Xml or Plain Text.<br><br>there are a number of additional properties that I will need to also add to what ever file format I end up using so flexibility might be a consideration.. <br><br></td></tr></table><br>
<a name="2073696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I assume those are entities that will be added with a level editor?  I don't really know what you're asking here.<br><br>For my platformer I went with run level encoding, not xml or anything like that.  It worked.  When programming games I tend to do things in a very straightforward brute force way.  This might bite me in the ass at some level of complexity but for now using manager classes of various sorts and strict encapsulation is doing what I need. <br><br></td></tr></table><br>
<a name="2073703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah those are all fields from my tile class, which would need to be represented within the level file format, but that class and the things it needs to do will increase in complexity.<br><br>I am wondering what the best file format to use would be, for example I could do the above in a comma delimitaed plain text file like this.<br><br><pre class=code>
level,x,y,velx,vely,radius........
</pre><br><br>or xml<br><pre class=code>
&lt;Level Name="1"&gt;
  &lt;Hex&gt;
    &lt;x&gt;100&lt;/x&gt;
    &lt;y&gt;100&lt;/y&gt;
  &lt;/Hex&gt;
&lt;/Level&gt;
</pre><br><br>or Json<br><pre class=code>
{"Level": "1"{
    "hex": {
        "x": "100",
        "y": "100"
    },
    "hex":.......
</pre><br>And that's normally what I would use, I tend to like yourself just brute my way through things, but this time around I want to try and use the best option for the job.<br><br>I am swaying between XML and Json and I know they have some differences so I guess what I really need to know is how well does monkey handle each with the available modules, or will or is there anything I need to be aware of.<br><br>I kinda vaguely recall a post about xml and some one couldn't get diddy(I might be miss remembering here....) to read a child property??? sorry it was a while ago and I don't recall specifics. <br><br></td></tr></table><br>
<a name="2073702"></a>

<a name="2073701"></a>

<a name="2073708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why the heck do you have velocity on tiles? <br><br></td></tr></table><br>
<a name="2073712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> a suggestion some one made in another thread, the longer the player takes to clear a level I will start to drop all tiles down, will be like a cascade of tiles starting with the bottom left most tile and then rippling up the screen until all active tiles have fallen one space.<br><br>Also planning some special tiles that actually move around the screen, probably nothing to complex just moving left and right within an area or up and down, or a combination of the two, moving targets might be really hellish to hit tho so that will all require testing. <br><br></td></tr></table><br>
<a name="2073739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://jayenkai.socoder.net/2013/12/little-levels/" target="_blank">Blogged about this..</a> <br><br></td></tr></table><br>
<a name="2073744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use json for my level formats now.  In the past, I used csv/ini hybrids, ascii grids, and even png files like Jayenkai.  I don't worry about space efficiency anymore though, since the data's automatically compressed when put into a package on platforms like android where that space efficiency matters.<br><br>The only thing to worry about is parse speed, and if that worries you, you should go with a binary format.  But for most things I recommend json, since it is a very good balance of extendability and readability (by humans).  Parsers are easy and light.<br><br>I normally don't like XML due to both the complexity of the parsers (relatively speaking to json) and how verbose it needs to be to get the point across. <br><br></td></tr></table><br>
<a name="2073743"></a>

<a name="2073742"></a>

<a name="2073746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> James that's a sweet way of laying out a level, but unfortunately I need to store data in such a way that I can save extra information about each tile, for example power-ups can be placed under specific tiles, or in the case of a warp/teleport tile i need to be able to say tile A warps to tile B.<br><br>I have now bookmarked that post tho because I know for sure that's going to be handy at some point.<br><br>Nobuyuki you think Json is easier on the eye than XML? guess its a personal thing I find xml easier to read.<br><br>As for load times thats something I wont really know until I test it. <br><br></td></tr></table><br>
<a name="2073763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I still think you can heavily reduce the complexities of what you're doing.<br>...this is your hexagonal breakout thing, right?<br><br>Start with a grid..<br>Let's say 8x12 tiles.<br>Give yourself 8 base colours to play with, and the loader can add extra hue parameters for effect.<br>So, for placement we need only use letters ABCDEFGH<br>0 for nothing, A for red, B for orange, C is yellow, D is green, E is cyan, F is blue, G is purple, H is white.<br><br>The loader can deal with x-offsetting every other line, so that the hexagons line up correctly, so giving exact co-ordinates isn't an issue.<br><br>If one of the blocks needs two hits to be removed, simply double it's letter, so for example a two-hit Red A become an I.  A three hit orange B becomes an R .. Need more base tile types?  Move on to lowercase, and you've another 3 whole sets of 8-letters to play about with.<br><br>Once your layout grid is done, you can add a secondary "attributes" grid.<br>Here, 0 would be nothing, A would mean it's hiding powerup#1,  B would be 2, etc.<br>As for "teleport", reverse your thinking somewhat.  Instead of saying "this tile should go to this tile", think "these tiles are group 1"<br>Inside that secondary attributes grid, simply define them as 1/2/3, then get the loader to deal with all of the "this one connects to that one" stuff.<br><br>Two simple ASCII grids, and you can achieve a whole lot of functionality.  You might even prefer to intermingle the two grids, to create a two-character-per-tile grid, but compressing those is usually a bit trickier, since there's less repetition. <br><br></td></tr></table><br>
<a name="2073764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use serialization to save data <br><br></td></tr></table><br>
<a name="2073774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Paul - <br><br>Yeah, when values start to get complex, XML starts to look pretty horrible.  The verbosity gets in the way, there's an ambiguity over what should qualify as an attribute vs. a value inside an element's opening and closing tags. What ends up happening is a lot of people make these lists of self-closing tag things at the deepest level -- but it isn't always this way, and you can't really nest inside a self-closing element. Moreover, after you start deep nesting you'll find it hard to see blocks of code, especially if it spills past the edge of the screen and even moreso if you use word-wrap to see the entire tag.<br><br>Json is more terse, which doesn't always mean better, but since the format's so simple, it's really easy to understand at a glance.  There are no ambiguities between when to use element values and attribute values requiring guidelines or careful forethought, since practically everything but arrays and the root object are always key/value pairs. Properly-formatted json lines up neatly, with less overlap than XML.  Json parsers are usually less code than XML parsers, and often json objects can be de/serialized faster, too.  Etc. <br><br></td></tr></table><br>
<a name="2073773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Paul - <br><br>Yeah, when values start to get complex, XML starts to look pretty horrible.  The verbosity gets in the way, there's an ambiguity over what should qualify as an attribute vs. a value inside an element's opening and closing tags. What ends up happening is a lot of people make these lists of self-closing tag things at the deepest level -- but it isn't always this way, and you can't really nest inside a self-closing element, so it can get kinda messy. Moreover, after you start deep nesting you'll find it hard to see blocks of code, especially if it spills past the edge of the screen and even moreso if you use word-wrap to see the entire tag.<br><br>Json is more terse, which doesn't always mean better, but since the format's so simple, it's really easy to understand at a glance.  There are no ambiguities between when to use element values and attribute values requiring guidelines or careful forethought, since practically everything but arrays and the root object are always key/value pairs. Properly-formatted json lines up neatly, with less overlap than XML.  Etc. <br><br></td></tr></table><br>
<a name="2073772"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
