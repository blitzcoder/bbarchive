<!DOCTYPE html><html lang="en" ><head ><title >a Map working in html5 but not other targets</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >a Map working in html5 but not other targets</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >a Map working in html5 but not other targets</a><br><br>
<a name="2051619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >4mat</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been updating an old game engine to work with the newer versions of Monkey.  It's still working fine in html5, but I'm getting odd behaviour in flash and glfw with the map module.<br><br>I'm using it to fast sort an array, probably a weird use for it, but I used a similar thing with List in Blitzmax.<br><br>In OnUpdate I'm making the map each cycle like this:<br><br><pre class=code>
	map.Clear

	for i = 1 to 128

		' adding 64 to the values so they don't go negative
	
	map.Set(ZDepth[i]+64+","+i,Null)

	next
</pre><br><br>Then In OnRender I do this:<br><br><pre class=code>	
	For Local a:=Eachin map.Keys
							
	    Local s$ = a
	    Local v:=s.Split(",")
	    Local p=Int(v[1].Trim())

	' Draw up Sprite[p] 
	
	Next	
</pre><br><br>This works fine in html5, but on the other targets I only get the first item only.  (Doing a count in the render loop shows me the same)<br><br>Has anyone had similar problems?  Again I'm probably not using map as it should be used so maybe that's it, but was wondering why it's ok in html5 and not the others now.<br><br>thanks <br><br></td></tr></table><br>
<a name="2051636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ZDepth[i]+64+","+i <br></div><br>I'm wondering if this is being evaluated in a weird way on different platforms.  Try wrapping the integer addition to make sure it's not converting 64 to a string.<br><br>[monkeycode](ZDepth[i]+64)+","+i[/monkeycode] <br><br></td></tr></table><br>
<a name="2051715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >4mat</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah, just tried that but have the same result unfortunately.  thanks for the suggestion, I'll keep looking. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
