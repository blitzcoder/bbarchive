<!DOCTYPE html><html lang="en" ><head ><title >How to update a class based on another class field</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to update a class based on another class field</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >How to update a class based on another class field</a><br><br>
<a name="2069184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mteo77</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br>I am trying a way to do some "frozen" effect for my sprites.<br>At the moment i have an actor class and an effect class.<br>Actor is the main object, in this case is a moving sprite, and effect is a simple image that "should" follow the actor, with some transparency to make the actor appear frozen.<br>I suppose this can be considered a sort of "parent, child" relationship, but i haven't figured out how to tell the class effect (the child) to update it's coordinates based on the actor class (the parent).<br>I have added an extra field in actor of class effect like this:<br><pre class=code>
Field myEffect:effects
</pre><br>The problem is how i can tell that my effect has to be on top of my actor only when the flag "frozen" is true?<br>Should i put a <br><pre class=code>
myEffect=New effects
</pre><br>in the onupdate method of the actor after i checked for the flag?<br>Second question:<br>How do i set up the effect class OnUpdate method to follow the parent (actor) class coordinates?<br>Everything could be easily solved using a global class, but i really want to avoid doing that.<br>Hopefully i have explained the situation properly.<br>Thank you. <br><br></td></tr></table><br>
<a name="2069188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mteo77</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I resolved using another flag called "isApplied" of type Bool.<br>So when my actor is frozen, it calls for the child class to be created and assign it the isApplied flag to true, so no more instances of the child class are created.<br>Then i manually modify the child x and y coordinates inside the parent OnUpdate method, based on if the child exist or not.<br>Not sure this is the right way to do it but it works..<br><br>But now i got another problem...my idea to create a frozen effect is pretty basic, it just doesn't look very good because all i am doing is overlay the parent with a shape that resembles it, and apply some alpha channel to the image to make it appear a bit frosty...<br>Is there a way to modify the image of the actor itself to appear frosty without applying another one on top?<br>Something like modifying the pixels of it?<br>(i hope it make sense, i don't think i can speak english properly today!) <br><br></td></tr></table><br>
<a name="2069191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your child update solution is okay as long as you don't keep adding more effects/children. If you do it's likely to become unwieldy to add more and more flags.<br><br>In the long run you might want to look at creating a generic method for attaching child actors and make them as self-contained as possible (e.g. the child updates its position based on the parent rather than the parent updating the child).<br><br>As for your frozen effect, manipulating the pixels of the image is bound to be more awkward and slow than simply having a second "frosted" image or overlaying a frost effect image. <br><br></td></tr></table><br>
<a name="2069193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mteo77</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Regarding the effects, yes you are absolutely right; i will see if i can find some examples to implement a "child, parent" class because at the moment i haven't got a clue.<br>Regarding the image, i have been toying with the idea of swapping the image, is it ok to do it during the OnUpdate?<br>Something like:<br><pre class=code>
select state
     case normal
          image=loadimage("blabla.png")
     case frozen
          image=loadimage("blabla-frozen.png")
end select
</pre><br>I was wondering if swapping images during on update would cause slowdowns;<br>i am making sure my images are preloaded though. <br><br></td></tr></table><br>
<a name="2069194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Swapping images, assuming you are just swapping references will not slow down your game.<br>However, in the above code you load the images normally. Monkey isn't able to figure out you have already loaded them so it will load them again.<br><br>If you are sure you will never have more than 2 - 3 states your solution is ok.<br>Else you can lookup the strategy pattern, it's pretty useful in cases you have an unknown number of states to deal with. <br><br></td></tr></table><br>
<a name="2069195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just preload all the images and give them different names, or put them in an array or whatever.  You shouldn't normally be using LoadImage except at (say) the start of a level.<br><br>Then your class instances can draw whatever image is appropriate at any time.<br><br>Imaging writing a font class... you wouldn't call LoadImage( "A.png" ) when you needed to write an A - you'd load all the letter images at the start and decide which image is the correct one to draw for the current letter! <br><br></td></tr></table><br>
<a name="2069196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mteo77</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry in my example above i was supposed to write:<br><pre class=code>
image=blabla
</pre><br>Because the images were already preloaded.. <br><br></td></tr></table><br>
<a name="2069199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mteo77</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> But i haven't thought of using an array for loading, thanks for pointing it out.<br>I think the better solution for me at the moment is to have an array of images of every actor, based on it's state.<br>Also i think i will do my image manipulating in a program, and swap the image in monkey instead of trying to apply effects on the fly...easier. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
