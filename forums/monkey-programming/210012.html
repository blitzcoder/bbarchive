<!DOCTYPE html><html lang="en" ><head ><title >Multiplayer with pusher.com ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Multiplayer with pusher.com ?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Multiplayer with pusher.com ?</a><br><br>
<a name="2108915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone used pusher.com with Monkey-X ? <br><br>It seems like an affordable solution with a nice interface.<br><br>I'd like to find something that works on iOS and Android, and is cheap / free for limited users. <br><br></td></tr></table><br>
<a name="2108911"></a>

<a name="2108918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will check it. Actually I work on a Photon module, so what's the difference to pusher?<br><br>Edit: I think photon is much cheaper. <br><br></td></tr></table><br>
<a name="2108916"></a>

<a name="2108922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought photon was Unity only, but if it's usable with Monkey, that's great.<br><br>Will your module be private, public, free or funded ? <br><br></td></tr></table><br>
<a name="2108923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Photon works for every platform and is the best cloud networking solution I've found so far. <br><br>The Monkey module will be public and free. :) <br><br></td></tr></table><br>
<a name="2108928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds great, looking forward to checking it out! <br><br></td></tr></table><br>
<a name="2109560"></a>

<a name="2109561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well Photon is a mess to wrap around. So I might use Pusher or FireBase, let's see...<br><br>edit: Pusher looks awesome. I like Pubnub as well but it comes with a high price. <br><br></td></tr></table><br>
<a name="2109558"></a>

<a name="2109559"></a>

<a name="2109563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Salmakis</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> should we start a pusher wrapper for monkey targets on git?<br>if so, ill join in to help =) <br><br></td></tr></table><br>
<a name="2109564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll do that, already started with the HTML5 part. Please give me some time to finish the interface and create the repository. <br><br></td></tr></table><br>
<a name="2109827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dived deeper into it (HTML5 almost works) and it looks like you almost always want to use a server as well. Using public channels is easy but in that case you can't use client-to-client communication. For "presence" channels (the more usable ones) you need an authentication first before being able to send messages from client to client. Server side is easy and can be a simple PHP script.<br><br>Authentication:<br><a href="https://pusher.com/docs/authenticating_users" target="_blank">https://pusher.com/docs/authenticating_users</a><br><br>Not a biggie but just wanted to let you know...<br><br>So Pubnub works differently. They base on "obfuscation" of the channel name to keep it secret. Guess what's better? ;) <br><br></td></tr></table><br>
<a name="2109826"></a>

<a name="2109825"></a>

<a name="2109907"></a>

<a name="2109909"></a>

<a name="2109910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Boy this made me some headaches but finally got it working for HTML5. But you MUST have a web server with a simple PHP script running which is the authentication side, otherwise Pusher won't allow presence channels (which are almost the only useful channels, allowing client to client messaging).<br><br>That authorization file looks like:<br><pre class=code>
&lt;?php
  require_once('Pusher.php'); 

  // Define constants for the pusher api info 
  define('PUSHER_API_KEY', 'YOUR APP KEY'); 
  define('PUSHER_API_SECRET', 'YOUR APP KEY SECRET'); 
  define('PUSHER_APP_ID', 'YOUR APP ID'); 

  // Creating a connection to Pusher
  $pusher = new Pusher( PUSHER_API_KEY, PUSHER_API_SECRET, PUSHER_APP_ID ); 

  $uniqid = uniqid();
  $presence_data = array( 'id' =&gt; $uniqid );
  $auth = $pusher-&gt;presence_auth( $_GET['channel_name'], $_GET['socket_id'], $uniqid, $presence_data );
  $callback = str_replace('\\', '', $_GET['callback']);
  header( 'Content-Type: application/javascript' );
  echo($callback . '(' . $auth . ');');
?&gt;
</pre><br><br>For now this just creates a unique user id per user, so nothing fancy. You can and should replace this with real session management and a user data base.<br><br>Will add the github repo later on, just working on a nice example... <br><br></td></tr></table><br>
<a name="2109927"></a>

<a name="2109928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a small working chat example:<br><br><a href="http://www.leidel.net/dl/temp/pusher/MonkeyGame.html" target="_blank">http://www.leidel.net/dl/temp/pusher/MonkeyGame.html</a><br><br>Currently there is still the (small) issue that you get only the last event happened so when the current browser window/tab is inactive it obviously isn't updated and won't get any new messages but the last one. I'll fix that by implementing some kind of a message cache.<br><br>For now there is no way to get which user posted on a channel. Easiest way would be to just include the user id into the message sent.<br><br>And my "sandbox" plan only allows 20 concurrent connections. So if you get an error, it's probably because of that.<br><br>And here's the GitHub Repo: <a href="https://github.com/Xaron/pusher" target="_blank">https://github.com/Xaron/pusher</a><br><br>Coming next are more targets and that fix for "lost" messages in case of an inactive view/game.<br><br><b>A small guide</b><br><br>1) Copy the folder "modules_ext" to your Monkey installation.<br>2) Add your Pusher keys to "phpauth/presence_auth.php" and upload the folder "phpauth" to your webserver.<br>3) Add your keys and the url to your auth path to the example.monkey file.<br><br>That's it! <br><br></td></tr></table><br>
<a name="2109926"></a>

<a name="2109921"></a>

<a name="2109922"></a>

<a name="2109935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, fixed that "events lost bug". :) <br><br></td></tr></table><br>
<a name="2109937"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I look into Realtime.co as well now. Looks like they are very affordable plus have a lot of more platforms. Anyone heard of them?<br><br><a href="http://www.realtime.co/" target="_blank">http://www.realtime.co/</a> <br><br></td></tr></table><br>
<a name="2109974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I continue with realtime.co:<br><br><a href="http://www.monkey-x.com/Community/posts.php?topic=10061" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=10061</a><br><br>Reason: Pusher has only the targets html5, Android and iOS, not even a C++ target which makes it hard to adapt it to the upcoming Monkey 2 later on. PLUS, Realtime.co is much more affordable and is a well established company as well. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
