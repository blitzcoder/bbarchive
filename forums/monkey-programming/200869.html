<!DOCTYPE html><html lang="en" ><head ><title >Rendering Performance on iOS and Android</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Rendering Performance on iOS and Android</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Rendering Performance on iOS and Android</a><br><br>
<a name="2007152"></a>

<a name="2007167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that the rendering performance is a tad slow on both iOS and Android with the generated code from Monkey.<br><br>For example in Pirate Solitaire on one level I am displaying a background image, 5 GUI sprites, 3 DrawTexts (Level, round and score) and about 40 cards... on my iPod I am getting around 25-28FPS.<br><br>On another level I am displaying 24 and get 40+FPS.<br><br>Also with the latest changes to the Android code (the buffer change) I have lost around 10FPS...<br><br>Any way to improve this? <br><br></td></tr></table><br>
<a name="2007172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you using single images or spritesheet? Do create/load images on the fly or before in the OnCreate event? <br><br></td></tr></table><br>
<a name="2007173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The GUI sprites are single images, the cards are on a spritesheet.<br><br>Images are created in the OnCreate event. <br><br></td></tr></table><br>
<a name="2007177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That sounds indeED weird. I will do some tests too. <br><br></td></tr></table><br>
<a name="2007182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hima</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm I made a shoot'ing game with many bullets but I think the number of bullets on the screen is many more than that (100?) and it doesn't lag at all on iOS and Android. But this was since V32 or something, I haven't tried building V40 on mobile devices yet. Will do some tests and get back to you later. <br><br></td></tr></table><br>
<a name="2007186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well both your devices outspec ours :P<br><br>We have a iPod 2nd Gen with a 620MHz CPU, yours is the 4th Gen with a 1GHz (running at 800MHz)<br><br>And a LG Optimus One P500 with a 600MHz CPU, your Galaxy S has a 1GHz CPU... <br><br></td></tr></table><br>
<a name="2007188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>It's impossible to say why you're app's slow without being able to see what it's doing - can you post a demo of some kind?<br><br>&gt; Also with the latest changes to the Android code (the buffer change) I have lost around 10FPS...<br><br>Bummer, but that's the 'right' way to do it so it stays. <br><br></td></tr></table><br>
<a name="2007197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have around 25-30 fps on my Android HTC Desire HD for my turn-based strategy game where the fps really don't matter. I don't do many stuff inside, just painting the map (one single image) and several units (images as well) on it. I think that's quite normal, you can't expect anything beyond 50 fps I guess. <br><br></td></tr></table><br>
<a name="2007215"></a>

<a name="2007216"></a>

<a name="2007217"></a>

<a name="2007218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heres a very basic demo:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import mojo

Global myGame:MyGame

Global SCREEN_WIDTH:Float = 480
Global SCREEN_HEIGHT:Float = 320

Global DEVICE_WIDTH:Int
Global DEVICE_HEIGHT:Int

Global dt:DeltaTimer

Function Main:Int()
	myGame = New MyGame
	Return 0
End Function

Class MyGame Extends App
	Field backgroundImg:Image
	Field shipImg:Image
	Field astImg:Image
	Field alienImg:Image
	Field ship:Ship
	Field ast:Asteroid
	Field alien:Alien
	Field no:Int = 10
	Field noOfObjects:Int = 0
	Field cardImg:Image
	Field card:Card
	
	Method OnCreate:Int()
		dt = New DeltaTimer(60)
		SetUpdateRate 60
		
		DEVICE_WIDTH = DeviceWidth()
		DEVICE_HEIGHT = DeviceHeight()
		
		' load graphics
		backgroundImg = LoadImage("galaxy2.png")
		
		Local atlas:Image = LoadImage( "Ship1.png" )
		shipImg = atlas.GrabImage(0, 0, 64, 64, 7, Image.MidHandle)
		
		atlas = LoadImage( "GAster32.png" )
		astImg = atlas.GrabImage( 0, 0, 32, 32, 16, Image.MidHandle)
		
		atlas = LoadImage( "rusher.png" )
		alienImg = atlas.GrabImage(0, 0, 64, 32, 24, Image.MidHandle)
		
		atlas = LoadImage( "cards.png" )
		cardImg = atlas.GrabImage(0, 0, 48, 72, 52, Image.MidHandle)
		
		Seed = Millisecs()
		
		' create objects

		For Local i:Int = 1 to no
			ship = New Ship(shipImg, Rnd(0, SCREEN_WIDTH), Rnd(0, SCREEN_HEIGHT))
			noOfObjects+=1
		Next
		
		For Local i:Int = 0 to 51
			card = New Card(cardImg, Rnd(0, SCREEN_WIDTH), Rnd(0, SCREEN_HEIGHT), i)
			noOfObjects+=1
		Next
		
		For Local i:Int = 1 to no
			ast = New Asteroid(astImg, Rnd(0, SCREEN_WIDTH), Rnd(0, SCREEN_HEIGHT))
			noOfObjects+=1
		Next
		
		For Local i:Int = 1 to no
			alien = New Alien(alienImg, Rnd(0, SCREEN_WIDTH), Rnd(0, SCREEN_HEIGHT))
			noOfObjects+=1
		Next
				
		Return 0
	End
	
	Method OnLoading:Int()
		Return 0
	End
	
	Method OnUpdate:Int()
		dt.UpdateDelta()
		
		Asteroid.UpdateAll()
		Alien.UpdateAll()
		Ship.UpdateAll()
		Card.UpdateAll()
		
		If MouseHit(MOUSE_LEFT)
			CreateObjects()
		End
		
		If KeyHit(KEY_ESCAPE)
			Error ""
		End
		Return 0
	End
	
	Method CreateObjects:Void()
		ship = New Ship(shipImg, Rnd(0, SCREEN_WIDTH), Rnd(0, SCREEN_HEIGHT))
		noOfObjects+=1
		ast = New Asteroid(astImg, Rnd(0, SCREEN_WIDTH), Rnd(0, SCREEN_HEIGHT))
		noOfObjects+=1
		alien = New Alien(alienImg, Rnd(0, SCREEN_WIDTH), Rnd(0, SCREEN_HEIGHT))
		noOfObjects+=1
		card = New Card(cardImg, Rnd(0, SCREEN_WIDTH), Rnd(0, SCREEN_HEIGHT), Rnd(0, 51))
		noOfObjects+=1
	End
	
	Method OnRender:Int()
		FPSCounter.Update()
		PushMatrix 
			Scale DEVICE_WIDTH/SCREEN_WIDTH, DEVICE_HEIGHT/SCREEN_HEIGHT
			DrawImage backgroundImg, 0, 0
			Asteroid.DrawAll()
			Alien.DrawAll()
			Ship.DrawAll()
			Card.DrawAll()
		PopMatrix
		FPSCounter.Draw(0,0)
		DrawText "Objects: "+noOfObjects, 0, 10
		Return 0
	End	
End

Class Alien Extends Sprite
	Global list:List&lt;Alien&gt;
	
	Method New(img:Image, x:Float, y:Float)
		Super.New(img, x, y)
		If list = null Then list = New List&lt;Alien&gt;
		Self.maxFrame = 23
		Self.frame = Rnd(0, Self.maxFrame)
		Self.rotation = Rnd(0, 360)
		Self.speed = Rnd(0.1, 2)
		list.AddLast(Self)
	End
	
	Function DrawAll:Void()
		If not list Return
		For local s:Alien = Eachin list
			s.Draw()
		Next		
	End
	
	Function UpdateAll:Void()
		If not list Return
		For local s:Alien = Eachin list
			s.Update()
		Next		
	End
	
	Method Update:Void()
		Self.Animate()
		MoveForward()
	End
End

Class Asteroid Extends Sprite
	Global list:List&lt;Asteroid&gt;
	
	Method New(img:Image, x:Float, y:Float)
		Super.New(img, x, y)
		If list = null Then list = New List&lt;Asteroid&gt;
		Self.maxFrame = 15
		Self.frame = Rnd(0, Self.maxFrame)
		Self.rotation = Rnd(0, 360)
		Self.speed = Rnd(0.1, 2)
		list.AddLast(Self)
	End
	
	Function DrawAll:Void()
		If not list Return
		For local s:Asteroid = Eachin list
			s.Draw()
		Next		
	End
	
	Function UpdateAll:Void()
		If not list Return
		For local s:Asteroid = Eachin list
			s.Update()
		Next		
	End
	
	Method Update:Void()
		Self.Animate()
		MoveForward()
	End
End

Class Ship Extends Sprite
	Global list:List&lt;Ship&gt;
	
	Method New(img:Image, x:Float, y:Float)
		Super.New(img, x, y)
		If list = null Then list = New List&lt;Ship&gt;
		Self.frame = 3
		Self.rotation = Rnd(0, 360)
		Self.speed = Rnd(0.1, 2)
		list.AddLast(Self)
	End
	
	Function DrawAll:Void()
		If not list Return
		For local s:Ship = Eachin list
			s.Draw()
		Next		
	End
	
	Function UpdateAll:Void()
		If not list Return
		For local s:Ship = Eachin list
			s.Update()
		Next		
	End
	
	Method Update:Void()
		MoveForward()
	End
End

Class Card Extends Sprite
	Global list:List&lt;Card&gt;
	
	Method New(img:Image, x:Float, y:Float, frame:int)
		Super.New(img, x, y)
		If list = null Then list = New List&lt;Card&gt;
		Self.frame = frame
		Self.rotation = Rnd(0, 360)
		Self.speed = Rnd(1, 5)
		list.AddLast(Self)
	End
	
	Function DrawAll:Void()
		If not list Return
		For local s:Card = Eachin list
			s.Draw()
		Next		
	End
	
	Function UpdateAll:Void()
		If not list Return
		For local s:Card = Eachin list
			s.Update()
		Next		
	End
	
	Method Update:Void()
		MoveForward()
	End
End

Class Sprite
	Field x:Float, y:Float
	Field dx:Float, dy:Float
	Field image:Image
	Field rotation:Float = 0
	Field scaleX:Float = 1, scaleY:Float = 1
	Field frame:Int
	Field frameDelay:Int
	Field maxFrameDelay:Int = 3
	field maxFrame:Int
	Field alpha:Float = 1
	Field red:Int = 255
	Field green:Int = 255
	Field blue:Int = 255
	Field speed:Float = 1
	
	Method New(img:Image, x:Float, y:Float)
		Self.image = img
		Self.x = x
		Self.y = y
		Self.alpha = Rnd(0.1, 1)
	End
	
	Method Draw:Void()
		SetAlpha alpha
		SetColor red, green, blue
		DrawImage(image, x, y, rotation, scaleX, scaleY, frame)
		SetColor 255, 255, 255
		SetAlpha 1
	End
	
	Method Move:Void()
		Self.x+=Self.dx * dt.delta
		Self.y+=Self.dy * dt.delta
		
		if x &lt; 0 - image.Width()
			x = SCREEN_WIDTH + image.Width()
		End
		
		if x &gt; SCREEN_WIDTH + image.Width()
			x = 0 - image.Width()
		End
		
		if y &lt; 0 - image.Height()
			y = SCREEN_HEIGHT + image.Height()
		End
		
		if y &gt; SCREEN_HEIGHT + image.Height()
			y = 0 - image.Height()
		End
	End
	
	Method MoveForward:Void()
		dx = -Sin(rotation) * speed
        dy = -Cos(rotation) * speed
		Move()
	End
	
	Method Animate:Void()
		frameDelay+=1
		If frameDelay &gt; maxFrameDelay
			frame+=1
			frameDelay = 0
			If frame &gt; maxFrame
				frame = 0
			End
		End	
	End
End

Class DeltaTimer
	Field targetfps:Float = 60
	Field currentticks:Float
	Field lastticks:Float
	Field frametime:Float
	Field delta:Float
	
	Method New (fps:Float)
		targetfps = fps
		lastticks = Millisecs()
	End
	
	Method UpdateDelta:Void()
		currentticks = Millisecs()
		frametime = currentticks - lastticks
		delta = frametime / (1000.0 / targetfps)
		lastticks = currentticks
	End
End

Class FPSCounter Abstract
	Global fpsCount:Int
	Global startTime:Int
	Global totalFPS:Int

	Function Update:Void()
		If Millisecs() - startTime &gt;= 1000
			totalFPS = fpsCount
			fpsCount = 0
			startTime = Millisecs()
		Else
			fpsCount+=1
		End
	End

	Function Draw:Void(x:Int = 0, y:Int = 0, ax:Float = 0, ay:Float = 0)
		DrawText("FPS: " + totalFPS, x, y, ax, ay)
	End
End
</textarea><br><br>It creates 82 objects in 4 lists (Ships, Asteroids, Aliens and Cards), on my LG Optimus One I get 26 FPS.<br><br>Tap the screen to create more objects...<br><br>82 objects = 26FPS<br><br>102 objects = 22FPS<br><br>150 objects = 15FPS<br><br>210 objects = 11FPS<br><br>Code and Media here: <a href="http://www.therevillsgames.com/monkey/renderTest/RenderSpeedTest.zip" target="_blank">http://www.therevillsgames.com/monkey/renderTest/RenderSpeedTest.zip</a><br><br>Flash:<br><a href="http://www.therevillsgames.com/monkey/renderTest/flash/" target="_blank">http://www.therevillsgames.com/monkey/renderTest/flash/</a><br><br>HTML5:<br><a href="http://www.therevillsgames.com/monkey/renderTest/html5/" target="_blank">http://www.therevillsgames.com/monkey/renderTest/html5/</a> <br><br></td></tr></table><br>
<a name="2007219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nexus One:<br>82 objects = 42 FPS<br>102 objects = 39 FPS<br>150 objects = 32 FPS<br>210 objects = 27 FPS<br><br>Motorola Xoom:<br>Frame rates fluctuate a lot.<br>82 objects = 50-60 FPS<br>102 objects = 40-55 FPS<br>150 objects = 30 FPS<br>210 objects = 30 FPS <br><br></td></tr></table><br>
<a name="2007220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'll have a good look later...but first impressions are that there is a LOT going on there so I wouldn't expect stellar performance.<br><br>For starters, there is a lot of overdraw and this is a real killer for GLES hardware, which is very fill rate sensitive. Also, the use of alpha disables hardware optimizations that help eliminate this fillrate overhead, and also require an extra backbuffer read per pixel.<br><br>Not saying there aren't tweaks I can't make (in particular, I'm not thrilled about the use of glMatrix to do tforms - doing it manually would probably be faster) but the hardware has it limits.<br><br>Also, doesn't your phone use a crazy amount of CPU when idle? Or is that just when touch is used? Either way, it wipes out about 30% of performance from the CPU which is gonna hurt.<br><br>Anyway, will have a better look at work... <br><br></td></tr></table><br>
<a name="2007224"></a>

<a name="2007225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> My Results:<br><pre class=code>Objs | 82 | 102 | 150 | 210
-----+----+-----+-----+-----
GLFW | 59 |  59 |  59 |  59
iPad | 59 |  59 |  54 |  45
iPod | 59 |  59 |  53 |  45
Nook | 30 |  28 |  26 |  23</pre>See sig for devices. <br><br></td></tr></table><br>
<a name="2007226"></a>

<a name="2007228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> there is a lot of overdraw <br></div><br><br>Overdraw? Whats overdraw?<br><br><div class="quote"> Or is that just when touch is used? <br></div><br><br>Only when you touch the screen - these FPS were taken without touching the screen.<br><br>I havent tested this on iOS, with Pirates I get around 30FPS on the device (60FPS in the simulator...) <br><br></td></tr></table><br>
<a name="2007232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hima</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills<br><div class="quote"> Overdraw? Whats overdraw? <br></div><br>Sprites drawn on top of another sprite.  Devices prior to iPad 2 are strictly fillrate limited, so you should keep overdraw to be as few as possible. <br><br></td></tr></table><br>
<a name="2007241"></a>

<a name="2007243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol... well that could be one reason Pirate Solitare is slow - Ive got cards on top of cards :/<br><br>Also arnt you always going to get that if you display a background image!?!? <br><br></td></tr></table><br>
<a name="2007246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xzess</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Hima I will check that in my game also <br><br></td></tr></table><br>
<a name="2007252"></a>

<a name="2007253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some testing results I have just been doing:<br><br><pre class=code>
With a background:
------------------
No Alpha, 52 cards all overlapping     = 40    FPS
Alpha,    52 cards all overlapping     = 39-40 FPS
No Alpha, 52 cards none overlapping    = 41    FPS
Alpha,    52 cards none overlapping    = 39-40 FPS

No background just CLS:
-----------------------
No Alpha, 52 cards all overlapping     = 42-44 FPS
Alpha,    52 cards all overlapping     = 39-44 FPS
No Alpha, 52 cards none overlapping    = 43-45 FPS
Alpha,    52 cards none overlapping    = 41-45 FPS

</pre><br><br>So going on these, the overlapping (Sprites drawn on top of another sprite) didnt really hurt the framerate, nor the alpha - main performance increase was when we did not display a background image... <br><br></td></tr></table><br>
<a name="2007327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just been playing with an Android framework called Libgdx:<br><br><a href="http://code.google.com/p/libgdx/" target="_blank">http://code.google.com/p/libgdx/</a><br><br>And created a very similar "game", which only diplays the ships with colour tinting, alpha and rendering on a background. I also changed the Monkey version to do the same.<br><br>This table shows my results (the left column is the number of objects):<br><br><pre class=code>
    | Libgdx  | Monkey
----+---------+------
100 | 55FPS   | 22FPS
200 | 40FPS   | 12FPS
300 | 25FPS   | 8FPS
400 | 20FPS   | 5FPS
</pre><br><br>Here is the code for the Libgdx version:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
package com.rendertest;

import java.util.ArrayList;
import java.util.Random;

import com.badlogic.gdx.ApplicationListener;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.InputProcessor;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;

public class Game implements ApplicationListener, InputProcessor {
	private SpriteBatch spriteBatch;
	private Texture backgroundTexture;
	private Texture shipTexture;
	private BitmapFont font;
	private Ship ship;
	private ArrayList&lt;Ship&gt; shipList;

	private int counter;

	@Override
	public void create() {
		spriteBatch = new SpriteBatch();
		backgroundTexture = new Texture(Gdx.files.internal("galaxy2.png"));
		shipTexture = new Texture(Gdx.files.internal("Ship1.png"));

		Random random = new Random();

		font = new BitmapFont();
		font.setColor(Color.WHITE);

		shipList = new ArrayList&lt;Ship&gt;();
		for (int i = 0; i &lt; 100; i++) {
			ship = new Ship(shipTexture);
			float xx = Gdx.app.getGraphics().getWidth() * random.nextFloat();
			float yy = Gdx.app.getGraphics().getHeight() * random.nextFloat();
			ship.setPosition(xx, yy);
			ship.setRotation(360 * random.nextFloat());
			shipList.add(ship);
			counter++;
		}

		Gdx.input.setInputProcessor(this);
	}

	@Override
	public void resume() {
	}

	@Override
	public void render() {
		update();

		spriteBatch.begin();
		spriteBatch.draw(backgroundTexture, 0, 0);

		for (Ship s : shipList) {
			s.draw(spriteBatch);
		}

		drawGUI();
		spriteBatch.end();
	}

	private void update() {
		for (Ship s : shipList) {
			s.moveForward();
		}
	}

	private void drawGUI() {
		font.draw(spriteBatch, "FPS: " + Gdx.graphics.getFramesPerSecond(), 5,
				Gdx.app.getGraphics().getHeight());
		font.draw(spriteBatch, "Objects: " + counter, 5, Gdx.app.getGraphics()
				.getHeight() - 20);
	}

	@Override
	public void resize(int width, int height) {
	}

	@Override
	public void pause() {
	}

	@Override
	public void dispose() {
	}

	class Ship extends Sprite {
		float dx, dy;
		float speed;

		Ship(Texture texture) {
			super(texture);
			Random random = new Random();
			float a = random.nextFloat() + .5f;
			float r = random.nextFloat();
			float g = random.nextFloat();
			float b = random.nextFloat();
			speed = 100 * random.nextFloat() + 100;
			this.setColor(a, r, g, b);
		}

		public void moveForward() {
			dx = (float) (-Math.sin(getRotation()) * speed);
			dy = (float) (Math.cos(getRotation()) * speed);
			move();
		}

		public void move() {
			float x = this.getX();
			float y = this.getY();
			x += dx * Gdx.graphics.getDeltaTime();
			y += dy * Gdx.graphics.getDeltaTime();

			if (x &lt; 0 - this.getTexture().getWidth())
				x = Gdx.app.getGraphics().getWidth();
			if (y &lt; 0 - this.getTexture().getHeight())
				y = Gdx.app.getGraphics().getHeight();
			if (x &gt; Gdx.app.getGraphics().getWidth()
					+ this.getTexture().getWidth())
				x = 0 - this.getTexture().getWidth();
			if (y &gt; Gdx.app.getGraphics().getHeight()
					+ this.getTexture().getHeight())
				y = 0 - this.getTexture().getHeight();

			setPosition(x, y);
		}
	}

	@Override
	public boolean keyDown(int keycode) {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public boolean keyUp(int keycode) {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public boolean keyTyped(char character) {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public boolean touchDown(int x, int y, int pointer, int button) {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public boolean touchUp(int x, int y, int pointer, int button) {
		Random random = new Random();
		for (int i = 0; i &lt; 10; i++) {
			ship = new Ship(shipTexture);

			float xx = Gdx.app.getGraphics().getWidth() * random.nextFloat();
			float yy = Gdx.app.getGraphics().getHeight() * random.nextFloat();
			ship.setPosition(xx, yy);
			ship.setRotation(360 * random.nextFloat());
			shipList.add(ship);
			counter++;
		}
		return false;
	}

	@Override
	public boolean touchDragged(int x, int y, int pointer) {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public boolean touchMoved(int x, int y) {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public boolean scrolled(int amount) {
		// TODO Auto-generated method stub
		return false;
	}
}
</textarea><br><br>And the apk if you would like to test:<br><a href="http://www.therevillsgames.com/monkey/renderTest/libgdx/RenderTest-android.apk" target="_blank">http://www.therevillsgames.com/monkey/renderTest/libgdx/RenderTest-android.apk</a><br><br>The project(s) files:<br><a href="http://www.therevillsgames.com/monkey/renderTest/libgdx/renderTestLibgdx.zip" target="_blank">http://www.therevillsgames.com/monkey/renderTest/libgdx/renderTestLibgdx.zip</a> <br><br></td></tr></table><br>
<a name="2007366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> My android numbers (Using the LibGDX *.apk from previous post and Monkey implementation found below):<br><pre class=code>
 Objs | Monkey | Libgdx
------+--------+--------
  100 |  37-38 |    38 
  200 |  30-31 | 33-34 
  300 |  25-26 | 29-30
  400 |  20-21 |    26
</pre><br>Monkey Implementation:<br><pre class=code>
Import mojo.app
Import mojo.input
Import mojo.graphics

Class Sprite
Private
	Field _image:Image
	Field _xpos#, _ypos#, _angle#
	Field _r#, _g#, _b#, _a#
	Field _speed#
	Field _dx#, _dy#
	
	Method _Move:Void()
		Local x:= _xpos + _dx
		Local y:= _ypos + _dy
		If x &lt; 0 Then x = DeviceWidth
		If x &gt; DeviceWidth Then x = 0
		If y &lt; 0 Then y = DeviceHeight
		If y &gt; DeviceHeight Then y = 0
		_xpos = x
		_ypos = y
	End
	
Public
	Method New( image:Image )
		_image = image
		_r = 255.0 * Rnd
		_g = 255.0 * Rnd
		_b = 255.0 * Rnd
		_a = (255.0 * Rnd) + 0.5
		_speed = (4.0 * Rnd) + 1.0
	End
	
	Method SetPosition:Void( xpos#, ypos# )
		_xpos = xpos
		_ypos = ypos
	End
	
	Method SetRotation:Void( angle# )
		_angle = angle
	End

	Method Update:Void()
		_dx = (-Sin(_angle) * _speed)
		_dy = ( Cos(_angle) * _speed)
		_Move
	End

	Method Render:Void()
		SetAlpha _a
		SetColor _r, _g, _b
		DrawImage _image, _xpos, _ypos, _angle, 1, 1
	End
End

Class RenderTest Extends App
Private
	Field _shipList:List&lt;Sprite&gt;

	Field _background:Image, _ship:Image
	Field _frameRate, _frameCount, _frameCountStartTime

	Method _ShowFPS:Void()
		_frameCount+=1
		If _frameCount &gt;= 30
			_frameRate = Int(1000.0 / (Float(Millisecs - _frameCountStartTime)/30.0))
			_frameCount = 0
			_frameCountStartTime = Millisecs
		End
		SetAlpha 1.0
		SetColor 255,255,255
		DrawText _frameRate, 0, DeviceHeight-12
	End

Public	
	Method OnCreate()
		_ship = LoadImage( "Ship1.png", 1, Image.MidHandle )
		_background = LoadImage( "galaxy2.png" )

		_shipList = New List&lt;Sprite&gt;
		For Local i:= 0 Until 400
			Local ship:= New Sprite( _ship )
			Local x:= Rnd( DeviceWidth )
			Local y:= Rnd( DeviceHeight )
			ship.SetPosition( x, y )
			ship.SetRotation( 360.0 * Rnd )
			_shipList.AddLast( ship )
		End
		
		SetUpdateRate 60
	End

	Method OnUpdate()
#If TARGET="android"
		If KeyHit( KEY_ESCAPE ) Then Error ""
#End		
		For Local ship:= EachIn _shipList
			ship.Update
		End
	End

	Method OnRender()
		Cls '&lt;--- Actually improves fps
		DrawImage _background, 0, 0
		For Local ship:= EachIn _shipList
			ship.Render
		End
		_ShowFPS
	End
End

Function Main()
	New RenderTest
End
</pre> <br><br></td></tr></table><br>
<a name="2007371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Loofadawg</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not always practical, but using JPG instead of PNG whenever possible can make a quite a difference depending on the situation/number of images.  Also, if the images, need to be "resized" (or any other on-the-fly transformations for that matter) for before drawing then FPS is going to take a hit.  Have not tested any of this on the latest versions of Monkey, but this has been my experience.  <br><br>Yeah, probably obvious and once again not always a solution.<br><br>Far too lazy to post a demo. <br><br></td></tr></table><br>
<a name="2007382"></a>

<a name="2007383"></a>

<a name="2007384"></a>

<a name="2007385"></a>

<a name="2007386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Samsung Galaxy S2 with Android 2.3.3 using original code: <a href="http://www.monkeycoder.co.nz/Community/post.php?topic=869&amp;post=7218" target="_blank">http://www.monkeycoder.co.nz/Community/post.php?topic=869&amp;post=7218</a><br>82 - 198 objects = 60 FPS<br>202 objects = 58 FPS<br>302 objects = 39 FPS<br>390 objects = 29 FPS and crash after 30 seconds <br><br></td></tr></table><br>
<a name="2007390"></a>

<a name="2007391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> As has been pointed out, the original code is missing a Cls something that could perhaps be classed an error in mojo given it's ramifications in many EGL environments. <br><br></td></tr></table><br>
<a name="2007394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Skid - what ramifications?<br><br>When testing I came across a strange issue when not using CLS and not displaying a background image - it displayed the view 3 times across the screen (split in 3rds).<br><br>Ill have to try to see the speed difference with CLS and drawing a background... <br><br></td></tr></table><br>
<a name="2007395"></a>

<a name="2007396"></a>

<a name="2007397"></a>

<a name="2007398"></a>

<a name="2007399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is from some <a href="http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html#//apple_ref/doc/uid/TP40008793-CH103-SW16" target="_blank">apple docs</a> I imagine android EGL stacks are similar:<br><br><div class="quote"> <br>Erase the Renderbuffers<br><br>At the start of every frame, erase all renderbuffers whose contents from a previous frames are not needed to draw the next frame. Call the glClear function, passing in a bit mask with all of the buffers to clear, as shown in Listing 4-2.<br><br>Listing 4-2  Erasing the renderbuffers<br><br>glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);<br>glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);<br><br>Not only is using glClear more efficient than erasing the buffers manually, but using glClear hints to OpenGL ES that the existing contents can be discarded. On some graphics hardware, this avoids costly memory operations to load the previous contents into memory.<br> <br></div><br><br>Summary: even if you intend to draw a fullscreen background you should call Cls at the beginning of your OnRender handler. <br><br></td></tr></table><br>
<a name="2007400"></a>

<a name="2007403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> this avoids costly memory operations to load the previous contents into memory <br></div><br><br>I've been having some issues with PS on iOS (getting Program received signal: “0” crash), Mark has sent me some details to help... but I wonder if this will help too.<br><br>Thanks Skid!<br><br>[edit]<br>Just looking in mojo's ios code for Cls, it only does the GL_COLOR_BUFFER_BIT, does it need to do the GL_DEPTH_BUFFER_BIT too?<br>[/edit] <br><br></td></tr></table><br>
<a name="2007409"></a>

<a name="2007411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tested the Cls command on the Android version when displaying a background as well. On my phone it wasnt faster, I would say about half to one frame per second slower... (FPS counter shows 21-22) <br><br></td></tr></table><br>
<a name="2007429"></a>

<a name="2007430"></a>

<a name="2007431"></a>

<a name="2007432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Just looking in mojo's ios code for Cls, it only does the GL_COLOR_BUFFER_BIT, does it need to do the GL_DEPTH_BUFFER_BIT too? <br></div><br>Only if you enable depth testing, which is silly for 2D.  <strike>I can't remember whether it's on by default</strike> but you can enable/disable with:<br><pre class=code>
glEnable(GL_DEPTH_TEST);
glDisable(GL_DEPTH_TEST);
</pre><br><br>Edit:<br><a href="http://www.opengl.org/wiki/Depth_Buffer" target="_blank">http://www.opengl.org/wiki/Depth_Buffer</a><br><br><div class="quote"> This is done by calling "glEnable(GL_DEPTH_TEST);". By default, depth testing is disabled when you create the GL context. <br></div> <br><br></td></tr></table><br>
<a name="2007781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using v41 I now get 25FPS in the same test as in post #18, so an increase of 3FPS :)<br><br>Still along way off Libgdx's 55FPS ;) <br><br></td></tr></table><br>
<a name="2007816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> check if anti-aliasing is turned on <br><br></td></tr></table><br>
<a name="2007875"></a>

<a name="2007876"></a>

<a name="2007877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> With v41, I'm seeing:<br><br>-&gt; *LOSS* of  3-9  FPS using speedtest from post #19<br><br>-&gt; *LOSS* of  2-3  FPS in my current app <br><br>Probably because some OGL hardware handles float operations faster than integer operations and visa-versa.<br><br>I'll be sticking with the pre-v41 "float" version of  'mojo.android.java'  for now as it's faster on the primary android device I'm targeting (i.e. NookColor). <br><br></td></tr></table><br>
<a name="2007900"></a>

<a name="2007902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi.<br><br>I looked at libgdx (SpriteBatch) and monkey mojo (surfaces), and it seems both are doing sprites the same way. The biggest difference is that libgdx will use OpenGL 2.0 shaders, if available. That may cause a speed increase.<br><br><br>But I hear that glDrawTexfOES is the fastest method for Android GL11 (slide 24 onwards):<br><a href="http://www.scribd.com/doc/16917369/Writing-Real-Time-Games-for-Android" target="_blank">http://www.scribd.com/doc/16917369/Writing-Real-Time-Games-for-Android</a><br><br>Other resources for Android speed tests:<br><a href="http://code.google.com/p/apps-for-android/source/browse/trunk/SpriteMethodTest/README.TXT" target="_blank">http://code.google.com/p/apps-for-android/source/browse/trunk/SpriteMethodTest/README.TXT</a> <br><br></td></tr></table><br>
<a name="2007947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; With v41, I'm seeing: -&gt; *LOSS* of 3-9 FPS using speedtest from post #19<br><br>Hmm, that's a bit weird, it's supposed to be a win on all versions of Android up pre-honeycomb (3).<br><br>The issue is apparently due to some lazy coding in the implementation of android's floating point vertex buffers. Int buffers don't have this problem (again apparently) so the 'fix' is to convert floats-&gt;ints (bitwise), and use int buffers.<br><br>It's a minor win on my Galaxy S, but I can see how it'd be a loss on devices with 'fixed' float buffers, as the float-&gt;int conversion is a call per vertex component. Perhaps some pre-honeycomb devices have this fix in already?<br><br>My instinct here is to revert to float buffers, as int buffers aren't THAT much of a win, and float buffers will likely perform better on fixed/newer hardware.<br><br>The latest version of Monkey also includes an optimization for drawing 'non-alpha' images. Previously, ALL images were effectively being blended to the back buffer. Now, mojo checks image format/alpha and turns off blending when possible. Seems to work pretty well with large-ish images, not all that much difference with lots of small ones.<br><br>I also can't get any results from Cls-ing. I was thinking perhaps depth buffer may have to be turned on for it to work (ie: to make use of hierarchical z-buffers?), but that didn't seem to help either. <br><br></td></tr></table><br>
<a name="2007948"></a>

<a name="2007949"></a>

<a name="2007950"></a>

<a name="2007951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> @DGuy - when you say pre-v41 what version did you test with?<br><br>V38 had the buffers as:<br><pre class=code>
	gxtkGraphics(){
		vertices=FloatBuffer.allocate(MAX_VERTICES*2);
		texcoords=FloatBuffer.allocate(MAX_VERTICES*2);
		colors=IntBuffer.allocate(MAX_VERTICES);
	}
</pre><br><br>v39c had the buffers as<br><pre class=code>
	gxtkGraphics(){
		ByteBuffer buf;
		
		buf=ByteBuffer.allocateDirect(MAX_VERTICES*2*4);
		buf.order(ByteOrder.nativeOrder());
		vertices=buf.asFloatBuffer();
		
		buf=ByteBuffer.allocateDirect(MAX_VERTICES*2*4);
		buf.order(ByteOrder.nativeOrder());
		texcoords=buf.asFloatBuffer();
		
		buf=ByteBuffer.allocateDirect(MAX_VERTICES*4);
		buf.order(ByteOrder.nativeOrder());
		colors=buf.asIntBuffer();
	}
</pre><br><br>^ this code is meant to be the "right" way of doing it (this is what I was talking about in the other thread: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=941" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=941</a> )<br><br>When moving from v38 to v39, I lost about 10FPS, with v41 (int buffers) I had an increase of 3FPS. So from moving between v38 and v41 I lost around 7FPS. But in v38 I couldnt use the SDCard stuff and other features... <br><br></td></tr></table><br>
<a name="2007957"></a>

<a name="2007958"></a>

<a name="2007959"></a>

<a name="2007962"></a>

<a name="2007964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> (Remember I provided the same exact fix before I realized Mark has already done so .. ;) ) <br><br>Was using  v39c  prior to v41 (skipped v40) <br><br></td></tr></table><br>
<a name="2007960"></a>

<a name="2007961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, can you post your results using v38, v39c, v40 and v41 please? (original versions, no "fixes")<br><br><div class="quote"> <br>(Remember I provided the same exact fix before I realized Mark has already done so .. ;) )  <br></div><br><br>lol - I forget who post stuff these days - must be getting old... <br><br></td></tr></table><br>
<a name="2007965"></a>

<a name="2007966"></a>

<a name="2007967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> I saw no performance change between v38 and v39c, and a (I think significant) performance drop with v41 ... <br><br></td></tr></table><br>
<a name="2007969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well these are my results using the rendertest (post #18) with 100 objects:<br><br><pre class=code>
    | v38 | v39c | v40 | v41
----+-----+------+-----+-----
FPS | 29  | 21   | 21  | 24
</pre> <br><br></td></tr></table><br>
<a name="2008157"></a>

<a name="2008158"></a>

<a name="2008386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone interested in a <i>slightly</i> faster* (+0.5-1 fps) implementation of Android Mojo, look here:<br><br>&lt;snip&gt;<br><br>[Edit]<br>Moot as of Monkey v42 ...<br>[/Edit] <br><br></td></tr></table><br>
<a name="2008167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>More improvements coming, but I'm moving this to programming for now... <br><br></td></tr></table><br>
<a name="2008186"></a>

<a name="2008187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tested with a background with alpha and a background without - same FPS in v42:<br><br><pre class=code>
    | v38 | v39c | v40 | v41 | v42
----+-----+------+-----+-----+-----
FPS | 29  | 21   | 21  | 24  | 22
</pre><br><br>So lost 2 FPS this time... <br><br></td></tr></table><br>
<a name="2008205"></a>

<a name="2008206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Which device/phone is this on?<br><br>Any chance of posting the same results for different devices/phones? <br><br></td></tr></table><br>
<a name="2008212"></a>

<a name="2008213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> This in on my LG Optimus One P500, using the same phone when using libgdx code I get 55FPS. <br><br></td></tr></table><br>
<a name="2008278"></a>

<a name="2008279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rixarn</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's a huge difference therevills... what could be the bottleneck? I've read somewhere that SetColor for images is very slow in monkey<br><br>Btw, DGuy's number's seem very close to the ones got by the other lib... what is he doing in his own monkey impl? <br><br></td></tr></table><br>
<a name="2008282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> what could be the bottleneck?  <br></div><br><br>Wish I knew!<br><br><div class="quote"> SetColor for images is very slow in monkey <br></div><br><br>SetColor is very slow for HTML5, it doesnt have that much affect on performance for Android.<br><br><div class="quote"> DGuy's number's seem very close to the ones got by the other lib <br></div><br><br>I believe his numbers where taken before he changed his monkey impl - the performance is device based - I think David is testing on his NookColor, which has a better CPU/GPU than my phone. <br><br></td></tr></table><br>
<a name="2008284"></a>

<a name="2008285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; Tested with a background with alpha and a background without - same FPS in v42:<br><br>Can you try the mak/bouncyaliens test? <br><br>Click in the middle 3rd of the screen to toggle between alpha aliens and solid aliens. <br><br></td></tr></table><br>
<a name="2008296"></a>

<a name="2008300"></a>

<a name="2008301"></a>

<a name="2008302"></a>

<a name="2008375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> &lt;snip&gt;<br><br>[Edit]<br>See this post for updated/more valid info:<br><a href="http://www.monkeycoder.co.nz/Community/post.php?topic=869&amp;post=8371" target="_blank">http://www.monkeycoder.co.nz/Community/post.php?topic=869&amp;post=8371</a><br>[/Edit] <br><br></td></tr></table><br>
<a name="2008297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>On android? <br><br></td></tr></table><br>
<a name="2008298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, on Android ... :) <br><br></td></tr></table><br>
<a name="2008303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; NOTE: I didn't really see any difference, fps-wise, between tranparent and non-transparent versions of the test.<br><br>That's weird - I get an approx 30% speed up with opaque images (Galaxy S). <br><br></td></tr></table><br>
<a name="2008304"></a>

<a name="2008305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>The LG Optimus one has a weird GPU...<br><br><a href="http://en.wikipedia.org/wiki/LG_Optimus_One" target="_blank">http://en.wikipedia.org/wiki/LG_Optimus_One</a><br><br>So none of the PowerVR opts are likely to help.<br><br>Is the NookColor PowerVR?<br><br>Next step would probably be to try some native c++ code, but that's a bigger project.<br><br>I'd also like to be optimizing MORE for PowerVR though, I kind of think this should be the priority. <br><br></td></tr></table><br>
<a name="2008306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JIM</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would say PowerVR and Adreno GPUs are just as popular in the android world. I think both deserve the same attention when optimizing (though PowerVR might be easier due to the fact that iOS devices also use them and there might be more info on optimizations)<br><br>Also, nVidia is pushing Tegra 2 (and soon Kal-El) so that might become a major player soon. Good news is nVidia's offer is quite a lot more powerful than the competition, and since monkey is hardly aimed at high-end 3D graphics, their GPUs shouldn't be a target for optimizations anytime soon.<br><br>Adreno devices: <a href="http://developer.qualcomm.com/devices" target="_blank">http://developer.qualcomm.com/devices</a><br>PowerVR SGX devices: <a href="http://en.wikipedia.org/wiki/List_of_PowerVR_products#Series5_.28SGX.29" target="_blank">http://en.wikipedia.org/wiki/List_of_PowerVR_products#Series5_.28SGX.29</a> <br><br></td></tr></table><br>
<a name="2008309"></a>

<a name="2008310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well the LG Optimus One plays Angry Birds fine and even Raging Thunder 2 is playable... I've tested quite a few Android games on it and it plays most of them well - thats why I raised this issue.<br><br>Bouncy Aliens Testing:<br><br><pre class=code>
    | v38 | v41 | v42  
----+-----+-----+------
100 |  24 |  21 |  19
200 |  14 |  12 |  11
300 |  10 |   8 |   7
400 |   7 |   6 |   6
</pre><br><br>And little or no difference with or without alpha... <br><br></td></tr></table><br>
<a name="2008311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Next step would probably be to try some native c++ code, but that's a bigger project. <br></div><br>I tried replacing a lot of the IntBuffer stuff with the libgdx native code.  There really wasn't that much of an improvement.  I have a tilemap demo that runs at about 4fps on the Nexus One, but with native calls and a bunch of other small optimisations I got it to 8fps. <br><br></td></tr></table><br>
<a name="2008329"></a>

<a name="2008330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The biggest difference is that libgdx will use OpenGL 2.0 shaders, if available. That may cause a speed increase. <br></div><br><br>Oh BTW this is false, libgdx will only use OpenGL 2.0 if you set it in the initialize method.<br><br>Here is my Android main class for libgdx:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
package com.rendertest;

import com.badlogic.gdx.backends.android.AndroidApplication;

public class RenderTest extends AndroidApplication {
	public void onCreate(android.os.Bundle savedInstanceState) {
		System.out.println("RENDERTEST");
		super.onCreate(savedInstanceState);
		initialize(new Game(), false);
	}
}
</textarea><br><br>Notice the initialize parameters - new Game and false - the false is a flag to tell LibGdx to use OpenGL 2.0 or not:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
    /**
     * This method has to be called in the {@link Activity#onCreate(Bundle)} method. It sets up all the things necessary to get
     * input, render via OpenGL and so on. If useGL20IfAvailable is set the AndroidApplication will try to create an OpenGL ES 2.0
     * context which can then be used via {@link Graphics#getGL20()}. The {@link GL10} and {@link GL11} interfaces should not be
     * used when OpenGL ES 2.0 is enabled. To query whether enabling OpenGL ES 2.0 was successful use the
     * {@link Graphics#isGL20Available()} method. Uses a default {@link AndroidApplicationConfiguration}.
     *
     * @param listener          the {@link ApplicationListener} implementing the program logic
     * @param useGL2IfAvailable whether to use OpenGL ES 2.0 if its available.
     */
    public void initialize(ApplicationListener listener, boolean useGL2IfAvailable) {
   	 AndroidApplicationConfiguration config = new AndroidApplicationConfiguration();
   	 config.useGL20 = useGL2IfAvailable;
       initialize(listener, config);
    }
</textarea> <br><br></td></tr></table><br>
<a name="2008333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, here some values from my HTC Desire HD:<br><br><pre class=code>
    | v38 | v41 | v42  
----+-----+-----+------
100 |  60 |  50 |  51
200 |  55 |  30 |  31
300 |  41 |  22 |  22
400 |  32 |  17 |  17
</pre><br><br>But I noticed that v41 and v42 seems to run in higher resolution mode, at least the font is smaller which could be the reason for the lower fps. <br><br></td></tr></table><br>
<a name="2008337"></a>

<a name="2008338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since v39 the Android manifest was changed to include the minimum sdk and target sdk, which makes your game use different resolutions...<br><br>Oh BTW you guys have too much money ;) <br><br></td></tr></table><br>
<a name="2008348"></a>

<a name="2008349"></a>

<a name="2008350"></a>

<a name="2008351"></a>

<a name="2008352"></a>

<a name="2008353"></a>

<a name="2008354"></a>

<a name="2008355"></a>

<a name="2008356"></a>

<a name="2008357"></a>

<a name="2008358"></a>

<a name="2008359"></a>

<a name="2008360"></a>

<a name="2008361"></a>

<a name="2008362"></a>

<a name="2008363"></a>

<a name="2008364"></a>

<a name="2008366"></a>

<a name="2008367"></a>

<a name="2008372"></a>

<a name="2008373"></a>

<a name="2008374"></a>

<a name="2008376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> dupe <br><br></td></tr></table><br>
<a name="2008377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> dupe <br><br></td></tr></table><br>
<a name="2008378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> dupe <br><br></td></tr></table><br>
<a name="2008379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> dupe <br><br></td></tr></table><br>
<a name="2008380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> dupe <br><br></td></tr></table><br>
<a name="2008381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> dupe <br><br></td></tr></table><br>
<a name="2008383"></a>

<a name="2008384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> dupe <br><br></td></tr></table><br>
<a name="2008385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Since v39 the Android manifest was changed to include the minimum sdk and target sdk, which makes your game use different resolutions... <br></div><br>Good spot. This may well be contributing to the issue, the debug text is much smaller since v39 on my device so it must be running in a higher resolution? If monkey is pushing, say, twice as many pixels as libgdx then it's not really as valid a comparison.<br><br>Anyway, here are the results of the (£99 pay as you go Android phone) <a href="http://en.wikipedia.org/wiki/ZTE_Blade" target="_blank">ZTE Blade</a> jury. <br>The ZTE Blade uses a Qualcomm MSM7227 600 MHz CPU with Adreno 200 GPU.<br>My device is running the <a href="http://www.cyanogenmod.com/" target="_blank">CyanogenMod 7</a> firmware, not sure if that affects performance?<br><br>libgdx: using apk from <a href="http://www.monkeycoder.co.nz/Community/post.php?topic=869&amp;post=7327" target="_blank">post 18</a><br><br>monkey: using code from <a href="http://www.monkeycoder.co.nz/Community/post.php?topic=869&amp;post=7366" target="_blank">post 19</a>, assets from <a href="http://www.monkeycoder.co.nz/Community/post.php?topic=869&amp;post=7218" target="_blank">post 9</a>, code built in release mode over USB direct to device.<br><br><pre class=code>     | Libgdx  |  v38   |  v41   |  v42
-----+--------+--------+-------+--------
 100 | 61 FPS  | 36 FPS | 30 FPS | 30 FPS
 200 | 61 FPS  | 21 FPS | 17 FPS | 17 FPS
 300 | 61 FPS  | 14 FPS | 12 FPS | 12 FPS
 400 | 54 FPS  | 11 FPS |  9 FPS |  9 FPS
 600 | 42 FPS  |  7 FPS |  6 FPS |  6 FPS
1000 | 29 FPS  |  4 FPS |  3 FPS |  3 FPS</pre><br>Interesting that there's no (measurable) difference on my phone between v41 and v42? <br><br></td></tr></table><br>
<a name="2008365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some NookColor Specs:<br><br><b>CPU Processor</b>: ARM Cortex A8-based Ti OMAP 3621 @ 800 MHz (same processor as Droid 2 and Droid X)<br><br><b>GPU Processor</b>: PowerVR SGX530 Graphics Rendering: Open GLES1.1/2.0 (same GPU as Droid 2 and Droid X) <br><br></td></tr></table><br>
<a name="2008369"></a>

<a name="2008370"></a>

<a name="2008371"></a>

<a name="2008382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just so that we're all on the same page, I re-ran the "mak/bouncyaliens" test using the v42 version.<br><br>NOTES:<br>	- Monkey v42<br>	- Run on Android<br>	- 1024x600 screen size<br><pre class=code>
    | w/ Alpha | w/o Alpha
----+----------+----------
100 | 19-20    | 47
200 | 12       | 36-37
300 | 8        | 29-30
400 | 6        | 23-24
</pre><br>With the larger sprites (and thus more alpha-pixels), the new blending optimizations really shine. <br><br></td></tr></table><br>
<a name="2008389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> I might not be understanding, but what's so shiny about 6fps? o.O <br><br></td></tr></table><br>
<a name="2008399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's shiny are the numbers in the "w/o Alpha" column ... :)<br><br>Monkey used to have alpha-blending turned on all the time, thus the numbers in the "w/ Alpha" column were all there was, but now it's optimized its' usage of alpha-blending to apply it only when needed. <br><br></td></tr></table><br>
<a name="2008400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahhhh! That's for the clarification.<br><br>Those are pretty shiny numbers. :) <br><br></td></tr></table><br>
<a name="2008401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, thats a great performance increase on your Nook! But the only images I can really see this optimization helping is background images...<br><br>@David, could you test the code in #19 using the resources in #9 and post your results - then change the background image so it doesnt have alpha please? When I did this I saw minimum improvements (&lt;1FPS). <br><br></td></tr></table><br>
<a name="2008402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>The 'new style' manifest added in V39 is definitely making everything run higher-res here. Stuff that used to run 320x533(?) now runs 480x800.<br><br>Is it happening on everyone's phones? You can quick test by nuking the 'min-sdk/max-sdk' stuff in the manifest.<br><br>If so, this would probably account for the 10-ish% slowdown from v38-v39, which would mean it wasn't the new style vertex buffer allocation. <br><br></td></tr></table><br>
<a name="2008403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> I added the new style vertex buffer stuff using DGuy's code to v38 (so before the min-sdk/target-sdk) and it wiped 10FPS off my game.<br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=768" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=768</a><br><br>Also my phone's native resolution is 320x480. <br><br></td></tr></table><br>
<a name="2008404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Meh, was worth a shot... <br><br></td></tr></table><br>
<a name="2008414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> As requested by Therevills:<br><br>Using speedtest from #19 &amp; Resources from #9:<br><br>NOTES:<br>- Monkey v42<br>- Run on android<br>- 1024x600 resolution<br><br>TEST:<br>A - Background &amp; Ship w/ Alpha<br>B - Background w/o Alpha; Ship w/ Alpha<br>C - Background &amp; Ship w/o Alpha<br><pre class=code>
    | A     | B     | C
----+-------+-------+-------
100 | 41    | 42-43 | 48-49
200 | 32-33 | 34    | 43-44
300 | 27    | 27-28 | 32
400 | 21-22 | 22-23 | 24
</pre><br>I'm sure the reason there is only a 1-2 fps increase between test A &amp; B is because the hundreds of alpha blended sprites are affecting FPS far more than the single background image. <br><br></td></tr></table><br>
<a name="2008415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Therevills: <div class="quote"> <br>I added the new style vertex buffer stuff using DGuy's code to v38 (so before the min-sdk/target-sdk) and it wiped 10FPS off my game. <br></div><br><br>Note, that "new style" is actually for the slower "old style" non-interleaved-arrays method that Mark stopped using, so I'm not surprised you saw a FPS drop. v42 uses interleaved arrays now. <br><br></td></tr></table><br>
<a name="2008436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The 'new style' manifest added in V39 is definitely making everything run higher-res here. Stuff that used to run 320x533(?) now runs 480x800.<br><br>Is it happening on everyone's phones? You can quick test by nuking the 'min-sdk/max-sdk' stuff in the manifest. <br></div><br>v39+ is definitely now running at my phones native resolution. <br><br></td></tr></table><br>
<a name="2009734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> New results for v43 - rendertest (post #18) with 100 objects:<br><br><pre class=code>
    | v38 | v39c | v40 | v41 | v42 | v43
----+-----+------+-----+-----+-----+-----
FPS |  29 |   21 |  21 |  24 |  22 |  44

</pre><br><br>Doubled the FPS :) \o/ YEAH!!! WOOOWHO!!! <br><br></td></tr></table><br>
<a name="2009747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills: on Android or iOS?<br><br>not sure what have changed, but my game has huge FPS drop on Android Galaxy Tab (7") from nice 35-40FPS to 18-20FPS. Nothing changed beside Monkey upgrade from v42b to v43. I'm gonna cry... <br><br></td></tr></table><br>
<a name="2009758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> On Android. <br><br></td></tr></table><br>
<a name="2009762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> So it's for the version with libgdx? Haven't tried that yet, but official drivers/libs noticed huge drop in frame rate. <br><br></td></tr></table><br>
<a name="2009783"></a>

<a name="2009784"></a>

<a name="2009785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >clevijoki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> The comparison benchmarks in posts 18 &amp; 19 have some major flaws.<br><br>The update function is called multiple times on the monkey version of the performance comparison (posts 18 &amp; 19), where on the libgdk it is called once per render.  The sin and cos functions are not that cheap, and with 400 objects they are being called 1600 more times per frame.  You should move the update function into the monkey render loop and update it with a delta to make it a fair comparison.<br><br>Next, the logic for wrapping their coordinates around the screen is bad on the libgdk version (when wrapping for the right/bottom of the screen they are waiting until the x &gt; screen width + image width, which is a bug that means they use less fillrate than they should.  The monkey version uses much simpler logic, which has the opposite bug, when wrapping across the right/bottom it just sets the coords to 0 which uses more fillrate than it should. <br><br></td></tr></table><br>
<a name="2009786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree we need a better benchmark. Any volunteers? ;) <br><br></td></tr></table><br>
<a name="2009821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> @anawiki - no the results shown are for the latest Monkey version, running on Android.<br><br>Yes Monkey does do multiple updates, but it is the rendering which is the problem.<br><br>Sin and Cos are not the problem, if you comment out all the drawing of the images Monkey will run at 60FPS ;) - I have tested this. <br><br></td></tr></table><br>
<a name="2010125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using the "mak/bouncyaliens" demo ...<br><br>NOTES:<br>- Run on Android<br>- 1024x600 screen size<br><br><pre class=code>
v42 | w/ Alpha | w/o Alpha
----+----------+----------
100 | 19-20    | 47
200 | 12       | 36-37
300 | 8        | 29-30
400 | 6        | 23-24


v43 | w/ Alpha        | w/o Alpha
----+-----------------+-------------
100 | 31    (+10-11)  | 48    (+1)
200 | 20-21 (+8-9)    | 42    (+5-6)
300 | 15    (+7)      | 31-32 (+2-3)
400 | 12    (+6)      | 26    (+2-4)

NOTE: HICOLOR_TEXTURE [True|False] had no effect performance-wise
</pre><br><br>As with Therevills, I'm seeing FPS increases across the board, particularly with alpha sprites: Nicly Done, Mark! <br><br></td></tr></table><br>
<a name="2010517"></a>

<a name="2010518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >clevijoki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills I am not talking about what is slow in mojo, just how you would make a fair comparison between mojo to libgdx.  Mojo should continue to be optimized until it is at least as fast as libgdx. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
