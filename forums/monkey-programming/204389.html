<!DOCTYPE html><html lang="en" ><head ><title >Overriding methods with different params</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Overriding methods with different params</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Overriding methods with different params</a><br><br>
<a name="2046783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I've read the threads that say you can't do it and there's no override keyword, but what is the best method to do something similar then?<br><br>1) Add a dummy method with the same params to the base class (yuk)<br>2) Make a different method name for the one with different params (pretty bad if you want to iterate a list of various different classes and call the same method polymorphism-style)<br>3) Something obvious I'm missing?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2046784"></a>

<a name="2046785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I also noticed that solution 1 breaks if you have say:<br>- Class A with two versions of same method<br>- Class B extends Class A and has only one of Class A's methods.<br>- Class C extends Class B and tries to override the method from Class A that is missing in Class B.<br><br>Basically you have to add the dummy function all the way up the class tree, which is super-bad it seems to me. <br><br></td></tr></table><br>
<a name="2046791"></a>

<a name="2046793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Belimoth</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think someone will say that trying to override a method with different parameters is a symptom of "Bad OOP design" but I'm sure you know what you're doing.<br>A third solution would be to have the function only take one parameter, a MyInfo object which is handled differently. <br><br></td></tr></table><br>
<a name="2046803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can have the same method name with different params... as long as the signature is different.<br><br>[monkeycode]Strict<br><br>Function Main:Int()<br>	Local s:Sprite = New Sprite<br>	s.Draw(100, 100)<br>	s.Draw(100, 120, True)<br>	Return 0<br>End<br><br>Class Sprite<br>	Field x#, y#<br>	<br>	Method Draw:Void(x#, y#)<br>		Print("Draw @ "+x+","+y)<br>	End<br>	<br>	Method Draw:Void(x#, y#, shadow?)<br>		Draw(x, y)<br>		If shadow<br>			Print("Drawing Shadow...")<br>		End<br>	End<br>End[/monkeycode]<br>What are you trying to do? <br><br></td></tr></table><br>
<a name="2046815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wiebow</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I try not to use this feature as it is confusing and can generate hard to find bugs... I would name the 2nd method in your example DrawWithShadow(x,y) <br><br></td></tr></table><br>
<a name="2046826"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Belimoth: Ah yes your third idea is a good one, although it could make it quite clunky for simple methods<br><br>@therevills: I have an update method in a base class with no params, then for an extended class I wand an update method with a single parameter passed in so I can do something different.  In the end I made UpdateNoSound() which sets a field called useSound:int and then calls the normal Update() method.<br><br>@wiebow: Yeah I ended up doing that type of thing. <br><br></td></tr></table><br>
<a name="2046903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like you are more in need of using an Interface and adding the stub methods with the different parameters there. <br><br></td></tr></table><br>
<a name="2046920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well that's my method 1 suggest above right? I didn't fancy that. <br><br></td></tr></table><br>
<a name="2046938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> As Belimoth suggested, this sort of thing does generally point to a OO design that's going off the rails a bit. However, taking it at face value:<br><br>There's something a bit contradictory about your first and second points in the top post. If it's ugly/wrong to have your second method in Class A then how would you ever have the situation in point 2 where you iterate over a list without care about the specific type? If A doesn't have the method then you'd need to test the type in order to work out what to call.<br><br>The issue you point out in your second post where Monkey "breaks" when you try to override a method in C that isn't explicitly defined in B, but is in A -- that's a Monkey bug (or, if claimed "as intended", it's a design flaw).<br><br>Another option in your situation would be to change the method in A to take a useSound flag with a default value of True. That way you can just call Update() as normal if you want. This would also likely allow you to separate the sound playing stuff into another method and only call that if the flag is true. <br><br></td></tr></table><br>
<a name="2046937"></a>

<a name="2046936"></a>

<a name="2046940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah yes good point, my case 2 is totally invalid haha, oops.<br><br>Yeah I thought about adding a useSound param with a default to the method but it doesn't sit well with me that the base class doesn't have any sound and doesn't ever use that param.  It just seems weird to me, and would be confusing for anyone reading the code. <br><br></td></tr></table><br>
<a name="2046944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> That sort of takes us back to "off the rails" of OO for me. If A is a concept that cannot (rather than just does not) play sound in the update then B should also have that property because it is an A too.<br><br>Code aesthetics are an individual taste matter to some extent but pushing against the specialisation going down the inheritance tree flow is normally going to cause pain. <br><br></td></tr></table><br>
<a name="2046970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well that's my method 1 suggest above right? I didn't fancy that.  <br></div><br>No, not really. Interfaces really just have stub methods in the first place. <br><br></td></tr></table><br>
<a name="2046945"></a>

<a name="2046954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @muddy_shoes I see what you mean but I always add new functionality (like playing sound) to extended classes.  Didn't know that was bad OOP.  But I'm not an expert.<br><br>@therevills: OK I see what you mean. <br><br></td></tr></table><br>
<a name="2046960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @greyalien<br><br>It's not about adding functionality it's about encompassing the possibility behaviours/functions/features. That's why I tried to clarify the difference between can and does.<br><br>To try and make something concrete here, I'll assume that your base class is some form of Actor, GameObject, GameEntity or similar. There's nothing wrong with that base class not playing any sound but it's contradictory to take a view that it represents something that cannot play sound and then to add that functionality later. It's that contradiction that's causing your issues where you both want to operate via polymorphism on a consistent base interface and also avoid adding things to that interface that the base class doesn't directly implement. Something about cake comes to mind. <br><br></td></tr></table><br>
<a name="2046959"></a>

<a name="2046968"></a>

<a name="2046969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wiebow</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is why I love component based game entities. It gets rid of all these potentionally complicated issues and refactoring. <br><br></td></tr></table><br>
<a name="2046973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right, with components you could do something like:<br><br>[monkeycode]<br>entity.RegisterComponent(New SoundComponent)<br>[/monkeycode]<br><br>The idea is, that you can feed your entity every behavior you want to and remove/change it (at runtime if you want). <br><br></td></tr></table><br>
<a name="2046975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> @muddy_shoes Good explanation thanks.<br><br>@weibow and Shinkiro1 Sounds cool, I've never done that in my games, although I've scripted for another game that did use that system. <br><br></td></tr></table><br>
<a name="2047009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wiebow</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I might port my artemis port to monkey, but I ran into the problem that Monkey does not have a Long integer. Limits the amount of bits available for component types. Oh well. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
