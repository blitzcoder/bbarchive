<!DOCTYPE html><html lang="en" ><head ><title >Example of two images combined to one?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Example of two images combined to one?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Example of two images combined to one?</a><br><br>
<a name="2057276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ondesic</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was wondering if there was a simple example somewhere taking two images and combining them into one.  I don't mean just overlaying them, I mean drawing one to a canvas, then drawing the other onto the same canvas creating a new image?<br><br>Thanks for any help. <br><br></td></tr></table><br>
<a name="2057277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try something like:<br><br>DrawImage image1...<br>DrawImage image2...<br>ReadPixels...<br>image3.WritePixels... <br><br></td></tr></table><br>
<a name="2057287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ondesic</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you use ReadPixels to read a portion directly from the loaded image instead of the render buffer like?<br><br>PixelArray = image1.ReadPixels...<br>image2.WritePixels... <br><br></td></tr></table><br>
<a name="2057288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. Unfortunately not. Try the zipped module in this link:<br><a href="http://monkeycoder.co.nz/Community/post.php?topic=3482&amp;post=36720" target="_blank">http://monkeycoder.co.nz/Community/post.php?topic=3482&amp;post=36720</a> <br><br></td></tr></table><br>
<a name="2057293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ondesic</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get a <br>Monkey Runtime Error : TypeError: Cannot call method 'Width' of undefined<br>when trying this module. <br><br></td></tr></table><br>
<a name="2057300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ondesic</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, Mark, does the image3 in your example have to be a blank image, or can I draw to an existing image (with a picture already loaded in it)? <br><br></td></tr></table><br>
<a name="2057304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ondesic</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Darn.  I hope no one minds me venting.  I am getting very disheartened.<br>I started Monkey a year ago.  I began small but all the time keeping my eye on one goal...to port one particular program of mine to Android AND iOS.  I have whittled away at each problem I would face porting this particular game.  Finally today I am trying to tackle the biggest obstacle: "rendering to texture".  I thought I had read correctly, but only now am I beginning to think that monkey may not be able to do this. My whole game's success henges on this ability.  I need to build a map out of small custom tiles.  Each tile is made by adding pictures together.  For instance, one 40x40 tile is a mixture of ground, trees, rocks, and flowers.  I have to create the tile first, then draw it to the large canvas.  I do this until the map is made.<br><br>So far, everytime I try to draw anything to an image, it erases the entire image.<br><br>Is this doable in monkey or am I out of luck? <br><br></td></tr></table><br>
<a name="2057310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> image3 has to be created using CreateImage() before you can call use WritePixels().  I suspect that is the issue you are having.<br><br><pre class=code>
Function CreateImage : Image ( width:Int, height:Int, flags:Int=image.defaultflags )

'Creates an empty image for use with Image.WritePixels.
'The contents of the image are initially undefined.
</pre><br><br>What you want is quite doable.  For example, draw a big square of grass in the render buffer, then draw small flowers on it (each flower being an image with an alpha (transparency) channel.<br><br>Then create an image using CreateImage() and use WritePixels() to copy the buffer contents to it.  That should give you a grassy tile with flowers that you can use any time.<br><br>Don't forget that this must be done during OnRender().  You might want to do it at the start of the game, then clear the render buffer and print on it "Preparing Graphics" and maybe a progress bar until you are done. <br><br></td></tr></table><br>
<a name="2057311"></a>

<a name="2057312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually maybe there's an issue of sequence, if you want to use the render buffer alternately for making tiles and using them, and the buffer isn't big enough to do both at once.  But in the first place, it's hard to see how tiles are helping you if you do this.  In the second place, the solution is to make all the tiles first, then do your second stage of processing.<br><br>[And if the buffer size or availability restricts you, you can probably set up to use Int[] arrays as your own graphic surfaces.  Though you'll still need to borrow it if you want to load images using LoadImage().] <br><br></td></tr></table><br>
<a name="2058317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ondesic</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks like it isn't possible with monkey (at least not yet).  I'm sad, but I have gone back to libGDX for now.  I'll check in from time to time to see if this is possible and easy in the future. <br><br></td></tr></table><br>
<a name="2058338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ReadPixels and WritePixels do work.  Surely that is enough to do most things? <br><br></td></tr></table><br>
<a name="2058348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ondesic</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for trying to help.  I tried multiple times.  It seems ReadPixels and WritePixels have two many stipulations to work.  I still can't create the effect I need. <br><br></td></tr></table><br>
<a name="2058370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> They have no stipulations as far as I know, except:<br> - ReadPixels only works during OnRender()<br> - ReadPixels is limited to the size of the render buffer<br> - ReadPixels creates alpha of 1.0<br> - WritePixels needs a base image created using CreateImage()<br><br>I think you are probably just missing some step.  Does your code fail the same way on every target? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
