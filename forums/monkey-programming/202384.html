<!DOCTYPE html><html lang="en" ><head ><title >KeyDown returned as Int</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >KeyDown returned as Int</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >KeyDown returned as Int</a><br><br>
<a name="2023570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>is there any particular reason why KeyDown returns an Int instead of a Bool? I'm surprised it's the first time it has come up, but I've just had the following error when trying to store the state of KeyDown in a Bool variable.<br><br><pre class=code>Error : Cannot convert from Int to Bool.</pre> <br><br></td></tr></table><br>
<a name="2023586"></a>

<a name="2023587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is strange, but not unexpected. As the mojo code has no return set, it'll return an int in non-strict mode.<br><br><pre class=code>Function KeyDown( key )
	Return device.KeyDown( key )
End</pre><br><br>Most people are going to use KeyDown like this, so it usually isn't a problem.<br><br><pre class=code>If KeyDown(KEY_X)
	' Do something
End</pre><br><br>I wouldn't say you're off though, that this isn't right. It probably should return boolean instead of an integer. <br><br></td></tr></table><br>
<a name="2023585"></a>

<a name="2023589"></a>

<a name="2023590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This was also mentioned about TouchDown() here:<br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=994" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=994</a><br><br>Mark agreed that the "down" functions should probably return a Bool instead of an Int. (Returning Int makes more sense for the "hit" functions.) <br><br></td></tr></table><br>
<a name="2023670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Most people are going to use KeyDown like this, so it usually isn't a problem. <br></div><br><br>Yeah, that's probably why I've not seen it before. I can't think of the proper name for it, but I'm making a middle man kind of control system so that bool variables for moving/aiming can be set by the keyboard, touch controls or the joypad. <br><br></td></tr></table><br>
<a name="2023675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taumel</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way monkey deals with input could generally be improved.<br><br>For instance MouseDown() doesn't only get you a positive response during the frame it got called for the first time like in many other languages where they differ between Mouse, MouseDown, MouseHit. Instead it's true every frame which forces you to keep track of these things on your own. It's more work and confusing when you're jumping between different languages. <br><br></td></tr></table><br>
<a name="2023677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> mousedown and mousehit have always worked like that and no-one else complains about them <br><br></td></tr></table><br>
<a name="2023678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> There may be other functions with similar names in some languages.  But you really need an async function that tells you when the mouse is down now.<br><br>Use MouseHit() to tell if it's been clicked since the last update. <br><br></td></tr></table><br>
<a name="2023685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taumel</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @slenkar<br>Actually that's a great argumentation.<br><br>@Gerry Quinn<br>Let's put it this way, monkey's implementation needs more work to be done, depending on what you're trying to achieve, and it isn't common whilst also offering no benefit on top. <br><br></td></tr></table><br>
<a name="2023686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> it isn't common whilst also offering no benefit on top <br></div><br><br>Well, there is a benefit to BRL in not having to write/support a more complete input library. You could argue that it's impossible to predict how people would want to abstract across the mouse/touch interfaces so it's best not to try. <br><br>For my own stuff I wrap the mojo input module in a pseudo-event system that provides KEY_DOWN/KEY_UP events as well as other nice-to-haves like MOUSE_DRAG info. <br><br></td></tr></table><br>
<a name="2023725"></a>

<a name="2023726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taumel</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my opinion Input is one of the core features which i would try to get done as good as possible. Btw. i remember that the first problem a friend of mine, i once suggested monkey to, had was that his code was flipping through his menus due to the unexpected behaviour of MouseDown. <br><br></td></tr></table><br>
<a name="2023731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't find the Monkey system unusual.  Mojo isn't really event driven except at the most basic level, so why would I expect MouseDown() to tell me anything other than whether the mouse is down?<br><br>Generally the function called during every update starts:<br><br><pre class=code>If MouseHit( MOUSE_LEFT ) &gt; 0</pre> <br><br></td></tr></table><br>
<a name="2023732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> For what it's worth, I'm happy with the way the mouse/key functions work, except the Down functions should really return a bool. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
