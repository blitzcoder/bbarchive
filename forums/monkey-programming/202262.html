<!DOCTYPE html><html lang="en" ><head ><title >Creating Levels. cross platform.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Creating Levels. cross platform.</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Creating Levels. cross platform.</a><br><br>
<a name="2021997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sup all. just me your local forum spammer :)<br><br>I have progressed my project to the point where I actually want to see nice levels flying past as I mess with the player code, so I have decided its time to tackle the pain that is creating a level structure and level editor.<br><br>Now, in anything else I would just loop my array and write the values out to file.<br><br>But I assume thats not going to be possible for all platforms, so considering at least 1 array 500 in size, possibly more, what would you guys suggest for saving levels.<br><br>Keeping in mind that any level I create, needs to be available on all platforms.<br><br>My initial thought is that it needs to be plain text, I recall reading some where that mobiles only read xml or txt files, but im not sure so any suggestions and or thoughts on that would be cool. <br><br></td></tr></table><br>
<a name="2021998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> My first idea is using plain text file stream.<br>I dunno how big your levels are, but each level a seperate file.<br>Or you split each level file, into level sectors files.<br><br>like<br>level01_x0_y0.txt<br>level01_x500_y500.txt<br><br>if the player is between (0,0) and (500,500) then they use the first file.<br><br>Filesystem works on every device (i hope) <br><br></td></tr></table><br>
<a name="2022002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah file system its hinky tho, you can only load xml and text files, as far as I know.<br><br>and I'm unsure about how you write to and read from the file, I dont think we have access to commands like writeline or readline.<br><br>the doc's are terrible. <br><br></td></tr></table><br>
<a name="2022004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> My initial thought is that it needs to be plain text, I recall reading some where that mobiles only read xml or txt files. <br></div>At the moment as far as I know Monkey can only handle any files that use proper ASCII or Unicode characters. Gfk did write some code that could code integer and floats into strings, but the class for strings in ios spat the dummy out at those strings. I don't know if he found a work around. But it is possible to write platform specific code to handle raw data. Just don't expect that raw data to work from one platform to another e.g. 32bit floats and 64bit floats. <br><br></td></tr></table><br>
<a name="2022005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> txt and xml only.<br><br>I feel there are binary file load routines for every platform, but monkey doesn't tap into those. I'm surprised the 'OS' module doesn't do this for desktop at least.<br><br>Another option would be to use the base64 module to convert data into strings:<br><a href="http://monkeycoder.co.nz/Community/posts.php?topic=56#139" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=56#139</a> <br><br></td></tr></table><br>
<a name="2022006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> God I am having such a bad programming day, almost nothing I set myself to get done today has gotten done, thanks to crap documentation, a debugger that seems to think every error has something to do with an array, and the fact that im still trying to learn the language and its difference.<br><br>kinda getting close to face mashing my keyboard.<br><br>Currently I am fighting with String.Split("")<br><br>Now the doc's say that String.Split(",") returns an array <br><br></td></tr></table><br>
<a name="2022007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> OH HOLY GOD.. nvm... damn this debugger to hell. <br><br></td></tr></table><br>
<a name="2022010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> in case anyone is wondering, a missing letter in a file name meant that LoadString was not actually loading anything so mu subsequent String.Splits and the rest of my code was getting array index out of bounds and or Null values.<br><br>Can the debugger not throw an error if the resulting string or return from LoadString is null ? would have saved me bloody ages of head scratching if it just said, OI dumb ass you spelled the file name with an 0 (ZERO) instead of an o "The letter o".. file name was caps as well which made it almost freeking impossible to spot.<br><br>I'll never do that again. <br><br></td></tr></table><br>
<a name="2022011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> First, sorry for the little nerd rage there.. lol. feeling better now.<br><br>@ Adam. m8 here is my loading method which loads my game array from file.<br><br><pre class=code>
	Method LoadStage(stage:Int=1)
		Self.StageSpeed=.7
		Local tmpImage:Image	
		
		Local LevelIN:String
		LevelIN = LoadString("Stage_"+String(stage)+".txt")
	
		game.images.LoadAnim("StageTiles_"+String(stage)+".png", 128, 128, 60, tmpImage)
		Self.StageTiles = game.images.Find("StageTiles_"+String(stage))		

		Local loop:Int = 0		
		For Local NewGrid:String = Eachin LevelIN.Split(",")
			If loop&lt;500
				Self.grid[loop]=Int(NewGrid)
				loop+=1
			End If
		Next	
		
	End Method
</pre><br><br>My levels are in a Grid array, and they hold the tile or frame number to be displayed, so the file the array is saved out to is just tons of comma separated numbers. <br><br></td></tr></table><br>
<a name="2022013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matty</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Two things to think of...<br><br>you can check if the string returned by loadstring is null simply do this:<br><br><pre class=code>
mystr:String
mystr = LoadString("filename.txt")
if mystr then
     'put code in here since mystr is not null
endif 
</pre><br><br>Secondly - I've followed your thread on the blitz forum (nice graphics) and you may already know this but monkey doesn't have pixel perfect collisions so you may have to come up with an interesting way to determine collisions between your ship and the scrolling background.... <br><br></td></tr></table><br>
<a name="2022030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wiebow</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> The difficulties with serialization (well, and a proper debugger) is what is causing me to not use monkey yet for new bigger projects. <br><br></td></tr></table><br>
<a name="2022032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> matty, yeah I noticed that.<br><br>I have two options as I see it at the moment, the first is to simple not have collisions with the map, assume the ship is flying over the ground as opposed to flying through something.<br><br>The other is to create a second map file that lists a box(x,y,x2,y2) for each tile in the tile set, which will be used for collision checking, I will simply load those positions into an array the same depth as the map array, and then in the collision method check where the ship is in the map array, then compare the ships box collision with the box for that tile.<br><br>Means it's not going to be pixel perfect but I think that should work, specially for mobile games.<br><br><br>Have to admit tho I was kinda bummed tho when I realized this, because I was planning for this game to be XBox as well and better collisions are deff needed for that platform..<br><br>I actually have a third option but its not one I fancy taken on as its bucket loads more work, and a bit much considering im still getting my feet wet with the language, and thats to actually create the maps and ships with lines/vectors and then do cirlce to line checks, but I really dont wana do that. <br><br></td></tr></table><br>
<a name="2022034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think, yeah I have descided that collisions will only be checked between the ship, aliens, and bullets, powerups .. the map is ground, and your flying over it so that reduces the work a little.<br><br>Also means I can, or should be able to get away with radius collision detection which actually fits well with my ship design. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
