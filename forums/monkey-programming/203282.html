<!DOCTYPE html><html lang="en" ><head ><title >What's passed by Value/Reference by default?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What's passed by Value/Reference by default?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >What's passed by Value/Reference by default?</a><br><br>
<a name="2034331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simple topic, when doing a function or method call, what types are passed by value and what types are passed by reference as default in monkey?  Does it vary based on target platform?<br><br>My working assumption has been that Objects are passed byRef, and everything else is passed ByVal.  I've been afraid to test this assumption on non-Object primitives, however, because I don't want to sneak nasty bugs in my code on the off chance everything's passed in by reference as default.  Of particular curiosity to me is whether passing in a String (which is immutable) is by reference, and if "changing" the string on the method level changes the reference outside that scope.  I've tested it only with Objects, and know that operating directly on variables inside the method scope effect references from the caller.<br><br>A cursory ctrl+f of the monkey language reference didn't reveal anything specific. <br><br></td></tr></table><br>
<a name="2034347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> nothing is passed by reference. Monkey does not support it that's why we have boxing classes. not a big issue tho. <br><br></td></tr></table><br>
<a name="2034350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ziggy is correct. But, if I understand you correctly, then yes only Objects (including Arrays) <i>contents</i> are changeable inside functions. Strings, Ints, Floats, Bools are not.<br><br>Hope that helps. <br><br></td></tr></table><br>
<a name="2034352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah yes, you can modify any class instance content but not the instance being referenced, I hope this makes it clear:<br>[monkeycode]Function Main()<br>	<br>	Local test:= New TestClass<br>	test.value = "default value"<br>	<br>	Print "Before function:" + test.value    'Outputs "default value"<br>	TestFunction(test)<br>	<br>	Print "After function:" + test.value   'outputs "modified value"<br>	<br>End<br><br><br>Function TestFunction(parameter:TestClass)<br>	<br>	Print "Begining Function: " + parameter.value   'outputs "default value"<br>	<br>	parameter.value = "modified value"   <br>	Print "Middle function: " + parameter.value   'outputs "modified value"<br><br>	<br>	parameter = New TestClass	'We modify the instance being pointed here<br>	<br>	parameter.value = "Another thing"<br>	Print "End function: " + parameter.value   'outputs "Another thing"<br><br>	<br>End<br><br>Class TestClass<br>	Field value:String<br>End[/monkeycode]<br><br>This sample outputs:<br><div class="quote"> Before function:default value<br>Begining Function: default value<br>Middle function: modified value<br>End function: Another thing<br>After function:modified value <br></div> <br><br></td></tr></table><br>
<a name="2034406"></a>

<a name="2034407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, thank you everyone, that answers my question.  Beaker introduced another question to me -- do you have to make a copy of an array to directly interact with its contents without passing the changes back to the caller? (ie:  does it behave like Objects and generic containers?)  Or, again, does it depend on the array type?  Specifically, I'm concerned about arrays of type primitives such as Float. <br><br></td></tr></table><br>
<a name="2034477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can <i>permanently</i> change the contents of a Float array inside a function no problem, without having to copy it or pass it back. Easy to test. <br><br></td></tr></table><br>
<a name="2034481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I like to do is name parameters that can be changed with an underline in front.  So the method:<br><br>DoSomething( arr:int[] )<br><br>..promises not to change arr.  If it will change the passed array, its signature will be:<br><br>DoSomething( _arr:int[] )<br><br>Of course the compiler does not enforce this like const is enforced in C++, but it is fine so long as you obey your own rules. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
