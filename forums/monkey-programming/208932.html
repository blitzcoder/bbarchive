<!DOCTYPE html><html lang="en" ><head ><title >Pixel Data without readpixel?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Pixel Data without readpixel?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Pixel Data without readpixel?</a><br><br>
<a name="2093575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there anyway to get at the pixel data in array form without having to render the sprite first?<br><br>I'm interested in preserving the alpha data and as I understand it rendering and then reading the pixels will lose the alpha data as any transparent areas will simply show whats under it, normally black or the color of some other sprite that's already been drawn? <br><br></td></tr></table><br>
<a name="2093580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suspect that for complete accuracy you need to include a separate grayscale alpha-image.  If you just want transparency on/off, of course you can encode it using a specific colour. <br><br></td></tr></table><br>
<a name="2093593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm just wondering if pixel perfect collisions might actually be viable if we cache the colliders in arrays and then do the collision checks based on those arrays.. <br><br></td></tr></table><br>
<a name="2093608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It depends on what criteria you want. It's possible to retrieve the alpha value via draw and read quite accurately. The problem occurs if you want to get an accurate colour value from an image that uses low alpha values as rounding in the transparency calculation means that precision is lost. The question is along similar lines to GfK's issues in the thread in the beginner's forum and the same responses apply. You can pre-process the images to create collision maps, draw and read the values to do the same or alter mojo for the platforms you care about to allow pixel data retrieval.<br><br>That's pretty much just the beginning of the problem though as you then need to work out how to use the collision maps. There's nothing outrageously hard, but certainly an amount of work depending on things like whether you want to have rotating sprites. <br><br></td></tr></table><br>
<a name="2093683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> nDrawExts2 can do it.   <a href="http://www.monkey-x.com/Community/posts.php?topic=7702" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=7702</a><br><br>Use PixelArray.Get(path, [width, height]) <br><br></td></tr></table><br>
<a name="2093716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You can pre-process the images to create collision maps, draw and read the values to do the same or alter mojo for the platforms you care about to allow pixel data retrieval. <br></div><br><br>Yep, I've heard all these 'solutions' suggested but 1) I have no idea how to go about any of it, and 2) Nobody has given a working example which can be [easily] implemented in a real-world scenario.  As far as altering mojo is concerned, there is no way in hell I'd want to go down that route as you then have the ball-ache of redoing it for every new update.  This was always my biggest gripe with Blitzmax which was not "casual game compliant" unless certain modifications were made (and remade per update).  Aside from the fact that if I knew how to do that kind of stuff, I wouldn't be looking at high-level stuff like Monkey in the first place.<br><br><div class="quote"> That's pretty much just the beginning of the problem though as you then need to work out how to use the collision maps. There's nothing outrageously hard, but certainly an amount of work depending on things like whether you want to have rotating sprites. <br></div>Of course you'd want to have rotating sprites.  If you can't rotate sprites then we're right back at Blitz Basic, where we were fifteen years ago.<br><br>nDrawExts2 might help some, by the look of it.  Though I must admit I'm very wary of 'middleware' as it almost always ends up abandoned and has caused me no end of problems in the past.  I'd much rather this functionality was added officially. <br><br></td></tr></table><br>
<a name="2093715"></a>

<a name="2093714"></a>

<a name="2093720"></a>

<a name="2093721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Powelly</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been working on a pixel perfect collision detection library for Monkey for a while. The only thing left for me to write is a guide on how to use it, but as this topic keeps coming up, I guess it'd be better to release what I have and finish the guide later.<br><br>The "Collision Mask Module" consists of:<br>Two applications written in Qt (C++) that run on Windows/Linux/MacOS and allow you to create and view "collision masks" from the alpha data in PNG images.<br>A Monkey module (a single file) that contains the scaling, rotation and collision detection code.<br>Four example applications.<br>An API reference and the custom mask file format specification.<br><br>The Monkey module is written in 100% standard monkey code and does not require any changes to Mojo. In fact, apart from the Debug display feature, it doesn't even require Mojo. It works on all Monkey targets.<br>Features include:<br>* Synchronous and Asynchronous loading of mask files.<br>* Rotation and scaling of masks.<br>* Pre-allocation of empty masks for use as targets for rotation and scaling, avoiding allocation of memory in the main game loop.<br>* Mask to mask collision detection.<br>* Point to mask collision detection.<br>* Rectangle to mask collision detection.<br>* Circle to mask collision detection.<br>* On-screen display of masks for debugging purposes.<br><br>Give me a few days and I will put the files on my website and post the details in the relevant forum section. <br><br></td></tr></table><br>
<a name="2093725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Though I must admit I'm very wary of 'middleware' as it almost always ends up abandoned and has caused me no end of problems in the past. I'd much rather this functionality was added officially. <br></div><br>This is the one massive reason that I dont usually use third party modules, the main one I do use is minib3d which is quite nice and gives good results. <br><br></td></tr></table><br>
<a name="2093732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd argue that all software will be abandoned by the original devs eventually. Monkey itself will be abandoned by Mark one day. If a library does what you want today and you've got the code then how are you in a worse position than if you'd written it yourself (barring silly hypotheticals about time to understand it over time to write it)? <br><br>More relevantly to this thread and the one in the beginners forum: if that's your position then fine but you should recognise that requesting community help when your only acceptable response is Mark writing the thing under the official Monkey umbrella is an abuse of people's time and effort. This little saga has gone thus:<br><br>Thread 1<br><br>* This is terrible! I can't work out how to do this thing!<br>- Here's a way.<br>* No no! That's awful.<br>- Here's a way.<br>* How terrible!<br>- Here's a way.<br>* No, that's not the way I want to do it at all.<br><br>Thread 2<br><br>~ Any way to do this stuff?<br>- Yes, here are some methods, you'll need to do more work though.<br>* Gah! Despite dismissing those things I'm now going to complain that I don't know how to do them and no-one offered further explanation.<br>* Actually, sod the explanation. Where's a complete working example!?<br>* Actually, even if you provide me with working code, I'm not accepting code from you lot! <br><br></td></tr></table><br>
<a name="2093761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Powelly</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Details of the Collision Mask Module are here:<br><a href="http://www.monkey-x.com/Community/posts.php?topic=8947" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=8947</a> <br><br></td></tr></table><br>
<a name="2093781"></a>

<a name="2093782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Muddy shoes - if you can't accept other people's opinions, then stop goose-stepping into their threads and belittling them.  Simples.<br><br>Everybody is having a fair and rational discussion, except you. <br><br></td></tr></table><br>
<a name="2093783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> GfK, If you don't want me responding to you then don't pull quotes from my post answering the question asked to use as a spring board for your entitled moaning. Goose-stepping indeed. Jesus. <br><br></td></tr></table><br>
<a name="2093784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> if it makes you feel better GfK, the only 'fragile' part of nDrawExts2 comes from having to manually flush the "to draw" queue, I guess it would be.  It's a single command which changed twice over the course of me having owned Monkney.  I predict it won't change again until Mojo supports shaders or gles20.  The rest of the program uses gles11 which is a module that comes with Monkey, so that part's unlikely to break.<br><br>Also to note that it only works on GL targets, so no vanilla html5, flash, xna, or windows 8. <br><br></td></tr></table><br>
<a name="2093785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> GfK, If you don't want me responding to you then don't pull quotes from my post answering the question asked to use as a spring board for your entitled moaning. Goose-stepping indeed. Jesus <br></div><br>You can respond all you want - just change the manner in which you're doing it.  Jesus, indeed. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
