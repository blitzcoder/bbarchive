<!DOCTYPE html><html lang="en" ><head ><title >Low Latency RealTime Multiplayer Action MMO</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Low Latency RealTime Multiplayer Action MMO</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Low Latency RealTime Multiplayer Action MMO</a><br><br>
<a name="2036280"></a>

<a name="2036281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Who don't want to build a Low Latency RealTime Multiplayer Action MMO :P<br><br>However for any kind of game that plays better using low latency it would be really nice to have a external server solution. We found pubnub, but that was optimal for turn-based Apps. I just found this Cloud based service that at first glance looks very promising.<br><br><a href="http://doc.exitgames.com/photon-server/FeatureOverview/#cat-getting_started" target="_blank">http://doc.exitgames.com/photon-server/FeatureOverview/#cat-getting_started</a><br><br>I tested a CounterStrike clone in the webbrowser, that was using their service. I seemed to work really well.<br><br>They have servers in USA, Europe and Asia. The indy cost is very low (imo), and free up to 20 concurrent users per app.<br><br>You can either use their servers to relay messages, or you can implement their API and code your own server.<br><br>Maybe I'm missing something essential, but it seems to me this opens up a lot of multiplayer game possibilities, especially for indy teams.<br><br>What do you think? <br><br></td></tr></table><br>
<a name="2036422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I looked at this a while back and it would be quite a large task to make this operate under monkey. Especially developing it for free!<br><br>Unfortunately it seems they still have not added flash/javascript SDK's for their cloud platform which is a shame! <br><br>I think this is one of the best options out there, you could attract  unity users as well as they are very familiar with photon! <br><br></td></tr></table><br>
<a name="2036421"></a>

<a name="2036425"></a>

<a name="2036426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> A server is only as good as it's ping time, exitgames.com is 400ms from here (nz).<br><br>I have have been trying some server experiments on appspot.com (google) which is finally below 200ms so basically usable from what feels like the other side of the planet. <br><br></td></tr></table><br>
<a name="2036428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skn3, did you uncover any more details that might be of use? <br><br>How big do you think it is? I mean what are the biggest issues to deal with? I checked the C# part and it looked fairly simple. Feel to me wrapping bare socket support would take almost the same amount of time. What do you think?<br><br>skid, Wow you have 400ms from NZ, well I guess the closest server for you is the one in Asia. I assume my ping to the Europe server is substantially lower. And yeah I do agree, latency is where it's at.<br><br>Btw how did you check the latency to their server? If it is simple I'll check it myself. I have the WindowsPhone and C# SDKs and Samples installed and running. <br><br></td></tr></table><br>
<a name="2036427"></a>

<a name="2036456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just type ping exitgames.com from the command line of a pc. <br><br>That is their web server address, their game servers are possibly running behind other addresses at much better response times. <br><br></td></tr></table><br>
<a name="2036455"></a>

<a name="2036506"></a>

<a name="2036507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pubnub is quite fast as well &lt;250ms as far as I know. That should be enough even for fast action. You need some interpolation anyway.<br><br>edit: At least enough for classical RPGs (online) and NOT shooters like Counter strike. <br><br></td></tr></table><br>
<a name="2036509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> But then again I think it's time to finish MNet and include sockets for all major targets... <br><br></td></tr></table><br>
<a name="2036518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> i made small (GLFW only) RakNet 4 module test, and that worked fine. (server, client, send/receive packets) <br><br></td></tr></table><br>
<a name="2036537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Zeke can you send me that please if you don't mind? <br><br></td></tr></table><br>
<a name="2036546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> sure.. but its not just copy to modules folder... need to copy all raknet sources to tagets/glfw folder...<br><br>damn...<br><br>after that module, i also added "include" command  that included code to main code when compiled.. aah.. need some time to do all again... :D<br><br>but. sure. i will put this code available to all users..<br><br>so.. please, wait a day or two.. :D<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' Module raknet.raknet

Strict

'Include "raknet" 'include raknet to build dir
'^^ include TESTING only..

Import "raknet.cpp"

Extern

Class RakNet="classRakNet"
	Method Getime:Int()
End

Class RakNetSystemAddress="MonkeySystemAddress"
	Method ToString:String()
	Method SetPort:Void(port:Int)
	Method GetPort:Int()
	Method FromString:Void(address:String,portdelim:String="|")
End

Class RakNetSocketDescriptor="MonkeySocketDescriptor"
	Method SetHostAddress:Void(host:String)
	Method GetHostAddress:String()
	Method SetPort:Void(port:Int)
	Method GetPort:Int()
End

Class RakNetPacket="MonkeyPacket"
	Method GetPacketIdentifier:Int()
	Method GetLength:Int()
	Method GetBitStream:RakNetBitStream()
End

Class RakNetBitStream="MonkeyBitStream"
	Method GetSize:Int()
	Method WriteByte:Void(value:Int)
	Method WriteInt:Void(value:Int)
	
	Method ReadByte:Int()
	Method ReadShort:Int()
	Method ReadInt:Int()
End

Class RakNetRakPeer="MonkeyRakPeer"
	Method Startup:Int(maxConnections:Int,SocketDesc:RakNetSocketDescriptor)
	Method Connect:Int(ip:String,port:Int)
	Method SetOccasionalPing:Void(value:Bool)
	Method SetMaximumIncomingConnections:Void(max_connections:Int)
	Method Receive:RakNetPacket()
	Method DeallocatePacket:Void(packett:RakNetPacket)
	Method Shutdown:Void(timeout:Int)
	Method SendBitStream:Int(bitstream:RakNetBitStream,priority:Int,reliability:Int,orderingchannel:Int,target:RakNetSystemAddress,broadcast:Bool)
End



Private

Global raknet:RakNet

Public



Function Getime:Int()
	Return raknet.Getime()
End

Function CreateRakNetSocketDescriptor:RakNetSocketDescriptor(host:String,port:Int)
	Local a:RakNetSocketDescriptor=New RakNetSocketDescriptor
	a.SetHostAddress(host)
	a.SetPort(port)
	Return a
End

</textarea> <br><br></td></tr></table><br>
<a name="2036543"></a>

<a name="2036544"></a>

<a name="2036545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok copy of my working server...<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
mport mojo
Import raknet



Class Game Extends App
		Field peer:RakNetRakPeer
		
    Method OnCreate()
        SetUpdateRate 30
        Local a:RakNetSystemAddress=New RakNetSystemAddress
        Print a.ToString()
        a.FromString("127.0.0.1|1345")
        a.SetPort(12345)
        Print "Testing SystemAddress: "+a.ToString()+" Port="+a.GetPort()
        
        Local b:RakNetSocketDescriptor=CreateRakNetSocketDescriptor("127.0.0.1",9000)
				
        Print "Testing SocketDescriptor: "+b.GetHostAddress()+" Port="+b.GetPort()
                
        peer=New RakNetRakPeer
        
        'Print "GUID="+peer.GetMyGUID()
        Print "startup="+peer.Startup(32,b)
        peer.SetOccasionalPing(True)
        peer.SetMaximumIncomingConnections(32)

    End
    
    Method OnUpdate()
    	If KeyHit(KEY_ESCAPE) Then
    		Print "ESC"
    	End
    	
    	If KeyHit(KEY_SPACE) Then 
      	peer.Shutdown(300)
      End
    	
    	Local packet:RakNetPacket=peer.Receive()
    	While packet
    		Print "Received PACKET"
    		
    		Print "PacketID="+packet.GetPacketIdentifier()+" Packet size = "+packet.GetLength()
  
  			Local stream:RakNetBitStream=packet.GetBitStream()
  			If Not stream Then
  				Print "Ei Stream"
  			End
  			Print "stream 1. byte (ID) = "+stream.ReadByte()+" Int="+stream.ReadInt()
    		peer.DeallocatePacket(packet)
    		packet=peer.Receive()
 
    	Wend
    	
    End



    Method OnRender()
        Cls
        DrawText("RakNet Server, randomMT()= "+Getime(),0,0)      
    End

End

Function Main()
    New Game()
    
End
</textarea> <br><br></td></tr></table><br>
<a name="2036547"></a>

<a name="2036548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool stuff!<br><br>Well even with Socket the server might be a issue, unless I go with a peer to peer solution.<br><br>When I saw exitgames.com I tought that might be the optimal solution.<br><br>Yeah true Xaron, actaully the project I wanted to use this in was an RTS (Strategy Game), so pubnub might actually be more viable than I first tought. I'll look more into that thanks, since you have it wrapped it sure is a very doable solution :)<br><br>btw I have 200ms to exitgame.com's webserver. <br><br></td></tr></table><br>
<a name="2036554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll do that sockets stuff for MNet anyway as I need it for my next projects. :) <br><br></td></tr></table><br>
<a name="2036562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Commit often on svn, I'll take a look and help as much as possible. In what target did you intend to run the server if I may ask? <br><br></td></tr></table><br>
<a name="2036568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> GLFW will have the server component and that OS (console only) target of course. I might add server side socket stuff for Android as well which might be necessary for p2p stuff but I want to have that classical server/client concept first.<br><br>GLFW sockets are done, Android runs mostly, will add that stuff to the project asap. <br><br></td></tr></table><br>
<a name="2036594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good news, I can help test as well if you like! <br><br></td></tr></table><br>
<a name="2036761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> photon server offer currently running:<br><div class="quote"> We want to share our love for Unity and it's amazing community with a time-limited special offer. During the week of the Unite 2012 Photon Server is available for all indies in two new packages:<br><br><a href="http://shop.exitgames.com/products/photon-Single-Unite" target="_blank">http://shop.exitgames.com/products/photon-Single-Unite</a><br>Single Photon Server Indie Unite<br>- 1 server and unlimited CCU for USD 99,-<br><br><a href="http://shop.exitgames.com/products/photon-Triple-Unite" target="_blank">http://shop.exitgames.com/products/photon-Triple-Unite</a><br>Triple Photon Server Indie Unite<br>- 3 servers and unlimited CCU for USD 199,- <br></div> <br><br></td></tr></table><br>
<a name="2036762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's good! I still scratch my head if photon is easy to integrate or not... <br><br></td></tr></table><br>
<a name="2036805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> what if someone made an MMO using a p2p system.<br><br><br>dear god.... <br><br></td></tr></table><br>
<a name="2036847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Diablo 2 was made that way. <br><br></td></tr></table><br>
<a name="2036865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> The first phantasy star online was also (not sure about ones after that) <br><br></td></tr></table><br>
<a name="2036878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <i>I'll do that sockets stuff for MNet anyway as I need it for my next projects. :) </i><br><br>Thank you Xaron ! <br><br></td></tr></table><br>
<a name="2036885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem! :) You're welcome. Will keep you posted! First target will be Android after GLFW (which is done for Windows) followed by iOS and WP7. I'll checkout websockets as well to make it work for HTML5. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
