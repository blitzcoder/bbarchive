<!DOCTYPE html><html lang="en" ><head ><title >Scaling Games for Multiple Devices (iOS)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Scaling Games for Multiple Devices (iOS)</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Scaling Games for Multiple Devices (iOS)</a><br><br>
<a name="2070187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know this has been brought up in several threads already, but I haven't been able to find a solution that works for me.<br><br>I'm currently using <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1500" target="_blank">DruggedBunny's Autofit module</a> which works very well for scaling the screen. My issue is that since all the iOS devices do not have the same aspect ratio, I get black bars - which I want to try to eliminate. On the 3GS and iPhone4, I can simply stretch the width of the game to the edges and have minimal/acceptable distortion. However, on the iPhone5 the black bars are much thicker which require the width to be stretched much further causing noticeable distortion. What has everyone else done to combat multiple screen resolutions?<br><br>Note: we're building for the iPad retina resolution (2048x1536) and scaling down the art. For slow devices, we swap in art that is 50% the size of the iPad art. <br><br></td></tr></table><br>
<a name="2070197"></a>

<a name="2070198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way I am doing this is to have 2 sets of background images.<br><br>I have 1 set at 1136x640 and 1 set at 1024x768.<br><br>I am not targetting 3GS so for me the 1136 works fine for iPhone5, I offset the image and show the centre of the image for iPhone4 (960x640), and the 1024x768 scales perfectly to iPad - I also use autofit.<br><br>I detect the device/resolution at the start of my program and load the correct images accordingly. <br><br></td></tr></table><br>
<a name="2070202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Multiple options for mitigation factors:<br><br>1.  Set a maximum distortion amount allowable from the standard scaling factor and hack it into AutoFit<br>2.  Add your own custom letterboxing borders<br>3.  Remove letterboxing entirely and let the background graphics bleed through<br>4.  Make hud elements and menu elements aligned by real device percentages <br><br></td></tr></table><br>
<a name="2070208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Prior to Autofit, I had been trying to simply let background images "bleed" over into the areas where the black bars would be placed. However, I was having issues with object placement that depended on the width of the screen. For example, I have a semi-transparent rectangle being drawn for my in-game console background that's drawn from 0,0 to the width of the screen. Since my target resolution width is 2048, the box stops short of the edge of the screen when I'm on devices other than the iPad. How would I go about fixing this? <br><br></td></tr></table><br>
<a name="2070218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's my method.<br>Right at the top I set 2 globals, jscrw and jscrh (Jay's SCReen Width and Jay's SCReen Height)<br>I also use rawscrw and rawscrh, which are my targeted virtual resolution.<br><br>-=-=-<br>During OnRender I find an approximately decent scaling amount, which gives a nice suitable render style for the target resolution, given the current DeviceWidth() and DeviceHeight() values. This is complex mathy stuff, and is all kinds of messy!<br>-=-=-<br><br>But then, I throw the results back into jscrw and jscrh.<br>jscrw=DeviceWidth()/Scale<br>jscrh=DeviceHeight()/Scale<br><br>From there, my game code works with 0,0 to jscrw,jscrh and everything inbetween.<br>This means that when I shove a GUI element at jscrw,jscrh, it'll be on the bottom right corner of the screen no matter what the user's resolution.<br>Learn to use scales, instead of exact positions, and scale everything to the jscrw,jscrh numbers, and you'll be able to get some nice gui stuff working.<br><br>If you need a good practice/tutorial/homework exercise which deals with scalings, I'd recommend trying to create a multi-resolution/ratio/orientation based Testcard pattern, which attempts to scale to any given resolution.  It's a tricky thing to figure out in your head, but once you've accomplished it, the methods can be reused in any number of situations. <a href="http://socoder.net/monkey/320-NeonPlatRaw/MonkeyGame.html" target="_blank">Example here</a>.. Just click the AGameAWeek logo on the game's main menu, then play with all the different resolutions.<br>If you can learn to do something like that, you'll be pretty much ready for anything different resolutions can throw at you! <br><br></td></tr></table><br>
<a name="2070249"></a>

<a name="2070250"></a>

<a name="2070251"></a>

<a name="2070252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> shillsit:  You should determine the scale factor and the translation amount from AutoFit and start drawing your rect at the true zero, inverting the scale factor and subtracting the translation amount.  Gonna toot my own horn and note that AutoScale already handles this for you with DeviceX() and DeviceY() functions.  The relevant code to steal is something like this:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function DeviceX:Float(percent:Float=1)
  If SlideAxis = X_AXIS
    Return (DeviceWidth() / ScaleFactor) * percent - SlideAmount 
  Else
    Return (DeviceWidth()/ScaleFactor) * percent 
  End If 
End Function

Function DeviceY:Float(percent:Float=1)
  If SlideAxis = Y_AXIS
    Return (DeviceHeight() / ScaleFactor) * percent - SlideAmount 
  Else 
    Return (DeviceHeight()/ScaleFactor) * percent 
  End If 
End Function
</textarea><br><br>Replace the variables for scale and translation with the appropriate ones from AutoFit, or steal it from the global matrix using GetMatrix().  Or just use AutoScale, which you can get here:  <a href="http://www.monkeycoder.co.nz/Community/post.php?topic=4963&amp;post=55649" target="_blank">http://www.monkeycoder.co.nz/Community/post.php?topic=4963&amp;post=55649</a>  ;)<br><br>Then, to draw a rect covering the entire screen, just specify DeviceX(0),DeviceY(0),DeviceX(1),DeviceY(1) as the dimensions of the rect.  If I remember correctly, that should do the job... <br><br></td></tr></table><br>
<a name="2070265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nobuyuki: AutoScale seems to be more of what I was looking for! Thanks for pointing me to this. However...I'm having an issue. Using the DeviceX(0) function, it properly places the rectangle at the true 0,0 but when I use DeviceX(1) the rectangle stops short of the right edge of the screen...DeviceY(1) works fine.<br><br>Here's a screen shot: <img src="http://img266.imageshack.us/img266/6026/h1bk.png"><br><br>Edit: If I add the SlideAmount to DeviceX(1) I can get the rectangle to scale the entire window. Is this intended behavior? <br><br></td></tr></table><br>
<a name="2070259"></a>

<a name="2070271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> SHillSiT:  My bad.  Set the width and height to DeviceX(1)-DeviceX(0), DeviceY(1)-DeviceY(0).  That should compensate for the slide amount.  <br><br>You'll notice that the width has to account for the distance it traveled horizontally from (0,0) because the width value of the rect is still scaled.  Absolute point distance of DeviceX() and DeviceY() when the value is 1 still specify the lower-right point on the screen.  (try it for yourself using DrawCircle().)  <br><br>Placement of textures shouldn't be affected by this, but of course, their scale will be affected too, so if you want to draw an image at the original scale on all devices, specify 1/ScaleFactor when blitting to get consistent size at all resolutions.  Remember to use wisely and test it so it isn't too crowded at small resolutions! <br><br></td></tr></table><br>
<a name="2070269"></a>

<a name="2070267"></a>

<a name="2070290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome! It works great now. However, I'm have one more issue:<br><br>My engine uses a camera so that I can pan around the gameworld. After getting  AutoScale configured correctly, I notice things that need to be relative to the camera aren't working correctly. After toying around with it, I realized the 0,0 that the camera was originally being placed at isn't the top-left corner of the screen anymore, but rather offset by the slide amount to the left. Here's how it looks:<br><br><img src="http://img849.imageshack.us/img849/9897/md7s.png"><br><br>I've tried placing the camera at DeviceX(0), but it doesn't seem to do anything. Any ideas?<br><br>EDIT: okay it DOES do something - it scrolls the camera to the point in the game world as intended. But I'm confused about how to get things lined up again correctly. In the image, you can see the console is offset and the redline marks the camera edge which should be right up along the left edge of the screen. <br><br></td></tr></table><br>
<a name="2070289"></a>

<a name="2070325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is your camera code like?  Camera should respect the virtual window size you set when you initialized AutoScale, and everything after ScaleScreen() "lives" within the virtual window now.  For example:<br><br><img src="http://i.imgur.com/0Ki7eLY.png"><br><br>Notice that I wrapped the Translate() function between push and pop matrix functions.  This is important, because if you don't do this, your global matrix commands will override the screen borders of AutoScale  (and probably also autofit).  When properly wrapped, the Translate() function moves the camera exactly 128px at native scale, and of course it changes based on the global scale. <br><br></td></tr></table><br>
<a name="2070339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> All of my drawing functions are wrapped between the Push and Pop functions.<br><br>My camera class is just a simple class that has "x" and "y" variables, which just defines how far away the camera is from the world origin. So if I want to pan the camera, I simply add X amount to the camera's X and everything is drawn with an offset.<br><br>EDIT: Nevermind, I figured it out. I was drawing the console stuff in the wrong position. <br><br></td></tr></table><br>
<a name="2070338"></a>

<a name="2070337"></a>

<a name="2070330"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
