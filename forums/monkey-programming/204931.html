<!DOCTYPE html><html lang="en" ><head ><title >Need help with Generics / trans compiler</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Need help with Generics / trans compiler</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Need help with Generics / trans compiler</a><br><br>
<a name="2054023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>Please consider this thread a prelude of things to come.  I'm attempting to port some code over to the world of Monkey, and I'm having problems with trans compiling it.  At its core, it takes an array of T, and a Comparator&lt;T&gt; class as constructor arguments. The main functions are publicly exposed, but everything else shouldn't really be -- I've made the ctor public due to my lack of understanding at the cryptic error I'm getting at compile time.<br><br>The bulk of the code (as of this posting) is listed in the following file:  <a href="https://github.com/nobuyukinyuu/monkey-timsort/blob/master/timsort.monkey" target="_blank">https://github.com/nobuyukinyuu/monkey-timsort/blob/master/timsort.monkey</a> (the repo includes diddy's Arrays&lt;T&gt; functions and Comparator&lt;T&gt; as well)<br><br>The error I'm getting when attempting to compile results when either trying to construct a TimSort&lt;T&gt; object, or call on its static function, Sort, which can take the same arguments the ctor takes.  The specific error usually lists the line where instantiation or function call is attempted, with "Internal error". The trace ends at that line and doesn't attempt to show me any errors in the TimSort&lt;T&gt; class.<br><br>Example output when attempting to compile the above code:<br><pre class=code>
TRANS monkey compiler V1.46
Parsing...
Semanting...
E:/Projects/Monkey/Code/monkey-timsort/TimSortTest.monkey&lt;23&gt; : Internal error
Monkey Runtime Error : E:/Projects/Monkey/Code/monkey-timsort/TimSortTest.monkey&lt;23&gt; : Internal error
</pre><br><br>I'm running off the assumption that this may be a problem with Generics, since no more specific error seems to be forthcoming, but I am uncertain.  Reference code exists in timsort.monkey's header in the form of a java and a js file.  Can any Monkey gurus help me out on this one?<br><br><br>Some notes:<br><br>1.  Comparator is an Interface in Java, but Interfaces can't be Generic in Monkey, so it's implemented as a class here.<br>2.  static methods were implemented in Monkey as Functions.  All other methods were implemented under the original code's scoping using monkey's Public/Private directives.<br>3.  static &lt;T&gt; voids were implemented as Function:Voids, since in the class scope, "T" is already presumed to be the generic type in Monkey<br>4.  Monkey doesn't utilize wildcard types; this limits the scope of the implementation compared to the code it borrows from but shouldn't interfere with its operation when sticking to a single type like in the example.<br><br>I know this could be a real tough nut, and chances are I might not get any replies to it, but <i>any</i> help to set me in the right direction would be greatly appreciated. <br><br></td></tr></table><br>
<a name="2054007"></a>

<a name="2054006"></a>

<a name="2054027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should report this as a bug. The Monkey build pipeline shouldn't spit out unspecified errors. "Internal Error" means that something unexpected occurred in the build code itself. There may well be a change you can make to your code that would avoid the issue but it's still a bug with Monkey itself.<br><br>The default "Internal Error" text should be changed to "Internal Error, report this problem to BRL". <br><br></td></tr></table><br>
<a name="2054042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure how to properly file this as a bug, since the codebase I have to reproduce it is "large" and I'm not sure where to localize the problem.  Do you have BRL's ear, by any chance?  I can report it as-is in the bug reports forum, but I don't want to be rude since there are enough "bugs" reported in there that ended up not being bugs at all.  I'll do it if that's what the proper thing to do is, though! <br><br></td></tr></table><br>
<a name="2054043"></a>

<a name="2054044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just make sure it is reproducible by building timsorttest.monkey and point Mark at the repo. There's nothing rude about reporting a build error that is undecipherable. <br><br></td></tr></table><br>
<a name="2054051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep, it's reproducible under v69 on my system.  I've posted a thread on the bug forum, feel free to confirm the results there. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
