<!DOCTYPE html><html lang="en" ><head ><title >Diddy (part 3)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Diddy (part 3)</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Diddy (part 3)</a><br><br>
<a name="2014487"></a>

<a name="2014490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thread continued from <a href="/posts.php?topic=1060" target="_blank">here</a>...<br><br>Original post by <a href="/Account/showuser.php?id=76" target="_blank">therevills</a>:<br><div class="quote"> <br>We've started an open-source code base which adds extra functions to Monkey.<br><br>Currently Diddy (as in Diddy Kong ;)) has the following:<br><br>* New Commands (tested on most platforms, apart from iOS and Mac):<br>- FlushKeys()<br>- RealMillisecs()<br>- ShowMouse()<br>- HideMouse()<br><br>* Screen-based Framework<br>- Move between screens with fading<br> <br></div><br><a href="http://code.google.com/p/diddy/" target="_blank">http://code.google.com/p/diddy/</a><br><br>Last post in previous thread by <a href="/Account/showuser.php?id=347" target="_blank">Nobuyuki</a>:<br><div class="quote"> <br>silly issue: Does a tilemap have to have an .xml extention to be read in by the parser? using a .tmx filename on the wiki example asserts "Tiled Raw XML not supported!" on a supported map, though by changing the same map's extension to .xml it appears to work... <br> <br></div><br><br>Let's see if I've done this right... <br><br></td></tr></table><br>
<a name="2014497"></a>

<a name="2014498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Nobuyuki:<br><div class="quote"> Does a tilemap have to have an .xml extention  <br></div><br>Yes, Monkey will only load  .txt, .xml, .json<br><br>With the "Tiled Raw XML" we actually mean the map data within the xml(tmx) file, because it is so verbose it takes ages to parse. So we only support CSV and base64 ;) <br><br></td></tr></table><br>
<a name="2014544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> game.useFixedRateLogic = True<br><br>Using this stops the app in its tracks... Is this meant to be used, and if so, do I need to set anything else?<br><br>Dabz <br><br></td></tr></table><br>
<a name="2014547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills<br><div class="quote"> Yes, Monkey will only load .txt, .xml, .json<br><br>With the "Tiled Raw XML" we actually mean the map data within the xml(tmx) file, because it is so verbose it takes ages to parse. So we only support CSV and base64 ;)  <br></div><br><br>Thanks for clearing that up.  However, that particular error seems to be thrown even on a valid file with uncompressed base64.  It just does it when specifying (what is apparently) an unsupported file extension.  I was unaware that the extension had to be one of those with LoadString, actually;  I'd just assumed it would attempt to load any file specified as text (!) <br><br></td></tr></table><br>
<a name="2014553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Nobuyuki: I was unaware that the extension had to be one of those with LoadString, actually; <br></div><br>This is a strange limitation of Monkey.  LoadString will only work with those file extensions, regardless of their content. <br><br></td></tr></table><br>
<a name="2014579"></a>

<a name="2014581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> game.useFixedRateLogic = True<br><br>Using this stops the app in its tracks... Is this meant to be used, and if so, do I need to set anything else?<br> <br></div><br><br>Strange... it really should do the opposite (by increasing the logic around 3 times!) ;)<br><br>I've just loaded up the animation example and added game.useFixedRateLogic = True and it works fine...<br><br>[edit]<br>Just been talking to Dabz and he was setting game.useFixedRateLogic = True in the OnCreate method and it totally messes up!! It must be set after creating the game object in Main:<br><pre class=code>
Function Main:Int()
	game = new MyGame()
	game.useFixedRateLogic = True 
	Return 0
End Function
</pre><br>[/edit] <br><br></td></tr></table><br>
<a name="2014582"></a>

<a name="2014583"></a>

<a name="2014584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just had a quick build on Android... And the game comes to a shuddering 0 FPS  when useFixedRateLogic is set to true!!!<br><br>EDIT: Had to reduce game.frameRate from the default 200 to get stuff moving, working okayish set to 60 (With my FPS set to 30)<br><br>Dabz <br><br></td></tr></table><br>
<a name="2014590"></a>

<a name="2014591"></a>

<a name="2014592"></a>

<a name="2014593"></a>

<a name="2014594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm just tested the Animation example with the FRL and its fine for me... what are you doing Dabz!?!?<br><br>I'm changing useFixedRateLogic to a private field and setting a property so you can use it anywhere.<br><br>[edit]<br>Committed the change, if anyone is using the Fixed Rate Logic stuff, just change how you are setting it from:<br><pre class=code>game.useFixedRateLogic = True</pre>to<pre class=code>game.UseFixedRateLogic = True</pre>[/edit] <br><br></td></tr></table><br>
<a name="2014602"></a>

<a name="2014604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Function Main:Int()<br>	game = New MatchGame()<br>	game.useFixedRateLogic = True<br>	game.frameRate = 60<br>	Return 0<br>End Function<br> <br></div><br><br>It ran exactly how I wanted in HTML5 and Flash, but as soon as I put it on Android, at the default 200 updates, it crawled to a halt, and I can only get it motoring on there by adding game.frameRate = 60... Which, is still a bit jerky, and not ideal.<br><br>Dabz <br><br></td></tr></table><br>
<a name="2014608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any chance you can send me your code? <br><br></td></tr></table><br>
<a name="2014609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will do... What I've just found is, that if I manually update the code in a For loop (Naughty I know), and turn FRL off, I get better results on Android!?!<br><br>lol<br><br>Dabz <br><br></td></tr></table><br>
<a name="2014610"></a>

<a name="2014611"></a>

<a name="2014612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll PM you the link over at IndieCodez Therevills me auld bean!<br><br>EDIT: Sent, let me know when you have it and I'll take it down matey<br><br>Dabz <br><br></td></tr></table><br>
<a name="2014613"></a>

<a name="2014614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it Mate... think you need to optimise your ProcessFallingTiles method.<br><br>You are using Lists and EachIn.... everytime you use an EachIn it will create a new object (iterator) and when you are using FRL @ 200Hz it will be doing all these new objects around 3 times per frame which means lots of calls to the GC which in turns slows down the app.<br><br>[edit]<br>Also since you are changing the UpdateRate do it in the Main function, before setting the FRL:<br><br><pre class=code>
Function Main:Int()
	game = New MatchGame()
	game.FPS = 30
	game.UseFixedRateLogic = True
	Return 0
End Function
</pre><br>[/edit] <br><br></td></tr></table><br>
<a name="2014616"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats fair do's, but how come it runs like a git when there's nothing in any of the lists?<br><br>Also, when I update the code three times in a onUpdate() method, it works okay too?<br><br>Dabz <br><br></td></tr></table><br>
<a name="2014617"></a>

<a name="2014618"></a>

<a name="2014619"></a>

<a name="2014620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I see your edit now... Will have a peek<br><br>EDIT: Yep, thats fixed it, cheers for clearing that up me auld bean! :D<br><br>Dabz <br><br></td></tr></table><br>
<a name="2014621"></a>

<a name="2014622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right, I'm pretty content with that now... Will have a tidy of the code me thinks, because I have stupid stuff in there like <b>Local tutherList&lt;CTile&gt; = New List&lt;CTile&gt;</b>! :D<br><br>Dabz <br><br></td></tr></table><br>
<a name="2015233"></a>

<a name="2015236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills Sorry about the late reply. Referring back to <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1060#14395" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=1060#14395</a> What I meant was for that fix is adding a method specifically for overriding that get's called in the OnUpdate function. <br><br></td></tr></table><br>
<a name="2015241"></a>

<a name="2015242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> So something like this:<br><br><pre class=code>
Class DiddyApp Extends App
...
	Method OnUpdate:Int()
		OverrideUpdate() ' &lt;--- New
...
		Return 0
	End

	Method OverrideUpdate:Void()
	End
</pre><br><br>What would you be using this for? <br><br></td></tr></table><br>
<a name="2015240"></a>

<a name="2015430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> One example is I have a music player function. I have it check to see if a song is playing and if it isn't then it plays the next one. I could put it in every screen but this way would be much better. Also, I found what is possibly a problem with your Sprite class.<br>Method MoveForward:Void()<br>	dx = -Sin(rotation) * speed<br>        dy = -Cos(rotation) * speed<br><br>	move()<br>End<br>There is no move function but there is a Move function. <br><br></td></tr></table><br>
<a name="2015439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah Cool... thanks for bug report.<br><br>Commited: Added OverrideUpdate method in DiddyApp and fixed MoveForward <br><br></td></tr></table><br>
<a name="2016340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just found that <i>game.useFixedRateLogic = True</i> sends my game to a 2FPS on my 3GS iPod, its fine on my 4th gen, but, when I remove the above, it rockets along again... Any idea's Mr T?<br><br>From the Main() function at the start:-<br><br><pre class=code>
Function Main:Int()
	game = New MatchGame()
	game.FPS = 30
	game.useFixedRateLogic = True    'Commented out it runs at a steady 30
	Return 0
End Function
</pre><br><br>Dabz <br><br></td></tr></table><br>
<a name="2016335"></a>

<a name="2016336"></a>

<a name="2016380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Dabz,<br><br>Could you try reducing the framerate?<br><br><pre class=code>
Function Main:Int()
	game = New MatchGame()
	game.FPS = 30
	game.frameRate = 100 ' &lt;--- CHANGE THIS (default is 200)
	game.UseFixedRateLogic = True    'Commented out it runs at a steady 30
	Return 0
End Function
</pre><br><br>Also I wonder if it is the calls to Millisecs: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1719" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=1719</a> <br><br></td></tr></table><br>
<a name="2016385"></a>

<a name="2016386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried Steve, same again... 2FPS still!<br><br>EDIT: Just lowered that to 30 and now its running at 17-20 FPS, but obviously slows everything right down as I'm generally moving stuff 1 or 2 pixels.<br><br>Dabz <br><br></td></tr></table><br>
<a name="2016391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh yeah, work-in-progress particle system is checked in.  Editor forthcoming, hopefully. <br><br></td></tr></table><br>
<a name="2016394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Top work Samah, and very timely! :)<br><br>I was just going to start my own lastnight, but was a bit knackered and put it off till today, though and behold I have a look to see if Steve had been in and voila, you posted exactly what I was after (The particle system)! :D<br><br>Its gonna be a good day today me thinks! :)<br><br>Dabz <br><br></td></tr></table><br>
<a name="2016393"></a>

<a name="2016395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Erm, just little question, when I emit a particle, like so:-<br><br><pre class=code>
If MouseHit(MOUSE_LEFT)
	e.EmitAt(5, game.mouseX,game.mouseY)
Endif 
</pre><br><br>How come the particle is emitted on the opposite side of game area on the Y-axis, as in, if I click at the bottom, the particle appears at the top, and vice versa?<br><br>Dabz <br><br></td></tr></table><br>
<a name="2016396"></a>

<a name="2016397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Dabz: How come the particle is emitted on the opposite side of game area on the Y-axis, as in, if I click at the bottom, the particle appears at the top, and vice versa? <br></div><br>Because it's using "real" coordinates, where 0,0 is the bottom left corner, and the Y axis points up.  You'll need to do:<br><pre class=code>If MouseHit(MOUSE_LEFT)
  e.EmitAt(5, game.mouseX, SCREEN_HEIGHT - game.mouseY)
EndIf</pre> <br><br></td></tr></table><br>
<a name="2016411"></a>

<a name="2016412"></a>

<a name="2016413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why'd you use "real" coordinates? Monkey works top left by default...<br><br>Heres the link for the demo for the system Samah has created:<br><a href="http://www.therevillsgames.com/monkey/diddypsystem/MonkeyGame.html" target="_blank">http://www.therevillsgames.com/monkey/diddypsystem/MonkeyGame.html</a><br><br>(use Chrome ;)) <br><br></td></tr></table><br>
<a name="2016419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @therevills: Why'd you use "real" coordinates? Monkey works top left by default... <br></div><br>Because trigonometry works the other way.  I'm not changing the laws of mathematics.  If you want positive Y to point down, go change ParticleGroup.Render() and remove all of the "SCREEN_HEIGHT -" references, and invert all your forces (ie. positive Y for gravity).<br>If there's enough call for it I'll put in a flag or something, but I'd rather people just do it the "right" way. :)<br><br><div class="quote"> @therevills: (use Chrome ;)) <br></div><br>Yes, Firefox is pretty laggy with the rendering.... :) <br><br></td></tr></table><br>
<a name="2016418"></a>

<a name="2016420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updated particle system and the example to show off point forces.<br>Forces currently perform calculations twice (once for each of X and Y) due to Monkey's lack of "out" parameters or multiple return values.  I'll fix this soonish. <br><br></td></tr></table><br>
<a name="2016421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Because trigonometry works the other way."<br><br>Not if you look from the back of the screen upside down ;-D <br><br></td></tr></table><br>
<a name="2016428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Libgdx works like that (To be fair though, ALL of its drawing is from bottom-left), but, to be honest, it would of been nice to follow monkeys coordinate system, instead of adding all the extra over head of you turning it around only for me to turn it back, doesnt make sense to be honest, regardless of how mathematically correct it may be...  never mind though, still a top job! ;)<br><br>Dabz <br><br></td></tr></table><br>
<a name="2016427"></a>

<a name="2016426"></a>

<a name="2016440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I dont think it makes sense either... <br><br><div class="quote"> but I'd rather people just do it the "right" way. :) <br></div><br>Monkey works top-left, so anything we do should work the same.<br><br>[edit]<br>Just added useMonkeyCoords variable (UseMonkeyCoords Property) - true by default...<br>[/edit] <br><br></td></tr></table><br>
<a name="2016437"></a>

<a name="2016438"></a>

<a name="2016441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> The "right way" is top left for far more than monkey.  Screen coordinates have historically been the same as device coordinates. computers and phones are top left. <br><br></td></tr></table><br>
<a name="2016442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you had a peek at my fixed rate malarcky, I've been going over it tonight and cannot get it to graft at all, though, Dave picked up on:-<br><br><pre class=code>
For local i:Int = 1 to Floor(numTicks)
	Update(1)
Next
</pre><br><br>Where Floor can sometimes return less then 1, which is a bit odd in respect to <b>For i = 1 to 0</b>(Or isnt, I dunno, it still works)... <br><br>I've been playing with different timing stuff in iOS, totally confusing meself with them to be honest, I'm getting the impression that the way Millisecs() is being handled is the common way after plenty of Googling, so I doubt its that.<br><br>I dunno, its a poser! :D<br><br>Dabz <br><br></td></tr></table><br>
<a name="2016443"></a>

<a name="2016444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're all a bunch of loonies!<br>Fine, changed permanently.<br><br>Edit: A side effect of this is that angles are now inverted. PI/2 radians (90 degrees) now points down rather than up.  No, I'm not changing it. <br><br></td></tr></table><br>
<a name="2016459"></a>

<a name="2016460"></a>

<a name="2016461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>You're all a bunch of loonies!<br> <br></div><br><br>How?<br><br>Just because we have to work in Mojo's "wrong" coordinate system, and thus, apply our logic to it, doesnt make me a loon, its just me not wanting to faff on (Which is the whole point in using a framework like this)<br><br><div class="quote"> <br>PI/2 radians (90 degrees) now points down rather than up. No, I'm not changing it. <br> <br></div><br><br>Likewise, if this is wrong in respect of mojo's rotation, then its unfamiliar to people, becomes disjointed with the rest of the system and not as fluid to work with.<br><br>If thats the plan, then fair do's, if it were me, I'd change it, but, its not my module so anything I say in respect to this is waffle, unless of course, you agree, but I get the impression you won't! :D Hehehe<br><br>Dabz <br><br></td></tr></table><br>
<a name="2016470"></a>

<a name="2016471"></a>

<a name="2016472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Urgh it's just such a hassle &gt;_&lt;<br>It's bad enough that rotation is different to Blitzmax (ie. it's "correct" now).<br><br>Yeah alright, I'll think about changing it.  It's just that it'll mess up a lot of things in a lot of places if I'm not careful.  It also becomes a problem if the developer decides to do their own trigonometry with the particle system.<br><br>I'm standing firm on radians though.  Once you're used to them, they make much more sense than an arbitrary number (360).  For anyone having problems understanding them, check out this wikipedia image showing the relationship between PI and circumference.  It really helped me when I first started working with them.<br>http://en.wikipedia.org/wiki/File:2pi-unrolled.gif<br><br>PS: Monkey forum formatting codes are fail. <br><br></td></tr></table><br>
<a name="2016466"></a>

<a name="2016467"></a>

<a name="2016468"></a>

<a name="2016469"></a>

<a name="2016462"></a>

<a name="2016463"></a>

<a name="2016464"></a>

<a name="2016465"></a>

<a name="2016481"></a>

<a name="2016482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I'm standing firm on radians though.<br> <br></div><br><br>Well, I suppose I've got my way twice now and don't want to push it! ;)<br><br>EDIT: But, you could still overload some methods that takes an Int as degrees instead of a float/double, and just quickly convert it... Then, noone would see the difference would they! :)<br><br>*Dabz reaches for his tin hat* :D<br><br>Dabz <br><br></td></tr></table><br>
<a name="2016478"></a>

<a name="2016485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> I prefer degrees myself: they are simple easier to work with, and you don't need to use constants so much (you can write 45 instead of PI/4).<br><br>As for the trig, most libraries in my experience use the standard coordinates.  One can simply visualise the transformation to Y=Down coordinates by imagining one's laptop screen is in the down position!<br><br>But really it doesn't matter all that much in practice... if stuff turns around the wrong way you just need to switch between a plus and a minus somewhere... <br><br></td></tr></table><br>
<a name="2016499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> EDIT: But, you could still overload some methods that takes an Int as degrees instead of a float/double, and just quickly convert it... Then, noone would see the difference would they! :) <br></div><br>It appears everyone hated mathematics at school... :)<br>What I might do then is change radians to degrees, but add an extra method for radians.  This would be more in line with Monkey's Sinr/Cosr/etc. functions.  Internally they'll still be radians.  This is the beauty of properties! :D<br><br>Also stop making me change things when I'm trying to work on features! ;) <br><br></td></tr></table><br>
<a name="2016533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Samah, sorry I couldnt reply earlier, been to Manchester for the weekend... anyway, that's champion that is... Top stuff! <img src="http://www.energeticforum.com/images/smilies/thumbsup.gif"><br><br><div class="quote"> <br>Also stop making me change things when I'm trying to work on features!<br> <br></div><br><br>Ah, but the thing is see, now you've changed it, you neednt do it later, which in respect, I will now let you carry on in peace! ;) Hehehe<br><br>Dabz <br><br></td></tr></table><br>
<a name="2016539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, note to self: never divide by zero.  Particle systems do strange things... <br><br></td></tr></table><br>
<a name="2016565"></a>

<a name="2016566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just managed to replace the existing Diddy particle system with the new one in me game... Set a level that just had two different types of tiles, then swapped two and watched it go berserk, particles flying everywhere... and it didnt batter an eyelid! :D<br><br>I love it! :)<br><br>Dabz <br><br></td></tr></table><br>
<a name="2016586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Dabz: ...and it didnt batter an eyelid! :D <br></div><br>Well I've tried to optimise the Update method as much as possible using parallel arrays, indexed with a pseudo-pointer hack.  Rendering is still the bottleneck (on HTML5 and Android that is), but it's always going to be that way with that number of DrawImage calls.<br><br>Currently working on the emitter editor (using wxMax), but I fail utterly at user-friendly GUI design.  We'll see how I go... ;)<br><br>Edit: Just checked in the degrees stuff.  You can add "Radians" to most angle-based properties if you wish to access it directly in radians. <br><br></td></tr></table><br>
<a name="2016580"></a>

<a name="2016589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lovely jubly! :)<br><br><div class="quote"> <br>Currently working on the emitter editor (using wxMax)<br> <br></div><br><br>Looking forward to seeing it, at the minute, I've just been faffing with numbers, which is a bore, but, if I have levers to play with, I might get better results, so, I'm very keen to see this! :)<br><br>Dabz<br><br>P.S. Its a good job you don't charge by the hour, I'd owe you and Steve a fortune! :D Hehehe <br><br></td></tr></table><br>
<a name="2016657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just checked in an update to allow you to read emitters/groups/forces from XML.  It's a very simple format at the moment, and not finalised.  The editor will eventually generate this for you.  Just look at the example and follow from there.  You can put pretty much any property as an attribute and it'll read it in.<br><br>For now, images and death emitter settings will still need to be done in code.  You can grab a reference to any of the XML-defined groups/emitters/forces by name.<br><br>I've also added some "magic" properties as helpers for all the colour stuff.  For example, setting the "Red" property will automatically disable all interpolation for red, assuming you want to use a static value.  This means that the order of the attributes in the XML is important, since using the magic properties may override others.<br><br>I'm considering adding HSL/HSV support too so that you can fade between hues, etc. <br><br></td></tr></table><br>
<a name="2016656"></a>

<a name="2016658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cor, getting snazzier by the day! :)<br><br>Dabz <br><br></td></tr></table><br>
<a name="2016677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added Hue/Saturation/Brightness support, and updated the sample XML file to interpolate by hue (nice rainbow colours!) <br><br></td></tr></table><br>
<a name="2016700"></a>

<a name="2016701"></a>

<a name="2016702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Help appreciated for the tile system in Diddy..<br>I want to access the data about each tile's x and y position,<br>to create physical box2d bodies at their position.<br>I got so far that they are stored in TileMapObjectLayer,<br>but in line 92 in tile.monkey the TileMapObjectLayer<br>is suddenly a TileMapLayer.<br><pre class=code>Local layer:TileMapLayer = ReadObjectLayer(mapchild) </pre>I'm lost. <br><br></td></tr></table><br>
<a name="2016706"></a>

<a name="2016707"></a>

<a name="2016708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> That should probably be defined as a TileMapObjectLayer, but it doesn't really matter.<br><br>To get all the objects in the map, you can do this:<br><pre class=code>For Local obj:TileMapObject = EachIn tilemap.GetAllObjects()
  ' do something with obj
Next</pre><br>Note that the code for that method has been commented out for a while (my bad, sorry), but I've implemented it and checked it in.  Make sure you have the latest version of Diddy from subversion (or at least the latest version of tile.monkey). <br><br></td></tr></table><br>
<a name="2016757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Samah, can you test the GetAllObjects() please?<br>It always returns an ArrayList of size 0, although my tilemap.layers.size is 2 and my tiles are beeing drawn.<br>Looks like TileMapObjectLayer(layer) is always Null.<br>My Diddy is newest one from repository. <br><br></td></tr></table><br>
<a name="2016781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> GetAllObjects() returns an ArrayList containing all the <b>objects</b> in the map, not the tile cells.  If you don't have any object layers (which are different to tile layers), then you won't get any objects.<br><br>If you're basing your box2d bodies on actual cells in a tile layer, you'll have to loop through manually or make your own cell class.<br><br><pre class=code>Class MyCell Extends TileMapCell
  Field box2dbody ' I can't remember the class for a b2d body

  Method New(gid:Int, x:Int, y:Int)
    Super.New(gid, x, y)
  End
End</pre><br><br>Your map class:<br><pre class=code>Class MyMap Extends TileMap
  Method CreateCell:TileMapCell(gid:Int, x:Int, y:Int)
    Return New MyCell(gid, x, y)
  End
End</pre><br><br>Your reader class:<br><pre class=code>Class MyReader Extends TiledTileMapReader
  Method CreateMap:TileMap()
    Return New MyMap
  End
End</pre><br><br>Then when you build up your box2d bodies, you can do this:<br><pre class=code>Method BuildBodies:Void()
  For Local layer:TileMapLayer = EachIn tilemap.layers
    If TileMapTileLayer(layer) &lt;&gt; Null Then
      For Local cell:TileMapCell = EachIn TileMapTileLayer(layer).mapData.cells
        If MyCell(cell) &lt;&gt; Null Then
          Local mc:MyCell = MyCell(cell)
          ' now you can use mc.x, mc.y, and mc.gid to build a body
          mc.box2dbody = ' the new body
        End
      Next
    End
  Next
End</pre><br><br>If you like I can make a "GetAllCells" method.  You'll still need to subclass the cell if you want to store per-cell info. <br><br></td></tr></table><br>
<a name="2016780"></a>

<a name="2016779"></a>

<a name="2016790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot Samah, got it working! <br><br></td></tr></table><br>
<a name="2017107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another problem, diddy looks for a different font than what mojo includes by default. Please change the default. <br><br></td></tr></table><br>
<a name="2017113"></a>

<a name="2017114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> diddy looks for a different font than what mojo includes by default. <br></div><br><br>Eh!? Where? What? <br><br></td></tr></table><br>
<a name="2017118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're talking about the GUI, it's because it needs the glyph sizes and offsets in the XML. <br><br></td></tr></table><br>
<a name="2017120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah... of course the GUI uses a different font... why would you use the "default" font in any game apart from debugging?!!? Its not even using an alpha background.... <br><br></td></tr></table><br>
<a name="2017203"></a>

<a name="2017204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Currently taking enhancement requests for the particle system.  Add them to the issue tracker on the Diddy project, using the "Enhancement request" template.<br><a href="http://code.google.com/p/diddy/issues/entry?template=Enhancement%20request" target="_blank">http://code.google.com/p/diddy/issues/entry?template=Enhancement%20request</a> <br><br></td></tr></table><br>
<a name="2017290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You are using Lists and EachIn.... everytime you use an EachIn it will create a new object (iterator) <br></div> <br><br>What is the workaround?<br>I'm storing my objects in ArrayLists and use the enumerator to call update(),<br>which invites the gc to collect some garbage.. <br><br></td></tr></table><br>
<a name="2017295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What is the workaround? <br></div><br>You can either manually iterate through it, or cache the Enumerator.<br><pre class=code>For Local i:Int = 0 Until list.Size
  Local foo := list.Get(i)
  ' do stuff with foo
Next</pre><br>Or<br><pre class=code>Local enum:AbstractEnumerator&lt;SomeClass&gt; = list.Enumerator()
' cache enum somewhere
enum.Reset()
While enum.HasNext()
  Local foo := enum.NextObject()
  ' do stuff with foo
End</pre><br>Calling Reset() is the same as calling First() and updating the concurrency semaphore.  If you cache the enumerator you need to call Reset() at the start of each loop.<br>Note that I may be changing the "Abstract" part of the collection class names to "I".  AbstractEnumerator is just too bloody long. :) <br><br></td></tr></table><br>
<a name="2017294"></a>

<a name="2017395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheRedFox</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am looking at inputcache.monkey so that I can leverage its features for my own on screen numeric keypad in iOS.<br><br>What do you think would be the best way to change the calls to keyhit and keydown (around line 390)? Or should I just forget about that and use the screen.OnTouchHit(x, y, pointer)callbacks and do everything at a higher level? <br><br></td></tr></table><br>
<a name="2017417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have your own KeyHit and KeyDown functions that are automatically plugged into your onscreen keyboard, change inputcache.monkey.  Otherwise I would stick with the event-based callback and just match the location of each touch to your keyboard. <br><br></td></tr></table><br>
<a name="2017423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheRedFox</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Samah. I like the keyboard handling in inputcache.monkey BTW. Diddy contains lots of interesting gems. <br><br></td></tr></table><br>
<a name="2017483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> I read you are searching enhancement ideas for the particles engine ?<br>I found this today, share the love :)<br><br><a href="http://flintparticles.org/" target="_blank">http://flintparticles.org/</a><br><br>The one from HGE is old but also quite good :<br><a href="http://hge.relishgames.com/" target="_blank">http://hge.relishgames.com/</a><br><br>I cannot submit on the issue tracker strangely ?!? <br><br></td></tr></table><br>
<a name="2017591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh that's some pretty cool stuff in those engines.  I'm still torn with what language/platform to use for the editor.  I'd like to use wxMax, because then it can run as a standalone exe.  Or... I could be cheap and just use Swing or SWT. :)<br><br>Edit: A note for those currently using HSB in the particle system:<br>After reading this <a href="http://www.codeproject.com/KB/recipes/colorspace1.aspx" target="_blank">http://www.codeproject.com/KB/recipes/colorspace1.aspx</a> I've decided to change the range for hue from 0-1 to 0-360.  I've also fixed some bugs with the initial interpolation clamping.  I'll check it in later. <br><br></td></tr></table><br>
<a name="2017505"></a>

<a name="2017633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've had problems with using diddy with the target platform of glfw. It seems that glfw likes absolute paths when loading stuff and so when trying to use the gui framework it doesn't want to load stuff. <br><br></td></tr></table><br>
<a name="2017635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strange... I can load up the example GUI stuff which doesnt use absolute paths and it works fine on all targets (including GLFW).<br><br>Can you post an example which shows this issue with GLFW? <br><br></td></tr></table><br>
<a name="2017658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> I changed my mind about the 0-360 range for hue.  Instead, I converted it all to HSL.  I think HSL is more useful (and supposedly "better") than HSB, especially since the default Windows colour dialog has HSL.<br>Committed as r305. <br><br></td></tr></table><br>
<a name="2017693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> therevills, when using the function LoadSkin() it does it. I'm doing this on a mac btw. I did a test where I had it output what it's trying to load and it only gave the relative path. It's the same issue with os.LoadString. That's probably why. Try importing the os package and see if you get the error. I should have specified that. <br><br></td></tr></table><br>
<a name="2018135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheRedFox</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've implemented the particle system of Diddy in a ParticleEffects class so that I can use its Render and Update methods based on the effect I need inside Screen's Render and Update.<br><br>Thing is that I would like to reset the particle system to its original state (no particles showing, all lives to zero etc).<br><br>Is there a clean way to do that in the existing psystem or do I have to roll my own?<br><br>Using RemoveParticle in a loop is maybe not the best way.<br><br>(I am loading the conf from an XML)<br><br>Other than that, yet another superb area of Diddy. <br><br></td></tr></table><br>
<a name="2018149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Technically, you only need to set the particle count to zero.  Once the particle system tries to create a particle it will simply clear out the values for the elements pointed to by the main pointer array.  No real need to manually clear out the arrays either since all but one of them are primitives.<br>If you want I can make a method that will reset the pointers to be sequential and clear out all the fields.  Personally I think that just resetting the particle count is good enough.  It's a read-only property though, so there'll need to be a Clear method for it.<br><br>In the meantime, add this to ParticleGroup:<br><pre class=code>Method Clear:Void()
  aliveParticles = 0
End</pre><br><br>That should be all you need. ;) <br><br></td></tr></table><br>
<a name="2018164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheRedFox</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool! Thanks Samah.<br><br>There is something I have noticed since I draw a small number of rather large particles (a set of big stars popping out of the bottom of the screen for when a good answer is provided - They do not move that fast either):<br><br>Particles that are emitted get drawn in front of the other ones where it would be much nicer to have them drawn behind the existing ones.<br><br>I guess that this has to do with the arrays and pseudo pointers stuff. Is there a way to get this behavior?<br><br>Going for the Clear() now :-) <br><br></td></tr></table><br>
<a name="2018165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheRedFox</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just noticed the ResetParticles in the ParticleGroup. Shame on me. <br><br></td></tr></table><br>
<a name="2018195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I guess that this has to do with the arrays and pseudo pointers stuff. <br></div><br>Correct.  Unfortunately there's not a lot you can do.  I might be able to hack together some kind of z-order thing for rendering if you like, but I'd probably make it optional just in case it affects the update speed.<br><br><div class="quote"> Just noticed the ResetParticles in the ParticleGroup. Shame on me. <br></div><br>That's alright, I totally forgot I'd even added that... XD <br><br></td></tr></table><br>
<a name="2018230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheRedFox</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, it would be great indeed.<br><br>Once I'll be done with my current app, I plan to write a set of explanations on how to use all of those bits of Diddy, since even with the supercool samples of yours, it takes a while to put everythhing together properly.<br><br>Diddy's been a huge timesaver for sure! Thanks again for making it available. <br><br></td></tr></table><br>
<a name="2018251"></a>

<a name="2018252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are there plans to incoporate Autofit ( <a href="http://monkeycoder.co.nz/Community/posts.php?topic=1500" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=1500</a>  ) into diddy, as it already does Virtual resolution?<br><br>I'm trying to decide the best route for multiplatform black borders, aspectlocked fit scale and such. <br><br></td></tr></table><br>
<a name="2018265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been meaning to add aspect ratio to the virtual resolution stuff to Diddy, but just haven't got round to it... and at the moment I am in the middle of a project not using Monkey... <br><br></td></tr></table><br>
<a name="2018279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do feel free to rip from AutoFit if it's any use. <br><br></td></tr></table><br>
<a name="2018282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Be aware that using the scissor buffer will most likely break Diddy's GUI.  SetScissor does not use the matrix stack, so I had to keep my own stack of scissor rectangles.  When it's finished rendering the GUI, it resets it to 0,0,width,height.<br><br>Perhaps Mark could add an internal scissor stack and link it to Push/PopMatrix... <br><br></td></tr></table><br>
<a name="2018634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added aspect ratio to Diddy using James' code :)<br><br>To use:<br>SetScreenSize(width, height, useAspectRatio)<br>eg:<br>SetScreenSize(640,480, True)<br><br>useAspectRatio is set to False by default, so it will graphics stretch across the screen if you don't set it to true. <br><br></td></tr></table><br>
<a name="2018700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> therevills: Sorry to go back and change the topic a bit... you said that using Lists and Eachin is slow as it creates a new iterator object each time... what would be a better approach?<br><br>I use lists and eachin all over the place.... I would love to know how to improve on this :)<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2018703"></a>

<a name="2018704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> NoOdle: I've spoken with Mark about some theoretical changes in the way ObjectEnumerator works.  If it goes ahead, I can add enumerator pooling to ArrayList.  This means that EachIn will reuse the same enumerator instance, having no GC overhead.<br><br>Stay tuned... ;)<br><br>Edit: In the meantime, just use it in an indexed fashion:<br><pre class=code>Local mylist:ArrayList&lt;Foo&gt;
...
For Local i:Int = 0 Until mylist.Size
  Local f:Foo = mylist.Get(i)
  ' do something with f
Next</pre> <br><br></td></tr></table><br>
<a name="2018705"></a>

<a name="2018706"></a>

<a name="2018707"></a>

<a name="2018708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the quick response Samah! Is ArrayList a part of Diddy?<br><br>[edit] found it in Diddy collections, I might have to use this. Looks handy <br><br></td></tr></table><br>
<a name="2018718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was looking through the diddy source code and noticed your assert functions. Is there a reason why you opted to create a huge list of functions when you can do the same with one? I only ask as my mind is curious. Wondered if there was a speed gain.<br><br><pre class=code>

local testObject = Null

Assert(( testObject = Null ), "testObject is Null" )

Function Assert( statement : Bool, message : String )
	If statement = True
		Print (message)
		Error (message)
	Endif
End Function
</pre> <br><br></td></tr></table><br>
<a name="2018723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> It reads cleaner if you keep the boolean logic out of your procedure.  Also the point of an assert is that you're assuming something to be true.  Technically your Assert function should be checking "If Not statement" or "If statement = False".<br><br>This naming format is common in a lot of assertion libraries for other languages, too. <br><br></td></tr></table><br>
<a name="2018725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yea I wasn't sure which way round to have it, just threw it together as quick test. I think I will stick with my one function as personally its a lot easier to remember; my brain is like a sieve! <br><br></td></tr></table><br>
<a name="2018728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thread's getting a bit unwieldy so new one is <a href="/posts.php?topic=1964" target="_blank">here</a>... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
