<!DOCTYPE html><html lang="en" ><head ><title >Best way to deal with offsets in texture atlases?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Best way to deal with offsets in texture atlases?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Best way to deal with offsets in texture atlases?</a><br><br>
<a name="2093011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, I'm using TexturePacker to make texture atlases and it has a trim function that can drastically reduce the overall sprite sheet size.<br><br>The texture atlas will have recorded offset x and y to tell me how much is trimmed off sprite.<br><br>So I'm wondering what the best way to handle drawing an image that I've grabbed from the sprite sheet. <br><br>I could:<br><br>a) Modify the handle of the image with the offset so that when I draw at x,y it's the same as if I drew the untrimmed image.  I often midhandle my sprites (and rotate around that point) so would need to make sure that still works (any ideas how to use the offset correctly for midhandled sprites?) Sometimes though I just use a handle of 0,0 so I'm guessing I'd set the handle to be negative based on the offset.  Sometimes I use a handle somewhere in the sprite so I'm guessing I subtract the offset from that handle? ... Phew, I think that's it.<br><br>b) record the offset x,y along with each image and adjust the drawing x,y accordingly when I draw them.<br><br>Seems like a) is probably the best way as it's using existing internal stuff rather than adding complexity. <br><br></td></tr></table><br>
<a name="2093010"></a>

<a name="2093009"></a>

<a name="2093008"></a>

<a name="2093014"></a>

<a name="2093015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would go for A. <br><br></td></tr></table><br>
<a name="2093020"></a>

<a name="2093021"></a>

<a name="2093022"></a>

<a name="2093023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Option A) Set the image handle before rendering the sprite with DrawImageRect.<br>Store sprite animation frames in an array. This can double up for use in a collision detection routine.<br>atlasimage.SetHandle(sourceX+offsetX, sourceY+offsetY)<br>DrawImage(atlasimage, posX, posY, spritesourceX[frame], spritesourceY[frame], spritesourceWidth[frame], spritesourceHeight[frame])<br><br>Edit: You may be able to handle rotated sources with the over loaded version of DrawImageRect. If not try pushing the matrix translating to the posX, posY, rotating the matrix. <br><br></td></tr></table><br>
<a name="2093019"></a>

<a name="2093031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK thx.  Heads up that the libGDX format in TexturePacker is bugged. The offset values are sometimes out by a couple of pixels.  Switching to xml format which seems to be correct. Sigh. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
