<!DOCTYPE html><html lang="en" ><head ><title >Frustum/view rectangle culling with quadtrees</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Frustum/view rectangle culling with quadtrees</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Frustum/view rectangle culling with quadtrees</a><br><br>
<a name="2080185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>Has anyone done anything like this for their Monkey game yet?  I've been putting off doing this for a while, but for games with large levels, it may be unavoidable.  I've been looking into culling of objects to reduce the number of polls I need to do for subobjects' AI inside a viewing rectangle by sorting the objects into a quadtree or some other sorted structure that I can traverse and exit early when the objects are outside the view rectangle.  <br><br>It seems that it would help for me to understand how to go about doing this if there was already a quadtree implementation for monkey in widespread use, but a cursory glance at the forums doesn't seem that anyone has made one that handles the specific situation I'm stuck with.  Does anyone have any experience in this area?  Specifically, I'm looking to partition a map based on rectangles in it, not points, specifically, so maybe quadtrees wouldn't be the perfect solution for this.....  (Maybe some sort of R-Tree?!) <br><br></td></tr></table><br>
<a name="2080193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm in the process of making an Octree for miniB3D, but i've also made a primitive "grid-tree" for a tower defense game:  simply dividing a map into a grid and managing the objects that go in and out of each area. it definitely helped with the firing AI. Box2D also uses some type of tree.<br><br>for the Octree, i broke it into two classes: the main tree and the nodes. calls to the nodes are recursive which makes splitting/balancing easier. <br>i can send you my in-progress Octree code, but there are still bugs in it. <br><br></td></tr></table><br>
<a name="2080196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can wait!  In the meantime, it's on my list of things to look into.... <br><br></td></tr></table><br>
<a name="2080203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> By "view rectangle" are you referring to the camera view or some concept of AI entity view area? If you're just doing it for the camera then managing a space partition tree for moving objects may well be less efficient than doing the simple thing of testing each one that moves (or all if the camera moves) against the camera view area. If you have a load of static objects then a simple grid partition for those will likely get you where you need to be.<br><br>If you are looking for something to enable testing against lots of AI awareness areas then Box2D has a pretty fancy spacial partitioning system that you can wire into that will give you what you need. Using that without also using it for collisions (not necessarily with physics responses) might be a bit of a waste though. <br><br></td></tr></table><br>
<a name="2080202"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
