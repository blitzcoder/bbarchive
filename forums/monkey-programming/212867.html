<!DOCTYPE html><html lang="en" ><head ><title >Simple tile collisions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Simple tile collisions</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Simple tile collisions</a><br><br>
<a name="2126871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >elite_dtn</td><td align="right"><font class=tiny>(Posted March)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondering what the easiest way of having tile collisions for my game is, i have a level class i think the collision code will go in here but not really sure how to address this. <br><br></td></tr></table><br>
<a name="2126874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted March)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are many ways to do it. Study existing examples to understand the different ways and find best way to do it for your project.<br><br><a href="https://github.com/swoolcock/diddy/blob/develop/src/diddy/tile/renderer.monkey" target="_blank">https://github.com/swoolcock/diddy/blob/develop/src/diddy/tile/renderer.monkey</a> <br><br></td></tr></table><br>
<a name="2126886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >elite_dtn</td><td align="right"><font class=tiny>(Posted March)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are there any simple ones that dont use any other frame works just the simple Monkey X? <br><br></td></tr></table><br>
<a name="2126890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted March)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> A lot depends on how fancy the collisions need to be.  Will a circular or rectangular hit-box be enough?  In this case it's easy to roll your own, assuming there aren't so many collisions that you need to use quad trees and such like. <br><br>If you want per-pixel collisions, it's a bit more complicated (still doable of course).  But you can start with a rectangular hit-box and implement per-pixel later as a second, more accurate stage. <br><br></td></tr></table><br>
<a name="2126891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >elite_dtn</td><td align="right"><font class=tiny>(Posted March)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> A rectangular hit box would be fine for the purpose, it is a platform game so when the player collides with a platform tile it holds the character. I also have a lava tile so it will need to end the level if a collision occurs. <br><br></td></tr></table><br>
<a name="2126892"></a>

<a name="2126893"></a>

<a name="2126894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted March)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your logic with regard to how to handle collisions will probably be more complex than the collisions themselves.  For example, you may want to be able to jump up through tiles, but land when you fall onto them.  And note that if your character is walking on a platform, he is NOT colliding with it.  You have to determine whether he would collide if he fell a little bit, and not fall if so.  For example, he might always fall a small distance at every update, and if he turns out to be intersecting a tile he goes up again the same distance.  And if the tile was lava he dies.<br><br>Code for rectangle intersections could look like the following (your class might have an explicit rectangle object for a hitbox, or it might just have the same data as class fields):<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function DoRectanglesIntersect:Bool( rect1:Rect, rect2:Rect )
	If rect1.left &gt;= rect2.left + rect2.width Then Return False
	If rect1.left + rect1.width &lt;= rect2.left Then Return False
	If rect1.top + rect1.height &lt;= rect2.top Then Return False
	If rect1.top &gt;= rect2.top + rect2.height Then Return False
	Return True
End
</textarea><br><br>The first line says, if the left of rectangle 1 is further right than the right of rectangle 2, there's no collision.  The other three cover the three other sides of each rectangle.  If you draw it on paper, you'll see that if none of the four conditions are true, then the rectangles must intersect.<br><br>Now if there are many platform tiles, you'll want to be efficient, and you might not have full rect data stored for each tile if they are all the same size.  You might get tile rectangle data directly from the logical coordinates of the tile.  And you don't want to be creating lots of objects each frame.  You might start with the character position and find the nine nearest tiles and just test those.  But those are implementation details - the math will be the same.  It's all a matter of building things up step by step. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
