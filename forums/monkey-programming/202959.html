<!DOCTYPE html><html lang="en" ><head ><title >need repeat(x,char) function to build a string</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >need repeat(x,char) function to build a string</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >need repeat(x,char) function to build a string</a><br><br>
<a name="2030062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want to create a string of '*' that is the same length as another string (to cover a password). What's the best way to do that? <br><br></td></tr></table><br>
<a name="2030067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Create an integer array of value "*"[0] and then call to String.Frombytes function.<br>[monkeycode]Function Main()<br>	Print "Chain of 10: " + Chain(10)<br>End<br><br>Function Chain:String(Num:Int)<br>	Local ints:=New Int[Num]<br>	For Local i=0 until ints.Length<br>		ints[i] = "*"[0]  'Believe it or not, "*"[0] is an integer.<br>	Next<br>	Return String.FromChars(ints)<br>End[/monkeycode] <br><br></td></tr></table><br>
<a name="2030063"></a>

<a name="2030064"></a>

<a name="2030065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll post the solution I created before ziggy responded... :-)<br><br><pre class=code>
Function pwstring:String(pw:String)
	Local c:String = ""
	Local i:Int = pw.Length()
	For Local t:Int = 1 to i
		c = c + "*"
	Next
	Return c
End

'called like
cPW1 = pwstring( myString ) ' returns a string of '*' with length of myString
cPW2 = pwstring( "howdy" ) ' returns '*****'
</pre><br><br>ziggy, can you explain your code? The reasoning, etc... Thank you! :-) <br><br></td></tr></table><br>
<a name="2030066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not bad, but in your implementation, you're creating a new string at every For loop, and this will have a deep performance impact on long strings. <br><br></td></tr></table><br>
<a name="2030081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where's the new string getting created? <br><br></td></tr></table><br>
<a name="2030084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> In your for loop.<br>[monkeycode]c = c + "*"[/monkeycode]<br>Returns a new string every time. <br><br></td></tr></table><br>
<a name="2030596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ziggy, can you explain your code? The reasoning, etc... Thank you! :-) <br></div><br>Yes: A string is  just an array of integers, where every integer represents a char, so, in order to avoid creating a new string on every loop iteration (wich is very CPU intensive) I thought it would be a good idea to have a single-time mem allocation of the space required for the new string, and just modify each character (without allocating additional datal, or adding work to do to the garbage collector.<br><br>The explanation;<br><br>This is just the function declaration<br>[monkeycode]Function Chain:String(Num:Int)[/monkeycode]<br>Now, we make an <strike>string</strike>   integer array with as many elements as char we want to repesent:<br>[monkeycode]         Local ints:=New Int[Num][/monkeycode]<br>Then we set a loop in order to initialize each array element:<br>[monkeycode]         For Local i=0 until ints.Length[/monkeycode]<br>In each loop operation, we set the corresponding item in the integer array with its character number. When you add [0] to any string, you get the integer numerical representation of the first character of the string, so doing "*"[0] just get converted in compile time to the integer value that represents the * character.<br>[monkeycode]                 ints[i] = "*"[0]  'Believe it or not, "*"[0] is an integer.<br>         Next[/monkeycode]<br>Then, all we have to do is read this array as a string, and return it. this may "create" the string object as Monkey does not allow you to directly return the same integer array as an string, even when they're internally the same. There must be a good reason for this... ?<br>[monkeycode]         Return String.FromChars(ints)<br> End[/monkeycode]<br>Just hope it's useful to any newbie. <br><br></td></tr></table><br>
<a name="2030595"></a>

<a name="2030621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> On the other hand, if you're covering a password you're on user interface time, and efficiency doesn't matter. <br><br></td></tr></table><br>
<a name="2030680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, it depends on how many function calls there are. In fact, when using a not strong typed target such as JavaScript or ActionScript, the pre-allocation of the string does not avoid a final concatenation calculation on the String.FromChars function, due to the limits of the target languages (I've tried alternative implementations for the FromChars method on JavaScript, with no better results). So, in this particular situation your implementation could be a bit faster.<br>On a test I've done, your implementation took 150 millisecs on on JavaScript compared to 500 on my implementation, wich that means yours is 75% faster on JavaScript. Surprisingly the same code runing on glfw was giving 85 millisecs on my implementation, and 2600 on yours, wich means that yours is 3058% slower. you can see the huge difference there.<br>This big difference is caused by the String.FromChars function call. I think this should have a better implementation on JavaScript, but I'm not sure this is possible given the nature of JavaScript. <br><br></td></tr></table><br>
<a name="2030708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just as a matter of interest: how long was the string on your test? <br><br></td></tr></table><br>
<a name="2030737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It was like 20-30 chars but it was a loop of more than a million calls or the like. I haven't kept the source, but feel free to make your own test. <br><br></td></tr></table><br>
<a name="2030729"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
