<!DOCTYPE html><html lang="en" ><head ><title >fancy lines test</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >fancy lines test</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >fancy lines test</a><br><br>
<a name="2048386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hay guys.<br><br>Working on a little class to render out lines made up of three sprites, a start bit, middle bit and end bit, the results can be seen here.<br><br>Html5<br><a href="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/MonkeyGame.html" target="_blank">http://www.cruel-gaming.com/Beta/cSpriteLine/html5/MonkeyGame.html</a><br>Flash<br><a href="http://www.cruel-gaming.com/Beta/cSpriteLine/flash/MonkeyGame.html" target="_blank">http://www.cruel-gaming.com/Beta/cSpriteLine/flash/MonkeyGame.html</a><br><br>Code : <a href="http://code.google.com/p/c-sprite-line/" target="_blank">http://code.google.com/p/c-sprite-line/</a><br><br>Instructions are on the bottom in the debug output, I would love to know how many lines you can have while moving the mouse around before your frame rate starts to drop bellow 59/60<br><br>thanks in advance. <br><br></td></tr></table><br>
<a name="2048319"></a>

<a name="2048317"></a>

<a name="2048326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can get about 640 in chrome.. would it be worth me shoving up a flash version as well ?<br><br><pre class=code>
      Chrome   Firefox
Html5 640      280
Flash 82       74
</pre><br><br>EDIT :: wow the flash results SUCK BALLS&gt;.. OH to remove lines in flash hit SPACE.. as the right click opens the context window. <br><br></td></tr></table><br>
<a name="2048320"></a>

<a name="2048318"></a>

<a name="2048321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone know why there is such a huge difference between the two results? <br><br></td></tr></table><br>
<a name="2048322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dima</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can do 354 lines in Chrome before dropping in frame rate.  Radeon 6870 card  but I suspect we're at the mercy of the browser and it's Canvas implementation.  Someone on this forum, a fellow Russian I believe, has a WebGL Mojo module that transparently plugs in.<br><br>You would probably get much better performance only using a single image instead of 3 for each line.  The end caps could be just part of that image. <br><br></td></tr></table><br>
<a name="2048323"></a>

<a name="2048324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dima</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try at least 3 different browsers with both Flash and HTML5 - both targets rely on browser/plugin implementation and I suspect you will get different results with everything.  WebGL is probably the only solution for consistent results. <br><br></td></tr></table><br>
<a name="2048325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I need results from as many people as possible so that I can descide what I wana do next.<br><br>This is a test of how good or bad drawing these kinds of lines will work in my main project, at the moment all my art is pre-drawn sprites, but if this turns out to be fast enough with a reasonable amount of lines then I might use this and render all my levels and game objects dynamically.<br><br>would allow me to do some cool funky things with my game actors, like blowing them up, or making them grow or shrink or who knows what else. <br><br></td></tr></table><br>
<a name="2048328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dima</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should probably at the very least resort to a single image per line or else you're tripling the number of drawing calls, and those are the biggest bottle neck.  The rest is up to the API - you would get the highest performance in HTML5 without using SetColor, SetAplha, and Rotations, color being the biggest culprit I believe.  <br><br>One idea is to use CreateImage() and WritePixels() to procedurally generate your line image with the color baked in then draw with color 255.  Considering these images don't have to be large and are stretched with the line, you could pre-generate a whole bunch of different colors and bypass SetColor. <br><br></td></tr></table><br>
<a name="2048329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get 526 on HTML5 version. <br><br></td></tr></table><br>
<a name="2048332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> On Mac:<br><pre class=code>
Chrome HTML5 265
Chrome Flash 25

Safari HTML5 310
Safari Flash 35
</pre> <br><br></td></tr></table><br>
<a name="2048334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> My framerate starts dropping with &lt;30 lines in Chrome HTML5 on my laptop. It looks like you've built in debug mode though, which doesn't help. <br><br></td></tr></table><br>
<a name="2048355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> 644 in Chrome - still at 59 fps<br>1 in Flash - starts 54 fps<br><br>Flash usually don't have any good fillrate. Meaning that slowness is dependent to the number of pixels that change since the last frame.<br><br>Try the exact same app, but draw a black rect over the bottom half of the screen and the fps in flash should double, even tough you are doing the same + a rect. <br><br></td></tr></table><br>
<a name="2048349"></a>

<a name="2048379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> made a few changes, pressing M switches between drawing a line (scribbling) and then drawing random LINES to the mouse.<br><br>think I also removed the start and end caps from the lines. so they might look a bit jaggy where the angles are a little steep. <br><br></td></tr></table><br>
<a name="2048382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got to about 350 before FPS dropped to 45.<br>Safari on an iPad 3rd gen!<br>Got about the same result on an iPod Touch, (new/Tall display)<br><br>The Nexus 7 only got up to 150 before it started chugging.  Poor little nexus! <br><br></td></tr></table><br>
<a name="2048387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> 150 is still fairly good depending on the implementation and what the lines are being used for. <br><br></td></tr></table><br>
<a name="2048390"></a>

<a name="2048391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1200 html5 win7 chrome<br><br>you probably want to WritePixel for something like this, then your only slowdown is writing to the single image. Use Bresenham's line algorithm.<br>http://rosettacode.org/wiki/Bitmap/Bresenham's_line_algorithm <br><br></td></tr></table><br>
<a name="2048392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> the whole point of this is that with either 1 or 3 very small images you can create a nice looking, themed or custom bitmap line to be used in your project, for example using png's and their alpha to create an alphed line with glow.<br><br>Start <img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line_start.png"><br><br>Middle <img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><br><br>End <img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line_end.png"><br><br>like this.<br><br><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line_start.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line.png"><img src="http://www.cruel-gaming.com/Beta/cSpriteLine/html5/data/graphics/redbox_line_end.png"><br><br>This example is using a 1 pixel wide middle, but with this system you can have middle segments that are wider allowing you to cram in some extra detail.<br><br>Doing something like that with writepixel would be a nightmare, and creating new types of line would be a whole other project where as with this system its as simple as creating a 1 pixel wide png. <br><br></td></tr></table><br>
<a name="2048393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is pretty cool but I see cracks on the lines when they are curved. <br><br></td></tr></table><br>
<a name="2048433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, I moved the center point so their not as bad as its turning from the middle point of the line and not the corner but its still visible if you do sharp turns, to be honest for the implementation I was planning those would not have been an issue.<br><br>probably a number of ways to solve that, but when factoring in alpha I think it might get problematic with overlaying segments creating bright spots on the line as opposed to being treating as a single solid line.<br><br>it's something to look at tho. <br><br></td></tr></table><br>
<a name="2048434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually thinking about it for a second, new line segments are deplayed every I think 5 or 10 pixels, and provided that the timer has ticked over, I could simply add a new condition that it would drop a new segment if the angle from the last lines end point to the new lines end point is beyond say 10 degree's this would remove all of the cracks.<br><br>but as I said before with alpha in mind it could create some hot spots, might be worth trying both options tho. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
