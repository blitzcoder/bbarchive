<!DOCTYPE html><html lang="en" ><head ><title >Segment Fault.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Segment Fault.</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Segment Fault.</a><br><br>
<a name="2021942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have one right now, got no clue why, changed very little since my last compile and test, but enough to not be sure what line's are at fault.<br><br>Any suggestions ? this error needs to give a line number or summit, its bloody painful. <br><br></td></tr></table><br>
<a name="2021943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> i've got a little black box and i can't open it, any idea why?<br><br>thats the way i've read your post.<br><br>What you're try to compile? what you're try to do? whats the problem? <br><br></td></tr></table><br>
<a name="2021944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What target?<br>When you compile or when you run?<br>If you have an error message, post the actual error message.<br>If your code isn't multiple files then post the code in some codebox tags. <br><br></td></tr></table><br>
<a name="2021949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What target? And post some code please?<br>Debugging Monkey can be a pain. It tuck me an hour to figure out why some code ran all right on Flash/HMTL5 but crashed on glfw. Turned out that Monkey didn't like me using Loadstate in a certain way if there was no previous saved state.<br><pre class=code>
'Chokes an dies
Local s:String = Loadstate()
If s = "" Then blah..

'Works
If Loadstate() = "" Then blah...
</pre> <br><br></td></tr></table><br>
<a name="2021947"></a>

<a name="2021945"></a>

<a name="2032402"></a>

<a name="2032403"></a>

<a name="2032404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's an out of range array index.<br><br>That's a guess, of course, based on the recent discussion of Monkey arrays.<br><br><br>[monkeycode]Print X &lt;= Y[/monkeycode]<br>[monkeycode]Print X &gt;= Y[/monkeycode]<br>[monkeycode]Print X =&lt; Y[/monkeycode]<br>[monkeycode]Print X =&gt; Y[/monkeycode]<br>[monkeycode]Print X &gt;&lt; Y[/monkeycode]<br>[monkeycode]Print X &lt;&gt; Y[/monkeycode] <br><br></td></tr></table><br>
<a name="2021946"></a>

<a name="2021948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It's an out of range array index.<br><br>That's a guess, of course, based on the recent discussion of Monkey arrays. <br></div>I though Monkey in debug mode trapped those? <br><br></td></tr></table><br>
<a name="2021950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depending on target, you may have some additional info on the console window of the IDE. <br><br></td></tr></table><br>
<a name="2021951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I was vague because the bloody code would not really give me a hint as to what part of the code was causing the issue, I could hardly dump the full project on the forum.<br><br>It's this line.<br><br><pre class=code>
		If KeyDown(KEY_DOWN) 
			GameStage.offsety-=20
			'bound checking, this is for debug only.
			'If GameStage.offsety&lt;=GameStage.offmin Then GameStage.offsety=GameStage.offmin
			'If GameStage.offsety&gt;=GameStage.offmax Then GameStage.offsety=GameStage.offmax			
		End If
</pre><br><br>I had to comment them both out, GameStage is a clevel , a class I made to hold level info , and the offset's are the position the player is on the level, well to be more specific the amount I adjust the level to display the right tiles under the player.<br><br>The GameStage class is in another file from the file that these lines come from, if you follow me, so I think it's goto be a scope issue, but since I called it with GameStage. should that not cover the scope. ?<br><br>in my level.monkey file I have this at the top.<br><br>Global GameStage:= New clevel <br><br></td></tr></table><br>
<a name="2021952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh and is all the Output window had which is why I didnt post it.<br><pre class=code>

Translating iTerm
E:/Code/MonkeyPro/MoneyPro52f/bin/trans_winnt -target=html5 -run E:/Source/Monkey/Invaders/iTerm.monkey

TRANS monkey compiler V1.29
Parsing...
Semanting...
Monkey runtime error: Segmentation violation



Process Complete
</pre> <br><br></td></tr></table><br>
<a name="2021953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont get why the IF Statements, cause this problem but the line above which talks to the same class and variable does not. <br><br></td></tr></table><br>
<a name="2021954"></a>

<a name="2021956"></a>

<a name="2021958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> See what happens if you use locals vars. <br><br></td></tr></table><br>
<a name="2021955"></a>

<a name="2021957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, it's when you're compiling, not running. That's kind of important.<br><br>It looks like a Monkey bug. Can you post your "clevel" class definition? <br><br></td></tr></table><br>
<a name="2021959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tracked it down, I guess I was doing something a bit monkeynoob.<br><br><pre class=code>
Class clevel
	Field StageWidth:Int=5
	Field StageLength:Int=100
	Field stage:Int
	Field grid:Int[500] 	
	Field offsetx:Float=64
	Field offsety:Float=0

	Field offmax:int = (self.StageLenght * 128)-864

	'Field offmax:Int = (100*128)-864
</pre><br><br>I Guess that at that point in the execution self.StageLength isnt seyup ? the commented line bellow is what works..<br><br>You would think that the compiler would catch that a bit better rather than giving me some obscure error. <br><br></td></tr></table><br>
<a name="2021960"></a>

<a name="2021961"></a>

<a name="2021962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> StageLength &lt;&gt; StageLenght, but that's by the by as the Monkey compiler shouldn't crash no matter what the input.<br><br>Edit: Apparently the "self." causes Monkey's compiler to not check whether the identifier is valid at all. <br><br></td></tr></table><br>
<a name="2021966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would say its both a Monkey bug and a user error :P<br><br>Simple code sample to show the error:<br><pre class=code>
Function Main:Int()
	New TestClass()
	Return 0
End

Class TestClass
	Field a% = 100
	Field b% = Self.a + 10
	
	Method New()
		Print a
		Print b
	End
End
</pre><br><br>I'll raise it in the Monkey bug forum...<br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=2259" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=2259</a> <br><br></td></tr></table><br>
<a name="2021963"></a>

<a name="2021967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah knew something had to be up with that, as for user error lol. par for the course with me, if there is a wrong way to do it or a bug in the code im gona find it. <br><br></td></tr></table><br>
<a name="2021968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sorry but this is in no way an example of a "user error". If Monkey worked properly in this instance the user would have received an error stating that the identifier couldn't be found and then one stating that it couldn't be "accessed from here" when they corrected the spelling(which is a poor message but at least something).<br><br>Code errors should never cause the compilation process to simply fall over. <br><br></td></tr></table><br>
<a name="2021969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, lol what he said . see wasnt my fault after all :P<br><br>/me runs off. <br><br></td></tr></table><br>
<a name="2021971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Code errors should never cause the compilation process to simply fall over. <br></div>True. But at least TRANS V1.29 gives you a message, TRANS V1.27 just chokes and gives you and gives you the "This program has stop working" dialog box.<br><br>Compiling therevills sample with stdcpp using TRANS V1.27 gives me this in the console window of Jungle.<br><br>ERROR:<br>This application has requested the Runtime to terminate it in an unusual way.<br>Please contact the application's support team for more information.<br>ERROR:terminate called after throwing an instance of 'char const*'<br>Abnormal program termination. Exit code: 3 <br><br></td></tr></table><br>
<a name="2021970"></a>

<a name="2021972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah rofl the debug cycle needs a lot of work, thankfully tho and only a few days in with Pro, i'v not hit to many brick walls, and my code base on this project is growing daily so touch wood, its all moving along. <br><br></td></tr></table><br>
<a name="2021973"></a>

<a name="2021974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depending on how I'm going to use a class. I tend to over ride the default new method to initialize it ( or a static function and return the type ) rather the initialisation in the fields.<br><br>EDIT: You asked this in another thread<br><div class="quote"> Whats the most sprites you have used with monkey so far ? because people in other threads have been talking about how the more draw commands you use in a loop the slower your code gets, because of something to do with it using another image or memory block or summit I forget to be honest lol, maby some one can post and explain it better than me. <br></div>I'm surprised that Samah didn't point you to <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1961" target="_blank">this</a>. Post 4 onwards. <br><br></td></tr></table><br>
<a name="2021975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ERROR:<br>This application has requested the Runtime to terminate it in an unusual way.<br>Please contact the application's support team for more information. <br></div><br><br>I'd say that was more helpful than "Monkey runtime error: Segmentation violation". At least it flags to the user that it's a problem that they should raise with the application developers (although it's not always obvious who they are). <br><br>If the monkey error had said something along the lines of "Hey, this shouldn't happen! Let BRL know about it!" this entire thread probably wouldn't exist. Even better is to add a remote report facility to the error trapping. It's not a major effort to do so and it both increases the number of faults you hear about and raises the quality of those reports so you can actually fix them. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
