<!DOCTYPE html><html lang="en" ><head ><title >Pooling of multiple derived classes or interfaces?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Pooling of multiple derived classes or interfaces?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Pooling of multiple derived classes or interfaces?</a><br><br>
<a name="2082035"></a>

<a name="2082036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>So I need to write yet another particle generator for a project.  My last one didn't do any sort of resource re-use or pooling, and was heavily interface-based.  As a result, it choked up a lot, and I was generally unhappy with that.  This time around, I'm running up against a deadline and just need a few separate classes of particle.  However, I still want to manage them using a similar interface, at least I think I do.<br><br>My basic question would be, what would be a good way of going about handling a few separate types of particle that are different enough where having a "master" base class would be unwieldy, but interfaces preclude an easy way to re-allocate resources in a ringbuffer or pool?  Can I use brl.pool for this?  Should I just give up and make another obscenely large master particle class?  Perhaps there's another way I can pool the resources of the disparate particles and re-use "dead" ones quickly and easily... <br><br></td></tr></table><br>
<a name="2082046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you really need to have multiple particle implementations then you'll need a pool for each type. Presumably if you're creating different types anyway then allocating from multiple pools isn't a problem. If you want to centralise the processing and recycling then store the parent pool reference on the particle and have the common interface include a Discard method or similar. When the particle lifetime is over the particle manager calls the discard method and the particle returns itself to the pool it came from.<br><br>I suspect that you can rejig your particle system to avoid the need to have multiple types but if you're up against a deadline then the above should work for you. <br><br></td></tr></table><br>
<a name="2082081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, I decided to write a new system since the old one had a bit of a fundamental problem with this allocation stuff. <br><br>I think writing an allocator for my old system would just be trying to put a band-aid on a fundamentally flawed design.  I talked with some people I know last night and it seems to me that a better way to go about this would be to create a god particle, even though that runs the risk of bloat with the design.  At least with a master base particle, allocation and re-use of resources is easy.  I wrote a new generator specifically for this game and tried to keep the hierarchy general but basic enough so that derived classes could use the same fields and still do what I needed them to do. <br><br>(Extra information for anyone who's interested:  The fields in my new implementation are variations of ParticleValues from argyne -- all tweenable values in the master particle of are of either scalar or 2d types I call pVal and pVal2 that use a custom easing curve specified by an interface.  This only allows for simple, 1-directional movement for right now, and requires a separate allocator for any particle type requiring more tweenable fields than the base one -- such as those for advanced movement -- but when I have more time I'll re-do pVal2 so that a path can be specified instead or just a startpoint and endpoint, and there will be little-to-no need to expand the master particle beyond its existing fields.  If this proves to be successful for us, then I might release it as argyne's successor eventually.....) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
