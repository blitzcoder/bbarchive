<!DOCTYPE html><html lang="en" ><head ><title >MonkeyPro V66 now up! [MONKEY NEWS]</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MonkeyPro V66 now up! [MONKEY NEWS]</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >MonkeyPro V66 now up! [MONKEY NEWS]</a><br><br>
<a name="2039388"></a>

<a name="2039389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>MonkeyPro V66 is now up!<br><br>File streams have been added to the brl module (not supported in html5/flash). Use standard file paths on desktop targets, or prefix file paths with "monkey://internal/" to access internal storage on android, ios, xna and psm.  Note that you wont be able to open files in "monkey://data/" on all targets, so this will mainly be of use for caching data etc on non-desktop targets.<br><br>I've also had a bit of a play around with update rates and syncing, particularly on the PSM where things will hopefully run a bit smoother now. <br><br>It turns out the PSM appears to have a slightly strange vsync mechanism - it will vsync, unless 1/60 of a second has passed since the last render, in which case it wont! Or something. Anyway, Monkey should deal with this better now, but please note that the PSM target (and XNA if you have #XNA_VSYNC_ENABLED=True) will no longer issue multiple updates per render if things appear to be slowing down - I just couldn't work out how to get it working usefully/cleanly with the PSM's vsync mechanism.<br><br>I'm starting to think the whole 'multiple updates to catch up' idea isn't so hot anyway - esp. when things are vsynced. With vsync on, there's a chance executing extra updates will just cause the next render to miss the next vsync, and therefore be forced to wait for the one after that, resulting in an even bigger lag.<br><br>I'll think about this a bit more, but right now I'm tempted to make update rate a 'max FPS' rate, and leave it up to clients to deal with slowdowns - ie: as long as your code executes within the given update rate, everything works. If not, you're own your own! In a lot of cases, you may not give a stuff if things chug a bit here and there, and NOT doing the multiple updates thing will mean it gets back to normal sooner.<br><br>Finally, there are some Mac fixes in there and the opengl samples should work again. I also had a quick hack at minib3d and got the demos going although I had to prefix file paths with "monkey://data/".<br><br><div class="quote"> <br>Modules:<br><br>brl - added filestream module.<br><br>psm/xna - tweaked update rate logic, should be a bit 'cleaner' now esp. on PSM. Added XNA_VSYNC_ENABLED config var (defaults to false) to XNA. Use this + 60FPS update rate to get 60FPS on WP7.<br><br>xna/psm mojo - changed SaveState/LoadState filename to '.mojostate'.<br><br><br>Targets:<br><br>Added monkey://internal/ support to glfw, stdcpp, android, ios, xna and psm targets.<br><br>Fixed ios view controller orientation issue with ios6.0.<br><br><br>Trans (V1.42):<br><br>Improved support for spaces in preprocessor stmts.<br><br>ios target now creates a Documents dir on simulator for use by //internal/.<br> <br></div> <br><br></td></tr></table><br>
<a name="2039391"></a>

<a name="2039399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Mark! It becomes better and better. <br><br></td></tr></table><br>
<a name="2039397"></a>

<a name="2039398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vbnz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks!<br>Do you plan to add 'inline' in Monkey?<br>As I know 'inline' word reserved by Monkey language. <br>Maybe this code structure can increase some FPS (+1 or +2). <br><br></td></tr></table><br>
<a name="2039400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Amazing. My game is running perfectly at ~60FPS on my Lumia 900 Windows Phone now.  Seriously, Christmas has been coming about once a week for a few weeks around here.  <br><br>Mark, thank you so much for your hard work and dedication to your users and to Monkey!!!!! <br><br></td></tr></table><br>
<a name="2039403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Merged monkey-ext with v66.  Mac/Linux users will need to compile trans themselves (development branch will only ever have the latest winnt build; stable merges will have all three builds). <br><br></td></tr></table><br>
<a name="2039405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeGit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. Much appreciated. <br><br></td></tr></table><br>
<a name="2039406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Mark! :) <br><br></td></tr></table><br>
<a name="2039409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow. The rate you push out these huge updates is incredible.<br>Thanks a lot. <br><br></td></tr></table><br>
<a name="2039411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> excellent stuff <br><br>StuC <br><br></td></tr></table><br>
<a name="2039419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great stuff, so many updates :)) <br><br></td></tr></table><br>
<a name="2039421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dopeyrulz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Mark.  BTW, it may be time now to move the WP XNA project up to 7.1 (Mango). <br><br></td></tr></table><br>
<a name="2039422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Mark your continues and quick efforts! <br><br></td></tr></table><br>
<a name="2039424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Brown</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see that the Android target now supports file streams - does that mean that I can write HTML files with Monkey on Android now? <br><br></td></tr></table><br>
<a name="2039425"></a>

<a name="2039426"></a>

<a name="2039427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> "I'm starting to think the whole 'multiple updates to catch up' idea isn't so hot anyway - esp. when things are vsynced."<br><br>The only point I'd make here is that AFAIK people can easily bypass the multiple updates as it is, by ignoring the standard OnUpdate() and instead calling an update function at the start of OnRender().  [Also allows use of ReadPixels() during update!]  <br><br>So there's probably no special need to take the current version out if it's doing no harm.<br><br>But as you say, it's probably not doing a great deal of good either.  In many cases chug would be preferable to a big graphics catch-up.  Catch-up is fine if your enemy moves 10mm across the screen instead of 2mm between renders; not if he jumps 7 cm instead of 1! <br><br></td></tr></table><br>
<a name="2039435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome, last night i just finally updated my Mac version of Monkey to v65 lol. But anxious to test out the PSM render updates later today :)! <br><br></td></tr></table><br>
<a name="2039436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with Gerry Quinn that right now, it's really easy to control whether the OnUpdate happens in OnRender or not, so I hope it doesn't change.  To go back and forth, I simply rename my OnUpdate to OnUpdateFromRender, then call that from the top of OnRender, and make an empty OnUpdate.  To switch back, I just swap where I call it from.<br><br>It's super easy as it is, and there have been some cases where I needed my game to worry more about the Update than the Render and "skipping" a render frame needed to happen because having the game slow down screwed with the clock that was timing you. <br><br></td></tr></table><br>
<a name="2039439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> vbnz wrote:<br><div class="quote"> <br>Thanks!<br>Do you plan to add 'inline' in Monkey?<br>As I know 'inline' word reserved by Monkey language.<br>Maybe this code structure can increase some FPS (+1 or +2). <br> <br></div><br><br>oh yes, I hadn't even realized this.  It wouldn't be easy to quantify gains, but I'm sure there would be some with things like vector classes. <br><br></td></tr></table><br>
<a name="2039441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd like inline too: there are some cases where I'd like to use a function but just couldn't bear looking at the inefficiency!  Even if 99% of the time it wouldn't matter.<br><br>Things like Max and Min would probably benefit from inlining too. <br><br></td></tr></table><br>
<a name="2039450"></a>

<a name="2039451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dragon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark the feature set is not really transparent.<br>Can you add a table, where we can see direct what platform/target support and what not<br><br>like this:<br><br><pre class=code>
	|Windows|MacOS	|iOS	|Android|...	|
FeatureA|	|	|	|	|	|
FeatureB|	|	|	|	|	|
FeatureC|	|	|	|	|	|
</pre> <br><br></td></tr></table><br>
<a name="2039453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it would be great if the compiler could throw a sort of warning when you use a feature (a class or whatever) that is not supported in all targets, so you don't get the problem later when deploying for an speciffic target <br><br></td></tr></table><br>
<a name="2039458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeaBoy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Arghhhhhhh!!! All the updates are too much for my little brain to handle, am I complaining, erm... NO!<br><br>Many thanks Mark! Good stuff! <br><br></td></tr></table><br>
<a name="2039459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can you add a table, where we can see direct what platform/target support and what not <br></div><br>+1 here. <br><br></td></tr></table><br>
<a name="2039462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheRedFox</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Firehose mode: on.<br><br>Well, I know what the week end will be made out of :) <br><br></td></tr></table><br>
<a name="2039471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; I see that the Android target now supports file streams - does that mean that I can write HTML files with Monkey on Android now? <br><br>Theoretically, but I've only tested files written to monkey://internal/ so far. But nothing else can read them I think? Writing files elsewhere should be possible but is likely to involve permissions twiddling.<br><br>Also, streams don't support text well yet, so you'll have to deal with writing chars/UTF-8 etc yourself. I plan to add yet another bunch of text/UTF-8 routines to help with this soon.<br><br>&gt; I agree with Gerry Quinn that right now, it's really easy to control whether the OnUpdate happens in OnRender or not, so I hope it doesn't change. <br><br>Well, it's already changed on PSM and XNA-with-vsync which, as mentioned above, no longer attempt to 'catch up' with multiple updates. And I'm not convinced it's a good thing to even attempt on vsynced (or perhaps any) targets, esp. on the PSM with it's freaky vsync system.<br><br>In general, if things are 'maxing out' and you throw in more updates per render, there is a good chance, esp. on vsynced systems, that you are just making things worse. Monkey wont execute more than 8 updates per render anyway (after which the system resets itself) so unless something gets destroyed pretty soon, chances are all you've done is slowed things down even more for no real benefit.<br><br>Another issue is how do you even detect skipped frames? On a vsynced system, every update/render will take 16.66ms - but timers can't measure this *exactly* (oh for a vblank interupt!) and it's all to easy to 'mis detect' a slowdown. When this happens, an extra update gets thrown in and things will appear to speed-up or lurch for a frame every now and then for no apparent reason.<br><br>This is the problem I encountered when I attempted to reintroduce 'catch ups' to the PSM target - every misdetected 'slowdown' (which will happen regardless of how much is actually going on) resulted in a noticable lurch. I started messing around with epsilons and stuff here, but it just got ugly...esp. since only the 'first' render is vsynced on PSM. And I think I only really noticed this because things are now going so sexily smoothly on PSM/WP7!<br><br>Yes, there are probably some situations where the catch up system works/helps. But I suspect there are also many where the system is responsible for worse slowdown and random lurches. IMO, the only 'safe' way to deal with slowdown is to use time scaling. Yucky, but true. Of course, you can always just write to a frame rate and ignore slowdown...<br><br>I'll keep hacking, but please be aware that PSM/XNA+vsync, for now anyway, will only perform one update per render.<br><br>&gt; Can you add a table, where we can see direct what platform/target support and what not<br><br>Yes, I've been trying to think how this could look for a while now - will get onto it.<br><br>&gt; I think it would be great if the compiler could throw a sort of warning when you use a feature (a class or whatever) that is not supported in all targets,<br><br>The brl modules now include a 'compatibility' #If at the top that will cause an error if you try and use them on the wrong target. You can still just Import brl and it will conditionally import target-valid features only though.<br><br>The compiler can't really check for invalid URIs or filetypes, as these can be in variables, eg:<br><br>Local image:=LoadImage( path+"/myimage.png" )  'is path legal for this target? <br><br></td></tr></table><br>
<a name="2039470"></a>

<a name="2039467"></a>

<a name="2039468"></a>

<a name="2039464"></a>

<a name="2039466"></a>

<a name="2039475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> The feeling of smoothness to the player is everything when talking about performance and latency in my oppinion - and I take that from networking. Players playing with a latency of higher but smooth latency complain less than those at really low latencies that vary - even if the variation is below the higher one. It is the irregularity people then to "notice".<br><br>So if one way of framefixing makes things "feel" smoother over "math" precision then I would vote for the first myself :) <br><br></td></tr></table><br>
<a name="2039485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tiresius</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well, it's already changed on PSM and XNA-with-vsync which, as mentioned above, no longer attempt to 'catch up' with multiple updates. And I'm not convinced it's a good thing to even attempt on vsynced (or perhaps any) targets, esp. on the PSM with it's freaky vsync system. <br></div><br>I'm a new kid on the Monkey block but I don't think it's a big deal to change to the new method.  The only case I can think of where a perfect timed OnUpdate() (i.e. guaranteed to be X times a second) is needed is for predictable physics behavior with the math for forces, gravity, cooldown, etc. over time.  If needed then Fixed rate logic can be forced in OnUpdate() by the app maintaining its own timer and calling its own update several times, if needed.  That might bring us back to square 1, though.<br>I see why people are calling OnUpdate() in OnRender() as it has secured a smoother play but perhaps the new changes have negated that need?  I also like the MC+V model of Monkey... one of the things that drew me to it.  Call me crazy but I would even go for an OnInput() that was only called when the player (or message pump) did something, to make it a true MVC!  :) <br><br></td></tr></table><br>
<a name="2039490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I produce music education software, I need a very stabil OnUpdate(). The 16.6msec of a 60Hz are already a lot of time for accuracy of corresponding audio events (f.e. a drum player).<br><br>It would better to have 200Hz, which reduces the latency to 5msec.<br><br>But in monkey the OnRender() is connected to the same rate. And this often is to short to get the display painted.<br><br>There are cases where I have to reduce rate to 30Hz on slower targets. But with this 33.2msec the latency and inaccuracy is now really problematic.<br><br>I made experiments with skipping some OnRender()... <br>[monkeycode]OnRender()<br>     Step=(Step+1) Mod 5<br>     If Step&gt;0 Then Return<br>     .....[/monkeycode]<br>...because I often have nothing to draw new....<br><br>...but this caused heavy flickering on android target. It seems that there are two backbuffers. And when you skip OnRender() you see the both buffers rotational.<br><br>So for me would be perfect an independent rate for OnUpdate() and OnRender().<br><br><br>So, if you plan to change the accuracy behavior of monkey, please include also my considerations. <br><br></td></tr></table><br>
<a name="2039491"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> In BlitzMaz I've always run my game logic at 200Hz and render at 60Hz.  It would be cool to be able to do something similar in Monkey although of course 200Hz may not be suitable for slow mobiles. <br><br></td></tr></table><br>
<a name="2039493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Grey! Stop posting on the forums and get back to working on the Monkey Grey Alien Framework! :)<br><br>Gutted I ever sold the BlitzMax version! :/ <br><br></td></tr></table><br>
<a name="2039494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you a lot Mark !<br><br>Files stream was a point i was really waiting for.<br><br>When Monkey will manage text files stream it's going to be<br>a real paradise in my head! :) <br><br></td></tr></table><br>
<a name="2039507"></a>

<a name="2039508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> MidiMaster, have you tried hacking mojo?  I think I suggested this before, maybe to you or maybe to somebody with a similar problem.  It is not too hard to find where the render decision is made in native code (if you like, just search for magic number 7!), and reducing the number of renders should be easy.<br><br>However I think you really will need to go a bit further here.  Your fundamental problem is that rendering takes too long.  What you really need, I believe, is to do some updates actually during a render.  Of course if keys are pressed you need not change any drawing until the next render cycle, but you can record the time and/or adjust the sound output.  <br><br>Now I think of it, have you tried calling an update function several times during the rendering process?  Perhaps that is all that is needed.  I mean something like:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Method OnRender:Int()	
	MyUpdate()
	DrawBackground()
	MyUpdate()
	DrawKeys()
	MyUpdate()
	' Backbuffer will be copied to screen at end of OnRender()
	' That's why last MyUpdate() is present
End


Method MyUpdate()
	time = GetTime()
	GetKeys( time )
	AdjustSounds() 
End
</textarea><br><br>I would definitely try experimenting with the above.  Try adding a function that just records the time, and see how it works. <br><br></td></tr></table><br>
<a name="2039506"></a>

<a name="2039505"></a>

<a name="2039502"></a>

<a name="2039503"></a>

<a name="2039504"></a>

<a name="2039516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, Midimaster, now that I think about it, I am 99% sure that the above is what you need.  Monkey/mojo aren't going to have threading anytime soon, if ever - so something like the above (a simple form of cooperative multi-tasking) is the only way to go. <br><br></td></tr></table><br>
<a name="2039517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> yo, could you put the same keyboard shortcuts in Ted as in Monk? <br><br></td></tr></table><br>
<a name="2039520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is your solution, MidiMaster, I think!  I decided to test it out and it works very well.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict


Import mojo


Function Main:Int()
	New FastUpdateApp										
	Return 0
End


Class FastUpdateApp Extends App
		

	Method OnLoading:Int()
		Return 0
	End
	
	
	Method OnCreate:Int()
		SetUpdateRate( 60 )
		Return 0
	End
	
	
	Method OnUpdate:Int()
		Return 0
	End
	
	
	Method OnRender:Int()	
		MyUpdate( True )	
		Cls( 96, 0, 96 )
		For Local x:Int = 0 Until 640 Step 64
			For Local y:Int = 0 Until 480 Step 64
				SetColor( Rnd(255), Rnd(255), Rnd(255) )
				DrawRect( x, y, 64, 64 )
			Next
			MyUpdate( False )
		Next
		Return 0
	End
	
	
	Method MyUpdate:Void( first:Bool )
		Local t:Int = Millisecs()
		If first
			Print "&gt; " + t
		Else
			Print t
		End
		If t &gt; 5000
			Error( "Done" )
		End
	End
	
End

</textarea><br><br>Tested in HTML5, release mode:<br><br>Output at start:<br>&gt; 28<br>29<br>30<br>31<br>32<br>33<br>33<br>34<br>35<br>36<br>37<br>&gt; 59<br>60<br>61<br>62<br>63<br>65<br>69<br>73<br>76<br>80<br>83<br>&gt; 89<br>92<br>95<br><br>Output at end:<br>4838<br>4849<br>&gt; 4860<br>4870<br>4880<br>4891<br>4901<br>4912<br>4922<br>4933<br>4944<br>4954<br>4965<br>&gt; 4976<br>4987<br>4997<br>5009<br><br>It takes a bit longer over time, because of all the printing.  But as you can see, the temporal resolution, on this platform ar least, is very good.  You can see it sometimes takes a little while to copy to screen, but that may well be different (for better or worse) on your target platform.<br><br>Hope that helps, anyway. <br><br></td></tr></table><br>
<a name="2039519"></a>

<a name="2039524"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you Garry Quinn for your tests.<br><br>I did'n t dare ignoring the rule that all action should go to OnUpdate() in monkey. Isn't there no reason to do it? Does't it care?<br><br>So..what is it good for use OnUpdate()?<br><br>I will give them a try. But the kernel of my problem remains. I will have longer periods of waiting between the vsyncs:<br><br><div class="quote"> ...<br>37<br>&gt; 59<br>...<br> <br></div><br><br>OK... if i am able to "slowdown" my drawing to 10msec, I only have to wait for further 7msecs until the next OnRender() starts. But is this useful?<br><br>The main problem remains, that I have to draw something on each OnRender(), even if there is nothing new to draw.<br><br>Hacking mojo is not my thing... each update I would need to repeat the hack. <br><br>A optimal solution would be a OnUpdate() rate of 120 and a OnRender() rate of 30. Is it difficult for Blitz-Research to de-couple both rates? <br><br></td></tr></table><br>
<a name="2039525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kalakian</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since the update rate you want is a nice multiple of your render rate, can't you do something like:<br><br>* Set the update rate at 30 to match the rendering<br>* Move your update code into an Update() function<br>* Call Update() 4 times from OnUpdate()<br><br>That would be the easiest way of having two separate rates.  However, if you want to make sure the updates don't get slowed down by the rendering, that would involve threading, and I guess that's why there is only 1 update rate. <br><br></td></tr></table><br>
<a name="2039530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> MidiMaster,<br><br>I think you probably don't have to do any hacking.  A solution like what I gave is probably the best for you.  Try running the code on your target device, except instead of all the printing - which may slow things down - keep stats on how long the gaps are, and just print them out at the end.<br><br>If you're lucky, your targets will copy the backbuffer fast.  If they don't, hacking is your only option to improve it further as you will have to access threads on the target.  Which might very well not even be available to you anyway.<br><br>I think the reason it says to do updating in OnUpdate() is just to advise you of standard coding practices, and of course you would get the benefit (if any) of the skipped renders that were talked about earlier in the thread if rendering is too slow.<br><br>It is difficult to separate OnUpdate() from OnRender().  You would need threads, for a start - and then there is the problem of what to draw in OnRender() when you don't know if you are in the middle of an update!  It makes things complicated for normal purposes.<br><br>The best solution is to have a fast update rate, so the machine is kept busy all the time rendering.  If you can't get a fast enough rate, you may have to deliberately increase the amount of drawing you do to slow down rendering.  This will prevent it idling between calls to OnRender().  Then, if you divide your rendering into approximately equal sized blocks, you will have mini-updates at something close to the rate you require.<br><br>Of course you must check the time at each mini-update, because they will not be perfectly regular, but that should not be too much of a problem for a keyboard simulator.  <br><br>There is another issue as well: you will have to do some arithmetic with keypresses, as they are only reset to zero at the end of the standard OnUpdate().  I don't think you have to hack anything here, but you will have to monitor the changes in your mini-updates, rather than the totals. [That is another reason people are advised to use OnUpdate(), I guess.] <br><br></td></tr></table><br>
<a name="2039552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; So..what is it good for use OnUpdate()?<br><br>The idea of OnUpdate is to use it to process user input and advance game time/logic. KeyDown/KeyUp etc states are updated just before OnUpdate is called, so this is the place to check keypresses.<br><br>The idea of OnRender is to refresh graphics. Note that OnRender may be called even when your app is suspended (eg: if the desktop needs to be repainted when a window is moved), in which case you should not update anything or the app will appear to continue to 'run' in steps/spurts even when it's suspended.<br><br>&gt; There are cases where I have to reduce rate to 30Hz on slower targets. But with this 33.2msec the latency and inaccuracy is now really problematic.<br><br>There is probably little/nothing you can do about this - during OnRender, no user input is updated/processed (semi target dependent) so even calling multiple OnUpdates inside OnRender will not help with 'input lag'.<br><br>As Gerry mentions, threads could help with this but they wont be appearing in Monkey any time soon, if ever.<br><br>So your only choice here is really to speed up rendering. Some ideas:<br><br>* If the scene is static between keypresses, you could try just copying the entire backbuffer to an image with ReadPixels/WritePixels whenever it changes, and just draw this single image when it doesn't change. This should reduce lag, but the cost of generating the image might be high...<br><br>* Precache as much as possible in a static image and only draw changes, eg: if you're drawing a keyboard, create an image of the keyboard with all keys 'off', then draw this + all 'on' keys when rendering. <br><br></td></tr></table><br>
<a name="2039536"></a>

<a name="2039539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks mark for this nice release :) <br><br></td></tr></table><br>
<a name="2039540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jjsonick</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great stuff, Mark!<br><br>golomp wrote:<br><div class="quote"> Files stream was a point i was really waiting for.<br><br>When Monkey will manage text files stream it's going to be<br>a real paradise in my head! :)  <br></div><br><br>Ditto. I too will know Monkey bliss once filestream handles strings. :) <br><br></td></tr></table><br>
<a name="2039553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Not sure what people are expecting 'text stream' wise here...ReadString/WriteString? What else?<br><br>Streams aren't really 'parsers', so if you're expecting ReadInt() to parse an int from a string it probably wont happen in streams.<br><br>The best way to deal with text files right now is probably just to use LoadString (which should now work with file paths) and parse the string yourself. <br><br></td></tr></table><br>
<a name="2039541"></a>

<a name="2039543"></a>

<a name="2039548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> It sound like the java way of writing and reading to me in a binary format. I am wrong ? <br><br></td></tr></table><br>
<a name="2039547"></a>

<a name="2039546"></a>

<a name="2039554"></a>

<a name="2039556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, files are 'binary' blobs of data. So are DataBuffers.<br><br>To read a text file, you're probably best off to just use LoadString. <br><br></td></tr></table><br>
<a name="2039557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah i think so. I think the problem lie in the fact that you actually see what in the textfile comparing to when writing in binary format. But i may be wrong :) Either ways you still can encrypt it using some algorithms around.. <br><br></td></tr></table><br>
<a name="2039561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark Sibly wrote: "There is probably little/nothing you can do about this - during OnRender, no user input is updated/processed (semi target dependent) so even calling multiple OnUpdates inside OnRender will not help with 'input lag'."<br><br>Are there not native functions you could call on most platforms to read keydown/touchdown status at least?  Input is certainly being recorded (otherwise tap input would go dead if rendering was intense, and it doesn't).  Surely there must be functions you can call to get at them even during OnRender()? <br><br></td></tr></table><br>
<a name="2039562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> @mark<br><br>that is exactly what I thought until today morning, when some people began talking about moving update related code to OnRender().<br><br>But your word clearified: game action code should remain in OnUpdate(). Only drawing things go to OnRender().<br><br>The creating of temp. images with WritePixels() indeed already helps with performance problems. This feature is very helpful and makes it possible use 60Hz also in "a lot of text"-based apps.<br><br>@Kalakian<br>A multiple call of Updates() in OnUpdate() helps nothing. With this I have 4 very fast Updates() and then again a lag of 33msec (at 30Hz because to much grafic in OnRender() )until the the next four. but I would need a Update() every 8msec!<br><br>In fact the 16msec of a 60Hz timer are not a as big problem as the fact, that 60Hz OnRender() often cause heavy grafic card problems (rendering&gt;17msec) and a skip of the next timer tick.<br><br>But I see, there is no chance to reduce the frequency of OnRender() independent.<br><br>...the future will bring faster devices and solve the problems by itsself.. <br><br></td></tr></table><br>
<a name="2039563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jjsonick</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> marksilby wrote:<br><br><div class="quote"> Not sure what people are expecting 'text stream' wise here...ReadString/WriteString? What else?<br><br>Streams aren't really 'parsers', so if you're expecting ReadInt() to parse an int from a string it probably wont happen in streams.<br><br>The best way to deal with text files right now is probably just to use LoadString (which should now work with file paths) and parse the string yourself. <br></div><br><br>Mark, my impression was LoadString was glfw only, since its part of the os module.  That's what I was hoping a future filestream with its own ReadString/WriteString would get around, allowing reading/writing of multiple files on ios, android and glfw using the same mechanism.  Or am I misunderstanding? <br><br></td></tr></table><br>
<a name="2039564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> @jjsonick<br><br>LoadString is also part of mojo.App, but until recently that version only handled data relative to the data folder and deeper.  os.LoadString's a different function which takes a full filesystem path. <br><br></td></tr></table><br>
<a name="2039569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jjsonick</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Nobuyuki<br><br>Ah, ok - so for mobile I use LoadString with a path suited to the sandboxed app's relative paths (which can now extend further than just the data folder), and for gflw, I use LoadString with a full windows/OS X system path, is that correct?<br><br>I still need WriteString (so I can use multiple files instead of the monolithic .monkeystate via SaveState), but if that was added to mojo instead of filestream, I'd be just as happy. <br><br></td></tr></table><br>
<a name="2039567"></a>

<a name="2039566"></a>

<a name="2039571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; Are there not native functions you could call on most platforms to read keydown/touchdown status at least?<br><br>On some targets, input events are polled. On some, they're event driven. <br><br>On most event driven targets, events are only delivered on the same thread - ie: when control returns from OnBlah. Android may be the exception here as render happens on a different thread BUT I would like the freedom to be able to move OnUpdate to the same thread in future etc.<br><br>Feel free to hack this stuff, but I'll likely maintain the update/render separation for the sake of consistent multi-target behavior.<br><br>&gt; Mark, my impression was LoadString was glfw only, since its part of the os module.<br><br>Ah, OK. Mojo LoadString should be more flexible now, but may not yet be able to read from anywhere in the filesystem yet. I'll have a look at this soon. Ultimately, there will be only one LoadString! <br><br></td></tr></table><br>
<a name="2039570"></a>

<a name="2039586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anatol</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for the double-posting, but this may be the better thread. Here's my plea for a LoadImageAsync for multiline spritesheets/frames.<br><br>That would be just an overload of LoadImageAsync() that's equivalent to LoadImage() with frameWidth, frameHeight and frameCount.<br><br>Currently there's only<br>Function LoadImageAsync:Void( path:String,frames:Int=1,flags:Int=Image.DefaultFlags,onComplete:IOnLoadImageComplete ) <br><br></td></tr></table><br>
<a name="2039644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any idea how to get portrait apps running on the Vita, anyone? <br><br></td></tr></table><br>
<a name="2039655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark said: "Feel free to hack this stuff, but I'll likely maintain the update/render separation for the sake of consistent multi-target behavior."<br><br>I was just exploring the possibilities.  I think I would look into doing it this way if I were making a keyboard-type application, but it looks like your suggestion of speeding up rendering is much preferable for the original poster anyway, and is working for him. <br><br>My current project is a roguelike and mojo fills pretty much all my needs out of the box.<br><br>Not a big fan of the hacking myself as a rule, but sometimes you have to show the software who's boss ;-) <br><br></td></tr></table><br>
<a name="2039669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Why0Why</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gerry,<br><br>Would you contact me at the email address in my profile?  I am interested in your project.<br><br>Eric <br><br></td></tr></table><br>
<a name="2039688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark,<br>Can you add this or something similar to graphics.monkey in the next release please?  I want to store and reset the scissor using a cached array rather than creating a new one every frame.  You already have one for GetMatrix().<br><br>[monkeycode]Function GetScissor( scissor#[] )<br>	scissor[0]=context.scissor_x<br>	scissor[1]=context.scissor_y<br>	scissor[2]=context.scissor_width<br>	scissor[3]=context.scissor_height<br>End[/monkeycode] <br><br></td></tr></table><br>
<a name="2039748"></a>

<a name="2039749"></a>

<a name="2039750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, so I'm implementing the CONFIG changes.<br><br>I see that when I use #CONFIGVAR+= "whatever" it automatically adds a semicolon ";" after everything. This doesn't work for everything and probably not ideal.<br><br>The way I'm using this is for multi-line  CC_OPTS to the compiler<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#CC_OPTS=  "stb/stb_image.c stb/stb_vorbis.c -I~qC:\Monkey\modules\wxmonkey\wxMSW-2.8.12\include~q -L~qc:/mingw/lib~q~q -L~qC:\Monkey\modules\wxmonkey\wxMSW-2.8.12\lib\gcc_lib~q"
#CC_OPTS+= "-I~qglfw/include~q -I~qstb~q -I~qopenal/include~q -L~qglfw/lib/win32~q -L~qopenal/libs/win32~q"
#CC_OPTS+=  "-static -lwxregex -lwxexpat -lwxmsw28_core -lwxbase28 -lwxmsw28_gl -lwxjpeg -lwxpng -lwxtiff -lglfw -lopenal32 -Wl,--subsystem,windows -mwindows -D__WXRELEASE__ -D__WXMSW__ "
#CC_OPTS+= "-lstdc++ -lkernel32 -luser32 -lgdi32 -lcomdlg32 -lwinspool -lwinmm -lshell32 -lcomctl32 -lole32 -loleaut32 -luuid -lrpcrt4 -ladvapi32 -lwsock32 -lodbc32 -lopengl32"
</textarea><br><br>exports<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
cc_opts:  stb/stb_image.c stb/stb_vorbis.c -I"C:\Monkey\modules\wxmonkey\wxMSW-2.8.12\include" -L"c:/mingw/lib" -L"C:\Monkey\modules\wxmonkey\wxMSW-2.8.12\lib\gcc_lib";-I"glfw/include" -I"stb" -I"openal/include" -L"glfw/lib/win32" -L"openal/libs/win32";-static -lwxregex -lwxexpat -lwxmsw28_core -lwxbase28 -lwxmsw28_gl -lwxjpeg -lwxpng -lwxtiff -lglfw -lopenal32 -Wl,--subsystem,windows -mwindows -D__WXRELEASE__ -D__WXMSW__ ;-lstdc++ -lkernel32 -luser32 -lgdi32 -lcomdlg32 -lwinspool -lwinmm -lshell32 -lcomctl32 -lole32 -loleaut32 -luuid -lrpcrt4 -ladvapi32 -lwsock32 -lodbc32 -lopengl32
g++: error: ;-lstdc++: No such file or directory
</textarea><br><br>You probably could just check for the keyword toke="REFLECTION_FILTER" if that's where the semicolon is needed. <br><br></td></tr></table><br>
<a name="2039747"></a>

<a name="2039745"></a>

<a name="2040030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey mark do you plan to add html 5 async http get too ?<br><br>Thanks! :) <br><br></td></tr></table><br>
<a name="2040603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow...alright, I've been waiting like 3 weeks to be able to test the new PSM update on the Vita and just finally did it now (my day job has been keeping me quite busy). The update definitely did help quite a bit. Framerates went from a stuttering 10-15fps to a steady and very playable 40fps right off the bat. <br><br>It was still able to maintain about 29fps with 50 moving animated sprites on screen also. While its not quite optimal, i'd say its definitely a vast improvement! Thanks mark! <br><br></td></tr></table><br>
<a name="2040705"></a>

<a name="2040706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vbnz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Neuro</b>,Congratulations on your purchase!<br>Do you like PSP Vita? <br><br></td></tr></table><br>
<a name="2040812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I also had a quick hack at minib3d and got the demos going although I had to prefix file paths with "monkey://data/". <br></div><br><br>Mark, I tried that as well and although it works fine with GLFW I don't see any textures on my Android device. Did that work for you? <br><br></td></tr></table><br>
<a name="2040847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Galaxy613</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> It says "Fixed ios view controller orientation issue with ios6.0."<br><br>But I am still getting this error on a brand new game.build/ios/ folder<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Terminating app due to uncaught exception 'UIApplicationInvalidInterfaceOrientation',
reason: 'Supported orientations has no common orientation with the application,
and shouldAutorotate is returning YES'</textarea><br><br>Anyone else get this problem? I wonder if it's the fault of some Gamecenter code or something but it doesn't tell me where that exeception is being thrown and I have no clue at the moment how to catch it. :\ <br><br></td></tr></table><br>
<a name="2040848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you delete you build folder? <br><br></td></tr></table><br>
<a name="2040860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Neuro,Congratulations on your purchase!<br>Do you like PSP Vita?  <br></div><br>Had it for a while now. Incredible portable game system, lack of games though. Hopefully the upcoming PSM App store can have something worthwhile to checkout. <br><br></td></tr></table><br>
<a name="2040866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Galaxy613</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I turned off the Gamecenter code and it's working fine now, so I just need to figure out how that is messing up.. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
