<!DOCTYPE html><html lang="en" ><head ><title >File I/O</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >File I/O</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >File I/O</a><br><br>
<a name="2001120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BigAnd</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am looking for a way to read a binary file into an array.<br><br>In Max I would have just opened a stream and used a ReadInt(stream) but I cant find any info on doing such a thing within monkey.<br><br>At the moment I am having to store the level data in a fixed array. With all the levels in the game, this comes out to be a couple of thousand lines of code so it REALLY slows compilation right down (and also crashes Jungle).<br><br>I looked at the work the guys had done on async streaming but its beyond me and I think its really not on the right track for what I need.<br><br>Am I being thick and just not seeing it in the docs/examples or is it something that's just not been implemented yet? <br><br></td></tr></table><br>
<a name="2001123"></a>

<a name="2001124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you could make a C++ function which reads an int from a file and returns it to Monkey. You would probably have to have a OpenFile() and CloseFile() function too, and the file handle would be a global variable in C++. <br><br></td></tr></table><br>
<a name="2001127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BigAnd</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought about doing this but then would I have to do a java and other version to make it cross platform compatible? <br><br></td></tr></table><br>
<a name="2001185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you need Java, but only C++ and javascript (and actionscript). I'm writing a C++ demo now, hang on.<br>Android should work with pure C++ since NDK5, but I'm not sure if Monkey is using NDK5 yet. Before NDK5 Android needed some Java code also.<br><br>EDIT: I just downloaded NDK5, and it seems it's still bloated with Java as it needs JRE, which doesn't even install on my PC. I need to buy an Android phone and try if I can install Debian on it, or maybe wait for Android 4.0 which is hopefully finally free from Java. This article says that Debian works actually pretty nice on an Android phone, so there's no need for the Android OS at all: <a href="http://www.talkandroid.com/android-forums/android-development/1091-install-debian-android.html" target="_blank">http://www.talkandroid.com/android-forums/android-development/1091-install-debian-android.html</a> <br><br></td></tr></table><br>
<a name="2001172"></a>

<a name="2001170"></a>

<a name="2001171"></a>

<a name="2001128"></a>

<a name="2001129"></a>

<a name="2001130"></a>

<a name="2001131"></a>

<a name="2001243"></a>

<a name="2001244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>There is currently no 'filesystem' in Monkey. Mojo provides the following commands for loading data and loading/saving app state:<br><br>LoadString<br>LoadState<br>SaveState<br><br>These will work on ALL targets.<br><br>A future posix-style module is planned (and probably quite soon), but it will not work on all targets, just those that provide a posix-style interface - initially that will probably mean only the GLFW target. <br><br></td></tr></table><br>
<a name="2001242"></a>

<a name="2001241"></a>

<a name="2001738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way, a fix on Jungle has been commit and jungle handle this kind of files easily now. No crash or the like any more :D <br><br></td></tr></table><br>
<a name="2001750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can someone explain me what is <b>SaveState</b>?<br>What exactly is 'saved'? <br><br></td></tr></table><br>
<a name="2001754"></a>

<a name="2001755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> A string containing the state of the application as you see it. <br><br>AFAIK you are responsible for crafting the string and contents and then parsing it again after reading it back with LoadState.<br><br>The example at: docs/modules/index.html#/mojo.app/LoadState<br>shows how to load and save state (state here being the number of times the app has been run, stored as a number in a string) <br><br></td></tr></table><br>
<a name="2001752"></a>

<a name="2001753"></a>

<a name="2001768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Corum</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This string thinghy reminds me the C=64 times, when we used to save a game session by transcribing a sequence of chars and numbers. :)<br>Perhaps is time to go back to the roots? :) <br><br></td></tr></table><br>
<a name="2001779"></a>

<a name="2001780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The example at: docs/modules/index.html#/mojo.app/LoadState<br>shows how to load and save state (state here being the number of times the app has been run, stored as a number in a string) <br> <br></div><br>Tried but I cant' see any 'previous' state loaded... (tested with HTML5 and GLFW) - I get only 'state not found - creating initial state!'.<br><br>If I understood correctly I create my 'own-app-state' - saving it in a string (so something like 'life=3;score=1000;time=123;level=2' - I suppose - and this is saved (somewhere...)...<br><br>ps: just discovered that the 'index.html' page of monkey help documentation support a search function. Unfortunately with the IDE this doesnt' work... <br><br></td></tr></table><br>
<a name="2001795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @degac: <br>first time you run the LoadState example it will say 'state not found - creating initial state!' as there is no saved state, obviously. Subsequent runs will find the saved state and say 'state found - updating state!' and the state=X message on the app canvas will increment by one with each run of the app.<br><br>ps: search function does not work in Windows IDE due to issues with Internet Explorer. <br><br></td></tr></table><br>
<a name="2001799"></a>

<a name="2001801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course I executed many times the app to 'see' the value: but the message is still the same...<br><br>Still testing the .exe created in GLFW: I started (from the vc2010/release folder) the app many times (at the moment I have 4 windows opened...) but the message is 'state not found - creating initial state!' for each one.<br><br><br>EDIT:<br><br>I tried it in FF4 and of course it doesnt' work! (just tested now in Chrome and in the new tab I see the message 'state found...'<br><br>Probabily a bug in FF? <br><br></td></tr></table><br>
<a name="2001807"></a>

<a name="2001809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure about all of the targets, but in HTML5 the data store is localStorage. Not sure if you can switch that off in FF4? Worth trying Chrome and/or Safari to check if it works (or not)<br><br>HTML5, Android and iOS work for me<br><br>GLFW looks like a bug <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
