<!DOCTYPE html><html lang="en" ><head ><title >Lists, oh dear.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Lists, oh dear.</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Lists, oh dear.</a><br><br>
<a name="2084839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chimaera</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I always tend to use lists as the main containers for objects that I have in my games since the good ol' BlitzMax days...But I seem to run into more problems with Lists in Monkey. So here comes a bunch of quesions that I hope that someone can shed some light on:<br><br>1) If I would like to populate a List with a class I declare the list like this:<br><pre class=code>
myList:List&lt;myBaseClass&gt; = New List&lt;myBaseClass&gt;
</pre><br><br>I was wondering why I have to supply a container type to the list at all? Why do I have to tell it that it contains anything else than "a class"?<br><br>Also if I extend myBaseClass and choose to iterate through the List but only for objects that are of the extending like this...<br><br><pre class=code>
For local myObject:myExtendedClass = EachIn myList
      myObject.doSomething()
Next
</pre><br><br>...I get an error stating that the compiler can't convert an object from the type myBaseClass to myExtendedClass, which I things sounds very illogical from a inheritance standpoint. Why do I get this error at all?<br><br>If I remember it correctly I could create a Tlist in BMax and put whatever object I wanted in there. When I then stepped through the list I could choose exactly what type/class I was looking for.<br><br>Am I not understanding the Lists in Monkey? I see more and more limitations in them, but I do not have another elegant options.<br><br>From my perspective I should be able to store all kinds of (for example) gui-types in a list called myGuiList, ranging from buttons to images to whatever, and I should also be able to look for whatever type/class from within that list without any issues. In a sense that is something that supports polymorphism which is a fundamental part of OOP.  This is exactly what you could get through using vectors in c++.<br><br>But, I realize that I might not understand things correctly and I always seems to get great response from the people in these forums.<br><br>Oh! BTW: I hope that you are all enjoying Easter. <br><br></td></tr></table><br>
<a name="2084849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> All Monkey classes inherit from Object, so you can use that if you don't want to define a base class (I presume,it may not work on primitives such as String or Int).<br><br>To convert an object to an extended class, cast it.<br><br><pre class=code>
Local obList:List&lt; Object &gt; = New List&lt; Object &gt;
obList.AddLast( New Point( 1, 1 ) )
Local pt:Point = Point( obList.First() )
Print pt.x + " " + pt.y
</pre> <br><br></td></tr></table><br>
<a name="2084844"></a>

<a name="2084845"></a>

<a name="2084846"></a>

<a name="2084854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arjailer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1 - you declare the type the list will contain so that you don't have to cast the instances when you retrieve them (as Gerry is doing in his example). If you're happy to cast them then see Gerry's suggestion.<br><br>2 - you get the "can't convert" error because the compiler cannot guarantee that everything in the collection (ie. that everything derived form myBaseClass) can be converted to myExtendedClass. You could have other classes derived from myBaseClass that are not compatible with myExtendedClass.<br><br>The behaviour you're seeing is exactly what you get with Java or C# generics - don't know C++ well enough to comment. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
