<!DOCTYPE html><html lang="en" ><head ><title >TCP Sockets and disconnects</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TCP Sockets and disconnects</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >TCP Sockets and disconnects</a><br><br>
<a name="2074352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't see any way to unbind or disconnect servers or clients in the Socket Class.<br><br>I'm having issues where if someone is disconnected from the server in any way, they cannot reconnect.  I can't seem to restart the server or tell if the client has been disconnected as the server.<br><br>Does anyone know how to detect if a client has disconnected, or how to unbind the server from the port so it can be restarted or stopped if needed?  Just setting the server to Null and creating a new one doesn't seem to work - it seems to stay bound until the app is completely closed. <br><br></td></tr></table><br>
<a name="2074360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> How to detect if a client has disconnected should be easy. Just ping it here and there and if you don't get a response anymore, it's gone. <br><br></td></tr></table><br>
<a name="2074361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you can ping the client as the server.  You can technically kill the connection after inactivity, but I want to give the player the option to stop the server, or cancel the operation while waiting for an opponent to connect in case there's a problem.  So a Disconnect for clients or a ShutDown for the server would be really helpful. <br><br></td></tr></table><br>
<a name="2074362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well you can send a "alive" request to the client. When the client does not respond, kick it. I still don't understand the need for a server shutdown. Maybe I simply don't understand what you want to achieve. Is it something like p2p? If so, you'll run into many more problems because then you need NAT punchthrough which isn't necessary for a master (authoritive) server and many clients. <br><br></td></tr></table><br>
<a name="2074363"></a>

<a name="2074364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm making a simple 2-player local wifi game.<br><br>It works like most multiplayer mobile games.<br><br>You choose whether to Create or Join a game.<br><br>If you choose to Create a game, it sits and "waits" until the other local wifi client Joins the game. (Which is also why I have implemented a way to get the local IP address that you can give to the other player so they can connect to your server)<br><br>Well, if that person can't get the game working, or you just change your mind, instead of closing the entire game, and on some devices, killing the process, I would like the ability to click cancel, unbind the server, and return to the game.<br><br>I don't see a command to check if the connection is alive or not. I see an IsConnected, so maybe that's what I need to check from time to time. <br><br></td></tr></table><br>
<a name="2074366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah well now I get it. What do you do if both players are behind the same router having local ip so you can't connect directly?<br><br>Maybe for p2p games it would be a good idea to make a module for stuff like Pubnub or Photon network where it's very easy to do something like this. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
