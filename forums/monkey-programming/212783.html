<!DOCTYPE html><html lang="en" ><head ><title >Programming Help</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Programming Help</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Programming Help</a><br><br>
<a name="2125761"></a>

<a name="2125762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ewancordiner</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> [Codebox] <br>'importing modules'<br>Import mechanics<br>Import menu<br><br>'writing constants'<br>Const STATE_MENU:Int = 0<br>Const STATE_GAME:Int = 1<br>Const STATE_UPGRADES:Int = 2<br>Const STATE_SHOP:Int = 3<br>Class ClickingGame Extends App<br><br>'Defining variables'	<br>'Defining automatic increments<br>	Field auto<br><br>	Field menu:Image<br>	Field menuX:Float<br>	Field menuY:Float<br>	Field bike:Image<br>	Field shoe:Image<br>	Field mouseclicks:Int = 0<br>	Field shoeX:Float = 325.0<br>	Field shoeY:Float = 250.0<br>	Field clicktotal = 1<br>	Field ding:Sound<br>	Field gameState:Int = STATE_MENU<br>	<br>	Method OnCreate()<br>		'loading gamestate and images'<br>		gameState = STATE_MENU<br>		SetUpdateRate(60)<br>		shoe = LoadImage("shoe.png", 1, Image.MidHandle)<br>		ding = LoadSound("ding.wav")<br>		bike = LoadImage("Bicycle.gif", 1, Image.MidHandle)<br>		menu = LoadImage("menu.jpg", 1, Image.MidHandle)<br>	End<br>	<br>	Method OnUpdate()<br>		Select gameState<br>			Case STATE_MENU<br>			'Registering menu hotkeys'<br>				If KeyHit(KEY_ENTER)<br>					gameState = STATE_GAME<br>				End<br>			Case STATE_GAME<br>				If KeyHit(KEY_ESCAPE)<br>					gameState = STATE_MENU<br>				Else If KeyHit(KEY_U)<br>					gameState = STATE_UPGRADES<br>				Else If KeyHit(KEY_S)<br>					gameState = STATE_SHOP<br>				Else If MouseHit(MOUSE_LEFT)<br>					mouseclicks = mouseclicks + clicktotal<br>					PlaySound(ding,0, 0)<br>					<br>				End<br>			Case STATE_UPGRADES<br>				If KeyHit(KEY_ESCAPE)<br>					gameState = STATE_GAME<br>				Elseif KeyHit(KEY_S)<br>					gameState = STATE_SHOP<br>				End<br>				<br>			Case STATE_SHOP<br>				If KeyHit(KEY_ESCAPE)<br>				gameState = STATE_GAME<br>				Elseif KeyHit(KEY_U)<br>				gameState = STATE_UPGRADES<br>				End<br>			<br>		End	<br>	<br>	End	<br>	Method OnRender()<br>		Cls(0, 0, 0)<br>		<br>		Select gameState<br>		'Inserting graphics within game states<br>			Case STATE_MENU<br>				DrawText("Dominate the Market!", 320, 100, 0.5)<br>				DrawText("Press Enter to Play!", 320, 400, 0.5)<br>			Case STATE_GAME<br>				Cls(100, 100, 100)<br>				DrawText("$" +mouseclicks, 300, 125, 0.5, 0.5)<br>					FontHeight()<br>				DrawText("$ Per Click: $" +clicktotal, 300, 375, 0.5, 0.5)<br>				<br>			Case STATE_UPGRADES<br>				Cls(100, 200, 200)<br>			Case STATE_SHOP<br>				Cls(200, 200, 200)<br>		End<br>	End<br>End<br><br>'Starting app<br>	<br>Function Main:Int()	<br>	New ClickingGame()<br>End<br><br>This code which I'm not sure how I have implemented an error opens the browser but instead of running shows this error message!<br><br>Monkey Runtime Error : TypeError: Unable to get property 'LoadSurface' of undefined or null reference<br>P:/MonkeyXFree84f/modules/mojo/graphics.monkey&lt;239&gt;<br>D:/MonkeyXPro86e/Testgames/PershoreProject/main.monkey&lt;101&gt;<br>[Codebox/] <br><br></td></tr></table><br>
<a name="2125763"></a>

<a name="2125764"></a>

<a name="2125765"></a>

<a name="2125766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hard to say actually. Could you provide the full source code. I assume you posted the "main.monkey" file? I don't see an "Import mojo" there which is needed or do you import it in one of your other files?<br><br>In addition I see that you want to load a gif. Don't know if this works at all but at least you have to adapt your config.monkey for the html5 target then (take a note at the line with #IMAGE_FILES), otherwise trans will NOT copy that gif into your data folder of the compiled project:<br><pre class=code>
#HTML5_WEBAUDIO_ENABLED=True

#MOJO_AUTO_SUSPEND_ENABLED=True

#OPENGL_GLES20_ENABLED=False

#TEXT_FILES+="*.txt|*.xml|*.json"
#IMAGE_FILES+="*.png|*.jpg|*.gif"
#SOUND_FILES+="*.wav|*.ogg|*.mp3|*.m4a"
#MUSIC_FILES+="*.wav|*.ogg|*.mp3|*.m4a"
#BINARY_FILES+="*.bin|*.dat" 
</pre> <br><br></td></tr></table><br>
<a name="2125767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ewancordiner</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mojo is imported from mechanics however that is all that is in mechanics as of yet. <br><br></td></tr></table><br>
<a name="2125768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ewancordiner</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> [Code] <br>Building the projects in this solution one at a time. To enable parallel build, please add the "/m" switch.<br>Build started 17-Jan-17 6:25:27 PM.<br>Project "F:\MonkeyXPro86e\Testgames\PershoreProject\main.buildv86e\glfw3\msvc\MonkeyGame.sln" on node 1 (default targets).<br>ValidateSolutionConfiguration:<br>  Building solution configuration "Debug|Win32".<br>Project "F:\MonkeyXPro86e\Testgames\PershoreProject\main.buildv86e\glfw3\msvc\MonkeyGame.sln" (1) is building "F:\MonkeyXPro86e\Testgames\PershoreProject\main.buildv86e\glfw3\msvc\MonkeyGame.vcxproj" (2) on node 1 (default targets).<br>F:\MonkeyXPro86e\Testgames\PershoreProject\main.buildv86e\glfw3\msvc\MonkeyGame.vcxproj(18,3): error MSB4019: The imported project "F:\Microsoft.Cpp.Default.props" was not found. Confirm that the path in the &lt;Import&gt; declaration is correct, and that the file exists on disk.<br>Done Building Project "F:\MonkeyXPro86e\Testgames\PershoreProject\main.buildv86e\glfw3\msvc\MonkeyGame.vcxproj" (default targets) -- FAILED.<br>Done Building Project "F:\MonkeyXPro86e\Testgames\PershoreProject\main.buildv86e\glfw3\msvc\MonkeyGame.sln" (default targets) -- FAILED.<br><br>Build FAILED.<br><br>"F:\MonkeyXPro86e\Testgames\PershoreProject\main.buildv86e\glfw3\msvc\MonkeyGame.sln" (default target) (1) -&gt;<br>"F:\MonkeyXPro86e\Testgames\PershoreProject\main.buildv86e\glfw3\msvc\MonkeyGame.vcxproj" (default target) (2) -&gt;<br>  F:\MonkeyXPro86e\Testgames\PershoreProject\main.buildv86e\glfw3\msvc\MonkeyGame.vcxproj(18,3): error MSB4019: The imported project "F:\Microsoft.Cpp.Default.props" was not found. Confirm that the path in the &lt;Import&gt; declaration is correct, and that the file exists on disk.<br><br>    0 Warning(s)<br>    1 Error(s)<br><br>Time Elapsed 00:00:00.03<br>TRANS FAILED: Error executing '"C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe" /p:Configuration=Debug', return code=1<br>Done.<br>[/Code] <br><br></td></tr></table><br>
<a name="2125773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> GLFW doesn't seem to set up properly. Have you tried to build with MinGW instead of Visual Studio? The latter can sometimes pretty annoying when not correctly installed.<br><br>What about HTML5? Did that change help I suggested? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
