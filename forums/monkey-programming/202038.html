<!DOCTYPE html><html lang="en" ><head ><title >Eval</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Eval</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Eval</a><br><br>
<a name="2019533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there something like eval? I understand this is kind of hard to do, considering it generates code.<br><br>However; consider using the monkey parser (which is written in monkey; see modules/trans/parser.monkey) to write a monkey interpreter, which would just call all commands. After compilation to the target, this all would be compiled too, so you could evaluateMonkey() in that app on JS / CPP etc and it should work or am I wrong? <br><br></td></tr></table><br>
<a name="2019573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hima</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I understand your post correctly, then I think that wouldn't be an eval command. Eval should execute the code at run-time and not compile-time. <br><br></td></tr></table><br>
<a name="2019575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would kill for interpreted Monkey... <br><br></td></tr></table><br>
<a name="2019587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The aggressive code stripper might not provide the code you're trying to use, so no. <br><br></td></tr></table><br>
<a name="2019590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry if it's a stupid question but what is an eval and what is the practical use of it? Sounds interesting :) <br><br></td></tr></table><br>
<a name="2019591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hima</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> An eval command allows you to pass a string into it and it will execute that code at runtime. Usually this is available only for interpreted language like JavaScript or Ruby.<br><br>This can be used to implement 'code as resources' or allow you to make changes to your application without having to recompile the whole thing. <br><br></td></tr></table><br>
<a name="2019593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> So it a way to implement scripts? I can update code in a external text-file or at my server, then do a update from the running game and run that new piece of code? <br><br></td></tr></table><br>
<a name="2019609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Hima I don't think you understand me correctly; my point is that an interpreter written in Monkey, compiled to a target, would run interpreted Monkey on all target platforms, hence it would be possible to do this in a cross platform manner. If that makes sense :) <br><br>I am indeed looking for a Monkey REPL / scripting environment, which, most definitely, would speed up development A LOT for a lot of us. <br><br></td></tr></table><br>
<a name="2019617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought about something like this. monkey -&gt; monkey bytecode target-&gt; monkey bytecode interpreter <br><br></td></tr></table><br>
<a name="2019635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> But then you would have to compile again (namely to bytecode). I think the advantage of an interpreter is some fast prototyping. When you are done, you put it in your source code and compile  it for max performance. What would be the purpose of the bytecode (maybe i'm missing it). <br><br></td></tr></table><br>
<a name="2019649"></a>

<a name="2019650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hima</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Tibit<br>Yes, that would be possible. :D<br><br>@frank<br>Ah, I understand what you mean now. I figure it'd be really difficult though, but it sounds possible and make sense that writing an interpreter in Monkey would make it work in all platform. <br><br></td></tr></table><br>
<a name="2019675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. <br><br>In the sourcecode of Parser there actually is something called Eval; <br><br>Running this ; <br><br>Print Eval("2+2", Type.intType); 	<br><br>Works, but it can only do very primitive expressions and if you don't comment out ExitApp in Err it doesn't compile (I have no clue why). <br><br>It's a start though; kind of shows how to use the parser. Going to play with that some more :) <br><br></td></tr></table><br>
<a name="2019679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems the parser would need some serious overhaul to use it ; it's really focused at the moment to work with files and to not really be used for something something like this.  <br><br>I don't know if Mark thought about this (I bet he has); it would not be *too* much work to refactor the parser so it would be able to parse any Monkey string within the current or another specified environment. And after that it wouldn't be too hard to use that to eval the result. At least it doesn't *look* too difficult to me :) If Mark is not doing/planning it, I think i'll fork the parser and try to make it work. That would not be the preferred way of working as it means copying code at this point.<br><br>Edit: any way to get Mark his attention to give a short comment on this? <br><br></td></tr></table><br>
<a name="2019678"></a>

<a name="2019747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I don't know if Mark thought about this (I bet he has); it would not be *too* much work to refactor the parser so it would be able to parse any Monkey string within the current or another specified environment. And after that it wouldn't be too hard to use that to eval the result. At least it doesn't *look* too difficult to me :) <br></div><br>It's a HUGE undertaking.<br><br><pre class=code>Class Foo
  Method Bar()
  End
End

Function Main()
  Eval("New Foo.Bar()") ' doesn't work, because monkey never translates the Bar method
End</pre><br>It would require the entire file to be parsed and translated, including dead code.  Imagine if you imported an entire third party framework.  Would you want it to include all the parts you don't use?  This is the primary reason that Monkey doesn't have reflection. <br><br></td></tr></table><br>
<a name="2019870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's a shame if it's not possible though; it's very productive having such a language feature. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
