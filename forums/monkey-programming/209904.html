<!DOCTYPE html><html lang="en" ><head ><title >Convert from mojo1 to mojo2 question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Convert from mojo1 to mojo2 question</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Convert from mojo1 to mojo2 question</a><br><br>
<a name="2107072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to convert some mojo1 code to mojo2 code.<br>Because what I think is that MX2 will use the same mojo2 structure etc.<br><br>In mojo2 is every drawing function inside the Canvas class And/Or in the DrawList class.<br><br>What is then the best thing to do, in a situation that you have multiple classes in several files that are drawing/creating something on the window (canvas) now.<br><br>Just make one Global canvas variable an use that in all my other classes ?<br>(I did read that you have to avoid Globals...)<br><br>- Or do I have to create more then one canvas ? <br>(1 for the gui, one for the images, one for the font, etc)<br><br>- Or do I have to create one field canvas inside the App, and pass that variable in each New(_canvas:Canvas) to each other Class. (think this is the best)<br><br>- Or do I have to Extends DrawList for all the classes that need that functions ?<br>(but that conflicts with some classes that already have a extend Class)<br><br>2.) <br>For example i'm using this gui class <br><a href="http://www.monkey-x.com/Community/posts.php?topic=8619" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=8619</a><br><br>mojo<br><pre class=code>
Class GUI_Colors
	Private
	Method Reset:Void(); SetColor 255, 255, 255; End Method
	Method Base:Void(); SetColor 68, 134, 250; End Method
	Method Dark:Void(); SetColor 39, 59, 155; End Method
	Method Lite:Void(); SetColor 100, 200, 255; End Method
End Class
</pre><br>mojo2<br><pre class=code>
Class GUI_Colors Extends DrawList
Private
	Method Reset:Void(); SetColor 255, 255, 255; End Method
	Method Base:Void(); SetColor 68, 134, 250; End Method
	Method Dark:Void(); SetColor 39, 59, 155; End Method
	Method Lite:Void(); SetColor 100, 200, 255; End Method
End Class
</pre><br><br>that works I think, but then the next error:<br><br>Error : Expression has no scope<br><br><pre class=code>
Class GUI_Shapes Extends Canvas
 SetBlendMode BlendMode.Additive ' &lt;-- error line
 DrawText text, x, y
 SetBlendMode BlendMode.Alpha
End Class
</pre><br><br>So before i'm going to convert, I would more info about this. <br><br></td></tr></table><br>
<a name="2107203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would like to know this as well.<br><br>Another option would be that the Render Method returns a DrawList. <br><br></td></tr></table><br>
<a name="2107205"></a>

<a name="2107207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> @GC-Martijn<br>Right now I am using 'one' canvas for my GUI. I am not sure if I will keep it this way but it is probably the most efficient way to go. The issue for me comes down to things like in-window rotation of the canvas and other canvas features. I am thinking that (at least the way I am approaching it ) it will work with one canvas based in my window class (which essentially is a canvas). My setup is based on OddMod and Col's DX11 driver (BlitzMax). Both allow me to rotate the display (images) and with the use of SetViewPort() I just set the view port and rotate display on a window image draw. I plan to do the same for mojo2 where I will just use one canvas and SetScissors()/Matrix and rotate the canvas (if needed) then draw images for each image in my window draw list and then reset after window image draws are done. Essentially all I am doing is using one canvas, setting view port and then drawing for each window in the window list. It works great in BltzMax and should work well for mojo2.<br><br>Edit - You can see my little GUI test of my mojo2 conversion here using one canvas.<br><a href="http://www.monkey-x.com/Community/posts.php?topic=9788" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=9788</a> <br><br></td></tr></table><br>
<a name="2107204"></a>

<a name="2107208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> But what do you do with to object Canvas?<br>Did you make it a global, so you can access,update it in all classes ?<br>Or do you pass the canvas reference to each class, where you need it.<br><br>My game is only one window canvas at the moment, but severall classes and methods etc. <br><br></td></tr></table><br>
<a name="2107210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can have a DrawingList property in each class, and set a reference to your canvas there. Or pass it in each class constructor and keep it, so you avoid having a global and having to pass it every time <br><br></td></tr></table><br>
<a name="2107211"></a>

<a name="2107212"></a>

<a name="2107213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @GC-Martijn<br>I pass the reference to a method within a class at the moment. So for example when using OpenWindow() in my window class I pass along the canvas object. All other window class methods can access the canvas object via a field.<br><br>As far as a canvas global I prefer to use a field within a class that extends the App class. So in my case the Monkey program using my GUI framework is responsible for constructing/initializing the canvas object and passing it to the GUI framework. Whether the canvas is a global or a field is up to the Monkey program using the GUI framework. What I was describing is what I do to support realtime dynamic windows (drawing lots of images every frame) in a GUI window. So the GUI you list would have to allow a canvas to be passed to it (edit- or perhaps wrap the GUI into a class that contains the canvas object).<br><br>As a rule I avoid adding to lists and thus extending searches or iterations through them. It is costly and can be avoided with good architecture and design, Mojo2 is no different in that the draw list class keeps a list of canvases (I think :) )  which in turn has a list of images associated. So compounding all those list iterations adds up quickly and should be avoided. Using on one canvas can reduce this overhead. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
