<!DOCTYPE html><html lang="en" ><head ><title >Networking</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Networking</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Networking</a><br><br>
<a name="2115723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cgrossi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello. Does anyone have any sample code to do networking? A simple one. :-)<br><br>Thanks <br><br></td></tr></table><br>
<a name="2115728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to go low-level, and get into the gritty details yourself, there's some great examples in your Monkey installation already.<br><br>Check out the "<a href="https://github.com/blitz-research/monkey/tree/develop/bananas/mak/echoserver_udp" target="_blank">bananas/mak/echoserver_udp</a>" and "<a href="https://github.com/blitz-research/monkey/tree/develop/bananas/mak/echoserver_tcp" target="_blank">bananas/mak/echoserver_tcp</a>" folders. You can find these in your Monkey installation's folder as well as the links I posted. Those show you how to create a client and server pair, and how to send messages between them (Echo it back).<br><br>For something more simplistic, but higher-level (Also requires the use of git), checkout my '<a href="https://github.com/Regal-Internet-Brothers/networking#networking" target="_blank">regal.networking</a>' module. To see just how simple that one gets, <a href="https://github.com/Regal-Internet-Brothers/networking/tree/master/Examples" target="_blank">checkout the examples</a>, or view <a href="https://regal-internet-brothers.github.io/monkey/docs/Modules_regal.networking" target="_blank">the docs, here</a>.<br><br><b>If you're looking for a good introductory thread, <a href="http://www.monkey-x.com/Community/posts.php?topic=10321" target="_blank">click here</a>.</b> I go over my networking module in that thread as well, and in better detail. For a bit of networking history in Monkey, take a look at <a href="http://www.monkey-x.com/Community/posts.php?topic=10245" target="_blank">this thread</a>.<br><br>If you have any questions, feel free to ask. <br><br></td></tr></table><br>
<a name="2115726"></a>

<a name="2115727"></a>

<a name="2115725"></a>

<a name="2115724"></a>

<a name="2115729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cgrossi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi..<br>ok, indeed I've already saw your post and saw the samples, but, as this topic is new for me in monkey-x, I couldn't understand well. so, what I'm looking for is something very basic. what I need, in the first part, is to make a listener that will be checking a port to receive messages and checking another port to send messages. having this done, I can move on with the rest of the code. could I make myself clear? <br><br></td></tr></table><br>
<a name="2115748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cgrossi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> hello... anybody?? <br><br></td></tr></table><br>
<a name="2115757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @cgrossi: The echo server examples literally have the code you're looking for. In addition to this, you're not entitled to anything from me. On top of celebrating my birthday with family, I was at the gym, then I had to do this crazy thing called sleeping afterward (Probably a significantly different time zone), along with having other obligations. I don't always have the time to write code for other people. I'm sorry I wasn't able to post another example.<br><br>If you want something with <i>raw</i> <u>sockets</u>, where you need to use '<a href="http://www.monkey-x.com/docs/html/Modules_brl.datastream_DataStream.html" target="_blank">DataStreams</a>' and '<a href="http://www.monkey-x.com/docs/html/Modules_brl.databuffer_DataBuffer.html" target="_blank">DataBuffers</a>' as fixed-size containers, then you just need to use <i><a href="http://www.monkey-x.com/docs/html/Modules_brl.datastream_DataStream.html" target="_blank">the aforementioned 'Stream' class</a></i>. You could also use a pool-based system, and write to buffers and streams, then send them out. This is preferred, since you're not technically allowed to use a 'DataBuffer' when it's in transit (Being sent asynchronously). You'll also need to keep in mind the networking guidelines of the targets you're working on, because some require the use of callbacks (Asynchronous commands).<br><br>The point I'm getting at is that this isn't going to be simple the bigger the software stack gets. If you're okay with building your own, then please use '<a href="http://www.monkey-x.com/docs/html/Modules_brl.socket_Socket.html" target="_blank">brl.socket</a>'. The echo-server examples I posted about initially have two classes each, they handle the server and client portions, and are great points to start.<br><br>Now, if you want to do something simpler, where the codebase already exists, but you have to use an existing protocol/format underneath, then try '<a href="https://github.com/Regal-Internet-Brothers/networking#installation" target="_blank">regal.networking</a>' or '<a href="https://github.com/ferddi/pbnet-monkey" target="_blank">PushButton</a>'. If you're interested in these, <a href="https://git-scm.com/downloads" target="_blank"><i><b>you'll probably want git</b></i></a>. I can't say much for 'PushButton', but the other higher-level choice is my own module, and I know it works. I've already spent plenty of my time <a href="https://regal-internet-brothers.github.io/monkey/docs/Modules_regal.networking" target="_blank">documenting</a> that, and <a href="https://github.com/Regal-Internet-Brothers/networking/tree/master/Examples" target="_blank">making examples</a> for it. The docs are available online, and locally, assuming you rebuild your docs (Under "Help" in Ted).<br><br>There's not much else I can say, unless you want me to make a tutorial. I've already gone over the basic concepts in my other post, so it's not out of the question. I just don't always have time. I'm sorry I wasn't able to make another example for your specific case, but I'm just not able to right now.<br><br>If someone else could help further, I would appreciate it. <br><br></td></tr></table><br>
<a name="2115756"></a>

<a name="2115760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PixelPaladin</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImmutableOctet: Happy Birthday!<br><br>Nice modules. Why aren't they in the module registry? I have searched for something like this for quite a while â€¦ <br><br></td></tr></table><br>
<a name="2115761"></a>

<a name="2115762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @PixelPaladin: Oh yeah, that does exist, doesn't it? I'd only have the main "module" (Basically a namespace) listed if I were to ask, anyway. Glad you like them, and thank you. <br><br></td></tr></table><br>
<a name="2115764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cgrossi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImmutableOctet: Thank you a lot for your time. I'll take a look more closely to the samples. But the most difficult thing I saw so far is to receive a message. Some how I'm not been able to receive a message.. <br><br></td></tr></table><br>
<a name="2115772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright, I'm working on a demo, give me <strike>a bit</strike> a while to sort it out. <br><br></td></tr></table><br>
<a name="2115768"></a>

<a name="2115799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sicilica</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If socket programming seems pretty new and foreign, I would recommend just making your own simple echo server or other example in C first. The brl module just wraps the POSIX socket functions exposed by your OS, and imho it's easier to understand if you do it in native C first to get the concepts down because the Monkey implementation is not nearly as intuitive (although it's obvious what it's doing if you understand the original POSIX spec). <br><br></td></tr></table><br>
<a name="2115810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, so, longer than expected, but I created a <a href="https://github.com/Regal-Internet-Brothers/transport" target="_blank">new module</a>, and <a href="https://github.com/Regal-Internet-Brothers/transport/blob/master/Examples/Basic_IO.monkey" target="_blank">demo</a> for this. It's called '<a href="https://github.com/Regal-Internet-Brothers/transport" target="_blank">transport</a>', and it's meant to abstract the specifics of storage and connection. From there, it's completely unmanaged. Currently, the API isn't final, and only supports TCP. You can download the latest version, and <b>try it out for yourself by <a href="https://github.com/Regal-Internet-Brothers/transport/archive/master.zip" target="_blank">clicking here</a></b>.<br><br>I intend to work on it more over time, but this should get people who are interested started with networking in Monkey. Just keep in mind that I already have 'regal.networking', so there's no need to take a higher level approach with this module. That's up to the user.<br><br>The source provided is partially commented, but isn't fully explained. That's definitely on the list of things to do, though. What's available now works, but it's a proof of concept for the final product, which may or may not be merged into 'regal.networking' in some way. Everything was written using the 'brl' modules (And possibly other official modules) only. There's no dependency on <i>'<a href="https://github.com/Regal-Internet-Brothers/regal-modules" target="_blank">regal</a>'</i> at this time.<br><br>This is a much smaller and much more understandable codebase for someone getting into this, so I hope it helps. If you have any further questions, feel free to ask. <br><br></td></tr></table><br>
<a name="2115809"></a>

<a name="2115822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cgrossi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, ImmutableOctet.<br><br>Thank you very much for your time and for your sample. I'll take a look, although I'm looking for something way too more simple, just to understand how to send and receive messages.<br>But, anyway, I'm very appreciate for your dedication and time spent on this subject. <br><br></td></tr></table><br>
<a name="2115829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @cgrossi:<br><br>I actually forgot to commit the latest version of "transport.monkey", so you might want to grab that. At any rate, I'm glad you like the sample.<br><br>The pattern is more or less this simple, though:<br><br>* New Server(Port, Application) -&gt; Check 'IsOpen'.<br>* New Client(IP, Port, Application) -&gt; Check 'IsOpen'.<br><br>To send a message:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Local P:= ClientObject.AllocatePacket()

P.WriteLine("Hello world.")

ClientObject.SendAsync(P)
</textarea><br><br>Then, when you get the message:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Print(P.ReadLine()) ' Prints: "Hello world"
</textarea><br><br>And of course, call 'UpdateAsyncEvents' in 'OnUpdate'. You may also want to change the suspend-mode of Mojo in your configuration-file, but that may not be necessary.<br><br>There's a few other details, but that's basically it. You can use mostly the same code on each end, just use 'Client' or 'Server'. Messages can be written to like any other stream. 'Packets' are given back automatically if you use 'SendAsync', and if not, you can use 'Free' on it when you're done. Using 'brl.socket' manually would be more hassle. Just implement a few callbacks, and it works. The source is available along with it, and should be straight forward enough. To set up the demo, just move the file into the main directory, then rename the import at the top from 'regal.transport' to just be 'transport'. It'll run with no issues.<br><br>If you're having trouble understanding callbacks, they're just methods that the 'Server' and 'Client' types call. Again, this is about as low level as it gets without following bad practices, or dealing with 'brl.socket' directly. For something nicer, you'll need to use 'regal.networking' and co.<br><br>Well, whatever option you choose, I hope this helps as an example. <br><br></td></tr></table><br>
<a name="2115828"></a>

<a name="2115827"></a>

<a name="2118135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kaltern</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hijacking old thread :P  <br><br>I'm using the regal networking module, and I'm getting an error I can't figure out in the 'engine' source - the line:<br><pre class=code>' Constructor(s) (Public):
	Method New(PacketSize:Int=Default_PacketSize, PacketPoolSize:Int=Default_PacketPoolSize, FixByteOrder:Bool=Default_FixByteOrder, PingFrequency:Duration=Default_PingFrequency, MaxPing:NetworkPing=Default_MaxPing, MaxChunksPerMegaPacket:Int=Default_MaxChunksPerMegaPacket, PacketReleaseTime:Duration=Default_PacketReleaseTime, PacketResendTime:Duration=Default_PacketResendTime) ' LaunchReceivePerClient:Bool=Default_LaunchReceivePerClient
</pre><br>is throwing up an error: <pre class=code>Error : Type 'Duration' not found</pre><br>Is this an error due to the Monkey version being too new for these modules, or am I missing something obvious? <br><br></td></tr></table><br>
<a name="2118144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, Kaltern. If I recall correctly, the 'Duration' type is defined in 'regal.eternity', meaning you need to install the modules by <a href="https://github.com/Regal-Internet-Brothers/regal-modules#installation" target="_blank">following this guide</a>, then running "Update_Submodules_Pull.bat" if the sub-modules are outdated.<br><br><b>With that said, judging by your <a href="http://www.monkey-x.com/Community/posts.php?topic=10461" target="_blank">other post</a>, I'm guessing you're looking for a lower-level solution. I'll be posting a response shortly</b>. <br><br></td></tr></table><br>
<a name="2118140"></a>

<a name="2118149"></a>

<a name="2118150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kaltern</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey good to see you're still around!  I believe I have followed the installation instructions and tried that pull request but still getting the error.  Looking at the logs it shows that it can't find modules within the regal folder, it's very recusrive (I check one module, and another throws up an error), so it's obviously a pathing issue... I'm just not sure where I've gone wrong.<br><br>I will also reply to my other thread (I don't like to open more than one thread, but I thought resurecting this one might be more relevant; I would probably like to use Transport as is is easier to get my head around, so I'll explain the issue over there :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
