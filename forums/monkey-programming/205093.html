<!DOCTYPE html><html lang="en" ><head ><title >textured poly</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >textured poly</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >textured poly</a><br><br>
<a name="2056145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pantson</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br>I've searched the forums and cant see any answer to this.<br><br>DrawImagePoly img,x1,y1,x2,y2,x3,y3,x4,y4,frame<br><br>I've created a DrawImagePoly myself but as usual it wont be optimised and there is hardware that can do this in a flash.<br>Is there a similar built-in command in Monkey for cross platform use?<br><br>many thanks <br><br></td></tr></table><br>
<a name="2056156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> there is not. <br><br></td></tr></table><br>
<a name="2056205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pantson</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just hacking at mojo now to add a DrawImagePoly command.<br>first attempt for android seems to be working<br><br><img src="http://i43.tinypic.com/2vt70xx.jpg"> <br><br></td></tr></table><br>
<a name="2056258"></a>

<a name="2056259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pantson</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have added a DrawImageQuad utilising GLES. Very happy with the results so far..<br>Textured road surface is a lot faster at drawing and keeps up FPS<br><br><iframe width="560" height="345" src="http://www.youtube.com/embed/ad_G-xixYZE" frameborder="0" allowfullscreen></iframe><br><br>@MarkSibly.. are you wanting the Android code for Mojo? <br><br></td></tr></table><br>
<a name="2056256"></a>

<a name="2056264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you put the source online in github or google code or something? I need this and when I have some time I can write the code for the other targets (besides XNA which I don't use). <br><br></td></tr></table><br>
<a name="2056283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not clone the official source and add it that way :) ?<br><br>Would definitely like this feature. <br><br></td></tr></table><br>
<a name="2056286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Me too! <br><br></td></tr></table><br>
<a name="2056408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Qcat</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Me To! <br><br></td></tr></table><br>
<a name="2057210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Me three, oh wait I already participated.. <br><br></td></tr></table><br>
<a name="2057229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please feel free to post the source for this.<br><br>&gt; Why not clone the official source and add it that way :) ?<br><br>Native mojo android code is not in the repos.<br><br>Ideally, stuff like this should probably be added via some kind of extension mechanism, so that mojo module code doesn't have to be hacked/modified. But providing such a mechanism for mojo monkey code AND all native targets is a reasonably big job, esp. if you want to be able to share internal native VBs etc.<br><br>But this is useful functionality that would be nice to have in core Mojo, although I'd be more inclined to go for something more flexible like:<br><br>DrawPoly( verts:Float[],texture:Image,texcoords:Float[] )<br><br>My only concern is this probably isn't doable on all targets - well, easily/usefully anyway. Not sure, will look into it. <br><br></td></tr></table><br>
<a name="2057231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh yes texcoords would be good. What about optional vertex colours/alpha too? (For supported targets) <br><br></td></tr></table><br>
<a name="2057243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Forgot about only public files on repo. How would an extension system potentialy work then? <br><br></td></tr></table><br>
<a name="2057383"></a>

<a name="2057384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Erik</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would really like a <br><br>DrawPoly( verts:Float[], colors:Int[] )<br><br>for simple gradients. You can do a lot with just that, think illustrator images. <br><br></td></tr></table><br>
<a name="2057848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Erik</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is an XNA version of DrawRectColor as an example of what I mean:<br><br><pre class=code>
public virtual int DrawRectColor( float x,float y,float w,float h,int col1,int col2,int col3,int col4)
  {
		if( primType!=4 || primCount==MAX_QUADS || primTex!=null ){
			Flush();
			primType=4;
			primTex=null;
		}

		float x0=x,x1=x+w,x2=x+w,x3=x;
		float y0=y,y1=y,y2=y+h,y3=y+h;

		if( tformed ){
			float tx0=x0,tx1=x1,tx2=x2,tx3=x3;
			x0=tx0 * ix + y0 * jx + tx;
			y0=tx0 * iy + y0 * jy + ty;
			x1=tx1 * ix + y1 * jx + tx;
			y1=tx1 * iy + y1 * jy + ty;
			x2=tx2 * ix + y2 * jx + tx;
			y2=tx2 * iy + y2 * jy + ty;
			x3=tx3 * ix + y3 * jx + tx;
			y3=tx3 * iy + y3 * jy + ty;
		}

		int vp=primCount++*4;

    var cl1 = new Color((byte)(col1 &gt;&gt; 16), (byte)(col1 &gt;&gt; 8), (byte)(col1 &gt;&gt; 0), (byte)(col1 &gt;&gt; 24));
    var cl2 = new Color((byte)(col2 &gt;&gt; 16), (byte)(col2 &gt;&gt; 8), (byte)(col2 &gt;&gt; 0), (byte)(col2 &gt;&gt; 24));
    var cl3 = new Color((byte)(col3 &gt;&gt; 16), (byte)(col3 &gt;&gt; 8), (byte)(col3 &gt;&gt; 0), (byte)(col3 &gt;&gt; 24));
    var cl4 = new Color((byte)(col4 &gt;&gt; 16), (byte)(col4 &gt;&gt; 8), (byte)(col4 &gt;&gt; 0), (byte)(col4 &gt;&gt; 24));

		vertices[vp  ].Position.X=x0;vertices[vp  ].Position.Y=y0;
		vertices[vp  ].Color=cl1;
		vertices[vp+1].Position.X=x1;vertices[vp+1].Position.Y=y1;
		vertices[vp+1].Color=cl2;
		vertices[vp+2].Position.X=x2;vertices[vp+2].Position.Y=y2;
		vertices[vp+2].Color=cl3;
		vertices[vp+3].Position.X=x3;vertices[vp+3].Position.Y=y3;
		vertices[vp+3].Color=cl4;

		return 0;
	}
</pre><br><br>Add DrawRectColor to graphicsdevice.mojo, graphics.mojo and the above to mojo.xna.cs then use it like this:<br><br><br><pre class=code>
  Function ColorToInt:Int(r,g,b, a:Int = 255)
    Return (a Shl 24) | (r Shl 16) | (g Shl 8) | b
  End

  Method OnRender()
    Cls(0,0,0)
    DrawRectColor(MouseX,MouseY,200,200,ColorToInt(255,0,0),
                                        ColorToInt(0,255,0),
                                        ColorToInt(0,0,255),
                                        ColorToInt(255,255,255))
  End
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
