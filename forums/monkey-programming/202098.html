<!DOCTYPE html><html lang="en" ><head ><title >Why aren't my numbers random?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Why aren't my numbers random?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Why aren't my numbers random?</a><br><br>
<a name="2020072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my OnCreate I'm setting Seed=Millisecs() and then I'm using Rnd(range) to get about 5 random numbers at the beginning of the game.<br><br>The only problem is that every time I run the app, the same 5 random numbers come up.<br><br>Is it something to do with Millisecs? <br><br></td></tr></table><br>
<a name="2020073"></a>

<a name="2020074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep its due to Millisecs, Monkey's Millisecs start from the start of the application - not the system time.<br><br>That's why I added RealMillisecs to Diddy ages ago ;)<br><br><pre class=code>Seed = RealMillisecs()</pre> <br><br></td></tr></table><br>
<a name="2033304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SlopeOak</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there still no better solution for this than using platform specific code? <br><br></td></tr></table><br>
<a name="2033306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fryman</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> time how long it takes for the user to take an action then set seed based on that? <br><br></td></tr></table><br>
<a name="2033307"></a>

<a name="2033308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SlopeOak</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That'd work for cases where you don't need the rand on startup, yes.  Thanks for the idea!<br><br>Just seems odd that this is missing, as it's something a large percentage of games/apps do. <br><br></td></tr></table><br>
<a name="2033349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> How could you do it without platform-specific code?  You are looking for information (a random seed) that cannot be provided by a deterministic programming language!<br><br>Of course RealMillisecs() could be put in mojo, but that is platform specific code just as much as Diddy.<br><br>The only way to do it without platform specific code is to ask the user to enter a value.  And all user input involves platform specific code anyway! <br><br></td></tr></table><br>
<a name="2033364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Of course RealMillisecs() could be put in mojo, but that is platform specific code just as much as Diddy. <br></div><br>All translated Monkey code is platform specific, and Mojo is full of externs.  As long as all your target platforms support the functionality and they work in pretty much the same way, it's fine. <br><br></td></tr></table><br>
<a name="2033371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SlopeOak</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess I meant "how can you do it with just monkey/mojo" -- I'm aware that there's platform specific code under the hood :)<br><br>Sounds like it can't be done at the moment.  Thanks! <br><br></td></tr></table><br>
<a name="2033380"></a>

<a name="2033381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since diddy is free I have no idea why it is not already included in Monkey, but I assume it has more to do with that Mark wants to only include things that he can support, and to do that he need to research this on all platforms, check for unintended side effects, review the code and also add this for every new target ever implemented.<br><br>I do recognise the logic behind not wanting to install an external library (Diddy or other) just because one happens to have need for 1 out of many functions that library offers, plus there no guarantee or knowing what the code really does if it is not documented properly. <br><br>That said - Monkey is really smart when it comes to imports. So importing the whole Diddy framework and only using RealMillisescs() should not give you any overhead - since only the code in that very function should be translated.<br><br><div class="quote"> Sounds like it can't be done at the moment. <br></div><br>If you goal is to have said functionality, it is very doable. <br><br>1. Download Diddy into your module folder (takes you max 2 minutes)<br>2. Write "import Diddy" at top of the file/module where you want to use Realmillisecs()<br>3. Add "Real" infront of Millisecs() where desired<br><br>And what that has to do with only using mojo I do not get. What is interesting tough is why do you not want to use external libraries? (No offence meant, just curious really) <br><br></td></tr></table><br>
<a name="2033378"></a>

<a name="2033379"></a>

<a name="2033377"></a>

<a name="2033401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes Diddy is very easy to plug in and use part of or all of.  Only issue is adding to an existing project you could find naming conflicts. <br><br></td></tr></table><br>
<a name="2033402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Grey Alien, any good design idea on how to avoid naming conflicts?<br><br>I have come to rely on the Alias keyword for this, but maybe not everyone knows how to best use that?<br><br>I know in Blitzmax I always added a prefix, but now days I rarely use "global" functions, and so clashes are less likely I guess. <br><br></td></tr></table><br>
<a name="2033410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If RealMillisecs() is all I want I import diddy.functions, which contains only a few names that are unlikely to clash with anything. <br><br></td></tr></table><br>
<a name="2033419"></a>

<a name="2033420"></a>

<a name="2033421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Most of the time, you wont need to worry about naming conflicts and if one does pop up you will just to prefix which module name you want to use. For example:<br><br>Diddy:<br>[monkeycode]Global game:DiddyApp[/monkeycode]<br>Your code:<br>[monkeycode]Global game:MyGameApp[/monkeycode]<br>And when you use them:<br>[monkeycode]diddy.game = New DiddyApp<br>myfile.game = New MyGameApp[/monkeycode]<br>BTW I am thinking of cleaning up the functions file in the future... so watch out :P <br><br></td></tr></table><br>
<a name="2033465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dima</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I guess I meant "how can you do it with just monkey/mojo" --  <br></div><br><br>How about storing millisecs using mojo's string saving capabilities, then seeding the random function by loading that value.  Next value saved would be initial value + millisecs etc.  <br><br>Basically it's kind of the same thing as it is now; the first execution would produce same results but every consecutive run would 'continue' the millisecs value from previous runs.  <br><br>Obviously there are flaws.  Losing the saved data would reset the seed back to the 'initial' run state.  Also, you're still not seeding with a random value, but at least the numbers should be different from run to run.<br><br>I have not tested this but in theory I don't see why not?  There might be more that can be done here - haven't had the time to think it over though.<br><br>Cheers,<br>Dmitriy <br><br></td></tr></table><br>
<a name="2033464"></a>

<a name="2033430"></a>

<a name="2033456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, Dmitri's solution is fine except for the issue of losing saved data, so long as the number of calls to Rnd() depends on user actions, as will be the case with most games.<br><br>But RealMillisecs() (or whatever its future replacement is!) works fine and is probably the simplest option. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
