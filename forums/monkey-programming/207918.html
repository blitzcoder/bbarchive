<!DOCTYPE html><html lang="en" ><head ><title >Overriding a Global ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Overriding a Global ?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Overriding a Global ?</a><br><br>
<a name="2078445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sebastien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi evereyone.<br><br>I'm creating a platform game and I have a issue with globals...<br><br>There's a main class 'Brick', and many subclasses that have their own designs and behaviors. In this main class I'd like to put as many methods as possible, which will be inherited by subclasses, so it will avoid to write code many times. Each subclass has a 'img:Image' variable that is global, and loaded at the start to be accessible from each instance. The problem is when I create methods or functions in the main class, I have a error, which is that there's no 'img' variable. I can't put a global 'img' in the main class, as it will be specific to each subclass. Is there a way to make a global and override it in the subclasses ? Thanks very much. <br><br></td></tr></table><br>
<a name="2078471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sebastien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In fact I can override a global, but in the inherited method it still refers to the superclass version of 'img', is there a way to resolve it ? Thanks. <br><br></td></tr></table><br>
<a name="2078482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think so.  What you can do is make an abstract GetImage:Image() function which returns a different global image for each subclass. <br><br></td></tr></table><br>
<a name="2078483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sebastien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, than's what I've done, but as a method, since I have a function that loads the image file to be called first. As a function it has resulted a memory access violation, because the 'img' is null at start (I think).<br><br>Class CannonBulletSwitchBrick Extends Brick<br>	<br>		Global img:Image <br>		<br>		Method GetImage:Image()<br>					<br>			Return Self.img<br>						<br>		End<br>				<br>		Function Load:Int()<br>		<br>			img = LoadImage("monkey://data/brick_cannon.png")<br>						<br>			Return 0<br>				<br>		End<br><br>End <br><br></td></tr></table><br>
<a name="2078489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, you can't call it until the images have been loaded.  But you shouldn't be trying to draw bricks until then anyway!<br><br>If you're unsure whether an image will be present at rendering time, check for null whenever you draw it, then you can draw a placeholder if necessary.<br><br>Your way is fine too - you still have to load the image before you can use it, <br><br></td></tr></table><br>
<a name="2078490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sebastien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I load the data at the start anyway, so it works fine. The next step will be to load the level and draw each brick dynamically, probably from a XML file. <br><br></td></tr></table><br>
<a name="2078529"></a>

<a name="2078530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Markus</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> it looks more like this, so you have no field img inside Class , means Self. is wrong<br><br>Global img:Image<br><br>Class CannonBulletSwitchBrick Extends Brick<br><br>Method GetImage:Image()<br><br>Return img<br><br>End <br><br></td></tr></table><br>
<a name="2078547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sebastien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're right, it was juste an attempt to resolve my issue. <br><br></td></tr></table><br>
<a name="2078551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Markus</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> i not really understand your issue.<br>but you can also share the image object and use a field.<br>this field img should not exist also in brick class because the brick struct will be include in Bla Class<br><br>Class Bla Extends Brick<br>field img:Image<br>Function Create:Bla(img:Image)<br> local o:Bla = new Bla<br> o.img=img<br>Return o<br>end<br><br>local img = LoadImage("monkey://data/brick_cannon.png")<br>local x:Bla= Bla.Create(img) <br><br></td></tr></table><br>
<a name="2078552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way, I meant an abstract GetImage() method, as functions cannot be abstract.  I have a tendency to use the terms interchangeably as when I started everything was called a function... <br><br></td></tr></table><br>
<a name="2078563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sebastien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It was not really a issue, but I wanted to spare code in each subclass, as there will be several types of bricks. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
