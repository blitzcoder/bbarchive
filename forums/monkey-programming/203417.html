<!DOCTYPE html><html lang="en" ><head ><title >How to initialize a 2 dimension array ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to initialize a 2 dimension array ?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >How to initialize a 2 dimension array ?</a><br><br>
<a name="2035772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there,<br><br>I have a class with a field such :<br><br><pre class=code>Field data:T[][] 	' The internal representation of the grid.</pre><br><br>And then i want to initialize the data array in the constructor. But i dunno how to do that. I though it was :<br><br><pre class=code>Self.data = New T:[width][height]</pre><br><br>But it doesnt seem to work. I suspect the "New T" to not working in Monkey. T is a generic. Any ideas ?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2035771"></a>

<a name="2035769"></a>

<a name="2035768"></a>

<a name="2035766"></a>

<a name="2035767"></a>

<a name="2035776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think i found the solution.<br><br><pre class=code>Self.data =[New T[width], New T[height]]</pre> <br><br></td></tr></table><br>
<a name="2035777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could try this:<br><br>[monkeycode]	'summary: init a 2d array<br>	Function CreateArray:T[][](rows:Int, cols:Int)<br>		Local a:T[][] = New T[rows][]<br>		For Local i:Int = 0 Until rows<br>			a[i] = New T[cols]<br>		End<br>		Return a<br>	End[/monkeycode] <br><br></td></tr></table><br>
<a name="2035778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah however this would require a loop. The idea was to get the array ready when the grid is built. <br><br>However, i will use your exemple for a grid reset method.<br><br>Thanks! :) <br><br></td></tr></table><br>
<a name="2035785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> however your post no 2 will not give you the results you are looking for. :)<br><br>[edit]<br><br>that example will produce an array with two columns. one column of length "width" and the other of length "height". <br><br></td></tr></table><br>
<a name="2035784"></a>

<a name="2035783"></a>

<a name="2035782"></a>

<a name="2035781"></a>

<a name="2035779"></a>

<a name="2035780"></a>

<a name="2035789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have already answer to a similar post but it was not with a constructor.<br>but sometime simple solution are good one. <br><br></td></tr></table><br>
<a name="2035791"></a>

<a name="2035792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matty</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or just use a single dimensioned array and calculate the x/y position manually:<br><br><pre class=code>

Local width:int = 7 'examples
Local height:Int = 5 'examples
Local myarray:Int[width * height]

Local index:int
Local x:int
Local y:int

'assuming a particular x/y coordinate in the grid where x/y go from 0 to width-1, height-1

index = x + y * width

'and to go back from the index to an x/y coordinate:

x = index mod width
y = (index - x) / width



</pre> <br><br></td></tr></table><br>
<a name="2035799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Multi-dimensional arrays in Monkey require a loop whether you like it or not.<br><br>A 2D array is a 'thing' (it's not exactly an object, but it must be 'constructed' like one) that contains a collection of 1D arrays, each of which must be individually 'constructed'.  Then each 1D array contains a collection of whatever you wanted to put in your array.  If those are objects (as distinct from primitives like ints) they must be constructed too.  <br><br>So loops are more-or-less inescapable.  Making a template like therevills suggests above is the best approach.  [Depending on what you are planning, you might want to construct the individual objects too - the code above generates an array of nulls.] <br><br></td></tr></table><br>
<a name="2035831"></a>

<a name="2035832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know they require a loop but for initialization i think it is a bit overkill.<br><br>I mean what wrong with :<br><br><pre class=code>Field data:T[][] = New T:[width][height]</pre><br><br>I think it do exactly what its supposed to do which is initialize an array of array of T. The result gonna be.. if you take this code :<br><br><pre class=code>Field data:T[][] = New T:[4][4]</pre><br><br>The result are :<br><br>[0][1][2][3][4]<br> ^  ^  ^  ^  ^<br>[0][0][0][0][0]<br>[1][1][1][1][1]<br>[2][2][2][2][2]<br>[3][3][3][3][3]<br>[4][4][4][4][4]<br><br>That why i see the first array as the width then the other array as the height.<br><br>So if your doing  data[1][2] You get the second col and the third row (since its based on 0)<br><br><pre class=code>Local myarray:Int[width * height]</pre><br><br>Is the same thing as my exemple. (See <a href="http://stackoverflow.com/questions/1242705/performance-of-2-dimensional-array-vs-1-dimensional-array)" target="_blank">http://stackoverflow.com/questions/1242705/performance-of-2-dimensional-array-vs-1-dimensional-array)</a> its just that i find the 2D array a bit less confusing when it come to indexing that is when you talk about a grid. <br><br></td></tr></table><br>
<a name="2035833"></a>

<a name="2035834"></a>

<a name="2035835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>however your post no 2 will not give you the results you are looking for. :)<br><br>[edit]<br><br>that example will produce an array with two columns. one column of length "width" and the other of length "height".  <br></div><br><br>Why ? Sorry but i believe it actually do exactly what im looking for. :) it is initializing the first array as an array of T of width in size then for the second array an array of T of height in size. Which is perfect for the representation of a grid. (Well at least to me) <br><br></td></tr></table><br>
<a name="2035844"></a>

<a name="2035846"></a>

<a name="2035847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Why ? Sorry but i believe it actually do exactly what im looking for. :) it is initializing the first array as an array of T of width in size then for the second array an array of T of height in size. Which is perfect for the representation of a grid. (Well at least to me) <br></div><br>The number of elements in a grid is width*height.  What you have done is to create enough elements for width PLUS height.  A loop is the best way to generate a grid structure in an array-of-arrays situation.<br><br>Personally I tend to avoid them altogether; just create a [width*height] array and index it with (x+y*width).<br><br>Additional:  Monkey does not have "multi-dimensional arrays", it has "arrays of arrays".  There's a big difference. <br><br></td></tr></table><br>
<a name="2035845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> In monkey, if you want to create a 2 dimensional array, you will have to do it with a function like therevills posted.<br>Even Mark Sibly, the creator monkey suggested to do it that way, he should know it best.<br><br>What is it that you don't like about the solution offered? <br><br></td></tr></table><br>
<a name="2035848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> rushibno said:<br><br>"I mean what wrong with :<br>Field data:T[][] = New T[width][height]"<br><br>What's wrong is that it doesn't work that way in Monkey, perhaps in part because it doesn't work that way in many of Monkey's target languages.<br><br>On the plus(?) side, you could make a triangular array in Monkey if you wanted - you are not confined to rectangles!<br><br>Just make a function like therevills said, and then you can initialise an array in one line in Monkey too. <br><br></td></tr></table><br>
<a name="2035853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @matty<br>it's exactly the simple but so efficient solution i also use. <br><br></td></tr></table><br>
<a name="2035854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Btw, muddy_shoes wrote a great article on array performance (specifically 1d vs 2d): <a href="http://pointlessdiversions.blogspot.co.nz/2012/05/1d-vs-2d-arrays-performance-reality.html" target="_blank">http://pointlessdiversions.blogspot.co.nz/2012/05/1d-vs-2d-arrays-performance-reality.html</a> <br><br></td></tr></table><br>
<a name="2035858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for this link Shinkiro1, it's a fine analyze. <br><br></td></tr></table><br>
<a name="2035897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks all for your replies. <br><br>Nice article Shinkiro. I see now why its better a 1d array. I was sure i could use a 2d array but well. I haven't taken care of the target. I will go the 1dim array route then. Its not much of a change anyway.. its just because i found the 2dim array more intuitive.<br><br>Also i was wondering would it be harder to add a third dimension to a 1dim array ? <br><br></td></tr></table><br>
<a name="2035884"></a>

<a name="2035886"></a>

<a name="2035883"></a>

<a name="2035911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> More dimension you need less 1D adaptation is easy.<br>If you dont need particular performance you'll probably feel better<br>with 2D array using.<br>In another hand, if you make your own conversion formula<br>it's clear as crystal. (tab_in(x,y) , tab_out(x,y)) <br><br></td></tr></table><br>
<a name="2035913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think its.. ( (row * height) + (col * width)) * 3 + depth <br><br></td></tr></table><br>
<a name="2035914"></a>

<a name="2035915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Arghh .. the point of the article is that it really doesn't matter from a performance standpoint if you use a 1D or 2D array (except for some cases).<br>Personally I prefer to use a 2D array, as for me it's much easier to read such code.<br>[monkeycode]<br>mapArray[3][4] = 10<br>[/monkeycode] <br><br></td></tr></table><br>
<a name="2035924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why are you angry ? :P <br><br></td></tr></table><br>
<a name="2035955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think there is a real performance difference in some predictable circumstances.  I got a consistent speed boost by a factor of almost two when I implemented the Dijkstra algorithm using a 1D array instead of 2D.  And the code was shorter, because a 1D array is indexed with ints instead of tuples, so when you are remembering a list of locations you have less to do.<br><br>However, a factor of two even in an important algorithm would probably not break any game.  All in all, there is little reason not to use 2D if that's what you prefer. <br><br></td></tr></table><br>
<a name="2035959"></a>

<a name="2035960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with you Gerry, even if 1D performance are better,<br>users must use what they prefer. If they use 2D and need performance<br>they still can modify source. Users must not be crystallized in a restrictive<br> dimension or criticised for their dimension critical choice. <br><br></td></tr></table><br>
<a name="2035964"></a>

<a name="2035965"></a>

<a name="2035966"></a>

<a name="2035967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> That why i think i should go the performance route but that only for my needs since im going to use pathfinding. Also i realised i needed a 3D array which make things worse. <br><br></td></tr></table><br>
<a name="2036119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lets consider a 3D volume is a superposition of 2D arrays and you'll find a solution.<br>method:<br>In 1D for an element X1 you have direct access to tab_in[X1] and tab_out[X1]<br>in 2D for an element (X2,Y2) you have classic formula tab_in[f(X2,Y2)] and tab_out[f(X2,Y2)] <br>f(X2,Y2) return an element X1 wich give you 1D tab direct acces<br>in 3D for an element (X3,Y3,Z3) you have to found a formula considering a superposition<br>of 2D arrays lets call it g(X3,Y3,Z3) wich return you an <br>element(X2,Y2) usable with function f and finally obtain X1. <br>(You can use this step to verify your formula.)<br>After what by a composition of function f and g you will find the direct h function<br>wich transform (X3,Y3,Z3) directly to a single X1<br><br>I think h is a kind of function like :<br>f(X3,Y3)+Z3*step<br>with step=2D array size <br><br></td></tr></table><br>
<a name="2036094"></a>

<a name="2036095"></a>

<a name="2036096"></a>

<a name="2036093"></a>

<a name="2036092"></a>

<a name="2036090"></a>

<a name="2036091"></a>

<a name="2036089"></a>

<a name="2036087"></a>

<a name="2036088"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
