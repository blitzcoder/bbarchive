<!DOCTYPE html><html lang="en" ><head ><title >V35 Up! [MONKEY NEWS]</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >V35 Up! [MONKEY NEWS]</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >V35 Up! [MONKEY NEWS]</a><br><br>
<a name="2004376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>V35 is now available!<br><br><div class="quote"> <br>Modules:<br><br>Mojo iOS sample loader now uses audio toolbox for mp3 support.<br><br>Mojo Html5 SetScissor fixed.<br><br>Added Mojo Music commands - see mojo.audio<br><br>Mojo Android volume control now always sets media volume.<br><br><br>Trans (1.06):<br><br>Fixed float literal 'e' notation.<br><br>Fixed BalanceTypes to generate an error instead of returning null.<br><br>Rearranged and tidied up post semant class validation code.<br><br>Fixed ObjectType.EqualsType to use new ClassDecl.EqualsClass method for generic class comparison fix.<br> <br></div> <br><br></td></tr></table><br>
<a name="2004378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wagenheimer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mojo iOS sample loader now uses audio toolbox for mp3 support! <br><br>Thanks a lot for this! =) <br><br></td></tr></table><br>
<a name="2004390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great! Thanks Mark! <br><br></td></tr></table><br>
<a name="2004394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dopeyrulz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Mark - all working fine here. <br><br></td></tr></table><br>
<a name="2004397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Qcat</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fantastic! Thanks Mark! <br><br></td></tr></table><br>
<a name="2004447"></a>

<a name="2004449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pudsy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the update.<br><br>Something strange seems to have happened with HTML5 performance though (haven't noticed any difference on Flash).<br><br>I'm getting significantly lower performance on just basic image drawing (not sure if that's the cause or just one visible effect).<br><br>Quick sample code below (not the prettiest but should suffice!). Stick any old image in the data folder as "image.png" - I used a 128x128 with alpha transparency.<br><br>Use cursor/arrow keys LEFT/RIGHT to change number of objects drawn.<br><br>Compiled with v34b I can easily hit 700 objects and still get 100 frames-per-sec.<br>With v35 I barely get 50 fps with 700 objects. Even with 0 objects, it doesn't seem to give a steady 100 fps on v35.<br><br>EDIT: Tested here with Firefox 4<br><br>EDIT: BTW I did delete the .build folder when switching between versions, so it's not that.<br><br>EDIT: More strangeness... if I close Monk IDE (v35) then open the HTML5 version in my browser, it runs as well as v34b did previously. The performance is still lower even if built with "debug" off, just only while Monk is open.<br><br><pre class=code>Import mojo

Global img:Image
Global NUM_OBJECTS = 50
Global stp = 0
Global FPS:Float
Global frames
Global time

Class MyApp Extends App

	Method OnCreate()
		SetUpdateRate 100
		img = LoadImage("image.png")		
		frames = 0
		time = Millisecs()
	End
	
	Method OnUpdate()
		stp = (stp + 1) Mod img.Width
		If KeyHit(KEY_RIGHT) Or KeyHit(KEY_UP)
			NUM_OBJECTS += 50
		Endif
		If KeyHit(KEY_LEFT) Or KeyHit(KEY_DOWN)
			NUM_OBJECTS = Max(0, NUM_OBJECTS - 50)
		Endif
	End
	
	Method OnRender()
		Cls 0,0,0
		Local x = stp
		Local y = 0
		For Local i:Int = 1 To NUM_OBJECTS
			DrawImage img, x,y
			x += img.Width
			While x &gt; DeviceWidth()
				x -= DeviceWidth()
				y += img.Height
				While y &gt; DeviceHeight()
					y -= DeviceHeight()
					x += 10
				Wend
			Wend
		Next
		frames += 1
		If frames &gt; 50
			Local newtime = Millisecs()
			Local elapsed = Max(1, (newtime - time))
			FPS = Float(frames * 1000) / Float(elapsed)
			frames = 0
			time = newtime
		Endif
		DrawText "Objects: " + NUM_OBJECTS, 0,0
		DrawText "FPS: " + Int(FPS), 0,30
	End
	
End

Function Main()
	New MyApp
End
</pre> <br><br></td></tr></table><br>
<a name="2004442"></a>

<a name="2004443"></a>

<a name="2004444"></a>

<a name="2004514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does it mean that we can play mp3 files without extra license? I remember lack of mp3 support for BlitzMax was due to licensing issues. <br><br></td></tr></table><br>
<a name="2004525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have to take care about this by yourself. It isn't worth it, I think you should go for Ogg. <br><br></td></tr></table><br>
<a name="2004575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> But at the moment Monkey doesn't support Ogg on iOS (am I right?), that's why I asked. I would be more than happy to use Ogg, since that's what we use on BMX. <br><br></td></tr></table><br>
<a name="2004585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JD0</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thousands of iOS games use MP3 files.. never heard of one paying for a license.  Maybe apple does somewhere along the line.. You are using apple's official tools in the end anyways. <br><br></td></tr></table><br>
<a name="2004599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure and how can you tell? I thought (and use) the standard audio formats on iOS for samples and music which are .caf and .m4a respectively. <br><br>Flash is the only platform I know of where Adobe have licensed the use of mp3 so that game authors are legally covered. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
