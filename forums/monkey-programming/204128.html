<!DOCTYPE html><html lang="en" ><head ><title >Using OpenGL and Mojo together?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Using OpenGL and Mojo together?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Using OpenGL and Mojo together?</a><br><br>
<a name="2044254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm just looking at doing some lower level rendering. Previously I've done this sort of thing by writing native functions but I thought I'd look at the opengl modules to see if this can be done at the Monkey level for OGL targets now.<br><br>What I'm wondering is whether there's a model for using opengl.gles11 alongside standard mojo calls. Is there something that stores the mojo OpenGL state so you can go ahead and do your stuff and then restore that state after? <br><br></td></tr></table><br>
<a name="2044260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> depends on the target.<br><br>you can do your opengl calls in OnRender() and then glFlush() when you're done.<br>for returning to mojo, i generally add these command per target (different per target, valid for V66):<br><br><pre class=code>
Function BeginMojo:Void() = "app-&gt;GraphicsDevice()-&gt;BeginRender"
Function EndMojo:Void() = "app-&gt;GraphicsDevice()-&gt;Flush"
</pre><br><br>This is changing in V67, so I don't know if it'll be available since some of the options are being locked under 'private'. <br><br></td></tr></table><br>
<a name="2044258"></a>

<a name="2044259"></a>

<a name="2044261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. So nothing has been officially added? <br><br>Okay, one more mojo hack to maintain then. <br><br></td></tr></table><br>
<a name="2044276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So nothing has been officially added?  <br></div><br>no, and combined with the way Mark privatizes variables, it makes plug-n-play features difficult. <br><br></td></tr></table><br>
<a name="2044291"></a>

<a name="2044292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Muddy, I took the pragmatic solution and locked off all the games I have released to a specific monkey version. It avoided having to dump any blame on things I had no control over. <br><br></td></tr></table><br>
<a name="2044295"></a>

<a name="2044297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's fair enough if you're looking at short enough dev cycles or your code is only used for one project. Neither is true for me though (sadly in the first instance). I do hold off taking newer versions of Monkey, and I'm certainly in no rush to take v67+, but I have to update occasionally or the merge pain gets worse, not better.<br><br>I'm not sure what is meant by "dumping the blame" though. Blame for what? I just asked if there was an official path to using the opengl module alongside the mojo calls. It seems a relatively natural desire to want to be able to do that. As there is no official route and the required calls aren't publicly exposed in Mojo I've had to make the changes myself. If anything I'm taking responsibility for my own needs. <br><br></td></tr></table><br>
<a name="2044302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fair enough. <br><br></td></tr></table><br>
<a name="2044339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I also stay a few steps behind the bleeding edge and only update occasionally.  <br><br>I think the 'lock-off' mode for releases is a reasonable option, though, you could just strip out anything extraneous from your Monkey dev directory and lock the release away with its own version of mojo.  A good plan IMO if you've hacked the latter.  Really it's just an insurance option: if you want to issue a quick bug fix you need worry only about that.  <br><br>Current projects and your own module updates can stay in sync with the version you're currently using. <br><br></td></tr></table><br>
<a name="2044341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adam, how do you do that BeginMojo/EndMojo stuff? Do you have a small example and would that work with your Minib3d module at least for some targets? <br><br></td></tr></table><br>
<a name="2044515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Xaron: I took a path of fewer changes but it's pretty much what Adam does. I exposed the graphicsdevice Flush() and BeginRender() calls and mapped them via new BeginMojo() and EndMojo() functions in graphics.monkey:<br><br>Added to graphicsdevice.monkey:<br>[monkeycode]<br>    Method Flush()<br>    Method BeginRender()<br>[/monkeycode]<br><br>graphics.monkey:<br>[monkeycode]<br>Function EndMojo()<br>    renderDevice.Flush()<br>End<br><br>Function BeginMojo()<br>    renderDevice.BeginRender()<br>End<br>[/monkeycode]<br><br>The GLFW stuff works as is but the android native mojo code will require changes because the current BeginRender signature takes a gl context argument (for unknown reasons as it isn't unused). Then in my render code where I do my own OGL stuff I just do something like:<br><br>[monkeycode]<br>    EndMojo()<br>    InitMyGLState()<br>    DoGLRendering()<br>    ResetGLState()<br>    BeginMojo()<br>[/monkeycode]<br><br> What you need to reset varies by target (and could change with mojo updates) so it's not exactly a no-worries solution. <br><br></td></tr></table><br>
<a name="2044370"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
