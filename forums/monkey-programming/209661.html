<!DOCTYPE html><html lang="en" ><head ><title >A way to loadimage from databuffer?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >A way to loadimage from databuffer?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >A way to loadimage from databuffer?</a><br><br>
<a name="2101576"></a>

<a name="2101577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> other than saving a giant pixel array and pasting them to a new image? <br><br></td></tr></table><br>
<a name="2101578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> have a looky here <a href="http://www.monkey-x.com/Community/posts.php?topic=9549" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=9549</a><br><br>I had the same idea :) <br><br></td></tr></table><br>
<a name="2101727"></a>

<a name="2101728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have to +1 this as a future feature in Monley-X. I need it. :) <br><br>Is there a packing mod available for Monkry-X? That would be target specific with file streams but possible. <br><br></td></tr></table><br>
<a name="2101733"></a>

<a name="2101734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nullterm</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about for sound data too? ; )<br><br>I've been itching to build a sound effect synthesizer, be great if I could upload direct from memory, without a temporary WAV file in between.  And I'm not even sure how I'd do an HTML5 version not being able to save to file directly. <br><br></td></tr></table><br>
<a name="2101743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> audio streams / buffers would be great for a number of reasons, not the least of which would be making it easier to add support for some better music formats :V <br><br></td></tr></table><br>
<a name="2101756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> With access to byte data we could do anything with anything providing the loaders are there for images, audio, meshes etc (meshes for 3d as a future expansion) :) <br><br></td></tr></table><br>
<a name="2101792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> With access to byte data we could do <br></div><br>Also useful for networking especially UDP. Even though some targets do not like bytes it should be available as not having it is a problem for efficient online gaming. <br><br></td></tr></table><br>
<a name="2101760"></a>

<a name="2101761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes please mark! +1 <br><br></td></tr></table><br>
<a name="2101782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> With access to byte data we could do anything with anything providing the loaders are there for images, audio, meshes etc (meshes for 3d as a future expansion) :) <br></div><br><br>We can write our own loaders in Monkey already.  But to access the OpenAL / AudioPool / whatever's stream requires externs... <br><br></td></tr></table><br>
<a name="2101993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are we talking about an image in 'png' etc format, or just raw image data? <br><br></td></tr></table><br>
<a name="2102000"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think raw image data then it can be edited before loading, the same for audio etc<br><br>Once its it, it will bring monkey closer to max in capabilities as we can manipulate data in the same way and will allow for things like colour changing, palette switching and audio sample editing :) <br><br></td></tr></table><br>
<a name="2102002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about something like this (untested) for images:<br><br><pre class=code>
Function LoadImageWithData:Image( width:Int,height,Int,data:DataBuffer,dataOffset:Int )

	Local pixels:=New Int[width*height]
	For Local y:=0 Until height
		Local p:=y*width
		For Local x:=0 Until width
			pixels[p+x]=data.PeekInt( dataOffset+p+x )
		Next
	Next
	
	Local image:=CreateImage( width,height )
	image.WritePixels pixels,0,0,width,height
	
	Return image
End
</pre><br><br>You could cache a max sized pixels array for less memory thrashing.<br><br>I'll have a look at audio, but that's weird on some targets. Desktop targets should be doable though. <br><br></td></tr></table><br>
<a name="2102003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah adding that as a official thing will add loads to the whole system providing its fast enough :) <br><br></td></tr></table><br>
<a name="2102009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm mark, with your example, the data must be saved in raw pixel format... <br><br></td></tr></table><br>
<a name="2102010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm maybe a SaveBufferPNG, LoadBufferPNG etc <br><br></td></tr></table><br>
<a name="2102020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thinking about it if we could have media loading as well it would be brilliant something like Max's incbin system or loading from buffers would be excellent so we could just read all the bytes of a png into a buffer then pass it to the LoadImage command and it would then load it from the buffer. <br><br></td></tr></table><br>
<a name="2102026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> @EdzUp<br>Absolut true.. Please mark, this would be an powerup for monkey! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
