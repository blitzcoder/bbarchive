<!DOCTYPE html><html lang="en" ><head ><title >Nullable String/Arrays</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Nullable String/Arrays</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Nullable String/Arrays</a><br><br>
<a name="2032537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark,<br>Given that Strings and arrays are arguably "non-primitive", how hard would it be to make them nullable?<br><br>Edit: On second thought, this opens up new realms of "if null or empty string" which would be somewhat dangerous for new programmers. I'll just have to live with an extra indicator flag. <br><br></td></tr></table><br>
<a name="2032507"></a>

<a name="2032579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you just extend String (NString Extends String)? <br><br></td></tr></table><br>
<a name="2032594"></a>

<a name="2032595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd have to "wrap" String, because I'm pretty sure you can't extend it.  What I've been doing is using the StringObject class, but that has huge overheads. <br><br></td></tr></table><br>
<a name="2032879"></a>

<a name="2032880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm not keen on the idea personally as I *like* the fact that strings/arrays are 'values' and can't ever be null, basically because it means you get to avoid a ton of &lt;&gt;Null sanity checks and a bunch of null vs empty string confusion.<br><br>Also, null strings complicate bool conversion - eg: what does If Str... mean? Is it 'Str&lt;&gt;Null'? Or 'Str&lt;&gt;Null And str.Length&lt;&gt;0' or, god forbid, 'str.Length&lt;&gt;0' (crash!). However it's done (or even if implicit string-to-bool is removed altogether) it's gonna break code.<br><br>But...why exactly do you want this feature?<br><br>In general, it would help enormously if people could provide some context or 'use cases' when making language feature requests like this. Just asking 'can you add xyz to the language' doesn't give me much to go on, unless perhaps it's something I've been thinking of adding myself.<br><br>As an alternative, how about something like:<br><br><pre class=code>
Global NullString:=String.FromChar(-1) 'or some other BAD unicode char.
...
Local str:=NullString
...
If str=NullString
</pre><br><br>[edit]<br>Just saw your edit!<br>[/edit] <br><br></td></tr></table><br>
<a name="2032919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was hoping to be able to use a single nullable variant type basically, because at the moment I'm using Object and assigning boxed primitives.<br><br>On another note, could we at least get byref array comparison?  Surely it shouldn't be too hard...<br><br>[monkeycode]Local a:Int[] = [1,2,3]<br>Local b:Int[] = [1,2,3]<br>Local c:Int[] = a<br>If a = b Then Print "a = b"<br>If a = c Then Print "a = c"[/monkeycode]<br>This should only print "a = c".  At the moment IIRC we can't do any kind of array comparison without trans complaining. <br><br></td></tr></table><br>
<a name="2032986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; I was hoping to be able to use a single nullable variant type basically, because at the moment I'm using Object and assigning boxed primitives.<br><br>Yes, I get that, but WHY?<br><br>Showing me some meaningless pseudo-code and saying 'I want to be able to do this' doesn't really clue me in on why some feature addition may be a good idea.<br><br>I can guess what you're trying to do - eg: given your lua project, perhaps you're trying to build some kind of dynamic variable environment where variables can 'not exist'...? But it'd be much better if you could explain what you're trying to achieve - in practical terms - yourself. That way, the feature request may make more sense and I may be more interested in adding it, or there may be another way of approaching the problem. <br><br>&gt; This should only print "a = c". At the moment IIRC we can't do any kind of array comparison without trans complaining. <br><br>This was done largely to save confusion on the users end. <br><br>In particular, many people may well expect the above code to print "a = b" AND "a = c" - and why not? This is probably the more intuitive reading of '=', and it'd even work 'some of the time' if reference comparisons were added.<br><br>But at least element-by-element comparison can be manually - reference comparison cannot, so I'm not totally opposed to the idea...but again, why?<br><br>I've never needed to do this in any of my code to date, and given that it'd add a potential 'soft spot' to the language I'd really want more to go on before adding it.<br><br>I'd actually be really happy with a language that used full 'copy on write' semantics for arrays, as I'd be able to pass them around and save them in vars without having to worry about whether I should copy them first. This would make arrays true value types, and I'm a big fan of value types  because no one can modify them behind yer back.<br><br>This is not really feasible in Monkey so it wont happen, but still, the reference comparison addition would really be taking things in opposite direction...why? <br><br></td></tr></table><br>
<a name="2033006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I could have used a null array the other day for a class that could optionally maintain an array of pre-grabbed images from its own image file.  If the array wasn't there it would grab an image if one was requested.<br><br>But it was easy to work around by initialising the array to have zero length by default.<br><br>Seems to me that whatever about strings, where an empty string can naturally appear as part of ordinary data, and so is hard to use as a null marker, zero-length arrays can handle most situations where you might like nullable ones.<br><br>I think I also like strings to be values always.  But I am not a very sophisticated programmer ;-)<br><br>By the way, I take it that zero-length arrays are permitted everywhere?  They seem to work okay, but I noticed that when I experimented with giving an array a negative length, the Monkey Runtime Error said the length must be a finite positive integer.  I think that should be "a finite non-negative integer". <br><br></td></tr></table><br>
<a name="2033034"></a>

<a name="2033035"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Referencing the same zero length array is somewhat of a performance optimization, but in my situation it's because I'd like a string to be optional but have an empty string as a valid value.<br><br>Mark, the reason I haven't given much of an example is because I'm not even sure how far I will take this Lua project and I didn't want to make any false promises. I'm trying to write a pure monkey implementation of the Lua VM so that it will work on all platforms without any externs. It's a huge task and I have no idea what kind of performance it will get (terrible, probably). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
