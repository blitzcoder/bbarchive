<!DOCTYPE html><html lang="en" ><head ><title >LoadImage frame count</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >LoadImage frame count</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >LoadImage frame count</a><br><br>
<a name="2007525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> At the moment, to load an image with multiple frames, you must give it a cell width, cell height, and frame count.  Is it possible to make the frame count optional, and infer it from the cell dimensions?<br><br>Depending on the map tileset I'm loading, I may not know the number of frames or the image dimensions (only the cell dimensions).  I'm sure it's as easy as (imagewidth / cellwidth) * (imageheight / cellheight), and just assume that imagewidth and imageheight are multiples of the cell dimensions. <br><br></td></tr></table><br>
<a name="2007528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hima</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can load the whole image and make your own animation/tile system by using drawing from rectangle or create an image from rectangle for each frame. That's what I'm doing in my framework. <br><br></td></tr></table><br>
<a name="2007542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wiebow</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Samah,<br><br>The thing I do is load the whole image first in a temp location, and determine the frame count using the method you described. Then, throw the temp image away and use LoadAnimImage. <br><br></td></tr></table><br>
<a name="2007564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You can load the whole image and make your own animation/tile system by using drawing from rectangle or create an image from rectangle for each frame. That's what I'm doing in my framework. <br></div><br>That's what I've done.<br><br><div class="quote"> The thing I do is load the whole image first in a temp location, and determine the frame count using the method you described. Then, throw the temp image away and use LoadAnimImage. <br></div><br>That's what I did in the BlitzMax code I'm converting from, but I don't want to mess around with temporary images when mobile devices are a target.<br><br>Regardless, it should be a fairly trivial thing to add.  I'm not sure why it's not already there... <br><br></td></tr></table><br>
<a name="2007567"></a>

<a name="2007568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hima</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can't really assume that. For example, an animation with 12 frames can be split in to 2 rows 6 columns or 3 row 5 columns where in the last row there are 3 blank columns. Frame count give you more freedom to add images of many size together as well, since you can load a big image and then grab subimage from it using GrabImage method.<br><br>As for the mobile target, you only need to do this once so I don't think that'd be too big of a problem if you do it at the start of the game. V40 just added a Discard method where you can release it from the memory so there should be nothing to worry about. <br><br></td></tr></table><br>
<a name="2007573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wiebow</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming you're not programming the map EDITOR to run on mobile, I don't see why the map metadata could not contain the number of frames to get from the tile image. <br><br></td></tr></table><br>
<a name="2007681"></a>

<a name="2007682"></a>

<a name="2007683"></a>

<a name="2007684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You can't really assume that. <br></div><br>In this case, I can.  Besides which, it should be an optional parameter.  If you put in the frame count, it uses it.  If you don't, it takes a guess.  If it gets it wrong... well it's your own fault. :)<br><br><div class="quote"> As for the mobile target, you only need to do this once so I don't think that'd be too big of a problem if you do it at the start of the game. <br></div><br>Not in this case. It loads up the tileset based on the current map, and I don't want to waste memory by caching all the tilesets at the start of the game if the user never gets to that map.  It also forces me to read all the map files at the start of the game.<br><br><div class="quote"> V40 just added a Discard method where you can release it from the memory so there should be nothing to worry about. <br></div><br>After 7 years of industry-level Java, I don't trust garbage collection at all. :)<br><br><div class="quote"> I don't see why the map metadata could not contain the number of frames to get from the tile image. <br></div><br>Because I don't have any control over the Tiled map format.<br><a href="http://www.mapeditor.org/" target="_blank">http://www.mapeditor.org/</a> <br><br></td></tr></table><br>
<a name="2007714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wiebow</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah! Well, that is exactly the reason I am making my own map editor and map format as well. =]<br>I intend the map editor to inspect the used tiles in the map and save out a new tileset with only the needed tiles. <br><br></td></tr></table><br>
<a name="2007715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hima</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm. Maybe it's just me but I don't understand how would  you waste much more memory with the loading big image approach. <br><br>I take it that LoadImage with frames will make many image references but still load only one large texture. So when you use LoadImage, you would have to load the large texture in anyway.<br>This should be the same as loading a large texture in one Image reference, and then use Image.GrabImage to create a reference with all tiles from it. <br><br>The only difference that I see is the former one doesn't have an Image reference to the large texture while the other one does. I doubt that one reference will cost much memory that you immediately need it back though. :S<br><br>As for map editor, if you want the one that you can control your format, maybe you should try DAME editor or Ogmo editor. They're AIR based editor. I've tried Ogmo and it's very good, though it takes a while to setup, but it allows you to cuztomize yourown XML so it's pretty flexible. Haven't really tried DAME so can't say much about it though :O <br><br></td></tr></table><br>
<a name="2007776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wiebow</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the information about the editors, hima. I will take a look. The editor I want to make will also create maps I can use in my Blitzmax games, so I like to be in control of what it does and how it looks cos I will be using it a lot. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
