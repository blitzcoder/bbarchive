<!DOCTYPE html><html lang="en" ><head ><title >Module assets</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Module assets</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Module assets</a><br><br>
<a name="2108101"></a>

<a name="2108102"></a>

<a name="2108103"></a>

<a name="2108104"></a>

<a name="2108105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Suppose I have a module <b>mymodule</b> that requires a set of standard assets - let's say, a series of .fnt and .png files with a default font in several different sizes, for example. I can always copy those assets to each individual project that uses the module, but that's very redundant and prone to error, like forgetting to update all the copies every time the originals are updated.<br><br>How can I import said assets from a <i><b>mymodule.data</b></i> folder inside the module, so I can have them always available to any project that imports <b>mymodule</b>?<br><br>I've tried many different ways, but none seems to work. I guess I can use symlinks in OSX and Linux, but I wanted a way that works in Windows as well. Thanks! <br><br></td></tr></table><br>
<a name="2108100"></a>

<a name="2108106"></a>

<a name="2108107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use 'Import' on a supported file (Image, sound, etc) from the module, and it will automatically copy to the main build folder of your project. To see this in action, check out the 'mojo' module's 'data' folder.<br><br>Mojo automatically copies its default font; snippet from 'mojo.graphics':<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import "data/mojo_font.png"
</textarea><br><br>That seems to work as you're describing. Here's the <a href="https://github.com/blitz-research/monkey/tree/ad26f1c6e71bd116ee7d08e93bc51c678bf42695/modules/mojo" target="_blank">current "mojo" folder on GitHub</a>. <br><br></td></tr></table><br>
<a name="2108109"></a>

<a name="2108111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What if I want to determine what gets imported in the project, not in the module?<br><br>Maybe this isn't practical, but what I'm trying to create is a sort of standard Asset Library that can be used in different projects. Each project should be able to determine what they actually need, and ignore the rest. If the module imports everything in the asset library, a lot of unnecessary files would end up in each project.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2108119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can import based on preprocessor variables. This applies to both modules and assets.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#ASSET_FILE_HERE = True

#If ASSET_FILE_HERE
	Import "FileHere.png"
#End
</textarea> <br><br></td></tr></table><br>
<a name="2108120"></a>

<a name="2108122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, awesome. Thanks!<br><br>[edit]<br><br>Oh Wait! This doesn't actually solve the problem! You'd still have to have the import happening in the module itself, no? What I want to do is, from any arbitrary .monkey file in any arbitrary folder, do something like <b>"import mymodule/images/image.png"</b>, and it would retrieve the image from mymodule.data, instead of the "current" data folder.<br><br>I guess that can't happen because in reality it is simply retrieving the image from the build/data folder, and all files have to be already copied to this folder, regardless of where the images are coming from and regardless of whether they're actually used or not.<br><br>Maybe what I really want is a way to determine what files are necessary at compile time, and only copy to the build folder the files that are actually necessary. Monkey 2, maybe? ;-)<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2108144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >itto</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Issues like this can easily be solved with a build system. You will have somewhere a config file containing settings for the project and directives for the steps to take in the build sequence. In your case, a list of assets required to be included, or better yet, a list of modules whose required files you want included (specified in a separate list, module per module), and they will be processed as needed (in your case, copied in the data folder, automatically). <br><br></td></tr></table><br>
<a name="2108183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bitJericho</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Symlinks are available in Windows and I use them quite a bit. For example, before I used jungle IDE, I used symlinks to keep my custom monkey modules in a different location than the normal monkey folder. I use the wonderful Link Shell Extension to use symlinks: <a href="http://schinagl.priv.at/nt/hardlinkshellext/linkshellextension.html" target="_blank">http://schinagl.priv.at/nt/hardlinkshellext/linkshellextension.html</a><br><br>Do note that this program also modified windows copy/move behavior with a feature called smart move. I recommend disabling that, to do so, see: <a href="http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html#configuration" target="_blank">http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html#configuration</a> <br><br></td></tr></table><br>
<a name="2108181"></a>

<a name="2108182"></a>

<a name="2108189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Issues like this can easily be solved with a build system <br></div><br>Sounds great, is that something that can be done currently in Monkey?<br><br><div class="quote">  I used symlinks to keep my custom monkey modules in a different location than the normal monkey folder. <br></div><br><br>Yup, that's what I'm doing now. And I'm also using symlinks to point to specific items in an default asset library - instead of copying the assets, I just create symlinks for them. Works pretty well, actually, since Monkey simply copies the original files to the build folder, and I can avoid unnecessary files from the library. But I'd rather it worked automatically, with Monkey identifying which files are being loaded and actually used and only copying those to the build.<br><br>In OSX, I use this to create symlinks from the Finder: <a href="http://seiryu.home.comcast.net/~seiryu/symboliclinker.html" target="_blank">http://seiryu.home.comcast.net/~seiryu/symboliclinker.html</a><br>It's slightly annoying that it appends the name of the file with a "symlink" text.<br>Thanks! <br><br></td></tr></table><br>
<a name="2108188"></a>

<a name="2108196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >itto</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Sounds great, is that something that can be done currently in Monkey? <br></div><br>Nope, as much as I would like to, Monkey's build system is currently single-pass and there are no hooks or other ways to execute custom commands middle way (It's being discussed as an enhancement for Monkey 2 though).<br><br>You should be fine writing a simple shell script which parses a list of strings (module filenames) in a config file, and for each one copies all the assets folder relative to that module folder to the final build folder. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
