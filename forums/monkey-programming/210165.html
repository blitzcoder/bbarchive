<!DOCTYPE html><html lang="en" ><head ><title >Music Playback</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Music Playback</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Music Playback</a><br><br>
<a name="2111837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>the built in system for playing music in Monkey does not lend it self very well to loading and playing files midway through game play.<br><br>I figure it's best if I use an external system, something like Fmod or Bass.dll maybe, I'm wondering if anyone has any experience with either?<br><br>Or... is there a way to improve the the GLFW target to stream audio files during play?<br><br>Ta! <br><br></td></tr></table><br>
<a name="2111847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's been threads in the past that had working examples of hooking bass.dll through a simple wrapper.  If you are willing to pay the fee to use it in your project, then great.  If  not, then let me know if you decide to dig into raw OpenAL calls.  All you'd need to get something like libmodplug working is access to an open stream to output sound to, and even that small amount of added functionality could do wonders.<br><br>Aforementioned bass library (likely incomplete):<br><a href="https://github.com/JochenHeizmann/monkeybass" target="_blank">https://github.com/JochenHeizmann/monkeybass</a> <br><br></td></tr></table><br>
<a name="2111848"></a>

<a name="2111850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh nice one, why I didn't search here for bass.dll already, I don't know.<br><br>I'll give that a go thank you very much!<br><br>Edit: Ahh it seems I did search here for bass.dll and from what I can tell the linked to library is for Android only at the mo? <br><br></td></tr></table><br>
<a name="2111851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, and unfortunately, a 1:1 from java to c++ isn't possible without some glue code to handle Monkey strings.  I'm sure it's not hard for someone who has dealt with C++ (and there's some stuff on that again if you search the forum for "cstring"), but I'm assuming anyone who'd be capable of stepping up to the plate either isn't interested in doing it or isn't interested in mentioning that they did.  Furthermore, it looks like the list of functions in the monkey externs is incomplete, but it's probably good enough for what you want it to do... <br><br></td></tr></table><br>
<a name="2111856"></a>

<a name="2111857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Nobuyuki: ...but I'm assuming anyone who'd be capable of stepping up to the plate either isn't interested in doing it or isn't interested in mentioning that they did. <br></div><br>I just so happen to be working on a BASS wrapper right now, actually.  Most of the core library is working, I'm just trying to get BASS_FX working too.<br>So far it's just C++ targets (GLFW3/iOS), but it shouldn't be too hard to use the Java bindings for Android (or NDK).<br>Interesting timing with this thread...I started on this about a week ago. <br><br></td></tr></table><br>
<a name="2111874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nobu : I wish I knew more about the under the hood stuff with Monkey, on the face of it, the concept of creating an interface for an external lib seems quite simple (as long as the API is relatively simple!) but I just get lost instantly.<br><br>Samah :D That's great news :) I look forward to hearing how you get on <br><br></td></tr></table><br>
<a name="2111879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Samah: Sorry to hijack my own thread but, I see you've got an Sqlite3 plugin that "currently only supports C++" does that include GLFW? Should this be working with Monkey-X 84e ?<br><br>I'm currently getting<br><br><pre class=code>
build/Release/main.o:main.cpp:(.text+0x5b9b): undefined reference to `sqlite3_open_v2'
build/Release/main.o:main.cpp:(.text+0x5c68): undefined reference to `sqlite3_open_v2'
build/Release/main.o:main.cpp:(.text+0x5cc6): undefined reference to `sqlite3_open'
build/Release/main.o:main.cpp:(.text+0x5d84): undefined reference to `sqlite3_exec'
build/Release/main.o:main.cpp:(.text+0x5e72): undefined reference to `sqlite3_prepare_v2'
build/Release/main.o:main.cpp:(.text+0x5f9d): undefined reference to `sqlite3_prepare_v2'
</pre> <br><br></td></tr></table><br>
<a name="2111892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Raz: Sorry to hijack my own thread but... <br></div><br>SQLite continued here:<br><a href="http://www.monkey-x.com/Community/posts.php?topic=9928&amp;post=111891" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=9928&amp;post=111891</a><br><br><div class="quote"> @Raz: Samah :D That's great news :) I look forward to hearing how you get on <br></div><br>Currently working on MonkeyBass, MonkeySQLite, and preparing for the Monkey X Jam...<br>Also I raid for three hours twice a week (it used to be three nights until our guild leader decided that nine hours a week was burning people out). <br><br></td></tr></table><br>
<a name="2111906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Samah so what you're saying is, you're not at all busy? ;)<br><br>I kid, obviously! Thanks :) <br><br></td></tr></table><br>
<a name="2111921"></a>

<a name="2111922"></a>

<a name="2111923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> samah:  I will give you a fresh coat of paint if you manage to have a working version of the BASS lib ready in time for the game jam.  I would love to be able to use tracker modules instead of resorting to OGG rendering for obvious reasons! <br><br></td></tr></table><br>
<a name="2111931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Nobuyuki: samah: I will give you a fresh coat of paint if you manage to have a working version of the BASS lib ready in time for the game jam <br></div><br>I'll try my hardest, but no promises! XD<br><br>Edit: I'm going to work on getting the core library fully wrapped first, then I'll see how I go with BASS_FX. <br><br></td></tr></table><br>
<a name="2111927"></a>

<a name="2111932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd be happy with basic playback and loop functionality, if function signatures change, it's no big loss <br><br></td></tr></table><br>
<a name="2111937"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nobuyuki I've given you access to my private GitHub repo.  Tell me what you think, and when it's at a "releasable" stage I'll make it public.<br><br>Example:<br><pre class=code>Import monkeybass

' initialise bass
BASS.BASS_Init(-1, 44100)
' load a file
Local stream:HSTREAM = BASS.BASS_StreamCreateFile("data\test.ogg")
' play it
BASS.BASS_ChannelPlay(stream)
' get the position in seconds
Local position:Float = BASS.BASS_ChannelBytes2Seconds(stream, BASS.BASS_ChannelGetPosition(stream, BASS_POS_BYTE))</pre><br>I'll probably make some nice fancy wrapper classes eventually, but for now it's direct calls. <br><br></td></tr></table><br>
<a name="2111936"></a>

<a name="2111934"></a>

<a name="2111949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks muchly samah. I didn't get a notification email, so I'll have to look around to see if I can find where the repo is. Will probably be able to get back to you sometime during the weekend as I'm pretty busy right now! Can't wait to check it out. <br><br></td></tr></table><br>
<a name="2111954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Nobuyuki: ...so I'll have to look around to see if I can find where the repo is. <br></div><br>Follow me on twitter and I'll DM you the info. <br><br></td></tr></table><br>
<a name="2111990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright, the core library is 90% wrapped, but it's only been implemented for C++ (and thus GLFW3) and only tested on Windows 64-bit.<br>Once I've done some more testing I'll make the repo public.<br><br><div class="quote"> @Nobuyuki: ...in time for the game jam. <br></div><br>Requirement for the game jam is that it must run on HTML5.  :( <br><br></td></tr></table><br>
<a name="2112020"></a>

<a name="2112021"></a>

<a name="2112023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fack. What's up with that? It sounded implicit with the encouragement of full joypad support that using the desktop target was obviously allowed. Hacking the target is a requirement for joypad support on html5, isn't it?<br><br>Edit: I'm pretty sure that desktop targets are supported, but I'm asking in the thread just to make absolutely certain <br><br></td></tr></table><br>
<a name="2112025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Nobuyuki: Edit: I'm pretty sure that desktop targets are supported... <br></div><br>Sorry, I meant that HTML5 is one of the targets listed, and if it's mandatory, no BASS. :( <br><br></td></tr></table><br>
<a name="2112533"></a>

<a name="2112534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, so I've been bad, and haven't actually dug into the code much yet.  Downloaded it, but didn't try running your sample code!! Didn't expect I'd spend so much time on the actual platforming engine part of the game, sheesh...<br><br>Anyway, I may or may not be able to use it in time for the project deadline and I was just wondering:  Would you recommend against using this for a game's sound FX?  I'm not sure I'd use BASS in that capacity unless it was going to be the primary sound engine in use, but just curious about it.  Might be more setup than it's worth than to just roll with both OpenAL's mixer and BASS's. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
