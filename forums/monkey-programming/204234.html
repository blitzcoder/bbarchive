<!DOCTYPE html><html lang="en" ><head ><title >something off the canvas, then scaled to be seen</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >something off the canvas, then scaled to be seen</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >something off the canvas, then scaled to be seen</a><br><br>
<a name="2045375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >C10B</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm knew to this so please treat me carefully :-)<br><br>I add some angeltext to the screen. My canvas is 480 high, and I write the text at 500, so it is off the screen. I also apply some scaling, say 0.5, so the actual position to display the text is 250. But, because the text was originally rendered off screen, it is not displayed at all, even after rescale.<br>I've tried setting the scissors to a huge area, but no joy. (PS I'm only playing with HTML5 at the moment, I haven't tested this on any other platform).<br><br>Is this by design? Any ideas how I can render text this way? (ie that is initially off screen until it is scaled into the correct place?)<br><br>Thanks<br><br>C10B <br><br></td></tr></table><br>
<a name="2045378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Halfdan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not 100% sure, but if the angeltext behaves as an image, the position you specify is the upper left corner of the text.<br><br>This means if you set scale (which applies to the size of the image, not the position), its upper left corner is still out of the screen.<br><br>Try setting MidHandle to True if possible (the drawing position will become the center), or draw it with an offset.<br><br>[EDIT] I understand your mistake now. If you Scale(0.5,0.5) and draw something at an X 100, it won't be drawn at 50. The Scale just applies to the image size, not the position (this is by design).<br><br>Oh and welcome to monkey! <br><br></td></tr></table><br>
<a name="2045376"></a>

<a name="2045377"></a>

<a name="2045380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >C10B</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks minke.<br>I think I might need to upload my code. It's definitely doing something weird, it might well be my coding and lack of understanding. It's about 500 lines at the moment so I'll try to strip out just the pertinent part and see if I can recreate the issue with just a few lines of code.<br><br>I wonder if the problem is the other way round. If my height is 480, but the overall scale is set to 0.5, and then I draw something at 480 it no longer sits at the bottom of the screen, but somewhere in the middle. So now with this scaling I still want to put something in the bottom half of the screen, I have to specify numbers greater than 480, and it's these objects at greater than 480 that are not visible. So with a scale of 0.5 I can only seem to draw things in the top half of the screen. Is that a better explanation?<br><br>Thanks <br><br></td></tr></table><br>
<a name="2045381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >C10B</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a little demo<br><br>Import mojo<br>Import angelfont<br>Import simpleinput<br>Import simpletextbox<br><br>Class ScaleTest Extends App<br>	<br>	Field font:AngelFont<br>	<br>	Method New()<br>		SetUpdateRate 30<br>	End Method<br>	<br>	Method OnCreate()		<br>		font = New AngelFont()<br>		font.LoadFontXml("angel_verdana")	<br>	End<br>	<br>	<br>	Method OnRender()		<br>		Cls 0,0,0<br>		Scale 0.5,0.5<br><br>		SetColor 0,0,255<br>		DrawRect(0,0,640,480)<br>		SetColor 255,255,255<br>		<br>		'this text appears towards the bottom of the blue area,<br>		'but in reality it is only half way down the screen<br>		SimpleTextBox.DrawHTML("Some Text",200,450,300, AngelFont.ALIGN_CENTER)	<br>		<br>		'this text has to placed beyond 480 to get it displayed in the bottom half<br>		'of the screen, but because it is beyond 480 it is not rendered!<br>		'The 0.5 scale has prevented my drawing to the whole display area!<br>		SimpleTextBox.DrawHTML("Some Text",200,580,300, AngelFont.ALIGN_CENTER)	<br>	End Method<br>	<br>	Method OnUpdate:Int()<br><br>	End Method<br>End<br><br>Function Main()<br>	New ScaleTest						<br>	Return 0<br>End <br><br></td></tr></table><br>
<a name="2045382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Halfdan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tested it, you seem to be right, scale does affect position, sorry for that.<br><br>I'll check if I can produce your problem <br><br></td></tr></table><br>
<a name="2045387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Halfdan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see, forget all what I said about the scale not affecting position, obviously it does<br><br>You are using SimpleTextBox to draw the Text, it seems like the problem is within that class.<br><br>It contains these lines in the drawing code:<pre class=code>If y+yOffset &gt; DeviceHeight()
    Return
Endif</pre>so super long texts won't be drawn outside the viewport, but it doesn't account for scale. You can try to patch that the SimpleTextBox or draw the font directly<br><br>Change<pre class=code>SimpleTextBox.DrawHTML("Some Text",200,580,300, AngelFont.ALIGN_CENTER)</pre>To<pre class=code>font.DrawHTML("Some Text",200,580)</pre> <br><br></td></tr></table><br>
<a name="2045385"></a>

<a name="2045386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >C10B</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm looking at those last 2 lines where you say change one to the other, and the change must be too subtle for me to see! <br><br></td></tr></table><br>
<a name="2045388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Halfdan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh I'm really messing up today, fixed that <br><br></td></tr></table><br>
<a name="2045389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >C10B</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol thanks.<br>I was using the SimpleTextBox because it allows me to align center.<br>I've tried editing the SimpleTextBox code and have just removed that check, and it works!<br>Thanks very much for your help :-)<br><br>PS Is this a bug? Should we report it somewhere?<br><br>Thanks <br><br></td></tr></table><br>
<a name="2045390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Halfdan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use<pre class=code>font.DrawHTML("Some Text",200,580,AngelFont.ALIGN_CENTER)</pre>I think SimpleTextBox is just an example of how to use the AngelFont, so not really a monkey bug. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
