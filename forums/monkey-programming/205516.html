<!DOCTYPE html><html lang="en" ><head ><title >Character Directional Movement Help?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Character Directional Movement Help?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Character Directional Movement Help?</a><br><br>
<a name="2061789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Imagine a top down view. Your character/object can move in either 4 directions. <br><br>Two things I'm trying to implement are giving me a problem.<br><br>I want to disallow Diagonal Movement but also at the same time I don't want my player/character/object to move in a different direction until a wall or other object is hit.<br><br>For example: If moving up by tapping KeyHit(KEY_UP) I want to disable the ability to then move either Left/Right/Down until an object is hit or a value is attained. <br><br>It's become difficult to code because I've implemented other things like movement speed, collision etc in an un-optimized way which is causing me bother with adding extra code for extra features. <br><br>If I could I'd like to have the Technical Knowledge and Logic of muddy_shoes, the raw ability for complex framework coding that samah and therevils have, the determination for long haul project completion that GfK has, a Light Sabre and a JetPack powered by Leprechaun Whiskey.<br><br>You never know... <br><br></td></tr></table><br>
<a name="2061791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I understand what you want. I made long time ago in visual basic 6 :)) something like that.<br><br>I had a "tile map" with 32 x 32 pixels per tile. My character was allowed to move N S W or E only one tile - 32 pixels. (every 4 or 8 pixels I was change the animation frame)<br>If the user was pressing the UP key.. the character would go N until an obstacle tile was hit. I was checking the collision map before moving to the next tile.<br><br>Anyway that is simple to implement. As soon as the player press a key, check you movementFlag. If movementFlag = 1 then ignore the key. Otherwise, calculate destination and start moving it.. As soon as he reach the destination movementFlag = 0 again :D <br><br></td></tr></table><br>
<a name="2061792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I would think about using something like this. If the key press was stored in a binary format e.g. 1=up,2=down,4=left,5=right with some sort of a flag to single that a key can be pressed.<br><br><pre class=code>If key &amp; 1 And move=0 Then
     do_up
     move=1
     return
EndIf
If key &amp; 2 And move=0 Then
     do_down
     move=1
     return
EndIf

etc</pre> <br><br></td></tr></table><br>
<a name="2061824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Why0Why</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>If direction=North and Player.CanMove(North)=True Then Player.Y+=1</pre> <br><br></td></tr></table><br>
<a name="2061833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Reminds me of Pacman, where for ease of play you want to be able to register the player's desire to turn right or left before he reaches the corner.<br><br>The solution is easy: when he is moving, and a request is received to go in a currently unavailable direction, record the requested direction in a variable.  If he gets to the corner or whatever and it hasn't changed (a further request will overwrite it), he starts moving in that direction. <br><br></td></tr></table><br>
<a name="2061836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey guys thanks for the tips/suggestions. I got it working sort of with the recommendations made here. There is a problem though. My game features a character that has a buddy. They are both part of the same Class. The only difference is that they are a different colour. &lt;&lt;&lt; <br><br>*****SIDESTEP*****<br>Colour<br><br>Above is how we spell Colour in the United Kingdom. As the English people invented the English Language, nurtured it, advanced it, matured it and fine tuned it, I take personal offence that no matter the configuration of my Chrome Browser the bloody spell check flags <b>The Proper Spelling Of Colour</b> as a spelling mistake which should be Color. We all know that the spelling of Colour as Color is Americas way of trying to claim the English Language as their invention. Sorry but it's not. Google Chrome needs to learn that.<br><br>******END SIDESTEP*****<br><br>Now both these players which are part of the same Class and list start in different locations. I'm pulling my hair out trying to implement a way that stops both of them changing direction until both have either hit an object or both have stopped moving due to an obstacle.<br><br>Any help with that would be appreciated.<br><br>Ta! <br><br></td></tr></table><br>
<a name="2061837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Why0Why</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use what I posted above.  Add a method to check to see if the next move is valid.  I add this method to my player classes.  Just pass in x and y position. If it isn't valid then try the left or right tile with the same method and then turn them to that direction if it is valid.<br><br>So say the player is at x=10 and y=10 and the wall is at y=8. You pass in (10,9) to see if he can move up 1.  he can so player is updated to x=10 and y=9.  Then you pass in the next position (10,8).  It returns false because there is a wall there.  Now randomly choose left or right, say right is chosen.  Then you pass in (11,9) and it is valid so turn player right. <br><br></td></tr></table><br>
<a name="2061846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Amon,<br><br>I don't see what your problem is with two objects being of the same class, so long as they are independent instances of the class.  The only thing that's needed is to put them in contact with each other:<br><br>local char1:Actor = New Actor()<br>local char2:Actor = New Actor()<br>char1.myBuddy = char2<br>char2.myBuddy = char1<br>actors.AddLast( char1 )<br>actors.AddLast( char2 )<br><br><br>'.......<br>Class Actor<br>Method CanChangeDirection:Bool()<br>Return IsStopped() And mybuddy.IsStopped()<br>End<br>End <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
