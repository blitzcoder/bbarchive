<!DOCTYPE html><html lang="en" ><head ><title >TrueType-Like Fonts</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TrueType-Like Fonts</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >TrueType-Like Fonts</a><br><br>
<a name="2039680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any functionality out there for monkey to let us use cross-platform, sizable fonts? Something with an interface like<br><br>[monkeycode]<br>   Local myFont:Font = New Font("Times New Roman")<br>   Local fontSize:Int = 12<br>   PlotText "My Test", myFont, fontSize, xpos, ypos ...<br>[/monkeycode]<br><br>Using bitmap fonts seems too restrictive, especially for cross-platform work. I guess if you don't make any dynamic elements to your interface it doesn't matter... :-/ <br><br></td></tr></table><br>
<a name="2039682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>There is no sizeable font support. Something like freetype would need to be written 'from the ground up' in Monkey to be able to achieve this on all targets, and no one's taken that on as yet... <br><br></td></tr></table><br>
<a name="2039692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheRedFox</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I am using Pharo Smalltalk (http://pharo-project.org) and there is a package in there that load and shows TrueType on the display. This is the software-only TT renderer (TTGlyph and TTKernPair). It can read a .ttf font directly.<br><br>It uses a drawing engine underneath but nothing Monkey cannot do.<br><br>A screenshot of my environment along with some inspectors open: <br><br><img src="http://content.screencast.com/users/philippeback/folders/Default/media/9b4d0d2a-12f9-47ac-a1fb-ae9fd557885d/PharoScreenshot.1.png"><br><br>Obviously, porting all of this Smalltalk code down to Monkey will be quite an undertaking. Smalltalk has a tendency to gear towards terse and short code that requires much much more in other languages.<br><br>But for learning how to deal with TTFonts, this is the best way to go as you are dealing with a live system.<br><br>Truth be told, I am working on some kind of Pharo to Monkey translator, which is in turn translating to native code on the Monkey supported platforms. This is based on what we call 'Slang', a subset of Smalltalk that generates C-code for the Smalltalk interpeter VM. So I am making a kind of 'Mlang'.<br><br>Anybody wanting my Pharo image along with the VM, just send me a mail to: phil@... <br><br></td></tr></table><br>
<a name="2040312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm interested in trying to program a TTF class. I  want to be able to include it in the future. My issue is I'm not sure of how to understand how to load it. If you could supply me with the required info I might be able to work some magic... Meanwhile I'll try and find out the info as well as work around the project. <br><br></td></tr></table><br>
<a name="2040329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> truly noble.<br><br><a href="https://developer.apple.com/fonts/TTRefMan/RM06/Chap6.html" target="_blank">https://developer.apple.com/fonts/TTRefMan/RM06/Chap6.html</a><br><br>and OTF...<br><a href="http://www.microsoft.com/typography/otspec/otff.htm" target="_blank">http://www.microsoft.com/typography/otspec/otff.htm</a> <br><br></td></tr></table><br>
<a name="2040646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is quite the challenge. I think that I'd actually like to explore integrating the native classes that are set up first (that stuff is scary O.O). I'm thinking that it might be better to use what each language already has instead of reinventing the wheel. Do you know of a good example of externing a class? I've tried:<br>Class ExUITextField="UITextField"<br>End<br>but I can't init that. (ios target btw) I'm trying to redo what mojo does but that is also a challenge. It would be awesome if we could do a project like this for each language. The way I see it, it needs to have a set number of proscribed functions as well. At the very least, monkey should provide access to native text classes/functions.<br>If I have to I'll read through the docs and try to build it from scratch but I don't think that, that's the most elegant solution in this case. <br><br></td></tr></table><br>
<a name="2040655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> i have a forum post on GC somehwere, which shows a bit of Class-extern shananigans and how to handle these things.<br><br>Not an easy thing to do unfortunately. TTF is NOT easy either. Definitely use the native libraries for each OS, i think they exist for each platform. You could probably create a TTF char set to a bitmap and send that to monkey... but you will reach hardships with the monkey&lt;--&gt;native barrier (and GC). That said, since the databuffers are updated V66+, you should use those for loading raw bitmap data to images (and the rest handled by monkey).<br>(ie, native ttf font-&gt;native bitmap-&gt; native databuffer-&gt;monkey)<br><br>Personally, I'm looking into SVG which might be able to handle vector fonts. <br><br></td></tr></table><br>
<a name="2040737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Personally, I'm looking into SVG which might be able to handle vector fonts. <br> <br></div><br><br>For x-platform that's not a bad idea. According to <a href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics" target="_blank">wikipedia</a> there's some level of SVG support (text element though?) in most mobile platforms, but I get the impression it is referring to browser (rather than native) support.<br><br>How far have you looked into it?<br><br>Regarding HTML5 vector text support: that's trivial. It's built into the canvas element, for most of the desktop browsers at least. I posted a little wrapper in the archives: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=3804." target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=3804.</a> In my tests it's significantly faster than DrawText and seems to respect all of Mojo's other commands (color, alpha, scale, rotation, etc) as you'd expect. Don't know for mobile platforms though. <br><br></td></tr></table><br>
<a name="2041397"></a>

<a name="2041398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that I could handle flash a lot easier but I really want to get this working for ios. It's a pretty big limitation that this is not an option for monkey. For all the ios devices, being able to scale text is important and with that in mind, using bitmap fonts is horrible. There's also the other side to consider, the option that we have right now (AngelFont) uses a lot more processing than it should.<br><br>What I'm thinking is looking into making a class that's pretty much function based. I've tried directly linking but as you probably know/would figure, this does not work.<br><br>How would you go about rendering an externed class? Does it have to be implemented already in the native code or is there some way to create a new class then start rendering it?<br><br>Edit: I've found the reference that AdamRedwoods mentioned. <a href="http://monkeycoder.co.nz/Community/posts.php?topic=1412#12807" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=1412#12807</a> This is similar to the example that is given in the monkey documentation but the difference is this one shows what is expected on the native side of the code. This is good. <br><br></td></tr></table><br>
<a name="2041416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Externing can get complicated very quickly when garbage collection is not automatic in the native language. If you are using just functions, this is fine. But if you are using classes, beware of the consequences.<br><br>For multiple fonts, have you tried using large fonts, then reducing the size?<br> This is where I would start. Does it look bad on retina displays?<br><br>Even with Flash (the Adobe suite), I still use bitmapped fonts at times over vector fonts since you can get it very crisp with PNG. <br><br></td></tr></table><br>
<a name="2041636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem that I see with using bitmaps is twofold and one contributes to the other. The first issue like you mentioned is how crisp the text is. As you say I'm sure that it can be made to be more crisp. I suppose that this can lead to two different issues however. Either you only use a few fonts and just do a ton of scaling. This however can really hurt performance. The other side of it is if you use multiple fonts you have an issue of drastically increasing the filesize. Either way, good luck in giving it a smooth transition between the fonts.<br><br>I'm not so concerned with garbage collection at this point. I know that it's important, however, I'm more concerned with something actually working.<br><br>There's only been two advantages with using bitmaps that I can see. 1 is the bitmap uses less processing and 2 you can make more complex things with it. The advantage with the speed is lost with scaling.<br><br>If someone has a simple example of the rendering aspect of an externed class or am I naive in thinking that there's a simple solution. <br><br></td></tr></table><br>
<a name="2050632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I've looked over what AdamRedwoods has supplied and I've found several problems.<br><br>1) The only way to load raw byte data is through a DataBuffer. The problem with this is it only provides a very limited format with loading data. I don't think that I can load shorts or longs or especially unsigned anything. Unless I'm completely out of there, unless I can properly scan through it with the data types that it set up with, I won't be able to properly load TTF fonts.<br><br>2) When I try to load a TTF file using the brl.DataBuffer with html5 I get this error: "Monkey Runtime Error : TypeError: Cannot call method 'setInt8' of undefined" <br><br></td></tr></table><br>
<a name="2050647"></a>

<a name="2050648"></a>

<a name="2050649"></a>

<a name="2050650"></a>

<a name="2050651"></a>

<a name="2050652"></a>

<a name="2050653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Ignition framework comes with a tool that converts ttf files so that the Ignition font loader can handle them.<br><br>I have also created a batch tool/script that can convert a whole directory at once in size you set.<br><br>I will try to release the batch tool in the next update.<br><br><img src="http://playniax.com/share/art/fconvert.jpg"> <br><br></td></tr></table><br>
<a name="2050718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> That thought actually crossed my mind as a solution. Although it was heading down some extremely unfamiliar territory for me. It's too bad it doesn't make it into a true vector based font. <br><br></td></tr></table><br>
<a name="2050666"></a>

<a name="2050754"></a>

<a name="2050755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> To further elaborate what I was thinking. I don't see any way to properly load a ttf file so I think that a new format needs to be made for monkey. Maybe MTF for Monkey Type Font. So a tool probably in java needs to be made to convert ttf to MTF. It would then be awesome if this could be combined to work with bitmap fonts. I feel that something more could be done with AngelFont to give it better performance.<br><br>The main thing that I need to figure out is to understand exactly what the binary data means. <br><br></td></tr></table><br>
<a name="2050781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> You know, with all the embedding/distribution issues with fonts these days, it may be safer just to stick with an external bitmap glyph maker. Flash is having these difficulties as well related to licensing issues. <br><br></td></tr></table><br>
<a name="2050803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ben - How can I give AngelFont better performance? I'm all ears. :) <br><br></td></tr></table><br>
<a name="2053100"></a>

<a name="2053101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I was thinking that for static text fields you could just paint all the letters into a single picture. You could potentially do this with words as well. Pretty much the only options I can think of will increase the memory requirements. Another thing that I'm thinking of is you can try to dice the picture up into each letter then get rid of the original pict. Then again I'm not sure how this would improve the performance.<br><br>On critique that I have for your AngelFont is it's not arranged to work like a normal textfield. I had to do my own rearranging to get more comfortable with it but that's just me.<br><br>AdamRedwoods just because there's licensing issues doesn't mean you should avoid ttf altogether, the option should be there.<br><br>PS Sorry for the late reply, I didn't notice the posts because of the lack of notification. I also just noticed the subscribe link. <br><br></td></tr></table><br>
<a name="2053120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ben - if you take a look at the latest version in the angelfont thread, you will see that you can already cache any words or lines of text to an atlas. Don't forget you can also just not re-render the whole screen when nothing is animated. Dicing the picture up will only slow things down on most targets, and yield no improvement on others.<br><br>As regards the textfield critique, the whole angelfont thing was only meant as a starting point for you to build on. <br><br></td></tr></table><br>
<a name="2053123"></a>

<a name="2053124"></a>

<a name="2053125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see, I hadn't realized that you were still working on the class. Do you have a default link for the current code and also a stable form? Cleaver work with the multichannel aspect although would it be possible to stack all letters together with a slight difference in the channel?<br><br>As for the TTF side of things. If someone would be interested with the binary side of things then I can look into the rastering side of things.<br><br>Btw, have you figured out the scale aspect of things as far as word wrapping is concerned? <br><br></td></tr></table><br>
<a name="2053128"></a>

<a name="2053129"></a>

<a name="2053143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is AngelFont still being worked on?  I don't mean to hijack the thread, but I've been toiling away at adding full Unicode support to it, and the original code feels like it could use a bit of an overhaul!  I would like to consolidate this work with the official branch, if I can, but it's a lot of work for just one person and frankly, I made the code an even bigger mess than before by adding in my UTF8String overrides.  It feels like it might take some community involvement.<br><br>There's several things about the code choices made in AngelFont I'd like to discuss, if the module is still being actively developed.  When I'm ready to announce my UTF8 work (it should be sometime today!), I'll lay them out there.  Needless to say, even before hacking in full Unicode, I'd made a wrapper for AngelFont+SimpleTextBox because the object model seems to have changed a lot over time and has become a bit.... inconsistent?<br><br><b>Edit:</b>  I've uploaded my module and laid out my thoughts here.  <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=4878" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=4878</a> <br><br></td></tr></table><br>
<a name="2053130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> The last post by beaker that I could find that I think is probably the right place is post #58 <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=141" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=141</a><br><br>I agree that a lot more work needs to be done with the code. For example I did some work making it so letters could be partially rendered if clipping is needed. Not to say that I'm hatting. It's cool that you've made something like this Beaker. <br><br></td></tr></table><br>
<a name="2053135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> seeing as how there appears to be a master branch right now (that's different from the version that comes with monkey), and also a branch with those particular packing additions, I think it might be wise to github this thing up so that it will be easier to merge all these changes later on.. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
