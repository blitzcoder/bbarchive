<!DOCTYPE html><html lang="en" ><head ><title >How would you go about generating these puzzles?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How would you go about generating these puzzles?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >How would you go about generating these puzzles?</a><br><br>
<a name="2057571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SpaceAce</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I love Inspector Parker, it was one of the games that really rekindled my interest in the Indie scene as a developer.<br><br><a href="http://www.shockwave.com/gamelanding/inspectorparker.jsp" target="_blank">http://www.shockwave.com/gamelanding/inspectorparker.jsp</a> &lt;- Play in browser<br><a href="http://www.bigfishgames.com/download-games/128/inspectorparker/index.html" target="_blank">http://www.bigfishgames.com/download-games/128/inspectorparker/index.html</a> &lt;- Download<br><br>This might be a little hard to follow, if you haven't played the game, but here goes:<br><br>Every level is randomly generated consisting of a number of floors, each with a number of rooms, in which are scattered objects related to the crime you are trying to solve. The same object will appear numerous times in numerous rooms. You also receive a number of clues. The clues are things like, "The bottle of laudanum is one room to the left of the old lady," "The man in blue is in the same room as the rocking chair," "The knife is 2 rooms above the spider," or, "The baby is X rooms to the right of the ransom note." You use these clues to select the right knife, the right old lady, etc, until you have found them all, then you have solved the crime.<br><br>As far as I know, every level provides enough clues to be solved. I'm curious how other developers would go about generating such levels, and the clues to go with them. How would you select the "real" knife from all the knives you throw into the rooms; how would you decide when to give an exact number of rooms in a clue, and when to say "X" rooms; how would you make sure all the clues meshed, properly; how would decide how many and which type of clue to provide so the level can be solved?<br><br>Step one seems easy enough, just select one of each item at random. Generating clues seems simple if you're only working with rooms that touch, but when the stages grow taller and wider, and things can be separated by multiple rooms, it gets tougher. I'm not really satisfied with the solutions I've come up with, so far, and I am wondering how other people would solve these challenges. I have a feeling there's some elegant grid-based solution I am missing. <br><br></td></tr></table><br>
<a name="2057650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Everett Kaser (http://www.kaser.com) is the king of this type of game.<br><br>I'm pretty sure the technique for any sophisticated game of this type is to build a solving engine, generate random boards, and add clues (just true 'statements' selected at random) until the engine can solve it.<br><br>If it takes a while to generate a puzzle, you can pre-generate them and embed them in the game.<br><br>That's not the only way to generate such logic puzzles (my 'Detective Chess' (http://bindweed.com/webgames/detectivechess/detectivechess.htm) doesn't use it, but it's probably the best and most general way.<br><br>Detective Chess uses an exhaustive search of all possibilities rather than a true solving engine.  It works because when I generate fixed positions for chess pieces, the number of combinations required to make an interesting puzzle doesn't get out of hand.  That's not going to work for every puzzle type, though.<br><br>If I wanted to make similar puzzles without the fixed piece positions, I'd need a real solving engine, because exhaustive search wouldn't be feasible (for 5 pieces, I'd have to solve for 7624512 possibilities, instead of only 120).  I think that is probably the case for all but the smallest Inspector Parker type puzzles. <br><br></td></tr></table><br>
<a name="2057649"></a>

<a name="2057646"></a>

<a name="2057647"></a>

<a name="2057648"></a>

<a name="2057652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SpaceAce</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now that's interesting. Thank you for both the link, and the thoughts on generating the puzzles. I've used a similar solving technique for other types of games, including one particular approach to Match-3.<br><br>So, you're saying the generation flow might looks like this:<br>- Create a grid of X by Y rooms<br>- Place items in the rooms<br>- For each type of item, designate one as the "correct" item*<br>- For each correct item, generate a true statement about that item's relationship to another "correct" item, such as "The spider is two rooms above the knife."<br>-- Check if this clue, plus all other clues about this item, expose this item as definitely being the correct one*<br>-- Check to see if marking that item is enough to solve the case<br>- Go back to the clue generating code. Repeat until board is solvable.<br><br>* Otherwise, you're generating clues about random objects. Instead of THE spider is next to the knife, you get A spider is next to A knife.<br>** No point making, like, twenty clues about the spider when the first two clues definitively reveal which spider is correct.<br><br>Does that sound about right? <br><br></td></tr></table><br>
<a name="2057651"></a>

<a name="2057666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> - Create a grid of X by Y rooms<br>- Generate one of each type of item for each room that may hold such an item (i.e. N creatures including one spider, N weapons including one knife.) In most Everett Kaser games, N = X*Y I..e. each room has one of each kind, but it seems Inspector Parker uses a smaller N.<br>- There is no special meaning of a 'correct' item: each room that can have an item has exactly one item of that kind.  The puzzle is solved when you have identified them all.<br>Repeat:<br>   - Create and add a random clue<br>   - Try to solve puzzle<br>Until puzzle is solvable<br><br>There is a further stage which is in fact done (or something very similar)  in Detective Chess but I forgot to mention:<br><br>For each clue:<br>   - Remove this clue<br>   - Try to solve puzzle<br>   - If puzzle is unsolvable, put back clue<br><br>This should answer your ** point.  You may have twenty clues about the spider, but most of them will be knocked out again in the final stage.<br><br>However, I do agree it might help in some puzzles if you use a heuristic to select good clues.  One might be that the clue made some measure of progress in the first loop; another might be that it references objects that are not referenced much in other clues.  Or you could combine both. <br><br></td></tr></table><br>
<a name="2057665"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
