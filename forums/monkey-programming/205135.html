<!DOCTYPE html><html lang="en" ><head ><title >Potentially Silly Question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Potentially Silly Question</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Potentially Silly Question</a><br><br>
<a name="2056621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >donicamm</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, I have this code:<br><br><pre class=code>
Function Main%()

Local mapData:String
Local levelPosition:Int

		mapData = ""
		mapData += "1111111111"
		mapData += "1010000031"
		mapData += "1011011111"
		mapData += "1000000001"
		mapData += "1111101111"
		mapData += "1200101001"
		mapData += "1000101001"
		mapData += "1011101101"
		mapData += "1000000001"
		mapData += "1111111111"
		
		levelPosition = 0;
		
		For Local i:Int = 1 To 10
			
			For Local j:Int = 1 To 10
			
				If String.FromChar(mapData[levelPosition]) = 0
					Print ("EMPTY SPACE")
				Elseif String.FromChar(mapData[levelPosition]) = 1
					Print ("WALL")
				Elseif String.FromChar(mapData[levelPosition]) = 2
					Print ("PLAYER")
				Elseif String.FromChar(mapData[levelPosition]) = 3
					Print ("BANANA")
				End
				'Print(String.FromChar(mapData[levelPosition]))
				levelPosition += 1
			End
			Print("END LINE")
		End
		
End
</pre><br><br>Right now, when I run the code, it prints everything as I'd expect, except  it never prints "EMPTY SPACE".<br><br>Here is an example of the output:<br><br><pre class=code>
WALL
WALL
WALL
WALL
WALL
WALL
WALL
WALL
WALL
WALL
END LINE
WALL
WALL
BANANA
WALL
END LINE
WALL
WALL
WALL
WALL
WALL
WALL
WALL
WALL
END LINE
WALL
WALL
END LINE
WALL
WALL
WALL
WALL
WALL
WALL
WALL
WALL
WALL
END LINE
WALL
PLAYER
WALL
WALL
WALL
END LINE
WALL
WALL
WALL
WALL
END LINE
WALL
WALL
WALL
WALL
WALL
WALL
WALL
END LINE
WALL
WALL
END LINE
WALL
WALL
WALL
WALL
WALL
WALL
WALL
WALL
WALL
WALL
END LINE
</pre><br><br>When I uncomment, my one commented line, the 0s are printed. So I know 0 is what is being picked up. Why aren't they picked up by my conditional?<br><br><pre class=code>
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
END LINE
WALL
1
0
WALL
1
0
0
0
0
0
BANANA
3
WALL
1
END LINE
WALL
1
0
WALL
1
WALL
1
0
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
END LINE
WALL
1
0
0
0
0
0
0
0
0
WALL
1
END LINE
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
0
WALL
1
WALL
1
WALL
1
WALL
1
END LINE
WALL
1
PLAYER
2
0
0
WALL
1
0
WALL
1
0
0
WALL
1
END LINE
WALL
1
0
0
0
WALL
1
0
WALL
1
0
0
WALL
1
END LINE
WALL
1
0
WALL
1
WALL
1
WALL
1
0
WALL
1
WALL
1
0
WALL
1
END LINE
WALL
1
0
0
0
0
0
0
0
0
WALL
1
END LINE
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
WALL
1
END LINE
</pre> <br><br></td></tr></table><br>
<a name="2056622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ummm...you've actually found a bug in Monkey!<br><br>To fix for now, try comparing with "0", "1" etc instead of 0, 1 etc. <br><br></td></tr></table><br>
<a name="2056623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I know 0 is what is being picked up <br></div><br><br>"0" is on one side of the comparison sure, but it isn't on the other.<br><br><pre class=code>If String.FromChar(mapData[levelPosition]) = 0</pre><br><br>That line tries to compare a String with an integer literal. It implies a conversion from the integer to a string. For some reason String(0) produces an empty string rather than "0".<br><br>That may well be a bug, but for your purposes you're better off comparing like with like and avoiding converting anyway. So either put string values on the other side ("0" rather than 0) or compare the charCode to the ascii value directly (mapData[levelPosition] = 48). <br><br></td></tr></table><br>
<a name="2056625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >donicamm</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, awesome!<br><br>The "for now" fix is fine for now, so I'm going to roll with it. Thanks for replying to my post marksibly. <br><br></td></tr></table><br>
<a name="2056624"></a>

<a name="2056662"></a>

<a name="2056663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way, just as a suggestion you may find something like the following a bit cleaner and also more efficient:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Local mapData:String[] = [
		"1111111111",
		"1010000031",
		' ...
		"1111111111" ]
		
For Local i:Int = 0 Until 10
	For Local j:Int = 0 Until 10			
		Local code:Int = mapData[ i ][ j ]
		If code = 48
			Print ("EMPTY SPACE")
		'...
		End
	Next
Next
</textarea> <br><br>Obviously it doesn't really matter for a small test program, but the string concatenation and the use of 1-based indexes can often be a recipe for confusion... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
