<!DOCTYPE html><html lang="en" ><head ><title >Interfaces as Function Pointers</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Interfaces as Function Pointers</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Interfaces as Function Pointers</a><br><br>
<a name="2036609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone have a code example of interfaces as function pointers?<br><br>I've tried implementing action objects but I haven't been able to get this working... <br><br></td></tr></table><br>
<a name="2036610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >invaderJim</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Shinkiro left a small example at the bottom of this thread: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=3477" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=3477</a><br><br>But if you need to see it in action, I've typed up a quickie<br><br>[monkeycode]<br>Interface Action<br>	Method Execute:Void()<br>End<br><br>Function DoAction(action:Action)<br>	action.Execute()<br>End<br><br><br>Class PrintSomething Implements Action<br>	Method Execute:Void()<br>		Print("Something")<br>	End<br>End<br><br>Class PrintSomethingElse Implements Action<br>	Method Execute:Void()<br>		Print("Something else")<br>	End<br>End<br><br>Function Main()<br>	Local printSomething:PrintSomething = New PrintSomething()<br>	Local printSomethingElse:PrintSomethingElse = New PrintSomethingElse()<br>	<br>	DoAction(printSomething)<br>	DoAction(printSomethingElse)<br>	<br>End<br>[/monkeycode]<br><br>So, basically, for each function callback you want to create, you have to define and instantiate a class. Lots of typing at times, but it gets the job done. <br><br></td></tr></table><br>
<a name="2036612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks.  I know I asked about this before (and maybe you answered, and maybe it was precisely the same answer...) but I've still been having trouble coming to grips with it.  I will take another run at it with the aid of this code.<br><br>I've been reading a lot about design patterns.<br><br>One thing I've been thinking about after reading about Haskell and LISP is the idea of a pipe object, which would contain a number of function pointers and would take an operand object at one end of the pipe.  Each function pointer would operate on the object and pass it on to the next.<br><br>Is this a common construct and are there any immediate uses that come to mind?  This is also similar to UNIX pipes. <br><br></td></tr></table><br>
<a name="2036611"></a>

<a name="2036613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Real pipes would use a producer/consumer pattern.  This is easy in Unix as each process would handle the produce and consume implementations.  To do something like this in a single process, you need to either use threads, coroutines, or an awkward loop.<br><br>Monkey's default implementation does not support multithreading, nor coroutines, but Diddy has a subproject for threading if you want to take a look at it.  Not all targets are supported, since not all targets support multithreading (ie. HTML5, Flash).<br><br>For maximum compatibility you may just want to use a single loop and alternate produce/consume.  It's awkward, but it works.<br><br><a href="http://en.wikipedia.org/wiki/Coroutine" target="_blank">http://en.wikipedia.org/wiki/Coroutine</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
