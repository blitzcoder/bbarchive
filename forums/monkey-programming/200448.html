<!DOCTYPE html><html lang="en" ><head ><title >Flush keys?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Flush keys?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Flush keys?</a><br><br>
<a name="2003340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to "flush keys" like it was possible in BlitzMax?<br><br>Here's a example:<br>I have a modal  window that pops up when the player hits "escape". Once the window is on, though, it checks for escape again to turn itself off, but that check is performed on the same frame that called the window in the first place, so the window closes immediately after opening.<br><br>While I can see ways to work around that, none of them would be as clean as resetting the input stack, So... is there a way to do that in Monkey?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2003409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> looking at the source of mojo.input it *probably* wouldn't be hard to implement since the key states are simply stored in an array, this array could be zeroed on a call to flushkeys. <br><br></td></tr></table><br>
<a name="2003434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looking at mojo.input was my first impulse, but I didn't find any array I could access and clear. The only mention to KeyHit, for instance, is this:<br><br>Function KeyHit( key )<br>	Return device.KeyHit( key )<br>End<br><br>The "device" object seems to be defined in non-Monkey code (as far as I can tell from the top of my noobness), hence my problem. Is there a way to access it through Monkey, in order to keep everything cross-platform?<br><br>Thanks!<br>Leo. <br><br></td></tr></table><br>
<a name="2003504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sknightly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Monkey automatically Flushes Keys before each OnUpdate.<br><br>From the Modules Reference:<br>The input module uses a 'polling' input model, meaning that your program must continually check (or 'poll') the state of input devices. Polling is usually performed during the OnUpdate phase of your program. <br><br></td></tr></table><br>
<a name="2003515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's very helpful to know!<br><br>Unfortunately, the problem I'm running into is that the newly created object (a popup window) checks for a key hit in the same "OnUpdate" that it was created, forcing me to use a key to open the popup window, then another key to close it - otherwise it opens and then closes on the same frame - which sucks.<br><br>I tried delaying that key check by one frame, but that caused other things to stop working properly :-(.... forcing  Flush Keys on demand would really be a one line solution in this case.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2003516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, just to clarify, I'm using "autonomous" objects - each Entity manages itself. There's no centralized input manager, so polling for input may occur at different moments on the same Update loop.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2003517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know if this will work for you but I would create a global variable that stores the scape key hit at the beginning of the "OnUpdate" and clear the variable where you use it. that way you would only be able to use it once per "OnUpdate" cycle. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
