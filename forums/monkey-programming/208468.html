<!DOCTYPE html><html lang="en" ><head ><title >Really rotate an image</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Really rotate an image</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Really rotate an image</a><br><br>
<a name="2086780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tazzy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All,<br><br>I'm using FantomEngine for my game and I run into a problem with animations combined with TexturePacker spritesheets, which by design can be saved rotated on the canvas.<br><br>To fix that I need to really rotate an image, isntead of using the Matrix, or at least use an image as canvas so that I can  rotate it myself. Is there any way in Monkey to do that, or is there another work-around without changing the FantomEngine source?<br><br>I can't seem ti find anything in the documentation about it.<br><br>Any help is appreciated :)<br><br>Cheers,<br><br>Tazzy <br><br></td></tr></table><br>
<a name="2086792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you mean by "really rotate"? DrawImage has a rotation parameter. Does that in some way not "really rotate" the image?<br><br>If you want to use TexturePacker's rotation then you'll need to store the rotation of the frame and unrotate on render. I don't use FantomEngine so I've no idea if it supports the rotated flag in TexturePacker's output or how it does animations.<br><br>You may well find the easiest option is to just turn off rotation in TexturePacker. <br><br></td></tr></table><br>
<a name="2086796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LemonBytes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can create your own Image class and encapsulate this for you. It should be easy and useful <br><br></td></tr></table><br>
<a name="2086798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tazzy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>The problem is FantomEngine does the DrawImage for you with it's engine and also supports animation frames. However the rotation, scale etc.  can only be set on the image object and not on the individual frames which are just simple mojo.Image classes. So to make this work all frames need to be oriented in the same position.<br><br>TexturePacker tries to add as many images as possible in a small texture. I order to do that it sometimes rotates the image in the atlas. The data file indicates it's rotated in that case, so you should be able to rotate it back. So I need something like:<br><pre class=code>
newImg:Image = oldImage.Rotate(-90)

or 

newImg:Image = CreateImage(oldImage.Height, oldImage.Width)
context := newImage.CreateContext()
context.Rotate -90
context.DrawImage(oldImage)
</pre><br><br>to 'really" rotate the image (e.g. The Image class contains the rotated image) <br><br></td></tr></table><br>
<a name="2086803"></a>

<a name="2086805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's possible to create an unrotated texture but not without effort and you'll only succeed in destroying the advantage of packing the texture in the first place. Sounds like you'll need to alter FantomEngine to take a rotation per frame if you want to use the rotation feature in TP.<br><br>Again, it's likely far easier to just turn it off. The packing efficiency difference is usually small. <br><br></td></tr></table><br>
<a name="2086809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, TexturePacker allows for disabling rotation in the export settings. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
