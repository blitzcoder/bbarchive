<!DOCTYPE html><html lang="en" ><head ><title >Huge Memory leak on iOS</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Huge Memory leak on iOS</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Huge Memory leak on iOS</a><br><br>
<a name="2046027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, sorry if this is a noobish topic.  I searched the forums and read many posts but couldn't find any help.<br><br>Basically I found out today that my iOS app is not freeing up memory by the looks of things.  I rapidly alternated between two screens and the the game bombed.  I used Instruments on my Mac and could see the app memory go about by around 2Mb per screen swap.<br><br>When I move to a new screen in my game I set the field pointing to the main image on the old screen to null and then load in the new image for the new screen.  It's the same method I've used for years on PC, but it seems that this causes a huge memory leak on iOS.  If I comment out the image loading there is still a leak when changing screens but it is smaller. Also the memory use seems to creep up a bit just as the game is idling.<br><br>I also used Activity Monitor on Mac to view memory use for the GLFW app and it too goes up a tiny bit with repeated screen swaps but seems to stop at about 45Mb, maybe, it's a bit hard to tell.<br><br>I just noticed that if I let the game idle on iOS for a bit and then go back to it the mem use has dropped down again.  Seems like the GC doesn't kick in every update which is risky if you did a lot of creating/freeing memory in sequence especially on devices like iPad 1 where if you go over about 90Mb mem use it'll crash (I know this from working on other C++ projects and talking to other devs who confirm the same) <br><br></td></tr></table><br>
<a name="2046028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> * A fix for images not discarding themselves quickly enough due to incremental GC. Also copied some of the new v67 GC in...<br><br>Mini-update for V66 thread. <br><br></td></tr></table><br>
<a name="2046032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah perfect, will try out tomorrow.  Thx! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
