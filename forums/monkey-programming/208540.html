<!DOCTYPE html><html lang="en" ><head ><title >Drawing text in languages other than English</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Drawing text in languages other than English</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Drawing text in languages other than English</a><br><br>
<a name="2087967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lindsay</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm looking at how to make my app in several languages. I've quickly found that DrawText doesn't like it!  I've looked at some of the modules but it's unclear which (if any) work with foreign characters. <br><br>Can someone point the way?<br><br>Thanks,<br>Lindsay <br><br></td></tr></table><br>
<a name="2087971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> DrawText uses the mojo_font.png which doesn't contain any foreign characters, I'd suggest using either FontMachine, AngelFont or Chris's new TrueType Font module:<br><a href="http://www.monkey-x.com/Community/posts.php?topic=8470" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=8470</a> <br><br></td></tr></table><br>
<a name="2087975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lindsay</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will definitely need support for Asian characters, and right-to-left languages like Arabic too. I know, not asking for much! <br><br></td></tr></table><br>
<a name="2087976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would say you are going to have to create your own system for Arabic... I don't think any of the current font modules support right to left. <br><br></td></tr></table><br>
<a name="2087977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Lindsay wrote:</b><br><div class="quote"> Can someone point the way? <br></div><br><br>It's a bit hard to implement than using ansi chars only.<br><br><b>therevills wrote:</b><br><div class="quote"> DrawText uses the mojo_font.png <br></div><br><br>Bitmap font is a simplest way. Create font image for every supported language and switch it in run-time. I am not sure about DrawText() works correct with international chars by default.<br><br><b>therevills wrote:</b><br><div class="quote"> Chris's new TrueType Font  <br></div><br><br>This module doesn't support chars with code over 255 yet.<br><br>AngelFont creates bitmap font for foreign languages. I don't know about FontMachine. I haven't license to use it. <br><br></td></tr></table><br>
<a name="2087978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adding right-to-left to fontmachine should be a piece of cake and the module is open source. also, the editor allows to export arabic characters (and asian characters too). In fact, you can just pass the arabic text and align to the right which is supported in all drawing commands, including wordwrapp etc. <br><br></td></tr></table><br>
<a name="2087980"></a>

<a name="2087981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <strike>FontMachine supports foreign characters. I don't think it has right-to-left handling though.</strike><br><br>Edit: Ninja'd <br><br></td></tr></table><br>
<a name="2087979"></a>

<a name="2088246"></a>

<a name="2088247"></a>

<a name="2088248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe this helps. Ignition X comes with a tool to convert TTF files so Ignition X can render them. Here is a <a href="http://docs.playniax.com/html/data/Ignition%20introduction/font_converter.html" target="_blank">screenshot</a> <br><br></td></tr></table><br>
<a name="2088250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vmakar85</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Lindsay, i use fantom engine and online bmf <a href="http://kvazars.com/littera/" target="_blank">http://kvazars.com/littera/</a> <br><br></td></tr></table><br>
<a name="2088253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use a modyfied version of AngleFont, which now accepts big sized fonts with high Unicode numbers.The regular AngleFont stopps at ASCIIs&gt;255. My modification allows numbers upto 40,000. In this context I modyfied the function LoadFont(), which now loads thousand of font images within 200msec.<br>I prepare the image fonts I need with the tool from Beaker (AngleFont author). The images are often very big (1000x1000pix).<br>I use it for german, russian and other european languages. I never tested arabic or chinese... <br><br>Search for "Nobuyuki" here in forum. He is very experiences wit foreign language fonts a did a lot of modifications. <br><br></td></tr></table><br>
<a name="2088254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lindsay</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks everyone -- in the end I've "solved" the problem by using image files - not as fonts, but as pre-rendered files of the text I actually need.  Obviously this makes the app bigger, but I can live with that. <br><br></td></tr></table><br>
<a name="2088286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Playniax wrote:</b><br><div class="quote"> Maybe this helps. Ignition X comes with a tool to convert TTF files so Ignition X can render them. Here is a screenshot <br></div><br>It shows ascii only. Do screenshot with unicode chars (Russian, Arabic, Chinese, etc)<br><br><br><b>vmakar85 wrote:</b><br><div class="quote"> online bmf <a href="http://kvazars.com/littera/" target="_blank">http://kvazars.com/littera/</a> <br></div><br><br>Well. No found chinese and arabic in presset of charsets.<br><br><br><b>Midimaster wrote:</b><br><div class="quote"> I use a modyfied version of AngleFont,  <br></div><br><br>Do you publish your solution yet? <br><br></td></tr></table><br>
<a name="2088303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vmakar85</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>nikoniko</b><br><img src="https://lh4.googleusercontent.com/-fd_hL47N4xc/U4Tf_S2QvdI/AAAAAAAAF1I/nL4mDbWblh4/w883-h428-no/gkj%255Bjbcrfk.png"> <br><br></td></tr></table><br>
<a name="2088302"></a>

<a name="2088301"></a>

<a name="2088300"></a>

<a name="2088340"></a>

<a name="2088341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I remember it were only a few changes necessary. Beaker inserted a check for ASCIIs over 255. I replaced this with the constant MAX_CHARS and set MAX_CHARS to the maximum unicode number need in my font:<br><br>modul anglefont.monkey:<br><pre class=code>Class AngelFont
	Private
	
	Global _list:StringMap&lt;AngelFont&gt; = New StringMap&lt;AngelFont&gt;
	Const MAX_CHARS%=8500
	Field image:Image[] = New Image[1]	
	Field chars:Char[MAX_CHARS+1]
....
	Method DrawText:Void(txt:String, x:Int, y:Int)
		Local prevChar:Int = 0
		xOffset = 0
		
		For Local i:= 0 Until txt.Length
			Local asc:Int = txt[i]
			If asc&gt;MAX_CHARS Then
				Print asc + " " + MAX_CHARS
				 asc= "*"[0]
				 Error ""
			Endif</pre><br>Now you already can create image fonts with more characters. You need not more!<br><br><br><br>I also changed the loading function, because it was too slow for more than 255 characters. The original function loads a text with the character descriptions. My new function loads a DataBuffer which contain the character values as Shorts:<br><br><pre class=code>	Method LoadFontFast:Void(url:String, FontImage:Image=NULL)
		
		Local Bank:DataBuffer = DataBuffer.Load("monkey://data/" + url  + ".bin")	
		Local id%,Nr%
		For  Nr=0 To (Bank.Length()/16-4)
			Local x%,y%,w%,h%,xoff%,yoff%,adv%
			Local da%
			da=Nr*2*8
			id=Bank.PeekShort(da)
			x=Bank.PeekShort(da+2)
			y=Bank.PeekShort(da+4)
			w=Bank.PeekShort(da+6)
			h=Bank.PeekShort(da+8)
			
			xoff=Bank.PeekShort(da+10)
			yoff=Bank.PeekShort(da+12)
			adv=Bank.PeekShort(da+14)
			chars[id] = New Char(x, y, w, h, xoff, yoff, adv)
			If h &gt; Self.height Self.height = h
			If yoff &lt; Self.heightOffset Self.heightOffset = yoff
		Next
	
		If FontImage&lt;&gt;Null
			image[0] =FontImage
		Else
			image[0] = LoadImage(url+".png")
		Endif 
	End Method
</pre> <br><br></td></tr></table><br>
<a name="2088344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>vmakar85</b><br><br>Ok. My Firefox was crashed on that preset.<br><br><b>Midimaster</b><br><br>thx! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
