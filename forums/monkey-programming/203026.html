<!DOCTYPE html><html lang="en" ><head ><title >Does Monkey Do Short Circuiting of Conditionals</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Does Monkey Do Short Circuiting of Conditionals</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Does Monkey Do Short Circuiting of Conditionals</a><br><br>
<a name="2030781"></a>

<a name="2030782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> NEVERMIND! I realize I should ask this of a target, not of the monkey language itself. :-/<br><br>***<br><br>Does monkey short circuit conditionals?<br><br>As an example:<br><br>[monkeycode]<br>  If 1=2 And 2=2 Then<br>    Print "Impossible!"<br>  Else<br>    Print "That's what I thought."<br>  Endif<br>[/monkeycode]<br><br>In the above, since 1=2 is false, it doesn't have to evaluate the rest.<br><br><br>[monkeycode]<br>  If 1=1 Or 2=3 Then<br>    Print "Here, always."<br>  Else<br>    Print "WRONG!"<br>  Endif<br>[/monkeycode]<br><br>In the above, since 1=1 is true, our conditional is true; there's no need to evaluate 2=3.<br><br>This applies to any "A and B" or "A or B" conditional. <br><br></td></tr></table><br>
<a name="2030783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What problem are you trying to solve?<br>If it's about performance, I think it's not something which will be your bottleneck. <br><br></td></tr></table><br>
<a name="2030785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes it does with "And" and "Or", but it does not with bitwise &amp; and | for obvious reasons<br><br>You can safely do:<br>[monkeycode]If mywhatever&lt;&gt;Null And mywhatever.AMethod() &gt;0 Then<br>....<br>EndIf[/monkeycode] Without worring that the second part of the expression will be executed on a null object instance. <br><br></td></tr></table><br>
<a name="2030784"></a>

<a name="2030799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matty</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ziggy - Really? I never knew that - I always put the "if x&lt;&gt;null" in a separate if statement enclosing the next if statement because I was worried that I'd get a null access problem like with MAVs in Blitzplus/Blitz3d...it seems wrong to me to check if something is null and still test a method, property or field of that object in the same if statement as if it is just asking for trouble... <br><br></td></tr></table><br>
<a name="2030802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would say its target dependant, since Monkey translates the If statements into the target If statements... <br><br></td></tr></table><br>
<a name="2030806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not target dependant. It's how the Monkey compiler handles the operators. From the Monkey wiki:<br><br><div class="quote"> Conditional operators<br> <br>The arguments of conditional operations (And, Or) are first converted to boolean if necessary and the result is boolean.<br> <br>In the case of Or, if the left-hand-side expression evaluates to true, the right-hand-side expression is not evaluated.<br> <br><br>For example:<br> If car&lt;&gt;Null Or GetSpeed()&gt;10 Then...<br><br> In the above example, if car is not Null, then the right-hand-side of the Or is not evaluated - ie: the GetSpeed function is never called.<br> <br>In the case of And, if the left-hand-side expression evaluates to false, the right-hand-side expression is not evaluated.<br> <br><br>For example:<br> If enemies.Count &gt; 0 And HasEnemyInSight() Then ...<br><br> In the above example, if enemies.Count is &lt;= 0, then the right-hand-side of the And is not evaluated - ie: the hasEnemyInSight function is never called.<br> <br></div><br><br>Reference: <a href="http://blitz-wiki.appspot.com/Language_reference#expressions" target="_blank">http://blitz-wiki.appspot.com/Language_reference#expressions</a><br><br>So it is safe to considere them short circuiting conditions is not a target depending thing, and can be used safely. All expression evaluation is (order of operators, data balancing and data conversion, etc.) is handled by the trans compiler, so you are safe. <br><br></td></tr></table><br>
<a name="2030819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Shinkiro, yes, I was asking for performance reasons.<br><br>Thanks for the info, guys (esp. ziggy with the docs reference). :-) <br><br></td></tr></table><br>
<a name="2030878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm pretty sure it is target dependent no matter what it says in the docs ;)<br><br>Monkey Code Example:<br>[monkeycode]Function Test1(a%, b%)<br>	Print "Test1 start"<br>	Return a + b<br>End<br><br>Function Test2(a%, b%)<br>	Print "Test2 start"<br>	Return a + b<br>End<br><br>Function Main()<br>	Local x%=5,y%=6<br>	Print "start"<br>	If (Test1(10,5)&gt;16 And Test2(10,5)&gt;10) Then<br>		Print "Test"<br>	Else<br>		Print "Fail..."<br>	End<br>End[/monkeycode]<br><br>Which converts to:<br><br>HTML5:<br><pre class=code>if(bb_untitled4_Test1(10,5)&gt;16 &amp;&amp; bb_untitled4_Test2(10,5)&gt;10){</pre><br>C++:<br><pre class=code>if(bb_untitled4_Test1(10,5)&gt;16 &amp;&amp; bb_untitled4_Test2(10,5)&gt;10){</pre><br>If the target language does not do short circuiting it will do both Test1 and Test2, say for example if someone created Blitz3D target ;)<br><br>Its just "lucky" that all the official Monkey targets supports short circuiting  :P <br><br></td></tr></table><br>
<a name="2030871"></a>

<a name="2030869"></a>

<a name="2030870"></a>

<a name="2030867"></a>

<a name="2030866"></a>

<a name="2030877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well... I would say if anyone creates a Blitz3D target he/she will have to translate this using nested ifs. The same way trans is handling overloading on languages that do not support it or faking to be strong typed when its using javascript. If the Monkey language supports conditional short circuiting your target should not be an exception. In the same way you would ensure operators execution order is the same no matter which target are you targetting. <br><br></td></tr></table><br>
<a name="2030903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Like I said its "lucky" that all the offical Monkey supports short cicuiting as Monkey doesnt do anything itself... <br><br></td></tr></table><br>
<a name="2030909"></a>

<a name="2030910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think it's lucky. As instance, Mark decided to not support ^ operator and use a function instead becouse otherwise we would be "out of luck" on language consistence. As this operator has different preference on different languages.<br>As instance, if one would be to make a vb.net target, "And" should be translated to "AndAlso" and "Or" should be translated to "OrElse" operators. That's what he's doing, and he's got this into account, and then he also clearly explains this design on the docs, so I would not say it by luck, but by design. Or you would sincerely considere that a Monkey target that does not behave like all of the other officialy suported targets is reliable, well implemented and not buggy?<br><br>That's like saying that Monkey does not have its own expression evaluation, so it does not have a custom operators-order execution, its custom type balancing, etc. As instance, it supports automatic conversion to boolean on If, While and any other conditional statement, whilte this is not standard on C# or Java, to name two. One of the strongest points on Monkey is that this data management, type strength, etc. is reliable and consistent between targets. So, honestly, I don't think it's something that just "came out" as a happy coincidence. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
