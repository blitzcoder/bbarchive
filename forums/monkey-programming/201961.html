<!DOCTYPE html><html lang="en" ><head ><title >Framework questions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Framework questions</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Framework questions</a><br><br>
<a name="2018710"></a>

<a name="2018711"></a>

<a name="2018712"></a>

<a name="2018713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working on a framework to help make games quickly and easily. What kind of features would you like to see? <br><br>I currently have:<br><br>FontManager<br>BitmapFonts - static labels, dynamic labels<br><br>SpriteAtlasManager<br>SpriteAtlas - single frame grabbing, animation frame grabbbing<br><br>SceneManager<br>Scenes - scene changes, scene transition effects<br><br>Sprites<br>Primitives - Circle, Poly, Point, Rect, Arc, Line<br><br>ActionManager<br>Actions - Sequence, Repeat, RepeatForver, DelayTime, Animate, Move, Scale, Rotate, Blink which support decorator actions such as  xxxIn, xxxOut, xxxInOut where xxx is Elastic, Ease, Bounce, Quadratic, Sine, Back etc<br><br>Actions can be run on any Node, so that means you can run actions on Scenes, Sprites, Primitives etc. <br><br>Virtual Buttons - Toggle, Click or Hold<br>Virtual DPad - 4 directional or 8 directional<br>Virtual Analogue Stick<br><br>Virtual Resolution thanks to DruggedBunny for his lovely code<br><br>I would appreciate any suggestions :)<br><br>[edit] forgot to say that once I have added a bit more to it, I plan on releasing it for free. <br><br></td></tr></table><br>
<a name="2019600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Topanoe</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi noodle. Will this be like a "spritecandy" for Monkey?  AWESOME!!<br><br>Looking forward to seeing it. <br><br></td></tr></table><br>
<a name="2019601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheRedFox</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> A nice feature would be the ability to use parts in isolation as much as possible.<br><br>e.g. Actions alone, Atlas alone... <br><br></td></tr></table><br>
<a name="2019606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Virtual Resolution thanks to DruggedBunny for his lovely code<br> <br></div><br>Cool, it's nice to hear when you've finally done something useful!<br><br>One thing others have mentioned is image batching (eg. <a href="http://www.blitzbasic.com/Community/posts.php?topic=96581#1118577" target="_blank">Gabriel, here</a>), but I have no idea how you go about it, so perhaps that might be something worth looking at? I imagine it involves platform-specific code, though -- could be wrong -- which might not be part of your plan! <br><br></td></tr></table><br>
<a name="2019619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Image batching requires planning by the coder.<br>You can do this on your own by using texture atlases. Try to get your draw loops to call the same units in each atlas. Example: Class Background would use method Draw() to draw everything in the background layer using only one texture atlas called background. <br><br></td></tr></table><br>
<a name="2019618"></a>

<a name="2019627"></a>

<a name="2019628"></a>

<a name="2019629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not too sure what Gabriel meant as well but at a guess I would say that if you were doing a platformer you would arrange your atlas so that you have one big platform graphic thats let say 10 game tiles long (2 tiles for the ends 8 for the middle at 32x32 pixels each tile). Then if your game needs a platform thats 10 tiles (2 end tiles, 8 middle tiles) you just need to call the drawing routine once for the whole image 320x32 pixels. Then if you need any thing thats smaller say 5 tiles then you would call the routine twice. The first call to draw one part of the big graphic an end and 3 middle sections (128x32 pixel) and the second to draw the last part an end section at 32x32. Of course if you need something bigger then you will have to call the draw routine 3 or more times depending on the size of the mid section tiles.<br><br>Doing it that way you would be sacrificing atlas image space just to make fewer calls to the drawing routine.<br>But just think of how many calls you would have to make if the platform graphic was just 3 tiles long  (96 pixelsx32) and you need a platform thats 10 tiles. <br><br></td></tr></table><br>
<a name="2019625"></a>

<a name="2019624"></a>

<a name="2019623"></a>

<a name="2019622"></a>

<a name="2019640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dawlane the point of a texture atlas is to reduce the number of texture binds required. Drawing an image is relatively inexpensive, but uploading it to the gpu is costly. It's faster to upload a large batch of renders for one image. <br><br></td></tr></table><br>
<a name="2019641"></a>

<a name="2019642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Samah<br>Yep I already know that mate that's why the game I've been working on use an atlas. It's just trying to figure out what Gabriel ment by "Draw calls will get you every time though. For the second gen iOS devices, you want about 20 draw calls max. So depending on how much you have to draw, you probably need to be building texture atlases, sharing materials and textures and batching as much as possible into one draw call. One of my current games has 550-600 items to be draw each frame but we batch it down to under 20." <br><br></td></tr></table><br>
<a name="2019660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right, but define "draw call".  To me a draw call is the act of queuing a render (x,y,z,u,v coordinates).  A "flush" is the act of piping the vertex info to the GPU.  Binding a new texture or changing a render setting (blending, for example) will require a flush.<br><br>So you can call "Draw" 10000 times if you like, as long as it's only pushing to the GPU a handful of times per frame. <br><br></td></tr></table><br>
<a name="2019697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Samah<br>After re-reading Gabriel's post along with yours it sounds like that's what he's talking about.<br>Cheers <br><br></td></tr></table><br>
<a name="2019722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> So how does batching translate to Monkey code? Is it just a case of repeated DrawImageRect calls using various rects within the same image as many times in a row as possible, or does it require low-level platform-specific code?<br><br>(NB. Not a clue here... never used image atlases ever!) <br><br></td></tr></table><br>
<a name="2019723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is it just a case of repeated DrawImageRect calls using various rects within the same image <br></div><br><br>yes <br><br></td></tr></table><br>
<a name="2019746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, using GrabImage just creates a reference to the same surface, using different texture coordinates.  Pretty much zero overhead, and doesn't reload the source. <br><br></td></tr></table><br>
<a name="2020059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've added some more:<br><br>Touch Manager - Detects touch down, up, up inside, move, and multi tap versions of all<br>Touch dispatcher - Dispatches touches to nodes which can optionally swallow touches<br>Gesture Manager - Detects gestures, either pre built ones or create your own<br>Sound Manager - Stores sounds in a library<br>Menus - Horizontal, Vertical, Grid x/y all are scrollable and can contain labels or sprites<br><br>Batching is already in, implemented when SpriteAtlas was implemented. There are some limitations regarding z depth with sprites from other Atlases but usually not an issue.<br><br>Improved action manager, can now reverse any action or sequence of actions to create more complicated actions. <br>Spawn actions - spawn multiple actions at the same time. All of this can be applied to any node. e.g. scene, layer, sprite, menu etc etc.<br><br>Also improved touch support for transformed nodes, now takes into account rotation, scaling, skew etc; transforming the rect bounds so that touch detection is more accurate.<br><br>Future additions will be highscore system, custom poly bounds for super accurate touching, collision detection and response, parallax layer, tiled layers, grid layers. Particle system. Too much to list really but lots of additions.<br><br>For those that know cocos2D, I'm pretty much replicating the functionality. I may even write a translator to spit out cocos2D xcode projects if I feel that it could work for most projects. Still not sure about this.<br><br>I will be releasing this sometime in the new year as I've been a bit distracted recently learning python and various libraries; tkinter, pyqt, wxPython, matplotlib, pySerial... <br><br></td></tr></table><br>
<a name="2020058"></a>

<a name="2020060"></a>

<a name="2020061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>TheRedFox	(Posted 1 week ago) #3<br>A nice feature would be the ability to use parts in isolation as much as possible.<br><br>e.g. Actions alone, Atlas alone... <br> <br></div><br><br>Sorry the framework is fairly reliant on other parts. But you would be free to rip out that dependancy and use the actions as you wish. <br><br>The sprite atlas actually can be used separately. It currently supports loading of Zwoptex sprite sheets. Plan to add support for others.<br><br>Likewise the bitmap font loader supports loading of GlyphDesigner fonts. Also plan to add support for others. <br><br></td></tr></table><br>
<a name="2020080"></a>

<a name="2020081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Noodle, your framework sounds really cool. Do you have a download link or a project site? Or do you have an ETA for release? <br><br></td></tr></table><br>
<a name="2020275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm curious as to how you would apply decorator actions to all of those different actions.<br><br>I was thinking of having callback functions available for things like movement that had various trig functions embedded in them to modify object motion... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
