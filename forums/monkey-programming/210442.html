<!DOCTYPE html><html lang="en" ><head ><title >Safe Spawn Problem.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Safe Spawn Problem.</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Safe Spawn Problem.</a><br><br>
<a name="2117684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sup peeps...<br><br>So in a nutshell, I spawn powerups at a given x,y when something that drops a powerup dies, normally an alien cargo ship.<br><br>My issue is that if I happen to kill a ship that drops a powerup and an existing powerup happens to be under the ship then we get this overlap, player thinks he's picking one up and he's actually getting two..<br><br>at first I thought it would be a simple solution , just move the new powerup x pixels away from the existing one, which is fine for just two powerups but it's possible for them to spawn in clusters if the player happens to kill a number of things at the same spot at the same time, as each new power up spawns, and moves to avoid something it can end up moving into another..<br><br>Does anyone have any thoughts on this ? <br><br></td></tr></table><br>
<a name="2117685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a code example of dots which repulse from each other. If you look at this as if they were drops then they would end up not touching each other.<br><br>Maybe usefull for this situation.<br><br><a href="http://monkeygameprogramming.blogspot.nl/2015/02/monkey-x-organic-behaviour-with-bots.html" target="_blank">http://monkeygameprogramming.blogspot.nl/2015/02/monkey-x-organic-behaviour-with-bots.html</a><br><br>I got it from a game ai book. <br><br></td></tr></table><br>
<a name="2117686"></a>

<a name="2117687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simple answer: give him both.  Seriously, why not? <br><br></td></tr></table><br>
<a name="2117688"></a>

<a name="2117689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pakz that idea was one of the options I tried but in tests I had situations where it would pick a push north only to have that push land the powerup inside another powerup, if the wrong situation arose it could push quite far to one of the set directions leaving the new powerup no where near where it was supposed to have spawned it just looked odd.<br><br>Another solution I tried quickly was to have it pick a random direction -180,180 and then push out in that direction, this was a little better but still falls down when there are loads of powerups in a small tight area.<br><br>This fortunately is not a game breaking thing it's just me being a bit picky. <br><br></td></tr></table><br>
<a name="2117704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure that Pakz is suggesting choosing a spawn point. I think he's suggesting implementing something that will move your pickups away from each other if they are overlapping. I've knocked up a simple example of what I think he means here: <a href="http://stickydesigns.com/pickups/MonkeyGame.html" target="_blank">http://stickydesigns.com/pickups/MonkeyGame.html</a> (click to drop a "pickup") <br><br></td></tr></table><br>
<a name="2117711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Muddy two things, first of all that highlights the issue I was having if you don't move the mouse while clicking it fails to push the balls out or it will push them all out to the north or south or whatever which is what I do not want, I get that if I just move the mouse(spawn point a few pixels) while clicking it works as intended but there would still be a chance for those annoying situations to happen where one powerup covered another or where the pushed spawn point is way off from where it should be. <br><br></td></tr></table><br>
<a name="2117712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Like I said tho I'm just being overly picky it's not an essential thing.. <br><br></td></tr></table><br>
<a name="2117713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure which part of "a simple example of what I think he means" was unclear. Clicking in the same spot is just a special case for the push calculation. It's easily fixed. As for the rest I've no idea what your specific usage is so I don't know what problems you're really talking about. There's no instance (once the special case above is fixed) where they would remain overlapped and they only have to move as far as needed to not overlap. Either overlapping is a problem you want to fix or you don't want to move them off the "real spawn point". You're going to have to pick one.<br><br>Again, I just thought I'd give you a simple example in action, I wasn't claiming to have written the exact solution for whatever you want to actually do. I'm not a mind-reader. Sorry if I wasted both our time. <br><br></td></tr></table><br>
<a name="2117726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> none of what you said was unclear I guess it was me being unclear, anyway thanks for posting that little example just spamming it a few times helped me realize the issue I had with my code probably is'nt something I really should be wasting time on as it's a bit of a non issue.<br><br>Posting my method bellow in case anyone else has an issue like this, all I am doing is looping through my objects comparing 1 to another and if their touching or overlapping I pass both objects to push to have them moved a little away from each other, results are more than good enough for my project, hope it helps some one else .<br><br><pre class=code>
	Method Push:Void(_a:cPowerUp, _b:cPowerUp)
		Local dist:Float = emDistance(_a.pos.x, _a.pos.y, _b.pos.x, _b.pos.y)
		Local ang:Float = ATan2(_a.pos.x - _b.pos.x, _a.pos.y - _b.pos.y)
		Local dx:Float = Sin(ang)
		Local dy:Float = Cos(ang)
		_b.pos.x -= dx
		_b.pos.y -= dy
		_a.pos.x += dx
		_a.pos.y += dy
		_a.updateAngle
		_b.updateAngle
	End Method
</pre> <br><br></td></tr></table><br>
<a name="2117725"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
