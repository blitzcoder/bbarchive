<!DOCTYPE html><html lang="en" ><head ><title >Noob question re: Inheritance and Constructors</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Noob question re: Inheritance and Constructors</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Noob question re: Inheritance and Constructors</a><br><br>
<a name="2043661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kauffy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something I'm confused about and I'm not sure I can explain it well.<br><br>When you create a new class that extends another class, and call a constructor for the subclass, is the superclass's constructor called automatically, or only when explicitly called with Super.New (for example)?<br><br>More to my point, I am using Mike Hartlef's fantomEngine for a small project.<br><br>I have created a class that extends ftObject (I wanted my objects to be available in his engine's callbacks).<br><br>When I call my constructor, I can initialize my portion of the object (i.e., my new, extended fields), but the ftObject is intended to be initialized with a Method call on the engine itself-- for example: engine.CreateImage:ftObject(imagename, etc., etc.)<br><br>Here's where the extra confusion is: is it possible to call a method that creates an instance of a superclass of the constructor we're in-- and have it be this object (or the inherited part of this object)? This is one of those make-my-brain-hurt situations.<br><br><br>If anyone has any idea what I'm talking about, is there an alternate approach recommended? <br><br></td></tr></table><br>
<a name="2043662"></a>

<a name="2043663"></a>

<a name="2043664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>the default constructor is called automatically, if you do not call any superclass's constructors.<br><br>Since fantomEngine's ftObejct class does not implement any constructors, you need to init ftObejct manually in classes derived from ftObejct.<br><br>do not know if it is even being considered to derive from ftObject, because the interface seems not really designed to derive from ftObject. <br><br></td></tr></table><br>
<a name="2043665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rone is right here. I will think about how it could be done. For the moment you can use the new data object for more individuality here. <br><br></td></tr></table><br>
<a name="2043823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kauffy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I have done is gone back to including an ftObject within my object, instead of deriving. Then I am packing the superclass info I need into the ftObject in its CollGroup and in the .tag field.<br><br>So, I have Tank objects that can either be player (1-4) or enemy (infinity!).<br>I have a player object, then contains player-specifics (score, key layout, etc.) AND it contains a tank object.<br><br>For enemy, it contains enemy specifics (AI objective, a few other things) AND it contains a tank object.<br><br>When I call my New Tank, I pass in two args: isPlayer:bool, and num:Int.<br><br>If isPlayer is true, then we build the tank for the player, and the num argument contains the player # (determines start position and which image to use for the tank.)<br><br>If isPlayer is false, the we build the tank for the enemy, and the num argument contains the level of enemy it is (determines speed, hitpoints, weapon type, etc.)<br><br>Double-purposing the CollGroup to tell me what type of thing it is, AND using ftObject.tag to tell me either player number or enemy level has allowed me to take appropriate action in the callbacks.<br><br>So, when I get a callback from a given Tank's ftObject, I know what type of thing it is (Player, Enemy, Playershot, etc.) and then which player, or what level of enemy, etc. it is.<br><br>This makes writing the OnObjectUpdate part of ftEngine's BaseScript pretty snappy!<br><br><br>The problem I was having was how to instantiate a derived ftObject, but I worked around it by going away from "is a type of" to "owns an instance of" (I still struggle to wrap my head around some of these things). <br><br></td></tr></table><br>
<a name="2043835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> you can also use the new data object for storing extra info inside an object.<br><br>so you are storing an object inside the colgroup property? How? <br><br></td></tr></table><br>
<a name="2043894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kauffy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will look at the data object to see how that could work.<br><br>I did not store an object in ColGroup, just using the ColGroup to represent both the collision group and, by reading the collision group, knowing what kind of object it is. In this case, it works perfectly for my needs-- though I could see situations in the future where that wouldn't be the case.<br><br>I then just used ftObject.tag to store an int, as it looks like ftObject.tag isn't used anywhere else. <br><br></td></tr></table><br>
<a name="2043901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kauffy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I looked at using ftDataObject--<br><br>I wound up declaring like this...<br><br><pre class=code>
Class Player
  field tank:Tank
.
.
.

Class Tank
  field gob:ftObject
.
.
.

Method Player.New()
  Self.tank = New Tank()

  Self.tank.gob.SetDataObj = Self 'Seems weird, but I guess it's just pointing back up the tree to itself.

</pre><br><br>I will see how this works. <br><br></td></tr></table><br>
<a name="2043902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kauffy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh.. even though it lets me set the DataObj to any type, when I try to do the reverse, I get a "Cannot convert from object to Enemy." error. <br><br></td></tr></table><br>
<a name="2043903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kauffy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Annd.. I just had to cast it. First time for everything.<br><br>Did I mention it was my first day? Honest. <br><br></td></tr></table><br>
<a name="2043927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting way how you do it. Did you look at the example script I have provided with the engine? <br><br></td></tr></table><br>
<a name="2044020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kauffy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes. I'm using the Base Script.<br><br>What I'm doing is that I have a variety of Tanks (some player, some enemy).<br><br>In order to know what to do with them when OnObjectUpdate gets called, I need to know which one it is.<br><br>Since OnObjectUpdate gets called on ftObjects, I needed a way, from within the ftObject, to be able to reference either the Player or Enemy that "owns" this Tank. <br><br></td></tr></table><br>
<a name="2044028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I ment did you have a look at the UserDataObject.monkey script I provided with fE? <br><br></td></tr></table><br>
<a name="2044029"></a>

<a name="2044030"></a>

<a name="2044031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kauffy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, oh! I didn't realize those were in there. Let me go and take a look.<br><br>EDIT: Oh, yes, I did actually read through this. In my case, I am pointing to the ftObject's owner's (Class Tank) owner (Class Player), so I can not create the data object at the time I am creating the ftObject.<br><br>There may be a way to achieve what I'm doing with reflection, but I think that will add too much bulk and I don't want to take the detour to understand it if it isn't necessary. I just need a way to ask the ftObject "Who is your daddy, and what does he do?" <br><br></td></tr></table><br>
<a name="2044032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem. Just wanted to make sure that you know about this easy way of adding extra fields and methods to your objects. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
