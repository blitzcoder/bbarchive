<!DOCTYPE html><html lang="en" ><head ><title >Private Methods Error</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Private Methods Error</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Private Methods Error</a><br><br>
<a name="2030048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't make methods private.<br><br>Anyone else experiencing this? <br><br></td></tr></table><br>
<a name="2030051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> no. can you provide source code so we can see what are you actually tring to do? <br><br></td></tr></table><br>
<a name="2030058"></a>

<a name="2030059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are Right<br><br><pre class=code>

Function Main:Int()
	Local test:MyClass = new MyClass
	test.Test1()
	test.Test2()
	test.Test3()
	test.Test4()
End

Class MyClass
Private
	Method Test1:Void()
		Print "test1"
	End
Public
	Method Test2:Void()
		Print "test2"
	End
Private
	Method Test3:Void()
		Print "test3"
	End
	Method Test4:Void()
		Print "test4"
	End
End
</pre><br>Do you get an error? btw Zigge, I see all 4 in Jungle too. but sometimes private/public works in jungle. <br><br></td></tr></table><br>
<a name="2030061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aaaaah I see...<br>In Monkey Private and Public is based on a module scope, not in a class scope, so your code is correct. You will always be able to access any private member from within the same module (the same file) where they're created. Monkey encapsulation is designed in a per-file basis. <br><br></td></tr></table><br>
<a name="2030076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrHanson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still doesn't seem to work even if you put them in separate files.  Is Private and Public only for Fields? In my opinion, this behavior should be changed.  I think if you have a Private Method or Field in a class that is in the same file it should still be invisible to other classes. <br><br></td></tr></table><br>
<a name="2030077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah right.. duh I think I knew that :)<br><br>But it should always coamplain when called from "another" file right? <br><br></td></tr></table><br>
<a name="2030078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes it works as expected for fields <br><br></td></tr></table><br>
<a name="2030080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @MrHanson: As far as I know, it works for any class member. Post an example otherwise, so we can take a look and see if a bug report has to be generated <br><br></td></tr></table><br>
<a name="2030089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrHanson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just took his example and put them in separate files (sorry for the formatting).<br><br><br>'--------TestClasses.monkey--------<br><br>Class MyClass<br>Private<br>        Method Test1:Void()<br>            Print "test1"<br>        End<br>Public<br>        Method Test2:Void()<br>            Print "test2"<br>        End<br>Private<br>        Method Test3:Void()<br>            Print "test3"<br>        End<br>        Method Test4:Void()<br>           Print "test4"<br>        End<br>End<br><br>'-----Test.monkey----<br><br>Import TestClasses<br><br>Function Main:Int()<br>        Local test:TestClasses.MyClass = New TestClasses.MyClass()<br>        test.Test1()<br>        test.Test2()<br>        test.Test3()<br>        test.Test4()<br>End<br><br>Only tried it on the GLFW target and the html5 target.<br>Works the same on both. It prints:<br><br>test1 <br>test2<br>test3<br>test4 <br><br></td></tr></table><br>
<a name="2030113"></a>

<a name="2030114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @MrHansen - A Tip is to use [ Code ]  and [/Code] to paste code. btw Great that you tested it. I get the same, but unsure if it is *always* so. <br><br>Ziggy can you show an example where it works as expected? I know it has worked as expected once upon a time or maybe it was just a dream :) <br><br></td></tr></table><br>
<a name="2030118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tibit don't forget there's also the [ monkeycode ] tags now too. :)<br><br>[monkeycode]Function Main()<br>  Print "Monkey is awesome!"<br>End[/monkeycode] <br><br></td></tr></table><br>
<a name="2030179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> What? That is just AWESOME! Did not know. Thanks for the tips Samah! :) <br><br></td></tr></table><br>
<a name="2030243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jpoag</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to weigh in before anything is 'fixed.' I like the module level access better than class level access. The reason being that if you create class level access descriptors, then you need to have 'friend' classes.<br><br>Private methods are broken, they should certainly be fixed.<br><br>In parser.monkey in the method "ParseClassDecl" around line 1477, when the parser encounters "private", it sets the private flag for the decl_attrs, but not the func_attrs.<br><br>[monkeycode]<br>			Case "private"<br>				NextToke<br>				decl_attrs=decl_attrs | DECL_PRIVATE<br>				func_attrs=func_attrs | DECL_PRIVATE<br>			Case "public"<br>				NextToke<br>				decl_attrs=decl_attrs &amp; ~DECL_PRIVATE<br>				func_attrs=func_attrs &amp; ~DECL_PRIVATE[/monkeycode]<br><br>Fixes it, but I've already encountered a few libraries that this causes issues with, namely the json library from Damian Sinclair.  That needs a 'Public' method added after the New() in tokeniser.monkey @ line 55. <br><br></td></tr></table><br>
<a name="2030244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jpoag</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW, when I was testing this, it didn't create a 'function private' error message.<br><br>To get that message, comment out line 524 of decl.monkey<br>[monkeycode]'	If Not func.CheckAccess() Continue[/monkeycode] <br><br></td></tr></table><br>
<a name="2030246"></a>

<a name="2030247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, that is a very simple fix.<br><br>Should be fixed, and any library that my mistake have used a private method will have to be fixed - but that fix should be trivial. <br><br></td></tr></table><br>
<a name="2030250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> What Tibit said. <br><br></td></tr></table><br>
<a name="2030254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I've already encountered a few libraries that this causes issues with, namely the json library from Damian Sinclair. <br></div><br><br>I've no doubt that it would cause issues with stuff I've written. My relationship with Monkey's access modifier mechanisms and syntax is strained, possibly even estranged. <br><br></td></tr></table><br>
<a name="2030266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jpoag</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I love the stuff you've written.  If I didn't, I wouldn't use it.  <br><br>I thought the JSON lib was a good example because it's a great module that could take the criticism.  If I were to name a smaller module or lib that wasn't as great, I'd be worried about hurting someone's pride.<br><br>no worries <br><br></td></tr></table><br>
<a name="2030269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't worry. I didn't mean to sound offended or defensive, just agreeing that there would be problems. <br><br>I should probably put a warning on my code that I don't much concern myself with Private/Public usage for the most part. I tried initially but found that Monkey's mechanisms are so blunt that it's mostly not worth bothering with considering the generally limited numbers of users and small-scale of projects. <br><br></td></tr></table><br>
<a name="2030289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> My philosophy is not to fret too much about private members, but to be very careful with write access (as distinct from read). <br><br></td></tr></table><br>
<a name="2030292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AaronK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> +1 for a fix too.<br><br>I find private members extremely important, especially when writing reusable code. The public part of the class is your contract with the client. If people can go and just start using all the private parts of your classes, trouble will ensue when you change how you implement that public interface. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
