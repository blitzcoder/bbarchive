<!DOCTYPE html><html lang="en" ><head ><title >Difference Between New() and OnCreate()</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Difference Between New() and OnCreate()</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Difference Between New() and OnCreate()</a><br><br>
<a name="2040790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a difference? Obviously, there is... I can't do something like<br><br>[monkeycode]<br>  x = New y("1")<br>[/monkeycode]<br><br>unless I have a New(s:String) method defined, even if I have an OnCreate(s:String) method defined.<br><br>If I never use parameters for creating new y objects, then I don't need New(), and OnCreate() triggers as well. I think. <br><br></td></tr></table><br>
<a name="2040792"></a>

<a name="2040794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Within your OnCreate method you would have to call "New" and return the object:<br><br>[monkeycode]x = y.OnCreate("1")<br>...<br><br>Class y<br>   Field str:String<br><br>   Function OnCreate:y(s:String)<br>      local o:y = New y<br>      o.str = s<br>      Return o<br>   End<br>End[/monkeycode]<br><br>With using the constructor ("new") you can replace most of that code:<br><br>[monkeycode]x = New y("1")<br>...<br><br>Class y<br>   Field str:String<br><br>   Method New(s:String)<br>      self.str = s<br>   End<br>End[/monkeycode] <br><br></td></tr></table><br>
<a name="2040793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> OnCreate is just a method on the App class. It's not called when a class is instantiated. <br><br></td></tr></table><br>
<a name="2040800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting. Thanks, guys.<br><br>Are there any general rules as to when to use New/OnCreate and when not to? <br><br></td></tr></table><br>
<a name="2040802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tiresius</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use OnCreate() callback for your application, use New() for instantiating your objects.  Unless you want to wrap New() with OnCreate() for some reason ?  I don't get it. <br><br></td></tr></table><br>
<a name="2040805"></a>

<a name="2040806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I first read CK's post I thought he was talking about the "old" BlitzMax way to get around the lack of parameterised constructors... but now I am now so sure.<br><br>The "old" BlitzMax way was just to have a function (which I normally called "Create") to instante the object:<br><br>[bbcode]Type Sprite<br>   Field x:Int<br>   Field y:Int <br><br>   Function Create:Sprite(x:Int, y:Int)<br>      Local s:Sprite = New Sprite<br>      s.x = x<br>      s.y = y<br>      Return s<br>   End Function<br>End Type[/bbcode] <br><br></td></tr></table><br>
<a name="2040803"></a>

<a name="2040804"></a>

<a name="2040826"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> There aren't any hard and fast rules about whether to initialise everything in New() or use an initialisation function (which might be called OnCreate() or Init() or whatever you want).<br><br>If you have multiple constructors many of which do similar things, an initialisation function for the common behaviours is useful. <br><br>As for why one doesn't overload New() for App-derived classes, I suspect the main reason Mark did it this way is to avoid people making mistakes by failing to call the super class constructor at the start of their own constructor.  If there is some time-dependent initialisation needed on some targets this could also be allowed for. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
