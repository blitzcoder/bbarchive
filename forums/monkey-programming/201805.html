<!DOCTYPE html><html lang="en" ><head ><title >Illegal Expression Subtracting ArrayList Values</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Illegal Expression Subtracting ArrayList Values</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Illegal Expression Subtracting ArrayList Values</a><br><br>
<a name="2017057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's the difference between<br><br>  DrawText times.Get(times.Size()-1), 0, SCREEN_HEIGHT - 80<br><br>which works, and<br><br>  DrawText times.Get(times.Size()-1) - times.Get(0), 0, SCREEN_HEIGHT - 80<br><br>which gives me the error "Error : Illegal expression type."<br><br>times is an ArrayList of Millisec() values. <br><br></td></tr></table><br>
<a name="2017062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does the get() method return an int, or something else?  In the latter case you'd need to cast the result to an integer before doing the subtraction. <br><br></td></tr></table><br>
<a name="2017064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Without seeing more of the code we would be only guessing... please post what times is (eg the class) and it's methods. <br><br></td></tr></table><br>
<a name="2017082"></a>

<a name="2017083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> therevills, is it not enough to say that times is an ArrayList() of Millisec() values? So you should know the class and methods. ;-)<br><br>Otherwise, I'll get you more info later today. <br><br></td></tr></table><br>
<a name="2017098"></a>

<a name="2017099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> try it by putting brackets around the computation like this:<br><pre class=code>
DrawText (times.Get(times.Size()-1) - times.Get(0)), 0, SCREEN_HEIGHT - 80
</pre> <br><br></td></tr></table><br>
<a name="2017101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jesse, thank you for the suggestion. I think I already tried that, but will try it for sure later when I get back to the project. <br><br></td></tr></table><br>
<a name="2017105"></a>

<a name="2017106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> therevills, is it not enough to say that times is an ArrayList() of Millisec() values? <br></div><br><br>No, it isn't. The real problem is that we don't know what the program is doing. We have only your statement of what you think it is doing. Thus we are reduced to guessing.<br><br>But I'll take a limited guess. Your statement about MilliSecs() suggests that times.Get() is an integer. The fact that you can't subtract these values suggests they are something else.<br><br>Edit: After a quick review of this thread I see this is just my verbose version of what Gfk said. <br><br></td></tr></table><br>
<a name="2017109"></a>

<a name="2017110"></a>

<a name="2017111"></a>

<a name="2017112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I doubt it's the problem either. it was just a guess. I had similar problems with Blitzmax that is why I was guessing that. <br><br>And yes, you are going to have to put more of the code before we can make a conclusion. like how are you passing variables, what are the method parameters and how are you manipulating the array. <br><br></td></tr></table><br>
<a name="2017115"></a>

<a name="2017116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Size is and always has been a property. I believe Mark fixed the *bug* where you could call properties like a method. I'm on the bus so I can't test it :-) <br><br></td></tr></table><br>
<a name="2017121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; What's the difference between<br>&gt; DrawText times.Get(times.Size()-1), 0, SCREEN_HEIGHT - 80<br>&gt; which works, and<br>&gt; DrawText times.Get(times.Size()-1) - times.Get(0), 0, SCREEN_HEIGHT - 80<br><br>Not 100% sure 'coz I don't know how ArrayList works, but I suspect it's a side effects of using box objects.<br><br>Basically, the core problem is that while box objects can be automatically be converted to ints, float, strings, they don't actually have a numeric type themselves as they are just objects!<br><br>So the first DrawText works because Monkey can just convert the box object to a string. Since DrawText takes a string, and the box object has a ToString$() method, the compiler knows what to do, no problemo.<br><br>But in the second, Monkey needs to know the type of both the LHS and RHS of the subtraction in order to work out the resultant type. ie: if LHS and RHS are both ints, result is an int, if one is a float, result is a float. But the LHS is just an object - it doesn't have a numeric type at all, so the compiler is stuck and you get an error. Going Int(...Get(...)) around the LHS and RHS should fix it.<br><br>The new generics should make box objects more or less obsolete in time, as you can now have 'real' containers of ints, floats and strings. So '.Get()' will return an actual int, not a box object, solving this sort of thing. <br><br></td></tr></table><br>
<a name="2017122"></a>

<a name="2017123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Size is and always has been a property<br> <br></div><br><br>you mean Length?<br><br>[edit]<br>too late anyway. <br><br></td></tr></table><br>
<a name="2017125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> you mean Length? <br></div><br>In ArrayList it's Size, not Length.<br><br><div class="quote"> Since DrawText takes a string, and the box object has a ToString$() method, the compiler knows what to do, no problemo. <br></div><br>Change DrawText to accept Object?  Then it could look for ToString$() on whatever object is passed.  If it supports it, whoopee.  If not, print empty string.  Of course in Java, toString() is part of the base Object class and prints the heap reference by default.  And of course it could autobox primitives. <br><br></td></tr></table><br>
<a name="2017124"></a>

<a name="2017129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> gotcha! Thanks. <br><br></td></tr></table><br>
<a name="2017141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's how times is defined:<br><br><pre class=code>
Global times:ArrayList&lt;IntObject&gt; = New ArrayList&lt;IntObject&gt;
</pre><br><br>then updated<br><br><pre class=code>
times.AddLast( Millisecs() )
</pre><br><br>and it gets used in that DrawText() code above.<br><br>When I wrap the LHS and RHS in Int(), it works fine. I can even do this:<br><br>DrawText lastTime - Int(times.Get(0)), 0, SCREEN_HEIGHT - 80<br><br>and it works OK. lastTime is set when times.AddLast() occurs this way:<br><br><pre class=code>
lastTime = times.Get(times.Size()-1)
</pre><br><br>To check my understanding, times.Get() was returning an object, not an integer, and so the subtraction couldn't work?<br><br>THANK YOU GUYS for all the input. I don't know what a "box object" is, however. :) <br><br></td></tr></table><br>
<a name="2017142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> For now, use IntArrayList and GetInt.<br>These will (hopefully) go away soon, and you can just use ArrayList&lt;Int&gt; with no problems. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
