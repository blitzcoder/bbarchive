<!DOCTYPE html><html lang="en" ><head ><title >V39 Up! [MONKEY NEWS]</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >V39 Up! [MONKEY NEWS]</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >V39 Up! [MONKEY NEWS]</a><br><br>
<a name="2006507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Version 39 is now available.<br><br>IMPORTANT : Mac users may have to manually run the program bin/mserver_macos manually just once before running Monk. Otherwise, you'll get a perma-bouncing icon in the taskbar when you try and run html5/flash apps. Will attempt to fix this soon.<br><br>The major new features is interfaces, but for now I'm more worried about having broken anyone's code, so please test your projects with this release thoroughly.<br><br><div class="quote"> <br>Modules:<br><br>Mojo SetColor now affects images.<br><br>Added Compare method to String type.<br><br>Fixed DrawImageRect with 0 sized src rect in Flash.<br><br>Android mojo now works with API level 3.<br><br>Fixed Android music.<br><br><br>Trans (1.10)<br><br>Fixed various parser issues.<br><br>Added mserver, minimal monkey server. Very minimal.<br><br>Android target now works with API level 3.<br><br>Added 'm4a' (ie: aac) as recognized audio format.<br><br>Added interfaces.<br><br>Majorly cleaned up generics.<br><br>Added Alias directive.<br><br>Added #Error directive.<br> <br></div> <br><br></td></tr></table><br>
<a name="2006519"></a>

<a name="2006521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool - Thanks Mark!<br><br>Quick Q - How do I set the default browser now, as HTML_PLAYER and FLASH_PLAYER points to the mserver? <br><br></td></tr></table><br>
<a name="2006522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>You can't yet - it uses the OS default.<br><br>It's early days for mserver... <br><br></td></tr></table><br>
<a name="2006523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok - no problems.<br><br>Another Q - What targets supports the m4a audio format? <br><br></td></tr></table><br>
<a name="2006525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; Another Q - What targets supports the m4a audio format? <br><br>Take a look at bananas/mak/audiotest <br><br></td></tr></table><br>
<a name="2006526"></a>

<a name="2006528"></a>

<a name="2006529"></a>

<a name="2006530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Take a look at bananas/mak/audiotest  <br></div><br><br>LOL - maybe add all those comments to the PlaySound doco ;) (I see you have already added some more comments to the docs)<br><br>What does the Alias directive do? <br><br></td></tr></table><br>
<a name="2006527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xzess</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks mark!<br>cool, mserver, i will immediately give it a try <br><br></td></tr></table><br>
<a name="2006533"></a>

<a name="2006534"></a>

<a name="2006536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nothing is running for me (HTML5 target). IE9 gets 'stuck' on 'localhost' and displays nothing. <br><br>MServer's output is:<br>MServer active and listening on port 50607<br>1&gt; HTTP Server active and listening on port 50107<br><br>I've fiddled with Window's Firewall settings, allowing "mserver_winnt" access, still no success.<br><br>Windows 7 Home Premium 64bit. <br><br>EDIT: If I wait long enough, IE displays the "Internet Explorer cannot display the webpage" error page, with "http://localhost:50131/MonkeyGame.html" in the URL bar.<br><br><br>Any ideas?<br><br><br><br>EDIT2: Must be an IE9 problem. I set my default browser to Chrome and programs run as they should on that. <br><br></td></tr></table><br>
<a name="2006535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had a similar issue as impixi. I had to build and run some of the samples and my app 2-3 times before it would work. After that, smooth sailing. <br><br></td></tr></table><br>
<a name="2006540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Just in the process of fixing mserver for IE9...in the meantime, use Chrome! <br><br></td></tr></table><br>
<a name="2006541"></a>

<a name="2006542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> What does the Alias directive do?<br><br><div class="quote"> <br>The Alias directive<br><br>The Alias directive allows you to assign a local name to a constant, global, function or class declared in another module. This can be used to create 'shortcuts' for clashing identifiers.<br><br><br>The syntax for Alias is:<br><br><br>Alias Identifier = ModulePath . Identifier<br><br><br>Alias directives must appear in the 'import' section of a module, before any code.<br><br><br>For example:<br><br><br>'----- file1.monkey -----<br><br><br>Import file2<br><br>Import file3<br><br><br>Alias T=file2.T                'which 'T' to use<br><br><br>Function Main()<br><br>Print T                   'Prints '1'<br><br>End<br><br><br>'----- file2.monkey -----<br><br><br>Global T:=1<br><br><br>'----- file3.monkey -----<br><br><br>Global T:=2<br><br><br> <br></div> <br><br></td></tr></table><br>
<a name="2006551"></a>

<a name="2006552"></a>

<a name="2006553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> So far I have GLFW, HTML5 (Chrome) running. XNA runs some demos but not others. No luck with Android (emulator) so far.<br><br>I'm going to post compiler output once I get a better look at things.<br><br>See ya, <br><br></td></tr></table><br>
<a name="2006556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dopeyrulz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've also got a problem under XNA (HTML5 and MingW - haven't tried GLFW yet due to some compile speed problems).  <br><br>The process has created a class called bb_ for the Main call and added a global variable I've created.  Within a seperate class/method an Integer has been created called bb_ also.  The issue stems from trying to access the global variable within this same method which is causing the problem.  easy... (not)!<br><br>I'll try and reproduce a small example as my project is reasonably big now. <br><br></td></tr></table><br>
<a name="2006558"></a>

<a name="2006559"></a>

<a name="2006560"></a>

<a name="2006561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dopeyrulz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok - have been able to create an example of the problem:<br><br><pre class=code>
Import mojo

Const SETTING_A:Int = 0
Const SETTING_B:Int = 1

Global myTimer:=New Timer("myTimer")

Class TestApp Extends App
Private
	Field _setting:Int = SETTING_A
Public

	Method OnCreate()
		SetUpdateRate 60

	End Method
	
	Method OnUpdate()
		'Part one of issue - XNA creates a variable to so we 
		'can compare the setting
		Select _setting
			Case SETTING_A
			
			Case SETTING_B
		
		End Select
		
		'Part two of issue - XNA tries to refer to the global timer 
		'but both part one and two use the same variable bb_
		If (myTimer.Value = 0) Then
		EndIf
		
	End Method
	
	Method OnRender()
		'Clear screen and color
		Cls(0,0,0)
		SetColor(255,255,255)
	
		'Output
		DrawText("Hello",0,0,0,0)
				
	End Method

End Class

Function Main()
	New TestApp()
	
End Function


Class Timer
Private
	Field _id:String
	Field _value:Int = 0
Public

	Method New(id:String)
		_id = id	
	End
	
	Method Value:Int() Property
		Return _value
	End
	
End
</pre><br><br>The above displays the following error:<br><pre class=code>
error CS1061: 'int' does not contain a definition for 'bb_myTimer' and no 
extension method 'bb_myTimer' accepting a first argument of type 'int' could be found (are you missing a using
directive or an assembly reference?
</pre><br><br>Source:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
class bb_{
	public static int bb_Main(){
		(new bb__TestApp()).bb_TestApp_new();
		return 0;
	}
	public static bb__Timer bb_myTimer;
}

class bb__TestApp : bb_app_App{
	public virtual bb__TestApp bb_TestApp_new(){
		base.bb_App_new();
		return this;
	}
	public override int bbm_OnCreate(){
		bb_app.bb_SetUpdateRate(60);
		return 0;
	}
	public int bb__setting=0;
	public override int bbm_OnUpdate(){

		*** PART A ISSUE HERE ***
		int bb_=bb__setting;
		if(bb_==0){
		}else{
			if(bb_==1){
			}
		}
		*** PART B ISSUE HERE ***
		if(bb_.bb_myTimer.bbm_Value()==0){
		}
		return 0;
	}
	public override int bbm_OnRender(){
		bb_graphics.bb_Cls(0.000000f,0.000000f,0.000000f);
		bb_graphics.bb_SetColor(255.000000f,255.000000f,255.000000f);
		bb_graphics.bb_DrawText("Hello",0.000000f,0.000000f,0.000000f,0.000000f);
		return 0;
	}
}

class bb__Timer : Object{
	public String bb__id="";
	public virtual bb__Timer bb_Timer_new(String bb_id){
		bb__id=bb_id;
		return this;
	}
	public virtual bb__Timer bb_Timer_new2(){
		return this;
	}
	public int bb__value=0;
	public virtual int bbm_Value(){
		return bb__value;
	}
}
</textarea> <br><br></td></tr></table><br>
<a name="2006563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Ok, found that one! Should have a 1.40 fix up tomorrow... <br><br></td></tr></table><br>
<a name="2006565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xzess</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br>is it possible to deactivate SetColor for Images manually? Maybe by setting a flag?<br>I compiled my game with 1.39 and it got really laggy.<br><br>Also i have problems playing my game in Safari on IPhone, is it possible to include indiepaths hacks into 1.40 ? <br><br></td></tr></table><br>
<a name="2006567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br> &gt;is it possible to deactivate SetColor for Images manually?<br><br>Using SetColor 255,255,255 'turns off' set color for images.<br><br>&gt; Also i have problems playing my game in Safari on IPhone, is it possible to include indiepaths hacks into 1.40 ? <br><br>You'll probably have to wait for a new version of the hacks. <br><br></td></tr></table><br>
<a name="2006576"></a>

<a name="2006577"></a>

<a name="2006578"></a>

<a name="2006579"></a>

<a name="2006580"></a>

<a name="2006581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried compiling Pirates on Android with v39:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
    [javac] C:\BlitzMonkey\code\PirateSolitaire\PirateSolitaire.build\android\src\com\monkey\MonkeyGame.java:4048: cannot find symbol
    [javac] symbol  : variable bb_gameScreen
    [javac] location: class com.monkey.bb_list_Enumerator
    [javac] 				bb_graphics.bb_DrawImageRect(bb_.bb_gameScreen.bb_fullBar.bb_image,(float)(bb_xx),(float)(bb_i)-bb_.bb_gameScreen.bb_emptyBar.bb_h2,0,0,(int)(bb_barAmount),bb_.bb_gameScreen.bb_fullBar.bb_h,0);
    [javac] C:\BlitzMonkey\code\PirateSolitaire\PirateSolitaire.build\android\src\com\monkey\MonkeyGame.java:4063: cannot find symbol
    [javac] symbol  : variable bb_font20
    [javac] location: class com.monkey.bb_list_Enumerator
    [javac] 					bb_.bb_font20.bbm_DrawText2("$"+String.valueOf(bb_cost),(int)(bb_b.bb_x+bb_b.bb_image.bb_w2),(int)(bb_b.bb_y+(float)(bb_b.bb_image.bb_h)),1);
    [javac] 					   ^
ERROR:
    [javac] Note: C:\BlitzMonkey\code\PirateSolitaire\PirateSolitaire.build\android\src\com\monkey\MonkeyGame.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] 29 errors
</textarea><br><br>Quick code sample:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import mojo

Global myGame:MyGame

Global Suits:String[] = ["clubs", "diamonds", "hearts", "spades"]

Function Main:Int()
	myGame = New MyGame
	Return 0
End Function

Class MyGame Extends App

	Method OnCreate:Int()
		SetUpdateRate 60
		New Deck()
		Return 0
	End
	
	Method OnLoading:Int()
		Return 0
	End
	
	Method OnUpdate:Int()
		Return 0
	End
	
	Method OnRender:Int()
		Cls
		DrawText Suits[0], 10, 10
		Return 0
	End	
End

Class Deck Extends Holder
	Method New()
		Local pos% = 0
		For Local Suit:String = EachIn Suits
			For Local n% = 1 to 13
				pos+=1
			Next
		Next
	End
End

Class Holder
	Field name:String
	Field y:Float, x:Float
	Field ox:Float, oy:Float
End
</textarea><br><br>Using this code, XNA failed with these errors:<br>XNA:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Build FAILED.

"C:\BlitzMonkey\MonkeyPro39\bananas\test\test.build\xna\MonkeyGame.sln" (default target) (1) -&gt;
"C:\BlitzMonkey\MonkeyPro39\bananas\test\test.build\xna\MonkeyGame\MonkeyGame\MonkeyGame.csproj" (default target) (2) -&gt;
(CoreCompile target) -&gt; 
  Program.cs(2242,20): error CS1061: 'System.Array' does not contain a definition for 'bb_Suits' and no extension method 'bb_Suits' accepting a first argument of type 'System.Array' could be found (are you missing a using directive or an assembly reference?) [C:\BlitzMonkey\MonkeyPro39\bananas\test\test.build\xna\MonkeyGame\MonkeyGame\MonkeyGame.csproj]


"C:\BlitzMonkey\MonkeyPro39\bananas\test\test.build\xna\MonkeyGame.sln" (default target) (1) -&gt;
"C:\BlitzMonkey\MonkeyPro39\bananas\test\test.build\xna\MonkeyGame\MonkeyGame\Xbox 360 Copy of MonkeyGame.csproj" (default target) (4) -&gt;
  Program.cs(2242,20): error CS1061: 'System.Array' does not contain a definition for 'bb_Suits' and no extension method 'bb_Suits' accepting a first argument of type 'System.Array' could be found (are you missing a using directive or an assembly reference?) [C:\BlitzMonkey\MonkeyPro39\bananas\test\test.build\xna\MonkeyGame\MonkeyGame\Xbox 360 Copy of MonkeyGame.csproj]

    0 Warning(s)
    2 Error(s)
</textarea><br><br>[edit]<br>Just tried dopeyrulz code on Android and its the same error I am getting with Pirates so hopefully your v40 fixes it.<br><br>Also just to note that Chrome on my Win7-64 machine is having trouble accessing the HTML5 and Flash builds...<br>[/edit] <br><br></td></tr></table><br>
<a name="2006584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yay for SetColor for images, this means I make the game I want to for Xbox in blitz now :D <br><br></td></tr></table><br>
<a name="2006598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Corum</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> yay to new SetColor()!<br>Now I can complete my crappy retrogame. :P <br><br></td></tr></table><br>
<a name="2006612"></a>

<a name="2006613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xzess</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> its very performance lasting i think, test it:<br><br>its the same code<br><br>compiled with v39<br><a href="http://www.xzess.org/Webgames/Exhale/v2/" target="_blank">http://www.xzess.org/Webgames/Exhale/v2/</a><br><br>compiled with v38:<br><a href="http://www.xzess.org/Webgames/Exhale/" target="_blank">http://www.xzess.org/Webgames/Exhale/</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
