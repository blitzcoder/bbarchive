<!DOCTYPE html><html lang="en" ><head ><title >Draw retro ("big" pixels) graphics</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Draw retro ("big" pixels) graphics</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Draw retro ("big" pixels) graphics</a><br><br>
<a name="2115981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonoDesire</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello!<br><br>I'm working on a game with retro graphics, i.e. "big" pixels. What is the best way of handle the graphics for this kind of style?<br><br>Let's say I want to draw all graphics like I had a 320x200 display, but in reality, the display is probably much larger.<br><br>I've read about this, to avoid blurry pictures when scaling up: <br>#MOJO_IMAGE_FILTERING_ENABLED=False<br><br>But by using the above technique would require a lot of scaling.<br><br>I would like a way to "trick" Monkey-X that I am using a 320x200 "canvas", and then Monkey-X is automatically scaling my "canvas" up to the real display (whatever it is). Is there a way to set this kind of "canvas" area?<br><br>All help is appreciated! :-) <br><br></td></tr></table><br>
<a name="2115982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Scaling is cheap/free on modern hardware.  You can use the #MOJO_IMAGE_FILTERING_ENABLED=False trick if you want, or if you're using Mojo2 you can choose to upscale a small surface. <br><br></td></tr></table><br>
<a name="2115984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try <a href="http://www.monkey-x.com/Community/posts.php?topic=1500" target="_blank">AutoFit</a>. <br><br></td></tr></table><br>
<a name="2115987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonoDesire</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you both for your replies! :-)<br><br>I will check out your suggestions. <br><br></td></tr></table><br>
<a name="2116008"></a>

<a name="2116009"></a>

<a name="2116010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would definitely check Mojo2.<br><br>There are a few more steps and the code gets a little longer than Mojo1 (you always have to create a canvas, then specify which canvas you're drawing to), but it's very fast on HTML5, and the filtering setting seems to work well in all browsers that support WebGL.<br><br>The basic idea is that you do all your rendering in a small texture (let's say, 320x240) with filtering off, then you draw that texture filling the main canvas. That way, when you draw the sprites you're using a "true" 320x240 resolution, and you're just scaling the whole thing once before displaying it. It also makes it more or less easy to control how you're gonna fill up the main canvas - you can stretch it, leave black bars around it to preserve aspect ratio, opt for an integer scale that ensures all pixels are scaled equally, etc.<br><br>One thing to keep in mind, though, is that if you're going for "pixel-perfect", it's usually a good idea to create the texture width and height using the nearest power of two values (128, 256, 512, etc) and simply not use the whole texture - take a look at SetProjection2d and SetViewport functions. I had some issues with images scaling properly when the texture is not power of two, particularly noticeable when the image has dithering patterns.<br><br>Unfortunately, docs are sparse about these things, and the online docs don't even seem to include mojo2 yet. You may have to do quite a lot of googling around the forums... <br><br></td></tr></table><br>
<a name="2116036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> In mojo2, when you set the image using this :<br><pre class=code>
Image.SetFlagsMask(Image.Managed); 
img_raider = Image.Load("Raider.png");
</pre><br><br>To sorta get that clean pixelated look. Was gonna use it for last year's <a href="http://www.monkey-x.com/Community/posts.php?topic=10038&amp;page=2" target="_blank">NES Game Jam</a> but eh...i'm slow :(. <br><br></td></tr></table><br>
<a name="2116056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonoDesire</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for this additional info! :-)<br><br>Appreciate it a lot. <br><br></td></tr></table><br>
<a name="2116581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonoDesire</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I went for the mojo2 track. It looks promising. But I am confused about the aspect ratio of the canvas (currently running the HTML5 target).<br><br>@Leo Santos:<br><br>You wrote this: <br><div class="quote">  "It also makes it more or less easy to control how you're gonna fill up the main canvas - you can stretch it, leave black bars around it to preserve aspect ratio, opt for an integer scale that ensures all pixels are scaled equally, etc."  <br></div><br><br>I'm not sure how to accomplish this - I want my canvas to have its ratio preserved (e.g. 640x480). I have found the "canvas" keyword in various places, and I am not sure how they relate to each other.<br><br>* I have a Canvas within my Monkey-X code, which I have drawn some images to, just to try out the concept. It works. I use SetProjection2d() to set a virtual area of e.g. 640x480. It works.<br><br>* Then, in the auto-generated MonkeyGame.html file, I also find the concept of "canvas". I see there CANVAS_WIDTH and CANVAS_HEIGHT. There is also an interesting variable called CANVAS_RESIZE_MODE.<br><br>* Also in the MonkeyGame.html file, there is this: &lt;canvas id="GameCanvas" width=640 height=480 tabindex=1&gt;&lt;/canvas&gt;   <br><br>Any hints are appreciated!<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2116588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonoDesire</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe my previous post isn't very clear, so I'll add a proper question here:<br><br>How to I preserve the aspect ratio of my the canvas (i.e. the Canvas object within Monkey-X) no matter size/proportions of the physical screen? I'd like my canvas to stay centered within the screen. What is the best of doing that?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2116593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have a few options, but the two best examples I can think of are:<br>* The official "letterbox" banana found at "<u><b>modules/mojo2/bananas/letterbox/letterbox.monkey</b></u>", which does this using the 'SetProjection2d' route.<br>* <a href="https://github.com/Regal-Internet-Brothers/autofit" target="_blank">My rewrite of AutoFit</a>, which works with both Mojo 1 and Mojo 2. (Mojo 2 behavior may or may not work well)<br><br>My particular solution isn't exactly the most optimal, but it may be a useful reference. I'd say you should follow the official example. Basically, it has a method called 'CalcLetterbox', which uses the aspect ratios of the two resolutions and scales the viewport accordingly (Passes the output-array to 'SetViewport'). It uses the difference to know how big of an area will be blank. It's nothing complicated, but it gets the job done pretty well. If you want a system that can layer scaling so you can have different effective resolutions, or anything more advanced, then you might need to use matrix transformations. <br><br></td></tr></table><br>
<a name="2116592"></a>

<a name="2116596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonoDesire</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for your reply ImmutableOctet(SKNG)! Appreciate it a lot! :-)<br><br>I will have a look at both your suggestions.<br><br><div class="quote"> If you want a system that can layer scaling so you can have different effective resolutions, or anything more advanced, then you might need to use matrix transformations. <br></div><br><br>What do you mean by "layer scaling"? Maybe nothing I need, but curious what it is. <br><br></td></tr></table><br>
<a name="2116597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't mean scaling layers, I mean having multiple viewports (Potentially inside of each other) following different resolutions. For example, a split-screen game where you have a menu at the native resolution (Or similar), and a split-screen game under it. That's not something everyone wants, but it's something I was interested in when I remade AutoFit. <br><br></td></tr></table><br>
<a name="2116598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonoDesire</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImmutableOctet(SKNG):<br><br>Okay, I get it now. Thanks for the clarification!  :-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
