<!DOCTYPE html><html lang="en" ><head ><title >Spriter importer and collision or getting objects</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Spriter importer and collision or getting objects</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Spriter importer and collision or getting objects</a><br><br>
<a name="2055353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am playing around with this again and I would like to add some kind of collision handling.<br><br>What is the best way to get a certain part of the sprite. For example the sword relative x and coordinates, width and height so can make some collision stuff?<br><br>Also the complete width and height of a sprite would be great :)<br><br>Or I should hack something together myself...<br><br>I have made this little demo with Spriter importer and Ignition:<br><br><a href="http://www.playniax.com/share/demos/spriter/MonkeyGame.html" target="_blank">http://www.playniax.com/share/demos/spriter/MonkeyGame.html</a> <br><br></td></tr></table><br>
<a name="2055355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The complete width/height of a sprite is a bit tricky but we should be able to calculate it somehow.<br><br>RE: Getting objects, I've been meaning to add something like what Slotman did over on bb.com:<br><a href="http://www.blitzbasic.com/Community/post.php?topic=99983&amp;post=1177496" target="_blank">http://www.blitzbasic.com/Community/post.php?topic=99983&amp;post=1177496</a><br><br>Collision data is meant to come in a future version of Spriter, but we should be able to get the each objects location, width and height and do at least a bounding box collision check. <br><br></td></tr></table><br>
<a name="2055386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I am going to take a look. If I know the width /height of all objects and the relative positions it's not so hard to calculate the complete width/height. I did this with my scrollbox :) <br><br></td></tr></table><br>
<a name="2055389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If I know the width /height of all objects and the relative positions it's not so hard to calculate the complete width/height. <br></div><br>But what about rotation and scale of the objects, since these can be changed during the animation... it depends on if you want a rough size or a size at a set point in the animation. <br><br></td></tr></table><br>
<a name="2055395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah yes, rotation can make it tricky ;)<br><br>For me would be more interesting to get the individual objects width/height/scale/rotation and relative pos to have some kind of collision handling then. <br><br></td></tr></table><br>
<a name="2055393"></a>

<a name="2063118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any progress on this? <br><br></td></tr></table><br>
<a name="2063151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am. Yesterday I just developed a way to change "objects", or even attaching one to another... shame I can't post everything, since it's tied to custom libs I'm developing under contract :(<br><br>But I think it's ok to post this, should help people out:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Method getObject:SpriterObject(folderObj:Int, fileObj:Int)
		For Local anim:SpriterAnimation = Eachin entities.Get(0).animations.Values()
			If anim &lt;&gt; Null Then 	
		      ' go through all timelines
				For Local t:Int = 0 Until anim.timelines.Count()
					Local timeline:SpriterTimeline = anim.timelines.Get(t)
				
				   ' go through all keys in each timeline
					For Local tm:Int=0 Until timeline.keys.Count()
					Local timelineKey:SpriterKey = timeline.keys.Get(tm)
						
						' go through all objects in each key
						For Local o:SpriterObject = Eachin timelineKey.objects
						    ' if this is the object we're looking for, hide it!
							 If (o.folder = folderObj And o.file = fileObj) Then return o
						Next
					Next
			   Next	   
			End If
		Next
Return Null
End Method
</textarea><br><br>You could have another function that solves filenames into folder/file ints and then you can manipulate spriter objects all you want :)<br><br>Reading this thread was a nice reminder that I need to make some bounding box/bounding sphere generator for spriter animations :) <br><br></td></tr></table><br>
<a name="2063150"></a>

<a name="2063157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Slotman, would you like access to the repo, so if you want you can commit changes/fixes? <br><br></td></tr></table><br>
<a name="2063529"></a>

<a name="2063532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, but:<br><br>- I have no idea how to use git<br>- I'm under contract, so most of my code can't be shared :(<br>- I'm still using a really old version of the importer, one that doesn't even have bones!<br><br>And one thing I couldn't "fix" so far: when I attach an image into another, it's moving around just "a little bit" (seems to be less than a pixel?) during the animation. It's nothing too distracting (specially at 1x zoom), but does shows that it's an object on top of another :/ <br><br></td></tr></table><br>
<a name="2063533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> - I have no idea how to use git <br></div><br>I dont like Git, I use Hg :)<br><div class="quote"> - I'm under contract, so most of my code can't be shared :( <br></div><br>Fair enough.. offers there to you and anyone else :)<br><div class="quote"> - I'm still using a really old version of the importer, one that doesn't even have bones! <br></div><br>Any reason why? <br><br></td></tr></table><br>
<a name="2063546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Any reason why? <br> <br></div><br><br>Nothing particular... I just started working on that, and now I have way too much stuff built on top of it ^_^ <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
