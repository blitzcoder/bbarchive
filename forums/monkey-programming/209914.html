<!DOCTYPE html><html lang="en" ><head ><title >Read/WritePixels bottleneck</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Read/WritePixels bottleneck</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Read/WritePixels bottleneck</a><br><br>
<a name="2107220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raudius</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello<br><br>I have this feature where I'm building an image using different image components.<br><br>My current method consists on drawing the image to the buffer and then taking a "ReadPixels" from the rendered area. Then with "WritePixels" I can create the final Image object.<br><br>However It's a fairly big bottleneck in my code, I assume that loading images, drawing them on the drawbuffer and then reading the area just takes too much processing to do seamlessly.<br><br>My hope was to use the threading module from diddy to fix this, but of course I cannot use Draw functions outside of OnRender.<br><br>Any suggestions around this issue? <br><br></td></tr></table><br>
<a name="2107230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your issue is that you're transferring data back and forth from the CPU and GPU. That's your bottleneck right there. Multiple threads won't help the driver be any faster at performing a task like this. Threading is also a bit of an issue on some targets, but that's a different topic.<br><br>Honestly, if you were using Mojo 2, then you could use "render-to-texture" properly. That seems to be what you want to do, but the original Mojo module's graphical functionality really can't handle it. There are ways of getting that working, but the nicest option isn't all that great. Without Mojo 2, you'll need to use custom OpenGL code. SKN3 made his <a href="http://www.monkey-x.com/Community/posts.php?topic=5285" target="_blank">'imagebuffer'</a> module a long while ago (GLFW only), but you'll need to hack that to get it working again. There's also <i><a href="http://www.monkey-x.com/Community/posts.php?topic=7702" target="_blank">'nDrawExts'</a></i>, but it doesn't do much for dynamic image generation.<br><br>If you want to learn how to get SKN3's old module working, you can follow the posts in <a href="http://www.monkey-x.com/Community/posts.php?topic=7702#99059" target="_blank">this thread</a>, and in <a href="http://www.monkey-x.com/Community/posts.php?topic=5285&amp;post=100855" target="_blank">this thread</a>.<br><br>Honestly, your best bet is to switch to Mojo 2. <b>Mojo 2 is available to anyone who owns Monkey X, and can be found with the latest release.</b> <br><br></td></tr></table><br>
<a name="2107229"></a>

<a name="2107272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raudius</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I downloaded MonkeyXPro84d, and I've been looking through the mojo2 overview.<br><br>Im assuming that the solution you suggest is to create a Canvas with the image as the target and then I can Draw things to the Canvas. Then when DrawImage(target) is invoked all the things previously rendered to the canvas will now render as the image.<br><br>It sounds like the perfect solution. Also perfect timing that mojo2 has just recently come out.<br><br>Thanks a lot, will try this out this afternoon. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
