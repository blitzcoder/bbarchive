<!DOCTYPE html><html lang="en" ><head ><title >Extending Monkey hugely with a custom target?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Extending Monkey hugely with a custom target?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Extending Monkey hugely with a custom target?</a><br><br>
<a name="2001914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi guys,<br>Really enjoying Monkey so far.  You've made it so extendable that I've gotten around every little problem I've had so far.  <br><br>The only issue I'm having is handling on-the-fly resolution changes for PC/Mac games... a feature I'd really like to include for my customers.  I respect that Monkey can't do this because of the Flash/HTML5/Hard OS Resolutions of some of the targets.<br><br>Is there any way to extend Monkey with a new target?  I see the code templates... for PC and Mac, I'd like to be able to add my own target-- have Mojo redirect to my own DirectX functions (for Win) and that kind of thing, even for initializing the graphics system, while defaulting to Monkey standard for Flash, etc.<br><br>Is there any way this would be possible by adding stuff to the targets folder or whatnot, is or half of this baked into the compiler itself? <br><br></td></tr></table><br>
<a name="2001917"></a>

<a name="2001918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wrote a tutorial how to add a GLFWMINGW target, but the same idea works for other targets too:<br><a href="http://www.monkeytools.net/articles/Adding_a_GLFWMINGW_target" target="_blank">http://www.monkeytools.net/articles/Adding_a_GLFWMINGW_target</a><br>And today I'll start to write an automated Target Installer, which could be also expanded to work with custom targets, so new targets could be added with some config files for the installer. <br><br></td></tr></table><br>
<a name="2001920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, thank you very much!  (And quick response, too!) <br><br></td></tr></table><br>
<a name="2001931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lumooja, when I try to rebuild trans.monkey, I get this:<br><br>TRANS monkey compiler V1.01<br>Parsing...<br>Semanting...<br>Translating...<br>Building...<br>TRANS monkey compiler V1.01<br>Failed to open config file<br>TRANS Failed to execute '"C:/Users/Raptisoft/Desktop/MonkeyPro29/bin/trans.build/stdcpp/main_winnt"', return code=-1<br><br>Any idea what's going on there?  Do I have to rename the config.winnt.txt file or something? <br><br></td></tr></table><br>
<a name="2001933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> First you should get the latest build which is V31. ;) <br><br></td></tr></table><br>
<a name="2001934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> (By clicking on your account link at the top and click product updates) <br><br></td></tr></table><br>
<a name="2001935"></a>

<a name="2001938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just did that... get the same error.  There must be a step I'm not doing... what is this config file?  I can't even rebuild monkey.trans out of the box without changes.  <br><br>Is there some extra MINGW component I need to add?  I just went and got MINGW and installed everything. <br><br></td></tr></table><br>
<a name="2001936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... I never tried that stdcpp target as it's for standard console stuff at the moment only. I always use GLFW for Windows/Mac... <br><br></td></tr></table><br>
<a name="2001939"></a>

<a name="2001944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried it with GLFW, got 103 compile errors from Visual Studio... so let me roll back to the previous version and see if the same happens...<br><br>(Edit) Yeah, same thing... 103 errors, looks like they all stem from int bb_trans_Html5Target::bbMakeTarget() having some screwed up formatting with the return type and end target.<br><br>Are you able to simply rebuild it, without having to do anything special? <br><br></td></tr></table><br>
<a name="2001946"></a>

<a name="2001951"></a>

<a name="2001952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to compile trans.monkey with STDCPP target. <br><br></td></tr></table><br>
<a name="2001950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I do that, I get the error I listed above, with the config file missing... any idea what config file that is, or what I do to get around it? <br><br></td></tr></table><br>
<a name="2001954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use F7 to build it only, don't try to run it. <br><br></td></tr></table><br>
<a name="2001961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I could have sworn I tried that (since that's what it says to do on the web page) but evidently I didn't... thanks, that's got it working. <br><br></td></tr></table><br>
<a name="2001973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hate to keep bothering on this topic, but this is somewhat important for me to get working...<br><br>When I do all the steps, and replace the trans_winnt.exe in the bin folder, now on Monkey startup I get this error:<br><br>The program can't start because libgcc_s_dw2-1.dll is missing from your computer.  Try reinstalling the program to fix this problem.<br><br>I have snagged that DLL from MINGW, and I've put it in system32, and I've put it in the Monkey folder... but still I get this error.  When I try to regsvr32 it, Windows tells me that it might not be compatible.  Is anyone working on Win7 or Vista, and got this to work?  Can you tell me how to get rid of this error? <br><br></td></tr></table><br>
<a name="2001974"></a>

<a name="2001975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have mingw normally installed, and c:\mingw\bin is in the system path. It's the same mingw which is needed for BlitzMax. <br><br></td></tr></table><br>
<a name="2001977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks!  Looks like I'm up and running.  Haven't had to play around with system files and things like this in years. <br><br></td></tr></table><br>
<a name="2001982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't need to play around with system files. You just install mingw the normal way, it will automatically add c:\mingw\bin to the PATH variable. <br><br></td></tr></table><br>
<a name="2001999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> It didn't... not sure if it's a Win7 security issue or what.  I had to add it to path manually. <br><br></td></tr></table><br>
<a name="2002003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's part of the normal installation of mingw :) <br><br></td></tr></table><br>
<a name="2002052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I had to add it to path manually. <br></div><br>I always add it myself...  and recently the MinGW installer tends to miss out whole chunks of stuff... which is a bit of a pain.<br><br><div class="quote">  Is there any way to extend Monkey with a new target? <br></div><br>I am writing a "qt" target for Mac/Linux/Win32 (so far). Kind of interesting, and rather complex in places...<br><br>For example, I've been working on getting a Class constructor to auto-generate the super constructor for matching parameters.<br><pre class=code>
Class CodeEditor Extends QPlainTextEdit


	Method New(parent:QWidget)
	End Method

End
</pre><br><br>Since QPlainTextEdit already has a matching constructor, ideally, the generated C++ should call it as part of its invocation on the child. (Like in Java, when you do super.method(xxx) in the constructor)<br>And this is what I've been able to generate :<br><pre class=code>
bbCodeEditor::bbCodeEditor(QWidget* bbparent)
: MaxQPlainTextEdit( bbparent)
{
</pre><br>which is kinda groovy :-)<br><br>So, yes, it's extendible if you don't mind getting your hands (really) dirty! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
