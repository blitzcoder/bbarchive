<!DOCTYPE html><html lang="en" ><head ><title >A suggestion on error handling (Mojo)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >A suggestion on error handling (Mojo)</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >A suggestion on error handling (Mojo)</a><br><br>
<a name="2043351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amnesia</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm aware that (at least on Android and HTML5) Monkey currently throws a nice little dialog box at any error that happens. I'm not sure if the same happens on iOS (but if it doesn't, it's still possible to "catch" exceptions on iDevices with NSSetUncaughtExceptionHandler) or the other targets.<br><br>Whatever the case is (whether monkey shows a message or not) I think it would be nice if we -as developers- could be able to execute some of our own code once something happens and the app crashes.<br><br>By instance, if we keep some record of game context information globally (like the state of the game, assets loaded so far, etc) we could display that on the debug console when our game unexpectedly dies which will be helpful to catch hard-to-replicate bugs that happens once in a lifetime.<br><br>Or perhaps we would like to keep some sort of error log, or give the user the chance to send an automated report of the crash.<br><br>My suggestion is as simple as adding an "OnDie (error: String)" method to App (in mojo) that will be called when the game crashes and we can override (through inheritance) if needed. I already did a little test hacking mojo and it works like a charm. It would be nice if mojo offered this out of the box.<br>Of course, it adds a bit of a danger, since the code in the "handler" could also generate an error, but that's a risk common to most (all?) error handlers.<br><br>So, what do you guys think? <br><br></td></tr></table><br>
<a name="2043384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about Exceptions? <a href="http://blitz-wiki.appspot.com/Language_reference#exceptions" target="_blank">http://blitz-wiki.appspot.com/Language_reference#exceptions</a><br>PS: Sorry, didn't read carefully. <br><br></td></tr></table><br>
<a name="2043352"></a>

<a name="2043358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amnesia</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exceptions catch stuff you throw purposefully. As far as I know they don't catch platform errors. Those are handled by Monkey. <br><br></td></tr></table><br>
<a name="2043363"></a>

<a name="2043364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Discussed previously. Apparently you would only ever want to catch a fatal error, perhaps display a custom message, log some info or possibly even attempt a recovery if you're writing nuclear reactor controllers: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=3098#31778" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=3098#31778</a> <br><br></td></tr></table><br>
<a name="2043365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amnesia</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> So we basically need to discontinue our use of Monkey for our line of nuclear reactor controllers? that's bad news :/<br><br>Anyway, I'm afraid there are a few problems not only specific to the context of nuclear devices (like memory leaks or textures suddenly disappearing from VRAM) which are hard to replicate unless you happen to have infinite time and money (as to buy every device on the market). We thought the perfect solution relied on user reports. Perhaps I'll ask the user every time he opens the game "Did the game crash? If so, please tell us how."<br><br>. . .<br><br>Ok, seriously talking; I'm fine with Monkey handling those, but I also want the chance to call my own code to do additional stuff in case of fatal errors. <br><br></td></tr></table><br>
<a name="2043379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> this, and haveing the chance to inspect the call stack on runtime (even if it's only on a debug build) is very useful to me on other languages, so I would love to have the oportunity to do this on Monkey too, This time, I agree with muddy_shoes. <br><br></td></tr></table><br>
<a name="2043383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've altered my install so that the StackTrace command is available to my Monkey code. I don't know if Diddy or the Monkey extension stuff does the same. <br><br></td></tr></table><br>
<a name="2043398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mr_twister</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I second the idea.<br><br>Although I understand the way Mark thinks about the whole thing, let's look at the bright side: in the other thread Mark said something about adding a sort of OnError() (maybe) so he is at least willing to go that route (if enough people feel like the feature should be there, I guess).<br><br>So count me in if votes are needed. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
