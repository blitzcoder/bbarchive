<!DOCTYPE html><html lang="en" ><head ><title >OpenGL ES2.0 module coming!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >OpenGL ES2.0 module coming!</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >OpenGL ES2.0 module coming!</a><br><br>
<a name="2020910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>The GLES20 module is now mostly going - demo here:<br><br><a href="http://www.blitzbasic.com/tmp/gles20cube/MonkeyGame.html" target="_blank">http://www.blitzbasic.com/tmp/gles20cube/MonkeyGame.html</a><br><br>Hold mouse at top of page to zoom in, bottom of page to zoom out.<br><br>The module works with glfw, html5, android and ios.<br><br>A few notes:<br><br>* GLES20 requires Gingerbread (2.3 I think) on Android, which means it wont work on a lot of phones out there, eg: my Samsung Galaxy S - boohoo! On IOS, it requires 3GS, and on Windows you'll need GL2.1 or better. This IMO means that a GLES11 engine is still a viable project. As it'll work on a far greater range of devices - except for html5 of course.<br><br>* GLES20 is a lot more work to get going than GLES11. There is no fixed function stuff, so you must write shaders, create frustum matrices etc yourself. There are no lights, no materials, everything's shader code.<br><br>* There are a few things you can't do in html5. There is no LoadImageData, so you need to use a form of glTexImage2D that specifies an image path instead of a databuffer. I've emulated this on other targets though. Also, you must use VBOs on html5 - you can't bind DataBuffers to VertexAttribPointers or use them as indices for DrawElements. This isn't really a big deal though, as VBOs are the way to go.<br><br>* I can't get WebGL going on Mac OS at all, not even 3rd party apps, though I haven't tried very hard. iOS is no problem.<br><br>Source code here - a bit rough, I just added stuff as it was needed:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Import mojo
Import opengl.gles20

Global MVPMatrix#[]

Function CheckGL()
	Local err=glGetError()
	If err Error "GL Error "+err
End
	
Function IdentityMat#[]()
	Local t#[16]
	t[0]=1;t[5]=1;t[10]=1;t[15]=1
	Return t
End

Function MulMats#[]( x#[],y#[] )
	Local t#[16]
	For Local i=0 Until 4
		For Local j=0 Until 4
			t[j*4+i]=x[j]*y[i] + x[j+4]*y[i+4] + x[j+8]*y[i+8] + x[j+12]*y[i+12]
		Next
	Next
	Return t	
End

Function TransposeMat#[]( m#[] )
	Local t#[16];
	For Local i=0 Until 4
		For Local j=0 Until 4
			t[i*4+j]=m[j*4+i]
		Next
	Next
	Return t
End

Function FrustumMat#[]( near_left#,near_right#,near_bottom#,near_top#,near#,far# )
	Local near2:=near*2
	Local w:=near_right-near_left
	Local h:=near_top-near_bottom
	Local d:=far-near
	Local t#[16]
	t[0]=near2/w
	t[5]=near2/h
	t[8]=(near_right+near_left)/w
	t[9]=(near_top+near_bottom)/h
	t[10]=(far+near)/d
	t[11]=1
	t[14]=-(far*near2)/d
	t[15]=0
	Return t
End

Function TransMat#[]( tx#,ty#,tz#,tw#=1 )
	Local t:=IdentityMat()
	t[12]=tx;t[13]=ty;t[14]=tz;t[15]=tw
	Return t
End

Function YawMat#[]( yaw# )
	Local t:=IdentityMat()
	Local s:=Sin(yaw),c:=Cos(yaw)
	t[0]=c;t[2]=s
	t[8]=-s;t[10]=c;
	Return t
End

Class Vertex
	Field x#,y#,z#
	Field nx#,ny#,nz#
	Field s#,t#
	
	Method New( x#,y#,z#,nx#=0,ny#=0,nz#=0,s#=0,t#=0 )
		Self.x=x;Self.y=y;Self.z=z
		Self.nx=nx;Self.ny=ny;Self.nz=nz
		Self.s=s;Self.t=t
	End
	
	Method Equals?( v:Vertex )
		Return x=v.x And y=v.y And z=v.z And nx=v.nx And ny=v.ny And nz=v.nz And s=v.s And t=v.t
	End
	
	Method Compare( with:Vertex )
		'memcmp!
		If x&lt;with.x Return -1
		If x&gt;with.x Return 1
		If y&lt;with.y Return -1
		If y&gt;with.y Return 1
		If z&lt;with.z Return -1
		If z&gt;with.z Return 1
		If nx&lt;with.nx Return -1
		If nx&gt;with.nx Return 1
		If ny&lt;with.ny Return -1
		If ny&gt;with.ny Return 1
		If nz&lt;with.nz Return -1
		If nz&gt;with.nz Return 1
		If s&lt;with.s Return -1
		If s&gt;with.s Return 1
		If t&lt;with.t Return -1
		If t&gt;with.t Return 1
		Return 0
	End
End

Class VertexMap&lt;T&gt; Extends Map&lt;Vertex,T&gt;

	Method Compare( lhs:Vertex,rhs:Vertex )
		Return lhs.Compare( rhs )
	End

End

Class VertexStack Extends Stack&lt;Vertex&gt;

	Method Equals?( lhs:Vertex,rhs:Vertex )
		Return lhs.Equals( rhs )
	End

	Method Compare( lhs:Vertex,rhs:Vertex )
		Return lhs.Compare( rhs )
	End

End

Class Shader

	Method New( vsource$,fsource$ )
		Local p[1]
		
		Local vshader:=glCreateShader( GL_VERTEX_SHADER )
		glShaderSource vshader,vsource
		glCompileShader vshader
		glGetShaderiv vshader,GL_COMPILE_STATUS,p
		If Not p[0] Print "Failed to compile vshader:"+glGetShaderInfoLog( vshader )

		Local fshader:=glCreateShader( GL_FRAGMENT_SHADER )
		glShaderSource fshader,fsource
		glCompileShader fshader
		glGetShaderiv fshader,GL_COMPILE_STATUS,p
		If Not p[0] Print "Failed to compile fshader:"+glGetShaderInfoLog( fshader )
		
		program=glCreateProgram()
		glAttachShader program,vshader
		glAttachShader program,fshader
		glLinkProgram program
		glGetProgramiv program,GL_LINK_STATUS,p
		If Not p[0] Print "Failed to link program:"+glGetProgramInfoLog( program )
	End
	
	Method Bind()
		glUseProgram program
		CheckGL
	End
	
	Private
	
	Field program
	
End

Class Material

	Method New( shader:Shader )
		Self.shader=shader
		color_loc=glGetUniformLocation( shader.program,"Color" )
		texture_loc=glGetUniformLocation( shader.program,"Texture" )
	End
	
	Method SetColor( r#,g#,b#,a# )
		Self.r=r;Self.g=g;Self.b=b;Self.a=a
	End
	
	Method SetTexture( tex )
		Self.tex=tex
	End
	
	Method Bind()
		glActiveTexture GL_TEXTURE0
		glBindTexture GL_TEXTURE_2D,tex
		shader.Bind
		glUniform4f color_loc,r,g,b,a
		glUniform1i texture_loc,0
		CheckGL
	End
	
	Private
	
	Field shader:Shader
	Field r#,g#,b#,a#,tex
	Field color_loc,texture_loc
	
End

Class Mesh

	Method New( material:Material )
		Self.material=material
		pos_loc=glGetAttribLocation( material.shader.program,"Position" )
		norm_loc=glGetAttribLocation( material.shader.program,"Normal" )
		texc_loc=glGetAttribLocation( material.shader.program,"TexCoords" )
		mvp_loc=glGetUniformLocation( material.shader.program,"MVPMatrix" )
	End

	Method AddVertex( v:Vertex )
		Local i
		If vmap.Contains( v )
			i=vmap.Get( v )
		Else
			i=vs.Length
			vmap.Set v,i
			vs.Push v
		Endif
		is.Push i
	End

	Method AddVertex( x#,y#,z#,nx#,ny#,nz#,s#,t# )
		AddVertex New Vertex( x,y,z,nx,ny,nz,s,t )
	End
	
	Method Bind()
	
		material.Bind
	
		If vbo
			glBindBuffer GL_ARRAY_BUFFER,vbo
			glBindBuffer GL_ELEMENT_ARRAY_BUFFER,ibo
		Else
			vcount=vs.Length
			icount=is.Length
			
			Local vdata:=DataBuffer.Create( vcount*32 )
			For Local i:=0 Until vcount
				Local p=i*32
				Local v:=vs.Get( i )
				vdata.PokeFloat p,v.x
				vdata.PokeFloat p+4,v.y
				vdata.PokeFloat p+8,v.z
				vdata.PokeFloat p+12,v.nx
				vdata.PokeFloat p+16,v.ny
				vdata.PokeFloat p+20,v.nz
				vdata.PokeFloat p+24,v.s
				vdata.PokeFloat p+28,v.t
			Next
			
			Local idata:=DataBuffer.Create( icount*2 )
			For Local i:=0 Until icount
				idata.PokeShort i*2,is.Get(i)
			Next
			
			vbo=glCreateBuffer()
			glBindBuffer GL_ARRAY_BUFFER,vbo
			glBufferData GL_ARRAY_BUFFER,vdata.Size(),vdata,GL_STATIC_DRAW
			
			ibo=glCreateBuffer()
			glBindBuffer GL_ELEMENT_ARRAY_BUFFER,ibo
			glBufferData GL_ELEMENT_ARRAY_BUFFER,idata.Size(),idata,GL_STATIC_DRAW
		
		Endif
		
		glEnableVertexAttribArray pos_loc
		glVertexAttribPointer pos_loc,3,GL_FLOAT,False,32,0

		If norm_loc&lt;&gt;-1
			glEnableVertexAttribArray norm_loc
			glVertexAttribPointer norm_loc,3,GL_FLOAT,False,32,12
		Endif

		If texc_loc&lt;&gt;-1
			glEnableVertexAttribArray texc_loc
			glVertexAttribPointer texc_loc,2,GL_FLOAT,False,32,24
		Endif
		
		CheckGL
	End
	
	Method Render()
		'transpose MUST be false - took me an hour or two to find that out!		
		glUniformMatrix4fv mvp_loc,1,False,MVPMatrix
		
		glDrawElements GL_TRIANGLES,icount,GL_UNSIGNED_SHORT,0
		
		CheckGL
	End
	
	Private
	
	Field material:Material

	Field vbo,ibo,vcount,icount
	Field pos_loc,norm_loc,texc_loc
	Field mvp_loc
	
	Field vs:=New VertexStack
	Field is:=New IntStack
	Field vmap:=New VertexMap&lt;Int&gt;

End

Class ObjLoader

	Method LoadMesh:Mesh( path$,material:Material )
	
		Local mesh:=New Mesh( material )
	
		Local v:=New FloatStack
		Local vt:=New FloatStack
		Local vn:=New FloatStack
		
'		Print "Load obj file:"+path
		
		For Local line:=Eachin LoadString( path ).Split( "~n" )
		
			line=line.Trim()
			If Not line Or line.StartsWith( "#" ) Continue
			
'			Print line
			
			Local bits:=line.Split( " " )
			Select bits[0]
			Case "v"
				If bits.Length=4
					v.Push Float( bits[1] )
					v.Push Float( bits[2] )
					v.Push Float( bits[3] )
				Else
					Error "obj error"
				Endif
			Case "vn"
				If bits.Length=4
					vn.Push Float( bits[1] )
					vn.Push Float( bits[2] )
					vn.Push Float( bits[3] )
				Else
					Error "obj error"
				Endif
			Case "vt"
				If bits.Length=3
					vt.Push Float( bits[1] )
					vt.Push Float( bits[2] )
				Else
					Error "obj error"
				Endif
			Case "f"
				If bits.Length=4
					For Local i=1 To 3
						Local bits2:=bits[i].Split( "/" )
						If bits2.Length=3
							Local vi:=(Int(bits2[0])-1)*3
							Local vti:=(Int(bits2[1])-1)*2
							Local vni:=(Int(bits2[2])-1)*3
							mesh.AddVertex v.Get(vi),v.Get(vi+1),v.Get(vi+2),vn.Get(vni),vn.Get(vni+1),vn.Get(vni+2),vt.Get(vti),vt.Get(vti+1)
						Else
							Error "obj error"
						Endif
					Next
				Else
					Error "obj error"
				Endif
			Case "mtllib"
			Case "usemtl"
			Case "s"
			Default
				Error "obj error"
			End
		Next
		
		Return mesh
	End

End

Class MyApp Extends App

	Field rot#
	
	Field obj_z:=30.0
	
	Field mesh:Mesh

	Method OnCreate()
	
		Local tex:=glCreateTexture()
		
		glBindTexture GL_TEXTURE_2D,tex
		glTexParameteri GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR
		glTexParameteri GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR_MIPMAP_LINEAR
		glTexParameteri GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_CLAMP_TO_EDGE
		glTexParameteri GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_CLAMP_TO_EDGE
		glTexImage2D GL_TEXTURE_2D,0,GL_RGBA,GL_RGBA,GL_UNSIGNED_BYTE,"mandril.jpg"
		glGenerateMipmap GL_TEXTURE_2D
		CheckGL
			
		Local vsource:=LoadString( "vshader.txt" )
		Local fsource:=LoadString( "fshader.txt" )
		Local shader:=New Shader( vsource,fsource )

		Local material:=New Material( shader )
		material.SetColor 1,1,0,1
		material.SetTexture tex
	
		Local loader:=New ObjLoader
		
		mesh=loader.LoadMesh( "cube.txt",material )
		
		SetUpdateRate 60
		
	End
	
	Method OnUpdate()
	
		If MouseDown()
			If MouseY()&lt;DeviceHeight()/2
				obj_z-=.1
			Else
				obj_z+=.1
			Endif
		Endif
	
		rot+=1
		
	End
	
	Method OnRender()
	
		glViewport 0,0,DeviceWidth,DeviceHeight
		
		glClearColor 1,0,.5,1
		glClear GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT
		
		glEnable GL_DEPTH_TEST
		glDepthFunc GL_LESS
		
		mesh.Bind

		For Local x#=-25 To 25 Step 5
		
			For Local y=-25 To 25 Step 5
			
				Local f:=FrustumMat( -1,1,-1,1,1,100 )
				
				Local t:=TransMat( x,y,obj_z )
				Local r:=YawMat( rot )
				
				MVPMatrix=TransposeMat( MulMats( f,MulMats( t,r ) ) )
		
				mesh.Render
			Next
		Next
		
	End
	
	Method OnSuspend()
		Error ""	'budget way to handle loss of context!
	End
	
End

Function Main()

	New MyApp
	
End
</textarea><br><br>Vertex shader:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
attribute vec4 Position;
//attribute vec3 Normal;
attribute vec2 TexCoords;

uniform mat4 MVPMatrix;

varying vec2 texCoords;

void main(){
	gl_Position=MVPMatrix * Position;
	texCoords=TexCoords;
}
</textarea><br><br>Fragment shader:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

#ifdef GL_ES
precision mediump float;
#endif

uniform vec4 Color;
uniform sampler2D Texture;

varying vec2 texCoords;

void main(){
	gl_FragColor=Color * texture2D( Texture,texCoords );
}
</textarea> <br><br></td></tr></table><br>
<a name="2020912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The demo above throws a monkey error on ipad2 in safari. Anyone else? <br><br></td></tr></table><br>
<a name="2020914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oooh... nice! Gonna have to hack my phone now, though I spent about two hours getting nowhere this evening.<br><br>Works nicely in Chrome here though.<br><br>[ Note to bruZard in advance: PLEASE keep supporting GLES11 as well! :P ] <br><br></td></tr></table><br>
<a name="2020915"></a>

<a name="2020916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; The demo above throws a monkey error on ipad2 in safari. Anyone else? <br><br>I don't think WebGL is available on iOS yet: <br><br><a href="http://en.wikipedia.org/wiki/WebGL" target="_blank">http://en.wikipedia.org/wiki/WebGL</a><br><br>Can you run anything here?<br><br><a href="http://www.chromeexperiments.com/webgl" target="_blank">http://www.chromeexperiments.com/webgl</a><br><br>&gt; [ Note to bruZard in advance: PLEASE keep supporting GLES11 as well! :P ] <br><br>Definitely agree! I was quite disappointed my Galaxy S didn't cut it - it's not THAT old, and plenty of people I know have crappier Android devices. <br><br></td></tr></table><br>
<a name="2020924"></a>

<a name="2020925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;I can't get WebGL going on Mac OS at all, not even 3rd party apps, though I haven't tried very hard. <br><br>I am able to run WebGL on my MacBook under Safari<br>with the latest  WebKit nightly builds:<br><a href="http://nightly.webkit.org/" target="_blank">http://nightly.webkit.org/</a><br><br>I can run them. Problem is I can't compile them. Is that what you mean? <br><br></td></tr></table><br>
<a name="2020932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good news!<br><br>No panic DruggedBunny, i'll keep es1.1 supported ;) <br><br></td></tr></table><br>
<a name="2020944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you beat the boss mandril? thx <br><br></td></tr></table><br>
<a name="2020946"></a>

<a name="2020947"></a>

<a name="2020948"></a>

<a name="2020949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work Mark. Tempted to finally start tinkering with this shader stuff.<br><br>Demo doesn't work on my MacBook though - I get these errors:<br><br><div class="quote"> Monkey runtime error: GL Error 1280<br>C:/Dropbox/monkeydev/bananas/mak/gles20cube/gles20cube.monkey&lt;9&gt;<br>C:/Dropbox/monkeydev/bananas/mak/gles20cube/gles20cube.monkey&lt;153&gt;<br>C:/Dropbox/monkeydev/bananas/mak/gles20cube/gles20cube.monkey&lt;181&gt;<br>C:/Dropbox/monkeydev/bananas/mak/gles20cube/gles20cube.monkey&lt;223&gt;<br>C:/Dropbox/monkeydev/bananas/mak/gles20cube/gles20cube.monkey&lt;434&gt;<br>C:/Dropbox/monkeydev/modules/mojo/app.monkey&lt;72&gt; <br></div><br><br>The MacBook is fairly old (crappy Intel GMA X3100 card), but it can run other WebGL stuff. <br><br></td></tr></table><br>
<a name="2020969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark said:<br><div class="quote"> I don't think WebGL is available on iOS yet: <br></div><br>That's what I thought until I read the last bit of this from your first post:<br><div class="quote"> * I can't get WebGL going on Mac OS at all, not even 3rd party apps, though I haven't tried very hard. iOS is no problem. <br></div><br><br>Demo works fine on my Mac in Firefox. <br><br></td></tr></table><br>
<a name="2020970"></a>

<a name="2020972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JIM</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've only found WebGL to work on Android through a Firefox beta if I remember correctly. No iOS. <br><br></td></tr></table><br>
<a name="2020976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> GLES2.0 works fine with Android 2.2 (API Level 8), why you need Gingerbread? <br><br></td></tr></table><br>
<a name="2020989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >charlie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oooh! Exciting!<br><br>Looking forward to trying this out soon. <br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="2020990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >charlie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> the demo works fine on chrome on my mac. not tried to compile it though.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="2020991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taumel</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Finally! Same as charlie. <br><br></td></tr></table><br>
<a name="2020994"></a>

<a name="2020995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; GLES2.0 works fine with Android 2.2 (API Level 8), why you need Gingerbread?<br><br>Weirdly, the API 8 version of GL2.0 is missing 2 fairly crucial functions - glDrawElements and glVertexAttribPointer with int offsets for use with VBOs.<br><br>This either severely limits or entirely cripples the use of VBOs (not sure which, haven't played with them) and IMO means the API 8 GL2.0 is not really  GL2.0.<br><br>You are welcome to try and use GL2.0 on API 8, but I don't intend to support it as, like I say, it's not really GL2.0. <br><br></td></tr></table><br>
<a name="2020993"></a>

<a name="2020996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool! Can we do 2D with lights and shadows? <br><br>Like this: <a href="http://www.gamedev.net/page/resources/_/technical/graphics-programming-and-theory/dynamic-2d-soft-shadows-r2032" target="_blank">http://www.gamedev.net/page/resources/_/technical/graphics-programming-and-theory/dynamic-2d-soft-shadows-r2032</a><br><br>Btw Mark what devices do you have? <br><br></td></tr></table><br>
<a name="2020997"></a>

<a name="2020998"></a>

<a name="2020999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you haven't watched this video it's not a bad overview to ES2.0 on Android.<br><br>Google I/O 2011: 3D Graphics on Android: Lessons learned from Google Body<br><br><a href="http://www.youtube.com/watch?v=YLVbLVtjDDw" target="_blank">http://www.youtube.com/watch?v=YLVbLVtjDDw</a> <br><br></td></tr></table><br>
<a name="2021020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; <a href="http://www.blitzbasic.com/tmp/gles20cube/MonkeyGame.html" target="_blank">http://www.blitzbasic.com/tmp/gles20cube/MonkeyGame.html</a><br><br>Google Chrome (latest)<br><br>Monkey runtime error: TypeError: Cannot call method 'createTexture' of null<br>C:/Dropbox/monkeydev/bananas/mak/gles20cube/gles20cube.monkey&lt;383&gt;<br>C:/Dropbox/monkeydev/modules/mojo/app.monkey&lt;55&gt; <br><br></td></tr></table><br>
<a name="2021023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Cool! Can we do 2D with lights and shadows? <br><br>Like this: <a href="http://www.gamedev.net/page/resources/_/technical/graphics-programming-and-theory/dynamic-2d-soft-shadows-r2032" target="_blank">http://www.gamedev.net/page/resources/_/technical/graphics-programming-and-theory/dynamic-2d-soft-shadows-r2032</a> <br></div><br>That can be done in OpenGL ES 1.1. I know as my work colleague has just implemented that very routine. <br><br></td></tr></table><br>
<a name="2021034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Weirdly, the API 8 version of GL2.0 is missing 2 fairly crucial functions - glDrawElements and glVertexAttribPointer with int offsets for use with VBOs.<br> <br></div><br>Yeah, I get a glVertexAttribPointer error on my Android 2.2 phone. <br><br></td></tr></table><br>
<a name="2021035"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> my fail. ES2.0 is supported since Android2.0, but Java support ES2.0 fully since 2.3 <br><br></td></tr></table><br>
<a name="2021057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JIM</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> @mark. In the video that skid posted, there's a fix for those missing functions in 2.2. The guy says it's a pretty easy fix, but I'm not sure if monkey can do it transparently. The fix is at minute 27-30.<br><br>Slightly OT: If more people would be ok with rooting + custom ROMs, almost everyone would have 2.3.7 right now :) <br><br></td></tr></table><br>
<a name="2021056"></a>

<a name="2021070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @JIM: Nice find! Mark, please can you implement this? It looks pretty easy, going by the video, but this guy has already written the code and explained the process. I couldn't quite figure out how to include it into the Monkey project, but I'm sure you can!<br><br><a href="http://blog.micha.monoid.net/2010/08/workaround-using-vertex-buffer-objects.html" target="_blank">http://blog.micha.monoid.net/2010/08/workaround-using-vertex-buffer-objects.html</a><br><br>The attachment on that page didn't work for me, but the one below Comment 2 here does:<br><br><a href="http://code.google.com/p/android/issues/detail?id=8931" target="_blank">http://code.google.com/p/android/issues/detail?id=8931</a> <br><br></td></tr></table><br>
<a name="2021072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I got it to build successfully (built gles20cube with Monkey, exited, built the lib and added the src/fix stuff, added the includes to src/com/monkey, finally got no errors and confirmed the .apk includes the libfix-GLES20.o file), but I still get the error for glVertexAttribPointer (I removed my previous MonkeyGame install first).<br><br>I may well have got something wrong, but please give it a whirl, Mark! <br><br></td></tr></table><br>
<a name="2021098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup, the whole story behind incomplete gl20 bindings is here, and the guy at google comes forward in the comments:<br><a href="http://www.badlogicgames.com/wordpress/?p=760" target="_blank">http://www.badlogicgames.com/wordpress/?p=760</a><br><br>My question with the fix would be, how compatible is it? Most Android is ARM based, but which devices are not?<br>EDIT: google tv is not arm<br><a href="http://stackoverflow.com/questions/4490136/does-android-really-exist-on-other-platforms-than-arm" target="_blank">http://stackoverflow.com/questions/4490136/does-android-really-exist-on-other-platforms-than-arm</a> <br><br></td></tr></table><br>
<a name="2021073"></a>

<a name="2021074"></a>

<a name="2021075"></a>

<a name="2021076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't get that first link to load, but I don't think the CPU should matter, should it? It's just some Java/C decls. Still, worth pointing to that guy's fix too:<br><br><a href="http://code.google.com/p/gl2-android/" target="_blank">http://code.google.com/p/gl2-android/</a> <br><br></td></tr></table><br>
<a name="2021077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; My question with the fix would be, how compatible is it? Most Android is ARM based, but which devices are not?<br><br>Yeah, to be honest I'm not keen on adding native stuff to the android target as I'm not sure what the ramifications are. So far, the android target is 100% pure Java, and I like that. I was really hoping to hold off on the native code until we added an 'all native' NDK target...<br><br>That said, I'll try to get this working as Froyo is still apparently in widespread use. Whether it still will be by the time anyone actually does anything in GL2 is another question...<br><br>Perhaps this fix could be something you optionally add to your target? <br><br></td></tr></table><br>
<a name="2021078"></a>

<a name="2021079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt;  but I don't think the CPU should matter, should it? It's just some Java/C decls.<br><br>The C code needs to be precompiled to a .so library (android doesn't compile it), which is native code like a .dll or .exe. This library gets embedded in your app, so your app effectively becomes architecture dependent.<br><br>Ideally, it'd be nice NOT to require people to have to install the NDK (and therefore cygwin!) so we'd probably want to ship precompiled, native .so code. But by using it, you're limiting your app to only be runnable on the architecture supported by the .so. <br><br></td></tr></table><br>
<a name="2021080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> NDK has been mingw based for some time thank god, but yes monkey users shouldn't need to install it. If you use invoke NDK with:<br><br><pre class=code>
/Users/simon/android-ndk-r7/ndk-build NDK_DEBUG=1 APP_ABI=all
</pre><br><br>it should create following which i think is only extra you will need to distribute and may have to be managed /copied by trans for each project.<br><br>libs<br>libs/armeabi<br>libs/armeabi-v7a<br>libs/x86 <br><br></td></tr></table><br>
<a name="2021086"></a>

<a name="2021087"></a>

<a name="2021088"></a>

<a name="2021089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> HI,<br><br>&gt; NDK has been mingw based for some time thank god,<br><br>Yeah? My installation docs say:<br><br>"Windows users will need to install Cygwin 1.7 or later (http://www.cygwin.com) to<br>use the NDK. Note that running it under MSys or Cygwin 1.5 is not supported."<br><br>Seems to work with cygwin anyway...well, I've built something, not run it yet. I'd prefer cygwin anyway - mingw's too flaky. Where is it these days? The nuwen.net guy's not hosting it anymore...<br><br>&gt; you will need to distribute and may have to be managed /copied by trans for each project.<br><br>So we're gonna need something like 'ANDROID_NATIVE_TARGET' now too?<br><br>I really, really hate where this is going..! <br><br></td></tr></table><br>
<a name="2021085"></a>

<a name="2021091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'd prefer cygwin anyway - mingw's too flaky. Where is it these days? The nuwen.net guy's not hosting it anymore... <br></div><br><a href="http://www.mingw.org/" target="_blank">http://www.mingw.org/</a><br>Last update November? <br><br></td></tr></table><br>
<a name="2021093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ooh, can of worms...<br><br>Still, it'd be nice even if you had to (optionally, for 2.2 support) distribute pre-built libs. Most phones are going to be ARM for the near future, but it sounds like skid's method would produce libs for all anyway.<br><br>The only other option is to require 2.3, but that means more dodgy attempts at flashing phones/tablets (and mine won't reboot into recovery mode no matter what, making it even more risky). For the sake of two missing functions it seems a bit much!<br><br><div class="quote"> <br>Ideally, it'd be nice NOT to require people to have to install the NDK (and therefore cygwin!)<br> <br></div><br><br>I do agree... but for what it's worth, I don't have Cygwin installed and it built for me.<br><br>I don't think having to have the NDK *if you want to support 2.2* would be unreasonable; the minimum being 2.3 if you're happy with that, but I don't know how easy it would be to support a default 2.3 and an optional 2.2... <br><br></td></tr></table><br>
<a name="2021092"></a>

<a name="2021094"></a>

<a name="2021095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Legacy NDK hacks do seem a little off base. <br><br></td></tr></table><br>
<a name="2021096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, you're probably right... I'd just like someone/anyone to get it to work! <br><br></td></tr></table><br>
<a name="2021097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; I do agree... but for what it's worth, I don't have Cygwin installed and it built for me.<br><br>How did you do it? I'm still stuck...perhaps I need to try MinGW?<br><br>I've got the .so files appearing in libs/blah/... but Java loadLibrary still fails when I run it.<br><br>Do I need to change anything else? <br><br></td></tr></table><br>
<a name="2021099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Fixed! And I have no idea how/why!<br><br>Looks like all the compilers/linkers etc are built into the NDK (doh!) - you don't need cygwin or mingw at all as far as I can tell. I'm loving the idea of this as an eventual target SDK now...<br><br>I think I can turn this into an 'unofficial' thing you can drop into your target projects if you want better GL2 support in 2.2. I'm still uncomfortable with adding this to the official release for now, but maybe once it's had a bit of a thrashing...?<br><br>Should have a 52(d) up by the end of the day. <br><br></td></tr></table><br>
<a name="2021101"></a>

<a name="2021102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> The GDC2011 talk transcript also discusses the gl20 &lt;&gt; froyo fixes (just before textures):<br><a href="http://code.google.com/p/gdc2011-android-opengl/wiki/TalkTranscript" target="_blank">http://code.google.com/p/gdc2011-android-opengl/wiki/TalkTranscript</a><br><br>Thanks Mark! I think a side set of files should be fine for us monkeyers for now. I (for one) don't plan on using GL20 right away, although per-pixel lighting is nice.<br><br><br>Edit: As for all NDK Mojo for android, looks like they allow this now without java glue: <a href="http://developer.android.com/reference/android/app/NativeActivity.html" target="_blank">http://developer.android.com/reference/android/app/NativeActivity.html</a> <br><br></td></tr></table><br>
<a name="2021103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, Mark -- an unofficial/unsupported drop-in is probably for the best anyway if you can do it. <br><br></td></tr></table><br>
<a name="2021105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would investigate moving entire android target to NDK/C++. <br><br>Pure native app development has been available for some time and STL is now supported.<br><br>Have a squizz at $ndk/samples/native-activity/jni/main.c for more info. <br><br></td></tr></table><br>
<a name="2021106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; Cool, Mark -- an unofficial/unsupported drop-in is probably for the best anyway if you can do it. <br><br>It's probably gonna have to be quite intrusive, so I'll build it into the android target and add a ANDROID_NATIVE_GL_ENABLED config var.<br><br>Also, I guess this'll mean I have to use reflection for the working versions of these methods even though I'll only ever call them if they exist! <br><br></td></tr></table><br>
<a name="2021107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matty</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry I've not followed this thread too closely but am I correct in thinking that Android 2.2 is not supported by the new features being added in Monkey? Does this mean Monkey won't support Android 2.2 from v53 onwards?<br><br>Aside from the fact that my own phone is a 2.2 (HTC Desire) approximately 1/3 of users of my apps use 2.2 or lower, and 1/2 my users use 2.3.3+, with the remaining 20% split between all the other versions of Android.<br><br>? <br><br></td></tr></table><br>
<a name="2021109"></a>

<a name="2021110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; am I correct in thinking that Android 2.2 is not supported by the new features being added in Monkey?<br><br>This is all to do with the newly added OpenGL ES 2.0 module. It has nothing to do with mojo or any existing modules, which I plan to keep as compatible as possible with as much hardware as possible for as long as possible!<br><br>On that note:<br><br>V52(d) is now up with native kludge for new GLES20 stuff so it works on 2.2.<br><br>Use:<br><br>#ANDROID_NATIVE_GL_ENABLED="true"  'new config setting!<br><br>...at the top of your code to enable it. Currently, all it does is fix the 2.2 issue, but I've left the name a bit vague like this 'coz I may add more to it in future...<br><br>The whole 'libs' dir for all 3 ABIs is only 20k, so I don't really see the point in allowing users to select a subset of ABIs here, as that'll only limit the devices an app can run on for very little benefit. <br><br></td></tr></table><br>
<a name="2021108"></a>

<a name="2021112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matty</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Mark, that's good to know (that mojo etc will remain compatible with a lot of hardware).. <br><br></td></tr></table><br>
<a name="2021121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I get it to build and run successfully now, but the display is entirely pink -- no cubes and no error messages. Randomising glClearColor at least shows it's running and not just frozen.<br><br>I noticed versions.txt mentions "Mojo redirects stdout to android Log" -- how do I view that if I go through and add a load of Print checks to the sample/module? <br><br></td></tr></table><br>
<a name="2021133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> found in gles20_src.txt:<br><pre class=code>
'Not available in WebGL!
Function glVertexAttribPointer:Void( indx, size, type, normalized?, stride, data:DataBuffer )
</pre><br>that is not true, glVertexAttribPointer is available in WebGL. The following example use it: <a href="http://www.peter-strohm.de/webgl/kapitel1.html" target="_blank">http://www.peter-strohm.de/webgl/kapitel1.html</a> <br><br></td></tr></table><br>
<a name="2021150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; Hmm, I get it to build and run successfully now, but the display is entirely pink <br><br>Well, I don't have a 2.2 device so all I could check was whether the native hack worked or not, and it did.<br><br>Have you deleted your .build dir?<br><br>Have you added this at the top of the code?<br><br>#ANDROID_NATIVE_GL_ENABLED="true"<br><br>&gt; how do I view that if I go through and add a load of Print checks to the sample/module? <br><br>To print in native code, you can use bb_std_lang.print( blah ) or System.out.println( blah ).<br><br>&gt; that is not true, <br><br>It is according to the webgl spec:<br><br> <a href="https://www.khronos.org/registry/webgl/specs/1.0/#WEBGLCONTEXTATTRIBUTES" target="_blank">https://www.khronos.org/registry/webgl/specs/1.0/#WEBGLCONTEXTATTRIBUTES</a><br><br>In section 6.2: "The WebGL does not support client-side arrays" - ie: you must use VBOs. So the array/databuffer versions of glDrawElements and glVertexAttribPointer aren't available, only the 'int offset into VBO' versions. <br><br></td></tr></table><br>
<a name="2021149"></a>

<a name="2021148"></a>

<a name="2021151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> HI,<br><br>&gt; Hmm, I get it to build and run successfully now, but the display is entirely pink <br><br>Woah, think I've found it! Look out for a new version soon. <br><br></td></tr></table><br>
<a name="2021169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Woah, think I've found it!<br> <br></div><br>Cool... and yes, I'd deleted build and set the const to true. (Just done it again to double-check...) <br><br></td></tr></table><br>
<a name="2021170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>James, just emailed you! <br><br></td></tr></table><br>
<a name="2021171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, replied -- all good now! <br><br></td></tr></table><br>
<a name="2021530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPig</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Mark,<br><br>I pulled down the latest MonkeyPro52e to have a play with the GLES2 stuff.<br><br>It was all working quite beautifully (nice job BTW) but I do appear to have run into an HTML5 error...<br><br>Monkey Runtime error: RangeError: ArrayBuffer length minus the byteOffset is not a multiple of the element size.<br><br>The offending line is...<br><br><pre class=code>
Local idata:=DataBuffer.Create( icount*2 )
</pre><br><br>The mesh I'm attempting to load has 952 verts and 4011 indices.<br><br>The Android &amp; GLFW builds of the same code load and display it correctly.<br><br>All I've done is take your basic GLES2 sample; re-organized it a little and implemented by own ObjLoader.<br><br>Let me know if you want the code and data-set if it's an unknown issue.<br><br>Cheers, <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
