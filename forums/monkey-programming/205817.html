<!DOCTYPE html><html lang="en" ><head ><title >Experimental v75a now up! [MONKEY NEWS]</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Experimental v75a now up! [MONKEY NEWS]</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Experimental v75a now up! [MONKEY NEWS]</a><br><br>
<a name="2066036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Experimental v75a is now up!<br><br>The big change in this version is the addition of xaml to the winrt targets (and the renaming of the win8 target to winrt).<br><br>I haven't actually done anything with this new feature yet, but the idea is to use it for stuff like pubCenter ads, IAP etc. I've also had a few requests from Monkey devs for xaml-ized winrt targets.<br><br>It does however look suspiciously like pubCenter is dead/dying. The official developer's forum is strangely inactive...<br><br><a href="http://community.bingads.microsoft.com/ads/en/publisher/f/63.aspx" target="_blank">http://community.bingads.microsoft.com/ads/en/publisher/f/63.aspx</a><br><br>...and threads like this would suggest all is not well in general...<br><br><a href="http://community.bingads.microsoft.com/ads/en/publisher/f/63/t/76747.aspx" target="_blank">http://community.bingads.microsoft.com/ads/en/publisher/f/63/t/76747.aspx</a><br><br>Anyway, I'll get back to winrt ads/iap eventually, but right now I think I need a bit of a break from winrt! Am finding it fairly, erm, 'challenging' to deal with...<br><br><div class="quote"> <br>Since I'm breaking win8 stuff, renamed "win8" target/builder to "winrt" - ie: #If TARGET="winrt" for win8/winphone8 apps now. Also renamed a bunch of *win8* files to winrt.<br><br>After much hair pulling and gnashing of teeth, win8 and winphone8 targets are now xaml/d3d style apps. Both with a smidgen of c# thrown in, although Monkey translated code is still c++. Win8/winphone8 app orientation must now be set via manifest. 'SetUpdateRate 60' recommended on winphone8 due to OS 'timing anomolies'.<br><br>Added support for ! to data path filters.<br><br>Fixed brl.process string cast bug preventing modman compiling.<br><br>Fixed a += side effects issue again.<br><br>Updated win8 mojo for potential xaml-ification.<br><br>Updated win8 transcc builder so it can handle C# projects too.<br><br>Renamed native c++ Print() to bbPrint() and Error() to bbError().<br> <br></div> <br><br></td></tr></table><br>
<a name="2066018"></a>

<a name="2066025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snader</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work Mark. <br><br>I was hoping for 4 controller support on the OUYA target, but I also just installed Win8, so I will soon have a go to get my apps on Windows 8 and Windows Phone! Thank you for you hard work! <br><br></td></tr></table><br>
<a name="2066027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; I was hoping for 4 controller support on the OUYA target,<br><br>I *think* that might be (mostly) in!<br><br>Try the new joytest banana... <br><br></td></tr></table><br>
<a name="2066031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snader</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I *think* that means even more thanks for your hard work!<br><br>Works almost. All gamepads on the OUYA output to port 0 at the moment. <br><br></td></tr></table><br>
<a name="2066028"></a>

<a name="2066039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Definitely appreciate the release and update Mark! GREAT work getting this done. Likewise with what snader said, the OUYA 4 controller support is what I was *really* hoping for :) It would be awesome if we could distinguish the controller ports (0-3) so we can make multiplayer games using all 4 controllers at the same time on a single OUYA. <br><br></td></tr></table><br>
<a name="2066044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hoping for the Ouya 4 controllers too but eh, still awesome on the other stuff :)! <br><br></td></tr></table><br>
<a name="2066046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> as a reminder, the community Ouya target is here, which supports 4 controllers:<br><a href="https://github.com/JochenHeizmann/monkey-ouya" target="_blank">https://github.com/JochenHeizmann/monkey-ouya</a> <br><br></td></tr></table><br>
<a name="2066054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam, but unless I am missing something, I can't seem to get the individual controllers to work with it either. It does the same as the official version. I did, however branch out and make my own target based off Mark's and another based upon the community version. I was able to support 4 controllers separately working from each other within the CE version, but I totally threw away using the assignment of keys in the manner it uses. I wanted to use JoyHit and JoyDown where appropriate, and then the buttons. We can discuss it in the OUYA target instead of here though.<br><br>EDIT: After looking at the source to the joytest code, I believe Mark did support 4 controllers EXACTLY as I was looking for. Now, once I get home this evening, I will test it out on the OUYA with all 4 controllers :) <br><br></td></tr></table><br>
<a name="2066047"></a>

<a name="2066048"></a>

<a name="2066049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark, <br><br>As your question went unanswered on MS forum, I have this link I found a while ago <a href="http://blogs.msdn.com/b/windowsappdev/archive/2012/03/15/combining-xaml-and-directx.aspx" target="_blank">about ads on direct-x apps</a>. Maybe this will help you? <br><br></td></tr></table><br>
<a name="2066052"></a>

<a name="2066053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dragon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like to have extra key codes:<br><br>KEY_JOY1_LEFT / RIGHT / UP / DOWN ...<br>KEY_JOY2_LEFT / RIGHT / UP / DOWN ...<br>KEY_JOY3_LEFT / RIGHT / UP / DOWN ...<br><br><br>today, we have only 1 joystick key codes (port 0) <br><br></td></tr></table><br>
<a name="2066073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> After testing this on the OUYA, it still only returns port 0 on the android target. Although, it is encouraging that the JoyHit, JoyDown, JoyX, JoyY, and JoyZ support 4 devices. Gonna go back into the target and do some work there to get that support now for the OUYA :) <br><br></td></tr></table><br>
<a name="2066080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; After testing this on the OUYA, it still only returns port 0 on the android target<br><br>Oops - that's because I forget to add the android_ouya target to the release!<br><br>Will add it to 75b soon, in the meantime you could try the android_ouya target here:<br><br><a href="https://github.com/blitz-research/monkey/tree/develop/targets" target="_blank">https://github.com/blitz-research/monkey/tree/develop/targets</a> <br><br></td></tr></table><br>
<a name="2066088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snader</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, that works fine Mark! Thank you! <br><br></td></tr></table><br>
<a name="2066102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome! Thanks Mark :) I was thinking perhaps you did some cool trick to merge both OUYA and Android into a single target :P <br><br></td></tr></table><br>
<a name="2066110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hurrah excellent! Thanks for taking the stress inducing plunge of takling those SDK's!<br><br>Hopefully I will get some time soon to do some stuff with these targets :D <br><br></td></tr></table><br>
<a name="2066109"></a>

<a name="2066120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you Mark... <br><br></td></tr></table><br>
<a name="2066145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent will update for me star rogue game :) <br><br></td></tr></table><br>
<a name="2066175"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't compile to Win8 phone here...<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
\winrt_winphone8\MonkeyGame.cpp(4546): error C3861: 'Print': identifier not found (MonkeyGame.PhoneComponent.cpp) [winrt_winphone8\MonkeyGame.PhoneComponent.vcxproj]
\winrt_winphone8\MonkeyGame.cpp(4558): error C3861: 'Print': identifier not found (MonkeyGame.PhoneComponent.cpp) [winrt_winphone8\MonkeyGame.PhoneComponent.vcxproj]
\winrt_winphone8\MonkeyGame.cpp(4571): error C3861: 'Print': identifier not found (MonkeyGame.PhoneComponent.cpp) [\winrt_winphone8\MonkeyGame.PhoneComponent.vcxproj]

</textarea><br><br>I have deleted the old build folder, opened the template on VS2012 and save it... no changes.<br><br>Strangely sample apps do compile, so I'm lost here :(<br><br>Accordingly to VS, those are the offending code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
void BBHttpRequest::Open( String req,String url ){
	
	if( FAILED( CoCreateInstance( CLSID_FreeThreadedXMLHTTP60,NULL,CLSCTX_INPROC_SERVER,IID_PPV_ARGS( &amp;_req ) ) ) ){
		return;
	}

	if( FAILED( _req-&gt;Open( req.ToCString&lt;WCHAR&gt;(),url.ToCString&lt;WCHAR&gt;(),_cb.Get(),0,0,0,0 ) ) ){
		Print( "Failed to open HttpRequest" );
	}
}

void BBHttpRequest::Send(){

	if( FAILED( _req-&gt;Send( 0,0 ) ) ){
		Print( "Send failed" );
	}
	
	_cb-&gt;Start();
}

void BBHttpRequest::SendText( String text,String encoding ){

	_data=Microsoft::WRL::Details::Make&lt;CXMLHTTPRequestData&gt;();
	
	int length=_data-&gt;SetText( text );
	
	if( FAILED( _req-&gt;Send( _data.Get(),length ) ) ){
		Print( "Send failed" );
	}

	_cb-&gt;Start();
}

</textarea><br><br>Commenting out all those "prints" and the game compiles and run fine.<br>Edit: Commenting out those prints also on httprequest.winrt.cpp enables my game to compile within monkey without errors. <br><br></td></tr></table><br>
<a name="2066174"></a>

<a name="2066173"></a>

<a name="2066190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another bug: changing the device Orientation on mainpage.xaml, I get a nullexception.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
{System.NullReferenceException: Object reference not set to an instance of an object.
   at MonkeyGame.MainPage.OnOrientationChanged(OrientationChangedEventArgs e)
   at Microsoft.Phone.Controls.PhoneApplicationPage.UIOrientationChange(Orientations orientation)
   at Microsoft.Phone.Controls.PhoneApplicationPage.UpdatePageOrientation()
   at Microsoft.Phone.Controls.PhoneApplicationPage.InternalOnNavigatedTo(NavigationEventArgs e)
   at Microsoft.Phone.Controls.PhoneApplicationPage.Microsoft.Phone.Controls.IPhoneApplicationPage.InternalOnNavigatedToX(NavigationEventArgs e)
   at System.Windows.Navigation.NavigationService.RaiseNavigated(Object content, Uri uri, NavigationMode mode, Boolean isNavigationInitiator, IPhoneApplicationPage existingContentPage, IPhoneApplicationPage newContentPage)
   at System.Windows.Navigation.NavigationService.CompleteNavigation(DependencyObject content, NavigationMode mode)
   at System.Windows.Navigation.NavigationService.ContentLoader_BeginLoad_Callback(IAsyncResult result)}
</textarea><br><br>I can avoid the exception by testing for null _background, but then app won't rotate to landscape:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
        protected override void OnOrientationChanged(OrientationChangedEventArgs e)
        {
            int rot = 0;
            switch (this.Orientation)
            {
                case PageOrientation.PortraitUp: rot = 0; break;
                case PageOrientation.LandscapeLeft: rot = 1; break;
                case PageOrientation.PortraitDown: rot = 2; break;
                case PageOrientation.LandscapeRight: rot = 3; break;
            }
            _background.DeviceRotation = rot; &lt;-- error here
        } 
</textarea><br><br>Temporary solution for this: move the _background init code to a custom function, and call it not only on initialization, but also before _background.DeviceRotation. Since the funcion checks if _background==null, it will only execute once, and the app will behave correctly.<br><br>Now if I only could make ads to work on this... <br><br></td></tr></table><br>
<a name="2066184"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
