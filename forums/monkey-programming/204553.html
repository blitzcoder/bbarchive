<!DOCTYPE html><html lang="en" ><head ><title >Spotlighting</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Spotlighting</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Spotlighting</a><br><br>
<a name="2049069"></a>

<a name="2049070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How would you go about doing the following with Monkey?<br><br>Turning this<br><br><img src="http://i.imgur.com/A8wNWVV.png"><br><br>into this<br><br><img src="http://i.imgur.com/fGpjsgh.png"><br><br>are there any particular techniques? <br><br>Ta! :) <br><br></td></tr></table><br>
<a name="2049071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way I did this in Dr Mal was to have a (I think) 128x128 image which is basically the transparent circle, with black around it.  Draw that where you want it, then fill in the surrounding area with four DrawRects with the color set to 0,0,0.<br><br>Mind you, in Dr Mal, I had solid black instead of semitransparent, so you won't get away with even a tiny overlap of the DrawRects here without ruining the effect. <br><br></td></tr></table><br>
<a name="2049073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I do the same sort of thing, I split my screen up into 64*64 tiles/grid and I offset the grids x,y position so that I can center a single tile directly over the hot spot, where I place my hole, the other tiles get filled with alpha'd black squares.<br><br>with that system I can also add other black shapes to do fog of war stuff. <br><br></td></tr></table><br>
<a name="2049074"></a>

<a name="2049075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have done similar.  Draw the first image, then set alpha to what you want, and draw a solid black object with a hole.<br><br>As Gfk says, you will need to have exact values if you are using DrawRects() for efficiency.  An alternative would be to draw everything first with intermediate alpha on a black background, then brighten the spotlighted area using ReadPixels() and WritePixels.  <br><br>Or you could draw everything first half-bright as above, then use SetScissor() and redraw the spotlighted area in full brightness, then draw a black rect with a hole in half-brightness on the scissored area. <br><br></td></tr></table><br>
<a name="2049091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks y'all :)<br><br>Will give drawing a square "hole" image and 4 drawrects a go! <br><br></td></tr></table><br>
<a name="2049155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The main problem I had with doing this was spotlight overlap things I tried was <br><br>1) a lighter circle placed over the area to be lit worked OK but washes out the image<br><br>2) the darkened screen approach, can't have spotlights overlap<br><br>3) light set by tile location from light source computed at time of creation of the level and when a light changes (everything within the light radius) works OK but looks tiled.<br><br>I went with 3 in the end with some extra tiles for working out the light level of surrounding tiles looks OK. I would love someone to write a fog of war tutorial for monkey and max that would be brilliant :) <br><br></td></tr></table><br>
<a name="2049183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> fog of war is really simple, well I should say there are really simple ways of doing it its all just a matter of how or what method will fit with your game or project.<br><br>I think a solution I tend to use the most is the grid, if my game uses tiles like lets say something like zelda, then I have a fog of war layer in my tile engine which is filled with black tiles, then as the player opens up the area you just swap out the black tiles for either none at all or some alpha to blend it out, the last time I used it I created a set of 15 or so black tiles with which border into visible space and I just tiled the world making sure that any border between fog of war and visible space used the appropriate black border tile.<br><br>not sure if any of that helps lol. hope it does. I really dont have time to do a demo or tutorial :( <br><br></td></tr></table><br>
<a name="2049193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I did the same in the end, in a realtime lighting setting its not practical as it does require a lot of calculations for loads of lights. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
