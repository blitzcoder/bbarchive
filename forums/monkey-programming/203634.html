<!DOCTYPE html><html lang="en" ><head ><title >Orbiting center point image maths question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Orbiting center point image maths question</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Orbiting center point image maths question</a><br><br>
<a name="2038822"></a>

<a name="2038823"></a>

<a name="2038824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hobo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found some AS code and trying to adapt it to monkey. <br><br>My aim is to simply have an image rotate around a center point, like it's orbiting a planet. <br><br>I have tried a few things and at the moment my image simply stays put.<br><br>Here is the code:<br><br><pre class=code>
Class GameScreen Extends Screen

	Field imageGraphic:GameImage
	
	Field xCenter:Float = SCREEN_WIDTH2
	Field yCenter:Float = SCREEN_HEIGHT2
	Field range:Float = 100
	Field angle:Float = 20
	Field speed:Float = 1.5
        Field imagex:Float
        Field imagey:Float


	Method New()
		name = "Game"
	End
	
	Method Start:Void()
	    imageGraphic = game.images.Find("image")
	End
	
	Method Render:Void()
            Cls
	    imageGraphic.Draw(imagex,imagey)
        End
	
	Method Update:Void()	
	    
            imagex = xCenter + Cos(angle*PI/180) * range;
    	    imagey = yCenter + Sin(angle*PI/180) * range;
    
            angle+=speed;
	End
	
End

</pre><br><br>Can anyone spot anything wrong with this 'orbit code'. It's probably me making a simple error or maths issue.<br><br>Or if im trying to over complicate the problem let me know.<br><br>Thanks for any help. <br><br></td></tr></table><br>
<a name="2038813"></a>

<a name="2038817"></a>

<a name="2038818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where are imagex and imagey defined? Perhaps they're meant to be something like imageGraphic.x (or imageGraphic.imagex)? <br><br></td></tr></table><br>
<a name="2038820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried increasing the range?  It seems to be only one pixel.  Perhaps it is orbiting by that much and you haven't noticed! <br><br></td></tr></table><br>
<a name="2038825"></a>

<a name="2038826"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hobo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry guys had some typos in the initial post. <br><br>imagex and imagey now defined at the top.<br><br>Tried increasing the range this is also reflected in my original post. The graphic starts at a different position now but still no oribiting.<br><br>Strange one.<br><br>Is there any debug that could help? <br><br></td></tr></table><br>
<a name="2038827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hobo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did it, speed was to low! <br><br>increased it to 20 and its slowly orbiting. Thanks for your suggestions as alwalys sharing helps! <br><br></td></tr></table><br>
<a name="2038829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Get rid of PI/180 thats for radians and Monkey is doing Degrees already. <br><br></td></tr></table><br>
<a name="2038830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah! As jesse states there's no need for PI/180. Just have 'angle' and increase its value.<br><br>When over 359.0 deduct 360 from it. <br><br></td></tr></table><br>
<a name="2038833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hobo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will do, thanks all. <br><br></td></tr></table><br>
<a name="2038834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hobo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried changing it to angle and I now have two graphics appearing opposite each other spinning around the center. <br><br>I presume the imagex/y is being calculated and creating two different positions which is flicking through (its not actually two images)<br><br>Does that make sense?<br><br>Do I have to separate angles for x and y? (tried that same thing)<br><br>New code: <br><br><pre class=code>

	Method Render:Void()
            Cls
	    imageGraphic.Draw(imagex,imagey)
        End
	
	Method Update:Void()	
	    
            imagex = xCenter + Cos(angle) * range;
    	    imagey = yCenter + Sin(angle) * range;
    
            angle+=speed;
            if (angle &gt; 359.0) angle -= 360
	End
	
</pre> <br><br></td></tr></table><br>
<a name="2038836"></a>

<a name="2038837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> try reducing the speed variable to something smaller. <br><br></td></tr></table><br>
<a name="2038844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Might be worth putting it into a little runnable example and posting that. <br><br></td></tr></table><br>
<a name="2038858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something for you to play around with so you can see what happens with different values. You'll have to supply your own images for the sun and earth.<br><pre class=code>Strict
Import mojo

Function Main:Int()
	New CGame
	Return 0
End Function

Class CGame Extends App

	Field orbitAngle:Float		'Objects current orbits angle
	Field orbitX:Int		'Object thats orbiting positions
	Field orbitY:Int		'Object thats orbiting positions
	Field orbitSpeed:Float		'Objects current orbit speed
	Field orbitDiameter:Float	'Objects orbits diameter
	Field orbitImage:Image		'Orbiting objects image
	
	Field poleX:Int			'Central X axis
	Field poleY:Int			'Central y axis
	Field poleImage:Image		'Central image
	
	Method OnCreate:Int()
		SetUpdateRate(30)
		Self.orbitImage = LoadImage("earth.png", 1, Image.MidHandle)
		Self.poleImage = LoadImage("sun.png", 1, Image.MidHandle)
		
		Self.poleX = DeviceWidth() / 2
		Self.poleY = DeviceHeight() / 2
		Self.orbitDiameter = 100.0
		
		Return 0
	End Method
	
	Method OnUpdate:Int()
	
		Self.orbitX = Self.poleX + Cos(Self.orbitAngle) * Self.orbitDiameter
		Self.orbitY = Self.poleY + Sin(Self.orbitAngle) * Self.orbitDiameter

		Self.orbitAngle += orbitSpeed

		If Self.orbitAngle &gt; 360 Then Self.orbitAngle -= 360
		If Self.orbitAngle &lt; 0 Then Self.orbitAngle += 360
		
		If KeyDown(KEY_A) Then Self.orbitSpeed -= 0.1
		If KeyDown(KEY_Q) Then Self.orbitSpeed += 0.1
		
		If KeyDown(KEY_W) Then Self.orbitDiameter += 1
		If KeyDown(KEY_S) And Self.orbitDiameter &gt; 0 Then Self.orbitDiameter -= 1
		
		If KeyDown(KEY_LEFT) Then Self.poleX -= 4
		If KeyDown(KEY_RIGHT) Then Self.poleX += 4
		If KeyDown(KEY_UP) Then Self.poleY -= 4
		If KeyDown(KEY_DOWN) Then Self.poleY += 4
		
		Return 0
	End Method
	
	Method OnRender:Int()
		Cls

		DrawImage(Self.poleImage, Self.poleX, Self.poleY)
		DrawImage(Self.orbitImage, Self.orbitX, Self.orbitY)

		DrawText("Q and A Keys to Change Orbit speed", 0, 0)
		DrawText("W and S Keys to Change Orbit diameter", 0, 12)
		DrawText("Arrows Keys to move Orbit pole", 0, 24)
		DrawText("OrbitAngle: " + Self.orbitAngle, 0, 36)
		DrawText("OrbitSpeed: " + Self.orbitSpeed, 0, 48)
		DrawText("OrbitDiameter: " + Self.orbitDiameter, 0, 60)

		Return 0
	End Method

End Class

</pre> <br><br></td></tr></table><br>
<a name="2038919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hobo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the brilliant help (again) - as mentioned the speed I was running the orbiting at was way too fast. <br><br></td></tr></table><br>
<a name="2038922"></a>

<a name="2038923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you prefer radians, there are also radian versions of all the trig functions, e.g. Cosr(), ACosr() etc.  They may also be a little faster if you are doing heavy trig. <br><br></td></tr></table><br>
<a name="2042093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hobo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is the result of me asking about the orbiting thing. As you can see nothing complex!<br><br>DeathSkip -<br><br><a href="http://panicbarn.com/deathskip/deathskip.html" target="_blank">http://panicbarn.com/deathskip/deathskip.html</a> <br><br></td></tr></table><br>
<a name="2039245"></a>

<a name="2039246"></a>

<a name="2039247"></a>

<a name="2039248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> LOL, funny game :-D<br><br>Great example of a really simple game that is also fun. <br><br></td></tr></table><br>
<a name="2039249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> That was cool! :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
