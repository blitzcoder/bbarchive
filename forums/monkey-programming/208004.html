<!DOCTYPE html><html lang="en" ><head ><title >Macro in Monkey</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Macro in Monkey</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Macro in Monkey</a><br><br>
<a name="2079592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>just i want to ask before thinking to implement it.<br><br>does Monkey has a Macro keyword ?<br><br>if not what do you think about implementing one.<br><br>i have 2 idea , <br><br>1- first using CPP #define directive that will work in cpp compiling.<br>2- second make it with Preprocesser and work in Monkey stage.<br><br>thanks. <br><br></td></tr></table><br>
<a name="2079593"></a>

<a name="2079594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't doubt that people have toyed with the idea.  I could imagine an unofficial pre-processor getting built sometime...<br><br>There's no Macro command though, and the pre-processor options are limited.  Possibly that's a good choice in terms of usability for all but a hard core of programmers. <br><br></td></tr></table><br>
<a name="2079597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Emil_halim wrote:</b><br><div class="quote"> 2- second make it with Preprocesser and work in Monkey stage. <br></div><br><br>It's more universal. <br><br></td></tr></table><br>
<a name="2079733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok ,<br><br>of cource if i will make any changing to monkey , it will be unofficial monkey version.<br><br>i will try implementing Macro in Preprocessor . <br><br></td></tr></table><br>
<a name="2079763"></a>

<a name="2079764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dragon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> a gcc preprocessor work with every language...<br>also with java or monkey... or any other<br><br>you should run preprocessor before monkey compile...<br>so something need to change in monkey...<br><br><br>see this here:<br>If you use the -E option, nothing is done except preprocessing.<br><br><a href="http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html" target="_blank">http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html</a><br><br>example:<br><a href="http://www.network-theory.co.uk/docs/gccintro/gccintro_36.html" target="_blank">http://www.network-theory.co.uk/docs/gccintro/gccintro_36.html</a> <br><br></td></tr></table><br>
<a name="2079757"></a>

<a name="2079844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks dragon,<br><br>I am thinking in first implementing Macro that will work in monkey translator stage.<br><br>Also i have an idea , inline some c/c++ asm code within monkey source code itself, so using gcc preprocessor will help at this time. <br><br></td></tr></table><br>
<a name="2079866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Emil_halim wrote:</b><br><div class="quote"> of cource if i will make any changing to monkey , it will be unofficial monkey version. <br></div><br><br>You may extend transcc(.monkey) or use any other tool to create preprocessor, set its name to transcc and call original transcc (under other name) when preprocessor ends work. <br><br></td></tr></table><br>
<a name="2080110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>nikoniko wrote:</b><br><div class="quote"> You may extend transcc(.monkey)  <br></div><br><br>It's not even required. Call first preprocessor (better if it will be a part of MonkeyX distro), then call transcc to build. <br><br></td></tr></table><br>
<a name="2080154"></a>

<a name="2080157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would be nice to have in Monkey:<br><pre class=code>Macro abc ' replaces all occurences of 'abc' with 'x'
   x
End Macro

abc:Integer ' becomes 'x:Integer'

'----------------------------------

Macro DoIt(a,b)
   something(a)
   something(b)
   doSomething(a,b)
End

DoIt(1,2)
DoIt(1,"string")

'----------------------------------

Macro myMacro(_a_) ' '#'-operator within macros joins things
   x#_a_#z
End

myMacro(y) ' becomes 'xyz'</pre><br><br>For embedding native code:<br>'!' operator on line start means native code. It get's inserted without modification.<br>So we could directly write C++, C#, Java, JavaScript. Depends on the target.<br><pre class=code>' Desktop/C++ target
!int func(int a) {
!  std::cout &lt;&lt; a &lt;&lt; std::endl;
!  doSomething(a);
!}

Import
   Function func(a:Int)
Public

func(1)</pre><br><br><pre class=code>' JavaScript targets
!alert("alert");</pre><br>'!' is used in PureBasic and PowerBasic to directly write ASM <br><br></td></tr></table><br>
<a name="2080181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Macros could also be used for inlining Monkey code. <br><br></td></tr></table><br>
<a name="2080327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @nikoniko<br><br>when i was working in c-- Extension , i was having no source code of c-- so i made c--Ext that translates my new extension stuff to c-- code then c-- made the remain stuff.<br>so here i have the source code of transcc so it is more easy to extend it, and i see that the best point to do a macro is after preprocessor. i mean in the end of PreProcess$ function.<br><br>   <br>@Danilo<br>that's exactly what i wes thinking , also i think in block of c , c++ or asm code with a kewword for each one.<br>and with asm block i will support heigh level asm , something like this<br>   <br>   EAX = 10  -----&gt; mov EAX,10<br>   <br>BTW BCX also uses ! for inlining c/c++ with basic code<br><br><br>@Gerry Quinn<br><br>of course that wright. <br><br></td></tr></table><br>
<a name="2080340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>I have successfully finished inline block to c/c++.<br><br>Example<br><pre class=code>
Function Main:Int()

    Local kiro:Int = 20
     
    Print kiro
    inlineC 
       // Inline c source code
          t_kiro=200;
    endC   
    Print kiro
    Return 0
End
</pre><br><br>that will print<br>20<br>200  <br>as you see i uesd inlineC--endC to send block to c/c++ compiler.<br>Note Well that the local variable kiro will be t_kiro in c/c++ phase. <br><br></td></tr></table><br>
<a name="2080385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>Also added inline symbol "!" to send the line to c/c++ compiler<br><br>the Previous Exm<br> <br><pre class=code>
Function Main:Int()

    Local kiro:Int = 20
     
    Print kiro
        

    inlineC 
       // Inline c source code
          t_kiro=200;
    endC
         
    ! // Inline Sym C
    ! bbPrint(String(t_kiro));
    
    Return 0
End
</pre><br><br>NoteWell tile now we can use inline only in Function Body. <br><br></td></tr></table><br>
<a name="2080396"></a>

<a name="2080397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds good. :) <br><br></td></tr></table><br>
<a name="2080420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks Danilo,<br><br>now i can use ! symbol or inlinC in declaration area<br><br>Example<br><pre class=code>
!DWORD put( String a ) {
!  bbPrint( a );
!}

inlineC
 // Inline c in declration area
endC

Extern
   Function put:Int(a:String)
Public
 
Function Main:Int()

    Local kiro:Int = 20
     
    Print kiro
       
    inlineC 
       // Inline c source code
          t_kiro=200;
    endC
         
    ! /* Inline Sym C */
    ! bbPrint(String(t_kiro));
    
    put("Monkey Ext is very good")
    
    Return 0
End
</pre><br><br>i will post the transcc Ext later. <br><br></td></tr></table><br>
<a name="2080455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be cool to have a preprocessor variable like:<br><pre class=code>#transcc_ext</pre> <br><br></td></tr></table><br>
<a name="2080456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dragon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> see how haxe handle this<br><a href="http://haxe.org/doc/advanced/magic" target="_blank">http://haxe.org/doc/advanced/magic</a> <br><br></td></tr></table><br>
<a name="2080484"></a>

<a name="2080485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> see how haxe handle this<br><a href="http://haxe.org/doc/advanced/magic" target="_blank">http://haxe.org/doc/advanced/magic</a> <br></div><br>Thanks for the link! Looks much more advanced, and has basic stuff I am wondering about in Monkey X, for example enums, macros, ... <br><br></td></tr></table><br>
<a name="2080622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Kog<br>if i got it well, #transcc_ext is a switch to on/of extension features. if so i will do it later.<br><br>@dragon<br>thanks again for your link, when i decided to change Transcc i put some roles to obay,which are<br>1- changes are done with a very little modification in monkey source code itself.<br>2- as possible as any changes will work for all targets.<br>3-try to collect changes and put then in one place and remark it for easy access.<br><br>@Danilo<br>with the monkey extension we can make what we want , for example , implementing Enum feature.<br>actually implementing it is very easy , the idea is change each term of Enum to a const and let monkey pares it.<br>started making it yesterday. <br><br></td></tr></table><br>
<a name="2080629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>Enum feature done.<br><br>Example<br><pre class=code>
Enum
   ONE,TWO,THREE
EndEnum

Function Main:Int()
        
    Print ONE
    Print TWO
    Print THREE
    
    Return 0
End
</pre><br><br>will print 0 1 2 <br><br></td></tr></table><br>
<a name="2080631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> This enum has some problems; it is no different than an auto enumerated const scoped at the parent level.  Many people use enums as a namespace... Furthermore, some people deliberately enumerate in different orders, for example to support bitwise flags. Your example doesn't seem to show this as possible. <br><br></td></tr></table><br>
<a name="2080630"></a>

<a name="2080648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> could you pleas feed some examples for enums as a namespace , deliberately enumerate in different orders , support bitwise flags.<br><br>any way , i have extend Enum to support that<br>Example<br><pre class=code>
Enum 
   ONE,TWO,THREE
EndEnum

Enum 
   AA,BB=10,CC,PP=60,ZZ
EndEnum

Function Main:Int()
     
    Print ONE
    Print TWO
    Print THREE
    
    Print CC
    Print ZZ
    
    Return 0
End
</pre><br><br>print that 0  1  2  11  61 <br><br></td></tr></table><br>
<a name="2080647"></a>

<a name="2080670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does this work?<br><pre class=code>Enum
   AA,BB=10,CC,PP=60,ZZ
   ENUM_1 = 1  ' restart at 1
   ENUM_2 = CC ' 11
   ENUM_3      ' 12
EndEnum

Enum 20
   ENUM_4 ' will start at 20
   ENUM_5 ' will be 21
End

Class ABC ' enum in class

    Enum 50 Step 5
       ENUM_6 ' will start at 50
       ENUM_7 ' will be 55
       ENUM_8 ' will be 60
    End

End

Enum
   ENUM_10 = 1 &lt;&lt; 0
   ENUM_11 = 1 &lt;&lt; 1
   ENUM_12 = 1 &lt;&lt; 2
   ENUM_13 = 1 &lt;&lt; 3
End Enum



Function Main:Int()
    
    Print AA
    Print BB
    Print CC
    Print PP
    Print ZZ
    
    Print ENUM_1
    Print ENUM_2
    Print ENUM_3
    
    Print ENUM_4
    Print ENUM_5
    
    Print ABC.ENUM_6
    Print ABC.ENUM_7
    Print ABC.ENUM_8
    
    Print ENUM_10
    Print ENUM_11
    Print ENUM_12
    Print ENUM_13
    Return 0
End</pre> <br><br></td></tr></table><br>
<a name="2080681"></a>

<a name="2080682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> here is enum in class namespace example<br><br><pre class=code>
Enum Option
  INVALID = -1
  NONE = 0
  A = 1
  B = 2
  C = 4
  D = 8
End Enum

Function Main()
  Print ( Option.B )  ' Prints 2
  Print ( Option.A | Option.B )  'Prints 3

  Local everything:Int = Option.A | Option.B | Option.C | Option.D
  Print ( everything )  'Prints 15

  Local currentOption:Option  'Declares as an Enum type
  currentOption = Option.C
  Print currentOption  'Prints 4

  If HasFlag(everything, Option.D) Then Print "True" Else Print "False"  'Prints True
End Function

Function HasFlag?(value:Int, flag:Int)
  Return (value &amp; flag = flag)
 End Function</pre><br><br>scope of Options is in global namespace.  Other scopes must call Options.Whatever.  Anything that can evaluate to an int constant should be supported, eg:  A = "A"[0]  should return 65 because it can be statically evaluated at compile time.<br><br>VB.NET has some pseudo-methods for Enums similar to how Monkey has pseudo-methods for Strings and Arrays.  Enum.HasFlag() for example is a feature of .NET 4.0 and can easily be supported as in the above example. <br><br></td></tr></table><br>
<a name="2080678"></a>

<a name="2080680"></a>

<a name="2080742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>this is what done till now.<br>Example<br><pre class=code>
Enum 
   ONE,TWO,THREE
EndEnum

Enum
   AA,BB=10+4,CC,PP=60,ZZ
   ENUM_1 = 1  ' restart at 1
   ENUM_2 = CC ' 11
   ENUM_3      ' ---------&gt; still not supported
End

Enum 20
   ENUM_4 ' will start at 20
   ENUM_5 ' will be 21
End Enum

Enum 50*10 Step 5*10
       ENUM_6 ' will start at 500
       ENUM_7 ' will be 550
       ENUM_8 ' will be 600
EndEnum

Enum
   ENUM_10 = 1 Shl 0
   ENUM_11 = 1 Shl 1
   ENUM_12 = 1 Shl 2
   ENUM_13 = 1 Shl 3
EndEnum

Enum POINT
   TA,TB,TC
EndEnum

Function Main:Int()

    Print ONE
    Print TWO
    Print THREE
    
    Print AA
    Print BB
    Print CC
    Print PP
    Print ZZ
       
    Print ENUM_1
    Print ENUM_2
    Print ENUM_3
    
    Print ENUM_4
    Print ENUM_5
    
    Print ENUM_6
    Print ENUM_7
    Print ENUM_8
    
    Print ENUM_10
    Print ENUM_11
    Print ENUM_12
    Print ENUM_13
    
    Print POINT_TA   '  _ instead of . for scope stuff 
    Print POINT_TB
    Print POINT_TC
      
    Return 0
End
</pre><br><br>I will try to support other feature. <br><br></td></tr></table><br>
<a name="2080743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you release a pre-alpha Version for testing? <br><br></td></tr></table><br>
<a name="2080862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will release it as soon as finishing Enum Keyword.<br><br>here is the new feature of Enum until now<br><pre class=code>

Enum 
   ONE,TWO,THREE
EndEnum

Enum
   AA,BB=10+4,CC,PP=60,ZZ
   ENUM_1 = 1  ' restart at 1
   ENUM_2 = CC ' 15
   ENUM_3      ' ---------&gt; still not supported
End

Enum 20
   ENUM_4 ' will start at 20
   ENUM_5 ' will be 21
End Enum

Enum 50*10 Step 5*10
       ENUM_6 ' will start at 500
       ENUM_7 ' will be 550
       ENUM_8 ' will be 600
EndEnum

Enum
   ENUM_10 = 1 Shl 0
   ENUM_11 = 1 Shl 1
   ENUM_12 = 1 Shl 2
   ENUM_13 = 1 Shl 3
EndEnum

Class ABC ' enum in class

    Enum 50 Step 5
       ENUM_14 ' will start at 50
       ENUM_15 ' will be 55
       ENUM_16 ' will be 60
    End

End


Enum POINT
   TA,TB,TC
EndEnum

Enum Option
  INVALID = -1
  NONE = 0
  A = 1
  B = 2
  C = 4
  D = 8
End Enum

Function Main:Int()

    Print ONE
    Print TWO
    Print THREE
    
    Print AA
    Print BB
    Print CC
    Print PP
    Print ZZ
       
    Print ENUM_1
    Print ENUM_2
    Print ENUM_3
    
    Print ENUM_4
    Print ENUM_5
    
    Print ENUM_6
    Print ENUM_7
    Print ENUM_8
    
    Print ENUM_10
    Print ENUM_11
    Print ENUM_12
    Print ENUM_13
    
    Print POINT_TA
    Print POINT_TB
    Print POINT_TC
    
    Print ( Option_A | Option_B )  'Prints 3
    Local everything:Int = Option_A | Option_B | Option_C | Option_D
    Print ( everything )  'Prints 15
    
    If HasFlag(everything, Option_D) Then Print "True" Else Print "False"  'Prints True
    
    Print ABC_ENUM_14 ' Enum in class 
           
    Return 0
End

Function HasFlag?(value:Int, flag:Int)
  Return (value &amp; flag = flag)
End Function
</pre> <br><br></td></tr></table><br>
<a name="2080875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Emil_halim:<br>Using underscore '_' instead dot '.' for named Enums in global space and within classes is not good IMO.<br><br>It should be like this:<br><pre class=code>' Enum in class
    Print ABC.ENUM_14
    Print ABC.ENUM_15
    Print ABC.ENUM_16

' Named Enum in global space
    Print POINT.TA
    Print POINT.TB
    Print POINT.TC

' Named Enum in Class
    Print MyClass.Option.INVALID
    Print MyClass.Option.NONE</pre><br>Here is a run-able code that shows how generated code could look like:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">'
' Anonymous Enum in global space
'
' Enum
'    ONE,TWO,THREE, CC = 15
'    ENUM_1 = CC ' 15
'    ENUM_2
' EndEnum
'
' generated output code:
Const ONE = 0
Const TWO = 1
Const THREE = 2
Const CC = 15
Const ENUM_1 = CC
Const ENUM_2 = 16

'
' Anonymous Enum in global space
'
' Enum 50*10 Step 5*10
'        ENUM_6 ' will start at 500
'        ENUM_7 ' will be 550
'        ENUM_8 ' will be 600
' EndEnum
'
' generated output code:
Const ENUM_6 = 500
Const ENUM_7 = 550
Const ENUM_8 = 600

'
' Anonymous Enum in global space
'
' Enum
'    ENUM_10 = 1 Shl 0
'    ENUM_11 = 1 Shl 1
'    ENUM_12 = 1 Shl 2
'    ENUM_13 = 1 Shl 3
' EndEnum
'
' generated output code:
Const ENUM_10 = 1 Shl 0
Const ENUM_11 = 1 Shl 1
Const ENUM_12 = 1 Shl 2
Const ENUM_13 = 1 Shl 3


'
' Anonymous Enum in class
'
'Class ABC ' enum in class
'    Enum 50 Step 5
'       ENUM_14 ' will start at 50
'       ENUM_15 ' will be 55
'       ENUM_16 ' will be 60
'    End
'End
'
' generated output code:
Class ABC ' enum in class
    Const ENUM_14 = 50
    Const ENUM_15 = 55
    Const ENUM_16 = 60
End

'
' Named Enum in global space
'
' Enum POINT
'    TA,TB,TC
' EndEnum
'
' generated output code:
Class POINT
    Const TA = 0
    Const TB = 1
    Const TC = 2
End

'
' Named Enum in class
'
' Class MyClass
'     Enum Option
'         INVALID = -1
'         NONE = 0
'         A = 1
'         B = 2
'         C = 4
'         D = 8
'     End Enum
' End
'
' generated output code:

Class MyClass
    Global Option:__Enum__MyClass__Option
End

Class __Enum__MyClass__Option ' auto generated enum class
    Const INVALID = -1
    Const NONE = 0
    Const A = 1
    Const B = 2
    Const C = 4
    Const D = 8
End


'
' Main()
'
Function Main:Int()

    Print ONE
    Print TWO
    Print THREE
    
    Print CC
       
    Print ENUM_1
    Print ENUM_2

    Print "-------------"

    Print ENUM_6
    Print ENUM_7
    Print ENUM_8

    Print "-------------"
    
    Print ENUM_10
    Print ENUM_11
    Print ENUM_12
    Print ENUM_13

    Print "-------------"

    ' Enum in class
    Print ABC.ENUM_14
    Print ABC.ENUM_15
    Print ABC.ENUM_16

    Print "-------------"

    ' Named Enum in global space
    Print POINT.TA
    Print POINT.TB
    Print POINT.TC

    Print "-------------"

    ' Named Enum in Class
    Print MyClass.Option.INVALID
    Print MyClass.Option.NONE

    Print "-------------"
    
    Print ( MyClass.Option.A | MyClass.Option.B )  'Prints 3

    Local everything:Int = MyClass.Option.A | MyClass.Option.B | MyClass.Option.C | MyClass.Option.D
    Print ( everything )  'Prints 15
    
    If HasFlag(everything, MyClass.Option.D) Then Print "True" Else Print "False"  'Prints True
               
    Return 0
End

Function HasFlag?(value:Int, flag:Int)
  Return (value &amp; flag = flag)
End Function</textarea> <br><br></td></tr></table><br>
<a name="2080874"></a>

<a name="2080872"></a>

<a name="2080871"></a>

<a name="2080907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> by the way, if it wasn't clear in my earlier post, the primary advantage of declaring a variable to an enum type would be to hint the IDE.  It would of course still be an Int, but the compiler could also optimize it based on the highest enum value available to a shorter type  (like Short / unsigned char / Int8 / Int16), and more advanced IDE's like Jungle can auto-suggest an enumerated member. <br><br></td></tr></table><br>
<a name="2080905"></a>

<a name="2080906"></a>

<a name="2080912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pretty sure optimisation won't happen - any benefits would generally be insignificant, and Monkey is not about super-optimisation anyway.<br><br>[For everything except C++, Monkey is structurally close to the target language - that's why it generates reasonably fast code.  And C++ has structures of every kind, including ones that are reasonably easy to translate Monkey into.]<br><br>Auto-suggestion, yes.  But enums are mostly about giving names to magic numbers.  They are mainly a handy alternative to consts when there is a long sequence of different values required. <br><br></td></tr></table><br>
<a name="2080946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't disagree, but namespaces can start to get long with enums, and it probably wouldn't hurt to have just a tiny bit more sugar to go with them. Auto-suggesting a value the moment an enum's data provider is determined would save some typing of the class name and reduce scope confusion for newbies as well.<br><br>And on a purely subjective personal preference note...Defining enums more like a class than some sort of static struct would be more in line with some the languages that seem to be the inspiration behind monkey's departure from bmax.  C/C++ seem to me to be secondary design inspirations compared to newer languages like c#/vb.net and even java. While in the end they all compile to consts anyway, I'd rather see consistent scoping rules in line with the aforementioned expectation than something resembling a struct or union. <br><br></td></tr></table><br>
<a name="2080922"></a>

<a name="2080923"></a>

<a name="2080944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Nobuyuki:<br>I indeed overlooked that part in your example:<br><div class="quote"> <pre class=code>Enum Option
  INVALID = -1
  NONE = 0
  A = 1
  B = 2
  C = 4
  D = 8
End Enum

Function Main()
  ' ...
  Local everything:Int = Option.A | Option.B | Option.C | Option.D
  Print ( everything )  'Prints 15

  Local currentOption:Option  'Declares as an Enum type
  currentOption = Option.C
  Print currentOption  'Prints 4
  '..</pre> <br></div>I just recognized the first "everything:Int". I see now the second "currentOption:Option" declaration.<br>Thing is, making Enums a full type is more complicated, because you would also need to add some type checks.<br>It is the main reason I wrote my examples only to represent Int and Const values.<br><br>With a full type, the compiler should also check the values, whenever possible. And a full type would need to be<br>supported everywhere, for example in Function/Method arguments:<br><pre class=code>Class MyClass
    Enum Flags
        None
        Dithering
    End Enum

Function Main()

  Local f:MyClass.Flags
  f = MyClass.Flags.Dithering ' OK
  f = 1                       ' OK, same like Dithering
  f = 18                      ' clearly not a valid value for this Enum
  f = x                       ' not check-able most of the time, because Enums are compatible with Int

End

Function LoadBitmap(file:String, f:MyClass.Flags)
    If HasFlag(f, MyClass.Flags.Dithering)
        ' ...
    Else
        ' ...
    Endif
End</pre><br>I agree, this would be very nice. I just think it could be too much for users to implement,<br>and Mark Sibly (who knows Monkey best) is silent and didn't say a word yet what he thinks<br>about enhancing the language itself. There is even more stuff missing in the language,<br>that other, similar cross-platform-tools (like Haxe), support. See Macros, the original<br>topic of the thread.<br>Would be nice to hear something from Mark about it, because it all doesn't make sense<br>if it does not find its way into Monkey X at the end. ;)<br><br>I'm also curious how Mark ticks. Maybe he thinks the core language is already finished?<br>Maybe he is open minded for new suggestions and improvements?<br>I would like to know, because that's also very important for the future of the language.<br>Do we need to do 45 forks, or will he integrate the good stuff into the main distribution, etc..?<br>Is it worth to invest time in Monkey X? Very much depends on the boss, that's why I'm curious<br>what he thinks about it. ;)<br>It is very clear that the users here want to enhance Monkey X to bring it forward...<br><br>There is just some stuff missing that is available with all other languages I know, and<br>I would like to know if it is possible Monkey X gets some of this stuff in the near future, or not. <br><br></td></tr></table><br>
<a name="2080943"></a>

<a name="2080940"></a>

<a name="2080941"></a>

<a name="2080942"></a>

<a name="2080936"></a>

<a name="2080937"></a>

<a name="2080938"></a>

<a name="2080939"></a>

<a name="2080932"></a>

<a name="2080933"></a>

<a name="2080934"></a>

<a name="2080935"></a>

<a name="2080982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Valid point about using classes as scope - personally my enums always have a name with an underscore e.g. COLOUR_BLACK which I suppose is a kind of fake scoping. <br><br></td></tr></table><br>
<a name="2080981"></a>

<a name="2081001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay , this is progress that done.<br><pre class=code>

Enum 
   ONE,TWO,THREE
EndEnum

Enum
   AA,BB=10+4,CC,PP=60,ZZ
   ENUM_1 = 1  ' restart at 1
   ENUM_2 = CC ' 15
   ENUM_3      ' Err should print 16 
End

Enum 20
   ENUM_4 ' will start at 20
   ENUM_5 ' will be 21
End Enum

Enum 50*10 Step 5*10
       ENUM_6 ' will start at 500
       ENUM_7 ' will be 550
       ENUM_8 ' will be 600
EndEnum

Enum
   ENUM_10 = 1 Shl 0
   ENUM_11 = 1 Shl 1
   ENUM_12 = 1 Shl 2
   ENUM_13 = 1 Shl 3
EndEnum

Class ABC ' enum in class

    Enum 50 Step 5
       ENUM_14 ' will start at 50
       ENUM_15 ' will be 55
       ENUM_16 ' will be 60
    End
 
   Enum DEF 
       ENUM_17  
       ENUM_18 
       ENUM_19 
  End  
End

Enum POINT
   TA,TB,TC
EndEnum

Enum Option
  INVALID = -1
  NONE = 0
  A = 1
  B = 2
  C = 4
  D = 8
End Enum

Function Main:Int()

    Print ONE
    Print TWO
    Print THREE
    
    Print AA
    Print BB
    Print CC
    Print PP
    Print ZZ
       
    Print ENUM_1
    Print ENUM_2
    Print ENUM_3
    
    Print ENUM_4
    Print ENUM_5
    
    Print ENUM_6
    Print ENUM_7
    Print ENUM_8
    
    Print ENUM_10
    Print ENUM_11
    Print ENUM_12
    Print ENUM_13
    
    Print POINT.TA
    Print POINT.TB
    Print POINT.TC
    
    Print ( Option.A | Option.B )  'Prints 3
    Local everything:Int = Option.A | Option.B | Option.C | Option.D
    Print ( everything )  'Prints 15
    
    If HasFlag(everything, Option.D) Then Print "True" Else Print "False"  'Prints True
       
    Print ABC.ENUM_14 ' Enum in class 
    
    Print ABC.ENUM_19 ' Err must be  ABC.DEF.ENUM_19 
    
    Local currentOption:Option  'Declares as an Enum type
   ' currentOption = Option.C   ' Err connot convert from Int to Option 
   ' Print currentOption  'Prints 4
               
    Return 0
End

Function HasFlag?(value:Int, flag:Int)
  Return (value &amp; flag = flag)
End Function
</pre> <br><br></td></tr></table><br>
<a name="2081054"></a>

<a name="2081056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to make sure this works, too:<br><pre class=code>Enum Option 50*10 Step 5*10
       ENUM_6 ' will start at 500
       ENUM_7 ' will be 550
       ENUM_8 ' will be 600
EndEnum</pre><br>So Syntax would be:<br><pre class=code>Enum [ [Name] [StartValue [Step StepValue]] ]</pre> <br><br></td></tr></table><br>
<a name="2081076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> done , <br><pre class=code>
Enum OptionExt 50*10 Step 5*10
       ENUM_6 ' will start at 500
       ENUM_7 ' will be 550
       ENUM_8 ' will be 600
EndEnum

Function Main:Int()
    Print OptionExt.ENUM_8   'print 600
               
    Return 0
End
</pre><br><br>but still have 3 issues.<br><pre class=code>
==========================
Enum
   AA,BB=10+4,CC,PP=60,ZZ
   ENUM_1 = 1  ' restart at 1
   ENUM_2 = CC ' 15
   ENUM_3      ' Err should print 16   &lt;&lt;&lt;-------------------
End
========================== 
     Print ABC.ENUM_19 ' Err must be  ABC.DEF.ENUM_19 
==========================
     Local currentOption:Option  'Declares as an Enum type
     currentOption = Option.C   ' Err connot convert from Int to Option 
</pre> <br><br></td></tr></table><br>
<a name="2081085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>just started to support float type Enum.<br>only simple stuff till now.<br><br>Example<br><pre class=code>
Enum :Float
    F1,F2,F3   ' 0.0 ,1.0 , 2.0
End 

Function Main:Int()
     Print F1
     Print F2
     Print F3
               
   Return 0
End
</pre> <br><br></td></tr></table><br>
<a name="2081183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all<br><br>while taking a rest of making Enum KeyWord , i created this<br> <br><pre class=code>

?Win32
     Const My_OS:String = "Win32"
?MacOS
     Const My_OS:String = "MacOS"
?Linux
     Const My_OS:String = "Linux"
?

Const My_Sys:String = "My system is "
 
Function Main:Int()

   Print My_Sys + My_OS
   
   Return 0
End
</pre><br><br>prints that   "My system is Win32" <br><br></td></tr></table><br>
<a name="2081256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all ,<br><br>also this add<br><pre class=code>
?Win32
     Const My_OS:String = "Win32"
?MacOS
     Const My_OS:String = "MacOS"
?Linux
     Const My_OS:String = "Linux"
?

Const My_Sys:String = "My system is "

?DeskTop
   Const My_target:String = "monkey game for win32,mac,lunix"
?CppTool
   Const My_target:String = "monkey tool"
?Html
   Const My_target:String = "monkey net browser"      
? 

Global my_var : Int = 10
  

Function Main:Int()

   Print My_Sys + My_OS
   
   Print "Target is " + My_target
   
   ?Release
     
   ?Debug
      Print my_var
   ? 
   
   Return 0
End
</pre><br><br>Here is the first release of MonkeyExt , please backup your old one please.<br><a href="http://bcxdx.spoilerspace.com/Monkey/Tranc_EXT_02.zip" target="_blank">http://bcxdx.spoilerspace.com/Monkey/Tranc_EXT_02.zip</a> <br><br></td></tr></table><br>
<a name="2081345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>I have found a small conflict with my last Ext. <br>i added "?" as a symbol  so monkey toker will pares it as a token , and in box classes there is a function name "Equal?" , when toker pares this name will split it into two tokens "Equal" and "?".<br><br>so that i modified "?" to be "??" symbol.<br><br>here is the new release of MonkeyExt , included source code , for easy access search for '----Ext---- then you will find my code.<br><br> <a href="http://bcxdx.spoilerspace.com/Monkey/Tranc_EXT_02a.zip" target="_blank">http://bcxdx.spoilerspace.com/Monkey/Tranc_EXT_02a.zip</a> <br><br></td></tr></table><br>
<a name="2081350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> The os module already has this functionality; if you're determining os in preprocessor then you should probably consider using existing preprocessor syntax.. <br><br></td></tr></table><br>
<a name="2081471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks Nobuyuki for your hint.<br>i was having no idea about os functions , i will remove mine. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
