<!DOCTYPE html><html lang="en" ><head ><title >Is there a preprocessor for OUYA ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Is there a preprocessor for OUYA ?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Is there a preprocessor for OUYA ?</a><br><br>
<a name="2068626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a preprocessor TARGET for OUYA ? - checking the source it seems to be just using "android" ?<br><br><br>/Stu <br><br></td></tr></table><br>
<a name="2068646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats it. OUYA is based on Android Jelly Bean 4.1. The only parts OUYA added are the controllers and their IAP, which all 4 work beautifully using Monkey v75d :) <br><br></td></tr></table><br>
<a name="2068649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yea but i was thinking we need to detect if the screen is touch or not,  i.e. menu handling changes to use up/down to move thru choices etc ...<br><br><br>/Stu <br><br></td></tr></table><br>
<a name="2068654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Literally just about to come over to make exactly the same request!<br>I'm about to add a "public global IsOuya=1" to the top of my proggy.  Would be handy if we could somehow distinguish between Ouya and Standard, whilst keeping the TARGET stuff the same.  Perhaps if we could gain access to TARGET_NAME in the preprocessor, we could do some extra juicy stuff without breaking previously made differences. <br><br></td></tr></table><br>
<a name="2068655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh yeah, I TOTALLY agree with you both! +1 on TARGET_NAME.<br><br>It would be so much easier to be able to distiguish any target that way in addition to just the TARGET. <br><br></td></tr></table><br>
<a name="2068659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> you could add #TARGET_NAME="ouya" in the CONFIG.MONKEY.<br>also, the Ouya CONFIG.MONKEY needs to have the gamepad enabled (it's off by default). <br><br></td></tr></table><br>
<a name="2068660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe it already has #TARGET_NAME="Android (Ouya) Game" in the TARGET.MONKEY file. The problem is that you can't use #TARGET_NAME as a preprocessor directive. <br><br>I'll play with putting the directive in the CONFIG.MONKEY file though. Maybe it will work from there? I'll try it out tonight. <br><br></td></tr></table><br>
<a name="2068662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> true, but you could add "#OUYA=true". <br><br></td></tr></table><br>
<a name="2068675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did not think you could use/make customized preprocessor directives like that in monkey. I tried doing that and worked well :) Thanks for that tip Adam! <br><br></td></tr></table><br>
<a name="2068709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm not new to this, but your tip left me baffled.<br>Care to explain that a bit!?<br><br>I've added #OUYA=True into config.monkey, but... then what!?!<br><br>Currently using the following code for testing..<br><pre class=code>
#If TARGET="android"
   Crash()
#End
</pre><br><br>(where Crash isn't defined, so the compiler will stop when either of the Android targets are selected.)<br>If you could explain how I could make that OUYA specific, that'd be great. <br><br></td></tr></table><br>
<a name="2068715"></a>

<a name="2068716"></a>

<a name="2068717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Should be able to use it the same manner:<br><br><pre class=code>
#If OUYA
   Crash()
#End
</pre><br><br>I made a simple test:<br><pre class=code>
' This will actually be in the CONFIG.MONKEY for the android_ouya target
' For demonstration purposes I added it here
#OUYA=True

Import mojo

Class MyApp Extends App

	Method OnCreate()
		SetUpdateRate 15
	End
	
	Method OnUpdate()
	End
	
	Method OnRender()
		Scale DeviceWidth/400.0,DeviceHeight/440.0
		Cls
		#If OUYA
			DrawText "     OUYA is True",20,0
		#Else
			DrawText "     OUYA is False",20,0
		#End
	End

End

Function Main()

	New MyApp
	
End
</pre><br><br>This will work on ANY platform. I tested this on HTML5 for this demonstration, so what Adam provided is EXTREMELY cool :)<br><br>If you place the directive in the app code, then you will need to set it to False manually to use the code on other platforms than the OUYA. If it's in the CONFIG.MONKEY file, its set and forget. Just use it like you would with any other preprocessor directive :)<br><br>AGAIN, THANKS ADAM! <br><br></td></tr></table><br>
<a name="2068714"></a>

<a name="2068712"></a>

<a name="2068713"></a>

<a name="2068720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, that's pretty much how I thought it would work.<br><br>..  So, it's good to know that it actually isn't physically working, then.<br><br><pre class=code>
#OUYA=True
#If OUYA
   Crash()
#End
</pre><br><br>Does indeed work, but if I, instead, put the #OUYA=True into Config.Monkey it point blank stops working.<br><br><br>Sod it, I'm going with the "Const isOuya=1" method, at least I know that works..<br>Additionally, beware the overscan, guys! <br><br></td></tr></table><br>
<a name="2068723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> To my knowledge, the Config.Monkey file is only translated once when you build it the first time. To have the chances to it effect your app, you need to delete the build folder. At least it was like that some versions ago. <br><br></td></tr></table><br>
<a name="2068728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think that has changed any Mike. I forgot to mention that you'd need to delete the build :) <br><br></td></tr></table><br>
<a name="2068727"></a>

<a name="2068782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> +9999 to #TARGET_NAME in code. I have a semi-working FirefoxOS target, just needing this... <br><br></td></tr></table><br>
<a name="2068788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, like ElectricBoogaloo, I have tried this on the OUYA (since I got back home and in front of it). Simply adding #OUYA=True to the CONFIG.MONKEY doesn't do ANYTHING - even after blowing away the BUILD folder and re-compiling the project.<br><br>That said, if I simply add it to the TOP of my main file, it does work for the entire app :) It does somewhat suck in that I now need to set it to True or False, but thats far better than having a variable that adds more code bulk to the compiled game overall. I think I can live with that. Its not that big a problem.<br><br>Even with this found, I would ideally love to still see access to #TARGET_NAME in code. <br><br></td></tr></table><br>
<a name="2068853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sensei</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> +1 on the #TARGET_NAME suggestion. <br>Monkey forums needs a voting platform for ideas IMO :) <br><br></td></tr></table><br>
<a name="2070606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >caffeinekid</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also please add being able to grab the user name of the OUYA account (and also Google account please) as this would be very useful for online high scores so that one person doesn't fill up a board and they have one entry each. Thanks :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
