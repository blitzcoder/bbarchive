<!DOCTYPE html><html lang="en" ><head ><title >How To Make Circle Progress Bar</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How To Make Circle Progress Bar</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >How To Make Circle Progress Bar</a><br><br>
<a name="2100814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alex</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello, has anyone made a circle progress bar?<br>Like this.<br><img src="http://i.stack.imgur.com/Pz1Lr.png"><br><br>If so, please, share your method here.<br>Thanks! <br><br></td></tr></table><br>
<a name="2100811"></a>

<a name="2100812"></a>

<a name="2100813"></a>

<a name="2100817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Most common approach is to have two images: the empty circle, and the full circle.<br>Next step is to get a "draw textured poly" from somewhere (if not available in mojo...).<br>Then just draw the portions according to "simple" calculations (percentage of a circle). <br><br>The text of course is just drawn "centered" to the center of the circle.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="2100851"></a>

<a name="2100852"></a>

<a name="2100853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check circularprogressbar.monkey from <a href="http://www.monkey-x.com/Community/posts.php?topic=6132" target="_blank">SimpleUI</a>...  It's an image-based solution which doesn't rely on drawing a textured poly or any specific shapes or graphical extensions to work, since it uses the default scissor rectangles and tricky rotating to do its job. <br><br></td></tr></table><br>
<a name="2100878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Before going asleep  I thought about using viewports and a "quarter circle" approach too. But without knowing much about matrix operations (and available commands in Monkey-X) I only was able to code something for repeatable things because I was not able to imagine a way to rotate a quarter circle around the center point with keeping pixels at their desired spots. <br>Seems your solution solved what my mind was to sleepy for :p. Will have to check that out for "BlitzMax" (of course the matrix stuff is not abstracted that nicely there) somewhen. Thanks for pointing to your nifty solution.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="2100884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Two semicircles, one empty and one filled, combined with image rotation should do it,  Whichever one is larger will be drawn twice to cover the appropriate arc. <br><br></td></tr></table><br>
<a name="2100894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @gerry<br>When doing "overdrawing" you will have alpha'd pixels drawn overlayed - which makes them more opaque (especially for things containing semitransparency - like "glass bulbs" for health/mana).<br><br>In all cases you should avoid drawing things overlayed ....  Or did I misunderstood things?<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="2100905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alex</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you guys!<br><br>2 Nobuyuki<br>Many thanks! Cool idea, works for me like a charm!<br><br>Cheers! <br><br></td></tr></table><br>
<a name="2100958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are right about the alpha pixels, I guess.  The poly solution would be better but anyway it seems you have a better answer. <br><br></td></tr></table><br>
<a name="2100970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I probably would have done it with trig functions and some sort of drawpoly, or even a thick drawline as shown elsewhere on this site (the very early Asteroids demo had it.) <br><br></td></tr></table><br>
<a name="2100987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about drawline and sin/cos?<br><br>To replicate the graphic above, you draw a blue circle, then a smaller black circle. <br>Then you draw lines in a loop from circle center to radius + cos(0 to angle), sin(0  to angle) <br>Draw again a blue circle, and a smaller black one - and thats it. <br><br></td></tr></table><br>
<a name="2100988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here, just did it as an exercise:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo

Class Game Extends App
	Field angle:Float
	
	Method OnCreate()
		SetUpdateRate 60
		angle = 0
	End Method
	
	Method OnRender()
		SetBlend AlphaBlend
		SetColor 0,64,255
		DrawCircle 100,100,53
		SetColor 0,0,128
		DrawCircle 100,100,51
		
		SetColor 0,0,255
		If angle &gt; 360 Then angle=360
		For Local a:Float = 0 To angle Step .5
			DrawLine 100,100, 100 + 50*Cos(a-90), 100 + 50*Sin(a-90)
		Next
		
		SetColor 0,64,255
		DrawCircle 100,100,40
		SetColor 0,0,128
		DrawCircle 100,100,38
		
		Local str:String = String(Int((angle / 360.0) * 100)) + "%"
		SetColor 255,255,255
		DrawText str, 103 - (TextWidth(str)/2.0), 94

	End Method
	
	Method OnUpdate()
		angle += 1
	End Method
End Class

Function Main()
	New Game()
End Function
</textarea> <br><br></td></tr></table><br>
<a name="2101004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> i think most people will more enjoy creating two image assets (empty and full) and use an image based approach than drawing multiple small lines (I think they might even be "slower" than blitting the image textures). Also I doubt that "lines" are that smooth (round + anti-aliased) as the images are (except you draw a line for nearly each pixel ...and even then you will have some "jiggering").<br><br>Nice to have simple examples, but the "rotation + scissor + image" will certainly fit the best in _most_ cases.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="2101008"></a>

<a name="2101009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The lines of a polygon can be generated automatically according to a fairly simple formula, and the numbers won't be too great so long as the circular 'walls' are thick enough that each line segment is a few pixels long. <br><br></td></tr></table><br>
<a name="2101024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You guys know that lines in Monkey (maybe not in HTML5, but on every other target) are just empty polygons, right?<br><br>You can indeed optimize this by just using drawpoly - but since drawpoly uses triangles, it will be a little more complicated than that example I've made in 5 minutes. <br><br></td></tr></table><br>
<a name="2101100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one, SLotman! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
