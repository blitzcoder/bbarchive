<!DOCTYPE html><html lang="en" ><head ><title >Same Rnd() on all targets?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Same Rnd() on all targets?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Same Rnd() on all targets?</a><br><br>
<a name="2068234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a guarantee, that Rnd() produces the same row of numbers on all targts if I use the same Seed?<br><br>In a multiplayer game I need the same row of random numbers on all targets. The first player decide the "seed" and sends it to the other players. The seed is used to produce a row of 250 numbers needed in the game. Of course I must guarantee, that all targets use the same row of numbers. <br><br></td></tr></table><br>
<a name="2068243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >programmer</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there a guarantee <br></div> You could try to implement custom PRNG like <a href="http://en.wikipedia.org/wiki/Mersenne_twister" target="_blank">http://en.wikipedia.org/wiki/Mersenne_twister</a><br><br><i>(edited)</i> <br><br></td></tr></table><br>
<a name="2068238"></a>

<a name="2068247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use this:<br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1568#14494" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=1568#14494</a><br><br>- Gerry Quinn <br><br></td></tr></table><br>
<a name="2068250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> SpikeDislike2, Hoppy Bobby and BlastTrax all use static random seeds to generate their levels.<br>They appear to be generating identical levels on GLFW (Windows), iOS, Android and HTML5 targets.<br><br>99% workable, I'd say, but maybe add a small amount of checking, to be certain.  Should be alright for most stuff. <br><br></td></tr></table><br>
<a name="2068254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for the responses... but I'm not yet searching for a replacement for the original function.  <br><br>I would prefer not to add any third party code, but use the original function.<br><br>I only would like to know if anybody already made negativ experiences with Rnd(). Or somebody, who did already tests on this... <br><br></td></tr></table><br>
<a name="2068264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It uses the same algorithm so I don't see why it should generate different results on different platforms. <br><br></td></tr></table><br>
<a name="2068286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Midimaster:  If you check, the Rnd() function is based in pure monkey, and while it isn't very good at providing a "consistently random" distribution of values, it <i>should</i> produce consistent results across platforms.  I say <i>should</i>, because I forget whether or not Shr is left up to the implementing platform as to whether it is an arithmetic shift.  I believe an arithmetic right shift is forced on all platforms, since unsigned ints are not part of Monkey.<br><br>In fact, probably the main reason a better PRNG like mersenne twister wasn't used was due to this... <br><br></td></tr></table><br>
<a name="2068313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bazmonkey</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems the same across the platforms I use (Flash, iOS, html5), but I did have this concern also. <br>I agree it would be nice to know officially if this is the case. <br><br></td></tr></table><br>
<a name="2068308"></a>

<a name="2068323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about machines with different floating point width?<br><br>My int-based rand() above would give different results on 64-bit platforms if I did not force the seed to a 32-bit value.<br><br>But as for using Rnd(), I haven't seen it but I simply didn't really trust a floating point randomiser that I didn't understand, and not long after I did this a bug came out in Rnd() though it has since been fixed...  So I made a clone of the MSVC function which I knew was satisfactory. <br><br></td></tr></table><br>
<a name="2068321"></a>

<a name="2068322"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
