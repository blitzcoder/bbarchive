<!DOCTYPE html><html lang="en" ><head ><title >Monk or ted don't seem to be importing mojo</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Monk or ted don't seem to be importing mojo</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Monk or ted don't seem to be importing mojo</a><br><br>
<a name="2034793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gstrekkie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm not sure why this started happening but I keep getting the error "Type 'App' not found" when building/running any project that imports mojo. the console output at the bottom of ted reads below.<br><br>"/Applications/MonkeyPro/bin/trans_macos" -target=html5 -config=Debug -run "/Volumes/Data/Monkey Projects/Billiards/Billiards.monkey"<br>TRANS monkey compiler V1.36<br>Parsing...<br>Semanting...<br>/Volumes/Data/Monkey Projects/Billiards/Billiards.monkey&lt;8&gt; : Error : Type 'App' not found<br>Done.<br><br>the error is occurring at <br><br><br>Import mojo<br><br>Global Circles:List &lt;circle&gt;<br><br>Class Pool Extends App   &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;compile stops here.<br><br><br><br>i have verified that mojo exists in the modules Directory and I have even recopied the folder as well. additionally I checked to see if ted is pointing to the monkey directory and it is. I'm currently  running on a Mac pro  with 10.7.4 any thoughts on this would be appreciated. <br><br></td></tr></table><br>
<a name="2034796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> which version of monkey are you using?<br>have you updated to the latest version? <br><br></td></tr></table><br>
<a name="2034797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gstrekkie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> it is version 60 from about a month ago <br><br></td></tr></table><br>
<a name="2034808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you redownload Monkey and put it in another location (eg MonkeyPro60) and try again from fresh? <br><br></td></tr></table><br>
<a name="2034810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gstrekkie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will give that a try <br><br></td></tr></table><br>
<a name="2034811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gstrekkie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still not working.. is it possible that updating to 10.7.4 caused something to break?<br>is it advisable to edit some config files or something? <br><br></td></tr></table><br>
<a name="2034813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> do any of the demos that come with monkey work? <br><br></td></tr></table><br>
<a name="2035325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gstrekkie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> sorry for delay was traveling a few days. anyway the demos do indeed work and I tried to copy them to the same directory I have the other projects in and the demos still work. Curiouser and Curiouser... <br><br></td></tr></table><br>
<a name="2035326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you create a small mojo example?<br><br>For example:<br>[monkeycode]Strict<br><br>Import mojo<br><br>Function Main:Int()<br>	New MojoApp()<br>	Return 0<br>End<br><br>Class MojoApp Extends App<br>	Method OnCreate:Int()<br>		SetUpdateRate(30)<br>		Return 0<br>	End<br>	<br>	Method OnUpdate:Int()<br>		Return 0<br>	End<br>	<br>	Method OnRender:Int()<br>		DrawText("Hello Mojo", 10, 10)<br>		Return 0<br>	End<br>End[/monkeycode]<br>Does this work? <br><br></td></tr></table><br>
<a name="2035535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gstrekkie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> that particular example worked and oddly enough I tried placing the strict directive at the beginning and this caused the error to change as a result I removed the strict directive and Viola ! it compiled and ran. not sure why this would occur but i will include the source I was using below. <br><br></td></tr></table><br>
<a name="2035906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gstrekkie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80"> 

' By Joseph 'Phish' Humfrey

Import mojo

Global Circles:List &lt;circle&gt;

Class Pool Extends App

	Method OnCreate ()
		SetUpdateRate 60
		Circles = New List &lt;circle&gt;
		Seed = Millisecs ()
		Setup
	End

	Method OnUpdate ()

		UpdateCirclePhysics

		If MouseHit ()

			For Local c:circle = Eachin Circles
				Circles.Clear
			Next

			Setup

		Endif
		
	End

	Method OnRender ()

		Cls
		
		RenderCircles()
		
		DrawText "Press a mouse button to reset.", 10, 10
		DrawText "Press Esc to exit.", 10, 25

	End

End




'------------------------------------------
' Main DATA Class
'------------------------------------------
' This exact Class isn't supposed to be used
' Instead, you should use some of the fields
' in your own Class, Or just use this one
' For reference, To see what each Field does
Class circle
	Field x#, y#		'position
	Field dx#, dy#		'x And y speeds
	
	Field radius#		'radius of circle
	Field mass#			'mass of circle
End


'------------------------------------------
' SET UP BALLS INTO A POOL STYLE ARRANGEMENT
' For DEMO
'------------------------------------------
Function Setup ()

	Local ballTriangleSize=5

	For Local xloop = ballTriangleSize To 1 Step -1
		For Local yloop = 1 To xloop
			Local c:circle = New circle
			c.x = (5-xloop)*27 + 200
			c.y = yloop*31-(xloop*31)/2.0 + 300
			c.dx=0
			c.dy=0
			c.radius = 15
			c.mass = 50
			Circles.AddLast c
		Next
	Next

	'Cue ball (smaller so you know which it is :)
	Local cue:circle = New circle
	cue.x = 800
	cue.y = 300 +20
	cue.dx = -20
	cue.dy = Rnd(4)-2
	cue.radius = 14
	cue.mass = 50
	Circles.AddLast cue

End

Function Main ()
	New Pool
End









'------------------------------------------
Function UpdateCirclePhysics()
'------------------------------------------
' This is the Main physics Function For the
' circles. It contains the very basic
' movement physics as well as the collision
' response code.
'------------------------------------------

	For Local c:circle = Eachin Circles
	
		'update positions
		c.x=c.x+c.dx
		c.y=c.y+c.dy
		
		'gradually slow down
		c.dx=c.dx*0.99
		c.dy=c.dy*0.99
		
		'------------------------------------------
		'COLLISION CHECKING
		'------------------------------------------
		' Check each circle in the loop against
		' every other (c against c2)
		For Local c2:circle = Eachin Circles
		
			Local collisionDistance# = c.radius+c2.radius
			Local actualDistance# = Sqrt(Pow(c2.x-c.x, 2)+Pow(c2.y-c.y, 2))
			
			'Collided Or Not?
			If actualDistance&lt;collisionDistance Then
				
				Local collNormalAngle#=ATan2(c2.y-c.y, c2.x-c.x)

				'Position exactly touching, no intersection
				Local moveDist1#=(collisionDistance-actualDistance)*(c2.mass/Float((c.mass+c2.mass)))
				Local moveDist2#=(collisionDistance-actualDistance)*(c.mass/Float((c.mass+c2.mass)))
				c.x=c.x + moveDist1*Cos(collNormalAngle+180)
				c.y=c.y + moveDist1*Sin(collNormalAngle+180)
				c2.x=c2.x + moveDist2*Cos(collNormalAngle)
				c2.y=c2.y + moveDist2*Sin(collNormalAngle)
				
				
				'------------------------------------------
				'COLLISION RESPONSE
				'------------------------------------------
				'n = vector connecting the centers of the circles.
				'we are finding the components of the normalised vector n
				Local nX#=Cos(collNormalAngle)
				Local nY#=Sin(collNormalAngle)
				
				'now find the length of the components of each movement vectors
				'along n, by using dot product.
				Local a1# = c.dx*nX  +  c.dy*nY
				Local a2# = c2.dx*nX +  c2.dy*nY
				
				'optimisedP = 2(a1 - a2)
				'             ----------
				'              m1 + m2
				Local optimisedP# = (2.0 * (a1-a2)) / (c.mass + c2.mass)
				
				'now find out the resultant vectors
				'r1 = c1.v - optimisedP * mass2 * n
				c.dx = c.dx - (optimisedP*c2.mass*nX)
				c.dy = c.dy - (optimisedP*c2.mass*nY)
				
				'r2 = c2.v - optimisedP * mass1 * n
				c2.dx = c2.dx + (optimisedP*c.mass*nX)
				c2.dy = c2.dy + (optimisedP*c.mass*nY)

			End If

		Next
		'------------------------------------------
		'------------------------------------------
		
		
		'Simple Bouncing off walls.
		If c.x&lt;c.radius Then
			c.x=c.radius
			c.dx=c.dx*-0.9
		End If
		If c.x&gt;DeviceWidth()-c.radius Then
			c.x=DeviceWidth()-c.radius
			c.dx=c.dx*-0.9
		End If
		If c.y&lt;c.radius Then
			c.y=c.radius
			c.dy=c.dy*-0.9
		End If
		If c.y&gt;DeviceHeight()-c.radius Then
			c.y=DeviceHeight()-c.radius
			c.dy=c.dy*-0.9
		End If
		
	Next

End





'------------------------------------------
Function RenderCircles()
'------------------------------------------
' Simple Function draws all the circles
' on the screen.
'------------------------------------------

	For Local c:circle = Eachin Circles
		If c.radius=15 Then SetColor 200, 50, 50 Else SetColor 255, 255, 255
		DrawOval c.x-c.radius, c.y-c.radius, c.radius*2, c.radius*2
	Next
	
End

</textarea> <br><br></td></tr></table><br>
<a name="2035905"></a>

<a name="2035904"></a>

<a name="2035536"></a>

<a name="2035538"></a>

<a name="2035539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  I tried placing the strict directive at the beginning and this caused the error to change as a result I removed the strict directive and Viola  <br></div><br>Are you saying your code now compiles okay?<br><br>BTW edit you previous post and wrap your code in [ codebox ] [ /codebox ] tags (without the spaces). <br><br></td></tr></table><br>
<a name="2035553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reason it doesn't work when Strict is on is because you're not declaring the types for your methods/functions.<br><br>eg:<br><pre class=code>
Method OnCreate:Int()
Function RenderCircles:Void()</pre><br>For each function, you need to determine its type based on what it returns.<br>:int (function returns integer)<br>:float (function returns float)<br>:void (function returns nothing)<br>:bool (function returns TRUE or FALSE)<br><br>An exception is your main() function, which MUST be an INT. Actually, all the built-in methods must be int. OnUpdate(), OnCreate(), OnRender() and any others that escape my attention.<br><br>Your variables are also missing :int :float, etc, although some have # which substitutes for :float. Example:<br><pre class=code>Local ballTriangleSize:int = 5
For Local xloop:int = ballTriangleSize To 1 Step - 1
For Local yloop:int = 1 To xloop</pre><br>Finally, your code fixed, with Strict enabled.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import mojo

Global Circles:List &lt;circle&gt;

Class Pool Extends App

Method OnCreate:Int()
SetUpdateRate 60
Circles = New List &lt;circle&gt;
Seed = Millisecs ()
Setup
Return 0
End

Method OnUpdate:Int()

UpdateCirclePhysics()

If MouseHit ()

For Local c:circle = Eachin Circles
Circles.Clear
Next

Setup

Endif
Return 0
End

Method OnRender:Int()

Cls

RenderCircles()

DrawText "Press a mouse button to reset.", 10, 10
DrawText "Press Esc to exit.", 10, 25
Return 0
End

End




'------------------------------------------
' Main DATA Class
'------------------------------------------
' This exact Class isn't supposed to be used
' Instead, you should use some of the fields
' in your own Class, Or just use this one
' For reference, To see what each Field does
Class circle
Field x#, y# 'position
Field dx#, dy# 'x And y speeds

Field radius# 'radius of circle
Field mass# 'mass of circle
End


'------------------------------------------
' SET UP BALLS INTO A POOL STYLE ARRANGEMENT
' For DEMO
'------------------------------------------
Function Setup:Void()

Local ballTriangleSize:int = 5

For Local xloop:int = ballTriangleSize To 1 Step - 1
For Local yloop:int = 1 To xloop
Local c:circle = New circle
c.x = (5-xloop)*27 + 200
c.y = yloop*31-(xloop*31)/2.0 + 300
c.dx=0
c.dy=0
c.radius = 15
c.mass = 50
Circles.AddLast c
Next
Next

'Cue ball (smaller so you know which it is :)
Local cue:circle = New circle
cue.x = 800
cue.y = 300 +20
cue.dx = -20
cue.dy = Rnd(4)-2
cue.radius = 14
cue.mass = 50
Circles.AddLast cue

End

Function Main:Int()
	New Pool
	Return 0
End









'------------------------------------------
Function UpdateCirclePhysics:Void()
'------------------------------------------
' This is the Main physics Function For the
' circles. It contains the very basic
' movement physics as well as the collision
' response code.
'------------------------------------------

For Local c:circle = Eachin Circles

'update positions
c.x=c.x+c.dx
c.y=c.y+c.dy

'gradually slow down
c.dx=c.dx*0.99
c.dy=c.dy*0.99

'------------------------------------------
'COLLISION CHECKING
'------------------------------------------
' Check each circle in the loop against
' every other (c against c2)
For Local c2:circle = Eachin Circles

Local collisionDistance# = c.radius+c2.radius
Local actualDistance# = Sqrt(Pow(c2.x-c.x, 2)+Pow(c2.y-c.y, 2))

'Collided Or Not?
If actualDistance&lt;collisionDistance Then

Local collNormalAngle#=ATan2(c2.y-c.y, c2.x-c.x)

'Position exactly touching, no intersection
Local moveDist1#=(collisionDistance-actualDistance)*(c2.mass/Float((c.mass+c2.mass)))
Local moveDist2#=(collisionDistance-actualDistance)*(c.mass/Float((c.mass+c2.mass)))
c.x=c.x + moveDist1*Cos(collNormalAngle+180)
c.y=c.y + moveDist1*Sin(collNormalAngle+180)
c2.x=c2.x + moveDist2*Cos(collNormalAngle)
c2.y=c2.y + moveDist2*Sin(collNormalAngle)


'------------------------------------------
'COLLISION RESPONSE
'------------------------------------------
'n = vector connecting the centers of the circles.
'we are finding the components of the normalised vector n
Local nX#=Cos(collNormalAngle)
Local nY#=Sin(collNormalAngle)

'now find the length of the components of each movement vectors
'along n, by using dot product.
Local a1# = c.dx*nX + c.dy*nY
Local a2# = c2.dx*nX + c2.dy*nY

'optimisedP = 2(a1 - a2)
' ----------
' m1 + m2
Local optimisedP# = (2.0 * (a1-a2)) / (c.mass + c2.mass)

'now find out the resultant vectors
'r1 = c1.v - optimisedP * mass2 * n
c.dx = c.dx - (optimisedP*c2.mass*nX)
c.dy = c.dy - (optimisedP*c2.mass*nY)

'r2 = c2.v - optimisedP * mass1 * n
c2.dx = c2.dx + (optimisedP*c.mass*nX)
c2.dy = c2.dy + (optimisedP*c.mass*nY)

End If

Next
'------------------------------------------
'------------------------------------------


'Simple Bouncing off walls.
If c.x&lt;c.radius Then
c.x=c.radius
c.dx=c.dx*-0.9
End If
If c.x&gt;DeviceWidth()-c.radius Then
c.x=DeviceWidth()-c.radius
c.dx=c.dx*-0.9
End If
If c.y&lt;c.radius Then
c.y=c.radius
c.dy=c.dy*-0.9
End If
If c.y&gt;DeviceHeight()-c.radius Then
c.y=DeviceHeight()-c.radius
c.dy=c.dy*-0.9
End If

Next

End





'------------------------------------------
Function RenderCircles:Void()
'------------------------------------------
' Simple Function draws all the circles
' on the screen.
'------------------------------------------

For Local c:circle = Eachin Circles
If c.radius=15 Then SetColor 200, 50, 50 Else SetColor 255, 255, 255
DrawOval c.x-c.radius, c.y-c.radius, c.radius*2, c.radius*2
Next

End 
</textarea><br><br>It's a good idea to keep Strict on whenever possible. :)<br><br>+BlackD <br><br></td></tr></table><br>
<a name="2035552"></a>

<a name="2035551"></a>

<a name="2035547"></a>

<a name="2035548"></a>

<a name="2035549"></a>

<a name="2035550"></a>

<a name="2035546"></a>

<a name="2035543"></a>

<a name="2035544"></a>

<a name="2035545"></a>

<a name="2035559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> OT: Welcome BlackD to Monkey... I'm guessing you are BlackD from TOG, as Samah recalls talking to you about BlitzMax :) (I'm DangerMouse on TOG) <br><br></td></tr></table><br>
<a name="2035566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! Haha, yeah - one and the same. :) Finally trying to get my Monkey on to start making my mark on the mobile world. ^^ Or at the very least, to get some Flash games up on my currently empty website. :) <br><br></td></tr></table><br>
<a name="2035908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gstrekkie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry I didnt use the [ codebox ] in the body that I posted. I was windering how everyone was doing that and I thank everyone for their valuable insights I'm not sure why the code began working seemingly in a spontaneous manner other than the obvious error I got when merely adding strict to the top the code remained unchanged and began working  the way it should once I removed the offending "Strict" mode. so all is well in the monkey universe now.  Now I can get back to learning.... <br><br></td></tr></table><br>
<a name="2035907"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
