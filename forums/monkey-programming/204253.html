<!DOCTYPE html><html lang="en" ><head ><title >Non-Blocking AI Routine</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Non-Blocking AI Routine</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Non-Blocking AI Routine</a><br><br>
<a name="2045538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dylan at sea</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br><br>I'd like to ask for suggestions on the best method to proceed. I'm porting an old game to Monkey in order to learn Monkey better. My game has an AI that uses a Minimax tree (well, actually Maximin tree, since it's not zero-sum) to determine what move to make. Additionally, it builds the tree recursively. The problem lies in that the AI routine can theoretically take seconds to complete, which means that rendering/updating would be blocked during that time.<br><br>On another platform, I might create a worker thread to do the work, but not all Monkey targets support that approach, and I'm not sure Monkey is mature enough for that route yet.<br><br>I thought of implementing it via an asynchronous/timesliced ("DoWork()") method, but I think I would have to convert my existing recursive algorithm into an iterative one. That's feasible, I guess, but I rather like how it's working now. And I don't really look forward to rolling my own chunking method.<br><br>Any other suggestions? Thank you in advance. <br><br></td></tr></table><br>
<a name="2045540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, replacing your recursive method with an iterative one is a must. You could use time measurement to let your routine return after 20ms for instance. Just remember the last state and continue there. <br><br></td></tr></table><br>
<a name="2045563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did this in Detective Chess where it runs a recursive algorithm that can take several seconds.  You just have to create your own stack.  <br><br>If you are calling a single function recursively, the easiest thing to do is make a class that holds a copy of each local object/value in that function.  Then make a stack or array of instances of that class.  You can quit temporarily after any partial iteration, and all you need to remember is which one you were pointing at.  (I didn't allocate new ones, just wrote over the current one when I re-entered at that depth.)<br><br>You can do x number of calculations per render/update and then quit until the next render/update.  Usually you'll want to draw a progress bar too. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
