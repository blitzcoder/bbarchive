<!DOCTYPE html><html lang="en" ><head ><title >Passing an object to an extern function</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Passing an object to an extern function</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Passing an object to an extern function</a><br><br>
<a name="2098399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sereschkin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to pass a monkey "Object"-object to the c++ world. And if yes is it possible to cast it to the type the object was before becoming on object (i.e. to an instanve of a  specific class)? And if yes, how do I know in c++ code the real type of this object? <br><br></td></tr></table><br>
<a name="2098401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> When using native C++, you can accept any type from Monkey by using a pointer. The exact type depends on the object in question, but the argument can simply be an 'Object*' (Object pointer), just as you would with 'Object' in Monkey (Compiles to the same thing). To pass exact types, you'd be going for a target/"generator" specific approach. In such situations, you'll want to look at the generated source to see what the class's encoded name is. A different way of doing this would be to use native base-classes like what Monkey does with most of its official modules (See 'brl.databuffer' for details). If you want to use a dynamic cast (As-in what Monkey does if you cast a reference to a class into a reference to a derivative class), then you'd use: "dynamic_cast&lt;insertTypeHere&gt;(pointerHere)" - I'm not really going to teach you C++, if that's what you want. Just note that on most targets (Including the standard C++ implementation in 'monkey.lang'), the 'Object' class in C++ uses the same name. The only difference is, Monkey automates references/pointers, and C++ doesn't. If you want to pass an 'Object' to a function in C++ (By reference / through Monkey), then you'd need to write something like this:<br><br><pre class=code>
void test(Object* o) { /* Insert function here/between the brackets. */ }
</pre> <br><br></td></tr></table><br>
<a name="2098415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sereschkin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you very much. I will try it. No, I don't know that you teach me in c++ ^^. <br><br></td></tr></table><br>
<a name="2098419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sereschkin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now I got the following error: "c_IntObject undeclared identifier" in this line:<br><br><pre class=code>
c_IntObject* realType = dynamic_cast&lt;c_IntObject*&gt;(v);
</pre><br><br>Because the decaration of the IntObject class takes place a few thousand lines later. And the (maybe stupid) question is: Is it possible to use "Monkey"-classes in extern c++ code? <br><br></td></tr></table><br>
<a name="2098418"></a>

<a name="2098420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> No its not possible ... that is what i want and asked it so long time ago ... <br><br></td></tr></table><br>
<a name="2098421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sereschkin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, Thank you :( <br><br></td></tr></table><br>
<a name="2098422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> my mate and me tried to optimize transcc in this case... but its very hard to handle it easy...<br><br><br>offtopic:<br>where are you from? Ackermann sounds like from germany or similiar? <br><br></td></tr></table><br>
<a name="2098425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sereschkin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, I'm from germany. But born in asia. That's the story about my first name :)<br><br>EDIT: Habe dich hinzugef√ºgt. <br><br></td></tr></table><br>
<a name="2098423"></a>

<a name="2098426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> * <br><br></td></tr></table><br>
<a name="2098424"></a>

<a name="2098472"></a>

<a name="2098473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> As k.o.g. pointed out, no it's not possible without some hacks to the compiler or target (As far as C++ code goes); stick to the external code already provided beforehand. This mainly applies to the standard 'brl' module, the 'monkey' module's external functionality, and any other module which uses external C++ code.<br><br>This is an issue because the main program needs the explicit external code to work, but then your own explicit external code requires the code below it. I've been meaning to bring this up to Mark; most notably, how the preprocessor-changes could potentially change external code ordering (Not an issue for most situations, of course).<br><br>But... If you wanted to use some less graceful methods (Mainly target modification, really), you could use proper external C++ files and/or headers. There's also some terrible things you could do with the compiler's code generation, where you could throw in extra code and what-not. I don't really recommend these things, though.<br><br>There is a workaround for this with functions, however. Since the linker deals with functions, you can have prototypes wherever you want. This means you can access any function you please from any point in the code, as long as you declare its prototype beforehand in your external code. Not exactly the best idea, but it's something. You also cause problems with future-proofing code-bases if you do this; the Monkey code can't change the native prototype(s) (Return type, name, and arguments).<br><br>At this point, just don't bother. Use primitives where possible, and keep your external code self contained (More specifically, contained within the "scope" of external files in general).<br><br>That being said, in a language like C#, for example, where ordering doesn't really matter, that would be a different story. I'm not saying C#'s better, though, it's just a different compiler model altogether. Personally, I'm not even a fan of the language. <br><br></td></tr></table><br>
<a name="2098471"></a>

<a name="2098470"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
