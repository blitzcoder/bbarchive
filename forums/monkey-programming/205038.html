<!DOCTYPE html><html lang="en" ><head ><title >Texture Atlases and animated images?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Texture Atlases and animated images?</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Texture Atlases and animated images?</a><br><br>
<a name="2055316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, so I know I can use LoadImage with various flags to use in an animation strip, which is what I do in BlitzMax.<br><br>However, in Monkey I want to start using TexturePacker and I wondered how people are handling animations when all the individual frames are packed into an atlases but at random (optimised) positions?<br><br>If you have an atlas you need to use GrabImage to pick out the various images you want to use, but again GrabImage expects animations to be in a strip.<br><br>Is it possible to grab each frame *individually*? So grab the first frame from a certain position, then grab the second frame from another position and so on.  Yet all these frames need to properly be in a single Image instance but on the correct frames?  I'm guessing it's probably possible with a module hack to expose the ability to add individual frames onto an Image instance.<br><br>I haven't used texturepacker yet, just heard about it. I'm assuming it also trims your images to optimise space (or perhaps that's a setting you can toggle?).  If each frame in an animation was trimmed it could create a bit of a problem when drawing them (they'd jiggle all around due to the trimming).  Anyone know about this?<br><br>I guess the other option is to still put the animations in an animation strip and then get texturepacker to treat it as a single (untrimmed) image and try to fit it onto the atlas, then GrabImage would work fine with multiple frames.<br><br>Thoughts?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2055318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW_</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way I would do it is have an animation definition class. Something like:<br>Class AnimDef<br>  field name  '&lt;-- walk, run, attack,ect<br>  field typ  '[loop_anim, run_once, ping_pong, ect]  <br>  field frames%[] '&lt;-- a list of texture atlas indices<br>End<br><br>AnimDefs are just held in a global list<br><br>Then, each animating game object gets an 'Animator' object. the Animator object holds a reference to what animDef it uses. along with the current frame it using.  It will also have an 'Update' method that's called when the frame changes (depending on it's loop type). <br>I hope that makes sense. <br><br></td></tr></table><br>
<a name="2055321"></a>

<a name="2055322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah makes sense thanks.  I thought about doing something like that too, it's just a shame not to use the build in frames functionality of Monkey images. <br><br></td></tr></table><br>
<a name="2055323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Forget everything about frames monkey provides you with and just load in every image as a single one via GrabImage.<br>Texture Packer will save a text file that has the exact positions so all you need to do is this (in pseudo code):<br><pre class=code>
LoadBigImage
LoadTextFile 'That describes where each frame is
For Each frame in BigImage
  frame = BigImage.GrabImage(x, y, width, height)
Next
</pre> <br><br></td></tr></table><br>
<a name="2085699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this how you ended up implementing it Grey?  I am also interested in using a texture atlas, but haven't found any tutorials for doing so. <br><br></td></tr></table><br>
<a name="2085722"></a>

<a name="2085723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be great if someone could post a working example for texture atlas. (Currently I'm using separate images) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
