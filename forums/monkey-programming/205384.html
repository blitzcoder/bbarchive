<!DOCTYPE html><html lang="en" ><head ><title >OpenGL viewport aspect ratio</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >OpenGL viewport aspect ratio</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >OpenGL viewport aspect ratio</a><br><br>
<a name="2059991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grant</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>I have been messing about with openGL module for monkey, Everything seems fine except for 1 thing, How on earth do you set the aspect ratio to avoid the dreaded stretching of drawn objects?<br><br>I have googled and I am getting nowhere, surely it must be possible to change the aspect so objects are drawn properly but it's not at all obvious, can someone please help me :)<br><br>Cheers, Grant. <br><br></td></tr></table><br>
<a name="2059992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a look at AutoFit ;) <br><br></td></tr></table><br>
<a name="2059995"></a>

<a name="2059996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grant</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks therevills,<br><br>I use the lovely autofit regular but sadly it's not what I'm looking for this time around. I want everything to run at the device native resolution and be independent of physical aspect ratios, no borders, OpenGL viewport with perspective rendering.<br><br>IIRC from doing similar in XNA It's something to do with the view or projection matrix and a homogeneous viewport.<br><br>Cheers, Grant.<br><br><br>YAY, fixed!!! setting the aspect in glFrustumf done the damage :) <br><br></td></tr></table><br>
<a name="2060030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >charlie</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> isn't it just window width/height?<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="2060076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grant</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi charlie,<br><br>Almost dude,<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
glViewport (0,0,DeviceWidth(),DeviceHeight())
glMatrixMode( GL_PROJECTION )
glLoadIdentity()
glFrustumf(-1.0,1.0,0.0-Float(DeviceHeight())/Float(DeviceWidth())),Float(DeviceHeight())/Float(DeviceWidth()),1.0,30.0)
</textarea><br><br>cheers, Grant. <br><br></td></tr></table><br>
<a name="2060071"></a>

<a name="2060072"></a>

<a name="2060122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> A little bit confused here, what does the above code actually do to the viewport? <br><br></td></tr></table><br>
<a name="2060140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grant</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's setting the clipping planes according to dimensions described by the floats, think of it as describing the shape you would see projected in space, a kind of distorted cube or pyramid with the top chopped of that describes the volume everything is rendered in. you need to tell opengl the shape of the window or screen so it can adjust this crazy pyramid to prevent stretching of rendered objects. Any ratio, any pixel aspect is catered for, some hardware uses non square pixels, so the viewport settings do not always  describe the shape of the screen or window.<br><br>left, right, bottom, top, near, far clipping planes.<br><br>I'm assuming a 1:1 pixel aspect ratio (square pixels) in this code.<br><br>cheers, grant. <br><br></td></tr></table><br>
<a name="2060137"></a>

<a name="2060138"></a>

<a name="2060139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, now I see, thanks for that explanation Grant. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
