<!DOCTYPE html><html lang="en" ><head ><title >Lambda expressions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Lambda expressions</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Lambda expressions</a><br><br>
<a name="2082684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not a feature request, but is anyone else missing them? Just being curious <br><br></td></tr></table><br>
<a name="2082688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I want them badly, but I've also learned to live without. <br><br></td></tr></table><br>
<a name="2082706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> OO guy, never saw the point of them. <br><br></td></tr></table><br>
<a name="2082709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm an OO guy too, doesn't mean that lambda expressions are pointless. There are very valid reasons to have them which can help cut down repeated code and functions that don't need to be named.<br><br>I'm going to assume you've never used them, because I didn't see a point in them until I used them. Same thing with interfaces. I saw no point until I started using them. It's a great tool to have in the toolbox that is a programming language. <br><br></td></tr></table><br>
<a name="2082713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Goodlookinguy: I agree with you. Also, being able to pass them as function or method parameters is almost sexy. <br><br></td></tr></table><br>
<a name="2082733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I must admit, I only recently learned the point of interfaces... <br><br></td></tr></table><br>
<a name="2082747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not missing them, unless you count Immediate-If as one.  Some guy on these forums made a lambda expression support in trans and I think it would be cool to see it make its way into Monkey proper, but it might be a big change.  Just something to bring up<br><br>I'd rather see lambda expressions than delegates, frankly;  easier to wrap my head around I guess.  I rely (probably too much) on interfaces in Monkey, kinda wish those supported generics.  That's what I want.  But official lambda expressions would be fantastic. <br><br></td></tr></table><br>
<a name="2082749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interfaces do support generics. They've supported generics for a few versions now. <br><br></td></tr></table><br>
<a name="2082752"></a>

<a name="2082753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Goodlookinguy<br><br>Whaddayaknow, it is working again.  I last had 76d and it wasn't working then, so I wasn't aware it's "in for reals" now.  Mark had disabled the feature for a while because it was a bit buggy, so now that it's working I might go back and change some Comparator code of mine to better support this stuff.  Provided it <i>is</i> officially-supported and not still buggy, of course :) <br><br></td></tr></table><br>
<a name="2082755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been using interface generics since v76a (I jumped straight to 77e where it still worked) and haven't had any issues. I don't know what bugs there were as I never had any problems and I did <a href="https://bitbucket.org/Goodlookinguy/xaddon/src/6d7c66d/basic/interfaces/" target="_blank">use them</a> a <a href="https://bitbucket.org/Goodlookinguy/xaddon/src/6d7c66d/basic/collections/hashmap.monkey" target="_blank">fair bit</a>.<br><br>Back to the topic at hand, Lua has lambda expressions that would fit right in with Monkey syntax. <br><br></td></tr></table><br>
<a name="2082785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't see the point in interface's and no I'v not bothered to use them, I can say the same about properties, whats the diff really a property just seems like extra code for no real benefit, I saw interfaces as the same, but I know there must be good reasons for them otherwise they would not exist, think I just need to see a practical example of why I might use one and why its better than an alternative . <br><br></td></tr></table><br>
<a name="2082819"></a>

<a name="2082820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Property keyword is for when you get or set something and can have other code run. It can also be used to make a field read-only. It removes the need for parenthesis because it's treated like a field.<br><br>Follow the links in my last post to see a practical (and robust) example of a hash map implementation using interfaces. Interfaces are used to communicate and encapsulate unrelated objects that have similar functionality. It removes the need for multiple inheritance which is the source of all evil. <br><br></td></tr></table><br>
<a name="2082824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Goodlookinguy<br>Monkey has very little polymorphism in the keywords department.  I think that's one of the reasons it's relatively simple/verbose, but it is what it is.  Whereas similar syntaxes like VB have keywords which can mean a lotta different things depending on where they are contextually  ("Is", "And", "Or", "Function", parenthesis defining array bounds, anonymous functions, etc, and last but not least the insane amounts of declaration prefixes), Monkey seems to only have "=" and separates out a lot of other things to their own keywords, such as separate logic/bitwise ops, scope directives being assigned separate from a declaring line, suffixes for method declaration modifiers, etc.  <br><br>I feel like re-use of "Function" specifically for anonymous functions may or may not feel "just right" as of yet.  I'm on the fence about it, because I don't know whether that represents monkey's feel more compared to say, the curly-brace solution <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=7894" target="_blank">Erik came up with</a>.  I had issues with the symbol-soup that ended up being, too, but, it's definitely more readable from a glance than VB's lambda syntax.  A compromise between hard-to-read syntax + possibly unnecessary keyword polymorphism would be going with lua-like syntax, but making the keywords unique, like this:<br><br><pre class=code>
'One possible way to do type inference.  Doesn't downcast to Int if Float
Lambda Pow(x,y) Returns x*y

'explicit type
Lambda Factorial:Int(n:Int) Returns If n&gt;1 Then n+Factorial(n-1) Else 1
</pre><br><br>@Taiphoz<br><br>Properties are actually very useful;  for one thing, you can use them as a tricky way to require fields in an Interface.  But more importantly, you can use them to combine getter and setter functions into one member that you treat externally like a variable.  This is great for classes that would require multiple states to be updated dependent on the underlying variable the property represents.  Setting the underlying variable(s) that the property gets/sets to Private (or Protected, if Monkey ever gets it...) lets you only expose the Property, thus making it harder to accidentally screw up the state of your class by setting a value directly without giving the setter an opportunity to update the other member variables dependent on it.<br><br>As for interfaces, it's basically just a safe way to implement something akin to multiple inheritance.  They're aptly named, because implementing an interface lets other classes access methods of other classes that may not inherit from each other at all.  Like, for example, having a list of drawable objects that you want to do an order sort on -- you can have one master list contain layers, tiles, HUD elements, sprites, whatever, as long as they implement a drawable interface.  You can use it to narrow a container from Object to only implementing interfaces, then be able to call the implementing method on a member safely without worrying about a crash or the target compiler exploding. <br><br></td></tr></table><br>
<a name="2082834"></a>

<a name="2082835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Those curly braces just seem wrong. I don't think it'd be a stretch to have Monkey syntax use Lua-like syntax and have the keyword Function in minutely different context.<br><br><pre class=code>Example(Function:String()
	Return "Hello World"
End)</pre><br><br><pre class=code>Example(Function:String(); Return "Hello World"; End)</pre> <br><br></td></tr></table><br>
<a name="2082871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <strike>That latter example's horrifying.  And also something you can do right now, but it's not really a true anonymous function, because no delegation or passing functions as parameters etc etc</strike>  It's late.  I just realized you were specifying a function type.... I think<br><br>If you wanna give the toker something to bite into (IE: not a nightmare to add the feature), you probably wanna give it its own keywords.  Func's what's used in .NET world, internally, iirc, though the actual keyword and syntax are reused from existing constructs, making it look a little confusing if you've never seen it before. <br><br></td></tr></table><br>
<a name="2082869"></a>

<a name="2082870"></a>

<a name="2082884"></a>

<a name="2082885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Erik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> The curly braces was part of a larger macro system I had in mind. So { signals the start of a macro and ends with }. Prefix lisp like syntax like this is extremely powerful and trivial to parse. Inside the braces you could essentially write your own parser for whatever dsl you wanted. If you just reserve {} for user extensions to the langue you could have compatible syntax for many user additions to trans without clashes.<br><br>It could be implemented something like this:<br><pre class=code>
Class Func1&lt;T,R&gt;
  Method Do:R(param:T) abstract
End

Class MacroDefinition Extends Func1&lt;String,String&gt;
'or perhaps
Class MacroDefinition Extends Func1&lt;Enviroment,String&gt;

Field Macros:StringMap&lt;MacroDefinition&gt;

</pre><br><br>You could imagine all sorts of macros like:<br><br>Macros.Set("(", New LambdaMacro) ' My lambda example<br>or if you prefer:<br>Macros.Set("Function", New LambdaMacro) ' My lambda example<br><br>Macros.Set("Shader", New ShaderMacro) ' Mini dsl for shaders<br>Macros.Set("Use", New UseMacro) ' Don't add to the garbage collector<br>Macros.Set("InlineC", New CMacro) ' Inline C code <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
