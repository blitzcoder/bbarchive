<!DOCTYPE html><html lang="en" ><head ><title >Sorting a List by depth</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sorting a List by depth</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >Sorting a List by depth</a><br><br>
<a name="2013900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vinians</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi friends!<br>I'm creating a game and all is working fine, but now I need to sort the List object by a field called Z. It possible to sort a list easly or I need to work at base linked list class ? Thanks ! <br><br></td></tr></table><br>
<a name="2013910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a look at <a href="/post.php?topic=1257&amp;post=11308" target="_blank">this thread</a> (I had to do this recently)... <br><br></td></tr></table><br>
<a name="2013912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vinians</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> NIce but its uses Diddy module, I'm not using it yet because I'm creating my own framework thats only use mojo. List class doesnt have this method.. <br><br></td></tr></table><br>
<a name="2013914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The <a href="http://monkeycoder.co.nz/Community/posts.php?topic=1257#11263" target="_blank">first post in that thread</a> shows how to extend the standard monkey List to enable sorting of custom classes. <br><br></td></tr></table><br>
<a name="2013915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>For Local i:= 0 To 1000</pre><br>What's that all about?? <br><br></td></tr></table><br>
<a name="2013916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What's that all about?? <br></div><br><br>It's a For loop incrementing i from 0 to 1000. The usage is in the language reference under "Numeric For loop". <br><br></td></tr></table><br>
<a name="2013923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> := Implicitly sets the variable's type. ie Monkey automagically determines the variable's type based on the number used. In the code above, that's shorthand for:<br><br><pre class=code>
For Local i:Int = 0 to 1000
</pre> <br><br></td></tr></table><br>
<a name="2013922"></a>

<a name="2013919"></a>

<a name="2013920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It's a For loop incrementing i from 0 to 1000. <br></div><br>*sigh* I know that! ;)<br><br>It was the colon that I didn't understand. <br><br></td></tr></table><br>
<a name="2013921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Apologies for my lack of psychic powers. <br><br></td></tr></table><br>
<a name="2013929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Vinians - you dont have to use the entire Diddy module just the collections part.<br><br>BTW I dont like the := I like to define the variable type myself ;) <br><br></td></tr></table><br>
<a name="2013933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Vinians: NIce but its uses Diddy module, I'm not using it yet because I'm creating my own framework thats only use mojo. List class doesnt have this method.. <br></div><br><pre class=code>Import diddy.collections</pre><br>That's it.  That will only import collections.monkey and assert.monkey, and only the parts that are actually used. <br><br></td></tr></table><br>
<a name="2013958"></a>

<a name="2013959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matty</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> My preference with sorting lists of sprites by z-order is usually as follows (assuming this is what this is about):<br><br>Create an array of lists of size equal to the display height.<br>Run through your set of sprites to draw and insert/append their image reference to the list at the relevant array index, where the array index is equal to the z-depth on the screen. This requires a single pass through your list of objects.<br><br>Then in your OnRender routine run through the array from top to bottom (0 to graphics height - 1) and draw all the sprites in the associated list at each index. This also requires only a single pass through your array of lists.It is very simple, and has always seemed quite fast..have been doing this method for many many years. <br><br></td></tr></table><br>
<a name="2013960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd imagine that most games likely to be built on Monkey would be counting z-ordered elements in the dozens rather than hundreds or thousands, so almost any approach is likely to be fast enough. However, if you're building something where you need to access that ordered list a lot and/or you have a larger number of screen elements then it could be worth looking into something based on a tree.<br><br>Happily enough, the Monkey map implementation is backed with a Red-Black tree. It wouldn't take much to put a wrapper around it to provide a display list class that kept everything in z-order. Depending on how much z movement is going on, it would probably be considerably faster than a solution based on lists being sorted on demand. <br><br></td></tr></table><br>
<a name="2013980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vinians</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills I will try to use diddy's collection, but how fast is it? Its fast like List or more ? The sort method is fast? I need to know about it because I will need to sort Z a lot because In my next game I will use this same framework to create a  isometric game that use depth a lot sorting by -y position as if it was Z. One more question, diddy collection works with all platforms that monkey export?<br><br>@matty Very interesting your solution, but it is a bit complex for me right now, unless you created a tutorial for us! It would be valuable to many beginners like me.<br><br>@muddy_shoes Perhaps "class map" would be the solution, but I would have to change much in my current engine, but if I do not get any other way I have to try <br><br></td></tr></table><br>
<a name="2013978"></a>

<a name="2013989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> The real-world performance of sorting algorithms (outside of their general big-O performance characteristics) and the data structure being used will depend on the usage patterns and the specifics of the implementation and platform involved. So, in order to get any idea you have to start with that information.<br><br> * Which target(s) are you talking about?<br> * How many screen items are you intending to have?<br> * How many unique Z values do you expect and how spread out will the objects be? In other words, will you have lots of items with the same Z value?<br> * In any given update interval, how many additions, removals, item searches and list traversals do you expect to be doing? <br><br></td></tr></table><br>
<a name="2013999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here are some timings to illustrate the lack of an easy answer. I've set up a test that does the following:<br><br> * Creates a set of test objects that wrap an integer value. I've chosen a thousand objects as representing a pretty ambitious monkey game for rendering output. (Actually, I'd say that it was enormously ambitious, but it illustrates an extreme)<br> * The values are picked from a limited set of possibilities. This simulates different z "resolutions".<br> * For each list type, the values are added, one by one, the list is traversed a number of times, sorted - if the list requires an explicit sort - and then the values are removed, one by one. This test is repeated several times and an average time recorded.<br><br>Four "lists" are used: Diddy's ArrayList, the Monkey List, a Monkey IntMap used to store Monkey Lists of objects at a z-value and OrderedList, which is my own implementation of a tree-backed collection.<br><br>Okay, so here are some numbers for Chrome:<br><br>Num. sorted items: 1000<br>Num. unique values: 8<br><br>DiddyList- avg(ms): 2.67<br>IntMap- avg(ms): 2.33<br>MonkeyList- avg(ms): 0.74<br>OrderedList- avg(ms): 1.85<br><br>Num. sorted items: 1000<br>Num. unique values: 240<br><br>DiddyList- avg(ms): 3.17<br>IntMap- avg(ms): 2.92<br>MonkeyList- avg(ms): 3.09<br>OrderedList- avg(ms): 2.38<br><br>Num. sorted items: 1000<br>Num. unique values: 10000<br><br>DiddyList- avg(ms): 2.78<br>IntMap- avg(ms): 5.3<br>MonkeyList- avg(ms): 6.29<br>OrderedList- avg(ms): 3.1<br><br>So we have three cases that cover some possibilities of our game design. The scenarios are 8, 240 and 10000 unique z values, which covers plenty of ground between something like a platformer with large amounts of depth-sorted scenery through to some sort of pseudo-3D craziness. <br><br>The first thing to note about this is that as the number of unique slots increases, the best and worst solutions swap around. MonkeyList clearly wins with lots of things on the same z plane and clearly loses when everything is spread around and the reverse is true for the Diddy list. The second thing to note is that the real-world time differences are actually tiny. Sure, 4ms is a decent chunk of time if you're pushing for 60fps, but if you are optimising at that level then expecting to pick the perfect solution before you've even started the game is a bit unrealistic.<br><br>But lets say you look at those number and think that scenario B is most like your intentions and so you can expect all the solutions to be the same. How true is that across different platforms and targets? Well lets just try that scenario on a different browser:<br><br>Firefox<br><br>Num. sorted items: 1000<br>Num. unique values: 240<br><br>DiddyList- avg(ms): 13.34<br>IntMap- avg(ms): 20.37<br>MonkeyList- avg(ms): 5.87<br>OrderedList- avg(ms): 9.46<br><br>Oops, if you went with the IntMap, you're suffering now! We should definitely use the MonkeyList, right?<br><br>Well, let's take a look at Flash and Android:<br><br>Flash:<br><br>Num. sorted items: 1000<br>Num. unique values: 240<br><br>DiddyList- avg(ms): 28.71<br>IntMap- avg(ms): 4.83<br>MonkeyList- avg(ms): 11.5<br>OrderedList- avg(ms): 3.6<br><br>Android:<br><br>09-05 09:49:44.313: INFO/[Monkey](7271): Num. sorted items: 1000<br>09-05 09:49:44.313: INFO/[Monkey](7271): Num. unique values: 240<br>09-05 09:49:44.313: INFO/[Monkey](7271): DiddyList- avg(ms): 280.09<br>09-05 09:49:44.313: INFO/[Monkey](7271): IntMap- avg(ms): 74.23<br>09-05 09:49:44.313: INFO/[Monkey](7271): MonkeyList- avg(ms): 171.22<br>09-05 09:49:44.313: INFO/[Monkey](7271): OrderedList- avg(ms): 45.2<br><br><br>Oops again. <br><br></td></tr></table><br>
<a name="2013998"></a>

<a name="2013996"></a>

<a name="2013994"></a>

<a name="2014009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Muddy any chance you could share your test code?<br><br>One thing to note is that with the Diddy's Arraylist is that you dont have to use an iterator which creates a new object every time you use an EachIn. <br><br></td></tr></table><br>
<a name="2014008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Muddy any chance you could share your test code?<br><br>One thing to note is that with the Diddy's Arraylist is that you dont have to use an iterator which creates a new object every time you use an EachIn. <br><br></td></tr></table><br>
<a name="2014001"></a>

<a name="2014005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills - The point wasn't to demonstrate that one thing was better or worse than another. The point was exactly the opposite, to show that any of the solutions could be the "best" depending on how and where they are used.<br><br>The traversals aren't really a major performance component of the timings above and GC isn't a big issue either, but if you want me to repeat something using the preferred method, I'm happy to oblige. What is the preferred technique? The enumerator or using the list count and the get methods? <br><br></td></tr></table><br>
<a name="2014010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would just like to test on my phone using your code... that Android test worries me a tad ;) <br><br></td></tr></table><br>
<a name="2014011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vinians</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice! I'm using Monkey List by now, and with this tests will be easy for us to know what type to use with our projects. Fix it! Thanks a lot! <br><br></td></tr></table><br>
<a name="2014013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> with this tests will be easy for us to know what type to use with our projects <br></div><br><br> Well, that was a waste of time...<br><br> @therevills - I'll separate the relevant code in a bit, but there's nothing special about it. It just does what it says above: add, traverse, sort, remove. <br><br></td></tr></table><br>
<a name="2014015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vinians</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Information is never a waste of time, anyway for me it was important information for the use of ordered lists often involves a large number of objects to any change in velocity influences.<br>Thanks anyway. <br><br></td></tr></table><br>
<a name="2014019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, to provide a bit more insight and to perhaps reduce therevills' panic, here are breakdown times by activity on my ZTE Blade Android phone.<br><br>Num. sorted items: 1000<br>Num. unique values: 240<br><br>DiddyList<br>Insert - avg(ms): 4.1<br>Remove - avg(ms): 156.2<br>Sort - avg(ms): 31.8<br>Traverse - avg(ms): 8.5<br><br>IntMap<br>Insert - avg(ms): 28.6<br>Remove - avg(ms): 32.7<br>Sort - avg(ms): 0.0<br>Traverse - avg(ms): 33.9<br><br>MonkeyList<br>Insert - avg(ms): 4.2<br>Remove - avg(ms): 145.4<br>Sort - avg(ms): 8.2<br>Traverse - avg(ms): 11.6<br><br>OrderedList<br>Insert - avg(ms): 20.0<br>Remove - avg(ms): 15.8<br>Sort - avg(ms): 0.0<br>Traverse - avg(ms): 11.5<br><br>As you can see, it's the removal that really causes pain for the non-tree based collection classes, basically because they involve a search. So, as long as you aren't constantly fiddling with the list contents, you're probably fine. As expected, the tree-based collections pay up-front on the cost of insertion in return for cheap search/removal and no need to explicitly sort the contents.<br><br>The code to run the test on the diddy list is below. Note that the Dalvik VM will run generally run code more quickly over time, so running the test for ten loops will result in slower average times than a hundred.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo
Import diddy.collections

Class Sprite Implements IComparable
  Field z:Int
  
  Method New(z:Int)
      Self.z = z 
  End
  
  ' return 0 if Self is equal to o, a negative number if Self &lt; o, and a positive number if Self &gt; o
  Method Compare:Int(o:Object)
    Return z - Sprite(o).z
  End

  ' return true if o is Self, or if Compare(o) would normally return 0
  Method CompareBool:Bool(o:Object)
    Return o = Self Or z = Sprite(o).z
  End
End

Global processTime:Int
Function StartTiming()
    processTime = Millisecs()
End

Function EndTiming(times:StringMap&lt;IntObject&gt;,id:String)
    processTime = Millisecs() - processTime
    Local time:IntObject = times.Get(id)
    time = time + processTime
    times.Set(id,time)
End

Function Main()
	Local a:App = New App
    Local testItems:List&lt;Sprite&gt; = New List&lt;Sprite&gt;
    Local numTestLoops:Int = 100
    Local numTestItems:Int = 1000
    Local zLevels:Int = 240
    Local numTraversals = 10
    Local times:StringMap&lt;IntObject&gt; = New StringMap&lt;IntObject&gt;()
    
    times.Set("Insert",New IntObject(0))
    times.Set("Traverse",New IntObject(0))
    times.Set("Sort",New IntObject(0))
    times.Set("Remove",New IntObject(0))
    
    For Local t:Int = 0 Until numTestLoops
    
        Seed = Millisecs()    
        testItems.Clear()
        For Local i:Int = 0 Until numTestItems
            testItems.AddLast(New Sprite(Rnd() * zLevels))
        End
            
        Local l:ArrayList&lt;Sprite&gt; = New ArrayList&lt;Sprite&gt;
      
        StartTiming()
        
        ' add items here
        For Local item:Sprite = Eachin testItems
            l.AddLast(item)
        End
        
        EndTiming(times,"Insert")
        StartTiming()
        
        For Local i:Int = 0 Until numTraversals
            Local dummy:Int
            For Local j:Int = 0 Until l.Size
                dummy = l.Get(j).z
            End
        End
        
        EndTiming(times,"Traverse")
        StartTiming()
        
        l.Sort()    
        
        EndTiming(times,"Sort")
        StartTiming()
        
        For Local item:Sprite = Eachin testItems
            l.Remove(item)
        End
        
        EndTiming(times,"Remove")
                
    End
    
    Print "Num. sorted items: " + numTestItems
    Print "Num. unique values: " + zLevels
    Print ""
    For Local key:String = Eachin times.Keys()
        Print key +"- avg(ms): " + Float(times.Get(key))/numTestLoops
    End
    
    Error ""
End

</textarea> <br><br></td></tr></table><br>
<a name="2014036"></a>

<a name="2014037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Instead of sorting a list in real time it can be faster to use a method as proposed by Matty above (create an array that corresponds to vertical lines on the screen and put references to objects in that array based on their vertical position). However I would not repeat that operation each frame, but instead maintain the array as the game progresses.<br><br>In other words you have two things:<br><br>1) Some list of creatures<br><br>This is your main list of creatures. You use this list to update the creatures from, as usual.<br><br>2) Some array or list representing vertical positions on the screen<br><br>In this array you have references to the objects in list 1. When you update an object (in list 1) and its vertical position changes, you update the array in point 2 to reflect this change. This might mean you remove the reference in one spot of the array to add it to another spot, for example one row up or down.<br><br>You use the array to draw the objects in the correct order.<br><br>This means you are updating the drawing-array when necessary and never have to perform a full sort on the array.<br><br>Another solution (that I am using in a game I am working on) is to not have the extra array, but work only with the list in point 1. Instead of using a monkey List, create you own linked list by adding "previous" and "next" pointers to the creatures themselves. Now you can maintain the creature list in depth-sorted order, switching creatures around when they pass each other vertically on screen. A disadvantage of this approach might be: what to do if you now add "bullets" or any other type that should have its sprites depth-sorted with the other objects? So you might need to base the different objects on the same base class and then make the list of the base class type. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
