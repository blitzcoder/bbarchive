<!DOCTYPE html><html lang="en" ><head ><title >playing with gles11</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >playing with gles11</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=507" >Monkey Programming</a>/<a href="#bottom" >playing with gles11</a><br><br>
<a name="2020092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://www.sedm.de/monkey/s3d/shot01.jpg"><br><br>Source for this image:<br><pre class=code>
Strict

Import mojo
Import s3d.s3d

Class S3DTest Extends App
	Field plane:Mesh
	Field cam:Camera
	
	Method OnCreate:Int()
		InitS3D()
		
		plane = LoadMesh("mesh.txt")
		PositionEntity(plane, 0.0, 0.0, -2.0)
		EntityColor(plane, 255, 200, 0, 255)
				
		cam = CreateCamera()
		CameraClsColor(cam, 90, 120, 220)
				
		SetUpdateRate(60)
		
		Return 0
	End
	
	Method OnUpdate:Int()
		TurnEntity(plane, 1.0, 1.0, 1.0)
		
		Return 0
	End
	
	Method OnRender:Int()
		RenderWorld()
		
		Return 0
	End
End

Function Main:Int()
	New S3DTest()
	Return 0
End
</pre><br><br>the module:<br><a href="http://www.sedm.de/monkey/s3d/s3d.zip" target="_blank">http://www.sedm.de/monkey/s3d/s3d.zip</a><br><br>it's just experimental and not useful. but now i understand opengl a little bit better and can enhance this module.<br><br>ps: this will not work for android. i've no idea whats going wrong but i think i can fix that <br><br></td></tr></table><br>
<a name="2020091"></a>

<a name="2020093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This looks interesting.  Could you post the contents of mesh.txt so we can see what the format of that file needs to be? <br><br></td></tr></table><br>
<a name="2020094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh, i forgot: <a href="http://www.sedm.de/monkey/s3d/s3dExample.zip" target="_blank">http://www.sedm.de/monkey/s3d/s3dExample.zip</a> ... there you find a executable for windows and with <a href="http://www.sedm.de/monkey/s3d/s3dExampleSource.zip" target="_blank">http://www.sedm.de/monkey/s3d/s3dExampleSource.zip</a> you get the source. mesh.txt is in s3d.data/ <br><br></td></tr></table><br>
<a name="2020108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, the example helped, mesh loaded. Is there a way to texture it with a PNG?  Is there a license for this module? <br><br></td></tr></table><br>
<a name="2020115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> the license: do whatever you want to do with it<br>textures: a really hard theme ... i work on this. <br><br></td></tr></table><br>
<a name="2020125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Nice!<br><br>The next release will include the utility function...<br><br>Function LoadImageData:DataBuffer( path$ )<br><br>...to help with creating textures. <br><br></td></tr></table><br>
<a name="2020126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> kewl, i'am stay tuned! :D <br><br></td></tr></table><br>
<a name="2020178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> i think there are a few bugs in gles11 module:<br><br>if i try to set the colorbuffer pointer to a correct colorbuffer the mesh is rendered black. if i try to set "stride" or/and "pointer" for "glColorPointer()" to 0 the vertex takes its position as color. no matter where i try set a pointer on glXXXPointer the result is a fail.<br><br><pre class=code>
glColorPointer(3, GL_FLOAT, 0, 0) ' works, but with the vertex coordinates
glColorPointer(3, GL_FLOAT, 0, Self.colorBuffer) 'fails
</pre> <br><br></td></tr></table><br>
<a name="2020181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> a new version is available<br><img src="http://www.sedm.de/monkey/s3d/shot02.jpg"><br><br>changes:<br><pre class=code>
01/01/2011 v0.1
added	: Color.toArray:Float[]()
added	: Color.toBuffer:Int(buffer:DataBuffer, address:Int)
added	: Color.toString:String()
added	: Vertex.toBuffer:Int(buffer:DataBuffer, address:Int)
added	: Entity.SetColor:Void(col:Color4F)
added	: Entity.SetColor:Void(col:String) can actually be white, black, red, green, blue, yellow, magenta, grey, lightgrey, darkgrey, orange or brown
added	: Entity.GetColor:Color4F()
added	: Color.New(col:Color4F)
added	: Color.New(col:String)
added	: Vector.toArray:Float[]()
added	: Light.New(number:Int = GL_LIGHT0, lightType:Int = LIGHT_DIRECTIONAL)
added	: S3D.CreateLight:Light(lightType:Int = LIGHT_DIRECTIONAL)
added	: CreateLight:Light(lightType:Int = LIGHT_DIRECTIONAL)
changed	: MeshFileFormat: the chunk "face" has now 7 values: x, y, z, r, g, b, a for a vertex, RGBA is optional
fixed	: Mesh.New(meshFile:String) not longer read indices to vertices
note	: Lights can be created but are currently ignored because there are no material functions in s3d
note	: if CreateLight() returns Null, there be more than 8 lights in your code
note	: a bug (or my fail) prevents that a mesh can have vertex colors
</pre><br><br>v0.1 Module : <a href="http://www.sedm.de/monkey/s3d/s3d.zip" target="_blank">http://www.sedm.de/monkey/s3d/s3d.zip</a><br>v0.1 Example: <a href="http://www.sedm.de/monkey/s3d/s3dExample.zip" target="_blank">http://www.sedm.de/monkey/s3d/s3dExample.zip</a><br><br>have fun :D <br><br></td></tr></table><br>
<a name="2020225"></a>

<a name="2020229"></a>

<a name="2020232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Pearmain</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is awesome, can't wait to see all the Mesh features added.<br><br>However, when I go to run the example in IOS 5 Simulator I get the following runtime error:<br><br>Thread 1: Program received signal "EXC_BAD_ACCESS"  (mesh.monkey 147) for<br><br>_glDrawElements(4,this-&gt;f_indices.Length(),5123,this-&gt;f_ibo); <br><br></td></tr></table><br>
<a name="2020222"></a>

<a name="2020238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> at this time it does not work for iOS or Android. I've tried with jumping in a circle but this has not helped, now i'll try it again with bug fixing ;)<br><br>has anyone an idea why the colorPointer is ignored and gles11 takes the vertexcoordinates for colors? <br><br></td></tr></table><br>
<a name="2020253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fred</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The following code is NOT working !<br><br>I'm investigating OpenGL ES 1.1 as well. I tried to quickly (and dirty) implement this MilkShape ASCII file loader in your (previous) code but vertex indices are messed up. I drop it here just in case it may help you to test your code with already made meshes.<br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
	Method New(milkshapeFile:String, format:int)			' format just to add a new new
		vertices	= New List&lt;Vertex&gt;
		position	= New Vector3F()
		rotation	= New Vector3F()
		
		Local bufs:Int[2]
		glGenBuffers(2, bufs)
		vbo		= bufs[0]
		ibo		= bufs[1]
		
		Local in:String = LoadString(milkshapeFile)		
		if in.Length()
			Print "Loading " + milkshapeFile
						
			Const	MKSP_INIT:int 			= 0
			Const	MKSP_MESH_NAME:int		= 1
			Const	MKSP_VERTICES:int		= 2
			Const	MKSP_VERTICES_LIST:int	= 3
			Const	MKSP_NORMALS:int		= 4
			Const	MKSP_NORMALS_LIST:int	= 5
			Const	MKSP_TRIANGLES:int		= 6
			Const	MKSP_TRIANGLES_LIST:int	= 7
			
			local	state:int = MKSP_INIT
			Local	stmp:string
			
			Local	nbmeshes:Int
			Local	nbvertices:Int
			Local	totalvertices:Int = 0
			Local	verticesoffset:int
			Local	nbnormals:Int
			Local	nbtriangles:Int
			Local	totaltriangles:Int = 0
			
			Local	indexarray:int[]
			Local	index:Int = 0
						
			Local lines:String[] = in.Split("~n")
			For Local line:String = EachIn lines
			
				' Print line + "~n"
			
				If not line.Trim().StartsWith("//")								' comment

					Local parts:String[] = line.Trim().Split(" ")
					If parts.Length() &gt;= 1
										
						Select state
							Case MKSP_INIT
								Select parts[0].Trim()
									Case "Frames:"
										' int(parts[1].Trim())   				' frames
										
									Case "Frame:"
										' int(parts[1].Trim()) 					' frame
									
									Case "Meshes:"
										nbmeshes = int(parts[1].Trim())			' meshes
										Print "Meshes: " + nbmeshes
										state = MKSP_MESH_NAME
								End select
							
							Case MKSP_MESH_NAME								
								stmp = parts[0].Trim()
								if stmp.StartsWith( "~q" ) And stmp.EndsWith( "~q" )
									Print "Mesh name: " + stmp[1..-1]
									
									' int(parts[1].Trim()) 		' flags
									' int(parts[2].Trim()) 		' material index
									
									verticesoffset = totalvertices
																		
									state = MKSP_VERTICES
								'Else	
								'	Print "Error"
								'	return
								End if			
								
							Case MKSP_VERTICES
								nbvertices = int(parts[0].Trim())					' vertices
								totalvertices += nbvertices
								Print "Vertices: " + nbvertices
								state = MKSP_VERTICES_LIST
								
							Case MKSP_VERTICES_LIST
							
								' int(parts[0].Trim())		' flags
									
								AddVertex(Float(parts[1].Trim()), Float(parts[2].Trim()), Float(parts[3].Trim()))			' x y z								
								' Print "X="+Float(parts[1].Trim())+" Y="+ Float(parts[2].Trim())+" Z="+  Float(parts[3].Trim())
								
								' Float(parts[4].Trim()), Float(parts[5].Trim())	' u v
								
								' int(parts[6].Trim())								' bone index
															
								nbvertices -= 1							
								if not nbvertices
									state = MKSP_NORMALS
								EndIf

							Case MKSP_NORMALS
								nbnormals = int(parts[0].Trim())					' normals
								Print "Normals: " + nbnormals
								state = MKSP_NORMALS_LIST
								
							Case MKSP_NORMALS_LIST
							
								' Float(parts[0].Trim()), Float(parts[1].Trim()), Float(parts[2].Trim())			' x y z								
								' Print "X="+Float(parts[0].Trim())+" Y="+ Float(parts[1].Trim())+" Z="+  Float(parts[2].Trim())
								
								nbnormals -= 1							
								if not nbnormals
									state = MKSP_TRIANGLES
								EndIf
							
							Case MKSP_TRIANGLES
								nbtriangles = int(parts[0].Trim())					' triangles
								totaltriangles += nbtriangles
								Print "Triangles: " + nbtriangles
								indexarray = indexarray.Resize( totaltriangles * 3 )
								state = MKSP_TRIANGLES_LIST
								
							Case MKSP_TRIANGLES_LIST
							
								' int(parts[0].Trim())		' flags

								indexarray[index+0] = int(parts[1].Trim()) + verticesoffset		' v1
								indexarray[index+1] = int(parts[2].Trim()) + verticesoffset		' v2
								indexarray[index+2] = int(parts[3].Trim()) + verticesoffset		' v3
								
								Print "#" + index/3 +  " v1:" + indexarray[index+0] + " v2:" + indexarray[index+1] + " v3:" + indexarray[index+2]
								
								index += 3
								
								' int(parts[4].Trim()), int(parts[5].Trim()),int(parts[6].Trim())		' n1 n2 n3
									
								' int(parts[7].Trim())		' smoothing group
																
								nbtriangles -= 1							
								if not nbtriangles	
									nbmeshes -= 1
									if not nbmeshes															
										Rethink(indexarray)
										Return 						' we stop here for the moment								
									Else
										state = MKSP_MESH_NAME									
									endif
								EndIf
								
						End Select

					EndIf
				EndIf
			Next
		Else
			Print milkshapeFile + " not found !" 
		EndIf
		
	End method

</textarea> <br><br></td></tr></table><br>
<a name="2020252"></a>

<a name="2020251"></a>

<a name="2020255"></a>

<a name="2020257"></a>

<a name="2020258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok that shows some funny results with a cube :D<br><br><img src="http://www.sedm.de/monkey/s3d/shot03.jpg"><br><br>i'll take a closer look on your importer and try to find out what's wrong.<br><br>S3D takes the indices in this way:<br><pre class=code>
' one vertex per line
' X     Y     Z    R    G    B    A
&gt;face
-1.0,  1.0,  0.0, 1.0, 1.0, 0.0, 1.0
 1.0,  1.0,  0.0, 1.0, 1.0, 0.0, 1.0
 1.0, -1.0,  0.0, 1.0, 1.0, 0.0, 1.0
-1.0, -1.0,  0.0, 1.0, 1.0, 0.0, 1.0

' indices for the mesh above in clockwise order
' 0---1
' |\  |
' | \ |
' |  \|
' 3---2
&gt;indices
0, 1, 2, 0, 2, 3
</pre><br>notice: the S3D format now read chunks with "&gt;", the "'" is for comments now <br><br></td></tr></table><br>
<a name="2020282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; has anyone an idea why the colorPointer is ignored and gles11 takes the vertexcoordinates for colors?<br><br>Ok, you're program appears to be doing several things wrong:<br><br>* It binds the color buffer to GL_ELEMENT_ARRAY_BUFFER somewhere - should be GL_ARRAY_BUFFER.<br><br>* It binds the color buffer to GL_COLOR_ARRAY which wont work at all! Again, use GL_ARRAY_BUFFER.<br><br>* Last param of glDrawElements should be '0'.<br><br>Quick hints:<br><br>* If a VBO is bound (ie: with glBindBuffer GL_ARRAY_BUFER,...) then glBlahPointer 'pointer' params are int offsets into the VBO.<br><br>* Ditto if an IBO is bound (ie: with glBindBuffer GL_ELEMENT_ARRAY_BUFFER,...) then the glDrawElements 'indices' param is an int offset into the index buffer.<br><br>* 'Interleaved' vertices are supposed to be more efficient, ie: stick all your position/color data in one VBO in order x#,y#,z#,r#,g#,b#,x#,y#,z#,...etc...and use...<br><br>glBindBuffer GL_ARRAY_BUFFER,vbo<br>glVertexPointer 3,GL_FLOAT,24,0<br>glColorPointer 3,GL_FLOAT,24,12<br><br>...to bind. <br><br></td></tr></table><br>
<a name="2020267"></a>

<a name="2020268"></a>

<a name="2020269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah, many thanks for the hints mark. that means i must change wide parts of my code because the buffer can be changed everytime a folk calls AddVertex() :D<br><br>but i'll try it out later ... in germany it is 11pm and i want go to bed ;) <br><br></td></tr></table><br>
<a name="2020289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> now the Milkshape ASCII Loader works properly and all runs fine in GLFW and on Android, i've not tested on iOS.<br><br>example: <a href="http://www.sedm.de/monkey/s3d/s3dExample.zip" target="_blank">http://www.sedm.de/monkey/s3d/s3dExample.zip</a><br>module: <a href="http://www.sedm.de/monkey/s3d/s3d.zip" target="_blank">http://www.sedm.de/monkey/s3d/s3d.zip</a><br><br>next step: Lighting <br><br></td></tr></table><br>
<a name="2020291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> which version of opengl are you using for GLFW?<br>it fails to execute on my 2003 PC, so its higher than 1.3? <br><br></td></tr></table><br>
<a name="2020294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it meant to look like this?<br><br><img src="http://www.hi-toro.com/monkey/gles11.jpg"><br><br>If so, it's working on GLFW and my Android phone! (Orange San Francisco, aka. ZTE Blade.)<br><br>However, every few seconds the model flashes light grey or white on the phone, just for a frame or so, which doesn't happen on GLFW. <br><br></td></tr></table><br>
<a name="2020295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>It currently requires GL1.5, but I can probably get it to fallback to using ARB extensions as well, which should improve compatibility.<br><br>Can you do a check to see what extensions your GL supports? <br><br></td></tr></table><br>
<a name="2020331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> @DruggedBunny<br>yes, that's right. I think the flashing appears because there are no normals or vertex coordinates. i'am working on lighting and texturing, stay tuned.<br><br>@mark <br>make it sense to poke the normals and texture coordinates in the same buffer like the vertices and the colors? <br><br></td></tr></table><br>
<a name="2020333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>void _glDrawElements( int mode,int count,int type,int offset ){<br>	glDrawElements( mode,count,type,(const GLvoid*)offset );<br>}<br> <br></div><br>failed with<br><div class="quote"> <br>Thread 1: Program received Signal: "EXC_BAD_ACCESS"<br> <br></div><br>in iOS Simulator :-( <br><br></td></tr></table><br>
<a name="2020353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> it says here opengl 1.3<br><a href="http://www.intel.com/support/graphics/sb/CS-004662.htm" target="_blank">http://www.intel.com/support/graphics/sb/CS-004662.htm</a> <br><br></td></tr></table><br>
<a name="2020357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Slenkar,<br><br>Can you run this little GLFW app and let me know what version/extensions it lists?<br><br><pre class=code>
Import mojo
Import opengl.gles11

Function Main()
	Print glGetString( GL_VERSION )
	Print glGetString( GL_EXTENSIONS )
End
</pre><br><br>Here's mine (whew!)...<br><div class="quote"> <br>4.2.0<br>GL_ARB_base_instance GL_ARB_blend_func_extended GL_ARB_color_buffer_float GL_ARB_compatibility GL_ARB_compressed_texture_pixel_storage GL_ARB_conservative_depth GL_ARB_copy_buffer GL_ARB_depth_buffer_float GL_ARB_depth_clamp GL_ARB_depth_texture GL_ARB_draw_buffers GL_ARB_draw_buffers_blend GL_ARB_draw_indirect GL_ARB_draw_elements_base_vertex GL_ARB_draw_instanced GL_ARB_ES2_compatibility GL_ARB_explicit_attrib_location GL_ARB_fragment_coord_conventions GL_ARB_fragment_program GL_ARB_fragment_program_shadow GL_ARB_fragment_shader GL_ARB_framebuffer_object GL_ARB_framebuffer_sRGB GL_ARB_geometry_shader4 GL_ARB_get_program_binary GL_ARB_gpu_shader5 GL_ARB_gpu_shader_fp64 GL_ARB_half_float_pixel GL_ARB_half_float_vertex GL_ARB_imaging GL_ARB_instanced_arrays GL_ARB_internalformat_query GL_ARB_map_buffer_alignment GL_ARB_map_buffer_range GL_ARB_multisample GL_ARB_multitexture GL_ARB_occlusion_query GL_ARB_occlusion_query2 GL_ARB_pixel_buffer_object GL_ARB_point_parameters GL_ARB_point_sprite GL_ARB_provoking_vertex GL_ARB_robustness GL_ARB_sample_shading GL_ARB_sampler_objects GL_ARB_seamless_cube_map GL_ARB_separate_shader_objects GL_ARB_shader_atomic_counters GL_ARB_shader_bit_encoding GL_ARB_shader_image_load_store GL_ARB_shader_objects GL_ARB_shader_precision GL_ARB_shader_subroutine GL_ARB_shading_language_100 GL_ARB_shading_language_420pack GL_ARB_shading_language_include GL_ARB_shading_language_packing GL_ARB_shadow GL_ARB_sync GL_ARB_tessellation_shader GL_ARB_texture_border_clamp GL_ARB_texture_buffer_object GL_ARB_texture_buffer_object_rgb32 GL_ARB_texture_compression GL_ARB_texture_compression_bptc GL_ARB_texture_compression_rgtc GL_ARB_texture_cube_map GL_ARB_texture_cube_map_array GL_ARB_texture_env_add GL_ARB_texture_env_combine GL_ARB_texture_env_crossbar GL_ARB_texture_env_dot3 GL_ARB_texture_float GL_ARB_texture_gather GL_ARB_texture_mirrored_repeat GL_ARB_texture_multisample GL_ARB_texture_non_power_of_two GL_ARB_texture_query_lod GL_ARB_texture_rectangle GL_ARB_texture_rg GL_ARB_texture_rgb10_a2ui GL_ARB_texture_storage GL_ARB_texture_swizzle GL_ARB_timer_query GL_ARB_transform_feedback2 GL_ARB_transform_feedback3 GL_ARB_transform_feedback_instanced GL_ARB_transpose_matrix GL_ARB_uniform_buffer_object GL_ARB_vertex_array_bgra GL_ARB_vertex_array_object GL_ARB_vertex_attrib_64bit GL_ARB_vertex_buffer_object GL_ARB_vertex_program GL_ARB_vertex_shader GL_ARB_vertex_type_2_10_10_10_rev GL_ARB_viewport_array GL_ARB_window_pos GL_ATI_draw_buffers GL_ATI_texture_float GL_ATI_texture_mirror_once GL_S3_s3tc GL_EXT_texture_env_add GL_EXT_abgr GL_EXT_bgra GL_EXT_bindable_uniform GL_EXT_blend_color GL_EXT_blend_equation_separate GL_EXT_blend_func_separate GL_EXT_blend_minmax GL_EXT_blend_subtract GL_EXT_compiled_vertex_array GL_EXT_Cg_shader GL_EXT_depth_bounds_test GL_EXT_direct_state_access GL_EXT_draw_buffers2 GL_EXT_draw_instanced GL_EXT_draw_range_elements GL_EXT_fog_coord GL_EXT_framebuffer_blit GL_EXT_framebuffer_multisample GL_EXTX_framebuffer_mixed_formats GL_EXT_framebuffer_object GL_EXT_framebuffer_sRGB GL_EXT_geometry_shader4 GL_EXT_gpu_program_parameters GL_EXT_gpu_shader4 GL_EXT_multi_draw_arrays GL_EXT_packed_depth_stencil GL_EXT_packed_float GL_EXT_packed_pixels GL_EXT_pixel_buffer_object GL_EXT_point_parameters GL_EXT_provoking_vertex GL_EXT_rescale_normal GL_EXT_secondary_color GL_EXT_separate_shader_objects GL_EXT_separate_specular_color GL_EXT_shader_image_load_store GL_EXT_shadow_funcs GL_EXT_stencil_two_side GL_EXT_stencil_wrap GL_EXT_texture3D GL_EXT_texture_array GL_EXT_texture_buffer_object GL_EXT_texture_compression_dxt1 GL_EXT_texture_compression_latc GL_EXT_texture_compression_rgtc GL_EXT_texture_compression_s3tc GL_EXT_texture_cube_map GL_EXT_texture_edge_clamp GL_EXT_texture_env_combine GL_EXT_texture_env_dot3 GL_EXT_texture_filter_anisotropic GL_EXT_texture_format_BGRA8888 GL_EXT_texture_integer GL_EXT_texture_lod GL_EXT_texture_lod_bias GL_EXT_texture_mirror_clamp GL_EXT_texture_object GL_EXT_texture_shared_exponent GL_EXT_texture_sRGB GL_EXT_texture_sRGB_decode GL_EXT_texture_storage GL_EXT_texture_swizzle GL_EXT_texture_type_2_10_10_10_REV GL_EXT_timer_query GL_EXT_transform_feedback2 GL_EXT_vertex_array GL_EXT_vertex_array_bgra GL_EXT_vertex_attrib_64bit GL_EXT_import_sync_object GL_IBM_rasterpos_clip GL_IBM_texture_mirrored_repeat GL_KTX_buffer_region GL_NV_alpha_test GL_NV_blend_minmax GL_NV_blend_square GL_NV_complex_primitives GL_NV_conditional_render GL_NV_copy_depth_to_color GL_NV_copy_image GL_NV_depth_buffer_float GL_NV_depth_clamp GL_NV_explicit_multisample GL_NV_fbo_color_attachments GL_NV_fence GL_NV_float_buffer GL_NV_fog_distance GL_NV_fragdepth GL_NV_fragment_program GL_NV_fragment_program_option GL_NV_fragment_program2 GL_NV_framebuffer_multisample_coverage GL_NV_geometry_shader4 GL_NV_gpu_program4 GL_NV_gpu_program4_1 GL_NV_gpu_program5 GL_NV_gpu_program_fp64 GL_NV_gpu_shader5 GL_NV_half_float GL_NV_light_max_exponent GL_NV_multisample_coverage GL_NV_multisample_filter_hint GL_NV_occlusion_query GL_NV_packed_depth_stencil GL_NV_parameter_buffer_object GL_NV_parameter_buffer_object2 GL_NV_path_rendering GL_NV_pixel_data_range GL_NV_point_sprite GL_NV_primitive_restart GL_NV_register_combiners GL_NV_register_combiners2 GL_NV_shader_atomic_counters GL_NV_shader_buffer_load GL_NV_texgen_reflection GL_NV_texture_barrier GL_NV_texture_compression_vtc GL_NV_texture_env_combine4 GL_NV_texture_expand_normal GL_NV_texture_lod_clamp GL_NV_texture_multisample GL_NV_texture_rectangle GL_NV_texture_shader GL_NV_texture_shader2 GL_NV_texture_shader3 GL_NV_transform_feedback GL_NV_transform_feedback2 GL_NV_vertex_array_range GL_NV_vertex_array_range2 GL_NV_vertex_attrib_integer_64bit GL_NV_vertex_buffer_unified_memory GL_NV_vertex_program GL_NV_vertex_program1_1 GL_NV_vertex_program2 GL_NV_vertex_program2_option GL_NV_vertex_program3 GL_NVX_conditional_render GL_NVX_gpu_memory_info GL_OES_depth24 GL_OES_depth32 GL_OES_depth_texture GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_get_program_binary GL_OES_mapbuffer GL_OES_packed_depth_stencil GL_OES_rgb8_rgba8 GL_OES_standard_derivatives GL_OES_texture_3D GL_OES_texture_float GL_OES_texture_float_linear GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_OES_texture_npot GL_OES_vertex_array_object GL_OES_vertex_half_float GL_SGIS_generate_mipmap GL_SGIS_texture_lod GL_SGIX_depth_texture GL_SGIX_shadow GL_SUN_slice_accum GL_WIN_swap_hint WGL_EXT_swap_control <br> <br></div> <br><br></td></tr></table><br>
<a name="2020356"></a>

<a name="2020364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1.3.0 - Build 4.14.10.4342<br>GL_ARB_multitexture GL_ARB_point_parameters GL_ARB_texture_border_clamp GL_ARB_texture_compression GL_ARB_texture_cube_map GL_ARB_texture_env_add GL_ARB_texture_env_combine GL_ARB_texture_env_dot3 GL_ARB_texture_env_crossbar GL_ARB_transpose_matrix GL_ARB_vertex_buffer_object GL_ARB_vertex_program GL_ARB_window_pos GL_EXT_abgr GL_EXT_bgra GL_EXT_blend_color GL_EXT_blend_func_separate GL_EXT_blend_minmax GL_EXT_blend_subtract GL_EXT_clip_volume_hint GL_EXT_compiled_vertex_array GL_EXT_cull_vertex GL_EXT_draw_range_elements GL_EXT_fog_coord GL_EXT_multi_draw_arrays GL_EXT_packed_pixels GL_EXT_rescale_normal GL_EXT_secondary_color GL_EXT_separate_specular_color GL_EXT_stencil_wrap GL_EXT_texture_compression_s3tc GL_EXT_texture_env_add GL_EXT_texture_env_combine GL_EXT_texture_filter_anisotropic GL_3DFX_texture_compression_FXT1 GL_IBM_texture_mirrored_repeat GL_NV_blend_square GL_NV_texgen_reflection GL_SGIS_generate_mipmap GL_WIN_swap_hint <br><br></td></tr></table><br>
<a name="2020402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taumel</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't get it. Why not going straight for OpenGL ES 2? <br><br></td></tr></table><br>
<a name="2020403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I don't get it. Why not going straight for OpenGL ES 2? <br></div><br>Not all mobile devices and/or OS versions support ES2. <br><br></td></tr></table><br>
<a name="2020414"></a>

<a name="2020415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taumel</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Those where using 3D makes sense do. Secondly mobile device get a lot faster replaced than desktops. This is like caring about a niche market where the time is working against you. <br><br></td></tr></table><br>
<a name="2020417"></a>

<a name="2020418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Except maybe for kids and demented people, nobody here has ambitions to do PS3-quality games with Monkey anyhow. ES 1.1 goes a long way if you use it right. <br><br></td></tr></table><br>
<a name="2020416"></a>

<a name="2020422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> ES2.0 works completely different from ES1.x and who want ES2.x should write his own wrapper ;) <br><br></td></tr></table><br>
<a name="2020423"></a>

<a name="2020424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fred</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> bruZard you grabbed my code just before I edited it: remove the 4 comments to have this: <br>if not nbtriangles										    nbmeshes -= 1<br>if not nbmeshes															<br> Rethink(indexarray)<br> Return 		' we stop here for the moment								<br>Else<br>state = MKSP_MESH_NAME									<br>Endif<br>EndIf<br>So you'll be able to load the full heli.txt <br><br></td></tr></table><br>
<a name="2020426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taumel</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ErikT<br>Following this logic i wonder why you care about 3D at all and not stick to ASCII graphics instead. I understand that due to a lack of a proper 3D engine in the Blitz community for years things aren't up to date but quite some of the rest of the tools are. You're free to enjoy the same spinning triangles over and over again but i doubt your audience does, as at least they are able to compare and of course common shader support on mobiles doesn't mean PS3 content heavy games. <br><br></td></tr></table><br>
<a name="2020425"></a>

<a name="2020427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fred</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would like to continue playing with this but I don't know where you want to go. by the way thanks for sharing your investigations.<br>MilkShape files (I never used them before) has one material per mesh with several meshes inside the txt file.<br>So, with your current implementation it could be better to have a higher level function that load milkshape.txt and create several s3d.meshes from there. but then it needs higher handling to manipulate a group of meshes as an object.<br>I guess I have to wait for your next release. <br><br></td></tr></table><br>
<a name="2020428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> This may be off topic, but I'm not sure.<br><br>Once you start working in 3D, how does collision detection and physics come into play?  Is there anything built-in to OpenGL that relates to this, or do you have to start from scratch with all the math?  Or just bail and learn Unity ;) <br><br></td></tr></table><br>
<a name="2020431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Fred: the plan is to write a complete engine, but now i must learn all the funny things about opengl es 1.1.<br>the code above is not written in stones and i think it is possible that i publish a complete new module in the next few weeks. atm i read the Khronos OpenGL ES1.x specification and learn and learn and learn and whine and learn and .... ;)<br>When i start to write a really cool gles11 wrapper, i start a new thread in "Projects".<br><br>@benmc: if i really create an easy-to-use 3D engine then you can be sure that there are collisions and all the other funny things you known from Blitz3D.<br><br>@OpenGL ES2.x<br>surely, it would be awesome if we had ES2.x, but now we just have 1.1 and i think we should live with that. <br><br></td></tr></table><br>
<a name="2020430"></a>

<a name="2020434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >charlie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> We should be getting GLES 2.whatever according to Mark: <a href="http://www.monkeycoder.co.nz/Community/post.php?topic=2035&amp;post=19463" target="_blank">http://www.monkeycoder.co.nz/Community/post.php?topic=2035&amp;post=19463</a><br><br>Hopefully it won't take too much longer...<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="2020450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Once you start working in 3D, how does collision detection and physics come into play? Is there anything built-in to OpenGL that relates to this, or do you have to start from scratch with all the math? Or just bail and learn Unity ;)  <br></div><br>For physics and collisions, you have to do your own math.<br><br>There's always Unity.... or learn Shiva 3D!<br><br><br>To be honest, when I get done with my paid project, I'll see if I can't finish porting over miniB3D so everyone has a place to start (unless Simon has done it already!). <br><br></td></tr></table><br>
<a name="2020464"></a>

<a name="2020465"></a>

<a name="2020466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> taumel:<br><div class="quote"> Following this logic i wonder why you care about 3D at all <br></div><br><div class="quote"> You're free to enjoy the same spinning triangles over and over again but i doubt your audience does, as at least they are able to compare and of course common shader support on mobiles doesn't mean PS3 content heavy games. <br></div><br><br>I care about maximum compatibility, as do most people interested in using Monkey to make a buck I reckon. Could it be that a target audience also cares about this? That is to say, outside of the segment that upgrades every six months? Hmmm... <br><br></td></tr></table><br>
<a name="2020462"></a>

<a name="2020463"></a>

<a name="2020467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >charlie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just being able to use GL would be more than enough for me. I like the idea of WebGL, so i'm looking forward to being able to try it out with Monkey. <br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="2020469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dima</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> I remember watching a video presentation for android gaming by Google, it was a guy who made Replica Island, and I remember him mention that if the device supports ES2.0 it is always better to use that instead of 1.1 because of something to do with emulating the 1.1 layer.  I don't know any real info on this. <br><br></td></tr></table><br>
<a name="2020471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taumel</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ErikT<br>Contrary to you i don't know what most people using monkey want but i know what's reasonable to use for making a buck and that's supporting what's widely spread and taking advantage of the features being available there. Again those devices where it makes sense using 3D are supporting OpenGL ES 2 since years but it certainly also is a business model designing a game for the models which are outdated. It's not my business model but fair enough if it's yours. <br><br></td></tr></table><br>
<a name="2020513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> i try to load a Wavefront .obj File, but nothing i try will work.<br><br>Here's the file i try to load:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
# Blender v2.61 (sub 0) OBJ File: ''
# www.blender.org
mtllib cube.mtl
v 1.000000 -1.000000 -1.000000
v 1.000000 -1.000000 1.000000
v -1.000000 -1.000000 1.000000
v -1.000000 -1.000000 -1.000000
v 1.000000 1.000000 -0.999999
v 0.999999 1.000000 1.000001
v -1.000000 1.000000 1.000000
v -1.000000 1.000000 -1.000000
vt 0.500000 0.250000
vt 0.500000 0.500000
vt 0.250000 0.500000
vt 0.250000 0.250000
vt 0.500000 1.000000
vt 0.250000 1.000000
vt 0.250000 0.750000
vt 0.500000 0.750000
vt 0.500000 0.000000
vt 0.750000 0.000000
vt 0.750000 0.250000
vt 0.000000 0.250000
vt 0.000000 0.000000
vt 0.250000 0.000000
vn 0.000000 -1.000000 0.000000
vn 0.000000 1.000000 0.000000
vn 1.000000 0.000000 0.000000
vn -0.000000 -0.000000 1.000000
vn -1.000000 -0.000000 -0.000000
vn 0.000000 0.000000 -1.000000
usemtl Material_untitled
s off
f 1/1/1 2/2/1 3/3/1
f 1/1/1 3/3/1 4/4/1
f 5/5/2 8/6/2 7/7/2
f 5/5/2 7/7/2 6/8/2
f 1/1/3 5/9/3 6/10/3
f 1/1/3 6/10/3 2/11/3
f 2/2/4 6/8/4 7/7/4
f 2/2/4 7/7/4 3/3/4
f 3/12/5 7/13/5 8/14/5
f 3/12/5 8/14/5 4/4/5
f 5/9/6 1/1/6 4/4/6
f 5/9/6 4/4/6 8/14/6
</textarea><br>(just a cube)<br><br>and here is the code which try to interpret the data:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import mojo
Import opengl.gles11

Class Vector
	Method New(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
		Self.data = [x, y, z]
	End
	
	Method add:Void(vector:Vector)
		Self.data[0] += vector.data[0]
		Self.data[1] += vector.data[1]
		Self.data[2] += vector.data[2]
	End
	
	Method toBuffer:Int(buf:DataBuffer, addr:Int)
		For Local i:Int = 0 Until 2
			buf.PokeFloat(addr, Self.data[i]); addr += 4
		Next
		Return addr
	End
	
	Field data:Float[]
End

Class Face
	Method New(v:Vector, vt:Vector, vn:Vector)
		Self.v[0] = v
		Self.v[1] = vt
		Self.v[2] = vn
	End
	
	Method toBuffer:Int(buf:DataBuffer, addr:Int)
		For Local i:Int = 0 Until 2
			addr = Self.v[i].toBuffer(buf, addr)
		Next
		Return addr
	End
	Field v:Vector[3]
End

Class Mesh
	Method New()
		Self.rot = New Vector()
	End
	
	Method LoadObj:Void(filename:String)
		Local in:String = LoadString(filename)
		If in.Length() &gt; 0
			Local mtllib:String		= ""
			Local matname:String	= ""
			Local name:String		= ""
			Local vCount:Int		= 0
			
			Local pos:List&lt;Vector&gt;	= New List&lt;Vector&gt;
			Local tex:List&lt;Vector&gt;	= New List&lt;Vector&gt;
			Local nor:List&lt;Vector&gt;	= New List&lt;Vector&gt;
			Local faces:List&lt;Face&gt;	= New List&lt;Face&gt;
			Local indices:List&lt;Int&gt;	= New List&lt;Int&gt;
			
			Local apos:Vector[]
			Local atex:Vector[]
			Local anor:Vector[]
			
			Local lines:String[]	= in.Split("~n")
			
			For Local line:String = EachIn lines
				If Not line.StartsWith("#")
					Local parts:String[] = line.Split(" ")
					Select parts[0].Trim().ToLower()
						Case "v"
							' vertex coordinate
							pos.AddLast(New Vector(Float(parts[1].Trim()), Float(parts[2].Trim()), Float(parts[3].Trim())))
							vCount += 1
							
						Case "vt"
							' texture coordinate
							tex.AddLast(New Vector(Float(parts[1]), Float(parts[2])))
							
						Case "vn"
							' vertex normal
							nor.AddLast(New Vector(Float(parts[1]), Float(parts[2]), Float(parts[3])))
							
						Case "f"
							' face
							If Not apos.Length() apos = pos.ToArray()
							If Not atex.Length() atex = tex.ToArray()
							If Not anor.Length() anor = nor.ToArray()
							
							Local faceParts01:String[] = parts[1].Split("/")
							Local faceParts02:String[] = parts[2].Split("/")
							Local faceParts03:String[] = parts[3].Split("/")
							
							faces.AddLast(New Face(apos[Int(faceParts01[0]) - 1], atex[Int(faceParts01[1]) - 1], anor[Int(faceParts01[2]) - 1]))
							faces.AddLast(New Face(apos[Int(faceParts02[0]) - 1], atex[Int(faceParts02[1]) - 1], anor[Int(faceParts02[2]) - 1]))
							faces.AddLast(New Face(apos[Int(faceParts03[0]) - 1], atex[Int(faceParts03[1]) - 1], anor[Int(faceParts03[2]) - 1]))
							
							indices.AddLast(Int(faceParts01[0]))
							indices.AddLast(Int(faceParts02[0]))
							indices.AddLast(Int(faceParts03[0]))
					End
				EndIf
			Next
			
			Local ind:Int[] = indices.ToArray()
			
			Local buf:Int[2]
			glGenBuffers(2, buf)
			Local bufSize:Int	= faces.Count() * 36
			Self.vbo 			= buf[0]
			Self.ibo 			= buf[1]
			Self.buffer			= DataBuffer.Create(bufSize)
			
			Local addr:Int		= 0
			For Local f:Face = EachIn faces
				addr = f.toBuffer(Self.buffer, addr)
			Next
			
			glBindBuffer(GL_ARRAY_BUFFER, Self.vbo)
			glBufferData(GL_ARRAY_BUFFER, Self.buffer.Size(), Self.buffer, GL_STATIC_DRAW)
			glVertexPointer(3, GL_FLOAT, 36, 0)
			glTexCoordPointer(3, GL_FLOAT, 36, 12)
			glNormalPointer(GL_FLOAT, 36, 24)
			
			Self.indexBuffer = DataBuffer.Create(indices.Count() * 2)
			For Local i:Int = EachIn ind
				Self.indexBuffer.PokeShort(i * 2, ind[i])
			Next
			
			glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, Self.ibo)
			glBufferData(GL_ELEMENT_ARRAY_BUFFER, Self.indexBuffer.Size(), Self.indexBuffer, GL_STATIC_DRAW)
			
		Else
			Print filename + " doesnt exists."	
		EndIf
	End
	
	Method draw:Void()
		glMatrixMode(GL_MODELVIEW)
		glLoadIdentity()
		
		glEnable(GL_VERTEX_ARRAY)
		glEnable(GL_TEXTURE_COORD_ARRAY)
		glEnable(GL_NORMAL_ARRAY)
		
		glBindBuffer(GL_ARRAY_BUFFER, Self.vbo)
		glBufferData(GL_ARRAY_BUFFER, Self.buffer.Size(), Self.buffer, GL_STATIC_DRAW)
		
		glVertexPointer(3, GL_FLOAT, 36, 0)
		glTexCoordPointer(3, GL_FLOAT, 36, 12)
		glNormalPointer(GL_FLOAT, 36, 24)
		
		glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, Self.ibo)
		glBufferData(GL_ELEMENT_ARRAY_BUFFER, Self.indexBuffer.Size(), Self.indexBuffer, GL_STATIC_DRAW)
		
		glEnable(GL_DEPTH_TEST)
		glDepthFunc(GL_LESS)
		glDepthMask(True)
		
		glLoadIdentity()		
		
		glTranslatef(0.0, 0.0, -8.0)
		glRotatef(Self.rot.data[0], 1, 0, 0)
		glRotatef(Self.rot.data[1], 0, 1, 0)
		glRotatef(Self.rot.data[2], 1, 0, 1)
		
		glDrawElements(GL_TRIANGLES, Self.indexBuffer.Size(), GL_UNSIGNED_SHORT, 0)
	End
	
	
	Field buffer:DataBuffer
	Field indexBuffer:DataBuffer
	Field vbo:Int
	Field ibo:Int
	Field rot:Vector
End


Class Test Extends App
	Field m:Mesh
	Field rotVec:Vector
	
	Method OnCreate:Int()
		Self.m = New Mesh()
		Self.m.LoadObj("cube.obj")
		Self.rotVec = New Vector(1.0, 0.0, 0.0)
		
		SetUpdateRate(30)
		Return 0
	End
	
	Method OnUpdate:Int()
		Self.m.rot.add(Self.rotVec)
		Return 0
	End
	
	Method OnRender:Int()
		glViewport(0, 0, DeviceWidth(), DeviceHeight())
		glDisable(GL_BLEND)
		glMatrixMode(GL_PROJECTION)
		glLoadIdentity()
		glFrustumf(-1, 1, -1, 1, 1, 100)
		
		glClearColor(0.2, 0.5, 0.9, 1.0)
		glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT)
		
		glEnableClientState(GL_VERTEX_ARRAY)
		glEnableClientState(GL_TEXTURE_COORD_ARRAY)
		glEnableClientState(GL_NORMAL_ARRAY)
		
		glEnable(GL_DEPTH_TEST)
		glDepthFunc(GL_LESS)
		glDepthMask(True)
		
		glMatrixMode(GL_MODELVIEW)
		
		m.draw()
		
		Return 0
	End
End

Function Main:Int()
	New Test()
	Return 0
End
</textarea><br>the result looks like this:<br><img src="http://www.sedm.de/monkey/s3d/objfailed.jpg"> <br><br></td></tr></table><br>
<a name="2020510"></a>

<a name="2020515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> @bruZard: Just so you know, I edited your post (I'm a moderator!) to change the (code) tag to (codebox) -- this puts large code examples in a scrollable box. <br><br></td></tr></table><br>
<a name="2020514"></a>

<a name="2020516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank you! <br><br></td></tr></table><br>
<a name="2020522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Looks a bit wrong in a few places - esp. the 'EachIn' to set up the indices.<br><br>Try this (model renamed to cube.txt). It's a little intense because it merges identical vertices if possible...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Import mojo
Import opengl.gles11

Class Vertex
	Field x#,y#,z#
	Field nx#,ny#,nz#
	Field s#,t#
	
	Method New( x#,y#,z#,nx#=0,ny#=0,nz#=0,s#=0,t#=0 )
		Self.x=x;Self.y=y;Self.z=z
		Self.nx=nx;Self.ny=ny;Self.nz=nz
		Self.s=s;Self.t=t
	End
	
	Method Equals?( v:Vertex )
		Return x=v.x And y=v.y And z=v.z And nx=v.nx And ny=v.ny And nz=v.nz And s=v.s And t=v.t
	End
	
	Method Compare( with:Vertex )
		'memcmp!
		If x&lt;with.x Return -1
		If x&gt;with.x Return 1
		If y&lt;with.y Return -1
		If y&gt;with.y Return 1
		If z&lt;with.z Return -1
		If z&gt;with.z Return 1
		If nx&lt;with.nx Return -1
		If nx&gt;with.nx Return 1
		If ny&lt;with.ny Return -1
		If ny&gt;with.ny Return 1
		If nz&lt;with.nz Return -1
		If nz&gt;with.nz Return 1
		If s&lt;with.s Return -1
		If s&gt;with.s Return 1
		If t&lt;with.t Return -1
		If t&gt;with.t Return 1
		Return 0
	End
End

Class VertexMap&lt;T&gt; Extends Map&lt;Vertex,T&gt;

	Method Compare( lhs:Vertex,rhs:Vertex )
		Return lhs.Compare( rhs )
	End

End

Class VertexStack Extends Stack&lt;Vertex&gt;

	Method Equals?( lhs:Vertex,rhs:Vertex )
		Return lhs.Equals( rhs )
	End

	Method Compare( lhs:Vertex,rhs:Vertex )
		Return lhs.Compare( rhs )
	End

End

Class Mesh

	Method AddVertex( v:Vertex )
		Local i
		If vmap.Contains( v )
			i=vmap.Get( v )
		Else
			i=vs.Length
			vmap.Set v,i
			vs.Push v
		Endif
		is.Push i
	End

	Method AddVertex( x#,y#,z#,nx#,ny#,nz#,s#,t# )
		AddVertex New Vertex( x,y,z,nx,ny,nz,s,t )
	End
	
	Method Bind()
	
		If vbo
		
			glBindBuffer GL_ARRAY_BUFFER,vbo
			glBindBuffer GL_ELEMENT_ARRAY_BUFFER,ibo
		
		Else
			vcount=vs.Length
			icount=is.Length
			
			Local vdata:=DataBuffer.Create( vcount*32 )
			For Local i:=0 Until vcount
				Local p=i*32
				Local v:=vs.Get( i )
				vdata.PokeFloat p,v.x
				vdata.PokeFloat p+4,v.y
				vdata.PokeFloat p+8,v.z
				vdata.PokeFloat p+12,v.nx
				vdata.PokeFloat p+16,v.ny
				vdata.PokeFloat p+20,v.nz
				vdata.PokeFloat p+24,v.s
				vdata.PokeFloat p+28,v.t
			Next
			
			Local idata:=DataBuffer.Create( icount*2 )
			For Local i:=0 Until icount
				idata.PokeShort i*2,is.Get(i)
			Next
			
			Local bufs[2]
			glGenBuffers 2,bufs
			
			vbo=bufs[0]
			glBindBuffer GL_ARRAY_BUFFER,vbo
			glBufferData GL_ARRAY_BUFFER,vdata.Size(),vdata,GL_STATIC_DRAW
			
			ibo=bufs[1]
			glBindBuffer GL_ELEMENT_ARRAY_BUFFER,ibo
			glBufferData GL_ELEMENT_ARRAY_BUFFER,idata.Size(),idata,GL_STATIC_DRAW
		
		Endif
		
		glEnableClientState GL_VERTEX_ARRAY
		glEnableClientState GL_NORMAL_ARRAY
		glEnableClientState GL_TEXTURE_COORD_ARRAY

		glDisableClientState GL_COLOR_ARRAY
		
		glVertexPointer 3,GL_FLOAT,32,0
		glNormalPointer GL_FLOAT,32,12
		glTexCoordPointer 2,GL_FLOAT,32,24		

	End
	
	Method Render()
	
		glDrawElements GL_TRIANGLES,icount,GL_UNSIGNED_SHORT,0

	End
	
	Private

	Field vs:=New VertexStack
	Field is:=New IntStack
	
	Field vmap:=New VertexMap&lt;Int&gt;

	Field vbo,ibo,vcount,icount
	
End

Class ObjLoader

	Method LoadMesh:Mesh( path$ )
		Local mesh:=New Mesh
	
		Local v:=New FloatStack
		Local vt:=New FloatStack
		Local vn:=New FloatStack
		
		Print "Load obj file:"+path
		
		For Local line:=Eachin LoadString( path ).Split( "~n" )
		
			line=line.Trim()
			If Not line Or line.StartsWith( "#" ) Continue
			
			Print line
			
			Local bits:=line.Split( " " )
			Select bits[0]
			Case "v"
				If bits.Length=4
					v.Push Float( bits[1] )
					v.Push Float( bits[2] )
					v.Push Float( bits[3] )
				Else
					Error "obj error"
				Endif
			Case "vn"
				If bits.Length=4
					vn.Push Float( bits[1] )
					vn.Push Float( bits[2] )
					vn.Push Float( bits[3] )
				Else
					Error "obj error"
				Endif
			Case "vt"
				If bits.Length=3
					vt.Push Float( bits[1] )
					vt.Push Float( bits[2] )
				Else
					Error "obj error"
				Endif
			Case "f"
				If bits.Length=4
					For Local i=1 To 3
						Local bits2:=bits[i].Split( "/" )
						If bits2.Length=3
							Local vi:=(Int(bits2[0])-1)*3
							Local vti:=(Int(bits2[1])-1)*2
							Local vni:=(Int(bits2[2])-1)*3
							mesh.AddVertex v.Get(vi),v.Get(vi+1),v.Get(vi+2),vn.Get(vni),vn.Get(vni+1),vn.Get(vni+2),vt.Get(vti),vt.Get(vti+1)
						Else
							Error "obj error"
						Endif
					Next
				Else
					Error "obj error"
				Endif
			Case "mtllib"
			Case "usemtl"
			Case "s"
			Default
				Error "obj error"
			End
		Next
		
		Return mesh
	End

End

Class MyApp Extends App

	Field rot#
	
	Field mesh:Mesh

	Method OnCreate()
	
		Local loader:=New ObjLoader
		
		mesh=loader.LoadMesh( "cube.txt" )
		
		SetUpdateRate 60
	End
	
	Method OnUpdate()

		rot+=1
		
	End
	
	Method OnRender()
	
		glViewport 0,0,DeviceWidth,DeviceHeight
	
		glMatrixMode( GL_PROJECTION );
		glLoadIdentity
		glFrustumf -1,1,-1,1,1,100
		glMatrixMode( GL_MODELVIEW );
		
		glClearColor 0,0,.5,1
		glClear GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT
		
		glDisable GL_BLEND
		
		glEnable GL_DEPTH_TEST
		glDepthFunc GL_LESS
		
		glEnable GL_LIGHTING
		glEnable GL_LIGHT0
		glLoadIdentity
		glLightfv GL_LIGHT0,GL_POSITION,[0.0,5.0,-10.0,1.0]
		
		mesh.Bind
		
		For Local x#=-8 To 8 Step 4
			
			glLoadIdentity
			glTranslatef x,0,-10
			glRotatef rot,0,0,1
			glRotatef rot*.3,0,1,0
	
			mesh.Render
			
		Next
		
	End
	
End

Function Main()

	New MyApp
	
End
</textarea> <br><br></td></tr></table><br>
<a name="2020525"></a>

<a name="2020526"></a>

<a name="2020534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very cool! Many thanks Mark<br><br><img src="http://www.sedm.de/monkey/s3d/shot04.jpg"><br><br>let me now read and realize what you've done ;)<br><br>iOS simulator: fun with normals<br><img src="http://www.sedm.de/monkey/s3d/shot05.jpg"><br><br>looks good on android<br><img src="http://www.sedm.de/monkey/s3d/shot06.jpg"> <br><br></td></tr></table><br>
<a name="2020547"></a>

<a name="2020551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> textures seems to be turned by 180 degrees. The monkey should stay at the bottom of the face.<br><img src="http://www.sedm.de/monkey/s3d/shot07.jpg"><br><br>EDIT:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
glMatrixMode(GL_TEXTURE);
glLoadIdentity();
glScalef(1.0, -1.0, 1.0);
</textarea><br>does the job ;) <br><br></td></tr></table><br>
<a name="2020560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> now it works<br><br><img src="http://www.sedm.de/monkey/s3d/shot08.jpg"> <br><br></td></tr></table><br>
<a name="2020569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> yet another issue. On android i got the runtime error: "length - offset &lt; needed" at glMaterialfv functions, for example:<br><br><pre class=code>
glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, Self.mat.ambient, 0)
</pre><br><br> Any idea what is going wrong?<br><br>Source + Executable: <a href="http://www.sedm.de/monkey/s3d/monkeytest.zip" target="_blank">http://www.sedm.de/monkey/s3d/monkeytest.zip</a> <br><br></td></tr></table><br>
<a name="2020563"></a>

<a name="2020571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your new signature image would look better with tighter shadows. Awesome progress on this. :) <br><br></td></tr></table><br>
<a name="2020572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> when i don't know what's going wrong and i make steps over steps in the same footsteps, i play with photoshop ;) <br><br></td></tr></table><br>
<a name="2020573"></a>

<a name="2020574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good use of time! I am a Photoshop wizard. If you ever have questions I can probably help. :) <br><br></td></tr></table><br>
<a name="2020596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >samowitsch</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very cool. Is there anywhere a complete example? <br><br></td></tr></table><br>
<a name="2020597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> in the archive i've posted: <a href="http://www.sedm.de/monkey/s3d/monkeytest.zip" target="_blank">http://www.sedm.de/monkey/s3d/monkeytest.zip</a> <br><br></td></tr></table><br>
<a name="2020604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> now we have this:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import s3d

Class MyApp Extends App
	Field cam:Camera, light:Light, mesh:Mesh
	
	Method OnCreate()
		cam		= CreateCamera
		light	= CreateLight
		mesh	= LoadMesh("monkey.obj")
		
		PositionEntity mesh, 0.0, 0.0, -4.0
		
		PositionEntity light, -5.0, 5.0, 5.0
		CameraClsColor cam, 0.3, 0.6, 0.9
		
		SetUpdateRate 30
	End
	
	Method OnUpdate()
		TurnEntity mesh, 1.0, 1.0, 1.0
	End
	
	Method OnRender()
		RenderWorld
	End
	
End

Function Main()
	New MyApp
End
</textarea><br>...to produce this:<br><img src="http://www.sedm.de/monkey/s3d/shot09.jpg"><br><br>here is the module so far:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo
Import opengl.gles11

Class Vector
	Method New(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
		Self.x = x; Self.y = y; Self.z = z; Self.w = 1.0
	End
	Method set:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
		Self.x = x; Self.y = y; Self.z = z; Self.w = 1.0
	End
	Method get:Float[](); Return [Self.x, Self.y, Self.z, Self.w]; End
	Method X:Float(); Return Self.x; End
	Method Y:Float(); Return Self.y; End
	Method Z:Float(); Return Self.z; End
	Method add:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
		Self.x += x; Self.y += y; Self.z += z
	End
	Method add:Void(vec:Vector)
		Self.x += vec.X(); Self.y += vec.Y(); Self.z += vec.Z()
	End
	
	Private
	Field x:Float, y:Float, z:Float, w:Float
End

Class Entity
	Method New(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
		Self.pos	= New Vector(x, y, z)
		Self.rot	= New Vector(x, y, z)
		Self.scale	= New Vector(1.0, 1.0, 1.0)
	End
	
	Method setPositon:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
		Self.pos.set(x, y, z)
	End
	
	Method setRotation:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
		Self.rot.set(x, y, z)
	End
	
	Method getPosition:Float[](); Return Self.pos.get(); End
	Method getRotation:Float[](); Return Self.rot.get(); End
	Method getScale:Float[](); Return Self.scale.get(); End
	Method turn:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
		Self.rot.add(x, y, z)
	End
	
	Private
	Field pos:Vector, rot:Vector, scale:Vector
End

Class Vertex
	Field x#,y#,z#
	Field nx#,ny#,nz#
	Field s#,t#
	
	Method New( x#,y#,z#,nx#=0,ny#=0,nz#=0,s#=0,t#=0 )
		Self.x=x;Self.y=y;Self.z=z
		Self.nx=nx;Self.ny=ny;Self.nz=nz
		Self.s=s;Self.t=t
	End
	
	Method Equals?( v:Vertex )
		Return x=v.x And y=v.y And z=v.z And nx=v.nx And ny=v.ny And nz=v.nz And s=v.s And t=v.t
	End
	
	Method Compare( with:Vertex )
		'memcmp!
		If x&lt;with.x Return -1
		If x&gt;with.x Return 1
		If y&lt;with.y Return -1
		If y&gt;with.y Return 1
		If z&lt;with.z Return -1
		If z&gt;with.z Return 1
		If nx&lt;with.nx Return -1
		If nx&gt;with.nx Return 1
		If ny&lt;with.ny Return -1
		If ny&gt;with.ny Return 1
		If nz&lt;with.nz Return -1
		If nz&gt;with.nz Return 1
		If s&lt;with.s Return -1
		If s&gt;with.s Return 1
		If t&lt;with.t Return -1
		If t&gt;with.t Return 1
		Return 0
	End
End

Class VertexMap&lt;T&gt; Extends Map&lt;Vertex,T&gt;
	Method Compare( lhs:Vertex,rhs:Vertex )
		Return lhs.Compare( rhs )
	End
End

Class VertexStack Extends Stack&lt;Vertex&gt;
	Method Equals?( lhs:Vertex,rhs:Vertex )
		Return lhs.Equals( rhs )
	End

	Method Compare( lhs:Vertex,rhs:Vertex )
		Return lhs.Compare( rhs )
	End
End

Class Color
	Method New(r:Float = 0.0, g:Float = 0.0, b:Float = 0.0, a:Float = 1.0)
		Self.r = r; Self.g = g; Self.b = b; Self.a = a	
	End
	Method set:Void(r:Float = 0.0, g:Float = 0.0, b:Float = 0.0, a:Float = 1.0)
		Self.r = r; Self.g = g; Self.b = b; Self.a = a	
	End
	Method RED:Float(); Return Self.r; End
	Method GREEN:Float(); Return Self.g; End
	Method BLUE:Float(); Return Self.b; End
	Method ALPHA:Float(); Return Self.a; End
	
	Private
	Field r:Float, g:Float, b:Float, a:Float
End

Class Texture
	Method New(fileName:String)
		Local buf:int[1]
		glGenTextures(1, buf)
		Self.tbo = buf[0]
		
		glBindTexture(GL_TEXTURE_2D, Self.tbo)
		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR)
		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR)
		
		Self.textureData = LoadImageData(fileName, Self.textureInfo)
		glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, Self.textureInfo[0], Self.textureInfo[1], 0, GL_RGBA, GL_UNSIGNED_BYTE, Self.textureData)
		Self.FlipY()
	End
	Method FlipY:Void()
		glMatrixMode(GL_TEXTURE);
		glLoadIdentity();
		glScalef(1.0, -1.0, 1.0);
	End
	Method getWidth:Int(); Return Self.textureInfo[0]; End
	Method getHeight:Int(); Return Self.textureInfo[1]; End
	Method getBufObj:Int(); Return Self.tbo; End
	Method getData:DataBuffer(); Return Self.texture; End
	
	Private
	Field tbo:Int
	Field textureData:DataBuffer
	Field textureInfo:Int[2]
End

Class Material
	Method New()
		Self.alpha			= 1.0
		Self.ambient		= [0.0, 0.0, 0.0]
		Self.diffuse		= [1.0, 1.0, 1.0]
		Self.specular		= [1.0, 1.0, 1.0]
		Self.shininess		= 0.5
		Self.illumination	= 1.0
	End
	
	Method setAlpha:Void(alpha:Float = 1.0)
		Self.alpha = alpha
	End
	Method setDiffuse:Void(r:Float = 1.0, g:Float = 1.0, b:Float = 1.0)
		Self.diffuse = [r, g, b]
	End
	Method setAmbient:Void(r:Float = 0.0, g:Float = 0.0, b:Float = 0.0)
		Self.ambient = [r, g, b]
	End
	Method setSpecular:Void(r:Float = 1.0, g:Float = 1.0, b:Float = 1.0)
		Self.specular = [r, g, b]
	End
	Method setShininess:Void(shininess:Float = 0.5)
		Self.shininess = shininess
	End
	Method setIllumination:Void(illumination:Float = 1.0)
		Self.illumination = illumination
	End
	Method getAmbient:Float[](); Return Self.ambient; End
	Method getDiffuse:Float[](); Return Self.diffuse; End
	Method getSpecular:Float[](); Return Self.specular; End
	Method getAlpha:Float(); Return Self.alpha; End
	Method getShininess:Float(); Return Self.shininess; End
	Method getIllumination:Float(); Return Self.illumination; End
	Method getIlluminationModel:Int(); Return Self.illumModel; End
	Method getTexture:Texture(); Return Self.texture; End
	Method getName:String(); Return Self.matName; End
	Method loadTexture:Texture(textureFile:String)
		Self.texture = New Texture(textureFile)
		Return Self.texture
	End
	
	Method loadMaterial:Void(matFile:String)
		Local in:String = LoadString(matFile)
		If in
			Local lines:String[] = in.Split("~n")
			For Local line:String = EachIn lines
				line = line.Trim()
				If Not line Or line.StartsWith("#") Continue
				Local bits:String[] = line.Split(" ")
				Select bits[0].Trim().ToLower()
					Case "newmtl"	; Self.matName	= bits[1]
					Case "ns"		; Self.shininess	= Float(bits[1])
					Case "ka"		; Self.ambient = [Float(bits[1]), Float(bits[2]), Float(bits[3])]
					Case "kd"		; Self.diffuse = [Float(bits[1]), Float(bits[2]), Float(bits[3])]
					Case "ks"		; Self.specular = [Float(bits[1]), Float(bits[2]), Float(bits[3])]
					Case "ni"		; Self.illumination = Float(bits[1])
					Case "d", "tr"	; Self.alpha = Float(bits[1])
					Case "illum"	; Self.illumModel = Int(bits[1])
					Case "map_kd"
						Self.loadTexture(bits[1]) 
				End
			Next
		Else
			Error(matFile + "doesnt exists")
		EndIf
	End

	Private
	Field ambient:Float[4]
	Field diffuse:Float[4]
	Field specular:Float[4]
	Field alpha:Float
	Field shininess:Float
	Field illumination:Float
	Field illumModel:Int
	Field texture:Texture
	Field matName:String
End

Class Mesh Extends Entity
	Method New()
		Self.mat = New Material
	End
	
	Method AddVertex( v:Vertex )
		Local i
		If vmap.Contains( v )
			i=vmap.Get( v )
		Else
			i=vs.Length
			vmap.Set v,i
			vs.Push v
		Endif
		is.Push i
	End

	Method AddVertex( x#,y#,z#,nx#,ny#,nz#,s#,t# )
		AddVertex New Vertex( x,y,z,nx,ny,nz,s,t )
	End
	
	Method Bind()
	
		If vbo
			glBindBuffer GL_ARRAY_BUFFER,vbo
			glBindBuffer GL_ELEMENT_ARRAY_BUFFER,ibo
		Else
			vcount=vs.Length
			icount=is.Length
			
			Local vdata:=DataBuffer.Create( vcount*32 )
			For Local i:=0 Until vcount
				Local p=i*32
				Local v:=vs.Get( i )
				vdata.PokeFloat p,v.x
				vdata.PokeFloat p+4,v.y
				vdata.PokeFloat p+8,v.z
				vdata.PokeFloat p+12,v.nx
				vdata.PokeFloat p+16,v.ny
				vdata.PokeFloat p+20,v.nz
				vdata.PokeFloat p+24,v.s
				vdata.PokeFloat p+28,v.t
			Next
			
			Local idata:=DataBuffer.Create( icount*2 )
			For Local i:=0 Until icount
				idata.PokeShort i*2,is.Get(i)
			Next
			
			Local bufs[2]
			glGenBuffers 2,bufs
			
			vbo=bufs[0]
			glBindBuffer GL_ARRAY_BUFFER,vbo
			glBufferData GL_ARRAY_BUFFER,vdata.Size(),vdata,GL_STATIC_DRAW
			
			ibo=bufs[1]
			glBindBuffer GL_ELEMENT_ARRAY_BUFFER,ibo
			glBufferData GL_ELEMENT_ARRAY_BUFFER,idata.Size(),idata,GL_STATIC_DRAW
		Endif
		
		glEnableClientState GL_VERTEX_ARRAY
		glEnableClientState GL_NORMAL_ARRAY
		glEnableClientState GL_TEXTURE_COORD_ARRAY

		glDisableClientState GL_COLOR_ARRAY
		
		glVertexPointer 3,GL_FLOAT,32,0
		glNormalPointer GL_FLOAT,32,12
		glTexCoordPointer 2,GL_FLOAT,32,24		

	End
	
	Method Render(lights:Light[])
		glMatrixMode(GL_MODELVIEW)
		glLoadIdentity()
		
		For Local l:Light = EachIn lights
			If l l.update()
		Next
		
		Self.Bind()
		
		glLoadIdentity()
		glTranslatef(Self.pos.X(), Self.pos.Y(), Self.pos.Z())
		glRotatef(Self.rot.X(), 1.0, 0.0, 0.0)
		glRotatef(Self.rot.Y(), 0.0, 1.0, 0.0)
		glRotatef(Self.rot.Z(), 0.0, 0.0, 1.0)
		
		glEnable(GL_COLOR_MATERIAL)
		glEnable(GL_TEXTURE_2D)
		'glBindTexture(GL_TEXTURE_2D, Self.mat.getTexture().getBufObj())		
		glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, Self.mat.getAmbient())
		glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, Self.mat.getDiffuse())
		glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, Self.mat.getSpecular())
		glMaterialf(GL_FRONT_AND_BACK, GL_ALPHA, Self.mat.getAlpha())
		glMaterialf(GL_FRONT_AND_BACK, GL_SHININESS, Self.mat.getShininess())
		glMaterialf(GL_FRONT_AND_BACK, GL_EMISSION, Self.mat.getIllumination())
		
		glDrawElements(GL_TRIANGLES,icount,GL_UNSIGNED_SHORT,0)
	End
		
	Private
	Field vs:=New VertexStack
	Field is:=New IntStack
	
	Field vmap:=New VertexMap&lt;Int&gt;

	Field vbo,ibo,vcount,icount
	Field mat:Material
End

' written by Mark Sibly (C)2012
Class ObjLoader

	Method LoadMesh:Mesh( path$ )
		Local mesh:=New Mesh
	
		Local v:=New FloatStack
		Local vt:=New FloatStack
		Local vn:=New FloatStack
		
		Print "Load obj file:"+path
		
		For Local line:=Eachin LoadString( path ).Split( "~n" )
		
			line=line.Trim()
			If Not line Or line.StartsWith( "#" ) Continue
			
			'Print line
			
			Local bits:=line.Split( " " )
			Select bits[0]
			Case "v"
				If bits.Length=4
					v.Push Float( bits[1] )
					v.Push Float( bits[2] )
					v.Push Float( bits[3] )
				Else
					Error "obj error"
				Endif
			Case "vn"
				If bits.Length=4
					vn.Push Float( bits[1] )
					vn.Push Float( bits[2] )
					vn.Push Float( bits[3] )
				Else
					Error "obj error"
				Endif
			Case "vt"
				If bits.Length=3
					vt.Push Float( bits[1] )
					vt.Push Float( bits[2] )
				Else
					Error "obj error"
				Endif
			Case "f"
				If bits.Length=4
					For Local i=1 To 3
						Local bits2:=bits[i].Split( "/" )
						If bits2.Length=3
							Local vi:=(Int(bits2[0])-1)*3
							Local vti:=(Int(bits2[1])-1)*2
							Local vni:=(Int(bits2[2])-1)*3
							mesh.AddVertex v.Get(vi),v.Get(vi+1),v.Get(vi+2),vn.Get(vni),vn.Get(vni+1),vn.Get(vni+2),vt.Get(vti),vt.Get(vti+1)
						Else
							Error "obj error"
						Endif
					Next
				Else
					Error "obj error"
				Endif
			Case "mtllib"
				mesh.mat.loadMaterial(bits[1])
				
			Case "usemtl"
			Case "s"
			'Default
			'	Error "obj error"
			End
		Next
		
		Return mesh
	End

End

Class Light Extends Entity
	Method New(num:Int = GL_LIGHT0, x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
		Self.num = num
		Self.pos.set(x, y, z)
	End
	
	Method update:Void()
		glMatrixMode(GL_MODELVIEW)
		glEnable(GL_LIGHTING)
		glEnable(Self.num)
		glLoadIdentity()
		glLightfv(Self.num, GL_POSITION, Self.pos.get())
	End
	
	Private
	Field num:Int
End

Class Frustum
	Method New(left:Float = -1.0, right:Float = 1.0, bottom:Float = -1.0, top:Float = 1.0, near:Float = 1.0, far:Float = 100.0)
		Self.left	= left
		Self.right	= right
		Self.bottom	= bottom
		Self.top	= top
		Self.near	= near
		Self.far	= far
	End
	Method set:Void(left:Float = -1.0, right:Float = 1.0, bottom:Float = -1.0, top:Float = 1.0, near:Float = 1.0, far:Float = 100.0)
		Self.left	= left
		Self.right	= right
		Self.bottom	= bottom
		Self.top	= top
		Self.near	= near
		Self.far	= far
	End
	Method setNear:Void(value:Float = 1.0); Self.near = value; End
	Method setFar:Void(value:Float = 100.0); Self.far = value; End
	Method LEFT:Float(); Return Self.left; End
	Method TOP:Float(); Return Self.top; End
	Method RIGHT:Float(); Return Self.right; End
	Method BOTTOM:Float(); Return Self.bottom; End
	Method NEAR:Float(); Return Self.near; End
	Method FAR:Float(); Return Self.far; End
	
	Private
	Field left:Float, top:Float, right:Float, bottom:Float, near:Float, far:Float
End

Class Viewport
	Method New()	
		Self.x 		= 0.0
		Self.y		= 0.0
		Self.width	= DeviceWidth()
		Self.height	= DeviceHeight()
	End
	
	Method set:Void(x:Float, y:Float, width:Float, height:Float)
		Self.x		= x
		Self.y		= y
		Self.width	= width
		Self.height	= height
	End
	
	Method X:Float(); Return Self.x; End
	Method Y:Float(); Return Self.y; End
	Method WIDTH:Float(); Return Self.width; End
	Method HEIGHT:Float(); Return Self.height; End
	
	Private 
	Field x:Float, y:Float, width:Float, height:Float
End

Class Camera Extends Entity
	Method New()
		Self.frustum	= New Frustum()
		Self.viewport	= New Viewport()
		Self.clearColor	= New Color()
		Self.clearMode	= GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT
	End
	
	Method setNear:Void(value:Float = 1.0); Self.frustum.setNear(value); End
	Method setFar:Void(value:Float = 100.0); Self.frustum.setFar(value); End
	Method clsColor:Void(r:Float = 0.0, g:Float = 0.0, b:Float = 0.0, a:Float = 1.0)
		Self.clearColor.set(r, g, b, a)
	End
	Method clsMode:Void(mode:Int = GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT)
		Self.clearMode = mode
	End
	Method getFrustum:Frustum(); Return Self.frustum; End
	Method getViewport:Viewport(); Return Self.viewport; End
	Method getClearColor:Color(); Return Self.clearColor; End
	Method getClearMode:Int(); Return Self.clearMode; End
	
	Private
	Field frustum:Frustum, viewport:Viewport, clearColor:Color, clearMode:Int
End

Global __s3d:S3D

Class S3D
	Method New()
		Self.cameras	= New List&lt;Camera&gt;
		Self.meshes		= New List&lt;Mesh&gt;
	End
	
	Method renderWorld:Void()
		If Self.currentCamera
			Local fr:Frustum	= Self.currentCamera.getFrustum()
			Local vp:Viewport	= Self.currentCamera.getViewport()
			Local cc:Color		= Self.currentCamera.getClearColor()
			
			glViewport(vp.X(), vp.Y(),vp.WIDTH(), vp.HEIGHT())
			
			glMatrixMode(GL_PROJECTION);
			glLoadIdentity()
			glFrustumf(fr.LEFT(), fr.RIGHT(), fr.BOTTOM(), fr.TOP(), fr.NEAR(), fr.FAR())
			
			glClearColor(cc.RED(), cc.GREEN(), cc.BLUE(), cc.ALPHA())
			glClear(Self.currentCamera.getClearMode())
			
			glDisable(GL_BLEND)
			glShadeModel(GL_SMOOTH)
			glEnable(GL_DEPTH_TEST)
			glDepthFunc(GL_LESS)
			
			glEnable GL_COLOR_MATERIAL
			glEnable GL_TEXTURE_2D
			
			For Local m:Mesh = EachIn Self.meshes
				m.Render(Self.lights)
			Next
		EndIf
	End
	
	Method createCamera:Camera()
		Local cam:Camera = New Camera()
		Self.currentCamera	= cam
		Self.cameras.AddLast(cam)
		Return cam
	End
	
	Method createLight:Light()
		Local num:Int = GL_LIGHT0
		Local l:Light = Null
		
		For Local i:Int = 0 Until 7
			If Self.lights[i] = Null
				Select i
					Case 0	; num = GL_LIGHT0
					Case 1	; num = GL_LIGHT1
					Case 2	; num = GL_LIGHT2
					Case 3	; num = GL_LIGHT3
					Case 4	; num = GL_LIGHT4
					Case 5	; num = GL_LIGHT5
					Case 6	; num = GL_LIGHT6
					Case 7	; num = GL_LIGHT7
					Exit
				End
				
				l = New Light(num)
				Self.lights[i] = l
			EndIf
		Next
		
		Return l
	End
	
	Method loadMesh:Mesh(fileName:String)
		Local loader:ObjLoader = New ObjLoader()
		Local mesh:Mesh = loader.LoadMesh(fileName)
		Self.meshes.AddLast(mesh)
		Return mesh
	End
	
	Private
	Field meshes:List&lt;Mesh&gt;
	Field lights:Light[8]
	Field cameras:List&lt;Camera&gt;
	
	Field currentCamera:Camera
End

Function InitS3D:S3D()
	If Not __s3d __s3d = New S3D()
	Return __s3d
End

Function RenderWorld:Void()
	__s3d.renderWorld()
End

Function CreateCamera:Camera()
	Return InitS3D().createCamera()
End

Function CreateLight:Light()
	Return InitS3D().createLight()
End

Function LoadMesh:Mesh(filename:String)
	Return InitS3D().loadMesh(filename)
End

Function CloneMesh:Mesh(mesh:Mesh)
	Local m:Mesh = New Mesh()
	m = mesh
	Return m
End

Function PositionEntity:Void(entity:Entity, x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
	entity.setPositon(x, y, z)
End

Function TurnEntity:Void(entity:Entity, x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
	entity.turn(x, y, z)
End

Function CameraClsColor:Void(camera:Camera, r:Float = 0.0, g:Float = 0.0, b:Float = 0.0)
	camera.clsColor(r, g, b)
End
</textarea><br><br>special thanx to mark sibly for the massive help! <br><br></td></tr></table><br>
<a name="2020607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is great work, well done. <br><br></td></tr></table><br>
<a name="2020608"></a>

<a name="2020610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> executable for Android:<br><img src="http://www.sedm.de/monkey/s3d/chart.png"><br><br>or try <a href="http://www.sedm.de/monkey/s3d/s3d.apk" target="_blank">http://www.sedm.de/monkey/s3d/s3d.apk</a><br><br>and a short video:<br><a href="http://www.youtube.com/watch?v=rhX93PxE5cU" target="_blank">http://www.youtube.com/watch?v=rhX93PxE5cU</a> <br><br></td></tr></table><br>
<a name="2020615"></a>

<a name="2020616"></a>

<a name="2020617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> another video, it shows 17 monkeys. 16 monkeys are just references and not real loaded meshes.<br><br><a href="http://www.youtube.com/watch?v=3d2-7E_6A5c&amp;feature=g-upl&amp;context=G2748571AUAAAAAAAAAA" target="_blank">http://www.youtube.com/watch?v=3d2-7E_6A5c&amp;feature=g-upl&amp;context=G2748571AUAAAAAAAAAA</a><br><br>the source for this demo:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import s3d

Class MyApp Extends App
	Field cam:Camera, light:Light, mesh:Mesh
	
	Field ref:MeshRef[16]
	Field refTurn:Vector[16]
	
	Method OnCreate()
		Seed = Millisecs()
		
		cam		= CreateCamera
		light	= CreateLight
		mesh	= LoadMesh("monkey.obj")
				
		PositionEntity mesh, 0.0, 2.0, -4.0		
		PositionEntity light, 0.0, 5.0, -8.0
		CameraClsColor cam, 0.3, 0.6, 0.9
		
		'let's create some monkeys
		Local x:Float = -4.0
		Local y:Float = -3.0
		Local z:Float = -16.0
		Local c:Int = 0
		For Local i:Int = 0 Until 16
			ref[i] = CloneMesh(mesh)
			refTurn[i] = New Vector(Rnd(-1.0, 1.0), Rnd(-1.0, 1.0), Rnd(-1.0, 1.0))
			
			PositionEntity ref[i], x, y, z
			x += 3
			c += 1
			
			If c = 4
				c = 0
				z += 3
				x = -4
			EndIf
		Next
		SetUpdateRate 30
	End
	
	Method OnUpdate()
		TurnEntity mesh, 1.0, 1.0, 1.0
		
		' turn the monkey horde
		For Local i:Int = 0 Until 16
			TurnEntity ref[i], refTurn[i].X(), refTurn[i].Y(), refTurn[i].Z()
		Next
	End
	
	Method OnRender()
		RenderWorld
	End
	
End

Function Main()
	New MyApp
End
</textarea><br><br>now it works also on iOS<br><img src="http://www.sedm.de/monkey/s3d/shot10.jpg"> <br><br></td></tr></table><br>
<a name="2020618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> And what about your first polygon <a href="http://www.monkeycoder.co.nz/Community/post.php?topic=2099&amp;post=20534" target="_blank">http://www.monkeycoder.co.nz/Community/post.php?topic=2099&amp;post=20534</a><br><br>with a texture on andriod/iOS ? <br><br></td></tr></table><br>
<a name="2020619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> like that?<br><br><img src="http://www.sedm.de/monkey/s3d/shot11.jpg"> <br><br></td></tr></table><br>
<a name="2020620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool ! <br><br></td></tr></table><br>
<a name="2020621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> very nice, <br><br></td></tr></table><br>
<a name="2020644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Restart!<br><br>S3D is now again at version 0.1. I've added the greatful code from the "Master of Desaster" Mark Sibly and enhanced the code like i can do.<br><br>The module : <a href="http://www.sedm.de/monkey/s3d/s3d.zip" target="_blank">http://www.sedm.de/monkey/s3d/s3d.zip</a><br>The 17 Monkeys Example: <a href="http://www.sedm.de/monkey/s3d/s3d17monkeys.zip" target="_blank">http://www.sedm.de/monkey/s3d/s3d17monkeys.zip</a><br><br>the demo doesn't work with GLFW, i've no idea why. I've just renamed the files so you not must edit your build config, and now it just will work on iOS and Android.<br><br>If you want to use custom models with S3D, here are some things you have to note:<br><br>1. the mesh must have texture coordinates (unwrap your mesh!)<br>2. at now you can only load Wavefront Object (*.obj) models with S3D<br>3. export your model with texture coordinates, uv coordinates and triangulate it. For Blender 2.6x: select "Include Normals" and "Triangulate Faces" in the export options.<br><br>If you want to use Wavefront Objects directly, add "|*.obj|*mtl" to the CONFIG.TXT. Otherwise you have to rename the file extension to "txt"<br><br>The plan is now to create a full 3D Engine which is to use like Blitz3D. Next step is to implement AABB bounding boxes for simple collisions<br><br>the changloig so far<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Neustart!
01/10/2012 - Restart! v0.1
added	: Classes by Mark Sibly: Mesh, Vertex, VertexMap, VertexStack, ObjLoader
added	: Classes Vector, Color, Entity, MeshRef, Texture, Material, Light, Frustum, Viewport, Camera, S3D
added	: Vector.New(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: Vector.set:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: Vector.X:Float(), Vector.Y:Float(), Vector.Z:Float()
added	: Vector.add:Void(vec:Vector)
added	: Vector.add:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: Entity.New(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: Entity.setPosition:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: Entity.setRotation:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: Entity.setScale:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: Entity.turn:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: Entity.move:Void(x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: Entity.getPosition:Float[]()
added	: Entity.getRotation:Float[]()
added	: Entity.getScale:Float[]()
added	: Color.New(r:Float = 0.0, g:Float = 0.0, b:Float = 0.0, a:Float = 1.0)
added	: Color.set:Void(r:Float = 0.0, g:Float = 0.0, b:Float = 0.0, a:Float = 1.0)
added	: Color.RED:Float(), Color.GREEN:Float(), Color.BLUE:Float(), Color.ALPHA:Float()
added	: Color.normalize:Float[](r:Float, g:Float, b:Float, a:Float) &lt;private
added	: Texture.New(filename:String)
added	: Texture.FlipY:Void()
added	: Texture.getWidth:Int(), Texture.getHeight:Int()
added	: Texture.getBufObj:Int(), Texture.getData:DataBuffer()
added	: Material.New()
added	: Material.setAlpha:Void(alpha:Float = 1.0)
added	: Material.setDiffuse:Void(r:Float = 1.0, g:Float = 1.0, b:Float = 1.0)
added	: Material.setAmbient:Void(r:Float = 0.0, g:Float = 0.0, b:Float = 0.0)
added	: Material.setSpecular:Void(r:Float = 1.0, g:Float = 1.0, b:Float = 1.0)
added	: Material.setShininess:Void(shininess:Float = 0.5)
added	: Material.setIllumination:Void(illumination:Float = 1.0)
added	: Material.Method getAmbient:Float[]()
added	: Material.getDiffuse:Float[]()
added	: Material.getSpecular:Float[]()
added	: Material.getAlpha:Float()
added	: Material.getShininess:Float()
added	: Material.getIllumination:Float()
added	: Material.getIlluminationModel:Int()
added	: Material.getTexture:Texture()
added	: Material.loadTexture:Texture(textureFile:String)
added	: Material.loadMaterial:Void(matFile:String)
added	: Mesh.createRef:MeshRef()
added	: MeshRef.New(mesh:Mesh)
added	: Light.New(num:Int = GL_LIGHT0, x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: Light.update:Void()
added	: Frustum.New(left:Float = -1.0, right:Float = 1.0, bottom:Float = -1.0, top:Float = 1.0, near:Float = 1.0, far:Float = 100.0)
added	: Frustum.set:Void(left:Float = -1.0, right:Float = 1.0, bottom:Float = -1.0, top:Float = 1.0, near:Float = 1.0, far:Float = 100.0)
added	: Frustum.setNear:Void(value:Float = 1.0)
added	: Frustum.setFar:Void(value:Float = 100.0)
added	: Frustum.LEFT:Float(), Frustum.TOP:Float(), Frustum.RIGHT:Float()
added	: Frustum.BOTTOM:Float(), Frustum.NEAR:Float(), Frustum.FAR:Float()
added	: Viewport.New(), Viewport.set:Void(x:Float, y:Float, width:Float, height:Float)
added	: Viewport.X:Float(), Y:Float(), WIDTH:Float(), HEIGHT:Float()
added	: Camera.New()
added	: Camera.setNear:Void(value:Float = 1.0)
added	: Camera.setFar:Void(value:Float = 100.0)
added	: Camera.clsColor:Void(r:Float = 0.0, g:Float = 0.0, b:Float = 0.0, a:Float = 1.0)
added	: Camera.clsMode:Void(mode:Int = GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT)
added	: Camera.getFrustum:Frustum(), Camera.getViewport:Viewport()
added	: Camera.getClearColor:Color(), Camera.getClearMode:Int()
added	: S3D.New()
added	: S3D.renderWorld:Void()
added	: S3D.createCamera:Camera()
added	: S3D.createLight:Light()
added	: S3D.loadMesh:Mesh(fileName:String)
added	: S3D.refMesh:MeshRef(mesh:Mesh)
added	: RenderWorld:Void()
added	: CreateCamera:Camera()
added	: CreateLight:Light()
added	: LoadMesh:Mesh(filename:String)
added	: CloneMesh:MeshRef(mesh:Mesh)
added	: PositionEntity:Void(entity:Entity, x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: TurnEntity:Void(entity:Entity, x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: MoveEntity:Void(entity:Entity, x:Float = 0.0, y:Float = 0.0, z:Float = 0.0)
added	: EntityX:Float(entity:Entity)
added	: EntityY:Float(entity:Entity)
added	: EntityZ:Float(entity:Entity)
added	: EntityPitch:Float(entity:Entity)
added	: EntityYaw:Float(entity:Entity)
added	: EntityRoll:Float(entity:Entity)
added	: CameraClsColor:Void(camera:Camera, r:Float = 0.0, g:Float = 0.0, b:Float = 0.0)
changed	: Mesh.render() calls the method Mesh.bind() automatically
changed	: Mesh.render() now has the parameter lights:Light[]
changed : Mesh.render() now iterate a list of references for this mesh
changed	: ObjLoader.LoadMesh() now loads the object material and his texture
changed	: global OpenGL settings moved from renderWorld() to New()
</textarea> <br><br></td></tr></table><br>
<a name="2020643"></a>

<a name="2020639"></a>

<a name="2020648"></a>

<a name="2020649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am impressed! Really nicer to see some 3D going on! Maybe I'll have to rename or redo my 2D Vector Class after all! :) <br><br></td></tr></table><br>
<a name="2020659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> That works on my Android phone, nice!<br><br>[Removed GLFW bug rambling <a href="/posts.php?topic=2124" target="_blank">already discovered by bruZard</a>... ] <br><br></td></tr></table><br>
<a name="2020651"></a>

<a name="2020652"></a>

<a name="2020653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> the code has works until i've renamed the resource files. There is no bug in the code. <br><br></td></tr></table><br>
<a name="2020654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> the glNormalPointer bug related to the issue that there is a bug in the native files of opengl.gles11 ... there is no function wich compare with the call an you have to add this function by yourself. I've posted that bug and i hope mark will fix it with the final 052 release. <br><br></td></tr></table><br>
<a name="2020655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, that's what I meant by posting the difference in definitions ^^<br><br>At least you know what the problem is, so that's good. <br><br></td></tr></table><br>
<a name="2020660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I found your <a href="/posts.php?topic=2124" target="_blank">bug report</a> (sorry, hadn't seen it before), and it now builds for GLFW after adding that function override.<br><br>However, it crashes on <i>LoadMesh("monkey.txt")</i> for me. So far, I've traced it to <i>Texture.New</i> -&gt; <i>glTexImage2D</i>, as the last piece of code that runs prior to that is <i>Self.textureData = LoadImageData(fileName, Self.textureInfo)</i>.<br><br>Did you have to modify anything else to get the latest code (in <a href="/post.php?topic=2099&amp;post=20644" target="_blank">your post above</a>) to run on GLFW? <br><br></td></tr></table><br>
<a name="2020661"></a>

<a name="2020662"></a>

<a name="2020663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> @DruggedBunny<br><br>First, in the zip file you downloaded, you need to change the "data" folder to "gles.data"<br><br>Then, you need to rename monkey.obj to monkeyobj.txt and then edit gles.monkey to load monkeyobj.txt instead of monkey.obj because LoadString only loads .txt, .xml, .json files<br><br>Now, rename monkey.mtl to monkeymtl.txt<br><br>Then, edit the monkeyobj.txt file and change the monkey.mtl reference to monkeymtl.txt<br><br>You may have to delete your glfw build folder for this project.<br><br>Then build again for glfw and it should work.  Did for me.<br><br>EDIT:<br>On my computer there is a LOT of flicker on the monkey.<br><br>EDIT 2:<br>If I comment out the line:<br>glLightfv GL_LIGHT0,GL_POSITION,[-5.0,5.0,3.0]<br>The flicker is gone. <br><br></td></tr></table><br>
<a name="2020664"></a>

<a name="2020665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> @benmc: thanks, but I think we're looking at different archives! I'm using those in <a href="/post.php?topic=2099&amp;post=20644" target="_blank">post #62</a>, and <i>s3d17monkeys.zip</i> contains a folder called <i>example.data</i>, containing:<br><br><pre class=code>
monkey.blend
monkey.jpg
monkey.txt
monkey_mat.txt
</pre><br><br>Your post <i>did</i> prompt me to check GLFW's CONFIG.TXT, but the filters look OK:<br><br><pre class=code>
TEXT_FILES=*.txt|*.xml|*.json

IMAGE_FILES=*.png|*.jpg
</pre> <br><br></td></tr></table><br>
<a name="2020666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> @DruggedBunny: I see.  I was getting the same error you were on the other code, just figured it was the same.  Still, might help someone else get the Monkey head example going.<br><br>On the example you are referring to, I get a "Monkey runtime error: Memory access violation" error. :( <br><br></td></tr></table><br>
<a name="2020668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>On the example you are referring to, I get a "Monkey runtime error: Memory access violation" error. :( <br> <br></div><br>There should be a list of lines below that, one of which should include <i>s3d17monkeys/example.monkey&lt;15&gt;</i> -- do you get that? If so, we have the same problem, which ultimately appears to be a crash in <i>glTexImage2D</i>. <br><br></td></tr></table><br>
<a name="2020672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Looks like GLFW doesn't like that particular jpg file - I converted it to png (and edited the material file) and it worked. <br><br></td></tr></table><br>
<a name="2020671"></a>

<a name="2020670"></a>

<a name="2020701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, yes, that does it. Turns out it's a progressive JPEG, which is unsupported by the <i>stb_image.c</i> loader GLFW uses.<br><br>Slightly OT: I notice also that trans/makemeta prevent this image from loading in HTML5 Mojo too (fine on all other targets) -- it appears that <i>get_info_jpg</i> returns 0, as it only appears to check for the 0xc0 marker; you get c0-c3 markers, with c2 being progressive.<br><br>If HTML5 is meant to load progressive JPEGs, this short BlitzMax function can correctly read the width/height from that JPEG (and 13,000 others), and might be easy enough to port to C. I tried hacking get_info_jpg to check for c0-c3 to no avail, but don't really understand the code well enough.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

ParseJPEG "C:\Users\James\Desktop\s3d17monkeys\example.data\monkey.jpg"



Function ParseJPEG (f:String)

	Local jpeg:TStream = BigEndianStream (ReadStream (f))
				
	If jpeg And StreamSize (jpeg) &gt; 1
	
			If ReadByte (jpeg) = $FF And ReadByte (jpeg) = $D8

				Local datalength:Int	' Block length
				Local marker:Byte	' Block marker

				While Not Eof (jpeg)
		
					Repeat
					Until ReadByte (jpeg) = $FF

					datalength = 0
					
					Repeat
						marker = ReadByte (jpeg)
					Until (marker &lt;&gt; $FF)

					' Grab length of block, UNLESS marker is standalone...

					Select marker
					
						Case $D0, $D1, $D2, $D3, $D4, $D5, $D6, $D7, $D8, $D9, $0, $FF
						
							' Standalone markers with no following data.
						
						Default

							' All other markers, read data:
							
							datalength = ReadShort (jpeg) - 2 ' The 2 subtracted bytes store the length itself...
							
					End Select

					Select marker

						' ------------------------------------------------
						' Frame markers (image data)
						' ------------------------------------------------

						Case $C0, $C1, $C2, $C3

							If datalength

								ReadByte (jpeg)						' BPP, ignored
								Local height:Int = ReadShort (jpeg)	' Height
								Local width:Int = ReadShort (jpeg)	' Width

								Print width + " x " + height + " - " + f + "!"
								
								Exit

							EndIf
						
						Default

							ReadString jpeg, datalength

					End Select

				Wend

			EndIf

		CloseStream jpeg

	EndIf

End Function
</textarea> <br><br></td></tr></table><br>
<a name="2020700"></a>

<a name="2020699"></a>

<a name="2020874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really looking forward to trying this later....... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
