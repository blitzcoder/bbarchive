<!DOCTYPE html><html lang="en" ><head ><title >Random Movement</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Random Movement</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=95" >BlitzPlus Beginners Area</a>/<a href="#bottom" >Random Movement</a><br><br>
<a name="857030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShaunVonSuffern</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im a little new to blitzplus and a I am trying to program a basic game where you move a ship and there is a another that the computer controls. If the two collide then the player lose health. (This program is text based.) So I need help with this:<br>1. Stop the computer just frezzing up and when it hits the wall to speed up.<br>2. When the two ships meet the player loses help and level restarts.<br>3. The ships dont have to be right on top of each other to collide.<br>4. More ships can apperar after a set time limit.<br>Here is the code. It is still a work in progress.<br><br>Graphics 640, 480<br>SeedRnd MilliSecs()<br>Const Ship$ = "&lt;|&gt;"<br>Const Esc = 1, Space = 57, Up = 200, LeftK = 203, RightK = 205, Down = 208, Shift = 54<br>Const Startx = 320, Starty = 240<br>Global EStartx = Rand(1,640)<br>Global EStarty = Rand(1,480)<br><br><br>Type Ship<br>	Field x, y<br>	Field Ship$<br>	Field directionx <br>	Field directiony <br>	Field hitpoints<br>End Type<br><br>Global cont = 1<br><br>Global Player.Ship = New Ship<br>	Player\x = Startx<br>	Player\y = Starty<br>	Player\Ship$ = Ship$<br>	player\hitpoints = 3<br><br>Global enemy.ship = New ship<br>	enemy\ship$ = ship$<br>	enemy\x = EStartx <br>	enemy\y = EStarty <br>	enemy\directionx = Rand(1,-1)<br>	enemy\directiony = Rand(1,-1)<br>	enemy\hitpoints = 3<br><br><br>While Not KeyHit(1) <br>	Cls<br>	DrawLevel()<br>	TestInput()<br>	TestEnemy()<br>	TestCollision()<br>	DrawHUD()<br>Flip<br>Wend<br><br>Function DrawLevel()<br>	Text Player\x, Player\y, Player\Ship$<br>	Text enemy\x, enemy\y, enemy\ship$ <br>End Function<br><br>Function TestInput()<br>	 <br>	If KeyDown(LeftK)<br>		Player\x = Player\x - 1<br>			If Player\x &lt;= 0<br>				Player\x = 10<br>			End If<br>		End If<br>		<br>	If KeyDown(RightK)<br>		Player\x = Player\x + 1<br>			If Player\x &gt;= 635<br>				Player\x = 610<br>			End If<br>		End If <br><br>	If KeyDown(Up)<br>		Player\y = Player\y - 1<br>			If Player\y &lt;= 0<br>				Player\y = 10<br>			End If<br>		End If <br><br>	If KeyDown(Down)<br>		Player\y = Player\y + 1<br>			If Player\y &gt;= 475<br>				Player\y = 450<br>			End If<br>		End If <br><br>End Function<br><br>Function TestEnemy()<br><br>enemy\x = enemy\x + enemy\directionx <br>	<br>	If enemy\x &lt;= 0<br>		enemy\x = 10<br>			enemy\directionx = enemy\directionx * -1 <br>				enemy\directionx = enemy\directionx + Rand(1,-1)<br>	End If<br>	<br>	If enemy\x &gt;= 635<br>		enemy\x = 610<br>			enemy\directionx = enemy\directionx * -1 	<br>				enemy\directionx = enemy\directionx + Rand(1,-1)<br>	End If<br><br>enemy\y = enemy\y + enemy\directiony<br><br>	If enemy\y &lt;= 0<br>		enemy\y = 10<br>			enemy\directiony = enemy\directiony * -1 <br>				enemy\directiony = enemy\directiony + Rand(1,-1)<br>	End If<br><br>	If enemy\y &gt;= 475<br>		enemy\y = 450<br>			enemy\directiony = enemy\directiony * -1 <br>				enemy\directiony = enemy\directiony + Rand(1,-1)<br>	End If<br><br>End Function<br><br>Function TestCollision()<br>If enemy\x = player\x And enemy\y = player\y Then<br>	DrawLevel()<br>		Player\Hitpoints = Player\Hitpoints - 1<br>			If player\hitpoints &lt;= 0 Then<br>				Delete player<br>			End If<br>	End If<br>End Function<br><br>Function DrawHUD()<br>	Text 0, 435, "HitPoints: " + player\hitpoints + ""<br>	Text 0, 450, "X Position: " + Player\x + ""<br>	Text 0, 465, "Y Position: " + Player\y + ""<br>	Text 0, 420, "X Position: " + enemy\x + ""<br>	Text 0, 405, "Y Position: " + enemy\y + ""<br>End Function <br><br></td></tr></table><br>
<a name="857047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> To answer your questions...<br><br>1. My computer didn't freeze up when the enemy ship hit an edge, but I do have a suggestion:<br><br>Whenever checking for collisions on an edge, you want to move the ship to the same number you're checking.  For example, you have;<br><pre class=code>
If enemy\x &lt;= 0
enemy\x = 10
enemy\directionx = enemy\directionx * -1
enemy\directionx = enemy\directionx + Rand(1,-1)
End If
</pre><br><br>You want to change the 10 to a zero.  What you have now causes the ship to "jump" to x=10, when it should appear to bounce.<br><br>Also, the line "enemy\directionx = enemy\directionx + Rand(1,-1)" is not needed, because it basically counter acts the previous line.<br><br>2 and 3.  You have the idea of checking of both x's and y's are equal, but this will only register a collision if the points meet exactly, as I'm sure you already know.  What you need to do is check if the strings themselves are colliding, and you do this using the StringWidth command.  This should help:<br><pre class=code>
If player\x &gt;= enemy\x And player\x &lt;= enemey\x+StringWidth("&lt;|&gt;"&gt;
If player\y &gt;= enemy\y And player\y &lt;= enemy\y+12
player\hitpoints=player\hitpoints-1
Endif
Endif
</pre><br><br>Basically here you want to see if your x is between the enemy's x and the point that is x+ the width of the enemy, and the y is between the enemy y and the y+ the height of the font.  When your x and y is between these points, you have a collision. <br><br>4.  You're getting into some type manipulation, which you'll get with more experience.  Focus on getting this off the ground :)<br><br>So far you have a solid start for a game, I hope this helped. <br><br></td></tr></table><br>
<a name="857160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShaunVonSuffern</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank you very much <br><br></td></tr></table><br>
<a name="857161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShaunVonSuffern</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> One more thing, how do i get the ship to speed up after it hits the wall? <br><br></td></tr></table><br>
<a name="857196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, what you would want to do is have a speed variable.  So, when moving the enemy, you'd do:<br><pre class=code>
enemy\x= enemy\x + (speed * enemy\directionx)
</pre><br><br>That way, the direction will make speed positive or negative, causing a change of direction, but you can also make speed bigger or smaller.<br><br>You'll want to do the same thing to the y movement as well.<br><br>Now all you have to do is just add a speed=speed+1 every time it hits a wall. <br><br></td></tr></table><br>
<a name="857507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShaunVonSuffern</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> One more thing, I have a ship that bounces off the walls but sometimes it will either get stuck, move up or down, or not at all, what do i do. <br><br></td></tr></table><br>
<a name="857608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That could be caused by the line<br><br><pre class=code>
enemy\directionx = enemy\directionx + Rand(1,-1)
</pre><br><br>Which should probably be eliminated, along with all the lines with it. <br><br></td></tr></table><br>
<a name="857825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShaunVonSuffern</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did that, here is the code for movement<br><br>;Enemy 2 - Bounces Off Walls<br>enemy2\x = enemy2\x + (EnemySpeed * enemy2\directionx) <br>	<br>	If enemy2\x &lt;= 0 <br>		enemy2\x = 0<br>			enemy2\x= enemy2\x + (EnemySpeed * enemy2\directionx) * -1<br>	End If<br>	<br>	If enemy2\x &gt;= 615 <br>		enemy2\x = 615<br>			enemy2\x= enemy2\x + (EnemySpeed * enemy2\directionx) * -1<br>	End If<br><br>enemy2\y = enemy2\y + (EnemySpeed * enemy2\directiony)<br><br>	If enemy2\y &lt;= 0 <br>		enemy2\y = 0<br>			enemy2\y= enemy2\y + (EnemySpeed * enemy2\directiony) * -1<br>	End If<br><br><br>	If enemy2\y &gt;= 455 <br>		enemy2\y = 455<br>			enemy2\y= enemy2\y + (EnemySpeed * enemy2\directiony) * -1<br>	End If <br><br></td></tr></table><br>
<a name="858696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newcomer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> i would suggest that you replace the function testcollision() with<br><br>Function TestCollision()<br>If enemy\x &lt; player\x +10 And enemy\y &lt; player\y +10<br>	If enemy\x &gt; player\x - 10 And enemy\y &gt; player\y - 10<br>DrawLevel()<br>Player\Hitpoints = Player\Hitpoints - 1<br>If player\hitpoints &lt;= 0 Then<br>Delete player<br>End If<br>End If<br>EndIf<br>End Function<br><br>now you have it so if the player is within a 10 pixel square, then it counts as collision as opposed to when its exactly on opponent <br><br></td></tr></table><br>
<a name="858842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Newcomer<br><br>With testing StringWidth() and the height of the font, he already has a perfect collision with the text.  <br><br>Anyway, along with the problem at hand...<br>When you test the collision on a wall, instead of: <br>enemy2\x= enemy2\x + (EnemySpeed * enemy2\directionx) * -1<br>Just multiply enemy2\directionx by -1.  This will change the direction, and since you already have a line for moving the enemy before you check all the collisions, you'll be all set. <br><br></td></tr></table><br>
<a name="859785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShaunVonSuffern</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I probally havent been asking my questions clear enough, <br>My problem is that the ships that run on random movment will either not move at all, or will move only up or down, hit the wall and stop compleatly. I haven't changed my movment function at all from the last post. so what do i need to fix? tell me if i need to post anything else to help answer this problem. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
