<!DOCTYPE html><html lang="en" ><head ><title >Types and Timers</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Types and Timers</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=95" >BlitzPlus Beginners Area</a>/<a href="#bottom" >Types and Timers</a><br><br>
<a name="1051006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >InvincibleWall</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the game I have been making (a side scroll shooter) I have a function that prints large red numbers of how much damage a Player/Enemy just took above their head and slowly raises them into the air before they disappear.<br><br>&lt;code&gt;<br>Function Damage(Player.Player,Dmg,BlowBack)<br>	Player\cHP = Player\cHP - Dmg<br>	If Player\cHP &lt; 0<br>		Player\cHP = 0<br>	Else If Player\cHP &gt; Player\mHP<br>		Player\cHP = Player\mHP<br>	End If<br>	Player\xv = Player\xv + BlowBack<br>	Player\yv = Player\yv - BlowBack/2<br>	Damage.Damage = New Damage<br>	Damage\Damage = -Dmg<br>	Damage\x = Player\x<br>	Damage\y = Player\y - Player\h*3/4<br>	Damage\Limit = CreateTimer(1)<br>End Function<br>&lt;/code&gt;<br><br>And in the Update phase<br><br>For Damage.Damage = Each Damage<br>	Damage\y = Damage\y - 1<br>	If TimerTicks(Damage\Limit) &gt;= 1<br>		Delete Damage<br>	End If<br>Next<br><br>And in the Draw phase (though I don’t think this will help any)<br><br>For Damage.Damage = Each Damage<br>	SetFont DamageFont<br>	Color 200,0,0<br>Text Damage\x - (StringWidth(Damage\Damage)) /2,Damage\y,Damage\Damage<br>Next<br><br>The Type Itself<br><br>Type Damage<br>	Field x#,y#<br>	Field Damage<br>	Field Limit$<br>End Type<br><br>This is how it is called in the Collision testing function<br><br>Damage(Player,Attack\Damage,Attack\BlowBack * Attack\Dir)<br><br>Anyway there is a problem when many calls to Damage() occur. The timers implanted in Damage\Limit seem to never seem to tick if their calls were close together. So if you hit an enemy once and a big -7 goes above his head it will vanish in 1 second but if you spam the Attack key as fast as you can the obscured numbers never disappear (though if you wait a second after spamming and attack again, that attacks number will disappear.<br><br>I was also wondering if it was practical to use timers instead a variable that counts down with each interval of the loop. I know that it then voids the FPS of the game but beyond that I didn’t see anything exactly wrong with it. I’m using the same method to slow down each characters frame changing rate<br><br>Anyway if anyone can spot the problem it would be much appreciated<br><br>Thanks in advance<br><br><br>PS: BlitzBasic.com came up in EXTREMELY small print one day and hasn’t changed back (it is only BlitzBasic.com no other site does it) wondered if it is the new standard or if I changed some setting on the site on accident <br><br></td></tr></table><br>
<a name="1051043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I understand your problem correctly, what may be happening is that the hits are registered so close together that there may be -7's occupying the same pixel space, even though they are different items.  It just appears they are not disappearing, then disappear one by one till the last one goes (when you stop hitting the attack key).<br><br>As a side note, I've never used a CreateTimer timer in this fashion, so its hard for me to say whether that is your problem.  If it were me, I would have had a damage timer type variable that is just decremented every loop until 0.<br><br>Anyway, maybe one thing you could do is limit the amount of damages that can happen per second.  Use the millisecs() command to see how much time has elapsed since last call to Damage, and if its above a certain number, call Damage.  Otherwise ignore it. <br><br></td></tr></table><br>
<a name="1051217"></a>

<a name="1051242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >InvincibleWall</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> well I have just decided to change it to a countdown variable... which is what I probably should have started with anyway<br><br>and it cannot be that since they continue to rise indefinitely. so it is easy to see it is not the same one (I should have posted this image before hand)<br><br><img src="http://img524.imageshack.us/img524/3563/deletefail.jpg"><br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
