<!DOCTYPE html><html lang="en" ><head ><title >Userlib Issues</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Userlib Issues</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=95" >BlitzPlus Beginners Area</a>/<a href="#bottom" >Userlib Issues</a><br><br>
<a name="943789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I'm trying to implement some C code, but I keep getting the error "userlib not found".  <br><br>Here's the .decls:<br><pre class=code>
.lib "clear.dll"
ClearConsole():"_ClearConsole@0"
</pre><br><br>And here is the .dll:<br><pre class=code>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define BBDECL extern "C" _declspec(dllexport)
#define BBCALL _stdcall

BBDECL int BBCALL ClearConsole(void)
{
    system("cls");
    return 0;
}
</pre><br><br>I looked at the samples and tried to compare, but I can't find the problem.  It comes up yellow in the IDE so I guess there's a problem with the .dll?  I made the .dll by writing some C code and changing the extension to .dll.  <br><br>I think that's all the info that's relevant, any help is appreciated, thanks! <br><br></td></tr></table><br>
<a name="943827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >epiblitikos</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  I made the .dll by writing some C code and changing the extension to .dll.  <br></div><br><br>You got it right, the problem is with your DLL. You need to compile the source into a DLL--I use Visual C++ Express 2008 for my C/C++ codings (including DLLs), its free and available at <a href="http://www.microsoft.com/express/vc/" target="_blank">http://www.microsoft.com/express/vc/</a> .<br><br>How you'll want to proceed once you have VC++:<br>1) make a new project (call it "clear" in accordance with your .decls file)<br>2) select "Win32 Console Application"<br>3) under "Application Settings" select the "DLL" radio button and check the "Empty project" checkbox--click "OK".<br>4) add a source file (a .cpp file) to your project (right-click the "Source Files" folder in the Solution Explorer menu)<br>5) copy in your code (which looks clean to me)<br>6) select "Build clear" (under the build menu)<br>7) find clear.dll where you built it (use a search if you have to) and copy it into the userlibs folder in the BlitzPlus directory (along with your .decls file).<br><br><b><i>Note:</i></b> When you compile your program in BlitzPlus, you have to keep/distribute the DLLs you use with it. The DLLs are called in your program at the path given in the .lib directive of your .decls file. That is, if your .decls has the line<br><pre class=code> .lib "stuff/things.dll" </pre><br>Then you want to have things.dll at <i>{program folder}</i>/stuff/ in order for your compiled program to work. <br><br></td></tr></table><br>
<a name="943868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey thanks a lot, I am using the Code::Blocks IDE and I believe it has something similar to what you described in Visual C++.  If I cannot get it to work there I'll go download it.<br><br>EDIT: Wait, but if I'm doing it in Code::Blocks will the BBCALL and BBDECL declarations be the same?<br><br>Thanks again, <br><br></td></tr></table><br>
<a name="943981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >epiblitikos</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, those are standard C/C++ preprocessor calls. <br><br></td></tr></table><br>
<a name="944871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gosh I still can't get it to work, I know it's a long shot, but does anyone use Code::Blocks?  It's frustrating because I have the code and my program is ready to work except one of the crucial elements lies in this .dll... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
