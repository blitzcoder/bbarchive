<!DOCTYPE html><html lang="en" ><head ><title >Problem with a "test" game</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Problem with a "test" game</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=95" >BlitzPlus Beginners Area</a>/<a href="#bottom" >Problem with a "test" game</a><br><br>
<a name="835637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rubenll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi everyone!, I'm new on this forum, and, of course, in blitz programming. <br>I've been trying to create a little game in blitzplus, but I have found a problem that I can't solve. Could you help me?<br><br>The case is that when I try to kill the "enemy navs" they don't disappear, and if they do, the program crashes. I'm sure that this is a very simple problem, but how I'm new in this word, I don't see it. Anyway, thanks a lot.<br><br>Does anybody know how to kill the enemies?<br><br>Oh, yes, this program structure is the worst in the world, I know it. :-)<br><br>If you want to see the code in an editor: <a href="http://rapidshare.com/files/77814890/movement_test2.bb" target="_blank">http://rapidshare.com/files/77814890/movement_test2.bb</a><br><br><br>----------<br><br><br>;Variables<br>Global player.nav = New nav<br>Global bullet.ball = New ball<br>Global enemy.nav = New nav<br>Global leftkeyr = 1<br>Global randomnumber<br>Global randomgrade = 1000<br>Global maximumx,maximumy,minimx,minimy<br>Const rightkey = 205<br>Const leftkey = 203<br>Const upkey = 200<br>Const downkey = 208<br>Const spacekey = 31<br>Const esckey = 1<br>Const ball1$ = ""<br>Const nav1$ = "&lt;-*-&gt;"<br>Const startx% = 400<br>Const starty% = 300<br>Const startvel = 5<br>;-------------------------------------------------------------------------<br><br>;Types<br>Type nav<br>	Field x,y<br>	Field vel<br>	Field navimage$<br>	<br>End Type<br>player\x = startx<br>player\y = starty<br>player\vel = startvel<br>player\navimage = nav1$<br><br>Type ball<br>	Field x,y<br>	Field vel<br>	Field ballimage<br>End Type<br><br><br>;-------------------------------------------------------------------------<br><br><br>;#########################################################################<br>;Main loop<br>Graphics 800,600,16,2<br>SeedRnd MilliSecs<br>SetBuffer BackBuffer ()<br>While Not KeyHit (esckey)<br>	Cls<br>	userinput ()<br>	drawplayer ()<br>	drawbullets ()<br>	drawenemies ()<br>	deletenemies ()<br>	<br>	Flip<br>	Delay 20<br>Wend<br>End<br>;#########################################################################<br><br>	<br>;=========================================================================<br>;Functions                                                               ;<br>;=========================================================================<br><br>	<br>;draw player<br>Function drawplayer ()<br>	Text player\x,player\y,player\navimage,True,True<br>End Function<br><br>;-------------------------------------------------------------------------<br><br>;draw bullets<br>Function drawbullets ()<br>	For bullet.ball = Each ball<br>		If (bullet\y &gt; -10) Then<br>			Text bullet\x,bullet\y,"*",True,True<br>			bullet\y = bullet\y - bullet\vel<br>		End If<br>	Next<br>	<br>End Function<br><br>;draw enemies<br>Function drawenemies ()<br>	randomnumber = Rnd(0,randomgrade)<br>	If randomnumber &lt; 5 Then<br>		enemy.nav = New nav<br>		enemy\navimage = "(OO)"<br>		enemy\x = Rnd (20,790)<br>		enemy\y = Rnd (20,590)<br>	End If<br>	For enemy.nav = Each nav<br>		Text enemy\x,enemy\y,enemy\navimage,True,True<br>	Next<br>	randomgrade = randomgrade - 1<br>	<br>End Function<br><br>;eliminate enemies<br>Function deletenemies ()<br>	For bullet.ball = Each ball<br>		For enemy.nav = Each nav<br>			If (enemy\x &lt; (bullet\x + 10)) And (bullet\x &gt; (bullet\x - 10)) Then<br>				Delete enemy<br>			End If<br>		Next<br>	Next<br>End Function<br>	<br><br>;-------------------------------------------------------------------------<br><br>;User input<br>Function userinput ()<br>	If KeyDown (leftkey) Then<br>		player\x = player\x - player\vel<br>	End If<br>	If player\x &lt;=23 Then<br>		player\x = 23<br>	End If<br>	<br>	If KeyDown (rightkey) Then<br>		player\x = player\x + player\vel<br>	End If<br>	If player\x &gt;= 777 Then<br>		player\x = 777<br>	End If<br>	<br>	If KeyDown (upkey) Then<br>		player\y = player\y - player\vel<br>	End If<br>	If player\y &lt;=5 Then<br>		player\y = 5<br>	End If<br>	<br>	If KeyDown (downkey) Then<br>		player\y = player\y + player\vel<br>	End If<br>	If player\y &gt;= 595 Then<br>		player\y = 595<br>	End If<br>	<br>	If KeyDown (31) Then<br>		bullet.ball = New ball<br>		bullet\x = player\x<br>		bullet\y = player\y<br>		bullet\vel = 10<br>		bullet\ballimage = "*"<br>	End If<br>	<br>	<br>End Function<br><br>;=========================================================================<br><br><br><br>Again, thanks! <br><br></td></tr></table><br>
<a name="835657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reason is because in your delete enemies function the first 'enemy' the bullet collides with is the 'player' 'nav' type and so it deletes the 'player' 'nav' type instance which means when the code gets to the userinput function the 'player' instance is now null so it crashes as soon as it is referred to. <br><br>What you need to do to fix it is to prevent the player's own bullets from colliding with it.<br><br>Also, if I were to give advice I would suggest not using a global type called 'player' but simply have a field within the 'nav' type object which flags whether the nav is an enemy or a player (you could even do the ball/bullet in there as well). <br><br></td></tr></table><br>
<a name="835719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rubenll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks you a lot! now it works! Anyway, is sure that this "game" needs a lot of reviews, but this is a good step to make it work.<br><br>Ruben <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
