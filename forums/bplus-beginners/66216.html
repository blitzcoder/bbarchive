<!DOCTYPE html><html lang="en" ><head ><title >LockedPixels</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >LockedPixels</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=95" >BlitzPlus Beginners Area</a>/<a href="#bottom" >LockedPixels</a><br><br>
<a name="739932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, loading in an image &amp; then reading from it to put it in an array for faster processing later.<br><br>I'm using readpixelfast() &amp; then i read about the LockedPixels() command &amp; use Peek().<br><br>Tried both ways and they take pretty much the same time. Should they? And if so what is the point in using LockedPixels?<br><br>Thanks<br>Jim <br><br></td></tr></table><br>
<a name="740037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lockedpixels is faster for writing to by copying entire rows of banks.  Rather than simply plotting 1 pixel at a time with either writepixelfast or pokeint into the lockedpixels bank you can do something like this:<br><br>(pseudocode only as I can't remember the exact syntax for copybank right now)<br><br><pre class=code>
pixelbank = lockedpixels()
pitch=lockedpitch()

for row=0 to imageheight(image)-1
copybank  pixelbank,srcoff,yourbank,yourbankoffset,imagewidth(image)*4 ;for 32bit images
srcoff=srcoff+pitch
yourbankoffset=yourbankoffset+imagewidth(image)*4
next
</pre><br><br>Something like that should be faster, although probably not by a great deal as reading pixels is always going to be slow in blitz - for large numbers of pixels anyway.<br><br>A much faster way is to do the reading into an array or bank one time only, then writing the contents of the bank to disk so that next time on loading the game you simply 'readbytes' straight into the bank at load time, although I don't know if what you are doing is pre game or in game. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
