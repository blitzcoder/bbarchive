<!DOCTYPE html><html lang="en" ><head ><title >stationary objects when dynamically scrolling</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >stationary objects when dynamically scrolling</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=95" >BlitzPlus Beginners Area</a>/<a href="#bottom" >stationary objects when dynamically scrolling</a><br><br>
<a name="748280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bryan970</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a 2d game and I am using a tileset to dynamically scroll in all directions.  Just wondering is there a tutorial or something about placing stationary objects on my map.   That is to say my guy walks around just fine and the screen scrolls but what if I want to put in a building or a rock or something. how do I keep track of where to draw it when scrolling? I guess legend of zelda would be an example of what I'm trying to accomplish here. <br><br></td></tr></table><br>
<a name="748428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I assume you are keeping a record like in a type for instance of what the properties of the object are such as:<br><br>type stuffinthegame<br><br>field worldx,worldy<br>field health<br>field class$ ; building, rock, player etc<br><br>end type <br><br>and then all you need to do is keep track of where the upper left corner pixel is in the world with a pair of variables 'cornerx, cornery' for instance and then when drawing all objects simply subtract the cornerx,cornery from the object's worldx,worldy - if the resulting value is within the boundaries of the screen then it can be drawn. <br><br></td></tr></table><br>
<a name="748529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bryan970</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I apolagize at the moment I've been developing in Dark Basic Pro (I like the community here better) but you'll get the idea.  From your  post I guess I could use my constants GAMEWORLDWIDTH and GAMEWORLDHEIGHT to figure out where I am <br><br>here is what I am doing I got alot of it from a dark basic pro game development book<br>this is a bit long<br><br>say I have a bitmap composed of 10 different ground tiles<br><br>then I have a data file that is like<br>data 1,5,6,7,8<br>data 1,34,7,8 blah blah blah<br><br>then I load all this stuff into my array (perhaps a solution to your post :)<br><br>  ` load the tile images<br>  load bitmap "groundtiles.bmp", IMG_TILES<br>  `create the scroll buffer surface in memory, slightly bigger than the screen<br>  create bitmap IMG_SCROLLBUFFER, SCROLLBUFFERWIDTH, SCROLLBUFFERHEIGHT<br>  `load the map data into the array<br>  for y = 0 to MAPHEIGHT-1<br>        for x = 0 to MAPWIDTH-1<br>            read MAPDATA(x,y)<br>        next x<br>    next y<br><br>in my main loop I have two methods I keep calling<br>update the scrolling view<br>        UpdateScrollPosition()<br>`draw tiles onto the scroll buffer<br>        DrawTileMap()<br><br><br>here is a piece of the update scroll position<br><br>function UpdateScrollPosition()<br>    `scroll based on mouse input<br>    if hunter.x &lt; 200 and ScrollX &lt;&gt; 0<br>      hunter.x = 199<br>      dec ScrollX, hunter.speed - 2<br>      hunter.frame = getframe(hunter)<br>      hunter.inactive_timer = 0<br>    endif<br>    if hunter.x &gt; 400 and ScrollX &lt;&gt; GAMEWORLDWIDTH - WINDOWWIDTH<br>        hunter.x = 401<br>       inc ScrollX, hunter.speed - 2<br>       hunter.frame = getframe(hunter)<br>       hunter.inactive_timer = 0<br>    endif<br><br>and a couple more if then statements for the y position of the hunter then I do then I do<br><br> `update horizontal scrolling position and speed<br>    if ScrollX &lt; 0<br>        ScrollX = 0<br>    else<br>        if ScrollX &gt; GAMEWORLDWIDTH - WINDOWWIDTH<br>            ScrollX = GAMEWORLDWIDTH - WINDOWWIDTH<br>        endif<br>    endif<br><br>    `update vertical scrolling position and speed<br>    if ScrollY &lt; 0<br>        ScrollY = 0<br>    else<br>        if (ScrollY &gt; GAMEWORLDHEIGHT - WINDOWHEIGHT-1)<br>            ScrollY = GAMEWORLDHEIGHT - WINDOWHEIGHT-1<br>        endif<br>    endif<br><br>here is the draw tile map function<br>`*************************Draw Tile Map*****************************************************<br>`This function fills the tilebuffer with tiles representing<br>`the current scroll display based on scrollx/scrolly.<br>function DrawTileMap()<br>    `calculate starting tile position<br>    tilex = int(ScrollX / TILEWIDTH)<br>    tiley = int(ScrollY / TILEHEIGHT)<br><br>    columns = int(WINDOWWIDTH / TILEWIDTH)<br>    rows = int(WINDOWHEIGHT / TILEHEIGHT)<br><br>    `draw tiles onto the scroll buffer surface<br>    for y = 0 to rows<br>        for x = 0 to columns<br>            `retrieve the tile number from this position<br>            tilenum = MAPDATA(tilex+x, tiley+y)<br><br>            `draw the tile onto the scroll buffer<br>            DrawTile(IMG_TILES,tilenum,TILEWIDTH,TILEHEIGHT,16,IMG_SCROLLBUFFER,x*TILEWIDTH,y*TILEHEIGHT)<br><br>        next x<br>    next y<br><br>    `draws the portion of the scroll buffer onto the back buffer<br>    `according to the current "partial tile" scroll position.<br>    left = ScrollX MOD TILEWIDTH<br>    top = ScrollY MOD TILEHEIGHT<br><br>    `set dimensions of the source image as a rectangle<br>    right = left + WINDOWWIDTH<br>    bottom = top + WINDOWHEIGHT<br><br>    `draw the partial tile scroll window onto the back buffer<br>    copy bitmap IMG_SCROLLBUFFER, left, top, right, bottom, 0, 0, 0, WINDOWWIDTH, WINDOWHEIGHT<br>endfunction<br><br>here is the draw tile method that draw tile map calls it just draws the tile to the screen<br><br>`This function does the real work of drawing a single tile from the source image<br>`onto the tile scroll buffer. Parameters provide much flexibility.<br>function DrawTile(source as integer,tile as integer,width as integer,height as integer,columns as integer,dest as integer,destx as integer,desty as integer)<br>    `describe the source image<br>    left = (tile MOD columns) * width<br>    top = (tile / columns) * height<br>    right = left + width<br>    bottom = top + height<br><br>    `draw the tile<br>    copy bitmap source, left, top, right, bottom, dest, destx, desty, destx+width, desty+height<br>endfunction <br><br></td></tr></table><br>
<a name="748728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps if you are using an array you could add an extra dimension to the array "MapData(X,Y,Layer)".  The 'Layer' elements of the array would hold a number of things like this for instance:<br><br>MapData(x,y,0) -&gt; this holds the tiles in much the same way as you are currently doing<br><br>MapData(x,y,1) -&gt; this holds the ID number or handle of the 'creature'/'building' etc that is within that tile.   Then you simply use a similar technique to what you have above to draw the building/creature.<br><br>However - using the method I've just given you will only allow you to have one object per tile which is most likely not what you want.  Instead you could do this:<br><br>MapData(x,y,1) -&gt; this holds the handle to a 'bank' containing a list of handles of objects within that tile.  You then just have to remember to update the bank and the array whenever a creature/building moves from one tile to the next.<br><br>Hope that is of some help. <br><br></td></tr></table><br>
<a name="749436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bryan970</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks,  I like that idea <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
