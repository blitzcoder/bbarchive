<!DOCTYPE html><html lang="en" ><head ><title >How to: BlitzMax on 32/64bit Linux Mint 15/Ubuntu</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to: BlitzMax on 32/64bit Linux Mint 15/Ubuntu</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=109" >Linux Discussion</a>/<a href="#bottom" >How to: BlitzMax on 32/64bit Linux Mint 15/Ubuntu</a><br><br>
<a name="1188705"></a>

<a name="1188706"></a>

<a name="1188707"></a>

<a name="1188708"></a>

<a name="1188709"></a>

<a name="1188710"></a>

<a name="1188711"></a>

<a name="1188712"></a>

<a name="1188713"></a>

<a name="1188714"></a>

<a name="1188736"></a>

<a name="1188825"></a>

<a name="1188833"></a>

<a name="1188834"></a>

<a name="1189121"></a>

<a name="1189122"></a>

<a name="1189123"></a>

<a name="1189124"></a>

<a name="1189127"></a>

<a name="1189307"></a>

<a name="1189376"></a>

<a name="1189377"></a>

<a name="1189379"></a>

<a name="1189380"></a>

<a name="1189381"></a>

<a name="1189382"></a>

<a name="1189383"></a>

<a name="1189384"></a>

<a name="1189385"></a>

<a name="1189392"></a>

<a name="1189394"></a>

<a name="1189396"></a>

<a name="1189613"></a>

<a name="1189615"></a>

<a name="1190703"></a>

<a name="1190714"></a>

<a name="1190719"></a>

<a name="1190721"></a>

<a name="1190728"></a>

<a name="1190948"></a>

<a name="1191147"></a>

<a name="1191151"></a>

<a name="1191155"></a>

<a name="1191156"></a>

<a name="1191166"></a>

<a name="1191186"></a>

<a name="1191222"></a>

<a name="1191226"></a>

<a name="1192126"></a>

<a name="1197016"></a>

<a name="1203342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings to all.<br><br>EDIT: 27/06/2013: At the bottom of this first post I have added a patch script for BlitzMax 1.48.<br>EDIT: 12/06/2013: I've update this how to so the dependencies are loaded by a script as some people have problems following it. There's also a <a href="/posts.php?topic=99220" target="_blank">Work In Progress install script</a> in a post further down that at some point will do the most common package managers. <br><br>Why the topic title "BlitzMax on 32/64bit Linux Mint 15/Ubuntu" you may ask. Well as there are two versions of Linux Mint one that's based of the Ubuntu branch<br>and the other follows the Debian testing branch. So what is written here should in theory work for Ubuntu as well.<br>NOTE: Linux Mint Debian Edition (LMDE) hasn't been tested if it doesn't work you may want to read <a href="/post.php?topic=99220&amp;post=1163896" target="_blank">BlitzMax on Debian 7 "Wheeze" 32/64.</a><br>It's written for Debian 7 (Wheeze) 64bit ands some of the system links may need up dating.<br><br>I finally got round to installing Linux Mint 15 onto my machines. One was a clean install the other was a system upgrade.<br>It's been a while since I did an upgrade without doing it as a clean install and it went rather well. The only problem I had<br>was that I had to reaffirm the desktop manager at the log screen otherwise just logging on caused a crash.<br>I would still recommending upgrading by doing a clean install.<br><br>OK what's different this time to get our beloved BlizMax working again. Very little in fact we just need to add a bit of code<br>either into BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx or on one of your source files. More on that later.<br><br>NOTE: If you find that you have problems with blitzmax applications running with the free drivers that come with the distribution then try and use one of the proprietary drivers.<br><br><b>Quick Installer for just the dependencies.</b><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">####################################################
#	
#	Linux Mint/Ubuntu dependencies installer
#	Doesn't patch any files
#
####################################################
# 23/06/2013: Updated script as Ubuntu can not use `uname -m` == "x86_64" in if conditional if run as sudo. Should now work as expected.
# 27/06/2013: Removed some dead wood as libglu1-mesa-dev will install the libx11/x11proto/mesa-common stuff.

# Get the machine architecture
ARCH=$(uname -m | sed 's/x86_//;s/i[3-6]86/32/')

# Run update
sudo apt-get update

# Select the packages for architecture installation
if [ $ARCH -eq 64 ]; then
	echo "BlitzMax Installer: Machine is 64 bit";
	PKGS="ia32-libs-multiarch g++-multilib libglu1-mesa-dev libasound2-dev libfreetype6-dev libxpm-dev libxft-dev libxxf86vm-dev libpulse-dev libopenal-dev";
        # PKGS="$PKGS  libc6-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev"; # Uncomment if you are missing a package
else
	echo "BlitzMax Installer: Machine is 32 bit";
	PKGS="g++ libglu1-mesa-dev libasound2-dev libfreetype6-dev libxpm-dev libxft-dev libxxf86vm-dev libpulse-dev libopenal-dev";
        # PKGS="$PKGS  libc6-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev"; # Uncomment if you are missing a package
fi

# Install the packages
sudo apt-get install $PKGS

# If machine architecture is 64bit then set up some links
if [ $ARCH -eq 64 ]; then
	echo "BltizMax Installer: Setting Up System Links in /usr/lib32 for 64 bit Linux";
	if [ ! -f /usr/lib32/libGL.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1 /usr/lib32/libGL.so ; fi
	if [ ! -f /usr/lib32/libGLU.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libGLU.so.1 /usr/lib32/libGLU.so ; fi
	if [ ! -f /usr/lib32/libX11.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libX11.so.6 /usr/lib32/libX11.so ; fi
	if [ ! -f /usr/lib32/libfreetype.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libfreetype.so.6 /usr/lib32/libfreetype.so ; fi
	if [ ! -f /usr/lib32/libXxf86vm.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libXxf86vm.so.1 /usr/lib32/libXxf86vm.so ; fi
	if [ ! -f /usr/lib32/libXft.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libXft.so.2 /usr/lib32/libXft.so ; fi
	if [ ! -f /usr/lib32/libXpm.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libXpm.so.4 /usr/lib32/libXpm.so ; fi
	if [ ! -f /usr/lib32/libasound.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libasound.so.2 /usr/lib32/libasound.so ; fi
	if [ ! -f /usr/lib32/libpulse-simple.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libpulse-simple.so.0 /usr/lib32/libpulse-simple.so ; fi
	if [ ! -f /usr/lib32/libopenal.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libopenal.so.1 /usr/lib32/libopenal.so ; fi
fi

# IMPORTANT NOTE FOR 64BIT USERS
# If you compile and you get can't find such and such due to an update etc, then use the method above to create a symbolic link by first finding the actual target libs 
# true name. The symbolic's links usually the targets name with every thing to the right of the .so removed.
# Note if things break after an update use the rm command to remove the current broken link e.g. sudo rm /usr/lib/libfreetype.so and then redo the link with the updated 
# version of that .so file.
</textarea><br><br>To use this script make a text file on your desktop named bmax-install.sh and copy and past the above into this text file. Save it, rigth click it and set the files 'allow execution' permission checkbox in it's permissions properties menu.<br>Then open a terminal, then type<br><pre class=code>sudo $HOME/Desktop/bmax-install.sh</pre><br>enter your root/sudo pass word when it asks for it and answer 'y' to everything. <br><br>After it's finished; open MaxIDE have a go at compiling something. You may get something like this error.<br><pre class=code>/usr/bin/ld: /home/jason/Desktop/BlitzMax/mod/pub.mod/lua.mod/lua.release.linux.x86.a(loadlib.c.release.linux.x86.o): undefined reference to symbol 'dlopen@@...'
/usr/bin/ld: note: 'dlopen@@...' is defined in DSO /lib/i386-linux-gnu/libdl.so.2 so try adding it to the linker command line
/lib/i386-linux-gnu/libdl.so.2: could not read symbols: Invalid operation
collect2: error: ld returned 1 exit status
Build Error: Failed to link /home/jason/Desktop/BlitzMax/test/test</pre><br>What does this mean. Well it means that Blitzmax is having a hard time passing on the required flag to the linker.<br><br>To solve this we need to add<br><pre class=code>Import "-ldl"</pre>to either your bmx project start file or some where that will always be seen by the blitz compiler like 'BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx' should be good.<br>Don't forget to rebuild the modules if you place it there!<br><br><b>The sound issue.</b><br>Yes this is still here as it's a BlitzMax issue so you'll need to modify some files still. Unless your going to use OpenAL.<br>I used skidracer's pulse audio driver as an alternative.<br>Here's the <a href="/posts.php?topic=93662" target="_blank">link</a> read it through and what ever you do don't use MaxIDE to copy and paste the cpp files; use a text editor like notepad. skid's also also fixed the ALSA driver as well. See <a href="/posts.php?topic=98049" target="_blank">here</a> for details.<br>These files need to go into path_to_blitzmax/BlitzMax/mod/pub.mod/freeaudio.mod<br>One thing to note is that BlitzMax/mod/brl.mod/freeaudioaudio.bmx is related to this so you may want to update the code at the bottom to reflect what sound driver name your using.<br>Then rebuild all the modules.<br><br><br>EDIT: 27/06/2013<br>As mentioned above I have added a patch script for Blitz Max 1.48.<br>To use it make a new empty file in the same directory where you have extracted a fresh copy of BlitzMax and name it "patch.sh" and set the permissions to execute just like the install script above. Then copy and paste the code below, save it and then open a terminal; cd to the directory and then type ./patch.sh.<br><br>Remember that you will need to rebuild the modules. To do this it's best not to use the MaxIDE as it can crash if something goes wrong leaving you thinking that the patch has failed.<br>Instead while in the terminal cd to BlitzMax/bin directory and type: bmk makemods -a<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#!/bin/bash
#########################################
#										#
#	BLITZMAZ 1.48 FILE PATCHER			#
#										#
# Version0.1
#########################################
# THIS SCRIPT COMES WITH NO WARRANTIES WHAT SO EVER USE AT YOUR OWN RISK

# Load a file into
load_file(){
		IFS=$'\n' FILE_ARRAY=( $( &lt; "$1" ) )
		FILE_LEN=( ${#FILE_ARRAY[*]} )
		return $?;
}

# insert a line into an array zero index array. syntax: insert_array $line_number $string 
insert_array(){
	# Add element to array and get the new size
	FILE_LEN=( ${#FILE_ARRAY[*]} )
	# Move the array up and insert the new line
	for ((i=$FILE_LEN;i&gt;"$1";i--)); do FILE_ARRAY[$i]=${FILE_ARRAY[$i-1]}; done;	   
	FILE_ARRAY[$1]="$2";
	return $?;
}

# Update freeaudio.bmx
update_freeaudio(){
	
	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx.bac ]; then echo "PATCHER: Skipping freeaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx
	mv BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx.bac

	# Befor inserting new lines change the old ones
	FILE_ARRAY[3]="ModuleInfo \"Version: 1.23\""
	FILE_ARRAY[66]="'Import \"ossdevice.cpp\""
	FILE_ARRAY[68]="'Function OpenOSSDevice()"
	FILE_ARRAY[114]="			device=OpenPulseAudioDevice()"

	# Add changes
	insert_array 9 "ModuleInfo \"History: 1.23 Release\""
	insert_array 10 "ModuleInfo \"History: Added PulseAudio driver as default Linux sound driver\""
	insert_array 66 "Import \"-lpulse-simple\""
	insert_array 70 "Import \"pulseaudiodevice.cpp\""
	insert_array 72 "Function OpenPulseAudioDevice()"
	insert_array 122 "'		Case 2"
	insert_array 123 "'			device=OpenOSSDevice()"
  
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched freeaudio.bmx";
	return $?;
}

# Update ALSA driver cpp
update_alsa(){
	
	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/freeaudioaudio.mod/alsadevice.cpp.bac ]; then echo "PATCHER: Skipping freeaudioaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp
	mv BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp.bac
	
	# Virtually a straight swap no new lines to insert
	FILE_ARRAY[12]="#include &lt;alsa/asoundlib.h&gt;"
	FILE_ARRAY[21]="	pthread_t	audiopthread;"
	FILE_ARRAY[37]="		threadid=pthread_create(&amp;audiopthread,&amp;attr,audiothread,(void*)this);"
	FILE_ARRAY[73]="	if (err&lt;0) return v;"
	FILE_ARRAY[81]="		return v;"
	FILE_ARRAY[85]="		return v;"
	FILE_ARRAY[90]="		return v;"
	FILE_ARRAY[99]="		return v;"
	FILE_ARRAY[106]="		return v;"
	FILE_ARRAY[111]="		return v;"
	FILE_ARRAY[117]="		return v;"
	FILE_ARRAY[121]="		return v;"
	
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp
	unset FILE_ARRAY;
	echo "PATCHER: Patched alsadevice.cpp";
	return $?;
}

# Update freeaudioaudio.bmx
update_freeaudioaudio(){

	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudo.bmx.bac ]; then echo "PATCHER: Skipping freeaudioaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx
	mv BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bac
  
	# Befor inserting new lines change the old ones
	FILE_ARRAY[206]="TFreeAudioAudioDriver.Create \"FreeAudio PulseAudio System\",0"
	FILE_ARRAY[207]="'TFreeAudioAudioDriver.Create \"FreeAudio ALSA System\",1"
  
	# Add changes
	insert_array 208 "'TFreeAudioAudioDriver.Create \"FreeAudio OpenSound System\",2"
  
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched freeaudioaudio.bmx";
	return $?;
}

# Update appstub.bmx
update_appstub(){
	
	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx.bac ]; then echo "PATCHER: Skipping appstub.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx
   	mv BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx.bac
   
	# add ld flag -ldl
	insert_array 64 "Import \"-ldl\""
   
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched appstub.bmx";
	return $?;
}

# Update threads.bmx
update_threads(){

	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/threads.mod/freeaudioaudo.bmx.bac ]; then echo "PATCHER: Skipping freeaudioaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/brl.mod/threads.mod/threads.bmx
	mv BlitzMax/mod/brl.mod/threads.mod/threads.bmx BlitzMax/mod/brl.mod/threads.mod/threads.bmx.bac
  
	insert_array 11 "?Linux"
	insert_array 12 "Import \"-ldl\""
	insert_array 13 "?"
	insert_array 14 ""
  
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/brl.mod/threads.mod/threads.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched threads.bmx";
	return $?;
}

# Pulse Audio Device Driver
# As there isn't a file to patch just echo the output to a file
update_pulseaudio_cpp(){

echo "PATCHER: Installing pulseaudiodevice.cpp";

# If the pulse audio file exists then rename it
MAXPATH=BlitzMax/mod/pub.mod/freeaudio.mod

if [ -f $MAXPATH/pulseaudiodevice.cpp ]; then
  if [ -f $MAXPATH/pulseaudiodevice.cpp.bac ]; then rm $MAXPATH/pulseaudiodevice.cpp.bac ; fi
  mv $MAXPATH/pulseaudiodevice.cpp $MAXPATH/pulseaudiodevice.cpp.bac
fi

echo "// pulseaudiodevice.cpp" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "// sudo apt-get install libpulse-dev" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#ifdef __linux" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include \"freeaudio.h\"" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include &lt;unistd.h&gt;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include &lt;pulse/simple.h&gt;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include &lt;pthread.h&gt;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "extern \"C\" audiodevice *OpenPulseAudioDevice();" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "void *pulseaudiothread(void*dev);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#define LINUXFRAG 2048" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "struct pulseaudiodevice:audiodevice{" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	pthread_t audiothread;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int threadid;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int running;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int playing;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int error;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	short *buffer;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int buffersize;	//in bytes" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp		
echo "	pa_simple *simple;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "	static void *pulseaudiothread(void *arg){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pulseaudiodevice* audio;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		audio=(pulseaudiodevice*)arg;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		audio-&gt;run();" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		return 0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp		
echo "	int reset(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		pa_sample_spec stereo16;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		running=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		playing=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp		
echo "		stereo16.format=PA_SAMPLE_S16LE;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		stereo16.rate=44100;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		stereo16.channels=2;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		simple=pa_simple_new(NULL,\"freeaudio\",PA_STREAM_PLAYBACK,NULL,\"playback\",&amp;stereo16,NULL,NULL,&amp;error);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		if (simple==NULL) return -1;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		mix=new mixer(LINUXFRAG);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		mix-&gt;freq=44100;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		mix-&gt;channels=2;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		buffer=new short[LINUXFRAG];" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		buffersize=LINUXFRAG*2;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pthread_attr_t	attr;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pthread_attr_init(&amp;attr);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		running=1;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		threadid=pthread_create(&amp;audiothread,&amp;attr,pulseaudiothread,(void*)this);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		return 0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "	int close(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		int timeout;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		running=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		timeout=500;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		while (timeout-- &amp;&amp; playing){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			usleep( 10*1000 );" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pa_simple_free(simple);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		return 0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	void run(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		int data;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		int res;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		playing=1;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		while (playing &amp;&amp; running){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			mix-&gt;mix16(buffer);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			int err=pa_simple_write(simple, buffer, buffersize, &amp;error);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			if (err&lt;0) break;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp			
echo "		}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		playing=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "};" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "audiodevice *OpenPulseAudioDevice(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	return new pulseaudiodevice();" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#endif" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
return $?;
}

## execute patching
update_appstub
update_freeaudio
update_freeaudioaudio
update_threads
update_alsa
update_pulseaudio_cpp
echo "PATCHER: TASK COMPLETED";</textarea> <br><br></td></tr></table><br>
<a name="1188778"></a>

<a name="1188787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for this guide. I've installed Max on Mint 14 and I've written this guide some time ago, which might be of interest to people as well:<br><br><a href="https://docs.google.com/document/d/1oP308DiqTnCRjQm9PCL5lXoN9vZwY3YKxb1kro58ua8/edit?usp=drive_web" target="_blank">https://docs.google.com/document/d/1oP308DiqTnCRjQm9PCL5lXoN9vZwY3YKxb1kro58ua8/edit?usp=drive_web</a><br><br><br>32 bit only though. <br><br></td></tr></table><br>
<a name="1188806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Been meaning for a while to write a proper install script for Mint/Ubuntu that automated installation along with fixing stuff on the fly. So all you needed to do was just place the BlitzMax zip file in the same directory as the installer and let it run. Just don't seem to have the will power to do it as there's just too many distractions in my life at the moment. <br><br></td></tr></table><br>
<a name="1188813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Captain Wicker (crazy hillbilly)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank you so much. I can compile again! :D <br><br></td></tr></table><br>
<a name="1188815"></a>

<a name="1188816"></a>

<a name="1188821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> None of this works.  Is there a version of Linux that actually works? <br><br></td></tr></table><br>
<a name="1188824"></a>

<a name="1188841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Need to see the output from BlitzMax console. With out seeing that no one will be able to help. It could be something as simple as needing hardware acceleration enabled or just the bad luck that the hardware isn't supported. A thing with an intel graphics card or old graphics hardware is know to be a problematic. <br><br></td></tr></table><br>
<a name="1188883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> JoshK: It does work, you must be doing something wrong somewhere, sorry. <br><br></td></tr></table><br>
<a name="1188897"></a>

<a name="1188899"></a>

<a name="1188900"></a>

<a name="1188901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Wiebo: I bet you any money he was in to much of a rush to read the whole post and tried to use the stuff for the 64 bit installation on a 32bit distribution or trying it with the debian branch of mint. I helped Richard Betson get to get bmax up and running on Debian and that was no picnick.  And I see he's posted in another topic the same three lines that I have above near the bottom for Ubuntu 12.04. I already did that <a href="/posts.php?topic=97927" target="_blank">here</a>. And at the time he posted I was just checking my emails on the ipad while I was tucked up in bed watching a film.<br><br>Believe it or not it's a lot simpler getting Monkey to work on any Linux distribution than blitzmax and the way things are looking with the number of updates for blitz max on Linux lately. Many could be wasting there time using blitzmax with Linux as nearly with every new updated distribution something will break.<br><br>In a few days I should have a bash script organised that will do the package 32/64bit installation/uninstall and patch/ install blitzmax with the updated alsa/pulse driver updates. Just trying to decide the if bmax should go into /options or user selected directory and setup some system links or add it to the paths variable in .profile.<br>I was thinking of updating the script in the dependencies, but you would still get people posting about the various issues that tend to crop. <br><br></td></tr></table><br>
<a name="1188902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @dawlane:  Getting Monkey to work is easy, but I still have not gotten it to compile a GLFW target yet, and I found HTML performance to be.. ugh... I must admit, I have not tried again in a few weeks now.<br><br>And as where to place bmax: /opt is the 'official' correct place according to the linux file system specs, but oh well, we're not dealing with servers or multi-user systems here now are we? :) <br><br></td></tr></table><br>
<a name="1188905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Wiebo: You'll have to tell me what the problem is and what your linux rig setup is it could be a makefile problem as I found I had to link addtion libs; do it either in the monkey section or over at monkey coder save this thread just for bmax.<br>Monkey tends to be a bit picky when it come to browser performance with flash or html. I would put this down to the fact that there is still no conformity between browsers and html5 plus processing power would also be a factor. You tent to get the best performance with chrome. <br><br></td></tr></table><br>
<a name="1188952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, you started mentioning Monkey, I only reacted :) <br><br></td></tr></table><br>
<a name="1189161"></a>

<a name="1189181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well, you started mentioning Monkey, I only reacted :) <br></div>Ha Ha Ha. Did you get it to work yet?<br><div class="quote"> Been meaning for a while to write a proper install script for Mint/Ubuntu that automated installation along with fixing stuff on the fly. <br></div>Well got an installer script working so far just need to write the patch code. Any one got ant thoughts on which should be the default sound driver?<br>The script gives you the choice of installing/removing the packages with BlitzMax and also the ability to remove the packages or BlitzMax individually.<br>It should be note that g++, build-essential and ia32-libs-multiarch will be left in case they are required by any other package. But then half of the packages installed would still be used so whats the point of removing all the packages.<br>The blitzmax installer by default will only allow the user who installed it have access to it (root is god and can go ant where) as if it can be used in a multi-user environment location (/opt) not the users home directory it would violate the license agreement.<br><br>EDIT: Using a patch file that's been copy&amp;pasted into a text editor doesn't work. <br><br></td></tr></table><br>
<a name="1189306"></a>

<a name="1189314"></a>

<a name="1189315"></a>

<a name="1189371"></a>

<a name="1189614"></a>

<a name="1190718"></a>

<a name="1190730"></a>

<a name="1190986"></a>

<a name="1191238"></a>

<a name="1191239"></a>

<a name="1191240"></a>

<a name="1191241"></a>

<a name="1191348"></a>

<a name="1191349"></a>

<a name="1191350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Double Post? <br><br></td></tr></table><br>
<a name="1191351"></a>

<a name="1191353"></a>

<a name="1191354"></a>

<a name="1191355"></a>

<a name="1191356"></a>

<a name="1191357"></a>

<a name="1191358"></a>

<a name="1191359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok got an install script ready that will install the dependencies/BlitzMax+patch. So if you want to try it read on, but remember it's still a work in progress. And I may add the other distributions another time.<br>I have tested it on Linux Mint 15 32/64bit as that's what I use the most. It should work on 32 bit Mint. Also make sure that you have the archivers installed ( usually they are so if you can't extract a compressed file then you have't )<br><br>The script will need a bit of modification to work on Ubuntu 64bit as the shell has a problem with [ `name -m` == "x86_64" ] when run as sudo. When I get round to it I will fix it so that it will work on both Mint and Ubuntu running the script as sudo.<br><br>EDIT: 28/06/2013:<br>VERY IMPORTANT:<br>While testing on older linux distributon versions. I discovered the `who am i` doesn't work correctly on some distributions (Linux Mint 13 is one).<br>It is possible that you can trash your home directory if you run the install script as super user. So to check make a file on your Desktop named `test` and make it executable by right clicking the file and changing the execute checkbox.<br>Then copy and paste the code below into the new file, save it.<br><pre class=code>#!/bin/bash
WHO=$(who am i | awk '{print $1}')

if [ -z $WHO ]; then WHO=$SUDO_USER; echo "TRYING SUDO_USER"; else echo "who am i WORKS"; fi
if [ -z $WHO ]; then echo "NO USER"; else echo "USER IS $WHO"; fi</pre>And open a terminal, change directory to the desktop and type sudo ./test. If the result is just your user name ( not root or multiple use names ) the everything should be OK.<br>If your not sure then use virtualbox with your distribution installed and set up the same way as your main system.<br><br>First make a new directory on your desktop and call it bmax-install and within this make six empty files using a text editor. Save each file exactly as<br><br>alsadevice.cpp<br>pulseaudiodevice.cpp<br>appstub.bmx<br>freeaudio.bmx<br>freeaudioaudio.bmx<br>bmax-install.sh<br><br>Add to this directory the compressed BlitzMax archive. The script will extract an archive named BliztMaxXXX_linuxx86.tar.gz (XXX being the version number)<br><br>credits to skidracer for ALSA, PulseAudio code and parts of the install script,<br><br>Now paste the code bellow for alsadevice.cpp<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">// alsadevice.cpp

#ifdef __linux

#include "freeaudio.h"

#include &lt;sys/ioctl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;sys/soundcard.h&gt;
#include &lt;pthread.h&gt;

#include &lt;alsa/asoundlib.h&gt;

extern "C" audiodevice *OpenALSADevice();

void *audiothread(void *dev);

#define LINUXFRAG 2048

struct alsaaudio:audiodevice{
	pthread_t	audiopthread;
	int			threadid;
	int			running,playing;
	short		*buffer;
	int			buffersize;	//in bytes
	
	int reset(){
		running=1;
		playing=0;
		mix=new mixer(LINUXFRAG);
		mix-&gt;freq=44100;
		mix-&gt;channels=2;
		buffer=new short[LINUXFRAG];
		buffersize=LINUXFRAG*2;
		pthread_attr_t	attr;
		pthread_attr_init(&amp;attr);
		threadid=pthread_create(&amp;audiopthread,&amp;attr,audiothread,(void*)this);	
		return 0;
	}
	
	int close(){	
		int		timeout;
		running=0;
		timeout=5;
		while (timeout-- &amp;&amp; playing) sleep(1);
		return 0;
	}
};


void *audiothread(void *v){
	int						policy;
	sched_param		sched;	
	int						err;
	alsaaudio 		*dev;
	
	pthread_getschedparam(pthread_self(),&amp;policy,&amp;sched);
	sched.sched_priority++;//policy=SCHED_RR;
	pthread_setschedparam(pthread_self(),policy,&amp;sched);	
	dev=(alsaaudio*)v;

	unsigned int val;
	
	snd_pcm_t *fd;
	snd_pcm_uframes_t periodsize;
	snd_pcm_hw_params_t *hwparams;
	snd_pcm_hw_params_alloca(&amp;hwparams);
	int output_rate;
	int channels;
	int fragment_size;
	int fragment_count;

	err=snd_pcm_open(&amp;fd, strdup("default"), SND_PCM_STREAM_PLAYBACK, 0);
	if (err&lt;0) return v;

	fragment_size=LINUXFRAG;  //overall buffer size
	fragment_count=2; //2 - 16 fragment count - 2 minimum, the lower it is potentially the lower the latency

//configure device
	if (snd_pcm_hw_params_any(fd, hwparams) &lt; 0) {
		//printf("linuxaudio failed at params any\n");
		return v;
	}	
	if (snd_pcm_hw_params_set_access(fd, hwparams,SND_PCM_ACCESS_RW_INTERLEAVED) &lt; 0) {
		//printf("linuxaudio failed at set access\n");
		return v;
	}	
	
	if (snd_pcm_hw_params_set_format(fd, hwparams,SND_PCM_FORMAT_S16_LE) &lt; 0) {
		//printf("linuxaudio failed at set format\n");
		return v;
	}
	val = 44100;
	if (snd_pcm_hw_params_set_rate_near(fd, hwparams,&amp;val, 0) &lt; 0) {
		// Try 48KHZ too 
		//printf("linuxaudio - %d HZ not available, trying 48000HZ\n", output_rate);
		val = 48000;
		if (snd_pcm_hw_params_set_rate_near(fd, hwparams,&amp;val, 0) &lt; 0) {
			//printf("linuxaudio failed at setting output rate (%d)\n", output_rate);
			return v;
		}
		dev-&gt;mix-&gt;freq=val;		
	}
	channels=2;
	if (snd_pcm_hw_params_set_channels(fd, hwparams, channels) &lt; 0) {
		//printf("linuxaudio failed at set channels (%d)\n", channels);
		return v;
	}
	periodsize = (fragment_size) / 4; // bytes -&gt; frames for 16-bit,stereo - should be a minimum of 512
	if (snd_pcm_hw_params_set_period_size_near(fd, hwparams,&amp;periodsize, 0) &lt; 0) {
		//printf("linuxaudio failed at set period size (%d)\n", (int)periodsize);			
		return v;
	}
	val = fragment_count;
	if (snd_pcm_hw_params_set_periods_near(fd, hwparams,&amp;val, 0) &lt; 0) {
		//printf("linuxaudio failed at set periods (%d)\n", val);			
		//should attempt a one by one period increase up to 16?
		return v;
	}
	if (snd_pcm_hw_params(fd, hwparams) &lt; 0) {
		//printf("linuxaudio failed at installing hw params\n");
		return v;
	}
	//loop while playing sound
	dev-&gt;playing=1;
	while (dev-&gt;playing)
	{
		dev-&gt;mix-&gt;mix16(dev-&gt;buffer);
		if ((snd_pcm_writei (fd, dev-&gt;buffer,LINUXFRAG/2)) &lt; 0) {	//Half buffer for two channels?
			//printf ("linuxaudio warning: buffer underrun occurred\n");
			if (snd_pcm_prepare(fd) &lt; 0) {
				//printf ("linuxaudio failed at preparing pcm\n");
				dev-&gt;playing=0; //die gracefully
			}
		}	
	}
	snd_pcm_drop(fd);
	snd_pcm_close (fd);
	return 0;
}

audiodevice *OpenALSADevice(){
	return new alsaaudio();
}

#endif</textarea><br>Next do the same for pulseaudiodevice.cpp<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">// pulseaudiodevice.cpp
// sudo apt-get install libpulse-dev

#ifdef __linux

#include "freeaudio.h"

#include &lt;unistd.h&gt;
#include &lt;pulse/simple.h&gt;
#include &lt;pthread.h&gt;

extern "C" audiodevice *OpenPulseAudioDevice();

void *pulseaudiothread(void*dev);

#define LINUXFRAG 2048

struct pulseaudiodevice:audiodevice{
	pthread_t audiothread;
	int threadid;

	int running;
	int playing;
	int error;

	short *buffer;
	int buffersize;	//in bytes
		
	pa_simple *simple;
	
	static void *pulseaudiothread(void *arg){
		pulseaudiodevice* audio;
		audio=(pulseaudiodevice*)arg;
		audio-&gt;run();
		return 0;
	}
		
	int reset(){
	
		pa_sample_spec stereo16;
	
		running=0;
		playing=0;
		
		stereo16.format=PA_SAMPLE_S16LE;
		stereo16.rate=44100;
		stereo16.channels=2;

		simple=pa_simple_new(NULL,"freeaudio",PA_STREAM_PLAYBACK,NULL,"playback",&amp;stereo16,NULL,NULL,&amp;error);
		if (simple==NULL) return -1;

		mix=new mixer(LINUXFRAG);
		mix-&gt;freq=44100;
		mix-&gt;channels=2;

		buffer=new short[LINUXFRAG];
		buffersize=LINUXFRAG*2;

		pthread_attr_t	attr;
		pthread_attr_init(&amp;attr);

		running=1;
		threadid=pthread_create(&amp;audiothread,&amp;attr,pulseaudiothread,(void*)this);	
		return 0;
	}
	
	int close(){	
		int timeout;
		running=0;
		timeout=500;
		while (timeout-- &amp;&amp; playing){
			usleep( 10*1000 );
		}
		pa_simple_free(simple);
		return 0;
	}

	void run(){
		int data;
		int res;
		
		playing=1;
		while (playing &amp;&amp; running){
			mix-&gt;mix16(buffer);
			int err=pa_simple_write(simple, buffer, buffersize, &amp;error);
			if (err&lt;0) break;			
		}
		playing=0;
	}

};

audiodevice *OpenPulseAudioDevice(){
	return new pulseaudiodevice();
}

#endif</textarea><br>And again for appstub.bmx<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

NoDebug

Module BRL.AppStub

ModuleInfo "Version: 1.20"
ModuleInfo "Authors: Mark Sibly, Simon Armstrong"
ModuleInfo "License: zlib/libpng"
ModuleInfo "Copyright: Blitz Research Ltd"
ModuleInfo "Modserver: BRL"

ModuleInfo "History: 1.20 Release"
ModuleInfo "History: Fixed 'invalid typetag' issue"
ModuleInfo "History: 1.19 Release"
ModuleInfo "History: Removed some debug output"
ModuleInfo "History: 1.18 Release"
ModuleInfo "History: Changed debugger.stdio.bmx so it handles deep stacks better"
ModuleInfo "History: 1.17 Release"
ModuleInfo "History: Added Brucey's SIGPIPE fix for GTK"
ModuleInfo "History: 1.16 Release"
ModuleInfo "History: Added experimental dll support"
ModuleInfo "History: 1.15 Release"
ModuleInfo "History: Fixed Const string reporting not being escaped"
ModuleInfo "History: 1.14 Release"
ModuleInfo "History: Debug output lines now prepended with ~&gt;"
ModuleInfo "History: 1.13 Release"
ModuleInfo "History: Removed unused debugger sources"
ModuleInfo "History: 1.12 Release"
ModuleInfo "History: Now manually builds app menu for MacOS Tiger"
ModuleInfo "History: 1.11 Release"
ModuleInfo "History: Fixed MacOS debug string overflow"
ModuleInfo "History: 1.10 Release"
ModuleInfo "History: Added kludge for MacOS Menu Quit generating errors"
ModuleInfo "History: 1.09 Release"
ModuleInfo "History: Fixed MacOS AutoreleasePool problem"
ModuleInfo "History: 1.08 Release"
ModuleInfo "History: Fixed Tiger build warnings in debugger.macos.m"
ModuleInfo "History: 1.07 Release"
ModuleInfo "History: Improved Win32 debugger switching"
ModuleInfo "History: Fixed macos debugger dying with extern types"
ModuleInfo "History: 1.06 Release"
ModuleInfo "History: Tweaked MacOS debugger"
ModuleInfo "History: 1.05 Release"
ModuleInfo "History: Fixed C Compiler warnings"
ModuleInfo "History: Fixed multidim arrays hanging debugger"
ModuleInfo "History: 1.04 Release"
ModuleInfo "History: Fixed buffer overflow in debug strings"
ModuleInfo "History: Modified float and double debug output to match compiler precision"

?Debug
'Import "debugger.stdio.bmx"
Import "debugger_mt.stdio.bmx"	'Let's give Otus's new MT friendly debugger a whirl!
?

?MacOS
Import "appstub.macos.m"
Import "-framework Cocoa"
Import "-framework Carbon"
?Win32
Import "appstub.win32.c"
?Linux
Import "appstub.linux.c"
Import "-ldl"
?

Extern
Function _bb_main()
End Extern

_bb_main</textarea><br>And for freeaudio.bmx<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Module Pub.FreeAudio

ModuleInfo "Version: 1.23"
ModuleInfo "Author: Simon Armstrong"
ModuleInfo "License: Public Domain"
ModuleInfo "Copyright: Blitz Research Ltd"
ModuleInfo "Modserver: BRL"

ModuleInfo "History: 1.23 Release"
ModuleInfo "History: Added PulseAudio driver as default Linux sound driver"
ModuleInfo "History: 1.22 Release"
ModuleInfo "History: Fixed leak with sound recycling"
ModuleInfo "History: 1.21 Release"
ModuleInfo "History: Fixed reference counting for brl.freeaudioaudio"
ModuleInfo "History: 1.20 Release"
ModuleInfo "History: Removed duplication of sample memory"
ModuleInfo "History: 1.19 Release"
ModuleInfo "History: Added DirectSound mode"
ModuleInfo "History: 1.18 Release"
ModuleInfo "History: added fa_ChannelPosition for live sample generation"
ModuleInfo "History: 1.17 Release"
ModuleInfo "History: added check for windows playback position overflow"
ModuleInfo "History: 1.15 Release"
ModuleInfo "History: added low latency windows98 fix"
ModuleInfo "History: 1.14 Release"
ModuleInfo "History: fixed 1.13 recycling of stopped channels fix"
ModuleInfo "History: 1.13 Release"
ModuleInfo "History: fixed recycling of stopped channels"
ModuleInfo "History: 1.12 Release"
ModuleInfo "History: Uses linear interpolation for improved fidelity at low rates"
ModuleInfo "History: 1.11 Release"
ModuleInfo "History: Fixed freepool sounds Not resetting parameters - thanks To Fetze"
ModuleInfo "History: 1.10 Release"
ModuleInfo "History: Added ALSA support for Linux courtesy Craig Kiesau"
ModuleInfo "History: 1.09 Release"
ModuleInfo "History: Improved channel playback timing"
ModuleInfo "History: 1.08 Release"
ModuleInfo "History: Fixed memory leak in fa_FreeSound()"
ModuleInfo "History: 1.07 Release"
ModuleInfo "History: Removed output transitions for queued/paused sounds"
ModuleInfo "History: 1.06 Release"
ModuleInfo "History: Windows device error now silently fails"
ModuleInfo "History: 1.05 Release"
ModuleInfo "History: Linux version now opens audio device on second thread"
ModuleInfo "History: 1.04 Release"
ModuleInfo "History: Removed Linux debug output"

Import "freeaudio.cpp"
Import "freeaudioglue.cpp"

?Win32
Import "dsounddevice.cpp"
Import "mmdevice.cpp"
Extern "C"
Function OpenMultiMediaDevice()
Function OpenDirectSoundDevice()
End Extern
?MacOS
Import "-framework AudioUnit"
Import "-framework AudioToolbox"
Import "coreaudiodevice.cpp"
Extern
Function OpenCoreAudioDevice()
End Extern
?Linux
'Import "-lpulse-simple"
Import "-lasound"
Import "alsadevice.cpp"
'Import "ossdevice.cpp"
'Import "pulseaudiodevice.cpp"
Extern "C"
'Function OpenPulseAudioDevice()
'Function OpenOSSDevice()
Function OpenALSADevice()
End Extern
?

Extern

Const FA_CHANNELSTATUS_FREE=0
Const FA_CHANNELSTATUS_STOPPED=1
Const FA_CHANNELSTATUS_SINGLESHOT=2
Const FA_CHANNELSTATUS_LOOPING=4
Const FA_CHANNELSTATUS_STREAMING=8
Const FA_CHANNELSTATUS_PAUSED=16

Function fa_Reset( audiodevice )
Function fa_Close()
Function fa_CreateSound( length,bits,channels,hertz,samples:Byte Ptr=Null,looping=False )
Function fa_WriteSound( sound,samples:Byte Ptr,length ) 'length really neceesary?
Function fa_FreeSound( sound )
Function fa_AllocChannel()
Function fa_FreeChannel( channel )
Function fa_PlaySound( sound,paused_flag,channel )

Function fa_StopChannel( channel )
Function fa_ChannelStatus( channel )
Function fa_ChannelPosition( channel )

Function fa_SetChannelPaused( channel,paused )
Function fa_SetChannelVolume( channel,volume# )
Function fa_SetChannelRate( channel,pitch# )
Function fa_SetChannelPan( channel,pan# )
Function fa_SetChannelDepth( channel,depth# )

End Extern

Function fa_Init( deviceid )
	Local device
?Win32
	If deviceid
		device=OpenDirectSoundDevice()
	Else
		device=OpenMultiMediaDevice()
	EndIf
?Linux
	Select deviceid
		Case 0
			device=OpenALSADevice()
'		Case 1
'			device=OpenPulseAudioDevice()	
'		Case 2
'			device=OpenOSSDevice()
	EndSelect
?MacOS
	device=OpenCoreAudioDevice()
?
	Local res=-1
	If device res=fa_Reset(device)
	Return res
End Function</textarea><br>Now for freeaudioaudio.bmx<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Strict
Rem
bbdoc: Audio/FreeAudio audio
about:
The FreeAudio audio module provides FreeAudio drivers for use with the #audio module.
End Rem
Module BRL.FreeAudioAudio

ModuleInfo "Version: 1.13"
ModuleInfo "Author: Mark Sibly"
ModuleInfo "License: zlib/libpng"
ModuleInfo "Copyright: Blitz Research Ltd"
ModuleInfo "Modserver: BRL"

ModuleInfo "History: 1.13 Release"
ModuleInfo "History: Fixed bug in FreeChannel Playing()"
ModuleInfo "History: 1.12 Release"
ModuleInfo "History: Added call to fa_FreeChannel to TFreeAudioChannel destructor"
ModuleInfo "History: 1.11 Release"
ModuleInfo "History: Nudge"
ModuleInfo "History: 1.10 Release"
ModuleInfo "History: Bumped"
ModuleInfo "History: 1.08 Release"
ModuleInfo "History: Added src sample reference to TFreeAudioSound"
ModuleInfo "History: Channel playing now returns sample playback position"
ModuleInfo "History: 1.07 Release"
ModuleInfo "History: Added DirectSound driver"
ModuleInfo "History: 1.06 Release"
ModuleInfo "History: Added Method TFreeAudioChannel.Position"
ModuleInfo "History: 1.05 Release"
ModuleInfo "History: Mono and 8 bit sample support added"

Import BRL.Audio
Import Pub.FreeAudio
Import Pub.DirectX

Private

Const CLOG=False

Public

Type TFreeAudioSound Extends TSound

	Field fa_sound
	
	Method Delete()
		fa_FreeSound fa_sound
		If CLOG WriteStdout "Deleted FreeAudio sound "+fa_sound+"~n"
	End Method

	Method Play:TFreeAudioChannel( alloced_channel:TChannel )
		Local channel:TFreeAudioChannel,fa_channel
		If alloced_channel
			channel=TFreeAudioChannel( alloced_channel )
			If Not channel Return
			fa_channel=channel.fa_channel
		EndIf		
		fa_channel=fa_PlaySound(fa_sound,False,fa_channel)
		If Not fa_channel Return
		If channel And channel.fa_channel=fa_channel Return channel
		Return TFreeAudioChannel.CreateWithChannel( fa_channel )
	End Method
	
	Method Cue:TFreeAudioChannel( alloced_channel:TChannel )
		Local channel:TFreeAudioChannel,fa_channel
		If alloced_channel
			channel=TFreeAudioChannel( alloced_channel )
			If Not channel Return
			fa_channel=channel.fa_channel
		EndIf
		fa_channel=fa_PlaySound( fa_sound,True,fa_channel )
		If Not fa_channel Return
		If channel And channel.fa_channel=fa_channel Return channel
		Return TFreeAudioChannel.CreateWithChannel( fa_channel )
	End Method

	Function CreateWithSound:TFreeAudioSound( fa_sound,src:TAudioSample )
		Local t:TFreeAudioSound=New TFreeAudioSound
		t.fa_sound=fa_sound
'		t.src=src
		Return t
	End Function
	
End Type

Type TFreeAudioChannel Extends TChannel

	Field fa_channel
	
	Method Delete()
		If fa_channel fa_FreeChannel fa_channel
	End Method

	Method Stop()
		fa_StopChannel fa_channel
		fa_channel=0
	End Method
	
	Method SetPaused( paused )
		fa_SetChannelPaused fa_channel,paused
	End Method
	
	Method SetVolume( volume# )
		fa_SetChannelVolume fa_channel,volume
	End Method
	
	Method SetPan( pan# )
		fa_SetChannelPan fa_channel,pan
	End Method
	
	Method SetDepth( depth# )
		fa_SetChannelDepth fa_channel,depth
	End Method
	
	Method SetRate( rate# )
		fa_SetChannelRate fa_channel,rate
	End Method
	
	Method Playing()
		Local status=fa_ChannelStatus( fa_channel ) 
		If status=FA_CHANNELSTATUS_FREE Return False
		If status&amp;FA_CHANNELSTATUS_STOPPED Return False
		If status&amp;FA_CHANNELSTATUS_PAUSED Return False
		Return True
	End Method
	
	Method Position()
		Return fa_ChannelPosition( fa_channel )
	End Method
	
	Function CreateWithChannel:TFreeAudioChannel( fa_channel )
		Local t:TFreeAudioChannel=New TFreeAudioChannel
		t.fa_channel=fa_channel
		Return t
	End Function
	
End Type

Type TFreeAudioAudioDriver Extends TAudioDriver

	Method Name$()
		Return _name
	End Method
	
	Method Startup()
		If _mode&lt;&gt;-1 Return fa_Init( _mode )&lt;&gt;-1
		If fa_Init( 0 )&lt;&gt;-1 Return True
?Win32
		Return fa_Init( 1 )&lt;&gt;-1
?
	End Method
	
	Method Shutdown()
		fa_Close
	End Method

	Method CreateSound:TFreeAudioSound( sample:TAudioSample,flags )
		Local channels,bits

		Select sample.format
?BigEndian
		Case SF_MONO16LE
			sample=sample.Convert(SF_MONO16BE)
		Case SF_STEREO16LE
			sample=sample.Convert(SF_STEREO16BE)
?LittleEndian
		Case SF_MONO16BE
			sample=sample.Convert(SF_MONO16LE)
		Case SF_STEREO16BE
			sample=sample.Convert(SF_STEREO16LE)
?
		End Select
		Local loop_flag
		If (flags &amp; 1) loop_flag=-1
		channels=ChannelsPerSample[sample.format]
		If Not channels Return
		bits=8*BytesPerSample[sample.format]/channels
		Local fa_sound=fa_CreateSound( sample.length,bits,channels,sample.hertz,sample.samples,loop_flag )
		If CLOG WriteStdout "Generated FreeAudio sound "+fa_sound+"~n"
		Return TFreeAudioSound.CreateWithSound( fa_sound,sample )
	End Method
	
	Method AllocChannel:TFreeAudioChannel()
		Local fa_channel=fa_AllocChannel()
		If fa_channel Return TFreeAudioChannel.CreateWithChannel( fa_channel )
	End Method
		
	Function Create:TFreeAudioAudioDriver( name$,mode )
		Local t:TFreeAudioAudioDriver=New TFreeAudioAudioDriver
		t._name=name
		t._mode=mode
		Return t
	End Function
	
	Field _name$,_mode
	
End Type

?Win32
If DirectSoundCreate TFreeAudioAudioDriver.Create "FreeAudio DirectSound",1
TFreeAudioAudioDriver.Create "FreeAudio Multimedia",0
?MacOS
TFreeAudioAudioDriver.Create "FreeAudio CoreAudio",0
?Linux
TFreeAudioAudioDriver.Create "FreeAudio ALSA System",0			
'TFreeAudioAudioDriver.Create "FreeAudio PulseAudio System",1
'TFreeAudioAudioDriver.Create "FreeAudio OpenSound System",2

?
TFreeAudioAudioDriver.Create "FreeAudio",-1</textarea><br>And finally for bmax-install.sh<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#!/bin/bash

###########################################################################
# name: bmax-install
# author: Jason Cook
# version 0.1
#
# THIS SCRIPT COMES WITH NO WARRANTIES WHAT SO EVER USE AT YOUR OWN RISK
#
# This script will load and setup the dependencies for blitzmax on
# Ubuntu baseded linux distributions (others may be added later)
#
# NOTE: THIS SCRIPT WILL PATCH THE FILES TO GET SOUND WORKING THE DEFAULT
# IS THE ALSA DRIVER. IF IN THE FUTURE BLITZ MAX FINALLY GETS THESE
# THEN FIND THE patch_max FUNCTION CALL AND JUST COMMENT IT OUT
# TO PATCH BLITZ MAX YOU WILL NEED TO CREATE SOME FILES IN THIS SCRIPS
# DIRECTORY ALONG WITH ADDING THE COMPRESSED BLITZ MAX FILE THAT YOU
# DOWN LOADED.
#
###########################################################################

IS_64=0
INSTALL=2
PKGMGRS=("aptitude" "emerge" "yum" "urpmi" "pacman" "zypper");
PKGMGR=
BASEDIR=$(dirname $0)
SCRIPT=$(readlink -f $0)
SCRIPTPATH=$(dirname $SCRIPT)
WHO=$(who am i | awk '{print $1}')
if [ -z $WHO ]; then WHO=$SUDO_USER; echo "TRYING SUDO_USER"; else echo "who am i WORKS"; fi
if [ -z $WHO ]; then echo "NO USER"; exit 1; fi
INSTALLER=/home/$WHO/

usage(){
	echo "Place BlitzMax tar.gz file in same directory as install script then type...";
	echo "./bmax-install [OPTIONS]";
	echo "[OPTIONS]";
	echo "	-i	: 	Install Packages and BlitzMax";
	echo "	-u	: 	Uninstall Packages and BlitzMax";
	echo "	-p	:	Install all required packages 32/64bit (Default)";
	echo "	-r	:	Uninstall all required packages and BlitzMax.";
	echo "	-m	:	Install BlitzMax Only";
	echo "	-n	:	Uninstall BlitzMax Only";
	echo "	-h	:	Display this help";
	echo "";
}

# START OF PACKAGE INSTALLER
################################################################################################################################################################################################
################################################################################################################################################################################################

# make links if 64 bit
link_64(){
	# Check to see if the link exist; If not make it
	if [ $INSTALL -eq 0 ] || [ $INSTALL -eq 2 ]; then
		echo "BltizMax Installer: Setting Up System Links in /usr/lib32 for 64 bit Linux";
		if [ ! -f /usr/lib32/libGL.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1 /usr/lib32/libGL.so ; fi
		if [ ! -f /usr/lib32/libGLU.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libGLU.so.1 /usr/lib32/libGLU.so ; fi
		if [ ! -f /usr/lib32/libX11.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libX11.so.6 /usr/lib32/libX11.so ; fi
		if [ ! -f /usr/lib32/libfreetype.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libfreetype.so.6 /usr/lib32/libfreetype.so ; fi
		if [ ! -f /usr/lib32/libXxf86vm.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libXxf86vm.so.1 /usr/lib32/libXxf86vm.so ; fi
		if [ ! -f /usr/lib32/libXft.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libXft.so.2 /usr/lib32/libXft.so ; fi
		if [ ! -f /usr/lib32/libXpm.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libXpm.so.4 /usr/lib32/libXpm.so ; fi
		if [ ! -f /usr/lib32/libasound.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libasound.so.2 /usr/lib32/libasound.so ; fi
		if [ ! -f /usr/lib32/libpulse-simple.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libpulse-simple.so.0 /usr/lib32/libpulse-simple.so ; fi
		if [ ! -f /usr/lib32/libopenal.so ]; then sudo ln -s /usr/lib/i386-linux-gnu/libopenal.so.1 /usr/lib32/libopenal.so ; fi
	fi
	# Check to see if the link exist; If so remove it
	if [ $INSTALL -eq 1 ] || [ $INSTALL -eq 3 ]; then
		echo "BltizMax Installer: Removing System Links in /usr/lib32 for 64 bit Linux";
		if [ -f /usr/lib32/libGL.so ]; then sudo rm /usr/lib32/libGL.so ; fi
		if [ -f /usr/lib32/libGLU.so ]; then sudo rm /usr/lib32/libGLU.so ; fi
		if [ -f /usr/lib32/libX11.so ]; then sudo rm /usr/lib32/libX11.so ; fi
		if [ -f /usr/lib32/libfreetype.so ]; then sudo rm /usr/lib32/libfreetype.so ; fi
		if [ -f /usr/lib32/libXxf86vm.so ]; then sudo rm /usr/lib32/libXxf86vm.so ; fi
		if [ -f /usr/lib32/libXft.so ]; then sudo rm /usr/lib32/libXft.so ; fi
		if [ -f /usr/lib32/libXpm.so ]; then sudo rm /usr/lib32/libXpm.so ; fi
		if [ -f /usr/lib32/libasound.so ]; then sudo rm /usr/lib32/libasound.so ; fi
		if [ -f /usr/lib32/libpulse-simple.so ]; then sudo rm /usr/lib32/libpulse-simple.so ; fi
		if [ -f /usr/lib32/libopenal.so ]; then sudo rm /usr/lib32/libopenal.so ; fi
	fi
}

# apt-get installer
install_aptitude(){
	
	if [ $IS_64 -eq 1 ]; then
		PKGS="ia32-libs-multiarch g++-multilib build-essential libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev libfreetype6-dev libxpm-dev libxft-dev libpulse-dev libopenal-dev";
	else
		PKGS="g++ gcc build-essential libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev libfreetype6-dev libxpm-dev libxft-dev libpulse-dev libopenal-dev";
	fi
	
	echo "BlitzMax Installer: Updating apt-get packages";
	echo "";
	
	echo "BlitzMax Installer: Installing apt-get packages";
	echo "";
	sudo apt-get install $PKGS;

	return $?;
}

# apt-get uninstall
remove_aptitude(){
	# This will only remove the development files leaves ia32-libs-multiarch g++ and build-essentials alone in case any other application uses them
	# But then some of these would be used any how
	PKGS="libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev libfreetype6-dev libxpm-dev libxft-dev libpulse-dev libopenal-dev";

	echo "Uninstalling...";
	sudo apt-get --purge remove $PKGS;

	echo "Performing apt-get cleanup...";
	sudo apt-get autoremove;
	sudo apt-get autoclean;
	return $?;
}

# START OF BLITZ MAX INSTALLER SCRIPT
################################################################################################################################################################################################
################################################################################################################################################################################################

# Extract Blitz max into the working directory
extract_max(){
	# Extract the BlitzMax Directory and move it to /opt
	echo "BltizMax Installer: Extracting BlitzMax Directory";
	if [ -f *_linuxx86.tar.gz ]; then tar -zxf BlitzMax*_linuxx86.tar.gz ; else echo "BlitzMax Installer: No BlitzMax archive found"; exit 0; fi
	chmod -R 770 $SCRIPTPATH/BlitzMax
	return $?;
}

# Install the BlitzMax directory into /opt
install_max(){

	# Move directory
	echo "BltizMax Installer: Moving BlitzMax Directory";
	mv $SCRIPTPATH/BlitzMax /opt
		
	# Set up links in /urs/local/bin
	echo "BltizMax Installer: Setting Up BlitzMax Links";
	if [ ! -f /usr/local/bin/bmk ]; then sudo ln -s /opt/BlitzMax/bin/bmk /usr/local/bin/bmk ; fi
	if [ ! -f /usr/local/bin/MaxIDE ]; then sudo ln -s /opt/BlitzMax/MaxIDE /usr/local/bin/MaxIDE ; fi
	if [ ! -f /usr/local/bin/maxide ]; then sudo ln -s /opt/BlitzMax/MaxIDE /usr/local/bin/maxide ; fi			# alterante
	#if [ ! -f /usr/local/bin/maxide ]; then sudo ln -s /opt/BlitzMax/bin/docmods /usr/local/bin/docmods ; fi
	#if [ ! -f /usr/local/bin/makedocs ]; then sudo ln -s /opt/BlitzMax/bin/makedocs /usr/local/bin/makedocs ; fi
	
	# Set these you here so they get the same file permissions as the rest
	sudo mkdir /opt/BlitzMax/tmp
	sudo mkdir /opt/BlitzMax/cfg

	# Make sure that the permissions are set on the tmp directory and set the group to the current user
	sudo chmod -R 770 /opt/BlitzMax
	sudo chmod -R 770 /opt/BlitzMax/bin	
	sudo chmod 770 /opt/BlitzMax/MaxIDE

	if [ -f /opt/BlitzMax/tmp ]; then sudo chmod -R 770 /opt/BlitzMax/tmp ; fi
	sudo chgrp -R $WHO /opt/BlitzMax
	
	# Move the module directory and make a link to it
	# First time check
	if [ ! -d $INSTALLER/blitzmods ]; then
		sudo mv /opt/BlitzMax/mod /home/$WHO/blitzmods
		sudo ln -s $INSTALLER/blitzmods /opt/BlitzMax/mod
		sudo chown -R $WHO $INSTALLER/blitzmods
	else
		# Other times
		# Create a back up if brl,maxgui and pub modules directories already exists
		if [ ! $INSTALLER/blitzmods/backup ]; then
			sudo mkdir $INSTALLER/blitzmods/backup
			sudo mv $INSTALLER/blitzmods/brl.mod $INSTALLER/blitzmods/backup/brl.mod.bac
			sudo mv $INSTALLER/blitzmods/pub.mod $INSTALLER/blitzmods/backup/pub.mod.bac
			sudo mv $INSTALLER/blitzmods/maxgui.mod $INSTALLER/blitzmods/backup/maxgui.mod.bac
		else
			# If there is a backup directory then remove the old backups and make the new ones
			sudo rm -rf $INSTALLER/blitzmods/backup
			sudo mkdir $INSTALLER/blitzmods/backup
			sudo mv $INSTALLER/blitzmods/brl.mod $INSTALLER/blitzmods/backup/brl.mod.bac
			sudo mv $INSTALLER/blitzmods/pub.mod $INSTALLER/blitzmods/backup/pub.mod.bac
			sudo mv $INSTALLER/blitzmods/maxgui.mod $INSTALLER/blitzmods/backup/maxgui.mod.bac
		fi
		# Move then new modules into blitzmod
		sudo mv /opt/BlitzMax/mod/brl.mod $INSTALLER/blitzmods/brl.mod
		sudo mv /opt/BlitzMax/mod/pub.mod $INSTALLER/blitzmods/pub.mod
		sudo mv /opt/BlitzMax/mod/maxgui.mod $INSTALLER/blitzmods/maxgui.mod
		sudo rm -rf /opt/BlitzMax/mod
		sudo ln -s $INSTALLER/blitzmods /opt/BlitzMax/mod
		sudo chown -R $WHO $INSTALLER/blitzmods
	fi
	# Add a link to the users desktop
	if [ ! -f $INSTALLER/Desktop/MaxIDE ]; then sudo ln -s /opt/BlitzMax/MaxIDE $INSTALLER/Desktop/MaxIDE ; fi
	
	return $?;
}

# Remove BlitzMax and any links
remove_max(){
		
	if [ -f /usr/local/bin/bmk ];then sudo rm /usr/local/bin/bmk ; fi
	if [ -f /usr/local/bin/MaxIDE ]; then sudo rm /usr/local/bin/MaxIDE ;fi
	if [ -f /usr/local/bin/maxide ]; then sudo rm /usr/local/bin/maxide ; fi # alterante
	#if [ -f /usr/local/bin/docmods ]; then sudo rm /usr/local/bin/docmods ; fi
	#if [ -f /usr/local/bin/makedocs ]; then sudo rm /usr/local/bin/makedocs ; fi
	if [ -f $INSTALLER/Desktop/MaxIDE ]; then 
		sudo rm $INSTALLER/Desktop/MaxIDE
	fi
	if [ -d /opt/BlitzMax ]; then echo "BltizMax Installer: Deleting BlitzMax &amp; Links"; sudo rm -rf /opt/BlitzMax ; fi			
	return $?;	
}

# Apply patches
# NOTE: Was going to use patch. But it can't work with files that have been copied and pasted; so stuck with using full files unless it's shipped in a archive.
patch_max(){

	# back up some files before we replace them
	echo "BlitzMax Installer: Backing up files";
	mv $SCRIPTPATH/BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp $SCRIPTPATH/BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.bac
	mv $SCRIPTPATH/BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx $SCRIPTPATH/BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bac
	mv $SCRIPTPATH/BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx $SCRIPTPATH/BlitzMax/mod/brl.mod/appstub.mod/appstub.bac
	mv $SCRIPTPATH/BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx $SCRIPTPATH/BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bac
	
	ERROR=0
	echo "BlitzMax Installer: copying files";
	if [ -f $SCRIPTPATH/alsadevice.cpp ]; then cp $SCRIPTPATH/alsadevice.cpp $SCRIPTPATH/BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp ; else ERROR=1 ; fi
	if [ -f $SCRIPTPATH/pulseaudiodevice.cpp ]; then cp $SCRIPTPATH/pulseaudiodevice.cpp $SCRIPTPATH/BlitzMax/mod/pub.mod/freeaudio.mod/pulseaudiodevice.cpp ; else ERROR=1 ; fi

	if [ -f $SCRIPTPATH/freeaudio.bmx ]; then cp $SCRIPTPATH/freeaudio.bmx $SCRIPTPATH/BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx ; else ERROR=1 ; fi
	if [ -f $SCRIPTPATH/appstub.bmx ]; then cp $SCRIPTPATH/appstub.bmx $SCRIPTPATH/BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx ; else ERROR=1 ; fi
	if [ -f $SCRIPTPATH/freeaudioaudio.bmx ]; then cp $SCRIPTPATH/freeaudioaudio.bmx $SCRIPTPATH/BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx ; else ERROR=1 ; fi
	
	if [ $ERROR -eq 1 ]; then echo "BlitzMax Installer: Patch File Error."; exit 1; fi
	return $?;
}

# ENTRY POINT
################################################################################################################################################################################################
################################################################################################################################################################################################

# Remove Broken System links
clean_link(){
	echo "Removing any Broken System Links in $1";
	FILES=`find $1 | grep -v '\.disabled$' | sort`

for F in $FILES; do
    if [ ! -e $F ]; then
		echo "Removing: $F";
        sudo rm $F;
    fi
done
}

trap_int()
{
	echo "	  SIGINT detected. Exiting script.";
	echo "    Note that this may leave some operations incomplete.";
	echo "    Run the script again to complete any pending operations.";
	exit 0;
}

## intercept ctrl-c (SIGINT).
trap trap_int INT;

clear;
echo "Blitzmax Installation Script version 0.1";
echo "Please report bugs or suggestions to the same place you got these files";
echo "";

# Check for commandline options:
while getopts iuprmnh option; do
	case "${option}" in
		i) INSTALL=0;;
		u) INSTALL=1;;
		p) INSTALL=2;;
		r) INSTALL=3;;
		m) INSTALL=4;;
		n) INSTALL=5;;	
		h) usage; exit 0;;
		*?) usage; exit 0;;
	esac
done
unset opt;

## Check if script is run as root
if [ `whoami` = "root" ]; then
	echo "BltizMax Installer: Logged in as root/su/sudoer user.";
else
	echo "BltizMax Installer: You need to be root/su/sudoer.";
	exit $?;
fi

## Get architecture.
echo "BltizMax Installer: Checking architecture...";
if [ `uname -m` == "x86_64" ]; then
	IS_64=1;
	echo "BltizMax Installer: Machine is 64 bit";
else
	echo "BltizMax Installer: Machine is 32 bit";
fi

## Determine the package manager we have available.
echo "BltizMax Installer: Identifying package manager...";
PKGMGR="";
for pm in ${PKGMGRS[@]}; do
	if [ ! -f "`which $pm`" ]; then ## 
		continue;
	fi
	
	PKGMGR=$pm;
	echo "    found: $pm";
	break;
done
unset pm;

if [ -z "$PKGMGR" ]; then
	echo "BltizMax Installer: Unable to find a package manager.";
	echo "    Supported are: ${PKGMGRS[@]}";
	exit $?;
fi

if [ -z "$PKGMGR" ]; then ## no package manager found or need root login
	echo "BltizMax Installer: Login as root and then re-run this script.";
	exit $?;
fi

# Install every thing
if [ $INSTALL -eq 0 ]; then
	echo "BltizMax Installer: Installing Packages";
	install_$PKGMGR;	# Is there away to see if the user has said no?
	if [ $IS_64 -eq 1 ]; then link_64; fi

	# Check to see if Blitzmax is already installed
	if [ -d /opt/BlitzMax ]; then
		echo "BlitzMax Installer: BlitzMax directory alreay exists. Remove with option -n and re-install with option -m.";
		exit $?;
	fi 
	echo "BltizMax Installer: Extract and patch";
	extract_max;
	patch_max;	# IF BLITZMAX SOUND IS FIXED THE COMMENT THIS OUT
	echo "BltizMax Installer: Installing BlitzMax";
	install_max;
fi

# Uninstall every thing
if [ $INSTALL -eq 1 ]; then
	echo "BltizMax Installer: Un-installing Packages";
	remove_$PKGMGR;
	if [ $IS_64 -eq 1 ]; then link_64; fi
	echo "BltizMax Installer: Un-installing BlitzMax";
	
	# Check to see if Blitz Max is already installed
	if [ -d /opt/BlitzMax ]; then
		remove_max;
	else
		echo "BlitzMax Installer: BlitzMax is NOT installed.";
	fi
fi

# Install Packages
if [ $INSTALL -eq 2 ]; then
	echo "BltizMax Installer: Installing Packages";
	install_$PKGMGR;
	if [ $IS_64 -eq 1 ]; then link_64; fi
	echo "BltizMax Installer: Package Installation Complete";
fi

# Uninstall Packages
if [ $INSTALL -eq 3 ]; then
	echo "BltizMax Installer: Un-installing Packages";
	remove_$PKGMGR;
	if [ $IS_64 -eq 1 ]; then link_64; fi
	echo "BltizMax Installer: Package Removal Complete";
fi

# Install BlitzMax
if [ $INSTALL -eq 4 ]; then

	# Check to see if Blitzmax is already installed
	if [ -d /opt/BlitzMax ]; then
		echo "BlitzMax Installer: BlitzMax directory alreay exists. Remove with option -n and re-install with option -m.";
		exit $?;
	fi 

	echo "BltizMax Installer: Extract and patch";
	extract_max;
	patch_max;			# IF BLITZMAX SOUND IS FIXED THE COMMENT THIS OUT
	echo "BltizMax Installer: Installing BlitzMax";
	install_max;

fi

# Uninstall BlitzMax
if [ $INSTALL -eq 5 ]; then
	echo "BltizMax Installer: Un-installing BlitzMax";
	if [ -d /opt/BlitzMax ]; then
		remove_max;
	else
		echo "BlitzMax Installer: BlitzMax is NOT installed.";
	fi
fi

# Note this should remove all broken links not just those created by this installer
# Un-comment the two lines below to find and remove any broken system links 
#clean_link /usr/lib32
#clean_link /usr/local/bin

echo "BltizMax Installer: Task Completed"
exit $?;</textarea><br><br>Now we need to make bmax-install.sh an executable file by changing its permission properties. Right click on the bmax-install.sh file and select properties from the context menu. You need to check the execute box in the permissions tab. You can also do it from the command line terminal by using<br><pre class=code>cd $HOME/Desktop/bmax-install
chmod -x bmax-install.sh</pre><br><br>OK before you jump straight in and run it a few things first.<br><br>NOTE: If you find that you have problems with blitzmax applications running with the free drivers that come with the distribution then try and use one of the proprietary drivers.<br>You'll need to do a bit of googling to find out if your graphics hardware is supported as many of the proprietary drivers no longer<br>support old hardware.<br><br>The default sound driver selected is ALSA if you want to change it edit Freeaudio.bmx and Freeaudioaudio.bmx.<br><br>The locations are:<br><pre class=code>Freeaudio.bmx lines 66-75, lines 118-124
Just comment and uncomment for which you want to add or remove.
NOTE: in lines 118-124 change the value of the case statement to 0 for which ever one you use. If you're going to use all then just uncomment those lines, but leave the values as they are.</pre><br><pre class=code>Freeaudioaudio.bmx lines 206-208
Again just comment/uncomment for which you want to use. And as before change the numeric value to match the one that was changed in the case statement in Freeaudio.bmx</pre><br>These files in the BlitzMax directory that are to be replace are given the extension .bac so you can just do a bit of renaming to get them back.<br><br><b>In bmax-install.sh</b><br>If at some point the patching will not be needed then comment out lines 299,346.<br>And near the bottom ( lines 634-635 ) are two calls to remove any broken symbolic links. These are commented out by default just in case they remove something that they shouldn't on your machine but these do work perfectly on mine.<br><br>The script move the blitzmax modules directory to the installers home directory with the name 'blitzmods' and then a link is placed in /opt/BlitzMax to this directory. So removing BlitzMax will not remove the modules.<br><br>OK onto the fun stuff.<br><br>In a terminal that's set to the bmax-install directory.<br>type: sudo apt-get update<br>This makes sure that the packages are upto date.<br>Now type: ./bmax-install<br><br>You will then see all the options. The default is just to get the required packages so you can move BlitzMax and patch manually, but you will<br>have to do any system links yourself other than those that are created by default for the 64bit version of Linux. <br><br>The options:<br>   -i   :   Installs all the packages and places BlitzMax into /opt and sets up links so that who ever did the install is the only one who can use it.<br>   -u   :   Removes all the packages,links and BliztMax. But not build tools g++, build-essential and ia32-lib-multiarch for the 64bit.<br>   -p   :   Just installs the packages and any links for the 64bit version of Linux.<br>   -r   :   Just removes the packages and any links for the 64bit version of Linux.<br>   -m   :   Just installs BlitzMax to /opt and set up links same as -i<br>   -n   :   Just removes BlitzMax.<br><br>So typing: sudo ./bmax-install.sh -i <br>will install everything.<br><br>Once the script has been run and every thing has installed you will be able to start BlitzMax IDE from the command line using MaxIDE or maxide or use the link on your desktop. You can also use bmk from the command line too. Don't forget that you need to rebuild the module. <br><br></td></tr></table><br>
<a name="1189532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to add something: do not "chmod 777" the install script, just "chmod +x " to make it executable. Just a habbit :D.<br><br>Maybe you could consider storing the patch-file-data within the shell-file to keep it a single-file download. Then just echo-out the file content to the files.<br><br>echo 'start a new file' &gt; file.txt<br>echo 'append to the file' &gt;&gt; file.txt<br><br>Easier and way more comfortable is something like:<br><br><pre class=code>
#!/bin/bash

cat &lt;&lt;EOF &gt;mynewfile.txt
the content
of this new file
is just placed
between the eofs
EOF

cat &lt;&lt;EOF &gt;anotherfile.txt
bla
blubb
EOF
</pre><br><br>You could even write a shell script, which combines your install script with the "files" (just replace a "#CREATEFILES" from your install script with a "createfiles.sh"-content).<br><br><br>bye<br>Ron<br><br>PS: nice work! <br><br></td></tr></table><br>
<a name="1189538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Derron<br>Was thing of putting the patches into the scripts. But doing it the way that I've done it gives you the opportunity to edit the patch files first.<br>When I get round to it package management detection will use lsb_release as trying to determine using which is unreliable. I could possible use the /dev/null method.<br><br>Currently I'm messing around with OpenSUSE 64bit. What a nightmare it is. It maybe nice to use but trying to use any proprietary drives or system related is a waste of time. The hours just to get the pre-build nvidia drivers to download.<br>Ran the 32bit version in virtualbox all it needed was a few new packages, but it took a while to get it to compile on the 64bit version but the executables complained the GL could load something grabled xvideo. <br><br></td></tr></table><br>
<a name="1191083"></a>

<a name="1191084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> For your script:<br><br>Ubuntu 13.04 / Kubuntu 13.04 builds modules out of the box with these dependencies (the 32-bit version):<br><br><pre class=code>
sudo apt-get install libc6-dev
sudo apt-get install libx11-dev
sudo apt-get install libxxf86vm-dev
sudo apt-get install g++
sudo apt-get install mesa-common-dev
sudo apt-get install libxpm-dev
sudo apt-get install libfltk1.1-dev
sudo apt-get install libfreetype6-dev
sudo apt-get install libglu1-mesa-dev
sudo apt-get install libidn11-dev
</pre> <br><br></td></tr></table><br>
<a name="1191131"></a>

<a name="1191135"></a>

<a name="1191146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> sudo apt-get install libidn11-dev <br></div>Hmmm something new. I will have to go through the dependencies as I'm sure libc6-dev is installed by default and libidn11-dev is for domain names etc.<br><br>When I get round to it I will be testing the first post script on Ubuntu 13 to see if it is still valid and see if I can tidy up some of the developer packages.<br><br>Thanks Sub_Zero<br><br><div class="quote"> sudo apt-get install libfltk1.1-dev <br></div>Hold on doesn't the fltk module come with the fltk source code to build it's self? The modules current version is 1.3 <br><br>In a day or so there will be a new script that for the time being that should work on Ubuntu 12.04, Linux Mint 15, openSUSE 12.3 and fedora 18. <br><br></td></tr></table><br>
<a name="1191158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> The libidn might be baucause of some 3rd party module, sorry :)<br><br>woops you might be right about libfltk.. <br><br></td></tr></table><br>
<a name="1191160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added a all-in-one patch script to the first post.<br><br>Sub_Zero:You don't need half of those packages.<br><br>Installing libglu1-mesa-dev installs libx11 etc.<br>For a basic package install for BlitzMax with MaxGUI you just need.<br><br>32bit<pre class=code>g++</pre>64bit<pre class=code>ia32-libs-multiarch g++-multilib</pre>Main packages<pre class=code>libglu1-mesa-dev libfreetype6-dev libxpm-dev libxft-dev</pre> and one (or all) sound development package <pre class=code>libasound2-dev libpulse-dev libopenal-dev</pre> <br><br></td></tr></table><br>
<a name="1191161"></a>

<a name="1191162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok i always build modules, then on error i install the packages that contains the missing .h files :) then i rebuild again, so that's why i installed the packages in that order...<br><br>Oh by the way, libc6-dev was not installed in kubuntu by default. <br><br></td></tr></table><br>
<a name="1191488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> @dawlane:<br><br>thanks for the "patcher script" - but if you think of changing the files someday you better use the "EOF"-style I wrote some posts ago. It is way better than<br>echo xyz &gt;&gt; file.txt<br>echo xyt2 &gt;&gt; file.txt<br>..<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1191733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Derron:Problem with using <br>cat &gt; file &lt;&lt;EOF<br>blah,blah<br>EOF<br>Is that the end EOF is picky about having any characters in front of it on the same line. Tends to make code unsightly if it's a function doing the file making. <br><br></td></tr></table><br>
<a name="1192149"></a>

<a name="1192150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes... is is default for redirections (some may know it from php, it acts the same way).<br><br>But you can disable that behaviour (eg. for generating pretty/intended code):<br><br>Just use "&lt;&lt;-EOF" (dash/minus-sign), this tells the script to ignore tab-signs<br><br>For more information use: <a href="http://wiki.bash-hackers.org/syntax/redirection#here_documents" target="_blank">http://wiki.bash-hackers.org/syntax/redirection#here_documents</a><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1192152"></a>

<a name="1192158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah but wouldn't that screw up the text to the file it's outputting to? It would kind of make the resulting cpp file hard to read.<br>Edit: And Blitzploter had a problem with EOF from script-code that works flawlessly on mine. <br><br></td></tr></table><br>
<a name="1192212"></a>

<a name="1192213"></a>

<a name="1192214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are no other signs allowed BEFORE and AFTER the delimiter used (that "EOF" is just a common word, others would be possible too).<br><br>@readability of files.<br>With comments say, it just ignores leading whitespace when searching the delimiter.<br><br>Please be aware that sometimes people leave " "-spaces after words. If you use Geany as editor, you can setup it to remove trailing whitespaces.<br><br>The "-"-dash sign might be not available on all "current" bash-versions but the normal<br><pre class=code>
#!/bin/bash

#intention is no problem for ALL but the EOF-End-delimiter
				cat &lt;&lt;EOF &gt;mynewfile.txt
	the content
		of this new file
			is just placed
				between the eofs
EOF
</pre><br><br>should be available when run with the bash interpreter.<br><br><br>There are people having the <a href="http://www.krenger.ch/blog/bash-here-document-at-line-n-delimited-by-end-of-file-wanted-eof" target="_blank">same problem</a> like blitzplotter but they had ... signs in front or after the EOF-End-delimiter.<br><br>bye<br>Ron<br><br>edit: if you are not sure if you use reserved words ($1, $2...) in your code, you could add quotes around the first EOF (&gt;&gt;'EOF' or &gt;&gt;"EOF") -  this should disable that variable recognition.<br><br>edit2: if you have the original upload (with EOF), please feel free to post it again for reference...I am quite sure, there is a simple character before or after the EOF. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
