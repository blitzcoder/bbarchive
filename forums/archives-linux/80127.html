<!DOCTYPE html><html lang="en" ><head ><title >Library mismatch (wxWidgets?)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Library mismatch (wxWidgets?)</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=109" >Linux Discussion</a>/<a href="#bottom" >Library mismatch (wxWidgets?)</a><br><br>
<a name="900387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I try to run code that uses the wxMax library it crashes with this:<br><div class="quote"> /usr/bin/ld: warning: libstdc++.so.6, needed by /usr/lib/libwx_gtk2u_aui-2.8.so, may conflict with libstdc++.so.5<br>Fatal Error: Mismatch between the program and library build versions detected.<br>The library used 2.8 (no debug,Unicode,compiler with C++ ABI 1002,wx containers,compatible with 2.6),<br>and your program used 2.8 (no debug,Unicode,compiler with C++ ABI 102,wx containers,compatible with 2.6).<br>Aborted <br></div><br><br>I had to install some older version of wxWidgets to get code::blocks to work, could that be the problem?<br><br>I still have 2.8, 2.6, and 2.4 development packages installed.. <br><br></td></tr></table><br>
<a name="900399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Possibly one compiled with  gcc3 and one compiled with gcc4 ?<br><br>I'm guessing perhaps BlitzMax with gcc3 and the libs are gcc4... given the warning above. <br><br></td></tr></table><br>
<a name="900400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have seen this before when I was using Brucey's wxMax module though I haven't seen this with code::blocks (yet. As most of my equipment is in storage while I'm decorating).<br>This seams to relate to what version of GCC wxWidgets was built with (a wild stab in the dark would point to GCC 4.2) and what the calling application was built with. If your like me and have BMax using GCC 3.3 that would be the problem.<br>What I suggest is making a temporary g++-3.3/gcc-3.3 link to call GCC 4.2 and let me know what happens. <br><br></td></tr></table><br>
<a name="900403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What I suggest is making a temporary g++-3.3/gcc-3.3 link to call GCC 4.2 and let me know what happens.  <br></div><br>Funny, that used to work for me, but not on recent versions of Linux... I need to try a version of bmk which doesn't specify a "version" of gcc and see how that goes instead. Apps built with the symlink crash almost immediately for me - which is very strange. Like I said, it used to work. <br><br></td></tr></table><br>
<a name="900404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The g++-3.3/gcc-3.3 link tends to be a bit of a hit and miss affair. Some times it works and some times it doesn't. <br>I have tried modifying bmk but that cause more issues. I think the problem could be bcc <br><br></td></tr></table><br>
<a name="900406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've had quite horrible experiences with symlinking.. as Brucey may recall :P<br><br>I'm fairly certain this only started happening when I installed code::blocks, although it's been awhile since I tried compiling a wx program. <br><br></td></tr></table><br>
<a name="900407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I think the problem could be bcc  <br></div><br>bcc only generates assembler (.s) and has nothing to do with the final compiled binary.<br><br>bmk is the one which does the work of making sure everything gets compiled and linked with the correct programs.<br>I'm going to try a new BlitzMax install on Linux and see if a fixed bmk solves my issues... fingers crossed.<br>I would much rather have a working gcc4 build. <br><br></td></tr></table><br>
<a name="900419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> gcc4 is a bit picky (with regards c++ standard), isn't it?  I suppose it's better to be too picky than not enough though. <br><br></td></tr></table><br>
<a name="900420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The error message says something about 'wx containers,' is it referring to some specific wx class? <br><br></td></tr></table><br>
<a name="900426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> no, that's a general statement which gives you an idea of what was compiled into the library.<br>The important bit as the ABI number... which indicates a different version of gcc. <br><br></td></tr></table><br>
<a name="900433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's something of interest <a href="http://www.trilithium.com/johan/2005/06/static-libstdc/" target="_blank">http://www.trilithium.com/johan/2005/06/static-libstdc/</a> <br><br></td></tr></table><br>
<a name="900685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> How does that help us? Isn't the problem simply in wxWidgets?<br><br>I always get that libstdc warning, is it because BlitzMax insists on using libstdc++.so.5? <br><br></td></tr></table><br>
<a name="900695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> it's because gcc3.3 links to libstdc++.so.5 and gcc4 links to libstdc++.so.6<br><br>Mixing standard library versions isn't really recommended, but generally it shouldn't be an issue.<br><br>wxWidgets initialization code probably checks the version the code expects and the version loading via the shared objects at runtime. Which isn't unreasonable.<br><br><br>I tried a rebuild of everything using gcc4 yesterday... and it looks like the GC blows up for some reason - on any BlitzMax apps I run. Which is a shame. The segfault is usually caught on a "New .....", and I've narrowed it down to possibly some of the membit checking/freeing stuff... dunno what's going on in there really tho ;-)<br>Bit strange all the same... maybe some of the optimisation of gcc has broken something in there...<br>oh well. <br><br></td></tr></table><br>
<a name="900802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> But wait.. doesn't BlitzMax use the static libraries (compiled with gcc 3.3 - from the Google Code downloads for wxmax) when it tries to compile a program?<br><br>I'm almost completely lost to what exactly the problem is, I haven't fiddled with gcc/g++ or anything on the wx.mod side. Last thing I remember doing that was related to wxWidgets was getting Code::Blocks to install and run - and I don't really remember what I had to do, other then install an old version of wxWidgets. <br><br></td></tr></table><br>
<a name="900839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's possible that it's picking up the system shared objects ahead of the static libs.<br>I guess there must be something one can add to the link options to make sure it looks in the local folders first. <br><br></td></tr></table><br>
<a name="904374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a note for any future problems, I rebuilt (and removed a ton of the older ones) the wx library Code::Blocks relies on and it (finally) works.<br><br>;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
