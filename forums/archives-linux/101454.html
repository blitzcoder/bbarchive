<!DOCTYPE html><html lang="en" ><head ><title >How To: Dependencies Ubuntu/Debian/Mint Apr 2015</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How To: Dependencies Ubuntu/Debian/Mint Apr 2015</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How To: Dependencies Ubuntu/Debian/Mint Apr 2015</a><br><br>
<a name="1204854"></a>

<a name="1204855"></a>

<a name="1204856"></a>

<a name="1204857"></a>

<a name="1204858"></a>

<a name="1204859"></a>

<a name="1204860"></a>

<a name="1204861"></a>

<a name="1204863"></a>

<a name="1204864"></a>

<a name="1204865"></a>

<a name="1204867"></a>

<a name="1204868"></a>

<a name="1204869"></a>

<a name="1204870"></a>

<a name="1204874"></a>

<a name="1204875"></a>

<a name="1204877"></a>

<a name="1204896"></a>

<a name="1204897"></a>

<a name="1204898"></a>

<a name="1204899"></a>

<a name="1204900"></a>

<a name="1204901"></a>

<a name="1204902"></a>

<a name="1204904"></a>

<a name="1204905"></a>

<a name="1204906"></a>

<a name="1204908"></a>

<a name="1204911"></a>

<a name="1204913"></a>

<a name="1204914"></a>

<a name="1204922"></a>

<a name="1204926"></a>

<a name="1204927"></a>

<a name="1204930"></a>

<a name="1204931"></a>

<a name="1204994"></a>

<a name="1204997"></a>

<a name="1204998"></a>

<a name="1205036"></a>

<a name="1205053"></a>

<a name="1205338"></a>

<a name="1205339"></a>

<a name="1205348"></a>

<a name="1205349"></a>

<a name="1205354"></a>

<a name="1207096"></a>

<a name="1207097"></a>

<a name="1207098"></a>

<a name="1207099"></a>

<a name="1207100"></a>

<a name="1207101"></a>

<a name="1207103"></a>

<a name="1207165"></a>

<a name="1207166"></a>

<a name="1207168"></a>

<a name="1207169"></a>

<a name="1207170"></a>

<a name="1207171"></a>

<a name="1207359"></a>

<a name="1209359"></a>

<a name="1216044"></a>

<a name="1216680"></a>

<a name="1216681"></a>

<a name="1223237"></a>

<a name="1223243"></a>

<a name="1223244"></a>

<a name="1223245"></a>

<a name="1223246"></a>

<a name="1223247"></a>

<a name="1223248"></a>

<a name="1223249"></a>

<a name="1223250"></a>

<a name="1230418"></a>

<a name="1230423"></a>

<a name="1230473"></a>

<a name="1230474"></a>

<a name="1230559"></a>

<a name="1230560"></a>

<a name="1230562"></a>

<a name="1230563"></a>

<a name="1230565"></a>

<a name="1230567"></a>

<a name="1230692"></a>

<a name="1235911"></a>

<a name="1270092"></a>

<a name="1272002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> -- <br><br></td></tr></table><br>
<a name="1274913"></a>

<a name="1306002"></a>

<a name="1306003"></a>

<a name="1309407"></a>

<a name="1320899"></a>

<a name="1320900"></a>

<a name="1320929"></a>

<a name="1321629"></a>

<a name="1329250"></a>

<a name="1329297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Covers: 32/64bit as of May 2016<br><br>For other distributions see:<br><a href="/posts.php?topic=101614" target="_blank">How To: Dependencies OpenSUSE 13.x, Leap 42.x</a><br><a href="/posts.php?topic=106263" target="_blank">How to: Dependencies Fedora 22/23</a><br><br><a href="/post.php?topic=101454&amp;post=1329295" target="_blank">Experimental BlitzMax dependency install script with GTK+2 option.</a><br><a href="/posts.php?topic=106957" target="_blank">Experimental BlitzMax NG istall script.</a><br><br>Ubuntu 12.04+<br>Debian 7.x (BlitzMax 1.50 needs the bmk, makedocs, docmods and the MaxIDE rebuilding with BlitzMax 1.48)<br>Debian 8.x<br>Linux Mint 13+<br>Should work on any distribution that's based on the above.<br><br>Greetings to all.<br><br>As Debian, Ubuntu and Linux Mint are closely related I rewrote a script that I wrote that installed the dependencies to build BlitzMax applications. And as there is very little difference between those three distribution I decide that I will update this topic by month and year (I cannot squeeze all the distribution name plus release version in the topic title) rather than reposting this script over and over again. If there is any difference between earlier versions they will be added as comments in the main script that you can edit yourself.<br><br>I found out is that the archiver gui tool in ubuntu may not extract the compressed BlitzMax archive. So you if this is a problem you can do it from the command line.<br><br>From Ubuntu 13.10 in regards to Blitz Max on a 64bit operating system is that the ia32-libs-multiarch package is no longer in the repositories and you now have to install any 32bit package manually (e.g. apt-get install package:i386).<br><br>As some people have had problems following instructions. I've written two scripts; one installs the 32bit dependencies for building Blitz Max applications and the other is a patch file for getting Blitz Max version 1.48/1.50 to work correctly on the newer Linux operating systems. The scripts should work on any Ubuntu based distribution from 12.04 onwards and any Debian based distribution from release 7 onwards.<br><br>First extract BlitzMax from the archive. If you have problems with the GUI archive tool, then in a command line terminal, use the cd command to change directory to where the archive is and execute the command below.<br>Note: Change the 148 to the version you are using.<pre class=code>tar -xf BlitzMax148_linuxx86.tar.gz</pre>You should read the 'man page' on tar for full details on it's use (type <b>man tar</b> in a terminal).<br><br><b>IMPORTANT UPDATES:</b><br>For some reason Ubuntu 16.04+ and later distributions of Debian 8.x have trouble creating release builds with BlitzMax. This may just be a 64 bit issue, but normal debug buils still work. <br><br>Debian 7.x uses GLIBC 2.13, so you will you get an error such as version `GLIBC_2.15' not found when you run the IDE or command line tools from a terminal.<br>So for Debian users, use BlitzMax version 1.48 (recommended) and try to rebuild the tools bmk, makedocs, docmods (remember to disable GUI and debug) using the newer version source code. Copy/Move these new applications to the new install bin directory and rebuild the modules, then rebuild the IDE and bmk, makedocs and docmods again.<br>If you have upgraded to Debian 8 then there should be no problems.<br>If you wish for your applications to be able to work across as many distribution a possible. The you should build against Debian using either a Virtual Machine or a <a href="http://www.monkey-x.com/Community/posts.php?topic=7600&amp;post=90285" target="_blank">chroot</a>.<br>--------------------------------------<br><b>NOTES: FOR DEBAIN BASED OS</b><br>To see what architectures that have been added use..<br><pre class=code>dpkg --print-architecture
dpkg --print-foreign-architectures</pre>Those commands will work on any version of dpkg 1.16.2 onwards and are not just a Debian thing.<br>--------------------------------------<br><br><b>Before running any script make sure that your system is up to date, the script only updates the package data base. Use either the GUI update tool or the commands below. You may need to do this a few times and restart your system. Not doing this will cause you problems if your distribution is one of the Long Term Support types.</b><br><pre class=code>sudo apt-get update &amp;&amp; sudo apt-get upgrade</pre>Or for Debian<pre class=code>su -c 'apt-get update &amp;&amp; apt-get upgrade'</pre><br>Now open a text editor and copy and paste the script code below into it. Edit the script to suite your system. When you have done this save it as bmax.sh<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#!/bin/bash
###################################################################
#                                                                 #
#       Blitz Max Build Environment Dependency Installer for      #	
#	     Linux Mint 13+ Ubuntu 12.04+ Debian 7+               #
#                         by dawlane                              #
#       Released: October 2013                                    #
#       Updated: October 2014                                     #
#                                                                 #
###################################################################
# 23/06/2013: Updated script as Ubuntu can not use `uname -m` == "x86_64" in if conditional if run as sudo. Should now work as expected.
# 27/06/2013: Removed some dead wood as libglu1-mesa-dev will install the libx11/x11proto/mesa-common stuff.
# 24/10/2013: Updated script as Ubuntu 13.10 (this will mean any distribution that based of this) no longer has a ia32-lib-multiarch meta package so all 32bit dependencies install separately
#             Added modification to script so it can be used with Debian.
#             Added some error checking.
# 28/10/2013: Minor alterations. Added addition comments along with libraries and removed auto yes from apt-get so you can see if any libraries get scheduled for removal
# 15/04/2013: Updated check for 64bit Machine function to display 32bit or 64bit
#             Updated check to see if a i386 multi-arch has been enabled and moved apt-get update into this check.
#             Added soft link for libfontconfig. Ubuntu 14.04 LTS i386
# 23/06/2014: Hopefully fixed a linking issue with Debian 7 64 bit and libGL.so.1 not begin found
# 09/08/2014: Hopefully fixed a small problem with Ubuntu 12.04 as grep 'i386' /var/lib/dpkg/arch is looking for a non existent file

# Check to see if script is being run as root
if [[ $EUID -ne 0 ]]; then
	echo "BlitzMax Installer: This script must be run as root";
	exit 1;
fi

# Get the machine architecture
ARCH=$(uname -m | sed 's/x86_//;s/i[3-6]86/32/')

# If the system is 64 bit then check to see if multi-arch is enabled.
if [ $ARCH -eq 64 ]; then
	echo "BlitzMax Installer: Machine is 64 bit";
	echo "BlitzMax Installer: i386 Multi-Arch check";
	# if [ ! -f /var/lib/dpkg/arch ]; then dpkg --add-architecture i386
	#if [ ! `grep 'i386' /var/lib/dpkg/arch` ]; then dpkg --add-architecture i386
	if [ ! `dpkg --print-foreign-architectures | grep i386` ]; then dpkg --add-architecture i386
		if [ $? -eq 0 ]; then echo "BlitzMax Installer: Added i386 architecture to dpkg."; else echo "BlitzMax Installer: Error from dpkg."; exit 1; fi 
		# Run update
		echo "BlitzMax Installer: Updating package data base";
		apt-get --quiet update
		if [ $? -eq 0 ]; then echo "BlitzMax Installer: Update OK"; else echo "BlitzMax Installer: Error from Update."; exit 1; fi
	else
		echo "BlitzMax Installer: 32bit Multi-Arch support already enabled";
	fi;
else
	echo "BlitzMax Installer: Machine is 32 bit";
fi

# Select the packages for architecture installation
# Edit to suite your system
if [ $ARCH -eq 64 ]; then

        # Development libraries current as of Apr 2012 - Apr 2014.
	PKGS="g++-multilib libglu1-mesa-dev libasound2-dev libfreetype6-dev libxpm-dev libxft-dev libxxf86vm-dev libpulse-dev libopenal-dev";

        # 32bit libraries required for running BlitzMax applications. Note libglu1-mesa will install libgl1-mesa-glx if no driver is installed. 
        PKGS="$PKGS libglu1-mesa:i386 libfreetype6:i386 libxft2:i386 libxpm4:i386 libasound2:i386 libpulse0:i386 libopenal1:i386"

        # Additional 32bit libraries. libstdc++6 is installed with g++-multilib or libglu1. libx11-6 gets installed with libglu1-mesa or drivers as should libgl-mesa-glx.
        # PKGS="$PKGS libstdc++6:i386 libx11-6:i386 libgl1-mesa-glx:i386"

        # Previous package name etc
        # PKGS="$PKGS ia32-libs-multiarch" # Here for reference for Ubuntu/Linux Mint removed so the same script can be used with Debian distributions which use ia32-libs-i386.
        # PKGS="$PKGS libc6-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev"; # Uncomment if you are missing a package. Shouldn't be needed but here for reference
else

        # Current as of Apr 2012 - Apr 2014
        PKGS="g++ libglu1-mesa-dev libasound2-dev libfreetype6-dev libxpm-dev libxft-dev libxxf86vm-dev libpulse-dev libopenal-dev";

        # Libraries required for running BlitzMax applications. Most if not all of these should be already installed.
        # PKGS="$PKGS libglu1-mesa libfreetype6 libxft2 libxpm4 libasound2 libpulse0 libopenal1"

        # Previous package name etc
        # PKGS="$PKGS libc6-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev"; # Uncomment if you are missing a package. Shouldn't be needed but here for reference
fi

# Install the packages
apt-get install $PKGS
if [ $? -eq 0 ]; then echo "BlitzMax Installer: apt-get OK"; else echo "BlitzMax Installer: Error from apt-get."; exit 1; fi

# If machine architecture is 64bit then set up some links
if [ $ARCH -eq 64 ]; then
	echo "BltizMax Installer: Update System Soft Links in /usr/lib32 for 64 bit Linux";
	if [ ! -f /usr/lib32/libGL.so ]; then 
		if [ -f /usr/lib/i386-linux-gnu/mesa/libGL.so.1 ]; then
			echo "BltizMax Installer: Linked libGL.so.1 for Ubuntu/Linux Mint";
			ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1 /usr/lib32/libGL.so 
		else
			echo "BltizMax Installer: Linked libGL.so.1 for Debian/Linux Mint Debian";
			if [ -f /usr/lib/mesa-diverted/i386-linux-gnu/libGL.so.1 ]; then
				ln -s /usr/lib/mesa-diverted/i386-linux-gnu/libGL.so.1 /usr/lib32/libGL.so
				if [ ! -f /usr/lib/i386-linux-gnu/libGL.so.1 ]; then
					ln -s /usr/lib/mesa-diverted/i386-linux-gnu/libGL.so.1 /usr/lib/i386-linux-gnu/
				fi
			else
				ln -s /usr/lib/i386-linux-gnu/libGL.so.1 /usr/lib32/libGL.so
			fi
			
		fi
	fi
	if [ ! -f /usr/lib32/libGLU.so ]; then echo "BltizMax Installer: Linked libGLU.so.1"; ln -s /usr/lib/i386-linux-gnu/libGLU.so.1 /usr/lib32/libGLU.so ; fi
	if [ ! -f /usr/lib32/libX11.so ]; then echo "BltizMax Installer: Linked libX11.so.6"; ln -s /usr/lib/i386-linux-gnu/libX11.so.6 /usr/lib32/libX11.so ; fi
	if [ ! -f /usr/lib32/libfreetype.so ]; then echo "BltizMax Installer: Linked libfreetype.so.6"; ln -s /usr/lib/i386-linux-gnu/libfreetype.so.6 /usr/lib32/libfreetype.so ; fi
	if [ ! -f /usr/lib32/libXxf86vm.so ]; then echo "BltizMax Installer: Linked libXxf86vm.so.1"; ln -s /usr/lib/i386-linux-gnu/libXxf86vm.so.1 /usr/lib32/libXxf86vm.so ; fi
	if [ ! -f /usr/lib32/libXft.so ]; then echo "BltizMax Installer: Linked libXft.so.2"; ln -s /usr/lib/i386-linux-gnu/libXft.so.2 /usr/lib32/libXft.so ; fi
	if [ ! -f /usr/lib32/libXpm.so ]; then echo "BltizMax Installer: Linked libXpm.so.4"; ln -s /usr/lib/i386-linux-gnu/libXpm.so.4 /usr/lib32/libXpm.so ; fi
	if [ ! -f /usr/lib32/libasound.so ]; then echo "BltizMax Installer: Linked libasound.so.2"; ln -s /usr/lib/i386-linux-gnu/libasound.so.2 /usr/lib32/libasound.so ; fi
	if [ ! -f /usr/lib32/libpulse-simple.so ]; then echo "BltizMax Installer: Linked libpulse-simple.so.0"; ln -s /usr/lib/i386-linux-gnu/libpulse-simple.so.0 /usr/lib32/libpulse-simple.so ; fi
	if [ ! -f /usr/lib32/libopenal.so ]; then echo "BltizMax Installer: Linked libopenal.so.1"; ln -s /usr/lib/i386-linux-gnu/libopenal.so.1 /usr/lib32/libopenal.so ; fi
        # BlitzMax required libfontconfig to be linked with the release candidate of Ubuntu 14.04.
	if [ ! -f /usr/lib32/libfontconfig.so ]; then echo "BltizMax Installer: Linked libfontconfig.so.1"; ln -s /usr/lib/i386-linux-gnu/libfontconfig.so.1 /usr/lib32/libfontconfig.so ; fi
fi

# IMPORTANT NOTE FOR 64BIT USERS
# If you compile and you get can't find such and such due to an update etc. Then use the method above to create a symbolic link by first finding the actual target libs 
# true name. The symbolic's links usually the targets name with every thing to the right of the .so removed.
# Note if things break after an update use the rm command to remove the current broken link e.g. sudo rm /usr/lib/libfreetype.so and then redo the link with the updated 
# version of that .so file.


</textarea><br><br>Next create a new text file in the text editor and copy and paste the script code below into it. When you have done this save it as patch.sh to where you have extracted the BlitzMax directory.<br><b>NOTE</b>: The patch file only works on a clean extracted version of BlitzMax (tested of 1.48 and 1.50 only) and may break a modified version, so this will be no good for the master version found on github. It will also set the default audio driver to pulse audio. To change the audio driver you will need to edit /mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx and /mod/pub.modfreeaudio.mod/freeaudio.bmx.<br><b>NOTE:</b> If you get an error such as<br>"Assertion 's' failed at pulse/simple.c:255, function pa_simple_free(). Aborting."<br>Then check that the distribution has the full pulseaudio sound server installed installed and maybe installing libasound2-plugins (both the 32bit and 64bit version if using a 64bit distribution) if there are still problems. On some distribution you have to jump through hoops to get pulse audio working.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#!/bin/bash
#############################################
#                                           #
#	 BLITZMAZ 1.48/1.50 FILE PATCHER    #
#       PULSE AND ALSA FIXES BY SKIDRACER   #
#                                           #
#                 Version 0.2               #
#                                           #
#############################################
# THIS SCRIPT COMES WITH NO WARRANTIES WHAT SO EVER USE AT YOUR OWN RISK
# 15/04/2014 : Update to import fontconfig for fltk
#            : Fixed a few error checks so if a file has been modified; it will not modify it again

# Load a file into
load_file(){
		#IFS=$'\n' FILE_ARRAY=( $( &lt; "$1" ) )
        readarray FILE_ARRAY &lt; "$1"
		FILE_LEN=( ${#FILE_ARRAY[*]} )
		return $?;
}

# insert a line into an array zero index array. syntax: insert_array $line_number $string 
insert_array(){
	# Add element to array and get the new size
	FILE_LEN=( ${#FILE_ARRAY[*]} )
	# Move the array up and insert the new line
	for ((i=$FILE_LEN;i&gt;"$1";i--)); do FILE_ARRAY[$i]=${FILE_ARRAY[$i-1]}; done;	   
	FILE_ARRAY[$1]="$2"$'\n';
	return $?;
}

# Update freeaudio.bmx
update_freeaudio(){
	
	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx.bac ]; then echo "PATCHER: Skipping freeaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx
	mv BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx.bac

	# Befor inserting new lines change the old ones
	FILE_ARRAY[3]="ModuleInfo \"Version: 1.23\""$'\n'
	FILE_ARRAY[66]="'Import \"ossdevice.cpp\""$'\n'
	FILE_ARRAY[68]="'Function OpenOSSDevice()"$'\n'
	FILE_ARRAY[114]="			device=OpenPulseAudioDevice()"$'\n'

	# Add changes
	insert_array 9 "ModuleInfo \"History: 1.23 Release\""$'\n'
	insert_array 10 "ModuleInfo \"History: Added PulseAudio driver as default Linux sound driver\""$'\n'
	insert_array 66 "Import \"-lpulse-simple\""$'\n'
	insert_array 70 "Import \"pulseaudiodevice.cpp\""$'\n'
	insert_array 72 "Function OpenPulseAudioDevice()"$'\n'
	insert_array 122 "'		Case 2"$'\n'
	insert_array 123 "'			device=OpenOSSDevice()"$'\n'
  
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched freeaudio.bmx";
	return $?;
}

# Update ALSA driver cpp
update_alsa(){
	
	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp.bac ]; then echo "PATCHER: Skipping freeaudioaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp
	mv BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp.bac
	
	# Virtually a straight swap no new lines to insert
	FILE_ARRAY[12]="#include &lt;alsa/asoundlib.h&gt;"$'\n'
	FILE_ARRAY[21]="	pthread_t	audiopthread;"$'\n'
	FILE_ARRAY[37]="		threadid=pthread_create(&amp;audiopthread,&amp;attr,audiothread,(void*)this);"$'\n'
	FILE_ARRAY[73]="	if (err&lt;0) return v;"$'\n'
	FILE_ARRAY[81]="		return v;"$'\n'
	FILE_ARRAY[85]="		return v;"$'\n'
	FILE_ARRAY[90]="		return v;"$'\n'
	FILE_ARRAY[99]="		return v;"$'\n'
	FILE_ARRAY[106]="		return v;"$'\n'
	FILE_ARRAY[111]="		return v;"$'\n'
	FILE_ARRAY[117]="		return v;"$'\n'
	FILE_ARRAY[121]="		return v;"$'\n'
	
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp
	unset FILE_ARRAY;
	echo "PATCHER: Patched alsadevice.cpp";
	return $?;
}

# Update freeaudioaudio.bmx
update_freeaudioaudio(){

	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx.bac ]; then echo "PATCHER: Skipping freeaudioaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx
	mv BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx.bac
  
	# Befor inserting new lines change the old ones
	FILE_ARRAY[206]="TFreeAudioAudioDriver.Create \"FreeAudio PulseAudio System\",0"$'\n'
	FILE_ARRAY[207]="'TFreeAudioAudioDriver.Create \"FreeAudio ALSA System\",1"$'\n'
  
	# Add changes
	insert_array 208 "'TFreeAudioAudioDriver.Create \"FreeAudio OpenSound System\",2"
  
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched freeaudioaudio.bmx";
	return $?;
}

# Update appstub.bmx
update_appstub(){
	
	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx.bac ]; then echo "PATCHER: Skipping appstub.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx
   	mv BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx.bac
   
	# add ld flag -ldl
	insert_array 64 "Import \"-ldl\""$'\n'
   
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched appstub.bmx";
	return $?;
}

# Update threads.bmx
update_threads(){

	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/threads.mod/threads.bmx.bac ]; then echo "PATCHER: Skipping threads.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/brl.mod/threads.mod/threads.bmx
	mv BlitzMax/mod/brl.mod/threads.mod/threads.bmx BlitzMax/mod/brl.mod/threads.mod/threads.bmx.bac
  
	insert_array 11 "?Linux"
	insert_array 12 "Import \"-ldl\""
	insert_array 13 "?"
	insert_array 14 ""
  
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/brl.mod/threads.mod/threads.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched threads.bmx";
	return $?;
}

# Pulse Audio Device Driver
# As there isn't a file to patch just echo the output to a file
update_pulseaudio_cpp(){



# If the pulse audio file exists then rename it
MAXPATH=BlitzMax/mod/pub.mod/freeaudio.mod

if [ -f $MAXPATH/pulseaudiodevice.cpp ]; then
	if [ -f $MAXPATH/pulseaudiodevice.cpp.bac ]; then rm $MAXPATH/pulseaudiodevice.cpp.bac 
		mv $MAXPATH/pulseaudiodevice.cpp $MAXPATH/pulseaudiodevice.cpp.bac
		echo "PATCHER: Updating pulseaudiodevice.cpp";
	fi
		
	else
                echo "PATCHER: Installing pulseaudiodevice.cpp";
fi

echo "// pulseaudiodevice.cpp" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "// sudo apt-get install libpulse-dev" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#ifdef __linux" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include \"freeaudio.h\"" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include &lt;unistd.h&gt;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include &lt;pulse/simple.h&gt;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include &lt;pthread.h&gt;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "extern \"C\" audiodevice *OpenPulseAudioDevice();" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "void *pulseaudiothread(void*dev);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#define LINUXFRAG 2048" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "struct pulseaudiodevice:audiodevice{" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	pthread_t audiothread;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int threadid;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int running;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int playing;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int error;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	short *buffer;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int buffersize;	//in bytes" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp		
echo "	pa_simple *simple;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "	static void *pulseaudiothread(void *arg){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pulseaudiodevice* audio;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		audio=(pulseaudiodevice*)arg;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		audio-&gt;run();" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		return 0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp		
echo "	int reset(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		pa_sample_spec stereo16;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		running=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		playing=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp		
echo "		stereo16.format=PA_SAMPLE_S16LE;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		stereo16.rate=44100;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		stereo16.channels=2;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		simple=pa_simple_new(NULL,\"freeaudio\",PA_STREAM_PLAYBACK,NULL,\"playback\",&amp;stereo16,NULL,NULL,&amp;error);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		if (simple==NULL) return -1;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		mix=new mixer(LINUXFRAG);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		mix-&gt;freq=44100;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		mix-&gt;channels=2;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		buffer=new short[LINUXFRAG];" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		buffersize=LINUXFRAG*2;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pthread_attr_t	attr;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pthread_attr_init(&amp;attr);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		running=1;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		threadid=pthread_create(&amp;audiothread,&amp;attr,pulseaudiothread,(void*)this);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		return 0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "	int close(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		int timeout;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		running=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		timeout=500;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		while (timeout-- &amp;&amp; playing){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			usleep( 10*1000 );" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pa_simple_free(simple);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		return 0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	void run(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		int data;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		int res;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		playing=1;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		while (playing &amp;&amp; running){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			mix-&gt;mix16(buffer);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			int err=pa_simple_write(simple, buffer, buffersize, &amp;error);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			if (err&lt;0) break;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp			
echo "		}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		playing=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "};" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "audiodevice *OpenPulseAudioDevice(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	return new pulseaudiodevice();" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#endif" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
return $?;
}

# Update 
update_fltk(){
	
	if [ -f BlitzMax/mod/maxgui.mod/fltkmaxgui.mod/fltkimports.bmx.bac ]; then echo "PATCHER: Skipping fltkimports.bmx"; return $? ; fi
	echo "PATCHER: Patched fltkimports.bmx";
	# Back up the file by copying
	cp BlitzMax/mod/maxgui.mod/fltkmaxgui.mod/fltkimports.bmx BlitzMax/mod/maxgui.mod/fltkmaxgui.mod/fltkimports.bmx.bac
	# Add three lines to the end
	echo '' &gt;&gt; BlitzMax/mod/maxgui.mod/fltkmaxgui.mod/fltkimports.bmx
	echo '?Linux' &gt;&gt; BlitzMax/mod/maxgui.mod/fltkmaxgui.mod/fltkimports.bmx
	echo 'Import "-lfontconfig"' &gt;&gt; BlitzMax/mod/maxgui.mod/fltkmaxgui.mod/fltkimports.bmx
	echo '?' &gt;&gt; BlitzMax/mod/maxgui.mod/fltkmaxgui.mod/fltkimports.bmx
}

## execute patching
update_appstub
update_fltk
update_freeaudio
update_freeaudioaudio
update_threads
update_alsa
update_pulseaudio_cpp
echo "PATCHER: TASK COMPLETED";</textarea><br><br>I will assume that all of the files and the BlitzMax directory are in your home directory. If not then alter the path to where they are located.<br><br>Now the two script files need to have there execute permissions set. You can do this through the native gui file explorer by right clicking the file and selecting properties, then switch to the permissions tab or open a command line terminal and if necessary change the directory using the cd command to where the files are and then run the commands below. Here I will assume that you placed the files in your home directory.<br><pre class=code>chmod +x ~/bmax.sh
chmod +x ~/patch.sh</pre><br><b>NOTE</b>: If the BlitzMax IDE or bmk will not run after the dependencies have been installed then check the execute permissions. Quick set use <b>chmod -R +x ~/BlitzMax</b>.<br><br>Now to install the dependencies open a terminal and execute one of the commands below. You will be prompted for a 'root' password.<br><br><b>Debian based</b><br><pre class=code>su -c './bmax.sh'</pre>Alternate bash or sh<br><pre class=code>su -c 'bash ~/bmax.sh'</pre><b><br>Ubuntu based</b><pre class=code>sudo ./bmax.sh</pre>Alternate bash or sh<pre class=code>sudo bash ~/bmax.sh</pre><br>To execute the patch file make sure that the file is in the same directory as the BlitzMax directory (not inside the BlitzMax directory) and in a terminal execute the command below.<br><pre class=code>./patch.sh</pre>Alternate bash or sh<pre class=code>bash ~/patch.sh</pre><br><br><b>NOTE FOR 64 BIT SYSTEMS USING UBUNTU AND DEBIAN</b><br>With the later version of the freetype development libraries, there is an issue where you may see it complain about <i>no such file of directory</i>.<br>You will need to create a system link with:<br><pre class=code>sudo ln -s /usr/include/x86_64-linux-gnu/freetype2 /usr/include/i386-linux-gnu/freetype2</pre><br><br>Before building any BlitzMax applications execute bmk from the command line to rebuild all the modules.<br><pre class=code>~/BlitzMax/bin/bmk makemods -a</pre>If you rebuild the modules from within the IDE and there is an error in the C++ code it can crash the IDE.<br><br>Oh and here are the list of libraries needed to deploy BlitzMax applications for a 64bit version of ubuntu/debian/Mint. You don't need to create any links to these libraries and you can omit the i386 for 32bit deployment.<br><b>Note that the distribution has to have Multi-Arch enabled</b><br><br>GL<br>libglu1:i386 &lt; should install libgl1-mesa libraries if you get a missing gl/glu error but shouldn't be needed if using a propriety drive with 32bit enabled. <br><br>Core<br>libstdc++6:i386 libx11-6:i386 libxxf86vm1:i386 libfreetype6:i386 libxpm4:i386<br><br>Audio<br>libpulse0:i386<br>libasound2:i386<br>libasound2-plugins:i386 A must if the system uses PulseAudio, JACK as a sound server.<br>libopenal1:i386<br><br><b>NOTE:</b>One pitfall that you may come across is a GLIBC error (usually version issues). The only solution would be to recompile that application on the offending distribution.<br><br>Now Go and write some code. <br><br></td></tr></table><br>
<a name="1204980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just want to be the first one saying thanks for your work.<br><br>Shame that this is needed but good that one takes care of it.<br><br><br>PS: didnt check the unpacking process in prior versions (just used the lib-setup and manually patched things as I checked if I changed some already) but "tar" should satisfy all common distributions (it's there since decades :D). <br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1205021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pcjohn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone tried this on Lubuntu 13.10 ?<br><br>Looks like the pulse audio drivers are broken yet again. The scripts work perfectly on<br>12.04 and 12.10, however on 13.10 it's back to the dreaded audio error on<br>anything that uses sound:<br><br>"Assertion 's' failed at pulse/simple.c:255, function pa_simple_free(). Aborting."<br><br>I can get sound using OpenAL, but only by completely removing PulseAudio from the system.<br><br>JD <br><br></td></tr></table><br>
<a name="1205046"></a>

<a name="1205054"></a>

<a name="1205055"></a>

<a name="1205056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @pcjohn: Never used Lubuntu until to day (using 64bit).<br>The default distribution audio driver is set for ALSA and the pulse audio driver isn't even installed by default. Use synaptic to search and install pulseaudio (and if it still has problems use a terminal to install libasound2-plugins or libasound2-plugins:i386). <br><br></td></tr></table><br>
<a name="1205077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it me or is Ubuntu getting worse with each new release?<br>Finally got round to trying Ubuntu 13.10 on real hardware and the spent the last two hours trying to get propriety nvidia drivers from the repository to work with my dual monitor rig. What a complete waste of time that was. It crashes the system with a xorg.conf file. At first I thought it mite have had something to do with the new mir rendering system but apparently that was dropped. Maybe when I get the time I will have another crack at it. <br><br></td></tr></table><br>
<a name="1205087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pcjohn</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I'd say the releases are getting worse. I'm having Nvidia driver problems<br>with my home machine as well.<br><br>The power manager is broken AGAIN as well.<br><br>And still no Pulseaudio with Blitz.<br><br>JD <br><br></td></tr></table><br>
<a name="1205102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad 13.04 is working <br><br><pre class=code>
$ lsb_release -d
Description:	Linux Mint 15 Olivia

$ uname -a
Linux RonnyPC 3.8.0-19-generic #29-Ubuntu SMP Wed Apr 17 18:16:28 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
</pre><br><br><br>in 13.10 the "pulseaudio"-libs got an upgrade to 4.0<br>Mabye a look into the file " /etc/pulse/default.pa"<br>can change things if you experience sound problems within the desktop environment itself.<br><br>As you have an assertion error - have a look at that file and see what makes that error happen.<br><br>Relying on OpenAL (had problems with it) or Alsa (starting your app with sound stops all other sound sources from playing -- eg. music player / radio) is a no-go and PulseAudio is - albeit not polished yet - the best current bet for linux.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1205104"></a>

<a name="1205105"></a>

<a name="1205106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I ditched Ubuntu not long after Unity became the default desktop manager and synaptic was dropped as the default GUI package tool and all graphic problems started with that.<br>It first started with application windows, that when moved near the edges couldn't be accessed unless you changed to another virtual desktop. The release after that; installing the repository drivers became unreliable and they don't even clearly mark out the version number of the driver.<br><br>And as I am using a dual monitor set up which is OK as long as I'm not<br>1) using the nouveau drivers and trying to run and BlitzMax application in full screen<br>2) using propriety drivers with twin view. I have to set it up as separate screens with Xinerama and configure xorg.conf so that the main monitor is set to the larger of the two.<br><br>Current (26-10/2013) statistics on distro watch show Linux Mint and Debian leading Ubuntu.<br><br><div class="quote"> And still no Pulseaudio with Blitz. <br></div>Got it working with a clean install of Lubuntu 13.10 64bit on real hardware in under 10 minutes using my scripts and the instructions with them (I didn't alter anything in the scripts).<br><br>Using oldskool2 for testing I got the same error. So I check in synaptic to see what pulse audio stuff was installed, saw that libasound2-plugins+libasound2-plugins:i386 was needed, then tried oldskool2 with no joy. After I saw that the mixer was using the basic console alsamixer tool I realised that the pulse audio sound server wasn't installed so I installed the default 64bit version and tried oldskool2 again with success.<br><br>EDIT: Ok figured out why the x server was crashing. Completely forgot that Unity use composite rendering which isn't supported with Xinerama enabled. This means for the time being that the method I will not work until I can figure out away to solve it. <br><br></td></tr></table><br>
<a name="1205107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just disable composite rendering (think you mean "ffects") at all .. they drop your FPS by almost 50% (for me this happened with amd llano igp and an nvidia card).<br>So when trying to increase graphical performance of your app - disable compiz, metacity,... . This is also the official hint for wine-apps/games.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1205117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well not sure what exactly the hell I did to solve it but I managed to get it working as it should work without disabling compiz or having to write and xorg,conf file. There was some weirdness with displays and running a Blitz Max made application when run in full screen mode, as exiting didn't reset the display back to it's original resolution. I did a bit of messing around with the GUI resolution tool and now every thing seems fine.<br>I will have to re-install Ubuntu 13.10 and see if I can recreate it.<br><br>@Derron: Tried disabling compiz but doing that screws up Unity not the kind of thing I was looking. Compiz and Xinerama will not work together and any kind of composite rendering has to be disable in the xorg.conf file for Xinerama to work. <br><br></td></tr></table><br>
<a name="1205133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you try everything without setting up an xorg.conf - newer distributions should not have a xorg.conf anylonger.<br><br>The only PC having and needing some odd configuration settings is my htpc to get rid of overscan on my old sony LCD-TV.<br><br>Wrong settings in the xorg may also be the reason of some troubles you experience. <br><br><br>bye<br>Ron<br><br>PS: maybe unity screws up because it misses correct fallbacks for certain things it wants from the compositor. Shuttleworth should be ashamed as 3D-power also uses power on mobile computers and therefor decreases runtime. <br><br></td></tr></table><br>
<a name="1205151"></a>

<a name="1205195"></a>

<a name="1205196"></a>

<a name="1205337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Did you try everything without setting up an xorg.conf - newer distributions should not have a xorg.conf any longer. <br></div>Yep. Installed the driver had problems with it playing nice with the monitors and Blitz Max and a application.<br>Wrote the xorg.conf to the same spec as what I used for Linux Mint, forgot that Xinerama and compiz (and any non nvidia composite manager) hate each other.<br>Disabled Xinerama to get GUI back.<br>Removed all traces of the nvidia driver and xorg.conf.<br>Installed the nouveau driver and rebooted.<br>Installed nvidia-current and rebooted.<br>Ran a full screen BlitzMax sample, this time it played nice and didn't switch the display into mirror. Exited BlitzMax. Opps didn't restore to previous resolution.<br>Messed with GUI display tool to get the correct resolution back.<br>Reran BlitzMax sample again and this time it returned every thing back as it should.<br><br><div class="quote"> maybe unity screws up because it misses correct fallbacks for certain things it wants from the compositor <br></div>More than likely it's because it's a load of bo**ocks. Ill conceived and poorly implemented. Just like Shuttleworth's idea to drop Wayland and go with their own version which by the sounds of got shot down by Intel.<br><br>EDIT:<br>Well after a few hours of testing both the 32bit and 64bit version of Ubuntu 13.10. I can honestly say that I have had less crashes using a ZX81 with ram pack wobble. Can't wait to see what a disaster 14.04 LTS is going to be.<br>Looks like the driver problem had some thing to do with using jocky installing nvidia-319-updates. This time I used apt-get to install nvidia-319. <br><br></td></tr></table><br>
<a name="1205260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe, I had some disturbed graphics using the amd-**-updates (the boot and shutdown-animation was kind of scanline-displaced - every second pixel line was x-displaced by about 75 pixels). chaning back to amd-** this problem was gone.<br><br>Seems both candidates did something unwanted with their binary blobs :D<br><br><br>Although flaming against shuttleworth's ideas... he or his team _has_ ideas, whether one has to force them the way they do (eat or die) is another story.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1207104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to let every one know got my hands on Linux Mint 16 rc Mate. Tested the scripts above with the 64bit version and they works flawlessly.<br>There's a new animated login screen... (Sarcastic WOW) let's see if it crash x-server like that stupid HTML5 cloud theme (what's wrong with the one in Mint 13 for Christ's sake).<br>One thing that should have been fix is that hasn't is synaptic which crashed at random. <br><br></td></tr></table><br>
<a name="1207116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> This guy makes the case that once things are working, developers get bored and start changing things just for the sake of it:<br><a href="http://www.youtube.com/watch?v=Sh-cnaJoGCw" target="_blank">http://www.youtube.com/watch?v=Sh-cnaJoGCw</a> <br><br></td></tr></table><br>
<a name="1214658"></a>

<a name="1214659"></a>

<a name="1214660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tested the scripts yesterday evening on a fresh, fully patched KUbuntu 13.10, 32 Bit. They ran smoothly.<br><br>- I can't compile any bmx examples that use audio. What packages do I need to install?<br><br>- Also I need to get Brucey's LibCurl.mod to work, but I seem to miss stuff there as well:<br><b>/home/grisu/BlitzMax/mod/bah.mod/libcurl.mod/src/lib/url.c:59:18: fatal error: idna.h: File or folder not found.<br> #include &lt;idna.h&gt;</b><br><br>- It would be great if you could include the GTK packages in the script as well. I'd love to test if Brucey's module leads to better results.<br><br>Thanks in advance.<br><br>@Josh: I like your video. It is so true from my user perspective. <br><br></td></tr></table><br>
<a name="1214666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> you will have to install libdna-dev (sudo apt-get install libdna-dev) to compile the source code of the libcurl.mod.<br><br>If you spread around your binary, that users wont need to install that dev-library, it is just used for compilation.<br><br><br>@Mint16:<br>Totally disappointed from Mint16. flgrx_dri.so is crashing randomly when surfing with chrome - does not matter if using fglrx or fglrx-updates. A sudoed graphics-app using bah.serial is crashing the desktop so every app is closed and you are prompted to the mdm-login-greeter. Removing the graphics part (just cls + drawtext("connected",10,10), flip) did not crash at all.<br>Also they now have a non-deleteable shortcut for SUPER (the windows key) ... I had a SUPER+E to launch nemo (better smb-integration and svn-tortoisesvn-like-integration-support). Another thing is that nemo now launches its own desktop (black desktop, not configurable) which hides the default one - so you have to run "nemo --nodesktop" now.<br>All it all I really should punish myself for upgrading that fast instead of skipping "Petra" with XFCE (Mint16 XFCE).<br><br>Ahh I forgot: using the open source ati driver I now get random "scanlines" (half width'd) all over my desktop. Think in a bored hour I will backup everything and return to Mint15 (which I really like).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214668"></a>

<a name="1214672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can't compile any bmx examples that use audio. What packages do I need to install? <br></div>Did you patch the BlitzMax? And what is the default audio system (not BlitzMax) driver set to use Pulse or Alsa as some distributions do not use PULSE as default? Try and change BlitzMax the driver in freeaudio.bmx to use Alsa, or go for the safe bet and use OpenAL.<br><br>@Derron: With out checking I think the library is either libidn11-dev or libidn2.0-dev. Installing one of the following libcurl development packages should install that package as well. libcurl-ocaml-dev, libcurl4-gnutls-dev, libcurl4-nss-dev, libcurl4-openssl-dev.<br><br>Currently using Cinnamon for a change as I get the impression that Mate has acquired more bugs and and no fixes from when I tested the pre-release. So far every thing is very smooth. ATI (now AMD) have never been the most reliable drivers for me, either in Windows or Linux and I'm not even going to think about the open source drivers. Ok I know the last part of that statement is a bit of an oxymoron. <br><br></td></tr></table><br>
<a name="1214670"></a>

<a name="1214671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> for me it looked like a small "L" (having new glasses the font rendering did not get better :D) ... so you are right - it is in the "IDN"-library. Blame it to the bold-font-rendering-quality.<br>PS: the anti-alias is done by Chrome not by the OS itself.<br><br>-----IMG-----<br><img src="http://abload.de/img/boldfontproblemz8jet.png"><br>-----IMG-----<br><br><br>@cinnamon:<br>I am with XFCE, does what I want (thunar is faster for me in most situations, just using RapidSVN for SVN-purposes now instead of rabbidsvn [tortoisesvn like for linux]).<br>Meanwhile I still have hopes that some libs (or the binary blob) get updates the next days - so that crashes will be gone. <br><br></td></tr></table><br>
<a name="1214673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Meanwhile I still have hopes that some libs (or the binary blob) get updates the next days - so that crashes will be gone. <br></div>I think that depends on how much forum chatter is on the subject. <br><br></td></tr></table><br>
<a name="1214679"></a>

<a name="1214680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I used this old script I found on the forums which installed the missing ldna-libraries. Would be great if you could include these in your first script.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#!/bin/bash

###############################################################################
###############################################################################
##
## name: install.sh
## author; jim teeuwen [jimteeuwen[at]gmail.com]
## version 0.9
##
## This script ensures the presence of a number of required packages on the
## user's system. These packages are needed to make blitzmax run properly.
##
## The script supplies (un)installation schemes for various package managers
## as well as any differences between 32 and 64 bit systems that may require
## handling.
##
## Version history:
##   [0.9] Dec 8 2011 [degac,markcw]
##      - Added inst_apt-get.
##   [0.8] Nov 26 2009 [markcw]
##      - Added libxpm-dev package to aptitude list.
##   [0.7] Aug 16 2009 [markcw]
##      - Added inst_zypper.
##      - Added package list for inst_pacman.
##   [0.6] Aug 9 2009: [markcw]
##      - Added package lists for inst_emerge, inst_yum and inst_urpmi.
##      - Added a check for root login.
##   [0.5b] Aug 6 2009:
##      - Removed support for ia32-apt-get in the inst_aptitude function.
##        Apparently this is no longer required to make blitzmax work as well
##        it causing problems with standard package management on a 64-bit
##        system.
##   
###############################################################################
###############################################################################

###############################################################################
## Variables we will be needing later on:
PKGMGRS=("apt-get" "aptitude" "emerge" "yum" "urpmi" "pacman" "zypper");
PKGMGR=
IS_64_BIT=0
DO_INSTALL=1;

###############################################################################
## usage
usage() {
   echo "Usage: `basename $0` [OPTIONS]";
   echo "";
   echo "   -i    : Install all required packages. (This is the default mode)";
   echo "   -u    : Uninstall all required packages.";
   echo "   -h    : Display this help.";
   echo "";
}

###############################################################################
## Package Manager-specific (un)installation schemes.
inst_apt-get()
{
   if [ $IS_64_BIT -eq 1 ]; then
      PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev libxpm-dev";
   else
      PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev libxpm-dev";
   fi

   if [ $DO_INSTALL -eq 1 ]; then
      echo "[i] Installing...";

      sudo apt-get install $PKG_LIST;
   else
      echo "[i] Uninstalling...";
      sudo apt-get --purge remove $PKG_LIST;

      echo "[i] Performing apt-get cleanup...";
      sudo apt-get autoremove;
      sudo apt-get autoclean;
   fi
   return $?;
}

inst_aptitude()
{
   if [ $IS_64_BIT -eq 1 ]; then
      PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev libxpm-dev";
   else
      PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev libxpm-dev";
   fi

   if [ $DO_INSTALL -eq 1 ]; then
      echo "[i] Installing...";
#      if [ $IS_64_BIT -eq 1 ]; then
#         ## install ia32-apt-get separately.
#         ## The other packages require this one to be installed and ready.
#         ## 'ia32-apt-get' serves as a 32 bit compatibility tool. It creates
#         ## links to 64 bit versions of the selected packages.
#         sudo apt-get install ia32-apt-get;
#      fi

      ## We can pass all of the packages to aptitude in 1 go,
      sudo apt-get install $PKG_LIST;
   else
      echo "[i] Uninstalling...";
      ## We can pass all of the packages to aptitude in 1 go,
      sudo apt-get --purge remove $PKG_LIST;
      
#      if [ $IS_64_BIT -eq 1 ]; then
#         ## uninstall ia32-apt-get separately.
#         sudo apt-get --purge remove ia32-apt-get;
#      fi
      
      ## These 2 commands tell aptitude to clean up any unused packages
      ## still lingering around the system. They make sure we do not leave
      ## any orphaned packages behind. These orphans serve no purpose and
      ## simply waste space.
      echo "[i] Performing aptitude cleanup...";
      sudo apt-get autoremove;
      sudo apt-get autoclean;
   fi
   return $?;
}

inst_emerge()
{
   PKG_LIST="libX11 mesa-progs libXft libXpm";

   if [ $DO_INSTALL -eq 1 ]; then
      echo "[i] Installing...";
      sudo emerge -a $PKG_LIST;
   else
      echo "[i] Uninstalling...";
      sudo emerge -a --unmerge $PKG_LIST;
   fi
   return $?;
}

inst_yum()
{
   PKG_LIST="gcc-c++ libX11-devel mesa-libGLU-devel libXft-devel libXpm-devel";

   if [ $DO_INSTALL -eq 1 ]; then
      echo "[i] Installing...";
      yum install $PKG_LIST;
   else
      echo "[i] Uninstalling...";
      yum remove $PKG_LIST;

      echo "[i] Performing yum cleanup...";
      yum clean all;
   fi
   return $?;
}

inst_urpmi()
{
   PKG_LIST="gcc-c++ libx11_6-devel libmesaglu1-devel libxft-devel libxpm-devel";

   if [ $DO_INSTALL -eq 1 ]; then
      echo "[i] Installing...";
      urpmi $PKG_LIST;
   else
      echo "[i] Uninstalling...";
      urpme $PKG_LIST;
   fi
   return $?;
}

inst_pacman()
{
   PKG_LIST="gcc";

   if [ $DO_INSTALL -eq 1 ]; then
      echo "[i] Installing...";
      pacman -S $PKG_LIST;
   else
      echo "[i] Uninstalling...";
      pacman -Rsn $PKG_LIST;
   fi
   return $?;
}

inst_zypper()
{
   PKG_LIST="gcc-c++ xorg-x11-libX11-devel Mesa-devel";

   if [ $DO_INSTALL -eq 1 ]; then
      echo "[i] Installing...";
      sudo zypper install $PKG_LIST;
   else
      echo "[i] Uninstalling...";
      sudo zypper remove $PKG_LIST;
   fi
   return $?;
}

trap_int()
{
   echo "[i] SIGINT detected. Exiting script.";
   echo "    Note that this may leave some operations incomplete.";
   echo "    Run the script again to complete any pending operations.";
   exit 0;
}

###############################################################################
###############################################################################
## Main program

## intercept ctrl-c (SIGINT).
trap trap_int INT;

clear;
echo "Blitzmax Installation Script version 0.9";
echo "Please report bugs or suggestions to: jimteeuwen[at]gmail.com";
echo "";


###############################################################################
## Check for commandline options:
while getopts iuh opt; do
   case "$opt" in
      i) DO_INSTALL=1;;
      u) DO_INSTALL=0;;
      h) usage; exit 0;;
      *?) usage; exit 1;;
   esac
done
unset opt;


###############################################################################
## Get architecture. 64 bit systems require some extra packages
## since blitz has no 64-bit support. We need our system to provide
## symbolic links to the 64 bit modules for us.
echo "[i] Checking architecture...";
IS_64_BIT=0;
if [ `uname -m` == "x86_64" ]; then
   IS_64_BIT=1;
   echo "    found: 64 bit";
else
   echo "    found: 32 bit";
fi


###############################################################################
## Determine the package manager we have available.
echo "[i] Identifying package manager...";
PKGMGR="";
for pm in ${PKGMGRS[@]}; do
   if [ ! -f "`which $pm`" ]; then
      continue;
   fi
   
   PKGMGR=$pm;
   echo "    found: $pm";
   break;
done
unset pm;

if [ -z "$PKGMGR" ]; then
   echo "[e] Unable to find a package manager.";
   echo "    Supported are: ${PKGMGRS[@]}";
fi

###############################################################################
## Check if root login is needed.
## Some distros use su and others use sudo.
## I am assuming distros using the same package manager use the same su/sudo syntax.
if [ `whoami` = "root" ]; then
   echo "[i] Logged in as root user.";
elif [ "$PKGMGR" = "yum" ]; then ## sudo if user in sudoers
   PKGMGR=""; ## note: using PKGMGR to force root login
elif [ "$PKGMGR" = "pacman" ]; then
   PKGMGR="";
elif [ "$PKGMGR" = "urpmi" ]; then ## no sudo
   PKGMGR="";
fi

if [ -z "$PKGMGR" ]; then ## no package manager found or need root login
   echo "[i] Login as root and then re-run this script.";
   su;
fi

###############################################################################
## perform package manager-specific setup.
## we simply append the manager name as defined in the array above to 'inst_'.
## This assumes the resulting function name exists. Note that this is case-
## sensitive. eg: 'aptitude' becomes a call to function 'inst_aptitude'.
echo "[i] Performing $PKGMGR setup...";
echo "[i] Building package list...";
inst_$PKGMGR;


###############################################################################
## All done. Return control to shell with exit code of last operation.
echo "[i] Done.";
exit $?;
</textarea><br><br>As I'm using Fmod which works fine, I will skip the issues with the buggy bmx audio drivers.<br><br>For the ice of the cake. The simple "Drawimage" command now causes a core dumb error. AWESOME! Has to be my Nvidia card, at least it worked on ATI cards. <br><br></td></tr></table><br>
<a name="1214685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The simple "Drawimage" command now causes a core dumb error. AWESOME! Has to be my Nvidia card, at least it worked on ATI cards. <br></div>With out knowing what your hardware it is no one will not be able to try and point you in the right direction. If it's an old card, proprietary drivers may no longer be supported so you will be stuck with the open source version that may not include 3D hardware acceleration. If it's new, then try to install one of the nvidia packages using sudo apt-get install (<b>nvidia-173, nvidia-304, nvidia-319</b>). Do not install any of the packages with -updates appended to the package name. The very last resort is to download the nvidia drivers from the nvidia website and attempt to install it. I should point out that even experienced Linux users have trouble installing proprietary drivers directly from the chip vendors sites. <br><br></td></tr></table><br>
<a name="1214692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its a 780 GTX. "nvidia-319" did the job. Again, thanks a lot! <br><br></td></tr></table><br>
<a name="1216563"></a>

<a name="1216564"></a>

<a name="1216581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> As the patch script in the first post is for BlitzMax version 1.48. I have posted here another version that should work on both 1.48 and 1.50.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#!/bin/bash
#########################################
#                                       #
#	 BLITZMAZ 1.48/1.50 FILE PATCHER    #
#   PULSE AND ALSA FIXES BY SKIDRACER   #
#					                    #
#               Version 0.1             #
#                                       #
#########################################
# THIS SCRIPT COMES WITH NO WARRANTIES WHAT SO EVER USE AT YOUR OWN RISK

# Load a file into
load_file(){
		#IFS=$'\n' FILE_ARRAY=( $( &lt; "$1" ) )
        readarray FILE_ARRAY &lt; "$1"
		FILE_LEN=( ${#FILE_ARRAY[*]} )
		return $?;
}

# insert a line into an array zero index array. syntax: insert_array $line_number $string 
insert_array(){
	# Add element to array and get the new size
	FILE_LEN=( ${#FILE_ARRAY[*]} )
	# Move the array up and insert the new line
	for ((i=$FILE_LEN;i&gt;"$1";i--)); do FILE_ARRAY[$i]=${FILE_ARRAY[$i-1]}; done;	   
	FILE_ARRAY[$1]="$2"$'\n';
	return $?;
}

# Update freeaudio.bmx
update_freeaudio(){
	
	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx.bac ]; then echo "PATCHER: Skipping freeaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx
	mv BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx.bac

	# Befor inserting new lines change the old ones
	FILE_ARRAY[3]="ModuleInfo \"Version: 1.23\""$'\n'
	FILE_ARRAY[66]="'Import \"ossdevice.cpp\""$'\n'
	FILE_ARRAY[68]="'Function OpenOSSDevice()"$'\n'
	FILE_ARRAY[114]="			device=OpenPulseAudioDevice()"$'\n'

	# Add changes
	insert_array 9 "ModuleInfo \"History: 1.23 Release\""$'\n'
	insert_array 10 "ModuleInfo \"History: Added PulseAudio driver as default Linux sound driver\""$'\n'
	insert_array 66 "Import \"-lpulse-simple\""$'\n'
	insert_array 70 "Import \"pulseaudiodevice.cpp\""$'\n'
	insert_array 72 "Function OpenPulseAudioDevice()"$'\n'
	insert_array 122 "'		Case 2"$'\n'
	insert_array 123 "'			device=OpenOSSDevice()"$'\n'
  
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/pub.mod/freeaudio.mod/freeaudio.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched freeaudio.bmx";
	return $?;
}

# Update ALSA driver cpp
update_alsa(){
	
	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/freeaudioaudio.mod/alsadevice.cpp.bac ]; then echo "PATCHER: Skipping freeaudioaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp
	mv BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp.bac
	
	# Virtually a straight swap no new lines to insert
	FILE_ARRAY[12]="#include &lt;alsa/asoundlib.h&gt;"$'\n'
	FILE_ARRAY[21]="	pthread_t	audiopthread;"$'\n'
	FILE_ARRAY[37]="		threadid=pthread_create(&amp;audiopthread,&amp;attr,audiothread,(void*)this);"$'\n'
	FILE_ARRAY[73]="	if (err&lt;0) return v;"$'\n'
	FILE_ARRAY[81]="		return v;"$'\n'
	FILE_ARRAY[85]="		return v;"$'\n'
	FILE_ARRAY[90]="		return v;"$'\n'
	FILE_ARRAY[99]="		return v;"$'\n'
	FILE_ARRAY[106]="		return v;"$'\n'
	FILE_ARRAY[111]="		return v;"$'\n'
	FILE_ARRAY[117]="		return v;"$'\n'
	FILE_ARRAY[121]="		return v;"$'\n'
	
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/pub.mod/freeaudio.mod/alsadevice.cpp
	unset FILE_ARRAY;
	echo "PATCHER: Patched alsadevice.cpp";
	return $?;
}

# Update freeaudioaudio.bmx
update_freeaudioaudio(){

	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudo.bmx.bac ]; then echo "PATCHER: Skipping freeaudioaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx
	mv BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bac
  
	# Befor inserting new lines change the old ones
	FILE_ARRAY[206]="TFreeAudioAudioDriver.Create \"FreeAudio PulseAudio System\",0"$'\n'
	FILE_ARRAY[207]="'TFreeAudioAudioDriver.Create \"FreeAudio ALSA System\",1"$'\n'
  
	# Add changes
	insert_array 208 "'TFreeAudioAudioDriver.Create \"FreeAudio OpenSound System\",2"
  
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/brl.mod/freeaudioaudio.mod/freeaudioaudio.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched freeaudioaudio.bmx";
	return $?;
}

# Update appstub.bmx
update_appstub(){
	
	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx.bac ]; then echo "PATCHER: Skipping appstub.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx
   	mv BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx.bac
   
	# add ld flag -ldl
	insert_array 64 "Import \"-ldl\""$'\n'
   
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/brl.mod/appstub.mod/appstub.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched appstub.bmx";
	return $?;
}

# Update threads.bmx
update_threads(){

	# Check if there is a back up file and if so don't patch as it's already been done
	if [ -f BlitzMax/mod/brl.mod/threads.mod/freeaudioaudo.bmx.bac ]; then echo "PATCHER: Skipping freeaudioaudio.bmx"; return $? ; fi
	
	# Load the file as an array and backup original
	load_file BlitzMax/mod/brl.mod/threads.mod/threads.bmx
	mv BlitzMax/mod/brl.mod/threads.mod/threads.bmx BlitzMax/mod/brl.mod/threads.mod/threads.bmx.bac
  
	insert_array 11 "?Linux"
	insert_array 12 "Import \"-ldl\""
	insert_array 13 "?"
	insert_array 14 ""
  
	# Out put to file
	echo "${FILE_ARRAY[*]}" &gt; BlitzMax/mod/brl.mod/threads.mod/threads.bmx
	unset FILE_ARRAY;
	echo "PATCHER: Patched threads.bmx";
	return $?;
}

# Pulse Audio Device Driver
# As there isn't a file to patch just echo the output to a file
update_pulseaudio_cpp(){

echo "PATCHER: Installing pulseaudiodevice.cpp";

# If the pulse audio file exists then rename it
MAXPATH=BlitzMax/mod/pub.mod/freeaudio.mod

if [ -f $MAXPATH/pulseaudiodevice.cpp ]; then
  if [ -f $MAXPATH/pulseaudiodevice.cpp.bac ]; then rm $MAXPATH/pulseaudiodevice.cpp.bac ; fi
  mv $MAXPATH/pulseaudiodevice.cpp $MAXPATH/pulseaudiodevice.cpp.bac
fi

echo "// pulseaudiodevice.cpp" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "// sudo apt-get install libpulse-dev" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#ifdef __linux" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include \"freeaudio.h\"" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include &lt;unistd.h&gt;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include &lt;pulse/simple.h&gt;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#include &lt;pthread.h&gt;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "extern \"C\" audiodevice *OpenPulseAudioDevice();" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "void *pulseaudiothread(void*dev);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#define LINUXFRAG 2048" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "struct pulseaudiodevice:audiodevice{" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	pthread_t audiothread;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int threadid;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int running;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int playing;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int error;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	short *buffer;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	int buffersize;	//in bytes" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp		
echo "	pa_simple *simple;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "	static void *pulseaudiothread(void *arg){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pulseaudiodevice* audio;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		audio=(pulseaudiodevice*)arg;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		audio-&gt;run();" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		return 0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp		
echo "	int reset(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		pa_sample_spec stereo16;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		running=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		playing=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp		
echo "		stereo16.format=PA_SAMPLE_S16LE;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		stereo16.rate=44100;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		stereo16.channels=2;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		simple=pa_simple_new(NULL,\"freeaudio\",PA_STREAM_PLAYBACK,NULL,\"playback\",&amp;stereo16,NULL,NULL,&amp;error);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		if (simple==NULL) return -1;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		mix=new mixer(LINUXFRAG);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		mix-&gt;freq=44100;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		mix-&gt;channels=2;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		buffer=new short[LINUXFRAG];" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		buffersize=LINUXFRAG*2;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pthread_attr_t	attr;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pthread_attr_init(&amp;attr);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		running=1;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		threadid=pthread_create(&amp;audiothread,&amp;attr,pulseaudiothread,(void*)this);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		return 0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "	int close(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp	
echo "		int timeout;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		running=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		timeout=500;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		while (timeout-- &amp;&amp; playing){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			usleep( 10*1000 );" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		pa_simple_free(simple);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		return 0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	void run(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		int data;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		int res;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		playing=1;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		while (playing &amp;&amp; running){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			mix-&gt;mix16(buffer);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			int err=pa_simple_write(simple, buffer, buffersize, &amp;error);" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "			if (err&lt;0) break;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp			
echo "		}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "		playing=0;" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "};" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "audiodevice *OpenPulseAudioDevice(){" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "	return new pulseaudiodevice();" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "}" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
echo "#endif" &gt;&gt; $MAXPATH/pulseaudiodevice.cpp
return $?;
}

## execute patching
update_appstub
update_freeaudio
update_freeaudioaudio
update_threads
update_alsa
update_pulseaudio_cpp
echo "PATCHER: TASK COMPLETED";</textarea><br><br>Edited: Small fix as replacing some commands didn't add a new line sequence. <br><br></td></tr></table><br>
<a name="1216566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wouldn't you be better with a "proper" patch file?<br><br>I realise everyone likes to re-invent the wheel with everything BlitzMax related, but sometimes it's just better to use the tools that are available... <br><br></td></tr></table><br>
<a name="1216577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> While it surely is possible to :<br>diff -u oldFile newFile &gt; patchedFile.diff<br><br>and then on the other system<br>patch vanillaInstalledFile &lt; patchedFile.diff<br><br><br>But the "simplyness" of the patch-script is that it should be a selfcontained file (and only one).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1216579"></a>

<a name="1216682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Wouldn't you be better with a "proper" patch file? <br></div>That was what the first attempt was. But unfortunately I discovered that copy and paste from these here pages doesn't work very well with tools like patch or using<br><pre class=code>cat &lt;&lt;EOF &gt;mynewfile.txt
the content
of this new file
is just placed
between the eofs
EOF</pre><br>That's why the pulsedevice.cpp is created with echo "text" &gt;&gt; textfile.text<br><br><div class="quote"> But the "simplyness" of the patch-script is that it should be a selfcontained file (and only one). <br></div>I think that I may try an experiment where I echo a patch file and then execute patch. I may work then with copy and paste from this site.<br><br>Edit: Scratch that idea. diff generates too big a patch file for some simple insertions. <br><br></td></tr></table><br>
<a name="1223254"></a>

<a name="1223778"></a>

<a name="1230693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK updated the script and fixed a few issue (hopefully).<br>Nothing much has changed between ubuntu 13.10 and ubuntu 14.04 LTS beta, apart from now needing libfontconfig.so.1 linking.<br><br>One thing to note is that the BlitzMax 1.50 binaries will not work with Debian 7. This I can guess is that the 1.50 binaries were built on a newer version of Ubuntu. If you want use the 1.50, then you will have to copy the modules from 1.50 and use the 1.48 binaries to rebuild the modules and the 1.50 version tools. <br><br></td></tr></table><br>
<a name="1237301"></a>

<a name="1274926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought I would share a little something that I have been messing around with on and off for that last month. It's a small tool that creates a tar.gz archive, with the option of creating a self extracting archive. It will also generate an install script, that with any luck, should be able to to detect the distribution and with the right function script created for the distribution; install the necessary packages.<br><br>It was created with Monkey-X in mind, but you can adapt the packages for any application.<br>Note that this is a basic check and install script. There is no package management involved.<br>I've added detection for Ubuntu, Debian, Linux Mint, Fedora, OpenSUSE and Mageia.<br><br>You should read the README first. And test out the installation script of created archives in a virtual machine in case something goes wrong.<br> <br><a href="https://www.dropbox.com/s/76km3asojrhyqh7/builder-0.9.tar.gz" target="_blank">https://www.dropbox.com/s/76km3asojrhyqh7/builder-0.9.tar.gz</a> <br><br></td></tr></table><br>
<a name="1238906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Socratous</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you dawlane!!! Amazing work! I could marry you (if you were a girl and hot)! <br><br></td></tr></table><br>
<a name="1245462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well finally got round to testing the scripts with both Ubuntu 14.04 and Ubuntu 14.10.<br><br>The verdict<br>Ubuntu 14.04 32bit and 64bit works.<br>Ubuntu 14.10 only the 32bit works as it looks like there have been some changes to some of the development packages. Re-building the modules fails with a 64bit distribution when trying to compile anything with truetype. Truetype config is trying to find header files in the i386-linux-gnu directory that do not exist. I did try to install the 32bit version of this development library, but ended breaking the packages.<br><br>I may look into this later when the next version of Linux Mint arrives on the scene. <br><br></td></tr></table><br>
<a name="1274923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> I used this on Mint 17.2, 64 bit and it all seems to be working quite well.<br><br>I have a question about your final remark in the 1st post: deployment. Do I need to provide those libs with my distribution or is it something that the user needs to install?? <br><br></td></tr></table><br>
<a name="1274925"></a>

<a name="1274927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> The use user must have the required libraries installed. In general you would create a package that contains the necessary instructions to install these for the end user. But if you distribute that program as a archive then you have to inform the end user of the additional dependencies or supply a script.<br><br>See post 30 for a tool for that I knock up to create a multi distribution, self extracting archive.<br>It require some understanding of how dpkg/rpm works and the .deb/.rpm format to make a proper package. <br><br></td></tr></table><br>
<a name="1279426"></a>

<a name="1279428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am trying to make it work on a virtual machine but it is failing. My system info is:<br><br>- Host: MacBook Air 2013 11" with OS X El Capitan installed.<br>- Guest: Xubuntu 12.04 32 bits with all updates installed.<br>- VirtualBox version 5.0.6<br>- BlitzMax 1.50<br><br>I have successfully ran bmax.sh and patch.sh, but when doing the "bmk makemods -a" part, it gives me this:<br><br><pre class=code>Compiling:blitz_app.c
Compiling:blitz_types.c
Compiling:blitz_cclib.c
Compiling:blitz_memory.c
Compiling:blitz_module.c
Compiling:blitz_object.c
Compiling:blitz_string.c
Compiling:blitz_array.c
Compiling:blitz_handle.c
Compiling:blitz_debug.c
Compiling:blitz_incbin.c
Compiling:blitz_thread.c
Compiling:blitz_ex.c
Compiling:blitz_gc.c
Compiling:blitz_gc_rc.c
Compiling:blitz_ex.linux.x86.s
flat assembler  version 1.68  (0 kilobytes memory)
Segmentation fault (core dumped)
Build Error: Failed to assemble /home/javi/Apps/BlitzMax/mod/brl.mod/blitz.mod/blitz_ex.linux.x86.s</pre><br><br>That "Segmentation fault (core dumped)" when running fasm also happens if I open MaxIDE (which opens without problems) and try to build any sample.<br><br>EDIT: Seems to work fine with BlitzMax 1.48. <br><br></td></tr></table><br>
<a name="1279549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> At first thought I would have suspected that there was a problem with bcc or fasm being compiled with a different version of libc. But my money would be on the combination of Virtualbox and El Capitan (the latter which is giving a few developers head aches).<br><br>BlitzMax 1.50 (non opensource) works as it should using a Linux host, using Xubuntu 12.04 32/64bit guest on Virtual Box 5.0.2. <br><br></td></tr></table><br>
<a name="1305633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Henri</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi dawline,<br><br>I used your script in newest Ubuntu 16.04 and it does the job nicely. As a complete Linux noob it really made things more easy.<br>Do you use default 1.50 BMX ?<br><br>-Henri <br><br></td></tr></table><br>
<a name="1305720"></a>

<a name="1305722"></a>

<a name="1305724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use 148/150 and the stuff on git-hub.<br>There is one or two caveats.... Using Brucey's GTK stuff (and other modules) can be problematic on a 64 bit distribution due to dependency issues relating to gtk themes and webkit.<br><br>My advice now would be to move away from BlitzMax as a cross platform development tool, as it will get more and more broken with each new release of a Linux distribution. Brucey has done a good job of trying to keep things going, but in the end; even he's not going to be able to find time to keep fixing things. I myself could have gone to town on it, but I hate fixing other peoples code knowing that at a later date there would be an update and have to fix it all again. At that time the license wouldn't have allowed me to do so and by the time that changed I had moved on to something else.<br><br>BlitzMax for Linux on the support front was always an after thought (the same as 64 bit support for Windows and Linux). BRL should not have been selling BlitzMax as a cross platform tool if they were not fully committed to supporting all three target platforms. If I had known that at the time, I would never had purchased a license in the first place.<br><br>If you read <a href="/posts.php?topic=104641" target="_blank">BlitzMax games on LINUX SteamOS</a>, especially posts 15 and 18.<br><br>All BlitzMax now to me is just a toy language for doing a quick prototype. <br><br></td></tr></table><br>
<a name="1305747"></a>

<a name="1305749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Henri</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply. Is the fundamental problem dependency management and if so would <a href="https://insights.ubuntu.com/2016/04/13/snaps-for-classic-ubuntu/" target="_blank">https://insights.ubuntu.com/2016/04/13/snaps-for-classic-ubuntu/</a> this be the answer ?<br><br>-Henri <br><br></td></tr></table><br>
<a name="1305761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is the fundamental problem dependency management and if so would <a href="https://insights.ubuntu.com/2016/04/13/snaps-for-classic-ubuntu/" target="_blank">https://insights.ubuntu.com/2016/04/13/snaps-for-classic-ubuntu/</a> this be the answer ? <br></div>No. The fundamental problem is package maintainers not making their packages multi-arch aware. Adding another package format (snaps) which is basically a Canonical thing, wouldn't solve the problem. <br><br></td></tr></table><br>
<a name="1309406"></a>

<a name="1329249"></a>

<a name="1329295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> This script is a work-in-progress and should work as before, but now gives you the option to install gtk+2 for development on both 32 bit and 64 bit distributions. This is more for using BlitzMax NG than vanilla BlitzMax.<br><br>It will only become the main install script for BlitzMax if I get reports back that it's installing the dependencies correctly. Note that on a 64 bit distribution gtk 32 bit will complain about various bits, but the compiled binaries should work as normal when run on a 32 bit distribution.<br>To install gtk+2. Just pass <b>gtk</b> as a parameter. e.g.<br><pre class=code>./bmx-deps-install.sh gtk</pre><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#!/bin/bash
####################################################################
#                                                                  #
#       Blitz Max Build Environment Dependency Installer for       #
#              Linux Mint 13+ Ubuntu 12.04+ Debian 8+              #
#                       by J.Cook aka dawlane                      #
#       Released: May 2013                                         #
#       Updated: October 2016                                      #
#                                                                  #
####################################################################
# THIS SCRIPT COMES WITH NO WARRANTIES WHAT SO EVER USE AT YOUR OWN RISK

# 23/06/2013: Updated script as Ubuntu can not use `uname -m` == "x86_64" in if conditional if run as sudo. Should now work as expected.
# 27/06/2013: Removed some dead wood as libglu1-mesa-dev will install the libx11/x11proto/mesa-common stuff.
# 24/10/2013: Updated script as Ubuntu 13.10 (this will mean any distribution that based of this) no longer has a ia32-lib-multiarch meta package so all 32bit dependencies install separately
#             Added modification to script so it can be used with Debian.
#             Added some error checking.
# 28/10/2013: Minor alterations. Added addition comments along with libraries and removed auto yes from apt-get so you can see if any libraries get scheduled for removal
# 15/04/2013: Updated check for 64bit Machine function to display 32bit or 64bit
#             Updated check to see if a i386 multi-arch has been enabled and moved apt-get update into this check.
#             Added soft link for libfontconfig. Ubuntu 14.04 LTS i386
# 23/06/2014: Hopefully fixed a linking issue with Debian 7 64 bit and libGL.so.1 not begin found
# 09/08/2014: Hopefully fixed a small problem with Ubuntu 12.04 as grep 'i386' /var/lib/dpkg/arch is looking for a non existent file
# 15/05/2016: Got rid of the if statments for checking if a library has been system linked. Now a function is called instead to do the job.
#             Added the use of passing 'gtk' as an additional parameter to instal GTK+2. Users of 64 bit distributions should be aware that installing 32 bit GTK+2 can be fraught with problems.
#             The 32 bit version of libgtkhtml-3.14 and libwebkitgtk-1.0-0 should work. 
#             Removed old references to previous distributions.
# 10/06/2016: Did a bit of rearranging of how the gtk setup should be called. This was done for when gtk+3 is supported
# 03/10/2016: Commented out libgtkhtml-3.14 as later versions of Ubuntu etc use libgtkhtml4
#             Commented out libwebkitgtk-3.0-0 as gtk2 is incompatible.
#             There is a problem with i386 development files on later 64 bit distributions, so a link has to be made to the header files for the 64 bit version.

# Check to see if script is being run as root
if [[ $EUID -ne 0 ]]; then
  echo
  echo "BlitzMax Installer: This script must be run as root";
  exit 1;
fi

# Extract the file name, trim and link
function lnk(){
  local LIB=$(echo `basename $1` | sed 's/\.so.*/.so/')
  if [ ! -f "/usr/lib32/$LIB" ]; then echo "BlitzMax Installer: Linked `basename "$1"`"
    ln -s "$1" "/usr/lib32/$LIB"; 
  fi
}

# Get the machine architecture
ARCH=$(uname -m | sed 's/x86_//;s/i[3-6]86/32/')
# If the system is 64 bit then check to see if multi-arch is enabled.
if [ $ARCH -eq 64 ]; then
  echo
  echo "BlitzMax Installer: Machine is 64 bit";
  echo "BlitzMax Installer: i386 Multi-Arch check";
  if [ ! `dpkg --print-foreign-architectures | grep i386` ]; then dpkg --add-architecture i386
    if [ $? -eq 0 ]; then echo "BlitzMax Installer: Added i386 architecture to dpkg."; else echo "BlitzMax Installer: Error from dpkg."; exit 1; fi 
      # Run update
      echo "BlitzMax Installer: Updating package data base";
      apt-get --quiet update
      if [ $? -eq 0 ]; then echo "BlitzMax Installer: Update OK"; else echo "BlitzMax Installer: Error from Update."; exit 1; fi
    else
      echo "BlitzMax Installer: 32bit Multi-Arch support already enabled";
    fi;
else
  echo "BlitzMax Installer: Machine is 32 bit";
fi

# Select the packages for architecture installation
# Edit to suite your system
if [ $ARCH -eq 64 ]; then
  # Development libraries current as of Apr 2012 - Apr 2014.
  PKGS="g++-multilib libglu1-mesa-dev libasound2-dev libfreetype6-dev libxpm-dev libxft-dev libxxf86vm-dev libpulse-dev libopenal-dev";

  # 32bit libraries required for running BlitzMax applications. Note libglu1-mesa will install libgl1-mesa-glx if no driver is installed. 
  PKGS="$PKGS libglu1-mesa:i386 libfreetype6:i386 libxft2:i386 libxpm4:i386 libasound2:i386 libpulse0:i386 libopenal1:i386"

  # Additional 32bit libraries. libstdc++6 is installed with g++-multilib or libglu1. libx11-6 gets installed with libglu1-mesa or drivers as should libgl-mesa-glx.
  # PKGS="$PKGS libstdc++6:i386 libx11-6:i386 libgl1-mesa-glx:i386"
else
  # Current as of Apr 2012 - Apr 2014
  PKGS="g++ libglu1-mesa-dev libasound2-dev libfreetype6-dev libxpm-dev libxft-dev libxxf86vm-dev libpulse-dev libopenal-dev";

  # Libraries required for running BlitzMax applications. Most if not all of these should be already installed.
  # PKGS="$PKGS libglu1-mesa libfreetype6 libxft2 libxpm4 libasound2 libpulse0 libopenal1"
fi

# Install the packages
apt-get install $PKGS
if [ $? -eq 0 ]; then echo "BlitzMax Installer: apt-get OK"; else echo "BlitzMax Installer: Error from apt-get."; exit 1; fi

# If machine architecture is 64bit then set up some links
if [ $ARCH -eq 64 ]; then
  echo "BltizMax Installer: Update System Soft Links in /usr/lib32 for 64 bit Linux";
  if [ ! -f /usr/lib32/libGL.so ]; then 
    if [ -f /usr/lib/i386-linux-gnu/mesa/libGL.so.1 ]; then
      echo "BltizMax Installer: Ubuntu/Linux Mint";
      lnk /usr/lib/i386-linux-gnu/mesa/libGL.so.1
    else
      echo "BltizMax Installer: Debian/Linux Mint Debian";
      if [ -f /usr/lib/mesa-diverted/i386-linux-gnu/libGL.so.1 ]; then
	lnk /usr/lib/mesa-diverted/i386-linux-gnu/libGL.so.1
	if [ ! -f /usr/lib/i386-linux-gnu/libGL.so.1 ]; then ln -s /usr/lib/mesa-diverted/i386-linux-gnu/libGL.so.1 /usr/lib/i386-linux-gnu/; fi
      else
	lnk /usr/lib/i386-linux-gnu/libGL.so.1
      fi
			
    fi
  fi
  lnk /usr/lib/i386-linux-gnu/libGLU.so.1
  lnk /usr/lib/i386-linux-gnu/libX11.so.6
  lnk /usr/lib/i386-linux-gnu/libfreetype.so.6
  lnk /usr/lib/i386-linux-gnu/libXxf86vm.so.1
  lnk /usr/lib/i386-linux-gnu/libXft.so.2
  lnk /usr/lib/i386-linux-gnu/libXpm.so.4
  lnk /usr/lib/i386-linux-gnu/libasound.so.2
  lnk /usr/lib/i386-linux-gnu/libpulse-simple.so.0
  lnk /usr/lib/i386-linux-gnu/libopenal.so.1
  # BlitzMax required libfontconfig to be linked with the release candidate of Ubuntu 14.04.
  lnk /usr/lib/i386-linux-gnu/libfontconfig.so.1
  # TO DO: Freetype has had a bit of a make over and broke i386 search for header files
  # Freetype2 config expects to find include files in /usr/include/i386-linux-gnu/freetype2. But this directory doesn't exist, so check and make a link to it
  if [ ! -d /usr/include/i386-linux-gnu/freetype2 ]; then # This probably needs better checking
  	mkdir -p /usr/include/i386-linux-gnu
  	ln -s /usr/include/x86_64-linux-gnu/freetype2 /usr/include/i386-linux-gnu/freetype2
  fi
fi

# What follows are functions for installing 32bit GTK dependencies of a 64 bit distribution. You must pass 'gtk' as a parameter when calling this script
# It will attempt to install those 32 bit dependencies that have conflicts.
# Note that GTK themes can be hit and miss and will require a similar approach

# Download the debian package, extract, copy and link. 
function extract(){
  # NOTE: xenial distributions issue a warning about file permissions
  apt-get download $1:i386
  dpkg -x "$1"*.deb ../
  
  if [ -d $SCRIPT_DIR/usr/lib/i386-linux-gnu ]; then
    cp -a $SCRIPT_DIR/usr/lib/i386-linux-gnu/* /opt/ia32-libs
    rm -rf $SCRIPT_DIR/usr/lib/i386-linux-gnu
  fi
  if [ ! -z "$2" ]; then lnk "$2"; fi
}

# Function to set up 32 bit dependencies of a 64 bit distribution
function gtk2_setup(){
  echo
  echo "Processing GTK+2.0 installation"
  PKGS="libgtk2.0-dev libwebkitgtk-dev libgail-dev"
  #PKGS="$PKGS libgtkhtml3.14-dev"
  
  if [ $ARCH -eq 64 ]; then
    echo "Adding 32 bit dependencies"
    SCRIPT_DIR="$( cd "$( dirname "$0" )" &amp;&amp; pwd )"
    PKGS="$PKGS libglib2.0-0:i386 libgtk2.0-0:i386 libgail-3-0:i386 libgail18:i386 libpangox-1.0-0:i386 libgconf2-4:i386"
    #PKGS="$PKGS libjavascriptcoregtk-1.0-0:i386 libharfbuzz-icu0:i386 libgeoclue0:i386 libgstreamer1.0-0:i386 libsecret-1-0:i386"
    #PKGS="$PKGS libgstreamer-plugins-good1.0-0:i386 libsoup2.4-1:i386 libwebp5:i386"
    apt-get install $PKGS
   
    # Handle the conflicting libraries. For convenience all libraries will be placed in a new directory /opt/ia32-libs and the library cache updated.
    # The library paths go in /etc/ld.so.conf.d.
    mkdir -p $SCRIPT_DIR/aptpack &amp;&amp; mkdir -p /opt/ia32-libs
    pushd $SCRIPT_DIR
    cd $SCRIPT_DIR/aptpack
    #extract libgtkhtml3.14-19 /opt/ia32-libs/libgtkhtml-3.14.so.19
    extract libwebkitgtk-1.0-0 /opt/ia32-libs/libwebkitgtk-1.0.so.0
    #extract libwebkitgtk-3.0-0 /opt/ia32-libs/libwebkitgtk-3.0.so.0
    extract libenchant1c2a /opt/ia32-libs/libenchant.so.1
    popd
  
    # Update the ld cache so that the runtime linker will look for those pesky libraries. You will still need to make links to these for building
    if [ -d /etc/ld.so.conf.d ]; then
      echo "/opt/ia32-libs" &gt; /etc/ld.so.conf.d/i386-linux-gnu-conflicts.conf
    else
      echo "/opt/ia32-libs" &gt;&gt; /etc/ld.so.conf
    fi
    ldconfig
  
    # Link all those libraries that can be normally installed whitout jumping through hoops
    lnk /lib/i386-linux-gnu/libglib-2.0.so.0
    lnk /usr/lib/i386-linux-gnu/libgtk-x11-2.0.so.0
    lnk /usr/lib/i386-linux-gnu/libgdk-x11-2.0.so.0
    lnk /usr/lib/i386-linux-gnu/libatk-1.0.so.0
    lnk /usr/lib/i386-linux-gnu/libpango-1.0.so.0
    lnk /usr/lib/i386-linux-gnu/libgmodule-2.0.so.0
    lnk /usr/lib/i386-linux-gnu/libgobject-2.0.so.0
    lnk /usr/lib/i386-linux-gnu/libgdk_pixbuf-2.0.so.0
    lnk /usr/lib/i386-linux-gnu/libcairo.so.2
    lnk /usr/lib/i386-linux-gnu/libpangocairo-1.0.so.0
    lnk /usr/lib/i386-linux-gnu/libpangox-1.0.so.0
    lnk /usr/lib/i386-linux-gnu/libgailutil.so.18
  
    # clean up
    rm -rf $SCRIPT_DIR/aptpack
    rm -rf $SCRIPT_DIR/usr
  else
    apt-get install $PKGS
  fi
}

# Check to see if the gtk flag was passed and if so install GTK
case "$1" in
  "gtk" ) gtk2_setup ;;  
esac
</textarea> <br><br></td></tr></table><br>
<a name="1314550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm floored that this still works at all on modern linux.  I fought it for hours to no avail, then days after giving up I tried the MaxIDE binary and it ran just fine.  Only difference I can think of is that I hadn't done an apt-get upgrade.<br><br>Since it runs on Ubuntu (Wily at least) that should keep us going for another couple of years I would think.  Thanks for your hard work Dawlane. <br><br></td></tr></table><br>
<a name="1320713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zymoesh</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have an issue where it segfaults when I try to run a program compiled in release mode. But not on debug. I have used the bmax.sh and patch.sh from here and they install/patch everything OK. I don't know what else to do.<br><br>I'm on Ubuntu 16.04.1 LTS. Using Blitzmax 1.50. <br><br></td></tr></table><br>
<a name="1320717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> 64bit? I think I'm having the same problem before. <br><br></td></tr></table><br>
<a name="1320756"></a>

<a name="1320759"></a>

<a name="1320791"></a>

<a name="1320822"></a>

<a name="1320824"></a>

<a name="1320825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've seen this issue with Debian, but never with Ubuntu.<br>To get some information of where the segfault is occurring, you will need to make a few alterations to the bmk executable.<br><br>Proceed as follows:<br>1) Open the files <i>bmk.bmx</i> and <i>bmk_util.bmx</i> located in the <i>BlitzMax/src/bmk</i> directory. Select the open <i>bmk.bmx</i> via the tab and use <b>Lock the build File</b> from the <b>Program</b> menu to set it as the default build file.<br><br>2) Select the <i>bmk_utils.bmx</i> tab in the editor and locate this line:<br><pre class=code>cmd:+" -m32 -s -Os -pthread"</pre> it should be line 331 within the ?Linux compiler directive section. Remove the <b>-s</b> options and save the file. The option <b>-s</b> will strip the debug symbols that we need to see where it goes wrong. This makes the resulting executable larger, so bmk will either have to be modified again or use a back up of the original, or use <a href="https://sourceware.org/binutils/docs/binutils/strip.html" target="_blank"><b>strip</b></a> to remove the symbols.<br><br>3) As building a release version of the bmk compiler will give you the same problem, you should build it as a debug version. You will need to back up your original bmk located in the <i>BlitzMax/bin</i> directory by renaming it. You can then move the <i>bmk.debug</i> file from the <i>BlitzMax/src/bmk</i> into the <i>BlitzMax/bin</i> directory and rename it to just <i>bmk</i>. You must then rebuild all the modules to include debug symbols.<br><br>4) The project that is failing should have the build binaries and the hidden <i>.bmk</i> directory deleted. You can then open the projects main file and build a release version with debug symbols.<br><br>5) To use the debug symbols you will need to instal <a href="http://www.yolinux.com/TUTORIALS/GDB-Commands.html" target="_blank"><b>gdb</b></a> and <a href="http://www.computerworld.com/article/2693414/setting-limits-with-ulimit.html" target="_blank"><b>ulimit</b></a>; the latter should already be installed. When these are installed, open a terminal and change directory to the projects directory. Then you need to generate what is known as a core dumb file. To do this type:<br><pre class=code>ulimit -c unlimited</pre>and then execute the project binary, then wait until it crashes and creates a file called <i>core</i><br><br>6) Now you can run gdb with<br><pre class=code>gdb ./&lt;your-project-binary-name&gt; core</pre>replace <i><b>&lt;your-project-binary-name&gt;</b></i> with the name of your projects executable. It will stop where the crash is happening with the last function call of where the problem lies. If you type <b>bt</b> or <b>backtrace</b> it will give you a back-trace of the function calls that lead up to the crash. The problem could be in any one of those fuction calls.<br><br>To quit gdb, just type <b>quit</b><br><br>The crash dump that I get with a Debian 8 release builds is:<br><pre class=code>Core was generated by `./oldskool2'.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x080c6cb3 in bbMemExtend ()
(gdb) backtrace
#0  0x080c6cb3 in bbMemExtend ()
#1  0x080c2b14 in bbGCFree ()
#2  0x080c2ef1 in bbGCAllocObject ()
#3  0x080c5cd7 in bbStringNew.part.0 ()
#4  0x080c637b in bbStringFromShorts.part.4 ()
#5  0x080c650f in bbStringFromUTF8String ()
#6  0x080c75c6 in bbStartup ()
#7  0x0805058c in main ()</pre><br>Edit: In this case the problem appears to be in the function <b>bbStringFromUTF8String</b> located in <i>BlitzMax/mod/brl.mod/blitz.mod/blitz_string.c</i>.<br><br>You would also need a bit of g++ and gcc information as it could be a problem with how the compiler was built as well as hardware and installed driver information.<br><br>The chances of getting anything fixed are very slim as BlitzMax is basically abandoned and Linux was always the runt when it came to updates, so if anything you generally would have to fix it yourself. You could try contacting Mark Sibly to see if he can help. But if you don't want to go into it; then I would suggest that you look at brucey's <a href="/posts.php?topic=85108" target="_blank">BlitzMax NG</a>. But be warned, there are some coding things that will work in the Vanilla BlitzMax that will not work in Blitz NG, plus BlitzMax NG requires a bit of work to build. <br><br></td></tr></table><br>
<a name="1328921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am hoping to get to the bottom of this issue shortly as I just ran face first into it today. <br><br></td></tr></table><br>
<a name="1328923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> See <a href="https://github.com/maxmods/brl.mod/commit/a206dfe827f2796f6c3805eb2a880fd229b03fcd" target="_blank">https://github.com/maxmods/brl.mod/commit/a206dfe827f2796f6c3805eb2a880fd229b03fcd</a> <br><br></td></tr></table><br>
<a name="1328924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> As a side note:<br>There are some commits to maxmods/brl.mod and pub.mod which might be worthy to get "back"ported ("made official") to brl/brl.mod and pub.mod.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1336041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> It sounds like 32 bit support for Debian, Ubuntu will be phased out next year for the newer releases. So it looks like vanilla BlitzMax would have to be package as a SNAP as would anything being created with it. <br><br></td></tr></table><br>
<a name="1336042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> And what about all the 32-bit dev tools and libraries required to build stuff? <br><br></td></tr></table><br>
<a name="1336043"></a>

<a name="1336044"></a>

<a name="1336045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hard to say at the moment. A lot of the news is from around June last year and maybe just hogwash as they said something like this before if I recall. But from what I remember, Google and a few others stopped 32 bit builds of their apps in 2015, so it wouldn't surprise me one bit. This is what's being proposed on the mailing list for Ubuntu<br><a href="https://lists.ubuntu.com/archives/ubuntu-devel-discuss/2016-June/016661.html" target="_blank">https://lists.ubuntu.com/archives/ubuntu-devel-discuss/2016-June/016661.html</a><br>I haven't seen anything concrete for Debian.<br><br>Edit: Just had a look a Debian 9 and looks like 32 bit will still be in, but support for old CPUs are being dropped. The base line for a 32 bit compatible CPU will be i686. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
