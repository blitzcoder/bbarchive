<!DOCTYPE html><html lang="en" ><head ><title >How to auto shutdown under BlitzMax app?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to auto shutdown under BlitzMax app?</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=109" >Linux Discussion</a>/<a href="#bottom" >How to auto shutdown under BlitzMax app?</a><br><br>
<a name="803672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space Fractal</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> On Windows, this is a plain easy task (Here for me, I was using a external app for that), but it seen it can't been done in Linux, because restrictions: You are not in root in Ubuntu (but did have enabled it), and you need to insert the password manual and I cant auto send the password in some way.<br><br>Here is what I trying and it wont work (but it find the command):<br><br><pre class=code>
Local proc3:TProcess=TProcess.Create("sudo shutdown -h now",1)
If proc=Null 
	Print "Command Not Found"
Else
	Print "Command Found"
EndIf
</pre><br><br>Since I need it, because Im are converting a full screen jukebox application (running in a arcade or jukebox cabinet), and not a game. <br><br></td></tr></table><br>
<a name="806219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not an expert but this is what id try:<br><br>First get rid of the need for sudo and 'users' alltogether (NOT RECOMMENDED NORMALLY! - but doesnt matter as its going to be an embeded, specialised &amp; isolated system)<br><br>#sudo passwd root<br>enter a new UNIX password:<br><br>This will activate the superuser account. <br><br>You should then be able to LOGIN as root/su rather than a user so it runs the app with root permissions. You then shouldnt be prompted for password when the shutdown is called. <br><br>If tprocess still fails, What about this: (it might work)<br>create a file called 'shutdownscript' with execute permissions containing:<br><pre class=code>
#!/bin/bash
shutdown -h now
</pre>then in your tprocess call: <br><pre class=code>
Local proc3:TProcess=TProcess.Create("./shutdown",1)
</pre>another thing that might work if you cannot log in as root is to somehow give the default user root permissions (add to root group mabe?)<br><br>If all my semi-adept ranting above still doesnt work then ask on the ubuntu forums. In theory you can get linux to do practically anything you want with a bit of tweaking and what you are trying to do seems pretty straightforward. There should somehow also be a way of automatically booting straight in as root without the need for a login too. <br><br>Thinking about it, does linux even need to be 'shut down' if the entire file system is made 100% read only, with no swap? You had better ask someone that knows more, but i suspect it can be simply powered off as there is no possibility of any disk write.<br><br><div class="quote"> On Windows, this is a plain easy task  <br></div>LOL, They must be so proud of the fact ;P <br><br></td></tr></table><br>
<a name="806446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space Fractal</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It still ask the password when I trying to run it as terminal application with the above "batch" file (it even I have enabled the root user).<br><br>When you first have typed it in, it does the job....<br><br>It just have a major problem: <br>MultiJuke (a jukebox application) which I have created, is designed to run in a arcade/jukebox cabinets without having a keyboard. <br><br>Typical it only have a joystick/trackball and few buttons. <br><br>That is why I trying to due that, so I can put in shutdown features back in Multi´Juke. There are 2 methods to shutdown in MultiJuke (directly when pressed the quit key (ESC) or when the last song is played finished). <br><br></td></tr></table><br>
<a name="806459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It still ask the password when I trying to run it as terminal application with the above "batch" file (it even I have enabled the root user). <br></div><br>But are you logging in as root? If its asking for a password then the it is not running with root permission. (simply enabling the root account does not give your account extra permission)<br><br>In a terminal type 'su' and enter a root terminal, try shutdown, it shuts down immediately. Try running your app from a root terminal and it should run with the permissions of the user (root).<br>ie:<br>bring up terminal (note, when you switch to root u get a # not a $)<br>you@youpc:-$ su<br>password:<br>you@youpc:/home/you/yourprog# ./programname<br><br>This should run it as root so no passwords needed <br>(it works, i just tried it on the ./shutdownscript :)<br><br>I dunno if SU has a time out like sudo does :/ Ubuntu by default does not let you log in as 'root' from the main actual login screen, but this should be possible to dissable the login completely so it boots straight in as root. Ask on the UB forum, if no joy then try a different linux. Ive used several that let you log in directly as root.<br>PS: ive changed the name of my original script idea, calling it shutdown was dumb. Ive renamed it to shutdownscript!<br><br>LoL, i too have been working on an embedded dukebox program for a long time, but its far from finished. Good luck with it :) <br><br></td></tr></table><br>
<a name="806467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="806542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space Fractal</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It works when I login as root user first on the login screen (not tested from BlitzMax, but dobble click works directly without password).<br><br>I just like If I could do the same when using my normal username, since not all might like that (and some way got auto yped the password). <br><br>It could even been when running MultiJuke first, to do that done with a another script?<br><br>I guess I need to check and start a tread at Ubuntu Forums, but thanks for the answers :-). <br><br></td></tr></table><br>
<a name="806559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know how they do it on Linux, but on OS X there is a special authorization API for such purposes that you have to call first to obtain the necessary privileges. But even that OS X API will show an authorization dialog before it grants you the requested privileges; there is no way to pass the root password as an argument to the function call. And I think this is how it has to be.<br><br>I presume that GNU/Linux has a similar security API; you probably have to write a BlitzMax wrapper for it to use it properly. <br><br></td></tr></table><br>
<a name="806724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space Fractal</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would been nice, if there are any documentaion or some can make that wrapper.<br><br>I have a form for user input screen in my App, so I could let User input thier password on that way (MultiJuke do have such a password proctection itself when quit, which prettly would act the same as the security API would do).<br><br>The only problem is so, it on a fullscreen OpenGL, and not the desktop dialog I would like to the user type in the password. <br><br></td></tr></table><br>
<a name="810798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jamesmintram</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, have a look at this site:<br><br><a href="http://www.suphp.org/Home.html" target="_blank">http://www.suphp.org/Home.html</a><br><br>That will allow you to write a very simple php script that should allow you to shut the computer down from any user account, simply call the script from your program. You need to set the owner of the script to root though, there may be other solutions for other scripting languages out there but I dont know any of them! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
