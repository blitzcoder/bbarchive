<!DOCTYPE html><html lang="en" ><head ><title >Debian package part 2</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Debian package part 2</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=109" >Linux Discussion</a>/<a href="#bottom" >Debian package part 2</a><br><br>
<a name="949386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> [NOTE]<br>This is a Linux packaging discussion from the DevTeam forum that really belongs in public.<br><br>For my part, my main concern is that Linux BlitzMax can somehow install dependent packages - hence the initial excitement over an rpm package.<br><br>However, if this can also be accomplished in a more distro neutral way via a script, then even better. <br>[/NOTE]<br><br>Hi,<br><br>Having second thoughts about this...<br><br>How many of our users *can't* use debian packages?<br><br>Does this mean we need to provide a tar.gz too?<br><br>If so, forget it - I'm only doing the one! <br><br></td></tr></table><br>
<a name="949387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Debian package! Debian package! I'm so exciteed that BlitzMax is getting all grown up!!! And I spent a few hours putting icon support into FLTKMaxGUI just for this, so you better... :P jk<br><br><div class="quote"> How many of our users *can't* use debian packages? <br></div><br>Don't you just double-click? :P <br><br></td></tr></table><br>
<a name="949393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>&gt; Don't you just double-click? :P <br><br>On debian systems, yes.<br><br>On redhat systems, I need to provide an rpm.<br><br>On other systems...who knows.<br><br>One thing I can guarantee, whatever we leave out, *someone* will want!<br><br>I am getting serious release fatigue here...it feels like I've been building/tweaking/packaging/uploading forever and it has to stop now.<br><br>So sorry, no .deb this time round. <br><br></td></tr></table><br>
<a name="949430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming you need root rights to install the .deb into /usr/* , what rights would one need to be to build modules, considering of course that BlitzMax/mod would be in /usr/* ...<br><br>Locating in /usr/* also implies that the same BlitzMax would be available to all users on the box. What would happen if user B tried to build modules after user A had previously? (this time assuming that you don't need to be root to build them).<br><br>Anyway, I prefer to have BlitzMax in my /home/* folder. But each to their own? :-) <br><br></td></tr></table><br>
<a name="949556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this of any help?<br><br><a href="http://kitenet.net/~joey/code/alien/" target="_blank">http://kitenet.net/~joey/code/alien/</a><br><br>(I have zero idea, but if you can create a deb that works, and that you can prove also works when "alien"-ed, then either you could "alien" it and host an RPM, or leave instructions for the user to do same? <br><br></td></tr></table><br>
<a name="951375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, finally tried using this on my Ubuntu VM, and I get:<br><br>Error: dependency is not satisfiable: libstdc++6-4.3-dev<br><br>I can't see this specific package listed anywhere...what's going on?  I'm guessing 6-4.3 has been pulled...<br><br>Should the dependency be on libstdc++6-dev, is this the "generic" version that ensures you get the most recent version?  It seems installing this also ensures g++ is pulled in? <br><br></td></tr></table><br>
<a name="951405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, possibly not seeing the libstdc++6-4.3 version because I am on 8.04 (and can only see 4.1 and 4.2 versions).  Upgrading to 8.10 now, and expect to see 4.3 appear.<br><br>Even if the upgrade fixes the issue, suggest that unless there's a specific need for that version, shouldn't it be changed to libstdc++6-dev, and that will (presumably?) bring in the latest version available... <br><br></td></tr></table><br>
<a name="951473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Confirmed - 6-4.3 is not available on 8.04 version of Ubuntu (the LTS version), but 6-4.3 is available on 8.10 +.  So really need to find how to specify it generically, not specifically. <br><br></td></tr></table><br>
<a name="951698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why isn't g++ just listed as a dependency?<br><br>g++ package is needed for linking, and requiring g++ then brings in the latest version of g++ (g++-4.3 for me), which in turn ensures the latest libstdc (libstdc++6-4.3-dev)... <br><br></td></tr></table><br>
<a name="951774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Whew, already glad I didn't try to release a .deb!<br><br>But yes, depending on g++ to import the correct libstdc++ for us is a good idea. <br><br></td></tr></table><br>
<a name="953336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> For reference if you decide to revisit the .deb idea (which I think you should), it would probably be as well to set the BMXPATH environment variable (if you can in a .deb : seems like a reasonable thing to want to do!), seeing as issues have been seen in 1.33rc's with putenv_ not storing BMXPATH. <br><br></td></tr></table><br>
<a name="973311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Creating packages for all the unices out there is a major hassle and time much better spent doing useful stuff.<br><br>Personally I much prefer getting blitz in a tar.gz archive, so I can move it to wherever I want. Also not having to dive deep into my filesystem to change modules is a definite plus. Mostly because my current setup has me running several blitz versions for windows and linux from the same root dir. <br>This saves me a lot of hassle having to remeber all the different paths it is installed in per OS. <br><br></td></tr></table><br>
<a name="973330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think most Linux users are comfortable enough with .tar.gz. No need for root access and it makes it very easy to run different versions of BlitzMax, if one would want to.<br><br>When you start with .deb packages then others want .rpm and whatever other flavor is out there. Stick with .tar.gz. <br><br></td></tr></table><br>
<a name="973358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> agreed, you have to know about installing packages anyway <br><br></td></tr></table><br>
<a name="973555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> As a question, why not release a standard tar.gz and have a .sh script check for installed files required by Max this could flag up packages the users need to install to get running. <br><br>The main reason for that is otherwise you will need to create packages for loads of releases of linux, I had this problem with Elite on linux till my linux bod 'Lucifer[SD]' decided that we should just do a tar.gz and a .sh file in there checks to make sure everyone has everything required to run.<br><br>I think PB does this as well with its linux releases. <br><br></td></tr></table><br>
<a name="973584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I do, is run the program in terminal and if it doesnt have the dependency if tells you.<br> You cant run the program from the same directory in terminal, you have to run it from the parent directory or just use ./ in front <br><br></td></tr></table><br>
<a name="973593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying my hand at a general purpose install.sh script as Edzup[SD] suggested.<br><br>For this to work, I need some information on the package manager capabilities and blitzmax dependencies of the major unix distros.<br><br>For Ubuntu i've got it covered.<br>I'm looking for info on Fedora Core, Debian (this is likely the same as ubuntu), Gentoo, Redhat and possibly even MacOSX, provided it supports a command-line package manager.<br><br>In order to have the script detect which distro is running I am using a simple array of distro names and compare it to the output of '$ uname -v' until I find a match.<br><br>'uname' is a standard unix program which outputs distro name/version, kernel version and architecture type (32/64-bit), so this is a handy way to detect the distro on all unices (including macosx).<br><br>These are some outputs for 'uname -v' I have already:<br>- MacOSX: Darwin Kernel Version 9.7.0: Tue Mar 31 22:52:17 PDT 2009; root:xnu-1228.12.14~1/RELEASE_I386<br>- Ubuntu: #45-Ubuntu SMP Tue Jun 30 22:12:12 UTC 2009<br>- Array kernel (asus eeepc): #0array1 SMP Mon Feb 23 15:02:03 MST 2009<br><br>So in order to support a smooth install on other distros, I need the outputs of 'uname -v'. Google isn't very helpful in this regard and I don't plan on downloading all of them and running them in a virtual machine, although I will if I have to. It would be nice if people here can toss in some info if they happen to work with any of the distros listed above (or one I havn't considered yet).<br><br>The script is structured to offer an easy way to include support for any new distros and it supports different handling of installations on 32-bit vs. 64 systems. This is a requirement for Ubuntu, and I imagine some other systems as well. <br><br></td></tr></table><br>
<a name="973647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is the initial version. So far it only implements install/uninstall support for Ubuntu. there are empty stubs for some other distros, which have to be implemented in the coming days for as far as I can.<br><br>Note that macosx is included in the list, but i'm unsure if it's possible to install all the osx requirements (xcode?) through a shell script. Some input from a mac user could help here.<br><br>Running the script without command line options performs the install for the distro it is running on. You can force the install with the -i flag, or uninstall everything with the -u flag.<br><br>I also switched from using 'uname -v' to 'uname -a' for identifying distributions. Reason being that gentoo has no useful output with 'uname -v'.<br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#!/bin/bash

###############################################################################
###############################################################################
##
## name: install.sh
## author; jim teeuwen [jimteeuwen[at]gmail.com]
## version 0.1b
##
## This script checks for the presence of a number of required packages on the
## user's system. These packages are needed to make blitzmax run properly.
##
## The script supplies (un)installation schemes for various distros as well as
## any differences between 32 and 64 bit systems that may require handling.
##
###############################################################################
###############################################################################

###############################################################################
## Variables we will be needing later on:
## make sure the distro names have the same case as their corresponding
## function names. eg: ubuntu -&gt; inst_ubuntu.
## darwin = macosx, array = eeebuntu (eeepc).
## These names should be present in the output of `uname -a` and should
## be unique for the specified distribution.
DISTROS=("ubuntu" "gentoo" "redhat" "fedora" "darwin" "array");
INSTALL_BASE=
IS_64_BIT=0
DISTRO=
KERNEL=
CURR_DIR=`pwd`;
DO_INSTALL=1;

###############################################################################
## usage
usage() {
   echo "Usage: `basename $0` [OPTIONS]";
   echo "";
   echo "   -i    : Install all required packages. (This is the default mode)";
   echo "   -u    : Uninstall all required packages.";
   echo "   -h    : Display this help.";
   echo "";
}


###############################################################################
## Distro-specific (un)installation schemes.
inst_ubuntu()
{
	echo "[i] checking packages...";
	
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev";
	else
		PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev";
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		if [ $IS_64_BIT -eq 1 ]; then
			## install ia32-apt-get separately.
			## The other packages require this one to be installed and ready.
			sudo apt-get install ia32-apt-get;
		fi

		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get install $PKG_LIST;
	else
		echo "[i] uninstalling...";
		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get --purge remove $PKG_LIST;
		
		if [ $IS_64_BIT -eq 1 ]; then
			## uninstall ia32-apt-get separately.
			sudo apt-get --purge remove ia32-apt-get;
		fi
		
		## These 2 commands tell aptitude to clean up any unused packages
		## still lingering around the system. They make sure we do not leave
		## any orphaned packages behind.
		echo "[i] performing aptitude cleanup...";
		sudo apt-get autoremove;
		sudo apt-get autoclean;
	fi
	return $?;
}

inst_array()
{
	## Eeebuntu runs on the Array kernel.
	## Installation procedure is the same as for ubuntu.
	inst_ubuntu;
	return $?;
}

inst_gentoo()
{
	return $?;
}

inst_redhat()
{
	return $?;
}

inst_fedora()
{
	return $?;
}

inst_darwin() # osx
{
	return $?;
}

trap_int()
{
	echo "[i] SIGINT detected. Exiting script.";
	echo "    Note that this may leave some operations incomplete.";
	echo "    Run the script again to complete any pending operations.";
	exit 0;
}

###############################################################################
###############################################################################
## Main program

## intercept ctrl-c (SIGINT).
trap trap_int INT;

clear;
echo "Blitzmax Installation Script version 0.1b";
echo "by jim teeuwen &lt;jimteeuwen@...;";
echo "";


###############################################################################
## Check for commandline options:
while getopts iuh opt; do
	case "$opt" in
		i) DO_INSTALL=1;;
		u) DO_INSTALL=0;;
		h) usage; exit 0;;
		*?) usage; exit 1;;
	esac
done


###############################################################################
## Get base path for this script
## Assume it is the base dir for installation files.
## If it's not equal to the current dir, then change
## the current dir to the install base.
echo -n "[i] Checking install base...";
INSTALL_BASE=`dirname "$0"`;
if [ "$INSTALL_BASE" == "." ]; then
	INSTALL_BASE=`pwd`;
fi
if [ "`pwd`" != "$INSTALL_BASE" ]; then
	echo "    Entering: $INSTALL_BASE";
	cd $INSTALL_BASE;
fi
echo "             : $INSTALL_BASE";


###############################################################################
## Get architecture. 64 bit systems require some extra packages
## since blitz has no 64-bit support. We need our system to provide
## symbolic links to the 64 bit modules for us.
echo -n "[i] Checking architecture...";
IS_64_BIT=0;
if [ `uname -m` == "x86_64" ]; then
	IS_64_BIT=1;
	echo "             : 64 bit";
else
	echo "             : 32 bit";
fi


###############################################################################
## Determine the unix Distro we are using.
## 'uname -a' yields something like: #45-Ubuntu SMP Tue Jun 30 22:12:12 UTC 2009
## We will use some simple regex magic on this string to determine which distro
## we are running on. Determining the correct distro is important because most
## of them have very different package management tools available.
##
## Here are some of the outputs of uname -a on various systems:
##  - MacOSX: Darwin Kernel Version 9.7.0: Tue Mar 31 22:52:17 PDT 2009; root:xnu-1228.12.14~1/RELEASE_I386
##  - Ubuntu: Linux xxxx 2.6.28-13-generic #45-Ubuntu SMP Tue Jun 30 22:12:12 UTC 2009 x86_64 GNU/Linux
##  - Array kernel (asus eeepc): Linux xxxx 2.6.29-1-netbook #0array1 SMP Mon Feb 23 15:02:03 MST 2009 i686 GNU/Linux
##  - Gentoo: Linux livecd 2.6.24-gentoo-r5 #1 SMP Thu Jun 26 18:36:15 UTC 2008 i686 Intel(R) Core(TM)2 CPU E8400 @ 3.00GHz GenuineIntel GNU/Linux
##  
echo "[i] Checking unix distribution...";
UNAME=`uname -a`;
DISTRO=

## Traverse all distros and compare them against `uname -a`
## until we find a match (or not).
for d in ${DISTROS[@]}; do
	DISTRO=$(echo "$UNAME" | grep -ie "$d");
	if [ -n "$DISTRO" ]; then
		DISTRO=$d;
		break;
	fi
done;

###############################################################################
## Are we running on one of the supported distros?
## If not, offer the user the choice of manually selecting a known distro or quit.
if [ -z "$DISTRO" ]; then
	echo "[e] Detected an unsupported unix distribution.";
	echo "    This means we cannot povide an installation that is guaranteed to work";
	echo "    on your system. You may manually select one of the following if you are";
	echo "    sure it matches your system, or quit:";
	echo "";
	
	for (( i = 0; i &lt; ${#DISTROS[@]}; i++)); do
		d=${DISTROS[${i}]};
		echo "     [$i] $d";
	done

	echo "     -------------------";
	echo "     [q]uit";
	echo "";

	count=0; # retry 3 times.
	while [  $count -lt 3 ]; do
		read -p "    &gt; " choice;
		if [ "$choice" == "q" ]; then
			exit 0;
		fi
	
		for (( i = 0; i &lt; ${#DISTROS[@]}; i++)); do
			if [ "$i" == "$choice" ]; then
				DISTRO=${DISTROS[${i}]};
				let count=3; # skip to end of outer loop
				break;
			fi
		done
		let count=count+1;
	done

	if [ -z "$DISTRO" ]; then
		echo "[w] No valid choice was supplied. Exiting.";
		exit 1;
	else
		echo "    Using: $DISTRO";
	fi
else
	echo "    Using: $DISTRO";
fi

###############################################################################
## perform distro-specific setup.
## we simply append the distro name as defined in the array above to inst_
## This assumes the resulting function name exists. Note that this is case-
## sensitive. eg: 'ubuntu' becomes a call to function 'inst_ubuntu'.
echo "[i] Performing $DISTRO setup...";
inst_$DISTRO;


###############################################################################
## Restore the working directory we saved at the start.
echo "[i] Restoring path...";
cd "$CURR_DIR";


###############################################################################
## All done. Return control to shell with exit code of last operation.
echo "[i] Done.";
exit $?;

</textarea><br><br>I've tested it on clean installs of Ubuntu 9.04 64 bit and Eeebuntu 3 32-bit (also based on ubuntu 9.04). Installation and uninstallation worked on both without problems. <br><br></td></tr></table><br>
<a name="973657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Note that macosx is included in the list, but i'm unsure if it's possible to install all the osx requirements (xcode?) through a shell script. Some input from a mac user could help here. <br></div><br>Yes, forget about Mac OS X Jim, xcode takes care of all BMax dependencies. <br><br></td></tr></table><br>
<a name="973918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright. I tossed out the identification of individual distros because there is no sensible standardized way to do it across different linux versions. <br><br>The script now simply checks for the presence of any of the supported package managers (aptitude, emerge, yum, etc) and performs installs based on these. This is proving a lot easier and it doesn't matter which distro we are running on.<br><br>version 0.2b:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#!/bin/bash

###############################################################################
###############################################################################
##
## name: install.sh
## author; jim teeuwen [jimteeuwen[at]gmail.com]
## version 0.2b
##
## This script ensures the presence of a number of required packages on the
## user's system. These packages are needed to make blitzmax run properly.
##
## The script supplies (un)installation schemes for various package managers
## as well as any differences between 32 and 64 bit systems that may require
## handling.
##
###############################################################################
###############################################################################

###############################################################################
## Variables we will be needing later on:
PKGMGRS=("aptitude" "emerge" "yum" "urpmi" "pacman");
PKGMGR=
IS_64_BIT=0
DO_INSTALL=1;

###############################################################################
## usage
usage() {
   echo "Usage: `basename $0` [OPTIONS]";
   echo "";
   echo "   -i    : Install all required packages. (This is the default mode)";
   echo "   -u    : Uninstall all required packages.";
   echo "   -h    : Display this help.";
   echo "";
}


###############################################################################
## Package Manager-specific (un)installation schemes.
inst_aptitude()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev";
	else
		PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev";
	fi
	echo "   $PKG_LIST";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		if [ $IS_64_BIT -eq 1 ]; then
			## install ia32-apt-get separately.
			## The other packages require this one to be installed and ready.
			sudo apt-get install ia32-apt-get;
		fi

		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get install $PKG_LIST;
	else
		echo "[i] uninstalling...";
		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get --purge remove $PKG_LIST;
		
		if [ $IS_64_BIT -eq 1 ]; then
			## uninstall ia32-apt-get separately.
			sudo apt-get --purge remove ia32-apt-get;
		fi
		
		## These 2 commands tell aptitude to clean up any unused packages
		## still lingering around the system. They make sure we do not leave
		## any orphaned packages behind.
		echo "[i] performing aptitude cleanup...";
		sudo apt-get autoremove;
		sudo apt-get autoclean;
	fi
	return $?;
}

inst_emerge()
{
	return $?;
}

inst_yum()
{
	return $?;
}

inst_urpmi()
{
	return $?;
}

inst_pacman()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST="...?";
	else
		PKG_LIST="...?";
	fi
	echo "   $PKG_LIST";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		sudo pacman -S $PKG_LIST;
	else
		echo "[i] uninstalling...";
		sudo pacman -Rsn $PKG_LIST;
	fi
	return $?;
}

trap_int()
{
	echo "[i] SIGINT detected. Exiting script.";
	echo "    Note that this may leave some operations incomplete.";
	echo "    Run the script again to complete any pending operations.";
	exit 0;
}

###############################################################################
###############################################################################
## Main program

## intercept ctrl-c (SIGINT).
trap trap_int INT;

clear;
echo "Blitzmax Installation Script version 0.2b";
echo "by jim teeuwen &lt;jimteeuwen@...;";
echo "";


###############################################################################
## Check for commandline options:
while getopts iuh opt; do
	case "$opt" in
		i) DO_INSTALL=1;;
		u) DO_INSTALL=0;;
		h) usage; exit 0;;
		*?) usage; exit 1;;
	esac
done


###############################################################################
## Get architecture. 64 bit systems require some extra packages
## since blitz has no 64-bit support. We need our system to provide
## symbolic links to the 64 bit modules for us.
echo "[i] Checking architecture...";
IS_64_BIT=0;
if [ `uname -m` == "x86_64" ]; then
	IS_64_BIT=1;
	echo "    found: 64 bit";
else
	echo "    found: 32 bit";
fi


###############################################################################
## Determine the package manager we have available.
echo "[i] identifying package manager...";
for pm in ${PKGMGRS[@]}; do
	PKGMGR=$(which $pm);
	if [ -n "$PKGMGR" ]; then
		PKGMGR=$pm;
		echo "    found: $pm";
		break;
	fi
done

if [ -z "$PKGMGR" ]; then
	echo "[e] Unable to find a supported package manager.";
	echo -n "    Supported are: ";
	
	for pm in ${PKGMGRS[@]}; do
		echo -n "$pm, ";
	done
	echo "";
	exit 2;
fi


###############################################################################
## perform package manager-specific setup.
## we simply append the manager name as defined in the array above to inst_
## This assumes the resulting function name exists. Note that this is case-
## sensitive. eg: 'aptitude' becomes a call to function 'inst_aptitude'.
echo "[i] Performing $PKGMGR setup...";
inst_$PKGMGR;


###############################################################################
## All done. Return control to shell with exit code of last operation.
echo "[i] Done.";
exit $?;

</textarea> <br><br></td></tr></table><br>
<a name="973956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> This will make it easier for the whole blitzmax experience :) <br><br></td></tr></table><br>
<a name="973963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work<br><br>It still bewilders me that there is no package creator out there that creates install packages for all Linux distributions... I`m sure there would be a market for it.<br><br>cheers. <br><br></td></tr></table><br>
<a name="974253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> interesting, does it support 'pacman' (from arch linux) and puppy linux? <br><br></td></tr></table><br>
<a name="974266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not yet. I have no experience with any package managers besides debian's aptitude. It's easily added though.<br><br>If you can supply a version of the following function, but which uses your prefered package manager, I'll add it to the script.<br><br><pre class=code>
inst_pacman()
{
	## add pacman code here
}

# This is the working version for aptitude:
inst_aptitude()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev";
	else
		PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev";
	fi
	echo "   $PKG_LIST";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		if [ $IS_64_BIT -eq 1 ]; then
			## install ia32-apt-get separately.
			## The other packages require this one to be installed and ready.
			sudo apt-get install ia32-apt-get;
		fi

		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get install $PKG_LIST;
	else
		echo "[i] uninstalling...";
		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get --purge remove $PKG_LIST;
		
		if [ $IS_64_BIT -eq 1 ]; then
			## uninstall ia32-apt-get separately.
			sudo apt-get --purge remove ia32-apt-get;
		fi
		
		## These 2 commands tell aptitude to clean up any unused packages
		## still lingering around the system. They make sure we do not leave
		## any orphaned packages behind.
		echo "[i] performing aptitude cleanup...";
		sudo apt-get autoremove;
		sudo apt-get autoclean;
	fi
	return $?;
}
</pre><br><br>The above will also go for Gentoo's 'emerge' and redhat's 'yum'. If anybody has experience with those, by all means come forth.<br><br>Also, this script will probably better come to it's right in the Linux forum instead of here in the Devteam forum. it really is more of a community responsibility than BRL's. When it is complete, they can always decide to include it in linux packages of blitz. I think it's best we move this discussion to the Linux forum. Considering the EULA in this forum though, I am not sure if Mark will allow it. <br><br></td></tr></table><br>
<a name="974328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> its just pacman -S <br>instead of sudo apt-get install<br><br>I dont know enough about pacman to make a script but I dont really need it. Begginer users are probably going to be using Ubuntu anyway. <br><br></td></tr></table><br>
<a name="974346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, but are the package names the same? for Gentoo for instance, the packages listed in the inst_aptitude bit do not work. <br><br></td></tr></table><br>
<a name="974899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>This is a Linux packaging discussion from the DevTeam forum that really belongs in public.<br><br>For my part, my main concern is that Linux BlitzMax can somehow install dependent packages - hence the initial excitement over an rpm package.<br><br>However, if this can also be accomplished in a more distro neutral way via a script, then even better. <br><br></td></tr></table><br>
<a name="974904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> What you might be able to do is just write a script that checks for the existence of certain package managers (e.g., apt, emerge, rpm, etc.) and use one of those available to install dependencies.  This would probably require a user's authentication in most cases (e.g., apt needs to be run through sudo - not sure about emerge and rpm, I expect there should be some way to install some things into a home directory though).  It would probably have to be a simple script just to allay any fears of the script doing something malicious (since reading a simple script makes it fairly easy to determine whether or not something bad will happen out of view), for those people paranoid about running it. <br><br></td></tr></table><br>
<a name="974905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's exactly what my script does, nillium. But as stated, the names of the packages differ per package manager, so I need to get that cleared up first. The Debian/Aptitude bit is working though.<br><br>The issue is mostly that I am only on Ubuntu most of the day, which means i'm stuck with Aptitude. I have run a few other linuxes throogh VirtualBox, to see how their package stuff works. But tbh having to learn a new distro + trying to figure out what packages blitz needs there is just a little too much for my taste. Specially since we already have many people using all those different distros.<br><br><br>edit: Updated the script in my previous post. I added stubs for 2 more package managers (urpmi and pacman). <br><br></td></tr></table><br>
<a name="975020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Version 0.3b.<br><br>- More robust package manager checking.<br>- I researched the command line options used by all the supported package managers and added their respective implementations to the function stubs.<br><br><b>The only thing that is missing now is the actual names of the packages needed for each package manager</b> (Except for Aptitude).<br><br>I still need these for the following package managers: rpm, emerge, pacman,yum.<br>Once i have these, the script should be done. It currently supports the following package managers: <b>aptitude, emerge, yum, rpm, pacman</b>.<br><br>This makes the script usable for (at least) the following Linux distributions:<br>- Debian + forks (including: ubuntu + forks, backtrack 4, Knoppix + forks).<br>- Gentoo + forks<br>- Redhat + forks (including: Mandriva)<br>- SuSE Linux + forks<br>- Fedora Core + forks<br>- Arch linux<br>- Puppy Linux<br><br>For a complete list of linux distros using the supported package managers, see: <a href="http://en.wikipedia.org/wiki/List_of_Linux_distributions" target="_blank">http://en.wikipedia.org/wiki/List_of_Linux_distributions</a><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#!/bin/bash

###############################################################################
###############################################################################
##
## name: install.sh
## author; jim teeuwen [jimteeuwen[at]gmail.com]
## version 0.3b
##
## This script ensures the presence of a number of required packages on the
## user's system. These packages are needed to make blitzmax run properly.
##
## The script supplies (un)installation schemes for various package managers
## as well as any differences between 32 and 64 bit systems that may require
## handling.
##
###############################################################################
###############################################################################

###############################################################################
## Variables we will be needing later on:
PKGMGRS=("aptitude" "emerge" "yum" "rpm" "pacman");
PKGMGR=
IS_64_BIT=0
DO_INSTALL=1;

###############################################################################
## usage
usage() {
   echo "Usage: `basename $0` [OPTIONS]";
   echo "";
   echo "   -i    : Install all required packages. (This is the default mode)";
   echo "   -u    : Uninstall all required packages.";
   echo "   -h    : Display this help.";
   echo "";
}


###############################################################################
## Package Manager-specific (un)installation schemes.
inst_aptitude()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev";
	else
		PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev";
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		if [ $IS_64_BIT -eq 1 ]; then
			## install ia32-apt-get separately.
			## The other packages require this one to be installed and ready.
			## 'ia32-apt-get' serves as a 32 bit compatibility tool. It creates
			## links to 64 bit versions of the selected packages.
			sudo apt-get install ia32-apt-get;
		fi

		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get install $PKG_LIST;
	else
		echo "[i] uninstalling...";
		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get --purge remove $PKG_LIST;
		
		if [ $IS_64_BIT -eq 1 ]; then
			## uninstall ia32-apt-get separately.
			sudo apt-get --purge remove ia32-apt-get;
		fi
		
		## These 2 commands tell aptitude to clean up any unused packages
		## still lingering around the system. They make sure we do not leave
		## any orphaned packages behind. These orphans serve no purpose and
		## simply waste space.
		echo "[i] performing aptitude cleanup...";
		sudo apt-get autoremove;
		sudo apt-get autoclean;
	fi
	return $?;
}

inst_emerge()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST=; # todo
	else
		PKG_LIST=; # todo
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		for pm in $PKG_LIST; do
			sudo emerge $pm;
		done
		unset pm;
	else
		echo "[i] uninstalling...";
		for pm in $PKG_LIST; do
			sudo emerge –unmerge $pm;
		done
		unset pm;
	fi
	return $?;
}

inst_yum()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST=; # todo
	else
		PKG_LIST=; # todo
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		sudo yum install $PKG_LIST;
	else
		echo "[i] uninstalling...";
		sudo yum remove $PKG_LIST;

		echo "[i] performing yum cleanup...";
		sudo yum clean all;
	fi
	return $?;
}

inst_rpm()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST=; # todo
	else
		PKG_LIST=; # todo
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		sudo rpm -i $PKG_LIST;
	else
		echo "[i] uninstalling...";
		sudo rpm -e $PKG_LIST;
	fi
	return $?;
}

inst_pacman()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST=""; # todo
	else
		PKG_LIST=""; # todo
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		sudo pacman -S $PKG_LIST;
	else
		echo "[i] uninstalling...";
		sudo pacman -Rsn $PKG_LIST;
	fi
	return $?;
}

trap_int()
{
	echo "[i] SIGINT detected. Exiting script.";
	echo "    Note that this may leave some operations incomplete.";
	echo "    Run the script again to complete any pending operations.";
	exit 0;
}

###############################################################################
###############################################################################
## Main program

## intercept ctrl-c (SIGINT).
trap trap_int INT;

clear;
echo "Blitzmax Installation Script version 0.3b";
echo "Please report bugs or suggestions to: Jim Teeuwen &lt;jimteeuwen@...;";
echo "";


###############################################################################
## Check for commandline options:
while getopts iuh opt; do
	case "$opt" in
		i) DO_INSTALL=1;;
		u) DO_INSTALL=0;;
		h) usage; exit 0;;
		*?) usage; exit 1;;
	esac
done
unset opt;


###############################################################################
## Get architecture. 64 bit systems require some extra packages
## since blitz has no 64-bit support. We need our system to provide
## symbolic links to the 64 bit modules for us.
echo "[i] Checking architecture...";
IS_64_BIT=0;
if [ `uname -m` == "x86_64" ]; then
	IS_64_BIT=1;
	echo "    found: 64 bit";
else
	echo "    found: 32 bit";
fi


###############################################################################
## Determine the package manager we have available.
echo "[i] identifying package manager...";
PKGMGR=;
for pm in ${PKGMGRS[@]}; do
	if [ ! type $pm &gt;/dev/null 2&gt;&amp;1 ]; then
		continue;
	fi
	
	PKGMGR=$pm;
	echo "    found: $pm";
	break;
done
unset pm;

if [ -z "$PKGMGR" ]; then
	echo "[e] Unable to find a supported package manager.";
	echo "    Supported are: ${PKGMGRS[@]}";
	exit 2;
fi


###############################################################################
## perform package manager-specific setup.
## we simply append the manager name as defined in the array above to 'inst_'.
## This assumes the resulting function name exists. Note that this is case-
## sensitive. eg: 'aptitude' becomes a call to function 'inst_aptitude'.
echo "[i] Performing $PKGMGR setup...";
inst_$PKGMGR;


###############################################################################
## All done. Return control to shell with exit code of last operation.
echo "[i] Done.";
exit $?;
</textarea> <br><br></td></tr></table><br>
<a name="976313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> For yum in Fedora 11 use.<br><br><b>su -c 'yum install gcc-c++ libX11-devel mesa-libGLU-devel libXft-devel libXpm-devel'</b><br><br>See <a href="/posts.php?topic=50933#976310" target="_blank">here</a>. <br><br></td></tr></table><br>
<a name="976691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> For urpmi in Mandriva 2009 use.<br><br><b>urpmi gcc-c++ libx11_6-devel libmesaglu1-devel libxft-devel libxpm-devel</b><br><br>See <a href="/posts.php?topic=84549#976689" target="_blank">here</a>. <br><br></td></tr></table><br>
<a name="976712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent! I'll add it asap.<br><br>edit: Here we go. Version 0.4b.<br>- Still missing are the package listings for emerge and pacman.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#!/bin/bash

###############################################################################
###############################################################################
##
## name: install.sh
## author; jim teeuwen [jimteeuwen[at]gmail.com]
## version 0.4b
##
## This script ensures the presence of a number of required packages on the
## user's system. These packages are needed to make blitzmax run properly.
##
## The script supplies (un)installation schemes for various package managers
## as well as any differences between 32 and 64 bit systems that may require
## handling.
##
###############################################################################
###############################################################################

###############################################################################
## Variables we will be needing later on:
PKGMGRS=("aptitude" "emerge" "yum" "urpmi" "pacman");
PKGMGR=
IS_64_BIT=0
DO_INSTALL=1;

###############################################################################
## usage
usage() {
   echo "Usage: `basename $0` [OPTIONS]";
   echo "";
   echo "   -i    : Install all required packages. (This is the default mode)";
   echo "   -u    : Uninstall all required packages.";
   echo "   -h    : Display this help.";
   echo "";
}


###############################################################################
## Package Manager-specific (un)installation schemes.
inst_aptitude()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev";
	else
		PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev";
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		if [ $IS_64_BIT -eq 1 ]; then
			## install ia32-apt-get separately.
			## The other packages require this one to be installed and ready.
			## 'ia32-apt-get' serves as a 32 bit compatibility tool. It creates
			## links to 64 bit versions of the selected packages.
			sudo apt-get install ia32-apt-get;
		fi

		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get install $PKG_LIST;
	else
		echo "[i] uninstalling...";
		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get --purge remove $PKG_LIST;
		
		if [ $IS_64_BIT -eq 1 ]; then
			## uninstall ia32-apt-get separately.
			sudo apt-get --purge remove ia32-apt-get;
		fi
		
		## These 2 commands tell aptitude to clean up any unused packages
		## still lingering around the system. They make sure we do not leave
		## any orphaned packages behind. These orphans serve no purpose and
		## simply waste space.
		echo "[i] performing aptitude cleanup...";
		sudo apt-get autoremove;
		sudo apt-get autoclean;
	fi
	return $?;
}

inst_emerge()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST=; # todo
	else
		PKG_LIST=; # todo
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		for pm in $PKG_LIST; do
			sudo emerge $pm;
		done
		unset pm;
	else
		echo "[i] uninstalling...";
		for pm in $PKG_LIST; do
			sudo emerge –unmerge $pm;
		done
		unset pm;
	fi
	return $?;
}

inst_yum()
{
	echo "[i] building package list...";
	PKG_LIST="gcc-c++ lurpmiibX11-devel mesa-libGLU-devel libXft-devel libXpm-devel";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		su -c "yum install $PKG_LIST";
	else
		echo "[i] uninstalling...";
		su -c "yum remove $PKG_LIST";

		echo "[i] performing yum cleanup...";
		su -c "yum clean all";
	fi
	return $?;
}

inst_urpmi()
{
	echo "[i] building package list...";
	PKG_LIST="gcc-c++ libx11_6-devel libmesaglu1-devel libxft-devel libxpm-devel";
 
	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		sudo urpmi -Uvh $PKG_LIST;
	else
		echo "[i] uninstalling...";
		sudo urpmi -e $PKG_LIST;
	fi
	return $?;
}

inst_pacman()
{
	echo "[i] building package list...";
	PKG_LIST=; # todo

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		sudo pacman -S $PKG_LIST;
	else
		echo "[i] uninstalling...";
		sudo pacman -Rsn $PKG_LIST;
	fi
	return $?;
}

trap_int()
{
	echo "[i] SIGINT detected. Exiting script.";
	echo "    Note that this may leave some operations incomplete.";
	echo "    Run the script again to complete any pending operations.";
	exit 0;
}

###############################################################################
###############################################################################
## Main program

## intercept ctrl-c (SIGINT).
trap trap_int INT;

clear;
echo "Blitzmax Installation Script version 0.4b";
echo "Please report bugs or suggestions to: jimteeuwen[at]gmail.com";
echo "";


###############################################################################
## Check for commandline options:
while getopts iuh opt; do
	case "$opt" in
		i) DO_INSTALL=1;;
		u) DO_INSTALL=0;;
		h) usage; exit 0;;
		*?) usage; exit 1;;
	esac
done
unset opt;


###############################################################################
## Get architecture. 64 bit systems require some extra packages
## since blitz has no 64-bit support. We need our system to provide
## symbolic links to the 64 bit modules for us.
echo "[i] Checking architecture...";
IS_64_BIT=0;
if [ `uname -m` == "x86_64" ]; then
	IS_64_BIT=1;
	echo "    found: 64 bit";
else
	echo "    found: 32 bit";
fi


###############################################################################
## Determine the package manager we have available.
echo "[i] identifying package manager...";
PKGMGR=;
for pm in ${PKGMGRS[@]}; do
	if [ ! -f "`which $pm`" ]; then
		continue;
	fi
	
	PKGMGR=$pm;
	echo "    found: $pm";
	break;
done
unset pm;

if [ -z "$PKGMGR" ]; then
	echo "[e] Unable to find a supported package manager.";
	echo "    Supported are: ${PKGMGRS[@]}";
	exit 2;
fi


###############################################################################
## perform package manager-specific setup.
## we simply append the manager name as defined in the array above to 'inst_'.
## This assumes the resulting function name exists. Note that this is case-
## sensitive. eg: 'aptitude' becomes a call to function 'inst_aptitude'.
echo "[i] Performing $PKGMGR setup...";
inst_$PKGMGR;


###############################################################################
## All done. Return control to shell with exit code of last operation.
echo "[i] Done.";
exit $?;
</textarea> <br><br></td></tr></table><br>
<a name="977176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Jim, I assume people wanting to distribute binaries of their blitzmax games could use a stripped down version of this approach? <br><br></td></tr></table><br>
<a name="977179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is strictly for getting blitzmax itself running, but if your app requires some packages to work on linux, then yes, you can use this script to do the same thing. Just make sure you have the required package names for each supported package manager.<br><br>Note that the packages my script above installs are the development versions. You do not need those to make a compiled game binary work.<br><br>edit: If the user has proper display drivers installed for their gfx card and sound support working in their Linux install, then chances are their dependencies will have been met sufficiently for your game to run.<br>Still, it couldn't hurt to have a script make sure and make suggestions accordingly before the game starts/is installed. <br><br></td></tr></table><br>
<a name="977272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just tested the script again on a fresh 64-bit install of a Ubuntu fork (CrunchBang) and I thought I'd try it without the ia32-apt-get package because it has a tendency to mess up my repository listings and system updates (ia32 breaks aptitude updates on vanilla ubuntu and all forks).<br><br>The install went fine and blitzmax runs without any problems. Compiling my apps works as well as building modules. So I am not really sure why the requirement for ia32-apt-get is in there. I am releasing a new version of the install script which has this dependency commented out. I would leave it in, but the fact that the ia32 support really screws with the package manager's functioning on all 64-bit Debian systems makes me believe we are better off without it.<br><br>Unless, of course, someone can convince me of it's absolute necessity.<br><br>version 0.5b<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#!/bin/bash

###############################################################################
###############################################################################
##
## name: install.sh
## author; jim teeuwen [jimteeuwen[at]gmail.com]
## version 0.5b
##
## This script ensures the presence of a number of required packages on the
## user's system. These packages are needed to make blitzmax run properly.
##
## The script supplies (un)installation schemes for various package managers
## as well as any differences between 32 and 64 bit systems that may require
## handling.
##
## Version history:
##   [0.5b] August 6, 2009:
##      - Removed support for ia32-apt-get in the inst_aptitude function.
##        Apparently this is no longer required to make blitzmax work. It
##        also has a tendency to cause problems with standard package
##        management on a 64-bit system.. (it breaks "apt-get update" with
##        an assertion failure).
##
###############################################################################
###############################################################################

###############################################################################
## Variables we will be needing later on:
PKGMGRS=("aptitude" "emerge" "yum" "urpmi" "pacman");
PKGMGR=
IS_64_BIT=0
DO_INSTALL=1;

###############################################################################
## usage
usage() {
   echo "Usage: `basename $0` [OPTIONS]";
   echo "";
   echo "   -i    : Install all required packages. (This is the default mode)";
   echo "   -u    : Uninstall all required packages.";
   echo "   -h    : Display this help.";
   echo "";
}


###############################################################################
## Package Manager-specific (un)installation schemes.
inst_aptitude()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev";
	else
		PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev";
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
#		if [ $IS_64_BIT -eq 1 ]; then
#			## install ia32-apt-get separately.
#			## The other packages require this one to be installed and ready.
#			## 'ia32-apt-get' serves as a 32 bit compatibility tool. It creates
#			## links to 64 bit versions of the selected packages.
#			sudo apt-get install ia32-apt-get;
#		fi

		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get install $PKG_LIST;
	else
		echo "[i] uninstalling...";
		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get --purge remove $PKG_LIST;

#		if [ $IS_64_BIT -eq 1 ]; then
#			## uninstall ia32-apt-get separately.
#			sudo apt-get --purge remove ia32-apt-get;
#		fi
		
		## These 2 commands tell aptitude to clean up any unused packages
		## still lingering around the system. They make sure we do not leave
		## any orphaned packages behind. These orphans serve no purpose and
		## simply waste space.
		echo "[i] performing aptitude cleanup...";
		sudo apt-get autoremove;
		sudo apt-get autoclean;
	fi
	return $?;
}

inst_emerge()
{
	echo "[i] building package list...";
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST=; # todo
	else
		PKG_LIST=; # todo
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		for pm in $PKG_LIST; do
			sudo emerge $pm;
		done
		unset pm;
	else
		echo "[i] uninstalling...";
		for pm in $PKG_LIST; do
			sudo emerge –unmerge $pm;
		done
		unset pm;
	fi
	return $?;
}

inst_yum()
{
	echo "[i] building package list...";
	PKG_LIST="gcc-c++ lurpmiibX11-devel mesa-libGLU-devel libXft-devel libXpm-devel";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		su -c "yum install $PKG_LIST";
	else
		echo "[i] uninstalling...";
		su -c "yum remove $PKG_LIST";

		echo "[i] performing yum cleanup...";
		su -c "yum clean all";
	fi
	return $?;
}

inst_urpmi()
{
	echo "[i] building package list...";
	PKG_LIST="gcc-c++ libx11_6-devel libmesaglu1-devel libxft-devel libxpm-devel";
 
	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		sudo urpmi -Uvh $PKG_LIST;
	else
		echo "[i] uninstalling...";
		sudo urpmi -e $PKG_LIST;
	fi
	return $?;
}

inst_pacman()
{
	echo "[i] building package list...";
	PKG_LIST=""; # todo

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] installing...";
		sudo pacman -S $PKG_LIST;
	else
		echo "[i] uninstalling...";
		sudo pacman -Rsn $PKG_LIST;
	fi
	return $?;
}

trap_int()
{
	echo "[i] SIGINT detected. Exiting script.";
	echo "    Note that this may leave some operations incomplete.";
	echo "    Run the script again to complete any pending operations.";
	exit 0;
}

###############################################################################
###############################################################################
## Main program

## intercept ctrl-c (SIGINT).
trap trap_int INT;

clear;
echo "Blitzmax Installation Script version 0.5b";
echo "Please report bugs or suggestions to: jimteeuwen[at]gmail.com";
echo "";


###############################################################################
## Check for commandline options:
while getopts iuh opt; do
	case "$opt" in
		i) DO_INSTALL=1;;
		u) DO_INSTALL=0;;
		h) usage; exit 0;;
		*?) usage; exit 1;;
	esac
done
unset opt;


###############################################################################
## Get architecture. 64 bit systems require some extra packages
## since blitz has no 64-bit support. We need our system to provide
## symbolic links to the 64 bit modules for us.
echo "[i] Checking architecture...";
IS_64_BIT=0;
if [ `uname -m` == "x86_64" ]; then
	IS_64_BIT=1;
	echo "    found: 64 bit";
else
	echo "    found: 32 bit";
fi


###############################################################################
## Determine the package manager we have available.
echo "[i] identifying package manager...";
PKGMGR=;
for pm in ${PKGMGRS[@]}; do
	if [ ! -f "`which $pm`" ]; then
		continue;
	fi
	
	PKGMGR=$pm;
	echo "    found: $pm";
	break;
done
unset pm;

if [ -z "$PKGMGR" ]; then
	echo "[e] Unable to find a supported package manager.";
	echo "    Supported are: ${PKGMGRS[@]}";
	exit 2;
fi


###############################################################################
## perform package manager-specific setup.
## we simply append the manager name as defined in the array above to 'inst_'.
## This assumes the resulting function name exists. Note that this is case-
## sensitive. eg: 'aptitude' becomes a call to function 'inst_aptitude'.
echo "[i] Performing $PKGMGR setup...";
inst_$PKGMGR;


###############################################################################
## All done. Return control to shell with exit code of last operation.
echo "[i] Done.";
exit $?;
</textarea> <br><br></td></tr></table><br>
<a name="977989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have tried to join the "dev", but  I get no response to my emails, so I will post here.<br><br>Mark:  What about using BitRock InstallBuilder?<br><br><div class="quote"> BitRock InstallBuilder is a development tool for building crossplatform installers for desktop and server software. With InstallBuilder, you can quickly create professional installers for Linux, Windows, Mac OS X, Solaris and other platforms from a single project file and build environment. In addition to installers, InstallBuilder will generate RPM and Debian packages and multiplatform CDs/DVDs. Its new automatic update functionality makes it easy to deliver updates directly to your users once they have your software installed. <br></div><br><br><a href="http://installbuilder.bitrock.com/index.html" target="_blank">http://installbuilder.bitrock.com/index.html</a> <br><br></td></tr></table><br>
<a name="977999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> For emerge in Sabayon 4.2 use.<br><br><b>sudo emerge -a libstdc++-v3 libX11 mesa-progs libXft libXpm</b><br><br>See <a href="/posts.php?topic=86290" target="_blank">here</a>.<br><br>Also, I have updated your install script Jim T. I fixed a few mistakes and added new code to deal with su. This should be bug-free.<br><br>Updated on 9-8-09.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#!/bin/bash

###############################################################################
###############################################################################
##
## name: install.sh
## author; jim teeuwen [jimteeuwen[at]gmail.com]
##         mark mcvittie [markcwmcvittie[at]yahoo.co.uk]
## version 0.6b
##
## This script ensures the presence of a number of required packages on the
## user's system. These packages are needed to make blitzmax run properly.
##
## The script supplies (un)installation schemes for various package managers
## as well as any differences between 32 and 64 bit systems that may require
## handling.
##
## Version history:
##   [0.6b] August 9, 2009: [markcw]
##      - Fixed some mistakes in inst_emerge, inst_yum and inst_urpmi.
##      - Added a check for root login.
##   [0.5b] August 6, 2009:
##      - Removed support for ia32-apt-get in the inst_aptitude function.
##        Apparently this is no longer required to make blitzmax work as well
##        it causing problems with standard package management on a 64-bit
##        system.
##   
###############################################################################
###############################################################################

###############################################################################
## Variables we will be needing later on:
PKGMGRS=("aptitude" "emerge" "yum" "urpmi" "pacman");
PKGMGR=
IS_64_BIT=0
DO_INSTALL=1;

###############################################################################
## usage
usage() {
   echo "Usage: `basename $0` [OPTIONS]";
   echo "";
   echo "   -i    : Install all required packages. (This is the default mode)";
   echo "   -u    : Uninstall all required packages.";
   echo "   -h    : Display this help.";
   echo "";
}


###############################################################################
## Package Manager-specific (un)installation schemes.
inst_aptitude()
{
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev";
	else
		PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev";
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
#		if [ $IS_64_BIT -eq 1 ]; then
#			## install ia32-apt-get separately.
#			## The other packages require this one to be installed and ready.
#			## 'ia32-apt-get' serves as a 32 bit compatibility tool. It creates
#			## links to 64 bit versions of the selected packages.
#			sudo apt-get install ia32-apt-get;
#		fi

		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get install $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get --purge remove $PKG_LIST;
		
#		if [ $IS_64_BIT -eq 1 ]; then
#			## uninstall ia32-apt-get separately.
#			sudo apt-get --purge remove ia32-apt-get;
#		fi
		
		## These 2 commands tell aptitude to clean up any unused packages
		## still lingering around the system. They make sure we do not leave
		## any orphaned packages behind. These orphans serve no purpose and
		## simply waste space.
		echo "[i] Performing aptitude cleanup...";
		sudo apt-get autoremove;
		sudo apt-get autoclean;
	fi
	return $?;
}

inst_emerge()
{
	PKG_LIST="libX11 mesa-progs libXft libXpm";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		sudo emerge -a $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		sudo emerge -a --unmerge $PKG_LIST;
	fi
	return $?;
}

inst_yum()
{
	PKG_LIST="gcc-c++ libX11-devel mesa-libGLU-devel libXft-devel libXpm-devel";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		yum install $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		yum remove $PKG_LIST;

		echo "[i] Performing yum cleanup...";
		yum clean all;
	fi
	return $?;
}

inst_urpmi()
{
	PKG_LIST="gcc-c++ libx11_6-devel libmesaglu1-devel libxft-devel libxpm-devel";
 
	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		urpmi $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		urpme $PKG_LIST;
	fi
	return $?;
}

inst_pacman()
{
	PKG_LIST=""; # todo

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		sudo pacman -S $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		sudo pacman -Rsn $PKG_LIST;
	fi
	return $?;
}

trap_int()
{
	echo "[i] SIGINT detected. Exiting script.";
	echo "    Note that this may leave some operations incomplete.";
	echo "    Run the script again to complete any pending operations.";
	exit 0;
}

###############################################################################
###############################################################################
## Main program

## intercept ctrl-c (SIGINT).
trap trap_int INT;

clear;
echo "Blitzmax Installation Script version 0.6b";
echo "Please report bugs or suggestions to: jimteeuwen[at]gmail.com";
echo "";


###############################################################################
## Check for commandline options:
while getopts iuh opt; do
	case "$opt" in
		i) DO_INSTALL=1;;
		u) DO_INSTALL=0;;
		h) usage; exit 0;;
		*?) usage; exit 1;;
	esac
done
unset opt;


###############################################################################
## Get architecture. 64 bit systems require some extra packages
## since blitz has no 64-bit support. We need our system to provide
## symbolic links to the 64 bit modules for us.
echo "[i] Checking architecture...";
IS_64_BIT=0;
if [ `uname -m` == "x86_64" ]; then
	IS_64_BIT=1;
	echo "    found: 64 bit";
else
	echo "    found: 32 bit";
fi


###############################################################################
## Determine the package manager we have available.
echo "[i] Identifying package manager...";
PKGMGR="";
for pm in ${PKGMGRS[@]}; do
	if [ ! -f "`which $pm`" ]; then
		continue;
	fi
	
	PKGMGR=$pm;
	echo "    found: $pm";
	break;
done
unset pm;

if [ -z "$PKGMGR" ]; then
	echo "[e] Unable to find a package manager.";
	echo "    Supported are: ${PKGMGRS[@]}";
fi

###############################################################################
## Check if root login is needed.
## Some distros use su and others use sudo.
## I am assuming distros using the same package manager use the same su/sudo syntax.
if [ `whoami` = "root" ]; then
	echo "[i] Logged in as root user.";
elif [ "$PKGMGR" = "yum" ]; then ## force root login
	PKGMGR="";
elif [ "$PKGMGR" = "urpmi" ]; then
	PKGMGR="";
fi

if [ -z "$PKGMGR" ]; then ## no package manager or need root login
	echo "[i] Login as root and then re-run this script.";
	su;
fi

###############################################################################
## perform package manager-specific setup.
## we simply append the manager name as defined in the array above to 'inst_'.
## This assumes the resulting function name exists. Note that this is case-
## sensitive. eg: 'aptitude' becomes a call to function 'inst_aptitude'.
echo "[i] Performing $PKGMGR setup...";
echo "[i] Building package list...";
inst_$PKGMGR;


###############################################################################
## All done. Return control to shell with exit code of last operation.
echo "[i] Done.";
exit $?;</textarea> <br><br></td></tr></table><br>
<a name="978011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool. nice job!<br><br>Could you modify the 'version history' bit in the header to list your changes please? Will make it a bit easier to track what's going on :)<br>I also think it's fair you add yourself to the 'author' bit :p<br><br>We're getting there! Script is almost done.<br><br>I did notice a possible improvement in the root checking code. I don't think we need the script to be restarted once the 'su' command is issued. This means we don't have to unset the $PKGMGR varianle either.<br><br><pre class=code>
...
if [ -z "$PKGMGR" ]; then
	echo "[e] Unable to find a package manager.";
	echo "    Supported are: ${PKGMGRS[@]}";
	exit 1;
fi

###############################################################################
## Check if root login is needed. Some distros use su and others use sudo.
## I am assuming distros using the same package manager use the same su/sudo syntax.
if [ `whoami` == "root" ]; then
	echo "[i] Logged in as root user.";
elif [ "$PKGMGR" == "yum" ] || [ "$PKGMGR" == "urpmi" ]; then
	echo "[i] Root access is required for $PKGMGR...";
	su;
fi
...
</pre><br><br>Once su has been issued and the user logs in, the script should be fine just continuing to the actual function call to inst_yum or inst_urpmi.<br><br>I am assuming that it is irrelevant with which user the script was started. This may be a wrong assumption on my part though, in which case, just ignore me :) <br><br></td></tr></table><br>
<a name="978094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Could you modify the 'version history' bit in the header to list your changes please? Will make it a bit easier to track what's going on :) I also think it's fair you add yourself to the 'author' bit :p <br></div><br>Done. :)<br><br><div class="quote"> I did notice a possible improvement in the root checking code. I don't think we need the script to be restarted once the 'su' command is issued. This means we don't have to unset the $PKGMGR varianle either. <br></div><br>Well I've removed the line exit 0; after su; now because it was confusing things. You see su ends the script anyway and although there is a way around this it looked complicated so I just decided to go with the simple option of getting people to re-run the script.<br><br>Also, the reason I unset the pkgmgr var is because in Mandriva urpmi isn't actually found until you've logged in as root, so to keep consistency and since su was exiting anyway I just used unsetting the pkgmgr var as a root login flag. Hope that makes sense. <br><br></td></tr></table><br>
<a name="978108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup, it does. Thanks for clarifying :) <br><br></td></tr></table><br>
<a name="978738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="979145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've added support for zypper in openSUSE to the script now, see <a href="/posts.php?topic=86370" target="_blank">here</a>. This is version 0.7b, I'll update this post when/if I get pacman done.<br><br>Edit: added pacman packages, 16 Aug. See <a href="/posts.php?topic=85879#979435" target="_blank">here</a>.<br>Edit: added a bit to the root login code. That should be all from me now.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#!/bin/bash

###############################################################################
###############################################################################
##
## name: install.sh
## author; jim teeuwen [jimteeuwen[at]gmail.com]
##         mark mcvittie [markcwmcvittie[at]yahoo.co.uk]
## version 0.7b
##
## This script ensures the presence of a number of required packages on the
## user's system. These packages are needed to make blitzmax run properly.
##
## The script supplies (un)installation schemes for various package managers
## as well as any differences between 32 and 64 bit systems that may require
## handling.
##
## Version history:
##   [0.7b] August 16, 2009 [markcw]
##      - Added inst_zypper.
##      - Added package list for inst_pacman.
##   [0.6b] August 9, 2009: [markcw]
##      - Added package lists for inst_emerge, inst_yum and inst_urpmi.
##      - Added a check for root login.
##   [0.5b] August 6, 2009:
##      - Removed support for ia32-apt-get in the inst_aptitude function.
##        Apparently this is no longer required to make blitzmax work as well
##        it causing problems with standard package management on a 64-bit
##        system.
##   
###############################################################################
###############################################################################

###############################################################################
## Variables we will be needing later on:
PKGMGRS=("aptitude" "emerge" "yum" "urpmi" "pacman" "zypper");
PKGMGR=
IS_64_BIT=0
DO_INSTALL=1;

###############################################################################
## usage
usage() {
   echo "Usage: `basename $0` [OPTIONS]";
   echo "";
   echo "   -i    : Install all required packages. (This is the default mode)";
   echo "   -u    : Uninstall all required packages.";
   echo "   -h    : Display this help.";
   echo "";
}


###############################################################################
## Package Manager-specific (un)installation schemes.
inst_aptitude()
{
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev";
	else
		PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev";
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
#		if [ $IS_64_BIT -eq 1 ]; then
#			## install ia32-apt-get separately.
#			## The other packages require this one to be installed and ready.
#			## 'ia32-apt-get' serves as a 32 bit compatibility tool. It creates
#			## links to 64 bit versions of the selected packages.
#			sudo apt-get install ia32-apt-get;
#		fi

		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get install $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get --purge remove $PKG_LIST;
		
#		if [ $IS_64_BIT -eq 1 ]; then
#			## uninstall ia32-apt-get separately.
#			sudo apt-get --purge remove ia32-apt-get;
#		fi
		
		## These 2 commands tell aptitude to clean up any unused packages
		## still lingering around the system. They make sure we do not leave
		## any orphaned packages behind. These orphans serve no purpose and
		## simply waste space.
		echo "[i] Performing aptitude cleanup...";
		sudo apt-get autoremove;
		sudo apt-get autoclean;
	fi
	return $?;
}

inst_emerge()
{
	PKG_LIST="libX11 mesa-progs libXft libXpm";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		sudo emerge -a $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		sudo emerge -a --unmerge $PKG_LIST;
	fi
	return $?;
}

inst_yum()
{
	PKG_LIST="gcc-c++ libX11-devel mesa-libGLU-devel libXft-devel libXpm-devel";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		yum install $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		yum remove $PKG_LIST;

		echo "[i] Performing yum cleanup...";
		yum clean all;
	fi
	return $?;
}

inst_urpmi()
{
	PKG_LIST="gcc-c++ libx11_6-devel libmesaglu1-devel libxft-devel libxpm-devel";
 
	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		urpmi $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		urpme $PKG_LIST;
	fi
	return $?;
}

inst_pacman()
{
	PKG_LIST="gcc";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		pacman -S $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		pacman -Rsn $PKG_LIST;
	fi
	return $?;
}

inst_zypper()
{
	PKG_LIST="gcc-c++ xorg-x11-libX11-devel Mesa-devel";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		sudo zypper install $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		sudo zypper remove $PKG_LIST;
	fi
	return $?;
}

trap_int()
{
	echo "[i] SIGINT detected. Exiting script.";
	echo "    Note that this may leave some operations incomplete.";
	echo "    Run the script again to complete any pending operations.";
	exit 0;
}

###############################################################################
###############################################################################
## Main program

## intercept ctrl-c (SIGINT).
trap trap_int INT;

clear;
echo "Blitzmax Installation Script version 0.7b";
echo "Please report bugs or suggestions to: jimteeuwen[at]gmail.com";
echo "";


###############################################################################
## Check for commandline options:
while getopts iuh opt; do
	case "$opt" in
		i) DO_INSTALL=1;;
		u) DO_INSTALL=0;;
		h) usage; exit 0;;
		*?) usage; exit 1;;
	esac
done
unset opt;


###############################################################################
## Get architecture. 64 bit systems require some extra packages
## since blitz has no 64-bit support. We need our system to provide
## symbolic links to the 64 bit modules for us.
echo "[i] Checking architecture...";
IS_64_BIT=0;
if [ `uname -m` == "x86_64" ]; then
	IS_64_BIT=1;
	echo "    found: 64 bit";
else
	echo "    found: 32 bit";
fi


###############################################################################
## Determine the package manager we have available.
echo "[i] Identifying package manager...";
PKGMGR="";
for pm in ${PKGMGRS[@]}; do
	if [ ! -f "`which $pm`" ]; then
		continue;
	fi
	
	PKGMGR=$pm;
	echo "    found: $pm";
	break;
done
unset pm;

if [ -z "$PKGMGR" ]; then
	echo "[e] Unable to find a package manager.";
	echo "    Supported are: ${PKGMGRS[@]}";
fi

###############################################################################
## Check if root login is needed.
## Some distros use su and others use sudo.
## I am assuming distros using the same package manager use the same su/sudo syntax.
if [ `whoami` = "root" ]; then
	echo "[i] Logged in as root user.";
elif [ "$PKGMGR" = "yum" ]; then ## sudo if user in sudoers
	PKGMGR=""; ## note: using PKGMGR to force root login
elif [ "$PKGMGR" = "pacman" ]; then
	PKGMGR="";
elif [ "$PKGMGR" = "urpmi" ]; then ## no sudo
	PKGMGR="";
fi

if [ -z "$PKGMGR" ]; then ## no package manager found or need root login
	echo "[i] Login as root and then re-run this script.";
	su;
fi

###############################################################################
## perform package manager-specific setup.
## we simply append the manager name as defined in the array above to 'inst_'.
## This assumes the resulting function name exists. Note that this is case-
## sensitive. eg: 'aptitude' becomes a call to function 'inst_aptitude'.
echo "[i] Performing $PKGMGR setup...";
echo "[i] Building package list...";
inst_$PKGMGR;


###############################################################################
## All done. Return control to shell with exit code of last operation.
echo "[i] Done.";
exit $?;
</textarea> <br><br></td></tr></table><br>
<a name="979356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> @JimT<br><br>Nice script, it worked for me :)<br><br>(Ubuntu 64 9.04) <br><br></td></tr></table><br>
<a name="979690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jim T, you may want to put a reminder in the script for people to update their package database first. I forgot and was wondering why it couldn't find any packages.<br><br>Also, just to note that for apt 64-bit you don't actually need x11proto-core-dev and x11proto-kb-dev as they are dependencies of libglu1-mesa-dev.<br><br>Funny enough, I'm stuck getting MaxIDE to run on ubuntu 9.04 64-bit. Installing ia32-apt-get didn't help so I removed it again. I get this error message.<br><br><div class="quote"> ./MaxIDE: error while loading shared libraries: libX11.so.6: cannot open shared object file: No such file or directory <br></div><br>I found <a href="/posts.php?topic=75741" target="_blank">this topic</a> but there isn't a solution, I have got /usr/lib/libx11.so.6 (link) and libx11.so.6.2.0. Any ideas please?<br><br>Edit: well it suddenly works now. Weird as I didn't really do anything other than try 'sudo apt-get install ia32-libs' which was already there and I may have rebooted but I can't remember. Anyway happy days. <br><br></td></tr></table><br>
<a name="981046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm I'm still not entirely clear on why the ia32 support is needed. I have done a clean ubuntu 64-bit install on 3 occasions now. I used the install script without the ia32 support to get blitz working without any problems. No error messages or missing dependencies.<br><br>I really need to know what exactly it is that requires the 32 bit libs and why before I reinstate them in the script. Reason being the huge problems it gives with the apt-get commands. It really ins't worth it if there is a way around this. <br><br></td></tr></table><br>
<a name="981147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I used the install script without the ia32 support to get blitz working without any problems. <br></div><br>Does that include fully rebuilding all the modules? <br><br></td></tr></table><br>
<a name="981177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> yup. <br><br></td></tr></table><br>
<a name="997352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> The libxpm-dev package was missing in the aptitude list.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#!/bin/bash

###############################################################################
###############################################################################
##
## name: install.sh
## author; jim teeuwen [jimteeuwen[at]gmail.com]
##         mark mcvittie [markcwmcvittie[at]yahoo.co.uk]
## version 0.8b
##
## This script ensures the presence of a number of required packages on the
## user's system. These packages are needed to make blitzmax run properly.
##
## The script supplies (un)installation schemes for various package managers
## as well as any differences between 32 and 64 bit systems that may require
## handling.
##
## Version history:
##   [0.8b] Nov 26 2009 [markcw]
##      - Added libxpm-dev package to aptitude list.
##   [0.7b] Aug 16 2009 [markcw]
##      - Added inst_zypper.
##      - Added package list for inst_pacman.
##   [0.6b] Aug 9 2009: [markcw]
##      - Added package lists for inst_emerge, inst_yum and inst_urpmi.
##      - Added a check for root login.
##   [0.5b] Aug 6 2009:
##      - Removed support for ia32-apt-get in the inst_aptitude function.
##        Apparently this is no longer required to make blitzmax work as well
##        it causing problems with standard package management on a 64-bit
##        system.
##   
###############################################################################
###############################################################################

###############################################################################
## Variables we will be needing later on:
PKGMGRS=("aptitude" "emerge" "yum" "urpmi" "pacman" "zypper");
PKGMGR=
IS_64_BIT=0
DO_INSTALL=1;

###############################################################################
## usage
usage() {
   echo "Usage: `basename $0` [OPTIONS]";
   echo "";
   echo "   -i    : Install all required packages. (This is the default mode)";
   echo "   -u    : Uninstall all required packages.";
   echo "   -h    : Display this help.";
   echo "";
}


###############################################################################
## Package Manager-specific (un)installation schemes.
inst_aptitude()
{
	if [ $IS_64_BIT -eq 1 ]; then
		PKG_LIST="gcc-multilib g++-multilib libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libasound2-dev libidn11-dev libxft-dev x11proto-xext-dev libxpm-dev";
	else
		PKG_LIST="gcc g++ libxxf86vm-dev libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libasound2-dev build-essential libidn11-dev libxft-dev x11proto-xext-dev libxpm-dev";
	fi

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
#		if [ $IS_64_BIT -eq 1 ]; then
#			## install ia32-apt-get separately.
#			## The other packages require this one to be installed and ready.
#			## 'ia32-apt-get' serves as a 32 bit compatibility tool. It creates
#			## links to 64 bit versions of the selected packages.
#			sudo apt-get install ia32-apt-get;
#		fi

		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get install $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		## We can pass all of the packages to aptitude in 1 go,
		sudo apt-get --purge remove $PKG_LIST;
		
#		if [ $IS_64_BIT -eq 1 ]; then
#			## uninstall ia32-apt-get separately.
#			sudo apt-get --purge remove ia32-apt-get;
#		fi
		
		## These 2 commands tell aptitude to clean up any unused packages
		## still lingering around the system. They make sure we do not leave
		## any orphaned packages behind. These orphans serve no purpose and
		## simply waste space.
		echo "[i] Performing aptitude cleanup...";
		sudo apt-get autoremove;
		sudo apt-get autoclean;
	fi
	return $?;
}

inst_emerge()
{
	PKG_LIST="libX11 mesa-progs libXft libXpm";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		sudo emerge -a $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		sudo emerge -a --unmerge $PKG_LIST;
	fi
	return $?;
}

inst_yum()
{
	PKG_LIST="gcc-c++ libX11-devel mesa-libGLU-devel libXft-devel libXpm-devel";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		yum install $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		yum remove $PKG_LIST;

		echo "[i] Performing yum cleanup...";
		yum clean all;
	fi
	return $?;
}

inst_urpmi()
{
	PKG_LIST="gcc-c++ libx11_6-devel libmesaglu1-devel libxft-devel libxpm-devel";
 
	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		urpmi $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		urpme $PKG_LIST;
	fi
	return $?;
}

inst_pacman()
{
	PKG_LIST="gcc";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		pacman -S $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		pacman -Rsn $PKG_LIST;
	fi
	return $?;
}

inst_zypper()
{
	PKG_LIST="gcc-c++ xorg-x11-libX11-devel Mesa-devel";

	if [ $DO_INSTALL -eq 1 ]; then
		echo "[i] Installing...";
		sudo zypper install $PKG_LIST;
	else
		echo "[i] Uninstalling...";
		sudo zypper remove $PKG_LIST;
	fi
	return $?;
}

trap_int()
{
	echo "[i] SIGINT detected. Exiting script.";
	echo "    Note that this may leave some operations incomplete.";
	echo "    Run the script again to complete any pending operations.";
	exit 0;
}

###############################################################################
###############################################################################
## Main program

## intercept ctrl-c (SIGINT).
trap trap_int INT;

clear;
echo "Blitzmax Installation Script version 0.7b";
echo "Please report bugs or suggestions to: jimteeuwen[at]gmail.com";
echo "";


###############################################################################
## Check for commandline options:
while getopts iuh opt; do
	case "$opt" in
		i) DO_INSTALL=1;;
		u) DO_INSTALL=0;;
		h) usage; exit 0;;
		*?) usage; exit 1;;
	esac
done
unset opt;


###############################################################################
## Get architecture. 64 bit systems require some extra packages
## since blitz has no 64-bit support. We need our system to provide
## symbolic links to the 64 bit modules for us.
echo "[i] Checking architecture...";
IS_64_BIT=0;
if [ `uname -m` == "x86_64" ]; then
	IS_64_BIT=1;
	echo "    found: 64 bit";
else
	echo "    found: 32 bit";
fi


###############################################################################
## Determine the package manager we have available.
echo "[i] Identifying package manager...";
PKGMGR="";
for pm in ${PKGMGRS[@]}; do
	if [ ! -f "`which $pm`" ]; then
		continue;
	fi
	
	PKGMGR=$pm;
	echo "    found: $pm";
	break;
done
unset pm;

if [ -z "$PKGMGR" ]; then
	echo "[e] Unable to find a package manager.";
	echo "    Supported are: ${PKGMGRS[@]}";
fi

###############################################################################
## Check if root login is needed.
## Some distros use su and others use sudo.
## I am assuming distros using the same package manager use the same su/sudo syntax.
if [ `whoami` = "root" ]; then
	echo "[i] Logged in as root user.";
elif [ "$PKGMGR" = "yum" ]; then ## sudo if user in sudoers
	PKGMGR=""; ## note: using PKGMGR to force root login
elif [ "$PKGMGR" = "pacman" ]; then
	PKGMGR="";
elif [ "$PKGMGR" = "urpmi" ]; then ## no sudo
	PKGMGR="";
fi

if [ -z "$PKGMGR" ]; then ## no package manager found or need root login
	echo "[i] Login as root and then re-run this script.";
	su;
fi

###############################################################################
## perform package manager-specific setup.
## we simply append the manager name as defined in the array above to 'inst_'.
## This assumes the resulting function name exists. Note that this is case-
## sensitive. eg: 'aptitude' becomes a call to function 'inst_aptitude'.
echo "[i] Performing $PKGMGR setup...";
echo "[i] Building package list...";
inst_$PKGMGR;


###############################################################################
## All done. Return control to shell with exit code of last operation.
echo "[i] Done.";
exit $?;
</textarea> <br><br></td></tr></table><br>
<a name="1000458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm a linux noob, how do i execute the script?<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1000463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> i got it, sudo bash installstuff.sh -i<br>who knew!<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1000488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use chmod to give the file exec permissions then run it with the "./" prefix which represents the current directory.<br><pre class=code>chmod u+x installstuff.sh
./installstuff.sh</pre> <br><br></td></tr></table><br>
<a name="1000559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah, I got as far as chmod -x which didn't work. Linux is mildly different from Mac OS X terminal language-wise. I guess it'll take a bit of getting used to.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1000566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> That would be because "chmod -x" means deny execute permission. <br><br>Typing "man chmod" brings up the manual for that command. <br>Also you need to know to stop shell processes like man with Ctrl+Z. <br>I prefer to use the web though, like <a href="http://ss64.com" target="_blank">http://ss64.com</a> <br><br></td></tr></table><br>
<a name="1000647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> No wonder. To be honest, i was trying to do it from memory. I guess i must have wanted something to stop being executed in the past and the line stuck.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1006224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just for info: The script is tested and found to work with 64-bit Ubuntu 9.10 (Karmic). <br><br></td></tr></table><br>
<a name="1081502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> The script works great (note: if you don't have sound in your compiled programs and your system is using pulseaudio, read this: <a href="http://www.blitzbasic.com/Community/posts.php?topic=93662" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=93662</a> ), but it really should be included in the download package and labelled "Run Me First" or, better yet, run automatically upon installation.<br><br>Russell <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
