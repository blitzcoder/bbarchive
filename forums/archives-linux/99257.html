<!DOCTYPE html><html lang="en" ><head ><title >Poll Input</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Poll Input</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=109" >Linux Discussion</a>/<a href="#bottom" >Poll Input</a><br><br>
<a name="1164355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am having some issues with input from the mouse and keyboard. In scanning the forum here I really have found no solutions. The BlitzMax demos seem to work fine so it has to be something I'm doing. <br><br>Are there some issues in Linux that make polling ( KeyDown()/KeyHit()/MouseDown() ) input different then in Windows. My application polls input every 1/30 of a second and works fine in Windows.:)<br><br>Input is wild and unpredictable and keys for example get reported down when there not, after being pressed once. In this example the the right arrow is pressed once and then it will keep reporting it down. It does the same thing on the mouse buttons.<br><br>This sort of reminds me of <a href="/posts.php?topic=93100" target="_blank">this</a> problem with polled input from mouse and canvases. Although I'm not using MaxGUI in the application.<br><br>If you have come across this problem or have a solution let men know. <br><br></td></tr></table><br>
<a name="1164368"></a>

<a name="1164369"></a>

<a name="1164371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm thinking this might have something to do with MaxGUI. It turns out that I did have some MaxGUI code in my project. Once I removed it and the input problem seems to have disappeared. The intresting part is that I was only initializing a Tgadget variable, that's it. <br><br>I guess MaxGUI is a little touchy or has an issue.<br><br>**-=&gt; Edit - Just Importing the MaxGui module is enough to cause the problem. Bug? It also does it with the sample demos.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1164383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The MaxGUI has many problems and it hasn't been updated for ages.<br>It would be a good idea to post some code so others can test it on their systems as it could be Linux operating system specific. <br><br></td></tr></table><br>
<a name="1164384"></a>

<a name="1164385"></a>

<a name="1164386"></a>

<a name="1164387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd be tempted to blame MaxGUI also.<br><br>MaxGUI was never designed or tested to work along side standard brl Graphics windows. On Linux both modules hook into xwindows event streams in ways that should have been reviewed by an xwindows expert but I'm still yet to meet one in the flesh.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1164450"></a>

<a name="1164451"></a>

<a name="1164452"></a>

<a name="1164453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I guess the obvious solution here is to breakout the MaxGUI into a separate application to avoid conflicts. In my case this is a little difficult as my project engine is designed to support a game and an editor. But I did resist heavily using MaxGUI in my game engine, so doable.<br><br><br><div class="quote"> It would be a good idea to post some code so others can test it on their systems as it could be Linux operating system specific. <br></div><br>Well, you could use the 'FirePaint' example and add"<br><pre class=code>Import MaxGui.Drivers</pre><br>On a small application like 'FirePaint' you will have to run it a few times before it will (randomly fails) start to fail on input. On my larger projects it fails right away.<br><br><br><div class="quote"> in ways that should have been reviewed by an xwindows expert but I'm still yet to meet one in the flesh. <br></div><br>I hear they keep them in an underground government lab. :)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1164555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm also not getting KeyHit()to report the 'Insert' key. I'm not using MaxGUI so that is not effecting the result. Anyone else have the same problem? <br><br></td></tr></table><br>
<a name="1164556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> you could try messing with brl.mod/system.mod/system.linux.c<br><br>the function to convert xwindow key events to blitz keycodes is called int getxkey(XEvent*) starting at line 278 <br><br></td></tr></table><br>
<a name="1164608"></a>

<a name="1164610"></a>

<a name="1164614"></a>

<a name="1164619"></a>

<a name="1164623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wrote a small bit of test code and for some reason Insert is being mistaken of the C key.<br><br>EDIT:And looking at the getxkey(XEvent *event) function. I think I can see the reason why.<br>Edit Skid: Do you think it would be a lot of hassle to setup/use the actual keysym defines?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1164659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well did a bit of tinkering and got some of the keys working. I would post the code but I can't remember if we can post modifications to brl.mod. <br><br></td></tr></table><br>
<a name="1164673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wish we had a way to commit changes to Brl code. With Mark busy with Monkey I'm not sure any fixes will get into the BlitzMax release. Are these new bugs or is it that no one is really using BlitzMax on Linux? IMHO Linux is going to bump up in market share in the next few years and is already starting to closing on Mac in browser OS percentage ( <a href="http://www.w3schools.com/Browsers/browsers_os.asp" target="_blank">http://www.w3schools.com/Browsers/browsers_os.asp</a> ).<br><br>@dawlane<br><br>I think we can as Mark changed the licensing for BlitzMax. I'll try to find the post. Skidracer would know though. :) <br><br></td></tr></table><br>
<a name="1164674"></a>

<a name="1164764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Max on Linux has always been the poor relation to the others and gets very few fixes. And I'm surprised that nobody noticed the mistake in getxkey. The key gets loaded by XLookupkeysym and is only using the lower 8bits. <br>If you look at the code in getxkey, you will see the first line checks for values 96 to 126 the if you look abit further down you see the the code for insert key is 99 which would be the C key.<br>To solve this you need the whole 16bits of the value returned from XLookupsym. Now to keep the code size down those keys that were giving the grief got sorted first. In /usr/include/X11 there is a header file called keysymdef.h that defines all possible keycodes. It was just a case of trapping those codes first before changing the key variable just to use the lower 8bits and then checking the others.<br>Only problem I'm having is getting those special case keys to work, Num-Lock, Pause, Caps-Lock, Print screen, etc.<br><br>Edit: Did a little test and those keys can be scanned, but looks like for some reason the enumerations in max are binding. Any idea any one?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1164845"></a>

<a name="1164848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi dawlane,<br><br>I'll take a look at it as well tonight. <br><br>Regarding posting BRL code, <a href="/posts.php?topic=97652#1135857" target="_blank">this</a> leads me to believe we can. In fact maintaining a GitHub of changes to for Linux would be possible as well.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1164849"></a>

<a name="1164850"></a>

<a name="1164877"></a>

<a name="1164941"></a>

<a name="1164942"></a>

<a name="1165154"></a>

<a name="1165215"></a>

<a name="1165307"></a>

<a name="1165308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Regarding posting BRL code, this leads me to believe we can. <br></div><br>Good here's the code I've got so far. At the moment the only key I can't get to function on my keyboard is the PrtSc (Print Screen). I think this is one key that can't be successfully be extracted as I suspect the it's captured by the system first and the xev tool doesn't report it.<br> <br>Rather than post a ton of code I'll just post the bits to modify.<br><br>In brl.mod/keycodes.mod/keycodes.bmx.<br>Change <pre class=code>Const KEY_ENTER=13</pre> value to 10 or another suitable value if you want to scan this key separate from the Return key.<br>And at the bottom add<br><pre class=code>Const KEY_PAUSE=19
Const KEY_NUMLOCK=144
Const KEY_CAPSLOCK=20
Const KEY_SCROLL=145
Const KEY_NUMSIGN=193
Const KEY_HELP=47</pre><br><br>Next in brl.mod/keycodes.mod/keycodes.h<br>replace the enum for the keys to this<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">	KEY_BACKSPACE=8,KEY_TAB,
	KEY_PAUSE=19,KEY_CAPSLOCK,
	KEY_RETURN=13,KEY_ENTER=10,
	KEY_ESC=27,
	KEY_SPACE=32,
	KEY_PAGEUP=33,KEY_PAGEDOWN,KEY_END,KEY_HOME,
	KEY_LEFT=37,KEY_UP,KEY_RIGHT,KEY_DOWN,
	KEY_PRINT=42,
	KEY_INSERT=45,KEY_DELETE,KEY_HELP,
	
	KEY_0=48,KEY_1,KEY_2,KEY_3,KEY_4,KEY_5,KEY_6,KEY_7,KEY_8,KEY_9,
	KEY_A=65,KEY_B,KEY_C,KEY_D,KEY_E,KEY_F,KEY_G,KEY_H,KEY_I,KEY_J,
	KEY_K,KEY_L,KEY_M,KEY_N,KEY_O,KEY_P,KEY_Q,KEY_R,KEY_S,KEY_T,
	KEY_U,KEY_V,KEY_W,KEY_X,KEY_Y,KEY_Z,
	
	KEY_LSYS=91,KEY_RSYS,KEY_MENU,
	
	KEY_NUM0=96,KEY_NUM1,KEY_NUM2,KEY_NUM3,KEY_NUM4,
	KEY_NUM5,KEY_NUM6,KEY_NUM7,KEY_NUM8,KEY_NUM9,
	KEY_NUMMULTIPLY=106,KEY_NUMADD,KEY_NUMSLASH,
	KEY_NUMSUBTRACT,KEY_NUMDECIMAL,KEY_NUMDIVIDE,

	KEY_F1=112,KEY_F2,KEY_F3,KEY_F4,KEY_F5,KEY_F6,
	KEY_F7,KEY_F8,KEY_F9,KEY_F10,KEY_F11,KEY_F12,
	
	KEY_NUMLOCK=144,KEY_SCROLL,

	KEY_LSHIFT=160,KEY_RSHIFT,
	KEY_LCONTROL=162,KEY_RCONTROL,
	KEY_LALT=164,KEY_RALT,

	KEY_TILDE=192,KEY_NUMSIGN,KEY_MINUS=189,KEY_EQUALS=187,
	KEY_OPENBRACKET=219,KEY_CLOSEBRACKET=221,KEY_BACKSLASH=226,
	KEY_SEMICOLON=186,KEY_QUOTES=222,
	KEY_COMMA=188,KEY_PERIOD=190,KEY_SLASH=191
</textarea><br><br>Now in brl.mod/sytem.mod/system.linux.c replace the code in the function getxkey with this<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">	int key;
	key=XLookupKeysym(&amp;event-&gt;xkey,0);
	/*Use the definitions in /usr/include/X11/keysymdef.h to allow remapping or inclusion of other keyboard layouts*/
	/*Other files to modify are in /keycodes.mod*/
	
	//Currently Non functional keys on a UK ASII keyboard.
	if (key==XK_Print || key==XK_Sys_Req) return KEY_PRINT;		//print screen
	
	//Working keys
	//must use the keysym defines to stop any confusion with the bulk key scan below	
	//Modifyer
	if (key==XK_Alt_R || key==XK_ISO_Level3_Shift) return KEY_RALT;	//ralt, AltGr
	if (key==XK_Control_L) return KEY_LCONTROL;	//lctrl
	if (key==XK_Alt_L) return KEY_LALT;			//lalt
	if (key==XK_Control_R) return KEY_RCONTROL;	//rctrl
	if (key==XK_Shift_L) return KEY_LSHIFT;		//lshift
	if (key==XK_Shift_R) return KEY_RSHIFT;		//rshiftz
	
	//Sytem keys
	if (key==XK_Menu) return KEY_HELP;	//windows menu key
	if (key==XK_Super_L) return KEY_LSYS;	//left windows key
	if (key==XK_Super_R) return KEY_RSYS;	//right windows key
	if (key==XK_Pause) return KEY_PAUSE;
	if (key==XK_Num_Lock) return KEY_NUMLOCK;	//numlock
	if (key==XK_Scroll_Lock) return KEY_SCROLL;	//scroll
	if (key==XK_Caps_Lock) return KEY_CAPSLOCK;	//Caps Locak

	//Keypad
	if (key==XK_KP_Insert) return KEY_NUM0;	// 0
	if (key==XK_KP_End) return KEY_NUM1;		// 1
	if (key==XK_KP_Down) return KEY_NUM2;		// 2
	if (key==XK_KP_Next) return KEY_NUM3;		// 3 May be know as page down
	if (key==XK_KP_Left) return KEY_NUM4;		// 4
	if (key==XK_KP_Begin) return KEY_NUM5;		// 5
	if (key==XK_KP_Right) return KEY_NUM6;		// 6
	if (key==XK_KP_Home) return KEY_NUM7;		// 7
	if (key==XK_KP_Up) return KEY_NUM8;		// 8
	if (key==XK_KP_Prior) return KEY_NUM9;		// 9 May be know as page up
	if (key==XK_KP_Delete) return KEY_NUMDECIMAL;	//keypad .
	if (key==XK_KP_Enter) return KEY_ENTER; 	//keypad enter
	if (key==XK_KP_Add) return KEY_NUMADD;	//keypad add
	if (key==XK_KP_Subtract) return KEY_NUMSUBTRACT;	//keypad minus 
	if (key==XK_KP_Multiply) return KEY_NUMMULTIPLY;	//keypad mult
	if (key==XK_KP_Divide) return KEY_NUMDIVIDE;	//keypad divide
	
	//Page Navigation
	if (key==XK_Home) return KEY_HOME;		//home
	if (key==XK_Page_Up) return KEY_PAGEUP;		//pageup
	if (key==XK_Delete) return KEY_DELETE;	//delete
	if (key==XK_End) return KEY_END;		//end
	if (key==XK_Page_Down) return KEY_PAGEDOWN;		//pagedown
	if (key==XK_Insert) return KEY_INSERT;		//insert

	//Comman symbols
	if (key==XK_grave) return KEY_TILDE;	//tilde(~)
	if (key==XK_numbersign) return KEY_NUMSIGN;     //Number sign(#) key	UK Windows Keyboard
	if (key==XK_minus) return KEY_MINUS;	//minus
	if (key==XK_equal) return KEY_EQUALS;	//equals
	if (key==XK_bracketleft) return KEY_OPENBRACKET;	//[
	if (key==XK_bracketright) return KEY_CLOSEBRACKET;	//]
	if (key==XK_backslash) return KEY_BACKSLASH;	//backslash
	if (key==XK_semicolon) return KEY_SEMICOLON;	//semicolon
	if (key==XK_apostrophe) return KEY_QUOTES;	//quotes
	if (key==XK_comma) return KEY_COMMA;	//comma key
	if (key==XK_period) return KEY_PERIOD;	//period key
	if (key==XK_slash) return KEY_SLASH;	//questionmark key

	//Trap the lower 8bits for bulk key scan
	key &amp;=255;
	//Bulk Scan
	if (key&gt;=97&amp;&amp;key&lt;=126) return key+(65-97);		//a..z	
	if (key&gt;=81&amp;&amp;key&lt;=84) return key+(37-81);		//arrow keys
	if (key&gt;=190 &amp;&amp; key&lt;=201) return key+(112-190);	//function keys
	
	return key;</textarea><br><br>Open a command terminal and change the directory to the BlitzMax bin folder and use bmk makemods to build the modules. It's not a good idea to use the MaxIDE for this as any mistake in the header file or the c file will make it crash.<br><br>A bit of test code<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">'Keyboard test
SuperStrict

Type TKeypress
	Field key:Int
	Field name:String
EndType


Graphics 640,480
Global terminate:Int = 1
Global keys:TKeypress

While terminate
	DrawText("PRESS A KEY",0,0)
	keys = GetKey()
	If keys&lt;&gt;Null
		Cls
		DrawText("PRESS A KEY",0,0)
		DrawText("BlitzMax Name: "+keys.name,0,10)
		DrawText("BlitzMax Value: "+keys.key,0,20)
	EndIf
	Flip
Wend

Function GetKey:TKeypress()
	Local keypress:TKeypress = New TKeypress	
	'Back space
 	If KeyHit(KEY_BACKSPACE) Or KeyDown(KEY_BACKSPACE)
		keypress.name = "KEY_BACKSPACE"
		keypress.key = KEY_BACKSPACE
		Return keypress
	EndIf
	
	'Tab
	If KeyHit(KEY_TAB) Or KeyDown(KEY_TAB)
		keypress.name = "KEY_TAB"
		keypress.key = KEY_TAB
		Return keypress
	EndIf
	
	'Clear
	If KeyHit(KEY_CLEAR) Or KeyDown(KEY_CLEAR)
		keypress.name = "KEY_CLEAR"
		keypress.key = KEY_CLEAR
		Return keypress
	EndIf
	
	'Return
	If KeyHit(KEY_RETURN) Or KeyDown(KEY_RETURN)
		keypress.name = "KEY_RETURN"
		keypress.key = KEY_RETURN
		Return keypress
	EndIf
	
	'Enter
	If KeyHit(KEY_ENTER) Or KeyDown(KEY_ENTER)
		keypress.name = "KEY_ENTER"
		keypress.key = KEY_ENTER
		Return keypress
	EndIf
	
	'Pause
	If KeyHit(KEY_PAUSE) Or KeyDown(KEY_PAUSE)
		keypress.name = "KEY_PAUSE"
		keypress.key = KEY_PAUSE
		Return keypress
	EndIf

	'Escape
	If KeyHit(KEY_ESCAPE) Or KeyDown(KEY_ESCAPE)
		keypress.name = "KEY_ESCAPE"
		keypress.key = KEY_ESCAPE
		Return keypress
	EndIf
	
	'Space
	If KeyHit(KEY_SPACE) Or KeyDown(KEY_SPACE)
		keypress.name = "KEY_SPACE"
		keypress.key = KEY_SPACE
		Return keypress
	EndIf
	
	'PageUp
	If KeyHit(KEY_PAGEUP) Or KeyDown(KEY_PAGEUP)
		keypress.name = "KEY_PAGEUP"
		keypress.key = KEY_PAGEUP
		Return keypress
	EndIf
	
	'PageDown
	If KeyHit(KEY_PAGEDOWN) Or KeyDown(KEY_PAGEDOWN)
		keypress.name = "KEY_PAGEDOWN"
		keypress.key = KEY_PAGEDOWN
		Return keypress
	EndIf
	
	'End
	If KeyHit(KEY_END) Or KeyDown(KEY_END)
		keypress.name = "KEY_END"
		keypress.key = KEY_END
		Return keypress
	EndIf
	
	'HOME
	If KeyHit(KEY_HOME) Or KeyDown(KEY_HOME)
		keypress.name = "KEY_HOME"
		keypress.key = KEY_HOME
		Return keypress
	EndIf
	
	'Cursor (LEFT)
	If KeyHit(KEY_LEFT) Or KeyDown(KEY_LEFT)
		keypress.name = "KEY_LEFT"
		keypress.key = KEY_LEFT
		Return keypress
	EndIf
	
	'Cursor (UP)
	If KeyHit(KEY_UP) Or KeyDown(KEY_UP)
		keypress.name = "KEY_UP"
		keypress.key = KEY_UP
		Return keypress
	EndIf
	
	'Cursor (Right)
	If KeyHit(KEY_RIGHT) Or KeyDown(KEY_RIGHT)
		keypress.name = "KEY_RIGHT"
		keypress.key = KEY_RIGHT
		Return keypress
	EndIf
	
	'Cursor (Down)
	If KeyHit(KEY_DOWN) Or KeyDown(KEY_DOWN)
		keypress.name = "KEY_DOWN"
		keypress.key = KEY_DOWN
		Return keypress
	EndIf
	
	'Select
	If KeyHit(KEY_SELECT) Or KeyDown(KEY_SELECT)
		keypress.name = "KEY_SELECT"
		keypress.key = KEY_SELECT
		Return keypress
	EndIf
	
	'Print	
	If KeyHit(KEY_PRINT) Or KeyDown(KEY_PRINT)
		keypress.name = "KEY_PRINT"
		keypress.key = KEY_PRINT
		Return keypress
	EndIf
	
	'Execute
	If KeyHit(KEY_EXECUTE) Or KeyDown(KEY_EXECUTE)
		keypress.name = "KEY_EXECUTE"
		keypress.key = KEY_EXECUTE
		Return keypress
	EndIf
	
	'Screen	
	If KeyHit(KEY_SCREEN) Or KeyDown(KEY_SCREEN)
		keypress.name = "KEY_SCREEN"
		keypress.key = KEY_SCREEN
		Return keypress
	EndIf
	'Insert
	If KeyHit(KEY_INSERT) Or KeyDown(KEY_INSERT)
		keypress.name = "KEY_INSERT"
		keypress.key = KEY_INSERT
		Return keypress
	EndIf

	'Delete
	If KeyHit(KEY_DELETE) Or KeyDown(KEY_DELETE)
		keypress.name = "KEY_DELETE"
		keypress.key = KEY_DELETE
		Return keypress
	EndIf
	
	'Help
	If KeyHit(KEY_HELP) Or KeyDown(KEY_HELP)
		keypress.name = "KEY_HELP"
		keypress.key = KEY_HELP
		Return keypress
	EndIf
	
	'Number Sign
	If KeyHit(KEY_NUMSIGN) Or KeyDown(KEY_NUMSIGN)
		keypress.name = "KEY_NUMSIGN"
		keypress.key = KEY_NUMSIGN
		Return keypress
	EndIf
	
'Number keys
	'0
	If KeyHit(KEY_0) Or KeyDown(KEY_0)
		keypress.name = "KEY_0"
		keypress.key = KEY_0
		Return keypress
	EndIf
	
	'1
	If KeyHit(KEY_1) Or KeyDown(KEY_1)
		keypress.name = "KEY_1"
		keypress.key = KEY_1
		Return keypress
	EndIf
	
	'2
	If KeyHit(KEY_2) Or KeyDown(KEY_2)
		keypress.name = "KEY_2"
		keypress.key = KEY_2
		Return keypress
	EndIf
	
	'3
	If KeyHit(KEY_3) Or KeyDown(KEY_3)
		keypress.name = "KEY_3"
		keypress.key = KEY_3
		Return keypress
	EndIf
	
	'4
	If KeyHit(KEY_4) Or KeyDown(KEY_4)
		keypress.name = "KEY_4"
		keypress.key = KEY_4
		Return keypress
	EndIf
	
	'5
	If KeyHit(KEY_5) Or KeyDown(KEY_5)
		keypress.name = "KEY_5"
		keypress.key = KEY_5
		Return keypress
	EndIf
	
	'6
	If KeyHit(KEY_6) Or KeyDown(KEY_6)
		keypress.name = "KEY_6"
		keypress.key = KEY_6
		Return keypress
	EndIf
	
	'7
	If KeyHit(KEY_7) Or KeyDown(KEY_7)
		keypress.name = "KEY_7"
		keypress.key = KEY_7
		Return keypress
	EndIf
	
	'8
	If KeyHit(KEY_8) Or KeyDown(KEY_8)
		keypress.name = "KEY_8"
		keypress.key = KEY_8
		Return keypress
	EndIf
	
	'9
	If KeyHit(KEY_9) Or KeyDown(KEY_9)
		keypress.name = "KEY_9"
		keypress.key = KEY_9
		Return keypress
	EndIf
	
'Letter Keys
	'A
	If KeyHit(KEY_A) Or KeyDown(KEY_A)
		keypress.name = "KEY_A"
		keypress.key = KEY_A
		Return keypress
	EndIf
	
	'B
	If KeyHit(KEY_B) Or KeyDown(KEY_B)
		keypress.name = "KEY_B"
		keypress.key = KEY_B
                Return keypress
	EndIf

	'C
	If KeyHit(KEY_C) Or KeyDown(KEY_C)
		keypress.name = "KEY_C"
		keypress.key = KEY_C
		Return keypress
	EndIf

	'D
	If KeyHit(KEY_D) Or KeyDown(KEY_D)
		keypress.name = "KEY_D"
		keypress.key = KEY_D
		Return keypress
	EndIf
	
	'E
	If KeyHit(KEY_E) Or KeyDown(KEY_E)
		keypress.name = "KEY_E"
		keypress.key = KEY_E
		Return keypress
	EndIf
	
	'F
	If KeyHit(KEY_F) Or KeyDown(KEY_F)
		keypress.name = "KEY_F"
		keypress.key = KEY_F
		Return keypress
	EndIf
	
	'G
	If KeyHit(KEY_G) Or KeyDown(KEY_G)
		keypress.name = "KEY_G"
		keypress.key = KEY_G
		Return keypress
	EndIf
	
	'H
	If KeyHit(KEY_H) Or KeyDown(KEY_H)
		keypress.name = "KEY_H"
		keypress.key = KEY_H
		Return keypress
	EndIf
	
	'I
	If KeyHit(KEY_I) Or KeyDown(KEY_I)
		keypress.name = "KEY_I"
		keypress.key = KEY_I
		Return keypress
	EndIf
	
	'J
	If KeyHit(KEY_J) Or KeyDown(KEY_J)
		keypress.name = "KEY_J"
		keypress.key = KEY_J
		Return keypress
	EndIf
	
	'K
	If KeyHit(KEY_K) Or KeyDown(KEY_K)
		keypress.name = "KEY_K"
		keypress.key = KEY_K
		Return keypress
	EndIf
	
	'L
	If KeyHit(KEY_L) Or KeyDown(KEY_L)
		keypress.name = "KEY_L"
		keypress.key = KEY_L
		Return keypress
	EndIf
	
	'M
	If KeyHit(KEY_M) Or KeyDown(KEY_M)
		keypress.name = "KEY_M"
		keypress.key = KEY_M
		Return keypress
	EndIf
	
	'N
	If KeyHit(KEY_N) Or KeyDown(KEY_N)
		keypress.name = "KEY_N"
		keypress.key = KEY_N
		Return keypress
	EndIf
	
	'O
	If KeyHit(KEY_O) Or KeyDown(KEY_O)
		keypress.name = "KEY_O"
		keypress.key = KEY_O
		Return keypress
	EndIf
	
	'P
	If KeyHit(KEY_P) Or KeyDown(KEY_P)
		keypress.name = "KEY_P"
		keypress.key = KEY_P
		Return keypress
	EndIf
	
	'Q
	If KeyHit(KEY_Q) Or KeyDown(KEY_Q)
		keypress.name = "KEY_Q"
		keypress.key = KEY_Q
		Return keypress
	EndIf
	
	'R
	If KeyHit(KEY_R) Or KeyDown(KEY_R)
		keypress.name = "KEY_R"
		keypress.key = KEY_R
		Return keypress
	EndIf
	
	'S
	If KeyHit(KEY_S) Or KeyDown(KEY_S)
		keypress.name = "KEY_S"
		keypress.key = KEY_S
		Return keypress
	EndIf
	
	'T
	If KeyHit(KEY_T) Or KeyDown(KEY_T)
		keypress.name = "KEY_T"
		keypress.key = KEY_T
		Return keypress
	EndIf
	
	'U
	If KeyHit(KEY_U) Or KeyDown(KEY_U)
		keypress.name = "KEY_U"
		keypress.key = KEY_U
		Return keypress
	EndIf
	
	'V
	If KeyHit(KEY_V) Or KeyDown(KEY_V)
		keypress.name = "KEY_V"
		keypress.key = KEY_V
		Return keypress
	EndIf
	
	'W
	If KeyHit(KEY_W) Or KeyDown(KEY_W)
		keypress.name = "KEY_W"
		keypress.key = KEY_W
		Return keypress
	EndIf
	
	'X
	If KeyHit(KEY_X) Or KeyDown(KEY_X)
		keypress.name = "KEY_X"
		keypress.key = KEY_X
		Return keypress
	EndIf
	
	'Y
	If KeyHit(KEY_Y) Or KeyDown(KEY_Y)
		keypress.name = "KEY_Y"
		keypress.key = KEY_Y
		Return keypress
	EndIf
	
	'Z
	If KeyHit(KEY_Z) Or KeyDown(KEY_Z)
		keypress.name = "KEY_Z"
		keypress.key = KEY_Z
		Return keypress
	EndIf
	
'System keys
	'Sys (LEFT)
	If KeyHit(KEY_LSYS) Or KeyDown(KEY_LSYS)
		keypress.name = "KEY_LSYS"
		keypress.key = KEY_LSYS
		Return keypress
	EndIf
	
	'Sys (RIGHT)
	If KeyHit(KEY_RSYS) Or KeyDown(KEY_RSYS)
		keypress.name = "KEY_RSYS"
		keypress.key = KEY_RSYS
		Return keypress
	EndIf
	
'Numpad Keys
	'Numpad 0
	If KeyHit(KEY_NUM0) Or KeyDown(KEY_NUM0)
		keypress.name = "KEY_NUM0"
		keypress.key = KEY_NUM0
		Return keypress
	EndIf
	
	'Numpad 1
	If KeyHit(KEY_NUM1) Or KeyDown(KEY_NUM1)
		keypress.name = "KEY_NUM1"
		keypress.key = KEY_NUM1
		Return keypress
	EndIf
	
	'Numpad 2
	If KeyHit(KEY_NUM2) Or KeyDown(KEY_NUM2)
		keypress.name = "KEY_NUM2"
		keypress.key = KEY_NUM2
		Return keypress
	EndIf
	
	'Numpad 3
	If KeyHit(KEY_NUM3) Or KeyDown(KEY_NUM3)
		keypress.name = "KEY_NUM3"
		keypress.key = KEY_NUM3
		Return keypress
	EndIf
	
	'Numpad 4
	If KeyHit(KEY_NUM4) Or KeyDown(KEY_NUM4)
		keypress.name = "KEY_NUM4"
		keypress.key = KEY_NUM4
		Return keypress
	EndIf
	
	'Numpad 5
	If KeyHit(KEY_NUM5) Or KeyDown(KEY_NUM5)
		keypress.name = "KEY_NUM5"
		keypress.key = KEY_NUM5
		Return keypress
	EndIf
	
	'Numpad 6
	If KeyHit(KEY_NUM6) Or KeyDown(KEY_NUM6)
		keypress.name = "KEY_NUM6"
		keypress.key = KEY_NUM6
		Return keypress
	EndIf
	
	'Numpad 7
	If KeyHit(KEY_NUM7) Or KeyDown(KEY_NUM7)
		keypress.name = "KEY_NUM7"
		keypress.key = KEY_NUM7
		Return keypress
	EndIf
	
	'Numpad 8
	If KeyHit(KEY_NUM8) Or KeyDown(KEY_NUM8)
		keypress.name = "KEY_NUM8"
		keypress.key = KEY_NUM8
		Return keypress
	EndIf
	
	'Numpad 9
	If KeyHit(KEY_NUM9) Or KeyDown(KEY_NUM9)
		keypress.name = "KEY_NUM9"
		keypress.key = KEY_NUM9
		Return keypress
	EndIf
	
	'Numpad *
	If KeyHit(KEY_NUMMULTIPLY) Or KeyDown(KEY_NUMMULTIPLY)
		keypress.name = "KEY_NUMMULTIPLY"
		keypress.key = KEY_NUMMULTIPLY
		Return keypress
	EndIf
	
	'Numpad +
	If KeyHit(KEY_NUMADD) Or KeyDown(KEY_NUMADD)
		keypress.name = "KEY_NUMADD"
		keypress.key = KEY_NUMADD
		Return keypress
	EndIf
	
	'Numpad -
	If KeyHit(KEY_NUMSUBTRACT) Or KeyDown(KEY_NUMSUBTRACT)
		keypress.name = "KEY_NUMSUBTRACT"
		keypress.key = KEY_NUMSUBTRACT
		Return keypress
	EndIf
	
	'Numpad .
	If KeyHit(KEY_NUMDECIMAL) Or KeyDown(KEY_NUMDECIMAL)
		keypress.name = "KEY_NUMDECIMAL"
		keypress.key = KEY_NUMDECIMAL
		Return keypress
	EndIf
	
	'Numpad /
	If KeyHit(KEY_NUMDIVIDE) Or KeyDown(KEY_NUMDIVIDE)
		keypress.name = "KEY_NUMDIVIDE"
		keypress.key = KEY_NUMDIVIDE
		Return keypress
	EndIf

'Function keys
	'F1
	If KeyHit(KEY_F1) Or KeyDown(KEY_F1)
		keypress.name = "KEY_F1"
		keypress.key = KEY_F1
		Return keypress
	EndIf
	
	'F2
	If KeyHit(KEY_F2) Or KeyDown(KEY_F2)
		keypress.name = "KEY_F2"
		keypress.key = KEY_F2
		Return keypress
	EndIf
	
	'F3
	If KeyHit(KEY_F3) Or KeyDown(KEY_F3)
		keypress.name = "KEY_F3"
		keypress.key = KEY_F3
		Return keypress
	EndIf
	
	'F4
	If KeyHit(KEY_F4) Or KeyDown(KEY_F4)
		keypress.name = "KEY_F4"
		keypress.key = KEY_F4
		Return keypress
	EndIf
	
	'F5
	If KeyHit(KEY_F5) Or KeyDown(KEY_F5)
		keypress.name = "KEY_F5"
		keypress.key = KEY_F5
		Return keypress
	EndIf
	
	'F6
	If KeyHit(KEY_F6) Or KeyDown(KEY_F6)
		keypress.name = "KEY_F6"
		keypress.key = KEY_F6
		Return keypress
	EndIf
	
	'F7
	If KeyHit(KEY_F7) Or KeyDown(KEY_F7)
		keypress.name = "KEY_F7"
		keypress.key = KEY_F7
		Return keypress
	EndIf
	
	'F8
	If KeyHit(KEY_F8) Or KeyDown(KEY_F8)
		keypress.name = "KEY_F8"
		keypress.key = KEY_F8
		Return keypress
	EndIf
	
	'F9
	If KeyHit(KEY_F9) Or KeyDown(KEY_F9)
		keypress.name = "KEY_F9"
		keypress.key = KEY_F9
		Return keypress
	EndIf
	
	'F10
	If KeyHit(KEY_F10) Or KeyDown(KEY_F10)
		keypress.name = "KEY_F10"
		keypress.key = KEY_F10
		Return keypress
	EndIf
	
	'F11
	If KeyHit(KEY_F11) Or KeyDown(KEY_F11)
		keypress.name = "KEY_F11"
		keypress.key = KEY_F11
		Return keypress
	EndIf
	
	'F12
	If KeyHit(KEY_F12) Or KeyDown(KEY_F12)
		keypress.name = "KEY_F12"
		keypress.key = KEY_F12
		Return keypress
	EndIf
	
	'Num Lock
	If KeyHit(KEY_NUMLOCK) Or KeyDown(KEY_NUMLOCK)
		keypress.name = "KEY_NUMLOCK"
		keypress.key = KEY_NUMLOCK
		Return keypress
	EndIf
	
	'Scroll Lock
	If KeyHit(KEY_SCROLL) Or KeyDown(KEY_SCROLL)
		keypress.name = "KEY_SCROLL"
		keypress.key = KEY_SCROLL
		Return keypress
	EndIf
	
	'Caps Lock
	If KeyHit(KEY_CAPSLOCK) Or KeyDown(KEY_CAPSLOCK)
		keypress.name = "KEY_CAPSLOCK"
		keypress.key = KEY_CAPSLOCK
		Return keypress
	EndIf

	'Shift (LEFT)
	If KeyHit(KEY_LSHIFT) Or KeyDown(KEY_LSHIFT)
		keypress.name = "KEY_LSHIFT"
		keypress.key = KEY_LSHIFT
		Return keypress
	EndIf
	
	'Shift (RIGHT)
	If KeyHit(KEY_RSHIFT) Or KeyDown(KEY_RSHIFT)
		keypress.name = "KEY_RSHIFT"
		keypress.key = KEY_RSHIFT
		Return keypress
	EndIf
	
	'Control (LEFT)
	If KeyHit(KEY_LCONTROL) Or KeyDown(KEY_LCONTROL)
		keypress.name = "KEY_LCONTROL"
		keypress.key = KEY_LCONTROL
		Return keypress
	EndIf
	
	'Control (RIGHT)
	If KeyHit(KEY_RCONTROL) Or KeyDown(KEY_RCONTROL)
		keypress.name = "KEY_RCONTROL"
		keypress.key = KEY_RCONTROL
		Return keypress
	EndIf
	
	'Alt Key (LEFT)
	If KeyHit(KEY_LALT) Or KeyDown(KEY_LALT)
		keypress.name = "KEY_LALT"
		keypress.key = KEY_LALT
		Return keypress
	EndIf
	
	'Alt key (RIGHT)
	If KeyHit(KEY_RALT) Or KeyDown(KEY_RALT)
		keypress.name = "KEY_RALT"
		keypress.key = KEY_RALT
		Return keypress
	EndIf
	
	'Tilde
	If KeyHit(KEY_TILDE) Or KeyDown(KEY_TILDE)
		keypress.name = "KEY_TILDE"
		keypress.key = KEY_TILDE
		Return keypress
	EndIf
	
	'Minus
	If KeyHit(KEY_MINUS) Or KeyDown(KEY_MINUS)
		keypress.name = "KEY_MINUS"
		keypress.key = KEY_MINUS
		Return keypress
	EndIf
	
	'Equals
	If KeyHit(KEY_EQUALS) Or KeyDown(KEY_EQUALS)
		keypress.name = "KEY_EQUALS"
		keypress.key = KEY_EQUALS
		Return keypress
	EndIf
	
	'Bracket (Open)
	If KeyHit(KEY_OPENBRACKET) Or KeyDown(KEY_OPENBRACKET)
		keypress.name = "KEY_OPENBRACKET"
		keypress.key = KEY_OPENBRACKET
		Return keypress
	EndIf
	
	'Bracket (Close)
	If KeyHit(KEY_CLOSEBRACKET) Or KeyDown(KEY_CLOSEBRACKET)
		keypress.name = "KEY_CLOSEBRACKET"
		keypress.key = KEY_CLOSEBRACKET
		Return keypress
	EndIf
	
	'Backslash
	If KeyHit(KEY_BACKSLASH) Or KeyDown(KEY_BACKSLASH)
		keypress.name = "KEY_BACKSLASH"
		keypress.key = KEY_BACKSLASH
		Return keypress
	EndIf
	
	'Sei-colon
	If KeyHit(KEY_SEMICOLON) Or KeyDown(KEY_SEMICOLON)
		keypress.name = "KEY_SEMICOLON"
		keypress.key = KEY_SEMICOLON
		Return keypress
	EndIf
	
	'Quote
	If KeyHit(KEY_QUOTES) Or KeyDown(KEY_QUOTES)
		keypress.name = "KEY_QUOTES"
		keypress.key = KEY_QUOTES
		Return keypress
	EndIf
	
	'Comma
	If KeyHit(KEY_COMMA) Or KeyDown(KEY_COMMA)
		keypress.name = "KEY_COMMA"
		keypress.key = KEY_COMMA
		Return keypress
	EndIf
	
	'Period
	If KeyHit(KEY_PERIOD) Or KeyDown(KEY_PERIOD)
		keypress.name = "KEY_PERIOD"
		keypress.key = KEY_PERIOD
		Return keypress
	EndIf
	
	'Slash
	If KeyHit(KEY_SLASH) Or KeyDown(KEY_SLASH)
		keypress.name = "KEY_SLASH"
		keypress.key = KEY_SLASH
		Return keypress
	EndIf
	
	Return Null
EndFunction</textarea><br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @dawlane<br><br>Hi,<br><br>I will apply these changes here tonight. What keys does this effect?<br><br>Thanks :D <br><br></td></tr></table><br>
<a name="1165139"></a>

<a name="1165140"></a>

<a name="1165141"></a>

<a name="1165144"></a>

<a name="1165155"></a>

<a name="1165156"></a>

<a name="1165157"></a>

<a name="1165158"></a>

<a name="1165159"></a>

<a name="1165161"></a>

<a name="1165225"></a>

<a name="1165226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What keys does this effect? <br></div>It depends on the keyboard local.<br>The code I posted will work with a full 105 key UK windows keyboard, but it shouldn't be to hard to add others.<br>UK<br><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/d/da/KB_United_Kingdom.svg/800px-KB_United_Kingdom.svg.png"><br>US<br><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/5/51/KB_United_States-NoAltGr.svg/800px-KB_United_States-NoAltGr.svg.png"><br>US-International<br><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/2/22/KB_US-International.svg/800px-KB_US-International.svg.png"><br>I've linked both window keys( left and right of the Alt keys) to KEY_LSYS and KEY_RSYS.<br>The context menu is linked to KEY_HELP.<br>The Tilde is linked to the grave sign ((`) UK and US(~)) and I've add a key for the hash sign key ((#) UK as KEY_NUMSIGN)<br>KEY_QUOTES is actually the apostrophe on some keyboards.<br>The num pad Enter key now is separate from the return key the ascii code is 10 which should be Left Line Feed.<br><br>EDIT:I've changed the code a bit so US and UK keyboard should be similar. Plus I think the code in system.liux.c may be better off being in a switch statement. As I'm sure the compiler would optimise it.<br><br>Keyboard Layout can be found <a href="http://en.wikipedia.org/wiki/Keyboard_layout#United_States" target="_blank">here</a> in the wikki.<br><br>getxkey code in system.linux.c as a switch/case<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">int key;
	key=XLookupKeysym(&amp;event-&gt;xkey,0);
	/*Use the definitions in /usr/include/X11/keysymdef.h to allow remapping or inclusion of other keyboard layouts*/
	/*Other files to modify are in brl.mod/keycodes.mod*/
	
	switch(key){
	
		//Currently Non functional keys on ASCII keyboard.
		case XK_Print: return KEY_PRINT;		//Print Screen
	
		//Working keys
		//must use the keysym defines to stop any confusion with the bulk key scan below	
		//Modifyers
		
		case XK_Alt_R:						//Right Alt and Alt Gr (UK)
		case XK_ISO_Level3_Shift:
			return KEY_RALT;
		case XK_Alt_L:						//Left Alt
			return KEY_LALT;		
		case XK_Control_L: 					//Left control
			return KEY_LCONTROL;
		case XK_Control_R: 					//Right control
			return KEY_RCONTROL;
		case XK_Shift_L:					//Left shift
			return KEY_LSHIFT;
		case XK_Shift_R:					//Right shift
			return KEY_RSHIFT;
			
		//Sytem keys
		case XK_Menu: 
			return KEY_HELP;			//Windows menu key
		case XK_Super_L:
			return KEY_LSYS;			//Left windows key
		case XK_Super_R:
			return KEY_RSYS;			//Right windows key
		case XK_Pause: 
			return KEY_PAUSE;			//Pause/Break key
		case XK_Num_Lock:
			return KEY_NUMLOCK;			//Num lock
		case XK_Scroll_Lock: 
			return KEY_SCROLL;			//Scroll lock
		case XK_Caps_Lock:
			return KEY_CAPSLOCK;		//Caps Locak

		//Keypad
		case XK_KP_Insert:
			return KEY_NUM0;			// 0
		case XK_KP_End: 
			return KEY_NUM1;			// 1
		case XK_KP_Down:
			return KEY_NUM2;			// 2
		case XK_KP_Next:
			return KEY_NUM3;			// 3 May be know as XK_KP_Page_Down
		case XK_KP_Left:
			return KEY_NUM4;			// 4
		case XK_KP_Begin:
			return KEY_NUM5;			// 5
		case XK_KP_Right:
			return KEY_NUM6;			// 6
		case XK_KP_Home:
			return KEY_NUM7;			// 7
		case XK_KP_Up:
			return KEY_NUM8;			// 8
		case XK_KP_Prior:
			return KEY_NUM9;			// 9 May be know as XK_KP_Page_Up
		case XK_KP_Delete:
			return KEY_NUMDECIMAL;		//Keypad Period/Decimal point (.)
		case XK_KP_Enter:
			return KEY_ENTER; 			//Keypad Enter NOTE: here that the keypad enter is now separate from the Return key
		case XK_KP_Add: 
			return KEY_NUMADD;			//Keypad Add (+)
		case XK_KP_Subtract:
			return KEY_NUMSUBTRACT;		//Keypad Minus (-)
		case XK_KP_Multiply:
			return KEY_NUMMULTIPLY;		//Keypad Multiply (*)
		case XK_KP_Divide:
			return KEY_NUMDIVIDE;		//Keypad Divide (/)
	
		//Page Navigation
		case XK_Home: 
			return KEY_HOME;			//Home
		case XK_Page_Up:
			return KEY_PAGEUP;			//Page Up
		case XK_Delete:
			return KEY_DELETE;			//Delete
		case XK_End: 
			return KEY_END;				//End
		case XK_Page_Down:
			return KEY_PAGEDOWN;		//Page Down
		case XK_Insert:
			return KEY_INSERT;			//Insert

		//Common symbols
		case XK_grave:
			return KEY_TILDE;			//Tilde (is actually (`) on both UK and US but shows (~) on top of key for US)
		case XK_numbersign:
			return KEY_NUMSIGN;    		 //Number Sign(#) key UK Windows Keyboard
		case XK_minus:
			return KEY_MINUS;			//Minus (-)
		case XK_equal:
			return KEY_EQUALS;			//Equals (=)
		case XK_bracketleft: 
			return KEY_OPENBRACKET;		//Opening Square Bracket ([)
		case XK_bracketright:
			return KEY_CLOSEBRACKET;	//Closing Square Bracket (])
		case XK_backslash:
			return KEY_BACKSLASH;		//Back Slash (\)
		case XK_semicolon:
			return KEY_SEMICOLON;		//Semi-colon (;)
		case XK_apostrophe:
			return KEY_QUOTES;			//Double Quote (is actually the Apostrophe (') on both UK and US but shows (") on to of key for US)
		case XK_comma:
			return KEY_COMMA;			//Comma (,)
		case XK_period:
			return KEY_PERIOD;			//Period (.)
		case XK_slash:
			return KEY_SLASH;			//Forward Slash (/)
	}

	//Trap the lower 8bits for bulk key scan
	key &amp;=255;
	//Bulk Scan
	if (key&gt;=97&amp;&amp;key&lt;=126) return key+(65-97);		//Keys A to Z	
	if (key&gt;=81&amp;&amp;key&lt;=84) return key+(37-81);		//Cursor (arrows) Keys
	if (key&gt;=190 &amp;&amp; key&lt;=201) return key+(112-190);	//Function keys
	
	return key;</textarea><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165264"></a>

<a name="1165265"></a>

<a name="1165266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure but running the test code in windows looks like system.win32.c has got bugs. Keys B and N don't work or are wrong.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165268"></a>

<a name="1165269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi dawlane,<br><br>I have to work on a car today and tomorrow, but as soon as that's done I'll test out and apply the above code on Linux (and test on Win).<br><br>The one question I have though as far as Linux is does a 64bit OS break the key BRL key code? It's a little weird that no one has ever reported such a problem before. <br><br>The same question would apply to MaxGUI. Is the problem with MaxGUI a 64bit Linux OS only problem.?<br><br>Back on Monday. :D<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165270"></a>

<a name="1165271"></a>

<a name="1165272"></a>

<a name="1165273"></a>

<a name="1165279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Be sure to see above^<br><br>But ya on BlitzMax 1.45 on Win64 several key constants just are not recognized (KEY_PAUSE,KEY_HELP,KEY_NUMSIGN,KEY_NUMLOCK,KEY_SCROLL,KEY_CAPSLOCK) plus key 'N' show as 'KEY_BACKSPACE' and 'B' just not working using your test code. This is with your changes 'not' applied, so just unmodified BRL code.<br><br>WTF.. lol. Crazy stuff. :)<br><br>Edit- You might want to post your test code in the "BlitzMax Programming" forum for others to test with. I would be interested in the results. Some may need to comment out unrecognized key constants.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165311"></a>

<a name="1165313"></a>

<a name="1165314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I must be getting senile in my old age.<br>Teach me for having too many late nights and early mornings and copying and pasting without double checking.<br>The B and N keys should now work as expected as I've fixed the test code.<br>Though certain keys are non functional in windows or wrongly mapped.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165317"></a>

<a name="1165359"></a>

<a name="1165362"></a>

<a name="1165407"></a>

<a name="1165408"></a>

<a name="1165409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The one question I have though as far as Linux is does a 64bit OS break the key BRL key code? <br></div>No it shouldn't as the BlitzMax key codes are defined in keycodes.bmx and keycodes.h (I think it is different on OSX) only if you alter those codes or add new ones will it have an effect.<br>The big problem as far as I can see is cross platform compatibility as what keys should be bound to what keycode as Windows returns on my keyboard VK_OEM_8(223 0xDF) for the grave key, but BlitzMax links it to VK_OEM_3 (192 0xC0) which is the US standard and then there is the System keys which are processed differently.<br>When you come to think of it the X Servers way is more flexible than the windows way of doing things.<br><br>From what I can see the constants defined in keycodes.bmx are directly related to the virtual key codes in Windows. <br><br>The code above will break cross platform keyboard compatibility but give you virtually full control of the keyboard on Linux. But as you have found out half the keys didn't work as you expected when using the original code in system.linux.c.<br><br>For compatibility issues take for instance the apostrophe(') key on my keyboard under windows it returns KEY_TILDE, yet if you look at the images above it should return KEY_QUOTES. The hash(# UK) returns KEY_QUOTES. With the looks of it BlitzMax does very little keymapping on windows and just check to see if any shift,control and system key is pressed.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Missing posts.<br><div class="quote"> Richard Betson	(Posted 1 day ago) #21<br>OK, cool. As a Linux newbie I was not sure.:)<br><br>I'll be testing this out the next few days.<br><br>"Though certain keys are non functional in windows or wrongly mapped."<br><br>Yes this is true and perhaps a bug. For example KEY_PAUSE, KEY_HELP, KEY_NUMLOCK and KEY_SCROLL are listed in the doc's but are not recognized as constants. I'll be testing this out in Linux shortly .<br><br>This makes me wonder about how GetChar() might be functioning so I'm off to test that as well for Win 64bit and Linux. <br></div><div class="quote"> skidracer	(Posted 1 day ago) #22<br>Key codes are not char codes.<br><br>All keyboards will have the same key code for say the key in row 5 of column 2 no matter what char code it maps to.<br><br>Last edited 1 day ago <br></div><div class="quote"> dawlane	(Posted 1 day ago) #23<br>"This makes me wonder about how GetChar() might be functioning"<br>As skid says key codes are not char codes. When you use GetChar it will return the ASCII value of the symbols on the keyboard (what symbols depends on what modifyer key is being pressed). If I remember on Windows it's the TranslateMessage function that converts the virtual keycode (from a WM_KEYDOWN message) to a character (WM_CHAR message) and on X it's XLookupString that does it.<br>If you use the XEV command line tool in Linux and press a key it will give you a keycode and a keysym.<br><br>For example KEY_PAUSE, KEY_HELP, KEY_NUMLOCK and KEY_SCROLL<br>Well the last time I remember seeing a Help Key was on a pre-2007 Mac keyboard (I think it's now the fn key on the later models) and before that it was on a Commodore Amiga.<br>On windows KEY_NUMLOCK, KEY_PAUSE and KEY_SCROLL should work.<br><br>Last edited 1 day ago <br></div><div class="quote"> Richard Betson	(Posted 19 hours ago) #24<br>Key codes are not char codes<br><br>Right on.:)<br><br>"On windows KEY_NUMLOCK, KEY_PAUSE and KEY_SCROLL should work"<br><br>Well, on my Windows 7 64bit system I have to comment out these constants else I get "Compile Error Identifier "KEY_above identifier" not found" on BlitzMax 1.45 using the above test code. <br></div><div class="quote"> dawlane	(Posted 16 hours ago) #25<br>If you look in brl/keycodes.mod/keycodes.bmk they are there but are commented out. If you uncomment them and make sure that they are defined in the enum of the keycodes.h (like in the code above) then they should work.<br> <br></div> <br><br></td></tr></table><br>
<a name="1173167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I have not forgot about this. :) I've just been really busy and should be applying changes shortly. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
