<!DOCTYPE html><html lang="en" ><head ><title >some gtk2 code</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >some gtk2 code</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=109" >Linux Discussion</a>/<a href="#bottom" >some gtk2 code</a><br><br>
<a name="677032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> An example of using GTK2 from BlitzMax without any C/C++ glue.<br><br>It's not exactly stunning as gadgetpositions are wrong and the event loop is looking a bit broken.<br><br>Has anyone else been doing any GTK development?<br><br>Oh, and you may need a sudo apt-get install libgtk2.0-dev to build.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' gtk2.bmx

Strict

?Linux
Import "-L/usr/lib"
Import "-lgtk-x11-2.0"
Import "-lgdk-x11-2.0"
Import "-lglib-2.0"
?
	
Extern

Function gtk_init(argc Ptr,argv:Byte Ptr Ptr Ptr)
Function gtk_exit(exitcode)
Function gtk_main_iteration()
Function gtk_main_iteration_do(block)

Function gtk_widget_set_uposition(widget,x,y) 
Function gtk_widget_set_usize(widget,w,h) 
Function gtk_widget_show(widget)
Function gtk_widget_show_now(widget)
Function gtk_widget_hide(widget)
Function gtk_widget_destroy(widget)

Function gtk_widget_size_request(widget,area:TGTKRequisition)
Function gtk_widget_size_allocate(widget,area:TGTKAllocation)
Function gtk_widget_get_child_requisition(widget,area:TGTKRequisition)

' windows

Function gtk_window_new(window_type)
Function gtk_window_set_title(window,title$Z)
Function gtk_window_set_default_size(window,width,height)

Function gtk_vbox_new(homogenous,spacing)
Function gtk_box_pack_start(box,child,expand,fill,padding)
Function gtk_box_pack_end(box,child,expand,fill,padding)

Function gtk_fixed_new()

Function gtk_statusbar_new()
Function gtk_statusbar_get_context_id(statusbar,desc$z)
Function gtk_statusbar_push(statusbar,context,text$z)
Function gtk_statusbar_pop(statusbar,context)
Function gtk_statusbar_remove(statusbar,context)
Function gtk_statusbar_set_has_resize_grip(statusbar,bool)
Function gtk_statusbar_get_has_resize_grip(statusbar)

Function gtk_widget_set_sensitive(widget,bool)

'menus

Function gtk_menu_bar_new()
Function gtk_menu_shell_append(menubar,item)
Function gtk_menu_new()
Function gtk_menu_item_new_with_label(label$z)
Function gtk_menu_item_set_submenu(menu,menuitem)
Function gtk_check_menu_item_new_with_label(label$z)
Function gtk_check_menu_item_set_active(menuitem,bool)
Function gtk_menu_shell_insert(menushell,menuitem,pos)

' buttons

Function gtk_button_new()
Function gtk_button_new_with_label(name$z)

Function gtk_check_button_new() 
Function gtk_check_button_new_with_label(name$z)

Function gtk_radio_button_new(gslist) 
Function gtk_radio_button_new_with_label(gslist,name$z)

' sliders

Function gtk_vscrollbar_new(adjustor)
Function gtk_hscrollbar_new(adjustor)
Function gtk_hscale_new(adjustor)
Function gtk_vscale_new(adjustor)

Function gtk_container_add(container,widget)

' dialogs

Function gtk_font_selection_dialog_new(title$z)
Function gtk_color_selection_dialog_new(title$z)
Function gdk_cursor_new(gdk_cursor)
Function gtk_object_set_data(gobject,key$z,data)
Function gtk_object_get_data Ptr(gobject,key$z)
Function g_signal_connect_data(gtkobject,name$z,callback(),user Ptr,destroyhandler(data,user Ptr),flags)
Function gtk_connect(gtkobject,name$z,callback(widget,event Ptr,gadget:TGTKGadget),gadget:TGTKGadget,destroyhandler(data,user Ptr),flags)="g_signal_connect_data"

End Extern

Const GTK_WINDOW_TOPLEVEL=0
Const GTK_WINDOW_DIALOG=1
Const GTK_WINDOW_POPUP=2

'gtkFileRequest("~/")

Const G_CONNECT_AFTER=1
Const G_CONNECT_SWAPPED=2

Global GTKDriver:TGTKGuiDriver=New TGTKGuiDriver

Local window:TGadget=CreateWindow("my window",40,40,320,440)

' test menu stuff

Local file:TGadget=CreateMenu("File",0,WindowMenu(window))
Local open:TGadget=CreateMenu("Open",1001,file)
Local recent:TGadget=CreateMenu("Recent",0,file)
For Local i=1 To 5;CreateMenu("file"+i,0,recent);Next
Local quit:TGadget=CreateMenu("Quit",1002,file)
Local options:TGadget=CreateMenu("Options",0,WindowMenu(window))
Local enable:TGadget=CreateMenu("Enable",1003,options)
CheckMenu enable
DisableMenu open

' test button

Local button:TGadget=CreateButton("Button",4,14,100,24,window)
Local checkbutton:TGadget=CreateButton("CheckButton",4,42,100,24,window,BUTTON_CHECKBOX)
Local radiobutton:TGadget=CreateButton("RadioButton",4,70,100,24,window,BUTTON_RADIO)
Local okbutton:TGadget=CreateButton("OK",4,98,100,24,window,BUTTON_OK)
Local cancelbutton:TGadget=CreateButton("Cancel",4,126,100,24,window,BUTTON_CANCEL)

' test sliders

Local hscroll:TGadget=CreateSlider(150,14,100,24,window,SLIDER_HORIZONTAL)
Local vscroll:TGadget=CreateSlider(120,14,24,100,window,SLIDER_VERTICAL)
Local hslide:TGadget=CreateSlider(170,44,100,34,window,SLIDER_TRACKBAR|SLIDER_HORIZONTAL)
Local vslide:TGadget=CreateSlider(150,34,34,100,window,SLIDER_TRACKBAR|SLIDER_VERTICAL)

UpdateWindowMenu window

'RequestColor 255,0,0
'RequestFont

Local ticker

While True
	GTKDriver.GTKWaitEvent -1
	Select EventID()
		Case 0
			ticker:+1
			If ticker&gt;1000 Print "tick";ticker=0
		Case EVENT_WINDOWMOVE
			Print "WINDOWMOVE"
		Case EVENT_WINDOWSIZE
			Print "WINDOWSIZE"
		Case EVENT_WINDOWCLOSE
			Print "WINDOWCLOSE"
			End
		Case EVENT_WINDOWACTIVATE
			Print "WINDOWACTIVATE"
		Default
			Print "eventid()="+EventID()
	End Select
Wend


Rem
Const GADGET_DESKTOP=0
Const GADGET_WINDOW=1
Const GADGET_BUTTON=2
Const GADGET_PANEL=3
Const GADGET_TEXTFIELD=4
Const GADGET_TEXTAREA=5
Const GADGET_COMBOBOX=6
Const GADGET_LISTBOX=7
Const GADGET_TOOLBAR=8
Const GADGET_TABBER=9
Const GADGET_TREEVIEW=10
Const GADGET_HTMLVIEW=11
Const GADGET_LABEL=12
Const GADGET_SLIDER=13
Const GADGET_PROGBAR=14
Const GADGET_MENUITEM=15
Const GADGET_NODE=16
EndRem


Type TGTKGuiDriver Extends TMaxGUIDriver

	Method New()
		gtk_init(Null,Null)
		maxgui_driver=Self
	End Method
	
	Method Delete()
		gtk_exit(0)
	End Method

	Method GTKWaitEvent(timeout)
		Select timeout
		Case -1
			gtk_main_iteration
		Case 0
			gtk_main_iteration_do True
		Default
		'set watchdog timer...
			gtk_main_iteration_do True
		End Select		
	End Method

	Method GTKPeekEvent()
		GTKWaitEvent -1
	End Method	
	
	Method HotKey(key,state,kind,data=0,x=0,y=0,z=0,src:TGadget=Null)
	End Method
	
	Method CreateGadget:TGadget(gadgetclass,name$,x,y,w,h,group:TGadget,style)
		Local	window:TGTKWindow
		Local	menu:TGTKMenu
		Local	button:TGTKButton
		Local	slider:TGTKSlider
		
		Select gadgetclass
			Case GADGET_WINDOW
				window=New TGTKWindow
				window.init name,x,y,w,h,group,style							
				Return window				
			Case GADGET_MENUITEM
				menu=New TGTKMenu
				menu.init name,x,TGTKMenu(group)
				Return menu
			Case GADGET_BUTTON
				button=New TGTKButton
				button.init name,x,y,w,h,TGTKGadget(group),style
				Return button
			Case GADGET_SLIDER
				slider=New TGTKSlider
				slider.init x,y,w,h,TGTKGadget(group),style
				Return slider
		End Select		
	End Method
		
	Method CreateTimer:TGadget(hz#)
	End Method
	
	Method CreateFont:TGuiFont(handle)
	End Method

	Method LoadFont:TGuiFont(name$,size,flags)
	End Method
		
	Method RequestColor( red,green,blue )
		Local colorreq
		colorreq=gtk_color_selection_dialog_new("Select Color");
		gtk_widget_show colorreq
		While True
			GTKWaitEvent -1
			Print "fontrequester event"
		Wend
	End Method
	
	Method RequestFont:TGuiFont(font:TGuiFont)
		Local fontreq
		fontreq=gtk_font_selection_dialog_new("Select Font");
'		gtk_signal_connect (GTK_OBJECT (fontw), "destroy",(GtkSignalFunc)font_destroy, &amp;fontw);
'		gtk_signal_connect (GTK_OBJECT (GTK_FONT_SELECTION_DIALOG (fontw)-&gt;ok_button),"clicked", (GtkSignalFunc) font_ok, fontw );
'		gtk_signal_connect_object (GTK_OBJECT (GTK_FONT_SELECTION_DIALOG(fontw)-&gt;cancel_button),"clicked", (GtkSignalFunc) gtk_widget_destroy,GTK_OBJECT (fontw));
'		gtk_font_selection_dialog_set_font_name (GTK_FONT_SELECTION_DIALOG(fontw),FontName);
		gtk_widget_show fontreq
		While True
			GTKWaitEvent -1
			Print "fontrequester event"
		Wend
	End Method

	Method SetPointer(shape)
	End Method
	
	Method ActiveGadget:TGadget()
	End Method
	
	Method LoadIconStrip:TIconStrip(source:Object)
	End Method
End Type

Type TGTKWindow Extends TGTKGadget
	Field	vbox,statusbar
	Field	menubar:TGTKMenu

	Method SetText(text$)
		gtk_window_set_title instance,text
	End Method
				
	Method Init(name$,x,y,w,h,group:TGadget,style)
		Local	show
			
		class=GADGET_WINDOW
		instance=gtk_window_new(GTK_WINDOW_TOPLEVEL)
		
		show=True

		gtk_window_set_default_size(instance,w,h)		
		If style&amp;WINDOW_HIDDEN show=False

		gtk_connect instance,"set_focus",FocusWindow,Self,Destroy,0
		gtk_connect instance,"destroy",DestroyWindow,Self,Destroy,0
		gtk_connect instance,"configure_event",MoveWindow,Self,Destroy,0
		gtk_connect instance,"size_request",SizeWindow,Self,Destroy,0
		
		vbox=gtk_vbox_new(False,0)
		gtk_container_add instance,vbox				
		gtk_widget_show vbox
				
		If style &amp; WINDOW_MENU
			menubar=TGTKMenu.CreateMenuBar()
			gtk_box_pack_start vbox,menubar.instance,False,False,2
		EndIf
			
		client=gtk_fixed_new()
		If style &amp; WINDOW_STATUS
			gtk_box_pack_start vbox,client,True,True,2
			statusbar=gtk_statusbar_new()
'			If style &amp; WINDOW_RESIZABLE
			gtk_box_pack_end vbox,statusbar,False,False,2				
			gtk_widget_show statusbar
		Else
			gtk_box_pack_end vbox,client,True,True,2
		EndIf
		gtk_widget_show client
		
		SetShape x,y,w,h
		SetText name

		If group _SetParent group
		SetShow show
		
'		WaitEvent
		
'		Input "wait"
		Print "clientwidth()="+ClientWidth()
	
	End Method

	Method GetMenu:TGadget()
		Return menubar
	End Method

	Function MoveWindow(widget,event Ptr,sender:TGTKGadget)
		PostGuiEvent(EVENT_WINDOWMOVE,sender)
	End Function
	Function SizeWindow(widget,event Ptr,sender:TGTKGadget)
		PostGuiEvent(EVENT_WINDOWSIZE,sender)
	End Function
	Function DestroyWindow(widget,event Ptr,sender:TGTKGadget)
		PostGuiEvent(EVENT_WINDOWCLOSE,sender)
	End Function
	Function FocusWindow(widget,event Ptr,sender:TGTKGadget)
		PostGuiEvent(EVENT_WINDOWACTIVATE,sender)
	End Function
	
End Type

Type TGTKMenu Extends TGTKGadget
	Field	tag
	Field	shell
	Field	label$
	Field	ischeckitem
	Field	pos
	
	Function CreateMenuBar:TGTKMenu()
		Local	menu:TGTKMenu
		menu=New TGTKMenu
		menu.class=GADGET_MENUITEM
		menu.instance=gtk_menu_bar_new()
		menu.shell=menu.instance
		gtk_widget_show menu.instance
		Return menu
	End Function

	Method Init(name$,tagvalue,dad:TGTKMenu)
		instance=gtk_menu_item_new_with_label(name)
		class=GADGET_MENUITEM
		tag=tagvalue
		label=name
		If dad
			If Not dad.shell 
				dad.shell=gtk_menu_new()
				gtk_menu_item_set_submenu dad.instance,dad.shell
			EndIf
			gtk_menu_shell_append dad.shell,instance
			_SetParent dad
			pos=dad.kids.count()
		EndIf
		gtk_widget_show(instance)
	End Method		
	
	Method SetChecked(bool)
		Local	dad:TGTKMenu
		Local	item,pos
		
		If Not ischeckitem
			gtk_widget_destroy instance
			item=gtk_check_menu_item_new_with_label(label)
			dad=TGTKMenu(parent)
			If dad
				gtk_menu_shell_insert dad.shell,item,pos
				gtk_widget_show item
			EndIf
			instance=item
			ischeckitem=True
		EndIf	
		gtk_check_menu_item_set_active instance,bool
	End Method
		
End Type

Type TGTKButton Extends TGTKGadget

	Method init(name$,x,y,w,h,group:TGTKGadget,style)
		Select style
		Case BUTTON_RADIO
			instance=gtk_radio_button_new_with_label(0,name)
		Case BUTTON_CHECKBOX
			instance=gtk_check_button_new_with_label(name)
		Default
			instance=gtk_button_new_with_label(name)
'			If style=BUTTON_OK
'			If style=BUTTON_CANCEL
		End Select
		If group gtk_container_add group.client,instance
		_SetParent group
		SetShape x,y,w,h
		SetShow True
	End Method
End Type

Type TGTKSlider Extends TGTKGadget

	Method init(x,y,w,h,group:TGTKGadget,style)
		Local	adjustor
		If style&amp;SLIDER_TRACKBAR
			If style&amp;SLIDER_HORIZONTAL
				instance=gtk_hscale_new(adjustor)
			Else
				instance=gtk_vscale_new(adjustor)
			EndIf
		Else
			If style&amp;SLIDER_HORIZONTAL	
				instance=gtk_hscrollbar_new(adjustor)
			Else
				instance=gtk_vscrollbar_new(adjustor)
			EndIf
		EndIf		
		If group gtk_container_add group.client,instance
		_SetParent group
		SetShape x,y,w,h
		SetShow True		
	End Method
End Type

Type TGTKRequisition
	Field	width,height
End Type

Type TGTKAllocation
	Field	x:Short,y:Short,width:Short,height:Short
End Type

Type TGTKGadget Extends TGadget

	Field	class,instance,client

	Function Destroy(data,closure Ptr)
		Print "Destroy Handler"
	End Function
			
' interface

	Method Free()
	End Method
	
	Method Rethink()		'resize
		gtk_widget_set_uposition instance,xpos,ypos'+height
		gtk_widget_set_usize instance,width,height
	End Method
	
	Method Redraw()
	End Method
	
	Method ClientWidth()
		Local	handle
		Local	rect:TGTKRequisition=New TGTKRequisition
'		Local	rect:TGTKAllocation=New TGTKAllocation
		handle=instance
		If client handle=client
'		gtk_widget_size_request handle,rect	
'		gtk_widget_size_allocate handle,rect
'		gtk_widget_get_child_requisition handle,rect

'		Local	data:Short Ptr
'		data=Short Ptr(handle)
'		For Local i=48 To 63
'			Print ""+i+":"+data[i]
'		Next

		Local	data:Short Ptr
		
		gtk_object_get_data(client,"width-request")
		If data Print "data[0]="+data[0]
'		Print "handle="+handle
'		Print "clientwidth="+rect.width			
'		Print "clientheight="+rect.height			
'		Return rect.width
	End Method
	
	Method ClientHeight()
	End Method
	
	Method Activate(cmd)
	End Method
	
	Method State()
	End Method
	
	Method SetText(text$)
	End Method
	
	Method GetText$()
	End Method
	
	Method SetFont(font:TGuiFont)
	End Method
	
	Method SetColor(r,g,b)
	End Method
	
	Method SetTextColor(r,g,b)
	End Method
	
	Method SetShow(bool)
		If bool
			gtk_widget_show_now instance
		Else
			gtk_widget_hide instance		
		EndIf
	End Method
	
	Method SetChecked(bool)
	End Method
	
	Method SetEnabled(bool)
		gtk_widget_set_sensitive(instance,bool)
	End Method
	
' window commands

	Method SetStatus(text$)
	End Method
	
	Method GetMenu:TGadget()
	End Method
	
	Method PopupMenu(menu:TGadget)
	End Method
	
	Method UpdateMenu()
	End Method
	
	Method SetMinimumSize(w,h)
	End Method
		
End Type
</textarea> <br><br></td></tr></table><br>
<a name="677467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Someone has:<br><a href="http://developer.berlios.de/projects/blitzmaxgtk/" target="_blank">http://developer.berlios.de/projects/blitzmaxgtk/</a><br><br>no clue if it work, it's a result of google.<br>But it would be nice to have the MaxIde use scintilla i think.. <br><br></td></tr></table><br>
<a name="677476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kernle 32DLL_2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, it works !! <br><br></td></tr></table><br>
<a name="677484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> And for some reason OpenSuse 10.1 (maybe others to) has the gtk2 libs &amp; stuff in <i>/opt/gnome/lib</i>.<br><br>So to make the above code work:<br><pre class=code>
Import "-L/usr/lib"
Import "-L/opt/gnome/lib" 'Add This line...
Import "-lgtk-x11-2.0"
Import "-lgdk-x11-2.0"
Import "-lglib-2.0"
</pre> <br><br></td></tr></table><br>
<a name="678349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings all :-)<br><br>Rather than simply wrapping the gtk libs (like that berlios project seems to be doing), I've been working on a *proper* GTKMaxGUI module over the last week and a half, where you use the standard MaxGUI API, and thus you should simply be able to recompile an app using it.<br><br>So far I only have windows, menus, labels, buttons, comboboxes, textfields, htmlview (using gtkhtml), font requester, color requester, and other stuff working.<br>TextArea is about 75% done. Still have to add tag support to it, but other than that, the selection / text setting/retrieving works.<br>More or less sussed the event stuff... and positioning is working pretty well.<br>Gadgets can change their fonts... which is nice.<br>Menus were a bugger, but I think I solved the hard stuff.<br>Haven't started on list / treeview yet<br>Panels are challenging me at the moment...<br><br>All in all, it's going fairly good, me thinks...<br><br>Max-code only.... no C to see ;-) <br><br></td></tr></table><br>
<a name="678359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kernle 32DLL_2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey, thats sounds very gooood! When we could test it? <br><br></td></tr></table><br>
<a name="678407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Once it's fairly stable and the main features are in.<br><br>We've already got one biggish app running in it without too much trouble.<br><br>Filerequester up and running too now... <br><br></td></tr></table><br>
<a name="680256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is what makes Max such a wonderful tool....<br>...once you have a module that takes away all the nastiness of having to work out how these huge c-based APIs work, you can create a listbox with a single line of code, and throw in a new row with another...<br><br>I've implemented gtkhtml as the browser view. It currently works off libgtkhtml-3.8. It's not the best one, but it was *fairly* easy to implement, and for simple pages it works okay. I was considering an gtk-embedded version of firefox (I've read some stuff about creating firefox as a .so) but I'm sticking with what works for now.<br>Most people should have libgtkhtml-3.x installed (and if not, it's just a package download).<br><br><br>:o) <br><br></td></tr></table><br>
<a name="680304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interestingly, GTK2+ doesn't yet support Tooltips on individual list items...<br><br>I hope no-one minds too much.<br><br>It's apparently on their list of things to do - one day. <br><br></td></tr></table><br>
<a name="680388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kernle 32DLL_2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> no problems, tooltips are not so important like building different kind of gadgets.Could you post a list of features which are solved? <br><br></td></tr></table><br>
<a name="680479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> LGPL should force people to release stuff before they start talking it up I reckon, I suppose I did post the question, tch.<br><br>Sounds all good Brucey <br><br></td></tr></table><br>
<a name="680742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> LGPL should force people to release stuff before they start talking it up I reckon <br></div><br>Why is LGPL some kind of magic bullet?<br>Has it ever been upheld in a court of law?<br><br>And besides anything else theres nothing stopping somone modifying gtk bragging about it and then not distrubuting it!<br><br>And besides all that a module that doesnt actually modify the gtk2 source code, mearly uses it, I'm not entirely sure has any licence restrictions<br><div class="quote"> 5. A program that contains no derivative of any portion of the Library, but is designed to work with the Library by being compiled or linked with it, is called a "work that uses the Library". Such a work, in isolation, is not a derivative work of the Library, and therefore falls outside the scope of this License. <br></div> <br><br></td></tr></table><br>
<a name="680980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Umm, it was a joke Chris. <br><br></td></tr></table><br>
<a name="681070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> LGPL should force people to release stuff before they start talking it up I reckon <br></div><br>Very true... ;-)<br><br>Anyway... here's a screenshot of the IDE using the gtk mod...<br><br><img src="http://brucey.net/programming/blitz/misc/screenshots/Screenshot-MaxIDE.png"><br><br>Good thing about using something like the IDE to test it is that it touches on a lot of the module... makes tracking down things I've missed, a tad easier.<br>ClientWidth/Height has been a royal pain in the .....<br><br>Things to do still :<br>Canvas   :-p<br>Radio button<br>Key accel stuff<br><br>Most of the rest works up to a point...  but there's still a lot of the "little" stuff to sort out -  (eg. raise event on open/close tree node, move text area to selection.. etc)<br><br>And once people get to start testing it, we'll see all the other stuff I've missed ;-) <br><br></td></tr></table><br>
<a name="681071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh yeah, and that weird splitter thing in the IDE doesn't work properly - but then it doesn't work right in fltk either :-) <br><br></td></tr></table><br>
<a name="681085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> and apparently<br><div class="quote"> the list box has been changed so a single click gived a GADGET_SELECT <br></div><br><br>which is a shame, cuz I've been using the docs to help build the mod, and it don't mention that fact... :-(<br><br>I suppose it's a good idea, in order to make the list and treeview work in a similar fashion...  alas, it'll break GUI apps that use list boxes...<br><br>I hope this is a fixed feature now then??  In which case I'll implement the GTK listbox in the same way.<br><br>:-p <br><br></td></tr></table><br>
<a name="682023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> In an effort to make it look like I've done something useful (for a change), I'm posting the current WIP GTK2 module for people to have a play with.<br>It's by no means complete, but it gives an idea of what it will be like to have pretty GTK apps from Max.<br><br>You can Download the alpha release via this link.<br><br>You will need the following packages installed to be able to create apps with GTK: <br><br>libgtk-2.0-dev<br>libgnomecanvas-2.0-dev<br>libgtkhtml-3.8-dev<br><br>(Selecting these in your favourite package manager should also get you the *many* other required packages that these ones use)<br>Remember, the dev packages are only required for building stuff. You use the standard libs for running the apps.<br><br>Things still missing :<br>Accelerator key handling<br>Canvas<br>Radio Button<br><br>and I'm sure there's a whole load of Free() gadgets I've missed along the way.<br><br>Only constructive comments please, or code snippets for testing. "It doesn't work" type comments are pointless and boring.<br><br><b>&lt;WARNING&gt;</b><br>Oh yeah... if you are not comfortable with the fact that the app (and IDE) might crash in a big, crunchy-sounding way, I wouldn't try this <i>YET</i>. (no skid, that doesn't include you ;-)<br><b>&lt;/WARNING&gt;</b> <br><br></td></tr></table><br>
<a name="682898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome work Brucey. Lots of things working really well. Couldn't get htmlview happening, dies with the following sort of thing:<br><div class="quote"> <br>*** glibc detected *** free(): invalid pointer: 0x08323880 ***<br> <br></div> <br><br></td></tr></table><br>
<a name="682911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks skid ;-)<br><br>...strange that ...  I even have the IDE running in gtk (using either 3.6 or 3.8 gtkhtml lib)...<br>But as stated.. my gadget freeing requires a good bit of going thru and making sure it frees the right stuff...<br><br>There's a tests folder with the mod. Perhaps you can try the basic "createhtmlview.bmx" with some different urls ?<br><br>Over the weekend I've got key-acceleration stuff running, sorted treeview expand / collapse, and have working popup menus.<br>Oh, and clicking in a textarea generates a gadgetselect event now too (so that you can track the cursor properly)<br><br>You may notice that menus sometimes appear with icons...  I've got it mapping menu text to gtk stock ids, so that the menus can look more "natural" if you use the correct names.  eg. a menu called "Save" will automagically have a save icon and the standard short-cut key etc.<br>At the moment the mappings are ALWAYS used if it finds one, but perhaps I should consider adding a flag that you can set (or not) if you wish to have this functionality enabled.<br><br>As for the key-stuff... I've gone through the gtk / max key mapping but not tested it thoroughly - only in as much as running it in the IDE and having it pop up stuff when I press F3 etc...<br><br>Still to do :<br>Radio button<br>Canvas<br>Panel pixmap<br><br>will post the newer code later... <br><br></td></tr></table><br>
<a name="682962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> keep going Brucey! great work, nearly there! <br><br></td></tr></table><br>
<a name="682982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can get the current (0.91)  gtk module here.<br>It has the new features as mentioned in my previous post, as well as radio buttons (I've only tested this on a window - not in a panel as yet).<br>Also added EVENT_GADGETOPEN and CLOSE to the treeview,  and got SelectedTreeViewNode() and ModifyTreeViewNode() working.<br><br>I guess next stop will be the Canvas...<br><br>If anyone has *any* thoughts on the best GL widget implementation to go with, now would be a good time to mention them....<br>I'm going to attempt to get gtkglext working....<br><br><br>Enjoy :o) <br><br></td></tr></table><br>
<a name="682990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good work Brucey!<br><br>You mentioned compiling the IDE using this - whenever you feel your code is in a position to do so I'd like to post a gtk version of the linux CE IDE on the SF.net site.  We'd no doubt need to make sure it's identified as being experimental, but I'm thinking it may prove useful to highlight any issues. <br><br></td></tr></table><br>
<a name="683011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good idea Mark.<br>I haven't tried the CE IDE yet with it - been focusing on getting the core stuff running my tests and the official IDE.<br><br>I've found the gtk textarea to be well capable of running underneath the IDE's syntax highlighter. And it should be even better with the new lexer.<br><br>:o) <br><br></td></tr></table><br>
<a name="683102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, just send me a copy by email when you're ready and I'll pop it up on SF.net. <br><br></td></tr></table><br>
<a name="683166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm on holiday this week, but might grab my linux machine from the office if I get bored as I'd like to help with the canvas implementation. <br><br>Hopefully you won't need ANY opengl on your end as AttachGraphics takes an xwindow handle and flags, this is the relevant code from fltkgadget, hopefully you can create a panel with it's own xwindow and be away.<br><br><pre class=code>
' canvas
	
	Field	driver$
	Field	canvas:TGraphics
	Field	canvasflags
	
	Method AttachGraphics:TGraphics( flags )
			canvasflags=flags
	End Method
	
	Method CanvasGraphics:TGraphics()
		If Not canvas
			canvas=brl.graphics.AttachGraphics( flCanvasWindow(flhandle),canvasflags )
		EndIf
		Return canvas
	End Method
</pre><br><br>fltk needed some nasty cludging to get a colormap/visual combo which I think had to be shared by all contexts, but i think you will be fine ignoring that.<br><br><pre class=code>
	XVisualInfo *visual;
	Colormap colormap;	

public:

	Fl_Canvas(int x,int y,int w,int h,const char *title):Fl_Window(x,y,w,h,title) {
		enabled=1;mode=0;visual=0;
	}

	void setenabled(int yesno) {
		enabled=yesno;
	}

	void setmode(int gfxmode) {
		mode=gfxmode;
	}

	void show() {	
		if (window() &amp;&amp; window()-&gt;shown()==0) return;	//parent is hidden so must defer
		if (shown()) {Fl_Window::show(); return;}  // you must do this!
//		static XVisualInfo *visual;
//		static Colormap colormap;	
		if (!visual)
		{
//			visual=glXChooseVisual(fl_display,fl_screen,glspec2);
			visual=_chooseXVisual(mode);
			colormap=XCreateColormap(fl_display,RootWindow(fl_display,fl_screen),visual-&gt;visual,AllocNone);
		}
		Fl_X::make_xid(this,visual,colormap);	
	}
</pre><br><br>ps I found hidegadget more troublesome to implement than freegadget <br><br></td></tr></table><br>
<a name="683278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool... thanks Skid !! :-)<br><br>Turns out it only took 1 line to implement it, rather than using a 3rd-party lib (which is where I'd been heading).<br><br>As you say, I only had to find the xwindow attached to the gadget - which was simply a bit of reading and some trial and error.<br><br>I now have the CreateCanvas test running (that "clock" thing), but currently without mouse / key events - just need to add the signals for those, hopefully...<br><br>Of course, someone will need to give it a good thrashing to see what else on the Canvas needs tweaking!<br><br>Max rocks ;-) <br><br></td></tr></table><br>
<a name="683279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Implementation question :<br><br>In gtkcommon.bmx, I have the following imports :<br>BRL.Graphics<br>BRL.GLGraphics<br>BRL.Max2D<br>BRL.GLMax2D<br><br>since these are only useful for Canvas gadgets, would it be better to have the user specify them in their app, rather? <br><br></td></tr></table><br>
<a name="683297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> It feels like it might make sense for the whole canvas implementation to be an extension of maxgui itself.  Then if you want to write something with just standard windows components, you just:<br><pre class=code>Import BRL.Maxgui</pre><br>If you want something with graphics, you would:<br><pre class=code>Import BRL.Maxgui2d</pre><br>which itself imports BRL.maxgui etc. <br><br></td></tr></table><br>
<a name="683314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hallo :-)<br><br>I've decided to leave out those imports from the module...  cuz it seems to include the GL stuff - which you don't need if you aren't using a canvas...<br>The developer will have to find the correct imports  ;-)<br><br><br>Anyhoo... here's the  latest gtk module with Canvas.<br>There are a couple of tests to play with - glcube and CreateCanvas.<br>Of course some "real" apps should be run against it to see what else needs fixed.<br><br>One note, the canvas key-down event seems to repeat...<br><br>Oh yeah... and it doesn't require any 3rd party GL widget thingy ;-)<br><br>Have fun :o) <br><br></td></tr></table><br>
<a name="683411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Last update for the day.<br><br>This is release 0.93.<br><br>This makes the IDE much more usable, and includes the following :<br>Fixed textarea clipboard actions.<br>Fixed textarea setText.<br>Fixed RequestFile save button text.<br>Fixed font size issues.<br>Fixed Tab sizing.<br><br>Specifically, the IDE doesn't crash when choosing a font now ;-)<br><br>If you find any things that don't work, please list them here, so I can go through them.<br><br>Skid, if you'd like something to do, perhaps you have an idea about the repeating key-down events on the canvas?<br><br>Cheers and enjoy! :o) <br><br></td></tr></table><br>
<a name="683708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yet another...<br><br>This is release 0.94.<br><br>stuff done...<br>* TGTKButtonCheckBox now extends TGTKToggleButton like it was meant to. SetSelected now works for it<br>* Textarea background color now setable. Textarea SetStyle now creates tags on the fly - rather than caching them - dunno if this will be a memory issue.<br><br><br>:o) <br><br></td></tr></table><br>
<a name="684168"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Friday already...<br><br>This latest 0.95 release includes support for key-filters....<br><br>...which enables things like tab-key block-indenting and auto-indent in the IDE.<br><br>One big issue left with the IDE under GTK is <b>undo</b> which is currently rather broken. I have yet to dig into how the undo stuff works, so I'm not sure what I've missed in the GTK code that causes it to do weird stuff.<br><br>It's the only thing stopping *me* using the IDE in GTK full-time now - since undo can be rather useful, and one gets into the habit of pressing ctl-z without noticing usually.<br><br>See <a href="/posts.php?topic=61209" target="_blank">other post</a> on debugging to see what needs changed in <b>appstub.linux.c</b> to stop the debugged app going mad...<br><br>:o) <br><br></td></tr></table><br>
<a name="684229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Last excitement before the weekend...<br><br>This 0.96 release fixes the problem of Undo not working correctly in the IDE.<br><br>It's getting there :-) <br><br></td></tr></table><br>
<a name="684876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Managed to have another quick look today.<br><br>I did get the IDE to open (my bad) but still not having much luck with the htmlview.<br><br>A few things I spotted in processURL,  gtk_html_write is being called with a string not a cstring???<br><br>Also in same method I moved the gtk_html_end call to below the stream &lt;&gt; null block as it causes some pretty nasty hangs if it's not called.<br><br>Mark added a new EVENT_KEYREPEAT event the other day, so will look into generating that in the xevent handler which can hopefully be hooked up to gtk panels and canvas without too much fuss. <br><br></td></tr></table><br>
<a name="684970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks skid.<br><br>TBH, I've only looked at the htmlview enough to get it running in the IDE - for which it works well on the two systems I've tried it. That said, if it tries to access a page that doesn't exist (or it can't find), it'll appear to hang for a while before returning a blank page.<br>When testing an IDE, you need to make sure, I think, that it either has it's own doc folder, or you run the exe from the BlitzMax folder - in order that it can find the docs.<br><br>Here's a new update (0.97) that includes the following new bits :<br>* Tabber now supports tooltips. Tabber will show scroller if too many tabs.<br>* TextField (pressing return) can now activate Default Gadget.<br>* Added SetPointer().<br>* Fixed excessive window SIZE events.<br>* Fixed List missing 'extra' data.<br>* Fixed some Gadget freeing issues.<br><br>I am now using the gtk IDE to develop with, as it is quite stable on my system.<br><br>The "splitter" in the IDE needs an overhaul by the looks as I'm having the same issues in GTK as I had in fltk with it.<br>The problem is that it's not using the "live" GadgetX/Y to refer to it's current position, and things kind of go crazy as you move it. (perhaps this is a *bug* ;-)<br><br>Some things that still need looking at with GTK :<br>* panel pixmaps (no idea where to start with that really)<br>* stepper - gtk <a href="http://developer.gnome.org/doc/API/2.0/gtk/GtkSpinButton.html" target="_blank">comes with one</a>, but it includes a text field box already. So I dunno.<br>* tabber and combo can apparently show images as well as text - according to the docs. Will need to add that.<br><br>There's other stuff too, I'm sure.<br><br>Needs people to test it and see how they get on with it.<br><br>:o) <br><br></td></tr></table><br>
<a name="685051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The "splitter" in the IDE needs an overhaul by the looks as I'm having the same issues in GTK as I had in fltk with it.<br>The problem is that it's not using the "live" GadgetX/Y to refer to it's current position, and things kind of go crazy as you move it. (perhaps this is a *bug* ;-) <br></div><br>I'm not surprised.  TBH, I've left that code well alone, as I'd rather get a much beefier GUI layout mechanism in place.  My Linux PC is stuck in a cupboard at the moment, will try to have a play with this in the next week or so. <br><br></td></tr></table><br>
<a name="685193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'd rather get a much beefier GUI layout mechanism in place <br></div><br>bit OT, but I was thinking perhaps something along the lines of what eclipse has, where you can divide the editor into various areas as you like - all resizable etc.<br>That way people could please themselves.<br><br><br>I had a go at running maxide2 under gtk last night. Apart from some fltk-specific code in there (which I commented out for now), it seemed to work okay, except for resizing the window - the panels stayed where they were - not sure if this is my bug.<br>All the menu-text changes (for languages) I see, which helped me with a menu-SetText bug I didn't know I had.<br>Will stick with the BRL gtk IDE until I can suss out the issues. <br><br></td></tr></table><br>
<a name="685228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> bit OT, but I was thinking perhaps something along the lines of what eclipse has, where you can divide the editor into various areas as you like - all resizable etc.<br>That way people could please themselves. <br></div><br>Precisely.  I've yet to start coding it up, but I have been thinking about it quite a bit over the past couple of weeks (while not being on holiday or watching footy or playing Naked War).  The idea being to have the IDE contain whatever "GUI regions" you want, with them all resizable, etc.  Then you choose to show whatever "GUI element" you want in those regions, e.g. code, help viewer, help nac, code nav, output, debug, etc.  Some regions / elements will allow multiple elements inside then with a related "GUI navigator" attached : e.g. the region containing the code "element" will link to a navigator (tabber).<br><br>If you're interested, look at the type structure mindmap in the maxide2\docs folder.  Any thoughts welcome! <br><br></td></tr></table><br>
<a name="687963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Time for another update...<br><br>This latest 0.98 release fixes a few problems :<br>* Fixed Panel position bug.<br>* Fixed menu SetText issue.<br>* Changed window sizing/positioning *again*. Still not entirely happy with it.<br><br>The window stuff has been hard work, and probably not entirely sorted out yet.<br>But, it is stable enough to run the IDE under it : Download from here<br>(oh, and don't forget, if you intend debugging from this, you will need to add  signal(SIGPIPE, SIG_DFLT);  to <b>appstub.linux.c</b> - see other thread for details)<br><br>I now use it exclusively in linux - rather than the fltk one.<br><br>Still lots to do....<br><br>Comments, ideas, etc, appreciated.<br><br>:o) <br><br></td></tr></table><br>
<a name="687986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work Brucey..<br>I, personally, haven't tried it yet, but it looks like you've put *alot* of work into it.<br>Maybe BRL would like to incorporate it when it's more or less feature complete.. :)<br>Options are always good.. :) <br><br></td></tr></table><br>
<a name="688238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Lars :-)<br><br>Here's an update of the gtk IDE which loads source files exponentially faster.<br>Alas, for this to happen, it requires an IDE hack and a gtk-only feature of the TextArea.<br>For the 1 or 1.5 people that are interested in the technicals.... ;-)<br>... The gtk TextBuffer does colouring using what are called Tags. You simply create a tag of attributes you'd like to apply to some text then set some area of the text with it. It even has a TagTable that lets you cache different types of tag so you can reuse them.<br>All great and good... but there are some problems when plugging this into max...  When you add a new tag it becomes the tag with the highest priority. Therefore if you were to apply colour to a word, and then apply a different color using a tag created before it, it would still show the other color. Ack... what to do?  Fortunately, you can remove tags before applying them to the given text. Alas, you need to do a "remove all tags" on the area to clear it first, which is slowwwww.<br>So imagine doing the following for each syntax highlighted word :<br>remove old tags<br>apply new tag<br>...loading anything more than a few hundred lines of code is mind-numbingly slow.<br>My hack...<br>The IDE knows which section of text it wants to re-apply the colouring to (be it the complete file on loading, or the current line etc), and it first sets that whole area to the default style before iterating through and highlighting it. This is good... I add some code which flicks a "fastUpdate" flag to OFF when it "clears" the highlighting (enabling the remove tags functionality), and the set it ON for the highlighting (which doesn't perform and remove tags, since it doesn't have to!).<br>And it's *very* fast.<br>Even better was running the CE lexer test on it.<br>On my libxml mod (3000+) without the hack, I almost fell asleep waiting for it to show the code. With the hack, it was quick between 1-2 seconds. I doubled up the code to nearly 7000 lines and it took the same amount of time!<br><br>Anyhoo... this is the problem trying to kludge a specific UI to work in a standard cross-platform implementation....<br><br>Oh, and I also added a SetPointer to the source loader so you see a "wait" pointer while it loads, so you can see it's doing something... (should have been there anyway IMHO)<br><br>Have fun :o) <br><br></td></tr></table><br>
<a name="689688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Things are continuing to improve on the gtk front.<br><br>The changes for the 0.99 release include :<br>* Improved textarea SetStyle speed - added setFastUpdate() method."<br>* HTMLView fixes. NONAVIGATE now *correctly* raises event on link-click<br>* Added Window maximize/minimize state awareness, and Window restore<br>* Added WINDOW_TOOL functionality<br>* Added window setIcon() method<br>* Enabled EVENT_WINDOWACTIVATE. Added x,y,w,h to window size / move events. Enabled ActivateWindow()<br>* Added SetGadgetToolTip() function<br>* Fixed Tabber visual issues. Added Tabber icon support<br><br>I'm also including the gtk IDE built on top of the latest gtk module (0.99).<br><br>The Stepper and Panel pixmaps are the only outstanding missing features.<br>Since gtk has no max-type stepper, but instead a spinner which already includes a text field, it looks like I might have to come up with something from scratch. Ho hum.<br>The panel pixmap... well, I haven't even looked at it to be honest. It will require scaling / tiling and stuff to implement, and perhaps a tad out of the scope of my experience :-p<br><br>Of course, if anyone wants to start testing this, and perhaps report back on any issues they have, it would be most appreciated.<br>It's certainly stable enough to use, and in fact, on my work PC the gtkIDE opens .bmx files much faster (running in vmware player) than the native win32 version.<br><br>I am *very* happy now that I have a useable IDE on linux - which was the whole reason for me to embark on the project.<br><br>gtkhtml has issues with style sheets and id's in table tags (rather than using a named anchor). I have a version of docmods (with only a few minor changes) that generates html suitable for viewing in the IDE. If anyone is interested.<br><br>Programming in linux, <b>can</b> be enjoyable....  :o) <br><br></td></tr></table><br>
<a name="689696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent! Will check it out in the morning.<br><br>I'll have a go at implementing panels using canvases, I'm guessing it will be relatively straight forward. <br><br></td></tr></table><br>
<a name="689698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've built *everything* on top of gnome_canvases.<br><br>I had originally used the "fixed" container, but it lacked usefullness, so instead turned to using the gnomecanvas as my base container widget.<br>It actually works really well - once you get the hang of its quirks.<br><br>Apart from the "fixed" positioning of widgets, gnomecanvas also gives me access to changing its color (which is working for panels)  and in theory, displaying images on it. ( <a href="http://developer.gnome.org/doc/API/2.0/libgnomecanvas/GnomeCanvasPixbuf.html" target="_blank">http://developer.gnome.org/doc/API/2.0/libgnomecanvas/GnomeCanvasPixbuf.html</a> )<br><br>btw, gtk is very cool when it comes to adding functionality. For example, I needed to support icons in tabber tabs. Normally, you would only show a label in a tab, but with a few extra tweaks you can work some magic...<br><pre class=code>
tabber tab container, holding -&gt;
    event box container (for tooltip support), holding -&gt;
        hbox container, holding -&gt;
            image widget (either hidden, or shown with pixbuf)
            label widget
</pre><br><br>:o) <br><br></td></tr></table><br>
<a name="689817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AlexO</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks alot for your hard work Brucey :). I can finally start using Linux now :D. I'll be using this ide and I'll report bugs/issues that I find as I develop my next game. <br><br></td></tr></table><br>
<a name="690812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brilliant module Brucey (v.0.99). The GTK GUI for Linux seems a lot nicer and easier to use than the FLTK one. Also, cross-compatability  works a lot better on it as my project that runs fine on Windows will refuse to work on Linux using FLTK, but near perfect with GTK.<br><br>In addition, the GTK Linux IDE is soooo much better than the FLTK one (namely, the web browser) and is actually usable. While I've been trying some test code, I thought I'd share a few improvements that would perfect this module:<br><br>&gt; The GTK module can't handle CHILD windows, i.e. ones grouped to a parent window (they minimize with parent windows, they can't leave parent's area etc.). You can see this in the IDE you compiled when showing requestors, e.g. Find (Ctrl+F). Minimize the main window and the Find window still remains.<br>&gt; The GTK file (or it might have been directory) requestor appears slowly on my Ubuntu 6.06. It loads fine but navigating between directories takes about 10 seconds. Evident in the IDE.<br>&gt; Panel Pixmaps aren't yet supported but would be a welcome addition. I wish I knew how to program Linux API so I could help code it myself.<br><br>Other than that, fantastic!!! To me it seems to be working better than the official one and has fewer bugs!<br><br>Keep the good work up, thanks,<br><br><br>Seb <br><br></td></tr></table><br>
<a name="691883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AlexO</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>&gt; The GTK file (or it might have been directory) requestor appears slowly on my Ubuntu 6.06. It loads fine but navigating between directories takes about 10 seconds. Evident in the IDE.<br> <br></div><br><br>I've stumbled upon this too but with different symptoms. When I navigate between directories to open a .bmx file it simply stalls until I click on another window and click back to regain focus. I have to click a folder, click web browser (for example) then click back to the open dialogue for it to show the next level. <br><br>I'm running on Ubuntu dapper 6.06 if that helps with anything. <br><br></td></tr></table><br>
<a name="691897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi guys,<br><br>I believe this is an issue with the window manager / version of GTK.<br>On both my systems (ubuntu 5.10 and FC4) I haven't had this problem, but I know someone with 6.06 that did, and he tried a different window manager, which solved it.<br><br>I had a look on some forums, and people had reported speed issues on file requesters using apps like gimp and firefox, but there doesn't seem to be anything very specific as to why it affects some apps and not others.<br>It's also possible that the directory requester is looking for mounted / shared / network drives every time....<br><br>Perhaps someone might want to install a different wm and see if that helps?<br><a href="http://www.icewm.org/" target="_blank">http://www.icewm.org/</a><br>hmmm... there's a *lot* to choose from, actually : <a href="http://xwinman.org/" target="_blank">http://xwinman.org/</a><br><br>Can maybe anyone who *isn't* having speed issues with the dir-requester post their linux version? <br><br></td></tr></table><br>
<a name="691934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I've stumbled upon this too but with different symptoms. When I navigate between directories to open a .bmx file it simply stalls until I click on another window and click back to regain focus. I have to click a folder, click web browser (for example) then click back to the open dialogue for it to show the next level.  <br></div><br>Just tried GTK again, and tried the switching window thing, and the requestor kicks back into life after it has been done. So it looks like me and Alex have the same problem. For reference, I'm running Ubunutu 6.06 (dapper) as well which can't be a coincidence. <br><br></td></tr></table><br>
<a name="692258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings :-)<br><br>Okay... I'm about done with this coding lark for now. Nearly everything (except for Panel Pixmaps) appears to work now, so I'm happy enough to give this a version *1* release.<br>Here's the 1.00 release changes/additions :<br><br>* Added label, textarea, progressbar tooltip support.<br>* Added progressbar GetValue().<br>* Changed combobox to extend TGTKList. Added combobox icon support.<br>* Fixed combobox missing 'extra' data.<br>* Fixed treeview Free() crash.<br>* Tweaked menu SetSelected to work in a more 'Max' way...<br>* Keymapping improvements.<br>* Implemented ACTIVATE_REDRAW, SelectTreeViewNode().<br>* Default F10 accel remapped to alt-F10 if app requires F10 hot key.<br>* Modified window/panel layout code based on source from Simon Armstrong.<br>* Added TEXTFORMAT_UNDERLINE and TEXTFORMAT_STRIKETHROUGH.<br>* Added lost-focus handling - only enabled for textfield and textarea for now.<br>* Added SetText, GetText methods.<br>* Implemented UTF8/unicode string handling.<br>* Added working stepper. It works, but it ain't nice...<br><br>It includes the *latest* additions to MaxGUI, so you should probably syncmods or it won't work (lostfocus and new TextFormats).<br>Also, it now support UTF8 properly, so .max files with "funny" characters won't break when loading into the IDE, and of course all the gadgets should happily display most character sets.<br><br>Oh, and here's the gtk IDE built on the latest module.<br><br>As usual, any problems / comments, feel free to let me know and I'll see what to do about sorting things out.<br><br>Enjoy<br><br>:o) <br><br></td></tr></table><br>
<a name="692567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brucey,<br><br>Thanks once again for the brilliant module! Now as far as problems go, just thought I should mention (in case you didn't already know):<br><br>1) The slider on the IDE still doesn't work well. I've had a look myself and I can't work out what's wrong as it's just simple calls to SetGadgetShape() unless there's some bug in GTK's SetGadgetShape() that aren't apparent unless in this situation.<br>2) The IDE sometimes crashes (program immediately terminates) when double-clicking on a module reference in the Help tree view pane.<br><br>But apart from that, this IDE is a lot better than the official FLTK one so I recommend it to any BlitzMax Linux users out there.<br><br>As far as suggestions go, the only feature I could really do with (but is missing) is the SetPanelPixmap() feature. I've had a look at the code for Panels and it seems you are creating them as GnomeCanvas'es. This gave me an idea, how about when SetPanelPixmap() is called, GTKMaxGUI draws the pixmaps onto the canvas as if it were a canvas (which it is), using Max2D drawing commands. I've tried to replicate the image panel flag stretching styles in the code below if that's any help:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">		Select Flags
		
			Case PANELPIXMAP_TILE
				
				SetGraphics( Canvas )
				
				Cls
				
				Local tmpWidthPix% = PixmapWidth(pixmap)
				Local tmpHeightPix% = PixmapHeight( pixmap )

				For Local x% = 0 To GraphicsWidth() Step 0
				
					For Local y% = 0 To GraphicsHeight() Step 0
				
						DrawPixmap (pixmap,x,y)
						y:+tmpHeightPix					


					Next
					
					x:+tmpWidthPix

				Next
			
			Case PANELPIXMAP_CENTER
			
				SetGraphics(Canvas)
				
				Cls
				
				Local tmpMidXGfx% = GraphicsWidth()/2
				Local tmpMidYGfx% = GraphicsHeight()/2
				
				Local tmpMidXPix% = PixmapWidth(pixmap)/2
				Local tmpMidYPix% = PixmapHeight(pixmap)/2
				
				DrawPixmap(pixmap,tmpMidXGfx-tmpMidXPix,tmpMidYGfx-tmpMidYPix)
			
			Case PANELPIXMAP_FIT
			
				Local tmpWidthGfx% = GraphicsWidth()
				Local tmpHeightGfx% = GraphicsHeight()

				Local tmpMidXGfx% = tmpWidthGfx%/2
				Local tmpMidYGfx% = tmpHeightGfx%/2

				Local tmpWidthPix% = PixmapWidth(pixmap)
				Local tmpHeightPix% = PixmapHeight(pixmap)
				
				Local tmpMidXPix% = tmpWidthPix%/2
				Local tmpMidYPix% = tmpHeightPix%/2
				
				Local tmpXScale# = Float(tmpWidthGfx) / Float(tmpWidthPix)
				Local tmpYScale# = Float(tmpHeightGfx) / Float(tmpHeightPix)
				
				Local tmpScaleRatio#
				
				If tmpXScale &gt; tmpYScale Then tmpScaleRatio = tmpYScale Else tmpScaleRatio = tmpXScale
			
				Local pixmap2:TPixmap = ResizePixmap(pixmap,tmpXScale * tmpWidthPix,tmpYScale * tmpHeightPix)
			
				DrawPixmap(pixmap2,tmpMidXGfx%-(tmpMidXPix%*tmpXScale#),tmpMidYGfx%-(tmpMidYPix%*tmpYScale#))
			
			Case PANELPIXMAP_STRETCH

				Local tmpWidthGfx% = GraphicsWidth()
				Local tmpHeightGfx% = GraphicsHeight()
				
				Local pixmap2:TPixmap = ResizePixmap(pixmap,tmpWidthGfx%,tmpHeightGfx%)
				
				DrawPixmap(pixmap2,0,0)

			Default;Return

		EndSelect
	
	Flip</textarea><br><br>Thanks<br><br><br>Seb <br><br></td></tr></table><br>
<a name="693081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings :o)<br><br>you can now get the latest updates to the gtk module via syncmods :<br><pre class=code>
syncmods -u your_user_name -p your_password bah.gtkmaxgui
</pre><br><br>1.01 is now available with the following changes :<br>* Enabled child/parent window relationships with WINDOW_CHILD.<br>* Fixed listbox left-click to raise SELECT event. Added listbox double-click ACTION event.<br>* Added list/tree right-click MENU events.<br>* Fixed tabber redrawing frenzy - hopefully.<br>* More panel layout tweaking.<br><br>...<br>For child windows, you should, as well as indicating the parent window (as the group parameter of CreateWindow), use the WINDOW_CHILD flag.<br>With windows created in this way, when the parent is minimized, the child window is also minimized.<br>As for the child windows in the IDE, they do not populate the "group" param of CreateWindow and so will not work in the expected way - this would be a bug in the IDE ;-)<br><br>The tabber redrawing issue turned out to be related to the way in which the canvas redraws in 512 pixel sections, whereby a tabber greater that this would have multiple redraws issued (1 + width/512), of which I hopefully now ignore the correct number. (worked in my limited testing anyways).<br><br><br>Seb, not sure what issue you have with 1) exactly. With which slider (and on which window/panel) do you have problems?<br><br>Also, the problem with the IDE crashing when you double-click on the Help tree view. Do you mean in particular the docs reference entry in the list, or a .bmx file?<br>I have had neither be a problem here, but it may be something to do with the htmlview (if it's the former).<br>Ideally, you want to be using a slightly tweaked version of docmods anyways, as gtkhtml can't properly see anchors in tables when they are specified as "id=...". In my docmods, I simply added a &lt;a name="..."&gt;&lt;/a&gt; snippet in the relevant place, so that it worked better.<br><br>I know there is a wee issue concerning the way the IDE hides textareas and stopping in debug - in that when the IDE attempts to highlight a line for you on a textarea and then switches to that view, the cursor appears at the start of the line but the line is not highlighted. This appears to be because of something else going on with either hidden textareas not retaining their "selection" state, or perhaps the IDE subsequently setting the cursor position (and thus  invalidating the selection).<br>Of course, the main problem here is that gtk doesn't immediately update visuals, and sticks them on some kind of queue, which means that you may "ask" it to show something, but it will only do so when it is ready to..<br><br>Seb, your idea for the panel pixmaps is good, but a gnomecanvas and a Max canvas are not the same. However, I'll probably have a look at perhaps doing something similar (or suchlike) next, as I'm running out of things to do. (excluding of course the ongoing work on libxml, libxslt, fontconfig and cairo)...<br>I didn't even know there *was* a ResizePixmap() function - just goes to show how much attention I pay...<br><br>Well, as usual, see how you get on with the latest version...<br><br>:o) <br><br></td></tr></table><br>
<a name="693086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been knee deep in other stuff and have been meaning to try it myself but I really do think you should try implementing panels using a plain canvas gadget (max gtk canvas implementation you already have)  adding a few panel specific properties and drawing the different modes with max2d commands, ie<br><br><pre class=code>
field panelimage
field panelmode
field panelred,panelgreen,panelblue

method setpixmap ()
  panelimage=loadimage(pixmap)
end method

method redraw()
  setgraphics 
  setviewport
  setclscolor panelred,panelgreen,panelblue 
  cls
  if panelimage
    select canvasmode
      case PANELPIXMAP_TILE
        setscale
        drawimage drawimage drawimage
      case PANELPIXMAP_CENTER
        setscale
        drawimage 
      case PANELPIXMAP_FIT
        setscale
        drawimage 
      case PANELPIXMAP_STRETCH
        setscale
        drawimage
    endselect
  endif
  flip
end method

etc. etc.
</pre> <br><br></td></tr></table><br>
<a name="693195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for another update, Brucey. Having a few problems though... Firstly, thanks for the WINDOW_CHILD thing - it's just what I needed.<br><br>I've just downloaded the latest MaxIDE source I could find (v1.20<b>d</b>) from the <a href="/codearcs.php?code=1734" target="_blank">code archives</a> and tried to compile it using the latest version of GTK, and the slightly older v1.00 one. For both, I get the error message:<br><pre class=code>*** glibc detected *** free(): invalid pointer: 0x084bf1f8 ***</pre>...just as the window is starting to be initialised, and the program terminates. I tried compiling it in FLTK and it is fine.<br><br>I put a DebugStop to find out where it seems to be crashing, and the program terminates at about line 4820 (may be different on your source), on the command <b>navbar.SelectView 0</b> but when stepping through onto this line, I don't get the above error message, it just termiates.<br><br>Max'd GUI, when compiled, runs fine so it doesn't look as though it is a problem with GTK. If nobody has any ideas, please could you compile the source for us so we can use your new GTK v1.1 IDE.<br><br><br>Thanks<br><br>Seb <br><br></td></tr></table><br>
<a name="693252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> On a different note, I think that I've found a bug...<br><br>Run this sample program and try to resize the child window. After a few resizes, you should notice the child window jump down, and an EVENT_WINDOWMOVE event triggered. It's sporadic but a real problem...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Framework bah.gtkmaxgui

SuperStrict

Rem
Run the following in debug mode and when the parent/child window appear, keep resizing the child window to
different positions and at some point, the child window will drop, and a  EVENT_WINDOWMOVE will be fired in
the debuglog.
EndRem

Global wndParent:TGadget = CreateWindow("Parent Window",50,50,700,500,Null,15|WINDOW_CLIENTCOORDS)	'Create a parent window

	Global gadPanel:TGadget = CreatePanel(0,0,700,500,wndParent) 'Just so that you can see the parent's client area
	SetPanelColor(gadPanel,255,0,0)
	SetGadgetLayout(gadPanel,1,1,1,1)
	
	Global wndChild:TGadget = CreateWindow("Child Window",50,50,300,200,wndParent,15|WINDOW_CHILD)	'Create a child window

MaximizeWindow(wndParent)

Repeat

	Select WaitEvent()
	
		Case EVENT_WINDOWCLOSE;If EventSource() = wndParent Then End
		
	EndSelect

	DebugLog CurrentEvent.ToString$()

Forever</textarea><br><br>Because it is random, I can't seem to find what it causing it. Do you have any ideas?<br><br><br>Seb<br><br><br>P.S. If you can't see it, let me know and I'll try to find a better example. <br><br></td></tr></table><br>
<a name="693255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found an even bigger bug <b>that isn't random</b>, (that is probably related):<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

Framework bah.gtkmaxgui

Rem

Instructions
=================================

First, try with just EVENT_WINDOWMOVE... The window just keeps moving down and
to the left of the screen infintely.

Next, try with just EVENT_WINDOWSIZE... The window suddenly jumps to becoming
the full width/height of the screen.


NOTE: Both of these tests perform normally when compiled on Windows/Mac.

=================================

EndRem

Global wndTest:TGadget = CreateWindow("Test Window",100,100,300,200,Null,15|WINDOW_CLIENTCOORDS)
		
Repeat

	Select WaitEvent()
	
		Case EVENT_WINDOWCLOSE;End
		Case EVENT_APPTERMINATE;End
		
		Case EVENT_WINDOWMOVE;SetGadgetShape(wndTest,GadgetX(wndTest),GadgetY(wndTest),ClientWidth(wndTest),ClientHeight(wndTest))
		'Case EVENT_WINDOWSIZE;SetGadgetShape(wndTest,GadgetX(wndTest),GadgetY(wndTest),ClientWidth(wndTest),ClientHeight(wndTest))
		
		Default 
		
	EndSelect
	
	DebugLog CurrentEvent.ToString$()
	
Forever
	

</textarea><br><br>Seems like a problem either with ClientWidth()/ClientHeight(), GadgetX()/GadgetY(), or SetGadgetShape().<br><br><b>Edit: The same also happens when the window isn't WINDOW_CLIENTCOORDS, and you use GadgetWidth()/GadgetHeight() instead.</b> <br><br></td></tr></table><br>
<a name="693461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I had a go getting panel pixmaps to work using the max2d way, and it did draw things as expected. However, I couldn't get any gadgets *on* the canvas to appear any more - where if for example I had a button on a panel, if I moused-over it a grey outline would appear where the button was, and it would even accept button-presses.<br><br>So, in the end, I've opted for using gdk pixbufs, which support scaling, and can be added to a gnome canvas as a canvas item (much like all the other widgets do), and it seems to work okay.<br><br>I've uploaded a new (1.02) version with the following changes:<br><br>* Added panel pixmaps : currently only FIT, STRETCH and CENTER are working.<br>* Fixed some issues with SetGadgetShape on a window. Now attempts to ignore SetShape-driven events.<br><br><br>Seb, it seems I'm not doing much in the way of supporting WINDOW_CLIENTCOORDS at the moment, which is why it doesn't handle some things correctly when that is enabled for a window.<br>However, I've tweaked some of the size/move event handlers which fix some of the issues you've been having (see the "sebtest_x" tests in the tests folder)...  But not all.<br>Will see next what I need to do to better handle clientcoords...<br><br>I'll have a look into that IDE bug too...<br><br><br>:o) <br><br></td></tr></table><br>
<a name="693477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a <a href="http://brucey.net/programming/blitz/modules/gtkmaxgui/gtkMaxIDE120d_102.tar.gz" target="_blank"> link to the 120d IDE</a> compiled with the gtk module. Also included is the modified source.<br><br>Seb, I had no issues running this.<br>Only changes I've made :<br>* changed Framework to bah.gtkmaxgui. commented out fltk import.<br>* added <b>fastupdate</b> support for editor - search for "fastupdate" in the source to see what I did - one section, a couple of extra lines. It just makes it load/parse the code *much* faster.<br><br>Let me know how you get on...<br><br>:o) <br><br></td></tr></table><br>
<a name="693585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for adding Pixmap support... Max'd GUI looks a lot better now. I've downloaded and tried the 120d IDE you posted and when it is double-clicked it opens and closes immediately. I tried running it from the terminal to find out which error message it throws up and it is (surprise, surprise):<br><br><pre class=code>*** glibc detected *** free(): invalid pointer: 0x084bf1f8 ***</pre>I'm running Ubuntu 6.06 Dapper (CD version), on a Pentium 3 laptop, with 256MB RAM, 850Mhz CPU. <br><br><b>Edit: I found out that I can compile and successfully run the original MaxIDE v120 source that comes with Max with the latest release, but I can't with the v120d source code. </b><br><br>Is there a debugging program I can run on Ubunutu that checks packages and stuff when running a program, and that gives me a bit more information than the <i>*** glibc detected ***</i>? I've tried a Google search but it just brings up program specifix fixes etc. <br><br></td></tr></table><br>
<a name="693602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another bug report for you Brucey, although it's not really a bug, more of an inconsistency...<br><br>Basically, in Win32, Cocoa, and FLTK, changing a gadget's properties programatically (e.g. using SetGadgetText(), SetButtonState() ) <b>doesn't</b> trigger a GAGDET_ACTION event. However in GTK, it does.<br><br><pre class=code>Framework BaH.GTKMaxGUI
'Framework BRL.FLTKMaxGUI
Import BRL.Timer

Global wndMain:TGadget = CreateWindow("Hello",100,100,400,300,Null,15)
	Global gadTextBox:TGadget = CreateTextField(10,10,370,20,wndMain)
	Global gadCheckBox:TGadget = CreateButton("Test Checkbox",10,30,370,20,wndMain,BUTTON_CHECKBOX)
	
	CreateTimer(1)
	
Global varSwitch:Int = 0

Repeat

	Select WaitEvent()
		
		Case EVENT_WINDOWCLOSE;End
		
		Case EVENT_TIMERTICK
		
			If varSwitch = 0 Then
		
			SetButtonState(gadCheckBox,1)
			SetGadgetText(gadTextBox,"Test Text")
			varSwitch = 1
			
			Else
			
			SetButtonState(gadCheckBox,0)
			SetGadgetText(gadTextBox,"")
			varSwitch = 0
			
			EndIf
		
	EndSelect
	
	DebugLog CurrentEvent.toString$()
	
Forever</pre><br><br>Have a look at the debug log as the gadgets are changed with a) FLTK and then b) GTK.<br><br>Cheers Brucey<br><br>Seb <br><br></td></tr></table><br>
<a name="693606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another one, however it maybe that it hasn't been added yet, instead of a bug:<br><br>When a gadget has "&amp;" in its text (in Win32, Cocoa and FLTK), the next letter after it is underlined, the ampersand removed and the gadget becomes sensitive to Alt + Next Letter.<br><br>Here some code for testing...<br><br><pre class=code>'Framework BaH.GTKMaxGUI
Framework BRL.FLTKMaxGUI
Import BRL.Timer

Global wndMain:TGadget = CreateWindow("Hello",100,100,400,300,Null,15)
	Global gadCheckBox:TGadget = CreateButton("&amp;Test Button",10,30,370,30,wndMain)
	
Repeat

	Select WaitEvent()
		
		Case EVENT_WINDOWCLOSE;End
		
	EndSelect
	
	DebugLog CurrentEvent.toString$()
	
Forever</pre><br><br>P.S. <b>Brucey,</b> I hope you don't mind me posting so often. As Skid will tell you, I do post a lot of bug reports for MaxGUI... <br><br></td></tr></table><br>
<a name="694192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Seb, thanks for the reports...<br><br>You might like to try running the crashing IDE in <b>strace</b>...<br><pre class=code>strace ./gtkMaxIDE</pre><br>It will create a "stack" trace and may help pin down where it blows up. Unfortunately, Max doesn't create any useful symbols so if it crashes inside Max code (rather than in say, a gtk lib) it'll be a bit harder to track it down.<br>I've also used gdb (gnu debugger) on max code to track down some problems in the past, but it's not the easiest program to get to grips with.<br>If strace produces anything remotely coherent, you might want to post it in a codebox here...<br><br><br>The GADGET_ACTION event must be being raised by the SetButtonState... so I will wrap that so that it doesn't.<br><br>The ampersand thing... I only coded it for Menus - silly me - not thinking about buttons etc... I presume it is *only* buttons that need this?<br>Will sort that out too :-)<br><br>P.S...  feedback is very much appreciated, and definitely required if improvements are to be made.<br><div class="quote"> As Skid will tell you, I do post a lot of bug reports for MaxGUI... <br></div><br>Yeah, you tend to find a lot of bugs when writing a GUI editor, like I have with GED ;-) <br><br></td></tr></table><br>
<a name="694261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Running the IDE in strace (thank's for letting me know) gives:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "/doc/commands.html#CreateBank ta"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "o.mod/doc/commands.html#Upper ta"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "&gt;\r\n&amp;nbsp;&lt;a class=navsmall href="..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "mall href=../../mod/brl.mod/blit"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "ll href=../../mod/brl.mod/blitz."..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "s.html#EventExtra target=main&gt;Ev"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "nbsp;&lt;a class=navsmall href=../."..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "hics&lt;/a&gt;&lt;br&gt;\r\n&lt;div id=brl_graphi"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
brk(0x83a9000)                          = 0x83a9000
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "d/freejoy.mod/doc/commands.html#"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, " target=main&gt;ACos&lt;/a&gt;&lt;br&gt;\r\n&amp;nbsp"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "ss=navsmall href=../../mod/brl.m"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, ".mod/doc/commands.html#SetViewpo"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "&gt;\r\n&amp;nbsp;&lt;a class=navsmall href="..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "p;&lt;a class=navsmall href=../../m"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "tItem&lt;/a&gt;&lt;br&gt;\r\n&amp;nbsp;&lt;a class=na"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "ain&gt;SliderValue&lt;/a&gt;&lt;br&gt;\r\n&amp;nbsp;&lt;"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "avbig href=../../mod/brl.mod/glm"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "ain&gt;KeyDown&lt;/a&gt;&lt;br&gt;\r\n&amp;nbsp;&lt;a cl"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "pt&lt;/a&gt;&lt;br&gt;\r\n&amp;nbsp;&lt;a class=navsm"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "ream&lt;/a&gt;&lt;br&gt;\r\n&amp;nbsp;&lt;a class=nav"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "stream.mod/doc/commands.html tar"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "ended&lt;/a&gt;&lt;br&gt;\r\n&lt;a class=navsmall"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "ll href=../../mod/brl.mod/maxgui"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "d/brl.mod/maxgui.mod/doc/command"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "s=navsmall href=../../mod/brl.mo"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
brk(0x83d9000)                          = 0x83d9000
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "=navsmall href=../../mod/brl.mod"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "\n&lt;a class=navsmall href=../../mo"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "s=navsmall href=../../mod/brl.mo"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "ToObject&lt;/a&gt;&lt;br&gt;\r\n&lt;a class=navsm"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "me&lt;/a&gt;&lt;br&gt;\r\n&lt;a class=navsmall hr"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "d/brl.mod/pngloader.mod/doc/comm"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "rget=main&gt;MouseDown&lt;/a&gt;&lt;br&gt;\r\n&lt;a "..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "ds.html#PokeFloat target=main&gt;Po"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "RemoveLink&lt;/a&gt;&lt;br&gt;\r\n&lt;a class=nav"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "small href=../../mod/brl.mod/max"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "od/brl.mod/maxgui.mod/doc/comman"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "all href=../../mod/brl.mod/socke"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "d/brl.mod/audio.mod/doc/commands"..., 4096) = 4096
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "Upper target=main&gt;Upper&lt;/a&gt;&lt;br&gt;\r"..., 4096) = 3627
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
close(14)                               = 0
munmap(0xb6d56000, 4096)                = 0
brk(0x8409000)                          = 0x8409000
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
brk(0x8439000)                          = 0x8439000
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
brk(0x8469000)                          = 0x8469000
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
brk(0x848c000)                          = 0x848c000
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
writev(4, [{"\2\30\4\0c\0\200\2\0\10\0\0_\200C\0007\2\5\0d\0\200\2c"..., 604}, {"SHAPE", 5}, {"\0\0\0", 3}], 3) = 612
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(4, "\23\0\223\1c\0\200\2c\0\200\2\0\363=\10\0\0\0\0\254\223"..., 32) = 32
read(4, "\23\0\225\1b\0\200\2b\0\200\2\0\363=\10\0\0\0\0\254\223"..., 32) = 32
read(4, "\17\324\225\1b\0\200\2\2\0\0\0\0\0\0\0\264C\331\267\0\0"..., 32) = 32
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(4, "\17\324\225\1c\0\200\2\2\0\0\0\330\\\344\277\271\375\30"..., 32) = 32
read(4, "\23\\\231\1f\0\200\2f\0\200\2\0\0\200\2\1\0\0\300\1\0\0"..., 32) = 32
read(4, "\23\\\235\1g\0\200\2g\0\200\2\0\0\200\2\1\0\0\300\1\0\0"..., 32) = 32
read(4, "\23\\\241\1h\0\200\2h\0\200\2\0\0\200\2\1\0\0\300\1\0\0"..., 32) = 32
read(4, "\23\\\245\1i\0\200\2i\0\200\2\0\0\200\2\1\0\0\300\1\0\0"..., 32) = 32
read(4, "\23\\\251\1j\0\200\2j\0\200\2\0\0\200\2\1\0\0\300\1\0\0"..., 32) = 32
read(4, "\23\\\255\1k\0\200\2k\0\200\2\0\0\200\2\1\0\0\300\1\0\0"..., 32) = 32
read(4, "\1\363\256\1\0\0\0\0\1\200@\0\0\0\0\0\20\0\0\0\20\0\0\0"..., 32) = 32
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
poll([{fd=4, events=POLLIN}, {fd=5, events=POLLIN}, {fd=9, events=POLLIN|POLLPRI}, {fd=11, events=POLLIN|POLLPRI}, {fd=12, events=POLLIN|POLLPRI}, {fd=13, events=POLLIN|POLLPRI}], 6, 0) = 0
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
ioctl(3, FIONREAD, [0])                 = 0
gettimeofday({1155218371, 901511}, NULL) = 0
stat64("/home/sebholl/Desktop/BlitzMax/doc/index.html", {st_mode=S_IFREG|0644, st_size=1505, ...}) = 0
stat64("/home/sebholl/Desktop/BlitzMax/doc/index.html", {st_mode=S_IFREG|0644, st_size=1505, ...}) = 0
stat64("/home/sebholl/Desktop/BlitzMax/doc/index.html", {st_mode=S_IFREG|0644, st_size=1505, ...}) = 0
open("/home/sebholl/Desktop/BlitzMax/doc/index.html", O_RDONLY) = 14
fstat64(14, {st_mode=S_IFREG|0644, st_size=1505, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb6d56000
_llseek(14, 0, [0], SEEK_CUR)           = 0
fstat64(14, {st_mode=S_IFREG|0644, st_size=1505, ...}) = 0
_llseek(14, 0, [0], SEEK_SET)           = 0
read(14, "&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;link rel=\"style"..., 1505) = 1505
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
_llseek(14, 1505, [1505], SEEK_SET)     = 0
_llseek(14, -1505, [0], SEEK_CUR)       = 0
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
close(14)                               = 0
munmap(0xb6d56000, 4096)                = 0
stat64("/home/sebholl/Desktop/BlitzMax/doc/index.html", {st_mode=S_IFREG|0644, st_size=1505, ...}) = 0
open("/home/sebholl/Desktop/BlitzMax/doc/index.html", O_RDONLY) = 14
fstat64(14, {st_mode=S_IFREG|0644, st_size=1505, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb6d56000
_llseek(14, 0, [0], SEEK_CUR)           = 0
fstat64(14, {st_mode=S_IFREG|0644, st_size=1505, ...}) = 0
_llseek(14, 0, [0], SEEK_SET)           = 0
read(14, "&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;link rel=\"style"..., 1505) = 1505
_llseek(14, 1505, [1505], SEEK_SET)     = 0
read(14, "", 4096)                      = 0
close(14)                               = 0
munmap(0xb6d56000, 4096)                = 0
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
gettimeofday({1155218371, 939348}, NULL) = 0
stat64("/home/sebholl/Desktop/BlitzMax/doc/bmax120.png", {st_mode=S_IFREG|0644, st_size=13680, ...}) = 0
stat64("/home/sebholl/Desktop/BlitzMax/doc/bmax120.png", {st_mode=S_IFREG|0644, st_size=13680, ...}) = 0
open("/home/sebholl/Desktop/BlitzMax/doc/bmax120.png", O_RDONLY) = 14
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
fstat64(14, {st_mode=S_IFREG|0644, st_size=13680, ...}) = 0
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb6d56000
_llseek(14, 0, [0], SEEK_CUR)           = 0
fstat64(14, {st_mode=S_IFREG|0644, st_size=13680, ...}) = 0
_llseek(14, 12288, [12288], SEEK_SET)   = 0
read(14, "\30\37x\336\202\335^\201m\222\t\20\261\365\275\335-&amp;\313"..., 1392) = 1392
_llseek(14, 0, [0], SEEK_SET)           = 0
close(14)                               = 0
munmap(0xb6d56000, 4096)                = 0
stat64("/home/sebholl/Desktop/BlitzMax/doc/bmax120.png", {st_mode=S_IFREG|0644, st_size=13680, ...}) = 0
open("/home/sebholl/Desktop/BlitzMax/doc/bmax120.png", O_RDONLY) = 14
fstat64(14, {st_mode=S_IFREG|0644, st_size=13680, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb6d56000
_llseek(14, 0, [0], SEEK_CUR)           = 0
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
fstat64(14, {st_mode=S_IFREG|0644, st_size=13680, ...}) = 0
_llseek(14, 12288, [12288], SEEK_SET)   = 0
read(14, "\30\37x\336\202\335^\201m\222\t\20\261\365\275\335-&amp;\313"..., 1392) = 1392
_llseek(14, 0, [0], SEEK_SET)           = 0
read(14, "\211PNG\r\n\32\n\0\0\0\rIHDR\0\0\0x\0\0\0x\10\2\0\0\0\266"..., 4096) = 4096
brk(0x84ad000)                          = 0x84ad000
read(14, "\262j\27\336E\n_q`\347\221=[\3121m-\337\267\375\350\201"..., 4096) = 4096
read(14, "\6\10\r\264\234\363\371}\300+x\314\204PA^.hr\351\265\371"..., 4096) = 4096
read(14, "\30\37x\336\202\335^\201m\222\t\20\261\365\275\335-&amp;\313"..., 4096) = 1392
read(14, "", 4096)                      = 0
close(14)                               = 0
munmap(0xb6d56000, 4096)                = 0
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
uname({sys="Linux", node="laptop", ...}) = 0
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
open("/etc/gtk-2.0/gdk-pixbuf.loaders", O_RDONLY|O_LARGEFILE) = 14
fstat64(14, {st_mode=S_IFREG|0644, st_size=3119, ...}) = 0
read(14, "# GdkPixbuf Image Loader Modules"..., 1024) = 1024
read(14, "der-jpeg.so\"\n\"jpeg\" 5 \"gtk20\" \"T"..., 1024) = 1024
read(14, "tga.so\"\n\"tga\" 4 \"gtk20\" \"The Tar"..., 1024) = 1024
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
read(14, "  \" 100\n\" &lt;!DOCTYPE svg\" \"*     "..., 1024) = 47
read(14, "", 1024)                      = 0
close(14)                               = 0
stat64("/usr/lib/gtk-2.0/2.4.0/loaders/libpixbufloader-png.so", {st_mode=S_IFREG|0644, st_size=14720, ...}) = 0
open("/usr/lib/gtk-2.0/2.4.0/loaders/libpixbufloader-png.so", O_RDONLY) = 14
read(14, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0\220\24"..., 512) = 512fstat64(14, {st_mode=S_IFREG|0644, st_size=14720, ...}) = 0
old_mmap(NULL, 17648, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 14, 0) = 0xb6ca5000
old_mmap(0xb6ca9000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 14, 0x3000) = 0xb6ca9000
close(14)                               = 0
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
brk(0x84d4000)                          = 0x84d4000
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
open("/dev/tty", O_RDWR|O_NONBLOCK|O_NOCTTY) = 14
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
--- SIGALRM (Alarm clock) @ 0 (0) ---
sigreturn()                             = ? (mask now [])
writev(14, [{"*** glibc detected *** ", 23}, {"free(): invalid pointer", 23}, {": 0x", 4}, {"084a4660", 8}, {" ***\n", 5}], 5*** glibc detected *** free(): invalid pointer: 0x084a4660 ***
) = 63
rt_sigprocmask(SIG_UNBLOCK, [ABRT], NULL, 8) = 0
tgkill(5011, 5011, SIGABRT)             = 0
--- SIGABRT (Aborted) @ 0 (0) ---
+++ killed by SIGABRT +++
</textarea><br><br>I noticed the ***glibc*** message at the end but I can't make anything else out of it. I've tried to use <b>gbd</b>, by type "file ./gtkmaxide" and then "run" but all I get is a load of "no debugging symbols found" before the program halts and doesn't print anymore??? (possibly where it has crashed, but I'm not sure).<br><br><div class="quote"> The ampersand thing... I only coded it for Menus - silly me - not thinking about buttons etc... I presume it is *only* buttons that need this?<br>Will sort that out too :-) <br></div><br>In Windows, the ampersand thing appers on all button types - e.g. checkboxes, option button and standard push buttons. I don't think there are any more. Also, are gadget hotkeys (e.g. Ctrl+O) added to buttons or just menus at the moment?<br><br><div class="quote"> The GADGET_ACTION event must be being raised by the SetButtonState... so I will wrap that so that it doesn't. <br></div><br>It seems also that SetGadgetShape() on Windows, generates an EVENT_WINDOWMOVE / EVENT_WINDOWSIZE event that should be surpressed as well for compatibility with the other modules.<br><br>I don't know much about Linux API programming but I may be able to help you with certain BMax areas of GTKMaxGUI so if you need any help, I'll try my best. You've done so much already, it's the least I can do.<br><br><div class="quote"> Yeah, you tend to find a lot of bugs when writing a GUI editor, like I have with GED ;-)  <br></div><br>What's GED? Are you writing a gui-editor too? Looks like we are in competition, :-P. Have a look at mine (Max'd GUI) in my signature, and if you're interested in any part, let me know.<br><br>Finally,<br><br><div class="quote"> P.S... feedback is very much appreciated, and definitely required if improvements are to be made. <br></div><br>Come on Blitz Community - show your support!!!<br><br><br>Thnx<br><br>Seb <br><br></td></tr></table><br>
<a name="694548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> So strace isn't very helpful then ;-)<br><br>How's about, when running gdb, when the program crashes and the gdb prompt comes back, you try "backtrace" or "bt". I should give you something like a java stack-trace, which shows exactly where the program fell over - with function names etc (if it was in c-code at the time).<br>I'm betting I am freeing up something somewhere that has already freed itself - can't think of any other reasons for the message. And strangely it only happening on your linux and neither of mine...<br><br>I've got the textfield actions suppressed now. Just need to sort out "button" ones, which isn't going to be too tough. (well, I'd have it ready already, but I was playing with writing a mod for realtimebattle yesterday (yay... only took a day and a half!), which I've finished and only need to finish documenting. It's a lot of fun - building robots to battle in an imaginery arena. Not that I'm any good at it myself ;-)<br><br>As for the API, yeah, gtk is quite fully featured as far as things you can call goes - see gtkcommon.bmx for a list of gtk functions I'm using ;-)<br>Am looking forward to general take up of gtk 2.10 which introduces a printing API - which should make implementing that GadgetPrint thing easier.<br>And I also need to look at drag and drop support...  ho hum...<br><br>Hotkeys?  Dunno... I had a look at maxgui.bmx and it looked like it handled all that itself, so we'll have to see when someone tries to use it :-) <br><br></td></tr></table><br>
<a name="695391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings,<br><br>the module has been updated to 1.03 with the following improvements :<br><br>* Fixed textfield SetText raising event.<br><br>* Added mnemonic functionality for buttons.<br><br>* Tweaked window client width/height to work on certain window types. Also takes into account status/menu heights on initial client height testing.<br><br>* Fixed crash on app end after freeing canvas.<br><br>* Fixed label SetText visuals.<br><br><br>As usual, you can get it via syncmods :<br><pre class=code>syncmods -u your_name -p your_password bah.gtkmaxgui</pre><br><br>:o) <br><br></td></tr></table><br>
<a name="695447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again Brucey for the update - I've just been on a power-boat course for the weekend so I've only just got a chance to visit BlitzBasic.com. <br><br>The updates to GTKMaxGUI are brilliant - they have made Max'd GUI from completely unusable to relatively stable. <br><br>I've made a small donation to you so get a beer from me for all your hard work. (Sent to @removed@ .)<br><br>A bug I noticed to do with "mnemonic functionality" <i>for menus</i>, which is that it breaks when the menu becomes checked...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Framework BaH.GTKMaxGUI

Global wndMain:TGadget = CreateWindow("Test Window",100,100,400,300,Null,15)

	Global mnuContainer:TGadget = WindowMenu(wndMain)
	
	Global mnuFileRoot:TGadget = CreateMenu("&amp;File",0,mnuContainer)
		Global mnuFileChecked:TGadget = CreateMenu("&amp;Ampersand Broken on Checked",0,mnuFileRoot)
		
CheckMenu(mnuFileChecked)

UpdateWindowMenu(wndMain)

Repeat

	Select WaitEvent()
	
		Case EVENT_WINDOWCLOSE;End
		
	EndSelect

Forever
</textarea><br><br>Also, you know the PANEL_GROUP flag for CreatePanel, according to the docs:<br><br><div class="quote"> PANEL_GROUP: Panel is drawn with a <b>titled</b> etched border. <br></div><br>In GTK, it seems that panels don't have a title above them, just the box.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Framework BaH.GTKMaxGUI
'Framework BRL.FLTKMaxGUI

Global wndMain:TGadget = CreateWindow("Test Window",100,100,500,400,Null,15)

	Global gadPanel:TGadget = CreatePanel(10,40,400,300,wndMain,PANEL_GROUP,"This Should Appear As A Title For The Panel")
	
Repeat

	Select WaitEvent()
	
		Case EVENT_WINDOWCLOSE;End
		
	EndSelect

Forever</textarea><br><br><br>Thanks<br><br><br>Seb <br><br></td></tr></table><br>
<a name="695458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks very much Seb, it's greatly appreciated! :-)<br>I might just put it towards getting my powerbook fixed...<br><br>Glad things are working well for you, generally.<br><br><div class="quote"> A bug I noticed to do with "mnemonic functionality" for menus, which is that it breaks when the menu becomes checked... <br></div><br>Which is funny, coz I thought I'd coded for that. I'm even sure I have a variable for just that case...<br><br>[quote]In GTK, it seems that panels don't have a title above them, just the box../quote]<br>Well... it *was* working... ahhh... my test uses SetText on the panel, not on the create... ;-)<br><br>Will try and sort these out tonight..<br><br>oh... and am thinking of re-writing the underlying layout engine to do away with gnomecanvas - as it has some quirks I could do without - also, it should end up much faster too.. but I work on that as a separate fork cuz it's a big job.<br><br>Many thanks :o) <br><br></td></tr></table><br>
<a name="695460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thanks very much Seb, it's greatly appreciated! :-) <br></div><br>No problem!<br><br><div class="quote"> Will try and sort these out tonight.. <br></div><br>Thanks!<br><br><div class="quote"> oh... and am thinking of re-writing the underlying layout engine to do away with gnomecanvas - as it has some quirks I could do without - also, it should end up much faster too.. but I work on that as a separate fork cuz it's a big job. <br></div><br>That's great - Max'd GUI would *definitely* benefit from a speed increase in the Linux distribution.<br><br><br>Seb <br><br></td></tr></table><br>
<a name="695788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm very pleased to announce version 1.04 of the gtkmaxgui module. This version uses a completely re-engineered gadget layout mechanism, doing away with the iffy gnomecanvas. The change results in a much improved experience, with noticeable speedups in many areas - especially panels.<br><br>A summary of changes :<br><br>* *Engine Rewrite* - Now uses GtkLayout instead of gnomecanvas. Fixes a LOT of rendering anomolies. Should also be faster.<br>* Changed tabber redrawing back.<br>* Fixed check-menu issues with mnemonics and checking a menu initially with UncheckMenu.<br>* Fixed group panel not setting text on create.<br><br><br>As usual, you can pick it up via syncmods...<br><pre class=code>syncmods -u your_name -p your_pass bah.gtkmaxgui</pre><br><br>Hopefully, I haven't added any new issues whilst ripping out the old stuff, but it's always a possibility...<br>Let me know how you get on with it - good or bad.<br><br><br>Enjoy :o) <br><br></td></tr></table><br>
<a name="695829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Version 1.04 seems greatly improved as far as speed goes and the fixes all seem to work. Thanks!!!<br><br>Another bug report unfortunately... Radio buttons seem broken. Have a look at this slightly modified version of your createbutton.bmx test in your mod folder:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict 

Framework bah.gtkmaxgui
'Framework brl.fltkmaxgui

Local window:TGadget
Local button:TGadget[4]

'DebugStop

window=CreateWindow("MaxGui Buttons",40,40,240,300,Null,WINDOW_TITLEBAR)
button[0]=CreateButton("Radio Button 1",10,58,140,24,window,BUTTON_RADIO)
button[1]=CreateButton("Radio Button 2",10,82,140,24,window,BUTTON_RADIO)
button[2]=CreateButton("Radio Button 3",10,106,140,24,window,BUTTON_RADIO)
button[3]=CreateButton("Radio Button 4",10,130,140,24,window,BUTTON_RADIO)


Repeat
	
	Select WaitEvent()
		Case EVENT_WINDOWCLOSE
			End
		Case EVENT_GADGETACTION
			Print "EVENT_GADGETACTION"
	End Select
	
Forever
</textarea><br><br>In the example, pressing a radio button makes the other radio button states irratic. I believe the correct radio button behaviour is that when a radio button is pressed, all other radio buttons within the same parent are unchecked and a <i>single <b>EVENT_GADGETACTION</b></i> from the depressed radio button is fired. Also, they shouldn't toggle - pressing the same radio button repeatedly should result in the button remaining constantly checked. Hope this helps....<br><br>Also, I mentioned earlier about hotkey support for buttons etc (not just menus) and it still doesn't seem to work...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

Framework BaH.GTKMaxGUI
'Framework BRL.FLTKMaxGUI

Global wndMain:TGadget = CreateWindow("Test Window",100,100,400,300,Null,15)
	Global gadButton:TGadget = CreateButton("Test Button",20,20,100,30,wndMain)
	
SetGadgetHotKey(gadButton,KEY_T,MODIFIER_COMMAND)	'Set Gadget HotKey as Control+T


Repeat
	
	Select WaitEvent()
	
		Case EVENT_WINDOWCLOSE;End
		
		Case EVENT_GADGETACTION;If EventSource() = gadButton Then Notify("Button Pressed!!!")
		
	EndSelect
	
Forever</textarea><br><br>Something worth mentioning regarding this, is in Win32 and FLTK MaxGUI, assigning a modifier of, say Control, would mean you would be able to activate the button/menu using either the left or right Control key on the keyboard... on GTK, it only enables the left Control key on menus.<br><br>Only a few more things to go (e.g. tiling pixmaps in panels and drag n' dropping files onto windows) and this module will be complete... Well done Brucey!!!<br><br>A feature request: Would it be possible to implement something like in Windows where you can centralise, and right align text in the status bar by inserting the ~t (tab) symbol. It is used in the IDE where on Windows, the <i>Line: # Char: #</i> appears on the right and the function descriptions appear on the left. Run the following test in Windows to see what I mean:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Global wndMain:TGadget = CreateWindow("Test Window", 100, 100, 400, 300, Null, 15)

SetStatusText(wndMain,"This is on the left~tThis is in the middle~tThis is on the right.")

Repeat

Until SelectEvent() = EVENT_WINDOWCLOSE
</textarea><br><br>I know it's part of the Windows API - which does it automatically, but would it be possible for the GTK module to parse the string for tabs and align the text itself, (on-the-fly), or not?<br><br>Thanks once again<br><br><br>Seb<br><br>P.S. Just out of curiosity, how do you upload custom made modules to syncmods? <br><br></td></tr></table><br>
<a name="695864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> In the example, pressing a radio button makes the other radio button states irratic. <br></div><br>Perhaps I should test with more than two radio buttons... any more than that and it appears to have a mind of its own.<br><br>The splitting of the statusbar using tabs is maybe a no-go, I'm afraid, as a gtkstatusbar has no concept of left/middle/right where the text is concerned. Would require a fair amount of work to implement something similar, I imagine.<br><br>Will have a look into SetGadgetHotKey().<br>And you realize that standard hotkeys for buttons etc would be Alt on linux? ;-)<br><br>The left or right-ness of control keys might be out of my um... control, but I'll see if I can find anything anyways..<br><br>:o) <br><br></td></tr></table><br>
<a name="695874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahhh....<br><div class="quote"> The important thing to remember is that gtk_radio_button_get_group() must be called for each new button added to the group, with the previous button passed in as an argument. <br></div><br>As usual, it helps to read the API docs *properly* !!<br><br>Let that be a lesson to you all ! ;-) <br><br></td></tr></table><br>
<a name="696203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> While I'm at it, other than buttons (push, radio and check), should SetGadgetHotKey() work for any other gadgets? <br><br></td></tr></table><br>
<a name="696262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope - I don't think so... Buttons + Menus (already done) only... <br><br></td></tr></table><br>
<a name="696435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings,<br><br>The latest version, 1.05 introduces the following changes :<br><br>* Fixed radiobutton problem with groups of more than two buttons.<br>* SetHotKey now working for buttons.<br>* Window statusbar text now supports three positions based on tabs.<br><br>sebtest_6.bmx shows off the statusbar enhancement.<br>This now matches both win32 and MacOS for text-formatting in the statusbar. (shame about fltk ;-)<br><br>You can get this update via syncmods :<br><pre class=code>syncmods -u your_name -p your_pass bah.gtkmaxgui</pre><br><br><br>Still to do, in the big, black void of completeness...<br>* tiled panel pixmaps<br>* drag and drop support<br><br>Enjoy :o) <br><br></td></tr></table><br>
<a name="696487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another brilliant update...<br><br><div class="quote"> * Window statusbar text now supports three positions based on tabs. <br></div><br>Thanks very much...<br><br>Found some more minor improvements...<br><br>&gt; When a checkbox or radio button is fired, the state of the button should be passed with the event in EventData(). This isn't needed as such (as you can use ButtonSelected() individually) but the official MaxGUI modules use this method...<br><br>I had a play around and came up with this for the TGTKButton type (<i>in gtkgadget.bmx</i>):<br><br><pre class=code>Function onButtonClicked(widget:Byte Ptr, obj:Object)

	If Not TGTKButton(obj).ignoreButtonClicked Then
		PostGUIEvent(EVENT_GADGETACTION, TGadget(obj), <b>ButtonState(TGadget(obj))</b>)
	EndIf

	TGTKButton(obj).ignoreButtonClicked = False

EndFunction</pre>&gt; Radio buttons (along with checkboxes) should respond to the ButtonState() command as they do in the official mods, to find out which button is selected after the event was fired (and the state should also be passed with EventData upon EVENT_GADGETACTION being fired).<br><br>&gt; This is being really picky, but I thought I would mention it anyway (:-P). You know the status bar, how it has a resize handle, well it seems to have a black border around the handle... Is it supposed to be there, or is it my dodgy Linux setup?<br><br>I'll keep on the look-out for any more minor adjustments that should be made,<br><br>Thanks<br><br><br>Seb <br><br></td></tr></table><br>
<a name="696496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thanks very much... <br></div><br>Pleasure ;-)<br>But really, you should thank GTK for being so flexible. The way you can build your own widgets from the basic ones makes it great for hacking together things like that new statusbar.<br><br><div class="quote"> You know the status bar, how it has a resize handle, well it seems to have a black border around the handle <br></div><br>I dunno why that is. It doesn't appear like that one either of my distros. What if you change your theme, how does it look then?<br>The only thing different with the handle is that the statusbar to which the handle belongs is only slightly wider than the handle itself - being placed in an hbox at the end of several labels.<br><br>...but I see now... I changed my theme, and on some themes it wraps the whole statusbar widget in a box...<br>There are two ways around this, I suppose...<br>1) is to try and use statusbar widgets throughout - instead of labels<br>2) is maybe to replace the handle with an image? (something theme neutral)...<br><br>I guess the former would look the best, but the latter would be harder to implement - there are two statusbar tests in the tests folder which shows what I tried before I came to the current implementation.<br>Might have a play with an image tonight... ;-) <br><br></td></tr></table><br>
<a name="696531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I dunno why that is. It doesn't appear like that one either of my distros. What if you change your theme, how does it look then?<br>The only thing different with the handle is that the statusbar to which the handle belongs is only slightly wider than the handle itself - being placed in an hbox at the end of several labels. <br></div><br>Yep, changing themes makes it disappear. It's not really that big of an issue then, however if the changes I mentioned above (button events with missing EvenntData) could be added that would be great.<br><br>Edit: Another thing... Would you be able to update the GTK module to take account for <i>Skid's <a href="/posts.php?topic=62277#696409" target="_blank">latest OpenUrl$() Linux fix</a></i>.<br><br>Thanks<br><br><br>Seb <br><br></td></tr></table><br>
<a name="696722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Yep, changing themes makes it disappear. <br></div><br>I've decided, for now, just to exclude the handle. Then it's theme safe. Unless it's very important to have a handle on a resizeable window...<br>If it is, then I'll rewrite that bit to use individual statusbars for the three sections. However, that would mean that the right-hand text wouldn't be right-aligned (I haven't been able to right-align text appearing in a statusbar), and would float somewhere "towards" the right side...<br>Personally, I'm happy with the way it appears using the labels..<br><br><div class="quote"> Would you be able to update the GTK module to take account for Skid's latest OpenUrl$() Linux fix. <br></div><br>No problem :-)<br><br><div class="quote"> button events with missing EvenntData <br></div><br>Was looking at that last night. Fixed some other issues with events being raised / setting states while I was there...<br><br>btw.. there's also some other things in the mod that might be of interest :<br>* Function SetAppIcon(pix:TPixmap) - sets icon for all app windows<br>* Function SetGadgetToolTip(gadget:TGadget, tip:String) - sets tooltip for most gadgets (that I could get it working with!)<br>* GTKWindow . Method setIcon(pix:TPixmap) - sets icon for specific window.<br><br>Would be nice if some of these made it into mainstream... <br><br></td></tr></table><br>
<a name="696940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> * Function SetAppIcon(pix:TPixmap) - sets icon for all app windows<br>* Function SetGadgetToolTip(gadget:TGadget, tip:String) - sets tooltip for most gadgets (that I could get it working with!)<br>* GTKWindow . Method setIcon(pix:TPixmap) - sets icon for specific window. <br></div><br>CoOoL! Thanks for letting me know... A question I wanted to ask (although slightly off-topic) is whether or not you can set an executable icon (the one that shows in the file explorer) in Linux (as you can in Windows / Mac OS X).<br><br><br>Thanks<br><br><br>Seb <br><br></td></tr></table><br>
<a name="697844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings,<br><br>Version 1.06 introduces the following changes :<br><br>* Removed statusbar handle - theme issues.<br>* Improved button state handling.<br>* OpenURL now calls native-driver openurl.<br>* Added panel pixmap TILE support.<br>* Panel pixmaps can now be cleared.<br>* Removed libgnomecanvas dependency.<br>* Stepper now uses pixbuf to draw onto buttons.<br>* Added menu (EVENT_GADGETMENU) support to buttons and textfield.<br><br>As usual, you can get it via syncmods... (see above for details)<br><br>:o) <br><br></td></tr></table><br>
<a name="697960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MVB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi.<br>Very good work so far. Just a few little problems:<br>1. Your 120d IDE doesn't work for me. It just opens an empty window and then crashes.<br>2. The normal IDE works with your module, but if I open a file with such "funny characters" the highlighting isn't correct.<br>3. The filechooser is really slow.<br><br>A cool thing would be to have MozEmbed for HTML-rendering.<br><br>Thanks <br><br></td></tr></table><br>
<a name="698060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey, great updates. Unfortunately, another bug, due to the layout of panels being different with GTK:<br><br><pre class=code>Framework BRL.Win32MaxGUI
'Framework BaH.GTKMaxGUI
'Framework BRL.FLTKMaxGUI

Global wndMain:TGadget = CreateWindow("Test Window",100,100,400,400,Null,1|WINDOW_CLIENTCOORDS)

	Global gadPanel:TGadget = CreatePanel(10,20,100,300,wndMain,PANEL_GROUP,"Test Panel")
	Global gadSlider:TGadget = CreateSlider(120,20,100,300,wndMain,SLIDER_VERTICAL)
	
	SetPanelColor(gadPanel,200,255,200)
	
Repeat

	Select WaitEvent()
	
		Case EVENT_WINDOWCLOSE;End
		
	EndSelect
	
Forever</pre>Have a look at the panel, it is drawn too tall (&gt;300 pixels) using GTK however <b>it is 300 pixels</b> high on Windows and FLTK.<br><br>Thanks<br><br>Seb <br><br></td></tr></table><br>
<a name="698278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> @mvb<br>1. I managed to make it do the same, once, then tried to put some debug into it, and it's worked ever since :-(<br>So for now, I cannot reproduce it.<br><br>2. Can you provide me with an example of a file with the "funny" characters, as I thought it was handling UTF-8 properly now.<br><br>3. That's a known issue with Ubuntu 6.06 - at least, everyone using its default window manager have had issues like that. Changing the Window Manager fixes the problem.<br><br><div class="quote"> A cool thing would be to have MozEmbed for HTML-rendering. <br></div><br>Yeah, now that things have settled down, I intended having a look at implementing that.<br>It would mean we'd have a "proper" html-view on linux for Max, finally.<br><br><br>@seb<br>My oops... I noticed that too, but forgot to change it for the last release.<br>If you want to try a quick hack...<br>Line 2987 or thereabouts looks like:<br>gtk_widget_set_size_request(handle, w, Max(h,0))<br>Just change it to :<br>gtk_widget_set_size_request(frame, w, Max(h,0))<br>... <br><br></td></tr></table><br>
<a name="698317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MVB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 2. Can you provide me with an example of a file with the "funny" characters, as I thought it was handling UTF-8 properly now. <br></div><br><pre class=code>Global blub:Int		'
Global bla:Float		'</pre><br><br>Thanks <br><br></td></tr></table><br>
<a name="698333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brucey,<br><br>Another welcome release... Much obliged...<br><br><div class="quote"> @seb<br>My oops... I noticed that too, but forgot to change it for the last release.<br>If you want to try a quick hack...<br>Line 2987 or thereabouts looks like:<br>gtk_widget_set_size_request(handle, w, Max(h,0))<br>Just change it to :<br>gtk_widget_set_size_request(frame, w, Max(h,0)) <br></div><br>Lovely-jubly... Seems to work well (thnx) You probably hate me posting, but I've found another few bugs for the next release... ;-)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Rem
A few more little bugs...

1) Adding a double ampersand "&amp;" to the text of a gadget doesn't produce a single "&amp;" to the button (as in other modules).
I.e. "Fish &amp; Chips"
2) When a mouse move event is triggered on a panel, the EventData() value is supposed to tell us whether the mouse button
is down. In GTK, it only seems to do this for the first event. Try holding your mouse down while moving over the panel to see.
3) If you run the app, making sure the mouse isn't over the window as it loads, the button will be correctly positioned at 10x10,
however, move your mouse over the pane to generate an event and the whole panel/button jumps upwards... Weird, eh?

Thanks Brucey

EndRem

SuperStrict

Framework BAH.GTKMaxGUI

Global wndMain:TGadget = CreateWindow( "Test Window" , 220 , 140 , 400 , 300 , Null , WINDOW_TITLEBAR | WINDOW_STATUS | WINDOW_RESIZABLE | WINDOW_CLIENTCOORDS )
	Global gadPanel:TGadget = CreatePanel(0,0,ClientWidth(wndMain),ClientHeight(wndMain),wndMain,PANEL_ACTIVE)
	Global gadButton:TGadget = CreateButton("Fish &amp;&amp; Chips",10,10,100,30,gadPanel,BUTTON_PUSH)
	
	SetPanelColor(gadPanel,200,255,200)	'So you can see the panel

Repeat

	Select WaitEvent()

		Case EVENT_WINDOWCLOSE;End

	EndSelect
	
	SetStatusText(wndMain,CurrentEvent.ToString$())
	
	DebugLog "Panel X: " + GadgetX(gadPanel) + " Panel Y: " + GadgetY(gadPanel)			'Watch the panel and button Y-pos fall to -9 when
	DebugLog "Button X: " + GadgetX(gadButton) + "Button Y: " + GadgetY(gadPanel)		'an event is triggered.

Forever</textarea><br><br>I've put a few comments in the source code for you to help you generate them.<br><br>Great work as always, keep it up,<br><br><br>Seb <br><br></td></tr></table><br>
<a name="698815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brucey,<br><br>I've just sync'd BaH.GTKMaxGUI to my other Linux computer, and I get the following error whenever I try to compile:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Building Max'dGUI
Compiling:incbin.bmx
flat assembler  version 1.64
3 passes, 0.1 seconds, 1071444 bytes.
Compiling:Max'dGUI.bmx
flat assembler  version 1.64
4 passes, 0.1 seconds, 190902 bytes.
Linking:Max'dGUI
/usr/bin/ld: warning: libstdc++.so.6, needed by /usr/lib/libGLU.so, may conflict with libstdc++.so.5
/usr/bin/ld: warning: libxpcom_core.so, needed by /usr/lib/firefox/libgtkembedmoz.so, not found (try using -rpath or -rpath-link)
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkgadget.bmx.release.linux.x86.o): In function `_bah_gtkmaxgui_TGTKButton_SetHotKey': undefined reference to `bah_gtkmaxgui_TGTKKeyMap'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkgadget.bmx.release.linux.x86.o): In function `_bah_gtkmaxgui_TGTKButton_SetHotKey': undefined reference to `bah_gtkmaxgui_TGTKKeyMap'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkgadget.bmx.release.linux.x86.o): In function `_bah_gtkmaxgui_TGTKMenuItem_SetHotKey': undefined reference to `bah_gtkmaxgui_TGTKKeyMap'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkgadget.bmx.release.linux.x86.o): In function `_bah_gtkmaxgui_TGTKMenuItem_SetHotKey': undefined reference to `bah_gtkmaxgui_TGTKKeyMap'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkgadget.bmx.release.linux.x86.o): In function `_bah_gtkmaxgui_TGTKEditable_OnKeyDown': undefined reference to `bah_gtkmaxgui_TGTKKeyMap'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkgadget.bmx.release.linux.x86.o): more undefined references to `bah_gtkmaxgui_TGTKKeyMap' follow
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_oggvorbis_oggvorbis'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_win32_win32'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_directx_directx'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_macos_macos'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_freetype_freetype'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_freejoy_freejoy'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_freeaudio_freeaudio'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_enet_enet'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_glew_glew'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_freetypefont_freetypefont'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_dxgraphics_dxgraphics'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_audio_audio'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_oggloader_oggloader'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_maxutil_maxutil'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_wavloader_wavloader'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_freeaudioaudio_freeaudioaudio'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_gnet_gnet'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_d3d7max2d_d3d7max2d'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_fltkmaxgui_fltkmaxgui'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_win32maxgui_win32maxgui'
/home/sebholl/BlitzMax/BlitzMax/mod/bah.mod/gtkmaxgui.mod/gtkmaxgui.release.linux.x86.a(gtkkeymap.bmx.release.linux.x86.o): In function `__bb_gtkmaxgui_gtkkeymap': undefined reference to `__bb_cocoamaxgui_cocoamaxgui'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_GetTraceRefcnt_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsPromiseFlatCString::Init(nsACString_internal const&amp;)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `NS_Free_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_StringContainerInit_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_StringCloneData_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `NS_NewGenericFactory(nsIGenericFactory**, nsModuleComponentInfo const*)'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_ShutdownXPCOM_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_with_AddRef(nsISupports*)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCharTraits&lt;char&gt;::sEmptyBuffer'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `NS_GetComponentRegistrar_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_StringGetData_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `vtable for nsCreateInstanceByCID'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `vtable for nsSupportsWeakReference'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsAString_internal::Assign(unsigned short const*)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsAString_internal::~nsAString_internal [not-in-charge]()'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_UnregisterXPCOMExitRoutine_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_InitXPCOM2_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_GetServiceManager_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsVoidArray::nsVoidArray[in-charge]()'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_CStringSetData_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `CopyUTF16toUTF8(unsigned short const*, nsACString_internal&amp;)'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_StringCopy_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_from_gs_contractid_with_error(nsGetServiceByContractIDWithError const&amp;, nsID const&amp;)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `EmptyString()'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_NewLocalFile_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsVoidArray::RemoveElement(void*)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsMemory::Clone(void const*, unsigned)'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_StringSetDataRange_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `CopyUTF8toUTF16(nsACString_internal const&amp;, nsAString_internal&amp;)'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_StringGetMutableData_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_StringContainerFinish_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_Realloc_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsVoidArray::InsertElementAt(void*, int)'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_CStringContainerInit2_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_Alloc_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_from_qi(nsQueryInterface, nsID const&amp;)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsSubstring::Equals(nsSubstring const&amp;) const'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCharTraits&lt;unsigned short&gt;::sEmptyBuffer'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_CStringToUTF16_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_CStringGetMutableData_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `vtable for nsCreateInstanceByContractID'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_from_gs_contractid(nsGetServiceByContractID, nsID const&amp;)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `NS_NewNativeLocalFile_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_CStringSetDataRange_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_GetMemoryManager_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::~nsCOMPtr_base [not-in-charge]()'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsSubstring::Assign(unsigned short const*, unsigned)'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_StringSetData_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_RegisterXPCOMExitRoutine_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `ToNewUnicode(nsAString_internal const&amp;)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `UTF8ToNewUnicode(nsACString_internal const&amp;, unsigned*)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `ToNewUTF8String(nsAString_internal const&amp;, unsigned*)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsSupportsWeakReference::GetWeakReference(nsIWeakReference**)'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_UTF16ToCString_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_InitXPCOM3_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_GetDebug_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `NS_GetComponentManager_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_from_helper(nsCOMPtr_helper const&amp;, nsID const&amp;)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `AppendUTF16toUTF8(nsAString_internal const&amp;, nsACString_internal&amp;)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `CopyUTF8toUTF16(char const*, nsAString_internal&amp;)'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_CStringCopy_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_StringContainerInit2_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsObsoleteACString::sCanonicalVTable'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_CStringCloneData_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_CStringGetData_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCSubstring::Assign(char const*, unsigned)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCRT::strdup(unsigned short const*)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCSubstring::Adopt(char*, unsigned)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsAString_internal::AssignASCII(char const*, unsigned)'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsObsoleteAString::sCanonicalVTable'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::begin_assignment()'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_from_gs_cid_with_error(nsGetServiceByCIDWithError const&amp;, nsID const&amp;)'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_CStringContainerInit_P'
/usr/lib/firefox/libxpcom.so: undefined reference to `NS_CStringContainerFinish_P'
/usr/lib/firefox/libgtkembedmoz.so: undefined reference to `nsACString_internal::~nsACString_internal [not-in-charge]()'
collect2: ld returned 1 exit status</textarea><br><br>I've had a look and my firefox path is: <i>/usr/lib/firefox</i> . I've tried setting <b>LD_LIBRARY_PATH</b> in <i>/etc/environment</i> however it doesn't seem to make any difference.<br><br>Any ideas?<br><br><br>Seb <br><br></td></tr></table><br>
<a name="698891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tell you what is interesting...  libxpcom_core.so  is required by my FC5 install, but on my ubuntu, firefox doesn't have that file. (so it seems different versions of firefox have different sets of shared objects)... joy, joy and happy joy.<br>1.07 was probably a release too early. And a bit buggy anyway, when it comes to the htmlview. Sorry about that.<br>Watch this space.. <br><br></td></tr></table><br>
<a name="698994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yet another update... 1.08<br><br>* Split out HTML views into separate modules - see bah.gtkwebgtkhtml and bah.gtkwebmozilla.<br>* Fixed double-ampersand text displaying.<br>* Improved WINDOW_CLIENTCOORDS handling.<br>* Improved gadget positioning - no negative coords!.<br>* EVENT_MOUSEMOVE on panel/canvas now contain button-pressed value.<br>* Improved gadgeted freeing.<br><br>Also there are TWO new optional modules available. These allow you to choose which HTMLView you want to package (if any!) with your application. Currently it supports GTKHtml and Mozilla widgets...<br><br>*  bah.gtkwebgtkhtml<br>*  bah.gtkwebmozilla<br><br>To use one in your app you would have something like the following:<br><pre class=code>
Framework BaH.GTKMaxGUI
Import BaH.GTKWebMozilla
</pre><br>If you don't need an HTMLView, don't import one, and it'll build your app without that library dependency.<br><br>Caveats ;-)<br>GTKHTML<br>------<br>Requires libgtkhtml-3.8<br><br>Mozilla<br>-------<br>Requires the path to the mozilla libs defined (either via LD_LIBRARY_PATH or by configuring it using ldconfig path/to/the/libs)<br>An environment variable can be set - MOZ_DIST_BIN - which the app will use to tell mozilla where it is installed. This sets a global string variable - MOZ_DIST_BIN.<br>The default value is /usr/lib/mozilla-firefox<br>You can override the value either by setting the environment variable, or by setting the blitz variable at runtime.<br>Also (isn't there always?)... some firefox dists appear to have different required files to import. In gtkwebmozilla.bmx there is a commented out line - Import "-lxpcom_core" - which you may have to uncomment for your distro. (of course, this could be a problem when attempting to run the app on a different box, but for now I don't know what to do about it).<br>Other than that, Mozilla provides a much enhanced web-standards supported browsing experience, which you may wish to persevere with...<br><br>hmmm. I should probably add more imports for the "lookup" paths for compiling. Currently there is only :<br>Import "-L/usr/lib/mozilla-firefox"<br>might want to add :<br>Import "-L/usr/lib/firefox"<br><br>:o) <br><br></td></tr></table><br>
<a name="699222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brucey,<br><br>Thanks for the update, however it seems SetPanelColor() appears to have been broken in the meantime...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

Rem
SetPanelColor() doesn't appear to work with none, PANEL_BORDER, or PANEL_GROUP...
EndRem

Framework bah.gtkmaxgui

Global wndMain:TGadget = CreateWindow("Test Window",100,100,400,300,Null,WINDOW_TITLEBAR)

	Global gadPanel:TGadget = CreatePanel(10,10,300,200,wndMain,PANEL_BORDER)
	SetPanelColor(gadPanel,200,255,200)

Repeat

	Select WaitEvent()

		Case EVENT_WINDOWCLOSE;End

	EndSelect

Forever</textarea><br><br>It might be my new linux set-up but I remember it used to work before syncmods. Also you know this...<br><br><div class="quote"> Improved gadget positioning - no negative coords!. <br></div><br>Well, what do you actually mean... Do you mean gadgets can't be drawn at negative co-ordinates. If so, how would I be able to tweak GTKMaxGUI to disable this for Max'd GUI so that <b> I can draw gadgets </b> at -ve co-ordinates.<br><br>Also Brucey, I was wondering if I could pick your brains. Is there a way in GTK for me to make gadgets "see-through". I don't literally mean setting the transparency, but can you make a gadget not "suck-up" mouse-clicks so that the parent containers will receive them instead. (Let me give an example...)<br><br>I.e. if a button is drawn on a panel, would I be able to still display the button, but when the mouse moves over the button, the parent panel underneath still fires EVENT_MOUSEMOVE events <i>while over the button</i>. In Windows, I can acheive this by disabling the gadget (and as a kind of side effect, Windows seems to automatically pass events to the parent gadget)...<br><br>Finally, I can't get a HTML gadget to show with either module (GTKHTML or Mozilla). Mozilla still reports the above error message and GTKHTML compiles, but just displays a blank window...<br><br>I tried the example from the MaxGUI docs and I get the same effect (which I've pasted here for quick reference)...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80"> createhtmlview.bmx

Framework BaH.GTKMaxGUI
Import BaH.gtkwebgtkhtml

Rem
HTML Gadget won't show - just blank window as if nothing
was on it...
EndRem

Strict 

Local window:TGadget
Local htmlview:TGadget

window=CreateWindow("My Window",30,20,600,440,,15|WINDOW_ACCEPTFILES)

htmlview=CreateHTMLView(0,0,ClientWidth(window),ClientHeight(window),window)
SetGadgetLayout htmlview,1,1,1,1 

HtmlViewGo htmlview,"http://www.blitzmax.com"

While WaitEvent()
	Print CurrentEvent.ToString()
	Select EventID()
		Case EVENT_WINDOWCLOSE
			End
	End Select
Wend
</textarea><br><br>Thank - you so much...<br><br><br>Seb <br><br></td></tr></table><br>
<a name="699294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings,<br><br>New update, 1.09 :<br><br>* i18n enhancement - GTKTextArea.areaText and gadgets GetText now return ISO8859 strings.<br><br>Web modules are also updated...<br><br>This fixes a problem with Blitz strings not supporting UTF8 strings properly ;-)<br>Gadgets now return Strings in ISO8859 format instead of UTF8, which caused highlighting issues in the IDE.<br>What this means for non-latin locales, I've no idea really. I suppose I'll need to store the "original" string locale (if I can find out what it was) and use that when reverted back to a Max String...   ho hum.<br><br><br>@Seb<br><div class="quote"> it seems SetPanelColor() appears to have been broken <br></div><br>This works on mine ok. The panel appears as a lime green. Do you get *no* colour change or the wrong colour?<br><br><div class="quote"> Do you mean gadgets can't be drawn at negative co-ordinates <br></div><br>Aye...  On occasions a gadget would reposition itself to a negative coord (so I thought it better to disallow that to happen). It's an issue related I think to WINDOW_CLIENTCOORDS, which I'm still struggling with. Try sebtest_7 to see what I mean. - mouse over the panel and watch in amazement as the window resizes itself...  *sigh*<br>Window sizing is a bit niggly...<br><br><div class="quote"> In Windows, I can acheive this by disabling the gadget <br></div><br>But that probably doesn't work on Mac either tho? (sure it didn't when I tried it). What I did for GED was to overlay "invisible" panels on top of each gadget, which would catch clicks and drags. Of course, I haven't added support for making anything transparent on GTK yet - actually, it doesn't support it, but there *is* a concept of an actual "invisible" widget, which might be useful. I should have a read up about it...<br><br><div class="quote"> I can't get a HTML gadget to show with either module (GTKHTML or Mozilla) <br></div><br>Okay... let's start with GTKHTML... It does actually work. However, it only displays itself when it is *finished* loading everything on the page. And at the moment, your example URL blitzmax.com is a bad choice as one of the news items has links to images which aren't available. It will show up eventually...<br>...and mozilla... try uncommenting line 29 :<br>'Import "-lxpcom_core"<br>...rebuild and re-run. Being built on Gecko, this shows the page *as* it loads, and also has a "wait" cursor over the gadget til it's done. Mozilla is a *much* better gadget for overall html useability.<br>I'm providing both so there's some choice. As I've said already, getting mozilla working takes a bit of effort to get things setup right.<br><br><br>btw... the Community Edition IDE appears to work *really* well with the latest version. (although without the new lexer it renders the text slightly slower...) <br><br></td></tr></table><br>
<a name="699619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MVB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Building maxide
Compiling:maxide.bmx
flat assembler  version 1.64
4 passes, 0.2 seconds, 412760 bytes.
Linking:maxide.debug
/usr/bin/ld: warning: libxpcom_core.so, needed by /usr/lib/libgtkembedmoz.so, not found (try using -rpath or -rpath-link)
/usr/bin/ld: warning: libstdc++.so.6, needed by /usr/lib/libgtkembedmoz.so, may conflict with libstdc++.so.5
/usr/lib/libxpcom.so: undefined reference to `NS_GetTraceRefcnt_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsPromiseFlatCString::Init(nsACString_internal const&amp;)'
/usr/lib/libgtkembedmoz.so: undefined reference to `NS_Free_P'
/usr/lib/libxpcom.so: undefined reference to `NS_StringContainerInit_P'
/usr/lib/libxpcom.so: undefined reference to `NS_StringCloneData_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `NS_NewGenericFactory(nsIGenericFactory**, nsModuleComponentInfo const*)'
/usr/lib/libxpcom.so: undefined reference to `NS_ShutdownXPCOM_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_with_AddRef(nsISupports*)'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCharTraits&lt;char&gt;::sEmptyBuffer'
/usr/lib/libgtkembedmoz.so: undefined reference to `NS_GetComponentRegistrar_P'
/usr/lib/libxpcom.so: undefined reference to `NS_StringGetData_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `vtable for nsCreateInstanceByCID'
/usr/lib/libgtkembedmoz.so: undefined reference to `vtable for nsSupportsWeakReference'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsAString_internal::Assign(unsigned short const*)'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsAString_internal::~nsAString_internal [not-in-charge]()'
/usr/lib/libxpcom.so: undefined reference to `NS_UnregisterXPCOMExitRoutine_P'
/usr/lib/libxpcom.so: undefined reference to `NS_InitXPCOM2_P'
/usr/lib/libxpcom.so: undefined reference to `NS_GetServiceManager_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsVoidArray::nsVoidArray[in-charge]()'
/usr/lib/libxpcom.so: undefined reference to `NS_CStringSetData_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `CopyUTF16toUTF8(unsigned short const*, nsACString_internal&amp;)'
/usr/lib/libxpcom.so: undefined reference to `NS_StringCopy_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_from_gs_contractid_with_error(nsGetServiceByContractIDWithError const&amp;, nsID const&amp;)'
/usr/lib/libgtkembedmoz.so: undefined reference to `EmptyString()'
/usr/lib/libxpcom.so: undefined reference to `NS_NewLocalFile_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsVoidArray::RemoveElement(void*)'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsMemory::Clone(void const*, unsigned)'
/usr/lib/libxpcom.so: undefined reference to `NS_StringSetDataRange_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `CopyUTF8toUTF16(nsACString_internal const&amp;, nsAString_internal&amp;)'
/usr/lib/libxpcom.so: undefined reference to `NS_StringGetMutableData_P'
/usr/lib/libxpcom.so: undefined reference to `NS_StringContainerFinish_P'
/usr/lib/libxpcom.so: undefined reference to `NS_Realloc_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsVoidArray::InsertElementAt(void*, int)'
/usr/lib/libxpcom.so: undefined reference to `NS_CStringContainerInit2_P'
/usr/lib/libxpcom.so: undefined reference to `NS_Alloc_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_from_qi(nsQueryInterface, nsID const&amp;)'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsSubstring::Equals(nsSubstring const&amp;) const'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCharTraits&lt;unsigned short&gt;::sEmptyBuffer'
/usr/lib/libxpcom.so: undefined reference to `NS_CStringToUTF16_P'
/usr/lib/libxpcom.so: undefined reference to `NS_CStringGetMutableData_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `vtable for nsCreateInstanceByContractID'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_from_gs_contractid(nsGetServiceByContractID, nsID const&amp;)'
/usr/lib/libgtkembedmoz.so: undefined reference to `NS_NewNativeLocalFile_P'
/usr/lib/libxpcom.so: undefined reference to `NS_CStringSetDataRange_P'
/usr/lib/libxpcom.so: undefined reference to `NS_GetMemoryManager_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::~nsCOMPtr_base [not-in-charge]()'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsSubstring::Assign(unsigned short const*, unsigned)'
/usr/lib/libxpcom.so: undefined reference to `NS_StringSetData_P'
/usr/lib/libxpcom.so: undefined reference to `NS_RegisterXPCOMExitRoutine_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `ToNewUnicode(nsAString_internal const&amp;)'
/usr/lib/libgtkembedmoz.so: undefined reference to `UTF8ToNewUnicode(nsACString_internal const&amp;, unsigned*)'
/usr/lib/libgtkembedmoz.so: undefined reference to `ToNewUTF8String(nsAString_internal const&amp;, unsigned*)'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsSupportsWeakReference::GetWeakReference(nsIWeakReference**)'
/usr/lib/libxpcom.so: undefined reference to `NS_UTF16ToCString_P'
/usr/lib/libxpcom.so: undefined reference to `NS_InitXPCOM3_P'
/usr/lib/libxpcom.so: undefined reference to `NS_GetDebug_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `NS_GetComponentManager_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_from_helper(nsCOMPtr_helper const&amp;, nsID const&amp;)'
/usr/lib/libgtkembedmoz.so: undefined reference to `AppendUTF16toUTF8(nsAString_internal const&amp;, nsACString_internal&amp;)'
/usr/lib/libgtkembedmoz.so: undefined reference to `CopyUTF8toUTF16(char const*, nsAString_internal&amp;)'
/usr/lib/libxpcom.so: undefined reference to `NS_CStringCopy_P'
/usr/lib/libxpcom.so: undefined reference to `NS_StringContainerInit2_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsObsoleteACString::sCanonicalVTable'
/usr/lib/libxpcom.so: undefined reference to `NS_CStringCloneData_P'
/usr/lib/libxpcom.so: undefined reference to `NS_CStringGetData_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCSubstring::Assign(char const*, unsigned)'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCRT::strdup(unsigned short const*)'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCSubstring::Adopt(char*, unsigned)'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsAString_internal::AssignASCII(char const*, unsigned)'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsObsoleteAString::sCanonicalVTable'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::begin_assignment()'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsCOMPtr_base::assign_from_gs_cid_with_error(nsGetServiceByCIDWithError const&amp;, nsID const&amp;)'
/usr/lib/libxpcom.so: undefined reference to `NS_CStringContainerInit_P'
/usr/lib/libxpcom.so: undefined reference to `NS_CStringContainerFinish_P'
/usr/lib/libgtkembedmoz.so: undefined reference to `nsACString_internal::~nsACString_internal [not-in-charge]()'
collect2: ld returned 1 exit status
Build Error: Failed to link /home/mvb/Programme/BlitzMax/src/maxide/ce/maxide.debug
Process complete
</textarea><br>Hi<br>I don't really know what that means and what I have to do? My firefox-path is /usr/lib/firefox.<br>If I use gtkhtml I get this Error: "*** glibc detected *** free(): invalid next size (fast): 0x084fcb08 ***"<br><br>Thank you. <br><br></td></tr></table><br>
<a name="699633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey, I guess I was just impatient with <a href="http://www.blitzbasic.com" target="_blank">http://www.blitzbasic.com</a> but now I have got both Mozilla and GTK to work with <a href="http://www.google.com." target="_blank">http://www.google.com.</a> Just for reference, for Ubuntu Dapper I had to (hope this helps MVB):<br><br>&gt; In the terminal, run "ldconfig /usr/lib/firefox"<br>&gt; Comment out <i>Import "-L/usr/lib/mozilla-firefox"</i> in <b>gtkwebmozilla.bmx</b>.<br>&gt; Uncomment <i>Import "-lxpcom_core"</i> in <b>gtkwebmozilla.bmx</b>.<br>&gt; Save and build modules from the IDE.<br><br>I'm looking into the SetPanelColor() etc. issues I've got on this computer - will check them on my laptop also. Basically, after calling the command, the color of the panel remains it's default one as if it hasn't been set... :S<br><br>Another problem which I have on this computer is using ActiveGadget(). Try running the following example and see what you get:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Framework BaH.GTKMaxGUI

Global wndMain:TGadget = CreateWindow("Test Window",100,100,400,300,Null,15)

	Global gadTextbox:TGadget = CreateTextField(10,10,300,20,wndMain)

Repeat

	Select WaitEvent()

		Case EVENT_WINDOWCLOSE;End

	EndSelect

	DebugLog ActiveGadget().xpos


Forever
</textarea><br>I get a Signal Handler 11 on the ActiveGadget() line and the program is forced to terminate.<br><br>Anyone else get this problem?<br><br><br>Seb <br><br></td></tr></table><br>
<a name="699640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> Done some more debugging, stepping through the code - it Signal Handler 11's on line 396 of <i>gtkgui.bmx</i>:<br><br><pre class=code>			Local _gflags:Int = Int Ptr(widget + _OFFSET_GTK_FLAGS)[0]
</pre><br><br>The debugger reports that widget = 0, w = $08130eb0, and w.handle = 08194840. Hope this helps,<br><br><br>Seb <br><br></td></tr></table><br>
<a name="699735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MVB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi.<br><div class="quote"> &gt; In the terminal, run "ldconfig /usr/lib/firefox"<br>&gt; Comment out Import "-L/usr/lib/mozilla-firefox" in gtkwebmozilla.bmx.<br>&gt; Uncomment Import "-lxpcom_core" in gtkwebmozilla.bmx.<br>&gt; Save and build modules from the IDE. <br></div><br>Ok. Thank you! That works for me.<br>Now I'm able to compile the normal MaxIDE with Mozilla and GtkHTML, but everytime I try to compile and run the CE-IDE it shows me these error-messages:<br>With mozilla:<br><div class="quote"> /usr/bin/ld: warning: libstdc++.so.6, needed by /usr/lib/libgtkembedmoz.so, may conflict with libstdc++.so.5<br>*** glibc detected *** double free or corruption (!prev): 0x089bb268 *** <br></div><br>With gtkHTML:<br><div class="quote"> *** glibc detected *** free(): invalid pointer: 0x08434c28 *** <br></div><br><br>Keep up the good work! <br><br></td></tr></table><br>
<a name="700357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> another problem.. ...is using ActiveGadget() <br></div><br>Two issues with this one.<br>1) There is a bug in the actual ActiveGadget function, as you found.<br>2) ActiveGadget *can* return null, as it is entirely possible for there not to be an active gadget on any window... therefore ActiveGadget().xpos could crash.<br><br><br>As for the problems with glibc and free() I am having trouble hunting down the exact causes... <br><br></td></tr></table><br>
<a name="700449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> hokay... I think I have a method of getting the IDE to run with gdb attached, which might be useful in trying to trace where things are going wrong (although Max doesn't produce any meaningful symbol code... so mileage isn't likely to be much)<br><br>The following enters the realms of shell scripting... if you aren't sure, stay away ;-)<br><br>Create yourself an executable script with something along the lines of the following in it :<br><pre class=code>
./gtkMaxIDE &amp;
gdb ./gtkMaxIDE $!
</pre><br>..change the name of "gtkMaxIDE" to the name of the app you want to attach gdb to.<br>This launches the application in the background, then immediately launches gdb and attaches it to the PID of the app.<br><br>You should then see a large list of "reading symbols" statements, as gdb processes all the libraries.<br>Once it has finished, you should be left with the following prompt:<br><pre class=code>(gdb)</pre><br>do "continue" to carry on with the app startup...<br><pre class=code>(gdb) continue</pre><br><br>If your application crashes, you should then be able to enter "bt" or "backtrace" and it will reveal where things went wrong.<br><br><br>One downside to the way in which Max is set up is that by default, SIGV signals (seg-faults / crashes) are trapped by Max and passed on safely, in which case gdb will tell you that your app in fact exited happily.<br><br>If you *really* want to do some serious debugging, you will need to comment out the following line of appstud.linux.c in the appstub module:<br><pre class=code>signal( SIGSEGV,sighandler );</pre><br><br><br>:o) <br><br></td></tr></table><br>
<a name="700821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> GTKMaxGUI 1.10 is now available via syncmods (on mod server 122)<br><br>* Fixes ActiveGadget crash if no active widget on a window.<br>* Added Enter/Leave events for labels.<br>* Fixed text color setting for labels and buttons.<br>* Added GTK_USE_STOCK_ITEMS global int. Enabled by default. Set it to False to disable on-the-fly conversion of gadgets showing stock-items (image/text/shortcut)<br>* Fixed statusbar disappearing with no text.<br><br>see sebtest_8.bmx in tests for ActiveGadget fix.<br>see labelovertest.bmx for example of label stuff.<br><br>GTKWebMozilla also updated to 1.02 :<br>* Added Free() method.<br><br>GTK mod tested against latest (1.22) IDE using :<br>these imports:<br><pre class=code>
Import BaH.GTKMaxGUI
Import BaH.GTKWebMozilla
</pre><br>and the setCode speed tweak :<br><pre class=code>
' highlight code
		s=style[NORMAL]
		?linux
		TGTKTextArea(textarea).setFastUpdate(False)
		?
		If p1&gt;p s.format(textarea,p,p1-p)
		?linux
		TGTKTextArea(textarea).setFastUpdate(True)
		?
</pre><br>... search for "highlight code"<br><br><br>:o) <br><br></td></tr></table><br>
<a name="703142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MVB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems there is a problem with listboxes.<br>"Unhandled Exception:Index out of range"<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Framework bah.gtkmaxgui

Local Window   :TGadget = CreateWindow("blub", ClientWidth(Desktop())/2-200,ClientHeight(Desktop())/2-150, 400,300, Null, WINDOW_TITLEBAR|WINDOW_CLIENTCOORDS)
Local Listbox  :TGadget = CreateListBox(5,5, 390,220, Window)
Local Textfield:TGadget = CreateTextField(5,230, 390,30, Window)

AddGadgetItem Listbox, "1"
AddGadgetItem Listbox, "2"
AddGadgetItem Listbox, "3"
AddGadgetItem Listbox, "4"
AddGadgetItem Listbox, "5"
AddGadgetItem Listbox, "6"


While WaitEvent()
	Select EventID()
		Case EVENT_GADGETSELECT
			If EventSource()=Listbox Then
				SetGadgetText Textfield, GadgetItemText(Listbox, EventData())
			EndIf

	End Select
Wend
</textarea> <br><br></td></tr></table><br>
<a name="703158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MVB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi again.<br>Now I also tryed to use an other windowmanager (Openbox), but the open-file-dialog is still as slow as it was with metacity. :? <br><br></td></tr></table><br>
<a name="703699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi MVB,<br><br>A new update is available via syncmods (1.11) which includes the following change :<br>* Fixed listbox generating selection event on initialisation.<br><br>However, I would say your code example is flawed, since if you control-click a currently selected row, it deselects it, raising a selection event with -1 (i.e. no selection) in the eventdata, which will break your code.<br><br>Of course one argument is :<br>Should the listbox generate an event when you DEselect a row to have none selected, or should it do nothing.<br>I say it should. Why? Because if you want to enable/disable a button, for instance, depending on the current selection, by NOT having an event generated on deselection you would never know to disable the button...<br><br>rather change your code :<br><pre class=code>
If EventSource()=Listbox Then
    If EventData() &gt;= 0 Then
        SetGadgetText Textfield, GadgetItemText(Listbox, EventData())
    Else
        SetGadgetText TextField, ""
    End If
EndIf
</pre><br>I would even disable the textfield when nothing is selected...<br><br>btw, if win32 / macos versions of MaxGUI don't raise an event on deselection, then I say that is a bug on those platforms.<br>Personally, you *want* as many events raised as possible.<br><br>:-) <br><br></td></tr></table><br>
<a name="705133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brucey,<br><br>Sorry I haven't visited this post in the last week as I've recently formatted my HDD and haven't as yet installed Linux on my desktop computer... In order to try and debug the IDE, I followed the steps you provided (including removing the line from appstub.linux.c) and below is GDB output:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">GNU gdb 6.4-debian
Copyright 2005 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i486-linux-gnu"...(no debugging symbols found)
Using host libthread_db library "/lib/tls/i686/cmov/libthread_db.so.1".

Attaching to program: /home/sebholl/Desktop/BlitzMax/src/maxide/gtkMaxIDE, process 9441
(no debugging symbols found)
Reading symbols from /usr/lib/libX11.so.6...(no debugging symbols found)...done.Loaded symbols for /usr/lib/libX11.so.6
Reading symbols from /usr/lib/libglib-2.0.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libglib-2.0.so.0
Reading symbols from /usr/lib/libgtk-x11-2.0.so.0...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libgtk-x11-2.0.so.0
Reading symbols from /usr/lib/libgdk-x11-2.0.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libgdk-x11-2.0.so.0
Reading symbols from /usr/lib/libatk-1.0.so.0...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libatk-1.0.so.0
Reading symbols from /usr/lib/libpangox-1.0.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libpangox-1.0.so.0
Reading symbols from /usr/lib/libpango-1.0.so.0...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libpango-1.0.so.0
Reading symbols from /usr/lib/libgobject-2.0.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libgobject-2.0.so.0
Reading symbols from /usr/lib/libgmodule-2.0.so.0...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libgmodule-2.0.so.0
Reading symbols from /usr/lib/firefox/libgtkembedmoz.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/firefox/libgtkembedmoz.so
Reading symbols from /usr/lib/firefox/libxpcom.so...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/firefox/libxpcom.so
Reading symbols from /usr/lib/firefox/libxpcom_core.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/firefox/libxpcom_core.so
Reading symbols from /usr/lib/libstdc++.so.5...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libstdc++.so.5
Reading symbols from /lib/tls/i686/cmov/libm.so.6...Reading symbols from /usr/lib/debug/lib/tls/i686/cmov/libm-2.3.6.so...(no debugging symbols found)...done.

(no debugging symbols found)...done.
Loaded symbols for /lib/tls/i686/cmov/libm.so.6
Reading symbols from /lib/tls/i686/cmov/libpthread.so.0...Reading symbols from /usr/lib/debug/lib/tls/i686/cmov/libpthread-2.3.6.so...(no debugging symbols found)...done.
[Thread debugging using libthread_db enabled]
[New Thread -1219635520 (LWP 9441)]

(no debugging symbols found)...done.
Loaded symbols for /lib/tls/i686/cmov/libpthread.so.0
Reading symbols from /lib/tls/i686/cmov/libc.so.6...Reading symbols from /usr/lib/debug/lib/tls/i686/cmov/libc-2.3.6.so...(no debugging symbols found)...done.

(no debugging symbols found)...done.
Loaded symbols for /lib/tls/i686/cmov/libc.so.6
Reading symbols from /usr/lib/libgdk_pixbuf-2.0.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libgdk_pixbuf-2.0.so.0
Reading symbols from /usr/lib/libXau.so.6...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXau.so.6
Reading symbols from /lib/tls/i686/cmov/libdl.so.2...Reading symbols from /usr/lib/debug/lib/tls/i686/cmov/libdl-2.3.6.so...(no debugging symbols found)...done.
(no debugging symbols found)...done.
Loaded symbols for /lib/tls/i686/cmov/libdl.so.2
Reading symbols from /usr/lib/libpangocairo-1.0.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libpangocairo-1.0.so.0
Reading symbols from /usr/lib/libcairo.so.2...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libcairo.so.2
Reading symbols from /usr/lib/libfontconfig.so.1...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libfontconfig.so.1
Reading symbols from /usr/lib/libXext.so.6...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXext.so.6
Reading symbols from /usr/lib/libXrender.so.1...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXrender.so.1
Reading symbols from /usr/lib/libXinerama.so.1...
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXinerama.so.1
Reading symbols from /usr/lib/libXi.so.6...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXi.so.6
Reading symbols from /usr/lib/libXrandr.so.2...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXrandr.so.2
Reading symbols from /usr/lib/libXcursor.so.1...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXcursor.so.1
Reading symbols from /usr/lib/libXfixes.so.3...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libXfixes.so.3
Reading symbols from /usr/lib/libplds4.so...(no debugging symbols found)...done.Loaded symbols for /usr/lib/libplds4.so
Reading symbols from /usr/lib/libplc4.so...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libplc4.so
Reading symbols from /usr/lib/libnspr4.so...(no debugging symbols found)...done.Loaded symbols for /usr/lib/libnspr4.so
Reading symbols from /usr/lib/libstdc++.so.6...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libstdc++.so.6
Reading symbols from /lib/libgcc_s.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libgcc_s.so.1
Reading symbols from /lib/ld-linux.so.2...Reading symbols from /usr/lib/debug/lib/ld-2.3.6.so...
(no debugging symbols found)...done.
(no debugging symbols found)...done.
Loaded symbols for /lib/ld-linux.so.2
Reading symbols from /usr/lib/libpangoft2-1.0.so.0...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libpangoft2-1.0.so.0
Reading symbols from /usr/lib/libfreetype.so.6...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libfreetype.so.6
Reading symbols from /usr/lib/libz.so.1...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libz.so.1
Reading symbols from /usr/lib/libpng12.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libpng12.so.0
Reading symbols from /usr/lib/libexpat.so.1...
(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libexpat.so.1
Reading symbols from /lib/tls/i686/cmov/libnss_compat.so.2...Reading symbols from /usr/lib/debug/lib/tls/i686/cmov/libnss_compat-2.3.6.so...(no debugging symbols found)...done.

(no debugging symbols found)...done.
Loaded symbols for /lib/tls/i686/cmov/libnss_compat.so.2
Reading symbols from /lib/tls/i686/cmov/libnsl.so.1...Reading symbols from /usr/lib/debug/lib/tls/i686/cmov/libnsl-2.3.6.so...(no debugging symbols found)...done.

(no debugging symbols found)...done.
Loaded symbols for /lib/tls/i686/cmov/libnsl.so.1
Reading symbols from /lib/tls/i686/cmov/libnss_nis.so.2...Reading symbols from /usr/lib/debug/lib/tls/i686/cmov/libnss_nis-2.3.6.so...(no debugging symbols found)...done.

(no debugging symbols found)...done.
Loaded symbols for /lib/tls/i686/cmov/libnss_nis.so.2
Reading symbols from /lib/tls/i686/cmov/libnss_files.so.2...Reading symbols from /usr/lib/debug/lib/tls/i686/cmov/libnss_files-2.3.6.so...(no debugging symbols found)...done.

(no debugging symbols found)...done.
Loaded symbols for /lib/tls/i686/cmov/libnss_files.so.2
Reading symbols from /usr/lib/gconv/ISO8859-1.so...Reading symbols from /usr/lib/debug/usr/lib/gconv/ISO8859-1.so...(no debugging symbols found)...done.

(no debugging symbols found)...done.
Loaded symbols for /usr/lib/gconv/ISO8859-1.so
Reading symbols from /usr/lib/gtk-2.0/2.4.0/engines/libclearlooks.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/gtk-2.0/2.4.0/engines/libclearlooks.so

0xb7cead9e in gtk_target_list_add () from /usr/lib/libgtk-x11-2.0.so.0
(gdb) continue
Continuing.
[New Thread -1244349520 (LWP 9459)]
[New Thread -1252770896 (LWP 9461)]
[New Thread -1261163600 (LWP 9462)]
*** glibc detected *** double free or corruption (!prev): 0x08c036f8 ***

Program received signal SIGABRT, Aborted.
[Switching to Thread -1219635520 (LWP 9441)]
0xffffe410 in __kernel_vsyscall ()
(gdb) bt
#0  0xffffe410 in __kernel_vsyscall ()
#1  0xb77cd9a1 in raise () from /lib/tls/i686/cmov/libc.so.6
#2  0xb77cf2b9 in abort () from /lib/tls/i686/cmov/libc.so.6
#3  0xb780187a in __libc_message () from /lib/tls/i686/cmov/libc.so.6
#4  0xb7807fd4 in _int_free () from /lib/tls/i686/cmov/libc.so.6
#5  0xb780834a in free () from /lib/tls/i686/cmov/libc.so.6
#6  0x08056635 in png_read_destroy ()
#7  0x0805657b in png_destroy_read_struct ()
#8  0xb6350c7f in ?? ()
#9  0x0877bc00 in ?? ()
#10 0x0877bc04 in ?? ()
#11 0x00000000 in ?? ()
(gdb)
</textarea><br><br>This is v1.22 of the IDE, running GTK v1.11 and importing the Mozilla Firefox HTML extension.<br><br>Does this mean anything to you?<br><br><br>Seb <br><br></td></tr></table><br>
<a name="705714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Seb,<br><br>According to your backtrace it appears that something is attempting to free a png twice? (i.e. a "double free" on "png_destroy_read_struct")... which is kind of worrying in that it's not anything I'm doing directly.<br>The only thing that comes to mind are pixmaps, and at that, the IDE appears to only use them for the toolbar...<br><br>If only "debug max" included debug symbols :-( <br><br></td></tr></table><br>
<a name="706478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just had a small play with the latest code. If I remove the pngloader from gtkmaxgui loading png files in a gtkwebgtk htmlview doesn't cause a glibc memfree'd twice error which makes me think there is a problem with our version of pnglib. Also had to disable garbage collection until I changed the following to processURL:<br><pre class=code>
	Global banks:TList=New TList

	Function processURL(handle:Byte Ptr, url:Byte Ptr, html_stream:Byte Ptr, data:Object)

		Local u:String = parse_href(checkURL(String.FromCString(url)), String.FromCString(gtk_html_get_base(handle)))
		Local path$=urlLessAnchor(checkURL(u, True))
		If FileType(path)=FILETYPE_FILE	
			Local b:TBank=LoadBank(path)
			banks.addlast b
			gtk_html_write(handle, html_stream, LockBank(b), BankSize(b))
		Else
			DebugStop
		End If
   	    gtk_html_end(handle, html_stream, GTK_HTML_STREAM_OK)
	End Function
</pre><br>So there looks to be some issues here also with the memory being used to feed the browser.<br><br><br>also sorry for being stupid but how do I get round this link error with ubuntu when trying to use the firefox htmlview - <br><pre class=code>
/home/simon/blitzmax/mod/bah.mod/gtkmaxgui.mod/tests/createhtmlview:

error while loading shared libraries: libgtkembedmoz.so: cannot open shared object file: No such file or directory
</pre> <br><br></td></tr></table><br>
<a name="706519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the help, Mr A. :-)<br><br>The GTKHtml view gadget was very much a kludge to begin with I'm afraid, what with it having to be hand-held with regards to URLs and streams - unlike mozilla which does everything for you :-)<br>I'll have another play with processURL, based on what you've uncovered.<br>Of course, I'd like to recommend Mozilla anyway, if it weren't for the big mess of getting it setup in the various distros...<br><br>Anyhoo, your linking problem...<br>Check out gtkwebmozilla.bmx. There are two imports pointing to *hopefully* the most likely locations of the shared objects you need...<br><br>Import "-L/usr/lib/mozilla-firefox"<br>Import "-L/usr/lib/firefox"<br><br>At least, that's the ones I know about. If it ain't there, perhaps I need to add some more options ;-)<br><br>Further down the code is MOZ_DIST_BIN. It tells the library where it is installed, and is set when you first try to open a widget. It has a default, but may not be yours. So you can either set this at runtime, or via an environment variable.<br>Last but not least (see what I mean about setting it up???), you need to make sure (for runtime) that the above mentioned path is either in LD_LIBRARY_PATH or has been set via the "ldconfig" program, otherwise the exe won't be able find the shared objects....<br><br>Other than that, getting mozilla working is fairly easy ;-) <br><br></td></tr></table><br>
<a name="715047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Everyone,<br><br><div class="quote"> Just had a small play with the latest code. If I remove the pngloader from gtkmaxgui loading png files in a gtkwebgtk htmlview doesn't cause a glibc memfree'd twice error which makes me think there is a problem with our version of pnglib. Also had to disable garbage collection until I changed the following to processURL: <br></div><br><br>What is the status of the PNG glibc memfree'd problem? Was there ever a fixed release?<br><br>Thanks<br><br><br>Seb <br><br></td></tr></table><br>
<a name="715164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I am unable to reproduce these problems, it's been hard to try and find solutions for them.<br><br>However, I posted updates to both the libpng and zlib modules <a href="/posts.php?topic=63261" target="_blank">HERE</a> which may, or may not, help.<br>Both of these modules use the LATEST libpng and zlib sources, so with that you also get bug fixes, security updates etc. I can't see any reason why you wouldn't want to use them anyway.<br><br>But I don't know if it fixes these issues...<br><br>While I'm at it, I've uploaded new updates for both GTKMaxGUI and GTKWebGTKHTML modules which you can get via syncmods.<br><br>gtkmaxgui :<br>* Added mouse Down/Menu events for label.<br>* Added Enter/Leave events for buttons.<br>* Removed requester leaks. Code clean-up.<br>* Added SetButtonPixmap function.<br>* Panel now raises GADGETPAINT event when repaint required.<br>* Gadget ACTIVATE_REDRAW now raises GADGETPAINT event.<br><br>Mostly these add "new features" which may one day even make it into the other BRL gui modules. I think they are very useful - the extra Events - and let you create a much more full-featured application.<br><br>and for gtkwebgtkhtml:<br>* ProcessURL changes to use banks. [Simon Armstrong]<br><br><br>Please let me know how you get on with the latest stuff... :-) <br><br></td></tr></table><br>
<a name="715209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> Only wanted to say that I'm impressed and find that project -REALLY- cool! :-) <br><br></td></tr></table><br>
<a name="729695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brucey,<br><br>I've just downloaded Ubuntu 6.10 CD and after burning it to a disk, I noticed that it has on it the GTK toolkit for Windows. Is it possible to use this module with the Windows version of GTK and if so what do I need to do?<br><br>Thanks,<br><br><br>Seb <br><br></td></tr></table><br>
<a name="731388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hallo.<br><br>I don't think there are any particular reasons it wouldn't work assuming the GTK/GDK/GLib (and whatever others I've used) APIs are the same.<br>Alas, I don't have Windows at home so my win32 dev time is rather limited to squeezing it in between coding at work...<br><br>On a bright note, I've yet again updated GTKMaxGUI, fixing some bugs and adding more missing functionality (seems MaxGUI is quite the big beast when it comes to everything that it does. I keep finding stuff I missed). You can find details <a href="/posts.php?topic=62262#731386" target="_blank"> HERE</a>. <br><br></td></tr></table><br>
<a name="739466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> GREAT WORK Brucey!!!<br><br>However synchronizing with modserver124 doesn't seem to work <br><br></td></tr></table><br>
<a name="739591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have updated to 124 now... <br><br>Enjoy :-) <br><br></td></tr></table><br>
<a name="739594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're da man =) <br><br></td></tr></table><br>
<a name="739698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brucey,<br><br>In case you've missed it, could you please see <a href="/posts.php?topic=66080#738485" target="_blank">this bug report</a> for GTK MaxGUI I posted in MaxGUI bug reports as it affected the FLTK mod as well, which Skid made a simple fix for.<br><br>Many thanks for the update,<br><br><br>Seb <br><br></td></tr></table><br>
<a name="739769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has been noted Seb, thanks :-)<br><br>Been messing around with Cocoa (warning - don't take it nasally!) over the last week, which has been kinda fun. Probably 'bout time I got back into Linux... ;-) <br><br></td></tr></table><br>
<a name="740039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> A tip for saving time when messing around/testing stuff in different operating systems: use <a href="http://www.vmware.com" target="_blank">vmware workstation</a>.<br><br>This way I can test stuff in any windows os without even leaving linux, or test stuff in linux or any other OS without even leaving windows. It's a must. <br><br></td></tr></table><br>
<a name="741075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the Treenode fix Brucey... Just a thought but does the GTK toolkit support Alpha gadgets or not? I've had an idea for a work-around to get Max'd GUI working better on Linux and  it involves using transparent panels. <br><br></td></tr></table><br>
<a name="741185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> It doesn't Seb, unfortunately. At least, not yet...  I believe it's some way down the line for things like that - since they intend to use the power of gfx cards to drive stuff like that.<br><br>My GED UI editor used transparent panels to do all its cleverness, but I'm considering trying something else for that when I get back to it - which I hope to in the near future. <br><br></td></tr></table><br>
<a name="743008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey for letting me know. As a result, I've completely rewritten the mouse handling code in Max'd GUI to try a new method. I've come across a little bug that I was wondering if you could crack for me...<br><br>Basically what is happening is that if you create a panel with a gadget on it, and then you hide the gadget upon entering the panel, the panel then generates MouseEnter followed by MouseLeave events alternatively until you take your mouse away from the gadget again. I know it's probably got something to do with having no border between the edge of the gadget and the panel, but this one thing alone, locks  up my event queue with millions of these Mouse Enter/Leave events and the program grinds to a halt. :-(<br><br>If it means I'll have to put a massive border around the gadgets it'll look really rubbish, so is there anything I can do to suppress these erratic events.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict
Framework BaH.GTKMAxGUI

Global wndMain:TGadget = CreateWindow("Test Window",100,100,400,300,Null,WINDOW_TITLEBAR|WINDOW_CLIENTCOORDS)

	Global gadPanel:TGadget = CreatePanel(10,10,100,30,wndMain,PANEL_ACTIVE)
	
		Global gadButton:TGadget = CreateButton("I'm A Button",0,0,100,30,gadPanel,BUTTON_PUSH)
		'Global gadButton:TGadget = CreateButton("I'm A Button",1,1,98,28,gadPanel,BUTTON_PUSH)		'Try with smaller size, coming from top is fine, coming from bottom still causes erratic behaviour.
		
		SetPanelColor(gadPanel,255,0,0)

Repeat

	Select WaitEvent()
	
		Case EVENT_WINDOWCLOSE;End
		
		Case EVENT_MOUSEENTER;Hover()
		
		Case EVENT_MOUSELEAVE;LostHover()
		
		Case EVENT_GADGETACTION;Notify "Button Clicked"
		
	EndSelect
	
	DebugLog CurrentEvent.ToString$()

Forever


Function Hover()

	SetPanelColor(gadPanel,0,0,255)
	HideGadget(gadButton)

EndFunction

Function LostHover()

	SetPanelColor(gadPanel,255,0,0)
	ShowGadget(gadButton)
	
EndFunction
</textarea><br><br>Also I remember you adding PopupMenu functionality recently to GTKMaxGUI, however is it Linux convention for them to only remain visible while the right mouse button is held down and hide as soon as it's released (in MaxIDE) ?<br><br>Many thanks,<br><br><br>Seb <br><br></td></tr></table><br>
<a name="743012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another thing, how come windows will only have the Tool Window look when they are resizable. I have a tool window with a toolbar inside it to imitate a floating toolbar and it looks great, however in order to get the WINDOW_TOOL flag to work, I also had to apply the WINDOW_RESIZABLE flag, and it means that people can resize the window to show empty space. <br><br></td></tr></table><br>
<a name="743145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just for those who didn't realise and check back here for info regarding GTKMaxGUI, Brucey released version 1.15 of GTKMaxGUI a few days ago...<br><br><div class="quote"> BaH.GTKMaxGUI (1.15)<br><br>* UTF-8 fix for RequestFile filters and RequestDir path.<br>* Added text attribute with GetText and SetText methods to TreeNode.<br> <br></div><br><br><b>Thanks</b> :-) <br><br></td></tr></table><br>
<a name="745681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another wee update...<br><br>BaH.GTKMaxGUI (1.16)<br><pre class=code>
* Added visible field to TGTKGadget to control generation of events.
</pre><br>which fixes the issue of mouse enter/leave events being raised by "going-invisible" gadgets - see sebtest10 in the tests folder.<br><br>:o) <br><br></td></tr></table><br>
<a name="745685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks Brucey - restarting into Ubuntu now to test!<br><br>Update: Works perfectly - thanks Brucey! <br><br></td></tr></table><br>
<a name="746736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi folks!<br>Firstly, thanks for this module, Brucey. It looks amazing!<br><br>However, I unfortunately do not own a copy of the MaxGUI module, and it appears that gtkmaxgui needs it :(<br>I guess that's sold another copy of MaxGUI, but for now is there a binary of  the IDE (even better: The community edition IDE) using gtkmaxgui?<br><br>Edit:<br>Oops! Looks like there's already a gtk build for the CE MaxIDE.<br>...Err, don't mind me! <br><br></td></tr></table><br>
<a name="746772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> After playing with the GTK Max IDE (community edition) for a while, I have a few thoughts!<br><br>Again, great job. It is so much better than the old one, and smaller too!<br><br>Three things:<br><br>1. In the CE IDE, is anyone else getting a glitch where merely rolling the mouse pointer over a font button (in IDE options) will open up the font selector?<br><br>2. Also with the IDE: The sidebar is being very difficult to resize. It seems to jump between either fully closed, half open, or completely open for me. Very difficult to get it anywhere in between.<br><br>3. Do you know Gnome's fancy little features that let people detach toolbars and change menu accelerators? Are those features available in gtkmaxgui? (Judging by MaxIDE, no. It would be very cool to have, however! And I guess they could already be there since it doesn't look like the IDE had any extra changes other than being built with gtk. Err... are they?).<br><br>This is with Ubuntu, Feisty Fawn (development version). <br><br></td></tr></table><br>
<a name="746840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi There...<br><br><div class="quote"> Firstly, great job. It is so much better than the old one, and smaller too! <br></div><br>I second that - hooray to Brucey!<br><br><div class="quote"> 2. Also with the IDE: The sidebar is being very difficult to resize. It seems to jump between either fully closed, half open, or completely open for me. Very difficult to get it anywhere in between. <br></div><br><br>This problem has been there since day 1, and I originally thought it was probably just poorly designed splitter code. However, it seems that the GTK MaxGUI panel events generate occasional freak mis-positions with regards to EventX() and EventY() data on active panel events. It seems to happen when you call SetGadgetShape on a panel when the mouse is still moving around on it - which I believe to be how the splitter works...<br><br>I'll see if I can get some reproducable bug code to help Brucey diagnose the problem when I get a chance but at the moment I am really busy. <br><br></td></tr></table><br>
<a name="746902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi folks :-)<br><br>Thanks for the feedback.<br><br>Starting with The Poster Formally Known As Mr...<br><br>1) I noticed the very same thing this weekend, having not recompiled my IDE for months. It turns out that it is both a problem with my module and the way in which the dialog windows for the IDE have been coded (poorly, in my opinion).<br>In a fairly recent update to the module, I added mouse events to buttons - which I think are a great addition to MaxGUI, and give much more choice when making GUI apps - but, in certain dialogs, the Event testing code simply assumes that if an event is raised on a button it must be a click...<br>Personally, I think it's bad design to assume something like that, even though at the moment (on Win32 &amp; Mac), buttons only raise an Action event...<br>see...<br><pre class=code>
		Select EventSource()
			Case window
				If EventID()=EVENT_WINDOWCLOSE
					Hide
				EndIf				
			Case ok
				find=TextFieldText(findterm)
				Hide
				PollSystem
				host.activepanel.Invoke TOOLFINDNEXT,find
			Case cancel
				Hide
</pre><br>It can be fixed by adding eventID checks to the relevant points...<br><br>Of course, I could simply disable all the nice event generation that is in the GTK module... but I'd rather not. Maybe I should push the CE IDE to be fixed - the change would be compatible with all the platforms.. so...<br>I guess, perhaps, I'll have to see about writing some more "Tweaks" that add the same functionality to Mac and Windows....  Ho hum.<br><br><br>2) Yeah, I'm sorry about this one. I just haven't got around to fixing it yet.<br>It's all to do with the way in which GTK generates it's events. Unlike on Mac and windows (and Qt funnily enough, but more on that elsewhere ;-), GTK adds events to it's own event queue, before eventually arriving at Max's. This causes some delay, and hence the issues with dragging that splitter about.<br>I suppose I should take another look at it.<br><br>3) I see Qt/KDE has that nice concept of detaching toolbars too. Alas, I didn't look into supporting features like that because it wasn't a general "MaxGUI" feature - Yeah, I know all the extra events I generate aren't either, but they only required 1 line of code to implement ;-)<br>I guess it might be worth a look, just to see what would need to be done. The bigger issue would be handling the user dragging things back into the window and having Max try to sort out all the gadgets... but you never knows.<br><br><br>Seb, I did have an example of dragging panels around a GTK window that worked perfectly, but it all depended how you handled the event coordinates.<br>Basically, it's been hard work getting the GTK module to appear to work like the Mac/Win32 versions with regards event generation - read, kludgy ;-)<br><br>I'd say I'm about 90% happy with what we have. <br><br></td></tr></table><br>
<a name="747335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> topic continued <a href="/posts.php?topic=66924" target="_blank">here...</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
