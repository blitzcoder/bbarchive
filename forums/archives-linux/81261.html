<!DOCTYPE html><html lang="en" ><head ><title >possible gcc4.x fix</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >possible gcc4.x fix</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=109" >Linux Discussion</a>/<a href="#bottom" >possible gcc4.x fix</a><br><br>
<a name="915361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> haven't tested much, but I think I've got gcc4.3 working nicely with blitzmax with this fix:<br><br>blitz.mod/blitz_app.c[188]<br><pre class=code>
#if __APPLE__
	bbGCStartup( &amp;argc );
#elif __linux
	bbGCStartup( &amp;argc );
#else
	bbGCStartup( &amp;app_file+2 );
#endif
</pre> <br><br></td></tr></table><br>
<a name="915372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just modified blitz.mod/blitz_app.c, rebuilt the modules, modified bmk to use g++/gcc 4.3 and rebuilt it then rebuilt the mods again.<br>Tried all the BMax samples and so far it work a treat.<br>You wouldn't have thought that the gcc problem was so simple. <br><br></td></tr></table><br>
<a name="915375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not having much luck still with MaxIDE, so not entirely convinced... <br><br></td></tr></table><br>
<a name="915541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same here, MaxIDE builds and runs but as soon as you try and enter any thing in the editor it eats memory like a pig. But I haven't seen any thing else yet doing this (yet). <br><br></td></tr></table><br>
<a name="915552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> fltk itself feels strangely broken in the selection, cursorposition in status, etc. departments but I would imagine gc is to blame... <br><br></td></tr></table><br>
<a name="915560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> skidracer, is there much of a will to fix all these linux problems that have emerged with ubuntu 8.10, or is this it for bmax on linux for a while? It seems an awful lot of things need changing or updating to provide a pleasant environment, like gcc, fltk, etc. <br><br></td></tr></table><br>
<a name="915573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I think I've got gcc4.3 working nicely with blitzmax <br></div><br>Hey, it looks like that's sorted it for me too! Thanks :-)<br><br>Apps are running as expected. Even the IDE is running properly now. Cool... <br><br></td></tr></table><br>
<a name="915862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about gcc-3.4? Why does it not work? <br><br></td></tr></table><br>
<a name="915900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> it still works, but it's not in the ubuntu 8.10 repositories, so you can't automatically download it any more, you have to either go with gcc4.3 or download the package manually from the old repository. <br><br></td></tr></table><br>
<a name="916261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Firstdeathmaker</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I've got the problem that my MaxIde is not starting anymore. The original Ide tells me:<br><br>Unable to determine BlitzMax Version.<br>Please reinstall BlitzMax to repair this problem.<br><br>If I try to run ./bcc it tells me:<br><br>./bcc: error while loading shared libraries: libstdc++.so.5: cannot open shared object file: No such file or directory <br><br></td></tr></table><br>
<a name="916287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Firstdeathmaker<br>The original IDE use libstc++5. It doesn't hurt to install it as some printer drivers still use it. <br><br></td></tr></table><br>
<a name="916390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> more good news, after upgrading yesterday from a p3 500mhz to a coreduo E2200 (yes i'm cheap) i thought it was time to have another crack at compiling on ubu64,<br><br>the first thing is a small mod to bmk so it searches $blitzmax/lib then /usr/lib32 for libs, the original code I think wasn't searching any paths than the standard due to the order of things, <br><br>bmk_util.bmx[323]:<br><pre class=code>
	cmd="g++"
	cmd:+" -m32 -s -Os --eh-frame-hdr -pthread"

	cmd:+" -L"+CQuote(BlitzMaxPath()+"/lib")
	cmd:+" -L/usr/lib32"
	cmd:+" -L/usr/X11R6/lib"
	cmd:+" -L/usr/lib"

'	...seems to work OK - no more 'lib.5.so may conflict with lib.6.so...	

	cmd:+" -o "+CQuote(path)
	cmd:+" "+CQuote(tmpfile)
</pre><br><br>on a fresh install of Ubuntu64 8.10, with the new bmk and the usual bmx packages including<br><br>sudo apt-get install ia32-libs<br>sudo apt-get install libc6-dev-i386<br><br>and a few soft links until ubuntu get their act together...<br><br>/usr/lib32/libGL.so.1.2 to ~/blitzmax/lib/libGL.so<br>/usr/lib32/libGLU.so.1.3.070200 to ~blitzmax/lib/libGLU.so<br>/usr/lib32/libX11.so.6.2.0 to ~/blitzmax/lib/libX11.so<br>/usr/lib32/libXxf86vm.so.1.0.0 to ~/blitzmax/lib/libXxf86vm.so<br><br>tada! <br><br>finally blitzmax running nice on ubuntu64 <br><br></td></tr></table><br>
<a name="916555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Firstdeathmaker</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> one question: how can you rebuild the modules when you can't compile cause of the error? <br><br></td></tr></table><br>
<a name="916556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> The only error I had with current bmx-svn binaries is at link time when bmk needs to find the 32 bit .so files, and yes I used a 32 bit install to rebuild bmk, hopefully not required soon.<br><br>What OS? <br><br></td></tr></table><br>
<a name="916557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> one question: how can you rebuild the modules when you can't compile cause of the error? <br></div><br>What errors are you getting? <br><br></td></tr></table><br>
<a name="916637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matthew Smith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would assume it relates to still trying to compile with the old libraries - this is the error for me:<br><br>sh: g++-3.3: not found<br>Build Error: Failed to link /home/msmith/BlitzMax/src/bmk/bmk<br><br>Simon, how do you setup soft-links?<br><br>Update:<br>To setup soft-links type: <br><br>ln -s &lt;info&gt;<br><br>at the terminal (just looked it up myself).  The file name for the first link is a little different, but the other 3 were the same. <br><br></td></tr></table><br>
<a name="916767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I hope I got this right I have managed to get Blitz Max to work on Ubuntu64 using the original BlitzMax 1.30 archive (but it wouldn't surprise me if I screwed up the steps I took so let me know).<br><br>EDIT: Downloaded the svn version and rebuilt the job lot so far so good (the sound was playing up but it must have been something else eating CPU cycles as its ok now). It's nice to have a almost working FLTK-IDE but the text on the HTML/TEXT is a bit gray and HTML-hyperlinks cause it to lockup any hints on sovling this? (works ok on ubuntu32).....Correction I must be tired the links work and the gray html/text is to do with the desktop-theme doh!. <br><br>First job was to install the libraries.<br><br>Sudo apt-get install libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev build-essential libidn11-dev<br><br>The next was to install the gcc/g++ multilibs and some 32bit libs.<br><br>sudo apt-get install gcc-multilib g++-multilib ia32-lib<br><br>This should install the current version of the 32/64bit gcc/g++ libs and addition 32bit libs. If not the they are gcc-4.3-multilib g++-4.3-multilib.<br><br>Next was to add couple of symbolic links named gcc-3.3/g++-3.3 to link to gcc-4.3/g++-4.3<br><br>sudo ln -s /usr/bin/gcc-4.3 /usr/bin/gcc-3.3<br>sudo ln -s /usr/bin/g++-4.3 /usr/bin/g++-3.3<br><br>Next was to use skidraces code update on blitz.mod/blitz_app.c<br><br>#if __APPLE__				/Look for this it should be around line 166<br>	bbGCStartup( &amp;argc );<br>#elif __linux				//This line<br>	bbGCStartup( &amp;argc );		//And this line<br>#else<br>	bbGCStartup( &amp;app_file+2 );<br>#endif<br><br>Next was to modify the bmk_util.bmx by adding the line cmd:+" -L/usr/lib32" (skidracer) in the linux section of the function LinkApp like so.<br><br>	?Linux<br>	cmd$="g++ -m32 -s -Os --eh-frame-hdr -pthread -static-libgcc"<br>	cmd:+" -o "+CQuote( path )<br>	cmd:+" "+CQuote( tmpfile )<br>	cmd:+" -L/usr/lib32"				' New line<br>	cmd:+" -L/usr/X11R6/lib"<br>	cmd:+" -L/usr/lib"<br>	cmd:+" -L"+CQuote( BlitzMaxPath()+"/lib" )<br><br>Note I changed g++-3.3 to g++ and also changed gcc-3.3 in the linux section of the function CompileC to gcc so I could remove the links gcc-3.3/g++-3.3 later.<br><br>I then compiled the bmk.bmx file renamed the old bmk in the BlitzMax/bin folder to bmk.old, then moved the new bmk executable from the src/bmk over to BlitzmMax/bin<br><br>Then I did the symbolic links (skidracer) in the BlitzMax/lib directory (replace the ~/blitzmax with your BlitzMax path)<br><br>ln -s /usr/lib32/libGL.so.1.2 ~/blitzmax/lib/libGL.so<br>ln -s /usr/lib32/libGLU.so.1.3.070200  ~/blitzmax/lib/libGLU.so<br>ln -s /usr/lib32/libX11.so.6.2.0 ~/blitzmax/lib/libX11.so<br>ln -s /usr/lib32/libXxf86vm.so.1.0.0 ~/blitzmax/lib/libXxf86vm.so<br><br>Then I rebuilt the modules.<br><br>Then tried some of the samples. And they seem to work ok so far.<br><br>UPDATE: Next problem to solve getting MaxGTK apps to link. <br><br></td></tr></table><br>
<a name="920166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I've been trying to get BlitzMax working with Ubuntu 8.10 all morning. I now regret upgrading to 8.10. I have been following dawlane's instructions above but have run into a "Command Line Error" when trying to compile bmk.bmx. Since I rarely dabble within the bowels of BlitzMax, I do not know what the problem is.<br><br>Question to BRL: when is BlitzMax 1.32 due out, and will we ever see the day that BlitzMax will work on Linux without all these tweaks and hacks?? I mean, I don't mind installing a few libraries to get things to compile, but with every new release of Linux it gets worse and worse trying to keep BlitzMax functioning.<br><br>I can assure everyone that <b>it is worth the effort</b> to keep BlitzMax and Linux working together harmoniously. You <u>can</u> make money with Linux games! Please, BRL- get BlitzMax up-to-date with the latest Linux libraries so that these hacks are not needed. At the very least, a compiled BlitzMax application should be able to run on a vanilla installation of the latest version of 32-bit Ubuntu (no additional libraries required). As I said, I understand the need for additional libraries to get the IDE and compiler working, but all these hacks are just ridiculous. <br><br></td></tr></table><br>
<a name="920220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I fully agree Tachyon, but you probably shouldn't bet on it. <br><br></td></tr></table><br>
<a name="920225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are some updates in the BlitzMax SVN which purport to fix the runtime issues on gcc4.x.<br>I've not yet updated my Ubuntu to 8.10, so can't comment on that atm.<br><br>A compiled app should indeed run fine without any extra user installs - depending on what libs you are using. For example, if you app used the GTK mods (but not the firefox htmlview), I would expect it to "just work" on most distros.<br>If you are using graphics, then obviously the user would require some mesa/gl runtime shared objects to be installed on their system.<br><br>For *compiling*, the very nature of the unix-style system requires gcc to link to specifically named shared objects, (and perhaps headers in certain cases). These shared objects are not present in a "runtime" release, which is why you need to download developer releases. (that's why you generally have two sets of releases per library -&gt; runtime and dev).<br><br><br>Of course, running/building 32-bit software on a 64-bit system is something entirely different... although dawlane seems to be most of the way there ;-)<br>Maybe I should upgrade to 64-bit... then at least I could use *all* of the 4gig I've got installed... <br><br></td></tr></table><br>
<a name="920229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey- after reading your post I decided to do a clean install of BlitzMax and then update to the latest development version. BlitzMax loaded and compiled flawlessly the first time.<br><br>I have tried to stay away from the SVN version simply because it is not supposed to be as stable as the official release, but this is the second time I've been proven wrong. Can we please get more frequent official updates? <br><br></td></tr></table><br>
<a name="920250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey there is a one small problem using MaxGtk.mod on a 64bit system and that is not all the 32bit libs that are needed are installed or are in the repository. Looks like it would involve manually installing the libs and their dependencies (big head ache).<br>I haven't tried wxMax yet but I would guess that you would have to down load the wxWidgets source and re-build with a few arguments added to the command line. <br><br></td></tr></table><br>
<a name="927528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ragtag</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was planing to update my old game over the holidays, and doing a linux version. Any chance of a quick how to on using BlitzMax in Ubuntu 8.10?<br><br>Like required libraries and how to build the different parts needed.<br><br>I know Linux tends to be a figure it out yourself or with the help of the community, but BlitzMax seems to be harder than most to get working. :) <br><br></td></tr></table><br>
<a name="927533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> The libs to use are the same as for 8.04 don't forget it enable the restricted graphic drives (if any).<br><br>Sudo apt-get install libglu1-mesa-dev x11proto-core-dev x11proto-gl-dev x11proto-kb-dev libxxf86vm-dev libasound2-dev build-essential libidn11-dev<br><br>As g++-3.3 is no longer in the repositories you have to install g++-4.3<br>Then you have two choices: download the svn (I believe it's been fix for gcc-4.3. I haven't played with Linux for a while as I've been working/learnig with Cinema 4D R10.5) or use BlitzMax 1.30 with skidraces fix above and a couple of system links to redirect BlitzMax to use 4.3 instead of 3.3<br><br>sudo ln -s /usr/bin/gcc-4.3 /usr/bin/gcc-3.3<br>sudo ln -s /usr/bin/g++-4.3 /usr/bin/g++-3.3<br><br>Then rebuild all modules.<br>And all should be well <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
