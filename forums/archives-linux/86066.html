<!DOCTYPE html><html lang="en" ><head ><title >Game protection suggestion...?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Game protection suggestion...?</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=109" >Linux Discussion</a>/<a href="#bottom" >Game protection suggestion...?</a><br><br>
<a name="974758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since I'm currently finishing my game, I'm now turning into implementing a copy protection method, not very elaborated, just something to prevent "casual copiers"<br><br>What I need is some way to lock the game to the computer where it's installed. Whoever buys it can install the game as many times as they want, on as many computer as they want - but after installed, it must somehow tie itself to that computer.<br><br>Why this? Mainly because the game will run in schools. So I want to prevent kids copying the whole path where the game is installed and taking the game home.<br><br>On Windows I can easily get the HD serial number and encode it somewhere... but I have no clue how to do that on Linux. Searching on google didn't help either :(<br><br>I thought to store the path where the program is installed, but that could be easily changed; storing the username could be an option, but still, if several users get access to the game, it won't work... and I have no idea how the Linux setup on those schools might be.<br><br>I also can't check anything online - most of those schools don't have internet, maybe not even a decent phone line.<br><br>Now, please, let's not start a discussion where protection is needed, useful, hated or what - I need something implemented, and would love to hear from you guys any ideas, of what could be done. <br><br></td></tr></table><br>
<a name="974806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> When installing, write a hidden file somewhere else on the OS (or in the registry, or whatever).  Then, to copy the game, the user (kids) would have to know where that file is and copy it as well to run the game.<br><br>Not fool proof, and could be circumvented fairly easily, but it will stop casual copiers. <br><br></td></tr></table><br>
<a name="974813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Finding hardware informatio programmatically is actually really, really easy under Linux: It's all stored in plain text files that you can read and parse by your program.<br><br>For example:<br>/proc/cpuinfo will contain information about the CPU<br>/proc/meminfo will contain information about the memory<br>/proc/partitions will contain info about HD partitions<br><br>there's similar files for other hardware components.<br>A combination of several of these component files will probably be enough to get a fairly unique profile.<br><br>for example, the cpuinfo file may contain the following:<br><br><div class="quote"> <br>processor  : 0<br>vendor_id   : AuthenticAMD<br>cpu family  : 5<br>model       : 9<br>model name  : AMD-K6(tm) 3D+ Processor<br>stepping    : 1<br>cpu MHz     : 400.919<br>cache size  : 256 KB<br>fdiv_bug    : no<br>hlt_bug     : no<br>f00f_bug    : no<br>coma_bug    : no<br>fpu     : yes<br>fpu_exception   : yes<br>cpuid level : 1<br>wp      : yes<br>flags       : fpu vme de pse tsc msr mce cx8 pge mmx syscall 3dnow k6_mtrr<br>bogomips    : 799.53<br> <br></div><br><br>the vendor_ID, model name, CPU family, model and stepping would be good things to check against. MHz may be less suited, since there are tiny fluctuations in the returned speeds which may vary over time. (e.g. the 400.919 listed in this example really is 400MHz)<br><br>Example of /proc/meminfo:<br><div class="quote">  total:    used:    free:  shared: buffers:  cached:<br>Mem:  1050001408 1012899840 37101568        0 113672192 420950016<br>Swap: 2097434624 217985024 1879449600<br>MemTotal:      1025392 kB<br>MemFree:         36232 kB<br>MemShared:           0 kB<br>Buffers:        111008 kB<br>Cached:         279304 kB<br>SwapCached:     131780 kB<br>Active:         677908 kB<br>ActiveAnon:     487272 kB<br>ActiveCache:    190636 kB<br>Inact_dirty:    129164 kB<br>Inact_laundry:   23948 kB<br>Inact_clean:     15332 kB<br>Inact_target:   169268 kB<br>HighTotal:      131008 kB<br>HighFree:         2336 kB<br>LowTotal:       894384 kB<br>LowFree:         33896 kB<br>SwapTotal:     2048276 kB<br>SwapFree:      1835400 kB<br>Committed_AS:  1079884 kB<br> <br></div><br><br>There's a bunch of stuff that it dynamic, but the total mem size and the total swap size should be fairly static. (Unlike Windows, Linux typically uses a swap partition, not a swap file, so sizes are unlikely to change after the installation) <br><br></td></tr></table><br>
<a name="974817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> One more thing: Harddrive information can also be found under the branch, but I'm not sure about the exact path for those. It's likely in a subfolder somewhere... hda is the primary IDE drive, sda is the primart SATA/SCSI drive. (hdb, hdc, hdd are secondary etc., sdb, sdc, sdd, sde, sdf etc. are secondary SATA)... but as far as locking against hardware, you probably only need to look at the primary partition.<br><br>Look around, but it could be something like:<br>/proc/ide/ide1/hda/identify<br>or<br>/proc/hda/idenfity<br>/proc/sda/identify<br><br>there's config files containing info about capacity, settings, model, identification, and others. <br><br></td></tr></table><br>
<a name="974823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> To add to xlsior's post, extracting the info from the files for use is also really easy. This goes into the standard UNIX commandline tools you will find on every linux machine and may well be worth spending some time on to learn about them. These tools are absolute life savers when working with linux (with every unix system for that matter).<br><br>Let's say you only want the CPU model name from /proc/cpuinfo, you just do this in a command line (or through the _system() command in blitz:<br><br><pre class=code>
cat /proc/cpuinfo | grep "model name" | sed sed -r 's/model name\s+\:\s+//g'
</pre><br><br>This will print "AMD-K6(tm) 3D+ Processor" once for every CPU/Core that is present in the machine (using the output xlsior posted.. this is of course different for your own machines).<br><br>- 'cat' simply prints the contents of the file /proc/cpuinfo to the standard output stream.<br><br>- '|' (pipe) sends that output to the next program, in this case 'grep'.<br><br>- 'grep' performs a regular expression search on the text it gets from the standard input stream and prints only the lines that match. In our case "model name : AMD-K6(tm) 3D+ Processor".<br><br>- '|' this pipe sends the output from grep and gives it to the program 'sed'.<br><br>- 'sed' also performs a regular expression search on the input text and replaces the bit in "s/.../" with the bit in "/.../g". In our case "model name : " is replaced by "" (nothing).  The output is then printed to the standard output stream again for your viewing pleasure.<br><br>For my own computer, the output of that command is:<br><br><pre class=code>
$ cat /proc/cpuinfo | grep "model name" | sed -r 's/model name\s+\:\s+//g'
Intel(R) Core(TM)2 CPU         E8400  @ 3.00GHz
Intel(R) Core(TM)2 CPU         E8400  @ 3.00GHz
</pre><br><br>It's printed twice, because I have a dual core CPU and /proc/cpuinfo lists all those cpu details once for each cpu/core on the machine.<br><br>If you want only 1 result for the first cpu/core, use the 'head' command to get only the first line.<br><br><pre class=code>
$ cat /proc/cpuinfo | grep "model name" | sed -r 's/model name\s+\:\s+//g' | head -n 1
Intel(R) Core(TM)2 CPU         E8400  @ 3.00GHz
</pre><br><br>- 'head' lets you print the first N lines of an input stream's text. '-n 1' denotes 'print only 1 line'. Similarly there is a 'tail' command which does the same as 'head', but counts from the end of the stream/text.<br><br>This may all be a little more info than you needed, but it will help you get anything you might want from your linux machines in the future.<br><br><br>This concludes our short (and probably pointless) lesson in Unix Shell Commands 101 :) <br><br></td></tr></table><br>
<a name="974869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...Or he can just open the file from within Blitzmax like any other textfile, and not have to depend on 3rd party additions. :-? <br><br></td></tr></table><br>
<a name="974870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> They are all part of the Unix core. No need for extra installs. Every unix OS hsa them installed by default. Saves him having to manually parse the file in blitz.<br><br>But sure, opening it in blitz works to :p <br><br></td></tr></table><br>
<a name="974877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know they are standard, but there's little point in external scripts or processes to pull data that you can easily obtain directly from within your own program -- any additional external dependency is an additional point of failure, after all. <br><br></td></tr></table><br>
<a name="974880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd tend towards using cat ... too, but then I guess it depends where you're coming from :-p <br><br></td></tr></table><br>
<a name="974968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks everybody for all the suggestions! After reading all that, I looked around on google (much better knowing what to look for) - and then I found a simple solution, which I think will work well:<br><br><pre class=code>
dir=ReadDir("/dev/disk/by-uuid")

If Not dir RuntimeError "failed to read current directory"

Repeat
	t$=NextFile( dir )
	If t="" Exit
	If t="." Or t=".." Continue
	Print t	
Forever

CloseDir dir
</pre><br><br>This lists all uuids for all drives, so it should be pretty safe to use those id's, right? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
