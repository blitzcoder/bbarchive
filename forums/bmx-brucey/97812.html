<!DOCTYPE html><html lang="en" ><head ><title >BaH.rtMidi Module problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BaH.rtMidi Module problem</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >BaH.rtMidi Module problem</a><br><br>
<a name="1138234"></a>

<a name="1138235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I found a problem in the rtMidi-Module, or is it a problem of MinGW or is it BlitzMax? I not very experienced in module topics and I don't know how to deal with the error messages.<br><br>I changed form BlitzMax 1.39 to 1.48, because I set up a new computer. After installing BlitzMax, I copied the module folders from the old computer. The same with MinGW. The system variables are correct, BlitzMax could build all modules.<br><br>When I start this program, I get more than 100 error messages<br><pre class=code>	SuperStrict
'Import koriolis.zipstream
Import BaH.RtMidi
'Import BaH.Volumes 
'Import MaxGUI.Drivers
End </pre><br><br>all runs perfect5 with this constellation:<br><br><pre class=code>	SuperStrict
Import koriolis.zipstream
'Import BaH.RtMidi
Import BaH.Volumes 
Import MaxGUI.Drivers
End</pre><br><br>The error messages look like this:<br><pre class=code>Building untitled1
Compiling:untitled1.bmx
flat assembler version 1.69.14 (1152622 kilobytes memory)
3 passes, 2081 bytes.
Linking:untitled1.exe
C:/BlitzMax/mod/bah.mod/rtmidi.mod/rtmidi.release.win32.x86.a(glue.cpp.release.win32.x86.o):glue.cpp:(.text+0x5c): undefined reference to `__gxx_personality_sj0'
C:/BlitzMax/mod/bah.mod/rtmidi.mod/rtmidi.release.win32.x86.a(glue.cpp.release.win32.x86.o):glue.cpp:(.text+0x6f): undefined reference to `_Unwind_SjLj_Register'
....
$_ZNSt5dequeIN8RtMidiIn11MidiMessageESaIS1_EE16_M_push_back_auxERKS1_[__ZNSt5dequeIN8RtMidiIn11MidiMessageESaIS1_EE16_M_push_back_auxERKS1_]+0x283): undefined reference to `_Unwind_SjLj_Resume'
Build Error: Failed to link C:/BlitzMax/tmp/untitled1.exe
Process complete
</pre><br><br>This are the version informations: BlitzMax=1.4.8, FASM=1.69.14, GCC=3.4.5, G++=3.4.5, Bah.rtMidi=1.01, rtMidi=1.0.14<br><br>When I use the old BlitzMax 1.39 everything runs perfect. Has somebody an idea, what I should do and what happens?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1138248"></a>

<a name="1138253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> BMax, and it's libs, since 1.44 has been using gcc/g++ 4.6.<br>So I think it's you combination of BMax1.48 &amp; gcc/g++ 3.4.5..<br><br>Something was changed in gcc between 3.x &amp; 4.x that made them not combatible.<br><br>Might have better luck with <a href="http:///nuwen.net/mingw.html" target="_blank">http:///nuwen.net/mingw.html</a><br>or direct downloadlink: <a href="http://nuwen.net/files/mingw/mingw-9.0.exe" target="_blank">http://nuwen.net/files/mingw/mingw-9.0.exe</a><br><br>But then again, be aware that this might break old modules..<br><br>EDIT: <br>Got the rtmidi mod from brucey's svn, built it, <br>and your (small) program seems to work here.<br>Running BMax 1.48 &amp; gcc/g++ 4.7 (from the link above) on Windows7 x64<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1138320"></a>

<a name="1138622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you Ole,<br><br>this is a step ahead! The builing now works. I never heared about that relation between new versions of BMax and necessary new MinGW.<br><br>But first tests with the module did not work. Would you please run this test code made by brucey on your machine:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">' Simple program to test MIDI output.

SuperStrict

Framework BaH.RtMidi
Import BRL.StandardIO

Local midiOut:TRtMidiOut = New TRtMidiOut.Create()

If midiOut.getPortCount() = 0 Then
	Print "No Output Ports"
	End
End If

For Local i:Int = 0 Until midiOut.getPortCount()
	Print "  Output port #" + i + " : " + midiOut.getPortName(i)
Next

Print "Opening " + midiOut.getPortName()

midiOut.openPort(0)

' #edit: changend dimension 2-&gt;3
Local message:Byte[] = New Byte[3]

' Send out a series of MIDI messages.

' Note On: 144, 64, 90
message[0] = 144
message[1] = 64
message[2] = 90
midiout.putMessage(message, 3)

Delay(500)

' Note Off: 128, 64, 40
message[0] = 128
message[1] = 64
message[2] = 40
midiout.putMessage(message, 3)

midiout.free()</textarea><br><br>I get a EXEPTION_ACESS_VIOLATION at this line:<br><pre class=code>Local midiOut:TRtMidiOut = New TRtMidiOut.Create()</pre><br><br>but i am not sure, whether it is because of the new computers hardware, or still the MinGW-problem...<br><br>You wrote something about brucey's svn. I never did something with snv. How to do and where to find? Could this be the source of my second problem? I "only" re-builded all modules.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1138444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Henri</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need SVN program like <a href="http://tortoisesvn.tigris.org/" target="_blank">http://tortoisesvn.tigris.org/</a><br>Brucey's SVN repository is located in <a href="http://maxmods.googlecode.com/svn/trunk" target="_blank">http://maxmods.googlecode.com/svn/trunk</a> <br><br></td></tr></table><br>
<a name="1138445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get the same error as you when running the code above.<br>It seem to fail in c/c++, or brucey's cluecode somewhere.<br><br>I have no idea how to fix it.<br><br>But talking svn/subversion you got the links you need above,<br>or directdownload <a href="http://tortoisesvn.net/downloads.html" target="_blank">http://tortoisesvn.net/downloads.html</a><br><br>And if you need some info on svn/subversion, there's always the <a href="http://tortoisesvn.net/support.html" target="_blank">TortoiseSVN manual(s).</a> <br><br></td></tr></table><br>
<a name="1138490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you Ole...<br><br>for testing this. So it does not result in an old version of rtMidi.mod.<br><br>Now I will contact Brucey. Perhaps he can hel me... <br><br></td></tr></table><br>
<a name="1138535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Win 7 , bmax 1.48, gcc version 4.6.2, bah.rtmidi (latest svn version 1.02 with rtmidi version 1.0.15) and all above tests and bah.rtmidi examples are working without errors.<br><br>well, i got this error:<br><pre class=code>
RtMidiIn::initialize: no MIDI input devices currently available.
No Input Ports</pre><br>but bah.rtmidi works <br><br></td></tr></table><br>
<a name="1138621"></a>

<a name="1138623"></a>

<a name="1138624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> i changed now to GCC 4.7.0 and updated the rtMidi.mod via SVN, but I still have the same problem with EXEPTION_ACESS_VIOLATION like Ole.<br><br>Now I run a test with GCC 4.6.3  and a Windows XP SP3 System.<br><br>Can I use "Rebuild all modules" when I change the MinGW version? Should I ? Or should I re-install the BlitzMax from BlitzBasic.Com and only run "Build Modules"?<br><br>Please help I am very unexperienced in compiling topics....<br><br>Thanks Zeke.. your message makes me hope. And the error message with midi in is normal, because you do not have a plugged in midi device, or?<br><br><br>#edit<br><br>Ok, it seems to run... only one little error occured: I had to change dimension in bruceys test code to 3<br><pre class=code>Local message:Byte[] = New Byte[3]
....
message[2] = 90</pre><br><br>Now I do the tests with other modules I normaly need...<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
