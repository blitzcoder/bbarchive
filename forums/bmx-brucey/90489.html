<!DOCTYPE html><html lang="en" ><head ><title >FreeImage load hangs on damaged picture</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >FreeImage load hangs on damaged picture</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >FreeImage load hangs on damaged picture</a><br><br>
<a name="1028719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a jpeg that appears to have some damage. When loading it in FreeImage it hangs. One of my testers reported that if he waits long enough (like 30 minutes) it will eventually load, but I haven't had the time to let it sit and find out for myself.<br><br>My loading is done in a child thread, so I could watch that thread to see if it's been running for too long but I don't know how to kill it off if it has. It would obviously also be better if FreeImage could deal with the problem internally either with a timeout or detecting the bad data and either giving up or returning what it has so far. Any suggestions of what to do, or where to look in freeimage (it's a bit daunting for me to try to dig through it all without more free time) would be much appreciated.<br><br>I sent the damaged image to Brucy but I think my email has been bad about attachments recently so I don't know if it went through. I'm happy to send it on to whoever would be interested. <br><br></td></tr></table><br>
<a name="1030265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I had problems with some JPGs that had unusual metatags in them. <br><br>I suggest upgrading to the newest FreeImage version (3.13). It was fairly easy to mod to get it to work, I had to add some "#ifndef __MINGW32__ " "#endif" around some things that weren't compiling correctly in "Freeimage.h".<br><br>I have the files if anyone wants to host it. I'd be happy to share. <br><br></td></tr></table><br>
<a name="1030358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> please toss them my way, I'll give them a home until brucy updates the core.<br>email them to blitzmods (at) toscaledesign (dot) com if you would be so kind, I'll post a link once I've got them on my server. <br><br></td></tr></table><br>
<a name="1030362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The current version in SVN is 3.13<br><br>The latest version of FreeImage is 3.13.1 <br><br></td></tr></table><br>
<a name="1030496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> re-downloaded current version from SVN off google code (hope that's the right place) to make sure I was up to date (I think I was) and same problem. <br><br></td></tr></table><br>
<a name="1030943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update: newest newest SVN works nicely and handles errors much much better. Brucey also pointed me at the new SetFreeImageErrorHandler callback setter. Haven't played with it yet, but it should go a long way towards making my programs more idiot proof. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
