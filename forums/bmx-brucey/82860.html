<!DOCTYPE html><html lang="en" ><head ><title >SSH with bah.libcurlSSL</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >SSH with bah.libcurlSSL</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >SSH with bah.libcurlSSL</a><br><br>
<a name="934954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rene Albrecht</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to write something like a ssh client with bah.libcurlSSL?<br><br>Thanks<br>René <br><br></td></tr></table><br>
<a name="935133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should be possible, with a suitable ssh library. <br><br></td></tr></table><br>
<a name="935292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've added provisional support for ssh with libcurlssl.<br>This means you can now use protocols such as SFTP.<br><br>You can find the updated code in SVN (for now). You will need :<br><br>BaH.libcurlssl<br>BaH.libssh2<br>(and of course, OpenSSL)<br><br>For specific ssh support, it will probably need to be done via a wrapper to the API - but I'll need to look into that.<br><br><br><br>Note: Mac and Linux build of libssh2 is broken for now (until I get home and fix it). <br><br></td></tr></table><br>
<a name="935403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fixed for Mac...  :-p <br><br></td></tr></table><br>
<a name="935434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rene Albrecht</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll give it a try... Thank you!!! :) <br><br></td></tr></table><br>
<a name="935438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've tested it with SFTP specifically (eg. sftp://servername.com/path/to/dir ) and it works as expected.<br>I've yet to read up on implementing "normal" ssh, which you might use as a telnet replacement, for example.<br><br><br>Linux builds also. <br><br></td></tr></table><br>
<a name="935462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Compile error on Windows for me:<br><br><div class="quote"> <br>Compiling:channel.c In file included from c:/code/blitzmax/mod/bah.mod/libssh2.mod/src/channel.c:42:<br><br>C:/MinGW/include/unistd.h:36: error: conflicting types for 'usleep'<br>c:/code/blitzmax/mod/bah.mod/libssh2.mod/src/libssh2_priv.h:138: error: previous definition of 'usleep' was here<br>Build Error: failed to compile c:/code/blitzmax/mod/bah.mod/libssh2.mod/src/channel.c<br> <br></div> <br><br></td></tr></table><br>
<a name="935465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's interesting. My original build was on Windows. What version of MinGW are you using?? <br><br></td></tr></table><br>
<a name="935468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 5.1.4 -- the one that was recommended to use with Max3D <br><br></td></tr></table><br>
<a name="935469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I remark out the usleep bit in libssh2_priv.h the module compiles without error, but no idea if that breaks anything else... <br><br></td></tr></table><br>
<a name="935475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay. Fixed the header. (rev 600)<br>Looks like a libssh2 bug, although it compiles fine on 5.1.3. Does 5.1.4 use a different gcc version?<br><br>Also included local copy of openssl headers for Win32, to remove the dependency on bah.libcurlssl, since the two shouldn't rely on each other... <br><br></td></tr></table><br>
<a name="935479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Looks like a libssh2 bug, although it compiles fine on 5.1.3. Does 5.1.4 use a different gcc version? <br></div><br><br>No idea which version 5.1.3 uses, but it appears that 5.1.4 uses GCC 3.4.5.<br><br>Anyway, I just synced up SVN again, and it looks like it compiles without error now. <br><br></td></tr></table><br>
<a name="935517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> it looks like it compiles without error now.  <br></div><br>I had to wrap that function in an #ifdef ...   weird.<br><br><br><br>I've started implementation of the library. It's very cool. So far I've been able to SSH onto the Linux server in the office using Keyboard Interactive Authorization.<br>Lots to do still, but I like it - nice, basic API. <br><br></td></tr></table><br>
<a name="935553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's probably a really clever way to do all of this, but for now I've just knocked together a small example which SSH's onto a machine, and runs "ls".<br><br>Example session:<br><pre class=code>
Executing:example_01.debug
Authentication by keyboard-interactive succeeded.
Last login: Wed Jan 28 20:34:50 2009 from localhost
Bruceys-Mac-Mini:~ brucey$ ls
Applications			Pictures
Desktop				Public
Documents			Sites
Downloads			coretest.o
Library				test.sh
Movies				test.txt
Music				untitled.applescript
NapSymbDn.ttf			viewone
NapSymbUp.ttf
Bruceys-Mac-Mini:~ brucey$ 
Process complete
</pre><br>Which isn't bad, I suppose. <br><br></td></tr></table><br>
<a name="935555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> If anyone can work out how to do this reading/writing properly, I'd be really interested to hear about it :-p <br><br></td></tr></table><br>
<a name="1094887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Streams maybe? I've compiled your example and encountered the same problem ;-) <br><br></td></tr></table><br>
<a name="1094915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a cross-platform "putty" module lying around somewhere which is kind of interesting... which does telnetty things properly, and uses a Graphics context to display stuff...<br><br>As you can imagine, I probably have as many experimental modules as I have released ones... <br><br></td></tr></table><br>
<a name="1095387"></a>

<a name="1095388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any chance of putt(y)ing it on svn? :-)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1095412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not quite ready for the big time yet...<br><br>But here's an example of it running the other day using a Max2D session renderer. I first ssh'd to my localhost, then telnetted to a remote server to watch something... ;-)<br><br><img src="http://brucey.net/programming/blitz/misc/screenshots/blitzmax_putty_example.png"> <br><br></td></tr></table><br>
<a name="1095483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If anyone can work out how to do this reading/writing properly, I'd be really interested to hear about it :-p <br></div><br><br>How about something like this? <br><br><pre class=code>
while not right(out$,28) = "~nBruceys-Mac-Mini:~ brucey$ "
  read data loop
wend
</pre><br><br>If I'm not mistaken, you're referring to the unknown amount of data to read 'thing' I've also encountered... But this would not be properly though it probably won't cut off the remaining bytes on slow networks.... (?) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
