<!DOCTYPE html><html lang="en" ><head ><title >wxTreeCtrl - SetFocus to TextCtrl</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >wxTreeCtrl - SetFocus to TextCtrl</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >wxTreeCtrl - SetFocus to TextCtrl</a><br><br>
<a name="890677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is something wrong with setfocus to a textctrl?<br><br>On treectrl; OnInit:<br><pre class=code>
connectany(wxEVT_COMMAND_TREE_ITEM_ACTIVATED, Clicked) 
</pre><br><br><br><pre class=code>
Function Clicked(_Event:wxEvent) 
	Local Tree:wxTreeCtrl = MyTree(_event.parent) 
	Local Obj:TPresetItem = TPresetItem(tree.GetItemData(Tree.GetSelection())) 
	If Obj Then
		txtFunctionCode.WriteText(Obj.Conversion) 
		Local F:Int, T:Int
		txtFunctionCode.GetSelection(F, T) 
		txtFunctionCode.SetSelection(f - (obj.Selection + 1), (f - (obj.Selection + 1)) + Obj.selection) 
		txtFunctionCode.SetFocus() 
	End If
End Function
</pre><br><br>It is writing the text, setting the selection, but not getting any keyboard focus. The focus remains on the Tree control, rather then switching to txtFunctionCode (TextCtrl).<br><br>Am I missing something or is this a bug? <br><br></td></tr></table><br>
<a name="890687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> My guess is that the click event on the tree node has already set the "let's put the focus on the node" code into action - which is overriding your attempt to divert the focus to a text control. Just a guess though!<br><br>I'd create a little sandbox test app and try intercepting the event a little lower down in the event queue by hooking into <br><br><pre class=code>
Connect(GetId(),wxEVT_LEFT_DOWN, _OnLeftClick)
</pre><br>and then in _OnLeftClick doing a HitTest() on the mouse position to determine the selected node/item, making sure you don't skip the event. That way hopefully the click event won't propagate back up the control and your textctrl.SetFocus() will just work.<br><br>But then, it could be something as simple as an error in your txtFunctionCode class. <br><br></td></tr></table><br>
<a name="891371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might want to try adding an event.Skip() in your event handler function. It's possible that it is still being handled after this function, which could be forcing focus to the treectrl. <br><br></td></tr></table><br>
<a name="891411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nothing =(<br><br>I managed a workaround though, using a timer at 100ms, with oneshot enabled to set focus on the textctrl after the event is passed. It works good enough. <br><br>When double clicking on a tree control, it must activate 2 seperate events or something. One after _ACTIVATED, otherwise the event.skip you suggested should have worked. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
