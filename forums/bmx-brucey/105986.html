<!DOCTYPE html><html lang="en" ><head ><title >[Solved] Problem to add .rc to .exe</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >[Solved] Problem to add .rc to .exe</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >[Solved] Problem to add .rc to .exe</a><br><br>
<a name="1299783"></a>

<a name="1299784"></a>

<a name="1299785"></a>

<a name="1299787"></a>

<a name="1299789"></a>

<a name="1299790"></a>

<a name="1299791"></a>

<a name="1299792"></a>

<a name="1299793"></a>

<a name="1299798"></a>

<a name="1299799"></a>

<a name="1299800"></a>

<a name="1299801"></a>

<a name="1299802"></a>

<a name="1299925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> After I Upgrade to TDM MinGW 64bit 5.1.0-2<br>I get this:<br><pre class=code>*********************[Start :: Building Project]***
C:\MOBii\BLL&gt;cd C:\BlitzMax\MOBii\BLL\

C:\BlitzMax\MOBii\BLL&gt;windres -iBuild\BLL.rc -oBuild\BLL.o

C:\BlitzMax\MOBii\BLL&gt;C:\BlitzMax\bin\<b>bmk makeapp -r -t gui EDii.bmx</b>
[ 99%] Processing:EDii.bmx
[ 99%] Compiling:EDii.bmx.gui.release.win32.x86.s
flat assembler  version 1.69.14  (1024457 kilobytes memory)
4 passes, 14887 bytes.
[100%] Linking:EDii.exe
C:\Wello\MinGW/bin/ld.exe: skipping <b>incompatible</b> C:/BlitzMax/MOBii/BLL/Build/BLL.o when searching for C:/BlitzMax/MOBii/BLL/Build/BLL.o
C:\Wello\MinGW/bin/ld.exe: skipping <b>incompatible</b> C:/BlitzMax/MOBii/BLL/Build/BLL.o when searching for C:/BlitzMax/MOBii/BLL/Build/BLL.o
C:\Wello\MinGW/bin/ld.exe: cannot find C:/BlitzMax/MOBii/BLL/Build/BLL.o
Build Error: Failed to link C:/BlitzMax/MOBii/BLL/EDii.exe</pre>skipping <b>incompatible</b> C:/BlitzMax/MOBii/BLL/Build/BLL.o<br><br>I compile: x86 and no multithreaded version<br>I don't get any Error message from: windres -iBuild\BLL.rc -oBuild\BLL.o<br>this was working in my MinGW 4.7.1<br>I get same Error in BLIDE now..<br>EDii.exe get compiled but BLL.o is not included<br><br><br>BLL.rc:<pre class=code>101 ICON "C:\\BlitzMax\\MOBii\\BLL\\images\\icon.ico"
1 VERSIONINFO
FILEVERSION 1,0,0,0
PRODUCTVERSION 1,0,0,0
FILEOS 0x40004
FILETYPE 0x1
{
BLOCK "StringFileInfo"
{
	BLOCK "040904B0"
	{
		VALUE "CompanyName", "..."
		VALUE "FileDescription", "..."
		VALUE "FileVersion", "0.97a"
		VALUE "InternalName", "..."
		VALUE "LegalCopyright", "..."
		VALUE "OriginalFilename", "EDii.exe"
		VALUE "ProductName", "BLL"
		VALUE "ProductVersion", "..."
	}
}

BLOCK "VarFileInfo"
{
	VALUE "Translation", 0x0409, 0x04B0
}
}
24 "C:\\BlitzMax\\MOBii\\BLL\\Build\\data.bin"
</pre>data.bin:<pre class=code>&lt;?xml version="1.0" encoding="UTF-8" standalone="yes" ?&gt;
&lt;assembly xmlns="urn:schemas-microsoft-com:asm.v1"
   manifestVersion="1.0"&gt;
&lt;description&gt;Windows forms common control manifest&lt;/description&gt;
&lt;dependency&gt;
&lt;dependentAssembly&gt;
&lt;assemblyIdentity type="win32"
   name="Microsoft.Windows.Common-Controls"
   version="6.0.0.0" processorArchitecture="x86"
   publicKeyToken="6595b64144ccf1df" language="*" /&gt;
&lt;/dependentAssembly&gt;
&lt;/dependency&gt;
&lt;/assembly&gt;</pre>I download the latest resource_hacker 4.2.5<br><br>If I add the information directly in Resource Hacker the icon adds to the .exe but the .exe become corrupt<br><br>Someone have similar problem? <br><br></td></tr></table><br>
<a name="1299841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since your using a 64-bit version of mingw, windres will produce 64-bit objects by default.<br>You need this switch for it to produce 32-bit ones:<br><pre class=code>
-F pe-i386
</pre> <br><br></td></tr></table><br>
<a name="1299924"></a>

<a name="1299926"></a>

<a name="1299928"></a>

<a name="1299930"></a>

<a name="1299931"></a>

<a name="1299932"></a>

<a name="1299935"></a>

<a name="1299936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank thee grable -F pe-i386 had no impact on C:\BlitzMax\bin\bmk.exe<br>(I misunderstand this)<br><br>the New working compile script:<pre class=code>@set BLHTML_Path=C:\BlitzMax\MOBii\BLL
@set BLHTML_Build_this=EDii
@set BLHTML_Compression=-best
@set BLHTML_Run_when_DONE=0

cd %BLHTML_Path%
del %BLHTML_Build_this%.exe
del Build\Log.txt

@echo ************************************************[Start :: Compiling Project]***
@echo ************************************************************[windres :: res]***
C:\Wello\MinGW\bin\windres -F pe-i386 -iBuild\BLL.rc -oBuild\BLL.o

@echo ************************************************************[Compile :: bmx]***
C:\BlitzMax\bin\bmk makeapp -r -h -t gui %BLHTML_Build_this%.bmx
move %BLHTML_Build_this%.exe tmp.exe
del %BLHTML_Build_this%.exe
upx -%BLHTML_Compression% -o%BLHTML_Build_this%.exe tmp.exe --compress-icons=2
@del tmp.exe

@if %BLHTML_Run_when_DONE% gtr 0 (
	%BLHTML_Build_this%
)
@echo **********************************************************************[DONE]***
@echo Have a nice day
PAUSE</pre>BLIDE still can't build a release version! <br><br></td></tr></table><br>
<a name="1299927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That switch was for windres, the tool that builds resources. <br><br></td></tr></table><br>
<a name="1299929"></a>

<a name="1299934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> hehe Thank thee grable, Work perfectly now when I put -F pe-i386 in windres!<br>I update the .bat compile script <br><br></td></tr></table><br>
<a name="1299933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem dude :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
