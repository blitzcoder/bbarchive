<!DOCTYPE html><html lang="en" ><head ><title >conflict with bah.random and brl.random</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >conflict with bah.random and brl.random</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >conflict with bah.random and brl.random</a><br><br>
<a name="1075593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wanted to use bah.random to ensure identical results on any PC but I'm having problems.  I don't implicitly import brl.random, but I do require  brl.retro which in turn imports brl.basic, and consequently brl.random.<br><br>Any calls to SeedRnd(), Rand(), whatever, throw up a duplicate identifier error.<br><br>Without going through the entire code and replacing every call to the random functions with an absolute path i.e. bah.random.SeedRnd(), is there any way to avoid this conflict? <br><br></td></tr></table><br>
<a name="1075617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> IMO its best to just replace Brl.Random with the Bah one. <br>Brucey's version is superior in every way. <br><br></td></tr></table><br>
<a name="1075625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What happens if you explicitly define the module namespace?<br><br>e.g. instead of just using:<br><br><pre class=code>
print rand(1,6)
</pre><br><br>(which would conflict thanks to there being two 'rand' functions)<br>try this:<br><br><pre class=code>
print brl.random.rand(1,6)
</pre> <br><br></td></tr></table><br>
<a name="1075658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What happens if you explicitly define the module namespace? <br></div>That works but I'm six months into a project and its a bit of an inconvenience to have to do that, unless its a last resort.<br><br><div class="quote"> IMO its best to just replace Brl.Random with the Bah one <br></div>As in, permanently replace the whole module?  That might work. <br><br></td></tr></table><br>
<a name="1075663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> As in, permanently replace the whole module? That might work.  <br></div><br>I expect it should just be a case of changing the "Module" line... <br><br></td></tr></table><br>
<a name="1075666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I expect it should just be a case of changing the "Module" line...  <br></div>I don't tend to faff about with modules very much and I don't mean to sound stupid when I say this, but, what do you mean? <br><br></td></tr></table><br>
<a name="1075670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Backup your BRL random module...<br><br>Drop mine in its place...<br><br>Change the line in random.bmx from :<br><pre class=code>
Module BaH.Random
</pre><br>to<br><pre class=code>
Module BRL.Random
</pre><br><br>Then build-modules, and it should be good to go. <br><br></td></tr></table><br>
<a name="1075674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, simple as that.  I'll give that a crack tomorrow.<br><br>Off to the bathroom now, then kip.  I hope I don't get outwitted by the light pull again.<br><br>Thx! <br><br></td></tr></table><br>
<a name="1075685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can also override the functions in your game:<br><br><pre class=code>Function Rand:int(Min:int, Max:Int)
   'Return brl.rand(Min, Max)   'Uncomment to compare...
   Return bah.rand(Min,Max)
End Function</pre><br><br>This should be more clean that the module replacement, if your imports structure allows you to. <br><br></td></tr></table><br>
<a name="1076339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello<br><br>Since Brucey's module is a complete and direct (and better!) replacement for brl.random, I did just that!  I have no use whatsoever for brl.random, so it made sense just to throw it out.<br><br>Works perfectly now, thx! <br><br></td></tr></table><br>
<a name="1076387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why is bah.random better than brl.random? Is there some flaw in brl.random? I've not had any problems with it, and I'm using it quite heavily in some procedural gen work I'm doing. Would just like to know before it breaks my project. <br><br></td></tr></table><br>
<a name="1076453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Is there some flaw in brl.random <br></div><br>It does not give the same results on different platforms. With a certain seed, you'd expect the same sequence of random numbers (which makes them sound really random!  not...) <br><br></td></tr></table><br>
<a name="1076462"></a>

<a name="1076463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really?! Do we have some test code/results showing the state of the issue? I've done a forum search and I can't see any discussion of this or any bug report thread. If this is true then why haven't BRL fixed it? It's a pretty major flaw in the module, no scratch that, it's a show stopping flaw in the module. It renders SeedRnd and RndSeed completely useless.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It does not give the same results on different platforms <br></div><br>As far as I know this has never been demonstrated.<br><br>What is true is that the random functions involve floating point arithmetic. This makes them sensitive to the precision mode of the FPU. This is the same for everyone when the program starts, but it could possibly be changed by an external library. I know someone found an unexpected example of this long ago with Blitz3D and something called GameCam for capturing in-game videos. That was hard to track down because it depended on which version of GameCam was being used. <br><br></td></tr></table><br>
<a name="1076757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> As far as I know this has never been demonstrated. <br></div><br><br>I seem to remember BRL stating that the Intel ones would give different results than the PPC builds, due to used cpu registeres behaving differently on the two platforms or something... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
