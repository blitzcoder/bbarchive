<!DOCTYPE html><html lang="en" ><head ><title >Bah.fmod: FMOD_OUTPUTTYPE_WAVWRITER missing?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Bah.fmod: FMOD_OUTPUTTYPE_WAVWRITER missing?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >Bah.fmod: FMOD_OUTPUTTYPE_WAVWRITER missing?</a><br><br>
<a name="1199710"></a>

<a name="1199711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello!<br><br>I'm trying to save the audio output as WAV file to my HDD via FMod as described in this short example here: <br><a href="http://stackoverflow.com/questions/6171108/save-output-to-disk-using-fmod" target="_blank">http://stackoverflow.com/questions/6171108/save-output-to-disk-using-fmod</a><br><br>Can it be that the flags "FMOD_OUTPUTTYPE_WAVWRITER" / "FMOD_OUTPUTTYPE_WAVWRITER_NRT" aren't implemented yet? As soon as I call "system.setOutput(FMOD_OUTPUTTYPE_WAVWRITER)" I get an "Identifier not found" error.<br><br>Is there another / easier way to save the current audio output to the HDD? I found this ancient tutorial from Midimaster on the forums. But the links / sources are dead by now: <a href="http://www.blitzbasic.com/Community/posts.php?topic=90830#1094743." target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=90830#1094743.</a> <br><br>Grisu <br><br></td></tr></table><br>
<a name="1199738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't know why Creativ Labs removed the installer of OpenAl. This must be completely new, because also Wikipedia links to the same adress. But you can find  the same file on my homepage:<br><br>OpenAl Installer:<br><br><a href="http://www.midimaster.de/download/oalinst.exe" target="_blank">http://www.midimaster.de/download/oalinst.exe</a><br><br>In my sample you need OpenAl only for recording, but not for saving. For Saving use this OGG-Saver module here:<br><br>axe.oggsaver.mod: <br><br><a href="http://max-edit.googlecode.com/svn/trunk/mod/axe.mod/" target="_blank">http://max-edit.googlecode.com/svn/trunk/mod/axe.mod/</a> <br><br></td></tr></table><br>
<a name="1199768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can it be that the flags "FMOD_OUTPUTTYPE_WAVWRITER" / "FMOD_OUTPUTTYPE_WAVWRITER_NRT" aren't implemented yet?  <br></div><br>The OUTPUTTYPE enums were not defined in the module. I've just added them. <br><br></td></tr></table><br>
<a name="1199775"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot you two! <br><br>Made some progress during the last hour. FMod is now recording the PRP stream that is currently playing and dumping the data to the expected "fmodoutput.wav".<br><br>Strangely, I get the following error message with RecordStart(): <br>"An invalid parameter was passed to this function." -&gt; result:Int=system.RecordStart:Int(1,stationsound,False)<br>Not sure what is causing this, as there is no invalid parameter present from my point of view.<br><br>Furthermore I need to figure out how to set a custom output filename. So I can name the files created according to the streams.<br>Also there should be a way to play the music loud and record it at the same time.<br><br>Anyway, Rome wasn't built in one day... <br><br></td></tr></table><br>
<a name="1200018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Furthermore I need to figure out how to set a custom output filename. <br></div><br>With system.Init(), you can pass a C-String as the third parameter. So you should be able to do something like :<br><pre class=code>
Local system:TFMODSystem = New TFMODSystem.Create()

Local filename:String = "myfile.wav"
Local filePtr:Byte Ptr = filename.ToUTF8String()

system.Init(32, , filePtr)

MemFree(filePtr)
</pre><br>A bit low-level, but it should work, as per the documentation - "Use the 'extradriverdata' parameter in System::init, by simply passing the filename as a string, to set the wav filename. "<br><br>I'm sure you'll let me know if it doesn't work ;-) <br><br></td></tr></table><br>
<a name="1200019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Strangely, I get the following error message with RecordStart(): <br>"An invalid parameter was passed to this function." -&gt; result:Int=system.RecordStart:Int(1,stationsound,False)<br> <br></div><br>Hard to say. Maybe it doesn't like you including ":Int" as part of the function call? <br><br></td></tr></table><br>
<a name="1200352"></a>

<a name="1200353"></a>

<a name="1200354"></a>

<a name="1200355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The extra parameter for the filename works. Though I can't get around the error message.<br><br>In order to further test this, I made this recording example:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict 

Import MaxGui.Drivers
Import Bah.FMOD 

Const MAINWINDOW_W:Int = 278 
Const MAINWINDOW_H:Int = 154
Const Buttonsize: Int = 32
Const BUTTON_ACTION:Int = EVENT_GADGETACTION

?Win32
 Local Style:Int = WINDOW_TITLEBAR | WINDOW_CLIENTCOORDS | WINDOW_CENTER | WINDOW_ACCEPTFILES | WINDOW_RESIZABLE
?
Global MainWindow:TGadget = CreateWindow("FMod Recording Test" , 0 , 0 , MAINWINDOW_W , MAINWINDOW_H , Null , Style)
Global Record_Start:TGadget= CreateButton("Start Recording",0,0,100,22, MainWindow, BUTTON_PUSH)
Global Record_Stop :TGadget= CreateButton("Stop Recording",105,0,100,22, MainWindow, BUTTON_PUSH)
Global End_App    :TGadget= CreateButton("End",210,0,60,22, MainWindow, BUTTON_PUSH)
SetGadgetLayout Record_Start, Null, Null, EDGE_ALIGNED, Null
SetGadgetLayout Record_Stop, Null, Null, EDGE_ALIGNED, Null
SetGadgetLayout End_App, Null, Null, EDGE_ALIGNED, Null

SetMinWindowSize(MainWindow,MAINWINDOW_W,MAINWINDOW_H)
SetMaxWindowSize(MainWindow,MAINWINDOW_W,DesktopHeight())

Global station_record:TFMODSound
Global system:TFMODSystem
Global stationchannel:TFMODChannel

Global station_url:String = "http://193.200.42.208:80"

Global filename:String = "Recorded_test.wav"
Global filePtr:Byte Ptr = filename.ToUTF8String()


Global MainPanel:TGadget = CreatePanel(0 , 0 , MAINWINDOW_W , MAINWINDOW_H , MainWindow )
SetGadgetLayout MainPanel , EDGE_ALIGNED , EDGE_ALIGNED , EDGE_ALIGNED , EDGE_ALIGNED

Global Tab:TGadget[2] ' Holds subpanels
Tab[0] = CreatePanel(0 , MAINWINDOW_H - Buttonsize - 3 - 2 , MAINWINDOW_W , 0 , MainPanel)
SetGadgetLayout Tab[0] , 1 , 1 , 1 , 1

Global RecordListbox : TGadget  = CreateListBox(-1,3, ClientWidth(Tab[0])+2, ClientHeight(Tab[0])-3, Tab[0]) 'Hidden state when window panel is at normal size! 
SetGadgetLayout RecordListbox, EDGE_ALIGNED, EDGE_ALIGNED, EDGE_ALIGNED, EDGE_ALIGNED

SetGadgetShape(MainWindow,(DesktopWidth()-MAINWINDOW_W)/2,(DesktopHeight()-MAINWINDOW_H)/2,MAINWINDOW_W,MAINWINDOW_H*2)

Init_Record_Engine()

Repeat ' Main Loop
	Select WaitEvent()
		Case EVENT_WINDOWCLOSE, EVENT_APPTERMINATE
			End
	End Select

	Select EventSource() 

		Case Record_Start
	 	     	Select EventID()   
			Case BUTTON_ACTION
                    Start_Reording()
			EndSelect			

		Case Record_Stop
	 	     	Select EventID()   
			Case BUTTON_ACTION
                      Stop_Reording()
			EndSelect			

		Case End_App
	 	     	Select EventID()   
			Case BUTTON_ACTION
			 End
			EndSelect			
	 
	EndSelect
Forever
End

Function Start_Reording()

Local result:Int
Local NumDrivers:Int 
'Print "Getting Drivers..."
'result:Int=system.GetRecordNumDrivers:Int(numDrivers:Int)
'Print FMOD_ErrorString:String(result)
'Print numDrivers
AddGadgetItem (RecordListbox,"Streaming Url: "+Station_url)
station_record:TFMODSound = system.CreateStreamURL(station_url, FMOD_HARDWARE | FMOD_2D | FMOD_CREATESTREAM)
AddGadgetItem (RecordListbox,"")
AddGadgetItem (RecordListbox,"Playing Stream.")
stationchannel = system.PlaySound(0, station_record) ' start streaming

AddGadgetItem (RecordListbox,"")
AddGadgetItem (RecordListbox,"Start recording: "+filename)
result:Int=system.RecordStart(1, station_record,False)
AddGadgetItem (RecordListbox,FMOD_ErrorString:String(result))

End Function

Function Stop_Reording()
Local result:Int

AddGadgetItem (RecordListbox,"")
AddGadgetItem (RecordListbox,"Stop recording!")
result=system.RecordStop:Int(1)
AddGadgetItem (RecordListbox,  FMOD_ErrorString:String(result))
result=system.close()
AddGadgetItem (RecordListbox,"")
AddGadgetItem (RecordListbox,"System closed")
AddGadgetItem (RecordListbox,  FMOD_ErrorString:String(result))
End Function

Function Init_Record_Engine()
Local result:Int

system:TFMODSystem = New TFMODSystem.Create()
system.setOutput(FMOD_OUTPUTTYPE_WAVWRITER)

result:Int=system.Init(32, FMOD_INIT_NORMAL, filePtr)
If result &lt;&gt; FMOD_OK Then 
	Notify "Soundcard not found! ERROR!", 1 ' Soundcard not found, fatal error!
	End
EndIf
End Function 
</textarea><br><br>Can someone please test it. I need to know if the recording device is set up correctly on different machines.<br><br>The WAV file starts with some seconds of blank music. I guess this is due to the buffering. <br><br></td></tr></table><br>
<a name="1200363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The first parameter of RecordStart and RecordStop is the id of the recorder driver.<br><br>On my Mac, GetRecordNumDrivers() is returning 0 drivers, but passing in 0 as the id gives the error despite it still working.<br>Presumably, if you are writing straight to disk, you wouldn't be needing a sound card to record stuff, so it seems to work anyway.<br><br>Not sure how you play (so you can hear it) and record at the same time. <br><br></td></tr></table><br>
<a name="1200383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahm, so you need "system.RecordStart(0, station_record, False)" run the code under Mac? <br><br>There are some examples for recording &amp; playing at the same time that come with the fmod api, such as:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
/*===============================================================================================
 Record to disk example
 Copyright (c), Firelight Technologies Pty, Ltd 2004-2011.

 This example shows how to record continuously, and play back the same data as closely to 
 the record cursor as possible without stuttering.
 
 NOTE - This setup is about 250ms latency to be 'safe', because combinations of operating system
 and sound card driver can cause stuttering if the settings are set too low.  To reduce latency
 on playback, use #define LOWLATENCY.   Currently it is commented out.
===============================================================================================*/
#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;
#include &lt;conio.h&gt;

#include "../../api/inc/fmod.hpp"
#include "../../api/inc/fmod_errors.h"

void ERRCHECK(FMOD_RESULT result)
{
    if (result != FMOD_OK)
    {
        printf("FMOD error! (%d) %s\n", result, FMOD_ErrorString(result));
        exit(-1);
    }
}

#define LOWLATENCY      /* Only really suited to Windows Vista/7.  XP/Directsound should avoid this. */

#define RECORDRATE      8000

#ifdef LOWLATENCY
    #define LATENCY         ((RECORDRATE * 20) / 1000)   /* 20 = 20ms */
    #define DRIFTTHRESHOLD  ((RECORDRATE * 10) / 1000)   /* 10 = 10ms */
#else
    #define LATENCY         ((RECORDRATE * 50) / 1000)   /* 50 = 50ms */
    #define DRIFTTHRESHOLD  ((RECORDRATE * 25) / 1000)   /* 25 = 25ms */
#endif

int main(int argc, char *argv[])
{
    FMOD::System          *system  = 0;
    FMOD::Sound           *sound   = 0;
    FMOD::Channel         *channel = 0;
    FMOD::DSP             *dsp     = 0;
    FMOD_RESULT            result;
    FMOD_CREATESOUNDEXINFO exinfo;
    FMOD_SPEAKERMODE       speakermode;
    FMOD_CAPS              caps;
    int                    key, numdrivers;
    unsigned int           version;    
    unsigned int           datalength = 0, soundlength;
    char                   name[256];
    unsigned int           adjustedlatency;

    /*
        Create a System object and initialize.
    */
    result = FMOD::System_Create(&amp;system);
    ERRCHECK(result);

    result = system-&gt;getVersion(&amp;version);
    ERRCHECK(result);

    if (version &lt; FMOD_VERSION)
    {
        printf("Error!  You are using an old version of FMOD %08x.  This program requires %08x\n", version, FMOD_VERSION);
        return 0;
    }

    /* 
        System initialization (recommended startup sequence)
    */
    result = system-&gt;getNumDrivers(&amp;numdrivers);
    ERRCHECK(result);

    if (numdrivers == 0)
    {
        result = system-&gt;setOutput(FMOD_OUTPUTTYPE_NOSOUND);
        ERRCHECK(result);
    }
    else
    {
        result = system-&gt;getDriverCaps(0, &amp;caps, 0, &amp;speakermode);
        ERRCHECK(result);

        result = system-&gt;setSpeakerMode(speakermode);       /* Set the user selected speaker mode. */
        ERRCHECK(result);

        if (caps &amp; FMOD_CAPS_HARDWARE_EMULATED)             /* The user has the 'Acceleration' slider set to off!  This is really bad for latency!. */
        {                                                   /* You might want to warn the user about this. */
            result = system-&gt;setDSPBufferSize(1024, 10);
            ERRCHECK(result);
        }
#ifdef LOWLATENCY
        else
        {
            result = system-&gt;setDSPBufferSize(256, 4);
        }
#endif
        result = system-&gt;getDriverInfo(0, name, 256, 0);
        ERRCHECK(result);

        if (strstr(name, "SigmaTel"))   /* Sigmatel sound devices crackle for some reason if the format is PCM 16bit.  PCM floating point output seems to solve it. */
        {
            result = system-&gt;setSoftwareFormat(48000, FMOD_SOUND_FORMAT_PCMFLOAT, 0,0, FMOD_DSP_RESAMPLER_LINEAR);
            ERRCHECK(result);
        }
    }

    result = system-&gt;init(100, FMOD_INIT_NORMAL, 0);
    if (result == FMOD_ERR_OUTPUT_CREATEBUFFER)         /* Ok, the speaker mode selected isn't supported by this soundcard.  Switch it back to stereo... */
    {
        result = system-&gt;setSpeakerMode(FMOD_SPEAKERMODE_STEREO);
        ERRCHECK(result);
            
        result = system-&gt;init(100, FMOD_INIT_NORMAL, 0);/* ... and re-init. */
        ERRCHECK(result);
    }
    /* 
        System initialization complete (recommended startup sequence)
    */
 

    /*
        Create user sound to record into.  Set it to loop for playback.
    */
    memset(&amp;exinfo, 0, sizeof(FMOD_CREATESOUNDEXINFO));
    exinfo.cbsize           = sizeof(FMOD_CREATESOUNDEXINFO);
    exinfo.numchannels      = 1;
    exinfo.format           = FMOD_SOUND_FORMAT_PCM16;
    exinfo.defaultfrequency = RECORDRATE;
    exinfo.length           = exinfo.defaultfrequency * sizeof(short) * exinfo.numchannels * 5; /* 5 second buffer, doesnt really matter how big this is, but not too small of course. */
    
    result = system-&gt;createSound(0, FMOD_2D | FMOD_SOFTWARE | FMOD_LOOP_NORMAL | FMOD_OPENUSER, &amp;exinfo, &amp;sound);
    ERRCHECK(result);

    printf("========================================================================\n");
    printf("Record with realtime playback example.\n");
    printf("Copyright (c) Firelight Technologies 2004-2011.\n");
    printf("\n");
    printf("Try #define LOWLATENCY to reduce latency for more modern machines!\n");
    printf("========================================================================\n");
    printf("\n");
    printf("Press a key to start recording.  Playback will start %d samples (%d ms) later.\n", LATENCY, LATENCY * 1000 / RECORDRATE);
    printf("\n");

    _getch();

    printf("Press 'E' to toggle an effect on/off.\n");
    printf("Press 'Esc' to quit\n");
    printf("\n");

    result = system-&gt;recordStart(0, sound, true);
    ERRCHECK(result);

    result = sound-&gt;getLength(&amp;soundlength, FMOD_TIMEUNIT_PCM);
    ERRCHECK(result);

    /*
        Create a DSP effect to play with.
    */
    result = system-&gt;createDSPByType(FMOD_DSP_TYPE_FLANGE, &amp;dsp);
    ERRCHECK(result);
    result = dsp-&gt;setParameter(FMOD_DSP_FLANGE_RATE, 4.0f);
    ERRCHECK(result);
    result = dsp-&gt;setBypass(true);   
    ERRCHECK(result);
    
    adjustedlatency = LATENCY;  /* This might change depending on record block size. */
    
    /*
        Main loop.
    */
    do
    {
        static unsigned int lastrecordpos = 0, samplesrecorded = 0;
        unsigned int recordpos = 0, recorddelta;
        
        key = 0;
        if (_kbhit())
        {
            key = _getch();
        }

        if (key == 'e' || key == 'E')
        {
            bool bypass;
            dsp-&gt;getBypass(&amp;bypass);
            dsp-&gt;setBypass(!bypass);
            if (bypass)
            {
                FMOD_REVERB_PROPERTIES prop = FMOD_PRESET_CONCERTHALL;
                system-&gt;setReverbProperties(&amp;prop);
            }
            else
            {
                FMOD_REVERB_PROPERTIES prop = FMOD_PRESET_OFF;
                system-&gt;setReverbProperties(&amp;prop);
            }
            printf("\n\n *** TURN DSP EFFECT %s ** \n\n", bypass ? "ON" : "OFF");
        }
        
        system-&gt;getRecordPosition(0, &amp;recordpos);
        ERRCHECK(result);

        recorddelta = recordpos &gt;= lastrecordpos ? recordpos - lastrecordpos : recordpos + soundlength - lastrecordpos;
        samplesrecorded += recorddelta;

		if (samplesrecorded &gt;= adjustedlatency &amp;&amp; !channel)
		{
		    result = system-&gt;playSound(FMOD_CHANNEL_FREE, sound, 0, &amp;channel);
            ERRCHECK(result);
            
            result = channel-&gt;addDSP(dsp, 0);
            ERRCHECK(result);
		}
				
        if (channel &amp;&amp; recorddelta)
        {
            unsigned int playrecorddelta;
            unsigned int playpos = 0;
            int adjusting = 0;
            float smootheddelta;
            float dampratio = 0.97f;
            static unsigned int minrecorddelta = (unsigned int)-1;
            
            /*
                If the record driver steps the position of the record cursor in larger increments than the user defined latency value, then we should
                increase our latency value to match.
            */
            if (recorddelta &lt; minrecorddelta)
            {
                minrecorddelta = recorddelta;
                if (adjustedlatency &lt; recorddelta)
                {
                    adjustedlatency = recorddelta;
                }
            }

            channel-&gt;getPosition(&amp;playpos, FMOD_TIMEUNIT_PCM);

            playrecorddelta = recordpos &gt;= playpos ? recordpos - playpos : recordpos + soundlength - playpos;
            
	        /*
                Smooth total
            */
            {
                static float total = 0;
                
                total = total * dampratio;
	            total += playrecorddelta;
	            smootheddelta = total * (1.0f - dampratio);
            }
           
            if (smootheddelta &lt; adjustedlatency - DRIFTTHRESHOLD || smootheddelta &gt; soundlength / 2)   /* if play cursor is catching up to record (or passed it), slow playback down */
            {
                channel-&gt;setFrequency(RECORDRATE - (RECORDRATE / 50)); /* Decrease speed by 2% */
                adjusting = 1;
            }
            else if (smootheddelta &gt; adjustedlatency + DRIFTTHRESHOLD)   /* if play cursor is falling too far behind record, speed playback up */
            {
                channel-&gt;setFrequency(RECORDRATE + (RECORDRATE / 50)); /* Increase speed by 2% */
                adjusting = 2;
            }
            else
            {
                channel-&gt;setFrequency(RECORDRATE);          /* Otherwise set to normal rate */
                adjusting = 0;
            }
            
            printf("REC %5d (REC delta %5d) : PLAY %5d, PLAY/REC diff %5d %s\r", recordpos, recorddelta, playpos, (int)smootheddelta, adjusting == 1 ? "DECREASE SPEED" : adjusting == 2 ? "INCREASE SPEED" : "              ");
        }
        
        lastrecordpos = recordpos;
        
        system-&gt;update();

        Sleep(10);

    } while (key != 27);

    printf("\n");

    /*
        Shut down
    */
    result = sound-&gt;release();
    ERRCHECK(result);

    result = system-&gt;release();
    ERRCHECK(result);

    return 0;
}
</textarea><br>Got this info via: <a href="http://stackoverflow.com/questions/6025955/playback-and-listen-to-recording-device-in-fmod" target="_blank">http://stackoverflow.com/questions/6025955/playback-and-listen-to-recording-device-in-fmod</a><br><br>Couldn't make it work though.<br><br>One more ugly workaround might be to start a separate system just for recording a stream. So the user can freely select and listen to other PRP stations while one station stream is recording in the background. <br><br></td></tr></table><br>
<a name="1200394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Ahm, so you need "system.RecordStart(0, station_record, False)" run the code under Mac? <br></div><br>No. It doesn't matter what number you put in there, since you are using the wav output recorder, as it doesn't need a real sound card record driver to work. So you get the error value, but you can ignore it.<br>Of course, if you wanted to write to a soundcard instead and it returned 0 drivers you'd have a real problem. <br><br></td></tr></table><br>
<a name="1200399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the clarification. I just tried "Null" as paramter and it even works then. <br><br>Did you change something in your module code?<br><br>I'm going to implement the stuff into PRP soon. Fingers crossed. :) <br><br></td></tr></table><br>
<a name="1200401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Did you change something in your module code? <br></div><br>I added GetRecordDriverInfo() method. But it will only return stuff if you have a valid record driver to begin with. <br><br></td></tr></table><br>
<a name="1202897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the module update. <br><br>Uploaded the first prp test build with the new recording button.<br><img src="http://oi43.tinypic.com/2zqxyzb.jpg"><br><br>Just hope it works for all machines / platforms... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
