<!DOCTYPE html><html lang="en" ><head ><title >Bug in wxFlatNoteBook with wxRadioButton</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Bug in wxFlatNoteBook with wxRadioButton</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >Bug in wxFlatNoteBook with wxRadioButton</a><br><br>
<a name="930977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello, really weird one this. It seems that when you setvalue on a radio button that is on a flatnotebook page that isn't showing, switching a page thereafter creates a wxEVT_COMMAND_RADIOBUTTON_SELECTED event.<br><br>I've knocked up a quick and dirty example. A flat note book with 2 tabs, and three radio buttons on each tab. I've connected the radio button events and just told it to log the button press in the debuglog. I've also connected the page change event for the notebook just to be able to setvalue the radio button on the other page which seems to create the bug. Just run the program and select "Blue", then click the position tab, and straight away you will see that will create a radio button event, click back to the colour tab and it'll raise another radio button event. Change pages again and it won't do it any more, until you fiddle with the buttons again.<br><br>I tested this with a normal notebook and that seemed fine. Anyway here's the code:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
'
' Example application stub generated by wxCodeGen v1.06 : 08 Jan 2009 22:38:00
'
SuperStrict

Framework wx.wxApp
Import wx.wxFrame
Import wx.wxFlatNotebook
Import wx.wxPanel
Import wx.wxRadioButton
Import wx.wxWindow

New MyApp.run()

Type MyApp Extends wxApp

	Method OnInit:Int()

		Local frame:MyFrame = MyFrame(New MyFrame.Create(,, "Test"))
		frame.Show()
		settopwindow(frame)

		Return True
	End Method

End Type

Type MyFrame Extends wxFrame

	Field m_notebook1:wxFlatNotebook
	Field m_panel1:wxPanel
	Field m_radioBtn2:wxRadioButton
	Field m_radioBtn3:wxRadioButton
	Field m_radioBtn4:wxRadioButton
	Field m_panel2:wxPanel
	Field m_radioBtn5:wxRadioButton
	Field m_radioBtn6:wxRadioButton
	Field m_radioBtn7:wxRadioButton


	Method Create:MyFrame(parent:wxWindow = Null, id:Int = wxID_ANY, title:String = "", x:Int = -1, y:Int = -1, w:Int = 500, h:Int = 300, style:Int = wxDEFAULT_FRAME_STYLE | wxTAB_TRAVERSAL)
		Return MyFrame(Super.Create(parent, id, title, x, y, w, h, style))
	End Method
	
	Const wxID_RED:Int = wxid_highest + 1
	Const wxID_BLUE:Int = wxid_highest + 2
	Const wxID_YELLOW:Int = wxid_highest + 3
	
	Const wxID_LEFT:Int = wxid_highest + 4
	Const wxID_RIGHT:Int = wxid_highest + 5
	Const wxID_MIDDLE:Int = wxid_highest + 6

	Method OnInit()

		Local bSizer1:wxBoxSizer
		bSizer1 = new wxBoxSizer.Create(wxVERTICAL)
		m_notebook1 = New wxFlatNotebook.Create(Self, wxID_ANY)
		m_panel1 = new wxPanel.Create(m_notebook1, wxID_ANY,,,,, wxTAB_TRAVERSAL)

		Local bSizer2:wxBoxSizer
		bSizer2 = new wxBoxSizer.Create(wxVERTICAL)
		m_radioBtn2 = New wxRadioButton.Create(m_panel1, wxID_RED, "Red",,, ,, wxRB_GROUP)
		bSizer2.Add(m_radioBtn2, 0, wxALL, 5)

		m_radioBtn3 = New wxRadioButton.Create(m_panel1, wxID_BLUE, "Blue")
		bSizer2.Add(m_radioBtn3, 0, wxALL, 5)

		m_radioBtn4 = New wxRadioButton.Create(m_panel1, wxID_YELLOW, "Yellow")
		bSizer2.Add(m_radioBtn4, 0, wxALL, 5)

		m_panel1.SetSizer(bSizer2)
		m_panel1.Layout()
		bSizer2.Fit(m_panel1)
		m_notebook1.AddPage(m_panel1, "Colours", True)

		m_panel2 = new wxPanel.Create(m_notebook1, wxID_ANY,,,,, wxTAB_TRAVERSAL)

		Local bSizer3:wxBoxSizer
		bSizer3 = new wxBoxSizer.Create(wxVERTICAL)
		m_radioBtn5 = New wxRadioButton.Create(m_panel2, wxID_LEFT, "Left")
		bSizer3.Add(m_radioBtn5, 0, wxALL, 5)

		m_radioBtn6 = New wxRadioButton.Create(m_panel2, wxID_RIGHT, "Right")
		bSizer3.Add(m_radioBtn6, 0, wxALL, 5)

		m_radioBtn7 = New wxRadioButton.Create(m_panel2, wxID_MIDDLE, "Middle")
		bSizer3.Add(m_radioBtn7, 0, wxALL, 5)

		m_panel2.SetSizer(bSizer3)
		m_panel2.Layout()
		bSizer3.Fit(m_panel2)
		m_notebook1.AddPage(m_panel2, "Position", False)


		bSizer1.Add(m_notebook1, 1, wxEXPAND | wxALL, 5)

		SetSizer(bSizer1)
		Layout()
		
		connect(wxID_RED, wxEVT_COMMAND_RADIOBUTTON_SELECTED, onRed)
		connect(wxID_BLUE, wxEVT_COMMAND_RADIOBUTTON_SELECTED, onBlue)
		connect(wxID_YELLOW, wxEVT_COMMAND_RADIOBUTTON_SELECTED, onYellow)
		connect(wxID_LEFT, wxEVT_COMMAND_RADIOBUTTON_SELECTED, onLeft)
		connect(wxID_RIGHT, wxEVT_COMMAND_RADIOBUTTON_SELECTED, onRight)
		connect(wxID_MIDDLE, wxEVT_COMMAND_RADIOBUTTON_SELECTED, onMiddle)
		connectany(wxEVT_COMMAND_FLATNOTEBOOK_PAGE_CHANGED, onPageChanged)

	End Method
	
	Function onRed(event:wxEvent)
		DebugLog "Red"
	End Function
	Function onBlue(event:wxEvent)
		DebugLog "Blue"
	End Function
	Function onYellow(event:wxEvent)
		DebugLog "Yellow"
	End Function
	Function onLeft(event:wxEvent)
		DebugLog "Left"
	End Function
	Function onRight(event:wxEvent)
		DebugLog "Right"
	End Function
	Function onMiddle(event:wxEvent)
		DebugLog "Middle"
	End Function
	Function onPageChanged(event:wxEvent)
		Local frame:MyFrame = MyFrame(event.parent)
		frame.m_radioBtn2.SetValue(True)
	End Function

End Type
</textarea><br><br>Any ideas?<br><br>Cheers! <br><br></td></tr></table><br>
<a name="930987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works as expected on Mac... (ie. no extra events).<br><br>I'll have a look at Win32 in the morning :-) <br><br></td></tr></table><br>
<a name="931036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> straight away you will see that will create a radio button event <br></div><br>You can fix this by defining your "left" button as the start of a new group with the wxRB_GROUP flag.<br><br>One down... one to go :-) <br><br></td></tr></table><br>
<a name="931089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh yeh, I must have assumed the form builder would add it for me as they were on a separate panel :) <br><br></td></tr></table><br>
<a name="931234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> This appears to be an "issue" with Windows. I can understand why it might be happening, but I'm not sure how one would avoid it entirely.<br><br>On a hidden window, you Set a different radio button. It is checked, the other is unchecked.<br>However, when shown again, I believe the Windows UI hasn't updated the visual state of the old radio button, which it then toggles off, causing a "unchecked" event to be raised.<br><br>One way to ignore this would be to catch the event as normal, but only be interested in the event if IsChecked is true (ie. the button has just been clicked on). <br><br></td></tr></table><br>
<a name="931269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your help brucey. I've just changed it to use a standard notebook which works fine, which is a shame as I preferred the different styles available of the flat notebook. I couldn't find any workarounds including your ischecked idea. <br><br>Basically in my particle editor each effect has different properties spread over a few tabs with radio buttons for setting the emitter type like point, area, line etc. So if you're on a different tab and select an effect that emits at a point, then select an area effect, switching the tab thereafter would change it from an area to a point. So the event did actually have the isChecked flag set as true. Unless there's some other way of differentiating between the user clicking and the tab clicking for you? I couldn't see any. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
