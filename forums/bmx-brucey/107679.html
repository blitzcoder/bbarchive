<!DOCTYPE html><html lang="en" ><head ><title >wxMax + NG +TimelineFX</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >wxMax + NG +TimelineFX</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >wxMax + NG +TimelineFX</a><br><br>
<a name="1334851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Think I almost have this compiling in NG. All of the modules seem to compile ok but when trying to compile TimelineFX Editor I get the following error:<br><br><pre class=code>
F:/BlitzMax/mod/wx.mod/wx.mod/../lib/win32/libwxmsw31u_gl.a(gllib_glcmn.o):glcmn.cpp:(.text+0x3d4): undefined reference to `_imp__glFrustum@48'
F:/BlitzMax/mod/wx.mod/wx.mod/../lib/win32/libwxmsw31u_gl.a(gllib_glcmn.o):glcmn.cpp:(.text+0x43c): undefined reference to `_imp__glVertex3f@12'
F:/BlitzMax/mod/wx.mod/wx.mod/../lib/win32/libwxmsw31u_gl.a(gllib_glcmn.o):glcmn.cpp:(.text+0x46c): undefined reference to `_imp__glNormal3f@12'
F:/BlitzMax/mod/wx.mod/wx.mod/../lib/win32/libwxmsw31u_gl.a(gllib_glcmn.o):glcmn.cpp:(.text+0x4a4): undefined reference to `_imp__glColor4f@16'
F:/BlitzMax/mod/wx.mod/wx.mod/../lib/win32/libwxmsw31u_gl.a(gllib_glcmn.o):glcmn.cpp:(.text+0x593): undefined reference to `_imp__glGetBooleanv@8'
F:/BlitzMax/mod/wx.mod/wx.mod/../lib/win32/libwxmsw31u_gl.a(gllib_glcmn.o):glcmn.cpp:(.text+0xfbf): undefined reference to `_imp__glIndexi@4'
</pre><br><br>I'm using the latest NG release that I found on github, and all other modules are up to date. This is on Windows btw.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="1335162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick update, I'm getting exactly the same error trying to compile with standard blitzmax (albeit with the modified bmk). Anyone any ideas what it might be? <br><br></td></tr></table><br>
<a name="1335165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What version of Windows?<br>What version of MinGW?<br><br>I just tried it here and it built okay. (albeit I had to comment out a couple of lines because the Windows build needs some tweaks to compile with the current wx).<br><br>I have Win7 and TDM GCC 5.1 <br><br></td></tr></table><br>
<a name="1335184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, it's Windows 10, and GCC 5.1, I just use the one you provide in the windows release on github. the wx Hello world sample compiles fine, as do all modules. Everything is the latest version module wise. <br><br></td></tr></table><br>
<a name="1335210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it appears to be Windows 10 related. I had the same issue linking the exe there.<br><br>I've committed a fix which should resolve the problem. <br><br></td></tr></table><br>
<a name="1335212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Out of interest: why is this needed for win10 and not for earlier versions (I mean the import "-lopengl32") ?<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1335214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes :-) <br><br></td></tr></table><br>
<a name="1335223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey that error has gone away now :)<br><br>You mentioned about commenting out a couple of lines, what were they? As I'm not getting any graphics being rendered here. Did it work fully for you, as in effects are rendering ok? <br><br></td></tr></table><br>
<a name="1335234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was just checking the max2d sample and noticed it crashed seemingly due to DrawText. If you comment that out it runs ok. Strangely if you put a debugstop before the draw text it still crashes:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

Framework wx.wxApp
Import wx.wxFrame
Import wx.wxmax2D
Import wx.wxTimer


New MyApp.run()


Type MyApp Extends wxApp

	Field frame:MyFrame

	Method OnInit:Int()

		' Create the main application windowType MyFrame Extends wxFrame

		frame = MyFrame(New MyFrame.Create(,,"", , , 640, 480))
		
		' Show it and tell the application that it's our main window
		frame.show(True)
		SetTopWindow(frame)

		Return True
	End Method

End Type

Type MyFrame Extends wxFrame

	Field canvas:MyCanvas

	Method OnInit:Int()
		
		canvas = MyCanvas(New MyCanvas.CreateWin(Self))
		
		ConnectAny(wxEVT_CLOSE, OnClose)
	End Method

	Function OnClose(event:wxEvent)
	
		MyFrame(event.parent).canvas.timer.Stop() ' stop the timer!
		wxWindow(event.parent).Destroy() ' remove the frame
	
	End Function

End Type

Type MyCanvas Extends wxWindow

	Field timer:wxTimer

	Method OnInit:Int()
		SetBackgroundStyle(wxBG_STYLE_CUSTOM)
	
		timer = New wxTimer.Create(Self)


		ConnectAny(wxEVT_PAINT, OnPaint)
		ConnectAny(wxEVT_TIMER, OnTick)

		timer.Start(30)
	End Method

	Function OnPaint(event:wxEvent)
		Local canvas:MyCanvas = MyCanvas(event.parent)

		SetGraphics wxGraphics(canvas)
		
		SetColor(0, 0, 0)
		
		Cls

		canvas.drawClock()
		
		Flip

	End Function

	Function OnTick(event:wxEvent)
		wxWindow(event.parent).Refresh()
	End Function
	
	
	Method drawClock()
	
		SetLineWidth(2)

		Local x:Int = 200, y:Int = 200
		Local radius:Int = 100
		' clock ticks

		For Local i:Int = 0 Until  12
			Local inset:Double = 0
		
			If i Mod 3 = 0 Then
				SetLineWidth(2)
				inset = 0.2 * radius
			Else
				inset = 0.1 * radius
				SetLineWidth(1)
			End If
			
			DrawLine x + (radius - inset) * Cos(i * 30), y + (radius - inset) * Sin(i * 30), ..
				x + radius * Cos(i * 30), y + radius * Sin (i * 30)
			
			' draw numbers
			inset = 0.3 * radius
			
			Local t:Int = (i + 2) Mod 12 + 1
			DebugStop
			DrawText romanNumerals(t), x + (radius - inset) * Cos(i * 30) - 7, y + (radius - inset) * Sin(i * 30) - 6
		Next


		' clock hands
		Local hours:Int = CurrentTime()[0..2].toInt() Mod 12
		Local minutes:Int = CurrentTime()[3..5].toInt()
		Local seconds:Int = CurrentTime()[6..8].toInt()
		
		' hour hand:
		' the hour hand is rotated 30 degrees  per hour + 1/2 a degree per minute
		'
		SetLineWidth(4)

		DrawLine x, y, x + radius / 2 * Sin(30 * hours + minutes / 2.0), ..
				   y + radius / 2 * -Cos(30 * hours + minutes / 2.0)
		
		
		' minute hand:
		' the minute hand is rotated 6 degrees per minute + 1/10 a degree per second
		'
		SetLineWidth(2)
		DrawLine x, y, x + radius * 0.75 * Sin(6 * minutes + seconds / 10.0), ..
				   y + radius * 0.75 * -Cos(6 * minutes + seconds / 10.0)
		
		' seconds hand:
		' the second hand is rotated 6 degrees per second
		'
		SetColor(255, 0, 0)

		DrawLine x, y, x + radius * 0.7 * Sin(6 * seconds), ..
				   y + radius * 0.7 * -Cos(6 * seconds)


	End Method

	Method romanNumerals:String(value:Int)
		Local rn:String = ""
		
		While value &gt; 9
			rn:+ "X"
			value:- 10
		Wend
	
		If value &gt; 8 Then
			rn:+ "IX"
			value:- 9
		End If
		
		If value &gt; 4 Then
			rn:+ "V"
			value:- 5
		End If
		
		If value &gt; 3 Then
			rn:+ "IV"
			value:- 4
		End If
		
		While value &gt; 0
			rn:+ "I"
			value:- 1
		Wend
		
		Return rn
	End Method

End Type
</textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
