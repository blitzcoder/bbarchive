<!DOCTYPE html><html lang="en" ><head ><title >wxMax Woes</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >wxMax Woes</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >wxMax Woes</a><br><br>
<a name="1328125"></a>

<a name="1328126"></a>

<a name="1328127"></a>

<a name="1328128"></a>

<a name="1328129"></a>

<a name="1328130"></a>

<a name="1328131"></a>

<a name="1328132"></a>

<a name="1328133"></a>

<a name="1328134"></a>

<a name="1328135"></a>

<a name="1328136"></a>

<a name="1328137"></a>

<a name="1328138"></a>

<a name="1328139"></a>

<a name="1328140"></a>

<a name="1328141"></a>

<a name="1328142"></a>

<a name="1328144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Several years ago I had great trouble trying to get wxMax to install/build/work on my old WinXP system. Unfortunately, that PC (on which I eventually got it working) has now died, and the backup drive is no longer available.<br><br>Thinking I could avoid all the building issues I encountered last time, I decided to take the easy route by downloading/installing the pre-compiled "bin" version - after the SetupAndInstallation.wiki claimed that all I had to do was:<br><pre class=code>
Download the appropriate bin release .rar and extract it somewhere. You should see a wx.mod folder which contains the entirety of wxMax. This needs to be
moved into your BlitzMax/mod folder.

That's it. You can now start using wxMax !
</pre>Unfortunately, every sample I later tried to compile failed with sjlj errors. Ok - so the pre-compiled version was made using a different MinGW installation - but which one? With no way of telling, I then spent the next (last) 3 days trying to get the source version of wxMax to install/compile/work on my Win7 Pro box. After several failed attempts, I have now removed MinGW and BlitzMax and done a clean install of both (wxWidgets, MinGW 4.7.1 - how do I know if I have the sjlj version? - and BlitzMax 1.50). I then copied the libs from MinGW to Blitmax/libs, copied ar.exe and ld.exe into BlitzMax/bin, set up the appropriate env variables, installed wxMax from GitHub and attempted to build all modules.<br><br>Unfortunately 2 of the wx.mod modules fail every time as follows:<br><br>wxflatnotebook.mod because of "Expected expression but encountered '{'" errors due to "{" appearing on the following function definitions:<br><pre class=code>
Function _create:wxFlatNotebook(wxObjectPtr:Byte Ptr) { nomangle }
Function _xrcNew:wxFlatNotebook(wxObjectPtr:Byte Ptr) { nomangle }
Function _getbitmap:Byte Ptr(list:wxBitmap[], index:Int) { nomangle }
Function _newbitmaparray:wxBitmap[](size:Int) { nomangle } { nomangle }
Function _setbitmap(list:wxBitmap[], index:Int, bitmap:Byte Ptr) { nomangle }
</pre>and wxrarinputstream.mod because of:<br><pre class=code>
C:/Applications/BlitzMax/mod/wx.mod/wxrarinputstream.mod/src/unrar/crc.cpp: In function 'uint CRC(uint, const void*, uint)'
C:/Applications/BlitzMax/mod/wx.mod/wxrarinputstream.mod/src/unrar/crc.cpp:23:22: error: 'uintptr_t' was not declared in this scope
C:/Applications/BlitzMax/mod/wx.mod/wxrarinputstream.mod/src/unrar/crc.cpp:23:32: error: expected ')' before 'Data'
C:/Applications/BlitzMax/mod/wx.mod/wxrarinputstream.mod/src/unrar/crc.cpp:29:3: error: expected ')' before 'while'
Build Error: failed to compile C:/Applications/BlitzMax/mod/wx.mod/wxrarinputstream.mod/src/unrar/crc.cpp
</pre>Why do these fail with basic errors - has anyone else successfully rebuilt the current GitHub version of wxMax?<br><br>Not knowing how to fix them, I removed both modules from wx.mod and everything else built without errors. However, whenever I try and compile a wxMax example, it STILL fails with multiple sjlj errors - just like it did initially on my old XP system. Unfortunately I cannot remember how I got it working then - and I am growing increasingly frustrated at how difficult what should be a simple process is turning into.<br><br>Despite searching these forums, I have been unable to find a definitive process for installing and compiling wxMax. For example, what is the required MinGW version/type - and, more importantly (as I clearly have the wrong one) where do I get it from? How can I tell whether I need to copy the ar.exe and ld.exe files (I tried using MinGW 5.1.3 at one point - but after copying them got a "ld.exe has stopped working" error whenever I tried to compile anything)?<br><br>I realise this has been requested many times before, but if anyone can give me clear instructions (and download locations if applicable) on what I need to do to get the most recent version of wxMax working with BlitzMax 1.50 I would be very grateful. <br><br></td></tr></table><br>
<a name="1328143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Henri</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Chalky,<br><br>I believe I have done this. I'll report once I've tested it.<br><br>-Henri <br><br></td></tr></table><br>
<a name="1328152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is DW2 and SJLJ debug - when downloading, you should check which one is used.<br><br>Brucey used TDM MinGW:<br><a href="http://tdm-gcc.tdragon.net/index.php/" target="_blank">http://tdm-gcc.tdragon.net/index.php/</a><br><br><div class="quote"> <br>TDM32 exception unwinder formats (SJLJ vs DW2)<br><br>The TDM32 edition of TDM-GCC comes in two different flavors with respect to how it propagates exceptions in compiled programs.<br><br>The default flavor uses a method called "SJLJ", which stands for "setjmp/longjmp".<br> <br></div><br><br><br>Once you installed a custom MinGW you need to recompile all modules (also brl.mod and pub.mod) as you might else run into trouble.<br><br>Instead of copying all the mingwlibs to BlitzMax\libs you better install Bruceys BMK (the NG-one is compatible to vanilla):<br><a href="https://github.com/bmx-ng/bmk" target="_blank">https://github.com/bmx-ng/bmk</a><br><br>download, compile and copy all the files as stated in the instruction (bmk[.exe] and some .bmk files).<br><br>this BMK variant will automatically use the MinGW-libs, so the BlitzMax\lib-folder is no longer used ("could" be deleted then). You could even store your MinGW installation within BlitzMax (BlitzMax\MinGW32) and BMK uses this - regardless of a potentially co-existing other installation of MinGW.<br><br>If you then have a "compatible MinGW", the modules should compile and the examples should then run.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1328178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Henri</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okey, the results are in (tested in vanilla Blitzmax). <br><br>I had some trouble running wxFlatnotebook example, perhaps Brucey has made some changes to it. There is a double definition {no mangle} {no mangle} in one line. I simply deleted the other in order to build modules.<br><br>Here are the steps that I went through when getting everything going and using Brucey's enhanced BMK (not BlitzMax NG, just BMK) to speed up the build / compile process:<br><br><div class="quote"> <br><u><b>Instructions to use Bruceys modules and enhanced version of Blitzmax maketool bmk.</b></u><br><br>1. Install Blitzmax 1.50 to C:\Blitzmax<br><br>2. Install TDM MinGW 64bit 5.1.x found in <a href="http://tdm-gcc.tdragon.net/download" target="_blank">http://tdm-gcc.tdragon.net/download</a> to C:\Blitzmax\MinGW32 (on installing select option with both 32 &amp; 64 bit toolchains)<br><br>* NOTE: You may need to delete all the .dll.a files in MinGW32 folder so that BMK is using static libraries for building instead of dynamic link libraries. Otherwise errors like 'libstdc++ not found' can occur when moving your app .exe to different computer.<br><br>3. Download enhanced bmk from <a href="https://github.com/bmx-ng/bmk" target="_blank">https://github.com/bmx-ng/bmk</a> . Follow the instructions provided there on how to deploy.<br><br>4. Download patched pub &amp; brl mods from <a href="https://github.com/maxmods" target="_blank">https://github.com/maxmods</a> and replace the originals in C:\Blitzmax\mod<br><br>5. From MaxIDE select menu "Program/Rebuild All Modules". To test that everything is running fine, select a sample from MaxIDE's right panel "Projects/Samples" and run it.<br><br>* NOTE: Bmk NG is using the libraries and bin utils(ar.exe &amp; ld.exe) in C:\Blitzmax\MinGW32-folder so the ones in Blitzmax folder are not needed (those can be deleted/relocated to test this)<br><br>*NOTE 2:	If you get compile error concerning MaxGUI see this <a href="/post.php?topic=104499&amp;post=1273628" target="_blank">post</a><br><br>6. Download Brucey's modules from <a href="https://github.com/maxmods" target="_blank">https://github.com/maxmods</a> and copy them in C:\Blitzmax\mod folder (remember to remove the -master suffix as every module should end in .mod). Probably best to copy only those that are needed for simplicitys sake.<br><br>* NOTE: Modules can be copied one at the time and then do <i>step 7</i>. Save wxMax for (if needed) last because it's huge and takes longest time to compile.<br><br>* NOTE 2: If you get compile error concerning wx.rarinputstream then add this line..<pre class=code>#include &lt;stdint.h&gt;</pre>..in wxrarinputstream.mod\src\unrar\crc.hpp file.<br><br>7. From MaxIDE select menu "Program/Build Modules". No need to do a complite rebuilding at this point.<br><br>8. Finally select menu "Program/Rebuild Documentation"<br><br><br>OK. Now everything should be good to go :-)<br> <br></div><br><br>-Henri <br><br></td></tr></table><br>
<a name="1328185"></a>

<a name="1328186"></a>

<a name="1328187"></a>

<a name="1328188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Henri: Wow - very comprehensive instructions - thank you. I will have a go at a trial install on my Win8.1 laptop and see how I get on. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
