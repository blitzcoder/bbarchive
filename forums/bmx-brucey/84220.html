<!DOCTYPE html><html lang="en" ><head ><title >gtkwebmozilla and firefox3</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >gtkwebmozilla and firefox3</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >gtkwebmozilla and firefox3</a><br><br>
<a name="951292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Building maxide (ce) with gtk in ubuntu hardy yields:<br>/usr/bin/ld: cannot find -lgtkembedmoz<br><br><strike>So I need libgtkembedmoz.so in /usr/lib/firefox but it's not there. It seems it's a firefox2 lib but gone in firefox3.0. Which means I also can't run any gtk ff2 web apps.</strike><br><br>Edit: gtkwebmozilla needs <a href="http://packages.ubuntu.com/hardy/libxul0d-dbg" target="_blank">libxul0d-dbg</a> (and gtkwebgtkhtml needs <a href="http://packages.ubuntu.com/hardy/libgtkhtml3.8-dev" target="_blank">libgtkhtml3.8-dev</a>)<br><br>Is there an updated svn version of bah.gtk? I'm lost.<br>Edit: <a href="http://maxmods.googlecode.com/svn/" target="_blank">bah svn</a><br><br>Edit: building gtkmaxgui without first installing <a href="http://packages.ubuntu.com/hardy/libgtk2.0-dev" target="_blank">libgtk2.0-dev</a> yields:<br>/usr/bin/ld: cannot find -lglib-2.0 <br><br></td></tr></table><br>
<a name="951298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe xulrunner has libgtkembedmoz.so.<br><br>When I get home I'll have a look on my Linux box for my settings - I think it's xulrunner I'm using for the library. <br><br></td></tr></table><br>
<a name="951301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> maxide ce &amp; gtk &amp; ubuntu have disagreed with each other for some time - certainly on my PC, although I believe others have had luck, and code I found to isolate the problem (segfaults), only did so occassionally, and didn't reproduce same on other people's setups!<br><br>So, be warned! <br><br></td></tr></table><br>
<a name="951304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> maxide ce &amp; gtk <br></div><br>Last time I tried the CE ide with gtk I had problems too.<br>At the moment I use the default ide with gtk, which works well enough. <br><br></td></tr></table><br>
<a name="951308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found libgtkembedmoz.so for xulrunner in <a href="http://packages.ubuntu.com/hardy/libxul0d" target="_blank">http://packages.ubuntu.com/hardy/libxul0d</a><br>So I installed libxul0d-dbg <a href="http://packages.ubuntu.com/hardy/libxul0d-dbg" target="_blank">http://packages.ubuntu.com/hardy/libxul0d-dbg</a><br>Then linked to the lib with: sudo ldconfig /usr/lib/xulrunner (Edit: may not be necessary)<br>Now I can run maxide ce gtk (1.15) but there is no html display it's just grey. <br><br></td></tr></table><br>
<a name="951320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Building maxide (ce) with <b>gtk</b> <br></div><br>Traitor!!!! :P<br><br>Brucey! Stop stealing my FLTK companion... :P <br><br></td></tr></table><br>
<a name="951326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes only one step left and finally I will be free from FLTK.. muhahaha<br><br>I tried installing xulrunner-1.9-dev <a href="http://packages.ubuntu.com/hardy/xulrunner-1.9-dev" target="_blank">http://packages.ubuntu.com/hardy/xulrunner-1.9-dev</a><br>But the html display is still grey and a search yields only one libgtkembedmoz.so in /usr<br>So I'm stumped again, I'll wait for Brucey. <br><br></td></tr></table><br>
<a name="951331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Last time I tried the CE ide with gtk I had problems too.<br>At the moment I use the default ide with gtk, which works well enough. <br></div><br>Last time I looked, I decided it was a weird comination of treeviews and createprocess that was causing the problem.  I think if you disable the code that shows the treeview AND avoided any calls to createprocess (i.e. when it calls in bcc in startup), then it worked!  <br><br>By favourite bet was a weird conflict between gtk &amp; createprocess &amp; the change to a tick-less kernel in linux...and at one point had some code that reproduced it for me...but not others...  I haven;t tried it since the 1.32 version, and there were some linux fixes around createprocess and timers... <br><br></td></tr></table><br>
<a name="951332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> mark - it would be as well you first make sure the default ide compiles okay with gtk, as we know that definitely used to work.  I guess 1.32, newer gtk / linux may have caused issue to break even that, but lets hope not... <br><br></td></tr></table><br>
<a name="951333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. I still get this message when I build maxide brl gtk:<br><pre class=code>/usr/bin/ld: cannot find -lgtkembedmoz
collect2: ld returned 1 exit status</pre><br>Which is odd as I thought 'sudo ldconfig /usr/lib/xulrunner' would have solved that.<br>Perhaps that's a runtime link and I need a build link? <br><br></td></tr></table><br>
<a name="951334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> you can always add the path to  /etc/ld.so.conf <br><br></td></tr></table><br>
<a name="951341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Refering to <a href="http://unixhelp.ed.ac.uk/CGI/man-cgi?ldconfig" target="_blank">this</a>, ld.so.cache yields:<br><pre class=code>~$ ldconfig -p
781 libs found in cache `/etc/ld.so.cache'
..
	libgtkembedmoz.so.0d (libc6) =&gt; /usr/lib/libgtkembedmoz.so.0d
	libgtkembedmoz.so (libc6) =&gt; /usr/lib/xulrunner/libgtkembedmoz.so
..</pre> <br><br></td></tr></table><br>
<a name="951366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I don't know how to add that path.<br><br>I followed <a href="/posts.php?topic=76522" target="_blank">this</a> thread and updated to the latest gtkmaxgui in bah svn. Now I can build maxide brl gtk and see the helpview but it's horribly slow; maxide ce gtk won't build (segmentation fault) and createhtmlview gtk just shows up grey. :/<br><br><b>Note: the original subject of this thread ends here.</b> <br><br></td></tr></table><br>
<a name="951367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> maxide ce gtk won't build (segmentation fault)  <br></div><br><br>That'd be the problem I kept hitting, although it sounds like there might be a few other gtk issues - aren't there 2 gtk htmlviews, one plain gtk one imported as default, and another that you can specifically import?<br><br>In terms of the CE segfault, see above for where I'd got to pinning it down (not far!).  I had rather hoped the 1.32 timer &amp; createprocess changes would have at least helped, if not fixed the problems I saw. <br><br></td></tr></table><br>
<a name="951416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I can build maxide brl with both gtkwebmozilla or gtkwebgtkhtml but can build neither with maxide ce and get the error as below.<br><pre class=code>(&lt;unknown&gt;:7210): Gtk-CRITICAL **: gtk_tree_store_set_value: assertion `VALID_ITER (iter, tree_store)' failed
DebugLog:AddPanel:Enter
DebugLog:AddPanel:Exit
(&lt;unknown&gt;:7210): Gtk-CRITICAL **: gtk_tree_store_set_value: assertion `VALID_ITER (iter, tree_store)' failed
(&lt;unknown&gt;:7210): Gtk-CRITICAL **: gtk_tree_store_remove: assertion `VALID_ITER (iter, tree_store)' failed
Segmentation fault</pre><br>I also get a message in debug mode.<br><br><div class="quote"> Unhandled Exception:Attempt to access field or method of Null object <br></div><br>the jumped line 1365 in maxide.bmx being this.<br><pre class=code>helppanel.SyncDocs(bmxpath)</pre><br>Not that this makes much sense to me. <br><br></td></tr></table><br>
<a name="951419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please wait...  building.... everything (yaaaawwwn... just updated everything to 1.32 - takes a wee while to build all my modules)<br><br>I'll take a look once I get up and running.<br><br>Should I get the CE from download or out of SVN?<br><br>&lt;EDIT&gt; This is where my idea for having a multi-process bmk would come in handy - what's the point in having 4 cores if the compile only uses one of them... :-p <br><br></td></tr></table><br>
<a name="951428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can build maxide brl with both gtkwebmozilla or gtkwebgtkhtml <br></div><br>Is that "can build, but then have issues like grey screens" as implied earlier, or "can build and it works, it's only shagged in the CE version" ?<br><div class="quote"> VALID_ITER <br></div><br>Yup, that rings bells: if I remember correctly, the VALID_ITER error relates to accessing a treeview node that no longer exists.  <br><br>On all other platforms (i.e. macos, win32, fltk), this fails silently, but gtk gets rather stressed - in many ways rightly so.  The issue is almost certainly down to the dodgy method of creating &amp; updating the treeview nodes in the IDE : this code is suspect but "clean" in the brl cversion in that it never calls non-existent nodes ; in the CE version it is in theory better / tidier code, but appears to leave duff entries lying around for gtk to trip over.<br><br>The weird thing was that when trying to pin it down I could never a) detect a null treeview node before gtk barfed on such a null node, despite adding checks, b) find any null nodes if I added to code to search for them at given points in the code, or c) reliably recreate it outside of the CE code!  So I never managed to conclude if it was my dodgy code causing the issue, or something else...and it only occurred on linux/gtk, which is not my main platform...<br><br>Am now re-building an 8.10 VM to take a look myself (upgrading from 8.04 barfed bigtime for some reason).<br><br><div class="quote"> Should I get the CE from download or out of SVN? <br></div><br>SVN would be best. <br><br></td></tr></table><br>
<a name="951430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I need to add more checks so that you can't do things you shouldn't.<br><br>Or perhaps better would be to add assertions? Maybe encourage people to clean up their code? ;-)<br><br>... I'm running 9.04 (well... whatever version it thinks it currently is - at this point, there are large numbers of new packages to update every week- but at least it is working as well as it was before I did the upgrade from 8.10) <br><br></td></tr></table><br>
<a name="951432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Yeah, I need to add more checks so that you can't do things you shouldn't.<br><br>Or perhaps better would be to add assertions? Maybe encourage people to clean up their code? ;-) <br></div><br>Indeed, although whenever I tried to pin the thing down, it eluded me...<br><br>One suspicion was that Blitz still has a valid reference to the treenode Blitz object, but has already told gtk to detach it from any other treenodes.  If Blitz then thinks it has a valid node, and tells gtk to update it, gtk might be getting annoyed by that?  Also, I seem to recall the code assumes it can create a node, deatch it from one treenode and re-attach to another treenode...now if gtk is assuming that once detached it is detahced, then that could well cause this behaviour ...(thinking out loud here, without code in front of me or any real logic behind it)<br><br>Damn, it's a long time since I looked at this! <br><br></td></tr></table><br>
<a name="951439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh... now this is funny :<br><br><pre class=code>
brucey@asusC2Q:~/programming/BlitzMax/src/maxide_src$ ./maxide.debug
./maxide.debug: no input files given
usage: ./maxide.debug [options] [filenames].
Available options are:
  -        process stdin
  -l       list
  -o name  output to file 'name' (default is "luac.out")
  -p       parse only
  -s       strip debug information
  -v       show version information
  --       stop handling options
brucey@asusC2Q:~/programming/BlitzMax/src/maxide_src$ 
brucey@asusC2Q:~/programming/BlitzMax/src/maxide_src$ ./maxide.debug -v
Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
</pre><br><br>Um.... <br><br></td></tr></table><br>
<a name="951440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Someone should tell Mr Sibly that the Lua module is building incorrectly...  tsk tsk. <br><br></td></tr></table><br>
<a name="951442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is that "can build, but then have issues like grey screens" as implied earlier, or "can build and it works, it's only shagged in the CE version" ? <br></div><br>The latter. maxide brl loads as expected but everything runs at a snails pace, even if there's nothing else running. I'm wondering if it's due to too many imported modules.<br><br>Createhtmlview is a grey screen, really odd as the code is basically as simple as it gets. <br><br></td></tr></table><br>
<a name="951445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> everything runs at a snails pace <br></div><br>I'm currently looking into this...<br><br>... oooh, at least the process (killed) stuff looks better now :-p<br><br>Anyway...<br><br>There's a timer running in the IDE CreateTimer(15). this is what is slowing it down. Notch it up to 60, and it runs as expected.<br><br>It seems as though this timer drives the update speed of the IDE. It certainly slows down the GTK updating.<br>On delving deeper, perhaps it's to do with the timer itself. On linux it appears to create a thread, which sleeps until it thinks it is time to "tick"... I wonder if that is the problem.<br><br>either that, or it's because the maxgui event system has changed.... <br><br></td></tr></table><br>
<a name="951449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've committed a fix which gets things running at normal speed now.<br><br>Looks like some fundamental things have changed under-the-hood between 1.30 and 1.32... <br><br></td></tr></table><br>
<a name="951453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> This example works for me :<br><pre class=code>
' createhtmlview.bmx

Strict

Framework BaH.gtkmaxgui
Import BaH.gtkwebmozilla

Local window:TGadget
Local htmlview:TGadget

window=CreateWindow("My Window",30,20,600,440,,15|WINDOW_ACCEPTFILES)

htmlview=CreateHTMLView(0,0,ClientWidth(window),ClientHeight(window),window)',HTMLVIEW_NONAVIGATE)
SetGadgetLayout htmlview,1,1,1,1

HtmlViewGo htmlview,"http://blitzmax.com/"

While WaitEvent()
	Print CurrentEvent.ToString()
	Select EventID()
		Case EVENT_WINDOWCLOSE
			End
	End Select
Wend
</pre> <br><br></td></tr></table><br>
<a name="951463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, just to confirm that both those worked ie. changing CreateTimer(15) in maxide and the fix in bah.gtkmaxgui stopped maxide brl from running like treacle. Fast work Brucey.<br><br><div class="quote"> This example works for me : <br></div><br>Oh.. it works here too, after adding Import brl.eventqueue. The exact same code that was a grey screen now loads as expected so it must have been the timer delay. <br><br></td></tr></table><br>
<a name="951465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh... you can put CreateTimer(15) back in, it seems... <br><br></td></tr></table><br>
<a name="951469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, maxide brl is working great (except the F1 key for some reason).<br><br>Anyway, could I redistribute this build now? The maxide code was made PD so I don't see how there would be any restrictions. <br><br></td></tr></table><br>
<a name="951472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are issues with hotkeys... I'm working on a fix.<br><br>PD? So it is... who'd have thought it. And in 2006, no less... <br><br></td></tr></table><br>
<a name="951474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one Brucey - I've just got my Ubuntu VM up and running, will probably take another look at the old ce ide code with this in next few days (imminent new baby arrival allowing!). <br><br></td></tr></table><br>
<a name="951490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hokay... hotkey/menu support is working again - sometimes I surprise even myself, as it all appears to work first time. (I had a look at the wxWidgets source to see what functions it was calling... seems my original direction when I moved to using the "gtk accel" functionality, was wrong... so I'm now calling a different set of functions which seem to do the job - and much simpler too!)<br><br>I still see a couple of issues which are new to 1.32...<br><br>1) The output window doesn't refresh... but if you click on it, it will.<br>2) If there is an error, the error window isn't shown, and the tab isn't changed to show the correct page - however, if you click on a tab, it flicks to the correct tab, and shows the error window.<br><br>Time for bed though... so these will have to wait until tomorrow evening...<br>... once I sort those I can take a look at the CE IDE... (getting to it... albeit a tad slowly).<br><br><br>btw... I realise I'm a bit slow with updates to these things, but if you push enough I will get onto them - as you see today :-p<br>(I get distracted very easily... take my latest module as an example (bah.gdal)) <br><br></td></tr></table><br>
<a name="951492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> seems my original direction when I moved to using the "gtk accel" functionality, was wrong... so I'm now calling a different set of functions which seem to do the job - and much simpler too!) <br></div><br>Now that sounds good - there was a limitation with the old GTK ACCEL stuff that caused a whole bunch of GTK "WARN" messages in CE IDE - you couldn't change hotkey associations on the fly, which the CE IDE allows and does on startup.  So more good news there already in terms of getting CE IDE &amp; GTK on speaking terms once more.  ;-)<br><br>I've now d/l'ed everything (including all your modules as well as ce ide) and in process of building modules in my shiny new ubuntu vm.  A few things didn't compile so I just deleted them (libssh2, libcurl, raptor) rather than investigate, probably just a missing dependency on dev libs on my side.  We'll see where we get to tomorrow...g'night... <br><br></td></tr></table><br>
<a name="951525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> The good news - I can get maxide ce to build now. The bad news - I just rem'd a line or two out so it's still buggy.<br><br>Line 1365 - I noticed SyncDocs() doesn't have a parameter and calls itself, well it looks wrong.<br><pre class=code>	Method SyncDocs()
		'helppanel.SyncDocs(bmxpath) ' &lt;- attempt to access null
		quickhelp = TBMXQuickHelp.Create(bmxpath+"/docs/html/Modules/commands.txt")
		helppanel.Home
	End Method</pre><br>Line 319 - in debug mode the build hangs on exiting and another null object message appears. It doesn't hang in release mode.<br><pre class=code>	Method CloseAll:Int(warning$="")'dontask:Int)	'returns true if successful
		Local	panel:TGUIPanel
		Local	mypanels:TGUIPanel[]
		Local	cancel:Int, count:Int

		For panel=EachIn panels
			If TCodePanel(panel) Then count :+ 1 
		Next

		If count=0 Then warning$ = ""
		If (warning$ = "") Or Confirm(warning$) Then
			mypanels=panels

			For panel=EachIn mypanels
				'If panel.invoke(TOOLCLOSE) cancel=True ' &lt;- attempt to access null
			Next

			Return Not cancel
		EndIf
	End Method</pre> <br><br></td></tr></table><br>
<a name="951534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one - at work today, will check it out later / over the weekend.  BTW, my general opinion on all this stuff is that linux (and in particular gtk) is more fussy about things being done "right", and as such highlights pre-existing issues with code that simply don't show up on other platforms. <br><br></td></tr></table><br>
<a name="951540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> linux (and in particular gtk) is more fussy about things being done "right" <br></div><br>Or that my code sucks :-) <br><br></td></tr></table><br>
<a name="951650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Or that my code sucks :-)  <br></div><br>Not so much as maxide CE!  (But I'll blame that on being largely lazy and tweaking existing code - I've tried to clean it up and structure it, honest!) <br><br></td></tr></table><br>
<a name="951654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey - scanning through this old thread was kind of interesting, you may want to check it out if you're in gtk mode again as I think some of the latter "issues" raised may not have all got addressed back then.  (maybe, but haven;t checked yet!)<br><br><a href="http://www.blitzmax.com/Community/posts.php?topic=76522" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=76522</a><br><br>For example, see my reporting the problem with broken hotkeys (sounds like fixed now), and also my comments about gtk_main_iteration_do and writing a simulated wait - I believe your tweak to avoid the timer issue is along these lines!  Also suggestion to add an assert if iter=null to highlight the treeview problem.<br><br>Will fire up Ubuntu later tonight and play... <br><br></td></tr></table><br>
<a name="951676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Also suggestion to add an assert... <br></div><br>Yes, I'm thinking we could do with a few of those dotted around the code :-) <br><br></td></tr></table><br>
<a name="951705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I'm finally up and running, and I now get exact same results as markcw.  <br><br>Burrowing into the gtk code, it looks like the cause of the specific error in gtk is that when freeing a treenode, a call is attempted to tell the parent of that free'd node to refreshchildpaths.  I think a check that the node actually *has* a parent helps here - this ensures you can free the treenode *after* you detach it from a parent treenode (which appears to work on other platforms, and I *think* is a valid thing to do!).<br><br>Unfortunately, applying this fix doesn't really "sort" the first issue in mark's post : uncommenting syncdocs then generates LOTS of ITER warnings on remove, highlighting a problem in CE IDE code.  Maxide CE eventually loads and seems happy, but all those ITERs in the debuglog make it dog slow.  This is the one that could do with an assert or error being raised in blitzmax to trap that I am doing something stupid.  And mark, that's not a call to itself, but to the syncdocs in THelpPanel.  Having said that, the help panel is populated if you comment it out, so it *is* a duplicate of something else, so need to check this through to remove the duplication.<br><br>BTW, maxide ce looks good in gtk with all those icons on menus, tabs, etc!  Works a treat Brucey! <br><br></td></tr></table><br>
<a name="951712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> It'd be even better if it didn't crash :-p<br><br>I'm currently working through some of Seb's old list of issues - which are still outstanding... Just to get *my* IDE running properly.<br><br>Actually, I'll go and download the CE IDE now, and see how bad things really are ;-) <br><br></td></tr></table><br>
<a name="951716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> And mark, that's not a call to itself, but to the syncdocs in THelpPanel <br></div><br>Yes, sorry I see that now. I have narrowed it down a bit, I can comment line 561 in datanodes.bmx and it still builds which draws attention to a bug note there which may be related.<br><pre class=code>	Method Refresh()
		For Local i:Int=0 To _views.length-1
			'RefreshView i
		Next
	End Method</pre> <br><br></td></tr></table><br>
<a name="951720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, here's my thinking before I head for bed:<br><br>There are two issues that CE IDE doesn't like about Brucey's GTK implementation.<br><br>1) If you try to Free a treeview node that you've already Free'd, then it generates warnings all over.  I think the reason why the code is free-ing things already free'd is that I went through a paranoid phase plugging every possible memory leak, possibly over-zealously free-ing things at every turn.  However, I don't think it is unreasonable for a BlitzMax coder to do this, and to expect a subsequent attempt to Free something already Free'd should just silently ignore it.  This would also match behaviour on all other platforms.  <b>Therefore I propose Brucey changes Free() in gtkgadget.bmx so that it checks both myIter and parent before calling each of the two GTK methods in the "Else" block.</b><br><br>2) After fixing the above, CE IDE is left with a handful of GTK warnings about gtk_tree_store_set_value.  I believe this is CE IDE code wrongly attempting to update the text of a non-existent node.  Not quite so sure what should happen here: I think ideally maxgui should assert this out on all platforms, but unsure if it would be possible something can be done at top level maxgui for all platforms.  At the very least, <b>I suggest Brucey adds an assert to populatelistRow in gtkgadget.bmx if iter is null</b>.<br><br>I then need to track down the handful of dodgy updates to treeview nodes in CE IDE code, and we're sorted...adding the Assert myself points in a very clear direction, so should (hopefully) be easy to pin down now...<br><br>G'night! <br><br></td></tr></table><br>
<a name="951724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> You both posted as I typed the above - hopefully the tweaks I suggest above make sense to you Brucey and I'll sync tomorrow and we'll all see some wood for the trees.  ;-)<br><br><div class="quote"> Actually, I'll go and download the CE IDE now, and see how bad things really are ;-)  <br></div><br><br>Really nothing like they were!  If you add the first of the two tweaks above, it'll startup fine (I haven't dared test further!).  If you add the second, then you'll see the "area" of code that is causing issue which I now need to debug further.  (And thanks mark, suspect once I dig around I'll either nail it quickly, or hit age-old issue with the treeview code that I need to find a workaround for - one for tomorrow!) <br><br></td></tr></table><br>
<a name="951735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well you seem to have the 'not building' bug solved Mark, but I might as well mention I can comment just line 607 in RefreshView in datanodes.bmx and it still builds, so definitely a problem with treeviews.<br><pre class=code>						?Not macos
							If v._node FreeGadget v._node
							'v._node = InsertTreeViewNode(_getindex() , _name , parent_view._node) 						
						?</pre><br>Edit: from debugging it seems this line is being called twice instead of once. <br><br></td></tr></table><br>
<a name="951753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe the CE GUI is using the rootnode incorrectly....<br><br>As far as I can tell, the rootnode is an invisible node which is only there to attach real nodes to :<br><br>It's not for displaying stuff... at least as far as the docs imply.<br><br>This is how I've implemented it on GTK. This is how it is used on Max IDE. <br><br></td></tr></table><br>
<a name="951757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay... I've got it starting up fine now.<br><br>As Mark T suggests, the two problem areas are in Free() and with ModifyNode() (which calls populateListRow()).<br><br>For ModifyNode(), I don't think it should call that on the rootNode... but anyway... if I add in a check for rootnode, and do nothing if it is, then that seems to solve the problem - well... it makes the problem go away ;-)<br>So, I don't think it needs an assertion raising there.<br><br>The Free() problem is a real problem, I think - with the CE IDE.<br>It's obvious, as markcw notes, that it is being called twice. Ideally, we have an Assert here, but I think for now I'll just to a dirty myIter test, and skip it if Null...<br>But I want an Assert in there eventually.<br><br><br>So, what's going on in the IDE.<br>I'm getting some accel warnings, which I'll take a look at in the morning.<br>If I open a .bmx, the menus don't seem to be enabling (nor the context menu). They are all there - but disabled. Seems it doesn't realise we are editing a bmx file - or something.<br><br>I'll commit these latest changes for now....<br><br>Looking better :-) <br><br></td></tr></table><br>
<a name="951762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Removed all the accel key warnings... now does some more checks.<br>Seems to be able to add/remove hotkeys as required now. <br><br></td></tr></table><br>
<a name="951816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one, and I'll go check the root node issue later.  Not sure what the menu issue is, but presumably this doesn't happen on other platforms so presumably must be another "not doing it the way gtk likes" or "not doing it the right way full-stop like root nodes" issue... <br><br></td></tr></table><br>
<a name="951824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Or that my code sucks :-) <br></div><br><br>:-p <br><br></td></tr></table><br>
<a name="951829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sure that comment will apply to one of the two of us!  ;-) <br><br></td></tr></table><br>
<a name="951834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick play this morning and a few things in CE IDE with GTK:<br><br> - in debug mode, on win32 &amp; fltk, but not GTK, my memory monitor code shows a little window that shows memory usage - see util/memchecktool.bmx for includeable code that relates.<br><br> - As Brucey says, the menus don't enable in GTK, but I have checked and they definitely do on win32 and fltk, so clearly gtk specific.  See EnableToolMenus in TBMXHost - pretty sure this just works off a list of stored references to the menuitem gadgets in TLists, then runs through them and calls enable/disablemenu... <br><br></td></tr></table><br>
<a name="951924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> After Brucey's latest changes, maxide ce builds as expected in release but not in debug. The debugger jumps to line 259 in datanodes.bmx but no error prompt appears, it just seems to stop somewhere.<br><pre class=code>	Method Hide()
		If _node FreeGadget _node ' &lt;-
		_state = NODEVIEW_HIDESTATE
	End Method</pre><br>Also, hotkeys are working (only tested f1/f3) and are shown in menus with maxide brl. <br><br></td></tr></table><br>
<a name="951941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> mark - things seem fine in maxide ce in debug mode for me with Brucey's latest mods and current svn version of maxide ce.  Is there something in particular you did that caused the above error to occur?<br><br>How did you test f1/f3?  These keys don't work for me, I think because the "editor" type menu items don't get enabled for me (or Brucey).  The other keys (Ctrl+N, etc in File) all seem okay, so I presume the hotkeys are fine, it's just menus causing that problem for me.  Are the "edit" menus enabled for you when you open a bmx file? <br><br></td></tr></table><br>
<a name="951944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> *sigh*...<br><br>I've spent ALLLLLL day trying to get the Tabber to work "properly".... and it almost works... but not quite (you know when you *almost* get something working, but there's just that one tiny little niggle? And you try it a different way, and there's another tiny niggle?..... ), so I think I may as well leave it as is, even though it's not really using the GtkNotebook pages... :-(<br><br>What a fun day for me... <br><br></td></tr></table><br>
<a name="951948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> mark - things seem fine in maxide ce in debug mode for me <br></div><br>Doh! Just checked out a new version of maxide ce which has fixed the 'not built in debug' issue. It's all dandy now. Must have been something I did to the code.<br><br>Edit: yeah, I had removed line 260 in datanodes.bmx ie.<br><pre class=code>	Method Hide()
		If _node Then FreeGadget _node
		'_node = Null ' &lt;- 
		_state = NODEVIEW_HIDESTATE
	End Method</pre><br><div class="quote"> How did you test f1/f3? These keys don't work for me.. <br></div><br>I tested the hotkeys only in the default/brl maxide. <br><br></td></tr></table><br>
<a name="951952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I've spent ALLLLLL day trying to get the Tabber to work "properly".... and it almost works... but not quite (you know when you *almost* get something working, but there's just that one tiny little niggle? And you try it a different way, and there's another tiny niggle?..... ), so I think I may as well leave it as is, even though it's not really using the GtkNotebook pages... :-( <br></div><br>Ouch - I hate that feeling.  What's up with the Tabber?<br><br><div class="quote"> I tested the hotkeys only in the default/brl maxide.  <br></div><br>Ah, makes sense now! <br><br></td></tr></table><br>
<a name="951954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting debug output. I have two sources open. One .m, and one .bmx. Selecting the .bmx results in this :<br><pre class=code>
DebugLog:EnableToolMenus : 0 : 1
DebugLog:EnableToolMenus : 1 : 1
DebugLog:EnableToolMenus : 2 : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled () : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled (Cu_t) : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled (_Copy) : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled (Block Indent) : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled (Block Outdent) : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled (Block Comment) : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled (Block Uncomment) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (Cu_t) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (_Copy) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (Block Indent) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (Block Outdent) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (Block Comment) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (Block Uncomment) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (Cu_t) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (_Copy) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (Block Indent) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (Block Outdent) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (Block Comment) : 0
DebugLog:Disabling menu x...
DebugLog:MenuItem SetEnabled (Block Uncomment) : 0
DebugLog:EnableToolMenus : 3 : 1
DebugLog:EnableToolMenus : 4 : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled () : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled (_Step) : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled (Step _In) : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled (Step _Out) : 0
DebugLog:Disabling menu...
DebugLog:MenuItem SetEnabled (_Halt) : 0
</pre><br>For EnableToolMenus.... first digit is the menu number, second is the on/off flag.<br>"MenuItem SetEnabled" is the actual call in the GUI module... digit is the on/off flag.<br><br>For some menus it doesn't appear to see any children?<br>For the others, it doesn't want to enable anything?<br><br>&lt;EDIT&gt; just to make things clearer :<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
	Method EnableToolMenus( index:Int, enable:Int = True)
DebugLog "EnableToolMenus : " + index + " : " + enable
		If (index &gt;= 0) And (index &lt; toolmenus.Length) Then
			Local g:TGadget = TGadget(toolmenus[index].First() ) 
			If g=Null Then Return 
			If MenuEnabled( g ) = enable Then Return
			For Local o:Object = EachIn toolmenus[index]
				If TGadget(o) Then
					If enable Then
DebugLog "Enabling menu..."
						EnableMenu TGadget(o)
					Else
DebugLog "Disabling menu..."
						DisableMenu TGadget(o)
					EndIf
				ElseIf TList(o) Then
					If enable Then
						For Local menuitem:TGadget = EachIn TList(o)
DebugLog "Enabling menu x..."
							EnableMenu menuitem
						Next
					Else
						For Local menuitem:TGadget = EachIn TList(o)
DebugLog "Disabling menu x..."
							DisableMenu menuitem
						Next
					EndIf
				EndIf
			Next
			' update main menu
			UpdateWindowMenu _gadget
		EndIf
	EndMethod
</textarea> <br><br></td></tr></table><br>
<a name="951956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  What's up with the Tabber? <br></div><br>The current implementation doesn't actually use the tab panels. The panels themselves are only a couple of pixels high (see the small bar under the tabs).<br>It's a bit of a cheat, but unless you know what you're looking for, it's not too obvious.<br><br>My attempt today was to try to use the panels properly.<br><br>It almost worked...<br>The main issue is that you need to shift a panel around with the current tab for MaxGUI, since it doesn't know the concept of separate panels - with MaxGUI you just show/hide the one you think should be current...<br><br>Anyhoo... maybe I'll return to it one day :-p <br><br></td></tr></table><br>
<a name="951977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey,<br><br>Is MenuEnabled working?   About to fire things up now, but I am just wondering if the line... <br><br><pre class=code>If MenuEnabled( g ) = enable Then Return</pre><br><br>...is always returning true for the current state, hence not attempting to enable as it thinks it already is enabled?<br><br>(and it isn't that it's not seeing the children : this stuff works by "registerring" each individual menu item as being turn on / offable, and hence it only touches those it might actually need to change.) <br><br></td></tr></table><br>
<a name="951989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup, MenuEnabled is always returning True, so that check is always kicking in and preventing anything from being enabled.  Comment out that line and all is fine.<br><br>Now, I'm not completely sure *why* I only check the first gadget in the list, and not just remove the check entirely to *force* the menu's to be updated every single time (other than mild performance paranoia?)...but then I shouldn't enable a gadget twice should I...just like I shouldn't free something twice?  ;-) <br><br></td></tr></table><br>
<a name="951992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  MenuEnabled is always returning True <br></div><br>So it is...  hah. <br><br></td></tr></table><br>
<a name="951994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for that!!<br><br>Committed a fix. Menus in the CE IDE appear to be behaving now :-) <br><br></td></tr></table><br>
<a name="951998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey - that's done the trick! <br><br></td></tr></table><br>
<a name="952001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Menu enable/disable works here too.<br><br>I have a few more bug reports specific to ce maxide gtk:<br><br>- <strike>IDE options window general tab not changing when you select another tab.</strike><br>- Find/Replace not working.<br>- Replace All hangs the ide.<br>- Find/Replace buttons deleting text in the textboxes.<br>- <strike>links to .bmx files in the help view not opening [when filename contains space chars].</strike><br>- <strike>undo/redo gets disabled in the editor view when selected text was deleted or otherwise removed.</strike><br>- <strike>project manager-&gt;project properties window buttons activate on mouseover.</strike> <br><br></td></tr></table><br>
<a name="952106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> - IDE options window general tab not changing when you select another tab <br></div><br>This is almost certainly related to the Tabber issue Brucey spent yesterday trying to fix.  I am pretty sure the CE IDE code relies on the tabber gadget hiding / showing / bringing to front relevant gadgets attached to each tab.  As the gtk tabber is "faked" to some degree, I suspect this is the root cause.<br><br>Brucey, maybe you could add some code to gtk to force the hiding / showing of child gadgets attached to each tab?  Probably best to do something like move way off screen and restore to correct x,y for the tabber, otherwise you'd have issues with the app hiding / showing gadgets while the user is on another tab.<br><br>(I could just as well add this to CE IDE code, but I think my expectation of the tabber behaviour is reasonable, and is therefore better to add to the gtk implementation).<br><br>mark, are you sure all the find/replace issues are gtk specific?  I think there are some issues in there with the CE IDE code - the hanging one in particular I think can be caused by a conflict between find/replace and auto-tidy code.  I'd have a proper look myself but am heading outside to sort the garden out today... <br><br></td></tr></table><br>
<a name="952113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unless tabber functionality has completely changed in MaxGUI, it has always been up to the user to determine what tab panels are shown or hidden. There should be nothing wrong with the Tabber functionality on gtk :-p<br><br>Anyhoo... I'd imagine it's more something to do with the event hooks stuff... which I'm trying to look at now. <br><br></td></tr></table><br>
<a name="952128"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> mark, are you sure all the find/replace issues are gtk specific? <br></div><br>Yes, I made sure to test the fltk ce maxide build which worked fine.<br><br>Edit: there is a bug with fltk ce maxide that gtk ce maxide does *not* have.<br>- ending a built app also ends/closes the ide. <br><br></td></tr></table><br>
<a name="952133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Unless tabber functionality has completely changed in MaxGUI... <br></div><br>I thought it did manage the tabs for you...maybe win32 only?  No time to check right now but probably safest for me to add code to manage stuff....although I personally would like to see the tabber manage it's own children, rather than me having to nanny them on all platforms...<br><div class="quote"> - ending a built app also ends/closes the ide.  <br></div><br>eeek! <br><br></td></tr></table><br>
<a name="952147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh... I don't remember ItemExtra() on TGadget.<br>Anyhoo, I've updated various places and the options tabbing seems to work better now.<br><br>Note that in your code, you are indeed having to manually show/hide the panels.<br>It's one of MaxGUI's design flaws - having to manually deal with things like this.<br>For me, I would prefer the tabber managed the children, as you say you would too - it only makes sense.<br><br>Oh well.. it makes things more interesting, I suppose :-p <br><br></td></tr></table><br>
<a name="952148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>project manager-&gt;project properties window buttons activate on mouseover. <br> <br></div><br>You should check for button activate... not assume that because the button raises an event, it has been clicked :-) <br><br></td></tr></table><br>
<a name="952161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Note that in your code, you are indeed having to manually show/hide the panels. <br></div><br>Shows how long it is since I last touched this beast!<br><div class="quote"> You should check for button activate... not assume that because the button raises an event, it has been clicked :-) <br></div>My bet is that's an inherited one - I've sorted *loads* of things like in the maxide code with assumed events.  Time for dinner after a days hard gardening, and I'll see what tweaks I can commit to maxide CE before Lost... <br><br></td></tr></table><br>
<a name="952182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> A few more issues in CE IDE with gtk after my own testing and before hacking:<br><br> - scrolling hotkey list in IDE options doesn't scroll<br> - trying to set a hotkey doesn't pickup keypresses (doesn't work in FLTK either, but does in win32)<br> - font sizes generally seem bigger in GTK than FLTK / win32 - check the About window and IDE options.  I don't think this is me, but could be my code, unlikely to be my config as having fiddled with this ubuntu vm. <br><br></td></tr></table><br>
<a name="952189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  font sizes generally seem bigger in GTK <br></div><br>Yes. They compare favourably with Mac sizes... IIRC, buttons are okay at 28px. But of course this is theme specific too - a problem you'll encounter with MaxGUI's fixed layout scheme.<br><br><div class="quote">  scrolling hotkey list... <br></div><br>I noticed that too. Didn't try clicking on any of the buttons yet though.<br><br>Plenty to do, I see :-) <br><br></td></tr></table><br>
<a name="952200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Yes. They compare favourably with Mac sizes... IIRC, buttons are okay at 28px. <br></div><br>Ta for the info - looks like there's a job for me to do there resizing buttons.<br><br>Might be worth someone doing the same to the buttons in the official maxide source too for Mr S so that people can choose to use gtk with that if they wish.<br><br><div class="quote"> I noticed that too. Didn't try clicking on any of the buttons yet though. <br></div><br>clicking the buttons shows up the subsequent fault (can't detect key press, but that seems *linux* specific, not just gtk, so will have a rummage in there in case I'm doing something stupid.  I seem to recall that it does rely on a non-visible (off-screen?) gadget, so there could be something dodgy assumed in there. <br><br></td></tr></table><br>
<a name="952202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  so that people can choose to use gtk <br></div><br>I can't imagine anyone wanting to do that :-p <br><br></td></tr></table><br>
<a name="952205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey / mark, the code for capturing a hotkey uses a small active panel to receive the key presses.  Do gtk / fltk / x whatever have any peculiarities here that you know of? <br><br></td></tr></table><br>
<a name="952206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can't imagine anyone wanting to do that :-p  <br></div><br>To be honest, now that mark's done such a good job with the htmlview, I'm kind of inclined to agree! <br><br></td></tr></table><br>
<a name="952217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..<br>I was wondering what Brucey thinks about switching to use gtkwebgtkhtml if libgtkembedmoz.so can't be found for gtkwebmozilla? <br><br></td></tr></table><br>
<a name="952221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like a sensible fallback to me.<br><br>I've just committed a couple of fixes to the CE IDE:<br> - IDE options gadgets sizes / alignments sorted<br> - Project manager mouseover hyper-activity fixed<br><br>Note that in tweaking gadget sizes, it seems "Ok" and "Cancel" buttons need to be a little bigger than 28 in gtk for the icons (and possibly fltk too as that has an icon on "Ok"), so went for 34, which seemed about right. <br><br></td></tr></table><br>
<a name="952336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> .. the code for capturing a hotkey uses a small active panel to receive the key presses. <br></div><br>I'm not sure why but in Fltk, TKeyOptionsPanel.Poll() does *not* receive EVENT_KEYDOWN(513/$201) but gets EVENT_KEYUP(514/$202) so you can work around it with the snippet below.<br><br>In Gtk that didn't fix it, it only seems to get EVENT_MOUSEENTER(1029/$405) and EVENT_MOUSELEAVE(1030/$406).<br><br>Windows gets EVENT_KEYDOWN, EVENT_KEYCHAR(515/$203) and EVENT_KEYREPEAT(516/$204).<br><br>Also returned are EVENT_GADGETACTION(8193/$2001) and EVENT_GADGETPAINT(8194/$2002).<br><pre class=code>'optionsgui.bmx
	Method Poll:Int()
		Local changed:Int = False

		' deal with events here, and set changed to True if anything, er, changed!
		' and don't forget to check the eventid!!!
		Local b:Int=GetButtonID(EventSource())

'DebugLog " EventID "+String(EventID())

		If EventSource() = _capture Then
			If (EventID() = EVENT_KEYDOWN Or EventID() = EVENT_KEYUP) And _pick Then ' &lt;- fltk fix
				Local k:Int = EventData() </pre> <br><br></td></tr></table><br>
<a name="952397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks - fix committed. <br><br></td></tr></table><br>
<a name="952439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> <strike>So Gtk panel gadget callbacks for key down/up and mouse wheel scroll don't work?</strike><br><br>Edit: well the panel callbacks all work and space/enter/arrows work but no other keys or the mouse wheel. :/ <br><br></td></tr></table><br>
<a name="952695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> fyi, my wife &amp; 2nd child is going to be induced today, so may not be around for a few days now!!!  I have 2 weeks paternity leave after that and expect to get a chance to tidy up the various points above in that time....maybe! <br><br></td></tr></table><br>
<a name="953337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, keyup fix didn't fully stick in last commit somehow (presumably me being thick) - another commit applied which means hotkeys all work on FLTK.<br><br>But on GTK, still can't scroll and no detection of key presses. <br><br></td></tr></table><br>
<a name="953347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Mark, congratulations on your 2nd child.<br><br>I wonder could you commit grable's threading build option when you have the time? I don't know how to commit it myself (any info on this would be great). The changes are in the beta 5 src zip already.<br><br>I will be trying to fix the fltk 'ending app' bug, I'll leave all other fixes up to Brucey and you. <br><br></td></tr></table><br>
<a name="953359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks mark - Kaitlyn Emma was born on Thursday, and she &amp; mum are doing fine.<br><br>I'll take a look at the beta5 src zip (in the CE thread, right?) and compare. <br><br></td></tr></table><br>
<a name="953361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> in the CE thread, right? <br></div><br>Yep, that's the one. <br><br></td></tr></table><br>
<a name="953384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> r40 committed with grable's addition of threaded mode. <br><br></td></tr></table><br>
<a name="953391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, thanks Mark. <br><br></td></tr></table><br>
<a name="953397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ho hum....<br><br>Well, I'm almost understanding why on Linux, the Gtk GUI is not responsive.<br><br>Apparently, the way timers work as changed significantly at some point - no idea when.<br>It all appears to run in a separate thread... calling bbSystemPostSyncOp() on each "tick"... which itself calls postAsyncOp(), which adds the "tick" onto the end of a linked list. (see system.linux.c), and writes to a pipe...<br><br>To get this linked list processed, requires a call to bbSystemPoll()... (or more specifically, bbSystemFlushAsyncOps(), but bbSystemPoll calls this)<br><br>So... for a timer tick event to be created, you must be polling - else the BlitzMax Event object will not be created.<br><br>I'm pretty certain this didn't used to work like this.<br><br>Not sure how I'm going to fix this.<br>In theory, I need a timer which will call bbSystemPoll(). But I can't use a BlitzMax timer, since I need to be polling in order for it to work...<br><br><br>I had a dig in the fltk code, and apart from the fact that the FLTK MaxIDE runs like a dog on my quad-core 4gig system (no idea what's going on there... the IDE is completely unresponsive), I see that it manages to fire events as expected.<br>In ftkglue.cpp, it appears to be using flAddFd() to setup some kind of asynchronous callback, which attaches to the pipe mentioned above.<br><br>Fun fun... <br><br></td></tr></table><br>
<a name="953400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps this is the way I need to go :<br><br><a href="http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#g-source-add-poll" target="_blank">http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#g-source-add-poll</a><br><br>which may mirror the stuff that fltk is doing down there...<br><br><br>Well, I've had enough of this for now... need to do something where I feel I'm actually making progress, for a while :-p <br><br></td></tr></table><br>
<a name="953465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds nasty - I recall Mark doing a whole bunch of work on timers in linux a while back, although don't recall what and finding that detail in retrospect will be hard.  I seem to recall it tied in with the change to a tick-less kernel on most distros also, but not sure that really helps you.  For what it's worth, gtk doesn't seem *that* bad here...<br><br>You could always add keyup &amp; keydown events to gtk canvases as a distraction in the meantime?  ;-) <br><br></td></tr></table><br>
<a name="953819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> The issue I mentioned above with the CE IDE not showing a memory monitor when compiled in debug is also caused by the timers not working.  This is because my code relies on CreateTimer generating EVENT_TIMERTICK and for this to be passed through the EmitEventHook.  Not sure it helps you fix up timers, but another element of the bug report I guess! <br><br></td></tr></table><br>
<a name="953822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> And after a bit of playing / checking, the issue with non-scrolling list of hotkeys appears to be inherent to the tabber control (possibly part of the reason you were looking at this the other day Brucey).  The slider is not mine, but presumably provided by the tabber gadget, and it is therefore presumably completely internal to the tabber gadget as to why the slider isn't scrolling the panel. <br><br></td></tr></table><br>
<a name="953827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> The TODO list is getting pretty significant now, eh? :-p <br><br></td></tr></table><br>
<a name="953914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was wondering about moving these various issues into a separate post (or posts) if that would help?  Or should I log them in "issues" on googlecode?  Concious this thread is now rather long and no longer directly related... <br><br></td></tr></table><br>
<a name="953917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've created 3 issues in googlecode for you (canvas key events, tabber scrolling &amp; timer eventhooks), and will add any others there if i find any.<br><br>Also, did you see this suggestion from markcw?<br><br><div class="quote"> I was wondering what Brucey thinks about switching to use gtkwebgtkhtml if libgtkembedmoz.so can't be found for gtkwebmozilla?  <br></div> <br><br></td></tr></table><br>
<a name="953938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> The find/replace bugs are all to do with a new gtk bug: TextFieldText doesnt work on comboboxes - it returns blank regardless of selection. <br><br></td></tr></table><br>
<a name="954033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> mark, <br><br>I can't reproduce the specific problem you mentioned before with undo/redo being disabled in ce ide when removing blocks of text in gtk - I can't reproduce it here.  There are a couple of general issues with undo/redo at present on all platforms, so unless you know a specific way to reproduce a gtk specific issue, I'm gonna assume it falls in the known cross-platform pot.<br><br>I also can't reproduce issues with loading .bmx files from the help view under gtk.  For example, if I open the maxgui page from the help treeview, scroll down in the help page to CreateTreeView, then click on example, I get the .example.bmx file opened.  Again, specific steps to reproduce, or magically fixed by one of the Brucey fixes? <br><br></td></tr></table><br>
<a name="954039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> mark (and seb if reading),<br><br>I think there's a problem with the helpview in official ide:<br><br><a href="http://www.blitzmax.com/Community/posts.php?topic=84443" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=84443</a><br><br>I also get a flickering mouse cursor in the fltk version of the official ide and ce ide (but not gtk!):<br><br><a href="http://www.blitzmax.com/Community/posts.php?topic=84445" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=84445</a> <br><br></td></tr></table><br>
<a name="955434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can't reproduce the specific problem you mentioned before with undo/redo being disabled in ce ide when removing blocks of text in gtk - I can't reproduce it here. There are a couple of general issues with undo/redo at present on all platforms, so unless you know a specific way to reproduce a gtk specific issue, I'm gonna assume it falls in the known cross-platform pot. <br></div><br>Well, here's a step-by-step method (just to make sure you can't reproduce it) - still using bmax 1.32.<br>1] insert a space char between any word (eg. 'testing' to 'test ing')<br>2] select a few chars of a word with the mouse and press backspace<br>3] insert a space char between another word<br>4] now undo back to the start and it should get stuck on step 2 (ie. forgets all undo/redo)<br><br><div class="quote"> I also can't reproduce issues with loading .bmx files from the help view under gtk. For example, if I open the maxgui page from the help treeview, scroll down in the help page to CreateTreeView, then click on example, I get the .example.bmx file opened. Again, specific steps to reproduce, or magically fixed by one of the Brucey fixes? <br></div><br>Yes, sorry about that, it only happens with filenames containing space chars. <br><br></td></tr></table><br>
<a name="955487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> My precise steps:<br>1] Type "testing"<br>2] Mouse click between s and t and hit space<br>3] Mouse select "in" and hit backspace<br>4] Mouse click before e and hit space<br>5] Undo until it gets to "tes ting" and it will go no further as you say<br><br>If at step 3 you Undo, then Redo, the Redo FAILS?!?<br><br>In fact, step 4 is uneccessary (although it proves that adding a space isn't the problem).<br><br>In fact 2, edit ANYTHIING, then MOVE THE CURSOR (mouse or keys) &amp; backspace and Undo will get stuck &amp; Redo stop working.  Typing, backspace (without a cursor move) is fine.<br><br>But all of this works fine in win32 and fltk?!?!?!<br><br>My guess is that gtk is reporting cursor pos / selection lengths / events slightly differently to win32 and fltk...<br><br>I can't reproduce the problem with .bmx files and gtk though.  e.g. I can open Samples\threads\threaded image downloader.bmx from the treeview with no issue... <br><br></td></tr></table><br>
<a name="955508"></a>

<a name="1219967"></a>

<a name="1222142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can't reproduce the problem with .bmx files and gtk though. e.g. I can open Samples\threads\threaded image downloader.bmx from the treeview with no issue... <br></div><br>Yes, it works from the treeview but try opening a bmx filename with spaces from the helpview (ie. via a hyperlink).<br><br>You'll need to find something other than the official help docs though as their bmx files don't have any spaces in them. You could install maxarc (from here <a href="http://www.blitzmax.com/logs/userlog.php?user=8652&amp;log=1737)" target="_blank">http://www.blitzmax.com/logs/userlog.php?user=8652&amp;log=1737)</a> or just edit a html link and file to test. <br><br></td></tr></table><br>
<a name="955572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay - the problem is actually with deleting a selected block of text.  No fix / fault yet, although I have discovered that GTK SetTextAreaText moves the cursor position when chars are added / removed (unlike other platforms), so vaguely possible this is the cause (but don't think so...) <br><br></td></tr></table><br>
<a name="955575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps it's best just to stick with FLTK for now, rather than spending all this time on GTK, which appears to be a tad on the sickly side of late...<br>... and considering it used to work rather well, I dunno where/when it went off the rails. A bit sad really.<br>I want to use a decent editor on Linux, but I hate the FLTK look'n'feel (that and the FLTK IDE runs so slowly it is unusable on my quad core box).<br>With each day, I think a wxIDE looks more and more interesting to me - of which I have a basic framework already. If only I had the time... *sigh* <br><br></td></tr></table><br>
<a name="955596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wouldn't say gtk is 'sickly' now after your latest fixes - I don't think any of these bugs are actually in the official brl maxide - overall I think gtk is stable and I'm happy with it. It's disappointing that maxide ce exposed these issues in the gtk mod but they do only seem to happen in maxide ce so they may not all be gtk's fault.. <br><br></td></tr></table><br>
<a name="955633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It's disappointing that maxide ce exposed these issues in the gtk mod but they do only seem to happen in maxide ce so they may not all be gtk's fault..  <br></div><br>Agreed - if anything, I'm using gtk as a "harsher test case" to prove everything works as it should and fix bugs that simply don't show up on my main platform (win32).  I too prefer the gtk look and feel, but am using the fltk version on linux as it works consistently with win32 (and presumably macos...although that's a bit of a leap of faith!).<br><br><div class="quote"> I wouldn't say gtk is 'sickly' now after your latest fixes <br></div><br>And I agree with this too - in the main it all works, it's just that there are a few things (missing or inconsistent events across platforms) that really could do with a little attention (and hopefully wouldn't take that much), and others that frankly can wait (or be left as known issues) as they can more safely be coded around (e.g. the latest gtk issue I posted on googlecode which is really rather obscure, and kind of exposes a slightly dodgy assumption).<br><br>I think the "problem" is that it works fine for simpler apps (which I class the original IDE as), but starts to struggle as it gets put to the test as things get more complex, exactly as the original win32maxgui did before Seb's great work on that front.  It isn't helped by the fact I have very little time to devote to CE IDE, and hence isn't necessarily the cleanest test case...<br><br><div class="quote"> With each day, I think a wxIDE looks more and more interesting to me <br></div><br>I half wondered about trying to wrap wxMaxGui myself, at least to a "bare minimum" level.  But then I decided that if anyone can do it, that'd be you Brucey, and as you feel it would be difficult, why should I feel any different... <br><br></td></tr></table><br>
<a name="955635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I half wondered about trying to wrap wxMaxGui myself <br></div><br>No. I'm not going to do that.<br>I'm thinking more on the lines of a fresh executable.<br><br>If you think about it there isn't too much to the IDE... mostly just an editor with the ability to run stuff.<br>wxMax has some nice features - MVC framework - scintilla - AUI (for pane layout)... which would in theory take away much of the nitty coding work. <br><br></td></tr></table><br>
<a name="955645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> No. I'm not going to do that. <br></div><br>I realise you're not, which is why I ruled out doing it myself.  If you're not up to / for it, I sure as hell aint! <br><br></td></tr></table><br>
<a name="955652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> Post for my benefit only:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' createtextarea.bmx

'Import MaxGui.Drivers
Import bah.gtkmaxgui

SuperStrict 

Local window:TGadget
Local textarea:TGadget

window=CreateWindow("My Window",130,20,200,200,,15|WINDOW_ACCEPTFILES)

textarea=CreateTextArea(0,0,ClientWidth(window),ClientHeight(window)/2,window)
SetGadgetFilter textarea,fk
SetGadgetLayout textarea,1,1,1,1
DebugLog "SETGADGETTEXT"
SetGadgetText textarea,"a textarea x gadget~none line~nandanother"
ActivateGadget textarea

DebugLog "FORMATTEXTAREATEXT"
FormatTextAreaText textarea,255,0,0,TEXTFORMAT_BOLD|TEXTFORMAT_ITALIC,1,1,TEXTAREA_LINES
DebugLog "SELECTTEXTAREATEXT"
SelectTextAreaText textarea,1,1,TEXTAREA_LINES
DebugLog "SETTEXTAREATEXT"
SetTextAreaText textarea,"testing",12,1

Print TextAreaCursor(textarea,TEXTAREA_LINES) 
Print TextAreaSelLen(textarea,TEXTAREA_LINES) 
DebugLog "~n------------~n"
'CreateTimer 1
While WaitEvent()
	Print "==&gt;"+CurrentEvent.ToString()+" "+EventSourceHandle()+" p="+TextAreaCursor(textarea)+" l="+TextAreaSelLen(textarea)
'	Print "Color="+GetTextAreaColor(textarea)
'	Local i:Int = GetTextAreaStyle(textarea)
'	Print "Bold="+(i&amp;CFM_BOLD)
'	Print "Italic="+(i&amp;CFM_ITALIC)
	Select EventID()
		Case EVENT_TIMERTICK
			DebugLog "SELECTTEXTAREATEXT"
			SelectTextAreaText textarea,1,1,TEXTAREA_LINES
			DebugLog "SETTEXTAREATEXT"
			SetTextAreaText textarea,"testing",12,1
		Case EVENT_WINDOWCLOSE
			End
		Case EVENT_APPTERMINATE
			End
	End Select
Wend

Function fk:Int(e:TEvent,c:Object)
	Print e.tostring()
	Return 1
End Function

?win32
Function GetTextAreaFormat:CHARFORMAT(textarea:TGadget)
	Local fmt:CHARFORMAT=New CHARFORMAT
	fmt.cbSize = SizeOf(fmt)
	Local i:Int=SendMessageW(textarea.query(QUERY_HWND),EM_GETCHARFORMAT,SCF_SELECTION,Int Byte Ptr fmt)
	Return fmt
End Function

Function GetTextAreaColor:Int(textarea:TGadget)
	Return GetTextAreaFormat(textarea).crTextColor
End Function

Function GetTextAreaStyle:Int(textarea:TGadget)
	Return GetTextAreaFormat(textarea).dwEffects
End Function

?
</textarea> <br><br></td></tr></table><br>
<a name="955658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gotcha!<br><br>The cause of weird undos on GTK is because unlike other platforms (win32/fltk), programmatic calls to SetTextAreaText and SelectTextAreaText are generating EVENT_GADGETSELECT and EVENT_GADGETACTION events.  Programmatic changes to the text in the gadget should NOT generate such events.  Updated code above demonstrates this.<br><br>(This breaks CE IDE because the undo is applied, then the events get processed, CE IDE thinks the user has typed something so creates a new Undo...so when you hit Ctrl-Z and it looks like nothings happened, it is replaying the Undo/"Typing" and ending up as is.  This also explains why Redo stops working - you've added a new Undo step, breaking the Redo path.)<br><br>Brucey, new issue about to be added to Google Code...that one was really bugging me!  Think I'll stop with the GTK attempts now... <br><br></td></tr></table><br>
<a name="955662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> programmatic calls to SetTextAreaText and SelectTextAreaText are generating EVENT_GADGETSELECT and EVENT_GADGETACTION events <br></div><br>Hmmm... I thought I'd made sure those kind of things weren't happening...<br>ho hum. <br><br></td></tr></table><br>
<a name="955663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hmmm... I thought I'd made sure those kind of things weren't happening... <br></div><br>LOL - Like I thought undo/redo was fixed, hence my determination to find the root cause of this and be 100% sure this was definitely gtkmaxgui, and not a flawed bit of my code that only broke badly on gtkmaxgui. <br><br></td></tr></table><br>
<a name="955749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark, your HTML thing with, as I suspected is down to gtk returning file:/// entries with %20 instead of space.  I think this is somewhat reasonable behaviour (even if it is inconsistent behaviour with other platforms), and have just added a replace "%20" with " " for file:/// urls to svn. <br><br></td></tr></table><br>
<a name="955799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Mark, works nicely now. I see brl maxide has the same solution in THelpPanel.OnEvent(). I don't really follow your undo/redo bug report but hopefully Brucey will understand.<br><br>I thought I'd recap on the gtk ce maxide bug list to get them all into one space.<br><br>Fixed:<br>- project manager-&gt;project properties window buttons activate on mouseover.<br>- IDE options window general tab not changing when you select another tab.<br>- links to .bmx files in the help view not opening [when filename contains space chars].<br>- no memory monitor window in debug mode<br>- IDE crashing after build (also in fltk)<br><br>Bugs:<br>- scrolling hotkey list in IDE options doesn't scroll<br>- trying to set a hotkey doesn't pickup keypresses in IDE options window<br>- undo/redo gets disabled in the editor view when selected text was deleted or otherwise removed.<br>- Find/Replace not finding/replacing text.<br>- Replace All hangs the ide.<br>- Find/Replace buttons deleting text in the textboxes.<br><br>And the gtk 'general' maxide bug list.<br><br>Fixed:<br>- slowdown issues with BlitzMax 1.32.<br>- hotkey/menu item support [broken in 1.32].<br>- menus not returning correct state.<br>- tabber not setting extra data. Modified listbox and combobox for same.<br><br>Bugs:<br>- The IDE output window doesn't refresh... but if you click on it, it will.<br>- If there is an error, the IDE error window isn't shown, and the tab isn't changed to show the correct page - unless you click on a tab. <br><br></td></tr></table><br>
<a name="955944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks mark - are the last two bugs in the official IDE with GTK *and* CE IDE, or just one of them?  <br><br>As it stands, I believe all of the CE IDE ones in the top list are due to GTK working slightly differently to fltk/win32.  I imagine the same will apply to the latter 2 if they apply to the official IDE too.<br><br>Also of note is that the buttons in the CE IDE Options window for picking font styles don't hold their values and picking a font generates an error (both caused by same issue as find/replace problem with TextFieldText and comboboxes).<br><br>version_history.html in CE IDE contains full list of gtk ce ide issues too which should match the above. <br><br></td></tr></table><br>
<a name="955961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ..are the last two bugs in the official IDE with GTK *and* CE IDE, or just one of them?  <br></div><br>Well, the 2 'general' bugs relate to both IDEs (technically they are the same bug) but it's actually worse in ce maxide as the output window doesn't update, even when you click on the tab (note that in brl maxide the output window does update when a built app starts and when it ends - so not an issue unless you're debugging).<br><br><div class="quote"> Also of note is that the buttons in the CE IDE Options window for picking font styles don't hold their values and picking a font generates an error (both caused by same issue as find/replace problem with TextFieldText and comboboxes). <br></div><br>Well, funny enough the combo-button styles hold their values in gtk but not in fltk. Also, I'm not getting any problems choosing a font in gtk or fltk. <br><br></td></tr></table><br>
<a name="955978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> okay, guess I'll take a closer look - I may actually have got mixed up between whether I was in gtk or fltk mode TBH, and as it was all around comboboxes, wrote it off as being related to the known gtk combobox issue.  will take a look now... <br><br></td></tr></table><br>
<a name="955979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> so many known gtk issues...  it's not even funny now :-p<br><br><br>I need to find some free time to look at a few of those issues.<br><br>*sigh* <br><br></td></tr></table><br>
<a name="955982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol - sorry brucey!  good news on the font stuff though, as it looks like this is an fltk only issue as mark says...<br><br>the font stuff is odd.  you're right that gtk works, and it's a problem with fltk.  it doesn't remember styles, although if you open ide options straight away when you *know* something is set, change one style or the font, then the pre-existing settings suddenly appear (i.e. all start=Normal incorrectly, then e.g. change remarks to bold and suddenly keywords show correctly as bold).  almost like the values have been set, but fltk didn't update the screen???  but then if you hit ok, it sets all to normal...so definitely an fltk oddity and gtk/win32 are okay!<br><br>the error on clicking the font button was in fltk and actually in my memcheck code - i was receiving an eventhook call with data &lt;&gt; tevent...which shouldn't happen!  added a check to make sure data is not null when i cast to a tevent, and all fine for me, so something strange happening there, but i can deal with adding this apparently unnecessary (but sensible) check.<br><br>(lower caps only as baby is asleep on 2nd arm and daren't move it!!!) <br><br></td></tr></table><br>
<a name="955983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> And just to add, my memory checking window listed above as not working in gtk has magically re-appeared in gtk over the past few days.  No idea what made that suddenly work again (possibly Brucey removing debugging eventhook??? can't see that being it tho'...).<br><br>Another known issue with fltk is that for me using ubuntu 8.10 through VirtualBox, I get a very flickery mouse cursor while over the official and CE IDEs in the fltk build.  I do not get this in the CE IDE when built with gtk (another plus to Brucey!). <br><br></td></tr></table><br>
<a name="956000"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> re: memory checking window. Confirmed the window now loads. I checked and it was due to adding a bbSystemPoll() to TGTKGuiSystemDriver in gtkgui.bmx line 35.<br><pre class=code>	Method Poll()
		While gtk_events_pending()
			gtk_main_iteration_do(False)
			bbSystemPoll()
		Wend
	End Method</pre><br>Anyone updated to v1.33 yet? I've still not got round to it.<br><br>Edit: also now the output window in ce maxide responds a bit more like brl maxide but sadly, now I'm getting the same 'ide crashing after build' bug that fltk has - so this is likely to be ce maxide's fault. It probably won't help but I'll list the trace anyway.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">*** glibc detected *** /home/mark/BlitzMax/src/maxide2/maxide: double free or corruption (fasttop): 0x0829c7d0 ***
======= Backtrace: =========
/lib/tls/i686/cmov/libc.so.6[0xb7668a85]
/lib/tls/i686/cmov/libc.so.6(cfree+0x90)[0xb766c4f0]
/home/mark/BlitzMax/src/maxide2/maxide[0x806c23f]
/home/mark/BlitzMax/src/maxide2/maxide[0x806c5e9]
/home/mark/BlitzMax/src/maxide2/maxide[0x80a85d1]
/home/mark/BlitzMax/src/maxide2/maxide[0x80b0d92]
/home/mark/BlitzMax/src/maxide2/maxide[0x80c2fe8]
/home/mark/BlitzMax/src/maxide2/maxide[0x80c30e4]
/home/mark/BlitzMax/src/maxide2/maxide[0x80c1427]
/home/mark/BlitzMax/src/maxide2/maxide[0x8083007]
/home/mark/BlitzMax/src/maxide2/maxide[0x80869ec]
/home/mark/BlitzMax/src/maxide2/maxide[0x8070db0]
/home/mark/BlitzMax/src/maxide2/maxide[0x80709d9]
/home/mark/BlitzMax/src/maxide2/maxide[0x80531f5]
/lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe0)[0xb7613450]
/home/mark/BlitzMax/src/maxide2/maxide[0x80530b1]
======= Memory map: ========
08048000-080da000 r-xp 00000000 08:02 103045     /home/mark/BlitzMax/src/maxide2/maxide
080da000-08133000 rwxp 00092000 08:02 103045     /home/mark/BlitzMax/src/maxide2/maxide
08133000-08c56000 rwxp 08133000 00:00 0          [heap]
b4a00000-b4a21000 rwxp b4a00000 00:00 0 
b4a21000-b4b00000 ---p b4a21000 00:00 0 
b4b34000-b4bdf000 r-xp 00000000 08:02 19756      /usr/share/icons/Tangerine/icon-theme.cache
b4bdf000-b4be0000 ---p b4bdf000 00:00 0 
b4be0000-b53e0000 rwxp b4be0000 00:00 0 
b53e0000-b53e4000 r-xp 00000000 08:02 9666       /usr/share/fonts/X11/100dpi/luRS12.pcf.gz
b53e4000-b53e5000 ---p b53e4000 00:00 0 
b53e5000-b5be5000 rwxp b53e5000 00:00 0 
b5be5000-b5bec000 r-xp 00000000 08:02 295928     /usr/lib/xulrunner/components/libpippki.so
b5bec000-b5bed000 rwxp 00006000 08:02 295928     /usr/lib/xulrunner/components/libpippki.so
b5bed000-b5c3f000 r-xp 00000000 08:02 295931     /usr/lib/xulrunner/components/libtransformiix.so
b5c3f000-b5c43000 rwxp 00052000 08:02 295931     /usr/lib/xulrunner/components/libtransformiix.so
b5c43000-b5c71000 r-xp 00000000 08:02 202627     /usr/lib/libhunspell-1.1.so.0.0.0
b5c71000-b5c75000 rwxp 0002e000 08:02 202627     /usr/lib/libhunspell-1.1.so.0.0.0
b5c75000-b5c7c000 r-xp 00000000 08:02 295921     /usr/lib/xulrunner/components/libautoconfig.so
b5c7c000-b5c7d000 rwxp 00006000 08:02 295921     /usr/lib/xulrunner/components/libautoconfig.so
b5c7d000-b5c84000 r-xp 00000000 08:02 295926     /usr/lib/xulrunner/components/libpipboot.so
b5c84000-b5c85000 rwxp 00006000 08:02 295926     /usr/lib/xulrunner/components/libpipboot.so
b5c85000-b5c89000 r-xp 00000000 08:02 295924     /usr/lib/xulrunner/components/libmyspell.so
b5c89000-b5c8a000 rwxp 00004000 08:02 295924     /usr/lib/xulrunner/components/libmyspell.so
b5c8a000-b5c8f000 r-xp 00000000 08:02 295934     /usr/lib/xulrunner/components/libxmlextras.so
b5c8f000-b5c90000 rwxp 00004000 08:02 295934     /usr/lib/xulrunner/components/libxmlextras.so
b5c90000-b5c95000 r-xp 00000000 08:02 295920     /usr/lib/xulrunner/components/libauth.so
b5c95000-b5c96000 rwxp 00004000 08:02 295920     /usr/lib/xulrunner/components/libauth.so
b5c96000-b5ca5000 r-xp 00000000 08:02 295929     /usr/lib/xulrunner/components/libspellchecker.so
b5ca5000-b5ca6000 rwxp 0000f000 08:02 295929     /usr/lib/xulrunner/components/libspellchecker.so
b5ca6000-b5d1a000 r-xp 00000000 08:02 295933     /usr/lib/xulrunner/components/libwebsrvcs.so
b5d1a000-b5d20000 rwxp 00074000 08:02 295933     /usr/lib/xulrunner/components/libwebsrvcs.so
b5d20000-b5d32000 r-xp 00000000 08:02 295932     /usr/lib/xulrunner/components/libuniversalchardet.so
b5d32000-b5d3c000 rwxp 00011000 08:02 295932     /usr/lib/xulrunner/components/libuniversalchardet.so
b5d3c000-b5d4f000 r-xp 00000000 08:02 203248     /usr/lib/libnssutil3.so.1d
b5d4f000-b5d52000 rwxp 00013000 08:02 203248     /usr/lib/libnssutil3.so.1d
b5d52000-b5e68000 r-xp 00000000 08:02 202336     /usr/lib/libnss3.so.1d
b5e68000-b5e6d000 rwxp 00116000 08:02 202336     /usr/lib/libnss3.so.1d
b5e6d000-b5e96000 r-xp 00000000 08:02 203250     /usr/lib/libssl3.so.1d
b5e96000-b5e98000 rwxp 00028000 08:02 203250     /usr/lib/libssl3.so.1d
b5e98000-b5ef4000 r-xp 00000000 08:02 295927     /usr/lib/xulrunner/components/libpipnss.so
b5ef4000-b5ef8000 rwxp 0005c000 08:02 295927     /usr/lib/xulrunner/components/libpipnss.so
b5ef8000-b5efa000 r-xp 00000000 08:02 233163     /usr/lib/gconv/UTF-16.so
b5efa000-b5efc000 rwxp 00001000 08:02 233163     /usr/lib/gconv/UTF-16.so
b5efc000-b5f00000 r-xp 00000000 08:02 29157      /usr/share/fonts/bitmaps/Blitz10.pcf
b5f00000-b6004000 rwxp b5f00000 00:00 0 
b6004000-b6095000 r-xp 00000000 08:02 10849      /usr/share/fonts/truetype/ttf-dejavu/DejaVuSans.ttf
b6095000-b60f5000 rwxs 00000000 00:09 3833870    /SYSV00000000 (deleted)
b60f5000-b6177000 rwxp b60f5000 00:00 0 
b6177000-b61e8000 r-xp 00000000 08:02 10751      /usr/share/fonts/truetype/freefont/FreeSans.ttf
b61e8000-b61ea000 r-xp 00000000 08:02 217823     /usr/lib/pango/1.6.0/modules/pango-basic-fc.so
b61ea000-b61eb000 rwxp 00001000 08:02 217823     /usr/lib/pango/1.6.0/modules/pango-basic-fc.so
b61eb000-b61f1000 r-xs 00000000 08:02 23730      /var/cache/fontconfig/945677eb7aeaf62f1d50efc3fb3ec7d8-x86.cache-2
b61f1000-b61f4000 r-xs 00000000 08:02 23727      /var/cache/fontconfig/e383d7ea5fbe662a33d9b44caf393297-x86.cache-2
b61f4000-b61f7000 r-xs 00000000 08:02 23726      /var/cache/fontconfig/a46337af8a0b4c9b317ad981ec3bdf87-x86.cache-2
b61f7000-b61f8000 r-xs 00000000 08:02 23725      /var/cache/fontconfig/c69f04ab05004e31a6d5e715764f16d8-x86.cache-2
b61f8000-b61f9000 r-xs 00000000 08:02 23724      /var/cache/fontconfig/4c73fe0c47614734b17d736dbde7580a-x86.cache-2
b61f9000-b61fc000 r-xs 00000000 08:02 23723      /var/cache/fontconfig/a755afe4a08bf5b97852ceb7400b47bc-x86.cache-2
b61fc000-b6203000 r-xs 00000000 08:02 23722      /var/cache/fontconfig/6d41288fd70b0be22e8c3a91e032eec0-x86.cache-2
b6203000-b6206000 r-xs 00000000 08:02 23721      /var/cache/fontconfig/de156ccd2eddbdc19d37a45b8b2aac9c-x86.cache-2
b6206000-b620e000 r-xs 00000000 08:02 23720      /var/cache/fontconfig/e3de0de479f42330eadf588a55fb5bf4-x86.cache-2
b620e000-b6216000 r-xs 00000000 08:02 23719      /var/cache/fontconfig/0f34bcd4b6ee430af32735b75db7f02b-x86.cache-2
b6216000-b6217000 r-xs 00000000 08:02 23718      /var/cache/fontconfig/4794a0821666d79190d59a36cb4f44b5-x86.cache-2
b6217000-b6239000 r-xs 00000000 08:02 23689      /var/cache/fontconfig/365b55f210c0a22e9a19e35191240f32-x86.cache-2
b6239000-b623c000 r-xs 00000000 08:02 23677      /var/cache/fontconfig/de9486f0b47a4d768a594cb4198cb1c6-x86.cache-2
b623c000-b6243000 r-xs 00000000 08:02 20132      /var/cache/fontconfig/d52a8644073d54c13679302ca1180695-x86.cache-2
b6243000-b6244000 r-xs 00000000 08:02 20121      /var/cache/fontconfig/1f901bd019c7d81ebf355e99936ff480-x86.cache-2
b6244000-b624a000 r-xs 00000000 08:02 20027      /var/cache/fontconfig/089dead882dea3570ffc31a9898cfb69-x86.cache-2
b624a000-b625a000 r-xs 00000000 08:02 19321      /var/cache/fontconfig/cabbd14511b9e8a55e92af97fb3a0461-x86.cache-2
b625a000-b6261000 r-xs 00000000 08:02 19320      /var/cache/fontconfig/e13b20fdb08344e0e664864cc2ede53d-x86.cache-2
b6261000-b62a1000 r-xs 00000000 08:02 16396      /var/cache/fontconfig/eeebfc908bd29a90773fd860017aada4-x86.cache-2
b62a1000-b62e1000 r-xs 00000000 08:02 16385      /var/cache/fontconfig/21a99156bb11811cef641abeda519a45-x86.cache-2
b62e4000-b6306000 r-xp 00000000 08:02 203249     /usr/lib/libsmime3.so.1d
b6306000-b6308000 rwxp 00022000 08:02 203249     /usr/lib/libsmime3.so.1d
b6308000-b630e000 r-xp 00000000 08:02 295923     /usr/lib/xulrunner/components/libfileview.so
b630e000-b630f000 rwxp 00005000 08:02 295923     /usr/lib/xulrunner/components/libfileview.so
b630f000-b6317000 r-xp 00000000 08:02 295922     /usr/lib/xulrunner/components/libcookie.so
b6317000-b6318000 rwxp 00007000 08:02 295922     /usr/lib/xulrunner/components/libcookie.so
b634a000-b634e000 r-xp 00000000 08:02 225466     /usr/lib/gtk-2.0/2.10.0/loaders/libpixbufloader-png.so
b634e000-b634f000 rwxp 00003000 08:02 225466     /usr/lib/gtk-2.0/2.10.0/loaders/libpixbufloader-png.so
b634f000-b6360000 r-xp 00000000 08:02 225189     /usr/lib/gtk-2.0/2.10.0/engines/libubuntulooks.so
b6360000-b6361000 rwxp 00011000 08:02 225189     /usr/lib/gtk-2.0/2.10.0/engines/libubuntulooks.so
b6361000-b636a000 r-xp 00000000 08:02 170027     /lib/tls/i686/cmov/libnss_files-2.7.so
b636a000-b636c000 rwxp 00008000 08:02 170027     /lib/tls/i686/cmov/libnss_files-2.7.so
b636c000-b6374000 r-xp 00000000 08:02 170031     /lib/tls/i686/cmov/libnss_nis-2.7.so
b6374000-b6376000 rwxp 00007000 08:02 170031     /lib/tls/i686/cmov/libnss_nis-2.7.so
b6376000-b638a000 r-xp 00000000 08:02 170021     /lib/tls/i686/cmov/libnsl-2.7.so
b638a000-b638c000 rwxp 00013000 08:02 170021     /lib/tls/i686/cmov/libnsl-2.7.so
b638c000-b638e000 rwxp b638c000 00:00 0 
b638e000-b6395000 r-xp 00000000 08:02 170023     /lib/tls/i686/cmov/libnss_compat-2.7.so
b6395000-b6397000 rwxp 00006000 08:02 170023     /lib/tls/i686/cmov/libnss_compat-2.7.so
b6399000-b639b000 r-xp 00000000 08:02 295935     /usr/lib/xulrunner/components/libxulutil.so
b639b000-b639c000 rwxp 00001000 08:02 295935     /usr/lib/xulrunner/components/libxulutil.so
b639c000-b63a1000 r-xp 00000000 08:02 295930     /usr/lib/xulrunner/components/libsystem-pref.so
b63a1000-b63a2000 rwxp 00004000 08:02 295930     /usr/lib/xulrunner/components/libsystem-pref.so
b63a2000-b63a5000 r-xp 00000000 08:02 295925     /usr/lib/xulrunner/components/libpermissions.so
b63a5000-b63a6000 rwxp 00002000 08:02 295925     /usr/lib/xulrunner/components/libpermissions.so
b63a6000-b63a7000 r-xs 00000000 08:02 19324      /var/cache/fontconfig/f184a83c0cfc943e3053b97b80e67444-x86.cache-2
b63a7000-b63e6000 r-xp 00000000 08:02 225635     /usr/lib/locale/en_IE.utf8/LC_CTYPE
b63e6000-b63e7000 r-xp 00000000 08:02 225640     /usr/lib/locale/en_IE.utf8/LC_NUMERIC
b63e7000-b64c8000 r-xp 00000000 08:02 225634     /usr/lib/locale/en_IE.utf8/LC_COLLATE
b64c8000-b64cb000 rwxp b64c8000 00:00 0 
b64cb000-b64d2000 r-xp 00000000 08:02 170040     /lib/tls/i686/cmov/librt-2.7.so
b64d2000-b64d4000 rwxp 00006000 08:02 170040     /lib/tls/i686/cmov/librt-2.7.so
b64d4000-b64d5000 rwxp b64d4000 00:00 0 
b64d5000-b64ea000 r-xp 00000000 08:02 202092     /usr/lib/libICE.so.6.3.0
b64ea000-b64eb000 rwxp 00014000 08:02 202092     /usr/lib/libICE.so.6.3.0
b64eb000-b64ed000 rwxp b64eb000 00:00 0 
b64ed000-b64f4000 r-xp 00000000 08:02 202116     /usr/lib/libSM.so.6.0.0
b64f4000-b64f5000 rwxp 00006000 08:02 202116     /usr/lib/libSM.so.6.0.0
b64f5000-b64f9000 r-xp 00000000 08:02 206988     /usr/lib/libgthread-2.0.so.0.1600.4
b64f9000-b64fa000 rwxp 00003000 08:02 206988     /usr/lib/libgthread-2.0.so.0.1600.4
b64fa000-b6547000 r-xp 00000000 08:02 202169     /usr/lib/libXt.so.6.0.0
b6547000-b654b000 rwxp 0004c000 08:02 202169     /usr/lib/libXt.so.6.0.0
b654b000-b654c000 rwxp b654b000 00:00 0 
b654c000-b655d000 r-xp 00000000 08:02 202149     /usr/lib/libXft.so.2.1.2
b655d000-b655e000 rwxp 00010000 08:02 202149     /usr/lib/libXft.so.2.1.2
b655e000-b6606000 r-xp 00000000 08:02 207363     /usr/lib/libmozjs.so.0d
b6606000-b660b000 rwxp 000a8000 08:02 207363     /usr/lib/libmozjs.so.0d
b660b000-b662a000 r-xp 00000000 08:02 202658     /usr/lib/libjpeg.so.62.0.0
b662a000-b662b000 rwxp 0001e000 08:02 202658     /usr/lib/libjpeg.so.62.0.0
b662b000-b664a000 r-xp 00000000 08:02 202365     /usr/lib/libexpat.so.1.5.2
b664a000-b664c000 rwxp 0001e000 08:02 202365     /usr/lib/libexpat.so.1.5.2
b664c000-b6674000 r-xp 00000000 08:02 202797     /usr/lib/libpixman-1.so.0.10.0
b6674000-b6675000 rwxp 00027000 08:02 202797     /usr/lib/libpixman-1.so.0.10.0
b6675000-b6676000 rwxp b6675000 00:00 0 
b6676000-b6698000 r-xp 00000000 08:02 202801     /usr/lib/libpng12.so.0.15.0
b6698000-b6699000 rwxp 00022000 08:02 202801     /usr/lib/libpng12.so.0.15.0
b6699000-b66ad000 r-xp 00000000 08:02 202981     /usr/lib/libz.so.1.2.3.3
b66ad000-b66ae000 rwxp 00013000 08:02 202981     /usr/lib/libz.so.1.2.3.3
b66ae000-b6718000 r-xp 00000000 08:02 206962     /usr/lib/libfreetype.so.6.3.16
b6718000-b671b000 rwxp 0006a000 08:02 206962     /usr/lib/libfreetype.so.6.3.16
b671b000-b6741000 r-xp 00000000 08:02 207029     /usr/lib/libpangoft2-1.0.so.0.2002.3
b6741000-b6742000 rwxp 00026000 08:02 207029     /usr/lib/libpangoft2-1.0.so.0.2002.3
b6742000-b6746000 r-xp 00000000 08:02 202139     /usr/lib/libXdmcp.so.6.0.0
b6746000-b6747000 rwxp 00003000 08:02 202139     /usr/lib/libXdmcp.so.6.0.0
b6747000-b6748000 rwxp b6747000 00:00 0 
b6748000-b674a000 r-xp 00000000 08:02 202128     /usr/lib/libXau.so.6.0.0
b674a000-b674b000 rwxp 00001000 08:02 202128     /usr/lib/libXau.so.6.0.0
b674b000-b6754000 r-xp 00000000 08:02 202325     /usr/lib/libdrm.so.2.3.0
b6754000-b6755000 rwxp 00008000 08:02 202325     /usr/lib/libdrm.so.2.3.0
b6755000-b683d000 r-xp 00000000 08:02 202906     /usr/lib/libstdc++.so.6.0.9
b683d000-b6840000 r-xp 000e8000 08:02 202906     /usr/lib/libstdc++.so.6.0.9
b6840000-b6842000 rwxp 000eb000 08:02 202906     /usr/lib/libstdc++.so.6.0.9
b6842000-b6848000 rwxp b6842000 00:00 0 
b6848000-b6878000 r-xp 00000000 08:02 201232     /usr/lib/libnspr4.so.0d
b6878000-b6879000 rwxp 00030000 08:02 201232     /usr/lib/libnspr4.so.0d
b6879000-b687b000 rwxp b6879000 00:00 0 
b687b000-b687e000 r-xp 00000000 08:02 201656     /usr/lib/libplc4.so.0d
b687e000-b687f000 rwxp 00002000 08:02 201656     /usr/lib/libplc4.so.0d
b687f000-b6880000 rwxp b687f000 00:00 0 
b6880000-b6882000 r-xp 00000000 08:02 201657     /usr/lib/libplds4.so.0d
b6882000-b6883000 rwxp 00001000 08:02 201657     /usr/lib/libplds4.so.0d
b6883000-b73fe000 r-xp 00000000 08:02 207685     /usr/lib/libxul.so.0d
b73fe000-b74aa000 rwxp 00b7b000 08:02 207685     /usr/lib/libxul.so.0d
b74aa000-b74b4000 rwxp b74aa000 00:00 0 
b74b4000-b74bc000 r-xp 00000000 08:02 202135     /usr/lib/libXcursor.so.1.0.2
b74bc000-b74bd000 rwxp 00007000 08:02 202135     /usr/lib/libXcursor.so.1.0.2
b74bd000-b74c2000 r-xp 00000000 08:02 202163     /usr/lib/libXrandr.so.2.1.0
b74c2000-b74c3000 rwxp 00005000 08:02 202163     /usr/lib/libXrandr.so.2.1.0
b74c3000-b74ca000 r-xp 00000000 08:02 202151     /usr/lib/libXi.so.6.0.0
b74ca000-b74cb000 rwxp 00006000 08:02 202151     /usr/lib/libXi.so.6.0.0
b74cb000-b74cc000 rwxp b74cb000 00:00 0 
b74cc000-b74ce000 r-xp 00000000 08:02 202153     /usr/lib/libXinerama.so.1.0.0
b74ce000-b74cf000 rwxp 00001000 08:02 202153     /usr/lib/libXinerama.so.1.0.0
b74cf000-b74d6000 r-xp 00000000 08:02 202165     /usr/lib/libXrender.so.1.3.0
b74d6000-b74d7000 rwxp 00007000 08:02 202165     /usr/lib/libXrender.so.1.3.0
b74d7000-b74e4000 r-xp 00000000 08:02 202143     /usr/lib/libXext.so.6.4.0
b74e4000-b74e5000 rwxp 0000d000 08:02 202143     /usr/lib/libXext.so.6.4.0
b74e5000-b750e000 r-xp 00000000 08:02 202373     /usr/lib/libfontconfig.so.1.3.0
b750e000-b750f000 rwxp 00029000 08:02 202373     /usr/lib/libfontconfig.so.1.3.0
b750f000-b756f000 r-xp 00000000 08:02 201679     /usr/lib/libcairo.so.2.17.3
b756f000-b7571000 rwxp 0005f000 08:02 201679     /usr/lib/libcairo.so.2.17.3
b7571000-b7575000 r-xp 00000000 08:02 202145     /usr/lib/libXfixes.so.3.1.0
b7575000-b7576000 rwxp 00003000 08:02 202145     /usr/lib/libXfixes.so.3.1.0
b7576000-b7577000 rwxp b7576000 00:00 0 
b7577000-b7579000 r-xp 00000000 08:02 202137     /usr/lib/libXdamage.so.1.1.0
b7579000-b757a000 rwxp 00001000 08:02 202137     /usr/lib/libXdamage.so.1.1.0
b757a000-b757c000 r-xp 00000000 08:02 202133     /usr/lib/libXcomposite.so.1.0.0
b757c000-b757d000 rwxp 00001000 08:02 202133     /usr/lib/libXcomposite.so.1.0.0
b757d000-b7585000 r-xp 00000000 08:02 207028     /usr/lib/libpangocairo-1.0.so.0.2002.3
b7585000-b7586000 rwxp 00008000 08:02 207028     /usr/lib/libpangocairo-1.0.so.0.2002.3
b7586000-b759d000 r-xp 00000000 08:02 152733     /lib/libselinux.so.1
b759d000-b759f000 rwxp 00016000 08:02 152733     /lib/libselinux.so.1
b759f000-b75c5000 r-xp 00000000 08:02 202787     /usr/lib/libpcre.so.3.12.1
b75c5000-b75c6000 rwxp 00026000 08:02 202787     /usr/lib/libpcre.so.3.12.1
b75c6000-b75c7000 rwxp b75c6000 00:00 0 
b75c7000-b75c9000 r-xp 00000000 08:02 170016     /lib/tls/i686/cmov/libdl-2.7.so
b75c9000-b75cb000 rwxp 00001000 08:02 170016     /lib/tls/i686/cmov/libdl-2.7.so
b75cb000-b75e2000 r-xp 00000000 08:02 202969     /usr/lib/libxcb.so.1.0.0
b75e2000-b75e3000 rwxp 00016000 08:02 202969     /usr/lib/libxcb.so.1.0.0
b75e3000-b75e4000 r-xp 00000000 08:02 202967     /usr/lib/libxcb-xlib.so.0.0.0
b75e4000-b75e5000 rwxp 00000000 08:02 202967     /usr/lib/libxcb-xlib.so.0.0.0
b75e5000-b75fc000 r-xp 00000000 08:02 202496     /usr/lib/libgdk_pixbuf-2.0.so.0.1200.9
b75fc000-b75fd000 rwxp 00016000 08:02 202496     /usr/lib/libgdk_pixbuf-2.0.so.0.1200.9
b75fd000-b7746000 r-xp 00000000 08:02 170010     /lib/tls/i686/cmov/libc-2.7.so
b7746000-b7747000 r-xp 00149000 08:02 170010     /lib/tls/i686/cmov/libc-2.7.so
b7747000-b7749000 rwxp 0014a000 08:02 170010     /lib/tls/i686/cmov/libc-2.7.so
b7749000-b774d000 rwxp b7749000 00:00 0 
b774d000-b7761000 r-xp 00000000 08:02 170036     /lib/tls/i686/cmov/libpthread-2.7.so
b7761000-b7763000 rwxp 00013000 08:02 170036     /lib/tls/i686/cmov/libpthread-2.7.so
b7763000-b7765000 rwxp b7763000 00:00 0 
b7765000-b776f000 r-xp 00000000 08:02 152672     /lib/libgcc_s.so.1
b776f000-b7770000 rwxp 0000a000 08:02 152672     /lib/libgcc_s.so.1
b7770000-b7793000 r-xp 00000000 08:02 170018     /lib/tls/i686/cmov/libm-2.7.so
b7793000-b7795000 rwxp 00023000 08:02 170018     /lib/tls/i686/cmov/libm-2.7.so
b7795000-b7845000 r-xp 00000000 08:02 206758     /usr/lib/libstdc++.so.5.0.7
b7845000-b784a000 rwxp 000af000 08:02 206758     /usr/lib/libstdc++.so.5.0.7
b784a000-b784f000 rwxp b784a000 00:00 0 
b784f000-b7853000 r-xp 00000000 08:02 202179     /usr/lib/libXxf86vm.so.1.0.0
b7853000-b7854000 rwxp 00003000 08:02 202179     /usr/lib/libXxf86vm.so.1.0.0
b7854000-b78d6000 r-xp 00000000 08:02 202085     /usr/lib/libGLU.so.1.3.070002
b78d6000-b78d7000 rwxp 00081000 08:02 202085     /usr/lib/libGLU.so.1.3.070002
b78d7000-b78d8000 rwxp b78d7000 00:00 0 
b78d8000-b7933000 r-xp 00000000 08:02 202081     /usr/lib/libGL.so.1.2
b7933000-b7939000 rwxp 0005b000 08:02 202081     /usr/lib/libGL.so.1.2
b7939000-b793a000 rwxp b7939000 00:00 0 
b793a000-b793c000 r-xp 00000000 08:02 207686     /usr/lib/libxpcom.so.0d
b793c000-b793d000 rwxp 00002000 08:02 207686     /usr/lib/libxpcom.so.0d
b793d000-b7950000 r-xp 00000000 08:02 207688     /usr/lib/libgtkembedmoz.so.0d
b7950000-b7952000 rwxp 00012000 08:02 207688     /usr/lib/libgtkembedmoz.so.0d
b7952000-b7955000 r-xp 00000000 08:02 206986     /usr/lib/libgmodule-2.0.so.0.1600.4
b7955000-b7956000 rwxp 00002000 08:02 206986     /usr/lib/libgmodule-2.0.so.0.1600.4
b7956000-b7991000 r-xp 00000000 08:02 206987     /usr/lib/libgobject-2.0.so.0.1600.4
b7991000-b7992000 rwxp 0003b000 08:02 206987     /usr/lib/libgobject-2.0.so.0.1600.4
b7992000-b79cd000 r-xp 00000000 08:02 203220     /usr/lib/libpango-1.0.so.0.2002.3
b79cd000-b79cf000 rwxp 0003a000 08:02 203220     /usr/lib/libpango-1.0.so.0.2002.3
b79cf000-b79d0000 rwxp b79cf000 00:00 0 
b79d0000-b79da000 r-xp 00000000 08:02 207030     /usr/lib/libpangox-1.0.so.0.2002.3
b79da000-b79db000 rwxp 00009000 08:02 207030     /usr/lib/libpangox-1.0.so.0.2002.3
b79db000-b79f3000 r-xp 00000000 08:02 202206     /usr/lib/libatk-1.0.so.0.2209.1
b79f3000-b79f5000 rwxp 00018000 08:02 202206     /usr/lib/libatk-1.0.so.0.2209.1
b79f5000-b7a76000 r-xp 00000000 08:02 202495     /usr/lib/libgdk-x11-2.0.so.0.1200.9
b7a76000-b7a79000 rwxp 00080000 08:02 202495     /usr/lib/libgdk-x11-2.0.so.0.1200.9
b7a79000-b7de9000 r-xp 00000000 08:02 202572     /usr/lib/libgtk-x11-2.0.so.0.1200.9
b7de9000-b7def000 rwxp 00370000 08:02 202572     /usr/lib/libgtk-x11-2.0.so.0.1200.9
b7def000-b7df0000 rwxp b7def000 00:00 0 
b7df0000-b7ea0000 r-xp 00000000 08:02 206985     /usr/lib/libglib-2.0.so.0.1600.4
b7ea0000-b7ea1000 rwxp 000b0000 08:02 206985     /usr/lib/libglib-2.0.so.0.1600.4
b7ea1000-b7f85000 r-xp 00000000 08:02 202122     /usr/lib/libX11.so.6.2.0
b7f85000-b7f88000 rwxp 000e4000 08:02 202122     /usr/lib/libX11.so.6.2.0
b7f88000-b7f89000 rwxp b7f88000 00:00 0 
b7f89000-b7f8a000 r-xp 00000000 08:02 225643     /usr/lib/locale/en_IE.utf8/LC_TIME
b7f8a000-b7f8b000 r-xp 00000000 08:02 225638     /usr/lib/locale/en_IE.utf8/LC_MONETARY
b7f8b000-b7f8c000 r-xp 00000000 08:02 225644     /usr/lib/locale/en_IE.utf8/LC_MESSAGES/SYS_LC_MESSAGES
b7f8c000-b7f8d000 r-xp 00000000 08:02 225641     /usr/lib/locale/en_IE.utf8/LC_PAPER
b7f8d000-b7f8e000 r-xp 00000000 08:02 225639     /usr/lib/locale/en_IE.utf8/LC_NAME
b7f8e000-b7f8f000 r-xp 00000000 08:02 225633     /usr/lib/locale/en_IE.utf8/LC_ADDRESS
b7f8f000-b7f90000 r-xp 00000000 08:02 225642     /usr/lib/locale/en_IE.utf8/LC_TELEPHONE
b7f90000-b7f91000 r-xp 00000000 08:02 225637     /usr/lib/locale/en_IE.utf8/LC_MEASUREMENT
b7f91000-b7f98000 r-xs 00000000 08:02 233168     /usr/lib/gconv/gconv-modules.cache
b7f98000-b7f99000 r-xp 00000000 08:02 225636     /usr/lib/locale/en_IE.utf8/LC_IDENTIFICATION
b7f99000-b7f9a000 rwxp b7f99000 00:00 0 
b7f9a000-b7f9b000 r-xp b7f9a000 00:00 0          [vdso]
b7f9b000-b7fb5000 r-xp 00000000 08:02 152627     /lib/ld-2.7.so
b7fb5000-b7fb7000 rwxp 00019000 08:02 152627     /lib/ld-2.7.so
bfbf2000-bfc07000 rwxp bffeb000 00:00 0          [stack]
Aborted</textarea> <br><br></td></tr></table><br>
<a name="956041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> oooo... Double free :-)<br><br>Someone is being naughty and trying to release the same thing twice...<br><br>Sounds very familiar, doesn't it? ;-) <br><br></td></tr></table><br>
<a name="956133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> LOL - will take a look, but I suspect it's exactly the same issue with treeviewnodes when it builds the helpdocs.  When you're getting the crash, it is probably changing the debug tree, so I imagine it's probably freeing up at least some of the nodes twice.  Hopefully when I return to that code shortly I will encapsulate the free in one single place and make 100% sure it can;t be called more than once...<br><br>And no, I haven't moved to 1.33 on linux yet, just windows. <br><br></td></tr></table><br>
<a name="956259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay - spent a bit of time looking at datanodes/treeview nodes, and decided that the most likely cause was that I was freeing a treeview gadget higher up the tree first, then explicitly attempting to free the children...which of course would already be implicitly free'd because their parent has vanished.  This would explain why all my attempts to null out references to nodes with each free and check not null wouldn't help, and head-scratching before around being confident I only ever free'd each node once...<br><br>And true enough, I did find that I was freeing the gui elements *before* freeing the child nodes.  So I have swapped that round and everything seems to still be working...<br><br>...but it hasn't fixed the debugger problem.  To be honest, I haven't checked it really has fixed the treeview double free, as that wasn't causing errors following Brucey's tweaks.  But I reckon it "probably" does fix that double free, or at least most of them...<br><br>So I think the debugger problem is something else...but what?  Running in debug mode gives no clue - it just bombs out.  Will need to add loads of debugstops and try to pin it down.  I'm kind of thinking it's most likely to be to do with process handles, etc, as not much happens IDE wise when an app ends.<br><br>*sigh* <br><br></td></tr></table><br>
<a name="956260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> Weirdness.<br><br>Quick debugstop and stepping through, and process termination seems to be handled fine - all code runs and the app goes back to polling for events.  It then receives a timer event (the one that ensures the output window gets updated), and stops the timer, and goes back to polling...then it barfs in the middle of polling for the next event???<br><br>Maybe StopTimer is buggered? <br><br></td></tr></table><br>
<a name="956262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup, comment out the StopTimer, and it works perfectly.  Would explain why official IDE doesn't crash as I think it's timer is left running throughout (I try to be kind on events).<br><br>So probably an underlying BlitzMax Timer/StopTimer issue on Linux...which wouldn't be unsurprising as Timers were rejigged on Linux recently.  No time right now to look into this any further, but must be a simple app I can create to prove this... <br><br></td></tr></table><br>
<a name="956271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work. Confirmed that commenting out StopTimer from TGUIOutput.Poll() in debug.bmx lines 210+211 stops the ide from crashing after a build - and it works in both gtk and fltk. Strange how it was a timer issue.<br><br>Unfortunately, I'm still getting a message/notify window with an information icon at the point it was crashing at, which has me baffled.<br><br><div class="quote"> COMMAND::/home/mark/BlitzMax/bin/bmk makeapp -r -t gui -a /home/mark/BlitzMax/maxarc/createtextarea.bmx^M<br>/usr/bin/ld: warning: libstdc++.so.6, needed by /usr/lib/libGLU.so, may conflict with libstdc++.so.5 <br></div><br>Anyway, fltk ce maxide is basically useable now. :)<br><br>Edit: hmm, I see in the docs it says once stopped a timer can't be used. So shouldn't you use WaitTimer to pause? <br><br></td></tr></table><br>
<a name="956274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> that's just a warning isn't it?  Standard stuff, albeit that it should just go in the output window.  I've had the official ide show me odd messages too though, so wonder if that's a generic problem.<br><br>I can reproduce the Timer issue *intermittently* using the below.  Sometimes it blows up, sometimes it doesn't.  My suspicion is that WaitEvent is internally receiving an EVENT_TIMERTICK, then trying to process it against a timer it no longer knows about (as StopTimer has released it).  It's certainly true that an extra timer tick event is received after StopTimer.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">timer=CreateTimer(20)
Print "pausing a moment"
Delay 500
Print "about to stop 1"
StopTimer(timer)
'Print "about to stop 2"
'StopTimer(timer)
Print "stopped"
Local i:Int
Repeat
	Print "before waitevent"
	WaitEvent()
	Print "after waitevent"
	If EventID()=EVENT_TIMERTICK Then
		Print "handling timertick"
		i:+1
		If i&gt;20 Then Delay 1000; StopTimer(timer);timer=Null
	EndIf
	Print "count="+i
Forever</textarea> <br><br></td></tr></table><br>
<a name="956333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Edit: hmm, I see in the docs it says once stopped a timer can't be used. So shouldn't you use WaitTimer to pause? <br></div><br>I'm not pausing the timer, I am killing it as I don't want to receive it's events any more.  Setting the ref to the timer to null doesn;t do this, and StopTimer is the only way of actually completely stopping the timer from firing events after you have finished with it.<br><br>I could just have the timer running all the time, and always check the event every 1/10th second like the official IDE...but I prefer to only do that when I need to, i.e. while a compiled app is running. <br><br></td></tr></table><br>
<a name="956351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> Workaround committed to svn : on linux, I no longer attempt to stop the timer, just leave it running and reuse it on next run. <br><br></td></tr></table><br>
<a name="956354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> The timer stuff on Linux is very strange.<br>It caches ticks on a stack which are uncached when you poll the system.<br><br>Therefore you either need to :<br><br>1) poll often (like you would do in your game loop<br><br>2) attached yourself to the FD pipe and react to data appearing on it - which is also written on each tick.<br><br>The FLTK module does 2, and processes events via a callback trigger.<br>I guess the GTK one would need to do the same kind of thing: see here for all the gory details - <br><a href="http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#g-source-add-poll" target="_blank">http://library.gnome.org/devel/glib/unstable/glib-The-Main-Event-Loop.html#g-source-add-poll</a><br><br>In some ways the old way (where it raised 1000 ALRMs per second, was better - but obviously it broke other things by doing that (like, OpenURL for example) <br><br></td></tr></table><br>
<a name="956359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> I kind of assumed this was 'max issue, rather tan an fltk/gtk maxgui issue - my example doesn't include maxgui, and your response in the bug report thread makes sense.  I suspect "all" that is really needed is for StopTimer to completely flush the event queue of any timer ticks...although as you've said no idea how that works internally!  <br><br>The workaround of keeping hold of the timer and not trying to be friendly and give it up seems to do the job for me for now though, so I'll let someone else worry about fixing up blitzmax StopTimer... <br><br></td></tr></table><br>
<a name="956369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, if you want to have a rummage :<br><br>system.linux.c<br><br>most notably, postAsyncOp() and bbSystemFlushAsyncOps().<br>bbSystemStartAsyncOp() - at the bottom of the file - is where it kicks it all off.<br><br>The struct AsyncOp is a linked list - the "stack" of ticks.<br><br>This section actually reminds me of how FFMPEG decodes frames in a separate thread, so I guess it's pretty standard stuff.<br>But notice that the actual timer stuff is not here - that's separate. So.. I dunno.<br><br>You wanna ask the experts :-) <br><br></td></tr></table><br>
<a name="956373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You wanna ask the experts :-) <br></div><br>Or work around it.  ;-) <br><br></td></tr></table><br>
<a name="956393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> So it wasn't ce maxide's fault then?! Apologies for that and thanks for the workaround.<br><br><div class="quote"> that's just a warning isn't it? Standard stuff, albeit that it should just go in the output window. I've had the official ide show me odd messages too though, so wonder if that's a generic problem. <br></div><br>No, I'm pretty sure it's not normal for that to appear.. but I'm pretty chuffed there is now a stable linux ce maxide so I won't whine about such a small issue. <br><br></td></tr></table><br>
<a name="957421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> And that's the fltk issue in IDE options proven to be a bug in FLTKmaxgui...<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=84726" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=84726</a> <br><br></td></tr></table><br>
<a name="957523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, thanks again Mark.<br><br>I had a go at that one myself but couldn't follow it. I did notice that ok resets the combo items but cancel leaves them alone, and also that sometimes a combo would reset another combo but that's as far as I got. <br><br></td></tr></table><br>
<a name="957527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, the cause in CE IDE is that "OK" re-applies the settings (obviously), which includes applying the language settings.  The way the language localisation works, all maxgui commands that take text are over-ridden in locale/language.bmx, and it runs through every single gadget ever created and applies the new laguage settings...which for a combobox means a call to ModifyGadgetItem, which on fltk causes the selection to be lost!  I have actually added some code around ModifyGadgetItem inside language.bmx to store the selected item and restore after ModifyGadgetItem to (again) workaround the maxgui issue for now.<br><br>But it did take a little while and much head-scratching!<br><br>Next up, why does the keyword highlighting seem "sticky" as you type, and why is it over-aggresive on capitalising keywords (e.g. type MODIFIER = ModIFIER).  Pretty sure both are down to a stray +1 or -1 mistake that kicks things in too early... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
