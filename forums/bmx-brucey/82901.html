<!DOCTYPE html><html lang="en" ><head ><title >RakNet</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >RakNet</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >RakNet</a><br><br>
<a name="935482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're going to hate me even more. Brucey, you mentioned you had wrapped RakNet a while back....<br><br>I'm not sure if anyone else is still using jimons wrapper of RakNet (requires no .dll) aside from myself, but that was back during v 3.2, and there has been a fair amount of updates since then to RakNet itself.<br><br>His wrapper has been stable enough to use live, but there are plenty of features missing, or not working that would be a nice plus to have.<br><br>I made a miserable attempt to update the wrapper to the latest version, but the whole memory override with raknet overpowered me as it seems to have changed a lot. Unfortunately, that leads me to bug you again =(<br><br>Any hopes of adding the mod to the svn? It seriously has to be the one of the greatest network libs in existence, and i'm sure more than myself could get a lot of use from the updated version. <br><br></td></tr></table><br>
<a name="935567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's not working? <br><br></td></tr></table><br>
<a name="935618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Security functions seem glitched, rakvoice wasn't included, and many other functions that were left out. On the bare minimum of it, it has the highest priority of features (bitstream being the main)...it's just missing a few 'extras' that would be nice, along with lacking some bug fixes from the updated versions.<br><br>It would have been easier for me to impliment the rest of the functions in 3.2, but i'm unable to find the rest of raknet source for that version, and it seems like it would be backtracking to update an older version of a library. <br><br></td></tr></table><br>
<a name="935699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ive stayed with v3.32 of jimons wrapper but had to add a few functions to get it to work exactly as I wanted. (if you want 3.32 src rtime I can upload a copy np)<br><br>I  found that the statistics side of things didnt seem to work correctly but I skipped past it as I didnt really need it (along with RakVoice)<br><br>One major lacking function I had to add was<br><br>const char* GetIPAddressFromIndex( int index );<br><br>All in all its a nice wrapper but IM with reTimer, its a shame its not been updated (Raknet is constantly being updated) <br><br></td></tr></table><br>
<a name="935700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> My API ain't flat like jimons.... (as you'd expect, I suppose?) <br><br></td></tr></table><br>
<a name="935703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> const char* GetIPAddressFromIndex( int index ); <br></div><br><br>Yeah haha, I went ahead and came up with this for getting remote ips with a simplified wrap of jimons wrap I made called EasyRak. Nothing needed to be done to jimons source. Been a while since I made the module and had to use the function, but I think this is what I used:<br><br><pre class=code>
Method GetRemoteIp:String(Index:Int) 
	Return EasyRak_DotIP(RN_SystemAddressGetBinaryAddress(RN_GetSystemAddressFromIndex(Self.Interface, Index))) 
End Method

Function EasyRak_DotIP:String(IP:Int) 
	Return (ip &amp; 255) + "." + (ip Shr 8 &amp; 255) + "." + (ip Shr 16 &amp; 255) + "." + (ip Shr 24) 
End Function
</pre><br><br>I also forgot to mention about the statistics, thanks for mentioning that.<br><br>And if you could, I would really appreciate a link to that 3.2 source as I think Bruceys plate is too full or has other foods for thought at the moment. I'm unsure why there isn't older versions provided on the rak website =/ <br><br></td></tr></table><br>
<a name="935707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, I've been fighting this line of late :<br><pre class=code>
rakPeer1.InitializeSecurity(Null, Null, p, q)
</pre><br>The bugger locks up inside of Raknet... <br><br></td></tr></table><br>
<a name="935719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The bugger locks up inside of Raknet...  <br></div><br>So, I've found a bug in Raknet... I've fixed it, but I can't say I'm impressed... given that I've wasted a few hours of my life debugging RCACrypt..  joys :-p <br><br></td></tr></table><br>
<a name="935728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It seriously has to be the one of the greatest network libs in existence <br></div><br>I'm not so sure :-p<br><br>I rewrote my own code 3 times before attacking RakNet for the problem... I am at this moment, not filled with optimism towards some of the other parts of the API I've still to venture upon... <br><br></td></tr></table><br>
<a name="935735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm not so sure :-p <br></div><br><br><br>I understand where you're coming from with the actual source though..between updates of raknet, there's a lot of undocumented and screwy transitions I noticed comparing the limited source I have between 3.2 and the new 3.3.x. <br>It's nothing short of a challenge, and if you want to focus on other things that's totally cool. When I ask for assistance, I feel like an ass because I don't get this tier of help from paid customer support.<br><br>I thought maybe you had already done a complete wrap of it, and was just asking if you could publish it, but if there's too much work to be done with it, no worries.<br><br>I may be wrong anyhow...I figured there was more people out there looking for a better/easier library to work with for online games/apps, but it appears there's only a couple of us with high hopes. <br><br></td></tr></table><br>
<a name="935779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I thought maybe you had already done a complete wrap <br></div><br>Just a "most" wrap, since I hadn't intended using things like the RSA functionality ;-)<br><br>Currently I'm just going through and porting those samples, and tweaking my code as I go... (which would be now much more complete were I not <a href="http://www.jenkinssoftware.com/raknet/forum/index.php?topic=2259.0" target="_blank">bugfixing</a> Raknet )<br><br>Anyhoo, if you have a lot of Raknet integration already, you may not want to re-code it to support a OOP API. <br><br></td></tr></table><br>
<a name="935796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> (which would be now much more complete were I not bugfixing Raknet ) <br></div><br><br>Nice find! I wonder how long it has been like that...<br><br><div class="quote"> Anyhoo, if you have a lot of Raknet integration already, you may not want to re-code it to support a OOP API.  <br></div><br><br>The wrap of a wrap I used (posted in blitzmax programming) would make it less difficult to go through such a transition. For what it's worth i'm as excited as a kid in toys'r'us about your work on this. Very anticipated. <br><br></td></tr></table><br>
<a name="936089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I wonder how long it has been like that... <br></div><br>Possibly a while. I think the fact I develop on Mac helps to pick up on these, as it tends to lock up as soon as you step out of bounds (data-wise).<br><br><div class="quote"> Very anticipated. <br></div><br>The examples are making me crazy at the moment. I can almost port straight to BlitzMax, but I keep missing *stupid* things which have me spending far too much time-wasting on.<br><br>Example :<br><pre class=code>
peer2-&gt;Connect("127.0.0.1", 60000,0,0)
</pre><br>The third param is passwordData, a String. Obviously, if you pass 0 in BlitzMax you actually pass "0", unlike in C++ which is Null. So you get weird things happening... and you look at the code til you're blue in the face, and can't "see" the problem :-p<br><br>Anyhoo... I think I'm on top of it now ;-)<br><br>I've also knocked together a little CEGUI-based "helper" framework for some of the samples, since the C++ samples mix text output with no-wait key input. So I went the route of a Graphics window, and CEGUI dialogs for text input. Works rather well actually, and of course runs concurrently with the network processing, so while you are typing something in, you may see a message pop up in the background.<br><br>Anyway, back to the examples - there's a lot of them!! <br><br></td></tr></table><br>
<a name="936111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I've also knocked together a little CEGUI-based "helper" framework for some of the samples <br></div><br><br>Nice. I tend to be using cegui for everything nowadays as well - so little work required to make something look fancy. Glad you're getting somewhere with it.<br><br>I'm really looking forward to the rakVoice support =p. Nothing like a little p2p support for voice chat haha. <br><br></td></tr></table><br>
<a name="936116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm really looking forward to the rakVoice support <br></div><br>Yeah... I dunno how I'm going to test that!?! <br><br></td></tr></table><br>
<a name="936130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> The one example I used allowed you to output sound, and it would reverb back a second later. I think they all work that way (the examples appear to just be different sound systems). Otherwise, i'm available if you need an additional client/host to test with. <br><br></td></tr></table><br>
<a name="936150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just so there's something to play with for now while I work through the rest of the examples :<b> <a href="http://brucey.net/programming/blitz/misc/stuff/raknet_example_win32.rar" target="_blank"> raknet_example_win32.rar</a></b> (2.7 meg)<br><br>Showing the CEGUI-based framework for the examples. In this one, it's the basic Chat Client/Server. Not the most exciting in the world, but it does show things like banning and stats, which may be of interest.<br><br><br>As usual, the wrap compares closely with the original API...<br><br><pre class=code>
	printf("My GUID is %s\n", client-&gt;GetGuidFromSystemAddress(UNASSIGNED_SYSTEM_ADDRESS).ToString());

vs

	AddMessage "My GUID is " + client.GetGuidFromSystemAddress(UNASSIGNED_SYSTEM_ADDRESS).ToString()
</pre><br><br>and<br><br><pre class=code>
		rss=client-&gt;GetStatistics(client-&gt;GetSystemAddressFromIndex(0));

vs

		rss = client.GetStatistics(client.GetSystemAddressFromIndex(0))
</pre><br><br>Which makes porting the examples a case of copy/paste/tweak... more or less ;-) <br><br></td></tr></table><br>
<a name="936165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good stuff. Working perfect on my side. <br><br></td></tr></table><br>
<a name="936245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works perfectly here too,  exciting stuff <br><br></td></tr></table><br>
<a name="936848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> ! Just noticed that you added raknet.mod to the svn along with a few more examples...all of which appear to be working perfect as well.<br><br>Either my chair massager is on or i'm just excited =p <br><br></td></tr></table><br>
<a name="936851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> The examples were taking longer than I thought they would - as I have to rearrange things a little to fit into my helper-framework. So I thought I may as well drop the module into SVN for now.<br><br>I think most of the core stuff is complete.<br>Still working my way through the "plugins".<br>I've decided that RakVoice will be best kept as another module. Same with Lobby2. Otherwise you'd get all of that extra stuff compiled in, every time. This way, you get to choose.<br>I could probably do the same for some of those other plugins, but they seemed small enough not to matter too much.<br><br>Edit : it's the documentation that takes most of the time though.... *phew* <br><br></td></tr></table><br>
<a name="936853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Edit : it's the documentation that takes most of the time though.... *phew*  <br></div><br><br>I bet!...I assume you have to rely on good documentation on the other side, and sometimes figure out what the heck a function does on your own a lot of the time.<br><br>As for the examples, perhaps me and/or Ovine (if he's up for it?) can save you some time by referring to your current examples and setting up the other examples (the ones without the use of rakvoice/lobby/updater/..) in the same way, and throwing them back to you for review?<br><br>This module was an important request to me so i'de love to help in any way i'm capable if it means you can forward the time saved on the rest of the features sooner. <br><br></td></tr></table><br>
<a name="936858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I might try and implement the Voice callback stuff in C++ - most of which doesn't really require BlitzMax interaction anyway - since all it needs to do is feed audio buffers with data.<br>That way, I should avoid any potential issues with threads.<br><br>I was considering perhaps a base BaH.RakVoice, then one for each of, FMOD, BASS, irrKlang, OpenAL, PortAudio...   - well, no harm in having some options available?<br>Since there are already basic examples for PortAudio, DSound and FMOD, it shouldn't be too hard to work out the rest.<br><br>I've also swapped libspeex with the latest version - it appears to compile, but until I try to build an app, won't know if everything has linked properly :-p <br><br></td></tr></table><br>
<a name="936860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> That sounds pretty awesome. I can't imagine the possibilities with that....I look forward to creating a p2p voice chat feature for my lobby so people can spam music in their own channels (as...ofcourse they will clearly do).<br><br><br>A bit unrelated, but will there be a method for TRKBitStream, for 'ignorebits'? It doesn't appear to be supported within the type..maybe i'm missing it. <br><br></td></tr></table><br>
<a name="936861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ...for 'ignorebits' <br></div><br>Ooops. Added now. <br><br></td></tr></table><br>
<a name="936863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks!<br><br>I just tried to port over BigPacketTest example, and it appears to work, however for the sake of sanity BIG_PACKET_SIZE should probobly be 20739, or 207390, but 2073900 as the size nearly freezes my (well above average) dev computer....i'm thinking it's because of how the string is assigned differently from the port.<br><br>raknet.mod/examples/BigPacketTest.bmx<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Framework BaH.Raknet
Import brl.StandardIO
Import brl.retro
Import "example_helper.bmx"

New BigPacketTest.Run()

Type BigPacketTest Extends TExampleHelper
	'Stages
	Const Stage_RequestingRole:Int = 1
	Const Stage_RequestingIP:Int = 2

	Field Quit:Byte
	Field sentPacket:Byte = False
	Field RakNet:TRKRakNet = New TRKRakNet
	Const BIG_PACKET_SIZE:Int = 2073900
	Field Text:String
	Field nextStatTime:Int
	Field Stage:Int
	Field peer1:TRKRakPeerInterface, peer2:TRKRakPeerInterface
	Field Go:Int
	
	Field Start:Int, Stop:Int
	
	Method Init()
		Super.Init()
		nextStatTime = RakNet.GetTime() + 1000
		AddMessage("This is a test I use to test the packet splitting capabilities of RakNet")
		AddMessage("All it does is send a large block of data to the feedback loop")
		AddMessage("Difficulty: Beginner")
		Stage = Stage_RequestingRole
		RequestValue("Server or Client?", "Enter 's' to run as sender, 'r' to run as receiver, space/nil to run local.")
	End Method
	
	Method RenderExtra()
	End Method
	
	Method Finalize()
		stop = raknet.GetTime()
		Local seconds:Double = (stop - start) / 1000.0
		If peer2
			Local rssSender:TRKRakNetStatistics = peer2.GetStatistics(peer2.GetSystemAddressFromIndex(0))
			Print(rssSender.ToVerboseString(2))
			Print(Int(BIG_PACKET_SIZE / seconds) + " bytes per second transfered.")
			Text = Null
			TRKRakNetworkFactory.DestroyRakPeerInterface(peer1)
			TRKRakNetworkFactory.DestroyRakPeerInterface(peer2)
		End If
	End Method
	
	Method Update()
		start = RakNet.GetTime()
		If quit Then
			Finalize()
		End If
		
		If peer2 Then
			peer2.DeallocatePacket(peer2.Receive())
			If sentPacket = False And peer2.GetSystemAddressFromIndex(0) &lt;&gt; UNASSIGNED_SYSTEM_ADDRESS Then
				sentPacket = True
				For Local i:Int = 0 To big_packet_size - 1
					Text:+Chr(255)
				Next
				
				peer2.Send(Text, BIG_PACKET_SIZE, HIGH_PRIORITY, RELIABLE_ORDERED, 0, peer2.GetSystemAddressFromIndex(0), False)
				'Keep the stat from updating until the messages move to the thread or it quits right away
				nextStatTime = RakNet.GetTime() + 1000
			End If
		End If
		
		If peer1 Then
			Local packet:TRKPacket = peer1.Receive()
			While packet
				If packet.GetData()[0] = ID_DOWNLOAD_PROGRESS
					Local ProgressBS:TRKBitStream = New TRKBitStream
					ProgressBS.CreateFromData(packet.GetData(), packet.GetLength(), False)

					ProgressBS.IgnoreBits(8) ' ID_DOWNLOAD_PROGRESS
					Local progress:Int
					Local total:Int
					Local partLength:Int
					Local rss:TRKRakNetStatistics = peer1.GetStatistics(peer1.GetSystemAddressFromIndex(0))
					Local Data:String
					ProgressBS.ReadInt(progress)
					ProgressBS.ReadInt(total)
					ProgressBS.ReadInt(partLength)
					data = ProgressBS.ReadString(partLength)
					Print "Progress: msgID=" + Asc(data[0]) + " Progress " + progress + "/" + total + " Partsize=" + partLength + " Full=" + rss.bandwidthExceeded()
					'addmessage("Progress: msgID=" + Asc(data[0]) + " Progress " + progress + "/" + total + " Partsize=" + partLength + " Full=" + rss.bandwidthExceeded())
				ElseIf packet.GetData()[0] &gt;= ID_USER_PACKET_ENUM
					If packet.GetData()[0] = 255 Then
						Local dataValid:Byte = True
						For i:Int = 1 To BIG_PACKET_SIZE - 1
							If packet.GetData()[i] &lt;&gt; 255 Then
								dataValid = False
								Exit
							End If
						Next
						
						If dataValid Then
							Print("Test succeeded. " + packet.GetLength() + " bytes.")
						Else
							Print("Test failed. " + packet.GetLength() + " bytes.")
						End If
					Else
						Print("Unkown packet " + packet.GetData()[0] + ": Test failed. " + packet.GetLength() + " bytes.")
					End If
					quit = True
				End If
				peer1.DeallocatePacket(packet)
				packet = peer1.Receive() ;
			WEnd
		End If
		
		If RakNet.GetTime() &gt; nextStatTime Then
			nextStatTime = RakNet.GetTime() + 1000
			Local rssSender:TRKRakNetStatistics
			Local rssReceiver:TRKRakNetStatistics
			If peer2 Then
				rssSender = peer2.GetStatistics(peer2.GetSystemAddressFromIndex(0))
				If rssSender Then
					Print("Snd: " + rssSender.messageSendBuffer(HIGH_PRIORITY) + " waiting. " + rssSender.messagesOnResendQueue() + " waiting on ack. Got " + rssSender.acknowlegementsReceived() + " acks. KBPS=" + (rssSender.bitsPerSecond() / 1000.0) + " Ploss=" + 100.0 * rssSender.messagesTotalBitsResent() / Float(Rsssender.totalBitsSent()) + " Full=" + rssSender.bandwidthExceeded())
					If peer1 = Null
						Print() 'newline??
					End If
					If sentPacket And rssSender.messageSendBuffer(HIGH_PRIORITY) = 0 And rsssender.messagesOnResendQueue() = 0 And peer1 = Null Then
						rss = peer2.GetStatistics(peer2.GetSystemAddressFromIndex(0))
						Text = rss.ToString()
						rss.ToVerboseString(2)
						Print(Text)
						Print("Sender quitting with no messages on resend queue.")
						quit = True
					End If
				End If
			End If
			
			If peer1 Then
				rssReceiver = peer1.GetStatistics(peer1.GetSystemAddressFromIndex(0))
				If rssReceiver
					Print("Receiver: " + rssReceiver.acknowlegementsPending() + " acks waiting.")
				End If
			End If
			Delay(100)
		End If
		Super.Render()
		Return
	End Method
	
	
	Method OnSubmit(value:String)
		Select stage
			Case Stage_RequestingRole
				If Left(value, 1).ToLower() = "r"
		
					peer1 = TRKRakNetworkFactory.GetRakPeerInterface()
					Print("Working as receiver")
					Setup()
				ElseIf Left(value, 1).ToLower() = "s"
					peer2 = TRKRakNetworkFactory.GetRakPeerInterface()
					Print("Working as sender")
					Stage = Stage_RequestingIP
					RequestValue("Server address", "Enter remote IP: ")
				Else 'Act as both.
					peer1 = TRKRakNetworkFactory.GetRakPeerInterface()
					peer2 = TRKRakNetworkFactory.GetRakPeerInterface()
					Text = "127.0.0.1"
					Setup(Text)
				End If
				
			Case Stage_RequestingIP
				If Value.Length = 0 Then
					Text = "127.0.0.1" 'Added for default value.
				Else
					Text = value
				End If
				Setup(Text)
		End Select
		Return
	End Method
	
	Method Setup(IP:String = Null)
		If peer1 Then
			peer1.SetMaximumIncomingConnections(1) ;
			Local socketDescriptor:TRKSocketDescriptor = New TRKSocketDescriptor.Create(10000)
			peer1.SetMTUSize(1492)
			peer1.Startup(1, 0, socketDescriptor)
			peer1.SetSplitMessageProgressInterval(100) 'Get ID_DOWNLOAD_PROGRESS notifications
		End If
		If peer2 Then
			socketDescriptor = New TRKSocketDescriptor.Create()
			peer2.SetMTUSize(1492)
			peer2.Startup(1, 0, socketDescriptor)
			peer2.Connect(IP, 10000)
		End If
		Delay(500)

		' Always apply the network simulator on two systems, never just one, with half the values on each.
		' Otherwise the flow control gets confused.
		'	if peer1 then
		'		peer1.ApplyNetworkSimulator(128000, 0, 0)
		'	end if
		'	if peer2 then
		'		peer2.ApplyNetworkSimulator(128000, 0, 0)
		'	end if

		
	End Method
End Type
</textarea> <br><br></td></tr></table><br>
<a name="936982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool. Thanks.<br><br>I've tweaked it a little here and there, to store/compare the data as per the original. (and set it to use that full 2073900 bytes)<br>The "freezing" was because of calling GetData()[i] in the loop. Function calls are expensive ;-)<br>Working on the Byte Ptr itself solved the loooong delay!<br><br>:o) <br><br></td></tr></table><br>
<a name="937008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> .... trying to get my head around a design for the rakvoice mods...<br><br>Needs to be fairly flexible, and transparent for you lot to use :-p <br><br></td></tr></table><br>
<a name="937022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The "freezing" was because of calling GetData()[i] in the loop. Function calls are expensive ;-) <br></div><br><pre class=code>
Local pdata:Byte Ptr = packet.GetData()
</pre><br><br>woops! I knew they were more expensive...I wasn't aware they were <u>that</u> much more costly though. Learn a new thing every day.<br>And ofcourse, the example is working great now.<br><br><br><div class="quote"> .... trying to get my head around a design for the rakvoice mods...<br><br>Needs to be fairly flexible, and transparent for you lot to use :-p  <br></div><br><br>Yeah, I think you turned that into a much larger scale for a project, but in a rank of coolness i'm sure it will be on the top. <br><br></td></tr></table><br>
<a name="937035"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've committed the initial work. (BaH.RaknetVoice and BaH.RaknetVoiceFMOD).<br>The example is working here on Mac ;-)<br>However, it may not even compile (libspeex) yet on Windows... so be aware before trying it out.<br>I'll check the Win32 stuff tomorrow.<br><br>On Mac at least, you need to run two separate instances of the example. Doesn't work (rec+play) on <br>the same app. But I don't see that as being very important.<br><br>BlitzMax and audio chatting... very cool :-) <br><br></td></tr></table><br>
<a name="937036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> BlitzMax and audio chatting... very cool :-) <br></div><br>Indeed! <br><br></td></tr></table><br>
<a name="937039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> So much for getting a good nights rest, svn'ing now :) <br><br></td></tr></table><br>
<a name="937040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Everything appears to compile fine.<br><br>Edit: But the fmod example for it doesn't appear to do anything. Win32. I haven't tried on mac to see if i'm doing something wrong or not yet. <br><br></td></tr></table><br>
<a name="937054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remember that one of the "clients" needs to start on a different "local port". If I start them both using the default, it doesn't work.<br>Once the two are running, (C)onnect with one of them using the appropriate details. If successful you should get a connect message appearing on each. After that, the audio should be working.<br><br>But I'll test Win32 shortly... <br><br></td></tr></table><br>
<a name="937065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wooo! Tested on XP with my Logitech USB headset, and it worked first time :-)<br><br>If you follow the method in the previous post, that should sort you out.<br>I'll give Linux a run this evening.<br><br>So, now that I've proved it does actually work, I'll have to finish the example, the Voice API, and see about implementing some of the other "audio adapters".<br>For PortAudio, I'll use Skid's Axe.PortAudio module.<br>Might even be able to get it working with Redi's maxmod2 ? <br><br></td></tr></table><br>
<a name="937074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, thought I tried that. It's working now :) nice! <br><br></td></tr></table><br>
<a name="937078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> BlitzMax and audio chatting... very cool :-)  <br></div><br><br>Hm.... I suppose it could be combined with ESCAPI ( <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1899" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1899</a> , <a href="http://sol.gfxile.net/zip/escapi21.zip" target="_blank">http://sol.gfxile.net/zip/escapi21.zip</a> )<br><br>to  whip up your own little webcam chat program.<br><br><div class="quote"> Might even be able to get it working with Redi's maxmod2 ?  <br></div><br><br>that would be neat. <br><br></td></tr></table><br>
<a name="937079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> @xlsior: What would be nice is cross-platform camera support! (OpenCV - hint hint) <br><br></td></tr></table><br>
<a name="937172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Voice stuff now building on Linux... not tested yet, as *someone* left the headset at the office :-p <br><br></td></tr></table><br>
<a name="937345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any chance to get a rakvoicebass.mod next? :) <br><br></td></tr></table><br>
<a name="937392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Possibly... if I can work out how to use the "push" interface... (rather than via the callbacks).<br>I think I'll be better coding it in C... so expect it not to be working properly for a while :-p <br><br></td></tr></table><br>
<a name="938088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just noticed RakNetRooms.mod from the svn. I had actually never touched the sample for raknet before but after reading the description i'm in awe..<br><br>I was actually just about to start working on a 'table' system for a game for users to join through a lobby, but apparently blitzmax is going to have a perfect library for just that. Top notch. <br><br></td></tr></table><br>
<a name="938090"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Just noticed RakNetRooms.mod from the svn. <br></div><br>It's not finished yet! :-p<br>I just needed to get what I'd done so far, committed. There's a lot to it... mostly callbacks... which I've yet to figure out the best implementation. <br><br></td></tr></table><br>
<a name="938091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  It's not finished yet! <br></div><br><br>I know =p just looking forward to it when it's finished. <br><br></td></tr></table><br>
<a name="938095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >byo</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Keep up the good work.<br>They're looking good so far. <br><br></td></tr></table><br>
<a name="938352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have just begun converting my work to your raknet module from jimons and all has been great, except for the bitstreams.<br><br>I noticed in comparison to jimons work, he had support for signed/unsigned integers with the bitstream class, and you were able to send a single bit (bool). It wouldn't be difficult to subtract for signed vs unsigned, but since this is blitzmax, and not c++...it is a bit more work for reading/writing on the users end to do that...what would you think of an additional argument on the read/write commands, for having a value for signed/unsigned? And is it possible to get a writebit function within the trkbitstream class?<br><br>Sorry if I missed anything for this, i'm still going through the module to understand the differences between the two for use with blitzmax better. <br><br></td></tr></table><br>
<a name="938405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got a quick question.<br><br>Does raknetrooms.mod, in it's current state, compile on linux for you?<br><br>Because if it does, there's something missing on my side :)<br><br>I get an error in /src/Rooms/ProfanityFilter.cpp:51: error: 'strlwr' was not declared in this scope.<br><br>Not that I use it for anything. But I'm lazy and check out all the bah.mods :-P <br><br></td></tr></table><br>
<a name="938411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does raknetrooms.mod, in it's current state, compile on linux for you?<br> <br></div><br>raknetrooms is turning into a big pain. It would appear that it's only been tested on Windows, and at that, Visual Studio.... given all the errors I'm getting trying to compile it with MinGW..<br><br>However, I added an ifdef at the top (and actually re-wrote bits of ProfanityFilter.cpp) to assist in the compilation on Mac :<br><pre class=code>
#ifdef __APPLE__
</pre><br>I think changing this to<br><pre class=code>
#ifndef WIN32
</pre><br>will help compilation on Linux.<br><br>I'll test it properly on Linux it tonight. :-) <br><br></td></tr></table><br>
<a name="938793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does raknetrooms.mod, in it's current state, compile on linux for you? <br></div><br>Fix committed. <br><br></td></tr></table><br>
<a name="938921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> he had support for signed/unsigned integers with the bitstream class. <br></div><br>I've added support for UShort and UInt calls, as well as Bool and Bit functionality.<br><br>I also noticed, which I was referring to jimon's  wrap (better to see what you mean), that he was passing Int to all the functions, and in the C++ glue accepting things such as char, short, etc. Very dangerous. I'm guessing noone on Mac ever tried that mod, as it would be very likely to nuke on a first call to a function with invalid parameters. (Much in the same way that for some reason you can't pass a Long back from C++ to BlitzMax - it is unreliable and can corrupt your data. But I use a workaround for that.) <br><br></td></tr></table><br>
<a name="938982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahhh thank you!<br><br><div class="quote"> that he was passing Int to all the functions, and in the C++ glue accepting things such as char, short, etc. Very dangerous. <br></div><br><br>Yeah i'm not sure what jimons focus was since none of us had any real chance to chat with him (no forum access?), but he may have just thrown it together to get rid of the dll requirement on a specific OS (likely windows).<br><br>But...that is just another reason why I was really anticipating your version of the module. Cheers <br><br></td></tr></table><br>
<a name="938997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a few updates on the trkbitstream:<br><br>-Identifier 'WriteBool' not found (latest svn + built) [trkbitstream.writebool]<br><br>Some ideas, or missing features:<br><br>trkbitstream::<br>-GetLength() / GetWrittenBitcount()<br>-GetUnreadBitcount()<br>-GetReadPos()<br><br>And there appears to be no WriteCompressed&lt;Vartype&gt;(&lt;val&gt;) methods, but I might have overlooked something. <br><br></td></tr></table><br>
<a name="938999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have this :<br><pre class=code>
	Method WriteBool(value:Int)
</pre><br><br>As well as :<br><pre class=code>
	Method Write0()

	Method Write1()
</pre><br>...<br><br>which I was sure I'd checked in...<br><br>&lt;EDIT&gt;Just updated my Win32 source and those methods appear there as I'd expect. <br><br></td></tr></table><br>
<a name="939001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Some ideas, or missing features <br></div><br>I'll get onto those presently, as well as the WriteCompressed methods :-) <br><br></td></tr></table><br>
<a name="939089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I have this : <br></div><br><br>Yeah they were showing up properly in blide, but writebool(&lt;0/1&gt;) wouldn't build for me, and I definitely built the mod lol. I'll try forcing rebuild or something and see how that works out. <br><br></td></tr></table><br>
<a name="940374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm getting an error on CreateFromData. I'm trying to use bitstreams without using RPC, but i'm becoming stumped here.<br><br>Self.Reader is a trkbitstream<br>packet is a trkpacket<br><br><br><pre class=code>
Self.packet = Interface.Receive()
If (Self.packet) Then
	Local Data:Byte Ptr = packet.GetData()
	Self.reader.CreateFromData(Data, packet.GetLength() , False)
</pre><br><br><br>In jimons source, he had:<br><br><pre class=code>
RN_API BitStream * RN2_API RN_BitStreamCreateFromPacket(Packet *packet)
{	
	BitStream *b = new BitStream((unsigned char*)packet-&gt;data,packet-&gt;length,0);
	return b;
}</pre><br><br>Which as far as I can tell, is exactly what i'm doing in my code with your version, but i'm receiving an error instead (unhandled memory excep.). I haven't a clue what's going wrong here =( <br><br></td></tr></table><br>
<a name="940387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is in the bigpacket example :<br><pre class=code>
			Local packet:TRKPacket = peer1.Receive()
			While packet
				If packet.GetData()[0] = ID_DOWNLOAD_PROGRESS Then
					Local progressBS:TRKBitStream = TRKBitStream.CreateFromData(packet.GetData(), packet.GetLength(), False)
</pre><br><br>Note that CreateFromData is a function, if that makes any difference? <br><br></td></tr></table><br>
<a name="940895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, i've gotten beyond that now, however something seems out of whack when I attempt to <b>readbyte</b> from a bitstream =(<br><br>writeint/readint doesn't cause an error, but no value is returned (other then zero), but readbyte only gives me an <b>Unhandled Memory Exception Error</b><br><br>It appears to be linked with:<br><br><pre class=code>
bool bmx_BitStream_ReadByte(RakNet::BitStream * stream, unsigned char * value) {
	return stream-&gt;Read(value);
}
</pre><br>Nothing appears to happen with the value? not sure.<br><br>Ex:<br><br><pre class=code>Method Create_BitStream_From_Packet(Packet:TRKPacket)
	Self.Reader = New TRKBitStream.CreateFromData(Self.packet.GetData(), Self.packet.GetLength(), False)
End Method

Method ReadByte:Byte()
	Local Val:Byte
	Self.Reader.ReadByte(Val)
	Return Val
End Method
</pre><br><br>And I use this for writing the packets:<br><br><pre class=code>
Method Create_BitStream(MessageID:Int, Compressed:Byte = 0)
	Self.Writer = New TRKBitStream.CreateBitStream()
	Writer.WriteByte((MessageID + ID_USER_PACKET_ENUM))
End Method

Method WriteByte(Value:Byte)
	Self.Writer.WriteByte(Value)
End Method
</pre><br><br>The packet writes and recieves alright, but as for retreiving the data using the read commands - nada. Nothing appears to be wrong with write&lt;datatype&gt; methods though. <br><br></td></tr></table><br>
<a name="949224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'de like to bring up this issue again...The thrown together example below should provide better detail when run:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import bah.raknet

Global client:TRKRakPeerInterface = TRKRakNetworkFactory.GetRakPeerInterface()
Global server:TRKRakPeerInterface = TRKRakNetworkFactory.GetRakPeerInterface()

Local socketDescriptor:TRKSocketDescriptor = New TRKSocketDescriptor.Create(10000)
server.SetMaximumIncomingConnections(1)
server.Startup(1, 1, socketDescriptor)

client.Startup(1, 0, New TRKSocketDescriptor.Create())
client.Connect("127.0.0.1", 10000)

Repeat
	Sleep 10
	
	ProcessServer()
	ProcessClient()
Forever

Function ProcessServer()
	Local packet:TRKPacket = server.Receive()
	While packet
		Print "received: " + packet.GetData()[0]
		If packet.GetData()[0] &gt;= ID_USER_PACKET_ENUM Then
			Local B:TRKBitStream = TRKBitStream.CreateFromData(packet.GetData(), packet.GetLength(), False)
			Local Val1:Byte, Val2:Short, Val3:Int
			b.ReadByte(Val1) 'Here comes the error...
			b.ReadShort(Val2)
			b.ReadInt(Val3)
			Print Val1 'should be ID_USER_PACKET_ENUM (=91)
			Print Val2 'should be 1000
			Print Val3 'should be 100000
			Exit
		End If
		server.DeallocatePacket(packet)
		packet = server.Receive()
	Wend
End Function

Function ProcessClient()
	Local packet:TRKPacket = client.Receive()
	While packet
		If packet.GetData()[0] = 14 Then
			Send_Packet()
			
		End If
		Print "Client: " + packet.GetData()[0]
		client.DeallocatePacket(packet)
		packet = client.Receive()
	WEnd
	
End Function

Function Send_Packet()
	Local BitStream:TRKBitStream = TRKBitStream.CreateBitStream()
	
	Local PacketIdentifier:Byte = ID_USER_PACKET_ENUM
	Local Val2:Short = 1000
	Local Val3:Int = 100000
	
	BitStream.WriteByte(PacketIdentifier)
	bitstream.WriteShort(Val2)
	bitstream.WriteInt(Val3)
	
	client.SendBitStream(BitStream, HIGH_PRIORITY, RELIABLE_ORDERED, 0, client.GetSystemAddressFromIndex(0), False)
End Function

TRKRakNetworkFactory.DestroyRakPeerInterface(client)
TRKRakNetworkFactory.DestroyRakPeerInterface(server)

</textarea><br><br>I'm still using jimons version because I can't seem to get beyond this issue :( <br><br></td></tr></table><br>
<a name="949265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Under investigation...<br><br>interestingly... this :<br><pre class=code>
Print packet.GetData()[0]
Print Short Ptr(packet.GetData() + 1)[0]
Print Int Ptr(packet.GetData() + 3)[0]
</pre><br>prints the expected values...<br>So it seems Bitstream is a tad sickly... <br><br></td></tr></table><br>
<a name="949308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah haa....  I appear to have solved the problem...<br><br>Apologies for my ineptitude... <br><br></td></tr></table><br>
<a name="949327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Ah haa.... I appear to have solved the problem... <br></div><br><br>Thanks, that was fast. I've been looking forward to using your wrap forever, and now I finally can :) <br><br></td></tr></table><br>
<a name="950596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've read on DevMaster.net that RakNet is now free to use for Indie Developers.<br><br><div class="quote"> Free Indy license<br><br>A free Indy license allows you to use RakNet in a single downloadable application for the PC, Mac, or Linux only, any operating system.<br><br>Read the entire agreement online. If you do not agree with the license terms or have questions about the terms, please contact us<br><br>Key terms:<br><br>    * Gross revenue under 250K<br>    * Must display RakNet logo in your game's splash screen or credits.<br>    * Downloadable distribution<br>    * PC, Mac, or Linux<br> <br></div><br><br>source: <a href="http://www.jenkinssoftware.com/purchase.html" target="_blank">http://www.jenkinssoftware.com/purchase.html</a> <br><br></td></tr></table><br>
<a name="950648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great news, thanks for sharing! <br><br></td></tr></table><br>
<a name="992079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> The fix you did seems to have not worked for   writelong<br><br>either<br>b.writelongByte(Val1)<br>or <br>b.readlongByte(Val1)<br><br>is wrong ?<br><br><br><br><br><pre class=code>
	Local Val4:Long = 7
	bitstream.WriteLong(Val4)

.
.
.

        Print b.ReadLong()

returns 20506055076151060

</pre><br><br><br>Ive just tried it with "Zeke"s version, does the same in there too. <br><br></td></tr></table><br>
<a name="992086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looking thru the code it seems that  WriteTime  and ReadTime use longs in the stream too,  those calls are also broken ?<br><br>Seems they all cast long using  "BBInt64"  is that the fault ? - Is there a problem with c -&gt; longs -&gt; Max ? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
