<!DOCTYPE html><html lang="en" ><head ><title >libxml and serialization</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >libxml and serialization</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >libxml and serialization</a><br><br>
<a name="856303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there an example for reading xml files that use serialization?<br><br>I'm going to read rss feeds, if anyone has experience doing that I'm looking for an example on that too. <br><br></td></tr></table><br>
<a name="856526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> example of rss 2.0 feed<br><br>taken from www.hulu.com/feed/show/60/episodes<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">&lt;rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:media="http://search.yahoo.com/mrss/"&gt;
  &lt;channel&gt;
    &lt;atom:link type="application/rss+xml" rel="self" href="http://www.hulu.com/feed/show/60/episodes"/&gt;
    &lt;title&gt;Hulu - Episodes for Life&lt;/title&gt;
    &lt;link&gt;http://www.hulu.com/feed&lt;/link&gt;
    &lt;description&gt;Hulu - Episodes for Life&lt;/description&gt;
    &lt;pubDate&gt;Thu, 13 Mar 2008 19:26:44 -0000&lt;/pubDate&gt;
    &lt;item&gt;
      &lt;title&gt;Life: Pilot (s1e1)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6671/life-pilot&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6671/life-pilot&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/4/95/3242972_cropped_145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;After serving 12 hard years for a crime he didn't commit, Detective Charlie Crews is back on the LAPD with a new partner and a new zen attitude.&lt;/p&gt;&lt;p&gt;Added: October 03, 2007&lt;br/&gt;Duration: 43:19&lt;br/&gt;Rating: 4.2 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Wed, 03 Oct 2007 05:20:23 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/4/95/3242972_cropped_145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;title&gt;Life: Tear Asunder (s1e2)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6681/life-tear-asunder&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6681/life-tear-asunder&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/4/188/nbc_lif_eps_102_20071003_mezzn_145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;Crews and Reese investigate a bride's murder. Crews realizes that a child may have witnessed the murders for which he was convicted.&lt;/p&gt;&lt;p&gt;Added: October 04, 2007&lt;br/&gt;Duration: 43:01&lt;br/&gt;Rating: 4.1 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Thu, 04 Oct 2007 22:30:30 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/4/188/nbc_lif_eps_102_20071003_mezzn_145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;title&gt;Life: Let Her Go (s1e3)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6665/life-let-her-go&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6665/life-let-her-go&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/4/556/nbc_lff_eps_103_20071010_mezzn_145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;An upscale family man is suspected of killing his wife, and Crews sees his ex-wife for the first time since getting out of jail.&lt;/p&gt;&lt;p&gt;Added: October 11, 2007&lt;br/&gt;Duration: 42:53&lt;br/&gt;Rating: 4.1 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Thu, 11 Oct 2007 04:50:58 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/4/556/nbc_lff_eps_103_20071010_mezzn_145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;title&gt;Life: What They Saw (s1e4)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6662/life-what-they-saw&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6662/life-what-they-saw&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/4/704/nbc_lff_eps_104_20071017_mezzn_145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;When a wealthy man is found murdered in his bed, Crews befriends the only suspect, a homeless thief camping outside the estate.&lt;/p&gt;&lt;p&gt;Added: October 17, 2007&lt;br/&gt;Duration: 44:03&lt;br/&gt;Rating: 4.3 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Wed, 17 Oct 2007 20:50:35 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/4/704/nbc_lff_eps_104_20071017_mezzn_145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;title&gt;Life: The Fallen Woman (s1e5)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6661/life-the-fallen-woman&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6661/life-the-fallen-woman&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/4/976/nbc_lff_eps_105_20071024_mezzn_145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;When an angel falls from the sky, Crews and Reese's murder investigation leads to a slippery Russian gangster.&lt;/p&gt;&lt;p&gt;Added: October 25, 2007&lt;br/&gt;Duration: 43:08&lt;br/&gt;Rating: 3.9 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Thu, 25 Oct 2007 02:40:59 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/4/976/nbc_lff_eps_105_20071024_mezzn_145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;title&gt;Life: Powerless (s1e6)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6670/life-powerless&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6670/life-powerless&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/5/111/nbc_lff_eps_106_20071031_mezzn_145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;Dani comes across a rapist at her AA meeting.&lt;/p&gt;&lt;p&gt;Added: November 01, 2007&lt;br/&gt;Duration: 43:24&lt;br/&gt;Rating: 4.0 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Thu, 01 Nov 2007 16:20:50 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/5/111/nbc_lff_eps_106_20071031_mezzn_145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;title&gt;Life: A Civil War (s1e7)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6684/life-a-civil-war&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6684/life-a-civil-war&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/5/204/nbc_lff_eps_107_20071107_mezzn_145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;The murder of two Iranian American students sparks racial unrest as Crews and Reese race to rescue their kidnapped friend.&lt;/p&gt;&lt;p&gt;Added: November 08, 2007&lt;br/&gt;Duration: 43:12&lt;br/&gt;Rating: 4.2 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Thu, 08 Nov 2007 00:21:06 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/5/204/nbc_lff_eps_107_20071107_mezzn_145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;title&gt;Life: Farthingale (s1e8)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6685/life-farthingale&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6685/life-farthingale&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/5/412/nbc_lff_eps_108_20071114_mezzn_145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;While investigating the murder of a bigomist, Crews is suspected for the murder of policeman Ames.&lt;/p&gt;&lt;p&gt;Added: November 14, 2007&lt;br/&gt;Duration: 43:05&lt;br/&gt;Rating: 4.2 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Wed, 14 Nov 2007 21:11:13 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/5/412/nbc_lff_eps_108_20071114_mezzn_145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;title&gt;Life: Serious Control Issues (s1e9)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6674/life-serious-control-issues&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6674/life-serious-control-issues&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/5/662/nbc_lff_eps_109_20071127_mezzn_145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;While investigating the case of a murdered homeless girl, Reese and Crews stumble across a child who was kidnapped when he was three.&lt;/p&gt;&lt;p&gt;Added: November 28, 2007&lt;br/&gt;Duration: 44:04&lt;br/&gt;Rating: 4.2 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Wed, 28 Nov 2007 22:40:42 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/5/662/nbc_lff_eps_109_20071127_mezzn_145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;title&gt;Life: Dig A Hole (s1e10)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6687/life-dig-a-hole&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6687/life-dig-a-hole&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/5/729/4939851_cropped145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;Charlie and Dani track the killer of a Zen Master who was buried alive ten years prior.&lt;/p&gt;&lt;p&gt;Added: December 04, 2007&lt;br/&gt;Duration: 43:37&lt;br/&gt;Rating: 4.1 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Tue, 04 Dec 2007 03:00:46 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/5/729/4939851_cropped145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;title&gt;Life: Fill It Up (s1e11)&lt;/title&gt;
      &lt;guid isPermaLink="true"&gt;http://www.hulu.com/watch/6691/life-fill-it-up&lt;/guid&gt;
      &lt;link&gt;http://www.hulu.com/watch/6691/life-fill-it-up&lt;/link&gt;
      &lt;description&gt;
        &lt;![CDATA[&lt;img src="http://thumbnails.hulu.com/5/755/nbc_lff_eps_111_20071205_mezzn_145x80.jpg" align="right" width="145" height="80" /&gt;&lt;p&gt;Hoping to take down Jack Reese, Crews finds the Seybolts' murderer, but doesn't succeed in proving who set him up.&lt;/p&gt;&lt;p&gt;Added: December 06, 2007&lt;br/&gt;Duration: 43:20&lt;br/&gt;Rating: 4.2 / 5.0&lt;br/&gt;&lt;/p&gt;]]&gt;
      &lt;/description&gt;
      &lt;pubDate&gt;Thu, 06 Dec 2007 03:40:49 -0000&lt;/pubDate&gt;
      &lt;media:thumbnail width="145" height="80" url="http://thumbnails.hulu.com/5/755/nbc_lff_eps_111_20071205_mezzn_145x80.jpg"/&gt;
      &lt;media:credit&gt;NBC&lt;/media:credit&gt;
    &lt;/item&gt;
  &lt;/channel&gt;
&lt;/rss&gt;</textarea><br><br>what is "&lt;![CDATA[]]&gt;"? <br><br></td></tr></table><br>
<a name="856545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> A CDATA section is Character Data that is not parsed in the same way as the rest of the document.<br>It means, characters that are normally not allowed in XML (like &lt; and &gt; for example) can appear in the CDATA section. <br><br></td></tr></table><br>
<a name="856603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming RSS feeds use the same structure, I'd start by creating an object that matches that structure.<br><br>Then write a little parser which maps the xml onto your object.<br><br>say you have a String containing the feed :<br><pre class=code>
Local doc:TxmlDoc = TxmlDoc.parseDoc(text)
Local root:TxmlNode = doc.GetRootElement()
</pre><br>you might then pass the root node into a method of your mapper...<br><pre class=code>
Method map:RSSObject(root:TxmlNode)
  Local channel:TxmlNode = TxmlNode(root.GetFirstChild())

  Local rss:RSSObject = new RSSObject

  For Local part:TxmlNode = eachin channel.getChildren()

    select part.GetName()

      case "title"
         rss.SetTitle(part.GetContent())


      case "item"
         mapItem(rss, part)

    end select

  Next

  return rss
End Method

Method mapItem(rss:RSSObject, parent:TxmlNode)

... etc

  rss.AddItem(item)

End Method
</pre><br><br><br>or something like that. <br><br></td></tr></table><br>
<a name="856778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey!<br><br>this is a working rss feed reader example, it has an error on closing, but it works :)<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

Framework wx.wxApp
Import wx.wxFrame
Import wx.wxListCtrl
Import wx.wxButton
Import wx.wxPanel
Import wx.wxTextCtrl
Import wx.wxSystemSettings

Import brl.basic
Import brl.blitz
Import brl.retro
Import BaH.libxml

Type rssChannel
  Global _list:TList = New TList
	
	'channel information
	Field Title:String			'title of channel
	Field Description:String	'description of channel
	Field Pubdate:String		'date channel was created?/updated?
	'channel links
	Field lk_Feed:String		'link to the channel's rss feed
	Field lk_Link:String		'link to main feed site
	
	Field chnItems:TList
		
		Method New() 
			chnItems = New TList
		   _list.AddLast(Self) 
			
		End Method
		
		Method SetTitle(_Title:String) 
			Title = _Title
			
		End Method
		
		Method SetDescription(_Desc:String) 
			Description = _Desc
		
		End Method
		
		'fix incoming date for appended timezone data (ex. Thu, 13 Mar 2008 19:26:44 &gt;-0000&lt;)
		Method SetPubdate(pubdateraw:String) 
			Pubdate = pubdateraw
			
		End Method
		
		Method SetLink(Link:String, which:Int) 
		 
			Select which
				Case 0
					lk_Feed = Link
					
				Case 1
					lk_Link = Link
					
			End Select
			
		End Method
		
		Method ReadChannel(root:TxmlNode) 
		  Local channel:TxmlNode = TxmlNode(root.GetFirstChild()) 
		
		   If chnItems.Count() &gt; 0 Then Clear() 
		  
			For Local part:TxmlNode = EachIn channel.getChildren()
			
				Select Lower(part.GetName()) 
				
					Case "title"
						SetTitle(part.getContent()) 
						
					Case "description"
						SetDescription(part.getContent()) 
						
					Case "pubdate"
						SetPubdate(part.getContent()) 
						
					Case "link"
						SetLink(part.getContent(), 1) 
						
					Case "item"
						ReadItem(part) 
						
					Default
						DebugLog("rchn noparse: ~q" + part.getName() + "~q") 
						DebugLog("~t" + part.getName() + " :: " + part.getContent()) 
						
				End Select
			
			Next
		
		End Method
		
		Method ReadItem(parent:TxmlNode) 
		  Local ritem:rssItem = New rssItem
			
			For Local part:TxmlNode = EachIn parent.getChildren() 
			
				Select Lower(part.GetName()) 
				
					Case "title"
						ritem.SetTitle(part.getContent()) 
						
					Case "description"
						ritem.SetDescription(part.getContent()) 
						
					Case "pubdate"
						ritem.SetPubdate(part.getContent()) 
						
					Case "link"
						ritem.SetLink(part.getContent()) 
						
				End Select
			
			Next
			
		   chnItems.AddLast(ritem) 
		   
		End Method
		
		Method Clear() 
		  Local ritem:rssItem
		  
			For ritem = EachIn chnItems
				
				ritem.Clear(Self) 
				
			Next
			
			Title = Null ; Pubdate = Null
			Description = Null
			lk_Feed = Null ; lk_Link = Null
			
		End Method
		
End Type

Type rssItem
	'item information
	Field Title:String			'title of item
	Field Description:String	'description of item
	Field Pubdate:String		'date event occured
	'item links
	Field lk_Link:String		'referring link to event
	
		Method SetTitle(_Title:String) 
			Title = _Title
			
		End Method
		
		Method SetDescription(_Desc:String) 
			Description = _Desc
		
		End Method
		
		'fix incoming date for appended timezone data (Thu, 13 Mar 2008 19:26:44 &gt;-0000&lt;)
		Method SetPubdate(pubdateraw:String) 
			Pubdate = pubdateraw
			
		End Method
		
		Method SetLink(Link:String) 
			lk_Link = Link
			
		End Method
		
		Method Clear(channel:rssChannel) 
			Title = Null
			Description = Null
			Pubdate = Null
			lk_link = Null
			
		  channel.chnItems.Remove(Self) 
		End Method
		
		
		Function Create:rssItem(Title:String, Desc:String, Pubdate:String, lk_Link:String) 
		  Local ritem:rssItem = New rssItem
			
			ritem.Title = Title
			ritem.Description = Desc
			ritem.SetPubdate(Pubdate) 
			ritem.lk_Link = lk_Link
			
		   Return ritem
		   
		End Function
		
End Type

Type Thttp
	Field sock:TSocket
	Field stream:TStream
	Field host:String
	Field agent:String = "BlitzHTTP/1.0"
	Field autoClose:Int
	
		Method Open:Int(host:String, autoClose:Int = False) 
		  Self.sock = CreateTCPSocket()
			 
			If ConnectSocket(Self.sock, HostIp(host), 80) 
				Self.host = host
				Self.stream = CreateSocketStream(Self.sock) 
				Self.autoClose = autoClose
			   Return True
				
			Else
			   Return False
				
			End If
			
		End Method
		
		Method Get:HTTPReturnData(get:String = "") 'def get = ""
		  Local HTRD:HTTPReturnData = New HTTPReturnData, buffer:String, rlnewline:String
			
		   'WriteLine(stream, "GET /" + get + " HTTP/1.0~nHost: " + Self.host + "~nUser-Agent: " + Self.agent + "~n~n") 
		   WriteLine stream, "GET /" + get + " HTTP/1.0" ' GET / gets Default page
		   WriteLine stream, "Host: " + Self.host
		   WriteLine stream, "User-Agent: " + Self.agent
		   WriteLine stream, "Accept: */*"
		   WriteLine stream, ""
		
		  Local cExtType:String, cExt:String, cLength:Int
		   ReadLine(stream)
			While Not Eof(stream)
			  rlnewline = ReadLine(stream)
			  Local spos:Int = Instr(rlnewline, ":")
			'Print "rln" + Lower(Left(rlnewline, spos - 1)) + "rln"
				Select Lower(Left(rlnewline, spos - 1))
					Case "content-type"
					  Local prtmp:String = Mid(rlnewline, spos + 2, Instr(rlnewline, ";") - spos - 2), slpos:Int = Instr(prtmp, "/")
					  cExtType = Left(prtmp, slpos - 1) cExt = Right(prtmp, prtmp.Length - slpos)
						
					Case "content-length"
						cLength = Int(Right(rlnewline, rlnewline.Length - spos - 1))
						
					Case ""
					   Exit
						
				End Select
				
			Wend
			
			While Not Eof(stream) 
			  rlnewline = ReadLine(stream)
				
				buffer:+ rlnewline + "~n"
				
			Wend
			
		  HTRD.Set(Left(buffer, buffer.Length - 1), cExtType, cExt, cLength)
			
		   If autoClose Close() 
		   
		   Return HTRD
		 
			
		End Method
		
		Method Post:String(page:String = "", keys:String[] , values:String[] ) 
		  Local buffer:String
		  Local data:String
		  Local i:Int
			
			For i = 0 To keys.Length - 1
				data:+ UrlEncode(keys[i] ) + "=" + UrlEncode(values[i] ) + "&amp;"
				
			Next
			
		  data = Left(data, data.Length - 1) 
			WriteLine(stream, "POST /" + page + " HTTP/1.0~nHost: " + Self.host + "~nUser-Agent: " + Self.agent + "~nContent-Length: " + data.Length + "~nContent-Type: application/x-www-form-urlencoded~n~n" + data) 
			
			While Not Eof(stream) 
				buffer:+ReadLine(stream) + "~n"
				
			Wend
			
		 If autoClose Close() 
		
		   Return Left(buffer, buffer.Length - 1) 
			
		End Method
		
		Method Close() 
			If Self.stream CloseStream(Self.stream) 
			If Self.sock CloseSocket(Self.sock) 
			
		End Method
	
		Function UrlEncode:String(url:String) 
		  Local buffer:String
		  Local Char:Int
		  Local i:Int
			
			For i = 1 To url.Length
			  Char = Asc(Mid(url, i, 1)) 
				
				If(Char &gt;= 48 And Char &lt;= 57) Or (Char &gt;= 65 And Char &lt;= 90) Or (Char &gt;= 97 And Char &lt;= 122) Or Char = 43 Or Char = 45 Or Char = 46 Or Char = 95
					buffer = buffer + Chr(Char) 
					
				Else
					buffer = buffer + "%" + Right(Hex(Char), 2) 
					
				End If
				
			Next
			
		   Return buffer
		
		End Function
		
		Function UrlDecode:String(url:String) 
		  Local sHex:String = "0123456789ABCDEF"
		  Local buffer:String
		  Local i:Int
			
			For i = 1 To url.Length
				If Mid(url, i, 1) = "%"
					buffer = buffer + Chr(Instr(sHex, Mid(url, i + 1, 1)) Shl 4 + Instr(sHex, Mid(url, i + 2, 1)) - 17) 
				   i:+ 2
					
				Else
					buffer = buffer + Mid(url, i, 1)
					 
				End If
				
			Next
			
		   Return buffer
		
		End Function
	
End Type

Type HTTPReturnData
	Field Content:String
	Field ContLength:Int
	
	Field ExtensionType:String
	Field Extension:String		
		
		Method Set(Cont:String, ExtType:String, Ext:String, CLen:Int)
			Content = Cont
			ContLength = CLen
			Extension = Ext
			ExtensionType = ExtType
			
		End Method
		
		Method SaveContent(File:String, useExt:Int = False)
		 
		 If useExt File:+ "." + Extension
			
			SaveText(Content, File)
			
		End Method
		
		Method ToString:String()
			Return "Content-Type: " + ExtensionType + "/" + Extension + "~nContent-Length: " + ContLength
			
		End Method
		
End Type
	
New MyApp.Run() 

End

Type MyApp Extends wxApp
	Field testframe:MyFrame
	
		Method OnInit:Int() 
			testframe = MyFrame(New MyFrame.Create(Null, - 1, "rss Channel reader", - 1, - 1, 575, 390, wxMINIMIZE_BOX | wxMAXIMIZE_BOX | wxCLOSE_BOX | wxSYSTEM_MENU | wxCAPTION | wxCLIP_CHILDREN)) 
				testframe.Show() 
				
		   Return True
		End Method
		
End Type

Type MyFrame Extends wxFrame
	Field ctrpanel:wxPanel
	
	Field TCtr_rssfeedurl:wxTextCtrl

	Field LCtr_ChannelItems:wxListCtrl
	Field TCtr_rssItemInfo:wxTextCtrl
	
	Field rchan:rssChannel
	
		Method OnInit() 
		   ctrpanel = New wxPanel.Create(Self) 
			rchan = New rssChannel
			
			TCtr_rssfeedurl = New wxTextCtrl.Create(ctrpanel, idTCtr_rssfeedurl, "www.hulu.com/feed/show/60/episodes", 5, 10, 200, 20, wxTE_PROCESS_ENTER) 
			New wxButton.Create(ctrpanel, idbtnrefresh, "Refresh", 210, 10, 64, 24) 
			
			LCtr_ChannelItems = wxListCtrl(New wxListCtrl.Create(ctrpanel, idLCtr_ChannelItems, 5, 55, 200, 300, wxLC_LIST | wxLC_REPORT | wxLC_SINGLE_SEL | wxSUNKEN_BORDER)) 
				'LCtr_ChannelItems.InsertColumn(0, "rss items") 
			TCtr_rssItemInfo = New wxTextCtrl.Create(ctrpanel, idTCtr_rssItemInfo, "", 210, 55, 350, 300, wxTE_MULTILINE) 
			
			RefreshChannel() 
			
			'connect events
			Connect(idbtnrefresh, wxEVT_COMMAND_BUTTON_CLICKED, OnRefreshChannel) 
			Connect(idTCtr_rssfeedurl, wxEVT_COMMAND_TEXT_ENTER, OnRefreshChannel) 
			
			Connect(idLCtr_ChannelItems, wxEVT_COMMAND_LIST_ITEM_SELECTED, OnSelected) 
			
			ConnectAny(wxEVT_CLOSE_WINDOW, OnQuit) 
			
		   Centre() 
		   
		End Method
		
		Method RefreshChannel() 
		  Local feedurl:String = TCtr_rssfeedurl.GetLineText(0) 
		   
		   If Left(feedurl, 7) = "http://" Then feedurl = Right(feedurl, feedurl.Length - 7) 
		   
		  Local firstsl:Int = Instr(feedurl, "/"), sitename:String = Left(feedurl, firstsl - 1), getfile:String = Right(feedurl, feedurl.Length - firstsl) 
		  Local httpg:Thttp = New Thttp, htrd:HTTPReturnData
			If httpg.Open(sitename) 
			  Local doc:TxmlDoc, root:TxmlNode
				rchan.Clear() 
				htrd = httpg.Get(getfile) 
				
				doc = TxmlDoc.parseDoc(htrd.Content) 
				root = doc.GetRootElement() 
				
				rchan.ReadChannel(root) 
					rchan.lk_Feed = "www.hulu.com/feed/show/60/episodes"
					
				LCtr_ChannelItems.ClearAll() 
				
			  Local ritem:rssItem
				For ritem = EachIn rchan.chnItems
				  Local wxl:wxListItem = New wxListItem.Create() 
					wxl.SetData(ritem) wxl.SetText(ritem.Title) 
					LCtr_ChannelItems.InsertItem(wxl) 
					
				Next
				rssLoadInfo(ritem) 
			Else
				wxMessageBox("error: can't obtain url, sitename: ~q" + sitename + "~q getfile: ~q" + getfile + "~q") 
				
			End If
			
		End Method
		
		Function OnRefreshChannel(evt:wxEvent) 
		  Local mfr:MyFrame = MyFrame(evt.parent) 
			mfr.RefreshChannel() 
			
		End Function
		
		Function OnSelected(evt:wxEvent) 
		  Local mfr:MyFrame = MyFrame(evt.parent) 
		  Local lst:wxListCtrl = mfr.LCtr_ChannelItems
		  
			 mfr.rssLoadInfo(rssItem(wxListEvent(evt).GetItem().GetData())) 
			
		End Function
		
		Method rssLoadInfo(item:rssItem)    'load rssitem info into a browser area | currently a textctrl
		   tctr_rssItemInfo.Clear() 
			tctr_rssItemInfo.AppendText(item.Title + " date: " + item.Pubdate + "~n") 
			tctr_rssItemInfo.AppendText(item.lk_Link + "~n" + item.Description) 
			
		End Method
		
		Function OnQuit(event:wxEvent) 
			wxWindow(event.parent).Close(True) 
			
		End Function
	
End Type
'id's
Const idTCtr_rssfeedurl:Int = 101
Const idbtnrefresh:Int = 102
	
Const idLCtr_ChannelItems:Int = 103
Const idTCtr_rssItemInfo:Int = 104</textarea> <br><br></td></tr></table><br>
<a name="856980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice :-)<br><br>Just a couple of tweaks to make it happy to run on Mac :<br><br>You need to remove wxLC_REPORT from the LCtr_ChannelItems create. Since you already have wxLC_LIST.<br><br>You shouldn't connect to wxEVT_CLOSE_WINDOW and then in the event handler called Window.Close(). Either, don't connect at all (it will automagically quit the app when the last window is closed), or instead call Window.Destroy().<br><br>:o) <br><br></td></tr></table><br>
<a name="857012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try using this as the rss feed: <a href="http://www.nytimes.com/services/xml/rss/nyt/Technology.xml" target="_blank">http://www.nytimes.com/services/xml/rss/nyt/Technology.xml</a><br><br>Is there a way it can be a normal listbox (going down, instead of going on to the right)?<br><br>EDIT: wxHtmlWindow updated version, includes another problem, when displaying the description the image does not show, however in firefox (opening the "test.html" file) shows everything correctly.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

Framework wx.wxApp
Import wx.wxFrame
Import wx.wxListCtrl
Import wx.wxButton
Import wx.wxPanel
Import wx.wxTextCtrl
Import wx.wxHtmlWindow
Import wx.wxSystemSettings

Import brl.basic
Import brl.blitz
Import brl.retro
Import brl.system

Import BaH.libxml

Type rssChannel
  Global _list:TList = New TList
	
	'channel information
	Field Title:String			'title of channel
	Field Description:String	'description of channel
	Field Pubdate:String		'date channel was created?/updated?
	'channel links
	Field lk_Feed:String		'link to the channel's rss feed
	Field lk_Link:String		'link to main feed site
	
	Field chnItems:TList
		
		Method New() 
			chnItems = New TList
		   _list.AddLast(Self) 
			
		End Method
		
		Method SetTitle(_Title:String) 
			Title = _Title
			
		End Method
		
		Method SetDescription(_Desc:String) 
			Description = _Desc
		
		End Method
		
		'fix incoming date for appended timezone data (ex. Thu, 13 Mar 2008 19:26:44 &gt;-0000&lt;)
		Method SetPubdate(pubdateraw:String) 
			Pubdate = pubdateraw
			
		End Method
		
		Method SetLink(Link:String, which:Int) 
		 
			Select which
				Case 0
					lk_Feed = Link
					
				Case 1
					lk_Link = Link
					
			End Select
			
		End Method
		
		Method ReadChannel(root:TxmlNode) 
		  Local channel:TxmlNode = TxmlNode(root.GetFirstChild()) 
		
		   If chnItems.Count() &gt; 0 Then Clear() 
		  
			For Local part:TxmlNode = EachIn channel.getChildren()
			
				Select Lower(part.GetName()) 
				
					Case "title"
						SetTitle(part.getContent()) 
						
					Case "description"
						SetDescription(part.getContent()) 
						
					Case "pubdate"
						SetPubdate(part.getContent()) 
						
					Case "link"
						SetLink(part.getContent(), 1) 
						
					Case "item"
						ReadItem(part) 
						
					Default
						DebugLog("rchn noparse: ~q" + part.getName() + "~q") 
						DebugLog("~t" + part.getName() + " :: " + part.getContent()) 
						
				End Select
			
			Next
		
		End Method
		
		Method ReadItem(parent:TxmlNode) 
		  Local ritem:rssItem = New rssItem
			
			For Local part:TxmlNode = EachIn parent.getChildren() 
			
				Select Lower(part.GetName()) 
				
					Case "title"
						ritem.SetTitle(part.getContent()) 
						
					Case "description"
						ritem.SetDescription(part.getContent()) 
						
					Case "pubdate"
						ritem.SetPubdate(part.getContent()) 
						
					Case "link"
						ritem.SetLink(part.getContent()) 
						
				End Select
			
			Next
			
		   chnItems.AddLast(ritem) 
		   
		End Method
		
		Method Clear() 
		  Local ritem:rssItem
		  
			For ritem = EachIn chnItems
				
				ritem.Clear(Self) 
				
			Next
			
			Title = Null ; Pubdate = Null
			Description = Null
			lk_Feed = Null ; lk_Link = Null
			
		End Method
		
End Type

Type rssItem
	'item information
	Field Title:String			'title of item
	Field Description:String	'description of item
	Field Pubdate:String		'date event occured
	'item links
	Field lk_Link:String		'referring link to event
	
		Method SetTitle(_Title:String) 
			Title = _Title
			
		End Method
		
		Method SetDescription(_Desc:String) 
			Description = _Desc
		
		End Method
		
		'fix incoming date for appended timezone data (Thu, 13 Mar 2008 19:26:44 &gt;-0000&lt;)
		Method SetPubdate(pubdateraw:String) 
			Pubdate = pubdateraw
			
		End Method
		
		Method SetLink(Link:String) 
			lk_Link = Link
			
		End Method
		
		Method Clear(channel:rssChannel) 
			Title = Null
			Description = Null
			Pubdate = Null
			lk_link = Null
			
		  channel.chnItems.Remove(Self) 
		End Method
		
		
		Function Create:rssItem(Title:String, Desc:String, Pubdate:String, lk_Link:String) 
		  Local ritem:rssItem = New rssItem
			
			ritem.Title = Title
			ritem.Description = Desc
			ritem.SetPubdate(Pubdate) 
			ritem.lk_Link = lk_Link
			
		   Return ritem
		   
		End Function
		
End Type

Type Thttp
	Field sock:TSocket
	Field stream:TStream
	Field host:String
	Field agent:String = "BlitzHTTP/1.0"
	Field autoClose:Int
	
		Method Open:Int(host:String, autoClose:Int = False) 
		  Self.sock = CreateTCPSocket()
			 
			If ConnectSocket(Self.sock, HostIp(host), 80) 
				Self.host = host
				Self.stream = CreateSocketStream(Self.sock) 
				Self.autoClose = autoClose
			   Return True
				
			Else
			   Return False
				
			End If
			
		End Method
		
		Method Get:HTTPReturnData(get:String = "") 'def get = ""
		  Local HTRD:HTTPReturnData = New HTTPReturnData, buffer:String, rlnewline:String
			
		   'WriteLine(stream, "GET /" + get + " HTTP/1.0~nHost: " + Self.host + "~nUser-Agent: " + Self.agent + "~n~n") 
		   WriteLine stream, "GET /" + get + " HTTP/1.0" ' GET / gets Default page
		   WriteLine stream, "Host: " + Self.host
		   WriteLine stream, "User-Agent: " + Self.agent
		   WriteLine stream, "Accept: */*"
		   WriteLine stream, ""
		
		  Local cExtType:String, cExt:String, cLength:Int
		   ReadLine(stream)
			While Not Eof(stream)
			  rlnewline = ReadLine(stream)
			  Local spos:Int = Instr(rlnewline, ":")
			'Print "rln" + Lower(Left(rlnewline, spos - 1)) + "rln"
				Select Lower(Left(rlnewline, spos - 1))
					Case "content-type"
					  Local prtmp:String = Mid(rlnewline, spos + 2, Instr(rlnewline, ";") - spos - 2), slpos:Int = Instr(prtmp, "/")
					  cExtType = Left(prtmp, slpos - 1) cExt = Right(prtmp, prtmp.Length - slpos)
						
					Case "content-length"
						cLength = Int(Right(rlnewline, rlnewline.Length - spos - 1))
						
					Case ""
					   Exit
						
				End Select
				
			Wend
			
			While Not Eof(stream) 
			  rlnewline = ReadLine(stream)
				
				buffer:+ rlnewline + "~n"
				
			Wend
			
		  HTRD.Set(Left(buffer, buffer.Length - 1), cExtType, cExt, cLength)
			
		   If autoClose Close() 
		   
		   Return HTRD
		 
			
		End Method
		
		Method Post:String(page:String = "", keys:String[] , values:String[] ) 
		  Local buffer:String
		  Local data:String
		  Local i:Int
			
			For i = 0 To keys.Length - 1
				data:+ UrlEncode(keys[i] ) + "=" + UrlEncode(values[i] ) + "&amp;"
				
			Next
			
		  data = Left(data, data.Length - 1) 
			WriteLine(stream, "POST /" + page + " HTTP/1.0~nHost: " + Self.host + "~nUser-Agent: " + Self.agent + "~nContent-Length: " + data.Length + "~nContent-Type: application/x-www-form-urlencoded~n~n" + data) 
			
			While Not Eof(stream) 
				buffer:+ReadLine(stream) + "~n"
				
			Wend
			
		 If autoClose Close() 
		
		   Return Left(buffer, buffer.Length - 1) 
			
		End Method
		
		Method Close() 
			If Self.stream CloseStream(Self.stream) 
			If Self.sock CloseSocket(Self.sock) 
			
		End Method
	
		Function UrlEncode:String(url:String) 
		  Local buffer:String
		  Local Char:Int
		  Local i:Int
			
			For i = 1 To url.Length
			  Char = Asc(Mid(url, i, 1)) 
				
				If(Char &gt;= 48 And Char &lt;= 57) Or (Char &gt;= 65 And Char &lt;= 90) Or (Char &gt;= 97 And Char &lt;= 122) Or Char = 43 Or Char = 45 Or Char = 46 Or Char = 95
					buffer = buffer + Chr(Char) 
					
				Else
					buffer = buffer + "%" + Right(Hex(Char), 2) 
					
				End If
				
			Next
			
		   Return buffer
		
		End Function
		
		Function UrlDecode:String(url:String) 
		  Local sHex:String = "0123456789ABCDEF"
		  Local buffer:String
		  Local i:Int
			
			For i = 1 To url.Length
				If Mid(url, i, 1) = "%"
					buffer = buffer + Chr(Instr(sHex, Mid(url, i + 1, 1)) Shl 4 + Instr(sHex, Mid(url, i + 2, 1)) - 17) 
				   i:+ 2
					
				Else
					buffer = buffer + Mid(url, i, 1)
					 
				End If
				
			Next
			
		   Return buffer
		
		End Function
	
End Type

Type HTTPReturnData
	Field Content:String
	Field ContLength:Int
	
	Field ExtensionType:String
	Field Extension:String		
		
		Method Set(Cont:String, ExtType:String, Ext:String, CLen:Int)
			Content = Cont
			ContLength = CLen
			Extension = Ext
			ExtensionType = ExtType
			
		End Method
		
		Method SaveContent(File:String, useExt:Int = False)
		 
		 If useExt File:+ "." + Extension
			
			SaveText(Content, File)
			
		End Method
		
		Method ToString:String()
			Return "Content-Type: " + ExtensionType + "/" + Extension + "~nContent-Length: " + ContLength
			
		End Method
		
End Type
	
New MyApp.Run() 

End

Type MyApp Extends wxApp
	Field testframe:MyFrame
	
		Method OnInit:Int() 
			testframe = MyFrame(New MyFrame.Create(Null, - 1, "rss Channel reader", - 1, - 1, 575, 390, wxMINIMIZE_BOX | wxCLOSE_BOX | wxSYSTEM_MENU | wxCAPTION | wxCLIP_CHILDREN)) 
				testframe.Show() 
				
		   Return True
		End Method
		
End Type

Type MyFrame Extends wxFrame
	Field ctrpanel:wxPanel
	
	Field TCtr_rssfeedurl:wxTextCtrl

	Field LCtr_ChannelItems:wxListCtrl
	'Field TCtr_rssItemInfo:wxTextCtrl
	Field Htw_rssItemInfo:wxHtmlWindow
	
	Field rchan:rssChannel
	
		Method OnInit() 
		   ctrpanel = New wxPanel.Create(Self) 
			rchan = New rssChannel
			
			TCtr_rssfeedurl = New wxTextCtrl.Create(ctrpanel, idTCtr_rssfeedurl, "www.hulu.com/feed/show/60/episodes", 5, 17, 400, 20, wxTE_PROCESS_ENTER) 
			New wxButton.Create(ctrpanel, idbtnrefresh, "Refresh", 410, 16, 64, 22) 
			
			LCtr_ChannelItems = wxListCtrl(New wxListCtrl.Create(ctrpanel, idLCtr_ChannelItems, 5, 55, 200, 300, wxLC_LIST | wxLC_SINGLE_SEL | wxSUNKEN_BORDER)) 
				'LCtr_ChannelItems.InsertColumn(0, "rss items") 
			'TCtr_rssItemInfo = New wxTextCtrl.Create(ctrpanel, idTCtr_rssItemInfo, "", 210, 55, 350, 300, wxTE_MULTILINE) 
			Htw_rssItemInfo = New wxHtmlWindow.Create(ctrpanel, idHtw_rssItemInfo, 210, 55, 350, 300) 
				
			RefreshChannel() 
			
			'connect events
			Connect(idbtnrefresh, wxEVT_COMMAND_BUTTON_CLICKED, OnRefreshChannel) 
			Connect(idTCtr_rssfeedurl, wxEVT_COMMAND_TEXT_ENTER, OnRefreshChannel) 
			
			Connect(idLCtr_ChannelItems, wxEVT_COMMAND_LIST_ITEM_SELECTED, OnSelected) 
			Connect(idHtw_rssItemInfo, wxEVT_COMMAND_HTML_LINK_CLICKED, OnrssLink) 
			
			'ConnectAny(wxEVT_CLOSE_WINDOW, OnQuit) 
			
		   Centre() 
		   
		End Method
		
		Method RefreshChannel() 
		  Local feedurl:String = TCtr_rssfeedurl.GetLineText(0) 
		   
		   If Left(feedurl, 7) = "http://" Then feedurl = Right(feedurl, feedurl.Length - 7) 
		   
		  Local firstsl:Int = Instr(feedurl, "/"), sitename:String = Left(feedurl, firstsl - 1), getfile:String = Right(feedurl, feedurl.Length - firstsl) 
		  Local httpg:Thttp = New Thttp, htrd:HTTPReturnData
			If httpg.Open(sitename) 
			  Local doc:TxmlDoc, root:TxmlNode
				rchan.Clear() 
				htrd = httpg.Get(getfile) 
				
				doc = TxmlDoc.parseDoc(htrd.Content) 
				root = doc.GetRootElement() 
				
				rchan.ReadChannel(root) 
					rchan.lk_Feed = "www.hulu.com/feed/show/60/episodes"
					
				LCtr_ChannelItems.ClearAll() 
				
			  Local ritem:rssItem
				For ritem = EachIn rchan.chnItems
				  Local wxl:wxListItem = New wxListItem.Create() 
					wxl.SetData(ritem) wxl.SetText(ritem.Title) 
					LCtr_ChannelItems.InsertItem(wxl) 
					print ritem.Description
				Next
				
			   rssLoadInfo(ritem) 
				
			Else
				wxMessageBox("error: can't obtain url, sitename: ~q" + sitename + "~q getfile: ~q" + getfile + "~q") 
				
			End If
			
		End Method
		
		Function OnRefreshChannel(evt:wxEvent) 
		  Local mfr:MyFrame = MyFrame(evt.parent) 
			mfr.RefreshChannel() 
			
		End Function
		
		Function OnSelected(evt:wxEvent) 
		  Local mfr:MyFrame = MyFrame(evt.parent) 
		  Local lst:wxListCtrl = mfr.LCtr_ChannelItems
		  
			 mfr.rssLoadInfo(rssItem(wxListEvent(evt).GetItem().GetData())) 
			
		End Function
		
		Method rssLoadInfo(item:rssItem)    'load rssitem info into a browser area | currently a textctrl
		   'tctr_rssItemInfo.Clear() 
			'tctr_rssItemInfo.AppendText(item.Title + " date: " + item.Pubdate + "~n") 
			'tctr_rssItemInfo.AppendText(item.lk_Link + "~n" + item.Description)
		  Local pageCont:String = "&lt;html&gt;&lt;body&gt;~r~n" + ..
		  		"&lt;a href=~q" + item.lk_Link + "~q&gt;" + item.Title + "&lt;/a&gt;~r~n" + ..
				item.Description + ..
				"~r~n&lt;/body&gt;&lt;/html&gt;"
				
			Htw_rssItemInfo.SetPage(pageCont) 
			SaveText(pageCont, "test.html") 
		
		End Method
		
		Function OnrssLink(evt:wxEvent) 
			OpenURL(wxHtmlLinkEvent(evt).GetLinkInfo().GetHref()) 
			
		End Function
		
		'Function OnQuit(event:wxEvent) 
		'	wxWindow(event.parent).Close(True) 
		'	
		'End Function
	
End Type
'id's
Const idTCtr_rssfeedurl:Int = 101
Const idbtnrefresh:Int = 102
	
Const idLCtr_ChannelItems:Int = 103
Const idTCtr_rssItemInfo:Int = 104
Const idHtw_rssItemInfo:Int = 105</textarea> <br><br></td></tr></table><br>
<a name="857020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes this data in the wrong column business vexed me as well. Never really found the solution. This (sort of) works.<br><br>[edited to add hscrollbar]<br><br>Oh, and you lose the first item, (it's in the invisible header) - so either dummy first item or create the header outside the for-next I guess.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
LCtr_ChannelItems = wxListCtrl(New wxListCtrl.Create(ctrpanel, idLCtr_ChannelItems, 5, 55, 200, 300, wxLC_REPORT | wxHSCROLL | wxLC_NO_HEADER | wxLC_SINGLE_SEL | wxSUNKEN_BORDER)) 

Local row:Int
Local ritem:rssItem
For ritem = EachIn rchan.chnItems
  Local wxl:wxListItem = New wxListItem.Create() 
	wxl.SetData(ritem) wxl.SetText(ritem.Title) 
	wxl.SetId(row)
	wxl.SetColumn(0)
	
	If Not row
		LCtr_ChannelItems.InsertColumnItem(0,wxl) 
	Else
		LCtr_ChannelItems.InsertItem(wxl) 
	EndIf
	row :+ 1
	Print ritem.Description
Next
LCtr_ChannelItems.SetColumnWidth( 0, 400 )
</textarea> <br><br></td></tr></table><br>
<a name="857027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This will show them all:<br><pre class=code> Local row:Int
			  Local ritem:rssItem, wxl:wxListItem = New wxListItem.Create() 
				wxl.SetData(Null) wxl.SetText("") wxl.SetId(row) wxl.SetColumn(0) 
				LCtr_ChannelItems.InsertColumnItem(0, wxl) 
				
			  row:+1
				For ritem = EachIn rchan.chnItems
				  wxl:wxListItem = New wxListItem.Create() 
					wxl.SetData(ritem) wxl.SetText(ritem.Title) 
					wxl.SetId(row) wxl.SetColumn(0) 
					
					LCtr_ChannelItems.InsertItem(wxl) 
					row:+1
					
					Print ritem.Description
					
				Next</pre> <br><br></td></tr></table><br>
<a name="857032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or even<br><pre class=code>
Local row:Int = 1
LCtr_ChannelItems.InsertColumnItem(0, New wxListItem.Create())
</pre><br>:-) No idea re that other problem though. I'm seeing an image in Leopard? I did read somewhere on the wxWidgets lists that wxHtmlWindow was considered a little flakey. Not what we want to hear I know. <br><br></td></tr></table><br>
<a name="857038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't currently test it in Ubuntu, and I don't have a mac. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
