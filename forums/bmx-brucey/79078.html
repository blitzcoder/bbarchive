<!DOCTYPE html><html lang="en" ><head ><title >DbMysql -  Blob / Timestamp</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >DbMysql -  Blob / Timestamp</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >DbMysql -  Blob / Timestamp</a><br><br>
<a name="887884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I had any idea how to setup blob, I would have tried this myself but I have absolutely no idea how to impliment this in your dbmysql mod.<br><br>So..=P Any plans on adding functionality to blob and timestamp field datatypes? Or suggestions?<br><br>I need to store large image files (up to 500kb) and longtext is not an option, and blob isn't functional so as far as I know, i'm out of alternatives to storing them in the database. <br><br></td></tr></table><br>
<a name="887890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll have a look into it when I get a chance :-) <br><br></td></tr></table><br>
<a name="887908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you base64 them and prepared insert them as Text fields? <br><br></td></tr></table><br>
<a name="887911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> base64 makes them bigger, and it's probably not as efficient as storing the data in its raw form.<br><br>I expect a blob will just be doing a memcopy or something similar. <br><br></td></tr></table><br>
<a name="887997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, unfortunately the amount of images to load will exceed my comfort and encoding will really slow down loading,processing and data transfer for what i'm trying to achieve. <br>I normally would just have the server save the files into a package or something, but it becomes a million times easier to have everything in a single database for backing up.<br><br>Thanks for the idea though =) <br><br></td></tr></table><br>
<a name="888063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have come across the occasional argument on the net over whether its a good thing to store large image files in a database and not via the file system. Those against claim it bloats and slows the database; and it's not like you can search against the image data anyway...  <br><br>But I guess it all depends on your particular needs.<br><br>Mind you - blobs would be nice Brucey ;-) <br><br></td></tr></table><br>
<a name="888227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> It all depends on the database. I don't use MySQL because it forces me to either buy one of their not-so-cheap subscriptions or to GPL my own applications, so I don't know how it behaves when you heavily use BLOBs.<br><br>I know that the FoxPro database engine, for example, did not slow down when you used BLOBs - it stored its indexes, data and BLOBs in separate files, so one would not have a direct impact on the others. Only when you deleted BLOBs, the files bloated because it only marked a blob as deleted, but did not shrink the file - that you had to do manually. Anyway, using BLOBs in the FOXDBE was quick and effective.<br><br>Storing image files on the file system has a ton of implications and in my opinion only unnecessarily complicates things; not when you only have --one-- file and --one-- database server, when you start using clusters or only have very restrictive file server access, you might no longer want to use that approach.<br><br>As for not being able to search through a BLOB... Well, maybe MySQL cannot do that. But I am not so sure about Oracle, and I know for certain that back at Alaska Software we even had third party tools that allowed for extremely fast searching through the BLOBs of our database. I used BLOBs to store large texts of variable length with attachments --- or to store persistent objects.<br><br>From what I've heard already ten years ago, there -are- some very specialized applications for Oracle that actually can search through image data and that are able to process queries like "show me all the houses with a red roof" based upon the actual image data stored in the database. But, well, there must be some reasons why people are still paying those high license fees for Oracle DBs. <br><br></td></tr></table><br>
<a name="888264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But I guess it all depends on your particular needs. <br></div><br><br>I agree.<br><br>For a forum, or heavily visited websites? <b>Hell</b> no. <br><br>For my use of hardly occasional loading of small images, and to ensure that everything, including files, are located within the same database? I'm not even going to be doing odd queries. A simple select @ ID, bank it, load it. I think blob is perfect for my needs, otherwise I agree with those people. <br><br></td></tr></table><br>
<a name="941926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any news on this? I really would like to be able to store pdf files in a sqlite database. <br><br></td></tr></table><br>
<a name="942011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Is there any news on this? <br></div><br>It's currently being investigated.<br><br>Unfortunately, work has eaten into some "me" time of late, so things have been moving a bit more slowly than usual. <br><br></td></tr></table><br>
<a name="942035"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks alot. but i shouldnt hold my breath i guess :) <br><br></td></tr></table><br>
<a name="943325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I've implemented blob support for DBMySQL. (also requires latest bah.database)<br><br>There's a new "test", called blob_test, which loads some jpegs into a table, and later retrieves them into a pixmap, displaying the width and height.<br>Nothing very exciting I know...<br><br>By default when you create a TDBBlob, it will create a copy of the data. You can override this by passing False as the third parameter :<br><pre class=code>
Function Set:TDBBlob(value:Byte Ptr, size:Int, copy:Int = True)

or

Method setBlob(v:Byte Ptr, s:Int, copy:Int = True)
</pre><br>If you use False, you'll need to ensure your data is valid (ie. not GC'd) for the duration of the SQL execution (for your Insert or Update).<br><br><br>I haven't tested it like a maniac yet, so there may well be issues, but on first glance it appears to work as intended.<br><br>The other DB modules will get done at some point too :-p<br><br>&lt;EDIT&gt; 8 months... that's a good turn-around time, huh? :-/ <br><br></td></tr></table><br>
<a name="943343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awwwesome. Thanks brucey, i've been itching for this for a while now. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
