<!DOCTYPE html><html lang="en" ><head ><title >Guide: How to compile wxMax with g++ 4.x.x</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Guide: How to compile wxMax with g++ 4.x.x</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >Guide: How to compile wxMax with g++ 4.x.x</a><br><br>
<a name="1141284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Noobody</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since I finally got wxMax to compile after a few days of effort, I thought I'd make a quick guide for others experiencing similar problems.<br><br>At the end of this post you will find a download containing all the necessary files and a quick step-by-step guide to get wxMax working. The files were generated with g++ 4.6.2 and may not work with older versions. The following guide is provided for completeness in case the files don't work for you.<br>The files will most likely only work on Windows.<br><br><br>If you compile wxMax with a newer MinGW version, you'll get thousands of linker errors about missing references. This is because the libraries provided with current wxMax distributions have been compiled with an older MinGW version and won't work with newer versions anymore. To fix this, you'll need to do the following steps:<br><br>1. Get the wxWidgets 2.8.12 source distribution from <a href="http://www.wxwidgets.org/downloads/#latest_stable" target="_blank">here</a> (wxAll -&gt; other formats: zip).<br>Extract the zip file and then open up wxWidgets-2.8.12/build/msw and edit config.gcc in your preferred text editor.<br>Then change the following lines:<br>UNICODE ?= 0 to UNICODE ?= 1<br>BUILD ?= debug to BUILD ?= release<br>USE_OPENGL ?= 0 to USE_OPENGL ?= 1<br><br>Then open wxWidgets-2.8.12/include/wx/msw/setup0.h and search for wxUSE_GLCANVAS and wxUSE_GRAPHICS_CONTEXT. Change the corresponding lines to:<br>#define wxUSE_GRAPHICS_CONTEXT 1<br>#define wxUSE_GLCANVAS       1<br><br>Do the same changes to wxWidgets-2.8.12/include/wx/msw/setup.h and wxWidgets-2.8.12/wx/setup_inc.h<br><br>Now you're all set! Fire up the MSYS shell (download it <a href="http://www.mingw.org/wiki/MSYS" target="_blank">here</a> if you don't have it already), use cd to change the directory to wxWidgets-2.8.12/build/msw and then execute the following command:<br>mingw32-make -f makefile.gcc<br><br>Let the build run and finish.<br><br>2. Copy all libraries and the mswu folder from wxWidgets-2.8.12/lib/gcc_lib to wx.mod/lib/win32. Overwrite all existing files.<br><br>3. Go to your MinGW folder and copy from MinGW/lib the libraries libgdiplus.a, libodb32.a, librpcrt4.a and libwinspool.a to wx.mod/lib/win32 (overwrite existing files)<br><br>4. Go to your BMax/lib folder and overwrite the existing .o and .a files with the corresponding files found in MinGW/lib and MinGW/lib/gcc/mingw32/YOURMINGWVERSION<br><br>I tested with MinGW 4.5.2 and 4.6.2 and BMax 1.45 and it seems you also need to copy libstdc++.dll.a and libgcc_s.a to the BlitzMax/bin folder (more about this later)<br><br>5. Go to your BMax/bin folder and overwrite ar.exe and ld.exe with the corresponding files found in MinGW/bin<br><br>6. You're almost set! The only things left are a few fixes to wxMax:<br>Open up wx.mod/wx.mod/common.bmx, go to line 170 (right after the last ? ) and paste the following line:<br>Import "-lgcc_s"<br><br>Open wx.mod/wxrarinputstream.mod/src/unrar/os.hpp and go to line 65. Replace the line<br>#include &lt;new.h&gt;<br>with<br>#include &lt;new&gt;<br><br>Delete wx.max2d and wx.glmax2d. They will not work with the new version of Max2D.<br><br>7. Recompile wx.mod with:<br>bmk makemods -a wx<br><br>Let it finish and then test your installation by running one of the samples coming with wxMax (in wx.mod/samples).<br><br>Congratulations! Your wxMax installation should now run perfectly with newer versions of MinGW. Now you can also compile widgets in the SVN trunk of wxMax not found in the binary releases, such as wxTreeListCtrl (something I needed).<br><br>The two additional libraries (libstdc++.dll.a and libgcc_s.a) were needed in my case to make additional linker errors disappear. I'm not sure whether they're needed in all cases, but they're certainly a requirement for gcc 4.5.2 and 4.6.2<br><br>In case you don't want to go through all the hassle, I prepared a compilation of all the needed libraries. Follow the steps in the installation.txt and you should be fine.<br>Download it <a href="http://www.noobody.org/Data/wxMax-Patch.zip" target="_blank">here</a><br>The packet has been tested with g++ 4.6.2, BlitzMax 1.45, Windows 7 and the latest wxMax version. <br><br></td></tr></table><br>
<a name="1145806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried different ways to reproduce this guide for linux.<br>Running an Xubuntu based distribution 12.04 64Bit.<br><br>While wxWidgets 2.8.12 is stable, most current wxMax from ages ago is for wxWidgets svn2.9.1.<br>Means - you get "overload of bla"-errors.<br><br>Compilation of wxWidgets is possible but you will compile 64bit libraries.<br>For being useable for wxMax you have to compile 32bit libraries which then add new hassles aka requirements of libgtk2.0-dev:i386 etc - which need pango and so on...<br><br>Further problem (I don't know why that happens) - although I compiled the libs as "static" (ages ago with 32bit linux) and they get linked into a BlitzMax-binary of 9mb size. They are not able to get executed now because the libraries are missing.<br>So - I included the libraries in the binary (static linking) but now they are missing withing the /lib or /lib64 /... directories ...<br><br><br>But for others to try:<br><br>within your linux terminal (or ssh session to your linux dev box :D)<br>$ ./configure --disable-shared --enable-unicode --with-opengl CC='gcc -m32' CXX='g++ -m32'<br>$ ./make<br>- the libs you need are in subfolder "lib" (also the "wx"-folder with the needed setup.h) - copy its content into "BlitzMax/mod/wx.mod/lib/linux"<br><br>the "with-opengl" flag replaces the need to replace the #define flags in the setup.h.<br>leaving out "CC='gcc -m32' CXX='g++ -m32'" will produce 64 bit libraries.<br><br><br>If one gets it working (i'm not in the mood trying it for ages now as I'm not needing it next days) - feel free to answer here.<br>(But remember: its for developing on 64bit with 32bit BlitzMax).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
