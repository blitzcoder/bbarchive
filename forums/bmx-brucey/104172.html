<!DOCTYPE html><html lang="en" ><head ><title >Which MinGW GCC to target?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Which MinGW GCC to target?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >Which MinGW GCC to target?</a><br><br>
<a name="1260219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, as some of you noticed with the recent wxMax release (which was built on GCC 4.8.x), there were issues with both GCC 4.7.x and 4.9.x.<br><br>The 4.7 bug should be easy enough to rectify, but the 4.9 problem requires some larger changes to the code - and it seems other modules will require patching to work with 4.9 too.<br><br>I am happy to push everything to build against 4.9 but there is a concern that older versions of GCC may have issues that need fixed or may not even work at all with the updated code.<br><br>Is it fair to push people who want to use my modules onto the later/latest versions of a compiler, or should I try to handle builds for a wider spread of versions?<br><br>I suppose I could add notes where appropriate, along the lines of, "Requires minimum GCC xxxx" ?<br><br>:o) <br><br></td></tr></table><br>
<a name="1260232"></a>

<a name="1260233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course a wider variety of version it works on is nice, but you probably have to choose your battles -- trying to support multiple versions is likely going to lead to some mods staying broken on different versions for long times since it's difficult/impractical to fix them -- a single recommended/supported version would prevent that from happening.<br><br>And if you need to make special modifications -anyway-, perhaps the best version to pick would be the latest and greatest (4.9) , rather than settling for one that's already been superseded...<br><br>But no matter which version(s) you pick there's likely always going to be SOME issues due to other developers module potentially having their own requirements -- but you can't please everyone all the time. :-?<br><br>Bottom line: "Choose your battles".<br><br><br>(By the way, somewhat unrelated: Since you've been working on 64-bit support through NG, are any of your other non-stock modules compatible with 64-bit builds? e.g. bah.regex -- it compiles, but can it be trusted on a 64-bit machine or is there still a risk of it blowing up if the executable happens to get loaded in a &gt;4GB memory address?  Do you happen to have a list of modules that you know work OK in 64-bit, or ones you know for sure don't?) <br><br></td></tr></table><br>
<a name="1260268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I had to use another MinGW for "wx.mod" than for "maxmod2.mod" it wont differ much .. but hmm, I am using "libxml.mod" and "persistence.mod" together with "maxmod2.mod". <br>As both seem to do their job as "Non-module" for now, I do not think that it will break things on my side if you push them all to one common denominator - eg. 4.9.x.<br><br>Like xlsior already mentioned: the best thing is if it removes the workload from you. If support of multiple compilers would be easy going people could backport things on their own (and provide the backports for specific "stable" releases - of course it helps if one assists them in creating the ports, or "guide" them).<br><br>In short: support one compiler (eg. 4.9.x).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1260290"></a>

<a name="1260291"></a>

<a name="1260296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Me think that somewhere down the line an update to 4.9.x might come anyway?<br>But pick one, and go for that one only.<br><br>Now if I could get vanilla bmx to compile with something newer than 4.7.x..<br>Can't for my life remember what I did to get it working last install (ie before disk crash)..<br><br>Getting some undefined reference to `pthread_mutex_lock' and so on now,<br>and yes I'm using latest bmk-ng, but it somehow try to use ld.exe to link.<br>And that's not right.. Is it? <br><br></td></tr></table><br>
<a name="1260299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Getting some undefined reference to `pthread_mutex_lock' and so on now <br></div><br>Probably requires a link to libwinpthread, or something like that.<br><br>The latest versions of MinGW have support for pthreads, and requires you to link in a static library as part of the build.<br><br>I've currently got this check :<br><pre class=code>
			' if using mingw64, we need to link to pthreads
			If processor.HasTarget("x86_64") And processor.BCCVersion() &lt;&gt; "BlitzMax" Then
				files :+ " -lwinpthread "
			End If
</pre><br>but perhaps I can drop the check for the new bcc and just add this in regardless.<br>Note: This HasTarget is true if you are building with the 64-bit TDM (which also supports building 32-bit apps). I make the assumption that you will be using this version if you are working on bmx ng. ;-) <br><br></td></tr></table><br>
<a name="1260302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I will absolutely use bmx-ng as most of what I do is either wx or console.<br>So.. What you are saying is that I can remove the "old" 32 bit onlu MinGW when I use your bmk-ng? <br><br></td></tr></table><br>
<a name="1260309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ... most of what I do is either wx or console <br></div><br>What!? No games? :-p <br><br></td></tr></table><br>
<a name="1260310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've now set bmk_ng (in the latest version) to link to pthreads on Win32 for the version of GCC &gt;= 4.8<br><br>I imagine someone with such a version will find that this is now an issue for them... but we'll see how it goes!<br><br><div class="quote">  What you are saying is that I can remove the "old" 32 bit onlu MinGW when I use your bmk-ng? <br></div><br>No, it should still work. If you have any other issues with it, let me know and I can tweak the settings some more. <br><br></td></tr></table><br>
<a name="1260314"></a>

<a name="1260315"></a>

<a name="1260318"></a>

<a name="1260319"></a>

<a name="1260320"></a>

<a name="1260321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick test compiling firepaint (threaded) now works on win8, tdm(32)-4.8.1 with old/vanilla bmx.<br>Switching to tdm64 also works, but fail bad on building modules.<br>That's no issue, just keeping c:\MinGW as 32bit/vanilla,<br>and have the MinGW32 (64bit) in the BMX-NG folder.<br>(bmx-vanilla/legacy: wxrarinputstream.mod still doesn't build tho as stated in another thread) <br><br></td></tr></table><br>
<a name="1260317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Slightly OT: <br>Brucey, Have you considered a binary release of NG that comes with the required mingw in a subdir and references that one explicitly? (that's how Nim and some other languages do it)<br>A few months back I built bmx-NG and got it working, but it was F**ing nightmare. ultimately, it created so many conflicts with my normal Bmax/Mingw setup that I had to get rid of it. Like me, I think more people would like to contribute to testing, but it needs to easier to setup, get running and be a little more isolated. <br><br></td></tr></table><br>
<a name="1260326"></a>

<a name="1260327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You get it running even with the demo version of blitzmax - as it just uses bmx-stuff.<br><br>with the bcc you then compile the modules.<br><br>But Brucey will surely be  able to tell you more.<br><br><br>Edit: if you want to add to the instructions:<br><a href="https://github.com/bmx-ng/bcc/issues/76" target="_blank">https://github.com/bmx-ng/bcc/issues/76</a><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1260330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you know what you're doing, it's easy enough. But if you don't know what bits should go where, then it's easy to mess it up too :-)<br><br>Anyway, as skid mentioned in another thread, given its "still in development" status, it's more for advanced users at the moment - those who don't mind hacking things around and expecting it not to work :-) <br><br></td></tr></table><br>
<a name="1260650"></a>

<a name="1260651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, I would consider making MSVC official tool chain for Windows.<br><br>There are good reasons why most large open source projects use it for win32 distributions as it is fast and stable (and produces binaries compatible with C++ API such as steam which is I suppose a little irrelevant). <br><br></td></tr></table><br>
<a name="1260659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suppose it is something to consider.<br><br>What are the *disadvantages* to using MSVC - apart from the obvious like having to completely rewrite chunks of code that expect GCC? <br><br></td></tr></table><br>
<a name="1260663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was using MSVC during development of BlitzMax with a modified bmk. From memory (and it is some years ago) it was trivial to add support and I would guess you will have less issues than those mentioned in this thread because nearly all open source software I have ever seen supports the compiler. <br><br>In fact I think in many places MinGW is seen as a bit of joke as it has some truly bizarre performance issues as though it was using chunks of cygwin to perform all it's IO when compiling. And then there is the problem that the rest / a lot of the world has left GCC behind in favor of LLVM. <br><br></td></tr></table><br>
<a name="1260664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am searching my archives.... <br><br></td></tr></table><br>
<a name="1260692"></a>

<a name="1260704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Henri</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>just wandering are we talking about bmk-ng or modules in general ? With bmg-ng there are bound to be similar issues regardless of the chosen compiler/chain sense distribution is in source format. If distribution would be in already binary format then those issues would of course be diminished.<br><br><br>@MinGW version:<br><br>TDM gcc 4.71 has been thus far considered quite stable release (e.g it is Codeblocks preferred version), but lot of optimizations have been introduced in newest versions so in that regard I would probably choose 4.9.2 as it's likely to be latest version before 5.0 . <br><br>-Henri <br><br></td></tr></table><br>
<a name="1260702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LT</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't MSVC rather costly? <br><br></td></tr></table><br>
<a name="1260716"></a>

<a name="1260717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Isn't MSVC rather costly? <br></div><br>Visual Studio express/comunity is free..<br><br>I (hope) this is what the talk is about :-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
