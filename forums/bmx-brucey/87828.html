<!DOCTYPE html><html lang="en" ><head ><title >Communicate with other Applications (OS X 10.5+)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Communicate with other Applications (OS X 10.5+)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >Communicate with other Applications (OS X 10.5+)</a><br><br>
<a name="996294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> While investigating how one might add AppleScript support to a BlitzMax app, I came across a newish API called Scripting Bridge. It requires 10.5 minimum, but is incredibly easy to use. So thumbs up from me :-)<br><br><b>BaH.ScriptingBridge</b> implements the API so that you too can communicate with scriptable Mac applications - like iTunes, Mail, etc etc.<br><br>You want to see what track is currently playing on iTunes?<br><pre class=code>
Local itunes:SBApplication = SBApplication.applicationWithBundleIdentifier("com.apple.iTunes")

Local track:SBObject = itunes.propertyAsObject("currentTrack")

Print "Track    : " + track.propertyAsString("name")
</pre><br>As you see, it's easy to use :-)<br><br>Here's some output from the provided example :<br><pre class=code>
Executing:example_itunes.debug
iTunes
Album    : Home (Original Motion Picture Soundtrack)
Track    : C*m Dederit
Duration : 303.79998779296875
Size     : 10084034 bytes
</pre><br><br>It also allows you to retrieve lists of things, like tracks of a particular playlist.<br><br>At the moment, I've only got properties working, so you can't currently call methods on the App (like pausing iTunes, or selecting a new track), but once I figure it out, I'll add it.<br><br>It's currently available in my googlecode SVN, and requires at least OS X 10.5.<br><br>Fun fun :-) <br><br></td></tr></table><br>
<a name="996346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've added a more interesting iTunes integration example, which shows how you might access data in "realtime", as well as things like album art.<br><br>Here's a screenshot :<br><br><img src="http://brucey.net/programming/blitz/misc/screenshots/example_itunes_player.png"><br><br>The image data is pulled straight from iTunes, and loaded into a TImage via a RamStream.<br><br><i>Note that due to limitations in the default bitmap font (not unicode friendly!), some of the characters in the album name (above) do not show, but they are in the String retrieved from iTunes </i>:-p <br><br></td></tr></table><br>
<a name="996348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>A bit about AppleScript</b><br>Just FYI, when an application supports AppleScripts, it defines what functionality it has in .sdef files within its application bundle.<br>There is a command-line tool you can use to generate a header (.h) file of this, which you can then use to determine the names of classes, properties, methods and enumerations.<br><br>For example, to generate the details of iTunes you can run this in Terminal :<br><pre class=code>
sdef /Applications/iTunes.app | sdp -fh --basename iTunes
</pre><br>It will create a file called iTunes.h in the current directory.<br><br>Happy hunting :-) <br><br></td></tr></table><br>
<a name="996349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, and remember... this is applicable for <b>ANY</b> scriptable application on your Mac :-) <br><br></td></tr></table><br>
<a name="996373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Working perfect. Incredible useful.<br><br>Your example is just what I was looking for.<br>sdef /Applications/iTunes.app | sdp -fh --basename iTunes<br>tip is very usefull<br><br>I can't believe how fast you code these things!<br><br>1000 thanks again. <br><br></td></tr></table><br>
<a name="996379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm what should i  say ?<br><br>cool ? great ??    thx brucey <br><br></td></tr></table><br>
<a name="996395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can't believe how fast you code these things! <br></div><br>Well, most of the time is spent researching - googling, reading reference documentation, searching for more useful examples. Once I have a good idea in my head how I want it all to work, I'll knock out a quick module which calls into the API, and an example app which is empty other than the Framework line. If that compiles, then it's fairly quick to bang the rest together, although with this Objective-C, I'm having to refer back to the Apple docs a lot to make sure I'm using it right.<br><br>I'm still working out how to call a method.<br>I think I need to use "class_getMethodImplementation". Which is fine, except I'm not sure how parameters or returned values work yet. I'll get back to you on this one, after I've tinkered for a while :-) <br><br></td></tr></table><br>
<a name="996402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I think I need to use "class_getMethodImplementation" <br></div><br>... or not, in fact.<br><br>Updated again, adding the ability to call methods that don't have parameters.<br>With the example, you can now pause/play iTunes, and change the volume setting. <br><br></td></tr></table><br>
<a name="996539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome. <br><br></td></tr></table><br>
<a name="996675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...Has been released and is now available for download from my <a href="http://code.google.com/p/maxmods/downloads/list?q=scripting" target="_blank">maxmods Googlecode site</a>.<br><br>:o)<br><br>Have fun ! <br><br></td></tr></table><br>
<a name="996730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it from SVN, REV 902 vorking well. <br><br></td></tr></table><br>
<a name="997187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nigel Brown</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just added it to modules and built, example returns SBApplication not found? Still investigating so will let you know if I find anything. <br><br></td></tr></table><br>
<a name="997892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Nigel. Did you get that working?<br>I'm on 10.6 here, but everything refers to 10.5 as the version it was available from. <br><br></td></tr></table><br>
<a name="998911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nigel Brown</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Brucey, sorry been off with a cold and have been rather unresponsive. Yes installed the latest BlitzMAX was working 2 version behind and all started working, very impressive. Is there an easy way to find out what commands are available from the application? <br><br></td></tr></table><br>
<a name="998913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there an easy way to find out what commands are available from the application?  <br></div><br>See post #3 above, for a command-line tool you can use to generate a header which lists all functions and enums of an appropriate app.<br>I tried it on Eudora, which is an old app, and it worked on that too.<br><br>Of course, having a list of functions is only half the job. Working out how to use them all properly is something else entirely ;-) <br><br></td></tr></table><br>
<a name="999219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nigel Brown</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> oops, how did I miss that one, thank you. <br><br></td></tr></table><br>
<a name="999335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nigel Brown</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to write a MAX program with it's own a SDEF file associated with it, to enable the reverse of this and call my MAX program from a script? <br><br></td></tr></table><br>
<a name="999340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> From my investigations, adding AppleScript support to BlitzMax is non-trivial... <br><br></td></tr></table><br>
<a name="1099586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FabriceW</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to dig up this old thread but to stating the obvious, the ScriptingBridge seams to be broken in Lion.  Due to the Sandboxing I think. I hope it can be fixed because i have an Application which relied on this module. <br><br>Thanks for any helm. <br><br></td></tr></table><br>
<a name="1131041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >burpy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi brucey. Any way to trigger mac system events (keypress simulation) from blitz? thanks.<br>Marc <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
