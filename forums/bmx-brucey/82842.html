<!DOCTYPE html><html lang="en" ><head ><title >More BlitzMax experiments</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >More BlitzMax experiments</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >More BlitzMax experiments</a><br><br>
<a name="934635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm currently working on a new appstub module...<br><img src="http://brucey.net/programming/blitz/misc/screenshots/remote_debugging.png"><br><br>The box on the left (green on black) is a small console app, stopped at a DebugStop.<br>On the left is the IDE console. The app running in the IDE is a "debugger", which connects to the other app over TCP, and sends the "h" (help) command.<br>The running app responds by sending the help list.<br><br>I know... it's not very exciting, and at the moment is slow as hell for some reason, but it's a start...<br><br>Wouldn't it be nice to be able to debug a remote app? ;-) <br><br></td></tr></table><br>
<a name="934638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> A little more technical stuff...<br><br>I've created a debugger.tcp.bmx (instead of debugger.stdio.bmx), which assumes responsibility for managing the TCP gubbins, rather than pushing it through stdio/pipes.<br><br>The running app polls for incoming connections, so in theory it can quite happily run without a debugger connected to it. Once connected the two would be able to converse - just as the IDE and debug app currently do.<br><br>:-) <br><br></td></tr></table><br>
<a name="934650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  at the moment is slow as hell for some reason <br></div><br>The polling is the issue - I was running the "debugger" in debug mode, so it too was polling for a debugger... which it does once per statement - ie. often!!<br>Running the debugger in release mode, it's sweeeeeeet :-)<br><br>This rocks!<br>Now, to see if it is possible to plug it into the IDE ? <br><br></td></tr></table><br>
<a name="934663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I give you... Cross network debugging in BlitzMax ;-)<br><br><br><img src="http://brucey.net/programming/blitz/misc/screenshots/remote_debugging_02.png"><br><br>Left window is test debug app running on Linux box.<br>Right window is the "debugger" running on my Mac.<br><br>You can see on left side, interpreting my commands.<br>And on the right side, we display the responses...<br><br>:o) <br><br></td></tr></table><br>
<a name="934710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fascinating... well. I guess there might be uses for this :) <br><br></td></tr></table><br>
<a name="934719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> What could be the advantages of using a remote debugger ?<br>Is there a specific area where you need such tool ?<br>I'm just curious of what can be done with this :) <br><br></td></tr></table><br>
<a name="934721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now all I need are Linux and Mac systems and I'm off =] <br><br></td></tr></table><br>
<a name="934728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Now all I need are Linux and Mac systems and I'm off =]  <br></div><br><br>Cross-network compiling? =p<br><br>I think it would be cool to have dedicated servers specifically for blitz-community remote cross-platform compiling/debugging. VM, dual booting (the setup for the most part), or otherwise having 3+ computers in one room, is a pain. Having a folder for each user to upload their source/modules to for compiling, etc....but i'm dreaming.<br><br>Nice tool anyhow. <br><br></td></tr></table><br>
<a name="934748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well done Brucey! This is a fantastic step forward. <br><br>For me there's nothing worse than that sense of helplessness you feel when your client's app is crashing (and cleverly bypassing your error logger in the process) but it works perfectly at home.<br><br>So I'd *love* to be able to remote debug my app over the net; accessing a client's machine *in-situ* as it were, as it's often impossible to replicate the context that your app is being run in. Very exciting! <br><br></td></tr></table><br>
<a name="934756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What could be the advantages of using a remote debugger ? <br></div><br>Since I'm coming from an app/server environment, I suppose I can more easily see how cool it is to have the ability to be able to plug into a running application and see what's going on - eg. using Eclipse to remote debug an instance of JBoss on a customer server on another continent.<br><br>Although obviously not so useful for your latest platform game ;-)<br><br>... but you know me... I have a tendency to dabble outside of the BlitzMax-is-a-gaming-language zone :-p<br><br>Hmmm... examples?  Dunno really. How's about :<br><br>* One of your beta testers is running your game, but for some reason it crashes at a certain point when they perform a certain function. But, when you try it on your dev machine, it works. Now you send them your debugged version, let them play the game up to that point. You connect your debugger to their running game, and "break" into the code - on-the-fly breakpoint ;-)<br>You proceed to step through the code and realise that a variable hasn't a value you expect at that point - maybe their locale is to blame?<br>Anyway... now you know what to fix....<br><br>It's either that, or you line your code with LOTS of logging stuff... or something similar.<br><br>I suppose if you are used to using remote debugging it's "obvious" why it would be useful? Otherwise, perhaps not so?<br>:-) <br><br></td></tr></table><br>
<a name="934781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is an example session of <b>on-the-fly</b> DebugStop - that is, there is no DebugStop in the code... we choose when we "stop" the app while it is running ;-)<br><br><pre class=code>
Bruceys-Mac-Mini:remote_debugging brucey$ ./test_01.debug
sock = 3
1
2
3
4
5
6
7
debug session connected
8
9
10
reading : 120
reading : 10
data = x

reading : 104
reading : 10
data = h

reading : 115
reading : 10
data = s

reading : 116
reading : 10
data = t

reading : 114
reading : 10
data = r

11
12
13
14
15
16
^C
</pre><br>Some notes :<br> * The example app prints a counter once per second.<br> * The debugger "connects" to the app at '7'.<br> * The "break" (x) is called at '10'. ("reading : xxx" is just my debug of the bytes coming from the debugger into the app)<br> * following that, (h)elp is called, then (s)tep, then a stack (t)race.<br> * finally, (r)un is called (to restart the app and take us out of Debug mode)<br><br>Here's the test app source :<br><pre class=code>
' remote debug test
SuperStrict

Framework brl.standardio

Local count:Int = 0

While count &lt; 100000

	count:+ 1
	
	Delay 1000
	
	WriteStdout count + "~n"
Wend
</pre><br><br>DebugStop not required :-)<br><br>Break when you want... grab a snapshot of the stack... continue... <br><br></td></tr></table><br>
<a name="934783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Now all I need are Linux and Mac systems and I'm off  <br></div><br>Except that you could run both the app and debugger on the same PC - think of it as a replacement for the current system which uses stdout and stderr. Platform is irrelevant. <br><br></td></tr></table><br>
<a name="934827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matthew Smith</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey,<br><br>very cool - like the sound of stopping the debugger when you want to. <br><br></td></tr></table><br>
<a name="934852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I like that bit too and I start to see the use of it... Well done. <br><br></td></tr></table><br>
<a name="934857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matthew Smith</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey,<br><br>the breakpoint thing you mention in the other post would be great too.  Make it a bit more like Visual Studio.  <br><br>You're such a hard worker! <br><br></td></tr></table><br>
<a name="934892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another demonstration of breaking a running app - this time a graphics application.<br><br><img src="http://brucey.net/programming/blitz/misc/screenshots/remote_debugging_03.png"><br>App code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

Framework brl.glmax2d

Graphics 640, 480, 0

Local count:Int = 0
Local fps:Int, ms:Int, _msec:Int, c:Int

While Not KeyDown(key_escape)

	count:+ 1


	If count &gt; 100000
		count = 0
	End If

	Cls
	
	DrawText count, 300, 230

	ms = MilliSecs()
	c:+ 1
	If _msec + 1000 &lt;= ms
		_msec = ms
		fps = c
		c = 0
	EndIf

	DrawText fps + " (FPS)", 10, 10
	
	Flip

Wend
</textarea><br><br>Note where it happened to break - inside the Flip method. Of course, when you stop it like this, you'll never know where you are in the code... But it works.<br><br>When the debugger is connected to the app, on each statement we are checking the TCP connection for new data - that is a lot of checks... so perhaps on a very intensive app you may see a slowdown. The other way to go would be to multi-thread the testing of the socket, and set an application flag, which could be checked instead. If this route were used I would rather the threaded code was in C to avoid having to build the app threaded.<br><br>For the live breakpoints, I think it would be possible to register lines with the debugged app at runtime which it could check against and if the current line matches.. stop. In theory you could also un-register at the same time...<br><br>Just some ideas.<br><br>There's certainly no reason why we can't have BlitzMax capable of some half-decent debugging. <br><br></td></tr></table><br>
<a name="934958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is awesome. <br><br></td></tr></table><br>
<a name="935284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for these enlightenments.<br>It was more or less what I was expecting from a remote debugger.<br>Effectively this isn't crucial for the things I'm doing right now but who knows the possibilities of this in the future :)<br><br>Interesting as always. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
