<!DOCTYPE html><html lang="en" ><head ><title >Learning Box2d</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Learning Box2d</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >Learning Box2d</a><br><br>
<a name="958798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm new to programming with box2d and I was wondering if anyone would be kind enough to share some simple examples with me to help me learn?<br><br>I've looked through the examples that come with the module but it's quite a lot to take in. Something very simple would be great, maybe with some comments to tell what does what? <br><br>A big thank you in advance for any help :) <br><br></td></tr></table><br>
<a name="958844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi JA2<br><br>First of all, read the manual that Brucey include in every modules.<br>That will give you a good starting point<br><br>Then don't forget you need to include something like the <b>render.bmx</b> in order to have a "debug" rendering and actually see something in your BlitzMax Application (box2d is only a physics library and won't render things for you).<br><br>Inside this <b>render.bmx</b> there is extended DebugDraw type/class automatically used by Box2d if you setup and provide correctly a b2DebugDraw object settings (see test.bmx).<br>The render.bmx also contain important scale values (normally xScale/yScale of 8.0).<br>Box2D use a system of meter/second and since you don't want that 1px = to 1 meter you better have to choose the best scale value for your world (or then the simulation will be very slow).<br><br>The <b>test.bmx</b> is the main core of every testbed examples available in Box2d.<br>Contain : The main loop, mouse manager, box2d Settings, box2d contact point manager and Box2d body destructor.<br><br>Examples are generally made of simple body setuping.<br><br><b>The helloworld.bmx is your best ally to fully understand the logics behind Box2d. (It's probably the simpliest example you ask for :-)</b><br><br>I suggest you follow the <b>pyramid.bmx</b> for a visual example and read the appropriate chapter from the BlitzMax Box2d Documentation.<br><br>Create a "simple example" for you to learn would probably mean rewriting what's already present in these 3 files.<br><br>Don't hesitate to go to the official box2d website : <a href="http://www.box2d.org/" target="_blank">http://www.box2d.org/</a><br>A very few things is changed in the way BlitzMax run Box2d so you could learn a lot of things from the Forum or the Wiki.<br><br>I could only help you with specific questions on Box2d.<br><br>Hope that help a bit :-) <br><br></td></tr></table><br>
<a name="958863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for replying, Armitage :)<br><br>I have spent almost my entire day looking through the examples and reading the C++ manual from the box2d wiki. I put test.bmx and render.bmx in the same file and copy pasted the bridge example, then took the whole thing apart piece by piece to see what's happening. Things are starting to come together slowly.<br><br>Could you tell me, how do I draw an image instead of the debugdraw shapes? I had a go at converting an example from the wiki but I couldn't get it working.<br><br><a href="http://www.box2d.org/wiki/index.php?title=Linking_graphics_to_bodies_in_Box2D_AS3" target="_blank">http://www.box2d.org/wiki/index.php?title=Linking_graphics_to_bodies_in_Box2D_AS3</a> <br><br></td></tr></table><br>
<a name="959006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it working :)<br><br>I had a quick look at your website and found a physics demo that you made with cubes, balls, chains etc. I'm trying to recreate it as best I can. I'm going to have a look at making edges next, I guess this is how you made the ground pieces on your physic_stuff demo?<br><br>Any tips or advice for creating a scrolling tilemap with physics bodies and all?<br><br>:) <br><br></td></tr></table><br>
<a name="959259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi JA2<br><br>Glad you did it !<br>Sorry but I was on "vacation" ;)<br><br>Thanks for downloading stuff ^^<br>Was done with Chipmunk but the last examples on my blog are fully done with Box2d.<br><br>In fact, My first level editor was using rectangle forms since at that time chainEdges did not exist.<br>Later on I totally rewrite it to provide a polygonal editor for platform and it's much much better :)<br><br>Edges won't always work specially if you use them as dynamic object.<br>It's a question of mass calculation.<br>For example these dynamic edgeschain won't work out of the box with Buoyancy effect.<br><br>Also, I experiences problem with buoyancy in my game so I write my own. Faster but is less accurate.<br>There is many ways to realise things in Box2d :)<br><br>I also cut the corners of my body players so there is no "sticky" problem when passing from one platform to another and use the normal angle of any slopes to add a little more power to the velocity impulsion in order to walk smoothly over.<br><br>Some in the Box2d forum go with the idea of the "unicycle body" player which work great too.<br><br>Box2d is faster enough to process a whole platform level without the need of particular optimization or "areas".<br>From 500 ~ 1000 Objects at time depending of your rendering batch method.<br><br>Most of the crash comes from creating objects out of the AABB world, so don't hesitate to add border space around your level. <br><br></td></tr></table><br>
<a name="959269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the advice. I still have a little way to go before thinking about adding a player to my project. I want to have a go at making a platform game once I've got the hang of what I'm doing.<br><br>Is setting a body's linear velocity the correct way to go about making my tiles scroll? I'm having some difficulties getting and setting the velocity, I think maybe I'm using vectors in a way they they aren't meant to be used... <br><br></td></tr></table><br>
<a name="959270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Is setting a body's linear velocity the correct way to go about making my tiles scroll <br></div><br>Noooo! :-p<br><br>I don't think you want to be moving anything that is meant to be static.<br>Rather, move your "view" of the platform, much like you would with normal tilemap tiles. Work off some kind of offset instead, and draw everything relative to that offset.<br><br>Unless of course you are talking about moving platforms? <br><br></td></tr></table><br>
<a name="959282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey is right.<br><br>The scrolling mechanics is specific to the rendering part of your game.<br><br>Think about separating your graphic from your data processing.<br>Only objects like player, vehicles, monsters, bullets or anything moving on his own shall be considered as Dynamic Object.<br><br>Unmovable objects or equal to 0.0 in density are Static object.<br><br>Also I don't think setting the linear velocity is the good way to go since Box2d did it for you.<br>When you want to move something in your world is better to use ApplyImpulse or ApplyForce.<br>Personally I only use SetLinearVelocity to reduce, for example, the Linear Velocity over time like this :<br><pre class=code>body.SetLinearVelocity(Vec2(body.GetLinearVelocity().GetX() * 0.90, body.GetLinearVelocity().GetY()))</pre><br><br>Unless you know exactly what you are doing I suggest you to first right the beginning of your platform game without Box2d and then adding it by replacing any interacting element. I think it's a great way to go. <br><br></td></tr></table><br>
<a name="959286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you both for the replies and the explanation. I feel like a twit :)<br><br>I think I was just over thinking what I wanted to do (if that's possible :s) I've got it to work now by just adding a global worldx and worldy, changing only those values, and then adding it to the drawing xy of each shape :)<br><br><div class="quote"> Unless you know exactly what you are doing I suggest you to first right the beginning of your platform game without Box2d and then adding it by replacing any interacting element. I think it's a great way to go. <br></div><br>I know more or less what to I need to do, I've made a few platform games before. Problem is that was 7 or 8 years ago and I've been stuck into 3d game making since. I plan to use sensors for the players hands and feet to check for slopes and edges that can be held on to, something like Flashback or the first Prince of Persia is what I had in mind. <br><br></td></tr></table><br>
<a name="959474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great !<br>Flashback (Another World, Heart of the Alien, Fade to Black) and Prince of Persia are legends for me.<br><br>I really don't know if sensor for body part are best to handle slopes and edges with Box2d since Kinematic isn't implemented yet.<br>I think Eric Chahi and Jordan Mechner both use somekind of finite state machinery for this.<br>But if you manage complex animation system with Box2d you'll probably unlock a great gameplay. <br><br></td></tr></table><br>
<a name="959613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I was thinking of setting up grab points where the player can cling onto. Then when the sensor for the players hands overlaps the grab point he should hold on and change animation. For the feet, I thought a sensor in front of the player and one behind, both at the height of his feet should be able to tell if he's on level ground, a slope, or standing by an edge. Then I can change the animation to a sloped walk or balancing etc.<br><br>I'm just getting to the part where I can load tiles from an animimage and make a shape in code for each one. Do you know if there is any limit to the number of shapes I can add to a single body? I thought one body with lots of shapes would be better than lots of seperate bodies. Or is there another way I should be doing this? <br><br></td></tr></table><br>
<a name="959637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I first try what you are currently trying to achieve (each tiles gives different shapes) but this is not optimized at all.<br>It's working but you lose the complete flexibly of Box2d by using old 2D Tiles techniques.<br><br><img src="http://img38.imageshack.us/img38/6125/screen000d.png"><br>In my game for example I use different kind of tools.<br>One to draw tiles over layers and another to freely design ground shapes thanks to a simple polygon editor as you can see.<br>Tiles like any others objects in my game are fully customizable that's why I choose this option.<br><br>Freely shaping every level platforms that way dramatically reduce the amount of static shapes too.<br>What's great with this idea is that I can now use my engine to create top down games (as soon as Box2d features top down physics of course).<br><br>It's maybe not the best solution but I came with this one after a lot of trial and error.<br><br>Also "<b>b2Settings.h</b>" inside the "<b>box2d.mod\Source\Common</b>" has a bunch of settings like maxPolygonVertices or maxProxies.<br>I needed to change this file a bit to improve the stability of my game or simply increase the number of objects.<br><br>Exceeding some of these values in your software will lead to a runtime crash !<br>Always good to know (Even if I think Brucey add a lot of exceptions since :) <br><br></td></tr></table><br>
<a name="959639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow that really looks nice!<br><br>I'm using quite large tiles for my game (128 x 128) so there's not too many on screen or active at once so I don't know if optimizing will make too much of a difference. I'm going for a more minimalist look for my game graphics if I get that far.<br><br>I've planned out 44 collision tiles so far so I can make platforms with different slopes, walls, and ceilings. I had planned to make an object editor for things other than tiles so that I can add grab points etc on to them and save/load the info.<br><br>I'll go and check out the b2settings.h :) <br><br></td></tr></table><br>
<a name="959641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Exceeding some of these values in your software will lead to a runtime crash ! <br></div><br>Box2D tends to throw assertions when things go out of range - which makes trapping difficult.<br><br>And in some cases, like if maxPolygonVertices is not high enough for the number you are using, it won't even realise, and you'll get all kinds of nullpointer access issues.<br>Depending on how many individual things you have flying around, the default may be enough. <br><br></td></tr></table><br>
<a name="962269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've finished my collision shapes and parallax scrolling map with 4 layers. I had to do it all twice because I managed to delete everything and had to start over :/<br><br>Anyway, now I'm working on the player control. After I've made the player's shape and body, I create some extra orientated boxes for the hands and feet and set them to be sensors. It's all working rather well but how can I detect if two specific shapes are overlapping each other? What I want to do is detect if the player's 'hand' is overlapping a 'grab point', both set to be b2shapes. <br><br></td></tr></table><br>
<a name="962291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not at home for the moment so I could only answer you this :<br>In my case I'm using the userData of each body/shape definition in order to store the object <pre class=code>myBodyDef.userData = Self</pre> then using a ContactPoint resolver (I think Brucey has translated a good starting point showing how to correctly extending b2ContactListener with ContactPoint Type to manage collisions) I recovers the two colliding bodies <pre class=code>local obj1:Object = cp.shape1.GetUserData()
local obj2:Object = cp.shape2.GetUserData()</pre> identify them via casting <pre class=code>if myType(ob1) then ...</pre> and then execute the appropriate object methods to handle this collision.<br><br>Hope this help. <br><br></td></tr></table><br>
<a name="962597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow. Armitage your game is looking great! :D Its been a while since I've seen it. I played your old version. Nice graphics! <br><br></td></tr></table><br>
<a name="962634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Rico<br>Fortunately it's just an Alpha :-D<br>There's many improvements present in the next (Last ?) Alpha 0.2.0 set in less than 2 weeks (hopefully).<br>Some game modes, more objects and several levels are planned for the beta.<br>Just need to find time between job hunt and life to get this done.<br><br>Maybe yours will be finished at the same time :) <br><br></td></tr></table><br>
<a name="962647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the suggestions, Armitage.<br><br>I've got it all working quite nicely now, the player can grab edges and pull himself up or let go and drop down. Next I'm going to have a go at ladder/rope climbing :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
