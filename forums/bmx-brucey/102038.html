<!DOCTYPE html><html lang="en" ><head ><title >WebKit + MaxGUI</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >WebKit + MaxGUI</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >WebKit + MaxGUI</a><br><br>
<a name="1215553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've added a new Linux HTMLView plugin which uses the WebKit renderer. It's probably easier to set it up than the other two for Gtk.<br><br>It's called bah.gtkwebkitgtk and available in SVN.<br><br>Seems to work quite well. Even plays the embedded youtube videos on the BlitzMax front page.<br>If you have any major gripes with it, let me know :-) <br><br></td></tr></table><br>
<a name="1221429"></a>

<a name="1221430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is awesome! And no errors. Amazing...<br><br>Just had to install libwebkitgtk-dev <br><br>with dependencies<br>gir1.2-javascriptcoregtk-1.0 <br>gir1.2-webkit-1.0 <br>libjavascriptcoregtk-1.0-dev <br>libsoup2.4-dev <br><br></td></tr></table><br>
<a name="1221431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No errors? That *is* amazing ;-)<br><br>Could maybe do with some better integration, as the basic functionality that HtmlView exposes in its API means you can't do much with it. Still it's better than nothing!<br><br><br>Actually I can't use this module on my work 64-bit Xubuntu box as it refuses to install the 32-bit libwebkitgtk on the 64-bit system.<br>But in all my other distros, it is working well.<br><br>Maybe a a 64-bit build of BlitzMax would get around this problem? <br><br></td></tr></table><br>
<a name="1221496"></a>

<a name="1221497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, I don't know. I have 32-bit ubuntu 12.4 for BMax sake. I don't mind loosing out on the 64-bit feature, as it's just threads and extra processing speed, right?<br><br>Was looking at Purebasic yesterday and they have 64-bit versions for win/mac/linux. <br><br></td></tr></table><br>
<a name="1221501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  it's just threads and extra processing speed, right? <br></div><br>Threads you get on both.<br>Not sure about speed - possibly slower in some instances.<br>And access to more RAM.<br>And since platforms are "moving" to 64-bit, you'd imagine that one day 64-bit will be the only one available. <br><br></td></tr></table><br>
<a name="1221509"></a>

<a name="1221582"></a>

<a name="1221583"></a>

<a name="1221872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> At a guess, I think a 64-bit BMax would take programming with FASM? Maybe Brl will get around to it some day...<br><br>I got gtkwebgtkhtml working by installing libgtkhtml3.14-dev<br>which adds 22 dependencies which I won't list since it's boring, the main one is libgail-dev<br><br>And it works but has issues. No css, not able to follow links with spaces and no navigation. <br>In gtkwebkitgtk you have all these, you can right-click and get a navigate menu which is really cool. <br><br>Then just out of interest I tried gtkwebmozilla which loads a blank window and gives this error on windowclose<br><pre class=code>(.createhtmlview.debug:3526): Gtk-CRITICAL **: IA__gtk_layout_move: assertion `child_widget-&gt;parent == GTK_WIDGET (layout)' failed</pre><br>So I searched for a package that installed libgtkembedmoz.so and the only package now that has it (in ubuntu 12.4) is called kompozer - I couldn't find xulrunner. But it still didn't work so I tried adding ":/usr/lib/kompozer" to the MOZ_DIST_BIN path in gtkwebmozilla.bmx but still no luck. So I gave up. Is this one working for you Brucey?<br><br>Then I tried wxHtmlWindow which is pretty good, it has navigation (but no right-click menu) and links all work but no css again.<br><br>Then I tried wxWebview which doesn't run and gives this error<br><pre class=code>/usr/bin/ld: cannot find -lwx_gtk2u_webview-2.9</pre><br>I tried installing libwxgtk2.8-dev but still the same. I have only got libwxgtk2.6 and libwxgtk2.8 in my package manager so I guess to get this working I would have to upgrade my distro again? Is there a way to regress this to 2.8? <br><br></td></tr></table><br>
<a name="1221510"></a>

<a name="1221511"></a>

<a name="1221585"></a>

<a name="1221587"></a>

<a name="1221873"></a>

<a name="1221874"></a>

<a name="1221876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> On second thoughts, having just read your email, I think I'll have to update my distro. Again! Although looking up wx-common you need to go to ubuntu 14.4 trusty to get to wx 3.0 so I think I'll just content myself with gtkwebkitgtk for now actually. <br><br>Is there a feature in svn where I could get older copies of google code? <br><br></td></tr></table><br>
<a name="1221599"></a>

<a name="1221600"></a>

<a name="1221601"></a>

<a name="1221602"></a>

<a name="1221603"></a>

<a name="1221604"></a>

<a name="1221605"></a>

<a name="1221609"></a>

<a name="1221610"></a>

<a name="1221611"></a>

<a name="1221614"></a>

<a name="1221615"></a>

<a name="1221625"></a>

<a name="1221875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sadly now I AM getting an error with webkit... a segmentation fault.:(<br><br>I thought it might be a dependency conflict so I uninstalled some packages I installed after I got webkit working but it still breaks/exits as soon as I load www.blitzmax.com so I ran gdb and it seems to be a flash bug/issue. But it's strange as it was working fine (I played an embedded flash video) and I haven't touched anything to do with flash. <br><br>Oh and flash works in firefox 28.0... no wait it's using html 5! <br><br><pre class=code>mark@mark-laptop:~/BlitzMax$ gdb maxide
GNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2.1) 7.4-2012.04
...
Reading symbols from /home/mark/BlitzMax/maxide...(no debugging symbols found)...done.
(gdb) run
Starting program: /home/mark/BlitzMax/maxide 
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/i386-linux-gnu/libthread_db.so.1".
[New Thread 0x5054b40 (LWP 5207)]
[New Thread 0x58e7b40 (LWP 5208)]
libpng warning: iCCP: known incorrect sRGB profile
libpng warning: iCCP: known incorrect sRGB profile
libpng warning: iCCP: known incorrect sRGB profile
[New Thread 0x63bcb40 (LWP 5210)]
[New Thread 0x6cddb40 (LWP 5211)]
[New Thread 0x74deb40 (LWP 5212)]
[New Thread 0x7cfbb40 (LWP 5213)]
[New Thread 0xb77ffb40 (LWP 5214)]
[New Thread 0xb6ffeb40 (LWP 5215)]
[New Thread 0xb67fdb40 (LWP 5216)]
[New Thread 0xb5ffcb40 (LWP 5217)]
[New Thread 0xb57fbb40 (LWP 5218)]
[Thread 0xb6ffeb40 (LWP 5215) exited]
[Thread 0xb57fbb40 (LWP 5218) exited]
[Thread 0x74deb40 (LWP 5212) exited]
[New Thread 0x74deb40 (LWP 5219)]
[New Thread 0xb57fbb40 (LWP 5220)]
[New Thread 0xb6ffeb40 (LWP 5221)]
[New Thread 0xad8efb40 (LWP 5222)]
[New Thread 0xacfeeb40 (LWP 5223)]
[New Thread 0xac7edb40 (LWP 5224)]
[New Thread 0xab6f2b40 (LWP 5225)]
[Thread 0xb67fdb40 (LWP 5216) exited]
[Thread 0xb57fbb40 (LWP 5220) exited]
[Thread 0x74deb40 (LWP 5219) exited]
[New Thread 0x74deb40 (LWP 5230)]
[New Thread 0xb57fbb40 (LWP 5231)]
[Thread 0xad8efb40 (LWP 5222) exited]

Program received signal SIGSEGV, Segmentation fault.
0xb3baf9d7 in ?? () from /usr/lib/adobe-flashplugin/libflashplayer.so
(gdb) q
...</pre> <br><br></td></tr></table><br>
<a name="1221621"></a>

<a name="1221622"></a>

<a name="1221624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Working again! Ha. I removed the flash plugin and now it works.<br><br>adobe-flashplugin<br>+adobe-flash-properties-gtk <br><br>Must be a conflict between flash and html5.<br><br>Wierd how it worked for a while and then stopped. <br><br></td></tr></table><br>
<a name="1221626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Flash is evil anyway;-) <br><br></td></tr></table><br>
<a name="1221631"></a>

<a name="1221632"></a>

<a name="1221633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well now I browse Facebook I find some videos won't work without the flash. So I reinstalled flash and tried another package this time (flashplugin-installer) and it installs the same version 11.2 which is the same version on the adobe website and they say the last version for Linux.<br><a href="http://get.adobe.com/flashplayer/" target="_blank">http://get.adobe.com/flashplayer/</a><br><br>So that also breaks webkit (being the same thing)... <br><br>Funny how some videos will work without flash and some do. It's like it falls back to html5 with no flash but then html5 can't handle all videos. <br><br></td></tr></table><br>
<a name="1221700"></a>

<a name="1221701"></a>

<a name="1221753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, sorry to find something wrong with this awesome module!<br><br>I might need to update my distro to fix this but it's something I can live with. All I want from an html renderer is docs with css support, so I can build maxide or the ce ide with Gtk. And this does the business!<br><br>I'm using Gtk maxide now and it's much nice than Fltk maxide (even with my Blitz.tff font in there). Monospace 10 (actually 14) looks fab and I can now triple-click to select a whole line in the code editor - which was a real pain in Fltk maxide. One issue is that the Open File dialog doesn't remember what folder you were in last, whereas this works in Fltk maxide. <br><br></td></tr></table><br>
<a name="1221702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  One issue is that the Open File dialog doesn't remember what folder you were in last, whereas this works in Fltk maxide. <br></div><br>Does the IDE tell it which folder it was in last? Otherwise, it may be a toolkit specific thing. <br><br></td></tr></table><br>
<a name="1221828"></a>

<a name="1221829"></a>

<a name="1221830"></a>

<a name="1221831"></a>

<a name="1221832"></a>

<a name="1221833"></a>

<a name="1221834"></a>

<a name="1221879"></a>

<a name="1222603"></a>

<a name="1222605"></a>

<a name="1222606"></a>

<a name="1222607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I think this is down to the IDE. For some reason in Fltk, RequestFile knows where the current path is but it shouldn't! You need to supply this with initial_path and that isn't done in maxide.bmx. I added my fix to the module tweaks board: <a href="http://www.blitzmax.com/Community/posts.php?topic=102332" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=102332</a><br><br>Back on topic, I found out that flash does work with webkit in debug mode. It catches this error<br><pre class=code>** Message: console message:  @0: Unsafe JavaScript attempt to access frame with URL <a href="http://www.blitzmax.com/" target="_blank">http://www.blitzmax.com/</a> from frame with URL 
<a href="http://www.youtube.com/embed/26T8KbdYqCg." target="_blank">http://www.youtube.com/embed/26T8KbdYqCg.</a> Domains, protocols and ports must match.</pre><br>[Answer: <a href="https://developer.linkedin.com/thread/2583" target="_blank">https://developer.linkedin.com/thread/2583</a>]<br><br>For some reason when building maxide.debug it still exits though (ie. when I click on the blitzbasic.com link on the index page) maybe because webkit is in a container. <br><br></td></tr></table><br>
<a name="1222307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is minor but... <br><br>clicking Example links in the docs opens an Html page instead of a code window. <br>Is it possible to fix (well it's not broken) but improve this feature? I loved that feature.<br><br>Also, Purebasic uses webkit in Linux too but they have disabled flash videos (black rectangle) probably because it was crashing the browser. <br><br></td></tr></table><br>
<a name="1222393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I have an example of the flash segfault bug. It only works in debug mode with the default createhtmlview example, but add any more code and it crashes (while still in debug). Just uncomment the "local test:int" line and it should crash. Not that this bug bothers me much I just wanted to know why it worked initially and then started crashing.<br><pre class=code>' createhtmlview.bmx

Strict

Framework bah.gtkmaxgui
Import bah.gtkwebkitgtk
Import brl.eventqueue
Import brl.basic
Import brl.blitz

Local window:TGadget
Local htmlview:TGadget
'Local test:Int

window=CreateWindow("My Window",30,20,600,440,,15|WINDOW_ACCEPTFILES)

htmlview=CreateHTMLView(0,0,ClientWidth(window),ClientHeight(window),window)
SetGadgetLayout htmlview,1,1,1,1

HtmlViewGo htmlview,"http://www.blitzmax.com/"

While WaitEvent()
	Print CurrentEvent.ToString()
	Select EventID()
		Case EVENT_WINDOWCLOSE
			End
	End Select
Wend
</pre> <br><br></td></tr></table><br>
<a name="1222608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Upgraded yesterday to ubuntu 12.10 quantal (which is very like precise) to see if upgrading webkitgtk from 10.8 to 10.10 would fix the segfault with flash but no it still crashes. <br><br></td></tr></table><br>
<a name="1225189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to catch the url clicked (or current url) with webkit? <br><br></td></tr></table><br>
<a name="1225326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Possibly. Does MaxGUI support that already, or are you looking for some new, webkit only, functionality? <br><br></td></tr></table><br>
<a name="1225336"></a>

<a name="1225601"></a>

<a name="1225602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure if it is supported by Maxgui.<br><br>It's the example links in the help docs, they don't open a code window when maxide is using webkit. When you click, it just does nothing - I think before I upgraded my webkit the example links did open but in the browser, in html form. I just tried maxide using gtkhtml (libgtkhtml3.14-dev) and the example links do work ie. open a code window.<br><br>I can open bmx files from the sidebar/treeview using the "Modules Source" list. That's better than  navigating manually with open file, but the quickest would be by clicking the example links.<br><br>Edit: forgot to mention you can select text, right-click and copy and paste to an untitled bmx file, which is pretty quick. <br><br></td></tr></table><br>
<a name="1252415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone know how to get this working on 64-bit Ubuntu? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
