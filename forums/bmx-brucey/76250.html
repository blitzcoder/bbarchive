<!DOCTYPE html><html lang="en" ><head ><title >wxPropertyGrid - Scrollbars block the grid!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >wxPropertyGrid - Scrollbars block the grid!</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >wxPropertyGrid - Scrollbars block the grid!</a><br><br>
<a name="852471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know if anyone else is using this, but I've been fighting with it for a week and it's still kicking my ass. I add more properties to the grid than will fit in the height of it. So it adds a scrollbar for me to use, which is very helpful. Unfortunately, that scrollbar covers the far right end of the grid, meaning that the little dropdown widget and the little button with .. two dots to open a requester of some kind are completely covered and I can't use them.<br><br>I don't need sizers for my application ( fixed res ) so I don't know if they're required, but I tried getting my head around them and it only made matters worse. ( The property grid wasn't taking up anything like the space available to it, it was too small to use. That was just by copying the sizer from Brucey's PG example which is part of the mod.<br><br>Does anyone know how to deal with these scrollbars and stop them blocking the end of the grid with all the important widgets in? <br><br></td></tr></table><br>
<a name="852474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you run the sample and make the window smaller, does it exhibit the same problem?<br><br>On Mac, when the scrollbar appears, the controls adjust themselves so that, for example, a browse button shifts to the left a bit. <br><br></td></tr></table><br>
<a name="852478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Glenn Dodd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i am just off to work but if you send me a picture of the screen i might be able to sus out a solution.<br><br>Cheers<br>Glenn <br><br></td></tr></table><br>
<a name="852482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you run the sample and make the window smaller, does it exhibit the same problem? <br></div><br>No, that's what I don't understand. Your demo doesn't exhibit the problem, but i cannot find any code in your demo which I haven't copied across. I know yours is filling up a window and mine is just sat inside a frame, but I can't see any of your code I have missed. I guess there must be something though.<br><br><div class="quote"> i am just off to work but if you send me a picture of the screen i might be able to sus out a solution. <br></div><br>No problem, here's a screenshot of it.<br><br><img src="http://www.glimmergames.com/temp/propgrid.png"><br><br>As you can see the right hand edge of the dropdown is underneath the scrollbar.<br><br><br>If it helps, when I add all the properties, I call refresh to ensure that it has all the properties accounted for and then I call GetBestSize() and it gives me 60, 58 which is not remotely big enough for all the properties. I assume this is why it resizes too small when I add a sizer or even call Fit() on it. I'm not sure why this should be. It has lots of properties as you can see. <br><br></td></tr></table><br>
<a name="852533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Glenn Dodd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> are you sure you have all of these?<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
		Local fs_windowstyle_values:Int[] = [ ..
			wxSIMPLE_BORDER, wxDOUBLE_BORDER, ..
			wxSUNKEN_BORDER, wxRAISED_BORDER, ..
			wxNO_BORDER, wxTRANSPARENT_WINDOW, ..
			wxTAB_TRAVERSAL, wxWANTS_CHARS, ..
			wxVSCROLL, ..
			wxALWAYS_SHOW_SB, wxCLIP_CHILDREN, ..
			wxFULL_REPAINT_ON_RESIZE ]

		pg.Append( New wxFlagsProperty.Create("Window Styles", wxPG_LABEL, fs_windowstyle_labels, fs_windowstyle_values , GetWindowStyle()) )
</textarea><br>that is all i can see that might impact the scrollbar functionality.<br>but i am just a beginner so it is bound to be something else.<br><br>Cheers<br>Glenn <br><br></td></tr></table><br>
<a name="852538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Feel free to send me (or post here) the snippet of code where you create the property grid on its parent control.<br><br>I'm thinking that perhaps you might be able to do the following :<br><br>Create a wxPanel (in the place where you currently have your property grid)<br>To that, add a wxBoxSizer.<br>To the sizer, add your property grid using something along the lines of :<br><br>sizer.Add(propertygrid, 1, wxEXPAND | wxALL, 0)<br><br>which means, completely fill the parent's child area, with zero border width.<br><br>Assuming your wxPanel is "placed" on the form using x,y, w, h.<br><br><br>Just an idea. <br><br></td></tr></table><br>
<a name="852596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glenn: I believe that's unconnected to the Property Grid itself. The PG's styles are set elsewhere. I tried removing those lines from Brucey's example, and it still works where mine doesn't.<br><br>Brucey: well I've revised and fiddled with this code dozens of times, but here's how it is currently, with my attempt to add the sizer as you suggested above. It's not helping though, so if you can see what I've done wrong, that'd be great.<br><br><pre class=code>
Local Sizer:wxBoxSizer = New wxBoxSizer.Create(wxHORIZONTAL) 
		
PropertyGridPanel = wxPanel.CreatePanel(DevApp.LevelPanel, Null, TVR + ((CW - TVR) / 2) - 160, 80, 310, 500, wxPG_BOLD_MODIFIED | wxPG_SPLITTER_AUTO_CENTER | wxPG_AUTO_SORT | wxPG_SPLITTER_AUTO_CENTER | wxPG_DEFAULT_STYLE) 
PropertyGrid = wxPropertyGrid.CreatePropertyGrid(PropertyGridPanel, wxID_PropertyGrid, 0, 0, 250, 450) 
		PropertyGrid.SetExtraStyle(wxPG_EX_HELP_AS_TOOLTIPS | wxPG_EX_NATIVE_DOUBLE_BUFFERING) 
PropertyGrid.SetFont(DevApp.MainGUIFont) 
		
Sizer.add(PropertyGrid, 1, wxEXPAND | wxALL, 0) 
PropertyGridPanel.SetSizer(Sizer) 
Sizer.SetSizeHints(PropertyGrid) 
</pre> <br><br></td></tr></table><br>
<a name="852661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would it be sacrilege to suggest trying it without sizers in this instance? <br><br></td></tr></table><br>
<a name="852664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Originally it was without sizers, and it didn't work like that either. I don't need sizers specifically, only if they're the only way to make the property grid display properly. I'll take anything that works. <br><br></td></tr></table><br>
<a name="852665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting. And you've tried it using sizers only as well? No fixed dimensions? <br><br></td></tr></table><br>
<a name="852675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried but it didn't size correctly. I was getting it sized at 60x56 or something, nowhere near big enough. So quite possibly I was doing something wrong. <br><br></td></tr></table><br>
<a name="852676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm just wondering if you are unknowingly trespassing on a min-gadget-width boundary. Have you tried making the grid really wide and seeing if the problem still exists? <br><br></td></tr></table><br>
<a name="852692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not that. Brucey's property grid sample works when the property grid is much, much narrower than mine. <br><br></td></tr></table><br>
<a name="852697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, quite right. Playing with the sample reveals that you can indeed resize to a very small width and still have it draw correctly. When you tried all sizers (creating with -1,-1,-1,-1) did it at least draw correctly? <br><br></td></tr></table><br>
<a name="852709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope, that was what I meant earlier about the 60x56 size. When I get the recommended minimum size, I get those same values. Which makes me wonder if that is part of the problem. If it really *was* 60 pixels wide, there wouldn't be enough room. But I don't know why it thinks it only needs to be that wide. It's got a lot of stuff in it. <br><br></td></tr></table><br>
<a name="852796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a runnable example that replicates the problem :<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

Framework wx.wxApp
Import wx.wxPropGrid
Import wx.wxFrame

New MyApp.run()

Type MyApp Extends wxApp

	Field frame:MyFrame

	Method OnInit:Int()

		wxInitAllImageHandlers()

		frame = MyFrame(New MyFrame.Create(,,"Hello World",,,500,500))
		frame.Center()
		frame.show()
	
		Return True
	
	End Method

End Type


Type MyFrame Extends wxFrame

	Method OnInit()
	
		Local mainPanel:wxPanel = New wxPanel.Create(Self)
	
		Local Sizer:wxBoxSizer = New wxBoxSizer.Create(wxHORIZONTAL) 
				
		Local PropertyGridPanel:wxPanel = wxPanel.CreatePanel(mainPanel, Null, 100, 80, 310, 200) 
			
		Local PropertyGrid:wxPropertyGrid = New wxPropertyGrid.Create(PropertyGridPanel, 100, -1, -1, -1, -1, ..
			wxPG_BOLD_MODIFIED | wxPG_SPLITTER_AUTO_CENTER | ..
               wxPG_AUTO_SORT ..
                | wxPG_SPLITTER_AUTO_CENTER ..
                | wxPG_DEFAULT_STYLE)

		PropertyGrid.SetExtraStyle(wxPG_EX_HELP_AS_TOOLTIPS | wxPG_EX_NATIVE_DOUBLE_BUFFERING) 
		
		Local cat:wxPropertyCategory = New wxPropertyCategory.Create("Appearance", wxPG_LABEL) 
		PropertyGrid.Append( cat )
		PropertyGrid.Append( New wxStringProperty.Create("Label", wxPG_LABEL, GetTitle()) )
		
 		Local enum_prop_labels:String[] = [ "One Item", "Another Item", "One More", "This Is Last" ]
	     Local enum_prop_values:Int[] = [ 40, 80, 120, 160 ]

		For Local i:Int = 0 Until 30
	    		PropertyGrid.Append( New wxEnumProperty.CreateWithArrays("EnumProperty" + i, wxPG_LABEL, enum_prop_labels, enum_prop_values, 80 ) )
		Next

	
		Sizer.add(PropertyGrid, 1, wxEXPAND | wxALL, 5)
		PropertyGridPanel.SetSizer(Sizer)

		Sizer.SetMinSize(310,200)
		Sizer.SetSizeHints( PropertyGrid )
		
	End Method
	
End Type
</textarea><br><br>It appears that the property grid wants some kind of size event/info, which it's not getting for whatever reason (with or without the sizer).<br>If you collapse and expand the node though, it then works as expected.<br><br>Just need to find a way to inject it with some kind of "hey you, you need to update yourself!" event. <br><br></td></tr></table><br>
<a name="853531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the example, Brucey. It's good to know that it's not just me. Indeed it seems that wxPropertyGrid doesn't like being in a panel. Or perhaps it works best when it has a frame to itself.<br><br>You're right about collapsing and expanding a node. Even if you have several categories, expanding and contracting any one of them will do it. Problem is, doing that in code doesn't have the same effect as doing it manually. It's a bit of a puzzle, this one. I've played with it for hours and I can't seem to get it to know when it needs to update itself. <br><br></td></tr></table><br>
<a name="853570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah haaaa....<br><br>Can you try the following "hack" for me please?<br><br>Open up propgrid.cpp (<i>wxpropgrid.mod/src/</i>), and head down to about line 9592, which looks like :<br><pre class=code>
    // Check min sizes
    if ( timeSinceCreation &gt;= 750 )
</pre><br>And change the 750 to 0.<br><br>Build Modules, try your code again, and let me know how it goes.<br><br>Thanks :-) <br><br></td></tr></table><br>
<a name="853571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks like a fix here on Leopard :-) Nice work Brucey! <br><br></td></tr></table><br>
<a name="853686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, confirmed working on Windows too. Thanks heaps, Brucey! <br><br></td></tr></table><br>
<a name="853705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great :-)<br><br>Now I need to find out what platform that "hack" was intended for... hopefully none of our three platforms. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
