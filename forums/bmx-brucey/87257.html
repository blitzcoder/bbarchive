<!DOCTYPE html><html lang="en" ><head ><title >"MagickModule - Swiss army knife of image process"</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >"MagickModule - Swiss army knife of image process"</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >"MagickModule - Swiss army knife of image process"</a><br><br>
<a name="988855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where can I get this from? Saw this on your Google Code page but could find no mention of it anywhere else, nor a link to download. <br><br>What I'm looking for is a library that does some pretty basic things like draw an anti-aliased image on top of another image, blur effects, and so on.<br><br>Any information would be greatly appreciated!<br><br>Russell <br><br></td></tr></table><br>
<a name="988865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'll need an SVN tool to download most of Brucey's modules.<br><br>I use slikSVN (free): after install, a batch file can download &amp; sync up any changes:<br><br><div class="quote"> <br>c:\code\SlikSvn\bin\svn.exe  checkout  <a href="http://maxmods.googlecode.com/svn/trunk/" target="_blank">http://maxmods.googlecode.com/svn/trunk/</a>  c:\code\blitzmax\mod\bah.mod<br> <br></div> <br><br></td></tr></table><br>
<a name="989271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, xlsior! Too bad an SVN client isn't built in to BMax itself (replacing the very useful, but no longer there 'Syncmods').<br><br>Oh well, nothing like doing command-line MSDOS gymnastics in these days of point-and-click, drag-and-drop GUI interfaces, eh? ;)<br><br>Russell <br><br></td></tr></table><br>
<a name="989287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> TortoiseSVN is quite a nice explorer-integrated SVN client. No command-line required :-) <br><br></td></tr></table><br>
<a name="989289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> TortoiseSVN is quite a nice explorer-integrated SVN client. No command-line required :-)  <br></div><br><br>I have tortoiseSVN installed as well, but SlikSVN allows me to check a whole bunch of SVN repositories all in a row just by double-clicking a batchfile. <br><br></td></tr></table><br>
<a name="989292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I actually prefer subclipse for all my SVN related activities :-p <br><br></td></tr></table><br>
<a name="994022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone know why so many of these SVN clients are so huge? Just curious, as it doesn't seem like the task at hand warrants so much code (bloat?).<br><br>I'll check out both and see which one better suits me... ;)<br><br>Russell <br><br></td></tr></table><br>
<a name="996524"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >theHand</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just for curious people and newcomers, Brucey wrapped GraphicsMagick, and not ImageMagick.<br>I wondered. <br><br></td></tr></table><br>
<a name="1213661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it okay to use the GraphicsMagic module and also FreeImage in the same app, and sell that app to customers? <br><br></td></tr></table><br>
<a name="1213670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> GraphicsMagick uses an MIT-style license.<br>FreeImage uses GPL (2 or 3), or FIPL which is fine for commercial applications. (You choose the license you want).<br><br>Not sure if you can use them both together. I'd have to do some tests first. They each use their own libjpeg and libtiff libraries.<br>I suppose it would be (more) useful if one could use the libraries from the other - then it wouldn't matter too much... <br><br></td></tr></table><br>
<a name="1213698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was able to rebuild GraphicsMagick ok on Windows, once I also installed libxml. Then I copied the bah.mod/ folder to Blitz on my iMac and it got stuck here:<br><br>Compiling:Blob.cpp<br>error: invalid argument '-std=c99' not allowed with 'C++/ObjC++'<br>Build Error: failed to compile /Applications/BlitzMax1.49/mod/bah.mod/magick.mod/src/Magick++/Blob.cpp<br><br>Any ideas what might cause this? I'm on Mavericks and I believe I have the latest Xcode. <br><br></td></tr></table><br>
<a name="1213792"></a>

<a name="1213793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I temporarily remove the blob.cpp file i get the same error on another cpp file<br><br>error: invalid argument '-std=c99' not allowed with 'C++/ObjC++'<br>Build Error: failed to compile /Applications/BlitzMax1.49/mod/bah.mod/magick.mod/src/Magick++/TypeMetric.cpp<br><br>But there are cpp files in free image and other modules that are building fine... just graphics magic is a problem? <br><br></td></tr></table><br>
<a name="1214100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you change the following in magick.bmx from :<br><pre class=code>
?Not win32
ModuleInfo "CC_OPTS: -std=c99"
</pre><br>to<br><pre class=code>
?linux
ModuleInfo "CC_OPTS: -std=c99"
</pre><br>It should build fine.<br><br>It appears the latest clang/llvm is more picky what flags you give it than previous versions. <br><br></td></tr></table><br>
<a name="1214115"></a>

<a name="1214117"></a>

<a name="1214119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. I changed that.<br><br>When I try a simple program to just import bah.magick, on windows max 1.48, I get a tonne of errors along these lines, many many pages of it:<br><br><pre class=code>
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/pub.mod/libjpeg.mod/libjpeg.debug.win32.x86.a(jdmarker.c.debug.win32.x86.o):jdmarker.c:(.text+0x302c): multiple definition of `jinit_marker_reader'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(jdmarker.c.debug.win32.x86.o):jdmarker.c:(.text+0x3d41): first defined here
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(glue.cpp.debug.win32.x86.o):glue.cpp:(.text+0x713): undefined reference to `__gxx_personality_sj0'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(glue.cpp.debug.win32.x86.o):glue.cpp:(.text+0x73c): undefined reference to `_Unwind_SjLj_Register'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(glue.cpp.debug.win32.x86.o):glue.cpp:(.text+0xa2b): undefined reference to `_Unwind_SjLj_Resume'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(glue.cpp.debug.win32.x86.o):glue.cpp:(.text+0xb24): undefined reference to `_Unwind_SjLj_Resume'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(glue.cpp.debug.win32.x86.o):glue.cpp:(.text+0xb38): undefined reference to `_Unwind_SjLj_Unregister'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(glue.cpp.debug.win32.x86.o):glue.cpp:(.text+0xb5d): undefined reference to `__gxx_personality_sj0'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(glue.cpp.debug.win32.x86.o):glue.cpp:(.text+0xb83): undefined reference to `_Unwind_SjLj_Register'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(glue.cpp.debug.win32.x86.o):glue.cpp:(.text+0xd0b): undefined reference to `_Unwind_SjLj_Resume'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(glue.cpp.debug.win32.x86.o):glue.cpp:(.text+0xdbd): undefined reference to `_Unwind_SjLj_Resume'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/magick.mod/magick.debug.win32.x86.a(glue.cpp.debug.win32.x86.o):glue.cpp:(.text+0xdce): undefined reference to `_Unwind_SjLj_Unregister'
</pre><br><br>Freeimage also gives me a tonne of similar errors:<br><br><pre class=code>
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/freeimage.mod/freeimage.debug.win32.x86.a(Plugin.cpp.debug.win32.x86.o):Plugin.cpp:(.text+0x5ca): undefined reference to `__gxx_personality_sj0'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/freeimage.mod/freeimage.debug.win32.x86.a(Plugin.cpp.debug.win32.x86.o):Plugin.cpp:(.text+0x5f0): undefined reference to `_Unwind_SjLj_Register'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/freeimage.mod/freeimage.debug.win32.x86.a(Plugin.cpp.debug.win32.x86.o):Plugin.cpp:(.text+0x703): undefined reference to `_Unwind_SjLj_Resume'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/freeimage.mod/freeimage.debug.win32.x86.a(Plugin.cpp.debug.win32.x86.o):Plugin.cpp:(.text+0x724): undefined reference to `_Unwind_SjLj_Unregister'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/freeimage.mod/freeimage.debug.win32.x86.a(Plugin.cpp.debug.win32.x86.o):Plugin.cpp:(.text+0x740): undefined reference to `__gxx_personality_sj0'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/freeimage.mod/freeimage.debug.win32.x86.a(Plugin.cpp.debug.win32.x86.o):Plugin.cpp:(.text+0x766): undefined reference to `_Unwind_SjLj_Register'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/bah.mod/freeimage.mod/freeimage.debug.win32.x86.a(Plugin.cpp.debug.win32.x86.o):Plugin.cpp:(.text+0x879): undefined reference to `_Unwind_SjLj_Resume'
</pre> <br><br></td></tr></table><br>
<a name="1214120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> What version of MinGW have you got installed? The one recommended for your version of BlitzMax?<br><br>Otherwise, you just can't install any old MinGW and *not* change the contents of the BlitzMax/bin and BlitzMax/lib directory. <br><br></td></tr></table><br>
<a name="1214127"></a>

<a name="1214128"></a>

<a name="1214129"></a>

<a name="1214227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thought ImaginaryHuman was an old hand concerning BlitzMax.<br><br>According to your Error the MinGW used to compile the modules was DW2 based instead of SJLJ (they are methods of exception handling).<br><br>You need to have all modules compiled using the same MinGW (and in this case you need the SJLJ-version)<br><br><br>Just to sum up the needed actions:<br>Download:<br><a href="http://sourceforge.net/projects/tdm-gcc/files/TDM-GCC%20Installer/Previous/1.1006.0/tdm-gcc-4.7.1-2.exe/download" target="_blank">http://sourceforge.net/projects/tdm-gcc/files/TDM-GCC%20Installer/Previous/1.1006.0/tdm-gcc-4.7.1-2.exe/download</a><br>like listed there:<br><a href="http://sourceforge.net/projects/tdm-gcc/files/TDM-GCC%20Installer/Previous/1.1006.0/" target="_blank">http://sourceforge.net/projects/tdm-gcc/files/TDM-GCC%20Installer/Previous/1.1006.0/</a><br><br>Create a batch file according to:<br><a href="http://www.blitzmax.com/Community/post.php?topic=101593&amp;post=1207353" target="_blank">http://www.blitzmax.com/Community/post.php?topic=101593&amp;post=1207353</a><br><br>Install MinGW and run adjusted script.<br><br><br>Detailed explanation:<br>install a SJLJ-version of your MinGW, eg. the TDM one. Brucey used "4.7.1". This is important if you use "bah.mod/****" as you then have the biggest chances for it to work (brucey might have tested a "build process").<br><br>The links above just explain what to do. As Brucey already noted: you need to copy the minGW-lib-files to the BlitzMax-installation. This is what the script in the second link does (just adjust the version string in there to 4.7.1).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214148"></a>

<a name="1214149"></a>

<a name="1214164"></a>

<a name="1214193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for taking the time to try to document it, but these steps did not work. Not only is one of your links broken but also I had to go elsewhere and find tips/attempts at copying other library files and such and adding extra paths to get it to build anything. It still errors out the same kind of errors on bah.freeimage, bah.magick etc. I also rebooted after completely reinstalling your version of MinGw you linked to. No different.<br><br>@brucey ... "What version of MinGW have you got installed? The one recommended for your version of BlitzMax?"<br><br>Where does it say anything about what version is needed for a specific version of BlitzMax, except strewn through various installation problem threads? I'm on 4.7.1 it looks like now, following the above instructions. Blitz 1.48 on windows. <br><br></td></tr></table><br>
<a name="1214194"></a>

<a name="1214196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm getting a bit better results on OSX.. but still get this error when importing bah.magick:<br><br><pre class=code>
duplicate symbol _jinit_marker_reader in:
    /Applications/BlitzMax1.49/mod/bah.mod/magick.mod/magick.release.mt.macos.x86.a(jdmarker.c.release.mt.macos.x86.o)
    /Applications/BlitzMax1.49/mod/pub.mod/libjpeg.mod/libjpeg.release.mt.macos.x86.a(jdmarker.c.release.mt.macos.x86.o)
ld: 1 duplicate symbol for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)
</pre><br><br>Does the jpeg loader from brl have to be removed or something to avoid a clash? <br><br></td></tr></table><br>
<a name="1214197"></a>

<a name="1214198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hm yes, bah.magick requires removal of the pub/libjpeg folder, and also the brl/jpegloader folder, otherwise it clashes. I was able to get it to import and compile finally on osx :) <br><br></td></tr></table><br>
<a name="1214199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Slight sticker.... bah.freeimage requires the removal of pub/libpng folder and brl/pngloader folder, which allows it to work, but then it can't be used in conjunction with bah.magick because bah.magick relies on brl's png code. Is there a possible workaround? <br><br></td></tr></table><br>
<a name="1214228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I updated the post with the correct link:<br><a href="http://www.blitzmax.com/Community/post.php?topic=101593&amp;post=1207353" target="_blank">http://www.blitzmax.com/Community/post.php?topic=101593&amp;post=1207353</a><br><br>Don't forget to rebuild ALL modules (else you run into conflicts).<br><br>@libjpg/libpng<br><br>I thought brucey stated somewhere that both mods use different libs and this makes it troublesome to use both simultaneously. You might need to adapt one mod to use the lib of the other one and voila...<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did a fresh install and followed your exact steps and also identified the module conflict between libjpeg/jpegloader and bah.magick .... also bah.freeimage needs libpng/pngloader modules removed (but magick needs them), hence not using them together. Also I rebuilt everything. With those issues resolved things work fine... the only issue I have left is importing otus.lzma does not work. It seems something changed in a recent blitzmax or something to make it no longer be compilable. <br><br><pre class=code>
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/otus.mod/lzma.mod/lzma.release.win32.x86.a(LzmaEnc.c.release.win32.x86.o):LzmaEnc.c:(.text+0x47): undefined reference to `LzmaEncProps_Init'
C:/Users/admin/Documents/Docs/Other/BlitzMax1.48/mod/otus.mod/lzma.mod/lzma.release.win32.x86.a(LzmaEnc.c.release.win32.x86.o):LzmaEnc.c:(.text+0x175): undefined reference to `LzmaEncode'
</pre> <br><br></td></tr></table><br>
<a name="1214256"></a>

<a name="1214257"></a>

<a name="1214258"></a>

<a name="1214261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> You had the same problem already a year ago:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2377" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2377</a><br><br><br>Just downloaded the current SVN revision of otus.mod.<br><br>Compiled with BlitzMax+MinGW4.6.2: debug and release (+threaded) work.<br>Compiled with BlitzMax+MinGW4.7.1: debug and release (+threaded) work.<br><br>Both was done using XP, trying Win7 now.<br><br>Edit: Windows7 compiled and linked flawlessly all combinations. <br><br>Did you really recompile the modules?<br>BlitzMax\bin\bmk makemods -a otus<br>BlitzMax\bin\bmk makemods -a -h otus<br><br>this would recompile threaded and non-threaded prebuilds of that module<br><br>What happens if you run "gcc -v" ?<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
C:\Tools\BlitzMax\bin&gt;gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=c:/tools/mingw32/bin/../libexec/gcc/mingw32/4.7.1/lto-wrapper.exe
Target: mingw32
Configured with: ../../src/gcc-4.7.1/configure --build=mingw32 --enable-languages=c,c++,ada,
objc,obj-c++ --enable-threads=win32 --enable-libgomp --enable-lto --enable-fully-dynamic-str
able-libstdcxx-debug --enable-version-specific-runtime-libs --with-gnu-ld --disable-nls --di
n32-registry --disable-symvers --disable-build-poststage1-with-cxx --disable-werror --prefix
2tdm --with-local-prefix=/mingw32tdm --enable-cxx-flags='-fno-function-sections -fno-data-se
--with-pkgversion=tdm-1 --enable-sjlj-exceptions --with-bugurl=http://tdm-gcc.tdragon.net/bu
Thread model: win32
gcc version 4.7.1 (tdm-1)

C:\Tools\BlitzMax\bin&gt;
</textarea><br><br><br>the last line (gcc version 4.7.1...) is of importance - but I think you installed that correctly.<br><br>Albeit you said "exact steps" - just check if the files within BlitzMax\lib\... are having the same dates/sizes like the one in the MinGW-Dir (just compare some files). Maybe something went wrong.<br><br>@my Windows7 build:<br>It is a vanilla Windows7 with fresh installed BlitzMax+MinGW4.7.1.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214269"></a>

<a name="1214270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I downloaded otus.lzma 1.02 from here <a href="http://www.antepedia.com/detail/p/182782.html" target="_blank">http://www.antepedia.com/detail/p/182782.html</a><br><br>rebuild full. same errors.<br><br>When I tried to look at the svn <a href="http://otus-mod.googlecode.com/svn/" target="_blank">http://otus-mod.googlecode.com/svn/</a> with tortoisesvn repo browser, there are 4 empty folders and no files.<br><br>gcc -v gives:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\admin&gt;gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=c:/mingw/bin/../libexec/gcc/mingw32/4.7.1/lto-wrapper.exe
Target: mingw32
Configured with: ../../src/gcc-4.7.1/configure --build=mingw32 --enable-language
s=c,c++,ada,fortran,objc,obj-c++ --enable-threads=win32 --enable-libgomp --enabl
e-lto --enable-fully-dynamic-string --enable-libstdcxx-debug --enable-version-sp
ecific-runtime-libs --with-gnu-ld --disable-nls --disable-win32-registry --disab
le-symvers --disable-build-poststage1-with-cxx --disable-werror --prefix=/mingw3
2tdm --with-local-prefix=/mingw32tdm --enable-cxx-flags='-fno-function-sections
-fno-data-sections' --with-pkgversion=tdm-1 --enable-sjlj-exceptions --with-bugu
rl=http://tdm-gcc.tdragon.net/bugs
Thread model: win32
gcc version 4.7.1 (tdm-1)

C:\Users\admin&gt;
</textarea><br><br>I rebuilt otus from the dos window as instructed, same result. <br><br></td></tr></table><br>
<a name="1214271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have a fully compiling working copy on blitzmax1.48 with mingw4.7.1 could you possibly post it here or something so I can try it? <br><br></td></tr></table><br>
<a name="1214275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> To download from SVN go to:<br><br><a href="https://code.google.com/p/otus-mod/source/browse/" target="_blank">https://code.google.com/p/otus-mod/source/browse/</a><br>and click on "Download zip" (next to "source path").<br><br>But I will send you an email with my precompiled mod folder (only the lzma part) in 1 minute.<br>Without recompiling the modules it should work for you - and after recompilation too.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214276"></a>

<a name="1214277"></a>

<a name="1214278"></a>

<a name="1214279"></a>

<a name="1214288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did that zip download, removed all but the lzma and lzma stream modules, rebuilt, still the same errors. Got your email thanks, trying that now.<br><br>Got your email, inserted the module and it compiled fine when imported, release and debug and threaded and single.... GOOD! Thanks... But I'm now trying to rebuild modules and having a bit of struggle... will update in a mo. <br><br></td></tr></table><br>
<a name="1214281"></a>

<a name="1214286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you use something different to test instead of the "test.bmx" included in the otus.mod/lzma.mod-folder, please state it.<br><br>As you did the zip download (which I did), I doubt that my mail attachment will help.<br><br>You then use the same<br>- MinGW version<br>- Blitzmax version<br>- module-source<br><br>The only difference might be the ld.exe/ar.exe + lib files which might not be correctly copied to BlitzMax. But as the "sjlj"-errors are gone I assume that at least the lib-folder was copied correctly.<br><br>edit: ar.exe and ld.exe should be dated 2011/04/16.<br>My BMK used for this test was an unmodified one (none of Bruceys bmk_ng).<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214289"></a>

<a name="1214290"></a>

<a name="1214294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> To test I just did an empty untitled.bmx with the line `import otus.lzma`<br><br>Not sure on those exe dates, mine has a date modified of 11/30/2011 - that is, the copied ones from MINGW... the ORIGINAL ar and ld are dated as you said. <br><br></td></tr></table><br>
<a name="1214291"></a>

<a name="1214292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I use the zip you emailed, programs compile file. When I try to rebuild modules after removing the .a and .i files from all subfolders and .bmx folders of otus module folder, I return to the same errors as before.<br><br>Regarding copying libraries, I copied all contents of the mingw/lib into blitz's bin/lib and also copied all of the mingw/gcc into blitz's bin/lib... overwrote whatever files, plus copied those two .exe's. <br><br></td></tr></table><br>
<a name="1214299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is odd.<br><br>So after that copy-orgy you recompiled ALL modules?<br><br>bmk makemods -a<br>and<br>bmk makemods -a -h<br><br>?<br><br>Instead of copying ALL files, you just need to overwrite the lib-files already in the blitzmax folder (exception is ldsound which is missing on vanilla installs).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Reinstalled bmax again (but kept mingw) .. hand-copied all lib files, only the ones that existed... found and copied them except for libunicows.a which does not exist in the mingw folders. I did not find any trace of `ldsound` either.<br><br>Re-copied otus.lzma to modules folder and removed all .a .i and .bmx files.<br><br>Rebuilding ALL modules with multithreading right now.. <br><br></td></tr></table><br>
<a name="1214306"></a>

<a name="1214308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> AHA! ... seems that copying too many lib files was the problem. Rebuilt all modules including otus and it is now working, yay!<br><br>Thanks for all your help on this.<br><br>This really needs a write-up of the exact steps for success. <br><br></td></tr></table><br>
<a name="1214307"></a>

<a name="1214309"></a>

<a name="1214312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> libdsound.a<br>-&gt; C:\Tools\MinGW32\lib\libdsound.a<br>(that file is needed if you work with rtaudio - so maybe other audio modules need it too, by default this file is NOT in the BlitzMax\lib-folder)<br><br>unicows is not in the mingw-folders, correct.<br><br><br>EDIT: That is why this script just copies files already existing in the Blitzmax\lib-folder while an easier copy-script would just copy all files existing in the mingw\lib-folder.<br><br>All in all I wonder why this should change the output of your compilation process - they are unused files in this situation.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214310"></a>

<a name="1214311"></a>

<a name="1214314"></a>

<a name="1214315"></a>

<a name="1214317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> found and copied the libdsound.a, thanks<br><br>No idea on the influence of other files. I had previously copied all libs plus all of the gcc folder. I did it manually. PRobably using that batch file would've been more reliable.. .but I didn't know how to make a batch file or run it etc and all this dos-prompt stuff is so 1990's, lol <br><br></td></tr></table><br>
<a name="1214322"></a>

<a name="1214323"></a>

<a name="1214326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh wait, I take it back. .lol<br><br>After a complete full module rebuild, otus.lzma is again not working. Maybe when I thought it was working I didn't do something right and got a false positive.<br><br>I get the exact same errors. Again when I revert to the version you emailed it works, but rebuilding doesn't. <br><br></td></tr></table><br>
<a name="1214327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strangely it does compile in non-multithreaded, but when multithreaded it does not. <br><br></td></tr></table><br>
<a name="1214329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does it compile "multithreaded" using my precompiled module files? (this works here as reported earlier).<br><br><br>@making a batch file:<br>copy the content of the codebox linked in that above post.<br>Open up "notepad" (notepad.exe).<br>Paste the content<br>Adjust version-string and paths<br>Save that file as "patchMyBlitzMax.bat"... on the desktop or wherever you find it.<br>Run that patchMyBlitzMax.bat file. It will print some "file not found" and some "copied xyz" lines. This is because some files are within the BlitzMax\lib but not in MinGW\lib (like the unicows thing).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214334"></a>

<a name="1214341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes yours compiles fine.<br><br>Yours, or any version, where I take out all the build files and rebuild all modules multithreaded, importing the module to a program and building it fails to compile with the same error.<br><br>What mainly baffles me is how it could build fine with non-threaded but the threaded version thinks there are bugs. <br><br></td></tr></table><br>
<a name="1214343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> What OS are you compiling on?<br><br>I could archive you a "ripped BlitzMax"-patch - just a "copy over" folder containing bin\ld.exe, bin\ar.exe and lib\*.*<br><br>Would be about 12mb uncompressed.<br><br>Using this you could minify the chances of having failed at "copy over mingw files".<br><br><br>Another thing (and nice to have):<br>I have multiple folders:<br>BlitzMax_4.7.1<br>BlitzMax<br><br>same for MinGW<br>MinGW32_4.7.1<br>MinGW32<br><br>During Installation of MinGW it added my c:\Tools\MinGW into the windows-path (so "gcc" can be called from everywhere).<br><br>If I now would rename "MinGW32" to "MinGW32_bak" and then "MinGW32_4.7.1" to "MinGW32", BlitzMax would use the other MinGW (4.7.1 instead of my other 4.6.2 - which is needed for rtAudio projects).<br>Surely there are "Switcher"-Batchfiles available somewhere, but this is quick and dirty.<br><br><br>I just explained this - to make you aware of chances that things compile without troubly using another MinGW-version (but they then might fail with other modules).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Windows 7 Pro 64-bit<br><br>Hmm. It's all complicated.. for now I think I will just have to settle for throwing in the towel. It shouldn't be this hard. There may be more updates to bmax in future and the too may have problems being installed... until BRL really comes up with a failsafe easy way to install I think it's not worth the effort.<br><br>Thanks for all your time and help and insight though. <br><br></td></tr></table><br>
<a name="1214346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm I tested it with windows 7 "30 days demo" on a fresh installed virtual machine, should be 32bit.<br><br>Think 64Bit-Windows should not be the faulty reason of aborting a compilation.<br><br>Have a test with my attachment (new email) if you want.<br><br>I doubt it but maybe we have luck :D<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think your patch + otus rebuild possibly worked. I will have to test it tomorrow. Thanks! <br><br></td></tr></table><br>
<a name="1214353"></a>

<a name="1214358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. Well, surprised, but for whatever reason, your patch worked. I can now build and rebuild to my hearts content in any mode and it all works properly. Thank you!<br><br>Honestly couldn't possibly explain to another person what they'd need to do to get BMax working if they were a newcomer with these issues... so strange. No idea why your files were any different from the freshly installed files. <br><br></td></tr></table><br>
<a name="1214395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just take my patch file ... extract it to somewhere... and then compare the included files to yours (vanilla install + mingw install + executed batchfile|manual copy).<br><br>I am quite sure that you just missed to copy some files.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1214415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
