<!DOCTYPE html><html lang="en" ><head ><title >sql - LastInstertId</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >sql - LastInstertId</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >sql - LastInstertId</a><br><br>
<a name="854598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not entirely sure how to achieve this. I'm trying to get the primary id of the row I just inserted into an sql database.<br><br><pre class=code>
Local query:TDatabaseQuery = MyDB.executeQuery("INSERT INTO npcs (npcname) values ('new')") 
notify query.lastInsertedId() 
</pre><br><br><br>notify query.lastInsertedId()  gives the error. I've tried a few things but with no luck as to getting the last inserted id. Any clues?<br><br>Thanks <br><br></td></tr></table><br>
<a name="854611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What database type, and what's your table schema look like? <br><br></td></tr></table><br>
<a name="854679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> MySQL<br><br>The query runs successfully, i'm just unsure how to get that lastinsertid. <br><br>The table:<br><img src="http://img84.imageshack.us/img84/3370/sqlsa3.png"> <br><br></td></tr></table><br>
<a name="854696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does this help?<br><a href="http://dev.mysql.com/doc/refman/4.1/en/getting-unique-id.html" target="_blank">http://dev.mysql.com/doc/refman/4.1/en/getting-unique-id.html</a> <br><br></td></tr></table><br>
<a name="854702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm hoping I can retrieve it without an additional query. I'm pretty sure additional info is passed when you execute an insert, that returns the last insert id. I'm just not sure how to get it through bruceys mod.<br><br>I'm also not using the id for in a query (since the database handles auto increments), but wanting to store it in a variable. Thanks for checking that out though <br><br></td></tr></table><br>
<a name="854716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>There's a fixed version of the module available via SVN at <a href="http://code.google.com/p/maxmods/" target="_blank">http://code.google.com/p/maxmods/</a><br><br>Am in the progress of migrating the modules to the googlecode site, so I'll hopefully have it available as a "normal" download from there shortly. <br><br></td></tr></table><br>
<a name="854765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are by far the best developer &amp; supporter i've ever seen to date, lol. Downloading now..<br><br><u><b>Edit:</b></u> <br>Without surprise, it works perfect. Can't thank you enough!<br><br>Time <br><br></td></tr></table><br>
<a name="854845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nadia</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I fully agree with the last statement by Retimer! <br>Brucey's knowledge, support and speed of fixing bugs is quite astonishing. Does that guy ever sleep or get some rest? It hardly ever takes more then a few hours and he got a bugfix ready.<br><br>I've also encountered the above mentioned problem. I just used <br>"SELECT MAX(id) FROM mytable"<br>to retrieve the new auto-incremented id after inserting a new record, which is of course a rather lame hack if the database is accessed by multiple users.<br>So I'm very happy hat LastInsertedID() got fixed, thanx Brucey!! <br><br></td></tr></table><br>
<a name="854857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does that guy ever sleep or get some rest? <br></div><br>Not if my neighbours have anything to do with it.... used to be a nice, quiet corner of Pretoria too...  ho hum.<br><br><br>Anyhoo... :-)<br><br>I've posted the latest releases proper now -  <a href="http://code.google.com/p/maxmods/downloads/list" target="_blank">http://code.google.com/p/maxmods/downloads/list</a><br>(if you have the latest SVN, they are the same).<br><br>The latest MySQL module for Win32 now doesn't require the static library to be copied into BlitzMax's lib folder. Which makes for less fiddling and nonsense.<br><br>SQLite module has had a lot of work recently, since I've been messing around with it a lot - funny how you pick up problems when you actually use these!<br><br>:o)<br><br>As always, please feel free to post any issues etc. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
