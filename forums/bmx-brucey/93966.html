<!DOCTYPE html><html lang="en" ><head ><title >Solving the _Unwind_Resume problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Solving the _Unwind_Resume problem</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >Solving the _Unwind_Resume problem</a><br><br>
<a name="1076684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This error recently reared its ugly head again :<br><pre class=code>
C:/BlitzMax141/lib/libstdc++.a(functexcept.o):(.text$_ZSt24__throw_invalid_argumentPKc+0xb7): more undefined references to `_Unwind_Resume' follow
</pre><br>Fortunately this time I was able to compare the build process of a wxWidgets sample with a sample in BlitzMax, to compare the two, and experiment with the BlitzMax build process in order to try to solve the problem once and for all.<br><br>BlitzMax creates a temp file, in which sits a rather long list of all the .a files it wants to include in the executable. This file also includes some .o files from MinGW which reside in the lib dir. Then it calls ld.exe to put them all together.<br><br>Interestingly, I noticed that the wxWidgets build does not use ld but instead has g++ doing all the work (which in turn calls ld as required). With some minor changes to my bmk, I made it also use g++, and not include those .o files, as well as not defining BlitzMax/lib as a valid lib path.<br>This resulted in a valid exe build, without the _Unwind_Resume issue.<br><br>Funnily enough, both Mac and Linux builds use g++ to do the final linking...<br>Whether the Win32 side is doing it differently because of a not-so-friendly old version of GCC that once shipped with MinGW, I don't know... but making it work in a similar way to the other platforms has some obvious benefits :<br><br> * ld.exe in BlitzMax/bin is no longer required<br> * all the files in BlitzMax/lib are no longer required - by using g++, it knows where the libs are in relation to the MinGW installation.<br> * various link order issues between different versions go away because g++ handles much of that for us.<br><br>As yet I haven't found any negatives to using this process...<br><br>But I'll try it against a 3.4.5 MinGW just in case it all goes horribly wrong there... <br><br></td></tr></table><br>
<a name="1076746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've updated my BMK to use g++ on Windows now..  this matches usage on all platforms for linking applications.<br><br>It also works with MinGW 3.4.5... <br><br></td></tr></table><br>
<a name="1076771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting...<br><br>Seems to work fine for me, so far.<br><br>I wonder if it should replace the official bmk at some point, it really does add a lot of improvements over the original... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
