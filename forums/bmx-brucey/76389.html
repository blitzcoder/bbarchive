<!DOCTYPE html><html lang="en" ><head ><title >wxPG: Value from wxColourProperty?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >wxPG: Value from wxColourProperty?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >wxPG: Value from wxColourProperty?</a><br><br>
<a name="854036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would anyone happen to know how to get the colour of a wxColourProperty? I've hacked it in by fiddling with the wrapper a little ( didn't need much ) and I can set it just fine, but I can't seem to get it. I've tried getting it as an object pointer and casting to wxColour or a wxColourValueProperty. I've tried getting it as a wxVariant and casting to a wxColour or a wxColourValueProperty. I even tried getting it as a wxVariant and casting it to a ulong or a string ( since these can be both represent colors, it seems. ) I've tried various snippets of code from the website ( including two from the wxPropertyGrid site itself, and one where all the text apart from the code was in chinese ) but I get a memory exception error no matter what.<br><br>It must be my expectations are wrong on what I'm getting with these functions, I guess. Perhaps someone with experience of the property grid in another language can point me in the right direction.<br><br>EDIT: Forgot to mention. When I get the variant and call GetType() it returns "wxColour" so I don't know why casting it never works. <br><br></td></tr></table><br>
<a name="854073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Argh! Don't you hate it when you spend hours failing to do something and then find the answer just after you ask for help.<br><br>The solution was to use the shift operator to cast from wxVariant to wxColour. I've no idea why it wouldn't work any other way. Probably my error, but just in case it saves you any time, I ended up doing it like this :<br><br><pre class=code>
void bmx_wxpropertygrid_getpropertyvalueascolour(wxPropertyGrid* grid, BBString* prop, int* red, int* green, int* blue) {
	wxVariant v = grid-&gt;GetPropertyValue(wxStringFromBBString(prop));
	wxColour c;
	c &lt;&lt; v;
	*red=(int)c.Red();
	*green=(int)c.Green();
	*blue=(int)c.Blue();
}
</pre><br><br>Returning it as a color didn't work either. Again, probably just my stupidity, but I don't need a perfect solution, I only need to hack in a few extra functions. <br><br></td></tr></table><br>
<a name="854123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... I seem to have covered everything except for colour :-)<br><br>Will sort it out.<br>Is there anything else that needs looked at?<br><br>I've been working through a pile of methods yesterday (did about 60 of them), but it's a fairly long, slow process. (read, tedious!). <br><br></td></tr></table><br>
<a name="854139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Righty, I've added GetPropertyValueAsColour() and GetPropertyValueAsColourByName(), both  returning a wxColour.<br>Also, SetPropertyValueColour() and SetPropertyValueColourByName(), accepting a wxColour.<br><br>While I was there, I added a GetRGB() and GetRGBA() method to wxColour, which take Int Var arguments for populating.<br><br>Finally, have implemented wxColourProperty, to go with the wxSystemColourProperty property. <br><br></td></tr></table><br>
<a name="854203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey, that's very kind of you. I really don't think there's anything else I need, and I wasn't prompting you to add anything. You've already done a ton of work on this and I only needed a few extras so I thought I'd rather do it myself rather than pester you for them.<br><br>I don't have a specific set of uses, I'm just adding things to the property grid as I add features to the game engine, so anything which needs to be edited in the level editor gets put onto the PG. As I say, if there is anything else, it'll only be something small which I can do myself. You've already done the hard bit, and you've got a bunch of helper functions for converting between string formats as well.<br><br>Again, thanks for the new color stuff. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
