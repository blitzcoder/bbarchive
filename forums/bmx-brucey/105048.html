<!DOCTYPE html><html lang="en" ><head ><title >Bruceys BLitzmax question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Bruceys BLitzmax question</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >Bruceys BLitzmax question</a><br><br>
<a name="1277004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just touching on a post from the Max is now opensource thread...<br><br>Is it quite possible you can now provide a full, no messing standalone package of your blitzmax "update" Brucey?<br><br>I am on the understanding that one needs Blitzmax (the original one) to compile your tools, but now it's free, that barrier isn't really needed anymore.<br><br>Or, are you just going to keep going the source only route?<br><br>Me just wondering bonny lad!<br><br>Dabz <br><br></td></tr></table><br>
<a name="1277005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I am on the understanding that one needs Blitzmax (the original one) to compile your tools <br></div><br>No, it is self compiling - you can build it (bcc-ng) with itself. But obviously you need some kind of functioning bcc to begin with ;-)<br><br>Now that there are fewer bug reports coming for bcc, perhaps it is time to start making releases.<br><br>Is that what's put you off trying it out? :-p <br><br></td></tr></table><br>
<a name="1277020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, remembering Queen's song... the show must go on.<br>I think it's time to see BMX-NG.<br><br>ps: maybe a proper 'thread' (or maybe a separate page/site?) could be interesting as starting point for all the users. <br><br></td></tr></table><br>
<a name="1277043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Is that what's put you off trying it out? :-p <br> <br></div><br><br>lol, if I'm honest, yeah, a little! :D<br><br>I'm not a lazy person by any means, what you've done looks great, and it would be really really nice just to download the thing and fire it up with no messing about thats all! ;)<br><br>Dabz <br><br></td></tr></table><br>
<a name="1277044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LT</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh, I guess I'm the one who's kept this alive...<br><br><div class="quote"> But obviously you need some kind of functioning bcc to begin with <br></div>And this is why...  What exactly is bcc?  It's part of BlitzMax and wasn't open source (until now), so I assumed you couldn't distribute a binary of NG. <br><br></td></tr></table><br>
<a name="1277046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey... I've just emailed you matey on the addy in your profile!<br><br>Dabz <br><br></td></tr></table><br>
<a name="1277060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What exactly is bcc? It's part of BlitzMax and wasn't open source (until now), so I assumed you couldn't distribute a binary of NG.  <br></div><br>bcc is the thing that takes .bmx and converts it into something compilable. The official bcc converts .bmx into assembler.<br>My NG project is a replacement bcc which generates pure C code instead. Obviously it required some other things - rather than just being a direct drop-in replacement - like a new GC and revisions to the core to support different architectures (like 64-bit). Oh, and it is a Strict/SuperStrict-only bcc. It expects *at least* a Strict level of strictness.<br><br>But it's done in such a way as  99.9% of your BlitzMax code should be compatible with it. Only lower level stuff *may* need some tweaking to bring it into line with NG. Things like reflection, lua, and the debugger all work as before.<br><br>I'm pretty happy with the fact that it works as well as I hoped it would when I started the project :-) <br><br></td></tr></table><br>
<a name="1277061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LT</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> perhaps it is time to start making releases <br></div>Do you mean binaries?  :)<br><br>I've downloaded and compiled a copy - your last instructions were very easy to follow.  I look forward to giving it a spin but I don't generally bother with Strict (yes, I know), so it'll take a bit of fiddling. <br><br></td></tr></table><br>
<a name="1277062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just downloaded the old Pi version there... Time to play! :)<br><br>Dabz <br><br></td></tr></table><br>
<a name="1277066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Spot on!!! <br><br><img src="http://www.7-star-admiral.com/0012_cartoons/7806_smiley_thumbs_up_ani.gif"><br><br>Dabz <br><br></td></tr></table><br>
<a name="1277067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad you like!<br><br>It does work better on the new dual-core Pi :-) <br><br></td></tr></table><br>
<a name="1277072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've published a Windows release here : <a href="https://github.com/bmx-ng/bmx-ng/releases" target="_blank">https://github.com/bmx-ng/bmx-ng/releases</a><br><br>Just unzip and start playing with it, without the need to install anything else - as it includes a copy of MinGW, and an updated MaxIDE (with 64-bit build options).<br><br>Note - you should be able to make 64-bit apps even if you have a 32-bit Windows system (except of course, you won't be able to test them!)<br><br>I tested it here, but you know how things never work properly on someone else's box :-p <br><br></td></tr></table><br>
<a name="1277099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Win32 release looking pretty good here! Ran into ReadDir needing Byte Ptr now on my first attempt (instead of Int), but easily fixed.<br><br>Have just found this, brutally hacked out of some existing code just for compile error demo -- fails with "Compile Error: Syntax error - expecting '='" on the line:<br><br><pre class=code>
For v.tblock = EachIn Block.BlockList
</pre><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Const BLOCKWIDTH:Int = 32
Const BLOCKHEIGHT:Int = 16

Type Block

	' ------------------------------------------------------------------------
	' Type-specific globals...
	' ------------------------------------------------------------------------

	Global BCount:Int			' Number of blocks
	Global BlockList:TList		' List used for all Block objects

	Field x:Float			' x position of object
	Field y:Float			' y position of object
	Field xs:Float			' x speed of object
	Field ys:Float			' y speed of object

	Field width:Int			' Width of object
	Field height:Int			' Height of object

	Method New ()
		If BlockList = Null Then BlockList = New TList
		BlockList.AddLast Self
		BCount = BCount + 1
	End Method

	' Destroy current object and remove from list...

	Method Destroy ()
		BlockList.Remove Self
		BCount = BCount - 1
	End Method

End Type

If KeyHit (KEY_F9)
	If Block.BlockList
		For v.tblock = EachIn Block.BlockList ' tblock is .Block type!
			If v.tblock.y &gt; BLOCKHEIGHT / 2
				v.tblock.Destroy
			EndIf
		Next
	EndIf
EndIf

</textarea> <br><br></td></tr></table><br>
<a name="1277111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks James :-) <br><br></td></tr></table><br>
<a name="1277115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> .. I've also posted the bug on the Monkey website.<br><br>It's good to share :-) <br><br></td></tr></table><br>
<a name="1277120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ha ha, weird I haven't stumbled across that then! <br><br></td></tr></table><br>
<a name="1277155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bah... At other halfs tonight so cannot get my mitts on it yet... But I will say one thing... That there is what I'm after!!!<br><br>Yummy<br><br>Dabz <br><br></td></tr></table><br>
<a name="1277189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I should also note that Windows MaxGUI module is still to be ported - OS X and Linux (GTK) are already working with NG, and in 64-bit (and ARM on Pi)<br><br>If you are on OS X, you can also play with iOS builds...<br><br>Android should work across platforms - but needs more documentation.<br><br>(caveat being that Android and iOS are still early WIP, so there is still some outstanding things to implement, and you will need to get the SDL modules too)<br><br>... things take a bit longer when you're doing it all yourself :-p <br><br></td></tr></table><br>
<a name="1277200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lol... I bet! ;)<br><br>Seriously though, I'll take a look at maxgui, I don't mind porting stuff so you can knock that job off your list... It'll be a bit of practice since im weighing up wxWidgets too... I'd be really lost without that so I don't mind a bit of sleeve rolling... And I do recall how long it took you too bind that to Blitzmax so I'm not going in blind! :D<br><br>Dabz <br><br></td></tr></table><br>
<a name="1277211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> wxMax works already ;-) <br><br></td></tr></table><br>
<a name="1277224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Ran into ReadDir needing Byte Ptr now on my first attempt (instead of Int), but easily fixed. <br></div><br>There are a few changes to handle the move to supporting 64-bit - like BlitzMax's use of Int instead of Ptrs in places.<br>I also upgraded the streaming to support 64-bit file offsets, and filesystem to support 64-bit large files.<br><br>I believe I've fixed that For loop issue. If you want to try it out, you can download and build the bcc package from github. Hopefully I haven't broken anything else in the meanwhile... <br><br></td></tr></table><br>
<a name="1277230"></a>

<a name="1277231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> That works great now... so here's another one!<br><br><pre class=code>
a = 0 ' or 1... or 2... or...

Select a

	Rem
	
		Test comment!
		
	End Rem
	
	Case 0

End Select
</pre><br><br><div class="quote"> <br>Compile Error: Syntax error - expecting 'Case', 'Default' or 'End'.<br> <br></div><br><br>No 'Rem' in Monkey, I suppose... <br><br></td></tr></table><br>
<a name="1277237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it Strict by default, BTW, like Monkey?<br><br>Just been trying some old demos and stuff, and a few fail because of:<br><br><pre class=code>
test = 1 ' Undefined
</pre><br><br>Kind of expect it now, but just checking... <br><br></td></tr></table><br>
<a name="1277243"></a>

<a name="1277244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> One more for luck! This highlights the wrong line in the editor (line - 1), due to the commented-out line in Function GetXInputDLL ()...<br><br><pre class=code>
'Local xinput$
</pre><br><br>Sorry, tried to narrow down to the function itself, but by the time I've removed enough for it to attempt to build, it, er, works! So I guess something else is throwing it off somewhere...<br><br><pre class=code>
If version &gt; hiversion
	hiversion = version	' Highlights this line, 84 in the IDE, while error reports line 85
	xinput$ = f$
EndIf
</pre><br><br>This is old, hence crap/not SuperStrict by default...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' testjoy.bmx

Import Pub.FreeJoy


' -----------------------------------------------------------------------------
' Support functions. Most of this just checks carefully for the right DLL!
' -----------------------------------------------------------------------------

Function GetSystemFolder$ ()

?Win32 ' Windows only!

'	Function ArrayFromString:Byte [] (source$)
'		Local newarray:Byte [Len (source$)]
'		MemCopy (newarray, source.ToCString (), Len (source$))
'		Return newarray
'	End Function

	Function StringFromArray$ (source:Byte [])
		Return String.FromCString (source)
	End Function

	Local GetSystemDirectory_ (location:Byte Ptr, pathsize) "win32"
	Local kernel32 = LoadLibraryA ("kernel32.dll")

	Local patharray:Byte [260]

	If kernel32
		GetSystemDirectory_ = GetProcAddress (kernel32, "GetSystemDirectoryA")
		GetSystemDirectory_ (patharray, 260)
	EndIf

	Return StringFromArray (patharray)

?

End Function

' -----------------------------------------------------------------------------
' Find most recent XInput DLL...
' -----------------------------------------------------------------------------

Function GetXInputDLL$ ()

	Local x$ = "xinput9_1_0.dll"

	If FileType (GetSystemFolder () + "\" + x$) = 0
		x$ = "" ' Old DLL Not found...
	EndIf

	Local dir:Byte Ptr = ReadDir (GetSystemFolder ())

	'Local xinput$
	
	If dir

		Local f$
		
		Repeat

			f$ = Lower (NextFile (dir))
			Local version, hiversion
			
			If f$.StartsWith ("xinput") And f$.EndsWith (".dll")
				
				' Should probably check Mid values are 0-9 here...
				
				version = Int (Mid (f$, 7, 1) + Mid (f$, 9, 1))
				
				' Result is 10 for 1.0, 11 for 1.1, 12 for 1.2, etc...
				
				If version = 91 ' Likely to be 1.0 -- see below!
					
					' Non-public versions might return 9, 8, etc for 0.9, 0.8, etc,
					' but 91 is the earliest public version! Exercise for the reader...
					
					If Mid (f$, 11, 1) = "0"
						version = 10 ' Ha! Stupid old "xinput9_1_0.dll" found -- really version 1.0
					EndIf
				EndIf
	
				If version &gt; hiversion
					hiversion = version
					xinput$ = f$
				EndIf

			EndIf

		Until f$ = ""

		CloseDir dir

	EndIf

	Return xinput$
	
End Function

' -----------------------------------------------------------------------------
' XInput function pointers...
' -----------------------------------------------------------------------------

' For more information:

' <a href="http://msdn.microsoft.com/en-us/library/bb173048(VS.85).aspx" target="_blank">http://msdn.microsoft.com/en-us/library/bb173048(VS.85).aspx</a>

Global XInput_SetState (port, hilo:Byte Ptr) "win32"
Global XInput_Enable (enable) "win32"

' -----------------------------------------------------------------------------
' Wrapper functions...
' -----------------------------------------------------------------------------

Global XInput10 = 0

Function InitXInput ()

	Local x$ = GetXInputDLL ()
	Local xinput = LoadLibraryA (x$)
	
	Local ok
	
	If xinput

		XInput_SetState = GetProcAddress (xinput, "XInputSetState")
		XInput_Enable = GetProcAddress (xinput, "XInputEnable")

		ok = True
		
		If XInput_Enable = Null
		
			If x$ = "xinput9_1_0.dll"
			
				' Not in 1.0. Can continue but EnableController won't do anything...
				XInput10 = True ' Can check this from other parts of the program if necessary...
				
				Print ""
				Print "XInputEnable not available in XInput 1.0 -- update Xbox controller driver!~nContinuing, but EnableController will have no effect..."
				
			Else
				ok = False ' Not found at all!
			EndIf
			
		EndIf
		
		If XInput_SetState = Null
			ok = False
		EndIf
	
	Else
		ok = False
	EndIf

	If ok Return xinput
		
End Function

' Vibration continues until next Rumble call!

Function Rumble (port, rumble_left:Short, rumble_right:Short)

	' From <a href="http://msdn.microsoft.com/en-us/library/bb174835(VS.85).aspx" target="_blank">http://msdn.microsoft.com/en-us/library/bb174835(VS.85).aspx</a> :
	
	' "The left motor is the low-frequency rumble motor. The right motor is the high-frequency rumble motor."
	' "The two motors are not the same, and they create different vibration effects."

	' Combine two shorts into an integer...

	Local freqs = (rumble_right Shl 16) | rumble_left

	XInput_SetState (port, Varptr freqs)
	
End Function

' Call DisableRumble before exiting program, or when app is suspended, to stop all vibrations. 

' NOTE! This also affects return results for controller inputs! Makes everything return
' as 'neutral', ie. no buttons pressed, no stick movement, etc, regardless of what
' the player may be doing with the controller. (Doesn't apply to XInput 1.0.)

Function DisableRumble ()

	' The For loop below is intended to stop the vibrations for XInput 1.0, but although
	' XInput_Enable (0) stops vibration for later versions under normal usage, it appears to
	' have no effect if the controller is still vibrating after a program has terminated
	' abnormally, hence I'm calling this regardless...
	
	For Local port = 0 To 3
		Rumble (port, 0, 0)
	Next

	' For later versions, to disable ALL controller input/output...
	
	If Not XInput10
		XInput_Enable (0)
	EndIf
	
End Function

' Call this to re-enable vibration effects, input values, etc, if you have called
' DisableRumble while your app is suspended.

' NOTE! This also affects return results for controller inputs! Makes everything return
' as 'neutral', ie. no buttons pressed, no stick movement, etc, regardless of what
' the player may be doing with the controller. (Doesn't apply to XInput 1.0.)

' M$ recommend using this when the program is suspended (eg. Alt-Tab, etc)...

Function EnableRumble ()
	If Not XInput10 ' Only available if XInput version &gt; 1.0!
		XInput_Enable (1)
	EndIf
End Function

If Not JoyCount() RuntimeError "No joystick found!"

If InitXInput () = 0 RuntimeError "Install Xbox controller driver!"

Graphics 640,480

Function drawprop(n$,p#,y)
	Local	w
	DrawText n$,0,y
	w=Abs(p)*256
	If p&lt;0
		DrawRect 320-w,y,w,16
	Else
		DrawRect 320,y,w,16
	EndIf
End Function		

Local t=0
Local port = 0
While Not KeyHit(KEY_ESCAPE)
	Cls
	
	SetColor 255,255,255
	Local n=JoyCount()
	DrawText "joycount="+n,0,0
	DrawText "JoyName(0)="+JoyName(0),0,20
	DrawText "JoyButtonCaps(0)="+Bin$(JoyButtonCaps(0)),0,40
	DrawText "JoyAxisCaps(0)="+Bin$(JoyAxisCaps(0)),0,60

	For Local i=0 To 31
		SetColor 255,255,255
		If JoyDown(i) SetColor 255,0,0
		DrawOval i*16,80,14,14
	Next
	
	SetColor 255,255,0
	drawprop "JoyX=",JoyX(0),100
	drawprop "JoyY:",JoyY(0),120
	
	Local freqlo# = 65535.0 * JoyY (0) ' 0.0 - 2.0 (1.0 = centered)
	freqlo = 65535.0 - (freqlo + 65535.0) / 2.0
	DrawText freqlo, 0, 400
	
	drawprop "JoyZ:",JoyZ(0),140
	drawprop "JoyR:",JoyR(0),160
	
	Local freqhi# = 65535.0 * JoyR (0) ' 0.0 - 2.0 (1.0 = centered)
	freqhi = 65535.0 - (freqhi + 65535.0) / 2.0
	DrawText freqhi, 0, 420
	
	drawprop "JoyU:",JoyU(0),180
	drawprop "JoyV:",JoyV(0),200
	drawprop "JoyHat:",JoyHat(0),220
	drawprop "JoyWheel:",JoyWheel(0),240
	
	DrawRect 0,280,t,10
	t=(t+1)&amp;511

	Rumble port, freqlo, freqhi
		
	Flip	
Wend

End
</textarea><br><br>Done for now, just on a random run-frenzy! <br><br></td></tr></table><br>
<a name="1277267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did read somewhere that bmx-ng is strict/superstrict for its strictness! :)<br><br>Dabz <br><br></td></tr></table><br>
<a name="1277291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is it Strict by default, BTW, like Monkey? <br></div><br>Yes it is, unfortunately. (Or fortunately if you are like me ;-)<br><br><div class="quote"> just on a random run-frenzy! <br></div><br>Thanks for that. If it helps to uncover issues in the parser/compiler then I'm all for it.<br><br>We may have issues with your "win32" tags though, as I'm not entirely sure what I should be generating there. I presume something to do with WINAPI? In the same way that 'Extern "Win32"' isn't generating the correct interfaces in C... <br><br></td></tr></table><br>
<a name="1277312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nah, I assumed it was Strict, just checking -- has been my preference for ages now. (Well, SuperStrict.)<br><br>Regarding "win32", I'm afraid I have no idea what that does behind the scenes, but it's certainly related to Win32 API calls... presumably sets up the right call convention? Must be somewhere in the new source though. <br><br></td></tr></table><br>
<a name="1277362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>Just downloaded from the above link the BlitzMaxNG package.<br>MaxIDE tooks some times (about 20 seconds) to start (only for the first-run, then it opens immediately).<br><br>I recompiled all the modules (via IDE menu), both for win32-x86 and win32-x64<br><br>Then I decided to compile a sample (from the BMax original folder): simonh/fireworks.bmx<br><br>it starts, I see the black screen and 'press space to ignite'. I press SPACE, I see the firework explodes and then ...error.<br>MaxIDE show the error in LINKEDLIST.BMX <br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Method NextObject:Object()
	-----&gt;	Assert _expectedModCount = _list._modCount, "TList Concurrent Modification" &lt;------
		Local value:Object=_link._value
		Assert value&lt;&gt;_link
		_link=_link._succ
		Return value
	End Method
</textarea><br><br>Threaded building is OFF <br><br>From DebugTree (in MaxIDE)<br>Function NextObject.value=NULL<br><br>I have not found any configuration file, so I presume MaxIDE will look its own MinGW tools.<br><br><br>Other samples I tested (only for statistic and for beta-testing purpouse!)<br><br>OK : SnowFall <br>OK : TileDrop<br>OK : hitoro/viewport<br>OK : hitoro/shadowimaeg<br><br><br>ERROR : Tempest (same error as above, not at the first shot)<br>ERROR : ZombieBlast (same errore as above, at the first shot)<br>ERROR : Mak/RequestGraphicsMode (identified Desktop() not found)<br>ERROR : hitoro/fireworks (EXCEPCTION_ACCESS_VIOLATION at the start)<br><div class="quote"> <br>gcc.exe: error: C:/BlitzMax150/samples/hitoro/.bmx/fireworks.bmx.gui.debug.win32.x86.c: No such file or directory<br>gcc.exe: fatal error: no input files<br> <br></div><br><br>ps: I exclude the error due to non-strictness in the code (like: arraysort.bmx)<br><br>Tested in Windows Seven 64bit<br><br>NICE &amp; COOL!<br>I don't note any difference (excluding the output string in MaxIDE <b>Compiling:shadowimage.bmx.gui.debug.win32.x86.c</b>...) from the 'basic' version <br><br></td></tr></table><br>
<a name="1277364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  TList Concurrent Modification <br></div><br>Ah, yes. This is a new "feature"...  basically, it tries to prevent you modifying a list while you are iterating it (via an Eachin Enumeration).<br>The assert only works in Debug mode, as it is there to highlight bad practices. <br><br></td></tr></table><br>
<a name="1277365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  This highlights the wrong line in the editor <br></div><br>It was the comment on the ?win32 line that was throwing it out.<br>So I've re-engineered the toker now to strip out single line comments and rem blocks before it even gets to the parser. <br><br></td></tr></table><br>
<a name="1277389"></a>

<a name="1277390"></a>

<a name="1277391"></a>

<a name="1277408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Ah, yes. This is a new "feature"... basically, it tries to prevent you modifying a list while you are iterating it <br></div><br>I hope you also added an easy to to turn that 'feature' off because if it's disabled in debug, might as well be both. (no one writes software in bmax and never uses debug) <br>I use this (modifying a list in a loop) all the time and have for years without problems. <br><br></td></tr></table><br>
<a name="1277420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Ah, yes. This is a new "feature"... basically, it tries to prevent you modifying a list while you are iterating it (via an Eachin Enumeration).<br>The assert only works in Debug mode, as it is there to highlight bad practices. <br> <br></div><br>Does this means that DEBUG mode is no working every time a program interacts with a list? It seems no really useful... a warning in the output could be a solution. <br><br></td></tr></table><br>
<a name="1277484"></a>

<a name="1277486"></a>

<a name="1277487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>h, yes. This is a new "feature"... basically, it tries to prevent you modifying a list while you are iterating it (via an Eachin Enumeration).<br>The assert only works in Debug mode, as it is there to highlight bad practices. <br> <br></div><br><br>Good move I think as well, but for backwards compatibility, maybe an optional way of implementing that, like maybe "SuperStrict" implements the no modify list rule, where as normal strictness doesnt!<br><br>I use superstrict all the time, and after getting my arse bit with using lists too liberally on mobile platforms, I'm game into being forced not to be silly! :D<br><br>Dabz <br><br></td></tr></table><br>
<a name="1277488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've wrapped it in a compiler flag for now. I'll add the option of enabling it later. <br><br></td></tr></table><br>
<a name="1277505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Coolio!!! :)<br><br>I'm having a play... Absolutely adore what you've done mind!<br><br>Dabz <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
