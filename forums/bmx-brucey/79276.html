<!DOCTYPE html><html lang="en" ><head ><title >Box2D API Changes</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Box2D API Changes</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >Box2D API Changes</a><br><br>
<a name="890062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't committed them to SVN yet, but the latest Box2D source has some changes to the API.<br><br>b2World.DoStep() changes to :<br><pre class=code>
	Method DoStep(timeStep:Float, velocityIterations:Int, positionIterations:Int)
</pre><br>Note that this separates the iterations into separate for velocity and position. I expect this allows you to fine-tune the engine somewhat.<br><br>In joints, the GetReactionForce() and GetReactionTorque() now include a delta-time parameter, which you can apparently use to get more accurate readings for a given point in time.<br><br>The DoStep() change will break your code. According to the docs : <br><div class="quote"> The suggested iteration count for Box2D is 10 for both velocity and position. You can tune this number to your liking, just keep in mind that this has a trade-off between speed and accuracy. Using fewer iterations increases performance but accuracy suffers. Likewise, using more iterations decreases performance but improves the quality of your simulation. <br></div><br><br>I'll let you know when I upload the changes :-) <br><br></td></tr></table><br>
<a name="890290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's a good new feature.<br>I wish having more time left to finish my project so far.<br><br>I stay tuned to this thread Brucey ;) <br><br></td></tr></table><br>
<a name="890482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay... latest code is in SVN now.<br><br>Still need to update the documentation re: the new API... but please let me know if there's anything obvious broken or otherwise.<br><br>:-) <br><br></td></tr></table><br>
<a name="890565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I update my code and everything seems working fine for the moment.<br>Even the collision *bug* :-)<br><br>As we speak about interation I'm wondering one thing on project created with Box2D.<br>I can't see any informations about the fixed rate logic.<br>Probably because Box2D is doing this itself to ensure good simulation result.<br><br>This fixed rate is welcome in my game but currently I just develop my ideas without ever think about this important aspect.<br>I will probably ask this inside the Box2d forum but do you think it's a bad idea with Box2d (fixed rate logic?) to be cycle based ? <br><br></td></tr></table><br>
<a name="890606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The box2d forum is probably the better place to ask such deep questions ;-)<br><br><br>There's a new release of the Box2d available. (If you are sync'd up with SVN, you can keep using that if you want). <br><br></td></tr></table><br>
<a name="890797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi - I've downloaded and compiled the New Box2d release. Brucey what do you mean by 'game breaker'? I'm worried my game is broken! I changed the Do Step command to the new version and now my game crashes (Assert failed). Do I need to do anything else apart from change  the DoStep command? (My game was working with the previous version of Box2D)<br>    All the examples work ok.<br><br>Thank you. <br><br></td></tr></table><br>
<a name="890799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make sure you do a full build of your app, rather than quick build, just in case any old stuff has been left in your build. <br><br></td></tr></table><br>
<a name="890822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm doing a full build. I've been commenting out bits of the code, and it works if I comment my Prismatic joints out. Its obviously something with the way I'm setting them up - since some of the examples use Prismatic Joints and they work good . It didn't generate a problem in the previous build though.  I'll let you know when I isolate the problem - it was probably something I shouldn't have been doing, but the previous version let me get away with. Anyway I'll get back to you. <br><br></td></tr></table><br>
<a name="890826"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does it crash on anything specific? ie. The same bit all the time? <br><br></td></tr></table><br>
<a name="890972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Phew - Well I've found the problem. If you use SetFixedRotation(True) with a Prismatic Joint it crashes. Its does the same in the examples. <br>   Thing is you don't need to fix the rotation (I just assumed you did need to), since bodys attached to this type of joint do not rotate anyway. Although I don't know why it would crash on the new version and not the old one, maybe there's been some slight changes.<br>    BTW what does Warmstarting and Validate(), and Position Correction do?  - it doesn't explain them in the docs. Just a brief explanation would be helpful.<br><br>     Thank you - Rico <br><br></td></tr></table><br>
<a name="891023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you use SetFixedRotation(True) with a Prismatic Joint it crashes <br></div><br>I've tried it myself.<br>It's not really crashing...  It fails with an assertion :<br><br>b2Assert(det != 0.0f);<br><br>in b2Math.cpp,<br>b2Vec2 b2Mat33::Solve22(const b2Vec2&amp; b) const<br><br>So I'm guessing you shouldn't be setting fixed rotation to a body that is connected to a joint?<br><br>Or, maybe it's a bug... :-p<br><br><div class="quote"> BTW what does Warmstarting and Validate(), and Position Correction do? <br></div><br>They all appear to be methods for testing the integrity of the engine. So not really something you need to be calling. Specifically what they do... I dunno. You'd have to look at the C++ source :-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
