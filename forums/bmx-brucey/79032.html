<!DOCTYPE html><html lang="en" ><head ><title >How to move a charcter manually in Box2d?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to move a charcter manually in Box2d?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >How to move a charcter manually in Box2d?</a><br><br>
<a name="887419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello! I'm hoping using Box2d to write a game. Although I'm just messing around with the examples at the moment, so I'm a bit green.  Can someone tell me the technique of how to do this? (if it is possible).<br><br>I have already written a simple 2d platform game in Bmax, and I have the main character moving around how I like. I would like to convert this to box2D so his movement is the same (ie not using true physics but setting his movement manually each frame). All the other objects in this game would operate under physics and therefore would need to be moved by him. I would like the main character to just push everything out of the way. So his movement is never interrupted or slowed in any way, by an object. He would however of course be stopped by a wall or when he can't push an object because it is against a wall. He can also jump on to and off objects. <br><br>I was thinking this could maybe be done by using the SetPosition command every frame and by giving my main character a large density I don't know if this would work though, because wouldn't the DoStep command then alter his position?<br><br>Please help. Thank you! <br><br></td></tr></table><br>
<a name="887475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know well since I choose to use a Physics engine to process every interactions in my world.<br><br>Why not trying to set a large amount of mass for your player and a very tiny mass for others objects.<br>Then setting global gravity with 0,0 and processing each objects with a custom ApplyForce.<br>Tweaking player and objects friction.<br>Use contact points to control collision against wall and all others objects.<br><br>There is no SetPosition method for b2Body only with b2BodyDef.<br>RE-Creating each frame the body may not be the best solution... But who knows !<br><br>Box2d is based on Impulsion forces so it should be possible to reach such a result by tweaking objects values.<br><br>All depend on the way your player is moving and the forces applied to others objects (gravity, force, torque, etc.)<br><br>Another solution would be using sensors.<br>A sensor is a shape that detects collision but does not produce a response.<br>Add 2 shapes by object.<br>Set the first one as a sensor and add a collision mask to the second one in order to prevent collision with main character.<br>Then all you have to do is applying impulse / force to the object when is sensor overlap the main character.<br><br>Don't forget there is a Box2D forum ( <a href="http://www.box2d.org/forum/" target="_blank">http://www.box2d.org/forum/</a> ) to ask question relative to Box2d itself ;) <br><br></td></tr></table><br>
<a name="887695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Armitage - you are very helpful! Am I right in that you are saying you can only set the body's position when you initially define it?<br><br>Can you get a platformer up and running that has similar control to the classics - e.g Mario, Sonic etc by using forces + impulses? I am worried I will not be able to the control right using this system. I will definitely try though!<br><br>I have now also posted a thread on the Box 2D forum- which is very good.<br><br>Thanks - Rico. <br><br></td></tr></table><br>
<a name="887722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> well there is one commands to move a boyd after its creation<br>SetXForm<br><br>it seems to work fine for me <br><br></td></tr></table><br>
<a name="887761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well spotted Space_guy ! Thanks :)<br><br>SetXForm <b>5.4.3. Position and Velocity </b> in the manual.<br><br><br>if it can reassure you Rico I've come to realize this : <a href="http://arm42.free.fr/files/Metagolf.rar" target="_blank">http://arm42.free.fr/files/Metagolf.rar</a><br>It's basic and WIP (<b>this is why the background and the main Mario sprite isn't mine</b>, the rest is though) but it's more or less the same control that you see in Mario.<br>Only with Impulsion, hard gravity force (-90 * _body.GetMass()) and timer to control various jumping level with pressure button.<br>It's just a question of tweaking really. <br><br></td></tr></table><br>
<a name="887786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> btw, if you see any gaping holes in the manual, please let me know. (it's available via Third Party Modules-&gt;bah.box2d).<br><br>thanks. <br><br></td></tr></table><br>
<a name="887974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's very good Armitage! I certainly think with time I will be able to come up with something good too. I am a beginner at the moment, but I am looking forward to learning! So far I like Box2D better than Chipmunk - its seems more flexible. Keep working on your game, what I've seen so far is excellent :) <br>     Yes - you'll definitely have to change the main character - but not to a blue hedgehog. That probably wouldn't be a good idea (unless you have a lot of money)<br>       BTW do you think its possible to do loops and curved surfaces in Box2d? I suppose you could do approximate curves with lots of angled lines. <br>         <br><br>Brucey - the manual is good but its annoying not being able to use the Find function on it (not your fault though). Thanks for converting Box2D! I was originally trying to write my own physics engine but it was very very very bad. My maths is pretty awful, so you can see why. <br><br></td></tr></table><br>
<a name="888185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Rico<br>Thanks for the comment ;)<br>As far as your shapes stay Convex everything is possible !<br>Note there is a maximum number of polygon vertices with Box2d (the default b2_maxPolygonVertices in b2Settings is set to 8).<br>There is also some others good settings to look at inside b2Settings (and don't forget to rebuild the Brucey module after changing them ;).<br><br>I read at the Box2d forum that someone is developing a Convex shape decomposition (http://www.box2d.org/forum/viewtopic.php?f=4&amp;t=83) Sources available.<br>With this you should be able to extend box2d shapes a little more :)<br>I didn't use this for the moment since my current shape are simple enough to stay convex.<br><br>Take a look at Blide <a href="http://www.blide.org/" target="_blank">http://www.blide.org/</a><br>This IDE have search documentation function as well as contextual help shorcut (F1) and many others useful tools.<br>I can't believe working without it ^^ Ziggy made an awesome work on this ! Constantly updated too which is great :) <br><br></td></tr></table><br>
<a name="888820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes that Convex Shape decomposition looks like it will be useful! - as does the new IDE (I will try it out soon)<br><br>I've just been messing around with my character control, and I have found that you can use body.SetLinearVelocity when moving a character. Then just reset it to zero at the beginning of the next loop. By doing this I can get my man to move very small steps.<br>    I'm going to try it with Impulses next - to see whats best. <br><br>Rico <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
