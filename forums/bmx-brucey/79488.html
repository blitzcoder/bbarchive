<!DOCTYPE html><html lang="en" ><head ><title >wxMax - The Final Push...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >wxMax - The Final Push...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=124" >Brucey's Modules</a>/<a href="#bottom" >wxMax - The Final Push...</a><br><br>
<a name="892491"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well folks, I've been working hard on tidying up a lot the ToDo list, in an attempt to ready wxMax for a proper release - ie. where you download a .zip, extract it, and you are ready to start using it.<br><br>The plan is to create a "binary" release for the various platforms, which will include the source, the static libs + headers, and of course the pre-compiled BlitzMax modules.<br><br>And probably a generic "source" release, with which you will be able to use to build your own.<br><br>---<br><br>Yes, there are some things that are outstanding :<br> * wxRichTextCtrl<br> * wxMediaCtrl<br>... and some of the 3rd-party modules I've included need some TLC before I'd consider them roadworthy.<br><br>But I think I've covered about 90% of the rest of wxWidgets, which should allow for a reasonable GUI Application to be constructed :-p<br><br><br>Note too that there are still issues running fullscreen graphics contexts via wxWidgets. But remember that wxMax is primarily for building Apps rather than games. (Hopefully at some point we'll get<br>those issues fixed).<br><br>---<br><br>Anyhoo, unless anyone can report anything terrible with the current code-base (how's the propgrid Plash?), I'll start sorting out the release process and things.<br><br>I'll most likely do a test release first for some of the more hard-core developers to try out before I throw it to the lions... any interested guinea-pigs? <br><br></td></tr></table><br>
<a name="892511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, and I'd like to add <b><a href="http://docs.wxwidgets.org/stable/wx_xrcoverview.html" target="_blank">XRC</a></b> support for the next version. <br><br></td></tr></table><br>
<a name="892512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Oh, and I'd like to add XRC support for the next version. <br></div><br><br>Nice!<br>Was about to add that on the wishlist, now that wxMax is kind of complete :) <br><br></td></tr></table><br>
<a name="892529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> At least there are only about 60 or so XMLHandlers to write, plus BlitzMax initialization/wrap code for each, plus the XRC framework to implement.<br><br>One wonders why I've waited so long :-)<br><br>Still, it should be an interesting little sub-project. I'm still not entirely sure how to go about it. I'm thinking along the lines of having to subclass each handler (eg. wxButtonXmlHandler), and override the DoCreateResource() method, having it call-back into BlitzMax in order to create all the objects properly.<br><br>It works in my head... we'll just have to wait and see if it works in the code ;-) <br><br></td></tr></table><br>
<a name="892533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ole JR</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh... Didn't know it was <i>that</i> many handlers. <br><br></td></tr></table><br>
<a name="892555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> (how's the propgrid Plash?) <br></div>The only thing I have found, since you fixed the SetValue methods, is that there is no wxColourProperty.SetValueColour() method.<br><br>And I'm still curious if you have tried to get Graphviz working in a wxGLCanvas.. <br><br></td></tr></table><br>
<a name="892558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> there is no wxColourProperty.SetValueColour() <br></div><br>It's part of wxPGProperty - in reality it's calling SetValue(wxVariant), but we don't use those... <br><br></td></tr></table><br>
<a name="892884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm still curious if you have tried to get Graphviz working in a wxGLCanvas.. <br></div><br><br>How's about this ?<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

Framework wx.wxApp
Import wx.wxFrame
Import wx.wxglmax2D
Import wx.wxTimer
Import BaH.Graphviz
Import BaH.GraphvizMax2D
Import wx.wxMouseEvent

SetGraphicsDriver GLMax2DDriver()

New MyApp.run()


Type MyApp Extends wxApp

	Field frame:MyFrame

	Method OnInit:Int()

		' Create the main application windowType MyFrame Extends wxFrame

		frame = MyFrame(New MyFrame.Create(,,"", , , 640, 480))
		
		' Show it and tell the application that it's our main window
		frame.show(True)
		SetTopWindow(frame)

		Return True
	End Method

End Type

Type MyFrame Extends wxFrame

	Field canvas:MyCanvas

	Method OnInit()

		canvas = MyCanvas(New MyCanvas.Create(Self, -1, GRAPHICS_BACKBUFFER|GRAPHICS_DEPTHBUFFER))
	
		ConnectAny(wxEVT_CLOSE, OnClose)
	End Method
	
	Function OnClose(event:wxEvent)
		MyFrame(event.parent).canvas.timer.Stop() ' we really need to stop the timer on Mac...
		event.Skip()
	End Function

End Type


Type MyCanvas Extends wxGLCanvas

	Field timer:wxTimer

	Field renderer:TGVGraphviz
	Field mx:Int
	Field my:Int
	Field mz:Int
	Field oldZ:Int
	Field buttons:Int[] = New Int[3]	

	Method OnInit()
	
		SetBackgroundStyle(wxBG_STYLE_CUSTOM)
	
		timer = New wxTimer.Create(Self)


		EnablePolledInput(Self)

		ConnectAny(wxEVT_TIMER, OnTick)
		ConnectAny(wxEVT_MOUSE_EVENTS, OnMouse)

		timer.Start(17)
	End Method

	Function OnMouse(event:wxEvent)
		Local evt:wxMouseEvent = wxMouseEvent(event)
		Select evt.GetEventType()
			Case wxEVT_MOTION
				Local x:Int, y:Int
				evt.GetPosition(x, y)
				EmitEvent(CreateEvent( EVENT_MOUSEMOVE, event.parent, 0, 0, x, y))
			Case wxEVT_LEFT_DOWN
				EmitEvent(CreateEvent( EVENT_MOUSEDOWN, event.parent, 1))
			Case wxEVT_LEFT_UP
				EmitEvent(CreateEvent( EVENT_MOUSEUP, event.parent, 1))
			Case wxEVT_RIGHT_DOWN
				EmitEvent(CreateEvent( EVENT_MOUSEDOWN, event.parent, 2))
			Case wxEVT_RIGHT_UP
				EmitEvent(CreateEvent( EVENT_MOUSEUP, event.parent, 2))
			Case wxEVT_MIDDLE_DOWN
				EmitEvent(CreateEvent( EVENT_MOUSEDOWN, event.parent, 3))
			Case wxEVT_MIDDLE_UP
				EmitEvent(CreateEvent( EVENT_MOUSEUP, event.parent, 3))
			Case wxEVT_MOUSEWHEEL
				EmitEvent(CreateEvent(EVENT_MOUSEWHEEL, event.Parent, evt.GetWheelRotation()))
		End Select
		event.Skip()
	End Function
	
	Method SetupGraph()
	
		renderer = TGVGraphviz.Create(640, 480, Null)
		
		' we need to create an in-memory graph...
		' something simple:
		'
		'    node2  --&gt;   node1
		'           /
		'    node3 /
		
		Local graph:TGVGraph = TGVGraph.Create()
		
		' create some nodes
		Local node1:TGVNode = graph.addNode("node1")
		Local node2:TGVNode = graph.addNode("node2")
		Local node3:TGVNode = graph.addNode("node3")
		
		' Add a tooltip :-)
		node1.setAttr("tooltip", "Hallo!")
		
		node2.setAttr(ATTR_FONTCOLOR, "red")
		node2.setAttr(ATTR_HTML_LABEL, "&lt;TABLE BORDER=~q0~q CELLBORDER=~q1~q CELLSPACING=~q0~q&gt;" + ..
			"&lt;TR&gt;&lt;TD&gt;Left&lt;/TD&gt;&lt;TD PORT=~qf1~q&gt;Mid dle&lt;/TD&gt;&lt;TD PORT=~qf2~q&gt;Right&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;")
		node3.setAttr(ATTR_NODE_SHAPE, "diamond")
		
		' join the nodes together
		graph.addEdge(node2, node1)
		graph.addEdge(node3, node1)
		
		' now to construct the graph..
		renderer.buildGraph(graph)

	End Method
	

	Method OnPaint(event:wxPaintEvent)
		Render()
	End Method

	Method Render()

		SetGraphics CanvasGraphics2D( Self )
		
		If Not renderer Then
			SetupGraph()
			renderer.layout("dot")
			renderer.fit(800, 480)
		End If
		

		'SetClsColor(255, 255, 255)
		'SetColor(0, 0, 0)
		
		Cls

		SetColor(255, 255, 255)
		
		mx = MouseX()
		my = MouseY()
		mz = MouseZ()

		' tell graphviz we've moved the mouse
		renderer.mouseMove(mx, my)
		
		For Local i:Int = 1 To 3
			If MouseDown(i)
				If Not buttons[i - 1] Then
					renderer.MouseDown(mx, my, i) ' mouse button press
					buttons[i - 1] = 1
				End If
			Else
				If buttons[i - 1] Then
					buttons[i - 1] = 0
					renderer.mouseUp(mx, my, i) ' mouse button release
				End If
			End If
		Next
		
		If mz &lt;&gt; oldZ Then
			If mz &lt; oldZ Then
				renderer.mouseScroll(mx, my, -1) ' scroll up - zoom in
			Else
				renderer.mouseScroll(mx, my, 1) ' scroll down - zoom out
			End If
			oldZ = mz
		End If
		
		' refresh/redraw the graph
		renderer.refresh()
	
		' draw the current tooltip under the mouse - if there is one!
		renderer.drawTooltip(mx, my + 16)
		
		' get data for selected "node" (for anything else, returns Null)
		Local obj:TGViewObject = renderer.selectedObject(GV_VIEW_NODE)
		
		If obj Then
			SetImageFont(Null)
			SetColor 100, 100, 255
			
			DrawText obj.name, 400, 0
			DrawText obj.skind, 400, 15
			
			For Local i:Int = 0 Until obj.attributes.length
				DrawText obj.attributes[i].name + " : " + obj.attributes[i].value, 400, 60 + i * 15
			Next
		End If

		
		Flip

	End Method

	Function OnTick(event:wxEvent)
		wxWindow(event.parent).Refresh()
	End Function


End Type
</textarea><br><br>Knocked it together in about 10 mins from a couple of other examples. It wants a bit of a tidy up.<br>Usual mouse controls... left button selects, scrollwheel zooms, hold right down to move the graph around.<br><br>Actually, I'm rather happy with the ease of getting it running on wx. I'm about half-way through building a native wxDC renderer for graphviz too, but this is nice for now.<br><br><b>&lt;EDIT&gt;</b> - For anyone that wants to try this, as well as wxMax, you'll need <b><a href="http://code.google.com/p/maxmods/downloads/list?can=2&amp;q=graphviz" target="_blank">these</a></b> modules compiled too.<br><br>:o) <br><br></td></tr></table><br>
<a name="892885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> One thing to note about the graphviz renderer is that it wants to run a pre-render when you first initialize it, which for Max2D means you need to have a current context when you do. Which is why I had to put the call to SetupGraph() in the Render method - it only calls it once.<br><br>:o) <br><br></td></tr></table><br>
<a name="893973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome, now I just need to remember exactly what I was going to use it in.. <br><br></td></tr></table><br>
<a name="893977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sorted out your Greek to English translation yet? :-p <br><br></td></tr></table><br>
<a name="893982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>SuperStrict

Framework BaH.libcurl
Import BRL.StandardIO

Local curl:TCurlEasy = TCurlEasy.Create()

curl.setOptInt(CURLOPT_FOLLOWLOCATION, 1)
curl.setWriteString()' use the internal string  to store the content

curl.setProgressCallback(progressCallback) ' set the progress callback function

'curl.setOptString(CURLOPT_URL, "blitzmax.com")
curl.setOptString(CURLOPT_URL, "ajax.googleapis.com/ajax/services/language/translate?v=1.0&amp;q=*GREEKWORDHERE*&amp;langpair=el%7Cen")

Local res:Int = curl.perform()

curl.cleanup()

Print curl.toString()

Function progressCallback:Int(data:Object, dltotal:Double, dlnow:Double, ultotal:Double, ulnow:Double)
	Print " ++++ " + dlnow + " bytes"
	Return 0	
End Function
</pre><br><br>Nope :( still getting "" as my translated text.. <br><br></td></tr></table><br>
<a name="893992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to convert your text to UTF-8 and the escape it ;-)<br><br>Then you should get something like this :<br><pre class=code>
{"responseData": {"translatedText":"Hello world!"}, "responseDetails": null, "responseStatus": 200}
</pre><br>Which is the result of el-&gt;en doing the above on the text to be translated.<br><br>According to the docs, you really need to set the referrer :<br><pre class=code>
curl.setOptString(CURLOPT_REFERER, "some.address.for.the.referer")
</pre> <br><br></td></tr></table><br>
<a name="894005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> EDIT: I don't want to ask questions unrelated to this thread: <a href="/posts.php?topic=79607#894006" target="_blank">follow</a>. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
