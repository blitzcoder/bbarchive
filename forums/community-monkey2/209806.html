<!DOCTYPE html><html lang="en" ><head ><title >JavaScript / ES2015</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >JavaScript / ES2015</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=530" >Monkey2 Talk</a>/<a href="#bottom" >JavaScript / ES2015</a><br><br>
<a name="2104615"></a>

<a name="2104616"></a>

<a name="2104617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I find it interesting that some MX2 features we discussed could be mapped 1:1 to JavaScript.<br><br>Maybe such things could also be added to Monkey1, or MX2 could get a JS target (with the exception of pointers?).<br><br>For example:<br><pre class=code>&lt;!doctype html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;script type="text/javascript"&gt;

    //
    // Anonymous Functions / Lambda's / Function arguments
    //
    var mul = function(x,y) {
                  return x * y;
              }

    var add = function(x,y) {
                  return x + y;
              }

    var div = function(x,y) { return x / y; }

    function calc(x,y,func) {
        return func(x,y);
    }

    var v1 = calc( 3, 4, add );
    var v2 = calc( 7, 3, mul );
    var v3 = calc( 9, 2, div );

    var v4 = calc( 7, 2, function(x,y) {
                             return x - y;
                         } );

    alert("results: " + v1 + ", " + v2 + ", " + v3 + ", " + v4);


    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre><br><br><pre class=code>&lt;!doctype html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;script type="text/javascript"&gt;

    //
    // Closures
    //
    function StartAt( x ) {

        function IncrementBy( y ) {
            return x + y;
        }

        return IncrementBy;
    }

    function tst( func ) {
        return func( 3 );
    }

    var f1 = StartAt( 2 );
    var f2 = StartAt( 5 );

    var v1 = tst( f1 )
    var v2 = tst( f2 )

    alert("results: " + v1 + ", " + v2 );

    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre><br>Those codes look exactly like the things we discussed last week. :)<br><br>New interesting JS features are coming with ECMAScript 6 / ES2015 soon (June 2015?):<br><br>- <a href="https://github.com/google/traceur-compiler/wiki/LanguageFeatures" target="_blank">https://github.com/google/traceur-compiler/wiki/LanguageFeatures</a><br>- <a href="https://babeljs.io/docs/learn-es2015/" target="_blank">https://babeljs.io/docs/learn-es2015/</a><br><br>Traceur and Babel allow the use of ES2015 features today, by compiling ES2015 Javascript into ES5 Javascript.<br>Nice for compatibility with current and older browsers:<br><br>- <a href="https://github.com/google/traceur-compiler" target="_blank">https://github.com/google/traceur-compiler</a><br><br>- <a href="https://babeljs.io/" target="_blank">https://babeljs.io/</a><br>- <a href="https://github.com/babel/babel" target="_blank">https://github.com/babel/babel</a><br><br>Found the above tools while reading <a href="https://github.com/getify/You-Dont-Know-JS" target="_blank"><u>You Don't Know JS (book series)</u></a> by Kyle Simpson (<a href="http://opensource.com/business/14/12/interview-kyle-simpson-javascript" target="_blank"><u>Interview</u></a>).<br>(also available at Amazon: http://www.amazon.com/s/you+don%27t+know+js&amp;keywords=you+don%27t+know+js (Kindle &amp; Paperback))<br><br>See also (for browser compatibility):<br>- <a href="https://github.com/paulmillr/es6-shim/" target="_blank">https://github.com/paulmillr/es6-shim/</a><br>- <a href="https://github.com/es-shims/es5-shim" target="_blank">https://github.com/es-shims/es5-shim</a> <br><br></td></tr></table><br>
<a name="2104607"></a>

<a name="2104608"></a>

<a name="2104609"></a>

<a name="2104610"></a>

<a name="2104611"></a>

<a name="2104612"></a>

<a name="2104613"></a>

<a name="2104623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AndroidAndy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be nice to keep JS on the radar in some form.  Seems like TypeScript is picking up steam right now and Google is now using it for AngularJS 2.0 <a href="http://www.typescriptlang.org/" target="_blank">More about TypeScript.</a><br><br>However since the main target of MX2 will initially be C/C++, it seems like you could just take the generated code and run it through Emscripten, <a href="http://kripken.github.io/emscripten-site/docs/introducing_emscripten/about_emscripten.html" target="_blank">More about Emscripten.</a>  Maybe even add Emscripten to the build process to target JS?  Something to think about... <br><br></td></tr></table><br>
<a name="2104657"></a>

<a name="2104658"></a>

<a name="2104660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe it helps to take a look how others are translating specific language features and data types etc. into JS, or built on top of such a tool (f.e. TypeScript):<br>- <a href="https://github.com/jashkenas/coffeescript/wiki/List-of-languages-that-compile-to-JS" target="_blank"><u>List of languages that compile to JS</u></a> <br><br></td></tr></table><br>
<a name="2104668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >itto</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> But the target is not JavaScript, it's web applications (HTML5). It's cool to have your Monkey code translated to JS, but this code ultimately has to run somewhere if the game has to be played. HTML5 is the standard language for web content. I think it's more a problem with Mojo and the limited HTML5 feature support if we won't see an HTML5 target in MX2.<br><br>Of all the languages Monkey is targeting, JS is the most malleable and dynamic. I find languages built on top of it like TypeScript or CoffeeScript to be awesome. The former focuses more on a more structured coding approach, while the latter enables more functional programming features and code expressiveness. I don't think it will be a problem to implement whichever language feature we come up with in JS (except the ones requiring impossible low-level access like pointers, obviously), it will be more of a hassle to map dynamic features in more static languages. <br><br></td></tr></table><br>
<a name="2104670"></a>

<a name="2104671"></a>

<a name="2104672"></a>

<a name="2104673"></a>

<a name="2104674"></a>

<a name="2104675"></a>

<a name="2104676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The target is JavaScript. HTML5 is not a programming language, it just provides some tags like &lt;canvas&gt; and &lt;video&gt; to work with.<br>Programming of HTML5 is done via JavaScript, and even HTML5 needs Polyfills like <a href="https://github.com/google/canvas-5-polyfill" target="_blank">https://github.com/google/canvas-5-polyfill</a> for<br>cross-browser compatibility. Monkey1 does not compile to HTML5 - it compiles to JavaScript and uses HTML5 features like canvas.<br><br>Just some examples why I would like MX2 JavaScript (*):<br><br><b>three.js - JavaScript 3D library... using WebGL</b><br>Website: <a href="http://threejs.org/" target="_blank"><u>Three.js</u></a><br>Download: <a href="https://github.com/mrdoob/three.js/" target="_blank">https://github.com/mrdoob/three.js/</a><br>Documentation: <a href="http://threejs.org/docs/" target="_blank">http://threejs.org/docs/</a><br>License: The MIT License<br><br>Examples:<br>- <a href="http://threejs.org/examples" target="_blank"><u>Examples</u></a><br>- <a href="http://stemkoski.github.io/Three.js" target="_blank"><u>More Examples</u></a><br><br>Demos:<br>- <a href="https://triggerrally.com/" target="_blank"><u>TriggerRally</u></a><br>- <a href="http://hexgl.bkcore.com/play/" target="_blank"><u>HexGL</u></a><br>- <a href="http://www.theywilleatyou.com/" target="_blank"><u>They will eat you</u></a><br>- <a href="http://gravitymovie.warnerbros.com/#/experience" target="_blank"><u>Gravity Movie Experience</u></a><br>- <a href="http://helloracer.com/racer-s/" target="_blank"><u>Racer-S WebGL Demo</u></a><br><br><br><b>Canvas 3D JS Library</b><br>Website: <a href="http://www.c3dl.org/" target="_blank"><u>www.c3dl.org/</u></a><br>Download: <a href="https://github.com/cathyatseneca/c3dl" target="_blank"><u>https://github.com/cathyatseneca/c3dl</u></a><br><br>There are some thousand JS libs waiting to get Imported into MX2... ;)<br><br>* all examples require a decent browser supporting WebGL. <br><br></td></tr></table><br>
<a name="2104681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >itto</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry but saying the target is JavaScript is like saying the other targets are Java, C++ and Objective-C. You target a specific platform, not a programming language. The programming language alone doesn't do anything for you unless you use the functionalities the platform provides. JavaScript alone won't show you anything at all to interact with on a browser. JS and HTML5/DOM are both necessary to develop web applications. You can't talk about one without mentioning the other. If the target is JavaScript then I could run my Monkey app on NodeJS. Of course the output language is JavaScript (mainly). But without the environment the browser provides you won't be able to see anything nor interact with anything. And for web applications this is even more of a problem because of browsers inconsistencies. The main reason Mark stated HTML5 has been left out is that it pretty much sucks currently. Either feature X isn't yet available to use, or is too slow for prime time. <br><br></td></tr></table><br>
<a name="2104690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @itto:You target a specific platform, not a programming language. <br></div><br>Technically, trans only cares about the language translation and which post-translation build commands it should run.  The only thing that really restricts your target platforms are the implementations of Mojo available. <br><br></td></tr></table><br>
<a name="2104693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >itto</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Samah whatever is going on technically, there are iOS, Windows, Mac OS and maybe other platforms which all uses C++ as a language. But still, you have different "targets" to tell Monkey to compile the code to. Because the language is only one part of the puzzle. You need to use the platform libraries if you want access to low level stuff. JavaScript is just a language. If you want your game to run in browsers, you need a DOM implementation and global scope (which happens to be the window object in browsers) at the very least. The window object for example is taken for granted in browsers but another environment using JavaScript might provide a different one. JS by itself doesn't render a thing on the screen for you. You need a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API" target="_blank">canvas</a>, which is part of the <a href="https://developer.mozilla.org/en-US/docs/Web/API" target="_blank">HTML5 Web API</a>. So what we are really targeting is the <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5" target="_blank">HTML5</a> ecosystem implemented by browsers, consisting of<br><br><div class="quote"> <br>a larger set of technologies that allows more diverse and powerful Web sites and applications. This set is sometimes called HTML5 &amp; friends and often shortened to just HTML5.<br> <br></div><br><br>Whatever, I'm not trying to be picky as much as I wonder how much JavaScript as a language could be a problem to translate Monkey code to, more so than implementing all the Mojo features of MX2. I'm all for having an HTML5 target for MX2 by the way, even if that would mean losing features. I know there's still Monkey for that, but it kinda feels like staying behind. <br><br></td></tr></table><br>
<a name="2104698"></a>

<a name="2104699"></a>

<a name="2104700"></a>

<a name="2104701"></a>

<a name="2104702"></a>

<a name="2104703"></a>

<a name="2104704"></a>

<a name="2104705"></a>

<a name="2104706"></a>

<a name="2104707"></a>

<a name="2104708"></a>

<a name="2104709"></a>

<a name="2104710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course you are right in that sense. The target languages may be C++ and JavaScript, while each target as a whole also includes APIs/technologies like<br>HTML5, WebGL, OpenGL, DirectX, Direct2D, Cocoa, SpriteKit, SDL, WinAPI, etc...<br><br>I think it's important to differentiate between the target languages and the libraries like Mojo/BRL.<br>Each target should include a plain template that does not include such libs, so we can easily Import<br>3rd party libs (GUI, WebGL, etc), and write our own.<br>For example, a plain JS/HTML5 target should not include code to initialize/setup a canvas. Such stuff is included with<br>3rd party engines already and should not conflict.<br>A plain target code includes the translated language and the required GC functions. You just don't need Mojo<br>when using QT, three.js, Ogre3D, etc. - Mojo is just a lib that you can Import, like any other lib. <br><br></td></tr></table><br>
<a name="2104713"></a>

<a name="2104714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @itto: Because the language is only one part of the puzzle. <br></div><br>Which is why the language translation should not be strictly tied to the available Mojo or BRL native implementations.<br><br><div class="quote"> @itto: JavaScript is just a language. If you want your game to run in browsers, you need a DOM implementation and global scope (which happens to be the window object in browsers) at the very least. <br></div><br>Javascript does not need to be run in a browser.  It's quite feasible to write Monkey code that exports to Javascript, then import that into Unity or another target that supports Javascript.<br><br><div class="quote"> @itto: I'm all for having an HTML5 target for MX2 by the way, even if that would mean losing features. <br></div><br>Then there needs to be clear documentation on the new Mojo 2 features saying "does not work on html5 target".<br><br><div class="quote"> @itto: ...as I wonder how much JavaScript as a language could be a problem to translate Monkey code to... <br></div><br>Javascript isn't the problem, it's about which Mojo 2 features are supported by HTML5.<br><br><div class="quote"> @itto: I know there's still Monkey for that... <br></div><br>Exactly.<br><br>_______________________________________________________________<br><br><div class="quote"> @Danilo: I think it's important to differentiate between the target languages and the libraries like Mojo/BRL. <br></div><br>I agree.<br><br><div class="quote"> @Danilo: Each target should include a plain template that does not include such libs, so we can easily Import<br>3rd party libs (GUI, WebGL, etc), and write our own. <br></div><br>Monkey kind of does already... sort of... The template directories still have a lot of platform-specific code rather than just language translation.<br><br><div class="quote"> @Danilo: For example, a plain JS/HTML5 target should not include code to initialize/setup a canvas. <br></div><br>I get what you're saying, but I would separate JS and HTML5 in this.  A base JS implementation would not set up a canvas, but an HTML5 target would.<br><br><div class="quote"> @Danilo: Such stuff is included with 3rd party engines already and should not conflict. <br></div><br>At the moment the canvas is handled by Mojo and not 3rd party engines, so there should be no problem there.<br><br><div class="quote"> @Danilo: A plain target code includes the translated language and the required GC functions. You just don't need Mojo<br>when using QT, three.js, Ogre3D, etc. - Mojo is just a lib that you can Import, like any other lib. <br></div><br>Spot on. <br><br></td></tr></table><br>
<a name="2104723"></a>

<a name="2104724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >itto</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Samah Javascript isn't the problem, it's about which Mojo 2 features are supported by HTML5. <br></div><br><br>This is what I was trying to say. Since HTML5 doesn't support all of the OpenGL or DirectX features, keeping an HTML5 target would mean lower the bar of possible features Monkey implements. That was the main reason why Mark wanted to leave it out.<br><br><div class="quote"> @Danilo: A plain target code includes the translated language and the required GC functions. You just don't need Mojo when using QT, three.js, Ogre3D, etc. - Mojo is just a lib that you can Import, like any other lib. <br></div><br><br>I see now, you think it should be possible to translate to JS code anyway, even if not all Mojo features can be implemented. But by run it in other environments and by using other libraries/frameworks other than Mojo, we would be able to see our game running anyway. But isn't Monkey supposed to be a fast way to develop games on various platforms? If I can translate my code to JS but it can't run in a browser (because X and Y features work everywhere but in HTML5), then it just becomes a language translator. Or are you saying you would like to see a Unity or Ogre3D target?<br><br><div class="quote"> @Samah Javascript does not need to be run in a browser. It's quite feasible to write Monkey code that exports to Javascript, then import that into Unity or another target that supports Javascript. <br></div><br><br>True, except the point of translating to JS in Monkey right now is to have a game running in a browser. I press the compile button and my game runs in the browser. It's another thing altogether to have to import my generated code to Unity or using framework X, or my code won't do anything by itself.<br><br><b>EDIT</b><br><br>By the way this is why it would be great to have a more modular build system, with separate steps and the possibility to customise them as needed. For example if I wanted my code to be just translated and nothing more, I would just setup the build to run only the code translation phase and skip the others. No need for copying the media folder, create an executable, and whatsoever... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
