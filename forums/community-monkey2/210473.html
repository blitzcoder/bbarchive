<!DOCTYPE html><html lang="en" ><head ><title >mx2cc command line for IDE</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >mx2cc command line for IDE</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=530" >Monkey2 Talk</a>/<a href="#bottom" >mx2cc command line for IDE</a><br><br>
<a name="2118365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I figured I would have a go at building a user-friendly IDE to match monkey2, and so far it is looking good!<br><br>1. How is best practice to deal with monkey updates &amp; install path? <br>Are these the most likely options?<br>A. like in monkey1, a folder for each version: monkeyXPro85, monkeyXPro86, monkeyXPro86c.<br>B. a git clone with a branches for versions/dev/stable something?<br><br>Whatever is preferred I was thinking the IDE could make this user friendly, while I get it is "early" still, any thinking around this that would help IDE design or that can be implemented as a "test"?<br><br>For example is there benefits to:<br>* In the future to be able to run older "code" along with older monkey2 versions?<br>* See if the "new update" was what "broke" something, maybe being able to "revert" easily?<br><br>2. Your own modules<br>Any instructions? Guesses: Namespace must be at top of file? Folder same name as module? Only one namespace per file?<br><br>#Import "&lt;test-mod&gt;"<br><br>Using test<br><br>Function Main()<br>	Print "Calling this "+TestModFunction("because");<br>End<br><br>I get this:<br>[1]: Error : Missing parameter identifier &lt;--- could it say "Does that mean it is expecting Namespace at top of module?"<br><br>I just git updated to latest version I get "Uncaught Error" when calling mx2cc_macos. I figured I'd have to rebuild, but seems build-scripts are not working, says "command does not exist", anyone know what I am missing?<br><br>3. Module folder<br>In monkey1 I remember having some modules in a folder outside the monkeydir that was supplied using a "module-path" to mx2cc. Can mx2cc do something similar to avoid being overwritten with every git update? Other ideas? The editor could just as well pull that cart of course.<br><br>4. Module manager<br>I know I read Mark had a plan for this, or?<br><br>5. How to travel imports<br>To get all dependancies for an App and/or module, how does monkey2 go about searching for where the imported files are?<br><br>6. Improved meta-data<br>I would love for the build-process to return more data.<br><br>I experienced first the complexity of recreating Monkey1's Grammar in Antler, and I would not ask that of anyone! However maybe Monkey already have the name, row and char of every Class/Function/Field/Parameter/... in it's AST already? So maybe an option to return current AST as json, like this: <a href="https://astexplorer.net/" target="_blank">https://astexplorer.net/</a> is not so far-fetched after all?<br><br>With that AST anyone making an IDE can tag up code - allowing for features such as go to source, find calling sources, autocomplete or inline documentation. <br><br>7. mx2cc documentation for reference:<br>#mx2cc compiler<br>mx2cc makeapp|makemods|makedocs [-run] [-clean] [-verbose] [-target=desktop|emscripten] [-config=debug|release] source|modules...<br><br>##Questions:<br>* What does clean do?<br>* What differs release from debug?<br><br>##makedocs<br>makedocs module-name-here<br>- For each module this creates 1-html-page for each function/exception/class/struct in that module's folder along with a index.js that contains all meta-data.<br><br>##makemods<br>makemods -verbose -clean -config=debug -target=desktop module-name-here<br>makemods -verbose -clean -config=release -target=desktop module-name-here<br>- How is module files and imports different from app-files?<br><br>##makeapp<br>makeapp -target=desktop -config=debug path/to/your-monkey-file.monkey2 <br><br></td></tr></table><br>
<a name="2118366"></a>

<a name="2118368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; I get this:<br>&gt; [1]: Error : Missing parameter identifier &lt;--- could it say "Does that mean it is expecting Namespace at top of module?“<br><br>How does your test-mod file look like? You use "&lt;test-mod&gt;“ (a module in the mx2/modules/ directory).<br>Did you add it to modules/modules.txt and rebuild modules? Did you try using "&lt;test-mod.monkey2&gt;“? <br><br></td></tr></table><br>
<a name="2118387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I tough modules.txt was a "readme" file that explained the dependancy order. I'll add it there.<br><br>Added the module like this: /modules/test-mod/test-mod.monkey2<br><pre class=code>
Namespace test-mod.test

Function TestModFunction(text:string)
  return text + " test works!"
End
</pre><br><br><pre class=code>
#Import "&lt;test-mod&gt;"

Using test

Function Main()
	Print "Calling this "+TestModFunction("because");
End
</pre><br><br><b>Github instructions, these correct?</b><br>git fetch origin<br>git reset --hard origin/master<br>'Then on Mac go in command to monkey2/src/<br>Type:<br>sudo ./rebuildall.sh<br><br>I get "Command not found" <br><br></td></tr></table><br>
<a name="2118389"></a>

<a name="2118390"></a>

<a name="2118391"></a>

<a name="2118392"></a>

<a name="2118393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Tibit:<br>1.) Do you have Xcode command-line tools installed? (<a href="https://github.com/blitz-research/monkey2" target="_blank"><u>Install Instructions</u></a>)<br>2.) I just run ./rebuildall.sh - without sudo<br>3.) "Namespace test-mod.test“ looks weird. Try without the minus sign (like variable names and other identifiers). For "Namespace test“ you use "Using test“<br>4.) Specify the return type of the function: Function TestModFunction:String(text:String) <br><br></td></tr></table><br>
<a name="2118411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Danilo, I doubel checked and I did have the xcode commands installed, what happened was that /.rebuildall.sh returns an error that I do not have permission.<br><br>It worked the first time and now that I updated the "current" branch with the new one it seems the cause was that I lost all file permissions. Sudo did not fix this, however after checking the /bin/ and /src/ directories using "ls - l", I saw all those files had -rw-r--r--, so I did a "chmod 755 *" in both directories and now it compiled fine when they have -rwxr-xr-x. So is this something I should need to do every update?<br><br>Anyhow also got the mod to work, renamed it to mymod.monkey2 in folder mymod, works with or without being added to modules.txt. It seems you where spot on that minus does not work in file name, tough other modules have it. <br><br>Minor bug: If you start #rem and then have a #rem inside before the #end it seems the parser gets stuck.<br><br>Working example for reference when building modules:<br><br>modules/mymod/mymod.monkey2<br><pre class=code>
Namespace mymod

Function TestModFunction:string(text:String)
  return text + " Test works!"
End
</pre><br><br>App:<br><pre class=code>
#Import "&lt;mymod&gt;"

Using mymod

Function Main()
	Print "Calling this "+TestModFunction("because")
End</pre> <br><br></td></tr></table><br>
<a name="2118409"></a>

<a name="2118410"></a>

<a name="2118422"></a>

<a name="2118423"></a>

<a name="2118424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; It seems you where spot on that minus does not work in file name, tough other modules have it.<br><br>You can have a dash in the module name (which is really just a filename) but NOT in a namespace identifier (which is a normal language identifier).<br><br>So you could call the module 'my-mod', but not the namespace - that would have to be 'my_mod' or some other valid identifier. <br><br>Module names are never referenced 'in code' (that's why they're #imported - they're just files). Only the namespace(s) declared inside modules are.<br><br>I have been using the '-' in module names to indicate the namespace hierarchy of module contents. For example, the 'stb-image' module declares some stuff in the 'stb.image' namespace. Ditto 'stb-truetype' declares stuff in 'stb.truetype'. But feel free to abuse the dash for any purpose you want - it's just part of a filename. <br><br></td></tr></table><br>
<a name="2118426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does this mean every file is explicitly imported? If I traverse all imports from main recursively I get every file that contains code used by the app. Ex: import &lt;"some-module"&gt; the only thing to check is the module directory for /some-module/some-module.monkey2.<br><br>Or does it check the app folder as well?<br><br>Does does the import care about folder structure? Would Import &lt;"some-framework/rendering/circe-rendering-mod"&gt; be equal to Import &lt;"circe-rendering-mod"&gt;? <br><br></td></tr></table><br>
<a name="2118434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; Does this mean every file is explicitly imported? <br><br>Effectively, yes. The only exceptions are the monkey module, which is always imported, and the 'root' file you pass to mx2cc. Apart from that, there's at least one #import for every monkey2 file compiled.<br><br>&gt; Or does it check the app folder as well?<br><br>Nope, all modules go in the modules folder. It may end up that I add something like monkey1's MODULES_PATH env var with a list of paths to search for modules, but this wont affect the syntax for #Import.<br><br>&gt; "&lt;some-framework/rendering/circe-rendering-mod&gt;"<br><br>This is (will be!) illegal. Module names can't have '/' in them since they map to top level dirs in '/modules/'. And this more or less goes for all #imports that are enclosed in '&lt;&gt;'. This indicates a 'system import' and these imports are generally stored in 'magic' locations known to the compiler(s) - ie: the compiler is in charge of working out what dirs to search for the import file.<br><br>If you just want to import a money2 file at an arbitrary file location, use a simple relative import, eg:<br><br>#Import "../blah/etc/somefile.monkey2"<br><br>(I'll probably allow you to drop the .monkey2 extension as I have with modules too - I may have already!)<br><br>Same deal goes with namespaces though - somefile.monkey2 will need a Namespace at the top to say where it's decls end up. But the actual filename 'somefile.monkey2' is completely irrelevant except for when you're #importing it. <br><br></td></tr></table><br>
<a name="2118431"></a>

<a name="2118432"></a>

<a name="2118438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome, seems like several IDE things is going to be much easier in monkey2. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
