<!DOCTYPE html><html lang="en" ><head ><title >Random thoughts and ideas...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Random thoughts and ideas...</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=530" >Monkey2 Talk</a>/<a href="#bottom" >Random thoughts and ideas...</a><br><br>
<a name="2102083"></a>

<a name="2102084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just some weird ideas...<br><br>***** Virtual constructors *****<br><br>If new() could also be a function, class ctors would be able to return subclasses, eg:<br><br><pre class=code>
class C
   function new( arg:int )
      if arg=1 return New D
      if arg=2 return new E
      return new C 
   end
end

Class D extends C
end

class E extends C
end
</pre><br><br>There are issues with this: new may return null (could return null on failure); new may not return unique instances (could return values from a cache). Either could be good or bad...<br><br>***** Single line decls/statements ******<br><br>Similar to single line If...<br><br><pre class=code>
function add:int( x:int,y:int ) return x+y

function sum:int( values:int[] )
   local sum:=0
   for local value:=eachin values sum+=value
   return sum
end
</pre><br><br>Terminating end, wend etc optional. <br><br></td></tr></table><br>
<a name="2102077"></a>

<a name="2102102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Local foo := Closure&lt;String&gt;(a$)
	Print(a)
End

Method Bar(hello:Closure&lt;String&gt;)
	hello("blah")
End</pre><br>Generic defines the parameter types of the closure. <br><br></td></tr></table><br>
<a name="2102110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't really get that code - what's the point in 'Closure' being generic if all types are known?<br><br>Also, I'm not sure if monkey will do 'lambda functions' (same as closures?) just yet, as there are some ugly parsing issues similar to python: <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=147358" target="_blank">http://www.artima.com/weblogs/viewpost.jsp?thread=147358</a><br><br>'Single line' lambdas are possible though.<br><br>This code works though:<br><br><pre class=code>
function Foo&lt;T&gt;:Void( t:T )
    print t
end

function Bar:Void( func:Void(String) )
   func( "blah" )
end

Bar( Foo )
</pre> <br><br></td></tr></table><br>
<a name="2102109"></a>

<a name="2102106"></a>

<a name="2102104"></a>

<a name="2102105"></a>

<a name="2102173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <b>marksibly wrote:</b><br><pre class=code>function sum:int( values:int[] )
   local sum:=0
   for local value:=eachin values sum+=value
   return sum
end</pre> <br></div><br>You could differentiate between single-line and multi-line<br>by using keywords like 'Then' and 'Do'.<br><br><pre class=code>
If [expression]
    [statements]
ElseIf [expression]
    [statements]
Else
    [statements]
EndIf

If [expression] Then [statement]

If [expression] Then [statement] Else [statement]

' If you want to allow 'Then' for blocks:
If [expression] Then [end-of-line]
    [statements]
EndIf


'
' Multiple statements in single-liners (separated by comma)?
'
If [expression] Then [statement1], [statement2], [statement3]

If [expression] Then [statement1], [statement2], [statement3] Else [statement1], [statement2], [statement3]

'
' multiple [statement] separated by comma is a [statement-list]
'
If [expression] Then [statement-list]

If [expression] Then [statement-list] Else [statement-list]

'
' Same for For..Next
'
For local value:=Eachin values
   sum+=value
Next [opt:var]

For local value:=Eachin values Do [statement-list]
For local value:=Eachin values Do sum+=value



For local value:=  1   To   10  Do  sum+=value  ' [statement-list]
For local value:=  1   To   10  Do  sum+=value
For local value:= 10 DownTo 1   Do  sum+=value

'
' While..Wend
'
While [expression]
    [statements]
Wend

While [expression] Do [statement]

While [expression] Do [statement1], [statement2], [statement3]
' becomes:
While [expression] Do [statement-list]

While function()=0 Do count+=1

'
' 'Do' and 'Repeat'
'
' (same thing with different linguistics for supporting differentiated thinking
'  and enunciation/phrasing -&gt; freedom of mind to express thoughts in code)
'
Do [end-of-line]
   [statements]
While [expression]

Do [end-of-line]
   [statements]
Until [expression]

Do [end-of-line]
   [statements]
Forever

Do [statement] While [expression]
Do [statement] Until [expression]
Do [statement] Forever

Do [statement1], [statement2], [statement3] While [expression]
Do [statement1], [statement2], [statement3] Until [expression]
Do [statement1], [statement2], [statement3] Forever

Do [statement-list] While [expression]
Do [statement-list] Until [expression]
Do [statement-list] Forever


Repeat [end-of-line]
   [statements]
While [expression]

Repeat [end-of-line]
   [statements]
Until [expression]

Repeat [end-of-line]
   [statements]
Forever

Repeat [statement] While [expression]
Repeat [statement] Until [expression]
Repeat [statement] Forever

Repeat [statement1], [statement2], [statement3] While [expression]
Repeat [statement1], [statement2], [statement3] Until [expression]
Repeat [statement1], [statement2], [statement3] Forever

Repeat [statement-list] While [expression]
Repeat [statement-list] Until [expression]
Repeat [statement-list] Forever
</pre> <br><br></td></tr></table><br>
<a name="2102155"></a>

<a name="2102156"></a>

<a name="2102152"></a>

<a name="2102154"></a>

<a name="2102159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <b>marksibly wrote:</b><br>***** Virtual constructors *****<br><br>If new() could also be a function, class ctors would be able to return subclasses, eg:<br><pre class=code>class C
   function new( arg:int )
      if arg=1 return New D
      if arg=2 return new E
      return new C 
   end
end

Class D extends C
end

class E extends C
end</pre> <br></div><br>I don't think that's necessary. Constructors should automatically return<br>the type of itself. For returning subclasses, you would then use a simple function/static method:<br><pre class=code>class C

   Method New()         ' Constructor
   End

   Method Constructor() ' Constructor
   End

   Function New:C( arg:int ) ' that's just a static method/function, no automatic constructor
      if arg=1 return New D
      if arg=2 return new E
      return new C 
   end
end

Class D extends C
end

class E extends C
end</pre><br><br><div class="quote"> <b>marksibly wrote:</b><br>There are issues with this: new may return null (could return null on failure); new may not return unique instances (could return values from a cache). Either could be good or bad... <br></div><br>Failure to create an object would/should result in an exception, shouldn't it? <br><br></td></tr></table><br>
<a name="2102177"></a>

<a name="2102178"></a>

<a name="2102179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
' Multiple statements in single-liners (separated by comma)?
'
If [expression] Then [statement1], [statement2], [statement3]
</pre><br><br>I would prefer the old approach of concatenating statements with semicolons.<br>As long as you do not enforce brackets <b>SetColor(r, g, b)</b> you introduce ambiguity.<br><br>I am also using "Then" for single-line IFs and none for multi-line ones. For "compatibility issues" you might not be able to change this behaviour for "Monkey 2".<br><br>bad:<br><pre class=code>
If isDesiredImage GetImage 10 DrawImage GetImage 10, 10, 10
</pre><br><br>better:<br><pre class=code>
If isDesiredImage( GetImage(10) ) Then DrawImage( GetImage(10) , 10, 10)
</pre><br><br><br><br><div class="quote"> Failure to create an object would/should result in an exception, shouldn't it? <br></div><br>runtime =/= compile time.<br><br><br>@new-functions<br>As soon as someone "overrides" (introduces) a custom New()-function it is up to the developer to take care of whether things are null or not. Introducing checks there will lead to some unneeded workload for the processor.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="2102184"></a>

<a name="2102185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Derron<br>Thanks for reminding me. In my own syntax considerations functions/methods always use parentheses, of course.<br>Variables and properties are accessed without parentheses. Your bad/better example is fine for showing readability.<br><br>Using ; (semicolon) or : (colon) is perfectly fine with me. MonkeyX seems to enforce using the semicolon:<br><pre class=code>Function Main:Int()
    Local switch:Bool = True
    If switch Then f1(); f2(); f3()
    Return 0
End

Function f1:Void()
    Print "f1"
End

Function f2:Void()
    Print "f2"
End

Function f3:Void()
    Print "f3"
End</pre><br>Whereas BlitzMax allows multiple statements without using a statement separator:<br><pre class=code>Function Main:Int()
    Local switch:Int = 1
    If switch Then f1() f2() f3()
    Return 0
End Function

Function f1()
    Print "f1"
End Function

Function f2()
    Print "f2"
End Function

Function f3()
    Print "f3"
End Function

Main()</pre><br>Without using any statement-separator within [statement-list] can be confusing sometimes, in my opinion.<br><br>Forcing use of paranthesis for methods/functions also makes parsing easier and gives a nice and clean syntax. <br><br></td></tr></table><br>
<a name="2102183"></a>

<a name="2102188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm always assumed BlitzMax used ";" to concatenate ...seems this is even not needed.<br><br>In that case the ambiguity could get even worse (functions with default values chained together).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="2102216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Several considerations:<br><br>1.- Please, don't make ";" optional as it is now, in some places in MonkeyX. Making it consistent everywhere can make writing fast IDE parsers a lot easier and efficient.<br><br>2.- Also, allowing a right-to-left parsing (that is, not using &lt; and &gt; for generics, such as in D, or VB, etc.) makes writing intellisense systems much more simpler, and prevents impossible to single-pass parse isntructions such as this one:<br><pre class=code>If MyShomething(identifier1)&lt;identifier2&gt;(identifier3) Then Identifier4</pre><br>It is impossible to know if this is a typecase operation with generics, or a comparison operation. MySomething could be a function or a class name, where identifier2 could be a class name or a local variable, while identifier3 can be anything. That makes the operator &lt; and &gt; impossible to understand unless surrounding ones are completely lexed, which is not exactly very nice (requires 2 phases at best). D has a nicee way to disambiguate this quite nicely [a http://en.wikibooks.org/wiki/A_Beginner's_Guide_to_D/Templates_and_Generic_Programming/Template_Classes ] see here [/a] Also vb.net uses Of operator for the same reason. <br><br></td></tr></table><br>
<a name="2102215"></a>

<a name="2102213"></a>

<a name="2102214"></a>

<a name="2102249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Flad</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If anything, make constructors (well new actually) work with a given block of memory - i.e. placement new alike.<br><br>Performance these days is so dependent on a cache optimized data layout and it kind of kills langauges like C# for high performance inner loops. With the quite absurd results that it's so common not to write fast code because users of the languages measure there's hardly a benefit (and learn that it's not required to write fast code anymore) when the real bottleneck is the cache/memory that's slowing down the whole thing by factor of 10 or even more already. <br><br></td></tr></table><br>
<a name="2102347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why do you want create unuseful syntax complications?<br><br><pre class=code>
for local value:=eachin values sum+=value
</pre><br><pre class=code>
for local value:=eachin values
sum+=value
next
</pre><br>Just to gain 2 lines and one word?<br>I don't think or value it as an important factor in a language.<br>In any case, until I can use the second approach I'm happy.<br>But I think that approach 1 makes hard to read the code. <br><br></td></tr></table><br>
<a name="2102366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Danilo's "Do" seems like a pretty decent catch-all for single-line statements requiring an expression that would normally need an entire code block. In other threads I suggested "Returns" for this, but it was specifically for function definitions such as lambdas and property getter/setters, whereas "Do" sounds like it would be readable on nearly any type of statement to separate the expression part from the rest.  Agreeing with everyone else in here who said that not enforcing parenthesis on method/function calls introduces a lot of ambiguity which probably hurts parsing the code.  Using &lt;&gt; for generics makes it easier to read, though I wonder how messy that will get if closures get involved.  I don't know about the difficulties in parsing/lexing code, since I've never written a compiler nor a code editor, so take what I say with a grain of salt. <br><br></td></tr></table><br>
<a name="2102501"></a>

<a name="2102502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pharmhaus</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I am not sure if this is the right place to put this, but one of the things that I miss in Monkey a lot is the lack of (fake) overloading for the slicing operator [..]<br>and the index operator. For example, in C# you can simply define an own index operator in your class and this is used by the normal .NET data structures such as List and Dictionary.<br><br><br><br>Another thing that could be improved in MX2 is the inability to define Maps and the like in a really generic way. One has to use stringmap, intmap etc.<br>It would be cool if you could do something similiar to C#s "Default(T)" which returns the default value for the type T.<br><br><br><br><br><div class="quote"> <br>Please, don't make ";" optional as it is now, in some places in MonkeyX. Making it consistent everywhere can make writing fast IDE parsers a lot easier and efficient.<br> <br></div><br>+1 <br><br></td></tr></table><br>
<a name="2102506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Pharmhaus<br><div class="quote"> Another thing that could be improved in MX2 is the inability to define Maps and the like in a really generic way. One has to use stringmap, intmap etc.<br>It would be cool if you could do something similiar to C#s "Default(T)" which returns the default value for the type T. <br></div><br><br>Since we're on the subject, it would be nice to migrate all containers to take a standard generic Comparator&lt;T&gt; (or implement Comparable&lt;T&gt;) so that sorting can be done based on however we want, without having to necessarily extend the classes to do this. <br><br></td></tr></table><br>
<a name="2102535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Basically blitzmax with 64bit support and a possibility of 3d <br><br></td></tr></table><br>
<a name="2102563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @marksibly: If new() could also be a function, class ctors would be able to return subclasses, eg: <br></div><br>Eww... constructors are for instantiating the class they belong to.  If you want to do magic code to select subclasses, you should be using a factory pattern.<br>Also, please please please allow calling other constructors: Self.New()<br><br><div class="quote"> @marksibly: Don't really get that code - what's the point in 'Closure' being generic if all types are known? <br></div><br><i>Local foo:Closure&lt;String&gt;</i> is like <i>void (*foo)(String);</i><br><br><div class="quote"> @ziggy: 1.- Please, don't make ";" optional as it is now, in some places in MonkeyX. Making it consistent everywhere can make writing fast IDE parsers a lot easier and efficient. <br></div><br>+1, but good luck convincing most developers.  I got shot down when I suggested this for Monkey.<br><br><div class="quote"> @Nobuyuki: Since we're on the subject, it would be nice to migrate all containers to take a standard generic Comparator&lt;T&gt; (or implement Comparable&lt;T&gt;) so that sorting can be done based on however we want, without having to necessarily extend the classes to do this. <br></div><br>Or Mark could just include Diddy containers with Monkey. :)<br><br><div class="quote"> @EdzUp: Basically blitzmax with 64bit support and a possibility of 3d <br></div><br>3D support will be a module and not part of the language scope. <br><br></td></tr></table><br>
<a name="2102562"></a>

<a name="2102561"></a>

<a name="2102655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am late to the party in this thread so may be re-stepping what has already been said, but a massive +1 for constructors being able to decide what they return.<br>(from another post)<br><pre class=code>Class Base&lt;T&gt;
	Global pool &lt;T&gt;:= New Pool&lt;T&gt;
	
	Method New()
		If pool.IsEmpty()
			Return New T
		Else
			Return pool.Pop()
		EndIf
	End
	
	Method Destroy()
		pool.Push(Self)
	End
End

Class Item Extends Base&lt;Item&gt;
End

Function Main:Int()
	Local i:= New Item
	Destroy i
End</pre><br><br>Something like this would be so clean! (also with pseudo destructor :) <br><br></td></tr></table><br>
<a name="2102651"></a>

<a name="2102652"></a>

<a name="2102650"></a>

<a name="2102659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Please, don't make ";" optional as it is now, in some places in MonkeyX. Making it consistent everywhere can make writing fast IDE parsers a lot easier and efficient. <br></div><br><br>+1 <br><br></td></tr></table><br>
<a name="2102668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @ziggy: 1.- Please, don't make ";" optional as it is now, in some places in MonkeyX. Making it consistent everywhere can make writing fast IDE parsers a lot easier and efficient.<br>+1, but good luck convincing most developers. I got shot down when I suggested this for Monkey. <br></div><br>Well, ; is now allows in Monkey to concatenate statements in the same line, but only inside method and function bodies. I would suggest it to allow it everywhere, or nowhere. The fact that they can be optional at the end of a sentence, when the sentence ends at the end of the line, is ok for me, as it is constant and equal everywhere.<br><pre class=code>
Class MyClass Extends Another
    Private _myID := 45
    Field myField := 5

    Overrides Property MyNumber() ; Getter; Returns myID; End
    Overrides Property MyName$(); Getter; Returns "Paul"; End
    Overrides Property Whatever%() ; Getter; Returns Rnd(0,5); End

End
</pre><br>Not that I like the way I've used in the sample above, just tried to explain what I meant. <br><br></td></tr></table><br>
<a name="2102667"></a>

<a name="2102678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ziggy<br>I'd rather see semicolons be allowed everywhere than to see line-returns as terminators allowed nowhere.  This is a BASIC dialect we're talking about here...  Perhaps the way to solve the difficult parse/lexing would be to eliminate the ambiguous line continuation rules and just force a line continuation character instead?  (VB uses " _ " for this) <br><br></td></tr></table><br>
<a name="2102682"></a>

<a name="2102683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Shouldn't private constructors be possible in MX2?<br><pre class=code>Class Item

    Private

        Global pool:= New List&lt;Item&gt;
    
    	Method New()
        End
    
    Public
    
        Function GetInstance:Item()
            If pool.IsEmpty()
                Return New Item
            Else
                Return pool.RemoveLast()
            EndIf
        End
    	
        Method Destroy()          ' pseudo destructor
            pool.AddLast(Self)
        End

End


Function Main:Int()
    Local i:= Item.GetInstance()
    Local j:= New Item()          ' shouldn't work, Constructor is private
    i.Destroy()
    j.Destroy()
End</pre> <br><br></td></tr></table><br>
<a name="2102685"></a>

<a name="2102686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @ziggy<br>I'd rather see semicolons be allowed everywhere than to see line-returns as terminators allowed nowhere. This is a BASIC dialect we're talking about here... Perhaps the way to solve the difficult parse/lexing would be to eliminate the ambiguous line continuation rules and just force a line continuation character instead? (VB uses " _ " for this) <br></div><br>I0m okey with "latest token is operator" rule for line continuation. In fact, modern VB does this too! (no need for the _ char, or the .. of BlitzMax). the issue is that Monkey1 allows for situations where you can directly avoid the ; operator and the parser just ignores this.<br><br>This code compiles:<br><pre class=code>Function Main()
	Local name:= "Hello" Print name If name &lt;&gt; "Hello" Print "Unexpected error"
	Local i:= 1 While i &lt; 10 i += 1 Print i Wend
End</pre><br>but according to language specification, it should be like this:<br><pre class=code>Function Main()
	Local name:= "Hello"; Print name; If name &lt;&gt; "Hello" Print "Unexpected error"
	Local i:= 1; While i &lt; 10; i += 1; Print i; Wend
End</pre><br>I do honestly think that the compiler is just considering the semicolon as whitespace. <br><br></td></tr></table><br>
<a name="2102695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I never liked that in Monkey either (or functions returning values without brackets!), not that it affected me. Statement separators being always ; seems much tidier, as long as they're not required at the end of a line.<br><br><div class="quote"> <br>Local name:= "Hello" Print name If name &lt;&gt; "Hello" Print "Unexpected error"<br> <br></div><br>Yeah, that's a weird combination of vague <i>and</i> horrendous! <br><br></td></tr></table><br>
<a name="2102706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, I had no idea that passed the compiler at all.  Now I think I understand what you meant the first time around.<br><br>Does that pass the compiler in Strict mode?  Mark did mention something like Monkey2 operating in a "Strict" mode by default, which I'm presuming means that functions will require parenthesis now and (I'm presuming) that kinda code would not get anywhere close to compiling... <br><br></td></tr></table><br>
<a name="2102760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshKlint</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't really care about new language features over BMX other than function and operator overloading, and constructors. <br><br></td></tr></table><br>
<a name="2102761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> @JoshKlint: Generics and Delegates, once you start using them, you'll love them too! <br><br></td></tr></table><br>
<a name="2102840"></a>

<a name="2102841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nullterm</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 1.- Please, don't make ";" optional as it is now, in some places in MonkeyX. Making it consistent everywhere can make writing fast IDE parsers a lot easier and efficient. <br></div><br><br>No!  This is one of my favourite "features" of Monkey, not needing to write bloody ;'s all over the place.  I love the simplicity of life without semicolons.  <br><br>Requiring semicolons between statements is holdout from decades ago when compiler writers made programmers jump through crazy syntax hoops to make their own lives easier. <br><br></td></tr></table><br>
<a name="2102842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nullterm</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just found this forum, and I have to say the prospect of a Monkey 2 has me more excited than Christmas.<br><br><b>Destructor/Finalize</b> - This would make life so much easier collecting resources like OpenGL vertex buffers, textures, etc.  I know in a gc based system the timing is random, but would make life easier/safer. <br><br></td></tr></table><br>
<a name="2102852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> No! This is one of my favourite "features" of Monkey, not needing to write bloody ;'s all over the place. I love the simplicity of life without semicolons. <br></div>I was talking about sentences in the same line. I explained here: <a href="http://www.monkey-x.com/Community/posts.php?topic=9713&amp;post=102686" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=9713&amp;post=102686</a> <br><br></td></tr></table><br>
<a name="2103470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PixelPaladin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> First of all:<br>Hello Everyone! (it's my first post here)<br><br><br>It seems that this is the right place to post a list of language features I would like to see in Monkey2.<br><br><br>Enumeration:<br><br><pre class=code>
Enum Day
	Monday
	Tuesday
	Wednesday
	Thursday
	Friday
	Saturday
	Sunday
End

For i:Day = Wednesday To Friday
	Print i
End

' output:
' 2
' 3
' 4
</pre><br><br>Some syntactic sugar:<br><br><pre class=code>
a:Map&lt;String, Int&gt;

a["foo"] = 123 ' -&gt; a.Set("foo", 123)

Print a["foo"] ' -&gt; Print a.Get("foo")
</pre><br><br>All the cool lambda stuff, function factories, closures, ...<br><br><pre class=code>
Function CreateAdder:Int(Int)(i:Int)
	Function Adder:Int(x:Int)
		Return x + i
	End
	Return Adder
End

MyAdder = CreateAdder(3)
Print MyAdder(24)

' output:
' 27
</pre><br><br>Built in signals and slots:<br><br><pre class=code>
Class MyClass1
	Signal Foo(String, String)
End

Class MyClass2
	Slot Bar(a:String, b:String)
		Print a+" "+b
	End
End

Class MyClass3
	Slot FooBar(a:String, b:String)
		If a = b Then Print a+" = "+b Else Print a+" &lt;&gt; "+b
	End
End

x := New MyClass1
y := New MyClass2
z := New MyClass3

Connect(x.Foo, y.Bar)
Connect(x.Foo, z.FooBar)

x.Foo("hello", "world") ' -&gt; emit x.Foo

' output:
' hello world
' hello &lt;&gt; world
</pre><br><br>Something like an Invoke()-Method would be interesting (I used this for hacking lambda functionality into the monkey 81b translator):<br><br><pre class=code>
Class Bar
	Invoke:Void(x:String)
		Print x
	End
End

foo := New Bar

foo("hello")

' output:
' hello
</pre><br><br>Some possibility for making lines shorter for better readability:<br><br><pre class=code>
Function SomeFunction:SomeType(parameter1:Xyz, parameter2:Xyz, \
                               parameter3:Xyz, parameter4:Xyz, \
                               parameter5:Xyz, parameter6:Xyz, \
                               parameter7:Xyz, parameter8:Xyz)
	{...}
End
</pre><br><br>Last but not least: It would be nice to have some scripting language support (maybe lua) - but that is not really a language feature ... <br><br></td></tr></table><br>
<a name="2103476"></a>

<a name="2103477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @PixelPaladin: Some possibility for making lines shorter for better readability: <br></div><br>Monkey already does this for some operators.  You'll find if you remove those backslashes in your code example, it will already compile in the way you're expecting.<br><br><div class="quote"> @PixelPaladin: It would be nice to have some scripting language support (maybe lua)  <br></div><br>Hasn't been updated in a while, but:<br><a href="http://code.google.com/p/monkeylua/" target="_blank">http://code.google.com/p/monkeylua/</a> <br><br></td></tr></table><br>
<a name="2103577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PixelPaladin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Monkey already does this for some operators. You'll find if you remove those backslashes in your code example, it will already compile in the way you're expecting.<br> <br></div><br>Sorry - I didn't know that. I think it was not possible in older versions. I will clean up my source codes immediately :)<br><br><div class="quote"> <br>Hasn't been updated in a while, but:<br><a href="http://code.google.com/p/monkeylua/" target="_blank">http://code.google.com/p/monkeylua/</a><br> <br></div><br>To be more precisely, I meant that with only the main desktop and mobile platforms left, it would be nice to have scripting support for all platforms in monkey2 - including android and ios. If the current native modules could be used in monkey2, monkeylua would be a good starting point for this. <br><br></td></tr></table><br>
<a name="2103642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @PixelPaladin: ...including android and ios. <br></div><br>Since it just wraps the official Lua API, MonkeyLua will (theoretically) work for any C target, which means GLFW, iOS, and Android (NDK).<br>I'm not sure if it compiles/works with the latest version of Monkey, so if people are interested I can update it and look at getting some other targets working.<br><br>When I first started MonkeyLua, it was a port of a C# implementation to pure Monkey.  This turned out to be infeasible due to Monkey's lack of structs and pointers, since it would mean simulating them using objects and arrays.  All these objects would be death for the GC.  I opted instead to just wrap the C API.<br><br>As for Monkey2, if it supports structs and pointers, etc. I'll be able to clone the Lua VM in pure Monkey2 source. <br><br></td></tr></table><br>
<a name="2103641"></a>

<a name="2103640"></a>

<a name="2103646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lots of good ideas there PixelPaladin, and I'll try get as many of them going as I can!<br><br>One thing I would like to do is NOT have a separate Signal/Slot concept - instead, you should be able to use function ptrs, eg:<br><br><pre class=code>
class Source
   field Signal:void()
end

class Target
   method Slot:void()
   end
end

function main:void()
   local s:=new Source
   local t:=new Target
   s.Signal=t.Slot
End
</pre><br><br>The problem with this of course is that you can only connect 1 slot up to a signal at a time, so some kind of multicast system needs to be added. C# hardwires this into delegate I think, but it'd be nicer if you could code it up yourself somehow, so you could control the order slots are called, what to do with return values etc.<br><br>One idea would be to use something like C++ variadic template parameters to allow 'Invoke' methods to be written, eg:<br><br><pre class=code>
class Signal&lt;F&gt;
   field _slots:Stack&lt;F&gt;

   method AddSlot:void( slot:F )
      _slots.Push slot
   end

   method Invoke&lt;...&gt;:F.ReturnType( ... )
      for local slot:=eachin _slots
         slot( ... )
      next
   end

end
</pre><br><br>Ok, very much off the top of my head, syntax wouldn't probably work etc, but I think it'd be very flexible. <br><br></td></tr></table><br>
<a name="2103645"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
