<!DOCTYPE html><html lang="en" ><head ><title >A little parallax side scrolling test</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >A little parallax side scrolling test</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=530" >Monkey2 Talk</a>/<a href="#bottom" >A little parallax side scrolling test</a><br><br>
<a name="2120591"></a>

<a name="2120592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't converted most of my Monkey1 code, so this means I don't have my Entity/Component framework yet. But I wanted to rewrite the whole thing anyway, this time breaking it into more independent modules (as in: modules that only import Mojo). Once I have those, I'll rewrite the entity-style main module, with components that use these modules.<br><br>Meanwhile I've made this little test just for fun (and learning!). You can fetch it from here:<br><a href="https://github.com/DoctorWhoof/GridShooter" target="_blank">https://github.com/DoctorWhoof/GridShooter</a><br><br><img src="https://dl.dropboxusercontent.com/u/446189/Images/Screen%20Shot%202016-06-01%20at%209.54.00%20PM.png"><br><br>Some notes:<br>- Doesn't do much yet, just flying around and shooting.<br>- Coordinates are centered at the camera. I.e. If the resolution is 640x480 and the camera is at 0,0, upper left corner is -320,-240, lower right corner is 320,240.<br>- All texture filtering is off. Go full screen for Maximum Pixelness!<br>- There's a basic sprite class that can load sprite sheets, define animation clips ( series of frames to be played in order ) and change playback framerate.<br>- The Background class figures out which "tiles" are visible (based on the parallax corrected camera rect) and only draws those, respecting camera translation and parallax. Eventually this will become a Tilemap engine.<br>- The parallax is provided by Mojo's Canvas.Translate().<br>- I don't like that Mojo's Rect class doesn't have handles, so I made an Area class that is basically a rect with a movable handle, just like an Image object. The camera is an Area with centered handles.<br><br>Comments about the code are welcome!<br>Cheers! <br><br></td></tr></table><br>
<a name="2120520"></a>

<a name="2120521"></a>

<a name="2120522"></a>

<a name="2120523"></a>

<a name="2120531"></a>

<a name="2120533"></a>

<a name="2120534"></a>

<a name="2120537"></a>

<a name="2120538"></a>

<a name="2120539"></a>

<a name="2120540"></a>

<a name="2120541"></a>

<a name="2120542"></a>

<a name="2120543"></a>

<a name="2120580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice!<br><br>If I resize the window too much the main playfield goes pink/purple? <br><br></td></tr></table><br>
<a name="2120581"></a>

<a name="2120585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Neat. Adding MinSize=New Vec2i( 340,200 ) in New() will stop it from showing CLS color when resized to small. Not sure why it does that. <br><br></td></tr></table><br>
<a name="2120593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Weird, on OSX I only see the pink/purple colors for a frame, then it refreshes correctly and stays correct.<br>I'll give it a try when I get home, are you guys seeing this issue on Windows? <br><br></td></tr></table><br>
<a name="2120597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice!<br><br>The magenta texture issue is a bit interesting. The problem is that TextureFlags.DefaultFlags is not actually a valid mask, so you can't just &amp;= stuff off it, eg:<br><br>_flags = TextureFlags.DefaultFlags<br>If Not filterTextures Then _flags &amp;=~ TextureFlags.Filter<br><br>TextureFlags.DefaultFlags is actually it's own flag so shouldn't be combined with other flags. It's interpreted differently depending on whether you create a texture with a pixmap or with width,height. This should fix it:<br><br>_flags=Null 'assumes no mipmapping required.<br>If filterTextures Then _flags|=TextureFlags.Filter.<br><br>Not sure why the pink thing is only happening now and then though, will keep investigating...<br><br>But I might ditch TextureFlags.DefaultFlags altogether for this reason. I can just specify the 'real' default flags directly in Image.Load etc.<br><br>I actually have Canvas.TextureFilteringEnabled going now too, which makes me think do we actually need all this flags crap (for filtering at least)? Instead, we could just have a single Canvas.TextureFilter property... <br><br></td></tr></table><br>
<a name="2120600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But I might ditch TextureFlags.DefaultFlags altogether for this reason. I can just specify the 'real' default flags directly in Image.Load etc. <br></div><br>Sounds good, thanks for looking into it, Mark! <br><br></td></tr></table><br>
<a name="2120602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it OK to add your demo to bananas? <br><br></td></tr></table><br>
<a name="2120603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure! No problem, but I'm still working on it. I was planning on adding enemies and, you know, some actual gameplay soon.<br>I'll keep it up to date on Github. <br><br></td></tr></table><br>
<a name="2120604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is it OK to add your demo to bananas? <br></div><br>This demo is a good coding example. For example I had no clue I could extend RenderWindow. :) <br><br></td></tr></table><br>
<a name="2120605"></a>

<a name="2120607"></a>

<a name="2120608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  For example I had no clue I could extend RenderWindow. :) <br></div><br>RenderWindow itself is a subclass of Window! You may want to extend that one if you want to control things more carefully.<br><br>Also, some of the things I did there aren't exactly how I'd do them "for real", i.e.: I'd make the player and bullets subclasses of some sort of an Entity or Actor class, instead of keeping track of the player's x and y coordinates in the RenderWindow class... but I wanted to keep it short. <br><br></td></tr></table><br>
<a name="2120609"></a>

<a name="2120610"></a>

<a name="2120611"></a>

<a name="2120612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You may want to extend that one if you want to control things more carefully. <br></div><br>True. But it looks convenient to do it that way for some tasks. I like discovering whats possible. :P <br><br></td></tr></table><br>
<a name="2120690"></a>

<a name="2120691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi people,<br><br>Sorry if this has been solved or explained before but I was trying to run the demo and got a few errors. I haven't been programming for a while so I am quite behind on whats going on.<br>I tried to look around the site to see if I could figure it out but no luck.  This is the error I get when I try to run the code:<br><div class="quote"> <br>"/Users/legend/monkey2/bin/mx2cc_macos" makeapp -target=Emscripten -config=Debug "/Users/legend/monkey2/GridShooter/gridshooter.monkey2"<br>MX2CC V0.009<br><br>***** Building app '/Users/legend/monkey2/GridShooter/gridshooter.monkey2' *****<br><br>Parsing...<br>Semanting...<br>/Users/legend/monkey2/GridShooter/gamegraphics/src/background.monkey2 [9] : Error : Type 'mojo.graphics.TextureFlags' has no member named 'DefaultFlags'<br>/Users/legend/monkey2/GridShooter/gamegraphics/src/background.monkey2 [10] : Error : Identifier 'flags' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/src/background.monkey2 [12] : Error : Identifier 'flags' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/src/background.monkey2 [13] : Error : Identifier 'atlasTextture' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/src/background.monkey2 [14] : Error : Identifier 'atlasTextture' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [39] : Error : Type 'mojo.graphics.TextureFlags' has no member named 'DefaultFlags'<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [40] : Error : Identifier 'flags' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [42] : Error : Identifier 'flags' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [43] : Error : Identifier 'atlasTextture' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [45] : Error : Identifier 'atlasTextture' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [48] : Error : Identifier 'atlasImg' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [58] : Error : Identifier 'atlasImg' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [66] : Error : Identifier 'atlasImg' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [74] : Error : Identifier 'columns' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [75] : Error : Identifier 'columns' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [76] : Error : Identifier 'atlasImg' not found<br>/Users/legend/monkey2/GridShooter/gamegraphics/gamegraphics.monkey2 [80] : Error : Identifier 'atlasImg' not found<br>/Users/legend/monkey2/GridShooter/renderwindow/renderwindow.monkey2 [123] : Error : Type 'mojo.graphics.TextureFlags' has no member named 'DefaultFlags'<br>Done.<br> <br></div><br>I tried the monkey2 example that comes with Monkey2 and they work but can't figure this one out. <br>By the way I am using the latest version from github. <br><br></td></tr></table><br>
<a name="2120692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leo Santos</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try downloading the latest GridShooter demo from Github, that one is updated for Monkey2 V009.<br>Mark removed "TextureFlags.DefaultFlags" in the latest release, which is why you're getting that error, but I've updated the code for the demo last night.<br><br>Cheers! <br><br></td></tr></table><br>
<a name="2120693"></a>

<a name="2120694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you! Got it running. nice! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
