<!DOCTYPE html><html lang="en" ><head ><title >line continuation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >line continuation</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=530" >Monkey2 Talk</a>/<a href="#bottom" >line continuation</a><br><br>
<a name="2107289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> so has anything been decided with this?  I do remember Mark saying that it won't have monkey1's freedom.  <br><br>I know someone suggested operators as line continuators and that would be cool... hopefully including commas.  <br><br>But I really like having commas at the start of the line for statements that continue... so I hope we don't have to use continue characters at all when inside parens or any other kind of bracket. <br><br></td></tr></table><br>
<a name="2107318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my experience (with Pure<b>Basic</b>) line continuation is especially useful with + - | and comma ','. Other operators can be used, too.<br>Additionally, long 'If' lines can be splitted at keywords like 'And', 'Or', 'Xor'. It's very nice, useful, clean, and read-able.<br><pre class=code>Macro DoSomething()
EndMacro

If abc = 1 And def = 2 And
   ghi = 3 And jkl = 4
    DoSomething()
EndIf

title$ = "my "   +
         "long " +
         "Window Title"

CreateWindowEx_(dwExStyle,
                className$,
                title$,
                dwStyle,
                x,
                y,
                width,
                height,
                parentWindow,
                hMenu,
                hInstance,
                lpParam)

OpenWindow(0,0,0,800,600,title$, #PB_Window_SystemMenu     |
                                 #PB_Window_ScreenCentered |
                                 #PB_Window_MinimizeGadget |
                                 #PB_Window_MaximizeGadget )

Repeat : Until WaitWindowEvent() = #PB_Event_CloseWindow</pre><br><img src="http://i.imgur.com/KDt5eSX.png"> <br><br></td></tr></table><br>
<a name="2107317"></a>

<a name="2107316"></a>

<a name="2107315"></a>

<a name="2107314"></a>

<a name="2107313"></a>

<a name="2107312"></a>

<a name="2107311"></a>

<a name="2107309"></a>

<a name="2107310"></a>

<a name="2107308"></a>

<a name="2107325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Monkey already supports operators as line continuation, including periods. <br><br></td></tr></table><br>
<a name="2107328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PixelPaladin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is right, something like this is possible:<br><pre class=code>
Foo(
    arg_1,
    arg_2,
     ...
    arg_n )
</pre><br>... but not this:<br><pre class=code>
Foo(
    arg_1,
    arg_2,
     ...
    arg_n
   )
</pre><br>I think this should also be possible. It would look better when passing arrays and function calls as arguments:<br><pre class=code>
Foo( bar,
     [ hello,
       world( 1 ) ] )

vs.

Foo(
     bar,
     [
       hello,
       world( 1 )   ' &lt;-- Monkey1 would complain here
     ]
   )
</pre><br>The second one should be easier to read.<br>The compiler should at least look for a closing parenthesis in the next line instead of throwing a syntax error. <br><br></td></tr></table><br>
<a name="2107327"></a>

<a name="2107337"></a>

<a name="2107338"></a>

<a name="2107339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> actually, what I'm really looking for is comma first style.  once you start using it, it's hard to go back.  ie:<br><pre class=code>Function Mat4Ortho:Float[]( left:Float
                            ,right:Float
                            ,bottom:Float
                            ,top:Float
                            ,znear:Float
                            ,zfar:Float
                           )</pre> but in any case if I remember right, Mark did say that Monkey2 will not have the same freedom that monkey1 did. <br><br></td></tr></table><br>
<a name="2107336"></a>

<a name="2107335"></a>

<a name="2107334"></a>

<a name="2107333"></a>

<a name="2107332"></a>

<a name="2107331"></a>

<a name="2107342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Problem is, if you make it too loose, the compiler can't detect errors anymore.<br>Languages that simply ignore all newlines, usually have a end-of-statement marker, like ';' in the family of C-languages. <br><br></td></tr></table><br>
<a name="2107344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depending on how loose you make the parser, you could do cool stuff like this:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict Local pa:Float[]=New Float[14]pa[0]=400 pa[1]=400 pa[2]=446 pa[3]=224 pa[4]=600 pa[5]=224 pa[6]=600 pa[7]=600 pa[8]=200 pa[9]=600 pa[10]=200 pa[11]=224 pa[12]=354 pa[13]=224 Const firbl%=13,firdr%=9,maxmap%=16,maxzomb%=5,sttile%=8,medtile%=7
SetAudioDriver("OpenAL")AppTitle="Left150Dead" Graphics 640,480,0,60 SetBlend(MASKBLEND|ALPHABLEND) Global vi:TImage=CreateImage(800,800)SetColor(255,0,255)DrawOval(220,220,360,360)SetColor(0,0,0)DrawPoly(pa)SetColor(255,0,255)DrawOval(375,375,50,50)
SetMaskColor 255,0,255 GrabImage(vi,0,0)MidHandleImage(vi)Cls()SetColor(255,255,255)Global f$="Media/",med%,ch%,cw%,grow%,gcol%,title%=1,score%,fnum%,endlevel%,gover%,mf%,i%,j%,k%,ox%,oy%,ms%,mw%=29,mh%=29,m:Int[],un:TUnit[],nxs%=-1,bul:TBullet[],level%
Global grid:TCell[],rooms:TList,clip%,sc%,hsc%,ihp:TImage=LoadAnimImage(f$+"hp.bmp",3,9,0,2),ts:TImage=LoadAnimImage(f$+"t.bmp",16,16,0,64),itl:TImage=li("tl.bmp"),ibul:TImage=li("bullet.bmp"),imed:TImage=li("med.bmp"),flsc:TList=CreateList(),bs%=2
Global its:TImage=li("tt.bmp")AutoMidHandle True Global sndfire:TSound=ls("gun.wav"),sndreload:TSound=ls("reload.wav"),ui:TImage=LoadAnimImage(f$+"u.bmp",16,16,0,2),sndscr:TSound[]=New TSound[2],idle:TSound[]=New TSound[2],scy%,zh%=3,finscore%,credits%
Global sight:TSound[]=New TSound[2],claw:TSound[]=New TSound[2]Function gm%(x%,y%)Return m[x+y*mw]EndFunction Function gg:TCell(x%,y%)Return grid[x+y*gcol]EndFunction claw[0]=ls("claw1.wav")claw[1]=ls("claw2.wav")Global altts%,confirm%,scorewait%,credy%
sndscr[0]=ls("scream1.wav")sndscr[1]=ls("scream2.wav")idle[0]=ls("idle1.wav")idle[1]=ls("idle2.wav")sight[0]=ls("sight1.wav")sight[1]=ls("sight2.wav")Global mu%,nmb%,hmb%,fhb%,kab%,flash%,running%,curs:TImage=li("curs.bmp")HideMouse()
While Not AppTerminate() And si(VarPtr ms,Millisecs()) And fc() If credits
If DrawCredits()&lt;0 Or KeyHit(KEY_SPACE) Or KeyHit(KEY_ESCAPE)
credits=False title=True FlushKeys() EndIf
ElseIf title And KeyDown(KEY_C) credy=500 credits=True title=False FlushKeys() ElseIf title
If KeyHit(KEY_ESCAPE) Exit
SetScale(2,2)DrawImage(its,(640-280*2)/2,0)SetScale(1,1)DrawText("High Score: "+hsc,10,10)FlashText("Press space to play!",240,390,500)DrawText("W,A,S,D: Move",265,290)DrawText("Mouse: Aim flashlight, click to fire",170,310)
DrawText("Shift: Sprint (can't fire)",210,330)DrawText("R: Reload   F: First Aid   E: Use stairs",155,350)scol(128,128,128)DrawText("C: Credits",10,460)scol(255,255,255)If KeyHit(KEY_SPACE)
title=False InitGame(1) EndIf ElseIf endlevel scy=100
DrawText("Level "+level+" completed!",245,scy)scy:+60 If scorewait&gt;0 scorewait:-1
Local finished%=DrawBonus("All zombies killed: ",AK(),VarPtr kab,VarPtr scy,True)finished=DrawBonus("Full health: ",un[0].hp=un[0].mhp,VarPtr fhb,VarPtr scy,finished)finished=DrawBonus("No medpack used: ",Not mu,VarPtr nmb,VarPtr scy,finished)
finished=DrawBonus("Ended with unused medpack: ",med,VarPtr hmb,VarPtr scy,finished) FlashText("Press space to continue...",225,350,500)DrawText("Score: ",200,300)DrawText(""+score,420,300)
If Not finscore And (Not AK() Or kab=0) And (un[0].hp&lt;&gt;un[0].mhp Or fhb=0) And (mu Or nmb=0) And (Not med Or hmb=0) finscore=True
If KeyDown(KEY_SPACE) Or KeyDown(KEY_ESCAPE)
FlushKeys()If Not finscore
score:+iif(AK(),kab,0)+iif(un[0].hp=un[0].mhp,fhb,0)+iif(Not mu,nmb,0)+iif(med,hmb,0) finscore=True Else endlevel=False InitLevel(level+1) EndIf EndIf
ElseIf confirm DrawText("Return to title screen? Y/N",200,300) If KeyDown(KEY_Y) And si(VarPtr confirm,False) And si(VarPtr title,True) FlushKeys() ElseIf KeyDown(KEY_N) Or KeyHit(KEY_ESCAPE) And si(VarPtr confirm,False) FlushKeys()
ElseIf gover DrawText("You're Dead!",275,170)DrawText("Game Over!",285,190)DrawText("Final Score: "+score,260,210)FlashText("Press Space to Continue",230,320,500)If KeyHit(KEY_SPACE) Or KeyHit(KEY_ESCAPE)
gover=0 title=1 FlushKeys()EndIf Else fnum:+1 KeyHit(KEY_SPACE)If KeyHit(KEY_ESCAPE) confirm=True
If KeyDown(KEY_W)And Not KeyDown(KEY_S)un[0].dy=-1 ElseIf KeyDown(KEY_S)And Not KeyDown(KEY_W)un[0].dy=1 Else un[0].dy=0
If KeyDown(KEY_A)And Not KeyDown(KEY_D)un[0].dx=-1 ElseIf KeyDown(KEY_D)And Not KeyDown(KEY_A)un[0].dx=1 Else un[0].dx=0
running=(KeyDown(KEY_LSHIFT) Or KeyDown(KEY_RSHIFT)) If running And sf(VarPtr un[0].dx,un[0].dx*2) un[0].dy:*2
If KeyDown(KEY_F)And med And un[0].hp&lt;un[0].mhp
med=False mu=True un[0].hp=un[0].mhp EndIf
un[0].fir=MouseDown(1)Local mdx#=MouseX()-320.0,mdy#=MouseY()-240.0 If mdx=0 And mdy&lt;0 un[0].rot=0 ElseIf mdx=0 And mdy&gt;0 un[0].rot=180 ElseIf mdy=0 And mdx&gt;0 un[0].rot=90 ElseIf mdy=0 And mdx&lt;0 un[0].rot=270 Else un[0].rot=90+ATan(mdy/mdx)sr(0)
For Local room:TRoom = EachIn rooms If room.v
room.f=Min(room.f+2,100) SetAlpha(Float(room.f)/100) For Local gc:TCell = EachIn room.cl If gc.vx*16&lt;un[0].x+320 And gc.vy*16&lt;un[0].y+240 And (gc.vx+gc.vw)*16&gt;un[0].x-320 And (gc.vy+gc.vh)*16&gt;un[0].y-240 For Local y%=gc.vy To gc.vy+gc.vh-1
For Local x%=gc.vx To gc.vx+gc.vw-1 If (x&lt;gc.vx+gc.vw-1 Or gc.x=gcol-1 Or gg(gc.x+1,gc.y).r&lt;&gt;gc.r) And (y&lt;gc.vy+gc.vh-1 Or gc.y=grow-1 Or gg(gc.x,gc.y+1).r&lt;&gt;gc.r) DrawImage(ts,320-un[0].x+16*x,240-un[0].y+16*y,gm(x,y)+altts)
Next Next
Next EndIf Next If mdx&lt;0 And mdy&lt;&gt;0 un[0].rot:+180
DoTriggers() If clip=0 And nxs&lt;=ms And si(Varptr nxs,ms+150) clip=15
If clip&lt;15 And nxs&lt;=ms And KeyDown(KEY_R) And si(Varptr nxs,ms+750) And si(Varptr clip,0) PlaySound(sndreload)
If clip&gt;0 And Not running And MouseDown(1) And nxs&lt;=ms And si(VarPtr nxs,ms+150)
FireBullet() If clip=0 And si(Varptr nxs,ms+750) PlaySound(sndreload)
EndIf For i=0 To 15 If bul[i]&lt;&gt;Null And bul[i].life&gt;0
bul[i].UpdateBullet()SetColor(255,255,0)DrawOval(320-un[0].x+bul[i].x-1,240-un[0].y+bul[i].y-1,3,3)SetColor(255,255,255)EndIf Next For i=un.Length-1 To 0 Step -1 If un[i]&lt;&gt;Null
Local dist%=(un[i].x-un[0].x)*(un[i].x-un[0].x)+(un[i].y-un[0].y)*(un[i].y-un[0].y),rot2%=90 If un[i].x&lt;&gt;un[0].x rot2:+ATan((un[i].y-un[0].y)/(un[i].x-un[0].x))
If un[i].x&lt;un[0].x rot2:+180
If i&gt;0 And un[i].cell.r.v And Not un[i].active And (dist&lt;=2500 Or (dist&lt;=12100 And Abs(un[0].rot-rot2)&lt;=10)) And los(un[i].x,un[i].y,un[0].x,un[0].y) And si(VarPtr un[i].active,True) And i&gt;0 And si(VarPtr un[i].speed,2) PlaySound(sight[Rand(0,1)])
If (i=0 Or (un[i].cell.r.v And(un[i].wander Or un[i].active))) And fnum Mod un[i].speed=0 un[i].UpdateUnit()
SetRotation(un[i].rot) If (i=0 Or un[i].cell.r.v) And (i&gt;0 And sa(Float(un[i].cell.r.f)/100) Or di(vi,320,240,un[i].rot)) DrawImage(ui,320-un[0].x+un[i].x,240-un[0].y+un[i].y,un[i].fr)
EndIf Next SetRotation(0) DrawImage(itl,16,16) For i=0 To 9 If un[0].hp&gt;i DrawImage(ihp,53+i*3,19,0) Else DrawImage(ihp,53+i*3,19,1)
Next For i=0 To clip-1 DrawImage(ibul,52+i*3,31) Next DrawText(score,52,42) DrawText("Level: "+level,560,15)If med DrawImage(imed,25,60)
DrawFloatText() If flash&gt;0
scol(255,0,0)sa(0.1)DrawRect(0,0,640,480)sa(1)flash:-10 EndIf scol(255,255,255)EndIf DrawImage(curs,MouseX(),MouseY())Wend ShowMouse()End  Type TUnit Field cell:TCell,ni%,active%,wander%,nxa%,idx%,x%,y%,rot%,mov%,fir%,hp%,mhp%,fr%,nf%=-1,dx#=0,dy#=0
Field speed%=10 Method CreatePlayer:TUnit(x%,y%,mhp%,speed%,rot%) Self.x=x Self.y=y Self.rot=rot Self.speed=speed Self.hp=mhp Self.mhp=mhp fr=0 Return Self EndMethod Method CreateZombie:TUnit(idx%,vx%,vy%,vw%,vh%,hp%)
Self.idx=idx Self.hp=hp mhp=hp fr=1 speed=Rand(3,5) rot=Rand(0,360) wander=(Rand(1,2)=2) dx=Rand(-1,1) dy=Rand(-1,1) x=-1 While x&lt;0
ox=0 oy=0 x=Rand(vx+1,vx+vw-2)*16+8 y=Rand(vy+1,vy+vh-2)*16+8 If gm(x/16,y/16)=0 Or gm(x/16,y/16)&gt;4 x=-1 ElseIf si(VarPtr j,0) x:+ox y:+oy While j&lt;un.Length-1 And x&gt;=0
j:+1 If un[j-1]&lt;&gt;Null And (un[j-1].x-x)*(un[j-1].x-x)+(un[j-1].y-y)*(un[j-1].y-y)&lt;144 x=-1
Wend
Wend Return Self EndMethod Method UpdateUnit:Int() If Self&lt;&gt;un[0]
If Not active And (x-un[0].x)*(x-un[0].x)+(y-un[0].y)*(y-un[0].y) &lt;= 90000 And ni&lt;=ms And si(VarPtr ni,ms+Rand(500,1500)) And Rand(1,10)=10 PlaySound(idle[Rand(0,1)])
If Not active And wander And si(VarPtr rot,90) And si(VarPtr rot,90+ATan(dy/(Min(dx+0.001,1)))) And dx&lt;0 rot:+180
If active And si(VarPtr rot,90+ATan((un[0].y-float(y))/(un[0].x-float(x)))) And un[0].x&lt;x rot:+180
If active And (un[0].x-x)*(un[0].x-x)+(un[0].y-y)*(un[0].y-y)&lt;=400
If nxa&lt;=ms And si(VarPtr nxa,ms+750) And un[0].Damage(1) And si(VarPtr flash,100) PlaySound(claw[Rand(0,1)])
EndIf If active
If un[0].x&lt;x dx=-1 ElseIf un[0].x&gt;x dx=1 Else dx=0
If un[0].y&lt;y dy=-1 ElseIf un[0].y&gt;y dy=1 Else dy=0
EndIf
EndIf Local c1%=1,c2%=1 For k%=0 To un.Length-1 If un[k]&lt;&gt;Null And un[k]&lt;&gt;Self And (un[k].x-x-dx*speed)*(un[k].x-x-dx*speed)+(un[k].y-y-dy*speed)*(un[k].y-y-dy*speed)&lt;iif(k=0,144,100)
If wander
dx=-dx dy=-dy EndIf Return True EndIf
Next For Local yy%=y/16-1 To y/16+1 For Local xx%=x/16-1 To x/16+1 If c1+c2&gt;0 And gm(xx,yy)&gt;=firdr+2
Local x1%=16*xx,y1%=16*yy If Not(x-6+dx&gt;=x1+16 Or x+6+dx&lt;x1 Or y-6&gt;=y1+16 Or y+6&lt;y1) c1=0
If Not(x-6&gt;=x1+16 Or x+6&lt;x1 Or y-6+dy&gt;=y1+16 Or y+6+dy&lt;y1) c2=0
End If Next Next If c1=1 x:+dx
If c2=1 y:+dy
If (c1=0 Or c2=0) And wander And sf(VarPtr dx,-dx) dy=-dy
EndMethod Method Damage%(amt%)
hp:-amt If hp&lt;=0 And si(VarPtr hp,0) If Self=un[0]
gover=1 Else un[idx]=Null If gm(x/16,y/16)&lt;medtile sm(x/16,y/16,Rand(5,6))
score:+level*10 hsc=Max(hsc,score) flsc.AddLast(New TFloatText.Create("+"+(level*10),x-15,y-40,x-15,y-60,100,100,0,255,0,True)) EndIf
Return True EndMethod EndType Type TFloatText Field r%,g%,b%,unit%,t$,sx%,sy%,ex%,ey%,sl%,cl% Method Create:TFloatText(pt$,psx%,psy%,pex%,pey%,psl%,pcl%,pr%,pg%,pb%,pu%) t=pt sx=psx sy=psy ex=pex ey=pey sl=psl cl=pcl r=pr g=pg b=pb unit=pu
Return Self EndMethod EndType Function FireBullet() For Local ii%=0 To 15 If bul[ii]=Null Or bul[ii].life&lt;=0
bul[ii]=New TBullet.CreateBullet(un[0].x,un[0].y,un[0].rot,3) Exit EndIf Next PlaySound(sndfire)clip:-1 EndFunction Type TBullet Field life%=100,x#,y#,rot%,speed%,dmg%=1 Method CreateBullet:TBullet(x#,y#,rot%,speed%)
Self.x=x Self.y=y Self.rot=rot Self.speed=speed Return Self EndMethod Method UpdateBullet%()
x:+Cos((360-90+rot)Mod 360)*speed y:+Sin((360-90+rot)Mod 360)*speed life:-1
If gm(x/16,y/16)&gt;=firdr+2
life=-1 Return 1 EndIf For k%=1 To un.Length-1 If un[k]&lt;&gt;Null And (un[k].x-x)*(un[k].x-x)+(un[k].y-y)*(un[k].y-y)&lt;=36
un[k].Damage(dmg) life=-1 If Not un[k].active And si(VarPtr un[k].active,True) And si(VarPtr un[k].speed,2) PlaySound(sndscr[Rand(0,1)])
Return 1 EndIf Next EndMethod EndType Function DoTriggers()
Local x%=un[0].x/16,y%=un[0].y/16,cell:TCell=gg(x/(cw+1),y/(ch+1)) If x&gt;0 And gm(x-1,y)=firdr+3 And sm(x-1,y,firdr+1) gg(cell.x-1,cell.y).r.v=True
If x&lt;mw-1 And gm(x+1,y)=firdr+3 And sm(x+1,y,firdr+1) gg(cell.x+1,cell.y).r.v=True
If y&gt;0 And gm(x,y-1)=firdr+2 And sm(x,y-1,firdr) gg(cell.x,cell.y-1).r.v=True
If y&lt;mh-1 And gm(x,y+1)=firdr+2 And sm(x,y+1,firdr) gg(cell.x,cell.y+1).r.v=True
If gm(x,y)=medtile And Not med And si(VarPtr med,True) sm(x,y,1)
If gm(x,y)=sttile And KeyDown(KEY_E) And si(VarPtr scorewait,100) endlevel=True
EndFunction Function si%(a% Ptr,b%)a[0]=b Return 1 EndFunction Function sr%(r%)SetRotation(r) Return 1 EndFunction Function fc%()Flip()Cls()Return 1 EndFunction Function sm%(x%,y%,v%)m[x+y*mw]=v Return 1 EndFunction
Function di%(im:TImage,x%,y%,r%)SetAlpha(.2)sr(r-7)DrawImage(im,x,y)sr(r-4)DrawImage(im,x,y)sr(r+4)DrawImage(im,x,y)sr(r+7)DrawImage(im,x,y)sr(r)DrawImage(im,x,y)SetAlpha(1)Return 1 EndFunction Function InitGame(lvl%)
SeedRnd(MilliSecs())altts=Rand(0,1)*32 score=0 endlevel=False title=False gover=False med=False bul=New TBullet[32]InitLevel(lvl)EndFunction Function InitLevel(lvl%)
flash=0 scorewait=0 finscore=0 flsc.Clear()mu=False nmb=lvl*100 hmb=lvl*100 fhb=lvl*100 kab%=lvl*200 level=lvl clip=15 GenerateMap(lvl,6,6) EndFunction
Type TRoom Field f%,v%,cl:TList=CreateList()Method Create:TRoom(cell:TCell)cl.AddLast(cell) Return Self EndMethod EndType Type TCell Field hasmed%,vx%,vy%,vw%,vh%,x%,y%,r:TRoom,w:Int[]=New Int[4],fa%,hasexit%,idx%
Method Create:TCell(id%,xx%,yy%)idx=id x=xx y=yy Return Self EndMethod EndType Function GenerateMap(level%,cWid%,cHei%)
cw=cWid ch=cHei grow=Min(maxmap,level+1) gcol=grow rooms=CreateList()grid=New TCell[gcol*grow]mw=gcol*(cw+1)+1 mh=mw m=New Int[mw*mh]Local zi%=Min(level,maxzomb),cell:TCell=New TCell.Create(1,Rand(0,gcol-1),Rand(0,grow-1))sg(cell.x,cell.y,cell)
un=New TUnit[grow*gcol*level+5]cell.r=New TRoom.Create(cell)un[0]=New TUnit.CreatePlayer(8+16*(cell.x*(cw+1)+Rand(2,cw-1)),8+16*(cell.y*(ch+1)+Rand(2,ch-1)),10,1,0)rooms.AddLast(cell.r)RecurseCells(cell.x,cell.y,gcol,grow)
cell.r.v=True un[0].cell=cell For Local row%=0 To grow For Local col%=0 To gcol
If col&lt;&gt;gcol And(row=grow Or gg(col,row).w[0]=0 Or gg(col,row).w[0]=2) For Local x%=col*(cw+1)+1 To col*(cw+1)+cw sm(x,row*(cw+1),firbl+9)Next
If row&lt;&gt;grow And(col=gcol Or gg(col,row).w[3]=0 Or gg(col,row).w[3]=2) For Local y%=row*(ch+1)+1 To row*(ch+1)+ch sm(col*(ch+1),y,firbl+4)Next
Local v%=firbl-1,xx%=col*(cw+1),yy%=row*(ch+1) If row&gt;0 And gm(xx,yy-1)&gt;6 v:+1
If col&lt;gcol And gm(xx+1,yy)&gt;6 v:+2
If row&lt;grow And gm(xx,yy+1)&gt;6 v:+4
If col&gt;0 And gm(xx-1,yy)&gt;6 v:+8
sm(col*(cw+1),row*(ch+1),v) If row&lt;&gt;grow And col&lt;&gt;gcol
gg(col,row).vx=col*(cw+1)gg(col,row).vy=row*(ch+1)gg(col,row).vw=cw+2 gg(col,row).vh=ch+2 If gg(col,row).w[0]=2 sm(col*(cw+1)+Rand(1,cw),row*(ch+1),firdr+2)
If gg(col,row).w[3]=2 sm(col*(cw+1),row*(ch+1)+Rand(1,ch),firdr+3)
For Local yy%=row*(ch+1) To row*(ch+1)+ch For Local xx%=col*(cw+1) To col*(cw+1)+cw
Local r%=Rand(0,9)If (xx&gt;col*(cw+1) Or yy&gt;row*(ch+1)) And gm(xx,yy)=0 And r&gt;=8 sm(xx,yy,3+r-8)ElseIf (xx&gt;col*(cw+1) Or yy&gt;row*(ch+1)) And gm(xx,yy)=0 sm(xx,yy,1+(r Mod 2))
Next Next If gg(col,row)&lt;&gt;cell For Local ii%=1 To level un[zi]=New TUnit.CreateZombie(zi,gg(col,row).vx,gg(col,row).vy,gg(col,row).vw,gg(col,row).vh,level*zh) un[zi].cell=gg(col,row)zi:+1 Next
EndIf Next Next For Local mc%=0 To Min(level-1,5)-1 While True Local idx%=Rand(0,gcol*grow-1) If Not grid[idx].hasmed And grid[idx]&lt;&gt;cell
grid[idx].hasmed=1 Local rx%=Rand(1,cw),ry%=Rand(1,ch)sm(grid[idx].x*(cw+1)+rx,grid[idx].y*(ch+1)+ry,medtile)Exit EndIf Wend Next Local farcell:TCell=grid[0]For Local gi%=0 To grid.Length-1 If grid[gi].idx&gt;farcell.idx And Not grid[gi].hasmed
farcell=grid[gi]EndIf Next Repeat Local rx%=Rand(1,cw),ry%=Rand(1,ch) If gm(farcell.vx+rx,farcell.vy+ry)&lt;&gt;sttile And sm(farcell.vx+rx,farcell.vy+ry,sttile)farcell.hasexit=1
Until farcell.hasexit EndFunction Function RecurseCells(x%,y%,w%,h%) Local di%[]=New Int[4]di[0]=Rand(0,3)Repeat di[1]=Rand(0,3)Until di[0]&lt;&gt;di[1]Repeat di[2]=Rand(0,3)Until di[2]&lt;&gt;di[0]And di[2]&lt;&gt;di[1]
Repeat di[3]=Rand(0,3)Until di[3]&lt;&gt;di[0]And di[3]&lt;&gt;di[1]And di[3]&lt;&gt;di[2]For Local i%=0 To 3 Local idx%=gg(x,y).idx,xx%=x,yy%=y If di[i]=0 yy:-1 ElseIf di[i]=1 xx:+1 ElseIf di[i]=2 yy:+1 Else xx:-1
If xx&gt;=0 And yy&gt;=0 And xx&lt;w And yy&lt;h And gg(xx,yy)=Null
sg(xx,yy,New TCell.Create(idx+1,xx,yy))If gg(x,y).idx=1 Or gg(x,y).r.cl.Count()=4 Or Rand(1,3)=3
gg(xx,yy).r=New TRoom.Create(gg(xx,yy))rooms.AddLast(gg(xx,yy).r)gg(x,y).w[di[i]]=2 Else gg(xx,yy).r=gg(x,y).r gg(x,y).r.cl.AddLast(gg(xx,yy))gg(x,y).w[di[i]]=1 EndIf gg(xx,yy).w[(di[i]+2)Mod 4]=gg(x,y).w[di[i]]
RecurseCells(xx,yy,w,h)EndIf Next EndFunction Function sg%(x%,y%,v:TCell)grid[x+y*gcol]=v Return 1 EndFunction Function li:TImage(filename$)Return LoadImage(f$+filename)EndFunction Function DrawBonus%(txt$,chk%,bon% Ptr,ry% Ptr,fin%) If Not chk
Return fin Else DrawText(txt,200,ry[0])DrawText(""+iif(finscore,0,bon[0]),420,ry[0])ry[0]:+20 EndIf If finscore Or bon[0]=0
Return 1 ElseIf Not finscore And bon[0]&gt;0 And fin And scorewait=0 score:+Min(bon[0],bs*level)hsc=Max(hsc,score)bon[0]=Max(bon[0]-bs*level,0)Return bon[0]=0 EndIf Return 0 EndFunction Function Ak%()For Local ii%=1 To un.Length-1 If un[ii]&lt;&gt;Null Return 0
Next Return True EndFunction Function ls:TSound(filename$)Return LoadSound(f$+filename)EndFunction Function sa%(alp#)SetAlpha(alp)Return 1 EndFunction Function scol%(rr%,gg%,bb%)SetColor(rr,gg,bb)Return 1 EndFunction
Function sf%(a# Ptr,b#)a[0]=b Return 1 EndFunction Function iif%(cond%,a%,b%) If cond Return a Else Return b
EndFunction Function los%(x1%,y1%,x2%,y2%) Local steps%=Abs(x2/16-x1/16)+Abs(y2/16-y1/16),mx#=(x2-x1)/steps,my#=(y2-y1)/steps,crx%,cry% For Local ii%=0 To steps-1 crx=x1+mx*ii cry=y1+my*ii If gm(crx/16,cry/16)&gt;=firdr+2 Return False
Next Return True EndFunction Function FlashText%(str$,x%,y%,tim%)If ms Mod tim*2&lt;tim DrawText(str,x,y)
Return 1 EndFunction Function DrawFloatText%()For Local ft:TFloatText=EachIn flsc scol(ft.r,ft.g,ft.b)Local ss#=Float(ft.cl)/ft.sl SetAlpha(ss)ft.cl:-1
If ft.unit DrawText(ft.t,320-un[0].x+ft.sx+ss*(ft.sx-ft.ex),240-un[0].y+ft.sy+ss*(ft.sy-ft.ey))Else DrawText(ft.t,ft.sx+ss*(ft.sx-ft.ex),ft.sy+ss*(ft.sy-ft.ey))
If ft.cl&lt;=0 flsc.Remove(ft)
Next SetAlpha(1)Return 1 EndFunction Function DrC(t$,x%,y% Ptr,yo%,r%=-1,g%=-1,b%=-1)If r&gt;=0 And g&gt;=0 And b&gt;=0 scol(r,g,b)
y[0]:+yo DrawText(t,x,y[0])EndFunction Function DrawCredits%()
credy:-1 Local my%=credy DrC("Left150Dead",10,VarPtr my,0,255,0,0)DrC("Design",10,VarPtr my,50,255,255,255)DrC("Samah",10,VarPtr my,30,0,255,0)DrC("Coding",10,VarPtr my,50,255,255,255)DrC("Samah",10,VarPtr my,30,0,255,0)
DrC("Art",10,VarPtr my,50,255,255,255)DrC("Samah",10,VarPtr my,30,0,255,0)DrC("therevills",10,VarPtr my,20)DrC("Valve Software",10,VarPtr my,20)DrC("Sounds",10,VarPtr my,50,255,255,255)DrC("Samah",10,VarPtr my,30,0,255,0)
DrC("Valve Software",10,VarPtr my,20)DrC("Beta Testers",10,VarPtr my,50,255,255,255)DrC("Darkr",10,VarPtr my,30,0,255,0)DrC("Fen",10,VarPtr my,20)DrC("KaiZelpher",10,VarPtr my,20)DrC("Mosse",10,VarPtr my,20)DrC("rp",10,VarPtr my,20)
DrC("senn",10,VarPtr my,20)DrC("Siby",10,VarPtr my,20)DrC("Snags",10,VarPtr my,20)DrC("Spammy",10,VarPtr my,20)DrC("thePoet",10,VarPtr my,20)DrC("therevills",10,VarPtr my,20)DrC("Special Thanks",10,VarPtr my,50,255,255,255)
DrC("www.blitzmonkeys.com",10,VarPtr my,30,0,255,0)DrC("Valve Software",10,VarPtr my,20)DrC("Bill",10,VarPtr my,20)DrC("Francis",10,VarPtr my,20)DrC("Louis",10,VarPtr my,20)DrC("Zoey",10,VarPtr my,20)DrC("Zombie 1",10,VarPtr my,20)
DrC("Zombie 2",10,VarPtr my,20)DrC("...anyone else I've forgotten!",10,VarPtr my,20)DrC("150 lines of code",10,VarPtr my,80,64,64,255)DrC("256kb of media",10,VarPtr my,20)DrC("Left4Dead is a trademark of Valve Software.",10,VarPtr my,20)
DrC("Samah, 2009",10,VarPtr my,80,255,255,0)my:+20 scol(255,255,255)Return my EndFunction</textarea><br>(Compiles with BlitzMax) <br><br></td></tr></table><br>
<a name="2107343"></a>

<a name="2107345"></a>

<a name="2107346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> :D<br><br>I think it could work if you select the allowed line continuation operators and separators very carefully.<br><pre class=code>Case CRLF, CR, LF
    lineNum++
    If lastToken was ',' | '.' | '+' | '-' | '*' | '/' | '~' | '&amp;' | '|' | '(' | '[' | '{' | 'And' | 'Or' | '='
        return GetNextToken()
    ElseIf lookAhead(1) is in ( ',' | '.' | '+' | '-' | '*' | '/' | '~' | '&amp;' | '|' | ')' | ']' | '}' | 'And' | 'Or' | '=' )
        return GetNextToken()
    EndIf
    return new Token(lineNum-1, tkEndOfStatement)</pre><br>With multiple meanings of '&gt;' and '&lt;' it needs to be tested if this can fit as well. <br><br></td></tr></table><br>
<a name="2107347"></a>

<a name="2107348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Even better,<br><pre class=code>Case ';'
    ' end of statement</pre><br><br>Edit:<br>To be honest, if your syntax is designed in such a way that newlines and indentation are completely optional, there's zero ambiguity in your code.<br><br>In Lua, these are equivalent:<br><pre class=code>if blah then a = 2 b = 3 for k,v in pairs(tbl) do print(a, b) end end</pre><br><pre class=code>if blah then
  a = 2
  b = 3
  for k,v in pairs (tbl) do
    print(a, b)
  end
end</pre><br>Obviously the first example is ugly as hell, but to the compiler, they're the same.  I see no reason why Monkey 2 couldn't do this.<br>You could still do single-line if statements as long as you put "End" as the last token. <br><br></td></tr></table><br>
<a name="2107350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> While taking a shower, I was thinking if ';' should be added to the line-continuation as well. :)<br>Could be confusing for programmers coming from C-languages, though. And the BASIC-guys don't<br>want an explicite end-of-statement character like ';'. They probably want end-of-line, with some<br>exceptions as shown above.<br>A simple &lt;Space&gt; as statement separator like BMX is too loose, IMHO. <br><br></td></tr></table><br>
<a name="2107349"></a>

<a name="2107353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Danilo: A simple &lt;Space&gt; as statement separator like BMX is too loose, IMHO. <br></div><br>It's only too loose if there are special cases like single-line if statements.  If newline has no effect on program execution, there's no problem.<br><br>Edit:<br>If newlines were completely ignored, these should be equivalent:<br><pre class=code>Class Foo Extends Bar Abstract Field hello:String = "world" Method Blah() Print("hi") End End</pre><br><pre class=code>Class Foo Extends Bar Abstract
	Field hello:String = "world"
	Method Blah()
		Print("hi") 
	End
End</pre> <br><br></td></tr></table><br>
<a name="2107352"></a>

<a name="2107356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> +1 to "newline has no effect on program execution" <br><br></td></tr></table><br>
<a name="2107362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok sure, but I was mainly just hoping they wouldn't be needed inside of any kind of "enclosing" characters like parentheses or quotes..  :) <br><br></td></tr></table><br>
<a name="2107375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I rather enjoy the way Monkey does it now.  MX2 being a bit more strict is fine, as long as I can still separate lines on operators and concat lines using a semicolon. <br><br></td></tr></table><br>
<a name="2107427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Nobuyuki: ...as long as I can still separate lines on operators and concat lines using a semicolon. <br></div><br>My point is that you shouldn't need to worry about newlines or semicolons at all. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
