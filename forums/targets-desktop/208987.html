<!DOCTYPE html><html lang="en" ><head ><title >Can I change/set resolution etc at runtime?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Can I change/set resolution etc at runtime?</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=300" >Desktop</a>/<a href="#bottom" >Can I change/set resolution etc at runtime?</a><br><br>
<a name="2094191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way I can change the screen resolution and switch from windowed/fullscreen at runtime?<br><br>(by the way - really don't like the search feature here- it only seems to be showing me one single post from a thread, which isn't an awful lot of use). <br><br></td></tr></table><br>
<a name="2094192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doesn't SetDeviceWindow work for you?<br><br>When you get the search result, click on the title so you see the full topic once you had read that single post. <br><br></td></tr></table><br>
<a name="2094193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Doesn't SetDeviceWindow work for you? <br></div>Don't know.  Probably.  I didn't even know about it.<br><br>The last time I did a complete project with Monkey (three years ago), it was for iOS, but AFAIK SetDeviceWindow didn't even exist as there was a lot of fuss about the issue at the time as it was one of the glaring shortcomings of the desktop target. <br><br></td></tr></table><br>
<a name="2094194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Then it is time to study at the least the version.txt file that come with Monkey. All the changes are mentioned there. <br><br></td></tr></table><br>
<a name="2094197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The answer is yes by the way we allow user to change resolution at runtime. Our config screens allows user to pick any resolution in their list of options and defaults to their native. It allows switching from full/windowed without closing the executable. <br><br></td></tr></table><br>
<a name="2094201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have three options:<br><br>* Mojo's target-agnostic wrappers (The 'SetDeviceWindow' command): Available for GLFW and XNA, and it works well enough.<br>* Manually using the GLFW target's commands ('SetGlfwWindow'): Obviously, only available for GLFW, but it gives you lower-level control when needed.<br>* Or something a little unorthodox like making your own. Or even using someone else's module, like <a href="https://github.com/Regal-Internet-Brothers/screen" target="_blank">my 'screen' module</a>, which wraps the standard GLFW and Mojo commands. Though, I wouldn't really recommend that one, as it's really just something I developed for my own use, and is a bit hack-ish.<br><br>Mojo's implementation is just backed with Mark's GLFW and XNA specific code. Which is rather basic to begin with. Well, at least on XNA it is. That being said, this functionality is only available on those two desktop targets (Currently). <br><br></td></tr></table><br>
<a name="2094213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Changing the res at runtime is only really relevant for desktop targets anyway, so that's fine.<br><br>Just one Q, though - after calling SetDeviceWindow, how are existing resources handled?  Do I need to reload everything manually? <br><br></td></tr></table><br>
<a name="2094216"></a>

<a name="2094217"></a>

<a name="2094218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> When Mark wrote his display-mode code for GLFW, he made sure to do it right. Your resources do not need to be reloaded, it's not like the way it used to be with BlitzMax and BlitzBasic. All you have to do is call it, and you'll be good. The XNA target should work the same way, though that's really just something XNA has in general.<br><br>And as I said before, the Mojo-based implementation just uses Mark's platform specific code  anyway, so you'll get most of the benefits of that. <br><br></td></tr></table><br>
<a name="2094228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it just me or when calling SetDeviceWindow( 1024, 768, 1 ) on a screen with a resolution thats bigger than that it gets squashed in the bottom left or am I missing something?<br><br>At the moment all my full screen displays are squashed in the bottom left of the screen which is a pain, I wanted fullscreen to use 'the entire screen' or its next to useless. <br><br></td></tr></table><br>
<a name="2094230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just playing around with this myself... not getting the same problem as you but I've noticed that when I launch a fullscreen app, if I press Alt+F4 to quit out of it, it doesn't work UNLESS I first click the mouse on the game window.  Yet it seems to be catching keyboard input fine, otherwise.<br><br><pre class=code>Strict
Import mojo

Function Main:Int()
	New Game()
	Return 0
End

Class Game Extends App
	Field r:Int
	Field g:Int
	Field b:Int
	
	Method OnCreate:Int()	
		'Set how many times per second the game should update and render itself
		SetUpdateRate(60)
		SetDeviceWindow(800, 600, 1)
		Self.randomColor()
		Return 0
	End
	
	Method OnUpdate:Int()
		If KeyHit(KEY_SPACE)
			Self.randomColor()
		EndIf
		Return 0
	End
	
	Method OnRender:Int()
		Cls(r, g, b)
		DrawText(Millisecs(), 50, 50)
		
		Return 0
	End	
	
	Method randomColor:Void()
		Self.r = Rnd(0, 255)
		Self.g = Rnd(0, 255)
		Self.b = Rnd(0, 255)
	End

End</pre> <br><br></td></tr></table><br>
<a name="2094229"></a>

<a name="2094238"></a>

<a name="2094239"></a>

<a name="2094240"></a>

<a name="2094241"></a>

<a name="2094242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @GfK: Your situation with the keyboard input is probably a weird GLFW bug. You're supposed to have the window selected in order to use 'ALT+F4' (In addition, the close system-message isn't dealt with if you overload 'OnClose' without calling the 'App' class's implementation). It probably is some kind of GLFW or Windows bug, because I get the same thing. That being said, I can setup my own key for it, and it works fine.<br><br>And just a side note, but you should be dealing with colors as floats, not integers, you just end up with unneeded overhead. And on some targets (Specifically older hardware on platforms like Android), this makes a big difference after a while. (Although, you could make the same argument against using floats, but that's how Monkey does it)<br><br>@EdzUp[GD]: That's really strange, but if it's a fullscreen issue, it might just be a driver or monitor issue. Have you tried other OpenGL-based games/programs in fullscreen at a lower resolution than your monitor was built for? You may just have some kind of scaling problem with your drivers. Well, either that or you need to change settings in your monitor, because I've never had this issue.<br><br>For me, it just stretches it, but I also have "Wide Mode" set to "Full" for my monitor. And if I set "Wide Mode" to "Aspect", it keeps the aspect-ratio, and gives me blanks space. I don't think your problem is related to Monkey.<br><br>When I try <a href="http://puu.sh/bIS2b/189dd69c6d.png" target="_blank">the following demo in fullscreen, I get this</a>:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Public

' Preprocessor related:
#GLFW_USE_MINGW = True

#GLFW_WINDOW_TITLE = "Test"
#GLFW_WINDOW_WIDTH = 640 ' 0
#GLFW_WINDOW_HEIGHT = 480 ' 0
#GLFW_WINDOW_RESIZABLE = True
#GLFW_WINDOW_FULLSCREEN = False

#GLFW_SWAP_INTERVAL =-1

#MOJO_AUTO_SUSPEND_ENABLED = False
#MOJO_IMAGE_FILTERING_ENABLED = False

' Imports:
Import mojo

' Functions:
Function Main:Int()
	' Create a new 'Game' instance.
	New Game()
	
	' Return the default response.
	Return 0
End

' Classes:
Class Game Extends App Final
	' Constructor(s):
	Method OnCreate:Int()	
		' Set the update-rate of the game.
		SetUpdateRate(60)
		
		' Randomize a color to start with.
		randomColor()
		
		' Return the default response.
		Return 0
	End
	
	' Destructor(s):
	Method OnClose:Int()
		' Output to the console.
		Print("Closing...")
		
		' Return the response from the super-class's implementation.
		Return Super.OnClose()
	End
	
	' Methods:
	Method OnUpdate:Int()
		If (KeyHit(KEY_ESCAPE)) Then
			OnClose()
		Endif
		
		If (KeyHit(KEY_SPACE)) Then
			randomColor()
		Endif
		
		If (KeyHit(KEY_F11)) Then
			SetDeviceWindow(1024, 768, Not Fullscreen)
		Endif
		
		' Return the default response.
		Return 0
	End
	
	Method OnRender:Int()
		' Clear the screen.
		Cls(R, G, B)
		
		' Draw the debug-text.
		DrawText(Millisecs() + ", " + Seed, 16.0, 16.0)
		
		' Return the default response.
		Return 0
	End
	
	Method randomColor:Void()
		Seed = Millisecs()
		
		Self.R = Rnd(0.0, 255.0)
		Self.G = Rnd(0.0, 255.0)
		Self.B = Rnd(0.0, 255.0)
		
		Return
	End
	
	' Fields:
	
	' The current screen-clearing color(s):
	Field R:Float
	Field G:Float
	Field B:Float
	
	' Booleans / Flags:
	Field Fullscreen:Bool
End
</textarea><br><br>That's basically GfK's demo, just with a few small additions. <a href="http://puu.sh/bIS2b/189dd69c6d.png" target="_blank">The image I uploaded</a> (1024x768) simply gets stretched by my monitor, which is what's intended. <br><br></td></tr></table><br>
<a name="2094237"></a>

<a name="2094236"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
