<!DOCTYPE html><html lang="en" ><head ><title >Setting resolution on PC builds?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Setting resolution on PC builds?</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=300" >Desktop</a>/<a href="#bottom" >Setting resolution on PC builds?</a><br><br>
<a name="2001874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raptisoft</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>I thought I saw this somewhere, but now I can't find it... how do I set the resolution on PC/Mac builds?<br><br>Also, is there any way to set fullscreen? <br><br></td></tr></table><br>
<a name="2001881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dopeyrulz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Open the config.h file in your project and make the required changes. <br><br></td></tr></table><br>
<a name="2009219"></a>

<a name="2009220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah but how do you do it in code?  PC and Mac's have different resolutions.  A simple "Graphics 1024,768" command would suffice.  I wonder why this is missing...and still missing even today?<br><br>And modern games are able to switch from fullscreen to windowed modes too... <br><br></td></tr></table><br>
<a name="2009227"></a>

<a name="2009228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I wonder why this is missing...and still missing even today? <br></div><br><br>Because it is very device specific and only one target would use it... <br><br></td></tr></table><br>
<a name="2009694"></a>

<a name="2009695"></a>

<a name="2009736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Open the config.h file in your project and make the required changes."<br><br>That pretty much makes using monkey for PC games impossible?  Plus there shouldn't be some manual workaround IMO.  It's a necessity because casual PC games can switch from windowed to fullscreen and back on-the-fly. <br><br></td></tr></table><br>
<a name="2009761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't the concept of Monkey that it should adapt to the screensize in which it finds itself?  If Monkey code is written to do that, then all that needs to be added is some native code to change resolution.<br><br>In the long run, i suspect there will be modules made with instructions like SetWindowSize() that work on only some platforms. <br><br></td></tr></table><br>
<a name="2010176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> A command doesn't have to work on all targets.  Targets that don't need it would simply ignore it.  But the PC target definitely needs a way to set resolution and switch between fullscreen and windowed modes. <br><br></td></tr></table><br>
<a name="2010951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >clevijoki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree, targets really need platform specific commands.  If they are not added officially they need to be added by anybody making a game that hopes to look professional anyway.  I would prefer this to be a static thing where it will fail to compile under targets that don't support the command, just wrap them in #if target="GLFW" blocks etc. <br><br></td></tr></table><br>
<a name="2012929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've added a command to Diddy which can alter the Windowed resolution at run time, when I looked into this a few weeks ago I dont think the full screen flag can be changed at run time... hope I'm wrong about this.<br><br>Anyway here is the code which I use in Diddy:<br><br>Monkey code:<br><pre class=code>
Extern
	Function SetNativeGraphicsSize:Void(w:Int, h:Int) = "diddy::setGraphics"
</pre><br><br>C++ code:<br><pre class=code>
class diddy
{
	public:

	static void setGraphics(int w, int h)
	{
		glfwSetWindowSize(w, h);
		GLFWvidmode desktopMode;
		glfwGetDesktopMode( &amp;desktopMode );
		glfwSetWindowPos( (desktopMode.Width-w)/2,(desktopMode.Height-h)/2 );
	}
};
</pre><br><br>In Diddy I have added empty stubs for the rest of the targets apart from HTML5, which now can alter the game canvas size at run time. <br><br></td></tr></table><br>
<a name="2010955"></a>

<a name="2010956"></a>

<a name="2010954"></a>

<a name="2012841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> therevils, where do we define the C++ code at to get this to work? <br><br></td></tr></table><br>
<a name="2012843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Create your monkey file:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import mojo
Import "glfw.cpp"

Extern
	Function SetGraphics:Void(w:Int, h:Int) = "external::setGraphics"
	
Public

Global myGame:MyGame

Function Main:Int()
	myGame = new MyGame
	Return 0
End

Class MyGame Extends App

	Method OnCreate:Int()
		SetUpdateRate 60
		Print Millisecs()
		Return 0
	End
	
	Method OnUpdate:Int()
		if KeyHit(KEY_F1)
			SetGraphics(800, 600)
		Else if KeyHit(KEY_F2)
			SetGraphics(1024, 768)
		Else if KeyHit(KEY_F3)
			SetGraphics(320, 240)
		End
	End
	
	Method OnRender:Int()
		DrawLine 0,0,DeviceWidth(),DeviceHeight()		
	End
	
End
</textarea><br><br>Then create a glfw.cpp in the same folder:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
class external
{
	public:
	
	static void setGraphics(int w, int h)
	{
		glfwSetWindowSize(w, h);
		GLFWvidmode desktopMode;
		glfwGetDesktopMode( &amp;desktopMode );
		glfwSetWindowPos( (desktopMode.Width-w)/2,(desktopMode.Height-h)/2 );
	}
};

</textarea><br><br>I've uploaded the files here:<br><br><a href="http://www.mediafire.com/?4f1l6xbk53jabcd" target="_blank">http://www.mediafire.com/?4f1l6xbk53jabcd</a> <br><br></td></tr></table><br>
<a name="2012975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, for some odd reason when I copied and pasted the codes it through some errors about external not being declared but when i ran your file from the download it actually worked :).<br><br>But now when ever i change resolution, it totally jacks up the display. Was this suppose to happen or does the resolution have to be set initially during load time so that it doesn't happen? <br><br></td></tr></table><br>
<a name="2015403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rus</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Neuro<br><br>Following the code above, I found a Cls statement in the OnRender Method fixed the nasty display problems.<br><br><pre class=code>
	Method OnRender:Int()
		Cls		
		DrawLine 0,0,DeviceWidth(),DeviceHeight()
	End
</pre> <br><br></td></tr></table><br>
<a name="2022972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taci</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use<br><pre class=code>
GLFW_WINDOW_WIDTH=0
GLFW_WINDOW_HEIGHT=0
</pre><br>in the config file (GLFW target), and the game will resize to the actual desktop resolution. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
