<!DOCTYPE html><html lang="en" ><head ><title >Trans Extension</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Trans Extension</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=300" >Desktop</a>/<a href="#bottom" >Trans Extension</a><br><br>
<a name="2081841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi ALL,<br><br>here is version 0.3 of monkey Ext. included source code.<br><br><a href="http://bcxdx.spoilerspace.com/Monkey/TransExt0.3.zip" target="_blank">http://bcxdx.spoilerspace.com/Monkey/TransExt0.3.zip</a><br><br>Enjoy it. <br><br></td></tr></table><br>
<a name="2081853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's this? <br><br></td></tr></table><br>
<a name="2081860"></a>

<a name="2081861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> A clone of Monkey Ext? <a href="https://code.google.com/p/monkey-ext/" target="_blank">https://code.google.com/p/monkey-ext/</a><br><br>[edit] I guess not... <br><br></td></tr></table><br>
<a name="2081883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's transcc with an extendend preprocessor. <br><br></td></tr></table><br>
<a name="2081887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I can see is that you can do "inline" C... but I don't really see any benefit over the extern system... is there anything else it does? <br><br></td></tr></table><br>
<a name="2081902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>actually TRANS EXTENSION is the original transcc with some added new features.<br><br>1- adding Cpp code with Monkey code by using inlineC-endC keyword or by ! symbol<br>Example<br><pre class=code>
!DWORD put( String a ) {
!  bbPrint( a );
!}

inlineC
 // Inline c in declration area
endC

Extern
   Function put:Int(a:String)
Public
 
Function Main:Int()

    Local kiro:Int = 20
     
    Print kiro
       
    inlineC 
       // Inline c source code
          t_kiro=200;
    endC
         
    ! /* Inline Sym C */
    ! bbPrint(String(t_kiro));
    
    put("Monkey Ext is very good")
    
    Return 0
End
</pre><br><br>BTW , inline , is a reserved word and i do not know it will be for.<br><br>2-added Enum keyword to monkey<br>Example <br><pre class=code>
Enum 
   ONE,TWO,THREE
EndEnum

Enum
   AA,BB=10+4,CC,PP=60,ZZ
   ENUM_1 = 1  ' restart at 1
   ENUM_2 = CC ' 15
   ENUM_3      ' Err should print 16 
End

Enum 20
   ENUM_4 ' will start at 20
   ENUM_5 ' will be 21
End Enum

Enum 50*10 Step 5*10
       ENUM_6 ' will start at 500
       ENUM_7 ' will be 550
       ENUM_8 ' will be 600
EndEnum

Enum
   ENUM_10 = 1 Shl 0
   ENUM_11 = 1 Shl 1
   ENUM_12 = 1 Shl 2
   ENUM_13 = 1 Shl 3
EndEnum

Class ABC ' enum in class

    Enum 50 Step 5
       ENUM_14 ' will start at 50
       ENUM_15 ' will be 55
       ENUM_16 ' will be 60
    End
 
   Enum DEF 
       ENUM_17  
       ENUM_18 
       ENUM_19 
  End  
End

Enum POINT
   TA,TB,TC
EndEnum

Enum Option
  INVALID = -1
  NONE = 0
  A = 1
  B = 2
  C = 4
  D = 8
End Enum

Function Main:Int()

    Print ONE
    Print TWO
    Print THREE
    
    Print AA
    Print BB
    Print CC
    Print PP
    Print ZZ
       
    Print ENUM_1
    Print ENUM_2
    Print ENUM_3
    
    Print ENUM_4
    Print ENUM_5
    
    Print ENUM_6
    Print ENUM_7
    Print ENUM_8
    
    Print ENUM_10
    Print ENUM_11
    Print ENUM_12
    Print ENUM_13
    
    Print POINT.TA
    Print POINT.TB
    Print POINT.TC
    
    Print ( Option.A | Option.B )  'Prints 3
    Local everything:Int = Option.A | Option.B | Option.C | Option.D
    Print ( everything )  'Prints 15
    
    If HasFlag(everything, Option.D) Then Print "True" Else Print "False"  'Prints True
       
    Print ABC.ENUM_14 ' Enum in class 
    
    Print ABC.ENUM_19 ' Err must be  ABC.DEF.ENUM_19 
    
    Local currentOption:Option  'Declares as an Enum type
   ' currentOption = Option.C   ' Err connot convert from Int to Option 
   ' Print currentOption  'Prints 4
               
    Return 0
End

Function HasFlag?(value:Int, flag:Int)
  Return (value &amp; flag = flag)
End Function
</pre>  <br><br>3- extend import keyword to accept a library that to be linked with ore code<br>Example<br><pre class=code>
Import -lcomdlg32

inlineC
        
    //' Returns an empty String If dialog is cancelled
	static String openfilename() {
		const char *filter = "All Files (*.*)\0*.*\0";
		HWND owner = NULL;
		OPENFILENAME ofn;
		char fileName[MAX_PATH] = "";
		ZeroMemory(&amp;ofn, sizeof(ofn));

		ofn.lStructSize = sizeof(OPENFILENAME);
		ofn.hwndOwner = owner;
		ofn.lpstrFilter = filter;
		ofn.lpstrFile = fileName;
		ofn.nMaxFile = MAX_PATH;
		ofn.Flags = OFN_EXPLORER | OFN_FILEMUSTEXIST | OFN_HIDEREADONLY;
		ofn.lpstrDefExt = "";

		String fileNameStr;

		if ( GetOpenFileName(&amp;ofn) )
			fileNameStr = fileName;

		return fileNameStr;
	}
 
endC

Extern
   Function OpenFileName:String() = "openfilename"
Public

Function Main:Int()
    Print OpenFileName()    
    Return 0
End
</pre><br><br>BTW , for MSVC using #LIBS will make it.<br><br>4- allow using   #CC_OPTS  with desktop target to accept g++ option that will pass while building monkey code.<br><br>5- allow import keyword to accept header files .h and c files , with c file it will automatically enclosed it with Extren "C"{}  trem.<br><br>those are what i have done till now , more will be coming.<br><br>thanks <br><br></td></tr></table><br>
<a name="2081901"></a>

<a name="2085611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>this time i bring to you my new features that added to Trans_ext.<br><br>extend "Import" keyword so that it accept header files [zlib.h] to main.cpp file, also accept's c files [Myfile.c]. <br>add keyword "PrjImport" that accepts  many file format to the project , not well , the file that import with PrjImport will not insert into mai.cpp but will compile with it's compiler then linked with the main obj file.<br>here is the file formats and it's corresponding compiler.<br>1- c/c++     -----------&gt; compile with g++.    <br>2-o(obj file)  ----------&gt; added to the link obj files table.<br>3-asm        -----------&gt; compile with Fasm assembler. <br>4- S(gas asm)--------&gt; compile as gas assembler.<br>5 zir(High Level asm) -----&gt; compile with Ziron assembler.<br><br>her is an example that demonstrate the new features<br><pre class=code>
// this is the main file
Import Archive 
Function Main:Int() 
    Print MySquare(10) 'test fasm routin
    
    Local dststr:String="welcome"
    Local srcstr:String="1234567"
    H_strcpy(STRPTR(dststr),STRPTR(srcstr))    
    Print  dststr
    Return 0
End
</pre><br><br><pre class=code>
// this is Archive.monkey file

Import os

#CC_OPTS+="-ID:\MonkeyX\MagicPro\zlib"
#CC_OPTS+="-ID:\MonkeyX\MagicPro\Encrpt"


Import -lwininet

PrjImport "zlib/adler32.c"
PrjImport "zlib/compress.c"
PrjImport "zlib/crc32.c"
PrjImport "zlib/deflate.c"
PrjImport "zlib/infback.c"
PrjImport "zlib/inffast.c"
PrjImport "zlib/inflate.c"
PrjImport "zlib/inftrees.c"
PrjImport "zlib/ioapi.c"
PrjImport "zlib/trees.c"
PrjImport "zlib/uncompr.c"
PrjImport "zlib/unzip.c"
PrjImport "zlib/zip.c"
PrjImport "zlib/zutil.c"

PrjImport "Resource/resource.cpp"

PrjImport "Encrpt/Encryptor.cpp"

PrjImport "asm/test.asm"

PrjImport "S/as_test.s"

PrjImport "zir/z_test.zir"

Import "zlib/zlib.h"
Import "Encrpt/Encryptor.h"
! CEncryptor Encrpt(0xFFDDCCAA);

! Extern "C" Int MySquare ( Int val);
! Extern "C" Void __stdcall H_strcpy  (DWORD dst,DWORD src);
Extern
     Function MySquare:Int(Val:Int) = "MySquare"
     Function H_strcpy:Void(dest:CHARPtr,source:CHARPtr) = "H_strcpy"
Public
</pre><br><pre class=code>
// here is z_test.zir file
program MSCOFF  'test';

#define APPTYPE_LIB;
#include 'win_def.zir';
#Include 'console.zir';

function  H_strcpy(Dword dst, src)
{ 
  uses edx ebx;
  Eax = dst; 
  Edx = src; 
  push Eax;
  BX = word[Edx];
  while ( BX != 0)  
   {
      word[Eax] = BX; 
      Eax++; Edx++; 
      BX =  word[Edx]; 
   }
  word[Eax] = 0;
  pop Eax;
}
exports H_strcpy;
</pre><br><pre class=code>
// this is test.asm file

    format	 COFF
    public	_MySquare
    section	"code" code

_MySquare:
   push	ebp
    mov	ebp,esp
    mov	eax, dword [ebp+8]
    imul	eax,eax
    mov	esp, ebp
    pop	ebp
    ret
</pre><br><pre class=code>
//this is as_test.s file
        .text
LC0:
        .ascii "Hello, world!\12\0"
.globl s_test
s_test:
        pushl %ebp
        movl %esp, %ebp
        subl $4, %esp        
        movl $LC0, (%esp)
        call _printf
        movl $0, %eax
        leave
        ret
   
   .intel_syntax noprefix
.globl inteltest
inteltest:
        push ebp
        mov ebp, esp
        mov	eax, dword [ebp+8]
        imul eax,2
        leave
        ret
   .att_syntax noprefix
</pre><br><br>i have add fasm.exe and ziron.exe and it's stuff with the mingw folder for easy access of those compilers and assemblers.<br><br>i will post then new trans with it's depended sooner.<br><br>this will work only with gcc.<br><br>Enjoy with extended monkey. <br><br></td></tr></table><br>
<a name="2085612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like an awesome extension and very handful for some here. <br><br></td></tr></table><br>
<a name="2086527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emil_halim</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks Mike for your nice word. <br><br></td></tr></table><br>
<a name="2086724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice, could be very useful in the future, well done Emil! <br><br></td></tr></table><br>
<a name="2086710"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
