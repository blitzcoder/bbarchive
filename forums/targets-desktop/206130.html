<!DOCTYPE html><html lang="en" ><head ><title >Profiling Glfw</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Profiling Glfw</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=300" >Desktop</a>/<a href="#bottom" >Profiling Glfw</a><br><br>
<a name="2070329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got Monkey to work on my ARM chromebook, but, while most demos are fast under Glfw, some demos, like Monkenstein are just unusable slow. Like not even 1 fps. How can I profile/find the issue here? <br><br></td></tr></table><br>
<a name="2070342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> is it slow under HTML5 as well? i usually try the Chrome profiler for javascript first for general profiling.<br><br>but for glfw specifically, i use "very sleepy"<br><a href="http://www.codersnotes.com/sleepy" target="_blank">http://www.codersnotes.com/sleepy</a><br>you may need to modify the VC++ project file to allow debug output to get detailed info. i think it's off by default. <br><br></td></tr></table><br>
<a name="2070348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No HTML5 is fast; faster than Glfw on my other laptop actually... Which I also find slightly disturbing :) <br><br>Only Glfw and only with a few of the bananas. <br><br>Sleepy looks nice, but we're talking about a Ubuntu (Chrome) ARM laptop ; no Windows, no VC++ :)<br><br>I'll try gprof to try to find what's going on. <br><br></td></tr></table><br>
<a name="2070347"></a>

<a name="2070349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://manpages.ubuntu.com/manpages/lucid/man1/perf.1.html" target="_blank">http://manpages.ubuntu.com/manpages/lucid/man1/perf.1.html</a><br><a href="http://oprofile.sourceforge.net/about/" target="_blank">http://oprofile.sourceforge.net/about/</a> <br><br></td></tr></table><br>
<a name="2070375"></a>

<a name="2070376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> what graphics card does the chromebook have?<br>maybe the chrome OS doesnt have the right drivers?<br><br>Have you tried any other games made with other languages? (with 3d rendering) <br><br></td></tr></table><br>
<a name="2070446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Chrome book automatically has the right drivers with Ubuntu, because Ubuntu uses the Linux Google drivers which are included with ChromeOS. And they work very well as all WebGL/OpenGL runs really well/fast for such low spec; I have many open source games running well as well as emulators which use OpenGL for acceleration.<br><br>I did come closer by trying to figure out what is wrong, because something is very wrong :) <br><br>When compiling the binary with profiling info or while trying to compile for release, so not debug, it seems all to boils down to software using GrabImage; they run very slow or, when compiling for Release, seg with a memory violation: <br><br>Without gbd: <br><br>Monkey Runtime Error : Memory access violation<br>/home/tycho/MonkeyPro75d/modules/mojo/graphics.monkey&lt;105&gt;<br>/home/tycho/MonkeyPro75d/bananas/skn3/monkenstein/monkenstein.monkey&lt;113&gt;<br>/home/tycho/MonkeyPro75d/modules/mojo/app.monkey&lt;43&gt;<br><br>{{~~/home/tycho/MonkeyPro75d/modules/mojo/graphics.monkey&lt;105&gt;~~}}<br>+GameDelegate.StartGame;/home/tycho/MonkeyPro75d/modules/mojo/app.monkey&lt;43&gt;<br>Self:GameDelegate=@1c99ca0<br>+myApp.OnCreate;/home/tycho/MonkeyPro75d/bananas/skn3/monkenstein/monkenstein.monkey&lt;113&gt;<br>Self:myApp=@1c99150<br>levelData:String="7777777777772222244444447000000000070000040000047000000000074444440000047000221200000000000000047000..."<br>index:Int=0<br>+Image.GrabImage;/home/tycho/MonkeyPro75d/modules/mojo/graphics.monkey&lt;105&gt;<br>Self:Image=@(nil)<br>x:Int=0<br>y:Int=0<br>width:Int=1<br>height:Int=64<br>frames:Int=64<br>flags:Int=0<br><br>With gdb: <br><br>[New Thread 0x7549a450 (LWP 13260)]<br>[Thread 0x7549a450 (LWP 13260) exited]<br>[New Thread 0x7549a450 (LWP 13261)]<br>[New Thread 0x70aff450 (LWP 13262)]<br><br>Program received signal SIGSEGV, Segmentation fault.<br>0x0004435e in Array&lt;c_Frame*&gt;::Length() const ()<br><br>and stacktrace; <br><br>#0  0x0004435e in Array&lt;c_Frame*&gt;::Length() const ()<br>#1  0x00038392 in c_Image::p_GrabImage(int, int, int, int, int, int) ()<br>#2  0x00032408 in c_myApp::p_OnCreate() ()<br>#3  0x000356a0 in c_GameDelegate::StartGame() ()<br>#4  0x0002c1f8 in BBGame::StartGame() ()<br>#5  0x0002ddbc in BBGlfwGame::Run() ()<br>#6  0x0002e054 in BBMonkeyGame::Main(int, char const**) ()<br>#7  0x00040506 in main ()<br><br>To me this makes no sense, but what can I do to help Monkey? :)<br><br>(Edit: this is a clean 75d install so there is nothing changed in Monkenstein) <br><br></td></tr></table><br>
<a name="2070414"></a>

<a name="2070413"></a>

<a name="2070412"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
