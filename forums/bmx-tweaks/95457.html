<!DOCTYPE html><html lang="en" ><head ><title >[BRL.Math] Sign() function</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >[BRL.Math] Sign() function</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=110" >BlitzMax Module Tweaks</a>/<a href="#bottom" >[BRL.Math] Sign() function</a><br><br>
<a name="1099420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Sign</b> or <b>Signum</b> is a function that returns '1' for positive values, '0' for zero and '-1' for negative values.<br>It's useful when dealing with several algebraic operations such as Dot products etc.<br>It is not implemented by default in the system library, but it's very easy to reproduce.<br><br><b>Disclaimer:</b> The way it will be implemented assumes the compiler treats boolean 'True' values as any positive number, and 'False' values as zero. This allows for a fast version of it.<br>GCC agrees with this behavior, so there shouldn't be any problem (maybe when compiling in other platforms; I wouldn't know).<br><br><b>Instructions:</b><br>• Open BRL.mod\Math.mod\Math.C.<br>• Add this to the end of the code:<br><pre class=code>
double bbSign( double x ){
	return -(x&lt;0) + (x&gt;0);
}
</pre>This should be below "bbCeil" or whatever function one might have added there last. <br>• Save and close this file.<br><br>• Open BRL.mod\Math.mod\Math.BMX.<br>• Add this to the end of the code, but inside the "End Extern" statement:<br><pre class=code>
Rem
bbdoc: Signum of @x
returns: 1 for positive values, 0 for zero, -1 for negative values.
End Rem
Function Sign:Double( x:Double )="bbSign"

End Extern
</pre>Note the original "End Extern" that was already there. It needs to enclose this new Sign() declaration just like all the other declarations that were there.<br>• Save and close this file.<br><br>• You need to rebuild the math module. Two ways to do this: select 'Build Modules' (CTRL+D) in your IDE (for Windows, Mac or Linux), or follow the instructions below (just for Windows):<br>- Open a Command Prompt (MS-DOS).<br>- Head over to "[...]\blitzmax\bin"<br>- Type the following (without quotes): "bmk makemods brl.math"<br>- It will build both Release and Debug versions of the module.<br><br>• To rebuild the documentation so this Sign() function is added to the help files and is highlighted when you are programming in BMax, select 'Rebuild Documentation' in your IDE and wait for the process to complete. <br><br></td></tr></table><br>
<a name="1099421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It is not implemented by default in the system library, but it's very easy to reproduce. <br></div><br>Sgn() ? <br><br></td></tr></table><br>
<a name="1099422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you find a system header where it's declared? from what I've read there's no standard for C or C++, just for other higher-level languages like VB. <br><br></td></tr></table><br>
<a name="1099423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can you find a system header where it's declared? from what I've read there's no standard for C or C++ <br></div>No idea what you're talking about with your system headers - that stuff's beyond me.  Just wondering why you've gone to the trouble of adding a function which Blitzmax already has. <br><br></td></tr></table><br>
<a name="1099425"></a>

<a name="1099446"></a>

<a name="1099447"></a>

<a name="1099449"></a>

<a name="1099455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about that, <a href="/bmdocs/command.php?name=Sgn&amp;ref=2d_cat" target="_blank">you're right</a>!<br><br>Still, if someone wants <strike>a faster way</strike> EDIT: implementing your own Sign() is not faster... after some tests Sgn() is much, much faster and I think due to the fact it's from BRL.Blitz, the core module that is always imported to apps.<br>Back to the sketch board *sigh*...<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
