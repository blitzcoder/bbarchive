<!DOCTYPE html><html lang="en" ><head ><title >Request:Imagebuffers</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Request:Imagebuffers</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=110" >BlitzMax Module Tweaks</a>/<a href="#bottom" >Request:Imagebuffers</a><br><br>
<a name="672753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since BRL are entertaining <a href="/posts.php?topic=60164" target="_blank"> this </a> and polling for interest I thought I would raise the request for imagebuffers again.<br>Can we have Imagebuffers please?<br>&lt;edit&gt; P.S. my response to anybody saying that there are 3rd party mods available is "Great, shows it's possible. Lets have an official version". <br><br></td></tr></table><br>
<a name="672988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have pixmaps, isn't that good enough? <br><br></td></tr></table><br>
<a name="673003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Might be.<br>How do you paste another pixmap/Image with alpha/light/shade/whatever with masking or a rect/oval/line to another pixmap/image using native Bmax commands? <br><br></td></tr></table><br>
<a name="673082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fetze</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;&gt;  You have pixmaps, isn't that good enough? <br><br>No. *g* <br><br></td></tr></table><br>
<a name="673092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd like ImageBuffers too. <br><br></td></tr></table><br>
<a name="673096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well since images are textures you could always use render to texture. Your only issue is that the DX7 surfaces created by BMAX are not set-up as rendertargets.<br><br>So you're stuck with pixmaps :) <br><br></td></tr></table><br>
<a name="673230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I managed to get render to texture working to some degree.<br>First, I made the Bmax textures non-auto managed so I could create them as rendertargets. This worked well with the downside that I'd have to create a texture manager.<br>Second, I tried creating a seperate render texture and blitting it to the pixmap surface. This worked well except <br>a) The texture got smaller each time (there is a note in my DX7 book that this might happen but nothing to say how to prevent it) and b) the blit only seemed to copy the original pixmap image and not anything rendered to it.<br>I think you had a similar issue when you first tried.<br>So, I could persevere, I could use your render-to-texture, I could use OGL and the HighGfx module etc etc etc. <br>However, raising the request with BRL and, this time, hoping for an official response, seemed a good option. <br><br></td></tr></table><br>
<a name="673285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> How do you paste another pixmap/Image with alpha/light/shade/whatever with masking or a rect/oval/line to another pixmap/image using native Bmax commands? <br></div><br>By taking the two pixmaps and modifying them accordingly.<br><br>What you're asking for is render to texture, not image buffers. <br><br></td></tr></table><br>
<a name="673517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Noel, what I am asking for is 'Imagebuffers' as in 'Setbuffer imagebuffer(blah)' from BB as you well know.<br>Anyway, can you let me know how I take 2 pixmaps and modify them accordingly? Are you suggesting grabpixmap or writepixel or is there something else in Bmax I am not aware of? <br><br></td></tr></table><br>
<a name="673629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am suggesting you use WritePixel and modify the buffers as need be.<br><br>SetBuffer with BlitzMax would require RTT which, as far as I can see, BRL does not exactly have a vested interest in adding support for something which may prove to introduce more incompatibility with hardware than necessary, since you'll then have to deal with fallbacks for cards without RTT support and that could get pretty messy. <br><br></td></tr></table><br>
<a name="673658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It could yes ... but if we wanted to stay on stone age technology, we could have stayed with BB+ and B3D and there wouldn't have been a need for 2D in 3D which itself requires per default a 3D card (not a SiS, S3 or older Intel) ...<br><br>There is not much of incompatibility to add ... all cards that are able to run BM with hardware acceleration will have the needed support as well ... those that don't have HA can skip it anyway due to significant inexistant speed. <br><br></td></tr></table><br>
<a name="673986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Max automatically supports glCopyTexSubImage2D() and glCopyTexImage2D(). While these require you to draw to the backbuffer first, and to have such drawing and grabbing be an intermediary step (so not as efficient as directly rendering to the texture), it does let you get drawn graphics into a texture to use as you want. Rather than strictly being render to texture, it's more of a render to backbuffer and copy to texture.<br><br>I agree with some other comments that it seems there are various compability and performance issues with regards to using the various texture rendering options, whether they be pbuffers, backbuffer objects, or whatever else. Some hardware may not support certain things and at the very least it would probably rely on OpenGL extensions, which are not always supported. No idea on the DX side but I'm sure there's similar issues.<br><br>The big question is for what purpose do you need to render directly to a texture and is there a different approach you can take. <br><br></td></tr></table><br>
<a name="674022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> All cards from ATI and NVidia brought out in the last few years support render targets ... even my crappy old GF440 Go did it 4 years ago ... So no prob on the DX side there.<br>And if I remember correctly, the pBuffer tests we did back that days (for similar reasons btw) worked as well.<br><br>And its a fair assumption that users will have ATI or NV ... because if they have Intel you will have going to have quite some fun with them ... or their problems I should better say ... (thats what I've seeing on Torque GameBuilder EA boards for over a year now ... SiS are even worse in supporting 2D through 3D) <br><br></td></tr></table><br>
<a name="674039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> And its a fair assumption that users will have ATI or NV ... because if they have Intel you will have going to have quite some fun with them <br></div><br><br>If I recall correctly, Intel was the most wide-spread for video cards.  I wouldn't make the assumption that people have any specific brand of card for what most people here are doing.  It should be compatible with a specific range of cards, and Intel cards should be among them whether or not they are bad. <br><br></td></tr></table><br>
<a name="674045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have an Intel gfx card on this desktop PC.... and those new Mac laptops (the cheaper dual-core gizmos) are also coming with intel gfx cards, I believe.<br><br>Best not to assume things ;-) <br><br></td></tr></table><br>
<a name="674075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are a number of ways to 'render to texture' with DX7.<br>a) Render directly onto the texture. This is not possible in Bmax as it uses DDSCAPS2_TEXTUREMANAGE to create the surface in TD3D7ImageFrame.create. <br>b) Render to surface then blt to texture. This is what I am trying in another thread. The render to surface seems OK but I am having problems getting the blit to 'stick'. <br>c) Render to backbuffer and blt (bitblt) to texture. Basically this is what GrabPixmap does.<br>d) Software rendering.<br><a href="http://www.gamasutra.com/features/19991112/pallister_03.htm" target="_blank"> here </a> is an article which discussed each and their uses. This should allow plenty of fallback for cards which don't support render to texture. <br>In addition, each time this request is raised, we discuss whether imagebuffers are required. Here is the documentation for B3D Imagebuffers...<br><div class="quote"> <br>There are 1000 reasons for this command. Simply put, you may want to 'draw' on an existing image you've loaded (LoadImage or LoadAnimImage) or created (CreateImage). You could, for example, have a blank wall graphic and you want to add 'graffiti' to it based on the user action (Jet Grind Radio baybeee! Sorry...). Instead of trying to draw a dozen images all over the wall, just use the SetBuffer command to denote the wall graphic as the 'target' buffer, and draw away! Next time you display that graphic (DrawImage), you will see your changes! This is a powerful command! <br> <br></div>I also add to this 'composite sprites' and then have a lengthy discussion what a composite sprite is. <br>You take a base sprite and paste additional sprites on top (armour, shields, swords, shirts etc etc). I have a semi-solution for this but it doesn't allow ovals, rects etc or for blend modes.<br>So, good enough for BB but not Bmax? BRL responded a couple of years ago stating that Imagebuffers were not implemented as an OGL solution could not be included without using extensions. BRL wanted the product to mature before using extensions. Is the product ready?<br>The question of whether the same can be achieved in a different way. The solution was always to draw to backbuffer and grabpixmap. This is workable, can be slow and, for some people, complicate the draw process.<br>If somebody has a better solution, I would appreciate it. <br>Finally, Tim's render-to-texture does just that. As far as I can see it doesn't alter the base image as the BB Imagebuffer used to do.<br>Hopefully that explains people's queries so far. <br>BRL, is there any chance of this ever happening? <br><br></td></tr></table><br>
<a name="674077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If somebody has a better solution, I would appreciate it. <br></div><br><br>I like my solution best: write your own 2D code.  It's what I did, beats the living daylights out of Max2D too.  Then again, it's not really hard to put Max2D to shame. <br><br></td></tr></table><br>
<a name="674080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm thinking of having a Bmax 'standalone' system where I change the code and never syncmod. I did ask BRL what plans they had for MAX2D (et al) to see if now is the time to do it but didn't get a response.<br>It's a shame, but inevitable I suppose, that you buy something so you don't have to do the nitty-gritty stuff yourself then find it's missing things you want. <br>I reckon, at some point, I will get this working and, sod's law,  when I do BRL will announce it's inclusion into Bmax 1.2x <br><br></td></tr></table><br>
<a name="674557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Noel: I don't make the assumption out of sight of "what is spread the most" ... I make it from the point, that intel users will definitely suffer bad problems!<br><br>The new drivers that came after jan 06 have massive OpenGL problems and other new introduced problems as well ... So unless BM gets a DX9 driver on Windows, forget Intel as acceptable system requirement, it will definitely cause problems. smaller or larger depending on what you try to achieve.<br>But to tell the truth: That doesn't make me wonder. Why should it? Intel cards are for 2 purposes: Office and home Entertainment. They are exceptionaly useless when it comes to realtime 3D, even when they have Shader 3 support ... (half as fast as GF6200TC which is already that slow that CPU emulation won't lack that far behind with a usefully fast CPU). And as we all know: BM is 2D in 3D which means that the card definitely needs to be 3D capable ... and due to the fact that all images are always directly in front of the camera, the card should have an acceptable bandwidth etc ...<br><br>They only got 3D support to feature everything XP needed (on past chips) and Vista Aero (on current and future versions). <br><br></td></tr></table><br>
<a name="678073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll take this oppotunity to say 'yes please' one more time.<br><br>tony's method c) up above is horrendously slow on Vista under DX.  It wasn't too flashy on XP either but it was usable for some things - on Vista it crawls at about 1 frame per 30 seconds. <br><br></td></tr></table><br>
<a name="678095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> As grabpixmap uses bitblt I have a horrible feeling that it's not possible to blt directly to an image's surface. This rules out b).<br>I tried running with Texturemanage off but white images when using multiple textures. <br>Finally, it might be possible to use single pass multitexturing. I've got multipass working for something else so just a case of finding the correct renderstage options.<br>BRL, you could put me out of my misery by sharing your thoughts. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
