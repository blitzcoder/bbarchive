<!DOCTYPE html><html lang="en" ><head ><title >Tablet for BMax V1.0</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tablet for BMax V1.0</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=110" >BlitzMax Module Tweaks</a>/<a href="#bottom" >Tablet for BMax V1.0</a><br><br>
<a name="486908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I've been putting together a module that enables tablet support in BMax.<br><br>Get it here: <a href="http://www.frecle.net/bmx_tablet/bmx_tablet.zip" target="_blank">http://www.frecle.net/bmx_tablet/bmx_tablet.zip</a><br><br>Currently only Win32 is fully supported, while other platforms run in simulation mode (ie. uses the mouse).<br><br>It should work with all tablet types, it's been tested with the following:<br>Wacom: Intuos2, Intuos3, Graphire, Cintiq<br>Trust: Work Tablet 400<br>Medion: Unknown (rebadged Mustek according to Scouse)<br><br>It would be great if someone could knock up full support for MacOS and Linux. The module is made so that it should be straight forward to set up on all platforms.<br><br>An example is included (in the doc folder), which should show how to use it. Note that if you are running it from the IDE, you will need to refocus (click outside window, and then inside) to get any input. This does not happen when run directly from the exes produced. <br><br></td></tr></table><br>
<a name="486943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works great. <br><br></td></tr></table><br>
<a name="487423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bertrand</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really cool. And now who want to made a 2D drawing package? <br><br></td></tr></table><br>
<a name="488920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fredborg, you should implement this in Gile[s] -&gt; Paint! Yeeeehaaa! <br><br></td></tr></table><br>
<a name="488928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It already does! <br><br></td></tr></table><br>
<a name="845521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone try this recently?<br><br>I've had all sorts of issues compiling modules on my current system (more vista woes). Tried everything mentioned in these forums and other mingw help forums. No luck, compiling modules trashes the bmx installation.<br><br>Does anyone have a precompiled module of this, or possibly even better, can anyone offer a quick guide as to how to convert the module to work straight from the 'wintab dll'?<br><br>Thanks for any help offered here, this is driving me nuts :) <br><br></td></tr></table><br>
<a name="845900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nailed it.<br><br>Not new to this stuff, this should have been easier.<br>Have working tablet routines working in c++ and pure-b, both of them relatively straight forward to implement.<br><br>I've spent the last three days looking at this problem from every angle and getting nothing but compilation errors, corrupt max installs, direct dll reading code, everything I've tried has ended up with max kicking sand in my face and running off laughing.<br><br>Not today. Today I ignored Maxide/Program/Command Line, ignored Program/Build Modules, ignored Program/Rebuild All Modules.<br><br>Instead, I ran the bmk from the standard Vista command prompt. "bmk makemods -r pub.tablet".<br><br>It worked???<br><br>Just thought I'd mention it for any other souls lost in the fog of Vista.<br><br>ps Fredborg, you've saved me a mountain of work here, Thankyou :) <br><br></td></tr></table><br>
<a name="923818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fantastic, thank you so very much!<br><br>Made a little test drawing tool already...<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80"> 
SuperStrict

Framework brl.d3d7Max2D

Import brl.StandardIO
Import brl.random
Import pub.tablet

SetGraphicsDriver D3D7Max2DDriver()

Global scrx:Int = 640
Global scry:Int = 480
Graphics scrx ,scry ,0,60
Global tab_confirm:Byte = 0
If TabletOpen() Then tab_confirm = 1

Global rawpix:TPixmap = CreatePixmap(scrx ,scry ,PF_RGBA8888,4)
Global rawWidth:Int=PixmapWidth(rawpix) 
Global rawHeight:Int=PixmapHeight(rawpix) 
Global rawRow:Float=PixmapPitch(rawpix)/4
Global statBase:Int Ptr

Global statpix:TPixmap = CreateStaticPixmap(PixmapPixelPtr(rawpix,0,0),rawWidth-1,rawHeight-1,rawRow*4,PF_RGBA8888)

Global x:Float = MouseX(), prex:Float
Global y:Float = MouseY(), prey:Float
Global tp:Float = TabletPressure()^2, pretp:Float
Global BWswap:Byte = 0
statpix.ClearPixels($00aaaaaa)	

Repeat
	prex = x
	prey = y
	x= MouseX()
	y= MouseY()
	pretp = tp
	If tab_confirm Then tp = TabletPressure()^2 Else tp = 1.0; DrawText "no tablet",10,30
	Cls
	SetBlend ALPHABLEND
	SetAlpha 1.0
	SetColor 255,255,255
	If KeyHit(KEY_C)
		statpix.ClearPixels($00aaaaaa)	
	EndIf
	If KeyHit(KEY_X)
		BWswap:~1	
	EndIf
		statBase=Int Ptr(PixmapPixelPtr(statpix,0,0))
		If MouseDown(1)
			Local px:Float = prex
			Local py:Float = prey
			Local dx:Float = x-prex
			Local dy:Float = y-prey
			Local length:Float = Abs(dx)
			If length&lt;Abs(dy) Then length = Abs(dy)
			dx:/length
			dy:/length
			Local color:Float = $aa
			Local alpha:Float = pretp*$ff
			Local dalpha:Float = (tp - pretp)/length *$ff
			Local ralpha:Int
			Local pos:Int 
			For Local i:Int=0 To length-1
				pos = Int(px)+Int(py)*rawRow 
				ralpha=(statBase[pos] Shr 24)&amp; $ff
				If alpha &gt; ralpha 
					ralpha = alpha
					color = (statBase[pos]&amp; $ff) 
					If BWswap Then color:- ralpha Else color:+ralpha
					If color&gt;$ff Then color = $ff
					If color&lt;0 Then color = 0
					statBase[pos]=Int(color)|Int(color) Shl 8|Int(color) Shl 16|Int(ralpha) Shl 24
					alpha:+dalpha
					px:+dx
					py:+dy
				EndIf
			Next
		Else
			For Local i:Int = 0 To scrx*scry
				statBase[i] = statBase[i]&amp; $ffffff
			Next
		EndIf
	DrawPixmap statpix,0,0
	DrawText "x="+Int(x)+"  y="+Int(y),10,10
	DrawText "press X to swap Black/White",10,25
	Flip
Until KeyHit(KEY_ESCAPE)
End
</textarea><br><br>...not that it's any brilliant, but I'm very excited! Gets me started. I always wanted to write a little painter, but I'm right now thinking about writing a little animation tool.<br><br>Anyway, THANKS again! Fantastic! <br><br></td></tr></table><br>
<a name="958218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updated to take an optional window argument when using TabletOpen(). Use in conjunction with QueryGadget() to get a win32 hWnd handle of the window you want.<br><br>Otherwise it uses the active window when initializing. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
