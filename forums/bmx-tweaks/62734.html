<!DOCTYPE html><html lang="en" ><head ><title >MaxMod 1.10</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MaxMod 1.10</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=110" >BlitzMax Module Tweaks</a>/<a href="#bottom" >MaxMod 1.10</a><br><br>
<a name="700793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> New version is up, including an OpenAL TAudioDriver, and many fixes :)<br><br>Please let me know if you have any trouble with it, THX<br><br>*EDIT*<br>channel fadeout bug in xm noted (by email)<br><br>OOPS, I've left s3m support in accidentally, its a very early WIP so please dont report s3m bugs. <br><br></td></tr></table><br>
<a name="700867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works great for me :) Thanks. <br><br></td></tr></table><br>
<a name="701047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> excellent anawiki, does that mean it works on WinME okay now? <br><br></td></tr></table><br>
<a name="701130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought MaxMod was up to version 1.16+ ?<br><br>Anyway, great job!<br><br>Is OpenAL required (hope not!) or optional?<br><br>Russell <br><br></td></tr></table><br>
<a name="701139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matthew Smith</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Russell,<br><br>Believe it is required. <br><br></td></tr></table><br>
<a name="701276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @REDi: It seem's that it doesn't work on WinME still. I'll test it in debug mode when I get home and let you know. <br><br></td></tr></table><br>
<a name="701573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Russell, OpenAL is required... ATM :), I have been playing about with a threadless directsound version, which is working pretty well.<br><br>The main reason for using OpenAL was because its cross platform, but it turns out linux OpenAL really sucks anyway, so i may just end up using a different api for each OS.  Oh well, its all good fun.<br><br>@Roman, I've email you ( just in case ;) ), sorry for the delay, been at work ALL day :( <br><br></td></tr></table><br>
<a name="701661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heres a lil demo to test the DirectSound version<br><br>www.redi.me.uk/downloads/dstest.exe<br><br>Please let me know if it works or not, I think its probably the best way to go.. but then again.. lol <br><br></td></tr></table><br>
<a name="701663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The seperate installation for OpenAL that's required is a major turn-off, makes it a lot less practical to deploy than programs using older versions of MaxMod... <br><br></td></tr></table><br>
<a name="701737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't need the whole OpenAL installation packege. Copying openal.dll to the program folder should be enough for to make it working. So just include openal licence and that it (hope so). I guess many games do that. <br><br></td></tr></table><br>
<a name="701739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @REDi: DirectSound demo seems to work on my XP machine. I'll test it later on WinME. If you prepare demo next time please make it working in windowed mode so I am sure that any lags are not related to my full-screen switching problems.<br><br>To be honest with you - I don't care if it is DS or OAL as long as it has maximum compatibility (and I heard that OAL has some issues with that). I've planned to use native BMX functions for OGG playing on other platforms anyway if your mod fails to work on them. <br><br></td></tr></table><br>
<a name="701749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matthew Smith</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> REDi,<br><br>Works great!  Look forward to trying the mod! <br><br></td></tr></table><br>
<a name="701956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> DS it is then :) just gotta rewrite the TAudioDriver stuff when I get time, and its done.<br><br>Anyone know what the default sound api is for linux? I havent had time to look into that yet.<br><br>Anyway thanks for testing it. <br><br></td></tr></table><br>
<a name="702005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a couple of them, you might want to have a peak at freeaudio for some hints, I think freeaudio supports two Linux audio thingies? <br><br></td></tr></table><br>
<a name="702059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> @REDi: DS version works on WinME too :)<br><br>thanks<br>Roman <br><br></td></tr></table><br>
<a name="702296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Toby, thanks I'll have a look.<br><br>@anawiki, excellent, thanks for trying it. <br><br></td></tr></table><br>
<a name="702651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's amazingly difficult to do a bmx module such as this that works equally well on all platforms, eh? That's the Holy Grail of this endevour (At least in my opinion).<br><br>Is it possible to do a version that uses BMax's own built-in 'low level' sound system, so that it would be 'guranteed' to work on all platforms? I haven't used BMax's sound commands much, so I can't say.<br><br>It's also too bad that OpenAL is not too good on some of the other platforms. Maybe this will change in the near future?<br><br>Russell <br><br></td></tr></table><br>
<a name="702865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> OpenAL is not too good even on some Windows (ME for example)<br><br>@REDi: OpenAL samples from SDK doesn't work - so it is not your code failure. <br><br></td></tr></table><br>
<a name="703311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> New DirectSound version is up!<br><br><a href="http://redi.me.uk/forum/index.php" target="_blank">http://redi.me.uk/forum/index.php</a><br><br>please let me know if you have any trouble with it.<br><br><div class="quote"> Is it possible to do a version that uses BMax's own built-in 'low level' sound system <br></div><br>I wish :)<br><br>@anawiki, thanks for trying mate <br><br></td></tr></table><br>
<a name="703353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> @REDi: Thanks. It works good on XP and I'll test it later on WinME. It has small bug (probably). I can not set music volume before I play it.<br><br>Music.Setf(MM_VOLUME, 0.5)<br>Music.Play()<br><br>It give's me unhandled memory exception, while:<br><br>Music.Play()<br>Music.Setf(MM_VOLUME, 0.5)<br><br>Works fine... but in previous version it used to work in both ways. <br><br></td></tr></table><br>
<a name="703355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matthew Smith</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> REDi,<br><br>Can you please give an example to the updated FillBuffer command for the streaming method?  <br><br>Great work btw! <br><br></td></tr></table><br>
<a name="703590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's working on WinME :) Hooray!<br><br>What's the adventage of using MaxMod TAudioDriver? <br><br></td></tr></table><br>
<a name="703616"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @anawiki, thanks for the headzup, fixed in next update!<br><div class="quote"> What's the adventage of using MaxMod TAudioDriver? <br></div><br>nothing ATM, but in the future i will be adding 3D sound ect.<br><br>@Matt, okay will do. <br><br></td></tr></table><br>
<a name="703634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matthew Smith</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks REDi! <br><br></td></tr></table><br>
<a name="703698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1.12 is now available<br><br>* Fixed TAudioDriver leak<br>* Fixed setting volume/pitch before playing<br>* Fixed MM_LOOP False still looping<br>* Added CustomStream.bmx to examples <br><br></td></tr></table><br>
<a name="703745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi REDi, This really is an excellent mod from what I've seen so far. <br>What, if any, are the drawbacks when using it? Do I need to know about any license restrictions or need to ship any .dll<br>with my code? <br><br></td></tr></table><br>
<a name="704062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks tonyg<br><br>there is no license restrictions and no dlls, its completly free! but if anyone would like to donate for my time ect there's a donation button in the docs ;) <br><br></td></tr></table><br>
<a name="704461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi REDi,<br>Yep, will play and donate.<br>The CPU Usage example gets an Unhandled Memory Exception Error. <br>I am loading a .ogg file. <br><br></td></tr></table><br>
<a name="704478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Tony<br><br>You must still have an old version, the CPU Usage example isnt included in the current version.. afaik directsound must have a window or fullscreen context to attach the audio to...<br><br><a href="http://msdn.microsoft.com/archive/default.asp?url=/archive/en-us/directx9_c_Dec_2004/directx/htm/idirectsoundbuffer8play.asp" target="_blank">http://msdn.microsoft.com/archive/default.asp?url=/archive/en-us/directx9_c_Dec_2004/directx/htm/idirectsoundbuffer8play.asp</a><br><br>So I scrapped it :) <br><br></td></tr></table><br>
<a name="706009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> So does that mean the latest version does NOT require DirectSound? <br><br>The latest version works great on XP, but is there a Linux and/or Mac version as well?<br><br>Just wondering. :)<br><br>Russell <br><br></td></tr></table><br>
<a name="706481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Russell, Win32 DirectSound only ATM :( <br><br></td></tr></table><br>
<a name="706864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Keep up the good work! I will donate as soon as I can :) ...and again when there's a Linux and Mac version (How's that for incentive? ;) )<br><br>Russell <br><br></td></tr></table><br>
<a name="712110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> MaxMod 1.13 is up, including bug fixes and source code :)<br><br>Feed back and criticism on the code is welcome BTW ;)<br><br><a href="http://redi.me.uk/forum/index.php" target="_blank">http://redi.me.uk/forum/index.php</a> <br><br></td></tr></table><br>
<a name="713283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DannyD</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any possibility for a Mac version? Do you need beta testers or a full code rewrite? <br><br></td></tr></table><br>
<a name="713433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abrexxes</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> why?        Case $8 '; EFFECT_SetPan 						(MMChannel,Track.FXV[CurrentLine])<br><br>the *.mod format support the 8 command as slicepan. But has only 16 tracks (you define 32max).<br><br>What for a documantation you use for this? Can you share your description?<br><br>bye <br><br></td></tr></table><br>
<a name="713527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> @DannyD, Sorry mate, no Mac version for a while at least (until I get a Mac, or someone else wants the challenge)<br><br>Hi Abrexxes<br><div class="quote"> why? Case $8 '; EFFECT_SetPan (MMChannel,Track.FXV[CurrentLine]) <br></div> <br>Wasn't to sure if it was right or not, as a few mods I found had problems with it, plus most of the docs state $8 as unused, but as you can see I'm not sure about that one. <br><br><div class="quote"> But has only 16 tracks (you define 32max). <br></div><br>If you have a look at the mod loader code (in protracker.bmx), you'll see that some trackers (eg FastTracker) that used the mod format did have 32 channel modes. <br>32 channel mod files are also supported by mikmod... <a href="http://www.libsdl.org/projects/SDL_mixer/release/SDL_mixer-1.0.6/mikmod/load_mod.c" target="_blank">http://www.libsdl.org/projects/SDL_mixer/release/SDL_mixer-1.0.6/mikmod/load_mod.c</a> <br><br><div class="quote"> What for a documantation you use for this? <br></div><br>I've read loads of different docs for the mod format, most are incomplete or pretty vague. <br><br>this is a handy resource I found the other day... <a href="http://www.silent-dreams.de/handbook.html" target="_blank">http://www.silent-dreams.de/handbook.html</a> <br><br></td></tr></table><br>
<a name="713632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abrexxes</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the handbook, here another big one (the best i have ). If you need it sometime.<br><br>BTW. If i start bigger mods i can here *klicknoise* the first 2-3 seconds. Maybee your playbackroutine is to fast at start to fill the second-buffers and mix it. So, try to give your loader 50-250ms time to file all the buffers at start. (Just a suggestion)<br><br>anyway, a great work, lets scream  ;)<br><div class="quote"> <br>// For more info -&gt; erlandvo@...<br><br><br>// Hello Thunder,<br>//<br>// ByteRaver / TNT / NO_ID aka Erland Van Olmen (erlandvo@...)<br>// typing here. Your MODFIL10.TXT file was a *GREAT* help for me (my<br>// .MOD loader is now better than the one of FT2, CP 2.0 or Inertia<br>// Player! Wink still, while I was programming, I made some corrections and<br>// completed the text here and there. You might as well find it usefull,<br>// even if the original file was released quite some time ago...<br>// Anyway, each time you see "//", it's an annotation from me.<br>// BTW, I wrote a MOD player for the GUS as well as for the SoundBlaster<br>// PRO II (Interpolation &amp; volume amplify are provided for better sound<br>// quality); the source code has been released through Hornet.<br>// (www.hornet.org, file tnt-mp??.zip, first file was tnt-mp10.zip) A DOC<br>// describing the principles of digital mixing is included.<br>// Source code of the player is Pascal, only the mixer is written in 386+<br>// Real mode assembler.<br>//<br><br>// Bye, sorry for my awful English, hope to hear from you.<br>//<br>// ByteRaver.<br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br><br><br>Public file MODFIL10.TXT - Version 1.0 - by Thunder<br><br><br>Introduction<br>_______________________________<br><br>What this file attempts to do is describe the MOD format in detail and<br>elaborate on the 'effects' that are possible. This is the first version<br>of this file, so if there are mistakes (and I expect at least a couple),<br>please let me know. This information was compiled from a variety of<br>sources, many of them anonymous, so I will thank them all, and they<br>hopefully know who they are. I would like to keep this file up to date.<br>It will be posted as 'MODFILxx.TXT' or 'MODFILxx.ZIP', where 'xx' is the<br>version number (MODFIL10.TXT being the first release).<br><br>I assume that you have some prior knowledge of some 'technical' terms,<br>including: sample, channel (or voice), frequency, logarithmic vs. linear<br>volume, byte, word, long integer, and hexadecimal format. It also<br>assumes that you know something about the machine that you are<br>programming on. If you do not know these things, this file will NOT<br>teach you them. Refer to other sources before going further.<br><br>I am a PC programmer, so I cannot elaborate on particular procedures,<br>routines, methodologies, or tricks that can be performed on other<br>architechtures. I have written routines for the Gravis UltraSound,<br>which is probably the easiest sound card (on the PC anyway) to write MOD<br>routines for.<br><br>I disclaim everything in this file. This information is for your use<br>personally, but I don't care if you give it to everyone else on the<br>planet. I would like the file to stay intact, and if you use the<br>information a 'hello' to me in your program's credits would be nice. If<br>the information is wrong or gives you problems or damages your equipment<br>or person, tough luck. I am not responsible for anything you DO with<br>this information.<br><br>If you have additions, corrections, clarification or questions about this<br>information or this file, you can send them to me through the internet to<br>'kurt.kennett@...' or 'kurtt@...'.<br><br>Here is an overview of what is in this file:<br><br>1 General<br>2 File Format<br>2.1 Song Name<br>2.2 Sample Information<br>2.3 Number of patterns in song<br>2.4 Song end jump position<br>2.5 Pattern table<br>2.6 File format tag<br>2.7 Patterns<br>2.8 Sample data<br><br>_______________________________________________________________________<br>1<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>3 Playing the files<br>3.1 Timing<br>3.2 Periods<br>3.3 Fine-Tuning<br>3.4 Effects<br>3.5 Other information<br>4 Period and Volume tables<br><br><br><br>1.0 General<br>___________________________________________<br><br>Files with the extension '.MOD' are sequenced music files. The file<br>format has it's roots in the Commodore Amiga computer (ugh!). These<br>files use different digital 'samples' played at various frequencies to<br>create three octaves of 'notes' for that sample. In addition to<br>different 'notes', there are a large number of 'effects' which can be<br>done to produce variations on the different notes.<br><br>There are many variations on the MOD format. Since the format originated<br>on the Commodore Amiga computer, the files were geared towards a machine<br>with 4 voices. These days, with a GUS (Gravis UltraSound), you have 32<br>independent voices. If you are programming for a sound board or device<br>that has only 1 or 2 digital voices, you will have to mix together the 4<br>to 8 output channels into those voices. I will not go into this process<br>here, since I do not have experience with it (you don't need to mix on<br>the GUS). If someone would like to mail me a TEXT explaination of how to<br>do the mixing, I will include it in this file. I DO NOT WANT CODE --<br>learn how to write english.<br><br>The earliest versions of the MOD format used a maximum of 15 instruments<br>and had 4 channels. Through some modifications in format, a 'newer'<br>standard emerged, with a maximum of 31 instruments and up to 8 channels.<br>You can tell what format of file you are working with by a four-character<br>tag field. The programs that are used to play these files on the Amiga<br>are called 'Noisetracker', 'Soundtracker', and 'Protracker'.<br><br>// There is also a (well-known) program called 'StarTrekker'. See section<br>// 2.6 (format tag fields) for more info.<br><br><br><br>2.0 File Format<br>_______________________________<br><br>What follows is a description of a file broken down in a field-by-field<br>format. This is just a general description. Please see the following<br>subsections for a detailed description of what each field is and what it<br>means.<br><br>'Big-End Word' refers to the word format on the Amiga. A 2-byte integer<br>value is a word. On the Amiga, this value has the internal<br>representation HHLL, where HH means the high-order byte and LL means the<br>low-order byte. The Intel chips (inside PCs) use a LLHH format for their<br>words. This means that if you are writing routines for the PC, you have<br>to flip the high and low order bytes to retrieve meaningful values.<br><br>_______________________________________________________________________<br>2<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>Just to piss off all the C programmers, I'm going to start the file<br>offset at 1 instead of 0.<br><br>// ?! Something against C programmers Wink ? (I'm both, but above all C...)<br><br>+-----------------(in bytes)<br>|<br>v<br>Offset Length Format Description<br>======== ======== ========= =============<br>1 20 Chars Title of the song. If the title is not a<br>full 20 chars in length, it will be null-<br>terminated.<br><br>21 22 Chars Sample 1 name. If the name is not a full<br>22 chars in length, it will be null<br>terminated.<br><br>43 2 Big-End Sample 1 length in 2-byte words. Multiply<br>Word this value by 2 to get the length of the<br>sample in bytes.<br><br>45 1 SNibble Sample 1 finetune.<br><br>46 1 Byte Sample 1 linear volume.<br><br>47 2 Big-End Sample 1 repeat offset in 2-byte words.<br>Word Multiply this value by 2 to get the position<br>in bytes.<br><br>49 2 Big-End Sample 1 repeat length in 2-byte words.<br>Word Multiply this value by 2 to get the length<br>in bytes.<br><br>51 30 Sample 2 information. Same format.<br>81 30 Sample 3 information Same format.<br><br>. There will either be 15 or 31 sample information blocks.<br>. See the format tag field below for a description of how<br>. to find out how many instruments there are. We'll go on<br>. the assumption that there are 31 instruments in the file.<br><br>921 30 Sample 31 information.<br><br>951 1 Byte Number of patterns in SONG as played.<br><br>952 1 Byte Song end jump position.<br><br>953 128 Bytes Pattern Table. These list up to 128<br>pattern numbers and the order they should<br>be played in.<br><br>1081 4 Chars File format tag.<br><br>1085 ... Pattern and Sample data. Please see pattern section and<br>sample section for more information.<br><br><br>// The old NST format contains only 15 samples (instead of 31). Further it<br>// doesn't contain a file format tag (id). So Pattern data offset is at<br>// 20+15*30+1+1+128.<br><br>// If the file looks like plain garbage, e.g. you can't find any valid<br>// sample-size value, sample-name string (should be alfanumeric), ID<br>// field, ... the file may be compressed with PowerPacker 2.0<br>// To check this, look for the FIRST 4 bytes of the file. If this "string"<br>// reads "PP20" the .MOD file is compressed with PowerPacker...<br>// Use pp20unp.exe to decompress the file (it's included with the source<br>// of my MOD Player, which you can get at:<br>// www.Hornet.org/music/programs/players/tnt-mpXX.zip<br>// (XX = version nr, 1st version = 10)<br><br><br><br>_______________________________________________________________________<br>3<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>2.1 Song Name<br>_______________________________<br><br>This data is pretty self-representative. This is a C 'string' that is<br>null-terminated (i.e. ASCII character 0 is put at the end of the text is<br>the text does not fill up the entire field). Some module writers use<br>this field and the instrument name fields to write 'hello' messages to<br>their friends or dedications instead of giving names to the song or it's<br>samples. I in no way discourage this.<br><br>// As sample names are usually used for messages, the song title field<br>// effectively holds the song title (in 99.9% of the cases Wink)<br><br>2.2 Sample Information<br>_______________________________<br><br>Based on the format tag field, there can be 15 or 31 sampled instruments<br>for the song. These days it is rare to run into an 'older' format song<br>with only 15 instruments. Please see the 'File format tag' field for<br>more information on how to determine how many samples there are in a<br>file.<br><br>The first field in a sample information block is the sample's name. As<br>was mentioned above, these names are frequently used by the composer to<br>say hello to his or her friends. Again, I in no way discourage this. If<br>the sample name begins with a '#' character (ASCII $23 (35)) then this is<br>assumed not to be an instrument name, and is probably a message.<br><br>The second field is the sample length in words. Once again, since this<br>is a 680x0 word, the bytes have the order HHLL, and you have to swap them<br>to use the word on PCs. The first 2 bytes of the sample are used by the<br>Amiga players for repeat information, and therefore are NOT part of the<br>playable data. Therefore, if this field is evaluated to a length of less<br>than 3 bytes, there is NO sample.<br><br>The third field is the sample's initial finetune value. The lower four<br>bits represent a signed nibble (-8..7). Each finetune step changes the<br>note 1/8th of a semitone. This is implemented by switching to a<br>different table of period-values for each finetune value. See section<br>3.2 for a discussion of fine-tuning.<br><br>The fourth field is the sample's playback volume. These are LINEAR<br>values that range from 0 to 64, with 64 being maximum volume. If you are<br>implementing a MOD player, remember to check if you need to use<br>logarithmic volumes. 'Decibel' is a logrithmical unit, which represents<br>how we feel sound intensity. The volume and decibel value table for<br>conversions is on the next page.<br><br><br><br><br><br><br><br><br><br>_______________________________________________________________________<br>4<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>Volume Decibel Value Volume Decibel Value<br>------------------------- ------------------------<br>64 0.0 32 -6.0<br>63 -0.1 31 -6.3<br>62 -0.3 30 -6.6<br>61 -0.4 29 -6.9<br>60 -0.6 28 -7.2<br>59 -0.7 27 -7.5<br>58 -0.9 26 -7.8<br>57 -1.0 25 -8.2<br>56 -1.2 24 -8.5<br>55 -1.3 23 -8.9<br>54 -1.5 22 -9.3<br>53 -1.6 21 -9.7<br>52 -1.8 20 -10.1<br>51 -2.0 19 -10.5<br>50 -2.1 18 -11.0<br>49 -2.3 17 -11.5<br>48 -2.5 16 -12.0<br>47 -2.7 15 -12.6<br>46 -2.9 14 -13.2<br>45 -3.1 13 -13.8<br>44 -3.3 12 -14.5<br>43 -3.5 11 -15.3<br>42 -3.7 10 -16.1<br>41 -3.9 9 -17.0<br>40 -4.1 8 -18.1<br>39 -4.3 7 -19.2<br>38 -4.5 6 -20.6<br>37 -4.8 5 -22.1<br>36 -5.0 4 -24.1<br>35 -5.2 3 -26.6<br>34 -5.5 2 -30.1<br>33 -5.8 1 -36.1<br>0 Minus infinity<br><br>The reason for the table starting at 0 dB as the convention from<br>taperecorders of having 0 dB as the optimal recording condition, and<br>displaying anything worse as a negative number. Please see section 4.0<br>for a complete linear volume format for Gravis' UltraSound.<br><br>The fifth field in the sample information block is the sample repeat<br>start offset. Once this sample has been played completely from beginning<br>to end, if the repeat length (next field) is greater than two bytes it<br>will loop back to this position in the sample and continue playing. Once<br>it has played for the repeat length, it continues to loop back to the<br>repeat start offset. This means the sample continues playing until it is<br>told to stop.<br><br>The last, or sixth field in the sample information is the repeat length.<br>A sample is only looped if this value is greater than 2 bytes. See the<br>preceeding paragraph for more information on looping.<br><br><br>_______________________________________________________________________<br>5<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br><br>2.3 Number of patterns in song<br>_______________________________<br><br>This byte represents the number of patterns which are played in the entire<br>SONG. This is NOT the number of patterns in the FILE. The file may<br>contain (theoretically) up to 256 patterns, whereas the song is just a<br>selection of those patterns. If I have 30 patterns in my file, and I just<br>want to play patterns 6, 12, 3, 7, and 8 in that order, this byte will have<br>the value 5.<br><br><br>2.4 Song end jump position<br>_______________________________<br><br>Historically, this byte has been used for many purposes. Most commonly<br>in the newer format it has been used to signify if a song is to be<br>repeated indefinitely. Some game programs have background music which<br>never ends. If this byte is less than 127, then it specifies the<br>position in the pattern table to jump to when the last pattern has been<br>played. If this byte is greater than or equal to 127, the song ends.<br><br><br><br>2.5 Pattern table<br>_______________________________<br><br>This 128 byte block lists the order that patterns in the file should be<br>played in. Only the number of bytes specified by the number of patterns<br>in the song (see section 2.3) can be considered valid. If the song is to<br>play patterns 6, 0, 12, 11, 21, and 10 in that order, then the table will<br>have those 6 values as the first 6 bytes:<br><br>Pattern Table<br>Position ---&gt; 0 1 2 3 4 5 6 ---------&gt; 127<br>|---|---|---|---|---|---|---|---...---|---|<br>|006|000|012|011|021|010| ????????? |<br>|---|---|---|---|---|---|---|---...---|---|<br><br>One of the effects which is possible (see section 3.4) is a position<br>jump. The argument to this effect is where to jump to in the PATTERN<br>TABLE. This does NOT specify which PATTERN to jump to.<br><br>In a particular pattern there are 64 lines. These lines are played in<br>order from 0 to 63. When the end of a pattern is reached, playing<br>continues with the next pattern in the pattern table, unless the current<br>pattern is the last one. If the current pattern IS the last one, check<br>the song end jump position (see section 2.4) to see if the song loops to<br>a certain position in the pattern table. Another one of the effects<br>which is possible (see section 3.4) is a pattern break. If this effect<br>is encountered, playing immediately jumps to the first line of the next<br>pattern.<br><br>// The effect $D will always skip to the next pattern, but NOT always to<br>// the first line of the next pattern (in the table). See the description<br>// of the effect for more information.<br><br><br><br>_______________________________________________________________________<br>6<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>2.6 File format tag<br>_______________________________<br><br>This is the most controversial field in the file. This field has been<br>the most 'ravaged', with many people using it in non-standard ways for<br>their own purposes. There are a few standard tags which you can find<br>here which tell you DEFINITELY what file format the file is, but there<br>are many more non-standard tags. This makes the job of deciding what<br>format a MOD is a difficult one. I will attempt to describe the known<br>formats below. If you know of one I miss, please let me know.<br><br>'M.K.', 'FLT4',<br>'M!K!', '4CHN' : 4 channels, 31 instruments<br><br>'6CHN' : 6 channels, 31 instruments<br><br>'8CHN', 'OCTA' : 8 channels, 31 instruments<br><br>// Another annotion about these tag fields: here you got some other fields.<br>// If you don't want to support them in your player, you should at least de-<br>// tect them. All these MODs have of course 31 instruments.<br>// 'FLT4', 'FLT8': Startrekker 4/8 channel file. ('FLT6' doesn't exists)<br>// 'CD81' : Falcon 8 channel MODs<br>// '2CHN' : FastTracker 2 Channel MODs<br>// 'yyCH' where yy can be 10, 12, .. 30, 32: FastTracker yy Channel MODs<br>// 'yyCH' where yy can be 11, 13, 15: TakeTracker 11, 13, 15 channel MODs<br>// 'TDZx' where x can be 1, 2 or 3: TakeTracker 1, 2, 3 channel MODs<br>// 'xCHN' where x can be 5, 7 or 9: TakeTracker 5, 7, 9 channel MODs<br>//<br>// Thanks must go to Inertia for most of these extra tag fields.<br>//<br>// All these formats, except for the FLT8 format, are *EXACTLY* the same as<br>// the standard M.K. 4 channel format; the only difference is the size of<br>// one pattern. The size of one pattern is calculated w/ the following<br>// "formula":<br>// (Nr_Of_Channels shl Cool<br>//<br>// ( Nr_Of_Channels shl 8 &lt;====&gt; Nr_Of_Channels*4*64<br>// ^ ^^<br>// | ||<br>// Note length: 4 bytes -----+ ||<br>// Lines/patttern: 64 ---------++<br>// )<br>// The tag '4CHN' doesn't exists.<br>//<br>// Some extra information about the "FLT8" -type MOD's:<br>//<br>// These MOD's have 8 channels, still the format isn't the same as the<br>// other 8 channel formats ("OCTA", "CD81", "8CHN"): instead of storing<br>// ONE 8-track pattern, it stores TWO 4-track patterns per logical pattern.<br>// i.e. The first 4 channels of the first logical pattern are stored in<br>// the first physical 4-channel pattern (size 1kb) whereas channel 5 until<br>// channel 8 of the first logical pattern are stored as the SECOND physical<br>// 4-channel pattern. Got it? Wink.<br>// If you convert all the 4 channel patterns to 8 channel patterns, do not<br>// forget to divide each pattern nr by 2 in the pattern sequence table!<br><br><br>Other information that is found in this field can be assumed to be<br>somebody's attempt at protection, or some other information that was used<br>in the 'older' file format. If you can't find any of the above<br>information, it is best to assume that it's a 4 channel file. As for how<br>many instruments there are, check the bytes at location 471 in the file.<br>If there is text there (ASCII $20-$7E (32-126)), then you can probably<br>assume it's a 31-instrument file. Otherwise, it's an older 15 instrument<br>file.<br><br>// The method described above works lovely!<br><br>2.7 Patterns<br>_______________________________<br><br>There can be any number of patterns in the file. They are stored after<br>the file header and before the sample data. There are USUALLY less than<br>64, but the maximum is not limited - if the file tag is 'M!K!' there are<br>definitely more than 64 patterns.<br><br>// The nr of patterns is limited to 128 (from 0 to 127).<br><br>The patterns are stored sequentially (i.e. the first pattern is #0, the<br>second pattern is #1, etc.). An individual pattern is made up of 64<br>'lines', stored sequentially (i.e. line 0 to line 63). Each 'line' is<br>comprised of a note for each channel. Each 'note' is made up of 4 bytes,<br>so depending on the number of channels in the file, there are 16, 24, or<br>32 bytes per line.<br><br>// there are nr_channels*4 bytes per line. That is: minimum 4, max. 128<br><br>For a four-channel file there are (4 bytes * 4 channels * 64 lines) =1024<br>bytes of information per pattern. To find out the number of patterns in<br>a particular file, calculate the length of 'header' information and add<br>to it the lengths of all samples that are mentioned in the sample<br>information blocks. Subtract this number from the file's total size and<br>divide by the number just computed (1024) to get the number of patterns<br>in the file.<br><br>// The method described above is not the best method to find out how many<br>// patterns are stored in the MOD; it will fail if the MOD contains garbage<br>// at the end of the file. A much better method is to scan through the<br>// pattern sequence table to find the highest value. Be sure to scan ALL<br>// the values (128 of them) and to increment the highest pattern nr once,<br>// because the patterns are numbered from zero...<br>// e.g. if the highest pattern nr you could find in the table is 16, there<br>// are 16+1=17 patterns.<br><br><br>_______________________________________________________________________<br>7<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>As mentioned above, each note is stored as 4 bytes. The information held<br>by these bytes has format shown below. How you display the contents of<br>the 4 bytes in a player is up to you. There is NO standard way to do<br>this.<br><br>Byte 1 Byte 2 Byte 3 Byte 4<br>--------- --------- --------- ---------<br>7654-3210 7654-3210 7654-3210 7654-3210<br>wwww XXXX xxxxxxxxx yyyy ZZZZ zzzzzzzzz<br><br>wwwwyyyy ( 8 bits) : sample number<br>XXXXxxxxxxxx (12 bits) : sample 'period'<br>ZZZZzzzzzzzz (12 bits) : effect and argument<br><br>The sample number refers to a sample specified in the sample information<br>block. Please see sections 2.2 and 2.8 for more information on the<br>samples.<br><br>The sample 'period' corresponds to a delay value on an Amiga computer.<br>Note that on an Intel processor, you have to order these 12 bits as<br>'XXXX0000xxxxxxxx' to read the value as a word. Please see sections 3.2<br><br>// NO! You should use XXXXxxxxxxxx instead of XXXX0000xxxxxxxx<br>// (I came on it whilst programming my own player.)<br><br>and 3.3 for more information on how to use these values.<br><br>The effect is an effect number and an argument for the effect. Please<br>see section 3.4 for a discussion of the effects and how to implement<br>them.<br><br><br><br>2.8 Sample data<br>_______________________________<br><br>The sample data follows all of the patterns. After you have finished<br>reading the pattern data, there will be just enough data left in the file<br>for all of the instruments specified in the sample information section.<br>The samples are stored sequentially from sample 1 to sample 31. The<br>sample's data is in 8-bit two's compliment format, so if it needs to be<br>in another format for your sound device to play it, don't forget to<br>convert (UltraSound users: you don't need to convert the data when<br>downloading).<br><br>As was mentioned in section 2.2, the first 2 bytes of the sample are used<br>by the Amiga MOD players for repeat information, and therefore are NOT<br>part of the playable data. PC users do not have to do anything with<br>these two bytes.<br><br>// Hum, I got wrong results when I skipped these two bytes. When I treated<br>// them as sample data, everything went fine... Dunno why.<br>// So I suggest you don't care about it.<br>// (especially chiptunes sounded really wrong)<br><br><br><br><br><br>_______________________________________________________________________<br>8<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>3.0 Playing the files<br>_______________________________<br><br>Section 3 deals with playing MOD files. Specifically, it deals with<br>playing them on PC hardware - hopefully a Gravis UltraSound. The<br>Ultrasound is ideal for this and many other types of sound and song<br>processing, and is exceptionally easy to program. Gravis makes available<br>an SDK (Software Development Kit) which has both C, C++, and (by the end<br>of November) Borland Pascal versions. If you are programming a MOD<br>player for other hardware, you may still be able to use this information<br>for reference.<br><br><br><br>3.1 Timing<br>_______________________________<br><br>If lines are played sequentially, then how long should the player wait<br>between successive lines? On the Amiga, the amount of time a note spends<br>on a channel before the next note is started is calculated by using some<br>complex formulas based on the PAL color carrier frequency. I will not<br>try to bore you with the details of these calculations here, and if you<br>wan't them, email me.<br><br>A song can be played at a speed ranging from 1 to 127, where the speed<br>specifies how many 'ticks' before playing the next sample. A tick is<br>supposed to happen every .02 seconds, which gives 50 ticks per second.<br><br>At the start of a line all samples specified on that line are started,<br>samples playing are modified, speed is changed, etc. Some effects<br>require that changes be made to a sample playing on a channel during the<br>course of a line. For example, the retrigger effect re-starts a sample<br>at a certain tick within a line. If the song is playing at speed 6 and<br>the effect specifies a retrigger on the 4th tick:<br><br>Time Tick<br>0.00 1 - start all samples and effects<br>0.02 2<br>0.04 3<br>0.06 4 - retrigger sample here<br>0.08 5<br>0.10 6<br>------------<br>0.00 1 - start next line<br>.<br>.<br><br>Unless a speed is specified on the first line of the first pattern, the<br>song should start playing at speed 6. Please see section 3.4, effect $F,<br>for more information on changes in speed.<br><br><br><br><br><br>_______________________________________________________________________<br>9<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>3.2 Periods<br>_______________________________<br><br>MOD players use a technique called frequency shifting to produce<br>different 'notes' of the same sample. If I play a sample at 10 KHz, it<br>will sound one octave higher if I double the frequency to 20 KHz, and one<br>octave lower if I halve the frequency to 5 KHz. Since there are 12 notes<br>per octave on a keyboard (these are called half-steps), each frequency<br>corresponds to one twelfth root of two (~1.05946) times the frequency of<br>it's predecessor (to the left). Therefore, if the C-1 frequency (the<br>note of C in octave 1) is 4144 Hz then:<br><br>Note: C-1 C#1 D-1 ... C-2 ...<br>Freq: 4144 4390 4651 ... 8288 ...<br><br>The Amiga playing routines were written to run off different interrupts<br>for different Amiga computers, based on whether the machine was a PAL or<br>NTSC machine. The 'period' values are measures which are used in<br>calculating how much data to send to each of the 4 Amiga channels per<br>second (thereby specifying the frequency or pitch of the output).<br><br>For PC programmers, you don't have to worry about this that much. The<br>thing to remember is that a 'magic number' divided by twice the period<br>value will give the rate (frequency) to play the sample at. Here are the<br>magic numbers and the corresponding formulae. I don't know which number<br>is better to use - It doesn't make a huge difference.<br><br>PAL Value NTSC Value<br>=========== ============<br><br>7093789.2 7159090.5<br>SampleRate = -------------- SampleRate = --------------<br>Period * 2 Period * 2<br><br>// On a GUS, you need to divide the above calculated frequency by a cer-<br>// tain "frequency divisor". The value of this divisor depends on the<br>// number of channels you allocated on the GUS. Here you have the official<br>// divisors:<br><br>// freq_divisors[19] = (<br>// 44.100, frequency divisor using 14 active voices (or less)<br>// 41.160, frequency divisor using 15 active voices<br>// 38.587, frequency divisor using 16 active voices<br>// 36.317, frequency divisor using 17 active voices<br>// 34.300, frequency divisor using 18 active voices<br>// 32.494, frequency divisor using 19 active voices<br>// 30.870, frequency divisor using 20 active voices<br>// 29.400, frequency divisor using 21 active voices<br>// 28.063, frequency divisor using 22 active voices<br>// 26.843, frequency divisor using 23 active voices<br>// 25.725, frequency divisor using 24 active voices<br>// 24.696, frequency divisor using 25 active voices<br>// 23.746, frequency divisor using 26 active voices<br>// 22.866, frequency divisor using 27 active voices<br>// 22.050, frequency divisor using 28 active voices<br>// 21.289, frequency divisor using 29 active voices<br>// 20.580, frequency divisor using 30 active voices<br>// 19.916, frequency divisor using 31 active voices<br>// 19.293 frequency divisor using 32 active voices<br>// );<br>//<br>// If you multiply these values by 1000 (e.g. 44100 instead of 44.100),<br>// you get the mixing rate of the GUS. As you see, the quality drops badly<br>// using 32 active voices...<br>//<br>// (BTW: Don't try to allocate less than 14 voices.)<br>// Thus the frequency you should pass to the GUS is calculated as follows:<br>//<br>// gus_freq = (7093789.2 / (2 * period)) / freq_divisors[nr_of_voices-14];<br><br>To determine what frequency to play a sample at, look up the specified<br>period value in a table based on the finetune setting (see section 3.3<br>for more information on fine-tuning). If the period is 0, then the<br>previous period used on that channel is used.<br><br>As an example, let's look at the period table for finetune 0. The notes<br>that are possible in each octave are:<br><br>C C# D D# E F F# G G# A A# B<br>Octave 1: 856, 808, 762, 720, 678, 640, 604, 570, 538, 508, 480, 453<br>Octave 2: 428, 404, 381, 360, 339, 320, 302, 285, 269, 254, 240, 226<br>Octave 3: 214, 202, 190, 180, 170, 160, 151, 143, 135, 127, 120, 113<br><br>Octave 0:1712,1616,1525,1440,1357,1281,1209,1141,1077,1017, 961, 907<br>Octave 4: 107, 101, 95, 90, 85, 80, 76, 71, 67, 64, 60, 57<br><br>If I was requested to play a sample at period 302, I would scan through<br>the period table until I hit that value. At that point, I know that the<br>note is called 'F#2', F-sharp in octave 2. I calculate the playback<br>frequency by doing the calculations on the next page.<br><br>_______________________________________________________________________<br>10<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>PAL Value NTSC Value<br>=========== ============<br><br>7093789.2 7159090.5<br>----------- = 11745 Hz ----------- = 11853 Hz<br>302 * 2 302 * 2<br><br>There are normally only three octaves (1 to 3) used in playing songs.<br>Octaves 0 and 4 are NOT standard. Some songs may use the values though,<br>and it's nice if your player can handle them. Full period tables for all<br>finetunes are listed in section 4.<br><br>If you wish to sample sounds to include in MOD files, remember that the<br>data must be stored in 8-bit 2's complement format. There is NO standard<br>sample rate when creating the samples. Most often the samples are done<br>on the rate corresponding to period C-3 (around 16.5 KHz), and sometimes<br>drums are sampled at A-3 (around 28 KHz).<br><br>If sample number is specified on a channel (sample #0), then the last<br><br>// (SampleNr is not zero)<br><br>sample used on that channel will be remembered if new notes come along.<br>Only one sample may play on a channel at a time, so playing a new sample<br>will cancel an old one - even if there is no actual sample data for the<br>new sample (a 'silent' sample). However, if you are constructing a MOD<br>file of your own and you use a "silent" sample it is polite to set its<br>default volume to 0.<br><br>If you have some memory (around 2k or so) to spare, you could make up a<br>table of words indexed by period value. The value of the word at the<br>index of a period is the corresponding frequency that the sample should<br>be played at. This saves you from having to calculate the frequencies<br>over and over again. If you still don't get what I'm talking about here:<br><br>I have a array of words, one for each period from the lowest (around 50)<br><br>// Normal Maximum Period = 907<br>// Normal Minimum Period = 108<br>// Extended Maximum Period = 1814<br>// Extended Minimum Period = 54<br>//<br>// Extended: when using octaves 0 &amp; 4<br>// See the V-E-R-Y end of this file for a complete list of Period values,<br>// EXTENDED octaves included.<br>//<br>// If you want VERY extended octaves, you'll have to use different<br>// formulas.<br><br>to the highest (around 1712). I precalculate the contents of this table<br>so that at index 302 (the period for note F#2), there is the value 11853,<br>the frequency to use to get the note F#2. Therefore, when my player runs<br>accross this value and needs to know what frequency to play the sample<br>at, I simply look up the value in the table directly - no calculations.<br>If you still don't get what I'm talking about, you're screwed.<br><br><br>3.3 Fine-Tuning<br>_______________________________<br><br>Fine-tuning is a minor adjustment on how an instrument sounds. This is<br>implemented by small changes in the period values. The finetune value<br>for a sample specifies the adjustment on the period values for that<br>instrument. A fine-tune can also be specified for a specific instrument<br>by an effect, at which point the value in the effect will override the<br>one in the sample information block.<br><br><br><br><br>_______________________________________________________________________<br>11<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>The value in the sample information block is a signed nibble (4 bits,<br>signed 2's complement). Therefore, the values that can be found have the<br>following corresponding finetunes:<br><br>Value: 0 1 2 3 4 5 6 7 8 9 A B C D E F<br>Finetune: 0 +1 +2 +3 +4 +5 +6 +7 -8 -7 -6 -5 -4 -3 -2 -1<br><br>Section 4.0 specifies period values for all finetunes for octaves 1 to 3.<br>You could use these values in creating your array of frequency words (see<br>the end of section 3.2).<br><br><br><br>3.4 Effects<br>_______________________________<br><br>As was mentioned in section 2.7, the 4 bytes for a note have the<br>following format:<br><br>Byte 1 Byte 2 Byte 3 Byte 4<br>--------- --------- --------- ---------<br>7654-3210 7654-3210 7654-3210 7654-3210<br>wwww XXXX xxxxxxxxx yyyy ZZZZ zzzzzzzzz<br><br>wwwwyyyy ( 8 bits) : sample number<br>XXXXxxxxxxxx (12 bits) : sample 'period'<br>ZZZZzzzzzzzz (12 bits) : effect and argument<br><br>Again, how you display this information in a player is up to you. I have<br>seen a zillion different formats. I have described what the sample<br>number and period refer to. Here, we will look at the effects that are<br>possible.<br><br><br>At this point in time, the Amiga Protracker MOD player (version 2.3A/<br>3.01) has 28 effects. Some of these effects are redundant or not<br>possible on some PC sound cards. I will describe the effects and how<br>they are implemented on the Amiga. PC programmers will have to adapt the<br>effects they wish to implement on their own. All numbers are stated in<br>hexadecimal.<br><br>For the discussion of the effects, we will look at the 'effect and<br>argument' part of the 4 bytes in the following way:<br><br>Bit number: $CBA987654321<br>Mentioned above as: ZZZZzzzzzzzz<br>We will use: ZZZZxxxxyyyy<br><br>There are two types of effects, standard and extended. All effects use<br>the ZZZZ portion to declare the effect number. Standard effects use the<br>xxxx and yyyy portions as one or two arguments, either as an 8-bit value<br>when taken together in the form xxxxyyyy or as 2 nibbles xxxx and yyyy.<br>Extended effects have the ZZZZ effect number $E. They use the xxxx<br>portion to declare the extended effect number and the only the yyyy<br>portion as an argument.<br><br>_______________________________________________________________________<br>12<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>Here are the possible standard effects:<br>-----------------------------------------------------------------------<br># Effect name Uses Arguments as<br>-----------------------------------------------------------------------<br>0 Arpeggio xxxx yyyy<br>1 Slide Up xxxxyyyy<br>2 Slide Down xxxxyyyy<br>3 Tone Portamento xxxxyyyy<br>4 Vibrato xxxx yyyy<br>5 Tone Portamento + Volume Slide xxxx yyyy<br>6 Vibrato + Volume Slide xxxx yyyy<br>7 Tremolo xxxx yyyy<br>8 Set Panning Position xxxxyyyy<br>9 Set SampleOffset xxxxyyyy<br>A VolumeSlide xxxx yyyy<br>B Position Jump xxxxyyyy<br>C Set Volume xxxxyyyy<br>D Pattern Break xxxxyyyy<br>E *Extended Effects see below<br>F Set Speed xxxxyyyy<br><br>// The "SET SPEED" command is also used to set extended speed: BPM.<br><br>And here are the possible extended effects:<br>---------------------------------<br># Effect name<br>---------------------------------<br>E0 Set Filter<br>E1 FineSlide Up<br>E2 FineSlide Down<br>E3 Glissando Control<br>E4 Set Vibrato Waveform<br>E5 Set FineTune<br>E6 Set/Jump to Loop<br>E7 Set Tremolo Waveform<br>E8 NOT USED<br>E9 Retrig Note<br>EA Fine VolumeSlide Up<br>EB Fine VolumeSlide Down<br>EC NoteCut<br>ED NoteDelay<br>EE PatternDelay<br>EF Invert Loop<br><br><br>A description of each effect and how it is implemented is given on the<br>following pages. Once again, all values are given in hexadecimal unless<br>otherwise stated.<br><br><br><br><br><br><br><br><br>_______________________________________________________________________<br>13<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>-----------------------------------------------------------------------<br>0: Arpeggio<br>-----------------------------------------------------------------------<br>If a note as an effect number of 0, it is only an arpeggio if there is at<br>least one non-zero argument. When there is at least one valid argument,<br>this effect means to play the note specified, then the note+xxxx half-<br>steps, then the note+yyyy half-steps, and then return to the original<br>note. These changes are evenly spaced within the time for a line to be<br>played at the current speed.<br><br>This effect is usually used to simulate chords (where a major chord is<br>the note+4 half steps and the note+7 half-steps). This does not work<br>very well on most samples. This can also be used to produce a heavy<br>vibrato. Here is an example of this effect:<br><br>Note C-3, xxxx=4, yyyy=7<br><br>this will attempt to produce a C-major chord. At the beginning of a line<br>the C-3 note is played, then at 1/3 of the way through the line the note<br>is retriggered at E-3, 2/3 of the way through it is retriggered at G-3,<br>and at the beginning of the next line (if there are no new notes to be<br>played on the channel), it is retriggered at C-3 again.<br><br>This presents a minor problem for timing, since you have to keep track of<br>the arpeggio during the course of playing a line. What you could do is<br>use a timer differently, or set up another timer that independently<br>tracks the timing of the arpeggio.<br><br>// There is a little error in the above information. So here's how you<br>// should implement Arpeggio on the PC:<br>// - at tick nr 0 (the tick the effect is encountered whilst updating the<br>// note info ( = whilst playing another line)): set a counter to 0, and<br>// keep the values xxxx &amp; yyyy handy.<br>// =&gt; play the actual note.<br>// - at tick nr 1 (the first tick that occurs after updating a line:<br>// STILL PLAY THE ACTUAL NOTE - AND THEN update ( increment) the counter.<br>// - the following ticks:<br>//<br>// if (counter mod 3) = 0 then play actual note<br>// if (counter mod 3) = 1 then play actual note + xxxx<br>// if (counter mod 3) = 2 then play actual note + yyyy<br>// increment counter<br>// end of effect.<br>//<br>// GOT IT?<br>// As far as I know, PC-players don't care about the "timing problem"<br>// mentioned above.<br><br><br><br>-----------------------------------------------------------------------<br>1: Slide up (Portamento Up)<br>-----------------------------------------------------------------------<br>This effect will slide up the frequency (decrease the period) of the<br>sample being played on the channel by xxxxyyyy notes for every tick that<br>occurs during the line. You usually cannot slide past note B-3 unless<br>you have implemented octave 4 (NON-STANDARD!). The number of ticks that<br>occur per line is set with effect $F, the set speed command. Since the<br>slide rate depends on the speed, be careful if you set are composing a<br>MOD when you change the speed. An example of this effect is:<br><br>Note C-3, xxxxyyyy = 2, playing at speed 3.<br><br>At the beginning of the line the sample is started at period C-3. At the<br>first tick, the period is decremented by 2 (the frequency is increased).<br>At the second tick, the period is again decremented by 2. At the<br>beginning of the next line, if there is not a new note to be played the<br>period is again decremented by 2.<br><br><br><br><br><br><br><br><br>_______________________________________________________________________<br>14<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>-----------------------------------------------------------------------<br>2: Slide down (Portamento Down)<br>-----------------------------------------------------------------------<br>This effect will slide down the frequency (increase the period) of the<br>sample being played on the channel by xxxxyyyy tones for every tick that<br>occurs during the line. You usually cannot slide below note C-1 unless<br>you have implemented octave 0 (NON-STANDARD!). The number of ticks that<br>occur per line is set with effect $F, the set speed command. Since the<br>slide rate depends on the speed, be careful if you set are composing a<br>MOD when you change the speed. An example of this effect is:<br><br>Note C-3, xxxxyyyy = 2, playing at speed 3.<br><br>At the beginning of the line the sample is started at period C-3. At the<br>first tick, the period is incremented by 2 (the frequency is decreased).<br>At the second tick, the period is again incremented by 2. At the<br>beginning of the next line, if there is not a new note to be played the<br>period is again incremented by 2.<br><br><br>-----------------------------------------------------------------------<br>3: Slide to note<br>-----------------------------------------------------------------------<br>This effect will slide a note being played on a channel to a specified<br>note. The parameter xxxxyyyy will states the speed at which a slide will<br>occur. For each tick that occurs during the line, the period currently<br>being played is altered by the number of notes specified. The number of<br>ticks that occur per line is set with effect $F, the set speed command.<br>Since the slide rate depends on the speed, be careful if you set are<br>composing a MOD when you change the speed. An example of this effect is:<br><br>Slide to note C-2, xxxxyyyy = 2, playing at speed 3.<br><br>At the beginning of the line the current frequency for the sample is<br>altered to be 2 notes closer to C-2. At the first tick, the same<br>alteration occurs, changing the period to form a note even closer to C-2.<br>The same occurs for each tick after that. This effect continues until<br>another effect is started or the specified frequency is reached.<br><br>If a slide rate is not specified (xxxxyyyy is zero) then the last slide<br>rate used on the channel is used again.<br><br><br>-----------------------------------------------------------------------<br>4: Vibrato<br>-----------------------------------------------------------------------<br>Vibrato means to "oscillate the sample pitch using a particular waveform<br>with amplitude yyyy notes, such that (xxxx * speed)/64 full oscillations<br>occur in the line". The waveform to use in vibrating is set using effect<br>E4 (see below). By placing vibrato effects on consecutive lines, the<br>vibrato effect can be sustained for any length of time. If either xxxx<br>or yyyy are 0, then values from the most recent prior vibrato will be<br>used.<br><br><br>_______________________________________________________________________<br>15<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>An example is: Note C-3, with xxxx=8 and yyyy=1 when speed=6. This will<br>play tones around C-3, vibrating through D-3 and B-2 to C-3 again<br>(amplitude - yyyy - is 1), with (8*6)/64 = 3/4 of a full oscillation per<br>line. Please see effect E4 for the waveform to use for vibrating.<br><br><br>-----------------------------------------------------------------------<br>5: Continue effect 3:'Slide to note', but also do Volume slide<br>-----------------------------------------------------------------------<br>This effect will change the volume of a channel while a tone portamento<br>(effect 3) is taking place. The values xxxx or yyyy specify the speed of<br>the volume change. If xxxx is nonzero the volume is increased, and if<br>yyyy is nonzero the volume is decreased. It is illegal for both xxxx and<br>yyyy to be non-zero. You cannot slide past 64 or below 0.<br><br>As an example, take the xxxx to be set to 3. This means that at the<br>beginning of the line, the current volume of the channel is increased by<br>3. The volume is increased again for every tick on this line and the<br>lines following (until there is a new effect). Once again, the volume<br>cannot slide up past 64.<br><br><br>-----------------------------------------------------------------------<br>6: Continue effect 4:'Vibrato', but also do Volume slide<br>-----------------------------------------------------------------------<br>This effect will change the volume of a channel while a vibrato (effect<br>4) is taking place. The values xxxx or yyyy specify the speed of the<br>volume change. If xxxx is nonzero the volume is increased, and if yyyy<br>is nonzero the volume is decreased. It is illegal for both xxxx and yyyy<br>to be non-zero. You cannot slide past 64 or below 0.<br><br>As an example, take the yyyy to be set to 2. This means that at the<br>beginning of the line, the current volume of the channel is decreased by<br>2. The volume is decreased again for every tick on this line and the<br>lines following (until there is a new effect). Once again, the volume<br>cannot slide down below 0.<br><br><br>-----------------------------------------------------------------------<br>7: Tremolo<br>-----------------------------------------------------------------------<br>Temolo means to "oscillate the sample volume using a particular waveform<br>with amplitude yyyy*(speed-1), such that (xxxx*speed)/64 full<br>oscillations occur in the line". The waveform to use to oscillate is set<br>using the effect E7 (see below). By placing tremolo effects on<br>consecutive lines, the tremolo effect can be sustained for any length of<br>time. If either xxxx or yyyy are 0, then values from the most recent<br>prior tremolo will be used.<br><br>The usage of this effect is similar to that of effect 4:Vibrato.<br><br><br>-----------------------------------------------------------------------<br>8: This effect is not used.<br><br>// Command 8: Set FINE Panning.<br>// Even if the AMIGA PROTracker does not support it, this effect is used<br>// by modern MOD's and supported by nearly all modern PC MOD player rou-<br>// tines. Here it is:<br>//<br>// xxxxyyyy = panning position. (0=Most left, 255=most right.)<br><br><br>-----------------------------------------------------------------------<br>_______________________________________________________________________<br>16<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>-----------------------------------------------------------------------<br>9: Set sample offset<br>-----------------------------------------------------------------------<br>This effect allows you to start a sample from a specified position rather<br>than the normal beginning position. Multiply the value xxxxyyyy by 512<br><br>// !! N O !! Don't multiply by 512. You should multiply by 256 ($100).<br><br>to get the position in bytes from the beginning of the sample where<br>playback should start. If no sample is specified with the effect, but<br>one is currently playing on the channel, then the sample currently<br>playing is retriggered to offset specified.<br><br>An example is instrument 2 being played at note C-3, with xxxxyyyy=$23.<br>This would make playback of the sample start at offset $23*$200 = $4600.<br><br>// $23*$100 = $2300 ...<br><br>This effect gives a rough range to play the sample from.<br><br>// WARNING!!! if the effect argument is 0, the effect should be IGNORED!<br><br>// !! Note that if the effect is out of range (e.g. if it tries to jump<br>// beyond the end of the sample) NO NOTE WILL BE PLAYED! Some players<br>// even stop playback!<br><br><br>-----------------------------------------------------------------------<br>A: Volume slide<br>-----------------------------------------------------------------------<br>This effect will change the volume of all samples being played on a<br>channel. The values xxxx or yyyy specify the speed of the volume change.<br>If xxxx is nonzero the volume is increased, and if yyyy is nonzero the<br>volume is decreased. It is illegal for both xxxx and yyyy to be non-<br>zero. You cannot slide past 64 or below 0.<br><br>As an example, take the yyyy to be set to 3. This means that at the<br>beginning of the line, the current volume of the channel is decreased by<br>3. The volume is decreased by 3 again for every tick on this line and<br>the lines following (until there is a new effect). Once again, the<br>volume cannot slide down below 0.<br><br>// When performing a vol. slide, you have to start decreasing the volume<br>// at the tick that follows the line that was just played.<br>// Same remark for the portamento effects ($1, $2, $3 and $5)<br><br>-----------------------------------------------------------------------<br>B: Position Jump<br>-----------------------------------------------------------------------<br>This effect xxxxyyyy parameter specifies a position in the pattern table<br>that playback should jump to after this line. Legal values are in the<br>range of the number of patters that are supposed to be in the song (see<br>section 2.3). Values outside this range should be ignored.<br><br>// NO! Legal values are supposed to be less or equal than the length of<br>// the pattern sequence (the length of the song in patterns). If the value<br>// is higher than 127, it's corrupt. If it's higher than the songlength,<br>// you may or may not restart the MOD.<br><br><br>-----------------------------------------------------------------------<br>C: Set volume<br>-----------------------------------------------------------------------<br>Effect C will set the volume on a channel to the setting specified by the<br>xxxxyyyy value. Legal volumes are in the range of 0 to 64. An attempt<br>to set the volume to a higher value than 64 will just set it to 64.<br><br>I don't think we really need an example for this effect.<br><br><br><br><br><br><br><br>_______________________________________________________________________<br>17<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>-----------------------------------------------------------------------<br>D: Pattern Break<br>-----------------------------------------------------------------------<br>This effect is equivalent to a position jump to the next pattern in the<br>pattern table, with the arguments xxxx*10+yyyy specifying the line within<br>that pattern to start playing at. Note that this is NOT xxxx*16+yyyy.<br><br>// WARNING! This is !NASTY! You _DO_ need to recalculate the value!!<br><br>For example, the effect with arguments xxxx=0, yyyy=0 would simply jump<br>to the first line in the next pattern in the pattern table after playing<br>the current line. With arguments xxxx=1 and yyyy=6 would jump to the<br>16th line of the next pattern in the pattern table after playing the<br>current line.<br><br><br>-----------------------------------------------------------------------<br>E0: Set filter on/off<br>-----------------------------------------------------------------------<br>This sets a hardware sound filter to ON (if yyyy is 0) or OFF (if xxxx is<br>nonzero). If your sound device has built-in filters, you should ignore<br>this effect command. This effect is primarily used on Amiga 500 and 2000<br>computers to dick around with the hardware filter.<br><br><br>-----------------------------------------------------------------------<br>E1: Fineslide up<br>-----------------------------------------------------------------------<br>This effect functions just like effect 1, except that the frequency of<br>the sample is only modified once. At the beginning of a line, whatever<br>frequency is being played on a channel is incremented by yyyy notes.<br>This effect does NOT continue on the lines following. You cannot slide<br>the frequency above the note B-3 (unless you implement octave 4 : NON-<br>STANDARD!).<br><br>An example here would be effect E, xxxx=1 (the extended effect number),<br>yyyy=3. This would slide the current frequency up three notes at the<br>beginning of the line.<br><br><br>-----------------------------------------------------------------------<br>E2: Fineslide down<br>-----------------------------------------------------------------------<br>This effect functions just like effect 2, except that the frequency of<br>the sample is only modified once. At the beginning of a line, whatever<br>frequency is being played on a channel is decremented by yyyy notes.<br>This effect does NOT continue on the lines following. You cannot slide<br>the frequency below the note C-1 (unless you implement octave 0 : NON-<br>STANDARD!).<br><br>An example here would be effect E, xxxx=1 (the extended effect number),<br>yyyy=2. This would slide the current frequency down two notes at the<br>beginning of the line.<br><br><br><br><br>_______________________________________________________________________<br>18<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>-----------------------------------------------------------------------<br>E3: Set glissando on/off<br>-----------------------------------------------------------------------<br>The argument yyyy to this effect specifies whether the glissando effect<br>is ON (yyyy is 1) or OFF (yyyy is 0). If glissando is on, then the<br>'Slide to note' will slide a half note at a time. Otherwise, it will<br>perform the default smooth slide.<br><br><br>-----------------------------------------------------------------------<br>E4: Set vibrato waveform<br>-----------------------------------------------------------------------<br>This effect means to set the waveform appearance for succeeding 'vibrato'<br>effects. There are currently four possible appearances for the wave,<br>each with a possible 'retrigger'. Two cycles are shown below for each<br>type of waveform:<br>yyyy<br>Waveform Name Retriggered No Retrigger<br>---------- ------------------- ----------- ------------<br>/\ /\ Sine (default) 0 4<br>\/ \/<br><br>|\ |\ Ramp down 1 5<br>\| \|<br><br>,-, ,-, Square 2 6<br>'-' '-'<br><br>????????? Random 3 7<br><br>A "retriggered" waveform will be reset to the start of a cycle at the<br>beginning of each new note. If a wave is selected "without retrigger",<br>the previous waveform will be continued. Waveforms are usually<br>retriggered.<br><br><br>-----------------------------------------------------------------------<br>E5: Set finetune value<br>-----------------------------------------------------------------------<br>This effect command sets the finetune value for the current instrument to<br>the signed nibble value yyyy. This value overrides the value found in<br>the sample information block at the beginning of the MOD file. The new<br>finetune remains until changed by another E5 effect.<br><br>Value: 7 6 5 4 3 2 1 0 F E D C B A 9 8<br>Finetune to set: +7 +6 +5 +4 +3 +2 +1 0 -1 -2 -3 -4 -5 -6 -7 -8<br><br>This effect is implemented by storing period values for all possible<br>finetunes, and simply switching to a different table of periods when this<br>effect is encountered. See section 3.3 for more information. Section 4<br>lists the period tables for finetunes for octaves 1 to 3.<br><br><br><br><br>_______________________________________________________________________<br>19<br><br><br><br>MODFIL10.TXT THUNDER (kurtt@...)<br>________________________________________________________________________<br><br>-----------------------------------------------------------------------<br>E6: Loop pattern<br>-----------------------------------------------------------------------<br>This effect allows a section of a pattern to be 'looped', or played<br>through, a certain number of times in succession. If the effect argument<br>yyyy is zero, the effect specifies the loop's start point. Otherwise, it<br>specifies the number of times to play this line and the preceeding lines<br>from the start point. If no start point was specified in the current<br>pattern being played, the loop start defaults to the first line in the<br>pattern. Therefore, you cannot loop through multiple patterns.<br><br>An example:<br><br>On line 3, the effect E6 is encountered, with yyyy=0. This specifies<br>that line 3 is the beginning of a loop in this pattern.<br>Down on line 52, the effect E6 is encountered again, with yyyy=2. This<br>means to jump back and play the lines from line 3 to line 52 again twice<br>more before continuing with the rest of the pattern.<br><br><br>-----------------------------------------------------------------------<br>E7: Set tremolo waveform<br>-----------------------------------------------------------------------<br>Line command E4, this sets the waveform appearance for succeeding<br>'tremolo' (volume) effects. There are currently four possible<br>appearances for the wave, each with a possible 'retrigger'. Two cycles<br>are shown below for each type of waveform:<br>yyyy <br></div><br><br>And a good link. ;)<br>ftp://ftp.modland.com/pub/documents/format_documentation/ <br><br></td></tr></table><br>
<a name="713876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Abrexxes, very usefull and much appreciated!<br><br>fixed a couple of bugs with it already ;D <br><br></td></tr></table><br>
<a name="714811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Version 1.14 is now available...<br><br>Bug fixes for arppegiation and finetune settings, and it now uses a double precision mixer, which has made a BIG difference in sound quality. <br><br></td></tr></table><br>
<a name="714829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abrexxes</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> What a difference! Good job! <br><br></td></tr></table><br>
<a name="715301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent fix :) <br><br></td></tr></table><br>
<a name="715420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks OBD<br><br>another update (1.15), now with an anti click routine ;) <br><br></td></tr></table><br>
<a name="715534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kurator</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> WOW - what an improvement :)<br><br>*praise* <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
