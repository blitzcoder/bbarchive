<!DOCTYPE html><html lang="en" ><head ><title >Improved TImageFonts</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Improved TImageFonts</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=110" >BlitzMax Module Tweaks</a>/<a href="#bottom" >Improved TImageFonts</a><br><br>
<a name="545997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been having issues getting the Image Fonts to look nice at any scale... I had a root through the code and found the cause in imagefont.bmx in the Max2d.mod<br><br>First thing I noticed was Line 76 :<br><pre class=code>
glyph._image=TImage.Load( pixmap.Copy(),0,0,0,_imageFlags )
</pre><br><br>Which according to the function it is calling it should be changed to:<br><br><pre class=code>
glyph._image=TImage.Load( pixmap.Copy(),_imageFlags,0,0,0 )
</pre><br><br>I also noticed that there was no MIPMAPPEDIMAGE applied when using the SMOOTHFONT flag, so I changed Line 111 to :<br><pre class=code>
If style &amp; SMOOTHFONT font._imageFlags=FILTEREDIMAGE|MIPMAPPEDIMAGE
</pre><br>Oh and make sure you've got BlendMode(ALPHABLEND) set.<br><br>Now my fonts look real sexy :D <br><br></td></tr></table><br>
<a name="546134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Well spotted - thanks! <br><br></td></tr></table><br>
<a name="546236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this something that we should Sync Mods for? <br><br></td></tr></table><br>
<a name="549320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rambo_Bill</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> [edited for clarity] -- Should not post when drinking :P <br><br></td></tr></table><br>
<a name="549364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice :) <br><br></td></tr></table><br>
<a name="550714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one m8. <br><br></td></tr></table><br>
<a name="560281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Najdorf</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, is this bug fix for version 1.10? I still have 1.09 and imagefont.bmx looks different (though it still does not work well).<br><br>Is this fixed in the latest modules? <br><br></td></tr></table><br>
<a name="561349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Avon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great job Tim!  I would also like to know if this has been fixed for the 1.10 release? <br><br></td></tr></table><br>
<a name="563685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Indiepath, ive applied your fix and then run the bmk makemods command, however im still seeing blurring and lines being missed off with the setimagefont and drawtext commands. <br><br>Can someone else try the following code, you need to move the text around until you get the x or y co-ordinate on a non-whole number (e.g. x=320.5). When this happens the text goes blurry and a line or two seems to get sliced from the side or top of the text:<br><br><pre class=code>
SetGraphicsDriver GLMax2DDriver ()

bglSetSwapInterval(1)

Graphics(800,600,32)

arial_font = LoadImageFont("C:\WINDOWS\FONTS\ARIAL.TTF", 20, SMOOTHFONT)
SetImageFont(arial_font)

SetBlend(ALPHABLEND)

Local x:Float = GraphicsWidth() / 2
Local y:Float = GraphicsHeight() / 2

While Not KeyHit(KEY_ESCAPE)
  If KeyDown(KEY_UP)
    y :- 0.5
  Else If KeyDown(KEY_DOWN)
    y :+ 0.5
  End If

  If KeyDown(KEY_LEFT)
    x :- 0.5
  Else If KeyDown(KEY_RIGHT)
    x :+ 0.5
  End If

  Cls
  DrawText("SCROLLY TEXT....", x, y) 
  DrawText("More Text", x, y + 15)

  DrawText("X = " + x + "Y = " + y, 10, 10)

  Flip()
Wend
</pre> <br><br></td></tr></table><br>
<a name="563718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get the line clipping too. <br>I have not applied the fix, but have synced modules. <br><br></td></tr></table><br>
<a name="563965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scott Shaver</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> The text in the above example seems fine on my windows machine. Have these changes been included in the sync mods stuff? My install is up to date with the latest. <br><br></td></tr></table><br>
<a name="591670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Najdorf</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nah, this quite essential bug fix still hasn't been updated. <br><br></td></tr></table><br>
<a name="592318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> yey it's in the new update. <br><br></td></tr></table><br>
<a name="592473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is your 2d texture thing used for lighting in as well? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
