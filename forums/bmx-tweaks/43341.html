<!DOCTYPE html><html lang="en" ><head ><title >AppFuncs Module</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >AppFuncs Module</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=110" >BlitzMax Module Tweaks</a>/<a href="#bottom" >AppFuncs Module</a><br><br>
<a name="484282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I couldn't think of a better name for it but anyway, this module currently only has three functions: <b>ConsoleWaitKey</b>,<b>SetAppTitle</b> and <b>RenameFile</b>.<br><br>create the path mod/Pert.mod/AppFuncs.mod<br>create AppFuncs.bmx in mod/Pert.mod/AppFuncs.mod:<br><br><br>&lt;See last post for code&gt;<br><br><br>Example usage:<br><pre class=code>
Import Pert.AppFuncs

Graphics 640,480,0

SetAppTitle("This is a test")

While Not KeyDown(KEY_ESCAPE)
Flip
Cls
Wend

End
</pre><br><pre class=code>
Import Pert.AppFuncs
If not RenameFile("c:\oldfile.txt", "c:\newfile.txt") then
print "Cannot rename file!"
endif
</pre> <br><br></td></tr></table><br>
<a name="484466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >coffeedotbean</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey pert. =)<br><br>hum.. got error "Compile Error: Can't find interface for modual 'pert.appfuncs'"<br><br>I've sync'd to 1.03 - Win32.<br><br>and run the apptitle demo you put above.<br><br>I created the folders as described and then made a file and called it appfuncs.bmx in the appfuncs.mod folder and copid the block of text into the file.. saved it and then tryed to run yor appitle demo... got that error. <br><br></td></tr></table><br>
<a name="484542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, try <a href="http://www.perturbatio.com/files/pert.mod.zip" target="_blank">this</a> instead.<br><br>You should be able to extract it inside your mod folder and it will create the directory structure for you.<br><br>If using winzip, just right click on it and choose either Extract To.. or Winzip-&gt;Extract To... and direct winzip to the mod folder.<br><br>(I'm using 1.03 as well).<br><br>*EDIT*<br>The error you are getting suggests either a typo in the Import command or a typo with the directory structure or filename.<br><br>It is not case sensitive so no need to worry about that. <br><br></td></tr></table><br>
<a name="484886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >coffeedotbean</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, the new version might work but I cant get BMAX to stop looking for your module.<br><br>I get this error...<br><pre class=code>
Building ff
Compiling:ff.bmx
flat assembler  version 1.51
3 passes, 1860 bytes.
Linking:ff.exe
G:\BlitzMaxBeta101\bin\ld.exe: cannot find G:/BlitzMaxBeta101/mod/pub.mod/pert.mod/pert.a

Process complete
</pre><br><br>for this code....<br><br><pre class=code>
Graphics 640,480,0
While Not KeyDown(KEy_Escape)
Print "hello"
Wend
End
</pre><br><br>probly nowt to do with your modual but how do i stop BMAX from looking for a modual that no longer is there??? <br><br></td></tr></table><br>
<a name="484890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Presumably rebuilding your modules will remove any reference to it.<br><br>I don't know what the problem is, but I've had no trouble with the module at all. <br><br></td></tr></table><br>
<a name="484912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >coffeedotbean</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doh! I forgot a created a folder in the pub folder.. emoved it and works now. <br><br></td></tr></table><br>
<a name="484921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good :) <br><br></td></tr></table><br>
<a name="484933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you wanted to put it in Pub, you should be able to but you need to change the Import command to reference Pub.Pert.AppFuncs <br><br></td></tr></table><br>
<a name="492139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added ConsoleWaitKey() to wait for any keypress when in console mode (does not work in graphics mode).<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Module Pert.AppFuncs
ModuleInfo "Module: Perturbatio's AppFuncs Mod"
ModuleInfo "Version: 1.00"
ModuleInfo "Author: Kris Kelly (Perturbatio)"
ModuleInfo "License: Public Domain"
Import Pub.stdc
Import BRL.FileSystem
Import BRL.Max2D

Extern 
	Function getch() = "getch"
EndExtern

?Win32
Extern "Win32"
  Function _SetWindowText(hwnd:Int, lpString:Byte Ptr) = "SetWindowTextA@8"
  Function _GetActiveWindow() = "GetActiveWindow@0"
  'Function _MoveFileEx(SrcFile:Byte Ptr, DestFile:Byte Ptr, Flags:Int) = "MoveFileExA@12"
End Extern
?MacOS
Rem
'Presumably OSX uses the same method as linux
XStoreName(display, w, window_name)
      Display *display;
      Window w;
      char *window_name
EndRem
?Linux
Rem
XStoreName(display, w, window_name)
      Display *display;
      Window w;
      char *window_name
EndRem
?

Rem
bbdoc: Wait for a KeyPress in console mode
about: Will only work in console mode
End Rem
Function ConsoleWaitKey()
	'if we are in console mode (if the graphics width is 0).
	If GraphicsWidth() &gt; 0 Then 
		RuntimeError("ConsoleWaitKey() can only be used in console mode!")
	Else
		getch()
	EndIf

End Function

Rem
bbdoc: Change the title of the current window
about: The function will set the current window's title to the supplied string value
End Rem
Function SetAppTitle(title:String)
?Win32
	Local _CurrentWinHandle = _GetActiveWindow()
	_SetWindowText(_CurrentWinHandle, title.toCString())
?MacOS

?Linux

?
End Function


Rem
bbdoc: Rename a file
returns: 0 if unsuccessful, 1 if successful
about: Renames the SrcFile to the DestFile
End Rem
Function RenameFile:Int(SrcFile:String, DestFile:String, Overwrite=False)
If SrcFile &lt;&gt; "" And DestFile &lt;&gt; "" Then
	If FileType(SrcFile) &gt;0 Then
		If FileType(DestFile) &gt; 0 And Not Overwrite Then Return 0
		rename_(SrcFile, DestFile)
		Return 1
	EndIf

EndIf
Return 0
End Function
</textarea> <br><br></td></tr></table><br>
<a name="500806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added Mac SetAppTitle capability (courtesy of LeisureSuitLurie), untested.<br><br>appfuncs.bmx:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Module Pert.AppFuncs
ModuleInfo "Module: Perturbatio's AppFuncs Mod"
ModuleInfo "Version: 1.00"
ModuleInfo "Author: Kris Kelly (Perturbatio) Portions by Daniel Lurie (LeisureSuitLurie)"
ModuleInfo "License: Public Domain"
Import Pub.stdc
Import BRL.FileSystem
Import BRL.Max2D
?MacOS
Import "BMaxMacWindows.m"

?

Extern 
	Function getch() = "getch"
EndExtern

?Win32
Extern "Win32"
  Function _SetWindowText(hwnd:Int, lpString:Byte Ptr) = "SetWindowTextA@8"
  Function _GetActiveWindow() = "GetActiveWindow@0"
  'Function _MoveFileEx(SrcFile:Byte Ptr, DestFile:Byte Ptr, Flags:Int) = "MoveFileExA@12"
End Extern
?MacOS
Extern
	Function SetBMaxWindowTitle( s:Byte Ptr)
End Extern
?Linux
Rem
presumably
XStoreName(display, w, window_name)
      Display *display;
      Window w;
      char *window_name
EndRem
?

Rem
bbdoc: Wait for a KeyPress in console mode
about: Will only work in console mode
End Rem
Function ConsoleWaitKey()
	'if we are in console mode (if the graphics width is 0).
	If GraphicsWidth() &gt; 0 Then 
		RuntimeError("ConsoleWaitKey() can only be used in console mode!")
	Else
		getch()
	EndIf

End Function

Rem
bbdoc: Change the title of the current window
about: The function will set the current window's title to the supplied string value
End Rem
Function SetAppTitle(title:String)
?Win32
	Local _CurrentWinHandle = _GetActiveWindow()
	_SetWindowText(_CurrentWinHandle, title.toCString())
?MacOS
	setBMaxWindowTitle(title.tocstring())
?Linux

?
End Function


Rem
bbdoc: Rename a file
returns: 0 if unsuccessful, 1 if successful
about: Renames the SrcFile to the DestFile
End Rem
Function RenameFile:Int(SrcFile:String, DestFile:String, Overwrite=False)
If SrcFile &lt;&gt; "" And DestFile &lt;&gt; "" Then
	If FileType(SrcFile) &gt;0 Then
		If FileType(DestFile) &gt; 0 And Not Overwrite Then Return 0
		rename_(SrcFile, DestFile)
		Return 1
	EndIf

EndIf
Return 0
End Function
</textarea><br><br>BMaxMacWindows.m:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#import &lt;AppKit/AppKit.h&gt;

void SetBMaxWindowTitle(const char *text){
	
    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];
    NSWindow *myWindow;
    NSApplication *myApp;
    NSString *myString;
    NSArray *myWindowArray;
    
    myApp=[NSApplication sharedApplication];
    myString=[NSString stringWithCString: text];
   
    myWindowArray=[myApp windows];
    myWindow=[myWindowArray lastObject];
    
    [myWindow setTitle: [NSString stringWithCString: text]];

    [pool release];
 
	};
</textarea> <br><br></td></tr></table><br>
<a name="500911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LeisureSuitLurie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey! Its tested. It works on every one of the one Macs I own. :P <br><br></td></tr></table><br>
<a name="501103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> what I mean is that it's untested inside this module, unless you've tested that as well? <br><br></td></tr></table><br>
<a name="524962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updated appfuncs.bmx - SetAppTitle now works on Linux! (Thanks to some help from skid):<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict
Rem
bbdoc: Pert.AppFuncs
End Rem
Module Pert.AppFuncs
ModuleInfo "Module: Perturbatio's AppFuncs Mod"
ModuleInfo "Version: 1.01"
ModuleInfo "Author: Kris Kelly (Perturbatio) Portions by Daniel Lurie (LeisureSuitLurie)"
ModuleInfo "License: Public Domain"
Import Pub.stdc
Import BRL.FileSystem
Import BRL.Max2D
?MacOS
Import "BMaxMacWindows.m"

?
?Win32
Extern 
	Function getch() = "getch"
EndExtern
?

?Win32
Extern "Win32"
  Function _SetWindowText(hwnd:Int, lpString:Byte Ptr) = "SetWindowTextA@8"
  Function _GetActiveWindow() = "GetActiveWindow@0"
  'Function _MoveFileEx(SrcFile:Byte Ptr, DestFile:Byte Ptr, Flags:Int) = "MoveFileExA@12"
End Extern
?MacOS
Extern
	Function SetBMaxWindowTitle( s:Byte Ptr)
End Extern
?Linux
Extern
Global xwindow
Global xdisplay
Function XStoreName(display:Int, w:Int, window_name$z)
End Extern
?


?Win32
Rem
bbdoc: Wait for a KeyPress in console mode
about: Will only work in console mode
End Rem
Function ConsoleWaitKey()
	'if we are in console mode (if the graphics width is 0).
	If GraphicsWidth() &gt; 0 Then 
		RuntimeError("ConsoleWaitKey() can only be used in console mode!")
	Else
		getch()
	EndIf

End Function
?
Rem
bbdoc: Change the title of the current window
about: The function will set the current window's title to the supplied string value
End Rem
Function SetAppTitle(title:String)
?Win32
	Local _CurrentWinHandle = _GetActiveWindow()
	_SetWindowText(_CurrentWinHandle, title.toCString())
?MacOS
	setBMaxWindowTitle(title.tocstring())
?Linux
	XStoreName(xdisplay, xwindow, title)
?
End Function


Rem
bbdoc: Rename a file
returns: 0 if unsuccessful, 1 if successful
about: Renames the SrcFile to the DestFile
End Rem
Function RenameFile:Int(SrcFile:String, DestFile:String, Overwrite=False)
If SrcFile &lt;&gt; "" And DestFile &lt;&gt; "" Then
	If FileType(SrcFile) &gt;0 Then
		If FileType(DestFile) &gt; 0 And Not Overwrite Then Return 0
		rename_(SrcFile, DestFile)
		Return 1
	EndIf

EndIf
Return 0
End Function
</textarea> <br><br></td></tr></table><br>
<a name="524984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Reaper</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, Im new to blitzmax and just tried to install this module. I created the paths as specified and saved the code as AppFuncs.bmx in the correct directory. If I then try and compile ANY code I get this error msg <br>C:/Program Files/BlitzMax/bin/ld.exe: cannot find C:/Program Files/BlitzMax/mod/pert.mod/appfuncs.mod/appfuncs.release.win32.a <br>So I presume I have to compile it but if I do I get a popup error box saying Compile error - module does not match commandline module on this line :- Module Pert.AppFuncs .<br><br>Ive also pressed Alt-D to rebuild module but that didnt help. Do I have to rebuild all modules or something (dont know how to do that as its greyed out). Help plz ;-) <br><br></td></tr></table><br>
<a name="525022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Create a folder called pert.mod (a general folder that I will use for all my mods).<br>inside that folder, create one called appfuncs.mod<br>place the two module sources there (there's a mac .m include a couple of posts up).<br>rebuild the modules<br><br>I will probably stick this in a zip and upload it a little later if you want to wait. <br><br></td></tr></table><br>
<a name="525026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> In fact, through the wonders of linux command line (and a bit of luck), <a href="http://www.corstorphineonline.com/files/pert.zip" target="_blank">here is a zip</a> <br><br></td></tr></table><br>
<a name="525044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Reaper</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Downloaded your zip, works a treat now, thanks. But for future reference with installing modules other than placing them in the correct folders whats the rest of the procedure to get them working &gt;? <br><br></td></tr></table><br>
<a name="525048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sometimes you have to go to the bin folder of BMax and then you have to rebuild them by yourself.<br>But to do this you must have MinGW installed and set the MinGW<br>Pathes in Windows. (For further Infos about installing MinGW<br>search the Forum)<br>then you have to call : <br>bmk makemods -r pub.yourmodule<br>for release Version and<br>bmk makemods -d pub.yourmodule<br>for debug Version from commandline. <br><br></td></tr></table><br>
<a name="525057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> you can rebuild the modules via the IDE without need for commandline stuff. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
