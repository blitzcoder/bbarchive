<!DOCTYPE html><html lang="en" ><head ><title >New TMap vs ImageBuffer</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >New TMap vs ImageBuffer</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=110" >BlitzMax Module Tweaks</a>/<a href="#bottom" >New TMap vs ImageBuffer</a><br><br>
<a name="698358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would guess that 80%+ of people who own Bmax don't know what TMap is for or don't even know it exists. <br>I would also guess that close to 80% of people would like to see the return of *official* Imagebuffers a la B2D/B3D.<br>Mark, I know you like coding the tricky stuff but couldn't you stop me moaning about Imagebuffers by either providing them, helping me out on my attempt <br><a href="/posts.php?topic=61637#688956" target="_blank"> Imagebuffers : Sort of </a> <br>or providing some doc on the current DX texture implementation.<br>I know Bmax is not a democracy but it would be much appreciated.<br>p.s. If it's in the next big update please tell me as I keep returning to my code 'just one more time' and it's beginning to hurt. <br><br></td></tr></table><br>
<a name="698363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> All of this TMap talk is so weirdly timed.  I just this morning was writing something and thought, "Man, I wish there was a map or dictionary class in BlitzMax".  For the hell of it, I checked out the mod directory and ... whoah, map.mod!  Score!<br><br>It works well.  It's a shame it isn't documented. <br><br></td></tr></table><br>
<a name="698415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> map got a procedural functionionality with its syncmod today so I assume it has now docs as well (it was OO only before).<br><br>Its now a balanced tree as well :)<br><br><br>tonyg: The main problem is: OpenGL does not have surfaces like DX which is the reason there is no such thing as imagebuffers. There are extensions to do the similar thing thought ... <br><br></td></tr></table><br>
<a name="698474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Diablo's HighGFX managed to use the extension. <br>I've managed it with DX but, in both cases I think, it's moving the manually created image back to a Bmax managed image/texture. <br><br></td></tr></table><br>
<a name="698566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aren't those "image buffer fakes" basing on Render to Texture?<br>Because that isn't the same as image buffers (dx surface or opengl pBuffer)<br><br>(if you use B3D you will learn that quite fast. Actual NVidia driver don't even let you draw images to texturebuffers anymore nor anything else beside the per pixel draw ops like drawline etc. Drawing text has been broken for quite some time) <br><br></td></tr></table><br>
<a name="698606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm talking about the functionality of the ImageBuffer B3D/B2D concept and not the technicalities of it. <br><br></td></tr></table><br>
<a name="698637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What exact functionality are you after then? And to help us better understand, why? <br><br></td></tr></table><br>
<a name="698643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> tonyg: The problem is that the techicalities mathers in this case.<br><br>What does it help if you have something similar to B3D texturebuffers if it only works on Intel crap cards? Right, nothing!<br><br>And for render to texture, you can use indiepaths module. It works with DX and OpenGL on all system that are able to use rendertargets (newer intel, ATI and NVIDIA, the rest is out).<br><br>The only other possibility that does not cut anyone out is simply use Pixmaps and do your operations on them. <br><br></td></tr></table><br>
<a name="698645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would like an official, supported module which allows me to 'render' to a Bmax managed texture/image. Whether this is *really* rendering to that texture or some jiggery-pokery I don't care as long as it's close to real-time.<br>As to why...<br><div class="quote"> <br>There are 1000 reasons for this command. Simply put, you may want to 'draw' on an existing image you've loaded (LoadImage or LoadAnimImage) or created (CreateImage). You could, for example, have a blank wall graphic and you want to add 'graffiti' to it based on the user action (Jet Grind Radio baybeee! Sorry...). Instead of trying to draw a dozen images all over the wall, just use the SetBuffer command to denote the wall graphic as the 'target' buffer, and draw away! Next time you display that graphic (DrawImage), you will see your changes! This is a powerful command! <br> <br></div><br>My main use for it in BB was Composite Sprites.<br>Here's some <a href="/posts.php?topic=60344#674075" target="_blank"> previous discussion </a><br><br>&lt;EDIT&gt; Indie and Diablos RTT methods do that.. render to a non-Bmax managed texture. The next step I would like is to then blt/replace/load/whatever that unmanaged texture into Bmax control.<br>I'm close to doing it (messily) myself...<br><a href="/posts.php?topic=61637#688956" target="_blank"> Cry for help </a> <br><br></td></tr></table><br>
<a name="698649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought they use BM textures.<br>They just create the surface manually (DX side) because the way BM creates them does not allow them to become render targets (which makes sense as they weren't meant as such :) ).<br><br>At best, BM would allow rendertarget textures through a flag, similar to the current existing ones and then you could render to them through setbuffer like commands ... ie still more or less the way indiepaths module does it ... just "officially" in ... ^^<br><br>If the Max2D core classes were implemented fully BM side all would be less of a problem as we could simply extend the object and make it an additional module. Sadly TImage is heavily procedural based which means a new object is needed as extending isn't of much use. <br><br></td></tr></table><br>
<a name="698656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fantastic! So it can be done, so BRL could produce an official module. Superb! Thanks for all your help. <br><br></td></tr></table><br>
<a name="698896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well if anyone can do it, of course BRL can ;] <br><br></td></tr></table><br>
<a name="725239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> skid, did you ask for more information for a reason? <br><br></td></tr></table><br>
<a name="725342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can the accumulation buffer be used to keep a reliable backup of the backbuffer that can then be restored and drawn on top of? Might solve some engine needs.<br><br>Also Opengl glCopyTexImage2D() works pretty well. I do a full-screen grab into a texture after drawing to the backbuffer and then re-draw that texture. At least on my NVidea GeForce4MX its' fast enough to be 30fps in a high resolution for RGBA textures. You do have the bottleneck of having to draw to the backbuffer first then grab it which isn't as quick as directly drawing to a texture. But hey.<br><br>You basically are going to need more up to date hardare and sofware in order to directly draw to the textures. Maybe you can support it through extensions if it is enabled and if not fall back to some slower method. <br><br></td></tr></table><br>
<a name="725343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I would like to know is what is it that you are drawing on top of what and why, and how much of it, and how often, and how long is it on-screen in that state, and why does it need to be permanently written to the image rather than merge the images realtime? <br><br></td></tr></table><br>
<a name="725371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>what is it that you are drawing on top of what<br> <br></div><br>composite sprites.<br><div class="quote"> and why <br></div><br>so they can change equipment or take damage<br><div class="quote"> <br>and how much of it<br> <br></div><br>every animation cell for all characters that can change equipment <br><div class="quote"> <br>how often<br> <br></div><br>not too often.<br><div class="quote"> <br>and how long is it on-screen in that state<br> <br></div><br>until one of the characters picks up another piece of equipment, changes from their inventory or takes damage<br><div class="quote"> <br>and why does it need to be permanently written to the image rather than merge the images realtime? <br> <br></div><br>because there could be multiple composite sprites with multiple 'bits' and multiple damage which would make drawing each each frame a frame hog.<br>.<br>Anyway, don't let it worry you. When it comes to it I'll find a way.<br>My main reason for bumping is that Skidracer asked as if interested but never responded.<br>&lt;edit&gt; <a href="/posts.php?topic=60344#674075" target="_blank"> For more info </a> <br><br></td></tr></table><br>
<a name="727815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CoderLaureate</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, this is the first I've heard of TMAP.  I looked it up in the *ever so ambiguous* BMax documentation, and found a bunch of functions with even more ambiguous descriptions.<br><br>What is it, and how do I use it? <br><br></td></tr></table><br>
<a name="727823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What is it, and how do I use it?  <br></div><br>It's a container class, a bit like TList, except that objects are stored in a TMap with a "Key" instead of just stuck in a long list. Objects are then retrieved from the TMap by providing the "key" again. The key can be anything, but the most simple use would be to provide a string.<br><br>Searching for a particular object in a TMap is much faster than searching in a list because the TMap is sorted by the Key. So if the keys are strings, it's sorted alphabetically, like a dictionary. You don't sort the Map manually though, it's kept in a sorted state automatically. When you insert a new object, it is placed into the Map at the correct point to keep the keys in sort order. <br><br></td></tr></table><br>
<a name="727875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CoderLaureate</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> OH!  It's a Hash Table. <br><br></td></tr></table><br>
<a name="728682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> ImageBuffers can't easily be done because everything is 3D now, and 'render to texture' is not at all widely supported - esp. on both D3D and GL.<br><br>The only sane alternative woould be to use a software renderer - but this would not be anywhere near 'near realtime', and is only really an option under GL. <br><br></td></tr></table><br>
<a name="729209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure on that?<br><br>Because there were test done a year ago with render targets and even thought the support was "hacked" in it worked quite good (sie Indiepath's render2texture).<br><br>I thought R2T is a DX9 default feature. It might not be that fast on all cards, but any so called 3D card supports it. (even Intel Extreme 2 (GMA 900))<br><br>Especially the point you mention "its all 3D now" would really benefit of this at least unless BM learns some kind of image grouping into a single vertex array or a similar more performant structure than tousands of single quads as it currently is, in which case at least some cases where R2T now is the only way (One of these cases are large part with static pixel data, which need to be redrawn over and over again which costs a fair amount of time otherwise not needed. Blitz3D had the CamCLSMode to prevent static data beeing dropped on renderworld but now all is part of flip and highly uncontrollable)<br><br>I'm aware that some of the used terminilogy might be wrong or to "B3D focused", but I used them to show more clearly what I mean. <br><br></td></tr></table><br>
<a name="1035010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jondecker76</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know this is an OOOLLLDDDD post - but I'm feeling the same pain.  It would be very helpful to pick a target for drawing operations! (you can now, sort of, but creating a new graphics object also creates a new window!  Yuck!) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
