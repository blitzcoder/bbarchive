<!DOCTYPE html><html lang="en" ><head ><title >Returns Index of a pre-assigned Probability-Option</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Returns Index of a pre-assigned Probability-Option</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=100" >BlitzPlus Tutorials</a>/<a href="#bottom" >Returns Index of a pre-assigned Probability-Option</a><br><br>
<a name="1041914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diceman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is kinda hard to explain for a non-native speaker, but I'll try anyway; maybe someone can use this Function, too.<br><br>Say, you're programming an RPG-Game and you repeatedly want to check, whether certain events with different probabilites are about to happen. For example, you'll want to create a couple of Unique, Rare and Common Items, and that certain Unique Sword of Fate should occur much more scarcely then a common Famer's Shovel. Of course.<br><br>Now this neat little Function can be assigned certain fields of probabilites (a maximum of 10), then it rolls a dice within the range of 1 and all added fields, and finally returns the index, in which field the number occured. The Function can return a maximum of 10 Index-Numbers.<br><br><pre class=code>
Dim z_chance(10) ;Maximum of Probabilty-Fields
Dim iReturn(10) ; Maximum of returned Numbers



; Initialize a 33% Chance, returns one Number:
Perchance(20,20,20,0,0,0,0,0,0,0,1)

; Initialize a 10 / 20 / 30 / 40% Chance, returns one Number:
Perchance(1,2,3,4,0,0,0,0,0,0,1)

; Initialize a 0.1 / 5 / 10% Chance (Remainder 84.9%), returns 4 Numbers:
Perchance(1,50,100,849,0,0,0,0,0,0,4)






Function Perchance(z_chance1,z_chance2,z_chance3,z_chance4,z_chance5,z_chance6,z_chance7,z_chance8,z_chance9,z_chance10,z_nr)
	Local zMax = 0
	Local z0
	Local zDice
	Local zAdd

	z_chance(1) = z_chance1
	z_chance(2) = z_chance2
	z_chance(3) = z_chance3
	z_chance(4) = z_chance4
	z_chance(5) = z_chance5
	z_chance(6) = z_chance6
	z_chance(7) = z_chance7
	z_chance(8) = z_chance8
	z_chance(9) = z_chance9
	z_chance(10) = z_chance10

        For a = 1 to z_nr
                iReturn(a) = 0
        Next
	
        z0 = 11
	For a = 1 To 10
		If z_chance(a) &gt; 0
			zMax = zMax + z_chance(a)
		Else
			z0 = a
		EndIf
	Next
	
	For nr = 1 To z_nr
		zDice = Rand(1,zMax)
		zAdd = 0
		For a = 1 To (z0-1)
			zAdd = zAdd + z_chance(a)
			If zAdd &gt;= zDice And iReturn(nr) = 0
				iReturn(nr) = a
			EndIf
		Next
	Next
End Function
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
