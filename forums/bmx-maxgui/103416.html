<!DOCTYPE html><html lang="en" ><head ><title >[Solved] wx.mod working with tdm-gcc-4.8.1-3.exe</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >[Solved] wx.mod working with tdm-gcc-4.8.1-3.exe</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >[Solved] wx.mod working with tdm-gcc-4.8.1-3.exe</a><br><br>
<a name="1244960"></a>

<a name="1244961"></a>

<a name="1244962"></a>

<a name="1244963"></a>

<a name="1244964"></a>

<a name="1244965"></a>

<a name="1244966"></a>

<a name="1244967"></a>

<a name="1244978"></a>

<a name="1244979"></a>

<a name="1244980"></a>

<a name="1244981"></a>

<a name="1244982"></a>

<a name="1244983"></a>

<a name="1244984"></a>

<a name="1244987"></a>

<a name="1244988"></a>

<a name="1244989"></a>

<a name="1244993"></a>

<a name="1244994"></a>

<a name="1245009"></a>

<a name="1245010"></a>

<a name="1245304"></a>

<a name="1245305"></a>

<a name="1245419"></a>

<a name="1245466"></a>

<a name="1245467"></a>

<a name="1245468"></a>

<a name="1245469"></a>

<a name="1245480"></a>

<a name="1245501"></a>

<a name="1245538"></a>

<a name="1245544"></a>

<a name="1245545"></a>

<a name="1245547"></a>

<a name="1245560"></a>

<a name="1245561"></a>

<a name="1245582"></a>

<a name="1245583"></a>

<a name="1245584"></a>

<a name="1246432"></a>

<a name="1246433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is Secret no #1:<br><a href="https://github.com/maxmods" target="_blank">https://github.com/maxmods</a><br><br>Secret no #2:<br><a href="https://sourceforge.net/projects/tdm-gcc/files/TDM-GCC%20Installer/" target="_blank">https://sourceforge.net/projects/tdm-gcc/files/TDM-GCC%20Installer/</a><br>tdm-gcc-4.8.1-3.exe<br><a href="/posts.php?topic=95220" target="_blank">Brucey: Win32 BlitzMax with GCC 4.x - HowTo</a><br><br>Secret no #3:<br>Build<br>(BLIDE is very good in Building module's)<br><br>Secret no #4:<br>I chose to Remark this line:<pre class=code>; import "../lib/win32/wx_rc.o"</pre>In those files:<br>C:\BlitzMax\mod\wx.mod\wx.mod\wx.debug.win32.x86.i<br>C:\BlitzMax\mod\wx.mod\wx.mod\wx.release.win32.x86.i<br>C:\BlitzMax\mod\wx.mod\wx.mod\.bmx\common.bmx.debug.win32.x86.i<br>C:\BlitzMax\mod\wx.mod\wx.mod\.bmx\common.bmx.release.win32.x86.i<br><br>If you remark:  import "../lib/win32/wx_rc.o" Then you get Error ReBuild the wx.mod<br>So if you still want to use: C:\BlitzMax\mod\wx.mod\lib\win32\wx_rc.o<br>You can always use ResHacker on your .exe and alter alter the first line of ICONGROUP:<pre class=code>WXICON_AAA ICON "Icon_1.ico"</pre>I don't know HOWTO make changes on a binary .o file<br><br>Secret no #5:<br>No need to Restart the Computer ^^<br><br>Secret no #6:<br>Copy <b>libpthread_s.dll.a</b> to my project folder and add 2 magical line to the wx.bmx file:<pre class=code>Import "-lgcc"
Import "libpthread_s.dll.a"</pre><br>END of Secret's<br><br><br>I go up in the middle of the night so I could Download: <a href="https://github.com/maxmods," target="_blank">https://github.com/maxmods,</a> and let it build while I go sleep<br>When I woke up it was ALL done!<br>I can't describe my happiness when I run my test: absolut.bmx and it actually worked!<br>Probably my last 100% Happiness moment in Life!<br><br>READABLE Links:<br><a href="/posts.php?topic=100077" target="_blank">wxMax help</a><br><br><br>Thank thee <b>munch</b> for showing: <a href="/posts.php?topic=95220" target="_blank">Brucey, Win32 BlitzMax with GCC 4.x - HowTo</a><br>for guiding me to right, MinGW path<br><br>and Finally thanks you <b>Brucey</b> for all your mods that is far better than I ever could expected!<br>I only chose BlitzMax MaxGUI over Monkey X, so with wxWidgets, BlitzMax become even more better now.<br>Maybe wxWidgets is someday coming to Monkey X, who know?<br>Maybe someday I going to buy Monkey X, who know?<br>BlitzMax is faster and can make smaller application than Monkey X and it have wx.mod try beat that Monkey X!<br>And Don't forget BlitzMax has MySQL support *and the crowd go wild*<br><br><br>and Last thank thee all for NOT complaining over my bad writing/spelling, thank thee very much <br><br></td></tr></table><br>
<a name="1245149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad you got it working.<br><br>Just wondering, are you using Brucey's patched versions of brl.mod and pub.mod? <br><br></td></tr></table><br>
<a name="1245278"></a>

<a name="1245279"></a>

<a name="1245280"></a>

<a name="1245282"></a>

<a name="1245283"></a>

<a name="1245284"></a>

<a name="1245285"></a>

<a name="1245286"></a>

<a name="1245287"></a>

<a name="1245288"></a>

<a name="1245289"></a>

<a name="1245297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I download all of Brucey:<br><a href="https://github.com/maxmods" target="_blank">https://github.com/maxmods</a><br><br>The Downloaded Brucey: bah, brl, ifsogui, pub and wx is only source code so I rebuild all with gcc 4.7.1<br><br><b>Is gcc 4.7.1 really the one I shall use, or did I misunderstand something?</b><br><br>Downside when I downgrade the MinGW is that BLIDE don't include the .exe .ico (the file icon) when Publish current Program.<br><br>My MaxGUI project stop working I dunno why yet, (I don't put time into this at the moment)<br><br>This is a bigger problem for me:<br>I get this Compile Error: Duplicate identifier 'luaL_newstate' in modules 'zeke.luajit2' and 'pub.lua' after I reBuild all the modules to 4.7.1 <br><br></td></tr></table><br>
<a name="1245298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am thinking to drop MaxGUI even if the .exe is smaller than 500Kb (that is impressive)<br>the smallest wx.mod .exe is now when wx.mod is baked into the .exe around 3100Kb<br>I now try learn wx.mod and it's pure joy, I feel young again!<br>I say: wx.mod can make Windows Applications as easy as PHP make webpages, and how cool is that? <br><br></td></tr></table><br>
<a name="1245367"></a>

<a name="1245368"></a>

<a name="1245369"></a>

<a name="1245370"></a>

<a name="1245371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've read that the latest (4.8) gcc is 64-bit only but haven't tested this myself.<br><br>Your lua compile error seems to be that you can't have both pub.lua and zeke.luajit2 installed at the same time. So try this: rename the pub lua.mod folder to say lua or move it out of pub.mod and then rebuild modules or in cmd type cd c:\blitzmax\bin and .\bmk makemods -a zeke<br><br>I don't know about the icon issue. <br><br></td></tr></table><br>
<a name="1245381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I've read that the latest (4.8) gcc is 64-bit only but haven't tested this myself. <br></div><br>That's not the first time you've said that. TDM is not. I can't speak for any others though.<br>The 64-bit TDM builds for both 64-bit and 32-bit. Binaries are all 32-bit, so you can build for 64-bit on your 32-bit machine, if you like. Of course, you can't test it then ;-) <br><br></td></tr></table><br>
<a name="1245402"></a>

<a name="1245403"></a>

<a name="1245404"></a>

<a name="1245405"></a>

<a name="1245406"></a>

<a name="1245407"></a>

<a name="1245408"></a>

<a name="1245409"></a>

<a name="1245410"></a>

<a name="1245411"></a>

<a name="1245412"></a>

<a name="1245413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> tdm-gcc-4.8.1-3.exe<br>29.3 MB · GCC 4.8.1<br>Bundle installer for the TDM32 MinGW edition. Includes C, C++, and OpenMP support, SJLJ exception handling, other GNU toolchain programs (binutils), Windows API libraries (MinGW WSL), GNU make (mingw32-make), and the GNU debugger (GDB).<br><br>I test tdm-gcc-4.8.1-3.exe, but it didn't build the wx.mod for me..<br><br>Edit: When I think about it I use 4.8.1 on wxmax_1_01_win32_bin.rar<br>(I shall test rebuild with 4.8.1 once more)<br><br><br>the Assembly Information and the Icon from BLIDE don't get included when I use 4.7.1<br>I am lazy so I like when BLIDE do it that automatically for me.<br>ResHack don't work when BLIDE use the Ultimate Packer for eXecutables.<br><br><br>What gcc version I use, so wx.mod and BLIDE can include the icon and the Assembly Information?<br><br><br>Sorry for asking this too:<br>manifest file configuration is that the .res xml file? <br><br></td></tr></table><br>
<a name="1245414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Henri</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe <a href="http://homepage.ntlworld.com/config/max/appiconguide.htm" target="_blank">this is</a> what you are looking for ?<br><br>-Henri <br><br></td></tr></table><br>
<a name="1245418"></a>

<a name="1245421"></a>

<a name="1245422"></a>

<a name="1245503"></a>

<a name="1245504"></a>

<a name="1245539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I reinstall: tdm-gcc-4.8.1-3.exe and this time it Build all wx.mod's<br>But when I Build a sample I get back the sjlj Error's again<div class="quote"> C:/BlitzMax/lib/libgcc.a(unwind-sjlj.o): In function `_gthread_key_create':<br>C:/BlitzMax/lib/libgcc.a(unwind-sjlj.o): In function `_gthread_once':<br>c:\crossdev\gccmaster\build-tdm32\gcc\mingw32\libgcc/./gthr-default.h:699: undefined reference to `pthread_once' <br></div><br>Thanks Henri for teaching me how to use windres, I am going to try Google more about that..<br><br>I think<pre class=code>Import "iconBLL.o"</pre>is how BLIDE is doing when Building a Solution and it's not working in 4.7.1-2<br><br>It's little funny thou, when I Build a wx.mod.bmx it set the fileIcon to the wxWidgets Icon.<br>(That mean it is possible to set the fileIcon somehow)<br><br>This is only set the Application Frame Icon:<pre class=code>setIcon(wxIcon.CreateFromFile("incbin::data/BLHTML.png", wxBITMAP_TYPE_PNG))</pre><br><br>My question is still if there are any newer TDM I can use or I am stuck with 4.7.1-2 if I want to use wx.mod?<br>Edited: [Solved] tdm-gcc-4.8.1-3.exe is OK <br><br></td></tr></table><br>
<a name="1245435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just use GCC 4.8.1 ... and check if you copied all needed files (/lib, /bin/ar.exe, /bin/ld.exe) then recompile EVERY module.<br><br>If ensured you did this:<br><br>pthread_once  missing? Maybe you need to state to import "-lpthread" somewhere in the module.<br>According to "<a href="/post.php?topic=88410&amp;post=1004836" target="_blank">This Post</a>" an "-lgcc" will help (was for GCC 4.4).<br><br><br>Last time I checked wxMax, it compiled with 4.8.1 but not with 4.7.1 (while maxmod2.mod or more specific rtaudio.mod works with 4.7.1 but not with 4.8.1). Maybe there were changes making it not compiling anylonger. But as the last googlecode-changes were done in end of 2013 ... i really doubt it.<br><br><br>Ok so what I have done now:<br>- startet my XP VM having TDM 4.8.1 installed<br><br><pre class=code>
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=c:/mingw/bin/../libexec/gcc/mingw32/4.8.1/lto-wrapper.exe
Target: mingw32
Configured with: ../../../src/gcc-4.8.1/configure 
--build=mingw32 
--enable-languages=ada,c,c++,fortran,lto,objc,obj-c++ --enable-libgomp --enable-lto --enable-graphite
--enable-libstdcxx-debug --enable-threads=posix --enable-version-specific-runtime-libs 
--enable-fully-dynamic-string --enable-libstdcxx-threads --enable-libstdcxx-time --with-gnu-ld
--disable-werror --disable-nls --disable-win32-registry --disable-symvers 
--enable-cxx-flags='-fno-function-sections -fno-data-sections -DWINPTHREAD_STATIC'
--prefix=/mingw32tdm --with-local-prefix=/mingw32tdm --with-pkgversion=tdm-2
--enable-sjlj-exceptions --with-bugurl=http://tdm-gcc.tdragon.net/bugs
Thread model: posix
gcc version 4.8.1 (tdm-2)
</pre><br><br>so it is <b>TDM-2</b>, maybe this makes some difference.<br><br><br>- checked I have BlitzMax installed<br>- did an svn-checkout with TortoiseSVN (alternatively do "svn checkout <a href="http://wxmax.googlecode.com/svn/trunk/" target="_blank">http://wxmax.googlecode.com/svn/trunk/</a> wxmax")<br>- waited 14 minutes to download the thing from SVN (slow googlecode.com server)<br>- moved "wx.mod" out of "wxmax" into the blitzmax-mod folder (it stays to be an svn-repo, but without the parental folder)<br>- run "bmk makemods -r wx"<br>- waited a while<br>- waited a while longer (virtual machines ... i only give them 1gb of ram and 1 core as I often run multiple machines simultaneously)<br>- waited 34min while playing a game<br><br>- tried to compile samples: same error like you<br><br>"undefined reference to `pthread_getspecific'" etc.<br><br><br>So what to do?<br><br>add this to your imports (eg. on top of the samples file):<br><br><pre class=code>
Import "-lgcc"
Import "-lpthread_s.dll"
</pre><br><br>What is "lpthread_s.dll" ?? Seems there is a "libpthread.a" in the lib-folder of blitzmax, but also a "libpthread_s.dll.a" -- and THIS file does compile your samples then.<br><br>Maybe someone with more knowledge could explain how to "automate" this then.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1245465"></a>

<a name="1245470"></a>

<a name="1245471"></a>

<a name="1245472"></a>

<a name="1245473"></a>

<a name="1245474"></a>

<a name="1245476"></a>

<a name="1245478"></a>

<a name="1245479"></a>

<a name="1245483"></a>

<a name="1245502"></a>

<a name="1245506"></a>

<a name="1245507"></a>

<a name="1245508"></a>

<a name="1245509"></a>

<a name="1245510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> First off <b>Derron</b>, I am really in our debt, thank you really for helping<br>(My wife getting cranky when all my effort is going to make wx.mod to work)<br><br><br><div class="quote"> Installed: tdm-gcc-4.8.1-3.exe<br>gcc --version<br>gcc (tdm-2) 4.8.1 <br></div>So it look that I have the same.<br><br>It work for me when I copy <b>libpthread_s.dll.a</b> to my folder and:<pre class=code>Import "-lgcc"
Import "libpthread_s.dll.a"</pre><br><br>But I got same problem with the program icons, so I reinstall BlitzMax<br>That didn't help at all and I had to reBuild all again..<br><br>While rebuilding I found <b>Ziggy's</b> secret in Life: <a href="http://upx.sourceforge.net/" target="_blank">UPX: the Ultimate Packer for eXecutables</a><br><i>UPX is in my toolbox forever now (Totally cool program)!</i><br><br>RUN<b>UPX</b>.bat:<pre class=code>C:\BlitzMax\ResHack\ResHacker.exe -script C:\BlitzMax\MOBii\BLL\build\ResHack.script
del BLL.exe
upx -6 -oMOBii.exe tmp.exe --compress-icons=2
rem move BLL2.exe BLL.exe
del tmp.exe</pre><br><br>build\ResHack.script:<pre class=code>[FILENAMES]
Exe=C:\BlitzMax\MOBii\BLL\BLL.exe
SaveAs=C:\BlitzMax\MOBii\BLL\tmp.exe
Log=build/Log.txt

[COMMANDS]
//-delete ICONGROUP, WXICON_AAA,
-delete ICONGROUP, WXICON_SMALL_CDROM,
-delete ICONGROUP, WXICON_SMALL_CLOSED_FOLDER,
-delete ICONGROUP, WXICON_SMALL_COMPUTER,
-delete ICONGROUP, WXICON_SMALL_DRIVE,
-delete ICONGROUP, WXICON_SMALL_FILE,
-delete ICONGROUP, WXICON_SMALL_FLOPPY,
-delete ICONGROUP, WXICON_SMALL_OPEN_FOLDER,
-delete ICONGROUP, WXICON_SMALL_REMOVEABLE,

-addoverwrite C:\BlitzMax\MOBii\BLL\icon.ico, ICONGROUP, WXICON_AAA,
// I can't Write to: 1, 1033
//-add C:\BlitzMax\MOBii\BLL\icon.ico, ICONGROUP, 1, 1033     // 1:1033 Not Working
//-add C:\BlitzMax\MOBii\BLL\icon.ico, ICONGROUP, 1,
// icon.ico :: stored in: ICON GROUP + 1 + 0</pre>If I rename to original filename:<pre class=code>move MOBii.exe BLL.exe</pre>Then the wxWidget's Icon get back hehe<br>(Something magic with that wxWidget Icon)<br><br>Otherwise the Application Icon is <b>WORKING OK NOW</b> with the ResHacker.script!!! Cheers <br><br></td></tr></table><br>
<a name="1245486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> To get an Icon in the top left border when the app is running:<br><br><pre class=code>
	Local Icon:wxIcon = New wxIcon.Create()
	Icon.LoadFile("win32_icon.ico", wxBITMAP_TYPE_ICO)
	If Not Icon.IsOk() Then Throw("Can't load 'win32_icon.ico'")
	'frame is your "AppFrame"
	frame.SetIcon(Icon)
</pre><br><br>But this does not get rid of the icon used in the explorer, somehow wxwidget changes it, so a normal "import "bla.o" is not enough).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1245490"></a>

<a name="1245491"></a>

<a name="1245492"></a>

<a name="1245493"></a>

<a name="1245494"></a>

<a name="1245495"></a>

<a name="1245496"></a>

<a name="1245498"></a>

<a name="1245499"></a>

<a name="1245505"></a>

<a name="1245511"></a>

<a name="1245515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Think this is more or less the same:<pre class=code>Import brl.RamStream
IncBin "data/BLHTML.png"
setIcon(wxIcon.CreateFromFile("incbin::data/BLHTML.png", wxBITMAP_TYPE_PNG))</pre>As you say it's only the Frame Icon<br><br>Somewhere in the wx.mod is setting that magical wxWidgets icon ^^<br><br>I learn that all the Application Icon is blinking when Repeating Pressing F5 (Refresh)<br>My world view must be really small when I didn't even know that! <br><br></td></tr></table><br>
<a name="1245518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Henri</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any help from <a href="/posts.php?topic=101279#1207287" target="_blank">this ?</a><br><br>-Henri <br><br></td></tr></table><br>
<a name="1245519"></a>

<a name="1245520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Think this would do it ... (I did not test it).<br><br>I knew that there is a .rc somewhere - and as this is defined BEFORE our file ... this is then the icon which Windows uses.<br><br><br>In our case it might be better to replace that file with an "empty" one (not containing any icon-definition in the .rc file we compile to ".o" later on).<br>So we could apply a custom one in each of our wx-projects.<br><br><br>EDIT: <br><pre class=code>
// First wx icon in alphabetical order, so it will be used by Explorer if the
// application doesn't have any icons of its own
wxICON_AAA                      ICON "wx/msw/std.ico"
</pre><br><br>That was copied from the .rc-file and somehow this sounds like we should be able to "override" this setting with adding custom icons... hmm and this is done exactly HOW ?<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1245530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> That's not the first time you've said that. TDM is not. I can't speak for any others though. <br></div><br>Yeah, sorry about that. I'll really have to check my facts out in future. Don't want to be misleading folks. <br><br></td></tr></table><br>
<a name="1245546"></a>

<a name="1245548"></a>

<a name="1245549"></a>

<a name="1245553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Magic wxIcon:<br><a href="http://www.blitzmax.com/Community/posts.php?topic=101279#1207287" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=101279#1207287</a><br>Brucey:<div class="quote"> There's a wx_rc.o in the lib/win32 <br></div><br><pre class=code>windres -iBLL.rc -owx_rc.o</pre>BLL.rc:<pre class=code>AppIcon ICON "BLHTML.ico"</pre>copy wx_rc.o C:\BlitzMax\mod\wx.mod\lib\win32\wx_rc.o /Y <br><br></td></tr></table><br>
<a name="1245543"></a>

<a name="1245550"></a>

<a name="1245551"></a>

<a name="1245559"></a>

<a name="1245563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Even better, delete this line:<pre class=code>import "../lib/win32/wx_rc.o"</pre>In those files:<br>C:\BlitzMax\mod\wx.mod\wx.mod\wx.debug.win32.x86.i<br>C:\BlitzMax\mod\wx.mod\wx.mod\wx.release.win32.x86.i<br>C:\BlitzMax\mod\wx.mod\wx.mod\.bmx\common.bmx.debug.win32.x86.i<br>C:\BlitzMax\mod\wx.mod\wx.mod\.bmx\common.bmx.release.win32.x86.i<br><br>Then the Publish function is working again in BLIDE <br><br></td></tr></table><br>
<a name="1245555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you remove that "wx_rc.o" file you also remove the other settings done there (cursors, use manifest or not, ...).<br><br>It is better to just remove the line I posted above ... so it does not set a custom icon at all.<br><br>In your app you then just could 'import "myicon.o"' to have a custom icon in your app ... no need to have a custom publish function... or need "BLIDE" at all (although you seem to have it already :D).<br><br>Another option is to use "post.bmk" (needs bruceys BMK) and a call to some commandline tools to replace the icon ...  just execute your ResHack-Script or so.<br><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1246292"></a>

<a name="1246293"></a>

<a name="1246294"></a>

<a name="1246296"></a>

<a name="1246297"></a>

<a name="1246431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I Remark this line:<pre class=code>; import "../lib/win32/wx_rc.o"</pre>In those files:<br>C:\BlitzMax\mod\wx.mod\wx.mod\wx.debug.win32.x86.i<br>C:\BlitzMax\mod\wx.mod\wx.mod\wx.release.win32.x86.i<br>C:\BlitzMax\mod\wx.mod\wx.mod\.bmx\common.bmx.debug.win32.x86.i<br>C:\BlitzMax\mod\wx.mod\wx.mod\.bmx\common.bmx.release.win32.x86.i<br><br>Then I can't ReBuild wx.wx.mod, and if I replace wx_rc.o with a own made: wx_rc.o<br>I can't add my own:<pre class=code>Import "data/BLHTML.o"</pre>(the wx_rc.o write over my Imported rc.o)<br><br>Is it possible to write: MuOwnRC.o to my already .exe file?<br><br>I didn't see that I can reWrite a .rc file to a exe with ResHacker<br>and the only other solution I found is:<pre class=code>gcc -o EDii.exe BLHTML.o EDii.o</pre><br>But I don't know howto get the EDii.o <br><br></td></tr></table><br>
<a name="1246295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you add multiple icons, windows will still use the first one - which in our case is the wxwidgets one.<br><br><br>you will have to remove the icon-entry from the ".rc"-file, recompile the .o file out of it - and after this, you should be able to use your own "bla.o" file in your projects (as no other icon definition was made then).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1246303"></a>

<a name="1246304"></a>

<a name="1246305"></a>

<a name="1246306"></a>

<a name="1246309"></a>

<a name="1246310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to rcfile.o ---&gt; rcfile.rc?<br><br><br>I can:<pre class=code>-addoverwrite data\icon.ico, ICONGROUP, WXICON_AAA,</pre>width the ResHacker.script<br><br>But then I don't know howto Write a new:<pre class=code>1 VERSIONINFO
FILEVERSION     1,0,0,0
PRODUCTVERSION  1,0,0,0
BEGIN
  BLOCK "StringFileInfo"
  BEGIN
    BLOCK "041D04E2"
    BEGIN
      VALUE "CompanyName", "My Company Name"
      VALUE "FileDescription", "My excellent application"
      VALUE "FileVersion", "1.0"
      VALUE "InternalName", "my_app"
      VALUE "LegalCopyright", "My Name"
      VALUE "OriginalFilename", "my_app.exe"
      VALUE "ProductName", "My App"
      VALUE "ProductVersion", "1.0"
    END
  END

  BLOCK "VarFileInfo"
  BEGIN
    VALUE "Translation", 0x041D, 1250
  END
END</pre>I can't write new this with ResHacker<br><br>If I could write a .rc file to the exe then I wouldn't mind the wx_rc.o and I live happily ever after? <br><br></td></tr></table><br>
<a name="1246324"></a>

<a name="1246325"></a>

<a name="1246326"></a>

<a name="1246327"></a>

<a name="1246328"></a>

<a name="1246331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I try add the: VERSIONINFO as I do in the rc script<br>1 24 "BLHTML.bin":<pre class=code>&lt;?xml version="1.0" encoding="UTF-8" standalone="yes" ?&gt;
&lt;assembly xmlns="urn:schemas-microsoft-com:asm.v1"
   manifestVersion="1.0"&gt;
&lt;description&gt;Windows forms common control manifest&lt;/description&gt;
&lt;dependency&gt;
&lt;dependentAssembly&gt;
&lt;assemblyIdentity type="win32"
   name="Microsoft.Windows.Common-Controls"
   version="6.0.0.0" processorArchitecture="x86"
   publicKeyToken="6595b64144ccf1df" language="*" /&gt;
&lt;/dependentAssembly&gt;
&lt;/dependency&gt;
&lt;/assembly&gt;</pre><br><br>I try experiment like this:<pre class=code>-add VERSIONINFO.bin, "Version Info", 1,</pre>This create a "VERSION INFO", 1 and the VERSIONINFO.bin is there<br><br>CAPITAL: "VERSION INFO" don't work<br>I give up this for now.. <br><br></td></tr></table><br>
<a name="1246335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is up to you to give up.<br><br><br>".rc"-files are "resource configuration files" -- so they are editable with notepad etc.<br><br>with the "windres"-thing you could create new ".o"-files out of it (see the batchfile yous quoted in this thread).<br><br>this ".o"-file is automatically used when importing "wx.mod"-packages into your project. They are linked before YOUR code ... so they include the first icon windows will find in the binary.<br><br>You could now open that .rc-file, comment out the icon-part, recompile the ".o"-file of it using windres -&gt; replace the existing one (somewhere in the wx.mod folder). From now on you should be able to do<br><br>import "myicon.o" in your app (myicon.o is then an object file of your OWN .rc-file ...like you posted above) and it should get displayed.<br><br><br>I am not testing this -- I am on linux and we do not have "icons in binaries" so I am only assuming it.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1246427"></a>

<a name="1246429"></a>

<a name="1246434"></a>

<a name="1246435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> To change icon with ResHacker:<pre class=code>-addoverwrite data\icon.ico, ICONGROUP, WXICON_AAA,</pre>My problem is howto add:<pre class=code>-add VERSIONINFO.bin, "Version Info", 1,</pre>This write "VERSION INFO" with CAPITAL and that doesn't Work<br><br>I do it wrong! <br><br></td></tr></table><br>
<a name="1246445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I cannot follow what you want to do.<br><br>do not mix things ...first try to get icon working, then other things.<br><br>Try the things I described, if they do not work ... feel unlucky. Mixing in other subjects just adds confusion.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1246466"></a>

<a name="1246468"></a>

<a name="1246469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am Sorry Derron, I never really learn Forum etiquette.<br>I was ashamed so I try ask in another Programming forum if it was possible to split a exe so I could rebuild it:<pre class=code>gcc -o EDii.exe rc.o EDii.o</pre>I get no answer<br><br>In the beginning I put many question in same post and then people answer one question and the other questions got ignored!<br>I need to learn NOT to put out to many question in same threads/post, I am still learning so please forgive my childish behavior.<br><br>I Remark the:<pre class=code>; import "../lib/win32/wx_rc.o"</pre>Because of that I can't ReBuild wx.mod.<br>I didn't like any of the resources in wx_rc.o and I could not build any wxProgram properly. That's why I chose to give up and exclude: wx_rc.o once again.<br><br>I am just happy wx.mod is finally working for me, the wx code is truly beautiful, again thank thee all for helping me <br><br></td></tr></table><br>
<a name="1246484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I played a bit with it.<br><br>as soon as I remove that "wxICON aaa ..." part of the rc-file, I get the "drive folder icon" as application icon (it is the next in the file).<br><br>To compile the ".rc" file just copy it to two folders above (wx.mod/include)<br>afterwards rename it to "wx_rc.o" and copy that .o-file to "wx.mod/lib/win32".<br><br>Even if removing everything from the .rc-file (except something like the menu definition) it does not use my custom icon.<br><br>When then removing the ".o"-file out of the .i-files you mentioned (common and wx.mod.release..." it accepts my icon again.<br><br>Dunno what causes this.<br><br><br>What works too (and is confusing):<br><br>I prepended my custom file in the .i-file<br><br><br>wx.release.win32.x86.i<br><pre class=code>
import "-lwsock32"
import "-lodbc32"
import "-lgdiplus"
import "../lib/win32/wx_rc.o"
</pre><br><br>to<br><pre class=code>
import "-lwsock32"
import "-lodbc32"
import "-lgdiplus"
import "win32_icon.o"
import "../lib/win32/wx_rc.o"
</pre><br><br>Of course I copied "win32_icon.o" into the WX-directory.<br><br><br>Maybe Brucey can answer how to manually "prepend" a custom line within our blitzmax source files.<br><br>I mean something like 'ImportFirst "myicon.o"' which is then used as the first one. Maybe it is doable with something in the lines of the .bmk-files (there is "post.bmk" so there will be "pre.bmk" too).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
