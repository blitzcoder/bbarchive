<!DOCTYPE html><html lang="en" ><head ><title >Odd Pixmap better than TImage boost</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Odd Pixmap better than TImage boost</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >Odd Pixmap better than TImage boost</a><br><br>
<a name="1027657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snarty</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Soo, I come back after a million years and fire up BMax to start development on a certain app.<br><br>Ok, after much head-scratching, reading of these forums and some appalling render times. I needed to throw away the core methods I used in Blitzplus. Here's what I found, not sure if this is indicative to my system or OpenGL in general. <br><br>To start with I was using a TImage as a main storage type for image editing with a matching canvas size. This method got very slow very fast.. 2048x2048 and above, and failed over 10,000x10,000 sized images (approximate). I understood there would be canvas limitations but wasn't expecting the poor render times.<br><br>Time to switch to a Canvas as a portal only, used to display the image and therefore only ever as large as the client area. To my surprise this had no effect on rendering, but did remove the upper limit on size. Just got slower and slower the larger the image.<br><br>So. With the above in mind I just gave in and ignored what seems a hate for pixmaps and went that route instead. I now use a pixmap for all image storage and layer building with no TImage for actual storage. The Canvas is now always the same size as the users desktop. Purely used for pre-rendering / rendering. This may change.<br><br>What I do now is upload portions of a pixmap in to a fresh TImage each frame that needs rendering, and/or pre-rending for using GFX card based effects (blending etc). To my complete and utter surprise this is lightning fast no matter the size of base image or size of the client area.<br><br>So, just shocked is all, and am I heading down the right path? Would this behaviour be pretty much linear across all platforms / units (ignoring crappy old machines that should be burned).<br><br>Brief Overview of my findings.<br>TImage --&gt; DrawSubRect --&gt; Canvas (SLOW)<br>TPixmap --&gt; TPixmap.Window --&gt; Upload to TImage --&gt; Canvas (UBER FAST) <br><br></td></tr></table><br>
<a name="1027659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Write Errors Man</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Images are kept on the vid memory, pixmaps are not. Considering that 10000x10000 image takes around 500 megs of video memory (depending on mip mapping and such), it's no wonder it becomes slow. <br><br></td></tr></table><br>
<a name="1027660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snarty</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, the extremes I expected some sort of issues, but @ 2048x2048 I thought it would have been possible to hold in video memory. I was wrong. lol<br><br>Besides I always have been a fan of storing image data in system memory over video memory for GUI stuff. <br><br></td></tr></table><br>
<a name="1027691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are limits to what a specific card will hold in in it's vram. I think above 1024x1024 it starts to get hazy as to weather it will allow it in one block or not, even on some "newer" cards. It's not so much the capacity of the card, as the design of the drivers.<br><br>The only real problem I think you might have with using pixmaps directly is that the pixmap drawing functions to the best of my understanding are very very driver specific, meaning there's a fair chance that for example they may work fine on one system but may be a little weird on another system with a different driver revision, or a different version of DX etc. I personally haven't run into this problem, and it's more likely related to more legacy systems and stuff with crap cards, but still something to be aware of when you get to testing. <br><br></td></tr></table><br>
<a name="1027780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snarty</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I did read about the pixmap &gt; driver issues. But, luckily I don't use any pixmap drawing functions. All rendering is done via TImage still, I just upload from the pixmap/pixmap window to an image each time any drawing is required. So far, in testing, this seems fast enough.<br><br>Thanks for the feedback. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
