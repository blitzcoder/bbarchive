<!DOCTYPE html><html lang="en" ><head ><title >Remove Window Icon [Solved]</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Remove Window Icon [Solved]</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >Remove Window Icon [Solved]</a><br><br>
<a name="1326233"></a>

<a name="1326234"></a>

<a name="1326235"></a>

<a name="1326236"></a>

<a name="1326237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... <br><br></td></tr></table><br>
<a name="1326365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone knows how to remove the default window icon when using CreateWindow? Nothing specified in the manual re that part. <br><br></td></tr></table><br>
<a name="1326255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to use the OS API, as the window decoration (icon, caption text, border etc.) is managed by that.<br>For Windows there seems to be two ways:<br>Use SendMessage with a null icon parameter:<br><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms632643(v=vs.85).aspx" target="_blank">https://msdn.microsoft.com/en-us/library/windows/desktop/ms632643(v=vs.85).aspx</a><br><br>Or SetWindowLong:<br><a href="http://stackoverflow.com/a/10833540" target="_blank">http://stackoverflow.com/a/10833540</a> <br><br></td></tr></table><br>
<a name="1326256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Kryzon. I know I have checked on this before here and found the solution but with the tons of info and discussions here I seem to get lost sometimes. :-) <br><br></td></tr></table><br>
<a name="1326257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have MinGW you can also use <b>windres</b> and make a resource object with the icon, which in turn can be baked into the executable.<br>Any MaxGUI window will then use that icon. <br><br></td></tr></table><br>
<a name="1326263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey grable, my problem is taking it out. Maybe I should create a resource file with a null value for the icon, just like Kryzon suggested. <br><br></td></tr></table><br>
<a name="1326268"></a>

<a name="1326269"></a>

<a name="1326270"></a>

<a name="1326271"></a>

<a name="1326272"></a>

<a name="1326273"></a>

<a name="1326274"></a>

<a name="1326275"></a>

<a name="1326276"></a>

<a name="1326277"></a>

<a name="1326278"></a>

<a name="1326279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, my mistake.<br><br>You can try this, but it will remove the other buttons as well:<pre class=code>SetWindowLongA( hwnd, GWL_STYLE, GetWindowLongA( hwnd, GWL_STYLE) &amp; ~WS_SYSMENU)</pre>Or change it into a toolwindow, though it wont look like or behave like a normal window any longer:<pre class=code>SetWindowLongA( hwnd, GWL_EXSTYLE, GetWindowLongA( hwnd, GWL_EXSTYLE) | WS_EX_TOOLWINDOW)</pre>Other then that, you would have to resort to overriding the NC region of the window and draw the titlebar yourself.<br><br>EDIT: Found this when searching <a href="https://stackoverflow.com/questions/3096359/wpf-remove-system-menu-icon-from-modal-window-but-not-main-app-window#3364875" target="_blank">https://stackoverflow.com/questions/3096359/wpf-remove-system-menu-icon-from-modal-window-but-not-main-app-window#3364875</a> <br>EDIT2: Couldnt get it to work after all, had a typo.. but the below works to an extent:<pre class=code>
	Local exstyle:Int = GetWindowLongA( hwnd, GWL_EXSTYLE)
'	SetWindowLongA( hwnd, GWL_EXSTYLE, exstyle | WS_EX_DLGMODALFRAME)
	SetWindowLongA( hwnd, GWL_EXSTYLE, exstyle | WS_EX_TOOLWINDOW)
	
	SendMessageA( hwnd, WM_SETICON, ICON_SMALL, 0)
	SendMessageA( hwnd, WM_SETICON, ICON_BIG, 0)

	SetWindowPos( hwnd, 0, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_NOZORDER | SWP_FRAMECHANGED)
</pre><br>Note that im on Windows 10, so this might work differently on other versions. <br><br></td></tr></table><br>
<a name="1326290"></a>

<a name="1326291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks grable. It doesn't seem to be working, I'm using Win7. The window title icon is what I'm after not the app btw. I guess that will be the small part? <br><br></td></tr></table><br>
<a name="1326297"></a>

<a name="1326298"></a>

<a name="1326300"></a>

<a name="1326301"></a>

<a name="1326302"></a>

<a name="1326303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> All 3 options worked for me, and the two top ones arent anything special so should work on versions &gt;= win2k.<br>If they dont for you, try forcing an update of the frame by using that last line with SetWindowPos.<br><br><div class="quote"> The window title icon is what I'm after not the app btw. I guess that will be the small part? <br></div>Yes, the titlebar icon is what it removes.<br>Im not sure how windows handles small/big, it might make a small one out of a big one or vica versa of one of them is set.<br>Youd have to test with a custom icon to notice i guess.<br><br>EDIT: Note that the original link uses WS_EX_DLGMODALFRAME, which did nothing for me. So i used WS_EX_TOOLWINDOW instead which did. <br><br></td></tr></table><br>
<a name="1326309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. would you mind posting your bmx source? Maybe I'm just doing something wrong. <br><br></td></tr></table><br>
<a name="1326321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried a NULL icon on the manifest but it won't compile. <br><br></td></tr></table><br>
<a name="1326350"></a>

<a name="1326351"></a>

<a name="1326352"></a>

<a name="1326356"></a>

<a name="1326357"></a>

<a name="1326358"></a>

<a name="1326359"></a>

<a name="1326360"></a>

<a name="1326368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tested this on a window created by Graphics, and since it isnt resizable it works differently than with windows created by MaxGUI.<br>And there is also some flags that are cached by windows which means they cannot be changed after a window has been created (like WS_EX_DLGMODALFRAME)<br>And a bunch of other arbitrary rules about dialogs vs windows sigh...<br><br>What it boils down to is that a change to MaxGUI is required for no icon AND having all the other buttons intact. Specifically the flag WS_EX_DLGMODALFRAME must be used on creation.<br><br>If you dont mind having no min&amp;max buttons, you can use the MaxGUI window flag WINDOW_TOOL (didnt know MaxGUI had this hehe)<br><br>But after some fussing about, i managed to fool MaxGUI into the proper behaviour, though it might cause issues because of the hidden parent window.<br>The code below, forces MaxGUI to create the second window as a Dialog window, which has no icon. It also hides the first window but still allows it to appear on the taskbar, since Dialogs dont show up there.<pre class=code>

SuperStrict

Import MaxGUI.Drivers

Local hidden:TGadget = CreateHiddenWindow("hidden")

'NOTE: WINDOW_CENTER doesnt appear to work
Local w:TGadget = CreateWindow( "test", 300,300, 640,480, hidden, WINDOW_TITLEBAR | WINDOW_RESIZABLE)
 
While WaitEvent()
	Select CurrentEvent.ID
		Case EVENT_WINDOWCLOSE Exit
	EndSelect
Wend
End

Function CreateHiddenWindow:TGadget( title:String = Null)
	Local win:TGadget = CreateWindow( title, 0,0,0,0, Null, WINDOW_HIDDEN)
	Local hwnd:Int = win.Query(QUERY_HWND)
	ShowWindow( hwnd, SW_SHOW)
	Return win
EndFunction
</pre><br>EDIT: Oh, and heres the testbed i used if you want to continue trying yourself ;)<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

SuperStrict

Import MaxGUI.Drivers


'Local w:TGadget = CreateWindow( "test", 300,300, 640,480, hidden, WINDOW_TITLEBAR | WINDOW_RESIZABLE)
Local w:TGadget = CreateWindow( "test", 0,0, 640,480, Null, WINDOW_TITLEBAR | WINDOW_CENTER)
RemoveSysMenu w
'MakeToolWindow w
'RemoveIcon w

 
While WaitEvent()
	Select CurrentEvent.ID
		Case EVENT_WINDOWCLOSE Exit
	EndSelect
Wend
End

Function RemoveSysMenu( w:TGadget)
	Local hwnd:Int = w.Query(QUERY_HWND)
	Local style:Int = GetWindowLongW( hwnd, GWL_STYLE)
	SetWindowLongW( hwnd, GWL_STYLE, style &amp; ~WS_SYSMENU)
EndFunction

Function MakeToolWindow( w:TGadget)
	Local hwnd:Int = w.Query(QUERY_HWND)
	Local style:Int = GetWindowLongW( hwnd, GWL_EXSTYLE)
	SetWindowLongW( hwnd, GWL_EXSTYLE, style | WS_EX_TOOLWINDOW)
EndFunction

' doesnt work, because one cant make a window a dialog after the fact.
Function RemoveIcon( w:TGadget)
	Const WM_SETICON:Int = $80
	Const ICON_SMALL:Int = 0
	Const ICON_BIG:Int = 1
	
	Local hwnd:Int = w.Query(QUERY_HWND)
	Local exstyle:Int = GetWindowLongW( hwnd, GWL_EXSTYLE)
	SetWindowLongW( hwnd, GWL_EXSTYLE, exstyle | WS_EX_DLGMODALFRAME)

	SendMessageW( hwnd, WM_SETICON, ICON_SMALL, 0)		
	SendMessageW( hwnd, WM_SETICON, ICON_BIG, 0)
		
	SetWindowPos( hwnd, 0, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_NOZORDER | SWP_FRAMECHANGED)
EndFunction
</textarea> <br><br></td></tr></table><br>
<a name="1326364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks grable, the first example did it! awesome, problem solved :D <br><br></td></tr></table><br>
<a name="1326369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Happy to help :)  Note that i simplified the sample above, dont need that SetWindowLong after all. <br><br></td></tr></table><br>
<a name="1326371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok got it thanks. :) <br><br></td></tr></table><br>
<a name="1326386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice stuff grable. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
