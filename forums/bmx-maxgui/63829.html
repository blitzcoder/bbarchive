<!DOCTYPE html><html lang="en" ><head ><title >codearea control</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >codearea control</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >codearea control</a><br><br>
<a name="712442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been playing around with this for a while now but it's starting to get close to a production state.  there still are some things I need to clean up and some more functions to add.  it does cut and paste, those are f1 and f2 for now.  performance is good... it will load, highlight and set up folding for a 7000 line file in under 1500 ms on my computer.  oh yeah, I'm not working on an editor... just a replacement for the textarea control (I am tempted)<br><br>some features are:<br>pc / mac<br>folding<br>scope completion<br>limited syntax checking<br>simple doc type files for almost any language<br>tons of options accessible by the programmer<br>modifiable key shortcuts<br><br>planned…<br>linux<br>selections still need work<br>macros<br>other editing shortcuts<br>split view (almost done)<br>more syntax features (multiline blocks like rem not complete yet)<br>bookmarks<br><br>Is there anything else anybody would like to see?  Also, if you can test the performace that would be great...<br><br><img src="http://ooeyug.com/files/codearea/codearea.PNG"><br><br><a href="http://ooeyug.com/files/codearea/test.exe" target="_blank">download PC demo</a> <br><br></td></tr></table><br>
<a name="712592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've only had a quick play, but it looks very nice.  A few things that are missing or would be nice:<br><br>- Rem &amp; EndRem support (should generate an auto-end rem like function &amp; method do, and should be foldable too)<br>- If blocks should also be foldable.<br>- Case statements within a select should possibly be foldable<br>- double click a word selects all of that word<br>- shift+arrow should select blocks of code<br>- ctrl+arrow should select to end of current word, and if pressed again, to next word. (i think that's right, check textarea behaviour)<br>- Should the first line be 0 or 1? ;)<br>- templates would be nice<br>- right click menu to access common functions<br>- when selecting a block, allow tab and shift-tab to do block outdent / indent<br>- auto-indent (e.g. if x then should add a tab to next line)<br>- undo / redo (not just the last one either - multiple undos)<br>- I'd like to see a gutter available on the left to indicate stuff.  e.g. break points, todos, etc.<br>- auto-complete<br>- help on commands (e.g. show a tooltip-a-like under the command once types with the mini-help, then F1 to jump to full help).<br>- multi-language support (C, C++, HTML, XML)<br><br>Oops, just saw a couple of these in your notes above!<br><br>As for your comment about writing an IDE, once it's linux friendly too, I'd love to look into plugging this into the CE IDE. <br><br></td></tr></table><br>
<a name="712601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, just loaded the BRL maxide.bmx file.  Instantly.<br><br>Now to be fair, you're not currently highlighting everything, but still...<br><br>Couple more:<br>- code navigation tree<br>- highlight block of code you're currently in, e.g. background normally white, current block in that nice orangey colour, or make the separator lines bold?<br>- auto-collapse / auto-expand all<br>- some way of grouping declarations into a foldable block would be nice, although this is a bit tricky as max doesn't enforce declarations at the top of a type / function, and could be scatterred. <br><br></td></tr></table><br>
<a name="712611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> - ctrl+arrow should select to end of current word, and if pressed again, to next word. (i think that's right, check textarea behaviour) <br></div><br><br>Nope, should be CTRL+SHIFT+ARROWS<br><br>SHIFT+END to select to the end of the line<br>SHIFT+HOME to select to the beginning<br>CTRL+SHIFT+HOME to select to the beginning of the textarea<br>CTRL+SHIFT+END to select to the end<br><br>CTRL+ARROW to jump the cursor one word.<br>etc.<br><br><br>Looking good btw :) <br><br></td></tr></table><br>
<a name="712612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> - Rem &amp; EndRem support (should generate an auto-end rem like function &amp; method do, and should be foldable too) <br></div>next on my list<br><div class="quote"> - If blocks should also be foldable. <br></div>this one is hard... if and then or just if.... I already can fold if endif but a straight if will break<br><div class="quote"> - Case statements within a select should possibly be foldable <br></div>dont' know about this one<br><div class="quote"> - double click a word selects all of that word <br></div>planned<br><div class="quote"> - shift+arrow should select blocks of code <br></div>planned<br><div class="quote"> - ctrl+arrow should select to end of current word, and if pressed again, to next word. (i think that's right, check textarea behaviour) <br></div>planned<br><div class="quote"> - Should the first line be 0 or 1? ;) <br></div>yeah it should be but it might be too late<br><div class="quote"> - templates would be nice <br></div>ide?<br><div class="quote"> - right click menu to access common functions <br></div>ide?<br><div class="quote"> - when selecting a block, allow tab and shift-tab to do block outdent / indent <br></div>planned<br><div class="quote"> - auto-indent (e.g. if x then should add a tab to next line) <br></div>wait.... it does...?<br><div class="quote"> - undo / redo (not just the last one either - multiple undos) <br></div>planned<br><div class="quote"> - I'd like to see a gutter available on the left to indicate stuff. e.g. break points, todos, etc. <br></div>planned... break points, ide I think<br><div class="quote"> - auto-complete <br></div>planned<br><div class="quote"> - help on commands (e.g. show a tooltip-a-like under the command once types with the mini-help, then F1 to jump to full help). <br></div>planned and ide<br><div class="quote"> - multi-language support (C, C++, HTML, XML) <br></div>done, well mostly done.<br><br><div class="quote"> As for your comment about writing an IDE, once it's linux friendly too, I'd love to look into plugging this into the CE IDE.  <br></div><br>Yep! that's why I wrote it... but I did get a little carried away I think, since this will gut some of that.  BTW, it should be linux friendly I just haven't compiled it there yet.<br><br><div class="quote"> Wow, just loaded the BRL maxide.bmx file. Instantly.<br><br>Now to be fair, you're not currently highlighting everything, but still...<br><br>Couple more:<br>- code navigation tree<br>- highlight block of code you're currently in, e.g. background normally white, current block in that nice orangey colour, or make the separator lines bold?<br>- auto-collapse / auto-expand all<br>- some way of grouping declarations into a foldable block would be nice, although this is a bit tricky as max doesn't enforce declarations at the top of a type / function, and could be scatterred. <br></div><br>well I think the only thing I'm not highlighting that maxide does is the secondary keywords like CreateGadget.  that is not expensive at all, finding the start and end of blocks for folding and rem type things is what slows it down.<br><br>-code navigations tree, well I was thinking about adding lists in the control which the programmer of the ide can access for those...<br>-hightlight block of code, really...? I can add that.  all colors are changable btw.  you can even assign different colors to the arrows.<br>-auto-collapse yeah, grouping declarations... once rem and end rem type statement working then it's just a matter of defineing it in the language definition.  for blitz 'Region comment..... 'End Region<br><br><br>I did notice that there were a bunch of things I broke over the last couple of days... still have a ways to go. <br><br></td></tr></table><br>
<a name="712622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re: CE &amp; IDE, yeah, I had figured you were hoping to plug it in from comments you made a while back: I was just checking that you hadn't gone all capitalist, and wanted to write your own. ;)<br><br>In terms of when to try plugging it in, I think that comes when undo / redo and the other standard keyboard shortcuts are in (copy/paste/select words/etc) outlined above.  All the rest can be added later...<br><br>Also, the comments about what's in the control and what's in the IDE, you're absolutley right that many of the things I mentioned need to be exposed to the programmer, not necessarily hard coded into the control itself.<br><br>For example, auto-collapse etc are logically icons in the IDE - we'd just need to make sure there's a method available to tell the textarea to do it.  Things like the gutter, I think there needs to be a mechanism for the IDE to set an image in the gutter on any given line, but again probably isn't part of the control itself.<br><br>I did mean to ask about the linux piece - whether it's known not to work on linux or just not compiled there yet.  I'll try to dust off my linux box over the weekend and give it a go, although I'm kind of hoping Brucey might pop his head in here...<br><br>On folding If's, it ought to be possible to determine whether it's single line - the compiler does.  Which isn't to say it's easy!  I do think there's a question about whether to fold to the next endif, or the else, or elseif though...and this kind of applies to the case statement folding thing.  <br><br>On the auto-indent piece, I'm sure it didn't auto-indent after typing "If x then", although it did auto-indent on other things.  I'm gussing this boils down to the same "I don't know if it's a single or multi line if" problem?<br><br>On the templates, there's two levels.  One is a set of copy and paste templates, the other is that when you type Function xxx() and you currently add end function, that you could more than just end function.  For example, a standard format rem block for commenting the code.  The former is the IDE, the latter requires that the "standard auto-complete patterns" be exposed and configured by the IDE. <br><br></td></tr></table><br>
<a name="712781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will concentrate on the basics and the bugs I know about.  The api is pretty solid already, I expose most everything.  I not going to get a chance to work on it though until the weekend…<br><br>thanks guys <br><br></td></tr></table><br>
<a name="712911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks good, dmaz, looking forward to using this in the future possibly. <br><br></td></tr></table><br>
<a name="713212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I not going to get a chance to work on it though until the weekend… <br></div><br>No probs - I don't have much time either, as work is taking me to Glasgow (from Birmingham) for a couple of days a week at the moment. <br><br></td></tr></table><br>
<a name="719677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Booticus</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oy! There a chance I could grab the demo again?? Just wanted to give it a run and seems the link is down. :) <br><br></td></tr></table><br>
<a name="719945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> sure, here you go... remeber it's only a "control" and a work in progress so there is still much to do<br><br><a href="http://ooeyug.com/files/codearea/test.exe" target="_blank">PC DOWNLOAD</a> <br><br></td></tr></table><br>
<a name="719987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Booticus</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahhhhhhhhhhhh that's NICE. Verrrryyyy nice. Would be killer to get THAT integrated with the IDE....ANY IDE.<br><br>FYI it loaded a 4300 line chunk of code and diddled its color coding in like a half second. Neat! Keep us posted! <br><br></td></tr></table><br>
<a name="720099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks... that's my plan, the CE ide for sure and others will be welcome. <br><br></td></tr></table><br>
<a name="720379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this using a canvas so 3d acceleration for a textbox ? Or are you using native gdi (don't now what mac os uses) painting functions. Just curious.<br><br>It is looking good.<br><br>*edit*<br>I found a bug. When you stretch the window past a certain size, the redrawing seems to fail. I suspect it is using a canvas then.<br><br>also editing a function when there is alot of code after it, so changing "function lalal()" to "hellofunction la()" causes a massive 4-5 second pause!<br><br>Perhaps when you edit an existing block it needs to know where the block ends so it can know where to stop/pause the scan. it could then complete it once you change line ? That way you can make an alteration to the line and it will intelligently wait for you to finish typing before rescanning the entire doc. <br><br></td></tr></table><br>
<a name="720392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> it is canvas, mac compatible.  yeah, there are some bugs but the ones you mention I can't reproduce...<br><br><div class="quote"> When you stretch the window past a certain size, the redrawing seems to fail. <br></div><br>how big?  I have no problems stretching to 1600x1200<br><br>the block code doesn't scan on the edit you just described but normally it will only go to the end of the block or beginning of the block depending on which line you edited. I'm not going to worry about that one until I've stopped playing with different implementations of the blocking code. <br><br></td></tr></table><br>
<a name="720398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> also editing a function when there is alot of code after it, so changing "function lalal()" to "hellofunction la()" causes a massive 4-5 second pause! <br></div><br>yeah, I can't reproduce that even with a 7000 line program.  does this happen every time when you do the above?  When exactly does the pause happen?  do you type a space after hello?  yeah, I know I said I wasn't going to worry about this one... <br><br></td></tr></table><br>
<a name="720416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Booticus</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey I duplicated skn3[ac]'s "stops updating" error as well, if I have the editor window solely on my secondary it works unless I expand it past a certain point. Primary monitor it works fine, expand to fullscreen too, the works. <br><br></td></tr></table><br>
<a name="720558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> dmaz, its when i type space before the action "function" part. So it changes to " function". Just causes an insane pause. I had loaded a 4000 line doc, then copied and pasted another 6000 lines at random. So some of the code blocks were probably broken. <br><br></td></tr></table><br>
<a name="720616"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok... thanks, I'll be able to test that tonight. I have an idea about what happened... <br><br></td></tr></table><br>
<a name="720771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> skn3, I can't seem to get to do the pause.... I start with a 7300 line file then select 0-3300(w/blocks broken), copy find a random place and paste...   when I paste there is about a 1 to 2 second delay there but after that all changes are immediate for me. did that a few times, by the end I was working with 17000 lines.<br><br>can you re-download (I'm pretty sure it's the same) and try it again. <br><br>can anybody else reproduce this? <br><br></td></tr></table><br>
<a name="722134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't reproduce the problem.<br><br>dmaz, not sure if you're aware, but in the CVS, I have a MAXIDE2 branch of code which is intended to be a substantial overhaul of code.  Please feel free to upload your code area and start integrating with that branch of code as soon as you like.  Not sure what your intention is code-wise (i.e. did you want to release the module, not the code?), but if you're happy to, please feel free to drop your source in too.  I may even be able to help out on some of it... <br><br></td></tr></table><br>
<a name="722630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> well that's good but I really don't like not knowing what something like that was...<br><br>yeah I have that branch. I still have a little cleanup but hopefully I will start incorporating it this weekend, next for sure. once I have a compile I will upload the changes...<br><br>Mark, it will gut lots of code... is that going to be alright or should you create another branch? <br><br></td></tr></table><br>
<a name="722684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I'min the middle of restructuring a whole bunch of stuff to:<br><br>a) Simply tidy up the type structure<br>b) Simplify the way GUI elements operate into a single unified base type<br>c) Amend all the GUI elements such that they can be attached to any "panel"<br>d) Allow full re-configuring of "panels" in the IDE.<br><br>I think I need to get a little further, but I'll have a look to see if it will be possible to do the bare minimum on the existing "codepanel" types, such that you can then hack that section of code.  Ideally, you'll only need to hit one or two files if I get this right...<br><br>I think it would probably be a good idea to schedule a chat over the weekend?  drop me an email. <br><br></td></tr></table><br>
<a name="730384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> for anyone interested in an update on this....<br><br>I've been decided I needed to move from using TMap to a ternary search tree so I ported one one those and will be implementing it shortly.  I've also implemented blocks but I'm not yet fully satisfied with it.  Other than that I haven't really done much more as work has been heavy, new girlfriend and I bought a Wii.  this next week I will be out on vacation but I expect to get back to this the following week. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
