<!DOCTYPE html><html lang="en" ><head ><title >Runs on PC but not on Mac</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Runs on PC but not on Mac</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >Runs on PC but not on Mac</a><br><br>
<a name="1207031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TAS</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a game. It runs in a Max GUI window and consists of two side by side canvases.  It runs fine under Windows 7 but when I compile it on a Mac Mini it draws correctly one time than the whole window area shows one canvas or the back buffer before it crashes.  Disabling Event hooks or canvas drawing doesn't change the result. Print statements seem to indicate the crash occurs in the waitevent() loop rather than during screen drawing.  Debug mode does not yield any useful information and seems to shorten the time for the crash to occur.   The Mac error report usually indicates some sort of memory violation.   Any ideas what cause could be? <br><br></td></tr></table><br>
<a name="1207044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you use the function ActivGadget()? Or a toolbar Gadget? <br><br></td></tr></table><br>
<a name="1207080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TAS</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No toolbar gadgets but lots of activategadget calls to return the focus to the main canvas <br><br></td></tr></table><br>
<a name="1207149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make sure to call SetViewport at the beginning of your EVENT_GADGETPAINT handler. <br><br></td></tr></table><br>
<a name="1207154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TAS</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added  set viewport set to canvas size and commented out all  activate gadget  commands.   It updates the canvas once, enters the main loop, executes one EVENT_GADGETPAINT and than crashes before as soon as an enters a waitevent().   Hooks have been disabled.  Here's the error report<br><br>Thread 0 Crashed:: Dispatch queue: com.apple.main-thread<br>0   libobjc.A.dylib               	0x94dd1a8b objc_msgSend + 27<br>1   com.apple.AppKit              	0x9164cc08 -[NSWindow dealloc] + 1259<br>2   00 Main.debug                 	0x000b14e1 -[WindowView dealloc] + 465<br>3   com.apple.AppKit              	0x915125b3 -[NSWindow release] + 170<br>4   libobjc.A.dylib               	0x94dd4442 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 490<br>5   com.apple.CoreFoundation      	0x90168a73 _CFAutoreleasePoolPop + 51<br>6   com.apple.Foundation          	0x93e86116 -[NSAutoreleasePool release] + 125<br>7   00 Main.debug                 	0x00002f1d bbFlushAutoreleasePool + 45<br>8   00 Main.debug                 	0x002672df updateEvents + 431<br>9   00 Main.debug                 	0x00267507 bbSystemWait + 39<br>.... lots more <br><br></td></tr></table><br>
<a name="1207161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you found the same ActivGadget() problem like me?<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=100857#bottom" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=100857#bottom</a> <br><br></td></tr></table><br>
<a name="1207240"></a>

<a name="1207241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you in Debug mode?<br><br>If it is easy to reproduce and you are happy to send me your project, pls email me at my blitzbasic.com email address. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
