<!DOCTYPE html><html lang="en" ><head ><title >Overriding Window.ClientHeight() ... Windows</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Overriding Window.ClientHeight() ... Windows</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >Overriding Window.ClientHeight() ... Windows</a><br><br>
<a name="1159642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>What would be the best way to override the Gadget.ClientHeight() command at the gadget level? Specifically a window.<br><br>I need to add a small adjustment to the result but only for a main window. I only want to alter the result returned by a TWindowsWindow.ClientHeight() but without altering any of MaxGUI. Simply using the function ClientHeight(Gadget) won't work as the Gadget.ClientHeight() is used internally for calculations.<br><br>So I'm thinking maybe some simple way of creating my own window type that derives from TWindowsGadget and I create my own ClientHeight() method, but it's not as easy as just doing that as it involves calling a whole setup process within MaxGUI which doesn't support my Type.<br><br>I'm sure there must a better and easier way as I want to override that one method?<br>Proxy gadget? Is that what I need? If so what's involved with getting a proxy gadget to work properly?<br><br>All help and ideas are appreciated.<br>Thanks. <br><br></td></tr></table><br>
<a name="1159683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't understand what you are trying to do.<br><br>If you need to calculate a new window size and you don't know the value of the window frame (if that is the problem) you can use GadgetHeight(window) - ClientHeight(window) to find out.<br><br>If you want to resize the window but you don't want to resize the gadgets on top, put them on an extra panel and set the GadgetLayout(Panel) to what you need, either to resize with the window or not.<br><br>Or could you more explain what you want to achieve at the end. <br><br></td></tr></table><br>
<a name="1159690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi jsp,<br><br>This is the problem...<br><br>The UIRibbon interface HAS to be attached to the main window. When it gets attached Win7 actually moves the top of the window client area 30 pixels up into the titlebar and adjusts the client height to be 30 pixels higher in size. Somehow the algo used in TWindowsWindow.ClientHeight() manages to return the original value without the 30 pixel addition which causes all child gadgets to be 30 pixels higher up the window, leaving a 30 pixel gap along the bottom. It's taken me ALL day to find this one bug.<br><br>Its sooo simple to fix, but as it is it means I have to modify the MaxGUI TWindowsWindow.ClientHeight() method to add the 30 pixels on. I didn't want to do that as MaxGUI isn't always going to be used with UIRibbon.<br><br>So, I could write a whole load of Types and Methods that will derive from ( or Extend from ) the original MaxGUI Types, but it such a huge amount of code all because I want to just overload one simple Method. <br><br></td></tr></table><br>
<a name="1159696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This reminds me of MaxGUI Version 1.34<br>Before the toolbar was not taken into account into the client area, but versions above did.<br>Does your ribbon interface change during runtime?<br><br>If not, the programmer could take care as he knows when using the UIRibbon, although not the smartest solution.<br><br>Maybe better: I could imagine a normal window gadget extended and overwriting your ClientHeight() and putting this into a proxy gadget to make it again a "standard" gadget. That should be MaxGUI conform. <br><br></td></tr></table><br>
<a name="1159698"></a>

<a name="1159700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The ribbon doesnt change in this respect during runtime. I know what you mean about the programmer but he/she doesn't have low enough control to overcome this bug though, the problem is the returned height of the internal ClientWindow which is just one step out of ( normal programmer ) reach at the MaxGUI level.<br><br>I'm just looking for the simplest method possible.<br><br>I was thinking of somehow using a proxy gadget but I've never experimented with them before today. I ( admittedly very quickly ) got something compiling but it would crash at the TWindowsGadget.QueueResize complaining of accessing a Null Object and I carried on with other areas while thinking before posting for ideas.<br><br>I'll have to look deeper into the proxy gadget method as it seems the most sensible 'cleaner' way to go for me and definitely for the programmer. Ultimately I want the programmer experience as least confusing as possible even at the expense of a little more code in the interface.<br><br>Do you have any heads up tips or gotchas with using the proxy gadget method? Is there a flag I need to set to prevent my previous error? I've since noticed the SetProxy method which I didn't set earlier and I imagine I do need to call it. I'll have a go with this tomorrow.<br><br>Thanks.<br><br>EDIT:-You can see the bug in the <a href="/posts.php?topic=98106" target="_blank">example pics</a> I posted a while ago - the grey area at the very bottom of the window. For eg, in those pics the TextArea is set to the ClientHeight() already and MaxGUI doesn't know how take the adjusted height into account.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1159715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't know about this specific error condition - doesn't ring a bell, but yes the proxy method needs to be called. You would set the extended window as the proxy gadget. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
