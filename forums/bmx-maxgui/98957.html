<!DOCTYPE html><html lang="en" ><head ><title >PaintPanel - native gadget painting windows + osx</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >PaintPanel - native gadget painting windows + osx</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >PaintPanel - native gadget painting windows + osx</a><br><br>
<a name="1159430"></a>

<a name="1159431"></a>

<a name="1159432"></a>

<a name="1175296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok I have just finished wrapping up my paintpanel module for windows and mac.<br><br><a href="https://bitbucket.org/skn3/paintpanel" target="_blank">https://bitbucket.org/skn3/paintpanel</a><br><br>The repo includes the module, example and is pre compiled for windows and mac. Painting is easy, just hook into EVENT_GADGETPAINT and start using the paint methods belonging to the Skn3PaintPanel.<br><br>All the methods are documented but it should be pretty self-explanatory.<br><br>If you find any bugs then please post here or commit to the repo. If anyone wants to port this to linux then again please do so!<br><br>Screenshot showing mac and windows example running:<br><img src="http://www.skn3.com/junk/images/paintpanel-screenshot.png"><br><br>Enjoy!<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1159458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Created my first gadget using this lib. There is no much point in me sharing it as it uses lots of base gadget stuff I have but at least the demo can be played with :)<br><br>It is a color button that reacts to mouse events and only uses a single panel that is painted.<br><br><a href="http://www.skn3.com/junk/modules/paintpanel/colorbutton.zip" target="_blank">http://www.skn3.com/junk/modules/paintpanel/colorbutton.zip</a><br><br><img src="http://www.skn3.com/junk/modules/paintpanel/colorbutton-screenshot01.png"> <br><br></td></tr></table><br>
<a name="1159685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for sharing, will check it out. <br><br></td></tr></table><br>
<a name="1160441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updated now and added PaintTextDimensions() which will return dimensions for the given text. The existing method PaintText() will now also return the dimensions after drawing. This can be useful for drawing text elements one after the other. <br><br></td></tr></table><br>
<a name="1160471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice. <br><br></td></tr></table><br>
<a name="1160566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >macklebee</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> where can i get the modules for skn3.callback and sk3.funcs to try this? <br><br></td></tr></table><br>
<a name="1160567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> where can i get the modules for skn3.callback and sk3.funcs to try this?  <br></div><br><br>The link is in the first post. <br><br></td></tr></table><br>
<a name="1160584"></a>

<a name="1160585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> My bad I have committed with those bits commented out and the maxgui bits uncommented. You shouldn't need them now. If anyone knows a way to conditionally commit portions of code to git then let me know.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1160623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >macklebee</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks skn3... will have a go at it now... <br><br></td></tr></table><br>
<a name="1162292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Captain Wicker (crazy hillbilly)</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi skn3. <br>I have a small problem.<br><pre class=code>Building example1_maxgui
Compiling:example1_maxgui.bmx
Linking:example1_maxgui
Undefined symbols for architecture i386:
  "_Skn3PaintPanelPaintTextDimensions", referenced from:
      __skn3_paintpanel_Skn3PaintPanel_PaintTextDimensions in paintpanel.release.macos.x86.a(paintpanel.bmx.release.macos.x86.o)
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status
Build Error: Failed to link /Applications/BlitzMax/mod/skn3.mod/paintpanel.mod/example1_maxgui.app/Contents/MacOS/example1_maxgui
Process complete
</pre> <br><br></td></tr></table><br>
<a name="1162299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey there, have you rebuilt the modules? <br><br></td></tr></table><br>
<a name="1162311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Captain Wicker (crazy hillbilly)</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes. I have rebuilt all modules and rebuilt documentation, but it will not work.<br><pre class=code>
OSX Mountain Lion 10.8.2
Intel Core i7 @2.8GHz
AMD Radeon 6770M 512MB
8GB RAM (DDR3) @1333MHz
</pre> <br><br></td></tr></table><br>
<a name="1162359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok will take a look tomorrow when I get to work. Thanks for poi ting it out :) <br><br></td></tr></table><br>
<a name="1163498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really sorry about not getting to this, I am incredibly busy at the moment but I will get around to it. <br><br></td></tr></table><br>
<a name="1165220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rs22</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for this! Very useful! <br><br></td></tr></table><br>
<a name="1176963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get the same problem, so I commented out all mentions of that function.<br><br>This code saved my ass.  We were having some redraw errors using OpenGL to render a custom tree view.  I replaced the OpenGL calls with this code, and it's perfectly stable and reliable. <br><br></td></tr></table><br>
<a name="1177149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Apologies for the long delay! There was simply a missing glue function call in the objc code.<br><br>The repo has been updated. Just make sure you move over to the bit bucket repo. <a href="https://bitbucket.org/skn3/paintpanel" target="_blank">https://bitbucket.org/skn3/paintpanel</a> It is linked at the top of the page.<br><br>I didn't bother testing on mac as it was switched off, but it was a really simple fix so should be fine. Let me know if it fails and I'll stop being lazy.. haha. <br><br></td></tr></table><br>
<a name="1177167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >shinkiro1</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, maybe I am just not getting this, but what is the difference between this and a canvas?<br>Has it got something to do with performance or flickering? <br><br></td></tr></table><br>
<a name="1177201"></a>

<a name="1177202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Creating a canvas is actually creating a DirectX or OpenGL instance. This is quite memory intensive, especially if you are using a canvas per custom gadget. There are also issues with certain hardware when you try and draw the same image on multiple canvas. The final issues is the inability to draw antialiased text on a canvas.<br><br>Paint panel uses the os native drawing commands so performance should be increased and you will have a lower hardware requirement for your app. <br><br></td></tr></table><br>
<a name="1177236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >shinkiro1</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> That totally makes sense :) <br><br></td></tr></table><br>
<a name="1177302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Difference is also:<br>canvas: Win,Mac,Linux + normal BlitzMax instruction set<br>skn3's element: Win,Mac (at the moment) + custom instruction set<br><br><br>bye<br>Ron. <br><br></td></tr></table><br>
<a name="1177313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, what you want is a panel-based Max2D, rather than a completely new set of commands.<br><br>Then you simply tell Max2D, "This is your current graphics driver", and you can use the same commands (as you do with OpenGL/DX) to paint onto it. <br><br></td></tr></table><br>
<a name="1177317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Brucey - yes.<br><br>But in that case this would mean, that there is a kind of "graphicsdriver" which handles the native draw commands of each platform and therefor is able to translate "maxcode" to "native".<br><br><br>At the moment you are not able to use the maxgui canvas with additional windows: the windows are not redrawn until forced (move out of the desktop and in...) and events like gadget_repaint or "RedrawGadget"-commands are not working here with FLTK/linux.<br><br>So that native gadget window is nice - but "useless" for me as it only supports windows/mac.<br>Means: if you need custom looking widgets, or graphical representations (diagrams, curves,...) you are better looking for wxmax (but this will take you into the combat with symlinking 32bit libs on 64bit etc.).<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1177458"></a>

<a name="1177459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Yeah, what you want is a panel-based Max2D, rather than a completely new set of commands. <br></div><br><br>That would be a nice feature, is that one of your secret projects?<br><br>Somone got near making a GDI driver a while back <a href="http://www.blitzbasic.com/Community/posts.php?topic=56055" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=56055</a> but it didn't appear to get finished.<br><br>There is one big negative though, if you wrote a Max2dOSDriver you would then not be able to have a max2d gl/dx canvas alongside native gadget drawing. <br><br>The purpose of my module was not to replace the canvas but instead to add extra functionality, hence the extra command set. If I had more time I would have started adding in Linux support and some of the more advanced drawing operations. But alas I don't have spare time.<br><br>If anyone wanted to add linux glue for the commands then Id be happy to add them to the repo. <br><br></td></tr></table><br>
<a name="1277461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any Linux support for this?  I could really use it. <br><br></td></tr></table><br>
<a name="1277625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> paintpanel.h needs a change to compile.  Add @public at the top of this class:<br><pre class=code>#import &lt;maxgui.mod/cocoamaxgui.mod/cocoa.macos.m&gt;
#import &lt;maxgui.mod/maxgui.mod/maxgui.h&gt;
#import &lt;pub.mod/macos.mod/macos.h&gt;

@interface Skn3PaintPanelViewContent:PanelViewContent{
@public
	BOOL painting;
	PanelView *panel;
	NSBezierPath *path;
	NSColor *backgroundColor;
	NSColor *color1;
	NSColor *color2;
	NSGradient *gradient;
	NSFont *font;
}
-(id)initWithFrame:(NSRect)rect;
-(void)dealloc;
-(NSColor*)colorFromIntsRed:(int)red green:(int)green blue:(int)blue;
-(void)drawRect:(NSRect)rect;
-(void)setPaintBackground:(int)r g:(int)g b:(int)b;
-(void)setPaintColor:(int)r1 g1:(int)g1 b1:(int)b1 r2:(int)r2 g2:(int)g2 b2:(int)b2;
-(void)setPaintFont:(NSFont*)newFont style:(int)Style;
-(void)paintLine:(int)x1 y1:(int)y1 x2:(int)x2 y2:(int)y2 width:(int)width;
-(void)paintGradient:(int)x y:(int)y width:(int)width height:(int)height vertical:(int)vertical;
-(void)paintRect:(int)x y:(int)y width:(int)width height:(int)height;
-(void)paintOval:(int)x y:(int)y width:(int)width height:(int)height;
-(BBArray *)paintText:(NSString*)text x:(int)x y:(int)y width:(int)width height:(int)height wrap:(int)wrap hAlign:(int)hAlign vAlign:(int)vAlign;
-(BBArray *)paintTextDimensions:(NSString*)text x:(int)x y:(int)y width:(int)width height:(int)height wrap:(int)wrap hAlign:(int)hAlign vAlign:(int)vAlign;
-(void)paintBitmap:(NSImage*)image x:(int)x y:(int)y;
-(void)paintSubBitmap:(NSImage*)image x:(int)x y:(int)y width:(int)width height:(int)height sourceX:(int)sourceX sourceY:(int)sourceY sourceWidth:(int)sourceWidth sourceHeight:(int)sourceHeight;
@end</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
