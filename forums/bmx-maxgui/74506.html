<!DOCTYPE html><html lang="en" ><head ><title >Can someone please help fixing a listbox bug?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Can someone please help fixing a listbox bug?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >Can someone please help fixing a listbox bug?</a><br><br>
<a name="832297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello!<br><br>There's a listbox bug that causes the listbox items to completely disappear or to shift downwards when you resize / maximize / minimize a window. The bug isn't fixed in the axe module. It is said to exist since b+.<br><br>The only workaround found so far is to delete and recreate the listbox each time the window size is touched. Easy if you have one short listbox in your app. But not if you use tons of them with dozens of entries. <br><br>Bug reports and example codes:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=64433" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=64433</a> <br><a href="http://www.blitzbasic.com/Community/posts.php?topic=69056" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=69056</a><br><br>Any other ideas, how to solve this issue?<br><br>Grisu<br><br>P.S.:<br>I'm really sorry to make this call, but the bug "destroys" my app I have been working on for 1,5 years. :/ <br><br></td></tr></table><br>
<a name="832337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried both sets of code and I can't seem to recreate in Leopard (Intel). <br><br>Those large icons you provided don't space correctly though. They end up on top of each other. When replaced with smaller icons all is fine.<br><br>- David <br><br></td></tr></table><br>
<a name="832340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your help. This bug only occours under Win32!<br><br>Can you post a screenshot? <br><br></td></tr></table><br>
<a name="832350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> There's a listbox bug that causes the listbox items to completely disappear or to shift downwards when you resize / maximize / minimize a window. The bug isn't fixed in the axe module. It is said to exist since b+. <br></div><br>Hi Grisu,<br><br>I've been helping with the Axe.Win32MaxGUI development recently, so I thought I'd take a look at your problem. It appears that this is actually a *Windows* bug that occurs when <b>LVM_SETCOLUMNWIDTH</b> is called when responding to a WM_SIZE, or WM_WINDOWPOSCHANGING message. Anyway, it's a quick fix, so once I've finished off the other stuff in my release, I'll send it off to BRL for public consumption. Please stand by! <br><br></td></tr></table><br>
<a name="832353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://www.gibbongames.com/temp/grisu_listbox.jpg"><br><br>I don't think this overlapping is a MaxGui bug. I'm pretty sure Leopard is more strict than its predecessors re maximum gui object sizes.<br><br>Out of interest, why do you load the icons this way? <br><br>LoadIconStrip(MaskPixmap(LoadPixmap("icons.jpg"),-1,-1,-1))<br><br>couldn't you just <br><br>LoadIconStrip("icons.jpg") ? Probably a silly question - I've never worked with pixmap masks.<br><br>[edit: thanks Seb - I really appreciate all this great win32 gui work you are doing!]<br><br>- David <br><br></td></tr></table><br>
<a name="832467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Seb: Thanks a lot for looking into this. Quick fix? Sounds to easy to be true... :) Will you patch the normal guimodule as well or only the axe one?<br><br>@David: <br>LoadIconStrip(MaskPixmap(LoadPixmap("icons.jpg"),-1,-1,-1))<br><br>By using "Loadpixmap" you gain some extra milliseconds when loading images as this is an internal function bmx uses. If you know what images your app will eat, you can also use "LoadpixmapPNG" or "LoadpixmapJPEG".<br><br>The "maskimage" part is needed to to mask it -1,-1,-1. By default bmx uses 0,0,0 (i.e. black). My icons have black borders, I don't need to mask them at all, so this workaround. <br><br><img src="http://img149.imageshack.us/img149/9927/bild3nr4.jpg"><br><br>The iconsize does not matter, the bug will occour anyway,<br>I'm using big icons (96x96) and small ones on my list (16x16). See image above. <br><br></td></tr></table><br>
<a name="832555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Seb: Is it possible to "force" a listbox NOT to use an horizontal slidebar at all (even if the items inside are larger than the listbox width)? <br><br></td></tr></table><br>
<a name="832571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Will you patch the normal guimodule as well or only the axe one? <br></div><br>Well, I'm only working on the new module, though the fix is easy to add to the old one. I suppose it's up to Skid whether he adds it or not...<br><br><div class="quote"> @Seb: Is it possible to "force" a listbox NOT to use an horizontal slidebar at all (even if the items inside are larger than the listbox width)? <br></div><br>Sorry, but the Windows API doesn't support the selective removal of just one of the scroll-bars - you can only remove both. <br><br></td></tr></table><br>
<a name="832587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the explanation. Didn't know that.<br><br>Can one just copy the fix over to the old module by hand? <br>Or are there tons of changes needed?<br><br>The axe module in the last beta release is still far away from being done (especially parent / child window support is missing)... <br><br></td></tr></table><br>
<a name="832606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The axe module in the last beta release is still far away from being done (especially parent / child window support is missing)...  <br></div><br>I know that there are still a few things left to do, but it should be nearing completion. What version are you using? Skid uploaded v1.36 of Win32MaxGUIEx a day or so ago that was quite a major release... If that was the version you are referring to and it hasn't fixed your child window problems, please can you post some code that demonstrates the exact problems you are having, and I'll have a look...<br><br>Thanks <br><br></td></tr></table><br>
<a name="832897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using MaxGuiWin32: "Version: 1.36" and axe module: "Version: 0.34" and was refering to the axe module.<br><br>Will try to dig up short example codes. Somewhat over the weekend, as I'm busy atm. <br><br>Issues that I recognised for me:<br>- Multiple canvas in child and parent windows affecting each other when drawing to them.<br>- Child windows showing up "behind" the parent window instead of in front of it (only when the parent window is maximized?!).<br>- SetGadgetLayout on textareas not acting accordingly when maximizing a window.<br>- icon files (import objectfile.o) not used as windows icon anymore.<br><br>Thanks for all the hard work you put into this. <br><br></td></tr></table><br>
<a name="832968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re:<br><br>&gt;LoadIconStrip(MaskPixmap(LoadPixmap("icons.jpg"),-1,-1,-1))<br><br>Thanks for explaining!<br><br>- David <br><br></td></tr></table><br>
<a name="833189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> axe module: "Version: 0.34" and was refering to the axe module <br></div><br>Yeah, the latest Axe.Win32MaxGUI version is now 0.36, which is available via <a href="/posts.php?topic=74439" target="_blank">SVN</a> (although its name has changed to <b>MaxGUI.mod/Win32MaxGUI<u>Ex</u>.mod</b>). Let me know, which of the problems still exist with this version...<br><br>Btw, the problem with importing ".o" object files is something to do with program linking (as oppose to the module), so as a temporary fix, you could comment out the <i>Import "resource.o"</i> or <i>Import "xpmanifest.o"</i> from the top of <i>win32maxguiex.bmx</i> if you want to use your own (however, this will disable XP themes if a manifest file isn't included in your own object file). <br><br></td></tr></table><br>
<a name="833527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd really love to help / test, but I failed getting svn up and running. <br><br>May be because I'm only an ordinary, dumb bmx user...<br><br>Why not just upload it to the axe mod server, so that one can download / compile and run it easily? <br><br></td></tr></table><br>
<a name="833769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'd really love to help / test, but I failed getting svn up and running.  <br></div><br>I was a bit daunted at the idea of using SVN at first, but if you download <a href="http://tortoisesvn.net/downloads" target="_blank">TortoiseSVN</a> for Windows, after the initial set-up you can download (I think it's called 'checkout' in SVN langauge) any code updates simply by right-clicking on your installation folder in Windows Explorer, and selecting <b>SVN Update</b> from the context menu. It's working brilliantly on my main Vista PC! ;-) <br><br></td></tr></table><br>
<a name="833842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again Seb. <br><br>Installed and still failed to sync the directories. <br><br><img src="http://img86.imageshack.us/img86/8985/bild2ki8.png"><br><br>Could you e-mail me a plain zip file with the updated module? <br><br></td></tr></table><br>
<a name="833857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Could you e-mail me a plain zip file with the updated module?  <br></div><br>You aren't giving up that easily are you? ;-)<br><br>In TortoiseSVN, you shouldn't specify the folder you want to download to in the URL (it already knows this - you only need to specify the path if you were calling a command-line based SVN program that isn't integrated into the shell). <br><br>So basically, do what you did but don't add the folder onto the end, i.e. when entering the repository URL, just use:<br><br>http://www.blitzbasic.com:81/svn/maxgui/dev/maxgui.mod/<br><br>You can either delete your current <i>maxgui.mod</i> folder and start again, or right-click, and under the TortoiseSVN sub-menu, select <i>Relocate</i>, making sure to use the exact URL I have given above... <br><br></td></tr></table><br>
<a name="834187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still doesn't work. TortoiseSVN says the name is vaild, but no data was found? <br><br><img src="http://img340.imageshack.us/img340/4382/bild2vc3.png"><br><br>Can browse the http://www.blitzbasic.com:81/svn dir by hand, but can't find the module? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
