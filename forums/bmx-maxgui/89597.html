<!DOCTYPE html><html lang="en" ><head ><title >Properly canvas attach to bottom of window</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Properly canvas attach to bottom of window</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >Properly canvas attach to bottom of window</a><br><br>
<a name="1017726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need to attach 2 gadgets to the bottom of a window.<br><br>a scroll bar running along the entire bottom of the window, and a canvas just above that.<br><br>using<br>SetGadgetLayout(scrollBar, EDGE_ALIGNED, EDGE_ALIGNED, Null, EDGE_ALIGNED)<br>works fine for the scroll bar, it stays anchored to the bottom of the window. but the same layout for the canvas above it causes it to float away from the bottom.<br><br>If I use say a listbox instead of a canvas (just to test the layout) it stays anchored properly.<br><br>I know canvases can't be resized (I free the canvas and then re-create it in position after the EVENT_WINDOWSIZE fires to handle then new size) but is there any way to prevent it floating away, I think it's using relative size for all sides and not respecting the layout... <br><br></td></tr></table><br>
<a name="1017728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I know canvases can't be resized <br></div><br><br>Really?  I'm calling SetGadgetShape and resetting the viewport without problems. <br><br></td></tr></table><br>
<a name="1017731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> intersting, if they can be resized then why don't they resize with the window? are you using the default driver on windows by any chance? I'm currently testing on mac, but I plan on this project being cross platform and will be forcing openGL driver on windows as well... <br><br></td></tr></table><br>
<a name="1017744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I'm using the default Windows stuff and I've not tested on Mac yet.  My canvas is embedded in a tab view with SetGadgetLayout(1,1,1,1) and they resize automatically just fine.  I was calling SetGadgetShape manually but I've just checked and it was actually redundant. <br><br></td></tr></table><br>
<a name="1017856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> My suspicion is that it works in directX, but not openGL... could you do me a favor and throw <br>SetGraphicsDriver GLMax2DDriver()<br>at the top of your window create code to see what happens?<br><br>also, what happens if you don't attach one side to the window frame, so it resizes width but not height for example? specifically detach the top so it should follow the bottom of the window during resize... <br><br></td></tr></table><br>
<a name="1017862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> My suspicion is that it works in directX, but not openGL... could you do me a favor and throw<br>SetGraphicsDriver GLMax2DDriver()<br>at the top of your window create code to see what happens? <br></div><br><br>Tried that.  Everything worked fine, no change.<br><br><div class="quote"> also, what happens if you don't attach one side to the window frame, so it resizes width but not height for example? specifically detach the top so it should follow the bottom of the window during resize... <br></div><br><br>That was strange.  I make my gadgets "any old size" at creation time, and a use a function that works out all their positions and re-shapes them.  The same function is used when the window is resized.<br><br>By setting the layout to 1,1,0,1 the canvas actually appeared to have the top pixel aligned to the bottom of the parent client area.  There was just one row of pixels visible.  I tried lots of canvas sizes and when making a canvas any smaller than the parent gadget the behaviour is very confusing.<br><br>Do have some simple test code?  My canvas management is wrapped into a specialised canvas type. <br><br></td></tr></table><br>
<a name="1018055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found a couple of typos in my code that seem to be responsible for the glitching... kind of strange to me still, but I'll get over it.<br><br>However the auto resize does not properly resize the graphics context. I get corruption in the graphics area outside of the bounds it was initially created with. SetGadgetShape is not properly resizing the context either. My solution is to continue to use the freegadget and re-create it after the resize. The graphics area seems to vanish while the window is resizing anyway so it's not that big a deal. <br><br></td></tr></table><br>
<a name="1018077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> edit: fixed this post content <br><br></td></tr></table><br>
<a name="1018085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> To avoid the glitching when you resize the graphics context you have to reset the viewport, so I just set the viewport on every draw message;<br><br><pre class=code>
SetGraphics CanvasGraphics( canvas )
SetViewport( 0, 0, canvas.ClientWidth(), canvas.ClientHeight() )
</pre><br><br>I'm not sure what you're trying to do here or I could be of more help.  If you want to limit the position of the canvas inside the client of its parent control, why not do it manually?  Along the lines of...<br><br><pre class=code>SetGadgetShape( canvas, GadgetX( parent ) + 10, GadgetY( parent ) + 10, GadgetWidth( parent ) - 20, GadgetHeight( parent ) - 20 )</pre> <br><br></td></tr></table><br>
<a name="1018122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not at the right computer right now, but I think the viewport thing is the last bit I need to get this smoothed out... I assumed the viewport would get scaled along with the context.<br><br>Thanks for all the responses, it's been most helpful! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
