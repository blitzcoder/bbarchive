<!DOCTYPE html><html lang="en" ><head ><title >DrawText on Canvas without Antialiasing</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >DrawText on Canvas without Antialiasing</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >DrawText on Canvas without Antialiasing</a><br><br>
<a name="1039634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Apologies if this has been answered before, but having searched the forums I cannot find a solution.<br><br>I am using DrawText to write to a canvas. If I use "coure.fon", then the text is drawn beautifully crisp and clear (and black). However, I need to be able to draw both plain and italic text, so am using "cour.ttf" and "couri.ttf" respectively. However, the output is very poorly defined (medium grey) due to BlitzMax antialiasing the font when it draws it to the canvas. Is there a way to switch off this antialiasing or do I need to create an italic version of "coure.fon"? <br><br></td></tr></table><br>
<a name="1039681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ghost Dancer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you don't use antialiasing it will probably look a bit jagged, but you can turn it off by NOT using the SMOOTHFONT flag on LoadImageFont (it is on by default). You could also try changing the blend mode (see the SetBlend command) when you use DrawText, as you would when using any graphics command.<br><br>As an alternative, you can keep the antialiasing but try making the italic font bold (BOLDFONT flag - LoadImageFont) as that might give it the extra definition you need. You can combine the flags as follows:<br><br>LoadImageFont("couri.ttf", 12, SMOOTHFONT | BOLDFONT) <br><br></td></tr></table><br>
<a name="1039684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am not using the SMOOTHFONT flag on LoadImageFont. However - if it is ON by default how would I turn it off? I have tried LoadImageFont("cour.ttf",13,0) but that makes no difference (interestingly, BOLDFONT, or SMOOTHFONT | BOLDFONT had no effect either). I have also already tried different blend modes but the only one which leaves the font readable (as opposed to solid blocks) is ALPHABLEND. <br><br></td></tr></table><br>
<a name="1039686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ghost Dancer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are correct for using 0 for no flags. Not sure why it isn't working, I've never had a problem with LoadImageFont.  <br><br>Is it definately using the font you have specified? i.e. is the path correct? If not Blitz will use its default font which might give misleading results.<br><br>Could you post some code so we can see exactly what you are doing. <br><br></td></tr></table><br>
<a name="1039691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Ghost Dancer,<br><br>I am loading fonts like this:<br><pre class=code>
SetAlpha 1.0
SetBlend ALPHABLEND
FontIT=LoadImageFont("couri.ttf",13,0)
FontPL=LoadImageFont("cour.ttf",13,0)
</pre><br>selecting the style like this (from within a custom type):<br><pre class=code>
Method Font_SetStyle(RowID:Int)
	Select ClassData[LineData[RowID].Class].Italic
		Case 0
			SetImageFont FontPL
		Case 1
			SetImageFont FontIT
	End Select
End Method
</pre><br>and writing to the canvas like this:<br><pre class=code>
SetColor 0,0,0
For Local k:Int=0 To RowCount
	If RowTop+k&lt;LineCount
		DrawText Left(LineData[RowTop+k].Body,DrawLength),0,k*FontHeight
	EndIf
Next
</pre><br>I also just tried removing "style=SMOOTHFONT" from Max2d.mod and rebuilding the module, but this made no difference. <br><br></td></tr></table><br>
<a name="1039692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ghost Dancer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, SMOOTHFONT does not antialias, its used for scaling &amp; rotation so my bad there, sorry. However, SetBlend(MASKBLEND) esssentially turns of antialiasing and that definately works.<br><br>Not sure why you can't get BOLDFONT working either. I'm currently working on an app that makes extensive use of drawing fonts on the canvas and not had any problems with it.<br><br>Are your fonts in the same folder as your app? Otherwise they will not be loaded. <br><br></td></tr></table><br>
<a name="1039693"></a>

<a name="1266686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> They are yes. They are definitely being loaded ok as I have tried different fonts when testing and they all appear correctly on screen.  This is what I get:<br><br>ALPHABLEND (cour.ttf):<br>.<br><br>MASKBLEND (cour.ttf):<br>.<br><br>ALPHABLEND (coure.fon):<br>.<br><br>The last image is how I want the first one to look like (i.e. non-antialiased). Looks like I'm going to have to create an italic style FON file to do it. <br><br></td></tr></table><br>
<a name="1039694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ghost Dancer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It must be to do with the font definition or how its being rendered. You could try using the standard courier font with the ITALICFONT flag, which will force an italic style - see if that is any better. It might also be the size it is being rendered at - maybe try it a pixel or 2 bigger. <br><br></td></tr></table><br>
<a name="1039698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have already tried ITALICFONT on cour.ttf, but it had no effect. I am beginning to wonder if it's a graphics card issue... Thanks for your help though - I'm off to create me an italic version of coure.fon now! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
