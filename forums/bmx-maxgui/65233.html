<!DOCTYPE html><html lang="en" ><head ><title >What does SetPanelPixmap do ( and *when* ) ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What does SetPanelPixmap do ( and *when* ) ?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >What does SetPanelPixmap do ( and *when* ) ?</a><br><br>
<a name="728015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using SetPanelPixmap to put a pixmap on my window-filling panel. I want to write text over it, so I use TextOut in GDI32, because labels have ugly backgrounds I can't rid of and TextOut doesn't. Problem is, some of the text is shown and some isn't. If I let the window lose focus and regain ( which is when I redraw all the GDI stuff ) all the text is shown. So evidently SetPanelPixmap causes the image to be drawn at times other than when an EVENT_APPRESUME is thrown. I need to know what other times it will redraw the image so that I can redraw the text.<br><br>I tried doing it with GDI, but I'm not having any luck getting the image to show. I assume that SetPanelPixmap is using GDI32 under the hood anyway, I just need to know when it does it's thing so that I can do mine immediately after.<br><br>EDIT: I've added calls to the GDI drawing stuff on EVENT_APPSUSPEND, *all* EVENT_WINDOWACTIVATE instances and *all* EVENT_GADGETPAINT instances too, but it's still only drawing some, not all. Geez, there's not much left.<br><br>EDIT2: Ok, I've got it *kinda* pinned down but not sure what to do about it. I have a second window on top of the first one. When I hide the top window, I give focus back to the lower window. Whatever was underneath the upper window is not redrawn, even though the Redraw function is called as soon because I have the focus change event set to trigger it automatically. Now I'm stuck knowing how to fix that. Exactly when is BMax redrawing the panelpixmap and how do I detect that and redraw my stuff on top? <br><br></td></tr></table><br>
<a name="728077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been experiencing 'redraw' issues with panel pixmaps too. The only workaround I could find involves hiding the panel then showing it again immediately - this effectively forces a redraw. Not the most effective solution but it works for me... <br><br></td></tr></table><br>
<a name="730038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That does seem to do it, thanks. <br><br></td></tr></table><br>
<a name="731373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I always thought that once you called SetPanelPixmap() the panel would always show the image as a background, redrawing itself as necessary (like after another window moves across it, etc).<br><br>With the Linux GTK mod (it's nice when you have control over how things work!) I have the panel raising an ACTIVATE_REDRAW event when the system decides it needs redrawn (ie the panel has been invalidated in some way), which I catch and do two things. One, is to raise an EVENT_GADGETPAINT, and the other is to get the panel to redraw itself.<br>The GADGETPAINT event I found, was very useful if you (as the user) wanted some control over the pixmap.<br><br>I imagine the Win32/Mac GUI mods could do with something along these lines too, as it would most likely sort out the problems you've described.<br><br>I'm a firm believer of having as many EVENTs raised as possible, to allow the programmer lots of freedom to code. <br><br></td></tr></table><br>
<a name="732024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahhh.. and it's not the first time I've wished there was a Windows port of your GTK module either. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
