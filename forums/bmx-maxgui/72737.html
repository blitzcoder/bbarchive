<!DOCTYPE html><html lang="en" ><head ><title >TextField Focus Loss</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TextField Focus Loss</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=117" >MaxGUI Module</a>/<a href="#bottom" >TextField Focus Loss</a><br><br>
<a name="812987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Thareh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br>When I have focus on a TextField and press the Enter button,<br>the TextField looses focus, and if I try to use ActivateGadget on it right away it'll just loose focus instantly again.<br><br>I've tried using SetGadgetFilter, but the Enter button will not show up.<br><br>Anyone know how to solve this?<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Local WW:Int = 200
Local WH:Int = 50
Local WX:Int = GadgetWidth(Desktop())/2-WW/2
Local WY:Int = GadgetHeight(Desktop())/2-WH/2
Global MainWindow:TGadget = CreateWindow( "Testing.", WX, WY, WW, WH, Null, WINDOW_TITLEBAR | WINDOW_CLIENTCOORDS )

Global MainWindowInput:TGadget = CreateTextField( 5, 5, 190, 20, MainWindow )
Global MainWindowBtn:TGadget = CreateButton( "Click", 5, 25, 190, 20, MainWindow, BUTTON_OK )

ActivateGadget( MainWindowInput )

Repeat
	If PeekEvent()&lt;&gt;Null
		WaitEvent()
		Select EventID()
			Case EVENT_WINDOWCLOSE
				End
			Case EVENT_GADGETACTION
				Select EventSource()
					Case MainWindowBtn
						SetGadgetText( MainWindowInput, "" )
						ActivateGadget( MainWindowinput )
				End Select
		End Select
	EndIf
	
	Delay 2
	
Forever
</textarea><br><br><br>Just enter a text and press Enter, the textfield will loose focus and will not get it back even though I use ActivateGadget when the button gets pressed.<br><br>How it should work is that the Textfield should get focus again, but it doesn't for me..<br><br>Thanks <br><br></td></tr></table><br>
<a name="813107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried it in OSX and the textfield remains in focus after Enter.<br><br>-David <br><br></td></tr></table><br>
<a name="813108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works OK on WinXP BMax 1.24 with full syncmods. <br><br></td></tr></table><br>
<a name="813111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Appears to work on GTKMaxGUI on Linux too : pressing Enter leaves focus on the text field. <br><br></td></tr></table><br>
<a name="813278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Thareh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's strange, I removed all modules and re-downloaded them from Synchronize Modules, and still doesn't work.<br><br>Anyone have an idea on what could be wrong? :/<br><br>Oh, And I'm using WinXP SP2, with BMax 1.24.<br><br>Thanks :) <br><br></td></tr></table><br>
<a name="813302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you have 'Quick Build' turned on? Gives sometimes strange effects, so turn it off.<br>And try to delete the .bmx folder where your source file is located. <br><br></td></tr></table><br>
<a name="813307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Thareh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I never use 'Quick Build',  Tried the Delete .bmx folder thing, Didn't work either :/<br>It has always been like this, I remember trying to create a chat application a long time ago, had the same problem then. Very annyoing :S<br><br>Any more ideas? :P<br><br>Thanks <br><br></td></tr></table><br>
<a name="813483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Thareh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried the example on 2 other machines, WinXP no SP and  WinXP SP1, same thing happens there, TextField looses focus when I press enter. So it's not only my machine it happens on.<br><br>No clues? :/<br><br>Thanks :) <br><br></td></tr></table><br>
<a name="813487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I also am seeing the Text Field lose the focus.  No idea why... <br><br></td></tr></table><br>
<a name="813488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> After playing with this a bit more. I found that pressing Enter in a text field causes it to lose focus.  So, my guess is the problem you are seeing is the order of events.<br><br>Your button is getting the Enter press, then your text field is getting the enter press.  When the button gets the enter press, it clears the box and gives it focus, but then I think the text field is then getting the enter press which causes it to lose focus.<br><br>Funny thing is, the text field does not give any events when it gets the enter press except EVENT_GADGETLOSTFOCUS.  I tried this without the button and the text field loses focus on Enter, sends the EVENT_GADGETLOSTFOCUS and that is it. <br><br></td></tr></table><br>
<a name="813497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Had another look and I *do* lose focus.<br>I think this has been reported before though <br><a href="/posts.php?topic=57027#634002" target="_blank"> here </a><br>Not sure how it got put in the bugbin although BRL did get purge bug reports so they could start again some time ago. <br><br></td></tr></table><br>
<a name="813546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Thareh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for looking things up a bit TaskMaster,<br>I've come up with a 'Hack' solution to the problem.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Local WW:Int = 200
Local WH:Int = 50
Local WX:Int = GadgetWidth(Desktop())/2-WW/2
Local WY:Int = GadgetHeight(Desktop())/2-WH/2
Global MainWindow:TGadget = CreateWindow( "Testing.", WX, WY, WW, WH, Null, WINDOW_TITLEBAR | WINDOW_CLIENTCOORDS )

Global MainWindowInput:TGadget = CreateTextField( 5, 5, 190, 20, MainWindow )
Global MainWindowBtn:TGadget = CreateButton( "Click", 5, 25, 190, 20, MainWindow, BUTTON_OK )
Global ButtonPressed:Int = 0

ActivateGadget( MainWindowInput )

Repeat
	If PeekEvent()&lt;&gt;Null
		WaitEvent()
		Select EventID()
			Case EVENT_WINDOWCLOSE
				End
			Case EVENT_GADGETACTION
				Select EventSource()
					Case MainWindowBtn
						SetGadgetText( MainWindowInput, "" )
						ButtonPressed = 1
				End Select
		End Select
	EndIf
	
	If ActiveGadget() &lt;&gt; MainWindowInput
		If ButtonPressed = 1
			ActivateGadget( MainWindowInput )
			ButtonPressed = 2
		ElseIf ButtonPressed = 2
			ActivateGadget( MainWindowInput )
			ButtonPressed = 0
		EndIf
	EndIf
	
	Delay 2
	
Forever
</textarea><br><br>Just in case anyone else experience this problem and want to solve it.<br><br>Thanks :) <br><br></td></tr></table><br>
<a name="977658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> any good solution to this "bug" yet? <br><br></td></tr></table><br>
<a name="977702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> This behaviour was actually requested as a feature a while back but looking at this thread, a lot of people don't like it so I'll "fix" it for the next release.<br><br>Cheers for bringing it to my attention. <br><br></td></tr></table><br>
<a name="977705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks! <br><br></td></tr></table><br>
<a name="977734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, please don't change this behavior!  With most text values, you only want to update whatever the gadget controls when the focus is lost, not every time the user types a character!  The enter key is a good way to make the text field update with the lost focus event. <br><br></td></tr></table><br>
<a name="977739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it'd be better to add a LIVEUPDATE flag or something for creating the gadget, rather than making that the default behavior.  It could prove to be fairly slow for most uses, so it doesn't seem like a good thing to change, to me. <br><br></td></tr></table><br>
<a name="977748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It could prove to be fairly slow for most uses, so it doesn't seem like a good thing to change, to me <br></div><br>This isn't really what we're proposing a change to.  <b>EVENT_GADGETACTION</b> is generated whenever the text in a textfield/textarea changes - if a block of text is pasted in, then only one event should be generated, but obviously if the user is typing directly into the field, it will generate one event per character as the text is changing one character at a time.  And remember, you don't have to update your program after every EVENT_GADGETACTION - only if you want to.<br><br><div class="quote"> The enter key is a good way to make the text field update with the lost focus event. <br></div><br>I completely understand as I have wanted this type of behaviour in my own apps.  But if that is the behaviour you want, can't you just catch the enter key like so?<br><pre class=code>' createtextfield.bmx

Import MaxGui.Drivers

Strict 

Local window:TGadget, textfield:TGadget, button:TGadget

window = CreateWindow("My Window",30,20,320,200)

textfield=CreateTextField(4,4,120,22,window)
SetGadgetText( textfield,"A textfield gadget" )

' have an OK button to catch return key
button=CreateButton("OK",130,4,80,24,window,BUTTON_OK)
HideGadget button

ActivateGadget textfield

While WaitEvent()
	Print CurrentEvent.ToString()
	Select EventID()
	Case EVENT_GADGETLOSTFOCUS
		Select EventSource()
			Case textfield
				Update()
		EndSelect
	Case EVENT_GADGETACTION
		Select EventSource()
			Case textfield
				Print "Textfield changed!"
			Case button
				ActivateGadget button
		End Select
	Case EVENT_WINDOWCLOSE
		End
	End Select
Wend

Function Update()
	Notify "Update()"
EndFunction</pre> <br><br></td></tr></table><br>
<a name="977756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why should I have to change all my code for behavior that should be the default, and is already implemented correctly?  No one has put up a good argument to the contrary, and I use MaxGUI for some really complex apps. <br><br></td></tr></table><br>
<a name="977784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> No one has put up a good argument to the contrary <br></div><br>It's not cross platform?  Also this way is far more flexible, as you can do other things as well as cause the text-field to lose focus.<br><br>Edit: People who want to mimic the previous behaviour can do so by creating a button on the same parent as the textfield, with a <b>BUTTON_OK</b> style flag (this can be hidden if necessary), and handling the button's EVENT_GADGETACTION to activate the button when pressed (as show in my code example above).  Alternatively though, this EVENT_GADGETACTION could be used to move the focus onto the next gadget in the form which may not have been possible previously, or call an update function if necessary. <br><br></td></tr></table><br>
<a name="977970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would like it as Zeke requested it. The problem now is that once you hit return and the textfield lost the focus, you are not able any more as user to switch (tab-key) to the next textfield or gadget. This is a big disadvantage. If the focus would stay, that's not a problem and we still could update our stuff with the OK-Button. <br><br></td></tr></table><br>
<a name="983511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/posts.php?topic=86766" target="_blank">MaxGUI v1.34</a> has now been released. <br><br></td></tr></table><br>
<a name="1073699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/posts.php?topic=93766" target="_blank">bump</a> <br><br></td></tr></table><br>
<a name="1196646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another work around is to call the activate event a 2ond time. and use wait event in between.  i think this whold work on all platforms but havent tryed it on windows 8 only..<br><br>Strict <br>Import MaxGui.Drivers<br>AppTitle = "*** TCPIP test client ***"<br><br>Global FLAGS:Int<br><br>' Comment/uncomment any of the following lines to experiment with the different styles.<br><br>FLAGS:| WINDOW_TITLEBAR<br>'FLAGS:| WINDOW_RESIZABLE<br>FLAGS:| WINDOW_MENU<br>FLAGS:| WINDOW_STATUS<br>FLAGS:| WINDOW_CLIENTCOORDS<br>'FLAGS:| WINDOW_HIDDEN<br>FLAGS:| WINDOW_ACCEPTFILES<br>'FLAGS:| WINDOW_TOOL<br>'FLAGS:| WINDOW_CENTER<br><br><br><br>Local window:TGadget = CreateWindow( "Client  ", 100, 100, 350, 250, Null, FLAGS )<br>Local area:TGadget = CreateTextArea( 10,20,250,100,window,0)<br>Local chatbar:TGadget = CreateTextField ( 10,130,250,20,window,0)<br>Local chatOK:TGadget = CreateButton (" send ",10,150,250,20,window,BUTTON_OK)<br><br>While WaitEvent()<br>	Print CurrentEvent.ToString()<br>	Select EventID()<br>		Case EVENT_GADGETACTION<br>			Print "Inspector gadget actions.."<br>			Select EventSource()<br>			Case chatOK<br>				Print "Ok has ben selected"<br>				SetGadgetText chatbar,""<br>				ActivateGadget chatbar<br>				WaitEvent<br>				ActivateGadget chatbar<br>			End Select<br>		Case EVENT_WINDOWCLOSE<br>			End<br>		Case EVENT_APPTERMINATE<br>			End<br>	End Select<br>Wend <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
