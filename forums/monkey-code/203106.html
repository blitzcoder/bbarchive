<!DOCTYPE html><html lang="en" ><head ><title >Box2D Framework</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Box2D Framework</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=512" >Monkey Code</a>/<a href="#bottom" >Box2D Framework</a><br><br>
<a name="2031907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, here is my simple framework for Box2D based on Volkers Box2D Screen for Diddy.<br><br><a href="http://www.coppercircle.co.uk/Box2DFramework.zip" target="_blank">http://www.coppercircle.co.uk/Box2DFramework.zip</a><br><br>- Allows you to easily create Box2D bodies with or without images attached, including spheres, boxes, bridges and polys.<br><br>- You can also set debug drawing on a per body basis and have image and debug drawing.<br><br>- Get collision info.<br><br>- Load Box2D Generic XML files created by PhysicsEditor - <a href="http://www.codeandweb.com/physicseditor" target="_blank">http://www.codeandweb.com/physicseditor</a><br><br>Note: Currently only one shape per PhysicsEditor XML file is supported and make sure the image anchor point is at 0,0.  Also you will need to vertically flip your image after creating the poly XML file as the exporter is in BETA and flips the verts.<br><br>Thanks to muddy_shoes for the great work on creating the Box2D Module. <br><br></td></tr></table><br>
<a name="2031931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This would definitely be useful later on :). But the objects seems to kind of float as they fall. How would we set the world gravity or weight(mass?) of the object? <br><br></td></tr></table><br>
<a name="2031934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is cool :)<br><br><div class="quote"> How would we set the world gravity  <br></div><br>Just checking Copper's code and when you create the world the constructor has a gravity parameter:<br><br><b>Demo.monkey</b><br>[monkeycode]Class Box2dscreen Extends Screen<br>..<br>	Method CreateDemo:Void()<br>..<br> 		Self.world = New CWorld(Self.ratio, 0, 10.0, box2dDebug)<br>..[/monkeycode]<br><br>Which goes to this constructor:<br><br><b>box2dframework.monkey</b><br>[monkeycode]Class CWorld<br>..<br>	Method New(ratio:Float = 1.0, gravityX:Float = 0.0, gravityY:Float = 10.0, debug:Int = 0)<br>[/monkeycode] <br><br></td></tr></table><br>
<a name="2031974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, yes you can set the gravity as therevills shows, you can also access other parameters like this:<br><br><pre class=code>
groundEntity.fixtureDef.density = 1.0
groundEntity.fixtureDef.friction = 0.2
groundEntity.fixtureDef.restitution = 1.0
Local massdata:b2MassData = New b2MassData()
massdata.center = New b2Vec2(0,0)
massdata.mass = 100.0
massdata.I = 0.0
groundEntity.body.SetMassData(massdata)
</pre><br><br>Also to fix the flipped verts with PhysicsEditor XML Export just change the this line in the export.xml to this &lt;yAxisDirection&gt;down&lt;/yAxisDirection&gt;<br><br>*UPDATE, added a simple rope entity. <br><br></td></tr></table><br>
<a name="2031965"></a>

<a name="2031966"></a>

<a name="2031976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not seeing things fall any faster either way. Changing the gravity in the CWorld declaration, or adding the code you list above.<br><br>Also, trying to add an extra parameter to the "orange" sphere creation does not result in spheres of a different radius size.<br><br>Any ideas?<br><br>Great work, though! <br><br></td></tr></table><br>
<a name="2031975"></a>

<a name="2031982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi matt, the objects fall at the simulation speed, you could use ApplyForce to speed them up.<br><br>Also the CreateSphere function uses the image size if you pass an image, if you put Null as the image you can use the radius option and attach your own image. <br><br></td></tr></table><br>
<a name="2031989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matt, probably you have to use some scaling with box2d.<br>I haven't implemented this in my box2dscreen, to keep things simple.<br>Why use scaling?<br>"..you should not use pixels as your units, an object of length 200 pixels would be seen by Box2D as the size of a 45 story building." <br>Which will result in some weird behaviour.<br>So you need something like a "global phys_scale=30" parameter, and all<br>creation and positioning of bodies must be divided through this.<br>Then the physics will behave similar to games like Angry Birds, and<br>gravity can be speeded up.<br>Take a look at the demos included in the box2d mod, they all use<br>some scaling.<br>Don't forget to set the scaling for debug_draw too. <br><br></td></tr></table><br>
<a name="2031993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys <br><br></td></tr></table><br>
<a name="2032009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I made this as a quick way to prototype ideas, but would be great if someone wants to add scaling? <br><br></td></tr></table><br>
<a name="2032057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be great (but a lot more work) if it had a mouse interface for placing and defining scenes of shapes with physics properties. <br><br>Sort of like a Box2D physics/scene generator? Or does such a thing already exist? <br><br></td></tr></table><br>
<a name="2032011"></a>

<a name="2032031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> matt, see Physics Editor link in first post of this thread. <br><br></td></tr></table><br>
<a name="2032056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want to do more than create shapes with properties. I want to put  bunch of them on screen, for example set up one of the famous Box2D demo scenes, and then run the system and see how it interacts.<br><br>Kind of like Algodoo, but specific to Box2d and with the ability to export a scene.<br><br><a href="http://www.algodoo.com" target="_blank">http://www.algodoo.com</a> <br><br></td></tr></table><br>
<a name="2032055"></a>

<a name="2032065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe this would work for you: <a href="http://www.jacobschatz.com/bisonkick/" target="_blank">http://www.jacobschatz.com/bisonkick/</a> <br><br></td></tr></table><br>
<a name="2032066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.levelhelper.org/" target="_blank">http://www.levelhelper.org/</a> ? <br><br></td></tr></table><br>
<a name="2032067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's got to be something out there, right?! :-)<br><br>Let me know what you find, because I'm going to need something like this as well. <br><br></td></tr></table><br>
<a name="2032086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> The closest I have found so far is Mekanimo, but it seems to be abandoned.<br><br><a href="http://www.mekanimo.net" target="_blank">http://www.mekanimo.net</a> (and see YouTube for videos)<br><br>LevelHelper looks promising. <br><br></td></tr></table><br>
<a name="2032078"></a>

<a name="2032110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could write a loader for LevelHelper xml files or make your own editor.  I am making an editor for my needs that combines box2d and diddy's tiled maps. <br><br></td></tr></table><br>
<a name="2032111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is another editor which looks pretty good.<br>But someone would have to write a loader.<br><a href="http://box2d.org/forum/viewtopic.php?f=6&amp;t=7457" target="_blank">http://box2d.org/forum/viewtopic.php?f=6&amp;t=7457</a> <br><br></td></tr></table><br>
<a name="2032139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> @CopperCircle your editor sounds cool<br><br>I'll also check out the one Volker mentioned <br><br></td></tr></table><br>
<a name="2034059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have just updated this to include physics scaling and better updating, objects now react to gravity and the physics response is more realistic. <br><br></td></tr></table><br>
<a name="2034150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Definitely working much better CopperCircle, thanks for the update :)! <br><br></td></tr></table><br>
<a name="2034159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> am I missing some files ?<br><br>D:/Code/MonkeyPro/modules/box2d/collision/b2aabb.monkey&lt;215&gt; : Error : Identifier 'Min' not found.<br>Abnormal program termination. Exit code: -1 <br><br></td></tr></table><br>
<a name="2034160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> ignore me, just me being stupid. <br><br></td></tr></table><br>
<a name="2034242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FelipeA</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is really nice, for a long time I wanted to try out box2d but found it very difficult, with this in just a couple of minutes I had a small demo running. <a href="http://shin.cl/b2d" target="_blank">http://shin.cl/b2d</a><br><br>I do have a question, I think is more related to box2D. How do I compare two userdata. <br><br></td></tr></table><br>
<a name="2034246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> You cast them.<br>Untested:<br><pre class=code>
Class Ship

Field body:B2Body

Method New()
  '... do things like create a body etc.
  
  ' store the object the body belongs to in the userdata
  self.body.SetUserdata(self)
End Method

End Class
</pre><br>Then you can do things like this:<br><pre class=code>
local userdata:Object=body.GetUserdata() ' retrieve userdata from a body
if Ship(userdata)&lt;&gt;NULL ' is it the userdata of a ship?
  Print " body's userdata is a ship!" 'yes
endif
</pre><br><br>To just compare them a <br><pre class=code>
if body1.GetUserdata()=body2.GetUserdata()
</pre><br>should be enough. <br><br></td></tr></table><br>
<a name="2038034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tri|Ga|De</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get this error:<br><br><pre class=code>
Duplicate identifier 'DiddyApp' found in module 'framework' and module 'framework'.
</pre> <br><br></td></tr></table><br>
<a name="2038069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you compiling the demo or your own code? <br><br></td></tr></table><br>
<a name="2038071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tri|Ga|De</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> The demo <br><br></td></tr></table><br>
<a name="2038072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure, make sure you have the latest Diddy module installed. <br><br></td></tr></table><br>
<a name="2038074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tri|Ga|De</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I downloaded the latest Diddy before trying your demo. <br><br></td></tr></table><br>
<a name="2038084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> You may have diddy in the modules directory twice? <br><br></td></tr></table><br>
<a name="2038097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tri|Ga|De</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> No I have just one folder called Diddy <br><br></td></tr></table><br>
<a name="2038223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> This works incredible well. Thanks for that! :) <br><br></td></tr></table><br>
<a name="2038231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh well, just one note: Please consider to change<br><br><pre class=code>
Function RadToDeg:Int(rad:Float)
</pre><br><br>to<br><br><pre class=code>
Function RadToDeg:Float(rad:Float)
</pre> <br><br></td></tr></table><br>
<a name="2038679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tri|Ga|De</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> @CopperCircle<br><br>Do you have other solutions to my problem.<br>I would really much like to add Box2D to my current game. <br><br></td></tr></table><br>
<a name="2038711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should set up a new monkey (keep your old one), just with newest diddy and box2d and test if compiling the example works. <br><br></td></tr></table><br>
<a name="2038717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tri|Ga|De</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay I did that and now I can run the demo.<br>Thanks! <br><br></td></tr></table><br>
<a name="2041212"></a>

<a name="2041213"></a>

<a name="2041214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> anyone else get shockingly bad results when running on Android Devices ?<br><br><br>Just tried a simple 16 boxes on screen on an S3 and nexus 7, both struggled.<br><br>runs fine in Html5 and glfw<br><br>/StuC <br><br></td></tr></table><br>
<a name="2041220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you disabled DebugDraw of box2d? Costs a lot.<br>Is your App running in release mode? <br><br></td></tr></table><br>
<a name="2041222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes debug is disabled and running in release mode.<br><br>Just tried the demos that came with the Box2d port and they run like a dog too.<br><br>/StuC <br><br></td></tr></table><br>
<a name="2041239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have not had any major issue with android, it is a little slower than other platforms but still runs ok? <br><br></td></tr></table><br>
<a name="2041279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmm I wonder if I have something wrong with my setup?  latest technology monkey,  box2d. android sdk upto date,  latest java.    <br><br>as soon as I get over 16 objects the engine really runs slow <br><br></td></tr></table><br>
<a name="2041291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do all the objects need to be on screen at the same time? I dynamically add/remove objects as the camera moves to save on box2d updating. <br><br></td></tr></table><br>
<a name="2041292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its not the drawing of the objects thats the slow down, its the physics.  Im plotting a single pixel in place of the object and the slowdown still occurs.<br><br>I don't class 16 objects as alot on screen.  Take for instance angry birds that runs super smooth, definitely has more than 16 object on most levels and that uses box2D.<br><br><br>/StuC <br><br></td></tr></table><br>
<a name="2041308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stu, for which version of Android are you compiling? <br><br></td></tr></table><br>
<a name="2041316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ive compiled for 13,14 and 15.   <br><br>I'ive also now compiled on IOS and found that around 25 objects and that starts to crawl too.<br><br><br>/StuC <br><br></td></tr></table><br>
<a name="2041317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> It will never be a fast as a native implementation of box2d, but if you dynamically enable/disable box2d bodies when you need them you can do allot, I have a game with hundreds of objects working at 30 FPS.<br>It depends no what type of game your trying to make.<br><br>It is slow when lots of objects are moving and collisions are being updated, try to use static objects or edges if poss, also enable sleep on objects and if an object is not on the screen remove it's body.<br>You can also play with the box2d update/accuracy settings. <br><br></td></tr></table><br>
<a name="2041332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> it doesn't. seem much on screen for the slow down to happen......   I'm just stacking 20 rectangles on top of each other then launching a missile at it.  seeing they are all on screen is can't disable any of them<br><br>might have to see if there is a library I can link into. instead of using the monkey code version<br><br>stuc <br><br></td></tr></table><br>
<a name="2041355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not really possible to respond practically to complaints about "slowness" because the terminology is too vague. I can't tell if you're seeing normal or abnormal performance based on what you've written.<br><br>The demo set for the port includes a test where a ball runs down a slope and hits three stacks of 10 boxes. The physics update on that takes 20-25ms on my ZTE Blade running Android 2.3.7. However, the visual frame rate will look much worse if the standard monkey rendering mechanism is in place due to the way it drops frames. <br><br>Android using Java isn't a speedy platform and Box2D's worst-case scenarios involve stacks of objects because of the number of collisions occurring. Creating a game that involves piles of objects being knocked over using the monkey port is perhaps not a sensible plan.<br><br>You mention using a "linked library". You might be interested in reading the results of the comparison I did with LibGDX, which uses Box2D via JNI calls: <a href="http://pointlessdiversions.blogspot.co.nz/2012/03/monkey-vs-libgdx-box2d-performance-on.html." target="_blank">http://pointlessdiversions.blogspot.co.nz/2012/03/monkey-vs-libgdx-box2d-performance-on.html.</a> Also, if you're comparing with Angry Birds then I believe I'm correct that it was written using the NDK and so has another level of performance advantage. <br><br></td></tr></table><br>
<a name="2041687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage1982</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wonder what kind of performances we could achieve by using Farseer written in Monkey ?<br><br>The language is already advanced enough since I remember Alex Okafor (http://www.paradeofrain.com/code-archive/) did it in BlitzMax with a very old version of Farseer.<br><br>Is there any C# to Monkey tool available yet ? <br><br></td></tr></table><br>
<a name="2049456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cageInfamous</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like this framework a lot. But how do I manually add forceto an entity or move an entity? <br><br></td></tr></table><br>
<a name="2049459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> The last time I used Box2D it was ApplyImpulse() and ApplyForce(). <br><br></td></tr></table><br>
<a name="2049568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can although directly set the velocity of the with body.setvelocity() to move. <br><br></td></tr></table><br>
<a name="2060443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> If Monkey supported an Android native C++ NDK target, this would allow the use of the Box2D C source, which would probably solve the speed problems on Android IMHO. <br><br></td></tr></table><br>
<a name="2060442"></a>

<a name="2060441"></a>

<a name="2060544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's possible to use the C source now, but that would complicate the portability of box2d on some targets.  Since monkey's Box2d is done in pure monkey without native externs, that means it's supported on all platforms monkey supports. The problems that entails wouldn't be resolved magically with monkey supporting an NDK target -- In fact, it would probably create new headaches, as NDK basically takes away your guarantee of basic portability, due to differences in small things like GPU texture compression support across devices which would now have to be handled by trans instead of the OS drivers. <br><br></td></tr></table><br>
<a name="2060613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> GPU texture compression is handled by the graphics API not directly by Monkey, in this case GLES 2.0. Using or not using the Android NDK does not affect this. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
