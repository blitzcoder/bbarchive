<!DOCTYPE html><html lang="en" ><head ><title >maybe somebody can help me with this math problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >maybe somebody can help me with this math problem</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=512" >Monkey Code</a>/<a href="#bottom" >maybe somebody can help me with this math problem</a><br><br>
<a name="2010261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I asked this question in blitzbasic.com but had no luck now I am posting it here. maybe I'll have better luck here or not.<br>I need to find the time of collision between a rotating line segment  and a moving ball in the range between t=0 and t = 1. <br>I need to find the distance traveled in terms of t<br>when t = 0 angle is the starting angle(degrees traveled) = 0 and distance = 0<br>when t = 1 angle is a1 and distance  is d1.<br>I need to find a2 and d2 the image shows all the know and unknown:<br><img src="http://img8.imageshack.us/img8/169/collisionproblemd.png"><br><br>all of the black distances  except for d1 have been calculated using dot product, cross dot product and scalars. and a couple of formulas that include division. I need the formula or formulas to solve this problem. thanks in advance and thanks for looking. <br><br></td></tr></table><br>
<a name="2010260"></a>

<a name="2010256"></a>

<a name="2010255"></a>

<a name="2010254"></a>

<a name="2010252"></a>

<a name="2010250"></a>

<a name="2010258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I cast summon warpy <br><br></td></tr></table><br>
<a name="2010286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont know what the formulae would be but just thinking back to when I wrote a simple pool game I split the problem into two parts.<br><br>So in your case the first thing is to see if the ball has passed through the line in time t.<br>You can calc the angle the ball was at at t0 and the angle of the ball at t1. if the ball was above the line at t0 and below the line at t1 or visa versa then it must have gone through.<br><br>The second part I used was a brute force method. <br>If the ball is close enough to the line at ( has only just passed through... you need to tweak what is deemed close enough. Lets say .5 pixels ).<br>Otherwise move the objects back to the starttime. Halve the timestep and move again. Repeat until your close enough.<br><br>eg.<br>t0 -&gt; t1 - passed through but &gt; .5 pixels. Not good enough<br><br>Take t0 as start time and set the step to be .5<br>t0 -&gt; t0.5 not collided<br>t0.5 -&gt; t1 passed through but &gt; .5 pixel. Not good enough.<br><br>Take t0.5 as starttime and set the timestep to be .25<br>t0.5 -&gt; t0.75 not collided<br>t0.75 -&gt; t1 passed through but &gt; .5 pixels. Not good enough<br><br>Take t0.75 as starttime and set the timestep to be .125<br>t0.75 -&gt; t.875 passed through &lt; .5 pixel. This is good enough.<br><br>The alternative would be when you have decided there is a collision then find out how fast they are heading towards each other set you timestep to be small enough and step through that until collision.<br><br>Did that make sense ? <br><br></td></tr></table><br>
<a name="2010296"></a>

<a name="2010297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>So in your case the first thing is to see if the ball has passed through the line in time t.<br>You can calc the angle the ball was at at t0 and the angle of the ball at t1. if the ball was above the line at t0 and below the line at t1 or visa versa then it must have gone through.<br> <br></div><br>The scenario in the diagram is the condition when the ball penetrates the line at the time  when t = 1. the problem is that I want to move back in time to where the ball collides the wall (where the ball is touching the wall). I don't have a problem figuring everything else out.<br><br><div class="quote"> <br>The second part I used was a brute force method. <br>If the ball is close enough to the line at ( has only just passed through... you need to tweak what is deemed close enough. Lets say .5 pixels ).<br>Otherwise move the objects back to the starttime. Halve the timestep and move again. Repeat until your close enough.<br> <br></div><br>that is exactly what I want to avoid. I don't want to have to interpolate as I have tried it before and it just doesn't feel right. I want to figure out the most efficient way. I figured out d3 and d5 in terms of t with two formulas and I am almost sure there is a way to figure out the other one. note that also the line is moving so that complicates things a bit more.<br>I was thinking that it probably was more in terms of ratios. something like this:<br>i know that d1 = 1 in terms of t<br>and that a1 = 1 in terms of t<br>so the ratios would be:<br>a1/d1 = ax/d5 ----&gt; a1*d5 = ax*d1<br>and to solve for ax:<br>ax = (a1*d5)/d1 <br>this should return in ax the angle the line is  when the ball collides with the starting angle and<br>if I divide ax by 2 it should be the angle the line is at the point of collision(at least my warped mind sees it that way).<br>the only thing is, that I believe, that this formula does not take into account the radius of the ball, while the formula to figure out d3 and d5 do.<br><br>thanks for trying to help. I really appreciate it. <br><br></td></tr></table><br>
<a name="2010295"></a>

<a name="2010293"></a>

<a name="2010294"></a>

<a name="2010291"></a>

<a name="2010292"></a>

<a name="2010314"></a>

<a name="2010315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> here is a blitzmax Mac demo of what I have so far, for anybody that wants to try it ou.  <br><a href="http://www.mediafire.com/?890fj4drgij8rep" target="_blank">http://www.mediafire.com/?890fj4drgij8rep</a><br>I will be porting all of the code to monkey once I get the ball to ball fully implemented and the ball to moving wall code working. <br><br>the line sticking  from  the center of the ball is the speed of the ball from last time frame<br>to current time frame. <br><br></td></tr></table><br>
<a name="2010322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Warpy is on holiday, so can't be summoned.<br><br>Instead of code, here's a plan of action:<br>- parameterise the positions, so:<br>ball: (x1+t*vx, y1+t*vy)<br>point on line: (x2+lambda*cos(t*speed), y2+lambda*sin(t*speed))<br>- collision occurs when distance between line and ball is the radius of the ball.<br>- substitute everything you've got into the formula for the distance between a line and a point<br>- solve for t<br><br>if you look very hard for some code on my site called either groups.bmx or poption, I think I solved this exact problem. I can't say eactly where though. <br><br></td></tr></table><br>
<a name="2010345"></a>

<a name="2010346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hope you are enjoying your vacations and sorry to bother you but I am going to need you to explain that a bit more if you don't mind. <br>I am also not too well skilled at math. The highest I took in school was trigonometry and didn't pay much attention  to it so most of the stuff I learned from there  I already forgot. Neither did I ever take a physics class. Most of  what I know about physics is what I have learned from  <a href="http://www.tonypa.pri.ee/vectors/start.html" target="_blank">Tonypa website</a> and a bit  from searching the net.  <br>...So, a few things:<br>can you explain to me what is "lambda"? that's beyond me. <br>is speed the speed of the line or the ball?<br>is x1 and y1 the position the ball is when t = 0?<br><br>just to note, movement has been integrated with time to prevent to continually multiplying, It is integrated at the beginning of the update cycle(vx*t and vy*t) and removed at the end of the update cycle(vx/t and vy/t). so it's like working with fixed step. I think that's what's  confusing me.  I guess all that I am working in this case is scalars so in this case t will be the movement scalar.<br><br>(vx,vy) ~ 1 in terms of time elapsed <br><br>[edit]<br>I looked at the "groups.bmx"  but I couldn't figure anything out.  it's probably that you are using a lot more complicated things than I can understand. <br><br></td></tr></table><br>
<a name="2010342"></a>

<a name="2010343"></a>

<a name="2010344"></a>

<a name="2010341"></a>

<a name="2010393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Redbeer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that when the ball collides with the line, the radius of the ball is perpendicular to that line because the line should be tangent to the ball.  <br>Therefore, if you know a vector to represent the center position of the ball and a vector to represent the line direction at every frame/tick, you can use the cross product of that balls position vector, and the lines direction vector to calculate the "perpendicular" distance.  <br>I think when that distance is equal to the radius of the ball, they've collided.  You could then use the velocity vector of the ball, the initial and final position of the ball, and the simulation time to calculate the time at which they contact each other (if that's really what you need). <br> <br>In the generic solution you can of course get positive and negative answers, which should represent the ball on either side of the line, but if the ball is constrained to a specific coordinate area, it probably won't be a problem, but you may need to use absolute value to compare to the radius. <br><br>Whether or not it overlaps and misses the collision really depends on how fast the ball is moving, because if it travels a distance that is "very large" in one frame/tick, in comparison to the radius of the ball, you may miss the collision point/time on the next calculation. <br><br></td></tr></table><br>
<a name="2010411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you look at the diagram, the diagram illustrates one frame tick. the line movement from start point to end point is how far the ball moves for one frame/tick. I can figure out all of the information on the diagram except for the values in read. d2 and a2 is what I am trying to find out.<br>I can find the exact position the ball collides with with a static line even if the movement of the ball is any speed grater than the radius by doing scalar multiplications and division.<br> the equation fallows:<br><pre class=code>
dtn = (radius-dt1)/(dt2-dt1) 
</pre><br>dtn is the scalar distance from the ball to the wall.<br>to find the exact point of collision:<br>ballCollisionx = ballx+dtn*ballvx<br>ballCollisiony = bally+dtn *ballvy<br>in this case there is no need to step through the path until a possible collision point is reached.  Just perfect!<br>so in other words that is not the problem.<br>the problem is: At what point do the rotating line and the moving ball meet?<br>and I want to find a single formula that can solve that.  <br>I am still trying to figure out what warpy did in his program. <br><br></td></tr></table><br>
<a name="2010410"></a>

<a name="2010408"></a>

<a name="2010407"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
