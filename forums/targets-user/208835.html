<!DOCTYPE html><html lang="en" ><head ><title >GLFW3 Target</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >GLFW3 Target</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=523" >User Targets</a>/<a href="#bottom" >GLFW3 Target</a><br><br>
<a name="2092939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Guys,<br>I've upgraded the existing GLFW target to work with GLFW3.<br>Compiles for 32-bit Windows when using MinGW32.<br><br>Get the fork here:<br><a href="https://github.com/swoolcock/monkey/tree/glfw3" target="_blank">https://github.com/swoolcock/monkey/tree/glfw3</a><br><br>To build 64-bit, get mingw-w64 here and change the library paths in the Makefile:<br><a href="http://nuwen.net/mingw.html" target="_blank">http://nuwen.net/mingw.html</a><br><br>If you use Diddy, update to the latest changeset for glfw3 support.<br><a href="https://code.google.com/p/diddy/source/detail?r=f856ce9180b1a31520e33f37c490f1d6fdfa3312" target="_blank">https://code.google.com/p/diddy/source/detail?r=f856ce9180b1a31520e33f37c490f1d6fdfa3312</a><br><br>Please test it as much as you can!<br><br>Samah <br><br></td></tr></table><br>
<a name="2092937"></a>

<a name="2092938"></a>

<a name="2092486"></a>

<a name="2092477"></a>

<a name="2092484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome news <br><br></td></tr></table><br>
<a name="2092485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> So... what are the changes from current GLFW to GLFW3? I tried looking at glfw website, but couldn't find anything...<br><br>Is it possible to switch from window to fullscreen without having to reload everything? <br><br></td></tr></table><br>
<a name="2092487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well the big thing is that you can have multiple windows, thus (in theory) multiple monitor support.  I think the "reload everything" was more of a Mojo implementation limitation, so it's possible that could be worked around. <br><br></td></tr></table><br>
<a name="2092499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <strike>What have I done wrong?</strike><br><br><pre class=code>Building...
'make' is not recognized as an internal or external command,
operable program or batch file.
TRANS FAILED: Error executing 'make CCOPTS="-Wno-free-nonheap-object" OUT="Debug/MonkeyGame"', return code=1
Abnormal program termination. Exit code: -1</pre><br><br>[edit]<br>Opps I hadn't updated my MonkeyX config to point to MinGW....<br><br>Seems the update is too fast? <br><br></td></tr></table><br>
<a name="2092495"></a>

<a name="2092496"></a>

<a name="2092498"></a>

<a name="2092500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Seems the update is too fast? <br></div><br>As I said, they removed glfwSleep().  For now it updates once every render, and it renders as fast as possible.  GLFW has a bunch of funky threading stuff in it, so I might see if i can use that to fake a sleep to limit the update rate. <br><br></td></tr></table><br>
<a name="2092508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good job! Will check this out soon when I have some scheduled work-on-my-stuff time :D<br><br><a href="http://www.glfw.org/docs/latest/news.html" target="_blank">http://www.glfw.org/docs/latest/news.html</a><br><br>Quite a nice list of new features! <br><br></td></tr></table><br>
<a name="2092528"></a>

<a name="2092529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> As I said, they removed glfwSleep().  <br></div><br><strike>Where?</strike><br>Cross posts :/<br><a href="http://www.monkey-x.com/Community/posts.php?topic=8827&amp;post=92453" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=8827&amp;post=92453</a><br><br>Since I've "installed" MinGW 64bit, I now cant build the normal desktop target... <br><br></td></tr></table><br>
<a name="2092531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Since I've "installed" MinGW 64bit, I now cant build the normal desktop target... <br></div><br>Yep, and I'm still fighting with C/C++ and its stupid workflow/toolchain.  How anyone can use that antiquated language and stay sane is beyond me.<br>For now you'll have to switch back to the old MinGW if you want to compile for GLFW2.  I guess this means the main benefit of the GLFW3 target is for those who want to make their app 64-bit.<br>I'll look at fixing the update rate and maybe seeing what other features from GLFW3 can be made available.  It's hard to add new stuff without modifying Mojo to some degree, and then of course it's target dependent. <br><br></td></tr></table><br>
<a name="2092546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update rate fixed.  Also fixed a white flicker therevills mentioned.<br>Go go pull! <br><br></td></tr></table><br>
<a name="2092608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad to see this! <br><br></td></tr></table><br>
<a name="2092638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Slotman<br><div class="quote"> <br>So... what are the changes from current GLFW to GLFW3? I tried looking at glfw website, but couldn't find anything...<br><br>Is it possible to switch from window to fullscreen without having to reload everything?<br> <br></div><br><br><a href="http://www.glfw.org/docs/latest/moving.html" target="_blank">http://www.glfw.org/docs/latest/moving.html</a><br><br>1.  Scroll wheel represents a delta instead of an absolute position.  This should (in theory) mean no more hacks needed to get consistent scrolling behavior across targets, and maybe Mark will add MouseScrollX() / MouseScrollY() or something to Mojo with consistency available?  In any case, it's there.<br><br>2.  Capture of certain hotkeys has been removed.  This may or may not be a problem since mojo doesn't enumerate every keycode anyway.  The keycodes glfw3 have defined are for a US international keyboard.  Again in theory, polling can differentiate between left shift/right shift, maybe detect some keys it couldn't before.<br><br>3.  Window handling's different.  Perhaps this will allow for easier context-switching.  The way window handling worked in previous versions of GLFW caused some issues with features like stencil buffer access on different targets (if you were using the modules gles11 or nDrawExts, for example).  Mark later added a workaround to re-init the GLFW window from Monkey but perhaps with glfw3, it can be implemented cleaner and less hacky.  glfwCreateWindow's parameters now are all hints, meaning that the OS is free to ignore them.  Defaults might change -- The aforementioned stencil buffer is initialized to 0 bits in mojo currently;  most systems consider that a hint, but a few disable the buffer. Maybe this will change?<br><br>4.  Joystick support has improved.  You'll be able to have better joystick support on systems that previously didn't support a wide variety.  You can detect if a joystick is available (important for passing Microsoft app standards).  <br><br>5.  Glfw3 can hide <i>and</i> capture the mouse cursor, should you need this for direct input purposes. <br><br></td></tr></table><br>
<a name="2092665"></a>

<a name="2092666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Scroll wheel represents a delta instead of an absolute position. This should (in theory) mean no more hacks... <br></div><br>Capturing input in GLFW uses callbacks, and MouseScrollX/Y() or similar is not a callback.  Basically it needs to cache scrollwheel information somewhere in a similar way to key polling.  I had to temporarily disable MouseZ() in Diddy for GLFW3.<br><br><div class="quote"> Mark later added a workaround to re-init the GLFW window from Monkey... <br></div><br>This is currently a really dirty hack and I'm hoping I can clean it up a bit.<br><br><div class="quote"> Joystick support has improved. You'll be able to have better joystick support on systems that previously didn't support a wide variety. You can detect if a joystick is available (important for passing Microsoft app standards). <br></div><br><div class="quote"> Glfw3 can hide and capture the mouse cursor... <br></div><br>Going to need to modify the Monkey side of Mojo for these, though.  I've been trying to avoid it so that the native code for other targets won't need to be touched (especially since I can't check in any changes to non-free targets)..<br><br>Lots of possibilities, though. <br><br></td></tr></table><br>
<a name="2092664"></a>

<a name="2092712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> just an update;  I checked 3.0.4's source code and it still uses winmm on windows for joystick input.  Somewhat frustrating, but they've set xinput support as a 3.2 target now... <br><br></td></tr></table><br>
<a name="2092720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Nobuyuki: just an update; I checked 3.0.4's source code and it still uses winmm on windows for joystick input. Somewhat frustrating, but they've set xinput support as a 3.2 target now... <br></div><br>Thanks, I'll have to keep that in mind.  My goals at the moment:<br><br>1) Get GLFW3 target compiling under Visual Studio in both 32- and 64-bit.  I should be able to static link against the prebuilt libraries rather than compiling the whole thing like the current GLFW2 target.<br>2) Clean up the window creation code.<br>3) Try to get it linking against the LibOVR prebuilt VS libraries (not technically part of the main GLFW3 target, but it was the original goal, so it'll be a secondary target).<br>4) Look at adding some minor features (scrollwheel, mouse capturing, joystick enumeration, etc.)  If I can keep it restricted to graphics/input device driver classes there should be no changes required to Mojo; it would just be a separate module that interfaces with it. <br><br></td></tr></table><br>
<a name="2092849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nigelibrown</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> downloaded and copied over my MonkeyXPro78h install and I am getting the error "Native OS module not implemented" from os.monkey can you help please? <br><br></td></tr></table><br>
<a name="2092890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, looks like I didn't use the monkey.os module in my tests.  I'll take a look at it tonight.<br>On another note, I managed to get it compiling with standard MinGW32 so I'll push that when I can.  It means it will compile with 32-bit by default. <br><br></td></tr></table><br>
<a name="2092940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fixed. Pull the latest glfw3 branch when you're ready.  You should change your config.winnt.txt to point to the old MinGW32 installation.<br>If you want to still use MinGW-w64, open the Makefile and either add the -m32 flag to CPPFLAGS to force 32-bit, or change the library paths to Win64 to build 64-bit.<br>I might make a second target for 64-bit, instead.<br><br>Edit: Also added support for borderless windows!<br>Open CONFIG.MONKEY and set:<br>GLFW_WINDOW_BORDERLESS=True <br><br></td></tr></table><br>
<a name="2092936"></a>

<a name="2092941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool! Time for a pull request to the main Monkey repo? <br><br></td></tr></table><br>
<a name="2092943"></a>

<a name="2092944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @therevills: Cool! Time for a pull request to the main Monkey repo? <br></div><br>Done. :)<br><br><a href="https://github.com/blitz-research/monkey/pull/66" target="_blank">https://github.com/blitz-research/monkey/pull/66</a> <br><br></td></tr></table><br>
<a name="2093173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >starfox</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good stuff! Any luck getting this to work on Linux too?<br>This would open the possibility of using hardware accelerated graphics in OpenGL ES programs, running on things like Raspberry Pi. <br><br></td></tr></table><br>
<a name="2093195"></a>

<a name="2093196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nigelibrown</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> just testing out the latest and greatest, and I am getting a problem with 'Identifier "SetRender" not found? From app.monkey OnCreate()<br><br><pre class=code>
Strict

Import minib3d.app
Import mojo

Class MyApp Extends MiniB3DApp

	Method Create:Int()
		Return 0
	End
	
	Method Update:Int()
		Return 0
	End
	
	Method Render:Int()
		Return 0
	End
	
	Method Init:Int()
		Return 0
	End
End

Function Main:Int()
	New MyApp	
	Return True
End
</pre> <br><br></td></tr></table><br>
<a name="2093229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @starfox:Good stuff! Any luck getting this to work on Linux too? <br></div><br>I don't have a Linux machine at home anymore, so I'll have to set it up in VirtualBox or something.  I might take a look later.<br><br><div class="quote"> @nigelibrown: just testing out the latest and greatest, and I am getting a problem with 'Identifier "SetRender" not found? From app.monkey OnCreate() <br></div><br>I don't have any experience with the MiniB3DApp class.  Maybe it's some kind of weird conflict?  I'll give it a shot.<br>What version of Monkey are you using?  Just a straight clone from github? <br><br></td></tr></table><br>
<a name="2093228"></a>

<a name="2093227"></a>

<a name="2093244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nigelibrown</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Samah: I have just downloaded MonkeyXPro78h and the latest minib3b along with monkey-glfw3, and using the above source i get the error 'SetRender' to set-up I have copied the contents of monkey-glfw3 over the new MonkeyXPro78h and created a new folder with the source code from last post in this thread. builds with DesktopGame but not GLFW3 DesktopGame.<br><br>Is there a set of install instructions anywhere? <br><br></td></tr></table><br>
<a name="2093269"></a>

<a name="2093270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, this is what I did:<br>1) Downloaded 78h and set MinGW path in config.winnt.txt<br>2) Copied the targets/glfw3 directory from the forked repo into the extracted 78h dir<br>3) Copied modules/mojo/driver.monkey<br>4) Copied modules/mojo/native/mojo.glfw3.cpp<br>5) Compiled and ran this program with no errors:<br><pre class=code>Strict

Import mojo

Function Main:Int()
	New MyApp
	Return 0
End

Class MyApp Extends App
	Method OnCreate:Int()
		SetUpdateRate(60)
		Return 0
	End
	
	Method OnUpdate:Int()
		Return 0
	End
	
	Method OnRender:Int()
		Cls
		DrawRect(100,100,100,100)
		Return 0
	End
End</pre><br><br>Can you give me a code sample that causes the error? <br><br></td></tr></table><br>
<a name="2093281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nigelibrown</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Samah, followed your instructions and got<br><br><pre class=code>
"C:/_MonkeyXPro78h/bin/transcc_winnt" -target=GLFW3_Desktop_Game -config=Debug -run "C:/_MonkeyXPro78h/bananas/nigelibrown/main.monkey"
TRANS monkey compiler V1.68
Parsing...
Semanting...
Translating...
Building...
g++  -Wno-free-nonheap-object -I../glfw3/include -I../openal/include -I../stb -I../tinycthread -D__STRICT_ANSI__  -c -o ../main.o ../main.cpp
g++ -Wl,--subsystem,windows -L../openal/libs/Win32 -L../glfw3/lib/Win32 -o Debug/MonkeyGame ../stb/stb_image.o ../stb/stb_vorbis.o ../tinycthread/tinycthread.o ../main.o -lglew32 -lglfw3 -lopengl32 -lglu32 -lgdi32 -lws2_32 -lOpenAL32
c:/devtools/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.9.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible ../glfw3/lib/Win32/libglfw3.a when searching for -lglfw3
c:/devtools/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.9.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible ../glfw3/lib/Win32\libglfw3.a when searching for -lglfw3
c:/devtools/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.9.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible ../glfw3/lib/Win32/libglfw3.a when searching for -lglfw3
makefile:21: recipe for target 'Debug/MonkeyGame' failed
c:/devtools/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.9.1/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lglfw3
c:/devtools/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.9.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible ../openal/libs/Win32/OpenAL32.lib when searching for -lOpenAL32
c:/devtools/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.9.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible ../openal/libs/Win32/OpenAL32.lib when searching for -lOpenAL32
c:/devtools/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.9.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible ../openal/libs/Win32\OpenAL32.lib when searching for -lOpenAL32
c:/devtools/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.9.1/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lOpenAL32
TRANS FAILED: Error executing 'make CCOPTS="-Wno-free-nonheap-object" OUT="Debug/MonkeyGame"', return code=2
collect2.exe: error: ld returned 1 exit status
make: *** [Debug/MonkeyGame] Error 1
Done.
</pre> <br><br></td></tr></table><br>
<a name="2093296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> At the moment you need to be using mingw32, not mingw-w64.  Alternatively you can try forcing 32-bit, but you'll need to update the library paths and add the -m32 flag to CPPFLAGS. <br><br></td></tr></table><br>
<a name="2093373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> got this error:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
D:\Projects\Monkey\MonkeyXPro79e_glfw3\Bin\transcc_winnt.exe -run -config=debug -target=GLFW3_Desktop_Game   "D:\Projects\Monkey\MonkeyXPro80b\bananas\mak\joytest\joytest.monkey"
TRANS monkey compiler V1.72
Parsing...
Semanting...
Translating...
Building...
gcc  -Wno-free-nonheap-object -I../glfw3/include -I../openal/include -I../stb -I../tinycthread -D__STRICT_ANSI__  -c -o ../stb/stb_image.o ../stb/stb_image.c
gcc  -Wno-free-nonheap-object -I../glfw3/include -I../openal/include -I../stb -I../tinycthread -D__STRICT_ANSI__  -c -o ../stb/stb_vorbis.o ../stb/stb_vorbis.c
gcc  -Wno-free-nonheap-object -I../glfw3/include -I../openal/include -I../stb -I../tinycthread -D__STRICT_ANSI__  -c -o ../tinycthread/tinycthread.o ../tinycthread/tinycthread.c
g++  -Wno-free-nonheap-object -I../glfw3/include -I../openal/include -I../stb -I../tinycthread -D__STRICT_ANSI__  -c -o ../main.o ../main.cpp
g++ -Wl,--subsystem,windows -L../openal/libs/Win32 -L../glfw3/lib/Win32 -o Debug/MonkeyGame ../stb/stb_image.o ../stb/stb_vorbis.o ../tinycthread/tinycthread.o ../main.o -lglew32 -lglfw3 -lopengl32 -lglu32 -lgdi32 -lws2_32 -lOpenAL32
DMakefile:21: recipe for target 'Debug/MonkeyGame' failed
TRANS FAILED: Error executing 'mingw32-make CCOPTS="-Wno-free-nonheap-object" OUT="Debug/MonkeyGame"', return code=2
:\Projects\Monkey\JungleMonkey78b\MinGW/bin/ld.exe: cannot find -lglew32
collect2.exe: error: ld returned 1 exit status
mingw32-make: *** [Debug/MonkeyGame] Error 1
Abnormal program termination. Exit code: -1
</textarea><br><br>Copied over to a version of 79e, but using the minGW toolchain automatically installed by jungle, which I'm not sure is different than the main install but I went with it because it's portable and had no extra stupid requirements.  Am I doing anything wrong?  Is there an easy fix?<br><br>edit:  copied over to 80b and still having the same issue. <br><br></td></tr></table><br>
<a name="2093370"></a>

<a name="2093550"></a>

<a name="2093551"></a>

<a name="2093552"></a>

<a name="2093553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> No project files for using msbuild instead? xcode? linux?<br><br>I tried a bunch of things but couldn't get examples to build. Tried using 3 different versions of mingw with different errors... including the x64 error posted above already. Tried on 80b and 78g.<br><br><pre class=code>
TRANS monkey compiler V1.73
Parsing...
Semanting...
Translating...
Building...
gcc  -Wno-free-nonheap-object -O3 -DNDEBUG -I../glfw3/include -I../openal/include -I../stb -I../tinycthread -D__STRICT_ANSI__  -c -o ../stb/stb_image.o ../stb/stb_image.c
gcc  -Wno-free-nonheap-object -O3 -DNDEBUG -I../glfw3/include -I../openal/include -I../stb -I../tinycthread -D__STRICT_ANSI__  -c -o ../stb/stb_vorbis.o ../stb/stb_vorbis.c
gcc  -Wno-free-nonheap-object -O3 -DNDEBUG -I../glfw3/include -I../openal/include -I../stb -I../tinycthread -D__STRICT_ANSI__  -c -o ../tinycthread/tinycthread.o ../tinycthread/tinycthread.c
g++  -Wno-free-nonheap-object -O3 -DNDEBUG -I../glfw3/include -I../openal/include -I../stb -I../tinycthread -D__STRICT_ANSI__  -c -o ../main.o ../main.cpp
In file included from c:\mingw\include\direct.h:34:0,
                 from ../main.h:15,
                 from ../main.cpp:2:
c:\mingw\include\io.h:301:14: error: 'off64_t' does not name a type
__CRT_INLINE off64_t lseek64 (int, off64_t, int);
              ^
c:\mingw\include\io.h:302:14: error: 'off64_t' does not name a type
__CRT_INLINE off64_t lseek64 (int fd, off64_t offset, int whence) {
              ^
../main.cpp: In member function 'virtual FILE* BBGame::OpenFile(String, String)':
../main.cpp:1946:70: error: '_wfopen' was not declared in this scope
  return _wfopen( path.ToCString&lt;wchar_t&gt;(),mode.ToCString&lt;wchar_t&gt;() );
                                                                      ^
&lt;builtin&gt;: recipe for target '../main.o' failed
mingw32-make: *** [../main.o] Error 1
TRANS FAILED: Error executing 'mingw32-make CCOPTS="-Wno-free-nonheap-object -O3 -DNDEBUG" OUT="Release/MonkeyGame"', return code=2
Done.
</pre><br><br><pre class=code>
Parsing...
Semanting...
Translating...
Building...
g++  -Wno-free-nonheap-object -O3 -DNDEBUG -I../glfw3/include -I../openal/include -I../stb -I../tinycthread -D__STRICT_ANSI__  -c -o ../main.o ../main.cpp
g++ -Wl,--subsystem,windows -L../openal/libs/Win32 -L../glfw3/lib/Win32 -o Release/MonkeyGame ../stb/stb_image.o ../stb/stb_vorbis.o ../tinycthread/tinycthread.o ../main.o -lglew32 -lglfw3 -lopengl32 -lglu32 -lgdi32 -lws2_32 -lOpenAL32
../stb/stb_image.o: file not recognized: File format not recognized
collect2.exe: error: ld returned 1 exit status
Makefile:21: recipe for target 'Release/MonkeyGame' failed
mingw32-make: *** [Release/MonkeyGame] Error 1
TRANS FAILED: Error executing 'mingw32-make CCOPTS="-Wno-free-nonheap-object -O3 -DNDEBUG" OUT="Release/MonkeyGame"', return code=2
Done.
Hide full text
</pre> <br><br></td></tr></table><br>
<a name="2093583"></a>

<a name="2093586"></a>

<a name="2093587"></a>

<a name="2093588"></a>

<a name="2093589"></a>

<a name="2093597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well so far I've had no problems getting it to work with Linux.<br><br>Edit:<br><a href="https://www.dropbox.com/s/e9uh6dzx79tebw3/template.tar.gz?dl=0" target="_blank">Something for Linux users to play with.</a><br>After you have download the github files. Put it in the monkey targets/glfw3 directory and just copy over the binaries from the monkey bin directory.<br><br>Edit: And if you don't like the idea of using a pre-compiled binary do the following.<br>After getting Samah's files and extracting.<br>Copy over the Monkey binaries.<br>Download the <a href="http://www.glfw.org/download.html" target="_blank">GLFW source.</a><br>Extract src and deps directories and place them in the /monkey-glfw3/targets/glfw3/template/glfw3/ directory.<br>Make a directory in /monkey-glfw3/targets/glfw3/template/ named gcc_linux and create an empty file inside called Makfile.<br>Open this file up in a text editor and paste the code below and save.<br><pre class=code>CC=gcc
CFLAGS=

CXX=g++
CXXFLAGS=

CPPFLAGS=$(CCOPTS) \
 -I../glfw3/include \
 -I../glfw3/deps/GL \
 -I../glfw3/deps/ \
 -I../openal/include -I../stb \
 -D_GLFW_X11 \
 -D_GLFW_GLX \
 -D_GLFW_USE_OPENGL \
 -D_GLFW_HAS_GLXGETPROCADDRESS \
 -D_GLFW_USE_LINUX_JOYSTICKS \
 -pthread

LD=g++
LDFLAGS=
LDLIBS= -lGL -lopenal -lX11 -lXxf86vm -lXrandr -lXi -lpthread

OBJS=../glfw3/deps/getopt.o ../glfw3/deps/tinycthread.o ../glfw3/src/clipboard.o ../glfw3/src/gamma.o ../glfw3/src/context.o ../glfw3/src/glx_context.o ../glfw3/src/init.o ../glfw3/src/input.o ../glfw3/src/joystick.o ../glfw3/src/monitor.o ../glfw3/src/time.o ../glfw3/src/window.o ../glfw3/src/x11_clipboard.o ../glfw3/src/x11_gamma.o ../glfw3/src/x11_init.o ../glfw3/src/x11_joystick.o ../glfw3/src/x11_monitor.o ../glfw3/src/x11_time.o ../glfw3/src/x11_unicode.o ../glfw3/src/x11_window.o ../stb/stb_image.o ../stb/stb_vorbis.o ../main.o

all : $(OUT)

$(OUT) : $(OBJS)
	$(LD) $(LDFLAGS) -o $@ $(OBJS) $(LDLIBS)</pre> <br><br></td></tr></table><br>
<a name="2093609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Nobuyuki: Edit the Makefile in gcc_winnt and remove the -lglew32 from LDLIBS=. You should find it compiles then. <br><br></td></tr></table><br>
<a name="2093617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> dawlane:<br>If you're happy to work on Linux compatibility, would you like push permissions for the glfw3 fork? <br><br></td></tr></table><br>
<a name="2093677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Samah:<br>I'll do what every I can, when I can as a family member is seriously ill at the moment. But I would have to read up on GLFW (it's not something I played around with much). Plus I'm not familiar with github and I wouldn't want to screw it up.<br><br>TDM-GCC-64 with Win7 doesn't like the v80b std_image.c. I haven't checked prior versions yet, but I'm sure they did compile with warnings.<br>-D__STRICT_ANSI__ issues warnings with incompatible implicit declaration of built-in functions. Could try to add <a href="https://gcc.gnu.org/onlinedocs/gcc-4.7.4/gcc/C-Dialect-Options.html#index-fno-builtin-109" target="_blank">-fno-builtin</a> to the C/CPPFLAGS for the ones the compiler complains about if that particular directive is needed.<br><br>nigelibrown's openAL issue<br>The work around is to add the OpenAL32.dll to the openal/libs/Win32. Of course there will need to be a 64bit version of OpenAL32, if the std_image.c is solved.<br>And the only way to get a 64bit version of OpenAL is to build it using the sources from <a href="http://kcat.strangesoft.net/openal.html" target="_blank">OpenAL-Soft</a> or you can get the sources from <a href="http://sourceforge.net/projects/openal-soft/" target="_blank">SourceForge</a>. You will need cmake to compile.<br>Edit: Just re-read his post and missed the glwf3 problem. If your having problems with the pre-compiled binaries then do then do the same thing that I did with the Linux version and replace the Makefile in templates/gcc_winnt with the code below.<br><pre class=code>
CC=gcc
CFLAGS=

CXX=g++
CXXFLAGS=

CPPFLAGS=$(CCOPTS) \
 -I../glfw3/include \
 -I../glfw3/deps/GL \
 -I../glfw3/deps/ \
 -I../openal/include -I../stb \
 -I../stb \
 -D_GLFW_HAS_GLXGETPROCADDRESS \
 -D_GLFW_WIN32 \
 -D_GLFW_USE_OPENGL \
 -D_GLFW_WGL \
# -D__STRICT_ANSI__
#-DUSE_THREADED_DELAY

LD=g++
LDFLAGS= -Wl,--subsystem,windows -L../openal/libs/Win32 -L../openal/libs/Win64

LDLIBS= -lopengl32 -lglu32 -lgdi32 -lws2_32 -lOpenAL32

OBJS=../glfw3/deps/getopt.o ../glfw3/deps/tinycthread.o ../glfw3/src/clipboard.o ../glfw3/src/gamma.o ../glfw3/src/context.o ../glfw3/src/wgl_context.o ../glfw3/src/init.o ../glfw3/src/input.o ../glfw3/src/joystick.o ../glfw3/src/monitor.o ../glfw3/src/time.o ../glfw3/src/window.o ../glfw3/src/win32_clipboard.o ../glfw3/src/win32_gamma.o ../glfw3/src/win32_init.o ../glfw3/src/win32_joystick.o ../glfw3/src/win32_monitor.o ../glfw3/src/win32_time.o ../glfw3/src/win32_window.o ../stb/stb_image.o ../stb/stb_vorbis.o ../main.o

all : $(OUT)

$(OUT) : $(OBJS)
	$(LD) $(LDFLAGS) -o $@ $(OBJS) $(LDLIBS)</pre><br>Compiling problems with std_image.c and std_vorbis.c with TDM-GCC-64 are down to __forceinline. The errors should be something like there's multiple storage classes in declaration specifiers.<br>Adding<br><pre class=code>#if defined(__MINGW64_VERSION_MAJOR) &amp;&amp; defined(__forceinline)
 #undef __forceinline
#endif</pre>before each of the ifndef __forceinline should allow you to compile without error or warnings, but it really needs to be fixed properly.<br>Edit: This should fix it for MinGW/GCC. You will still need the code above. I haven't test this with VS or Xcode<br><pre class=code>#ifndef _MSC_VER
	#if defined(__GNUC__)
		#define __forceinline __inline__ __attribute__((always_inline))
	#elif defined(__cplusplus)
		#define __forceinline inline
	#else
		#define __forceinline
	#endif
#endif</pre><br><br>I will also look at knocking up a VS2010/VS2013 Project file and one for xcode at some point. <br><br></td></tr></table><br>
<a name="2093646"></a>

<a name="2093645"></a>

<a name="2093644"></a>

<a name="2093637"></a>

<a name="2093636"></a>

<a name="2093623"></a>

<a name="2093662"></a>

<a name="2093663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> @dawlane<br><br>it works!  Thanks a bunch.  I never thought to do that because I figured glew was a requirement.<br><br>BTW, the binaries for OpenAL-soft come with 64-bit versions. <br><br></td></tr></table><br>
<a name="2093665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nobyuki: Come to think of it. You shouldn't need to link GLU either. On some distributions of Linux, it's faster to install the GLU development libraries as it install all the GL and most of the X11 stuff. As for OpenAL, the linker complains about incompatible libraries. The ones you see in the openal templates, if I remember are for static linking in VS and are not compatible for the GNU tool chain which expects a compressed object file (.o  wrapped in an .a archive) or dll. And besides. You shouldn't be really statically linking to openal-soft with it being under the LGPL license unless you are going to release the application under the LGPL as well. <br><br></td></tr></table><br>
<a name="2093780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @dawlane: I will also look at knocking up a VS2010/VS2013 Project file... <br></div><br>That'd be great, because I'm still having issues getting LibOVR working with MinGW.  They have precompiled binaries for VC++, though.<br><br>Edit: I'm going to be away for about 3 weeks, so I won't be able to check this thread!  Be sure to post your experiences for my triumphant return. :) <br><br></td></tr></table><br>
<a name="2093690"></a>

<a name="2093847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK VS is causing me problems. I can get it to compile after a few tweaks of Main.h, but running the executable generates a MAV on game.SetDelegate in the App class. So either I'm missing something or the target requires Visual Studio specific fixes.<br>Mark says he has a GLFW3 target ready to go, but is reluctant to release it because of the bugs in the GLFW3 library it's self and by reading some of the GLFW forum posts I couldn't blame him. Maybe could badger him to release what he has sofar as a separate down load.<br><br>There are a few post on the Occulus forum on compiling libOVR with MINGW, but on for the full SDK. <br><br></td></tr></table><br>
<a name="2094076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @dawlane: Mark says he has a GLFW3 target ready to go, but is reluctant to release it because of the bugs in the GLFW3 library it's self and by reading some of the GLFW forum posts I couldn't blame him. <br></div><br>This is what experimental feature branches are for.  If Mark wants the community to contribute to the Monkey SDK by putting it on GitHub, he should be as transparent as possible with what he's doing.  Developers helping developers - it's a win-win situation! :D<br><br><div class="quote"> @dawlane: There are a few post on the Occulus forum on compiling libOVR with MINGW, but on for the full SDK. <br></div><br>I've read most of them already, and all of the forks people have provided are way out of date with the mainline.  I managed to compile everything nicely with the penultimate release, but it would crash as soon as it tried to initialise the OVR OpenGL device.  Common problem, apparently, and fixed in the newer SDK.<br><br>Also, hi from Sorrento, Italy!<br><br>Edit: dawlane, please give me your GitHub info so I can add you. <br><br></td></tr></table><br>
<a name="2094075"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
