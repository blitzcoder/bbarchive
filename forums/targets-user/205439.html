<!DOCTYPE html><html lang="en" ><head ><title >PopCap Sexy Framework</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >PopCap Sexy Framework</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=523" >User Targets</a>/<a href="#bottom" >PopCap Sexy Framework</a><br><br>
<a name="2060879"></a>

<a name="2060880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> GitHub: <a href="https://github.com/Ferddi/psf-monkey" target="_blank">https://github.com/Ferddi/psf-monkey</a><br><br>Original Framework: <a href="http://sourceforge.net/projects/popcapframework/" target="_blank">http://sourceforge.net/projects/popcapframework/</a><br><br>License: <a href="http://forum.fischeronline.de/" target="_blank">http://forum.fischeronline.de/</a><br><br><b>Requirements</b><br><br>1. MinGW is installed and setup correctly.  And make sure the C++ Tool target is working.  (You will need this for compiling trans)<br><br>2. Visual C++ is installed and setup correctly.  Make sure GLFW target is working.<br><br>3. Monkey V69+<br><br><b>How to install the target</b><br><br>1. Download DirectX SDK December 2006: <a href="http://www.microsoft.com/en-au/download/details.aspx?id=10990" target="_blank">http://www.microsoft.com/en-au/download/details.aspx?id=10990</a> (448MB!)  <br><br>You can use other version, as long as Direct X 7 is still there.  That is, Direct Draw and Direct 3D 7.  <br><br>Install the DirectX SDK into the directory C:\sdk\Microsoft DirectX SDK (December 2006).  IF NOT YOU HAVE TO CHANGE IT IN THE VISUAL C++ SOLUTION FILE!<br><br>2. Download the target from github (https://github.com/Ferddi/psf-monkey), and copy the directory over into your monkey directory.  Hopefully seeing the github you will realise where those directory should go.<br><br>3. In the directory monkey/src/transcc/ there is a batch file "c.bat".  Double click on this file.  It will do the following to your Monkey directory:<br>A) Rename transcc_winnt.exe to transcc_winnt_original.exe<br>B) Compile the new transcc_winnt.exe to be able to compile the sexy framework.<br><br>4. In the directory monkey/modules/mojo/, in the file app.monkey, you need to add:<br><br>TARGET="sexy" Or - into the line so it becomes:<br><br>#If TARGET="sexy" Or TARGET="android" Or TARGET="flash" Or TARGET="glfw" Or TARGET="html5" Or TARGET="ios" Or TARGET="psm" Or TARGET="win8" Or TARGET="xna"<br><br>so that it Import native/mojo.sexy.cpp.  IF YOU DO NOT DO THIS STEP, YOU WILL GET 101 ERRORS and 19 WARNINGS! <br><br>5. That's it and hopefully when you open up Ted "PopCap Sexy Framework" will appear as a target.  AND you can compile the bananas.<br><br><b>Important Notes</b> (AT LEAST READ THE FIRST 3)<br><br>1. Everyone that uses this say BIG THANKS to Mark Sibly.  Because 80% of mojo.sexy.cpp is mojo.glfw.cpp.  Most of mojo is matrix transformation code.  If I have to rewrite that chance are it will not be compatible with other targets!  I have emailed him asking for permission to release and he has given me the go ahead.<br><br>2. Per Popcap license you have to say thanks to them in the credit.  For example in the special thanks of the credit say, "PopCap for their great framework".<br><br>3. Per Popcap license you have to include their license text file in your game.  That is the file "PopCap Framework License.txt".<br><br>4. I remove Bass library from the code altogether, this target is using DirectSound.  If you want to put it back in, in file targets\sexy\template\SexyAppFramework\SexyAppBase.cpp, function CreateMusicInterface uncomment line:<br><br><pre class=code>return new BassMusicInterface(mInvisHWnd);</pre><br><br>and comment line:<br><br><pre class=code>//return new MusicInterface;</pre><br><br>You may need to add several functions to get Bass working.  I forgot exactly what I did to get DirectSound going.<br><br>5. If ALOT of people want to be compatible up to Windows 98, we have to downgrade to Visual C++ 2005.  Currently we are at Windows XP and above.  I personally think it is good enough Windows XP and above.<br><br>6. I have run all the bananas twice, once in 3D and once in Software, all seems to be working ok.  (Well ... read below)  So I guess run your program with it, and let me know what problem arises?  <br><br>7. I have included the banana screenmode, which show it can change screen size.  But the framework was never meant to handle this.  What I did, is more of a hack.  I have bashed it during my testing, seems to be working.  (Again I tested it in 3D and software mode.)<br><br>8. So if you want to test your game in software mode, in the file targets\sexy\modules\native\sexygame.cpp, in the function GameApp::GameApp() change:<br><br><pre class=code>mAutoEnable3D = true;</pre><br><br>to<br><br><pre class=code>mAutoEnable3D = false;</pre><br><br><b>2 known problems</b><br><br>1. When the framework goes into software rendering, and you need to draw a rotated image with additive blend, the framework will fail.  I have looked into the code, I basically need to write a new SWTri.cpp.  It is too hard.  <br><br>IMO, if it goes into software rendering mode, it is probably OLD and SLOW computers.  And at that stage you don't want to be doing rotation and additive blend on a slow computer.<br><br>So if you run the banana/charlie/blobmonster in software mode, it will NOT glow.<br><br>2. Don't keep on destroying and loading images in the main loop, this causes memory leak.  And I don't know how to chase it down.  In the bananas/mak/mojotest it does image.Discard and Loadstuff in the update loop.  I have checked in my task manager, that the memory keeps going up.  <br><br>To be fair to the framework, it was never build for this.  If you looked at all PopCap games they load it all in the beginning of the game.  So as long as you load everything at the start of the game you should be fine.<br><br>BUT, if someone is a C++ expert and can help track this down for me, I would greatly appreciate it.  Or you can point me to use the correct tool for the job. <br><br></td></tr></table><br>
<a name="2060712"></a>

<a name="2060716"></a>

<a name="2060717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... <br><br></td></tr></table><br>
<a name="2060732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ferdi - be careful, you might be breaking mojo licensing by sharing your target. <br><br></td></tr></table><br>
<a name="2060740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Beaker - I have emailed Mark to look at the file, and he has given me the go ahead.  Actually I am kinda surprise Mark gave me the go ahead, but I thought I tried my luck and email him.<br><br>To anyone else that may do this, Beaker is right, at the very least email Mark first, you are threading a fine line.  Please don't go how come that target can, and this target can't. <br><br></td></tr></table><br>
<a name="2060736"></a>

<a name="2060737"></a>

<a name="2060759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is really quite awesome. <br><br></td></tr></table><br>
<a name="2060827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Soap, I am glad you approve. =) <br><br></td></tr></table><br>
<a name="2060869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I followed the installation process, but for some reason 'Trans' isn't actually working. 'Trans' compiles just fine, but it doesn't seem to want to run. I've even compiled it myself, and it gives me the same issue. When I launch 'Ted', the target area is completely blank, and I'm not sure why.<br><br>So does this work with V70e, or do I have to update to V71? If I have to update, it's not a big deal, but you'd definitely need to say something about that.<br><br>By the way, I haven't messed with DirectX in Visual C++, where do I go to change DirectX's the directory? <br><br></td></tr></table><br>
<a name="2060878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> When I launch 'Ted', the target area is completely blank, and I'm not sure why. <br></div><br><br>That's not good.  And I am pretty sure I know why.  When my c.bat tries to compile transcc_winnt.exe it uses MinGW.  I just changed my MinGW directory, and I get an empty target in Ted.  Sorry I have to change the step above to include that you have MinGW installed.<br><br>When I double-click on c.bat in the directory src\transcc, this is what should happen:<br><br><img src="https://dl.dropboxusercontent.com/u/129162597/compiling-trans.png"><br><br>And in the directory bin you should see transcc_winnt.exe AND transcc_winnt_original.exe.  If you don't have transcc_winnt.exe, the target will be empty in Ted.  So if you want to quickly fix it, just rename transcc_winnt_original.exe back to transcc_winnt.exe.  This is what the bin directory should look like:<br><br><img src="https://dl.dropboxusercontent.com/u/129162597/trans-compile-correctly.png"><br><br>Since yours fail, install MinGW (Make sure in bin\config.winnt.txt you are pointing to the correct MinGW directory), and then run c.bat again.<br><br><div class="quote"> So does this work with V70e, or do I have to update to V71? If I have to update, it's not a big deal, but you'd definitely need to say something about that. <br></div><br><br>Sorry I forgot to mention that.  I kinda rushed the above post, because I wasn't expecting a reply from Mark =)  I made it in V69.  Before I release I test it was working on V71C.  I just check on V70G, it is working.  I don't have V70e, sorry.<br><br>I'll answer your DirectX question in the next post need to take some screen capture. <br><br></td></tr></table><br>
<a name="2060891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. Double click on the file targets\sexy\template\vc2010\MonkeyGame.sln.<br><br>2. Right click on SexyAppBase and click on Properties:<br><br><img src="https://dl.dropboxusercontent.com/u/129162597/right-click-sexyappbase.png"><br><br>3. Set the configuration to All Configuration:<br><br><img src="https://dl.dropboxusercontent.com/u/129162597/all-configurations.png"><br><br>NOTE] The way all configurations works is that if you place the directory in here, it will place it in debug, debug - incremental, debug - zylom, release etc etc  Now if type the same directory in all configurations, it will place the same directory in debug, debug - incremental debug - zylom etc etc again, so you have 2 of the same directory in each of the configuration.  Microsoft at its finest =)  So just becareful when using it, may get annoying.<br><br>4. In the SexyAppBase Property Pages window, click on VC++ Directories.  And the Direct X directory is in "Include Directories" (Direct X header file for compiling) and "Library Directories" (Direct X library for linking).  Shown in this image:<br><br><img src="https://dl.dropboxusercontent.com/u/129162597/sexyappbase-property-pages.png"><br><br>On the side note when you finish closing VC++ you probably notice MonkeyGame.sdf file which is 53MB!  You can just delete it if you like, not important. <br><br></td></tr></table><br>
<a name="2060883"></a>

<a name="2060888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Ferdi: That's not good. And I am pretty sure I know why. When my c.bat tries to compile transcc_winnt.exe it uses MinGW. I just changed my MinGW directory, and I get an empty target in Ted. Sorry I have to change the step above to include that you have MinGW installed.<br><br>When I double-click on c.bat in the directory src\transcc, this is what should happen: INSERT IMAGE HERE<br> <br></div><br><br>I don't use MinGW very often (With Monkey), but I've had it installed for a while. Like I said, the EXE compiles, and it tells me that it worked, but the program just doesn't do anything.<br><br>I looked into this further, and it turns out it's a linking issue with my copy of MinGW. For some reason my version of MinGW doesn't statically link all of its dependencies, and 'Ted' wasn't saying anything. So sorry about that, it was my fault.<br><br>I've had this kind of issue before, and I have no idea why MinGW needs to link "libstdc++-6.dll" on runtime. If you know what's going on there, by all means tell me. That issue's been driving me nuts. I may just reinstall it if this continues.<br><br>Anyway, thanks for telling me about the lib and include fixes for DirectX. I think I'm a bit too used to doing everything with a console or make file.<br><br>EDIT: I just wasted 30 minutes wondering why the target wasn't seeing the DirectX location. Turns out I forgot to change the configuration to "All Configurations" or "Release", you might want to mention that above. I really hate that about Visual Studio. <br><br></td></tr></table><br>
<a name="2060885"></a>

<a name="2060886"></a>

<a name="2060887"></a>

<a name="2060884"></a>

<a name="2060889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> why MinGW needs to link "libstdc++-6.dll" on runtime. <br></div><br><br>I have never run into that problem before.  I am like you I hardly use it, I only use it to compile trans.<br><br><div class="quote"> I just wasted 30 minutes wondering why the target wasn't seeing the DirectX location. <br></div><br><br>Sorry forgot to mention that.  Will update the above post.  You are right debug and release can have different directory.<br><br>Yes VS is getting worse and worse with each release, I remember you can set  directory globally in 2005 but now in 2010 they already remove it =(<br><br>Are you ok now? <br><br></td></tr></table><br>
<a name="2060893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Release mode was not compiling, I just uploaded a fix for that.  JPEG2000 in the image lib was not included during compile time, I had to add those in. <br><br></td></tr></table><br>
<a name="2060905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <strike>I'm having some trouble getting the target to work with release mode, but I'm pretty sure I can fix it pretty easily.</strike> Never mind, I just read your last post.<br><br>Also, I tried running my project with the target, and I apparently can't use 'BeginRender' without it crashing (Haven't tried it since your most recent version was uploaded). Apparently the native debugger is saying that the crash has something to do with 'SetScissor'.<br><br>EDIT: After running the program in release mode, I got this (Pay no attention to Windows 7 screwing up my GUI elements):<br><br><img src="http://puu.sh/3oNrG.png"><br><br>And strangely enough, Visual Studio 2012's debugger works perfectly with Visual C++ 2010 programs.<br><br>By the way, is filtered mode supposed to be forced with this target? (This seems to only be an issue with DirectX)<br><br>EDIT: I forgot to mention this before, but you might want to make the window centered by default. And for some reason release mode has a ton of warnings.<br><br>Sorry I'm not using Git for all of this, the forums are just more convenient for me.<br><br>I know this is a bit off-topic, but is Git GUI any good? I've only messed with the console stuff. <br><br></td></tr></table><br>
<a name="2060904"></a>

<a name="2060903"></a>

<a name="2060901"></a>

<a name="2060902"></a>

<a name="2060897"></a>

<a name="2060898"></a>

<a name="2060899"></a>

<a name="2060907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh right, I forgot about this before, but the OS module seems to work pretty well with this target. All you really have to do is edit the preprocessor code at the beginning.<br><br>Sorry about all of the bug reports, but at least they're getting ironed out quickly. <br><br></td></tr></table><br>
<a name="2060906"></a>

<a name="2060916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. The crash.<br><br>I tried reproducing it over here to no avail.  I know this is a REALLY BIG ask.  Can you send your project over to ferddi [at] gmail.com (yes double d).  I promise I will delete everything once the bug is fix.  I will look into it after my day job.<br><br>Or can you reproduce it with a shorter code?<br><br>2. Filtered mode.<br><br>Yes this might be impossible.  Can you do a screen cap of one of the banana to show me the difference?  But I have a feeling I might not be able to turn it off in Direct3D.<br><br>3. Git<br><br>I am no Git expert.  I think it will be a little hard actually, just grab the zip from GitHub and away you go.<br><br>I am using the software GitHub for Windows, even for my local repos, which doesn't get uploaded to GitHub.  This seems to be good enough for me, I don't use branches etc, which you definitely need if you work in a team or may be even when you doing a release.<br><br>There was a post in this forum about Git which was really good.<br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=4864" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=4864</a><br><br>Read what Corum has to say.  So basically read this:<br><br><a href="http://www.atlassian.com/git/workflows" target="_blank">http://www.atlassian.com/git/workflows</a> <br><br>and download this:<br><br><a href="http://www.sourcetreeapp.com/" target="_blank">http://www.sourcetreeapp.com/</a><br><br>As for Git GUI, I used it may be once or twice, then I went back to GitHub for Windows.<br><br>4. Preprocessor code for the OS Module<br><br>Show me the preprocessor code?<br><br>5. Warnings<br><br>I have removed most of the warnings.  But I put it in my todo list to go back and look at it carefully.  Just incase MS may be right.<br><br>6. Centering<br><br>I'll put it in as a config, just incase other people doesn't want it.  But I have to go into PopCap code to change this.  Not a 5 minute job. <br><br></td></tr></table><br>
<a name="2060915"></a>

<a name="2060914"></a>

<a name="2060925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Ferdi: 1. The crash.<br> <br></div><br>That would require a lot of explanation, not to mention a decent bit of work... I wrote my own wrapper library for graphics, it can support a number of frameworks, but right now it's just Mojo and MiniB3D (Haven't tested MiniB3D in a while). Plus, all of the source code is dependent on my modules, and my modifications of modules. Plus, I don't know you very well, so giving you my source code just doesn't feel right.<br><br>I made a separate program to test 'BeginRender/EndRender', and it crashed just like my project did. Assuming this isn't my problem, my guess is that it's not initializing things properly.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo

Function Main:Int()
	New Application

	Return 0
End

Class Application Extends App
	' Constant variables:
	Const UPDATE_RATE:Int = 30

	' Methods:
	Method OnCreate:Int()
		SetUpdateRate(UPDATE_RATE)
		
		Return 1
	End
	
	Method OnRender:Int()
		' Nothing needs to be here.
	
		Return 0
	End
	
	Method OnUpdate:Int()
		BeginRender()
		
		' Nothing needs to be here.
		
		EndRender()
	
		Return 0
	End
End
</textarea><br><br><div class="quote"> <br>Ferdi: 2. Filtered mode.<br> <br></div><br>Software renderer:<br><img src="http://puu.sh/3pgol.png"><br><br>DirectX-based renderer:<br><img src="http://puu.sh/3pgvi.jpg"><br><br><div class="quote"> <br>Ferdi: 3. Git<br> <br></div><br>Thanks, I'll definitely look into what you suggested.<br><br><div class="quote"> <br>Ferdi: 4. Preprocessor code for the OS Module<br><br>Show me the preprocessor code?<br> <br></div><br><br>It's right at the top, you can't miss it:<br>[monkeycode]<br>#If TARGET="stdcpp" Or TARGET="glfw" Or TARGET="sexy"<br><br>Import "native/os.cpp"<br><br>Extern<br><br>' Etc...<br>[/monkeycode]I've had no problems with the OS module so far, but some things may not actually function.<br><br><div class="quote"> <br>Ferdi: 6. Centering<br><br>I'll put it in as a config, just in case other people doesn't want it. But I have to go into PopCap code to change this. Not a 5 minute job.<br> <br></div><br>Something tells me it isn't exactly complicated to change this. Either way, having it as an option would be fine by me. <br><br></td></tr></table><br>
<a name="2060961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. The Crash<br><br>I have fixed the crash.  But you can't draw anything in OnUpdate.  <br><br>This is the problem.  When OnRender is called I have a pointer to the graphics class.  Once that frame(OnRender) is finished, that pointer is gone.<br><br>Now in that example, you put the draw into the update.  So when the update is called the pointer from OnRender is long gone, and that's why it is crashing.<br><br>I really need to think about this one.  I did notice that only image is drawn in GLFW (DrawText and DrawCircle was not working), while on HTML5 everything seems to be working. <br><br></td></tr></table><br>
<a name="2060963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> 2. The Filtered Mode.<br><br>I have added another function in mojo.graphicssexy called SetLinearBlend.  You used it as follow:<br><br><pre class=code>

Import mojo.graphicssexy

...

	Method OnRender:Int()
		' Nothing needs to be here.
	
		SetLinearBlend(False) 'Blocky
		DrawImage(image, 100, 100, 0, 4, 4)
		SetLinearBlend(True) 'Smooth
		DrawImage(image, 100, 200, 0, 4, 4)
	
		Return 0
	End

...

</pre><br><br>4. You know it took me a while for me to figure out what you are talking about OS Module, until I saw OS in the module directory.  Not sure how long I have Monkey, but I never knew it existed until you told me ... pretty sad.  Good to know it is there now =) <br><br></td></tr></table><br>
<a name="2060967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> 6. Centering<br><br>I think I didn't explain it right why I say it is hard.  When I made this target, my motto has always been to not touch PopCap code as much as possible, ESPECIALLY the initialization code.  I believe that is where most things will/can go wrong!  The reason is that PopCap has tested this framework on millions of computers, and we know that init code works.  So if we start changing it, we might start introducing bugs to it.  That's why I am so scared of changing any PopCap code, for example init code.<br><br>Anyway, I have added a function called CenterWindow.  You called it in the Main before you new the application like this:<br><br><pre class=code>

Import mojo.graphicssexy

Function Main:Int()

	CenterWindow(False)
	New Application

	Return 0

End Function

</pre><br><br>I am going back to problem 1 now. <br><br></td></tr></table><br>
<a name="2061061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. The Crash<br><br>I have made a banana called updatedraw.monkey.  That does drawing in the update.  <br><br>Ok, you gotta remember the framework was never design to do this.  So probably this is going to take a while to make it robust, and works smoothly.<br><br>[Edit] Forgot to mention, instead of using BeginRender and EndRender you need to use BeginRenderSexy and EndRenderSexy, because I need to get the pointer to the Graphics class and Redraw the screen at the end. <br><br></td></tr></table><br>
<a name="2061054"></a>

<a name="2061080"></a>

<a name="2061082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Couldn't you technically use 'Alias' to clear that issue up?<br><br>Anyway, I was testing the screen-mode functionality, and apparently while you're in fullscreen it restricts your cursor (MouseX and MouseY) based on the initial resolution, not the current resolution.<br><br>Also, you might want to say that the screen-mode example uses the new DrawPoly overload. <br><br></td></tr></table><br>
<a name="2061101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferdi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Couldn't you technically use 'Alias' to clear that issue up? <br></div><br><br>What is Alias?  Can you show me an example?<br><br><div class="quote"> Anyway, I was testing the screen-mode functionality, and apparently while you're in fullscreen it restricts your cursor (MouseX and MouseY) based on the initial resolution, not the current resolution <br></div><br><br>Fix<br><br><div class="quote"> Also, you might want to say that the screen-mode example uses the new DrawPoly overload.  <br></div><br><br>Done. <br><br></td></tr></table><br>
<a name="2061161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'Alias' is essentially Monkey's version of typedef, but after looking into it, it seems to only really work with classes and files/modules. <br><br></td></tr></table><br>
<a name="2061153"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
