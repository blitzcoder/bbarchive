<!DOCTYPE html><html lang="en" ><head ><title >Adventure Window - Game Creator</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Adventure Window - Game Creator</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=523" >User Targets</a>/<a href="#bottom" >Adventure Window - Game Creator</a><br><br>
<a name="2047860"></a>

<a name="2047861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am making a game engine with monkey (it's sort of like a target but not precisely), but there are two things I need before I can release it. First thing - I am in dire need of a reading INI file functions. I found a script on the forum and tried it, modified it, never figured out how to actually use it.<br><br>All I need is something like - "INIRead(file, section, key,default)"<br>That's it. But I can't seem to figure it out at all.<br><br>The second thing - have have no idea how to use the 3D module it makes no sense to me. I tried running the examples and I get errors.<br><br>Thanks!<br>TKG <br><br></td></tr></table><br>
<a name="2048284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't comment on the 3D module, but as far as INI stuff goes, I ported a BlitzMAX ini reader/writer a while ago. Which is the script I assume you're referring to.<br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=3077" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=3077</a><br><br>It's extremely easy to use.<br><br>file.ini<br><pre class=code>[Example]
rect = 0, 0, 40, 20
some value = "Hello World"

[More]
ini reader = 18.45</pre><br>Load it<br><pre class=code>Local ini:Ini = Ini.Load(LoadString("file.ini"))</pre><br>Get and print value<br><pre class=code>Print ini.GetFloat("ini reader", "More")</pre><br>Output<br><pre class=code>18.45</pre><br><br><br>On a side note, if you're having problems reading and/or running code, jumping straight to a game engine should not be your goal at the moment. I've been aiming to create a game engine for some 5 years now and have around 12 years of programming experience. It's much harder than it seems from the outside. It's better, and generally quicker, to just create games. At the most, little tools for your specific game are fine, but a game engine requires that the code be extremely flexible and modular in design, which is not an easy task. <br><br></td></tr></table><br>
<a name="2048283"></a>

<a name="2048356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Finally got it working, thanks!<br><br>Actually this game engine is 100% done. I originally wrote it in GameMakerLanguage, which has built-in INI functions. I'm translating the code equivalents into monkey code for the sake of adding more supported platforms...<br><br>It is understandable to think I have no understanding of how to program after seeing this topic, but that isn't the case. I'm more used to C++ like languages such as GML. Monkey on the otherhand seems to be more like VisualBasic (perhaps Delphi?) anyway thanks for the help. <br><br>I the few error fixes to do and I'll be ready to share my end result with you guys here, (hopefully on the GameMaker Community as well)...<br><br>Cheers!<br>TKG <br><br></td></tr></table><br>
<a name="2048370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, I see. That's my bad. As for Monkey, it's like a cross between the look of BASIC and the structure of Java/C#.<br><br>Anyways, glad you got it working. <br><br></td></tr></table><br>
<a name="2048365"></a>

<a name="2048364"></a>

<a name="2048432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting project and for sure will give it a spin once it is released. <br><br></td></tr></table><br>
<a name="2048642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> New problem, array index out of bounds - I get this error on the html5, flash, and python targets. Have no idea how to fix it - help?<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo
Import INIFunctions

Class Game Extends App
Method OnCreate()
SetUpdateRate 60
Local ini:Ini = Ini.Load(LoadString("run.ini"))
Local hotspot_index=0
'Local enablepanoramamode=0
Local frame_haspanoramaprojection=0
Local variable_maxvariablecount=0
Local frame_maxhotspotcount=0
Local winw=0
Local winh=0
Local MouseX2=0
Local MouseY2=0
Local createtimedevent=0
Local frame_hastimedevent=0
Local time=0
Local totaltime=0
Local currentframe:String=""
Local timedeventgotoframe1=0
Local frame_timedeventgotoframe=0
Local gotoframe1=0
Local gotoframe2=0
Local frame=0
Local zdirection=0
Local enableclick=0
Local mdx=0
Local mdy=0
Local mdx2=0
Local mdy2=0
Local mdxx=0
Local mdyy=0
Local click=0
Local mmx=0
Local mmy=0
Local w=0
Local h=0
Local z=0
Local nextcheck=0
Local drawgui=0
'window_set_cursor(cr_cross)
Local enabledframe=1
Local zcloseto=0
Local triggercreate=0
Local image_speed=0
Local gametitle:String=""
Local windowwidth=1024
Local windowheight=768
Local mx=0
Local my=0
Local guitemplate:String=""
Local spr:Image
Local startframe:String=""
Local stopsound_all=0
Local stopsound_channel1=0
Local stopsound_channel2=0
Local stopsound_channel3=0
Local stopsound_channel4=0
Local stopsound_channel5=0
Local stopsound_channel6=0
Local stopsound_channel7=0
Local stopsound_channel8=0
Local loopsound_channel1=0
Local loopsound_channel2=0
Local loopsound_channel3=0
Local loopsound_channel4=0
Local loopsound_channel5=0
Local loopsound_channel6=0
Local loopsound_channel7=0
Local loopsound_channel8=0
Local playsound_channel1:String=""
Local playsound_channel2:String=""
Local playsound_channel3:String=""
Local playsound_channel4:String=""
Local playsound_channel5:String=""
Local playsound_channel6:String=""
Local playsound_channel7:String=""
Local playsound_channel8:String=""
Local s1:Sound
Local s2:Sound
Local s3:Sound
Local s4:Sound
Local s5:Sound
Local s6:Sound
Local s7:Sound
Local s8:Sound
Local frame_background:String=""
Local frame_timedeventdestinationframe:String=""
Local gotoframe12:Int[]
Local frame2:String[]
Local showmessage2:Int[]
Local messagetext2:String[]
Local variable_name2:Int[]
Local variable_value2:Int[]
Local variable_set2:Int[]
Local i=0
Local varindex=0
Local left2:Int[]
Local top2:Int[]
Local width2:Int[]
Local height2:Int[]
Local stopsound_channel12:Int[]
Local stopsound_channel22:Int[]
Local stopsound_channel32:Int[]
Local stopsound_channel42:Int[]
Local stopsound_channel52:Int[]
Local stopsound_channel62:Int[]
Local stopsound_channel72:Int[]
Local stopsound_channel82:Int[]
Local loopsound_channel12:Int[]
Local loopsound_channel22:Int[]
Local loopsound_channel32:Int[]
Local loopsound_channel42:Int[]
Local loopsound_channel52:Int[]
Local loopsound_channel62:Int[]
Local loopsound_channel72:Int[]
Local loopsound_channel82:Int[]
Local playsound_channel12:String[]
Local playsound_channel22:String[]
Local playsound_channel32:String[]
Local playsound_channel42:String[]
Local playsound_channel52:String[]
Local playsound_channel62:String[]
Local playsound_channel72:String[]
Local playsound_channel82:String[]
Local s12:Sound[]
Local s22:Sound[]
Local s32:Sound[]
Local s42:Sound[]
Local s52:Sound[]
Local s62:Sound[]
Local s72:Sound[]
Local s82:Sound[]
Local stopsound_all2:Int[]
Local Transparent:Image
gametitle=ini.GetString("gamesettings","gametitle","")
drawgui=ini.GetFloat("gamesettings","drawgui",0)
guitemplate=ini.GetString("gamesettings","guitemplate","")
If drawgui=1 Then spr=LoadImage(guitemplate,1)
startframe=ini.GetString("gamesettings","startframe","")
windowwidth=ini.GetFloat("gamesettings","windowwidth",1024)
windowheight=ini.GetFloat("gamesettings","windowheight",768)
'fullscreen=ini.GetFloat("gamesettings","fullscreen",0)
'panoramaaspectratio=ini.GetFloat("gamesettings","panoramaaspectratio",4)
'direction=ini.GetFloat("gamesettings","panoramahorizontaldirection",0)
'zdirection=ini.GetFloat("gamesettings","panoramaverticaldirection",0)*50
currentframe=startframe
stopsound_all=ini.GetFloat(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel1=ini.GetFloat(String(currentframe),"frame_stopsound_channel1",0)
If (stopsound_channel1=1) Then StopChannel(1)
playsound_channel1=ini.GetString(String(currentframe),"frame_playsound_channel1","")
loopsound_channel1=ini.GetFloat(String(currentframe),"frame_playsound_channel1",0)
If playsound_channel1&lt;&gt;"" Then 
s1=LoadSound(playsound_channel1)
PlaySound(s1,1,loopsound_channel1)
Endif
stopsound_channel2=ini.GetFloat(String(currentframe),"frame_stopsound_channel2",0)
If (stopsound_channel2=1) Then StopChannel(2)
playsound_channel2=ini.GetString(String(currentframe),"frame_playsound_channel2","")
loopsound_channel2=ini.GetFloat(String(currentframe),"frame_playsound_channel2",0)
If playsound_channel2&lt;&gt;"" Then 
s2=LoadSound(playsound_channel2)
PlaySound(s2,2,loopsound_channel2)
Endif
stopsound_channel3=ini.GetFloat(String(currentframe),"frame_stopsound_channel3",0)
If (stopsound_channel3=1) Then StopChannel(3)
playsound_channel3=ini.GetString(String(currentframe),"frame_playsound_channel3","")
loopsound_channel3=ini.GetFloat(String(currentframe),"frame_playsound_channel3",0)
If playsound_channel3&lt;&gt;"" Then 
s3=LoadSound(playsound_channel3)
PlaySound(s3,3,loopsound_channel3)
Endif
stopsound_channel4=ini.GetFloat(String(currentframe),"frame_stopsound_channel4",0)
If (stopsound_channel4=1) Then StopChannel(4)
playsound_channel4=ini.GetString(String(currentframe),"frame_playsound_channel4","")
loopsound_channel4=ini.GetFloat(String(currentframe),"frame_playsound_channel4",0)
If playsound_channel4&lt;&gt;"" Then 
s4=LoadSound(playsound_channel4)
PlaySound(s4,4,loopsound_channel4)
Endif
stopsound_channel5=ini.GetFloat(String(currentframe),"frame_stopsound_channel5",0)
If (stopsound_channel5=1) Then StopChannel(5)
playsound_channel5=ini.GetString(String(currentframe),"frame_playsound_channel5","")
loopsound_channel5=ini.GetFloat(String(currentframe),"frame_playsound_channel5",0)
If playsound_channel5&lt;&gt;"" Then 
s5=LoadSound(playsound_channel5)
PlaySound(s5,5,loopsound_channel5)
Endif
stopsound_channel6=ini.GetFloat(String(currentframe),"frame_stopsound_channel6",0)
If (stopsound_channel6=1) Then StopChannel(6)
playsound_channel6=ini.GetString(String(currentframe),"frame_playsound_channel6","")
loopsound_channel6=ini.GetFloat(String(currentframe),"frame_playsound_channel6",0)
If playsound_channel6&lt;&gt;"" Then 
s6=LoadSound(playsound_channel6)
PlaySound(s6,6,loopsound_channel6)
Endif
stopsound_channel7=ini.GetFloat(String(currentframe),"frame_stopsound_channel7",0)
If (stopsound_channel7=1) Then StopChannel(7)
playsound_channel7=ini.GetString(String(currentframe),"framw_playsound_channel7","")
loopsound_channel7=ini.GetFloat(String(currentframe),"frame_playsound_channel7",0)
If playsound_channel7&lt;&gt;"" Then 
s7=LoadSound(playsound_channel7)
PlaySound(s7,7,loopsound_channel7)
Endif
stopsound_channel8=ini.GetFloat(String(currentframe),"frame_stopsound_channel8",0)
If (stopsound_channel8=1) Then StopChannel(8)
playsound_channel8=ini.GetString(String(currentframe),"frame_playsound_channel8","")
loopsound_channel8=ini.GetFloat(String(currentframe),"frame_playsound_channel8",0)
If playsound_channel8&lt;&gt;"" Then 
s8=LoadSound(playsound_channel8)
PlaySound(s8,8,loopsound_channel8)
Endif
frame_background=ini.GetString(currentframe,"frame_background","\")
'frame_haspanoramaprojection=ini.GetFloat(String(currentframe),"frame_haspanoramaprojection",0)
frame_hastimedevent=ini.GetFloat(String(currentframe),"frame_timedeventgotoframe",0)
frame_timedeventgotoframe=ini.GetFloat(String(currentframe),"imedeventgotoframe",0)
frame_timedeventdestinationframe=ini.GetString(currentframe,"frame_timedeventdestinationframe","")
frame_maxhotspotcount=ini.GetFloat(String(currentframe),"frame_maxhotspotcount",0)
variable_maxvariablecount=ini.GetFloat("Local_variable_properties","variable_maxvariablecount",0)
i=0
While (i&lt;=frame_maxhotspotcount)
left2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_left",0)
top2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_top",0)
width2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_width",0)
height2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_height",0)
stopsound_all2[i]=ini.GetFloat(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all2[i]=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel12[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel1",0)
If (stopsound_channel12[i]=1) Then StopChannel(1)
playsound_channel12[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel1","")
loopsound_channel12[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel1",0)
If playsound_channel12[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel12[i])
PlaySound(s12[i],1,loopsound_channel12[i])
Endif
stopsound_channel22[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel2",0)
If (stopsound_channel22[i]=1) Then StopChannel(2)
playsound_channel22[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel2","")
loopsound_channel22[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel2",0)
If playsound_channel22[i]&lt;&gt;"" Then 
s22[i]=LoadSound(playsound_channel22[i])
PlaySound(s22[i],2,loopsound_channel22[i])
Endif
stopsound_channel32[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel3",0)
If (stopsound_channel32[i]=1) Then StopChannel(3)
playsound_channel32[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel3","")
loopsound_channel32[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel3",0)
If playsound_channel32[i]&lt;&gt;"" Then 
s32[i]=LoadSound(playsound_channel32[i])
PlaySound(s32[i],3,loopsound_channel32[i])
Endif
stopsound_channel42[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel4",0)
If (stopsound_channel42[i]=1) Then StopChannel(4)
playsound_channel42[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel4","")
loopsound_channel42[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel4",0)
If playsound_channel42[i]&lt;&gt;"" Then 
s42[i]=LoadSound(playsound_channel42[i])
PlaySound(s42[i],4,loopsound_channel42[i])
Endif
stopsound_channel52[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel5",0)
If (stopsound_channel52[i]=1) Then StopChannel(5)
playsound_channel52[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel5","")
loopsound_channel52[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel5",0)
If playsound_channel52[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel52[i])
PlaySound(s52[i],5,loopsound_channel52[i])
Endif
stopsound_channel62[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel6",0)
If (stopsound_channel62[i]=1) Then StopChannel(6)
playsound_channel62[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel6","")
loopsound_channel62[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel6",0)
If playsound_channel62[i]&lt;&gt;"" Then 
s62[i]=LoadSound(playsound_channel62[i])
PlaySound(s62[i],6,loopsound_channel62[i])
Endif
stopsound_channel72[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel7",0)
If (stopsound_channel72[i]=1) Then StopChannel(7)
playsound_channel72[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel7","")
loopsound_channel72[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel7",0)
If playsound_channel72[i]&lt;&gt;"" Then 
s72[i]=LoadSound(playsound_channel72[i])
PlaySound(s72[i],7,loopsound_channel72[i])
Endif
stopsound_channel82[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel8",0)
If (stopsound_channel82[i]=1) Then StopChannel(8)
playsound_channel82[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel8","")
loopsound_channel82[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel8",0)
If playsound_channel82[i]&lt;&gt;"" Then 
s82[i]=LoadSound(playsound_channel82[i])
PlaySound(s82[i],8,loopsound_channel82[i])
Endif
gotoframe12[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_mustgotoframe",0)
frame2[i]=ini.GetString(String(currentframe)+"-hotspot"+String(i),"hotspot_destinationframe","")
showmessage2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_mustshowmessage",0)
messagetext2[i]=ini.GetString(String(currentframe)+"-hotspot"+String(i),"hotspot_messagetext","")
i+=1
End
varindex=0
While (varindex&lt;=variable_maxvariablecount)
variable_name2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(hotspot_index)+"variable_properties","variable_name",0)
variable_value2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_value",0)
variable_set2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_set",0)
varindex+=1 End 
LoadImage("\"+String(currentframe))
currentframe=frame_background
'ini_close();
'window_set_caption(gametitle)
'If (fullscreen=1)
'window_set_fullscreen(1)
'Endif
'window_set_size(windowwidth,windowheight)
End Method
	
Method OnUpdate()
End Method

Method OnRender()
Cls
Local ini:Ini = Ini.Load(LoadString("run.ini"))
Local hotspot_index=0
'Local enablepanoramamode=0
Local frame_haspanoramaprojection=0
Local variable_maxvariablecount=0
Local frame_maxhotspotcount=0
Local winw=0
Local winh=0
Local MouseX2=0
Local MouseY2=0
Local createtimedevent=0
Local frame_hastimedevent=0
Local time=0
Local totaltime=0
Local currentframe:String=""
Local timedeventgotoframe1=0
Local frame_timedeventgotoframe=0
Local gotoframe1=0
Local gotoframe2=0
Local frame=0
Local zdirection=0
Local enableclick=0
Local mdx=0
Local mdy=0
Local mdx2=0
Local mdy2=0
Local mdxx=0
Local mdyy=0
Local click=0
Local mmx=0
Local mmy=0
Local w=0
Local h=0
Local z=0
Local nextcheck=0
Local drawgui=0
'window_set_cursor(cr_cross)
Local enabledframe=1
Local zcloseto=0
Local triggercreate=0
Local image_speed=0
Local gametitle:String=""
Local windowwidth=1024
Local windowheight=768
Local mx=0
Local my=0
Local guitemplate:String=""
Local spr:Image
Local startframe:String=""
Local stopsound_all=0
Local stopsound_channel1=0
Local stopsound_channel2=0
Local stopsound_channel3=0
Local stopsound_channel4=0
Local stopsound_channel5=0
Local stopsound_channel6=0
Local stopsound_channel7=0
Local stopsound_channel8=0
Local loopsound_channel1=0
Local loopsound_channel2=0
Local loopsound_channel3=0
Local loopsound_channel4=0
Local loopsound_channel5=0
Local loopsound_channel6=0
Local loopsound_channel7=0
Local loopsound_channel8=0
Local playsound_channel1:String=""
Local playsound_channel2:String=""
Local playsound_channel3:String=""
Local playsound_channel4:String=""
Local playsound_channel5:String=""
Local playsound_channel6:String=""
Local playsound_channel7:String=""
Local playsound_channel8:String=""
Local s1:Sound
Local s2:Sound
Local s3:Sound
Local s4:Sound
Local s5:Sound
Local s6:Sound
Local s7:Sound
Local s8:Sound
Local frame_background:String=""
Local frame_timedeventdestinationframe:String=""
Local gotoframe12:Int[]
Local frame2:String[]
Local showmessage2:Int[]
Local messagetext2:String[]
Local variable_name2:Int[]
Local variable_value2:Int[]
Local variable_set2:Int[]
Local i=0
Local varindex=0
Local left2:Int[]
Local top2:Int[]
Local width2:Int[]
Local height2:Int[]
Local stopsound_channel12:Int[]
Local stopsound_channel22:Int[]
Local stopsound_channel32:Int[]
Local stopsound_channel42:Int[]
Local stopsound_channel52:Int[]
Local stopsound_channel62:Int[]
Local stopsound_channel72:Int[]
Local stopsound_channel82:Int[]
Local loopsound_channel12:Int[]
Local loopsound_channel22:Int[]
Local loopsound_channel32:Int[]
Local loopsound_channel42:Int[]
Local loopsound_channel52:Int[]
Local loopsound_channel62:Int[]
Local loopsound_channel72:Int[]
Local loopsound_channel82:Int[]
Local playsound_channel12:String[]
Local playsound_channel22:String[]
Local playsound_channel32:String[]
Local playsound_channel42:String[]
Local playsound_channel52:String[]
Local playsound_channel62:String[]
Local playsound_channel72:String[]
Local playsound_channel82:String[]
Local s12:Sound[]
Local s22:Sound[]
Local s32:Sound[]
Local s42:Sound[]
Local s52:Sound[]
Local s62:Sound[]
Local s72:Sound[]
Local s82:Sound[]
Local clicked2:Int[]
Local stopsound_all2:Int[]
Local messageduration2:Int[]
Local Transparent:Image
'get the texel coordinates of the current texel the camera is facing
'enablepanoramamode=frame_haspanoramaprojection
'If (enablepanoramamode=1)
'winw=MouseX-windowwidth/2
'winh=MouseY-windowheight/2
'mx=(hangle2xaxisconverter(direction*360)+xaxis2hangleconverter(winw*360*pi))
'If (zdirection&gt;=0)
'my=(((vangle2yaxisconverter((zdirection*50)))+1024)+(yaxis2vangleconverter(winh*2048*pi-400000)/2.25+yaxis2vangleconverter(winh*zdirection*50*pi-10000))+zdirection/50) End 
'Else my=(((vangle2yaxisconverter((zdirection*50)))+1024)+(yaxis2vangleconverter(winh*2048*pi-400000)/2.25-(yaxis2vangleconverter(winh*zdirection*50*pi-10000))+zdirection/50)) End 
'MouseX=mx
'MouseY=my End 
'Else If (enablepanoramamode=0)
'
'mousex=mouse_x
'mousex=mouse_y
' End 

'Create timed event
createtimedevent=frame_hastimedevent
If (createtimedevent=1)
time+=0.01
If (time&gt;Int(totaltime))
currentframe=timedeventgotoframe1
gotoframe1=1
End
End

'Prevent the mouselook from looking too high Or too low
'zdirection=min(max(zdirection,-22),22)
'mx=min(max(mx,0),2048)
'my=min(max(my,0),2048)
'MouseX=min(max(MouseX,0),2048)
'MouseY=min(max(MouseY,0),2048)

'Draw 2D picture frame
'If (enablepanoramamode=0)
DrawImage(Transparent,0,0)
'End

'Draw 3D projected panoramic frame
'If (enableclick=1)
'If mouse_check_button_pressed(MOUSE_LEFT)
'mdx=MouseX
'mdy=MouseY End 
'If (mouse_check_button(MOUSE_LEFT)  And enablepanoramamode=1)
'mdx2=mdx-MouseX
'mdy2=mdy-MouseY End 
If MouseDown(MOUSE_LEFT)
mdxx=MouseX
mdyy=MouseY
End
'If (mouse_check_button(MOUSE_LEFT)  And mdx&lt;&gt;mdxx) Or (mouse_check_button(MOUSE_LEFT)  And mdy&lt;&gt;mdyy)
'If (enablepanoramamode=1)
'direction+=mdx2/360
'zdirection+=mdy2/360 End  End 
If click=1 Then click=0
If (MouseDown(MOUSE_LEFT)  And mdx=mdxx  And mdy=mdyy)
mmx=MouseX
mmy=MouseY
click=1
End
'If (enablepanoramamode=1)
'w=1024
'h=768
'If (w&lt;&gt;h) 
'show_message("Error Ioncorrect aspect ratio; panoramic images must have an aspect ratio of 1/1. Please resize the image in an image editor...")
'game_end() End 
'd3d_set_hidden(1)
'draw_set_color(c_white);
'd3d_set_projection_ext(x,y,z, 
'-(x+cos(degtorad(direction))*cos(degtorad(zdirection))), 
'-(y-sin(degtorad(direction))*cos(degtorad(zdirection))), 
'z+sin(degtorad(zdirection)),0,0,-1,40,panoramaaspectratio,1,1000000); 
'd3d_draw_cylinder(x+256,y-256,z-256,x-256,y+256, 
'z+256,sprite_get_texture(Transparent,0),1,1,1,2048) End 

'Detect the specific hotspot clicked
If (click=1)
varindex=0
While (varindex&lt;variable_maxvariablecount)
If (variable_set2[varindex]=1)
variable_name2[varindex]=variable_value2[varindex] 
End 
varindex+=1 
End  
End 
If (click=1)
i=0
While (i&lt;frame_maxhotspotcount)
left2[i]=left2[i]
top2[i]=top2[i]
width2[i]=width2[i]
height2[i]=height2[i]
If (mmx&gt;Int(left2[i])  And mmy&gt;Int(top2[i])  And mmx&lt;Int(width2[i])  And mmy&lt;Int(height2[i]))
clicked2[i]=1
gotoframe12[i]=gotoframe12[i]
If (gotoframe12[i]=1)
frame2[i]=frame2[i]
currentframe=frame2[i] 
End 
showmessage2[i]=showmessage2[i]
messagetext2[i]=messagetext2[i]
messageduration2[i]=(500+12)/2  
Else clicked2[i]=0 
End 
i+=1 
End 
nextcheck=1 
End 
If (nextcheck=1)
i=0
While (i&lt;frame_maxhotspotcount)
If (showmessage2[i]=1)
'd3d_set_projection_ortho(0,0,windowwidth,windowheight,0)
messageduration2[i]-=.5
'draw_set_font(Font)
'draw_set_valign(fa_top)
'draw_set_halign(fa_left)
'draw_set_color(c_black)
DrawRect(0,windowheight-(12*2),windowwidth,windowheight-(12*2)+12*2)
'draw_set_valign(fa_middle)
'draw_set_halign(fa_center)

'draw_set_color(c_white)
DrawText(messagetext2[i],windowwidth/2,windowheight-12,0.5,0.5)
If (MouseX&gt;0   And  MouseX&lt;windowwidth)
If (MouseY&gt;windowheight-12*2   And  MouseY&lt;windowheight)
enableclick=0
If (MouseDown(MOUSE_LEFT))
showmessage2[i]=0
messageduration2[i]=0
nextcheck=0
enableclick=1 
End  
End  
End  
End 
If (messageduration2[i]&lt;=0)
showmessage2[i]=0
nextcheck=0
enableclick=1 
End  
End 
i+=1 
End  

'Change the frame Or show a message
If (click=1)
stopsound_all=ini.GetFloat(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel1=ini.GetFloat(String(currentframe),"frame_stopsound_channel1",0)
If (stopsound_channel1=1) Then StopChannel(1)
playsound_channel1=ini.GetString(String(currentframe),"frame_playsound_channel1","")
loopsound_channel1=ini.GetFloat(String(currentframe),"frame_playsound_channel1",0)
If playsound_channel1&lt;&gt;"" Then 
s1=LoadSound(playsound_channel1)
PlaySound(s1,1,loopsound_channel1)
Endif
stopsound_channel2=ini.GetFloat(String(currentframe),"frame_stopsound_channel2",0)
If (stopsound_channel2=1) Then StopChannel(2)
playsound_channel2=ini.GetString(String(currentframe),"frame_playsound_channel2","")
loopsound_channel2=ini.GetFloat(String(currentframe),"frame_playsound_channel2",0)
If playsound_channel2&lt;&gt;"" Then 
s2=LoadSound(playsound_channel2)
PlaySound(s2,2,loopsound_channel2)
Endif
stopsound_channel3=ini.GetFloat(String(currentframe),"frame_stopsound_channel3",0)
If (stopsound_channel3=1) Then StopChannel(3)
playsound_channel3=ini.GetString(String(currentframe),"frame_playsound_channel3","")
loopsound_channel3=ini.GetFloat(String(currentframe),"frame_playsound_channel3",0)
If playsound_channel3&lt;&gt;"" Then 
s3=LoadSound(playsound_channel3)
PlaySound(s3,3,loopsound_channel3)
Endif
stopsound_channel4=ini.GetFloat(String(currentframe),"frame_stopsound_channel4",0)
If (stopsound_channel4=1) Then StopChannel(4)
playsound_channel4=ini.GetString(String(currentframe),"frame_playsound_channel4","")
loopsound_channel4=ini.GetFloat(String(currentframe),"frame_playsound_channel4",0)
If playsound_channel4&lt;&gt;"" Then 
s4=LoadSound(playsound_channel4)
PlaySound(s4,4,loopsound_channel4)
Endif
stopsound_channel5=ini.GetFloat(String(currentframe),"frame_stopsound_channel5",0)
If (stopsound_channel5=1) Then StopChannel(5)
playsound_channel5=ini.GetString(String(currentframe),"frame_playsound_channel5","")
loopsound_channel5=ini.GetFloat(String(currentframe),"frame_playsound_channel5",0)
If playsound_channel5&lt;&gt;"" Then 
s5=LoadSound(playsound_channel5)
PlaySound(s5,5,loopsound_channel5)
Endif
stopsound_channel6=ini.GetFloat(String(currentframe),"frame_stopsound_channel6",0)
If (stopsound_channel6=1) Then StopChannel(6)
playsound_channel6=ini.GetString(String(currentframe),"frame_playsound_channel6","")
loopsound_channel6=ini.GetFloat(String(currentframe),"frame_playsound_channel6",0)
If playsound_channel6&lt;&gt;"" Then 
s6=LoadSound(playsound_channel6)
PlaySound(s6,6,loopsound_channel6)
Endif
stopsound_channel7=ini.GetFloat(String(currentframe),"frame_stopsound_channel7",0)
If (stopsound_channel7=1) Then StopChannel(7)
playsound_channel7=ini.GetString(String(currentframe),"framw_playsound_channel7","")
loopsound_channel7=ini.GetFloat(String(currentframe),"frame_playsound_channel7",0)
If playsound_channel7&lt;&gt;"" Then 
s7=LoadSound(playsound_channel7)
PlaySound(s7,7,loopsound_channel7)
Endif
stopsound_channel8=ini.GetFloat(String(currentframe),"frame_stopsound_channel8",0)
If (stopsound_channel8=1) Then StopChannel(8)
playsound_channel8=ini.GetString(String(currentframe),"frame_playsound_channel8","")
loopsound_channel8=ini.GetFloat(String(currentframe),"frame_playsound_channel8",0)
If playsound_channel8&lt;&gt;"" Then 
s8=LoadSound(playsound_channel8)
PlaySound(s8,8,loopsound_channel8)
Endif
frame_background=ini.GetString(currentframe,"frame_background","\")
'frame_haspanoramaprojection=ini.GetFloat(String(currentframe),"frame_haspanoramaprojection",0)
frame_hastimedevent=ini.GetFloat(String(currentframe),"frame_timedeventgotoframe",0)
frame_timedeventgotoframe=ini.GetFloat(String(currentframe),"imedeventgotoframe",0)
frame_timedeventdestinationframe=ini.GetString(currentframe,"frame_timedeventdestinationframe","")
frame_maxhotspotcount=ini.GetFloat(String(currentframe),"frame_maxhotspotcount",0)
variable_maxvariablecount=ini.GetFloat("Local_variable_properties","variable_maxvariablecount",0)
i=0
While (i&lt;=frame_maxhotspotcount)
left2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_left",0)
top2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_top",0)
width2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_width",0)
height2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_height",0)
stopsound_all2[i]=ini.GetFloat(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all2[i]=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel12[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel1",0)
If (stopsound_channel12[i]=1) Then StopChannel(1)
playsound_channel12[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel1","")
loopsound_channel12[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel1",0)
If playsound_channel12[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel12[i])
PlaySound(s12[i],1,loopsound_channel12[i])
Endif
stopsound_channel22[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel2",0)
If (stopsound_channel22[i]=1) Then StopChannel(2)
playsound_channel22[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel2","")
loopsound_channel22[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel2",0)
If playsound_channel22[i]&lt;&gt;"" Then 
s22[i]=LoadSound(playsound_channel22[i])
PlaySound(s22[i],2,loopsound_channel22[i])
Endif
stopsound_channel32[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel3",0)
If (stopsound_channel32[i]=1) Then StopChannel(3)
playsound_channel32[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel3","")
loopsound_channel32[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel3",0)
If playsound_channel32[i]&lt;&gt;"" Then 
s32[i]=LoadSound(playsound_channel32[i])
PlaySound(s32[i],3,loopsound_channel32[i])
Endif
stopsound_channel42[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel4",0)
If (stopsound_channel42[i]=1) Then StopChannel(4)
playsound_channel42[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel4","")
loopsound_channel42[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel4",0)
If playsound_channel42[i]&lt;&gt;"" Then 
s42[i]=LoadSound(playsound_channel42[i])
PlaySound(s42[i],4,loopsound_channel42[i])
Endif
stopsound_channel52[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel5",0)
If (stopsound_channel52[i]=1) Then StopChannel(5)
playsound_channel52[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel5","")
loopsound_channel52[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel5",0)
If playsound_channel52[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel52[i])
PlaySound(s52[i],5,loopsound_channel52[i])
Endif
stopsound_channel62[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel6",0)
If (stopsound_channel62[i]=1) Then StopChannel(6)
playsound_channel62[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel6","")
loopsound_channel62[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel6",0)
If playsound_channel62[i]&lt;&gt;"" Then 
s62[i]=LoadSound(playsound_channel62[i])
PlaySound(s62[i],6,loopsound_channel62[i])
Endif
stopsound_channel72[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel7",0)
If (stopsound_channel72[i]=1) Then StopChannel(7)
playsound_channel72[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel7","")
loopsound_channel72[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel7",0)
If playsound_channel72[i]&lt;&gt;"" Then 
s72[i]=LoadSound(playsound_channel72[i])
PlaySound(s72[i],7,loopsound_channel72[i])
Endif
stopsound_channel82[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel8",0)
If (stopsound_channel82[i]=1) Then StopChannel(8)
playsound_channel82[i]=ini.GetString(String(currentframe),"hotspot_playsound_channel8","")
loopsound_channel82[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel8",0)
If playsound_channel82[i]&lt;&gt;"" Then 
s82[i]=LoadSound(playsound_channel82[i])
PlaySound(s82[i],8,loopsound_channel82[i])
Endif
gotoframe12[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_mustgotoframe",0)
frame2[i]=ini.GetString(String(currentframe)+"-hotspot"+String(i),"hotspot_destinationframe","")
showmessage2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_mustshowmessage",0)
messagetext2[i]=ini.GetString(String(currentframe)+"-hotspot"+String(i),"hotspot_messagetext","")
i+=1
End
varindex=0
While (varindex&lt;=variable_maxvariablecount)
variable_name2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(hotspot_index)+"variable_properties","variable_name",0)
variable_value2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_value",0)
variable_set2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_set",0)
varindex+=1 
End 
LoadImage("\"+String(currentframe))
currentframe=frame_background
'ini_close() 
End 
'Draw Gui Interface
If (drawgui=1  And currentframe&lt;&gt;startframe)
'd3d_set_projection_ortho(0,0,windowwidth,windowheight,0)
DrawImage(spr,0,0) 
End 
End Method
End

Function Main()
New Game()
End
</textarea> <br><br></td></tr></table><br>
<a name="2048546"></a>

<a name="2048550"></a>

<a name="2048551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> OnRender() code should be kept to a minimum and i think some of the code can be better formatted, too hard for an outsider to read. reformat it and then we can help.<br><br>also use "codebox" instead of just "code" <br><br></td></tr></table><br>
<a name="2048554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I really hope the forum has screwed up the formatting of your code? <br><br>If not you should start using indentation to make your code easier to read, then re-post it. <br><br></td></tr></table><br>
<a name="2048595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah all that logic code should be in update render should really just hold the code that actually renders stuff and does the drawing.<br><br>and I second the please format your code, the site has syntax highlighting if you use the right codebox bbcode , which will help a lot as well. <br><br></td></tr></table><br>
<a name="2048643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can easily indent it and I'm doing so as we speak. why I originally had it like that is because I translated it from my Game Maker code which uses braces {} instead of "End" when the cursor clicks on an area of my code where there is a brace it shows me where the two braces open and close by highlighting them, and auto syntax error checks, thus making indention pointless. Since monkey doesn't work that way, on it... <br><br></td></tr></table><br>
<a name="2048658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't test any of the code, but just looking at it, it seems as if you have a misunderstanding of how scoping works. Most of those variables you're trying to use are in a local scope, which means that when the method/function is finished, those variables are freed from memory. What you're looking for is to initialize those variables as fields in the class scope.<br><br>Here's an example...<br><pre class=code>Class Example Extends App
    Field a:Int
    Field b:Int
    
    Method OnCreate:Int()
        a = 2
        b = 1
        
        Return 0
    End
    
    Method OnUpdate:Int()
        If a &lt;&gt; b
            a = b
        Else
            a = 2
        End
        
        Print a
        
        Return 0
    End
End</pre> <br><br></td></tr></table><br>
<a name="2048673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updating the code. Thanks but I can't test it ATM I'll let you know if that solves my issues... :D <br><br></td></tr></table><br>
<a name="2048672"></a>

<a name="2048915"></a>

<a name="2048917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Haven't solved the indent problem yet, but I probably won't need to now that I'm getting no error messages. Here is my current project:<br><br><a href="https://dl.dropbox.com/u/79893663/Shadows3D/MonkeyCoder-v6.0-AdventureWindowRunner-v0.9.zip" target="_blank">https://dl.dropbox.com/u/79893663/Shadows3D/MonkeyCoder-v6.0-AdventureWindowRunner-v0.9.zip</a><br><br>For you guys who are lazy like me here's the codebox:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo
Import INIFunctions

Class Game Extends App

Field ini:Ini = Ini.Load("run.ini")
Field hotspot_index:Int
'Field enablepanoramamode:Int
Field clicked2:Int[]
Field messageduration2:Int[]
Field frame_haspanoramaprojection:Int
Field variable_maxvariablecount:Int
Field frame_maxhotspotcount:Int
Field winw:Int
Field winh:Int
Field MouseX2:Int
Field MouseY2:Int
Field createtimedevent:Int
Field frame_hastimedevent:Int
Field time:Int
Field totaltime:Int
Field currentframe:String
Field timedeventgotoframe1:Int
Field frame_timedeventgotoframe:Int
Field gotoframe1:Int
Field gotoframe2:Int
Field frame:Int
Field zdirection:Int
Field enableclick:Int
Field mdx:Int
Field mdy:Int
Field mdx2:Int
Field mdy2:Int
Field mdxx:Int
Field mdyy:Int
Field click:Int
Field mmx:Int
Field mmy:Int
Field w:Int
Field h:Int
Field z:Int
Field nextcheck:Int
Field drawgui:Int
'window_set_cursor(cr_cross)
Field enabledframe=1
Field zcloseto:Int
Field triggercreate:Int
Field image_speed:Int
Field gametitle:String
Field windowwidth:Int
Field windowheight:Int
Field mx:Int
Field my:Int
Field guitemplate:String
Field spr:Image
Field startframe:String
Field stopsound_all:Int
Field stopsound_channel1:Int
Field stopsound_channel2:Int
Field stopsound_channel3:Int
Field stopsound_channel4:Int
Field stopsound_channel5:Int
Field stopsound_channel6:Int
Field stopsound_channel7:Int
Field stopsound_channel8:Int
Field loopsound_channel1:Int
Field loopsound_channel2:Int
Field loopsound_channel3:Int
Field loopsound_channel4:Int
Field loopsound_channel5:Int
Field loopsound_channel6:Int
Field loopsound_channel7:Int
Field loopsound_channel8:Int
Field playsound_channel1:String
Field playsound_channel2:String
Field playsound_channel3:String
Field playsound_channel4:String
Field playsound_channel5:String
Field playsound_channel6:String
Field playsound_channel7:String
Field playsound_channel8:String
Field s1:Sound
Field s2:Sound
Field s3:Sound
Field s4:Sound
Field s5:Sound
Field s6:Sound
Field s7:Sound
Field s8:Sound
Field frame_background:String
Field frame_timedeventdestinationframe:String
Field gotoframe12:Int[]
Field frame2:String[]
Field showmessage2:Int[]
Field messagetext2:String[]
Field variable_name2:Int[]
Field variable_value2:Int[]
Field variable_set2:Int[]
Field i:Int
Field varindex:Int
Field left2:Int[]
Field top2:Int[]
Field width2:Int[]
Field height2:Int[]
Field stopsound_channel12:Int[]
Field stopsound_channel22:Int[]
Field stopsound_channel32:Int[]
Field stopsound_channel42:Int[]
Field stopsound_channel52:Int[]
Field stopsound_channel62:Int[]
Field stopsound_channel72:Int[]
Field stopsound_channel82:Int[]
Field loopsound_channel12:Int[]
Field loopsound_channel22:Int[]
Field loopsound_channel32:Int[]
Field loopsound_channel42:Int[]
Field loopsound_channel52:Int[]
Field loopsound_channel62:Int[]
Field loopsound_channel72:Int[]
Field loopsound_channel82:Int[]
Field playsound_channel12:String[]
Field playsound_channel22:String[]
Field playsound_channel32:String[]
Field playsound_channel42:String[]
Field playsound_channel52:String[]
Field playsound_channel62:String[]
Field playsound_channel72:String[]
Field playsound_channel82:String[]
Field s12:Sound[]
Field s22:Sound[]
Field s32:Sound[]
Field s42:Sound[]
Field s52:Sound[]
Field s62:Sound[]
Field s72:Sound[]
Field s82:Sound[]
Field stopsound_all2:Int[]
Field Transparent:Image


Method OnCreate()
SetUpdateRate 60
gametitle=ini.Get("gamesettings","gametitle","")
drawgui=ini.GetFloat("gamesettings","drawgui",0)
guitemplate=ini.Get("gamesettings","guitemplate","")
If drawgui=1 Then spr=LoadImage(guitemplate,1)
startframe=ini.Get("gamesettings","startframe","")
windowwidth=ini.GetFloat("gamesettings","windowwidth",1024)
windowheight=ini.GetFloat("gamesettings","windowheight",768)
'fullscreen=ini.GetFloat("gamesettings","fullscreen",0)
'panoramaaspectratio=ini.GetFloat("gamesettings","panoramaaspectratio",4)
'direction=ini.GetFloat("gamesettings","panoramahorizontaldirection",0)
'zdirection=ini.GetFloat("gamesettings","panoramaverticaldirection",0)*50
currentframe=startframe
stopsound_all=ini.GetFloat(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel1=ini.GetFloat(String(currentframe),"frame_stopsound_channel1",0)
If (stopsound_channel1=1) Then StopChannel(1)
playsound_channel1=ini.Get(String(currentframe),"frame_playsound_channel1","")
loopsound_channel1=ini.GetFloat(String(currentframe),"frame_playsound_channel1",0)
If playsound_channel1&lt;&gt;"" Then 
s1=LoadSound(playsound_channel1)
PlaySound(s1,1,loopsound_channel1)
Endif
stopsound_channel2=ini.GetFloat(String(currentframe),"frame_stopsound_channel2",0)
If (stopsound_channel2=1) Then StopChannel(2)
playsound_channel2=ini.Get(String(currentframe),"frame_playsound_channel2","")
loopsound_channel2=ini.GetFloat(String(currentframe),"frame_playsound_channel2",0)
If playsound_channel2&lt;&gt;"" Then 
s2=LoadSound(playsound_channel2)
PlaySound(s2,2,loopsound_channel2)
Endif
stopsound_channel3=ini.GetFloat(String(currentframe),"frame_stopsound_channel3",0)
If (stopsound_channel3=1) Then StopChannel(3)
playsound_channel3=ini.Get(String(currentframe),"frame_playsound_channel3","")
loopsound_channel3=ini.GetFloat(String(currentframe),"frame_playsound_channel3",0)
If playsound_channel3&lt;&gt;"" Then 
s3=LoadSound(playsound_channel3)
PlaySound(s3,3,loopsound_channel3)
Endif
stopsound_channel4=ini.GetFloat(String(currentframe),"frame_stopsound_channel4",0)
If (stopsound_channel4=1) Then StopChannel(4)
playsound_channel4=ini.Get(String(currentframe),"frame_playsound_channel4","")
loopsound_channel4=ini.GetFloat(String(currentframe),"frame_playsound_channel4",0)
If playsound_channel4&lt;&gt;"" Then 
s4=LoadSound(playsound_channel4)
PlaySound(s4,4,loopsound_channel4)
Endif
stopsound_channel5=ini.GetFloat(String(currentframe),"frame_stopsound_channel5",0)
If (stopsound_channel5=1) Then StopChannel(5)
playsound_channel5=ini.Get(String(currentframe),"frame_playsound_channel5","")
loopsound_channel5=ini.GetFloat(String(currentframe),"frame_playsound_channel5",0)
If playsound_channel5&lt;&gt;"" Then 
s5=LoadSound(playsound_channel5)
PlaySound(s5,5,loopsound_channel5)
Endif
stopsound_channel6=ini.GetFloat(String(currentframe),"frame_stopsound_channel6",0)
If (stopsound_channel6=1) Then StopChannel(6)
playsound_channel6=ini.Get(String(currentframe),"frame_playsound_channel6","")
loopsound_channel6=ini.GetFloat(String(currentframe),"frame_playsound_channel6",0)
If playsound_channel6&lt;&gt;"" Then 
s6=LoadSound(playsound_channel6)
PlaySound(s6,6,loopsound_channel6)
Endif
stopsound_channel7=ini.GetFloat(String(currentframe),"frame_stopsound_channel7",0)
If (stopsound_channel7=1) Then StopChannel(7)
playsound_channel7=ini.Get(String(currentframe),"framw_playsound_channel7","")
loopsound_channel7=ini.GetFloat(String(currentframe),"frame_playsound_channel7",0)
If playsound_channel7&lt;&gt;"" Then 
s7=LoadSound(playsound_channel7)
PlaySound(s7,7,loopsound_channel7)
Endif
stopsound_channel8=ini.GetFloat(String(currentframe),"frame_stopsound_channel8",0)
If (stopsound_channel8=1) Then StopChannel(8)
playsound_channel8=ini.Get(String(currentframe),"frame_playsound_channel8","")
loopsound_channel8=ini.GetFloat(String(currentframe),"frame_playsound_channel8",0)
If playsound_channel8&lt;&gt;"" Then 
s8=LoadSound(playsound_channel8)
PlaySound(s8,8,loopsound_channel8)
Endif
frame_background=ini.Get(currentframe,"frame_background","\")
'frame_haspanoramaprojection=ini.GetFloat(String(currentframe),"frame_haspanoramaprojection",0)
frame_hastimedevent=ini.GetFloat(String(currentframe),"frame_timedeventgotoframe",0)
frame_timedeventgotoframe=ini.GetFloat(String(currentframe),"imedeventgotoframe",0)
frame_timedeventdestinationframe=ini.Get(currentframe,"frame_timedeventdestinationframe","")
frame_maxhotspotcount=ini.GetFloat(String(currentframe),"frame_maxhotspotcount",0)
variable_maxvariablecount=ini.GetFloat("Field_variable_properties","variable_maxvariablecount",0)
i=0
If (frame_maxhotspotcount&gt;0)
While (i&lt;=frame_maxhotspotcount)
left2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_left",0)
top2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_top",0)
width2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_width",0)
height2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_height",0)
stopsound_all2[i]=ini.GetFloat(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all2[i]=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel12[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel1",0)
If (stopsound_channel12[i]=1) Then StopChannel(1)
playsound_channel12[i]=ini.Get(String(currentframe),"hotspot_playsound_channel1","")
loopsound_channel12[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel1",0)
If playsound_channel12[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel12[i])
PlaySound(s12[i],1,loopsound_channel12[i])
Endif
stopsound_channel22[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel2",0)
If (stopsound_channel22[i]=1) Then StopChannel(2)
playsound_channel22[i]=ini.Get(String(currentframe),"hotspot_playsound_channel2","")
loopsound_channel22[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel2",0)
If playsound_channel22[i]&lt;&gt;"" Then 
s22[i]=LoadSound(playsound_channel22[i])
PlaySound(s22[i],2,loopsound_channel22[i])
Endif
stopsound_channel32[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel3",0)
If (stopsound_channel32[i]=1) Then StopChannel(3)
playsound_channel32[i]=ini.Get(String(currentframe),"hotspot_playsound_channel3","")
loopsound_channel32[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel3",0)
If playsound_channel32[i]&lt;&gt;"" Then 
s32[i]=LoadSound(playsound_channel32[i])
PlaySound(s32[i],3,loopsound_channel32[i])
Endif
stopsound_channel42[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel4",0)
If (stopsound_channel42[i]=1) Then StopChannel(4)
playsound_channel42[i]=ini.Get(String(currentframe),"hotspot_playsound_channel4","")
loopsound_channel42[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel4",0)
If playsound_channel42[i]&lt;&gt;"" Then 
s42[i]=LoadSound(playsound_channel42[i])
PlaySound(s42[i],4,loopsound_channel42[i])
Endif
stopsound_channel52[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel5",0)
If (stopsound_channel52[i]=1) Then StopChannel(5)
playsound_channel52[i]=ini.Get(String(currentframe),"hotspot_playsound_channel5","")
loopsound_channel52[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel5",0)
If playsound_channel52[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel52[i])
PlaySound(s52[i],5,loopsound_channel52[i])
Endif
stopsound_channel62[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel6",0)
If (stopsound_channel62[i]=1) Then StopChannel(6)
playsound_channel62[i]=ini.Get(String(currentframe),"hotspot_playsound_channel6","")
loopsound_channel62[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel6",0)
If playsound_channel62[i]&lt;&gt;"" Then 
s62[i]=LoadSound(playsound_channel62[i])
PlaySound(s62[i],6,loopsound_channel62[i])
Endif
stopsound_channel72[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel7",0)
If (stopsound_channel72[i]=1) Then StopChannel(7)
playsound_channel72[i]=ini.Get(String(currentframe),"hotspot_playsound_channel7","")
loopsound_channel72[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel7",0)
If playsound_channel72[i]&lt;&gt;"" Then 
s72[i]=LoadSound(playsound_channel72[i])
PlaySound(s72[i],7,loopsound_channel72[i])
Endif
stopsound_channel82[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel8",0)
If (stopsound_channel82[i]=1) Then StopChannel(8)
playsound_channel82[i]=ini.Get(String(currentframe),"hotspot_playsound_channel8","")
loopsound_channel82[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel8",0)
If playsound_channel82[i]&lt;&gt;"" Then 
s82[i]=LoadSound(playsound_channel82[i])
PlaySound(s82[i],8,loopsound_channel82[i])
Endif
gotoframe12[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_mustgotoframe",0)
frame2[i]=ini.Get(String(currentframe)+"-hotspot"+String(i),"hotspot_destinationframe","")
showmessage2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_mustshowmessage",0)
messagetext2[i]=ini.Get(String(currentframe)+"-hotspot"+String(i),"hotspot_messagetext","")
i=i+1
End
End
varindex=0
If (variable_maxvariablecount&gt;0)
While (varindex&lt;=variable_maxvariablecount)
variable_name2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(hotspot_index)+"variable_properties","variable_name",0)
variable_value2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_value",0)
variable_set2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_set",0)
varindex=varindex+1 
End
End 
Transparent=LoadImage(String(currentframe),1)
currentframe=frame_background
'ini_close();
'window_set_caption(gametitle)
'If (fullscreen=1)
'window_set_fullscreen(1)
'Endif
'window_set_size(windowwidth,windowheight)
End Method
	
Method OnUpdate()
End Method

Method OnRender()
Cls
'get the texel coordinates of the current texel the camera is facing
'enablepanoramamode=frame_haspanoramaprojection
'If (enablepanoramamode=1)
'winw=MouseX-windowwidth/2
'winh=MouseY-windowheight/2
'mx=(hangle2xaxisconverter(direction*360)+xaxis2hangleconverter(winw*360*pi))
'If (zdirection&gt;=0)
'my=(((vangle2yaxisconverter((zdirection*50)))+1024)+(yaxis2vangleconverter(winh*2048*pi-400000)/2.25+yaxis2vangleconverter(winh*zdirection*50*pi-10000))+zdirection/50) End 
'Else my=(((vangle2yaxisconverter((zdirection*50)))+1024)+(yaxis2vangleconverter(winh*2048*pi-400000)/2.25-(yaxis2vangleconverter(winh*zdirection*50*pi-10000))+zdirection/50)) End 
'MouseX=mx
'MouseY=my End 
'Else If (enablepanoramamode=0)
'
'mousex=mouse_x
'mousex=mouse_y
' End 

'Create timed event
createtimedevent=frame_hastimedevent
If (createtimedevent=1)
time=time+0.01
If (time&gt;Int(totaltime))
currentframe=timedeventgotoframe1
gotoframe1=1
End
End

'Prevent the mouselook from looking too high Or too low
'zdirection=min(max(zdirection,-22),22)
'mx=min(max(mx,0),2048)
'my=min(max(my,0),2048)
'MouseX=min(max(MouseX,0),2048)
'MouseY=min(max(MouseY,0),2048)

'Draw 2D picture frame
'If (enablepanoramamode=0)
If startframe&lt;&gt;"" And currentframe&lt;&gt;"" Then DrawImage(Transparent,0,0)
'End

'Draw 3D projected panoramic frame
'If (enableclick=1)
'If mouse_check_button_pressed(MOUSE_LEFT)
'mdx=MouseX
'mdy=MouseY End 
'If (mouse_check_button(MOUSE_LEFT)  And enablepanoramamode=1)
'mdx2=mdx-MouseX
'mdy2=mdy-MouseY End 
If MouseDown(MOUSE_LEFT)
mdxx=MouseX
mdyy=MouseY
End
'If (mouse_check_button(MOUSE_LEFT)  And mdx&lt;&gt;mdxx) Or (mouse_check_button(MOUSE_LEFT)  And mdy&lt;&gt;mdyy)
'If (enablepanoramamode=1)
'direction++mdx2/360
'zdirection++mdy2/360 End  End 
If click=1 Then click=0
If (MouseDown(MOUSE_LEFT)  And mdx=mdxx  And mdy=mdyy)
mmx=MouseX
mmy=MouseY
click=1
End
'If (enablepanoramamode=1)
'w=1024
'h=768
'If (w&lt;&gt;h) 
'show_message("Error Ioncorrect aspect ratio; panoramic images must have an aspect ratio of 1/1. Please resize the image in an image editor...")
'game_end() End 
'd3d_set_hidden(1)
'draw_set_color(c_white);
'd3d_set_projection_ext(x,y,z, 
'-(x+cos(degtorad(direction))*cos(degtorad(zdirection))), 
'-(y-sin(degtorad(direction))*cos(degtorad(zdirection))), 
'z+sin(degtorad(zdirection)),0,0,-1,40,panoramaaspectratio,1,1000000); 
'd3d_draw_cylinder(x+256,y-256,z-256,x-256,y+256, 
'z+256,sprite_get_texture(Transparent,0),1,1,1,2048) End 

'Detect the specific hotspot clicked
If (click=1)
varindex=0
While (varindex&lt;variable_maxvariablecount)
If (variable_set2[varindex]=1)
variable_name2[varindex]=variable_value2[varindex] 
End 
varindex=varindex+1 
End  
End 
If (click=1)
i=0
While (i&lt;frame_maxhotspotcount)
left2[i]=left2[i]
top2[i]=top2[i]
width2[i]=width2[i]
height2[i]=height2[i]
If (mmx&gt;Int(left2[i])  And mmy&gt;Int(top2[i])  And mmx&lt;Int(width2[i])  And mmy&lt;Int(height2[i]))
clicked2[i]=1
gotoframe12[i]=gotoframe12[i]
If (gotoframe12[i]=1)
frame2[i]=frame2[i]
currentframe=frame2[i] 
End 
showmessage2[i]=showmessage2[i]
messagetext2[i]=messagetext2[i]
messageduration2[i]=(500+12)/2  
Else clicked2[i]=0 
End 
i=i+1 
End 
nextcheck=1 
End 
If (nextcheck=1)
i=0
While (i&lt;frame_maxhotspotcount)
If (showmessage2[i]=1)
'd3d_set_projection_ortho(0,0,windowwidth,windowheight,0)
messageduration2[i]-=.5
'draw_set_font(Font)
'draw_set_valign(fa_top)
'draw_set_halign(fa_left)
'draw_set_color(c_black)
DrawRect(0,windowheight-(12*2),windowwidth,windowheight-(12*2)+12*2)
'draw_set_valign(fa_middle)
'draw_set_halign(fa_center)

'draw_set_color(c_white)
DrawText(messagetext2[i],windowwidth/2,windowheight-12,0.5,0.5)
If (MouseX&gt;0   And  MouseX&lt;windowwidth)
If (MouseY&gt;windowheight-12*2   And  MouseY&lt;windowheight)
enableclick=0
If (MouseDown(MOUSE_LEFT))
showmessage2[i]=0
messageduration2[i]=0
nextcheck=0
enableclick=1 
End  
End  
End  
End 
If (messageduration2[i]&lt;=0)
showmessage2[i]=0
nextcheck=0
enableclick=1 
End  
End 
i=i+1 
End  

'Change the frame Or show a message
If (click=1)
stopsound_all=ini.GetFloat(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel1=ini.GetFloat(String(currentframe),"frame_stopsound_channel1",0)
If (stopsound_channel1=1) Then StopChannel(1)
playsound_channel1=ini.Get(String(currentframe),"frame_playsound_channel1","")
loopsound_channel1=ini.GetFloat(String(currentframe),"frame_playsound_channel1",0)
If playsound_channel1&lt;&gt;"" Then 
s1=LoadSound(playsound_channel1)
PlaySound(s1,1,loopsound_channel1)
Endif
stopsound_channel2=ini.GetFloat(String(currentframe),"frame_stopsound_channel2",0)
If (stopsound_channel2=1) Then StopChannel(2)
playsound_channel2=ini.Get(String(currentframe),"frame_playsound_channel2","")
loopsound_channel2=ini.GetFloat(String(currentframe),"frame_playsound_channel2",0)
If playsound_channel2&lt;&gt;"" Then 
s2=LoadSound(playsound_channel2)
PlaySound(s2,2,loopsound_channel2)
Endif
stopsound_channel3=ini.GetFloat(String(currentframe),"frame_stopsound_channel3",0)
If (stopsound_channel3=1) Then StopChannel(3)
playsound_channel3=ini.Get(String(currentframe),"frame_playsound_channel3","")
loopsound_channel3=ini.GetFloat(String(currentframe),"frame_playsound_channel3",0)
If playsound_channel3&lt;&gt;"" Then 
s3=LoadSound(playsound_channel3)
PlaySound(s3,3,loopsound_channel3)
Endif
stopsound_channel4=ini.GetFloat(String(currentframe),"frame_stopsound_channel4",0)
If (stopsound_channel4=1) Then StopChannel(4)
playsound_channel4=ini.Get(String(currentframe),"frame_playsound_channel4","")
loopsound_channel4=ini.GetFloat(String(currentframe),"frame_playsound_channel4",0)
If playsound_channel4&lt;&gt;"" Then 
s4=LoadSound(playsound_channel4)
PlaySound(s4,4,loopsound_channel4)
Endif
stopsound_channel5=ini.GetFloat(String(currentframe),"frame_stopsound_channel5",0)
If (stopsound_channel5=1) Then StopChannel(5)
playsound_channel5=ini.Get(String(currentframe),"frame_playsound_channel5","")
loopsound_channel5=ini.GetFloat(String(currentframe),"frame_playsound_channel5",0)
If playsound_channel5&lt;&gt;"" Then 
s5=LoadSound(playsound_channel5)
PlaySound(s5,5,loopsound_channel5)
Endif
stopsound_channel6=ini.GetFloat(String(currentframe),"frame_stopsound_channel6",0)
If (stopsound_channel6=1) Then StopChannel(6)
playsound_channel6=ini.Get(String(currentframe),"frame_playsound_channel6","")
loopsound_channel6=ini.GetFloat(String(currentframe),"frame_playsound_channel6",0)
If playsound_channel6&lt;&gt;"" Then 
s6=LoadSound(playsound_channel6)
PlaySound(s6,6,loopsound_channel6)
Endif
stopsound_channel7=ini.GetFloat(String(currentframe),"frame_stopsound_channel7",0)
If (stopsound_channel7=1) Then StopChannel(7)
playsound_channel7=ini.Get(String(currentframe),"framw_playsound_channel7","")
loopsound_channel7=ini.GetFloat(String(currentframe),"frame_playsound_channel7",0)
If playsound_channel7&lt;&gt;"" Then 
s7=LoadSound(playsound_channel7)
PlaySound(s7,7,loopsound_channel7)
Endif
stopsound_channel8=ini.GetFloat(String(currentframe),"frame_stopsound_channel8",0)
If (stopsound_channel8=1) Then StopChannel(8)
playsound_channel8=ini.Get(String(currentframe),"frame_playsound_channel8","")
loopsound_channel8=ini.GetFloat(String(currentframe),"frame_playsound_channel8",0)
If playsound_channel8&lt;&gt;"" Then 
s8=LoadSound(playsound_channel8)
PlaySound(s8,8,loopsound_channel8)
Endif
frame_background=ini.Get(currentframe,"frame_background","\")
'frame_haspanoramaprojection=ini.GetFloat(String(currentframe),"frame_haspanoramaprojection",0)
frame_hastimedevent=ini.GetFloat(String(currentframe),"frame_timedeventgotoframe",0)
frame_timedeventgotoframe=ini.GetFloat(String(currentframe),"imedeventgotoframe",0)
frame_timedeventdestinationframe=ini.Get(currentframe,"frame_timedeventdestinationframe","")
frame_maxhotspotcount=ini.GetFloat(String(currentframe),"frame_maxhotspotcount",0)
variable_maxvariablecount=ini.GetFloat("Field_variable_properties","variable_maxvariablecount",0)
i=0
If (frame_maxhotspotcount&gt;0)
While (i&lt;=frame_maxhotspotcount)
left2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_left",0)
top2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_top",0)
width2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_width",0)
height2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_height",0)
stopsound_all2[i]=ini.GetFloat(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all2[i]=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel12[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel1",0)
If (stopsound_channel12[i]=1) Then StopChannel(1)
playsound_channel12[i]=ini.Get(String(currentframe),"hotspot_playsound_channel1","")
loopsound_channel12[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel1",0)
If playsound_channel12[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel12[i])
PlaySound(s12[i],1,loopsound_channel12[i])
Endif
stopsound_channel22[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel2",0)
If (stopsound_channel22[i]=1) Then StopChannel(2)
playsound_channel22[i]=ini.Get(String(currentframe),"hotspot_playsound_channel2","")
loopsound_channel22[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel2",0)
If playsound_channel22[i]&lt;&gt;"" Then 
s22[i]=LoadSound(playsound_channel22[i])
PlaySound(s22[i],2,loopsound_channel22[i])
Endif
stopsound_channel32[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel3",0)
If (stopsound_channel32[i]=1) Then StopChannel(3)
playsound_channel32[i]=ini.Get(String(currentframe),"hotspot_playsound_channel3","")
loopsound_channel32[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel3",0)
If playsound_channel32[i]&lt;&gt;"" Then 
s32[i]=LoadSound(playsound_channel32[i])
PlaySound(s32[i],3,loopsound_channel32[i])
Endif
stopsound_channel42[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel4",0)
If (stopsound_channel42[i]=1) Then StopChannel(4)
playsound_channel42[i]=ini.Get(String(currentframe),"hotspot_playsound_channel4","")
loopsound_channel42[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel4",0)
If playsound_channel42[i]&lt;&gt;"" Then 
s42[i]=LoadSound(playsound_channel42[i])
PlaySound(s42[i],4,loopsound_channel42[i])
Endif
stopsound_channel52[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel5",0)
If (stopsound_channel52[i]=1) Then StopChannel(5)
playsound_channel52[i]=ini.Get(String(currentframe),"hotspot_playsound_channel5","")
loopsound_channel52[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel5",0)
If playsound_channel52[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel52[i])
PlaySound(s52[i],5,loopsound_channel52[i])
Endif
stopsound_channel62[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel6",0)
If (stopsound_channel62[i]=1) Then StopChannel(6)
playsound_channel62[i]=ini.Get(String(currentframe),"hotspot_playsound_channel6","")
loopsound_channel62[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel6",0)
If playsound_channel62[i]&lt;&gt;"" Then 
s62[i]=LoadSound(playsound_channel62[i])
PlaySound(s62[i],6,loopsound_channel62[i])
Endif
stopsound_channel72[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel7",0)
If (stopsound_channel72[i]=1) Then StopChannel(7)
playsound_channel72[i]=ini.Get(String(currentframe),"hotspot_playsound_channel7","")
loopsound_channel72[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel7",0)
If playsound_channel72[i]&lt;&gt;"" Then 
s72[i]=LoadSound(playsound_channel72[i])
PlaySound(s72[i],7,loopsound_channel72[i])
Endif
stopsound_channel82[i]=ini.GetFloat(String(currentframe),"hotspot_stopsound_channel8",0)
If (stopsound_channel82[i]=1) Then StopChannel(8)
playsound_channel82[i]=ini.Get(String(currentframe),"hotspot_playsound_channel8","")
loopsound_channel82[i]=ini.GetFloat(String(currentframe),"hotspot_playsound_channel8",0)
If playsound_channel82[i]&lt;&gt;"" Then 
s82[i]=LoadSound(playsound_channel82[i])
PlaySound(s82[i],8,loopsound_channel82[i])
Endif
gotoframe12[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_mustgotoframe",0)
frame2[i]=ini.Get(String(currentframe)+"-hotspot"+String(i),"hotspot_destinationframe","")
showmessage2[i]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i),"hotspot_mustshowmessage",0)
messagetext2[i]=ini.Get(String(currentframe)+"-hotspot"+String(i),"hotspot_messagetext","")
i=i+1
End
End
varindex=0
If (variable_maxvariablecount&gt;0)
While (varindex&lt;=variable_maxvariablecount)
variable_name2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(hotspot_index)+"variable_properties","variable_name",0)
variable_value2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_value",0)
variable_set2[varindex]=ini.GetFloat(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_set",0)
varindex=varindex+1 
End
End 
Transparent=LoadImage(String(currentframe),1)
currentframe=frame_background
'ini_close() 
End 
'Draw Gui Interface
If (drawgui=1  And currentframe&lt;&gt;startframe)
'd3d_set_projection_ortho(0,0,windowwidth,windowheight,0)
DrawImage(spr,0,0) 
End 
End Method
End

Function Main()
New Game()
End
</textarea><br><br>It builds and runs on all targets supporting mojo. But here's hopefully my last issue:<br><br>I get a blank, black rectangle instead of my png, which is loaded from the INI. I don't know if there is something wrong with the file and path given in the INI or the code itself, or what the issue is exactly...<br><br>Thanks <br><br></td></tr></table><br>
<a name="2048938"></a>

<a name="2048939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> The INI "Load" function loads strings. "run.ini" needs to be wrapped in the "LoadString" function. That is, unless you've edited it.<br><br><strike><pre class=code>Field ini:Ini = Ini.Load(LoadString("run.ini"))</pre></strike><br><br>Edit: Actually, I misread it. Those fields need to be initialized in the OnCreate method. Such as this example...<br><br><pre class=code>Class Example Extends App
    Field ini:Ini
    
    Method OnCreate()
        ini = Ini.Load(LoadString("run.ini"))
    End
End</pre> <br><br></td></tr></table><br>
<a name="2048932"></a>

<a name="2048933"></a>

<a name="2049000"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo
Import INIFunctions

Class Game Extends App

Field ini:Ini
Field hotspot_index:Int
'Field enablepanoramamode:Int
Field clicked2:Int[]
Field messageduration2:Int[]
Field frame_haspanoramaprojection:Int
Field variable_maxvariablecount:Int
Field frame_maxhotspotcount:Int
Field winw:Int
Field winh:Int
Field MouseX2:Int
Field MouseY2:Int
Field createtimedevent:Int
Field frame_hastimedevent:Int
Field time:Int
Field totaltime:Int
Field currentframe:String
Field timedeventgotoframe1:Int
Field frame_timedeventgotoframe:Int
Field gotoframe1:Int
Field gotoframe2:Int
Field frame:Int
Field zdirection:Int
Field enableclick:Int
Field mdx:Int
Field mdy:Int
Field mdx2:Int
Field mdy2:Int
Field mdxx:Int
Field mdyy:Int
Field click:Int
Field mmx:Int
Field mmy:Int
Field w:Int
Field h:Int
Field z:Int
Field nextcheck:Int
Field drawgui:Int
'window_set_cursor(cr_cross)
Field enabledframe=1
Field zcloseto:Int
Field triggercreate:Int
Field image_speed:Int
Field gametitle:String
Field windowwidth:Int
Field windowheight:Int
Field mx:Int
Field my:Int
Field guitemplate:String
Field spr:Image
Field startframe:String
Field stopsound_all:Int
Field stopsound_channel1:Int
Field stopsound_channel2:Int
Field stopsound_channel3:Int
Field stopsound_channel4:Int
Field stopsound_channel5:Int
Field stopsound_channel6:Int
Field stopsound_channel7:Int
Field stopsound_channel8:Int
Field loopsound_channel1:Int
Field loopsound_channel2:Int
Field loopsound_channel3:Int
Field loopsound_channel4:Int
Field loopsound_channel5:Int
Field loopsound_channel6:Int
Field loopsound_channel7:Int
Field loopsound_channel8:Int
Field playsound_channel1:String
Field playsound_channel2:String
Field playsound_channel3:String
Field playsound_channel4:String
Field playsound_channel5:String
Field playsound_channel6:String
Field playsound_channel7:String
Field playsound_channel8:String
Field s1:Sound
Field s2:Sound
Field s3:Sound
Field s4:Sound
Field s5:Sound
Field s6:Sound
Field s7:Sound
Field s8:Sound
Field frame_background:String
Field frame_timedeventdestinationframe:String
Field gotoframe12:Int[]
Field frame2:String[]
Field showmessage2:Int[]
Field messagetext2:String[]
Field variable_name2:Int[]
Field variable_value2:Int[]
Field variable_set2:Int[]
Field i:Int
Field varindex:Int
Field left2:Int[]
Field top2:Int[]
Field width2:Int[]
Field height2:Int[]
Field stopsound_channel12:Int[]
Field stopsound_channel22:Int[]
Field stopsound_channel32:Int[]
Field stopsound_channel42:Int[]
Field stopsound_channel52:Int[]
Field stopsound_channel62:Int[]
Field stopsound_channel72:Int[]
Field stopsound_channel82:Int[]
Field loopsound_channel12:Int[]
Field loopsound_channel22:Int[]
Field loopsound_channel32:Int[]
Field loopsound_channel42:Int[]
Field loopsound_channel52:Int[]
Field loopsound_channel62:Int[]
Field loopsound_channel72:Int[]
Field loopsound_channel82:Int[]
Field playsound_channel12:String[]
Field playsound_channel22:String[]
Field playsound_channel32:String[]
Field playsound_channel42:String[]
Field playsound_channel52:String[]
Field playsound_channel62:String[]
Field playsound_channel72:String[]
Field playsound_channel82:String[]
Field s12:Sound[]
Field s22:Sound[]
Field s32:Sound[]
Field s42:Sound[]
Field s52:Sound[]
Field s62:Sound[]
Field s72:Sound[]
Field s82:Sound[]
Field stopsound_all2:Int[]
Field Transparent:Image


Method OnCreate()
SetUpdateRate 60
ini = ini.Load(LoadString("run.ini"))
gametitle=ini.Get("gamesettings","gametitle","")
drawgui=ini.GetInt("gamesettings","drawgui",0)
guitemplate=ini.Get("gamesettings","guitemplate","")
If drawgui=1 Then spr=LoadImage(guitemplate)
startframe=ini.Get("gamesettings","startframe","")
windowwidth=ini.GetInt("gamesettings","windowwidth",1024)
windowheight=ini.GetInt("gamesettings","windowheight",768)
'fullscreen=ini.GetInt("gamesettings","fullscreen",0)
'panoramaaspectratio=ini.GetInt("gamesettings","panoramaaspectratio",4)
'direction=ini.GetInt("gamesettings","panoramahorizontaldirection",0)
'zdirection=ini.GetInt("gamesettings","panoramaverticaldirection",0)*50
currentframe=startframe
stopsound_all=ini.GetInt(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel1=ini.GetInt(String(currentframe),"frame_stopsound_channel1",0)
If (stopsound_channel1=1) Then StopChannel(1)
playsound_channel1=ini.Get(String(currentframe),"frame_playsound_channel1","")
loopsound_channel1=ini.GetInt(String(currentframe),"frame_playsound_channel1",0)
If playsound_channel1&lt;&gt;"" Then 
s1=LoadSound(playsound_channel1)
PlaySound(s1,1,loopsound_channel1)
Endif
stopsound_channel2=ini.GetInt(String(currentframe),"frame_stopsound_channel2",0)
If (stopsound_channel2=1) Then StopChannel(2)
playsound_channel2=ini.Get(String(currentframe),"frame_playsound_channel2","")
loopsound_channel2=ini.GetInt(String(currentframe),"frame_playsound_channel2",0)
If playsound_channel2&lt;&gt;"" Then 
s2=LoadSound(playsound_channel2)
PlaySound(s2,2,loopsound_channel2)
Endif
stopsound_channel3=ini.GetInt(String(currentframe),"frame_stopsound_channel3",0)
If (stopsound_channel3=1) Then StopChannel(3)
playsound_channel3=ini.Get(String(currentframe),"frame_playsound_channel3","")
loopsound_channel3=ini.GetInt(String(currentframe),"frame_playsound_channel3",0)
If playsound_channel3&lt;&gt;"" Then 
s3=LoadSound(playsound_channel3)
PlaySound(s3,3,loopsound_channel3)
Endif
stopsound_channel4=ini.GetInt(String(currentframe),"frame_stopsound_channel4",0)
If (stopsound_channel4=1) Then StopChannel(4)
playsound_channel4=ini.Get(String(currentframe),"frame_playsound_channel4","")
loopsound_channel4=ini.GetInt(String(currentframe),"frame_playsound_channel4",0)
If playsound_channel4&lt;&gt;"" Then 
s4=LoadSound(playsound_channel4)
PlaySound(s4,4,loopsound_channel4)
Endif
stopsound_channel5=ini.GetInt(String(currentframe),"frame_stopsound_channel5",0)
If (stopsound_channel5=1) Then StopChannel(5)
playsound_channel5=ini.Get(String(currentframe),"frame_playsound_channel5","")
loopsound_channel5=ini.GetInt(String(currentframe),"frame_playsound_channel5",0)
If playsound_channel5&lt;&gt;"" Then 
s5=LoadSound(playsound_channel5)
PlaySound(s5,5,loopsound_channel5)
Endif
stopsound_channel6=ini.GetInt(String(currentframe),"frame_stopsound_channel6",0)
If (stopsound_channel6=1) Then StopChannel(6)
playsound_channel6=ini.Get(String(currentframe),"frame_playsound_channel6","")
loopsound_channel6=ini.GetInt(String(currentframe),"frame_playsound_channel6",0)
If playsound_channel6&lt;&gt;"" Then 
s6=LoadSound(playsound_channel6)
PlaySound(s6,6,loopsound_channel6)
Endif
stopsound_channel7=ini.GetInt(String(currentframe),"frame_stopsound_channel7",0)
If (stopsound_channel7=1) Then StopChannel(7)
playsound_channel7=ini.Get(String(currentframe),"framw_playsound_channel7","")
loopsound_channel7=ini.GetInt(String(currentframe),"frame_playsound_channel7",0)
If playsound_channel7&lt;&gt;"" Then 
s7=LoadSound(playsound_channel7)
PlaySound(s7,7,loopsound_channel7)
Endif
stopsound_channel8=ini.GetInt(String(currentframe),"frame_stopsound_channel8",0)
If (stopsound_channel8=1) Then StopChannel(8)
playsound_channel8=ini.Get(String(currentframe),"frame_playsound_channel8","")
loopsound_channel8=ini.GetInt(String(currentframe),"frame_playsound_channel8",0)
If playsound_channel8&lt;&gt;"" Then 
s8=LoadSound(playsound_channel8)
PlaySound(s8,8,loopsound_channel8)
Endif
frame_background=ini.Get(currentframe,"frame_background","\")
'frame_haspanoramaprojection=ini.GetInt(String(currentframe),"frame_haspanoramaprojection",0)
frame_hastimedevent=ini.GetInt(String(currentframe),"frame_timedeventgotoframe",0)
frame_timedeventgotoframe=ini.GetInt(String(currentframe),"imedeventgotoframe",0)
frame_timedeventdestinationframe=ini.Get(currentframe,"frame_timedeventdestinationframe","")
frame_maxhotspotcount=ini.GetInt(String(currentframe),"frame_maxhotspotcount",0)
variable_maxvariablecount=ini.GetInt("Field_variable_properties","variable_maxvariablecount",0)
i=0
If (frame_maxhotspotcount&gt;0)
While (i&lt;=frame_maxhotspotcount)
left2[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_left",0)
top2[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_top",0)
width2[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_width",0)
height2[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_height",0)
stopsound_all2[i]=ini.GetInt(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all2[i]=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel12[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel1",0)
If (stopsound_channel12[i]=1) Then StopChannel(1)
playsound_channel12[i]=ini.Get(String(currentframe),"hotspot_playsound_channel1","")
loopsound_channel12[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel1",0)
If playsound_channel12[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel12[i])
PlaySound(s12[i],1,loopsound_channel12[i])
Endif
stopsound_channel22[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel2",0)
If (stopsound_channel22[i]=1) Then StopChannel(2)
playsound_channel22[i]=ini.Get(String(currentframe),"hotspot_playsound_channel2","")
loopsound_channel22[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel2",0)
If playsound_channel22[i]&lt;&gt;"" Then 
s22[i]=LoadSound(playsound_channel22[i])
PlaySound(s22[i],2,loopsound_channel22[i])
Endif
stopsound_channel32[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel3",0)
If (stopsound_channel32[i]=1) Then StopChannel(3)
playsound_channel32[i]=ini.Get(String(currentframe),"hotspot_playsound_channel3","")
loopsound_channel32[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel3",0)
If playsound_channel32[i]&lt;&gt;"" Then 
s32[i]=LoadSound(playsound_channel32[i])
PlaySound(s32[i],3,loopsound_channel32[i])
Endif
stopsound_channel42[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel4",0)
If (stopsound_channel42[i]=1) Then StopChannel(4)
playsound_channel42[i]=ini.Get(String(currentframe),"hotspot_playsound_channel4","")
loopsound_channel42[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel4",0)
If playsound_channel42[i]&lt;&gt;"" Then 
s42[i]=LoadSound(playsound_channel42[i])
PlaySound(s42[i],4,loopsound_channel42[i])
Endif
stopsound_channel52[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel5",0)
If (stopsound_channel52[i]=1) Then StopChannel(5)
playsound_channel52[i]=ini.Get(String(currentframe),"hotspot_playsound_channel5","")
loopsound_channel52[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel5",0)
If playsound_channel52[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel52[i])
PlaySound(s52[i],5,loopsound_channel52[i])
Endif
stopsound_channel62[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel6",0)
If (stopsound_channel62[i]=1) Then StopChannel(6)
playsound_channel62[i]=ini.Get(String(currentframe),"hotspot_playsound_channel6","")
loopsound_channel62[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel6",0)
If playsound_channel62[i]&lt;&gt;"" Then 
s62[i]=LoadSound(playsound_channel62[i])
PlaySound(s62[i],6,loopsound_channel62[i])
Endif
stopsound_channel72[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel7",0)
If (stopsound_channel72[i]=1) Then StopChannel(7)
playsound_channel72[i]=ini.Get(String(currentframe),"hotspot_playsound_channel7","")
loopsound_channel72[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel7",0)
If playsound_channel72[i]&lt;&gt;"" Then 
s72[i]=LoadSound(playsound_channel72[i])
PlaySound(s72[i],7,loopsound_channel72[i])
Endif
stopsound_channel82[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel8",0)
If (stopsound_channel82[i]=1) Then StopChannel(8)
playsound_channel82[i]=ini.Get(String(currentframe),"hotspot_playsound_channel8","")
loopsound_channel82[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel8",0)
If playsound_channel82[i]&lt;&gt;"" Then 
s82[i]=LoadSound(playsound_channel82[i])
PlaySound(s82[i],8,loopsound_channel82[i])
Endif
gotoframe12[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_mustgotoframe",0)
frame2[i]=ini.Get(String(currentframe)+"-hotspot"+String(i),"hotspot_destinationframe","")
showmessage2[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_mustshowmessage",0)
messagetext2[i]=ini.Get(String(currentframe)+"-hotspot"+String(i),"hotspot_messagetext","")
i=i+1
End
End
varindex=0
If (variable_maxvariablecount&gt;0)
While (varindex&lt;=variable_maxvariablecount)
variable_name2[varindex]=ini.GetInt(String(currentframe)+"-hotspot"+String(hotspot_index)+"variable_properties","variable_name",0)
variable_value2[varindex]=ini.GetInt(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_value",0)
variable_set2[varindex]=ini.GetInt(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_set",0)
varindex=varindex+1 
End
End 
Transparent=LoadImage(String(currentframe))
currentframe=frame_background
'ini_close();
'window_set_caption(gametitle)
'If (fullscreen=1)
'window_set_fullscreen(1)
'Endif
'window_set_size(windowwidth,windowheight)
End Method
	
Method OnUpdate()

'Create timed event
createtimedevent=frame_hastimedevent
If (createtimedevent=1)
time=time+0.01
If (time&gt;Int(totaltime))
currentframe=timedeventgotoframe1
gotoframe1=1
End
End

If MouseDown(MOUSE_LEFT)
mdxx=MouseX
mdyy=MouseY
End
'If (mouse_check_button(MOUSE_LEFT)  And mdx&lt;&gt;mdxx) Or (mouse_check_button(MOUSE_LEFT)  And mdy&lt;&gt;mdyy)
'If (enablepanoramamode=1)
'direction++mdx2/360
'zdirection++mdy2/360 End  End 
If click=1 Then click=0
If (MouseDown(MOUSE_LEFT)  And mdx=mdxx  And mdy=mdyy)
mmx=MouseX
mmy=MouseY
click=1
End
'If (enablepanoramamode=1)
'w=1024
'h=768
'If (w&lt;&gt;h) 
'show_message("Error Ioncorrect aspect ratio; panoramic images must have an aspect ratio of 1/1. Please resize the image in an image editor...")
'game_end() End 
'd3d_set_hidden(1)
'draw_set_color(c_white);
'd3d_set_projection_ext(x,y,z, 
'-(x+cos(degtorad(direction))*cos(degtorad(zdirection))), 
'-(y-sin(degtorad(direction))*cos(degtorad(zdirection))), 
'z+sin(degtorad(zdirection)),0,0,-1,40,panoramaaspectratio,1,1000000); 
'd3d_draw_cylinder(x+256,y-256,z-256,x-256,y+256, 
'z+256,sprite_get_texture(Transparent,0),1,1,1,2048) End 

'Detect the specific hotspot clicked
If (click=1)
varindex=0
While (varindex&lt;variable_maxvariablecount)
If (variable_set2[varindex]=1)
variable_name2[varindex]=variable_value2[varindex] 
End 
varindex=varindex+1 
End  
End 
If (click=1)
i=0
While (i&lt;frame_maxhotspotcount)
left2[i]=left2[i]
top2[i]=top2[i]
width2[i]=width2[i]
height2[i]=height2[i]
If (mmx&gt;Int(left2[i])  And mmy&gt;Int(top2[i])  And mmx&lt;Int(width2[i])  And mmy&lt;Int(height2[i]))
clicked2[i]=1
gotoframe12[i]=gotoframe12[i]
If (gotoframe12[i]=1)
frame2[i]=frame2[i]
currentframe=frame2[i] 
End 
showmessage2[i]=showmessage2[i]
messagetext2[i]=messagetext2[i]
messageduration2[i]=(500+12)/2  
Else clicked2[i]=0 
End 
i=i+1 
End 
nextcheck=1 
End 
If (nextcheck=1)
i=0
While (i&lt;frame_maxhotspotcount)
If (showmessage2[i]=1)
'd3d_set_projection_ortho(0,0,windowwidth,windowheight,0)
messageduration2[i]-=.5
'draw_set_font(Font)
'draw_set_valign(fa_top)
'draw_set_halign(fa_left)
'draw_set_color(c_black)
DrawRect(0,windowheight-(12*2),windowwidth,windowheight-(12*2)+12*2)
'draw_set_valign(fa_middle)
'draw_set_halign(fa_center)

'draw_set_color(c_white)
DrawText(messagetext2[i],windowwidth/2,windowheight-12,0.5,0.5)
If (MouseX&gt;0   And  MouseX&lt;windowwidth)
If (MouseY&gt;windowheight-12*2   And  MouseY&lt;windowheight)
enableclick=0
If (MouseDown(MOUSE_LEFT))
showmessage2[i]=0
messageduration2[i]=0
nextcheck=0
enableclick=1 
End  
End  
End  
End 
If (messageduration2[i]&lt;=0)
showmessage2[i]=0
nextcheck=0
enableclick=1 
End  
End 
i=i+1 
End  

'Change the frame Or show a message
If (click=1)
stopsound_all=ini.GetInt(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel1=ini.GetInt(String(currentframe),"frame_stopsound_channel1",0)
If (stopsound_channel1=1) Then StopChannel(1)
playsound_channel1=ini.Get(String(currentframe),"frame_playsound_channel1","")
loopsound_channel1=ini.GetInt(String(currentframe),"frame_playsound_channel1",0)
If playsound_channel1&lt;&gt;"" Then 
s1=LoadSound(playsound_channel1)
PlaySound(s1,1,loopsound_channel1)
Endif
stopsound_channel2=ini.GetInt(String(currentframe),"frame_stopsound_channel2",0)
If (stopsound_channel2=1) Then StopChannel(2)
playsound_channel2=ini.Get(String(currentframe),"frame_playsound_channel2","")
loopsound_channel2=ini.GetInt(String(currentframe),"frame_playsound_channel2",0)
If playsound_channel2&lt;&gt;"" Then 
s2=LoadSound(playsound_channel2)
PlaySound(s2,2,loopsound_channel2)
Endif
stopsound_channel3=ini.GetInt(String(currentframe),"frame_stopsound_channel3",0)
If (stopsound_channel3=1) Then StopChannel(3)
playsound_channel3=ini.Get(String(currentframe),"frame_playsound_channel3","")
loopsound_channel3=ini.GetInt(String(currentframe),"frame_playsound_channel3",0)
If playsound_channel3&lt;&gt;"" Then 
s3=LoadSound(playsound_channel3)
PlaySound(s3,3,loopsound_channel3)
Endif
stopsound_channel4=ini.GetInt(String(currentframe),"frame_stopsound_channel4",0)
If (stopsound_channel4=1) Then StopChannel(4)
playsound_channel4=ini.Get(String(currentframe),"frame_playsound_channel4","")
loopsound_channel4=ini.GetInt(String(currentframe),"frame_playsound_channel4",0)
If playsound_channel4&lt;&gt;"" Then 
s4=LoadSound(playsound_channel4)
PlaySound(s4,4,loopsound_channel4)
Endif
stopsound_channel5=ini.GetInt(String(currentframe),"frame_stopsound_channel5",0)
If (stopsound_channel5=1) Then StopChannel(5)
playsound_channel5=ini.Get(String(currentframe),"frame_playsound_channel5","")
loopsound_channel5=ini.GetInt(String(currentframe),"frame_playsound_channel5",0)
If playsound_channel5&lt;&gt;"" Then 
s5=LoadSound(playsound_channel5)
PlaySound(s5,5,loopsound_channel5)
Endif
stopsound_channel6=ini.GetInt(String(currentframe),"frame_stopsound_channel6",0)
If (stopsound_channel6=1) Then StopChannel(6)
playsound_channel6=ini.Get(String(currentframe),"frame_playsound_channel6","")
loopsound_channel6=ini.GetInt(String(currentframe),"frame_playsound_channel6",0)
If playsound_channel6&lt;&gt;"" Then 
s6=LoadSound(playsound_channel6)
PlaySound(s6,6,loopsound_channel6)
Endif
stopsound_channel7=ini.GetInt(String(currentframe),"frame_stopsound_channel7",0)
If (stopsound_channel7=1) Then StopChannel(7)
playsound_channel7=ini.Get(String(currentframe),"framw_playsound_channel7","")
loopsound_channel7=ini.GetInt(String(currentframe),"frame_playsound_channel7",0)
If playsound_channel7&lt;&gt;"" Then 
s7=LoadSound(playsound_channel7)
PlaySound(s7,7,loopsound_channel7)
Endif
stopsound_channel8=ini.GetInt(String(currentframe),"frame_stopsound_channel8",0)
If (stopsound_channel8=1) Then StopChannel(8)
playsound_channel8=ini.Get(String(currentframe),"frame_playsound_channel8","")
loopsound_channel8=ini.GetInt(String(currentframe),"frame_playsound_channel8",0)
If playsound_channel8&lt;&gt;"" Then 
s8=LoadSound(playsound_channel8)
PlaySound(s8,8,loopsound_channel8)
Endif
frame_background=ini.Get(currentframe,"frame_background","\")
'frame_haspanoramaprojection=ini.GetInt(String(currentframe),"frame_haspanoramaprojection",0)
frame_hastimedevent=ini.GetInt(String(currentframe),"frame_timedeventgotoframe",0)
frame_timedeventgotoframe=ini.GetInt(String(currentframe),"imedeventgotoframe",0)
frame_timedeventdestinationframe=ini.Get(currentframe,"frame_timedeventdestinationframe","")
frame_maxhotspotcount=ini.GetInt(String(currentframe),"frame_maxhotspotcount",0)
variable_maxvariablecount=ini.GetInt("Field_variable_properties","variable_maxvariablecount",0)
i=0
If (frame_maxhotspotcount&gt;0)
While (i&lt;=frame_maxhotspotcount)
left2[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_left",0)
top2[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_top",0)
width2[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_width",0)
height2[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_height",0)
stopsound_all2[i]=ini.GetInt(String(currentframe),"frame_stopsound_all",0)
If (stopsound_all2[i]=1)
StopChannel(1)
StopChannel(2)
StopChannel(3)
StopChannel(4)
StopChannel(5)
StopChannel(6)
StopChannel(7)
StopChannel(8)
Endif
stopsound_channel12[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel1",0)
If (stopsound_channel12[i]=1) Then StopChannel(1)
playsound_channel12[i]=ini.Get(String(currentframe),"hotspot_playsound_channel1","")
loopsound_channel12[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel1",0)
If playsound_channel12[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel12[i])
PlaySound(s12[i],1,loopsound_channel12[i])
Endif
stopsound_channel22[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel2",0)
If (stopsound_channel22[i]=1) Then StopChannel(2)
playsound_channel22[i]=ini.Get(String(currentframe),"hotspot_playsound_channel2","")
loopsound_channel22[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel2",0)
If playsound_channel22[i]&lt;&gt;"" Then 
s22[i]=LoadSound(playsound_channel22[i])
PlaySound(s22[i],2,loopsound_channel22[i])
Endif
stopsound_channel32[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel3",0)
If (stopsound_channel32[i]=1) Then StopChannel(3)
playsound_channel32[i]=ini.Get(String(currentframe),"hotspot_playsound_channel3","")
loopsound_channel32[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel3",0)
If playsound_channel32[i]&lt;&gt;"" Then 
s32[i]=LoadSound(playsound_channel32[i])
PlaySound(s32[i],3,loopsound_channel32[i])
Endif
stopsound_channel42[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel4",0)
If (stopsound_channel42[i]=1) Then StopChannel(4)
playsound_channel42[i]=ini.Get(String(currentframe),"hotspot_playsound_channel4","")
loopsound_channel42[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel4",0)
If playsound_channel42[i]&lt;&gt;"" Then 
s42[i]=LoadSound(playsound_channel42[i])
PlaySound(s42[i],4,loopsound_channel42[i])
Endif
stopsound_channel52[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel5",0)
If (stopsound_channel52[i]=1) Then StopChannel(5)
playsound_channel52[i]=ini.Get(String(currentframe),"hotspot_playsound_channel5","")
loopsound_channel52[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel5",0)
If playsound_channel52[i]&lt;&gt;"" Then 
s12[i]=LoadSound(playsound_channel52[i])
PlaySound(s52[i],5,loopsound_channel52[i])
Endif
stopsound_channel62[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel6",0)
If (stopsound_channel62[i]=1) Then StopChannel(6)
playsound_channel62[i]=ini.Get(String(currentframe),"hotspot_playsound_channel6","")
loopsound_channel62[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel6",0)
If playsound_channel62[i]&lt;&gt;"" Then 
s62[i]=LoadSound(playsound_channel62[i])
PlaySound(s62[i],6,loopsound_channel62[i])
Endif
stopsound_channel72[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel7",0)
If (stopsound_channel72[i]=1) Then StopChannel(7)
playsound_channel72[i]=ini.Get(String(currentframe),"hotspot_playsound_channel7","")
loopsound_channel72[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel7",0)
If playsound_channel72[i]&lt;&gt;"" Then 
s72[i]=LoadSound(playsound_channel72[i])
PlaySound(s72[i],7,loopsound_channel72[i])
Endif
stopsound_channel82[i]=ini.GetInt(String(currentframe),"hotspot_stopsound_channel8",0)
If (stopsound_channel82[i]=1) Then StopChannel(8)
playsound_channel82[i]=ini.Get(String(currentframe),"hotspot_playsound_channel8","")
loopsound_channel82[i]=ini.GetInt(String(currentframe),"hotspot_playsound_channel8",0)
If playsound_channel82[i]&lt;&gt;"" Then 
s82[i]=LoadSound(playsound_channel82[i])
PlaySound(s82[i],8,loopsound_channel82[i])
Endif
gotoframe12[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_mustgotoframe",0)
frame2[i]=ini.Get(String(currentframe)+"-hotspot"+String(i),"hotspot_destinationframe","")
showmessage2[i]=ini.GetInt(String(currentframe)+"-hotspot"+String(i),"hotspot_mustshowmessage",0)
messagetext2[i]=ini.Get(String(currentframe)+"-hotspot"+String(i),"hotspot_messagetext","")
i=i+1
End
End
varindex=0
If (variable_maxvariablecount&gt;0)
While (varindex&lt;=variable_maxvariablecount)
variable_name2[varindex]=ini.GetInt(String(currentframe)+"-hotspot"+String(hotspot_index)+"variable_properties","variable_name",0)
variable_value2[varindex]=ini.GetInt(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_value",0)
variable_set2[varindex]=ini.GetInt(String(currentframe)+"-hotspot"+String(i)+"variable_properties","variable_set",0)
varindex=varindex+1 
End
End 
Transparent=LoadImage(String(currentframe))
currentframe=frame_background
'ini_close() 
End 
End Method

Method OnRender()
Cls
'get the texel coordinates of the current texel the camera is facing
'enablepanoramamode=frame_haspanoramaprojection
'If (enablepanoramamode=1)
'winw=MouseX-windowwidth/2
'winh=MouseY-windowheight/2
'mx=(hangle2xaxisconverter(direction*360)+xaxis2hangleconverter(winw*360*pi))
'If (zdirection&gt;=0)
'my=(((vangle2yaxisconverter((zdirection*50)))+1024)+(yaxis2vangleconverter(winh*2048*pi-400000)/2.25+yaxis2vangleconverter(winh*zdirection*50*pi-10000))+zdirection/50) End 
'Else my=(((vangle2yaxisconverter((zdirection*50)))+1024)+(yaxis2vangleconverter(winh*2048*pi-400000)/2.25-(yaxis2vangleconverter(winh*zdirection*50*pi-10000))+zdirection/50)) End 
'MouseX=mx
'MouseY=my End 
'Else If (enablepanoramamode=0)
'
'mousex=mouse_x
'mousex=mouse_y
' End 

'Prevent the mouselook from looking too high Or too low
'zdirection=min(max(zdirection,-22),22)
'mx=min(max(mx,0),2048)
'my=min(max(my,0),2048)
'MouseX=min(max(MouseX,0),2048)
'MouseY=min(max(MouseY,0),2048)

'Draw 2D picture frame
'If (enablepanoramamode=0)
If startframe&lt;&gt;"" And currentframe&lt;&gt;"" Then DrawImage(Transparent,0,0)
'End

'Draw 3D projected panoramic frame
'If (enableclick=1)
'If mouse_check_button_pressed(MOUSE_LEFT)
'mdx=MouseX
'mdy=MouseY End 
'If (mouse_check_button(MOUSE_LEFT)  And enablepanoramamode=1)
'mdx2=mdx-MouseX
'mdy2=mdy-MouseY End 
'Draw Gui Interface
If (drawgui=1  And currentframe&lt;&gt;startframe)
'd3d_set_projection_ortho(0,0,windowwidth,windowheight,0)
DrawImage(spr,0,0) 
End 
End Method
End

Function Main()
New Game()
End
</textarea><br>Still gives me a black rectangle instead of my image.<br>If it helps, here is my INI file:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
[gamesettings]
gametitle=Shadows
drawgui=0
guitemplate=frames\GuiTemplate.png
startframe=frames\MainMenu.png
windowwidth=1024
windowheight=768
fullscreen=0
panoramahorizontaldirection=180
panoramaverticaldirection=0
panoramaaspectratio=4

[global_variable_properties]
variable_maxvariablecount=1

[frames\MainMenu.png]
frame_background=frames\MainMenu.png
frame_haspanoramaprojection=0
frame_hastimedevent=
frame_timedeventgotoframe=
frame_timedeventdestinationframe=
frame_maxhotspotcount=30

[frames\MainMenu.png-hotspot0]
hotspot_left=450
hotspot_top=280
hotspot_width=900
hotspot_height=400
hotspot_mustgotoframe=1
hotspot_destinationframe=frames\HotelRoomLightsOn.png
hotspot_mustshowmessage=
hotspot_messagetext=

[frames\MainMenu.png-hotspot0-variable_properties]
variable_name=
variable_value=
variable_set=

[frames\HotelRoomLightsOn.png]
frame_background=frames\HotelRoomLightsOn.png
frame_haspanoramaprojection=1
frame_hastimedevent=
frame_timedeventgotoframe=
frame_timedeventdestinationframe=
frame_maxhotspotcount=30

[frames\HotelRoomLightsOn.png-hotspot0]
hotspot_left=1510
hotspot_top=900
hotspot_width=1720
hotspot_height=1230
hotspot_mustgotoframe=1
hotspot_destinationframe=frames\DoorClosed.png
hotspot_mustshowmessage=
hotspot_messagetext=

[frames\HotelRoomLightsOn.png-hotspot1]
hotspot_left=1120
hotspot_top=960
hotspot_width=1290
hotspot_height=1220
hotspot_mustgotoframe=1
hotspot_destinationframe=frames\WardrobeClosed.png
hotspot_mustshowmessage=
hotspot_messagetext=

[frames\HotelRoomLightsOn.png-hotspot2]
hotspot_left=930
hotspot_top=1080
hotspot_width=1110
hotspot_height=1250
hotspot_mustgotoframe=1
hotspot_destinationframe=frames\DrawersClosed.png
hotspot_mustshowmessage=
hotspot_messagetext=

[frames\DoorClosed.png-hotspot0-variable_properties]
variable_name=
variable_value=
variable_set=

[frames\DoorClosed.png]
frame_background=frames\DoorClosed.png
frame_haspanoramaprojection=
frame_hastimedevent=
frame_timedeventgotoframe=
frame_timedeventdestinationframe=
frame_maxhotspotcount=30

[frames\DoorClosed.png-hotspot0]
hotspot_left=
hotspot_top=
hotspot_width=
hotspot_height=
hotspot_mustgotoframe=
hotspot_destinationframe=
hotspot_mustshowmessage=
hotspot_messagetext=

[frames\HotelRoomLightsOn.png-hotspot0-variable_properties]
variable_name=
variable_value=
variable_set=

[frames\DrawersClosed.png]
frame_background=frames\DrawersClosed.png
frame_haspanoramaprojection=
frame_hastimedevent=
frame_timedeventgotoframe=
frame_timedeventdestinationframe=
frame_maxhotspotcount=30

[frames\DrawersClosed.png-hotspot0]
hotspot_left=
hotspot_top=
hotspot_width=
hotspot_height=
hotspot_mustgotoframe=
hotspot_destinationframe=
hotspot_mustshowmessage=
hotspot_messagetext=

[frames\DrawersClosed.png-hotspot0-variable_properties]
variable_name=
variable_value=
variable_set=
</textarea><br>Here is a video that displays what Adventure Window is supposed to do, which is the Game Maker version of Adventure Window:<br><a href="https://www.dropbox.com/s/3rkbbgl0t0bpfv1/run.wmv" target="_blank">https://www.dropbox.com/s/3rkbbgl0t0bpfv1/run.wmv</a><br><br>As you can see from the video it appears to make very nice 3D graphics. But that is actually a 2d picture textured onto a 3D cylinder. This is the only thing I need the minib3d module for - drawing a cylinder with the 3d camera smack dab in the middle to simulate Pre rendered 3d panoramas. <br><br></td></tr></table><br>
<a name="2048999"></a>

<a name="2048998"></a>

<a name="2048997"></a>

<a name="2050753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adventure Window is very close to being released! You can see the brand new IDE in action here:<br><br><a href="http://dl.dropbox.com/u/79893663/AdventureWindow/Screenshots/AdventureWindowDemo.wmv" target="_blank">http://dl.dropbox.com/u/79893663/AdventureWindow/Screenshots/AdventureWindowDemo.wmv</a><br><br>Still can't read ini files in monkey, though. I'll provide some code tommorrow... <br><br></td></tr></table><br>
<a name="2050798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> what's your problem with INI-files? <br><br>It is only reading a... <br><pre class=code>Field Text$=LoadState()</pre><br>..text, dividing it into lines with... <br><pre class=code>Lines$[]=Text.Split("~n")</pre><br>...then scan for the section...<br><pre class=code>For local Line$ =EachIn Lines
     If Line="[" + section + "]" Then Found=YES</pre><br>...then divide the lines below into left/right side <br><pre class=code>If Found=YES
     local Sides$[]=Line.Split("=")</pre><br>Then scan the left sides...<br><pre class=code>If Sides[0]="X"</pre><br>..and the value is here...<br><pre class=code>X=INT(Sides[1])</pre><br><br><br>I would help you, if you are willing to remove this terrible animation in your signature :-) <br><br></td></tr></table><br>
<a name="2050791"></a>

<a name="2050810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  .. remove this terrible animation in your signature :-)  <br></div><br>Yes, please. <br><br></td></tr></table><br>
<a name="2050862"></a>

<a name="2050863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Took care of it. Sorry about that...<br>I need to read strings pointing to image files to load. There doesn't seem to be a built in GetString() in the ini reader. I tried adding one but it always returned an empty string.<br><br>Is this anything like what I need to be doing? I get "String can't convert to Int"<br><br><pre class=code>
Field Text

Method ReadINIString(section,key,value)
Text=LoadString("run.ini") 
Lines[]=Text.Split("~n")
For Local Line$ =Eachin Lines
     If Line="[" + section + "]" Then Found=True
End
If Found=True
     Local Sides$[]=Line.Split("=")
Endif
If Sides[0]=key
value=String(Sides[1])
Endif
Return value
End

Method ReadINIReal(section,key,value)
Text=LoadString("run.ini") 
Lines[]=Text.Split("~n")
For Local Line$ =Eachin Lines
     If Line="[" + section + "]" Then Found=True
End 
If Found=True
     Local Sides$[]=Line.Split("=")
Endif
If Sides[0]=key
value=Float(Sides[1])
Endif
Return value
End
</pre> <br><br></td></tr></table><br>
<a name="2050850"></a>

<a name="2050851"></a>

<a name="2050852"></a>

<a name="2050853"></a>

<a name="2050870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe two bugs:<br>First: define the field Text as Text$<br>Second: the "run.ini" cannot not be loaded. The LoadString() command only accepts ".txt" files in default.<br><br>Try this: Rename the file to "Run.txt". If you develope under HTML5 you could add a line PRINT Text below the LoadString() line. <br><br>If not HTML5 you could check with DrawText Text,0,0 in the OnRender()<br><br><pre class=code>
Strict
Import mojo

Class Game Extends App

	Field Text$
	
	Method OnCreate%()
		SetUpdateRate 60
		Text=LoadString("Run.Txt")
		Print Text
		Return 0
	End	

	Method OnUpdate%()
		If KeyHit(KEY_ESCAPE) Then Error ""
		Return 0
	End	

	Method OnRender%()
		Cls 0,0,0
		DrawText Text,0,0
		Return 0
	End		
End

Function Main%()
	New Game
	Return 0
End
</pre> <br><br></td></tr></table><br>
<a name="2050874"></a>

<a name="2050880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Second: the "run.ini" cannot not be loaded. The LoadString() command only accepts ".txt" files in default. <br></div><br><br>I completely overlooked the fact that I generally add this in my code when I wrote the above.<br><br><pre class=code>#TEXT_FILES+="|*.ini"</pre><br><br><div class="quote"> I need to read strings pointing to image files to load. There doesn't seem to be a built in GetString() in the ini reader. I tried adding one but it always returned an empty string. <br></div><br><br>Now that you should be able to read text files, which seems to have been your problem all along, the method from my code for reading strings is just simply "Get"<br><br><b>Update:</b> Here's a working example you can download and run... <a href="http://nrgs.org/files/monkey/t4481.zip" target="_blank">http://nrgs.org/files/monkey/t4481.zip</a> <br><br></td></tr></table><br>
<a name="2050883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a ton! Downloading it. Would guys who contributed like credit in my project? I'm more than happy to in fact I insist. it's ironic how I can do it easily in VB6, but have troubles in monkey even though monkey is more easy to understand for most I'd imagine. Anyway string work now I can't thank you guys enough! =] <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
