<!DOCTYPE html><html lang="en" ><head ><title >MonkeyMax - Part 3</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MonkeyMax - Part 3</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=523" >User Targets</a>/<a href="#bottom" >MonkeyMax - Part 3</a><br><br>
<a name="2036990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thread continued from <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=2560" target="_blank">here</a>...<br><br><div class="quote"> MonkeyMax is a BlitzMax target for Monkey, it allows you to code in Monkey and it outputs BlitzMax code so you can run it on Windows, Mac OS and Linux <br></div><br><br>Updated 24/08/2012<br>Lastest Download:<br><a href="http://code.google.com/p/monkey-max/downloads/list" target="_blank">http://code.google.com/p/monkey-max/downloads/list</a><br><br>Instructions can be found here:<br><a href="http://code.google.com/p/monkey-max/wiki/MonkeyMax" target="_blank">http://code.google.com/p/monkey-max/wiki/MonkeyMax</a> <br><br></td></tr></table><br>
<a name="2031732"></a>

<a name="2031448"></a>

<a name="2030716"></a>

<a name="2030717"></a>

<a name="2030720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> TODO List:<br><br>* Music commands<br>* LoadState / SaveState<br>* OnPause / OnResume / OnLoading<br>* CONFIG variables<br><br>Have I missed anything? <br><br></td></tr></table><br>
<a name="2030719"></a>

<a name="2030730"></a>

<a name="2030731"></a>

<a name="2030732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> All music and sound commands are done... <br><br><a href="http://code.google.com/p/diddy/source/detail?r=411" target="_blank">http://code.google.com/p/diddy/source/detail?r=411</a><br><br>The looping was interesting because in BlitzMax you can't swap the loop flag so we have to reload the sound sample if we want to change it... <br><br></td></tr></table><br>
<a name="2031278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> LoadState / SaveState added:<br><br><a href="http://code.google.com/p/diddy/source/detail?r=415" target="_blank">http://code.google.com/p/diddy/source/detail?r=415</a><br><br>A lot easier than I thought it would be... <br><br></td></tr></table><br>
<a name="2031279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> And OnResume and OnSuspend added too :)<br><br><a href="http://code.google.com/p/diddy/source/detail?r=416" target="_blank">http://code.google.com/p/diddy/source/detail?r=416</a> <br><br></td></tr></table><br>
<a name="2031281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Qcat</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice! did not no this was so far along will have to try it out when i am back from camping. <br><br></td></tr></table><br>
<a name="2031283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Didn't see these recent updates -- thanks! <br><br></td></tr></table><br>
<a name="2031352"></a>

<a name="2031353"></a>

<a name="2031354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Config variables added:<br><br>BMAX_WINDOW_TITLE<br>BMAX_WINDOW_WIDTH<br>BMAX_WINDOW_HEIGHT<br>BMAX_WINDOW_FULLSCREEN<br><br><a href="http://code.google.com/p/diddy/source/detail?r=417" target="_blank">http://code.google.com/p/diddy/source/detail?r=417</a><br><br>And added a new zip for the lazy people out there ;)<br><br><a href="http://code.google.com/p/diddy/downloads/detail?name=monkeymax_r417.zip&amp;can=2&amp;q=" target="_blank">http://code.google.com/p/diddy/downloads/detail?name=monkeymax_r417.zip&amp;can=2&amp;q=</a><br><br>Re: Config variables do you think MonkeyMax should support MOJO_AUTO_SUSPEND_ENABLED and MOJO_IMAGE_FILTERING_ENABLED?<br><br>I think that MonkeyMax is now Monkey/Mojo feature complete :) <br><br></td></tr></table><br>
<a name="2031363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome stuff, can now use the config files like the rest of the targets :). Great work therevills :)! <br><br></td></tr></table><br>
<a name="2031364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Great work therevills <br></div><br>Thanks :)<br><br>Its been a team effort though: Samah, Karja and even Mark Sibly helped a lot along the way. <br><br></td></tr></table><br>
<a name="2031372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> God I wish this went both ways. but stellar work guys.! <br><br></td></tr></table><br>
<a name="2031391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great job everyone :) <br><br></td></tr></table><br>
<a name="2031394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is great! Thanks alot :) <br><br></td></tr></table><br>
<a name="2031413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Congrats to all this is a really helpful community project! <br><br></td></tr></table><br>
<a name="2031415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thinks it time for Mark to include the BMax target as part of the Monkey installation now. I mean, there's even a metro target there now, why not Bmax :)? <br><br></td></tr></table><br>
<a name="2031419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I really appreciate the effort involved in getting this working, but must admit I've not really tried using it purely because I didn't want to mess things up with Monkey. I'd be happy to see it as an official target :) <br><br></td></tr></table><br>
<a name="2031445"></a>

<a name="2031446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> God I wish this went both ways <br></div><br>Until (if ever!) Monkey has got the full command set and capabilities of BlitzMax it will never happen both ways...<br><br><div class="quote"> I didn't want to mess things up with Monkey <br></div><br>That's why you back up and rename your Monkey folder ;) <br><br></td></tr></table><br>
<a name="2031449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Therevills : I know, I know ;) It was more like... I didn't want to have loads of versions of Monkey floating around. The sooner Monkey supports either MonkeyMax officially, or, a "plugin" style system for targets, the better :).<br><br>For what it's worth though, I did install Monkey + MonkeyMax on my lil laptop last night and it runs perfectly. Looking forward to getting Ninjah running on PC's as a test this weekend. <br><br></td></tr></table><br>
<a name="2031455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also to answer your question..<br><br><div class="quote"> Re: Config variables do you think MonkeyMax should support MOJO_AUTO_SUSPEND_ENABLED and MOJO_IMAGE_FILTERING_ENABLED? <br></div><br><br>1 vote for filtering here :) <br><br></td></tr></table><br>
<a name="2031634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got an EXCEPTION_ACCESS_VIOLATION when trying to run SpaceBugs with this version of MonkeyMax.<br><br>EDIT : this was actually related to a sound issue, but been resolved now :). <br><br></td></tr></table><br>
<a name="2031566"></a>

<a name="2031733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to let you guys know I have now moved MonkeyMax away from Diddy to its own spot on the web:<br><br><a href="http://code.google.com/p/monkey-max/" target="_blank">http://code.google.com/p/monkey-max/</a><br><br>And shortly I will be updating it to work with v60 and add the filtering and supending config items. <br><br></td></tr></table><br>
<a name="2031795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> MOJO_AUTO_SUSPEND_ENABLED and MOJO_IMAGE_FILTERING_ENABLED are now supported :)<br><br><a href="http://code.google.com/p/monkey-max/source/detail?r=5" target="_blank">http://code.google.com/p/monkey-max/source/detail?r=5</a> <br><br></td></tr></table><br>
<a name="2031836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> And MonkeyMax is now up-to-date with Monkey v60... I think ;)<br><br><a href="http://code.google.com/p/monkey-max/source/detail?r=9" target="_blank">http://code.google.com/p/monkey-max/source/detail?r=9</a><br><br>New download: <a href="http://code.google.com/p/monkey-max/downloads/detail?name=monkey-max_r9.zip&amp;can=2&amp;q=" target="_blank">http://code.google.com/p/monkey-max/downloads/detail?name=monkey-max_r9.zip&amp;can=2&amp;q=</a> <br><br></td></tr></table><br>
<a name="2031839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> is there a way of installing this without harming the normal monkey install yet ? or without having to create a second monkey folder ? <br><br></td></tr></table><br>
<a name="2031866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well it doesnt "harm" the Monkey install, it just adds to it ;)<br><br>Its just "safer" to make a backup :P<br><br>But no, really wish Monkey had some kind of plug-in system so we could add targets alot quicker and easier. <br><br></td></tr></table><br>
<a name="2031867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah.. I thought this project altered the trans binary or summit, I like to keep all my build tools authentic as mark intended when ever I go messing with stuff I tend to break things lol.<br><br>And yeah I really hope mark sorts a plugin system out for want of a better word. <br><br></td></tr></table><br>
<a name="2031870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I thought this project altered the trans binary or summit <br></div><br><br>It does... you can check out all the code and then recompile trans yourself or you can just use the precompiled binary. <br><br></td></tr></table><br>
<a name="2032716"></a>

<a name="2032718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got the error: mojo not implemented. <br><br>If not, how did you guys convert your Monkey games too Bmax? Or did I miss something obvious here? :)<br><br>btw I notices that when I added the monkey-max svn it MERGED a lot of files - will that be a problem? I assume the intention was for the files to be replaced. <br><br></td></tr></table><br>
<a name="2032729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If not, how did you guys convert your Monkey games too Bmax? Or did I miss something obvious here? :) <br></div><br>It adds a BMAX target to monk. Did you follow the <a href="http://code.google.com/p/monkey-max/wiki/MonkeyMax" target="_blank">instructions here</a> ? <br><br></td></tr></table><br>
<a name="2032759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does that mean mojo are part of it?<br><br>Yes those where the instructions I followed.<br><br>I assume then the svn-merge thing was what caused this error? Has no one but me installed MonkeyMax directly from the svn? <br><br></td></tr></table><br>
<a name="2032786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Has no one but me installed MonkeyMax directly from the svn?  <br></div><br>I just downloaded the file directly, didn't use the svn. Worked fine for me. Maybe you need to get clean copy of monkey to setup also? <br><br></td></tr></table><br>
<a name="2032789"></a>

<a name="2032790"></a>

<a name="2032791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suggest using the zip file, as I'll try to keep the zip file and SVN up-to-date together... Think of the zip as the stable release and the tip of the SVN as WIP.<br><br>Because Mojo is BRL's module we had to alter a file or two to make it work with other targets, so you need to replace instead of merge if using SVN:<br><br><a href="http://code.google.com/p/monkey-max/source/browse/trunk/modules/mojo/mojo.monkey" target="_blank">http://code.google.com/p/monkey-max/source/browse/trunk/modules/mojo/mojo.monkey</a><br><br>^ This is an example of that, if you check BRL's mojo.monkey you see it will only compile offical targets, so we needed to change it to work with non-offical targets. <br><br></td></tr></table><br>
<a name="2032805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, I noticed some issues with slice_string... I don't have a suggested fix yet (since I made some workarounds in my own code instead), but these are the symptoms:<br><br>- Parsing an XML file (with Diddy) where an attribute is empty, i.e. attribute="", results in assigning the entire XML file string to the attribute instead. It probably has something to do with e.g. "value = str[startIndex..endIndex]" in Diddy's XML parser.<br>- Doing "str = str[..count-1]" where count = 1 should result in an empty string, but instead it returns a string of length 1.<br>- Doing "str = str[1..]" on a string of length 1 should result in an empty string, but I get some...strange results instead. I don't recall exactly.<br><br>All in all, slice_string is unfortunately not working properly. But it's pretty easy to work around these issues. (Except for the XML parsing... The easiest fix is to check if the attribute is unreasonably large, and in that case set it to be empty.)<br><br>Great work other than that! One of these days I should look into sound and see if there's anything left to do there. :) <br><br></td></tr></table><br>
<a name="2032901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not the slicing stuff again Orz!!<br><br>I'm also not happy with the arrya resize stuff either, but it works (I think) for simple resizing.<br><br>Oh BTW Karja, do you want to have access to the SVN repository? <br><br></td></tr></table><br>
<a name="2032939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I'd better look into the slicing to spare you some frustrated rage over those never ending problems... :)<br><br>Sure thing, SVN access would be nice! If you'd like, you can add me (karjasoft@...) and I can check in the fixes when I have them ready. <br><br></td></tr></table><br>
<a name="2032977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> SVN access would be nice! <br></div><br><br>Added :)<br><br>And thanks for the help. <br><br></td></tr></table><br>
<a name="2033005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've checked in a couple of fixes for the slicing, and I don't think I've broken anything. ;)<br><br>It seems like my BlitzMax IDE wanted to auto-capitalize a couple of functions, so those unfortunately got checked in as well. But that shouldn't be a problem since BMax isn't case sensitive. <br><br></td></tr></table><br>
<a name="2033007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> From what I've read I am not entirely sure of the state of reflection.<br><br>Anyway, my game uses reflection (will is set up ready to use it when I implement it properly) and I get the following error when I try to build <br><br>Compile Error: Unable to convert from '_Object' to '&lt;unknown&gt;'<br><br>And the line of code in question is the IF line below...<br><pre class=code>Method  m_GetClass:bb_reflection__1Class_1Info(t_o:_Object)
		If(((ThrowableObject)((t_o))) &lt;&gt; ThrowableObject(Null)) Then</pre><br><br>Not a complaint by any means, just wondering if this is meant to work yet :)<br><br>Ta <br><br></td></tr></table><br>
<a name="2033009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry also, is it best to report stuff here, or over at code.google ? <br><br></td></tr></table><br>
<a name="2033040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> is it best to report stuff here, or over at code.google <br></div><br>Either :) If you post it here, least we can have a dialog of the issue.<br><br><div class="quote"> Compile Error: Unable to convert from '_Object' to '&lt;unknown&gt;' <br></div><br>I actually havent tried reflection with MonkeyMax, I thought it might just work since its just Monkey generated code. Can you post the translated Java code?<br><br><br>@Karja - Thanks for taking the time to fix that issue :) <br><br></td></tr></table><br>
<a name="2033031"></a>

<a name="2033038"></a>

<a name="2033039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It seems like my BlitzMax IDE wanted to auto-capitalize a couple of functions, so those unfortunately got checked in as well. But that shouldn't be a problem since BMax isn't case sensitive. <br></div><br>I usually do a diff before I hit commit to make sure that the only changes are the changes I intended.  Easy enough to merge in KDiff3 before committing.  I hate it when IDEs do things I didn't ask them to.  :) <br><br></td></tr></table><br>
<a name="2033101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hows Blitzmax with multi dimensional arrays?<br><br><pre class=code>bb_generation__1P_1M_1Data=[new Int[t_tm_1H],new Int[][0],new Int[0]]</pre><br><br>is causing this error<br><br><div class="quote"> Compile Error: Auto array elements must have identical types<br> <br></div><br><br>which is translated from this Monkey code<br><br><pre class=code>PMData = New Bool[tmH][][]</pre><br><br>(tmH is an Int) <br><br></td></tr></table><br>
<a name="2033102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry also Therevills<br><br><div class="quote"> Can you post the translated Java code? <br></div><br><br>You mean, build for Android and post the code? <br><br></td></tr></table><br>
<a name="2033113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> I really need to re-look at the array stuff in MonkeyMax...<br><br><div class="quote"> You mean, build for Android and post the code?  <br></div><br>Please :) <br><br></td></tr></table><br>
<a name="2033120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @therevills: I really need to re-look at the array stuff in MonkeyMax... <br></div><br>Can I declare an array foo:Int[][][][][][][][][][][][][][][][]? <br><br></td></tr></table><br>
<a name="2033125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Therevills: Ok, will do when I get home :) <br><br></td></tr></table><br>
<a name="2033152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> As for the java code of the reflection problem, I believe it's...<br><br><pre class=code>public bb_reflection_ClassInfo m_GetClass(Object t_o){
		Object t_=t_o;
		if((t_ instanceof ThrowableObject ? (ThrowableObject)t_ : null)!=null){
			return bb_reflection.bb_reflection__classes[10];
		}</pre> <br><br></td></tr></table><br>
<a name="2033180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Raz, I'll have a look on the weekend. Any chance you could quickly put together some runnable code which causes this issue? <br><br></td></tr></table><br>
<a name="2033237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> There seems to be an issue with PlayMusic() in the bmax target. If you are currently playing a music file, and then call a StopMusic() (or any music functions for that matter), and then call PlayMusic() again it will throw and exception access violation. Basically, changing or switching music more than twice will crash it.<br><br>Not sure if this is a BlitzMax issue or not. Doesn't seem to happen in monkey. Any ideas? <br><br></td></tr></table><br>
<a name="2033241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> What happens if you run it in Debug mode, do you get a better error message?<br><br>I guess it might be the StopChannel in PlayMusic:<br><br>In mojo.bmax.bmx, could you try this change:<br>[monkeycode]<br>	Method PlayMusic:Int( path:String, flags:Int )<br>		StopMusic()<br>		channels[MUSIC_CHANNEL].channel = AllocChannel() ' &lt;&lt; NEW LINE HERE<br>		music = LoadSample( path )<br>		If Not music Then Return -1<br>		<br>		PlaySample(music, MUSIC_CHANNEL, flags)<br>		Return 0<br>	EndMethod[/monkeycode] <br><br></td></tr></table><br>
<a name="2033253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks therevills, that definitely fixed it :). <br><br>When running the debug, it threw a "Unhandled Exception attempt..." in the StopChannel() Method. <br><br>The only minor issue now is that there's a slight pause when switching music files (depending on file size). In Bmax, we were able to preload the music files, unfortunately can't do the same in monkey. Any suggestions on this one :)? <br><br></td></tr></table><br>
<a name="2033263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Any chance you could quickly put together some runnable code which causes this issue? <br></div><br><br>Therevills, sure thing, although I think it's literally a case of, if you use reflection the code is included (that is, it's not anything that my code has done). <br><br></td></tr></table><br>
<a name="2033266"></a>

<a name="2033267"></a>

<a name="2033268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Neuro - thats great, I've committed the fix :)<br>I guess to fix the slight delay, is to actually use just a Sound instead Music - maybe or create an extern class to preload the music and use your own commands to play it ;)<br><br>@Raz, dont worry about the example I just added "Import reflection" to the top of mojoTest and found a similar error:<br>  <b>Compile Error: Unable to convert from 'bb_app__1App_1Device' to '_Object'</b><br><br>(Also found that I missed a method in the Surface class too, due to the reflection compiling everything ;)) <br><br></td></tr></table><br>
<a name="2033269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok cool :) <br><br></td></tr></table><br>
<a name="2035039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm unfamiliar with BlitzMax, but would building for this target create a single EXE with all the art assets, sounds, etc, bundled in a single executable?  If so, it may be the perfect solution for me when trying to create PC games with Monkey. <br><br></td></tr></table><br>
<a name="2035041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> That has been exactly my thinking too Ben. Even if it wasn't automatic I know it's possible to pack data in with the a Blitzmax exe so that's what I will be doing <br><br></td></tr></table><br>
<a name="2035042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm unfamiliar with BlitzMax, but would building for this target create a single EXE with all the art assets, sounds, etc, bundled in a single executable? <br></div><br>I believe BlitzMax has this "incbin" feature that can do it but i'm not sure how easy it would be to use that with the export from Monkey. However, i have used the <a href="http://www.smartpacker.nl/smartpackerpro.html" target="_blank">SmartPacker Pro</a> tool can actually do it and works well with BlitzMax executables. <br><br></td></tr></table><br>
<a name="2035054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried the demo of SmartPacker Pro but it didn't work for me.  With BlitzMax being about the same price, if this option made it possible to bundle it all together, that would be awesome - unfortunately my trial of BlitzMax ended ages ago so I can't test it :( <br><br></td></tr></table><br>
<a name="2035044"></a>

<a name="2035046"></a>

<a name="2035047"></a>

<a name="2035048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Neuro is correct that you can use <a href="http://en.wikibooks.org/wiki/BlitzMax/Modules/BASIC/BlitzMax_runtime#Incbin" target="_blank">IncBin</a> to include external files into the EXE in BlitzMax.<br><br>MonkeyMax does not do this for you, but you could alter the translated code and add it yourself. Also when I actually release games to Portals I dont use incbin. <br><br></td></tr></table><br>
<a name="2035055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills<br><br>Do you mean that your leave your assets in a public data folder that anyone could edit when you publish? <br><br></td></tr></table><br>
<a name="2035056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep... also if you want to encourage modding its the way to go. <br><br></td></tr></table><br>
<a name="2035100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Yep... also if you want to encourage modding its the way to go.  <br></div><br>Do you ever use licensed media Therevills? I'm not concerned about packing my own creations but am worried about making licensed music too easily available when I've only licensed it to be used during the game in question. <br><br></td></tr></table><br>
<a name="2035123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I have a problem with multidimensional arrays (arrays of arrays).<br><br>This is my small utility class for arrays:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Strict

Class Arrays&lt;T&gt;
	Private
	Global i:Int, j:Int, k:Int
	Global oldDimX:Int, oldDimY:Int, oldDimZ:Int
	Global dimX:Int, dimY:Int, dimZ:Int
	
	Public
	'==[ 1d ]====
	Function Create1d:T[](x:Int)
		Local a:T[x]
		Return a
	End
	
	Function Resize1d:T[](a:T[], x:Int)
		a = a.Resize(x)
		Return a
	End
	
	Function Copy1d:T[](a:T[])
		dimX = a.Length
		Local arr:T[] = Create1d(dimX)
		For i = 0 Until dimX
			arr[i] = a[i]
		Next
		Return arr
	End
	
	Function Clear1d:T[](a:T[], clrValue:T)
		dimX = a.Length
		For i = 0 Until dimX
			a[x] = clrValue
		Next
	End
	
	
	'==[ 2d ]====
    Function Create2d:T[][](x:Int, y:Int)
        Local a:T[x][]
       
        For i = 0 Until x
            a[i] = New T[y]
        End
     
        Return a
    End
    
    Function Resize2d:T[][](a:T[][], x:Int, y:Int)
		a = a.Resize(x)
		For i = 0 Until x
			a[i] = a[i].Resize(y)
		Next
		Return a
    End
    
    Function Copy2d:T[][](a:T[][])
    	dimX = a.Length
    	dimY = a[0].Length
    	Local arr:T[][] = Create2d(dimX, dimY)
    	For i = 0 Until dimX
    		For j = 0 Until dimY
    			arr[i][j] = a[i][j]
    		Next
    	Next
    	Return arr
    End
    
    Function Clear2d:T[][](a:T[][], clrValue:T)
    	dimX = a.Length
    	dimY = a[0].Length
    	For i = 0 Until dimX
    		For j = 0 Until dimY
    			a[i][j] = clrValue
    		Next
    	Next
    	Return a
    End
    
    '==[ 3d ]====
    Function Create3d:T[][][](x:Int, y:Int, z:Int)
		Local a:T[x][][]
	
		For i = 0 Until x
			a[i] = New T[y][]
			For j = 0 Until y
				a[i][j] = New T[z]
			Next
		Next
		
		Return a
	End
	
	Function Resize3d:T[][][](a:T[][][], x:Int, y:Int, z:Int)
		a = a.Resize(x)
		For i = 0 Until x
			a[i] = a[i].Resize(y)
			For j = 0 Until y
				a[i][j] = a[i][j].Resize(z)
			Next
		Next
		Return a
    End
    
    Function Copy3d:T[][][](a:T[][][])
    	dimX = a.Length
    	dimY = a[0].Length
    	dimZ = a[0][0].Length
    	Local arr:T[][][] = Create3d(dimX, dimY, dimZ)
    	For i = 0 Until dimX
    		For j = 0 Until dimY
    			For k = 0 Until dimZ
    				arr[i][j][k] = a[i][j][k]
    			Next
    		Next
    	Next
    	Return arr
    End
    
    Function Clear3d:T[][][](a:T[][][], clrValue:T)
    	dimX = a.Length
    	dimY = a[0].Length
    	dimZ = a[0][0].Length
    	For i = 0 Until dimX
    		For j = 0 Until dimY
    			For k = 0 Until dimZ
    				a[i][j][k] = clrValue
    			Next
    		Next
    	Next
    	Return a
    End
    
    '==[ 1d Objects ]====
    Function CreateObj1d:T[](x:Int)
    	Local a:T[x]
    	For i = 0 Until x
    		a[i] = New T 
    	Next
    	
    	Return a
    End
    
    Function ResizeObj1d:T[](a:T[], x:Int)
		Local arr:T[]
		oldDimX = a.Length 
				
		arr = Arrays&lt;T&gt;.CreateObj1d(x)		
		
		If x &gt;= oldDimX		
			dimX = oldDimX
		Else
			dimX = x
		End	
		
		For i = 0 Until dimX
			arr[i] = a[i]
		Next
		
		Return arr
    End
    
    Function CopyObj1d:T[](a:T[])
		dimX = a.Length
		Local arr:T[] = CreateObj1d(dimX)
		For i = 0 Until dimX
			arr[i] = a[i]
		Next
		Return arr
	End
    
    Function ClearObj1d:T[](a:T[], clrValue:T)
		dimX = a.Length
		For i = 0 Until dimX
			a[x] = clrValue
		Next
	End
    
    '==[ 2d Objects ]====
    Function CreateObj2d:T[][](x:Int, y:Int)
        Local a:T[x][]
        
        For i = 0 Until x
            a[i] = New T[y]
            For j = 0 Until y
            	a[i][j] = New T
            Next
        End
        
        Return a
    End      
    
    Function ResizeObj2d:T[][](a:T[][], x:Int, y:Int)
    	Local arr:T[][]
  	  	oldDimX = a.Length
   		oldDimY = a[0].Length	
   		
   		arr = Arrays&lt;T&gt;.CreateObj2d(x, y)
   		
   		If x &gt;= oldDimX
   			dimX = oldDimX
   		Else
   			dimX = x
   		End
   		
   		If y &gt; oldDimY
   			dimY = oldDimY
   		Else
   			dimY = y
   		End
   		
   		For i = 0 Until dimX
   			For j = 0 Until dimY
   				arr[i][j] = a[i][j]
   			Next
   		Next
   		
		Return arr
    End   
    
    Function CopyObj2d:T[][](a:T[][])
    	dimX = a.Length
    	dimY = a[0].Length
    	Local arr:T[][] = CreateObj2d(dimX, dimY)
    	For i = 0 Until dimX
    		For j = 0 Until dimY
    			arr[i][j] = a[i][j]
    		Next
    	Next
    	Return arr
    End
    
    Function ClearObj2d:T[][](a:T[][], clrValue:T)
    	dimX = a.Length
    	dimY = a[0].Length
    	For i = 0 Until dimX
    		For j = 0 Until dimY
    			a[i][j] = clrValue
    		Next
    	Next
    	Return a
    End
    
    '==[ 3d Objects ]====
    Function CreateObj3d:T[][][](x:Int, y:Int, z:Int)
		Local a:T[x][][]
	
		For i = 0 Until x
			a[i] = New T[y][]
			For j = 0 Until y
				a[i][j] = New T[z]
				For k = 0 Until z
					a[i][j][k] = New T
				Next
			Next
		Next
		
		Return a
	End  
	
	Function ResizeObj3d:T[][][](a:T[][][], x:Int, y:Int, z:Int)
		Local arr:T[][][]
  	  	oldDimX = a.Length
   		oldDimY = a[0].Length
   		oldDimZ = a[0][0].Length	
   		
   		arr = Arrays&lt;T&gt;.CreateObj3d(x, y, z)
   		
   		If x &gt;= oldDimX 
   			dimX = oldDimX
   		Else
   			dimX = x
   		End 
   		
   		If y &gt;= oldDimY
   			dimY = oldDimY
   		Else
   			dimY = y
   		End

		If z &gt;= oldDimZ
			dimZ = oldDimZ
		Else
			dimZ = z
		End
		
		For i = 0 Until dimX
			For j = 0 Until dimY
				For k = 0 Until dimZ
					arr[i][j][k] = a[i][j][k]
				Next
			Next
		Next
		
		Return arr
    End
    
    Function CopyObj3d:T[][][](a:T[][][])
    	dimX = a.Length
    	dimY = a[0].Length
    	dimZ = a[0][0].Length
    	Local arr:T[][][] = CreateObj3d(dimX, dimY, dimZ)
    	For i = 0 Until dimX
    		For j = 0 Until dimY
    			For k = 0 Until dimZ
    				arr[i][j][k] = a[i][j][k]
    			Next
    		Next
    	Next
    	Return arr
    End
    
    Function ClearObj3d:T[][][](a:T[][][], clrValue:T)
    	dimX = a.Length
    	dimY = a[0].Length
    	dimZ = a[0][0].Length
    	For i = 0 Until dimX
    		For j = 0 Until dimY
    			For k = 0 Until dimZ
    				a[i][j][k] = clrValue
    			Next
    		Next
    	Next
    	Return a
    End
End

' tests
#rem
Class Foo
	Field p1:Int, p2:Int, p3:Int, p4:Int
	Method New()
		p1 = 13
	End
End

Function Main:Int()
    Local arr2d:Int[][] = Arrays&lt;Int&gt;.Create2d(128,64)
    Local tab:Foo[] = Arrays&lt;Foo&gt;.CreateObj1d(10)
    Local tab2d:Foo[][] = Arrays&lt;Foo&gt;.CreateObj2d(10, 10)
    Local tab3d:Foo[][][] = Arrays&lt;Foo&gt;.CreateObj3d(10, 10, 10)
    Print(arr2d[127][63])
    arr2d = Arrays&lt;Int&gt;.Resize2d(arr2d, 10, 10)
    Print(arr2d[9][9])
    Print(tab[9].p1)
    Print(tab2d[9][9].p1)
    Print(tab3d[9][9][9].p1)
    tab3d = Arrays&lt;Foo&gt;.ResizeObj3d(tab3d, 55, 10, 15)
    tab3d[4][9][14].p1 = 14
    Print(tab3d[4][9][14].p1)
    tab = Arrays&lt;Foo&gt;.ResizeObj1d(tab, 15)
    tab2d = Arrays&lt;Foo&gt;.ResizeObj2d(tab2d, 15, 10)
    Print(tab2d[14][9].p1)
    Print(tab[5].p1)
    Local str:String[][][] = Arrays&lt;String&gt;.Create3d(10, 11, 12)
    str[9][10][11] = "Text"
    Print(str[9][10][11]) 
    Return 0
End
#end</textarea><br>This code unfortunately does not work under MonkeyMax(all other targets works):<br><pre class=code>Strict
Import mojo
Import utils.arrays

Class MyApp Extends App
	Field arr2d:Int[][]
	Field printed:Bool = false

	Method OnCreate:Int()
		SetUpdateRate 30
		arr2d = Arrays&lt;Int&gt;.Create2d(5,5)
		arr2d = Arrays&lt;Int&gt;.Clear2d(arr2d, 111)
		Return 0
	end
	
	Method OnLoading:Int()
		Return 0
	end
	
	Method OnSuspend:Int()
		Return 0
	end
	
	Method OnUpdate:Int()
		If printed = False
			Print(arr2d[1][1])
			printed = true
		Endif
		Return 0
	End
	
	Method OnRender:Int()
		Return 0
	End
End

Function Main:Int()
	New MyApp
	Return 0
End</pre><br><br>(Monkey v60, MonkeyMax r9, BlitzMax 1.48) <br><br></td></tr></table><br>
<a name="2035118"></a>

<a name="2035117"></a>

<a name="2035152"></a>

<a name="2035153"></a>

<a name="2035154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Do you ever use licensed media <br></div><br>Yeah, it all depends on the license. In Pirates I had to compress a few sounds as I wasnt allowed to have them outside the game.<br><br><div class="quote"> I have a problem with multidimensional arrays (arrays of arrays). <br></div><br><br>NOOOOOOOOoooooooooo........ :'(<br><br>If you check above, the major issues with MonkeyMax are arrays and reflection. But I currently dont have any time to fix them, hopefully soon. <br><br></td></tr></table><br>
<a name="2035163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, sorry ;) <br><br></td></tr></table><br>
<a name="2035181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some issues i've encountered with MonkeyMax : <br><br>1) Logical operators statements that worked in all the targets in Monkey didn't always work in the BMAX target. Not a huge issue though, just required cleaner statements.<br>2) In my <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=3344" target="_blank">Tevada Trigger</a> game, I used the tiling code for the background grid tiles. The Monkey targets didn't have this issue, but in BMAX it tended to "flicker" occasionally - only on the PC platform though, not Mac.<br>3) I never did got the music loading routine to work right BMAX. We talked about it before in the MonkeyMax thread since Monkey doesn't actually a "LoadMusic" function, everything is streamed from the file itself thus causing a momentary pause if you decide to switch music. This isn't acceptable so i went ahead and just kept one music file playing in Tevada Trigger. <br><br></td></tr></table><br>
<a name="2035188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Outsider, nothing to be sorry about :)<br><br>@Neuro, thanks for that. Which logical operators where you having issues with? And what do you mean with "just required cleaner statements"? <br><br></td></tr></table><br>
<a name="2035653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Neuro, thanks for that. Which logical operators where you having issues with? And what do you mean with "just required cleaner statements"?  <br></div><br>Its been a while since i had that issue, but it was something along the lines of :<br><pre class=code>
local b:Int = 2;
local a:Int = 2;
local c:Int = 1;
If (a=2) and (b=2) and (Not c=2)
 print ("It works");
EndIf  
</pre><br>And which nothing ever prints. However, been trying to reproduce the issue but it actually works now. I'll let you know if i encountered anything else with it. <br><br></td></tr></table><br>
<a name="2035652"></a>

<a name="2035725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it mostly the 2D arrays and special cases where there are problems?  Do standard 1D arrays work fine? <br><br></td></tr></table><br>
<a name="2036177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br>please, try this version of method TransNewArrayExpr$( expr:NewArrayExpr ) from "bmxtranslator.monkey". Now it's should works for multidimensional arrays. <br>(Monkey v60, MonkeyMax r9, BlitzMax 1.48) <br>[monkeycode]Method TransNewArrayExpr$( expr:NewArrayExpr )<br><br>		Local texpr$ = expr.expr.Trans()<br>		'Print "TransNewArrayExpr texpr="+texpr<br>		Local elemTy := ArrayType( expr.exprType ).elemType<br>		'<br>	'	If StringType( elemTy ) Return "bb_std_lang.stringArray"+Bra(texpr)<br>		'		<br>		Local t$ = "[" + texpr + "]"<br>		Local tmp$, i%=0<br>		Local ma? = False<br>		While ArrayType( elemTy )<br>			elemTy = ArrayType( elemTy ).elemType<br>			tmp = t<br>			If i = 0<br>				t = "new " + TransType( elemTy ) + "[]"<br>				t += tmp<br>			Endif<br>			i += 1<br>			ma = True<br>		Wend<br>		' TEST THIS BIT LATER!!!!!!!!!!!!!!!!!!!!!!!!&lt;!&lt;!&gt;!&lt;!&gt;&lt;!<br><br>		If ma<br>			Return t<br>		Else<br>			Return "new " + TransType( elemTy ) + t<br>		End<br>		<br>End[/monkeycode]<br><br>The problem was this:<br>1. array declaration (in the generated bmx code)<br>[monkeycode]Global arr:Int[][] = [New Int[10], New Int[0]]   'was<br>Global arr:Int[][] = New Int[][10]   'should be[/monkeycode]<br><br>2. differences between Monkey and BlitzMax arrays init<br><b>Monkey init array</b><br>[monkeycode]Const x:Int = 10, y:Int = 5, z:Int = 15<br>Global tab:Int[10][][]    '&lt;---<br><br>For Local i:Int = 0 Until x<br>    tab[i] = New Int[y][]    '&lt;---<br>    For Local j:Int = 0 Until y<br>        tab[i][j] = New Int[z]<br>    Next<br>Next[/monkeycode]<br><b>BlitzMax init array</b><br>[bbcode]Const x:Int = 10, y:Int = 5, z:Int = 15<br>Global t:Int[][][10]    '&lt;---<br><br>For Local i:Int=0 Until x<br>	t[i] = New Int[][y]    '&lt;---<br>	For Local j:Int=0 Until y<br>		t[i][j] = New Int[z]<br>	Next	<br>Next	[/bbcode]<br><br>I hope it works now ;)<br><br>Edit: and small test<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Strict
Import mojo

Class MyApp Extends App
	Field x:Int = 10, y:Int = 5, z:Int = 15
	Field arr:Int[10][]
	Field t:Int[100]
	Field tab:Int[10][][]
	
	Method OnCreate:Int()
		SetUpdateRate(60)
		For Local i:Int = 0 Until x
            arr[i] = New Int[5]
        End
        
        arr[9][4] = 11
        Print(arr[9][4])
       
        For Local i:Int = 0 Until x
        	tab[i] = New Int[y][]
        	For Local j:Int = 0 Until y
        		tab[i][j] = New Int[z]
        	Next
        Next
        tab[9][4][14] = 222
        Print(tab[9][4][14])
		Return 0
	End
	
	Method OnUpdate:Int()
		Return 0
	End
	
	Method OnRender:Int()
		Return 0
	End
End


Function Main:Int()
	New MyApp
	Return 0
End</textarea> <br><br></td></tr></table><br>
<a name="2036176"></a>

<a name="2036175"></a>

<a name="2036174"></a>

<a name="2036173"></a>

<a name="2036172"></a>

<a name="2036171"></a>

<a name="2036154"></a>

<a name="2036151"></a>

<a name="2036150"></a>

<a name="2036149"></a>

<a name="2036148"></a>

<a name="2036146"></a>

<a name="2036911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondering, is MonkeyMax still being updated for the latest version of Monkey? Does it even need to be or can we just use the current version with it? <br><br></td></tr></table><br>
<a name="2036912"></a>

<a name="2036913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am going to update it to v63(b) soon, I've got finish my Monkey Touch game by the 30th August, so it'll be after that.<br><br>It'll be interesting to see how slow its going to be with the Write/Read Pixel stuff -_-<br><br><br>And thanks outsider I'll add your changes at that time too :) <br><br></td></tr></table><br>
<a name="2036965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Way ahead of you, therevills :) I just popped in to say thanks to outsider for the fix, and to mention that I've updated MonkeyMax to v63(b) too. <br><br></td></tr></table><br>
<a name="2036995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Way ahead of you <br></div><br><br>Wouldnt be the first time! LOL!<br><br>Great Job! :)<br><br>Hows the Read/Write pixel stuff?<br><br>[Edit]<br><br>I actually can't see your changes which adds Read/Write pixel?<br><br>[Edit2]<br><br>I've just updated to all your new changes, but I was unable to run trans_winnt.exe. Which compiler are you using to compile trans?<br><br>I noticed that your exe is over 2MB in size whereas the official exe is less than 1.5MB...<br><br>[Edit3]<br><br>Just committed a bmax.mojo change which just adds the stubs for Read/Write pixel so at least MonkeyMax compiles if anyone tries to use them ;) <br><br></td></tr></table><br>
<a name="2036977"></a>

<a name="2036978"></a>

<a name="2036979"></a>

<a name="2036980"></a>

<a name="2036988"></a>

<a name="2036989"></a>

<a name="2036991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added code for ReadPixels and WritePixels2. Also added a test example to test these methods (destructableTerrain by NoOdle).<br><br>New download zip added too :)<br><br><a href="http://code.google.com/p/monkey-max/downloads/list" target="_blank">http://code.google.com/p/monkey-max/downloads/list</a> <br><br></td></tr></table><br>
<a name="2036997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm.. I'm using MinGW64 - that might be the issue. Good to know for the next time! Might have to install the 32 bit version.<br><br>And I actually skipped the Read/Write pixel stuff since it looked like one can just use it to Grab from the backbuffer; i.e, not have an alpha=0 background. Thought it was relatively useless in that case, since it would force the masking to be binary, "mask away all black", instead of a smooth and gradual alpha border around sprites. But I'll look at it more thoroughly later. <br><br></td></tr></table><br>
<a name="2037007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm using MinGW64 - that might be the issue <br></div><br><br>Yeah maybe.<br><br><div class="quote"> And I actually skipped the Read/Write pixel stuff since it looked like one can just use it to Grab from the backbuffer <br></div><br><br>I've added it for MonkeyMax and that example, check it out. But now with your work and the stuff I've done today at least MonkeyMax is up-to-date :)<br><br><br>We found a couple more bugs which we need to check out:<br><br>* Casting a string to a bool fails: Local test:Bool = Bool("true")<br>* Mouse clicking works sometimes and doesnt other times, check the Diddy Simple GUI example <br><br></td></tr></table><br>
<a name="2037005"></a>

<a name="2037006"></a>

<a name="2037004"></a>

<a name="2037026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, thanks for new version and Your hard work on MonkeyMax :) I love it.<br><br>PS: I'm working on OpenGLES 1.1 for MonkeyMax. <br><br></td></tr></table><br>
<a name="2037024"></a>

<a name="2037025"></a>

<a name="2037704"></a>

<a name="2037705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzProg</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey there! I'm porting my app to BlitzMax... just found a translation issue<br><br>Top = monkeycoder file<br>Bottom = translated blitzmax file<br><img src="http://familink.blitzspace.com/db/6153YTFA/slight_translation_error.png"><br><br>headlen is the size of the header. This makes my app jump through the replay file data and read wrong data&amp;block size, eventually causing it to crash. Everything work "fine" when I add parenthesis (still having other problems atm, but I didn't investigate yet.) <br><br></td></tr></table><br>
<a name="2037703"></a>

<a name="2037718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm looks like BlitMax's order of precedence is a bit different with the bit shifting...<br><br>[monkeycode]		Local x% = 10<br>		Local y% = 5<br>		Local z% = 100 Shl (x * y)<br>		Print z[/monkeycode]<br><br>Results:<br><pre class=code>
Target   | Result
---------+--------
BlitzMax | 512000
Flash    | 26214400
HTML5    | 26214400
GLFW     | 0
XNA      | 26214400
STDCPP   | 26214400
</pre><br><br>Wonder whats wrong with GLFW too...<br><br>[Edit]<br>Just committed a fix for this, grab the trans.exe from r20. <br><br></td></tr></table><br>
<a name="2037712"></a>

<a name="2037846"></a>

<a name="2037847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzProg</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's another problem ^_^ I was busy fixing my replay desync on my app, had the following issue:<br><br>[monkeycode]hero[2]=initphorj( generate(24,24,New sector([5,2],[0,5,2],50,2,0,0,0)) ,24*getrnd()+24)[/monkeycode]<br>where function "generate" generates a randomized sector using function getrnd()<br><br>In BlitzMax, it seems that 24*getrnd()+24 is evaluated first, causing the whole sector generation to not match. Worked around with:<br><br>[monkeycode]Local tempvar = generate(24,24,New sector([5,2],[0,5,2],50,2,0,0,0))<br>hero[2]=initphorj( tempvar ,24*getrnd()+24)[/monkeycode] <br><br></td></tr></table><br>
<a name="2037922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont think I can fix that one, sorry. IMO I think its actually safer the second way.<br><br>FYI: <a href="http://stackoverflow.com/questions/376278/parameter-evaluation-order-before-a-function-calling-in-c" target="_blank">http://stackoverflow.com/questions/376278/parameter-evaluation-order-before-a-function-calling-in-c</a><br><br><pre class=code>
The following code:

int i=1;
printf("%d %d %d\n", i++, i++, i);

results in

2 1 3 - using g++ 4.2.1 on Linux.i686
1 2 3 - using SunStudio C++ 5.9 on Linux.i686
2 1 3 - using g++ 4.2.1 on SunOS.x86pc
1 2 3 - using SunStudio C++ 5.9 on SunOS.x86pc
1 2 3 - using g++ 4.2.1 on SunOS.sun4u
1 2 3 - using SunStudio C++ 5.9 on SunOS.sun4u
</pre><br><br>So I would say its bad practice to rely on a parameter for another parameter. <br><br></td></tr></table><br>
<a name="2037905"></a>

<a name="2037906"></a>

<a name="2037903"></a>

<a name="2037898"></a>

<a name="2037899"></a>

<a name="2037900"></a>

<a name="2037897"></a>

<a name="2037923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would be dedicating an entire line to calling getrnd() so that you can guarantee nothing else is interfering with it. <br><br></td></tr></table><br>
<a name="2038004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzProg</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright then, thanks. Yes, the problem was solved this way. :)<br><br>I'm already so much grateful for this target, it's working so well. I ported this game to monkeycoder, and using BlitzMax Target have it run at about three times the speed. So I'm doing my bit to contribute ^_^<br><br>So, How about this? I very frequently get memory access violation because of this in my game somehow. I don't know why it happens (as in: why it tries to retrieve a field from a null object) but it happens at the same frame each time.<br><br>Debug screenshot. As you can see from the fields and the code, something is wrong here.<br><img src="http://familink.blitzspace.com/db/P3QROCIP/mem_violation_debug.png"><br><br>Execution always causes this glitch at the same time during the replay of the gameplay.<br><img src="http://familink.blitzspace.com/db/G7EBQ1BI/mem_violation.png"> <br><br></td></tr></table><br>
<a name="2038036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzProg</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually it's somewhat a more general problem, also got that thing to occur at the same frame somewhere else, when a bomb explode in my game.<br><br><img src="http://familink.blitzspace.com/db/2YMIGOBY/memory_access_violation2.png"><br><br>It happens when a bomb (with a countdown sound) explodes and get deleted from the game. It's strange it doesn't happen with all bombs tho... <br><br></td></tr></table><br>
<a name="2038044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any chance you could put together an example which causes the crash? <br><br></td></tr></table><br>
<a name="2038119"></a>

<a name="2038120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzProg</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I figure out why there is the crash, I'll post a code... in the meanwhile I have no idea yet why it does this, so I added a check that prevents accessing the fields to let the game continue running. <br><br></td></tr></table><br>
<a name="2039264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jjsonick</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is great stuff, therevills.  I have MonkeyMax converted projects compiling from Windows and Mac BlitzMax now.<br><br>I'm okay with working with a Monkey v63 so I can use MonkeyMax for now, but I just ask, along with looking into the apparently known 2-D array issues discussed above (haven't tested that myself yet), that when Mark implements his proposed filestream module that that be mirrored in MonkeyMax. Thanks for all your work on this. <br><br></td></tr></table><br>
<a name="2039295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re: 2D Arrays: Hopefully these have been fixed.<br><br>Re: v63+ versions, due to what Mark has written in his latest blog about his thoughts on how to add new targets I don't think its worth spending too much time on MonkeyMax as it might all have to change shortly in the future.<br><br>So you could say, for me at least, MonkeyMax is on hold. <br><br></td></tr></table><br>
<a name="2039316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jjsonick</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> 2D Arrays: Great!<br><br>Re: v63+: After reading Mark's blog post, I see what you mean.  Sounds like exciting changes for the adding-targets process. <br><br></td></tr></table><br>
<a name="2039650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Re: 2D Arrays: Hopefully these have been fixed. <br></div><br><br>Would this maybe include 3D arrays too? :D (e.g. Local tDate:Int[][][]) <br><br></td></tr></table><br>
<a name="2039665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >byo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, therevills.<br><br>Is there a way for me to make it work with v66?<br>I'd love to be able to use it with BMax with the latest version.<br><br>Is that too much work? :-)<br><br>Thank you for such an amazing target. <br><br></td></tr></table><br>
<a name="2039685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> @raz, I havent tested 3D arrays, but Im pretty sure some of the slicing methods will not work.<br><br>@byo, it shouldnt be too much work although the new brl modules (async stuff) wouldnt be included if that is what you are after. <br><br></td></tr></table><br>
<a name="2039686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >byo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills: I don't mind the async stuff for now since I'm a beginner. ;-) I just wanted to be able to use Diddy while testing the new monkey version. I feel that I'm helping test the software for bugs using the latest version. Thank you such an amazing work. <br><br></td></tr></table><br>
<a name="2039691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay that was painful to update MonkeyMax to v66!!!<br><br>The mojoTest works at least, havent really tested too much else as it took far to long to debug issues. <br><br></td></tr></table><br>
<a name="2039705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >byo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's awesome! I will test everything I can and post any issues I find.<br>Thank you. <br><br></td></tr></table><br>
<a name="2039761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just again saying thank you for this, just got Ninjah working via BlitzMax using incbin to embed my licensed music as well :D <br><br></td></tr></table><br>
<a name="2039819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >byo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree. Thank you. Translation is working great. :-) <br><br></td></tr></table><br>
<a name="2039964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry me again!<br><br>Does anyone have any experience running a Monkey produced BlitzMax game on Linux? I tried it last night and I think I got maybe 0.1 fps (even just displaying a single graphic in the middle of the screen). When coding a BlitzMax game natively and running it on Linux, it's 60fps.<br><br>Ta :) <br><br></td></tr></table><br>
<a name="2040028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't use Linux, but that sounds very strange. I gather the same generated bmx file runs fine in Windows/MacOS? <br><br></td></tr></table><br>
<a name="2040070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Haven't been able to check MacOS yet, but yeah in Windows it's absolutely fine (even on a quite old laptop). I'll do some snooping tonight/at the weekend and try to help work out where the slow down is. <br><br></td></tr></table><br>
<a name="2040304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok so, I've been messing around with this and it seems that calling MusicState() is the cause for the really low frame rate.<br><br>Removing this causes the game to run at a more respectable rate :)<br><br>I'm aware that sound support with BlitzMax in Linux is patchy at best, so I am not sure what can be done here really! <br><br></td></tr></table><br>
<a name="2040303"></a>

<a name="2040307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, all that MusicState() does is call the BlitzMax command ChannelPlaying(), I could wrap the MusicState with a preprocessor check to see if the target is Linux then return -1 instead of doing the BlitzMax command.<br><br>What do you think? <br><br></td></tr></table><br>
<a name="2040310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fixing this issue properly could help many people.<br><br>raz, how many times are you calling MusicState, every update or more? <br><br>If you are able, I would try to patch in either ALSA or Pulse driver modules as documented in linux threads on bb.com. <br><br></td></tr></table><br>
<a name="2040318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Fixing this issue properly could help many people. <br></div><br>I don't think MonkeyMax can fix it, I suggested the preprocessor so it kind of matches what Monkey does for Flash with MusicState:<br><br>"Flash : ChannelRate does nothing. ChannelState and MusicState always returns -1, ie: 'unknown'" <br><br></td></tr></table><br>
<a name="2040328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skid: Calling it every frame to see if the music has stopped playing (and then select a random alternative track)<br><br>Therevills: I'll give the audio drivers Skid mentions a go first and then let you know how I get on. I think this issue is beyond MonkeyMax though, so it shouldn't really be anything you need to fix. <br><br></td></tr></table><br>
<a name="2040340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Calling it every frame to see if the music has stopped playing  <br></div><br><br>Could you keep a map of the music length and have a counter time down? Once the counter reaches zero then change tracks?<br><br><div class="quote"> I think this issue is beyond MonkeyMax though, so it shouldn't really be anything you need to fix.  <br></div><br><br>Yeah me too... but if this is a common issue with Linux I think it might be safer not to allow it for that target. <br><br></td></tr></table><br>
<a name="2040333"></a>

<a name="2040335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Could you keep a map of the music length and have a counter time down? Once the counter reaches zero then change tracks? <br></div><br><br>Yeah I could do this, but I suspect once I get the sound working properly, the ChannelState() call will actually work just fine.<br><br>I'll give Skid's suggestions a go and see how I get on. <br><br></td></tr></table><br>
<a name="2040356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm struggling to rebuild the modules at the moment (the process is hanging on freeaudioglue.cpp), but that said if I do what is suggested here<br><br><a href="http://blitzbasic.com/Community/posts.php?topic=98035" target="_blank">http://blitzbasic.com/Community/posts.php?topic=98035</a><br><br>and run<br><br><pre class=code>padsp ./MonkeyGame</pre><br><br>everything works fine, sound and music <br><br></td></tr></table><br>
<a name="2040378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzProg</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> From version 63, if this wasn't corrected already:<br><br>[monkeycode]<br>Import mojo<br><br>Function Main()<br>	Local i<br>	<br>	Print "ONE!"<br>	<br>	For i=1 To test()<br>		Print "THREE!"<br>	Next<br>	<br>	Print "FOUR!"<br>	New BP()<br>End Function<br><br>Function test()<br>	Print "TWO!"<br>	Return 5<br>End Function<br><br>Class BP Extends App<br>End Class<br>[/monkeycode]<br><br>MonkeyCoder<br><pre class=code>
ONE!
TWO!
THREE!
TWO!
THREE!
TWO!
THREE!
TWO!
THREE!
TWO!
THREE!
TWO!
FOUR!
</pre><br><br>BlitzMax<br><pre class=code>
ONE!
TWO!
THREE!
THREE!
THREE!
THREE!
THREE!
FOUR!
</pre> <br><br></td></tr></table><br>
<a name="2040381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry BlitzProg but that's unfixable plus I would never do that in a For loop, you are asking for trouble ;) <br><br></td></tr></table><br>
<a name="2040391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzProg</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> This was just in case. I'm never trying this again either... :D <br><br></td></tr></table><br>
<a name="2040623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just been messing around with some things that weren't working before and they seem to work now! :)<br><br>3d Arrays of ints and objects are fine.<br><br>2d arrays holding different types of objects (that both extend the same type of object) now work too!<br><br>This is amazing, it means I can carry on working on Perling knowing I can release it on PC now :D <br><br></td></tr></table><br>
<a name="2040625"></a>

<a name="2040626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gerry Quinn</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> The for loop thing is basically just Monkey not doing an optimisation that Max does.  (And strictly-speaking, it's not actually an optimisation unless either 'Print' in Max is specified as a debug-only command, or Max is specified to always call such a function in a for loop only once whatever it is.)<br><br>If the latter is true, you could always translate it in the same way as Max does. <br><br></td></tr></table><br>
<a name="2041048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not entirely sure but.... I think MonkeyMax struggles with the following code (which I use as a more elegant way of doing lots of If/ElseIfs<br><br><pre class=code>
Local i:Float = 0.1
Local testLimit:Float = 0.2
Local testLimitAnother:Float = 0.4

Select True
Case i &gt; testLimit

Case i &gt; testLimitAnother

End</pre><br><br>I think "Case i &gt; testLimit" is translating to the following<br><br><pre class=code>If(t_ = t_i &gt; t_land_1Low) Then</pre><br>which isn't an error, but produces incorrect results. <br><br></td></tr></table><br>
<a name="2041046"></a>

<a name="2041047"></a>

<a name="2041054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems that I found a bug. BlitzMax doesn't support JoyX, JoyY and JoyZ indexes, only ports (units?). Therefore, probable fix for it:<br><br>[bbcode]<br>Method JoyX:Int(index:Int)<br>	Return Pub.FreeJoy.JoyX(index Shr 4)<br>EndMethod<br><br>Method JoyY:Int(index:Int)<br>	Return Pub.FreeJoy.JoyY(index Shr 4)<br>EndMethod<br><br>Method JoyZ:Int( index:Int )<br>	Return Pub.FreeJoy.JoyZ(index Shr 4)<br>EndMethod<br>[/bbcode] <br><br></td></tr></table><br>
<a name="2041053"></a>

<a name="2041079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, it seems there is another bug. If you try to call SetChannelVolume after StopChannel you will get null pointer exception. SetChannelVolume for stopped channels works fine on all Monkey targets, but crashes in MonkeyMax.<br><br>Fix. Remove lines chan.channel=null and chan.sample=null in StopChannel and get following code:<br><pre class=code>
Method StopChannel( channel:Int )
	Local chan:gxtkChannel = channels[channel]
		
	If chan.state &lt;&gt; 0
		chan.channel.Stop()
		chan.state=0
	EndIf
EndMethod
</pre><br><br>For example, if you look in to html5 native code you can will see the following:<br><pre class=code>
gxtkAudio.prototype.StopChannel=function( channel ){
	var chan=this.channels[channel];
	
	if( chan.state!=0 ){
		chan.audio.pause();
		chan.state=0;
	}
}
</pre><br>This code doesn't contain chan.channel = null and chan.sample = null <br><br></td></tr></table><br>
<a name="2041078"></a>

<a name="2041077"></a>

<a name="2041076"></a>

<a name="2041075"></a>

<a name="2041074"></a>

<a name="2041085"></a>

<a name="2041086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> And one small fix for bmxtranslator :)<br><br>Replace line:<br><pre class=code>Case "pow" Return Bra(arg0)+"^"+arg1</pre><br>by:<br><pre class=code>Case "pow" Return "(" + Bra(arg0) + "^" + Bra(arg1) + ")"</pre><br>Otherwise the following code gives incorrect results:<br><pre class=code>
'incorrect results for both cases
Pow(2, 10 * (t - 1))
-Pow(2, -10 * t) + 1
</pre> <br><br></td></tr></table><br>
<a name="2041084"></a>

<a name="2041102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> @devolonter, would you like SVN access, so you can add these fixes yourself? If so send me your gmail account and I'll add you to the MonkeyMax project :) <br><br></td></tr></table><br>
<a name="2041106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ewww SVN. ;) <br><br></td></tr></table><br>
<a name="2041108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills I would be glad to get SVN access :) Email is in my profile. Thanks! <br><br></td></tr></table><br>
<a name="2041136"></a>

<a name="2041137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Ewww SVN. ;)  <br></div><br>You love it ;P<br><br><div class="quote"> I would be glad to get SVN access :)  <br></div><br>Cool! Just added you as a Project committers :) Now go break some things ;)<br><br><br>This has really turned into the community target, quite a few people have really helped to get it to where it is today :D <br><br></td></tr></table><br>
<a name="2041138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice! I just commited all fixes that I suggested earlier. But I didn't rebuild trans_winnt.exe<br><br><div class="quote"> This has really turned into the community target, quite a few people have really helped to get it to where it is today :D <br></div><br>It's realy great! :) <br><br></td></tr></table><br>
<a name="2041205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know BlitzMax has plenty of file IO related commands, so I'm wondering how easy would it be to support the OS module?<br><br>I wish I could contribute more actually seeing as I am using this target more and more! <br><br></td></tr></table><br>
<a name="2041211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the looks of it, the OS module was based on the BlitzMax codes which means most of the commands are native already. So all OS functions work exactly the same except for...<br><br><pre class=code>' No BlitzMax implementation
'
' AppPath : String ()
' Execute : Int ( cmd:String )
' ExitApp : Int ( retcode:Int )
' GetEnv : String ( name:String )
' HostOS : String ()
' LoadDir : String[] ( path:String, recursive:Bool, hidden:Bool )
'
' Implementation but different?
'
' CreateDir : Int ( path:String ) - NATIVE but has second recursive=False option
' ExitApp : Int ( retcode:Int )   - End command?
' GetEnv : String ( name:String ) - _GetEnv ?
' LoadDir : String[] ( path:String ) - NATIVE but has second skipdots=True option
'
' Maybe implemented?
'
' SetEnv : Int ( name:String, value:String ) - does _SetEnv exist ?</pre> <br><br></td></tr></table><br>
<a name="2041210"></a>

<a name="2041227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I think I managed it!<br><br>updated modules/os/os.monkey changing<br><br><pre class=code>#end</pre><br><br>to<br><br><pre class=code>#elseif TARGET="bmax"

	Import "native/os.bmx"

	Extern

	Function HostOS$() = "BmaxHostOS"
	Function AppPath$() = "BmaxAppPath"
	Function AppArgs$[]() = "BMaxAppArgs"
	Function RealPath$( path$ ) = "RealPath"
	Function FileType( path$ ) = "FileType"
	Function FileSize( path$ ) = "FileSize"
	Function FileTime( path$ ) = "FileTime"
	Function CopyFile( src$,dst$ ) = "CopyFile"
	Function DeleteFile( path$ ) = "DeleteFile"
	
	Function SaveString( str$,path$ ) = "SaveString"
	Function LoadDir$[]( path$ ) = "LoadDir"
	Function CreateDir( path$ ) = "CreateDir"
	Function DeleteDir( path$ ) = "DeleteDir"
	Function ChangeDir( path$ ) = "ChangeDir"
	Function CurrentDir$() = "CurrentDir"
	Function SetEnv( name$,value$ ) = "BMaxSetEnv"
	Function GetEnv$( name$ ) = "getenv_"
	Function Execute( cmd$ , silent = True ) = "BmaxExecute"
	Function ExitApp( retcode = 0 ) = "BmaxEnd"

	Public
	

#end</pre><br><br>added modules/os/native/os.bmx<br><br><pre class=code>Function BmaxEnd(ret:Int)
	End
EndFunction

Function BmaxAppPath$()
	Return AppDir
EndFunction

?Win32

Function BMaxExecute( tCommand:String, tSilent:Int = True )

	' start doesnt work unless called via a CMD prompt (env var issue?)
	'If tSilent = True
	'	system_( "start "+tCommand )
	'Else
		system_( tCommand )
	'EndIf
	
EndFunction	

?Linux

Function BMaxExecute( tCommand:String, tSilent:Int = True )

	If tSilent = True
		system_( tCommand+" &amp;" )
	Else
		system_( tCommand )
	EndIf
	
EndFunction

?


Function BMaxAppArgs:String[]()
	Return AppArgs
EndFunction

Function BmaxSetEnv( name$, value$ )
	putenv_ name+"="+value
EndFunction

Function BmaxHostOS$()
?Win32
	Return "win32"
?MacOS
	Return "macos"
?Linux
	Return "linux"
?
EndFunction
</pre><br><br>it works as expected (well, as I expect!) but it'd be cool if someone could check it for me <br><br></td></tr></table><br>
<a name="2041242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks good to me! If I knew it was that easy I would have done it ages ago :P<br><br>Good job! I've added it to MonkeyMax :)<br><br>(And I've added you (Raz) to the SVN project using your email in your profile) <br><br></td></tr></table><br>
<a name="2046547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> The function BMaxEnd does not return to the OS the passed return errorlevel value. Maybe this could be changed? If you compile trans, as instance, wich uses return code to inform on compilation errors, it would fail to provide a proper errorlevel upon execution. It's a minnor thing and I don't know wich is the appropriate way to solve this on BlitzMax (can't remember) but as it is an inconsitency, I thought I had to mention it.<br>I'm sure the BMK source code does provide errorlevel on execution completion, so maybe someone could take a look to that source code? (Not at my computer right now) <br><br></td></tr></table><br>
<a name="2047578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> My XML lib uses String.FromChars and this seemed to be the only thing monkeymax complain about. So......<br><br>I have a small tweak to add String.FromChars<br><br>in monkey_folder/modules/trans/bmxtranslator.monkey, near line 577 add:<br><pre class=code>Case "fromchars" Return "string_from_chars" + Bra(arg0)</pre><br><br>in monkey_folder/modules/monkey/native/lang.bmx add the following function:<br><pre class=code>Function string_from_chars:String(chars:Int[])
	' --- this will replicate monkeys FromChars string function ---
	'seems like it would be the fastest option to build a short array and then convert it in 1 call
	'build temp short array
	Local converted:Short[chars.length]
	For Local index:Int = 0 Until chars.length
		converted[index] = Short(chars[index])
	Next
	
	'convert and return short array
	Return String.FromShorts(converted, converted.length)
End Function</pre> <br><br></td></tr></table><br>
<a name="2047577"></a>

<a name="2047977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will the MonkeyMax target be compatible with V67d soon? <br><br></td></tr></table><br>
<a name="2047982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't even looked into the new target system... and Im pretty busy in my own projects. <br><br></td></tr></table><br>
<a name="2047990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks for the info. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
