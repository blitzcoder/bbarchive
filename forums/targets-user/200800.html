<!DOCTYPE html><html lang="en" ><head ><title >Nintendo DS target</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Nintendo DS target</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=523" >User Targets</a>/<a href="#bottom" >Nintendo DS target</a><br><br>
<a name="2006384"></a>

<a name="2006385"></a>

<a name="2006386"></a>

<a name="2006437"></a>

<a name="2007439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.mediafire.com/?gvc9ktfen23vwam" target="_blank">http://www.mediafire.com/?gvc9ktfen23vwam</a><br><br>ask any questions here<br><br>(you can only use PNG images that are power of 2)<br><br>(you must install, mingw,devkitpro,and nitroengine for DS) <br><br></td></tr></table><br>
<a name="2006397"></a>

<a name="2006398"></a>

<a name="2006399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you should modify mojo.nds.cpp with your own name and license detail. <br><br>And perhaps look at including and extending the gxtkObject rather than duplicate Mark's implementation (which as far as I'm aware is not free)? <br><br></td></tr></table><br>
<a name="2006403"></a>

<a name="2006404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, will do<br><br>I dont  know much about C++ <br>How would I include the gxtkObject without giving away its source? should I compile it and then include it? How would I do that? <br><br></td></tr></table><br>
<a name="2006413"></a>

<a name="2006414"></a>

<a name="2006415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It may not be possible but I was thinking you could do something like the following:<br><br><pre class=code>
#include "mojo.glfw.cpp"

class ndsApp : public gxtkApp{

... add / override only nds specific bits to your class, inherit everything else ...

</pre><br><br>and then have the nds target create a ndsApp instead of a gxtkApp. <br><br>But I suspect if Mark is OK with your current approach you should be fine... <br><br></td></tr></table><br>
<a name="2007435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ENAY</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Slenkar,<br><br>Just noticed your posts here:-<br><br><a href="http://devkitpro.org/viewtopic.php?f=6&amp;t=2687" target="_blank">http://devkitpro.org/viewtopic.php?f=6&amp;t=2687</a><br><br>and here:-<br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=800" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=800</a><br><br>and realised it's the same you :)<br><br>Didn't realise you were also into DS coding. Good luck with that, will be interesting to see what you come up with. Although as Skid and people on the other forum are saying, I presume it's ok for you to do this conversion? <br><br></td></tr></table><br>
<a name="2007437"></a>

<a name="2007438"></a>

<a name="2007440"></a>

<a name="2007441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> yesh same bloke<br><br>It should be ok, i guess, no-one has asked me to stop.<br><br>everything works except sound BTW<br><br>just make sure you only use power of 2 images<br><br>millisecs() doesnt work i dont think... <br><br></td></tr></table><br>
<a name="2013185"></a>

<a name="2013186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks cool but compiling trans errors out here with an "Identifier 'transCode' not found" message in line 71 of nds.monkey. <br><br></td></tr></table><br>
<a name="2013248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh yes, all you have to do is change 'app.transCode' to 'transCode'<br><br>the only problem is that it has a memory leak, when you start using 'New' it eventually crashes.<br>WHen you create an app that just draws to the screen and doesnt use 'New' it doesnt crash.<br><br>Its most unfortunate, maybe if a smarter person than myself could take a look at the code they might be able to fix it.<br><br>I put gcCollect in the code but to no avail. <br><br></td></tr></table><br>
<a name="2013244"></a>

<a name="2013278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, I got it working. I compiled a small test game, copied the nds file onto my flash card and ran it on the DS. Just like that. I dig it :D I guess it can't be used for commercial purposes but it's still pretty dang cool!<br><br>A few things I noticed:<br><br>The update rate is capped at 30 fps(?). <br><br>Rendering needs to be done in reverse order. <br><br>The DS seems pretty feeble in the memory department; if I load more than three 256x256 textures then all remaining textures go white. So if you want to do a game on this device it looks like you'd need to do some hefty tiling. <br><br></td></tr></table><br>
<a name="2013277"></a>

<a name="2013283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh there is another addition, <br>in:Monkey\modules\mojo\native<br>edit mojo.nds.cpp<br>so that <br>g_depth++;<br>is at the bottom of all drawsurface commands.<br>then the drawing order will be fixed.<br><br>yes I didnt bother fixing the update rate because of the memory leak issue :)<br><br>BTW do you have a DSi or a DS?<br>The DS only has 4MB of RAM whereas the DSi has about 16 I think,<br><br>maybe the additional RAM is needed to run a game? <br><br></td></tr></table><br>
<a name="2013282"></a>

<a name="2013281"></a>

<a name="2013280"></a>

<a name="2013305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeaBoy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is very cool, I've started to use devkitPro for NDS development but I would love to be able to develop for the NDS with an 'official' indie SDK.<br><br>I wonder why Nintendo haven't released one, although I have been living under a rock for a while *lol*<br><br>Keep up the good work! <br><br></td></tr></table><br>
<a name="2013310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's a regular DS, and yeah I saw it only has 512kb of texture memory so no wonder :P The texture converter is set in nds.monkey to 32 bit rgba so I tried to change the flag to 4 bit, but all that gave me was garbled gfx unfortunately :/ <br><br></td></tr></table><br>
<a name="2014672"></a>

<a name="2014673"></a>

<a name="2014675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok I created a little space invaders app and It creates a bullet every frame<br>so 30 bullets are being created per second.<br>Its been running for a while with no crash, so its not a memory leak, <br><br>I think it was me trying to access a lot of objects from a stringmap and monkey was creating NEW strings in the generated C++ code, this must have outgrown the 4MB's of RAM and caused the crash, <br><br>the garbage collection doesnt collect all garbage every frame (I think)<br><br>so this could be why it takes 4-5 seconds of running time until the RAM ran out,<br><br>well thats my best guess <br><br></td></tr></table><br>
<a name="2031025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> are string stored in a heap or stack? maybe the max size is too big for the nds <br><br></td></tr></table><br>
<a name="2050369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> May someone please re-upload this? I have a DS I know this target won't work with the newer versions of monkey, and honestly I can make a small adjustment to bring this more up to date depending on the language it's written in, what is it? Anything like C++ or VB6? Those are my two favorite languages apart from monkey. =] <br><br></td></tr></table><br>
<a name="2050378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its C++<br><br>I did some coding on the DS in C for a laugh and ran into a possible reason it could be crashing, <br><br>The DS has a tiny stack, so when you create a new struct or thing on the stack (equivalent of local variable) and its too big it will crash.<br><br>Ill try to re-up it later as its not on this pc <br><br></td></tr></table><br>
<a name="2050981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you forget, or you can't find the target on your computer? Sorry... I'm a little anxious but I don't want to rush you. <br><br></td></tr></table><br>
<a name="2050984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh ok sorry i forget, tomorrow i will do it <br><br></td></tr></table><br>
<a name="2051233"></a>

<a name="2051236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> sorry for the delay<br>does this work?<br><a href="https://www.dropbox.com/sh/xv89fn6wp93ok1g/mpDbZ9SP1Z/nds" target="_blank">https://www.dropbox.com/sh/xv89fn6wp93ok1g/mpDbZ9SP1Z/nds</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
