<!DOCTYPE html><html lang="en" ><head ><title >Warpy's Blitz on Rails server!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Warpy's Blitz on Rails server!</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Warpy's Blitz on Rails server!</a><br><br>
<a name="961395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> As part of my ongoing quest to do horrible things to blitzmax, I've written a ruby on rails-style server.<br>You just include "server.bmx", call start_server and run_server, and off it goes!<br>It has a rails-style routing syntax, so you can add routes which get mapped to particular controllers and views.<br><br>An example of a route is<br>	route.Create "/blog/:postid/:posttitle",["controller =&gt; blog", "action =&gt; view"]<br>	<br>The first argument is the route pattern - things with a colon in front match any text, and you can also use regexps by putting a \ in front of them.<br>The second argument is an extra set of labels you can define to help the system decide where to send the request. Every request needs at least a "controller" and an "action" label.<br><br>Once a route has been mapped, the system uses reflection to find the type whose name corresponds to the controller label, and a function, or view, belonging to that type whose name is the same as the action label.<br>That function should take one argument, of type HTTPSession.<br><br>A view's job is to do whatever action was requested, then provide the content of the page. The action part is up to you, but the rendering can either be done by directly calling s.render with the text you want, or by using render_template<br>All the labels from the routing phase are stored in the HTTPSession's "labels" map.<br><br>render_template takes one argument, the name of a .bhtml file (without the extension) found in the templates folder. It then fills in the template using the following ruby-like syntax:<br>Something of the form &lt;%= label %&gt; inserts the value of the given label, found in the HTTPSession's "info" map.<br>You can also do things like &lt;%= object.name %&gt; to access an object's fields (though you have to insert it into the info map)<br><br>There's only one control function so far, and that's &lt;% for OBJECT in COLLECTION %&gt; ..... &lt;% endfor %&gt;.<br>It works just like an EachIn in blitzmax, and should work with any collection.<br><br>Have a poke around the example, it does the basic add/view/list/delete stuff.<br><br><a href="http://somethingorotherwhatever.com/httpserver.zip" target="_blank">Enjoy!</a> <br><br></td></tr></table><br>
<a name="961396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> PS I couldn't have even got started without James L Boyd's <a href="/codearcs.php?code=2482" target="_blank">blitzserve 2</a>, and in order to compile it you need grable's modified reflection.bmx found <a href="/posts.php?topic=84918" target="_blank">here</a> <br><br></td></tr></table><br>
<a name="961660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm a bit annoyed nobody's noticed this, because it's really really clever.<br><br>Anyway, I've worked on it more today and the templating thing does a lot more, I've integrated my list filtering algorithm from a while ago, and all sorts of other things.<br><br>I've written a really simple blog app to test it out, included in the zip. <br><br></td></tr></table><br>
<a name="961689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think some people may just be lost on exactly what it does and what it would be used for...? <br><br></td></tr></table><br>
<a name="961716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm a bit annoyed nobody's noticed this, because it's really really clever. <br></div><br>Heh. Good luck with that!<br><br>Remember, BlitzMax is a games programming language. You might find really clever things will not be of great interest ;-) <br><br></td></tr></table><br>
<a name="961735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Neat, although I can't imagine I'd have any practical use for such a thing when I've got Ruby here (and oh how awesome Ruby is- seriously, Ruby is the most awesome of awesome languages).  I'll probably fiddle with the source code at the most before dropping it the next time I forget what I'm doing (interval is roughly 8 hours between each bout of horrifying confusion).<br><br><div class="quote"> Remember, BlitzMax is a games programming language. You might find really clever things will not be of great interest ;-) <br></div><br>Yeah, unfortunately, doing horrible things to BlitzMax isn't very high-up on the interest radar for most people.  For example, I tried writing new classes/types at runtime.  Interest?  <i>Nada.</i> <br><br></td></tr></table><br>
<a name="961745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I'm a bit annoyed nobody's noticed this, because it's really really clever. <br> <br></div><br><br>Well, consider that someone (like me) doesn't know what exactly is 'Ruby' or what is a 'route'...I understand you have made up a 'server' with a 'special language-syntax-techology' like ruby-on-rails...<br>So I can say 'oh! great!' but to be honest I don't understand exactly what you have done (<u>not your fault of course, but mine!</u> Maybe after reading the source code I found it very 'inspiring' and useful for other purpose and - then - I can really say 'Wow, this is great!'<br><br>So at the moment I can only say thanks for sharing! <br><br></td></tr></table><br>
<a name="961749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I'm not annoyed _with_ anyone, I was just hoping for a pat on the back :P<br><br>I'm carrying on on my own little programming odyssey anyway. I've just written a generic JSON serialiser to have permanent storage. Choosing the right tool for the job is clearly not my modus operandi. <br><br></td></tr></table><br>
<a name="961787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Warpy, I think it's very clever and plan to check it out. Keep it coming. <br><br></td></tr></table><br>
<a name="961830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I was just hoping for a pat on the back<br> <br></div><br>Well, I thought your server code was really rather special. <b>:P</b> <br><br></td></tr></table><br>
<a name="961847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I was just hoping for a pat on the back <br></div>We can get puki lubed up and send him over if you want? <br><br></td></tr></table><br>
<a name="961963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> We can get puki lubed up and send him over if you want?  <br></div>I'm suing you for acute mental and emotional distress. <br><br></td></tr></table><br>
<a name="961987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> you mean i can serve a website from my pc ?<br><br>You could create an online example for people to surf to.To generate more interest.<br><br>I take it, the website cant be built with blitzmax code, it must be built with this 'ruby' like language?<br><br><br>Also I ran the blog.exe and it asked to be unblocked which i did. Then it doesnt do anything when double-clicked, same thing happens when I double click on example.exe. <br><br></td></tr></table><br>
<a name="962016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> you mean i can serve a website from my pc ? <br></div><br><br>Anyone can do that, provided that:<br>- Your ISP allows incoming connections to port 80 (otherwise you'd be forced to pick a non-standard port), <br>- Your ISP's TOS allows you to run a server (many explicitely prohibit this)<br>- Your firewall/router knows to forward unsollicited requests for port 80 to your actual PC<br>- Your windows firewall permits incoming requests on port 80<br>- You feel confident that the server software is secure enough not to have people break out of its constraints and gain access to other files on your PC.<br><br>(Even IIS and Apache have been known to 'leak' through various exploits over the years) <br><br></td></tr></table><br>
<a name="962018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> its probably not in the TOS :) not sure if port 80 can accept connections either <br><br></td></tr></table><br>
<a name="962070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Paxo - yes, it's an http server to serve a website, but not in the traditional just-serving-files or even cgi sense. It uses a 'model - view - controller' approach, which roughly means it maps urls to blitz types and their methods. It doesn't use any ruby, it's pure bmax, but it is inspired by Ruby on Rails, which is the famous package doing the same thing in ruby.<br><br>If you run blog.exe, it should eventually say "server up an running and going", then if you go to <a href="http://127.0.0.1/" target="_blank">http://127.0.0.1/</a> in your browser you should see what it does. <br><br></td></tr></table><br>
<a name="962073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> its probably not in the TOS :) not sure if port 80 can accept connections either  <br></div><br>A reasonably secure OS will require admin rights to allow listening on any ports &lt; 1024. <br><br></td></tr></table><br>
<a name="962082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oooo interesting. This could be used to easily do web based configuration for a custom game server. <br><br></td></tr></table><br>
<a name="962121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> pretty cool, <br>blog.exe works but example.exe says 'Can't find template list'<br><br>what does it use as a database? <br><br></td></tr></table><br>
<a name="962142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, example.exe shouldn't be in there any more, it was my first test app. It doesn't really use a database yet, it can serialise objects to JSON and save that to a file, but nothing efficient. Everything's held in memory too, so for database queries I use my clever list filter thing which is in the code archives. <br><br></td></tr></table><br>
<a name="962170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> so when the program is launched it loads the entire database to memory <br><br></td></tr></table><br>
<a name="962212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep. No good, I know, but I've never written a database before so I'm leaving that until later.<br><br>I've spent today making a textile markup parser, and I've uploaded the new version. I should rewrite the readme, almost none of it applies any more. <br><br></td></tr></table><br>
<a name="962266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> mysql's syntax is a bit annoying, and difficult to debug, <br><br></td></tr></table><br>
<a name="965393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Warpy, can this be used for fast 64 player online battles?  If so then i'm down. <br><br></td></tr></table><br>
<a name="965484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, it's an http server, for serving web pages. <br><br></td></tr></table><br>
<a name="972910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm a bit annoyed nobody's noticed this, because it's really really clever. <br></div><br><br>I just noticed it!<br><br>It's just that BlitzMax is not the first language you think about when you think about an WebApp.<br><br>As a Python/Django enthusiast I appreciate your work here and I'll check out your code.<br><br><div class="quote"> <br>... you need grable's modified reflection.bmx ...<br> <br></div><br><br>You're using this for the dynamic method lookup i suppose? I hope this will be added to the official version of bmx because i don't like "patching" the brl-lib unless absolutely necessary.<br><br>I've been working with a Crud (very basic ORM that does not understand relations) at home for a while and for basic things it's great (although it's very very alpha yet)<br><br>Your work here (View and Controller mostly from what I understand) together with some ORM/Crud (Model, Persistence) could actually become a framework to build real-world webapps in.<br><br>Regarding reflection (which I a'm big fan of myself tbh): I question it's use in a web framework, if you want great performance. Since Bmx is a compiled language there can be very huge performance gains when not using it in production, if the webapp is to be heavily used.<br><br>One way to eliminate reflection (or at least reduce it in performance critical parts of the webapp) might be "pre compile-time code generation". Things like the mapping of view-controller, model-db etc, could be auto-generated into .bmx files that are compiled into the final .exe. (build script)<br><br>This is in no way a fully thought out plan or anything, but merely some ideas that have popped out of my mind when i saw this.<br><br>Here, have this "pat on the back" :-) good work! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
