<!DOCTYPE html><html lang="en" ><head ><title >Verlet Max speed test... and a weird bug?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Verlet Max speed test... and a weird bug?</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Verlet Max speed test... and a weird bug?</a><br><br>
<a name="970691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>So I recently got down to buisness and finished my fixed grid algorithm for a very decent 250 percent speed up :)  Here is a linky to a little demo to check out:<br><br><a href="http://naillproductions.synthasite.com/resources/verletcount%20test.zip" target="_blank">http://naillproductions.synthasite.com/resources/verletcount%20test.zip</a><br><br>Now down to the real reason behind this post:<br><br>After running the app for about 5 minutes as the blocks settle, sure there are some jitters but dont you notice there are always way more blocks on the left side than the right side.  They continue to slide ever so slowly to the left until the simulation explodes.  I use seedrnd(millisecs()) at the beginning of my program so the distribution should be even.  Maybe it is due to rounding errors and the order I do my fixed grid collision checks in?  Is this 'normal' for physics engines to do under stress tests like this one? <br><br></td></tr></table><br>
<a name="970719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your simulation is gaining energy from somewhere. Without seeing the code I couldn't tell you where, but there are a few likely candidates. Using spring collisions is one possibility. In verlet intergration collision energy is transfered down the constraints. If you also use spring collisions then you add energy to the simulation from nowhere. Get a few bodies rubbing together and they will begin to resonate. Another similar cause could be an incorrect friction resolution. I remember the last code you posted used an incorrect friction formula. If you are still using that method then it could be the issue. Another thing to look out for is if bodies are changing grid cells during the collision relaxation phase. If they move into a cell that has already been flagged as finished then you may be missing collisions and errors could creep in. Hope these give you some insight into your problem.<br><br>As for the last question. I'd expect any passive physics simulation to <i>eventually</i> come to rest, no matter how many bodies are involved. <br><br></td></tr></table><br>
<a name="970755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok I have a really bad error in the above test.  I accidentally check collisions between all of the pointmasses <b>at least</b> 2 times but possibly more :p  Im gunna check into that in a second to see if that is the cause of my problem.<br><br><div class="quote">  Using spring collisions is one possibility <br></div><br><br>huh? what is a spring collision?   I am working on correcting collisions and friction atm. :) which will also eliminate the jitters you see.<br><br><div class="quote">  Another thing to look out for is if bodies are changing grid cells during the collision relaxation phase <br></div><br><br>not possible, as I check for collisions, I send all of the forces that push on each verlet to an array to retrieve and add up after all collisions have been checked.<br><br>well thanks for the help. <br><br></td></tr></table><br>
<a name="970894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> also I noticed, if you leave the simulation running for 30 minutes, the update time may top 16.666 which will make it slow down to 30 fps :p could this be a memory leak? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
