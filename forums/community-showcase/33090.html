<!DOCTYPE html><html lang="en" ><head ><title >Particles... Particles</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Particles... Particles</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Particles... Particles</a><br><br>
<a name="355937"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Note: The comments at the top of LotusTest.bb should be completely disregarded.</b><br><br><br>Because particle systems/engines/whatever-the-heck-name-appeals-to-you's happen to be my favorite thing to write, I wrote another.  I'm rather happy with it.  Because I'm happy with it, I thought I'd put up a demo.<br><br>The demo showcases four effects: Fire, sparks, rocket-launching (with trailing flames and smoke and collision explosions), and explosions.  Nothing special, but the source is included so you can mess with creating new/different effects.<br><br>This is a pseudo-single-surface particle system, each emitter has its own surface (I've considered combining duplicate emitters into single surfaces, but then there's the issue of blend modes and potentially changing textures..), and each particle goes into that surface.  There's distance-based sorting for emitters with a their Sort flag set to True and a quick hackjob of culling (which seems to be broken at the moment, not sure why yet).<br><br>Anyhow, I'm going to stop myself from trying to get into describing the system itself and just let you stare at this picture a bit before eventually being tempted to click it.  Which you will, because I control your every thought and action!  Including the smart ones.<br><a href="http://s87776868.onlinehome.us/stuff/lps_test2.zip" target="_blank"><img src="http://s87776868.onlinehome.us/stuff/lps_db.jpg"><br>Source code download, 125kb</a> <br><br></td></tr></table><br>
<a name="355952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> it's far better to have a single surface per emitter as they will be culled very easily offscreen. Much better performance in real game scenarios.<br><br>nice work too! <br><br></td></tr></table><br>
<a name="356011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's a good idea Rob. Keep my surfaces in an array or something.<br><br>Anyway, nice work again Noel. <br><br></td></tr></table><br>
<a name="356015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> kewl, thanks for sharing! <br><br></td></tr></table><br>
<a name="356089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice! I have to compliment every part seperately:<br>The large fire effect which looks like the sun makes a lovely little lighting effect that I have been hoping someone would make for ages (so I could borrow it :D)<br>The rocket's trail is very high detail, and it is quite well done. A fine example of how your particle system can do moving emitters.<br>Finally, the sparks are another effect that is just perfect for my big game.<br>So, excellant job Noel! And thanks for sharing :D <br><br></td></tr></table><br>
<a name="356138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> dill: Glad to be of assistance :)<br><br>jfk: You're welcome.<br><br>Ross: Thanks.<br><br>Rob: Really?  That's very interesting (to me, at least).  I guess I won't have to worry about sticking everything in one single surface then. :)  And thanks. <br><br></td></tr></table><br>
<a name="356188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >R0B0T0</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looking good Noel!  It seems to me that a visually effective particle system is just as much about proper choice and usage of the particle images as it is about code.  Looks like you're on the right track there. <br><br></td></tr></table><br>
<a name="356279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://s87776868.onlinehome.us/stuff/lps_exp_db.jpg"><br><br>That said, just stick this in an include or something and call the appropriate functions (there're only two, and they're fairly self explanatory).<br><br><pre class=code>
;Explosions for the Lotus particle system.
;Media from the lps_test2.zip archive is required.
;InitExplosion()  -  Call this to initialize the required emitters.
;Explode(X,Y,Z)  -  Call this to create an explosion at X,Y,Z

;I'm still working on projectile explosions &gt;:)

Global gExpSmoke,gExpSmokeTrail,gExpSpark,gExpFire

Function InitExplosion()
     Local Fire,Smoke,SparkMesh,SparkTex

     ;; Load textures.  And stuff.
     Fire = LoadTexture("fire.png",1+16+32)
     Smoke = LoadTexture("smoke.png",1+2+16+32)
     SparkMesh = LoadMesh("beam.3ds")
     RotateMesh SparkMesh,90,0,0
     ScaleMesh SparkMesh,.2,.2,.2
     HideEntity SparkMesh ;woops, forgot that
     SparkTex = LoadTexture("beam.png",1+16+32)

     If Not Fire Or Smoke Or SparkMesh Or SparkTex Then RuntimeError "Uh-oh!  Explosion couldn't be created due to one or more of the four intial variables being 0!  Papa had an oopsie!"

     gExpFire = CreateEmitter(Fire)
          SetEmitterLifeSpan gExpFire,50
          SetEmitterSizeFrom gExpFire,4,4,4
          SetEmitterSizeTo gExpFire,6.7,6.7,6.7
          SetEmitterColorFrom gExpFire,0,0,0,2
          SetEmitterColorTo gExpFire,255,255,255,0
          SetEmitterBlend gExpFire,3
          SetEmitterVelocity gExpFire,0,0,.025


     gExpSmoke = CreateEmitter(Smoke)
          SetEmitterLifeSpan gExpSmoke,96
          SetEmitterSizeFrom gExpSmoke,5,5,5
          SetEmitterSizeTo gExpSmoke,10,10,10
          SetEmitterColorFrom gExpSmoke,0,0,0,2
          SetEmitterColorTo gExpSmoke,192,192,192,0
          SetEmitterBlend gExpSmoke,3


     gExpSmokeTrail = CopyEmitter(gExpSmoke)
          SetEmitterLifeSpan gExpSmokeTrail,32
          SetEmitterSizeFrom gExpSmokeTrail,.5,.5,.5
          SetEmitterSizeTo gExpSmokeTrail,1.3,1.3,1.3
          SetEmitterWaitSpan gExpSmokeTrail,5
          SetEmitterAngle gExpSmokeTrail,-90,0,0
          SetEmitterAcceleration gExpSmokeTrail,0,0,.001


     gExpSpark = CreateEmitter(SparkTex)
          SetEmitterLifeSpan gExpSpark,40
          SetEmitterVelocity gExpSpark,0,0,.15
          SetEmitterAcceleration gExpSpark,0,0,.005
          SetEmitterAngleAcceleration gExpSpark,.04,0,0
          SetEmitterParticleMesh gExpSpark,SparkMesh
          SetEmitterSizeFrom gExpSpark,.9,.9,.3
          SetEmitterSizeTo gExpSpark,.3,.3,.9   ;reverse!
          SetEmitterViewMode gExpSpark,2
          SetEmitterColorFrom gExpSpark,255,228,209,1
          SetEmitterColorTo gExpSpark,255,138,0,0
          SetEmitterBlend gExpSpark,3
          SetEmitterTrail gExpSpark,gExpSmokeTrail

     Return True
End Function


Function Explode(X#,Y#,Z#)
     If Not gExpFire Or gExpSmoke Or gExpSmokeTrail Or gExpSpark Then RuntimeError "Explosion emitters not initialized"
     For N = 0 To 5
          Angle = Rand(359)
          Off = Rnd(-2,2)
          SetEmitterPosition gExpFire,X+Rnd(-2,2),Y+Rnd(-2,2),Z+Rnd(-2,2)
          SetEmitterAngle gExpFire,Angle,Angle,Angle
          CreateParticle gExpFire
     Next

     For N = 0 To 5
          Angle = Rand(359)
          SetEmitterPosition gExpSmoke,X+Rnd(-2,2),Y+Rnd(-2,2),Z+Rnd(-2,2)
          SetEmitterAngle gExpFire,Angle,Angle,Angle
          CreateParticle gExpSmoke
     Next

     For N = 0 To 7
          SetEmitterPosition gExpSpark,X+Rnd(-2,2),Y+Rnd(-2,2),Z+Rnd(-2,2)
          SetEmitterAngle gExpSpark,Rand(-80,10),Rand(359),45
          CreateParticle gExpSpark
     Next
     Return True
End Function
</pre> <br><br></td></tr></table><br>
<a name="356280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kuron</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice stuff Noel, thanks for sharing <br><br></td></tr></table><br>
<a name="356315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >R0B0T0</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm... have you added extra parameters to the SetEmitterSizeFrom and SetEmitterSizeTo functions? <br><br></td></tr></table><br>
<a name="356318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah yes, guess I'd have to update the old archive too.  *proceeds to do so* <br><br></td></tr></table><br>
<a name="356323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now the demo doesn't work.  I get an error that there aren't enough parameters in those functions.<br><br>I'm looking forward to seeing this particle system.  Please fix the demo code.  And maybe add those explosions to the download zip.<br><br>ADDITION: I just looked at the compiled demo.  The rocket is so cool!  Please fix the download. <br><br></td></tr></table><br>
<a name="356327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Should be fixed now.  Also, the explosion code is included with the LotusTest.bb in the new archive.<br><br>jhocking:  Re-download the lps_test2.zip.  I apologize for this inconvenience :) <br><br></td></tr></table><br>
<a name="356329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Darn cross posting.  Muchas gracias!<br><br>Sorry to be a pest, but now the rocket is gone.  That was the best part!  Also, pressing 1 freezes the demo. <br><br></td></tr></table><br>
<a name="356330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> looks very nice indeed. <br><br></td></tr></table><br>
<a name="356333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> jhocking: Yeah, somehow I broke the rocket, so I removed it.  Also, pressing 1 now stops it (for debugging purposes).<br><br><b>Comments at the top should be completely disregarded.</b><br><br><br>Edit: This'll probably be funner: I'm working on some code to let you launch the rocket, and it'll hit stuff and blow up.  That'll be fun, methinks.<br><br>Edit2: And if you still want that first rocket, you can always download the executable. <br><br></td></tr></table><br>
<a name="356335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get a MAV with the compiled exe <br><br></td></tr></table><br>
<a name="356337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> the trail on the rocket is only gone when the explode function is called, if that's what you mean by "broke it". Same thing happens with the flare. Very cool explosion though! <br><br></td></tr></table><br>
<a name="356338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perturbatio:<br><br><div class="quote"> (you'll still need the media from the source .ZIP) <br></div><br><br>You will need the media from lps_test2.zip, y'know.  In other words, make sure the executable is in the same folder as the media (models, textures, etc.).<br><br>Edit: And now I can't play tech support anymore 'cause I've got to get off.  And eat.  And stuff. <br><br></td></tr></table><br>
<a name="356383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> The rocket is back.  The executable won't be updated.  Same archive, so just click the rocket. <br><br></td></tr></table><br>
<a name="356690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added particle bouncing (which relies on the next bit) and basic collisions.  The sparks in the latest LotusTest.bb exhibit this behavior. <br><br></td></tr></table><br>
<a name="356709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You will need the media from ... <br></div><br><br>oops :) <br><br></td></tr></table><br>
<a name="356714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be awesome if you put back one rocket exhibiting the old behavior.  The visual of the rocket flying in circles, doubling back into its own smoke trail, was very interesting and a neat demonstration of how visually effective the particle system can be. <br><br></td></tr></table><br>
<a name="356726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright, it's back in there, just for you ;) <br><br></td></tr></table><br>
<a name="356736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aw, now I feel special. <br><br></td></tr></table><br>
<a name="357003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brilliant stuff! <br><br></td></tr></table><br>
<a name="357177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> To quote one of my sister's games: &lt;stoned voice&gt; "Haaapppy ddaaaaaay....." &lt;/stoned voice&gt;  ;)<br><br>I'll have another set of examples up sometime today.  So far I've got a fountain and bullet casings (falling to the floor and bouncing a very tiny bit).<br><br>Anyone have any requests?  Anything from features to examples, since right now I'm drawing a blank. <br><br></td></tr></table><br>
<a name="357234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added another test file: "Fountain.bb".  It showcases an emitter that spits out bullet casings, a fountain (read the comment at the top of Fountain.bb for a quick bit of info), and some steam erupting from a pipe (the only reason that one is included is 'cause I wanted to test my wall model with it :P).<br><br>Oh yeah, and for some reason it runs slow as hell with Debug mode on, so just a warning to ye all. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
