<!DOCTYPE html><html lang="en" ><head ><title >Stunt Car Racer</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Stunt Car Racer</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Stunt Car Racer</a><br><br>
<a name="871025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> A Classic game, I hope to remake, and dish out something playable. Just a track editor at the moment. I'm not looking to do anything fancy, just recreate the essence of a classic. I've got the beginnings of a track editor worked out so far. <br><br></td></tr></table><br>
<a name="871031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hand it over. <br><br></td></tr></table><br>
<a name="871033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you could link to the screenshot you posted of the track editor? <br><br></td></tr></table><br>
<a name="871054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know this sounds stupid, coming from a programmer wannabe... but I would if I could figure out how.. :(<br><br><a href="http://www.blitzbasic.com/gallery/view_pic.php?id=1837&amp;gallery=&amp;page=1" target="_blank">http://www.blitzbasic.com/gallery/view_pic.php?id=1837&amp;gallery=&amp;page=1</a><br><br>... best I could do. <br><br></td></tr></table><br>
<a name="871059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Go Steadman. I gave your graphics showcase a 5 for the nostalgia factor. <br><br></td></tr></table><br>
<a name="871079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> but I would if I could figure out how.. :( <br></div><br><br>Check out the <a href="/faq/faq_entry.php?id=2" target="_blank">forum codes</a>.<br><br>Image links:<br><br>{a http://www.anywebsite.com}http://www.anywebsite.com/anyimage.jpg{/a}<br><br>Change the { to [ and } to ]<br><br>Wish BRL would change the forum edits so we have some buttons and have the "Post reply to topic" a lot bigger.... <br><br></td></tr></table><br>
<a name="871092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> One of my fav games on the ST. Looking forward to a nice updated version. ;) <br><br></td></tr></table><br>
<a name="871097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://www.blitzbasic.com/gallery/pics/1837.jpg"><br><br>If you edit your first post to include the following text ( no forum codes necessary ) then you should be able to see the image, as I have done above. ( Replace ** with tt, if I had typed it exactly, you would have seen the image again, not the text. )<br><br>h**p://www.blitzbasic.com/gallery/pics/1837.jpg <br><br></td></tr></table><br>
<a name="871113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >6</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ha ha, I remember playing this on the ST too.  There is one track that always made my stomach lurch as I went over a jump and down a big rollercoaster ramp.  It could be that one in the pic above.<br><br>Can't wait to try this out too. <br><br></td></tr></table><br>
<a name="871259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >McSeb</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stunt Car Racer was so cool, this looks great. What was missing from the original was an editor. Can't Wait ! <br><br></td></tr></table><br>
<a name="871622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gabriel: Thanks very much. My future postings will include images, (whenever I have something new to show).<br><br>6: I think the level you are describing is actually called rollercoaster. The one in my screenshot above was just a test thrown together using keys to build the track. Very difficult to control with any accuracy. The full editor will have a proper gui with nice buttons to click on. The keyboard experiment has inspired me to consider a track creation tool where the track automatically generates constantly and you create hills and banks using keys or a joystick/pad, almost like a flight sim where you climb, dive bank and turn (obviously with limits), I really ain't going as far as loop the loop or anything too fancy.<br><br>alternative textures will be quite easy to apply though (I like the idea of a wooden log track as seen on the menu screens of the games), but this will be an afterthought.<br><br>The editor is coming along slowly but nicely so far.<br><br>Will keep you updated. <br><br></td></tr></table><br>
<a name="871787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> wasnt someone else doing a Stunt Car Racer thing? <br><br></td></tr></table><br>
<a name="871791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, me. I'm still working on it. <br><br></td></tr></table><br>
<a name="871829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edzup &amp; Vorderman:<br>I have seen it and was really impressed by the screenshots. But the last posts I saw were 2 years ago, and all the associated links were dead, so I assumed that the project had stopped or gone elsewhere. I really wanted to try it out too!<br><br>However, I have no plans to make mine quite as intricate as that. I only plan to try and recreate the original essence of the game with an addition of a track editor (something the orignal sorely missed out on)using B3D. Nothing fancy.<br><br>A track ed on the original would have easily improved on an already excellent longevity record so to speak.<br><br>GUI is half done, getting fed up of drawing buttons... <br><br></td></tr></table><br>
<a name="871868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've recently added a track editor to StuntRace Xtreme, which uses a Crysis-style popup editing arrangement with realtime track morphing, AI placement, checkpoint placement etc...<br><br>I'd make a new Showcase post if I could find somewhere to upload pictures etc.. to. <br><br></td></tr></table><br>
<a name="871872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; I only plan to try and recreate the original essence of the game<br><br>That'll do for me. I loved the 'fate out of your hands' aspect of SCR. Waiting to see if you got the timing right after jumping a bridge. Only to watch the creak-o-meter max out when you bash into the wall or fly past the end of the track. If you can capture all of that then it's game on! <br><br></td></tr></table><br>
<a name="871915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vorderman:<br><br>Stunt Race Xtreme is looking really good. :) I know mine will be no where near as graphically pleasing. <br><br>Jim:<br><br>I hope I hit the mark. :) <br><br></td></tr></table><br>
<a name="872049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers Wayne, I think SRX has been going for about 10 years now - one day I'll finish it. Most important thing is to get the gameplay spot-on - it's the hardest thing to get right but the most important to keep you playing. Graphical fluff looks good to start with but after 10 minutes or so it doesn't matter one bit how it looks if the gameplay underneath sucks.<br><br>There's a game out at the moment called Nitro Stunt Racers or something, which looks absolutely stunning with some gorgeous mesh tube tracks, but if you play the demo you'll find it's very boring to play, with none of that sense of danger that made the original SCR so good. Same with Crashday - brilliant to look at but the driving experience and thus the racing was just dire. <br><br></td></tr></table><br>
<a name="872268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Further developments to the Stunt Car Racer Track Ed. Have created the buttons I need, just coding them in. stopped to take a break and create a screenshot. Not my best effort on a peice of track but it shows nice rolling hills and banked tracks (even on curves). The top row of buttons are for manual tweaking as track segments are created the bottom row are for more intuitive creation (ie 'I want n number of peices to gradually reach a steepness of m'). <br><br><img src="http://www.blitzbasic.com/gallery/pics/1843.jpg"><br><br>I am undecided at this point whether to bother with a start/finish button, although I plan to recereate the race element against a computer AI (and possibly multiplayer), I'm not sure at this stage whether to bother allowing the user to specify the start peice, as I would just work the startline from the first segment (seems only natural). <br><br></td></tr></table><br>
<a name="872461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> YAAAY<br><br>One of my old favorites :D<br><br>Cant wait till this comes out! <br><br></td></tr></table><br>
<a name="872635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this going to be a commercial product? If not, I say open up the source code and turn it into a community project. This is perhaps the only way it will ever get done and we can all play it.<br><br>BTW, I only suggest this because I LOVED this game on the ST. <br><br></td></tr></table><br>
<a name="872650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tachyon:<br><br>I doubt I could make this a commercial thing (though I could do with the money), as it is meant to be a remake as similar to the original as I can, plus with kid on the way, I may run out of time to complete it.<br><br>If it comes to that, then I will most likely hand out the source, to anyone interested in completing it.<br><br>For now, I'd just like to be able to say - 'I did that..' <br><br></td></tr></table><br>
<a name="872657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> WMSteadman:  This is looking very good, I spent a little while playing the original version of this on the Amiga, even managed network play between a Amiga 500/600 or 1200.  Will the tracks be 'exportable' ?  The reason I'm asking is that I have been playing with JV-ODE ( <a href="http://www.blitzbasic.com/Community/posts.php?topic=76772" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=76772</a> ), and yes it is very early days  but I'd love to try driving my trucks around your tracks developed with your editor.  I encourage you to finish it &amp; charge a small fee for it's use, much the same as JV-ODE. <br><br></td></tr></table><br>
<a name="872823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Blitzplotter:Will the tracks be 'exportable' ?  <br></div><br><br>Unfortunately, I have no plans to do anything special with the tracks other than creation, saving and loading into the game. as for exporting, I'm not even sure b3d can save a mesh. I've had a quick flick through the manual, and nothing jumps out at me to suggest this is the case. If simple mesh saving is possible, then I will have no problems adding that to my editor. If it is a big task, then it will have to be an afterthought. <br><br></td></tr></table><br>
<a name="873222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't wait for a demo ! <br><br></td></tr></table><br>
<a name="873257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doiron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm with Filax :)<br><br>The tracks look really faithful to Stunt Car Racer, and the editor reminds me of Rollercoaster Tycoon. :)<br><br><div class="quote"> as for exporting, I'm not even sure b3d can save a mesh. <br></div><br>Take a look here: <a href="http://www.blitzbasic.co.nz/codearcs/codearcs.php?cat=12" target="_blank">http://www.blitzbasic.co.nz/codearcs/codearcs.php?cat=12</a><br><br>There are functions for many formats, some of them including UV data. <br><br></td></tr></table><br>
<a name="873266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Making a remake and selling it is asking for trouble. <br>Sometimes you can get into trouble for just doing an remake. Depends on how whiny the original author(s) is.<br><br>Looks great! I hope you release a demo soon! :) <br><br></td></tr></table><br>
<a name="873291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> With a little tweak here and there, he could sell it and not have any problems. We're talking about a very old title that's never seen a modern day release. Even though it's obviously had an impact on alot of games! <br><br></td></tr></table><br>
<a name="874579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> looking forward to a demo.... <br><br></td></tr></table><br>
<a name="875540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hopefully a demo is on the horizon. I have got the track editor to a reasonable stage. Just a few touches left to make it a bit more user friendly. I can create complete tracks with it already, but it takes a bit of fiddling to get the last peice to meet the first, the editor is designed to make this easier than just plain guess work, but I hope to make a track finisher wizard which will complete it for you (without even having to be too close to the start :) ).<br><br><div class="quote"> Doiron: The tracks look really faithful to Stunt Car Racer, and the editor reminds me of Rollercoaster Tycoon. :) <br></div><br><br>Thanks Doiron, your thoughts gave me the idea to play rollercoaster tycoon 3 again and look at how the coasters are constructed for inspiration. This has really helped me in making some good decisions on how the editor should work for users.<br><br>Also for the link to mesh exporting. I can see this should be quite easy, but I am concentrating on the game first. People are demo hungry, and I need fps' readings.<br><br>Until then I have a new image demonstrating how textures could work in the game. :)<br><br><img src="http://www.blitzbasic.com/gallery/pics/1850.jpg"><br>P.S. to save on comments I am aware that the blank buttons cover one of the track cams at the top partially, and have already addressed this so you won't see it on the next one. :) <br><br></td></tr></table><br>
<a name="875572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this B3D?<br><br>Anyone working on a remake such as this?<br><a href="http://rds.planetflibble.com/" target="_blank">http://rds.planetflibble.com/</a> <br><br></td></tr></table><br>
<a name="875581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Grisu: Yes it is completely b3d. I am not familiar with the game you are remaking I'm afraid. (8bit -tomato tomato - you c64 me Amstrad CPC :) ) looks good though.<br><br>(some people were Amiga - Others were ST). Maybe we should start a thread for people listing their retro ownership histories, like the way people list their machine specs. I'll test it here first:<br><br>8-bit: Amstrad CPC 464, Sega GameGear<br>16-bit: Commodore Amiga 500 and 1200 with Hard drive, Megadrive, GBA (I think its 16bit not sure)<br>32-bit: Amiga CD32 (shamefully), Sega Saturn, PSOne<br>64-bit: Nintendo 64, PS2 (64bit I think?), X-Box(again not sure)<br><br>I do have a Wii now, but I'll stop at PS2 and X-Box for retro list, as they barely qualify themselves, although x-box is getting there fast with the lack of actual non 360 titles available.<br><br>...well.. back to work... <br><br></td></tr></table><br>
<a name="875597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I can create complete tracks with it already, but it takes a bit of fiddling to get the last peice to meet the first, the editor is designed to make this easier than just plain guess work, but I hope to make a track finisher wizard which will complete it for you (without even having to be too close to the start :) ).<br> <br></div><br><br>If you used bezier interpolation for your track creation you would not have this issue.  Something worth considering to save yourself some headaches.<br><br>See some old code here ...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
raphics3D 640,480,16,1

Global camera
Global plane
Global light 
Global track
Global pivot = CreatePivot()
Global p1.CarType
Global p2.CarType
Global Points=0
Global PP=0

Type Vector
	Field x#, y#,z#
End Type

Dim Point.Vector( 2000 )
Dim TP.Vector( 6, 20000 )


Type CarType
	Field Model
	Field Vx#, Vy#, Vz#
	Field Acceleration#
	Field Brakes#
	Field Traction#
	Field Speed#
	Field TopSpeed#
	Field Wheel[3]
End Type


GAMEinit()
TRACKinit()
GAMEreset()
	
While Not KeyDown(1)

	GAMEupdate()

Wend

End

;=================================================
;=================================================
;=================================================

Function CARcreate.CarType( r,g,b)

	c.CarType = New CarType
	c\Model = CreateCube()
	PositionMesh c\Model,0,1,0
	ScaleMesh c\Model,.5,.5,1
	UpdateNormals c\Model
	EntityColor c\Model,r,g,b
			
	temp = CreateCylinder( 5 )
	RotateMesh temp,0,0,90
	ScaleMesh temp,.25,.5,.5
	EntityColor temp,50,50,50
	w=0
	For z# = .75 To -1 Step -1.75
		For x# = -1 To 1 Step 2
			c\Wheel[w] = CopyEntity( temp, c\Model )
			UpdateNormals c\Wheel[w]
			PositionEntity c\Wheel[w],x,.5,z
			w = w + 1
		Next
	Next
	FreeEntity temp
	
	shadow = CreateCube( c\Model )
	ScaleEntity shadow,1.25,.01,1.25
	EntityColor shadow,50,50,50
	EntityAlpha shadow,.5
	
	c\Acceleration = .01
	c\Brakes = .005
	c\Traction = .95
	c\Speed = 0.0
	c\TopSpeed = 1.25
	c\Vx = 0
	c\Vy = 0
	c\Vz = 0
			
	Return c

End Function

;=================================================
;=================================================
;=================================================

Function CARupdate( c.Cartype )

	jx = KeyDown(203)-KeyDown(205)
	jb = KeyDown(200)

	TurnEntity c\Model, 0, jx * 3.0,0
	For w = 0 To 1
		RotateEntity c\wheel[w],EntityPitch(c\wheel[w]),jx*45.0,0
	Next
		
	c\Speed = LIMIT ( c\Speed + ( jb * c\Acceleration ) - ( ( Not jb ) * c\Brakes ) , 0, c\TopSpeed )
	TFormVector 0,0,(1.0 - c\Traction ), c\Model, 0
	c\Vx = ( c\Vx * c\Traction ) + ( TFormedX() * c\Speed )
	c\Vz = ( c\Vz * c\Traction ) + ( TFormedZ() * c\Speed )
	c\Vy = ( c\Vy * c\Traction ) + ( TFormedY() * c\Speed ) - gravity

	TranslateEntity c\Model, c\Vx, c\vy , c\Vz
	
	For l = 0 To 3
		TurnEntity c\wheel[l],c\Speed * 90.0 / (Pi),0,0
	Next
	
	;collisions
	unused = LinePick ( EntityX(c\Model,1),EntityY(c\model,1)+5,EntityZ(c\model,1),0,-20,.2 )
	picked = PickedEntity()
	If picked = Track Or picked = plane
		;hug track
		TranslateEntity c\Model,0,PickedY()-EntityY(c\Model)+.1,0
		nx#=PickedNX():ny#=PickedNY():nz#=PickedNZ()
		AlignToVector c\Model,nx,ny,nz,2,.25
	EndIf 
	
End Function

;=================================================
;=================================================
;=================================================

Function GAMEinit()

	plane = CreatePlane()
	EntityColor plane,150,100,75
	EntityPickMode plane, 2
	EntityOrder plane,1
	EntityFX plane,1+16
	
	camera = CreateCamera()
	CameraClsColor camera,50,100,200
	PositionEntity Camera, 0,100,0
	
	light = CreateLight()
	RotateEntity light,30,-60,0 
		
	P1 = CARcreate( 200,200,50 )
	P2 = CARcreate( 50,200,200 )

End Function

;=================================================
;=================================================
;=================================================

Function GAMEupdate()

	CARupdate( p1 )
	CAMERAupdate()
	RenderWorld()
	Flip

End Function

;=================================================
;=================================================
;=================================================

Function GAMEreset()
	
	PositionEntity P1\Model,TP(3,0 )\x,TP(3,0)\y,TP(3,0)\z
	PositionEntity Pivot,TP(3,1)\x, TP(3,1)\y, TP(3,1)\z
	PointEntity P1\Model, Pivot

	PositionEntity P2\Model,TP(3,0 )\x,TP(3,0)\y,TP(3,0)\z
	PositionEntity Pivot,TP(3,1)\x, TP(3,1)\y, TP(3,1)\z
	PointEntity P2\Model, Pivot
	
End Function

;=================================================
;=================================================
;=================================================

Function CAMERAupdate()

	PointEntity Camera, p1\Model
	CameraZoom Camera, EntityDistance( Camera, p1\Model ) / 50
	
End Function

;=================================================
;=================================================
;=================================================

Function TRACKinit()

	;points
	Restore LEVELdata
	Read points
	For l = 0 To points-1
		point( l*2 ) = New Vector
		Read point(l*2)\x
		Read point(l*2)\y 
		Read point(l*2)\z
	Next
		
	;mid points
	For l= 0 To points-1 
		m = l*2+1
		v = ( l+1 ) Mod points
		point( m) = New Vector
		point( m)\x = ( point(l*2)\x + point(v*2)\x ) * .5
		point( m)\y = ( point(l*2)\y + point(v*2)\y ) * .5
		point( m)\z = ( point(l*2)\z + point(v*2)\z ) * .5
	Next
	points = points * 2 
		
	;smooth bezier curves
	For l= 0 To points-1 Step 2
		k = ( l+1) Mod points
		n = ( l + 2 ) Mod points
		m = ( l + 3 ) Mod points
		JOIN ( point( k )\x , point( k )\y, point( k )\z, point( n )\x, point ( n )\y, point(n)\z, point( m)\x, point(m)\y , point(m)\z )
	Next
	
	;tangents
	Color 255,255,255
	For l = 0 To pp-1
		m = ( l-1+pp ) Mod pp
		n = ( l + 1 ) Mod pp
		dx# = TP(3, l )\x - TP(3,m)\x
		dz# = TP(3, l )\z - TP(3,m)\z
		d#  = Sqr ( dx*dx + dz*dz) * 2.0
		ax# = dx/d
		az# = dz/d
		dx# = TP(3, n )\x - TP(3,l)\x
		dz# = TP(3, n )\z - TP(3,l)\z
		d#  = Sqr ( dx*dx + dz*dz) * 2.0
		ax# = ax# + dx/d
		az# = az# + dz/d
				
		For q = 0 To 6
			
			dr# = Sgn(q-3)
			
			Select Abs(q-3)
				Case 1 
					Width# = 5.0
					Height# = TP(3,l)\y
				Case 2 
					Width# = 6.0
					Height# = TP(3,l)\y+.5
				Case 3 
					width# = 10.0
					Height# = 0
					If TP(3,l)\y = 10.0 
						Height = TP(3,l)\y-2.5
						Width = 7.0
					EndIf 
			End Select
	
			If q&lt;&gt;3
				TP(q,l) = New Vector
				TP(q,l)\x = TP(3,l)\x - az * width *dr
				TP(q,l)\y = Height 
				TP(q,l)\z = TP(3,l)\z + ax * width * dr
			EndIf
			
		Next
		
	Next	
			
;	;show tangents
;	For l = 0 To pp-1
;		n = ( l + 1 ) Mod pp
;		For q = 0 To 6	
;			Select q
;				Case 3 Color 200,50,50
;				Default Color 50,50,50
;			End Select	
;			Line TP(q,l)\x+320, 240-TP(q,l)\z, TP(q,n)\x+320, 240 - TP(q,n)\z
;		Next
;		Color 50,50,200
;		Line TP(2,l)\x+320, 240-TP(4,l)\z, TP(2,l)\x+320, 240-TP(4,l)\z
;		Color 255,255,255
;		Text TP(3,l)\x + 320, 240-TP(3,l)\z,Str$(l),1,1
;	Next
;	Flip
;	MouseWait
	
	;make 3d mesh
	Track = TRACKcreate()
	
End Function

;=================================================
;=================================================
;=================================================

Function TRACKcreate()

	mesh = CreateMesh()
	s = CreateSurface( mesh )
	For l = 0 To pp-1
		n = ( l + 1 ) Mod pp
		d = ( l Mod 2 )

		;road
		v0 = AddVertex( s, TP(2,n)\x, TP(2,n)\y, TP(2,n)\z )
		v1 = AddVertex( s, TP(4,n)\x, TP(4,n)\y, TP(4,n)\z )
		v2 = AddVertex( s, TP(4,l)\x, TP(4,l)\y, TP(4,l)\z )
		v3 = AddVertex( s, TP(2,l)\x, TP(2,l)\y, TP(2,l)\z )
		For v = v0 To v3
			Select d
				Case 0 r=100:g=100:b=150
				Case 1 r=150:g=150:b=200
			End Select
			VertexColor s,v,r,g,b
		Next
		AddTriangle s,v2,v1,v0
		AddTriangle s,v0,v3,v2
		
		;kerb
		v4 = AddVertex( s, TP(0,n)\x, TP(0,n)\y, TP(0,n)\z )
		v5 = AddVertex( s, TP(1,n)\x, TP(1,n)\y, TP(1,n)\z )
		v6 = AddVertex( s, TP(1,l)\x, TP(1,l)\y, TP(1,l)\z )
		v7 = AddVertex( s, TP(0,l)\x, TP(0,l)\y, TP(0,l)\z )
		v8 = AddVertex( s, TP(5,n)\x, TP(5,n)\y, TP(5,n)\z )
		v9 = AddVertex( s, TP(6,n)\x, TP(6,n)\y, TP(6,n)\z )
		v10 = AddVertex( s, TP(6,l)\x, TP(6,l)\y, TP(6,l)\z )
		v11 = AddVertex( s, TP(5,l)\x, TP(5,l)\y, TP(5,l)\z )
		For v = v4 To v11
			Select d
				Case 0 r=50:g=150:b=50
				Case 1 r=75:g=200:b=75
			End Select
			VertexColor s,v,r,g,b
		Next
		AddTriangle s,v6,v5,v4
		AddTriangle s,v4,v7,v6
		AddTriangle s,v10,v9,v8
		AddTriangle s,v8,v11,v10
		
		;grass
		v12 = AddVertex( s, TP(1,n)\x, TP(1,n)\y, TP(1,n)\z )
		v13 = AddVertex( s, TP(2,n)\x, TP(2,n)\y, TP(2,n)\z )
		v14 = AddVertex( s, TP(2,l)\x, TP(2,l)\y, TP(2,l)\z )
		v15 = AddVertex( s, TP(1,l)\x, TP(1,l)\y, TP(1,l)\z )
		v16 = AddVertex( s, TP(4,n)\x, TP(4,n)\y, TP(4,n)\z )
		v17 = AddVertex( s, TP(5,n)\x, TP(5,n)\y, TP(5,n)\z )
		v18 = AddVertex( s, TP(5,l)\x, TP(5,l)\y, TP(5,l)\z )
		v19 = AddVertex( s, TP(4,l)\x, TP(4,l)\y, TP(4,l)\z )
		For v = v12 To v19
			Select d
				Case 0 r=200:g=50:b=50
				Case 1 r=200:g=200:b=200
			End Select
			VertexColor s,v,r,g,b
		Next
		AddTriangle s,v14,v13,v12
		AddTriangle s,v12,v15,v14
		AddTriangle s,v18,v17,v16
		AddTriangle s,v16,v19,v18
		
		;underside	
		If TP(3, n )\y =10 Or TP(3, l )\y=10
			v20 = AddVertex( s, TP(0,n)\x, TP(0,n)\y, TP(0,n)\z )
			v21 = AddVertex( s, TP(6,n)\x, TP(6,n)\y, TP(6,n)\z )
			v22 = AddVertex( s, TP(6,l)\x, TP(6,l)\y, TP(6,l)\z )
			v23 = AddVertex( s, TP(0,l)\x, TP(0,l)\y, TP(0,l)\z )
			For v = v20 To v23
				Select d
					Case 0 r=50:g=50:b=200
					Case 1 r=50:g=50:b=150
				End Select
				VertexColor s,v,r,g,b
			Next
			AddTriangle s, v20,v21,v22
			AddTriangle s,v22,v23,v20 
		EndIf
			
	Next
	
	EntityFX mesh,2
	EntityPickMode mesh,2
	UpdateNormals mesh
	Return mesh

End Function

;=================================================
;=================================================
;=================================================

Function WRAP#( q#, b#)

	If q&gt;=b Then q=q-b
	If q&lt;0 Then q=b+q
	Return q	

End Function

;=================================================
;=================================================
;=================================================

Function LIMIT#(n#,n1#,n2#)
	
	If n&gt;n2 Then n=n2
	If n&lt;n1 Then n=n1	
	Return n

End Function

;=================================================
;=================================================
;=================================================

Function JOIN (x1,y1,z1,vx,vy,vz,x2,y2,z2)

	For t#=.1 To 1 Step .1 
		TP( 3, pp ) = New Vector
		TP(3,pp)\x = x1*(1-t)^3 + 3*vx*(1-t)^2*t + 3*vx*(1-t)*t^2 + x2*t^3
		TP(3,pp)\y = limit( y1*(1-t)^3 + 3*vy*(1-t)^2*t + 3*vy*(1-t)*t^2 + y2*t^3 , 0, 10.0 )
		TP(3,pp)\z = z1*(1-t)^3 + 3*vz*(1-t)^2*t + 3*vz*(1-t)*t^2 + z2*t^3
		pp=pp+1
	Next

End Function

;=================================================
;=================================================
;=================================================
;=================================================
;=================================================
;=================================================

.LEVELdata

Data 25
Data 32,0,80
Data -32,0,80
Data -64,1,48
Data -96,3,-16
Data -128,0,-16
Data -160,3,48
Data -160,0,112
Data -160,5,176
Data -96,0,176
Data -32,0,208
Data 32,0,208
Data 96,5,176
Data 96,5,144
Data 32,0,144
Data -32,0,144
Data -128,11,144
Data -192,11,144
Data -224,0,112
Data -224,0,16
Data -256,8,-16
Data -256,8,-48
Data -192,3,-112
Data -128,0,-112
Data -64,5,-144
Data 32,7,-112
Data 96,0,16

Data 18
Data 0,0,112
Data -96,0,144
Data -160,0,144
Data -192,4,48
Data -192,4,-16
Data -128,5,-48
Data -128,0,-112
Data -192,0,-144
Data -192,0,-176
Data -160,0,-208
Data -128,11,-208
Data -32,11,-176
Data 32,11,-176
Data 64,0,-16
Data 160,0,-80
Data 224,0,16
Data 192,0,112
Data 96,0,144
</textarea> <br><br></td></tr></table><br>
<a name="875720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is good stuff. I have learned a few good tips from this code. Cheers. <br><br>As for bezier interpolation, although I like it, and it is very efficient (especially the way you have coded it), it won't fit with the way my track editor works, it takes away some of the control from the user over how the track is built.<br><br>I am grateful for any imput I get though.<br><br>Thanks again, Stevie G. <br><br></td></tr></table><br>
<a name="876183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yet another update to my SCR remake! I now have a 'playable' executable. Just gotta find somewhere to upload it to then I'll post the link.<br><br>The full version can use textures to create the environment, so I will be using this to make some pretty cool tracks. But more importantly, the classic mode is completely coded (textures are created within the program itself).<br><br>The latest screen shot shows several shots in textures and one shot in classic mode. Jumping is pretty cool on this! :)<br><br>Still got a few tweaks to make to the car physics and then I can focus on polishing it off, including the track editor. <br><br></td></tr></table><br>
<a name="876197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doiron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want you can e-mail me the demo: I'll gladly upload it for free. I've got plenty of bandwidth to waste. :) <br><br></td></tr></table><br>
<a name="876221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doiron:<br>cheers matey, a demo is winging it's way to you now. 1.33MB. It is the 'classic' version (I.E. No textures). Full screen 800x600 only at the moment (I've been a bit lazy).  It plays pretty well. I'm still tweaking the car 'physics' I use the term loosely because I am making it up as I go and just testing to see what 'feels right' but it is getting there. Like I say, I'm not looking to make a simulator, just a fun racer. Still a fair way to go with polishing it up and creating the A.I. (I already have a cunning plan for this too). <br><br></td></tr></table><br>
<a name="876225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doiron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> The demo is available here: <a href="http://www.break-in-studios.com/workspace/SCR_TEST8.zip" target="_blank">Download link</a><br><br>Steering still needs some work, but you got the jump right! these endless jumps were the thing I was most fond of in the original. :) <br><br></td></tr></table><br>
<a name="876234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >The r0nin</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> This has GREAT potential!!!  I like it! <br><br></td></tr></table><br>
<a name="876287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Judd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very good - I really enjoyed looking at this.<br>I think what you've done so far is excellent.<br><br>A couple of small points that i thought of :-<br><br>re: steering. It might just be my dodgy memory, but i think in the original game the cars would vaguely follow the path of the track, so if you didnt steer at all they would tend to try and follow the centreline.<br>When you (the player) steered you would simply 'influence' the cars direction rather than it being a precise direction change. With this method it meant that keyboard control was easier. I may have that wrong - but i seem to recall that was also how the F1 cars in later Geoff Crammond games behaved when controlled by the on/off style of keyboard steering.<br>It gives the illusion of the player being in complete control - but in fact the PC is helping a little as well.<br><br>re:track corners. i noticed the car bobbling a bit, especially on entry to the sharper corners - perhaps you could add some more triangles to the track mesh at these points to smooth the surface a little ?<br><br>re game speed. Would it possible to speed things up just a tiny fraction ? I had the feeling that the car was a big sluggish. I dont mean a big change only a small increase would do it. I felt at times like i was watching a slow-mo replay rather than live action.<br><br>I certainly dont mean to sound negative at all - I think you have a winner here (provided no-one gets upset at IP).<br><br>Keep up the good work. Looking forward to playing this very much.<br><br>cheers,<br><br>Mark <br><br></td></tr></table><br>
<a name="876290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark Judd:<br><br>Cheers for the feedback. You are spot on on all points. <br><br>I have been thinking about exactly the same things. I actually like the steering method I have on this. But I agree, for my 'classic' mode I need to make the steering more of a suggestion, rather than actual.<br><br>The bobbling is indeed down to a low poly count. it is most noticeable on the banking rather than cornering, but I am thinking about how I can smooth this out.<br><br>As for the speed. I was observing some car physics demostrations on youtube before I began coding my car and noticed that a lot of people seemed to feel that quick acceleration gave an unrealistic feel. I  will try to work on this I think, I want to get the balance right. As for the original SCR the whole game was very 'slo mo' to play which gave it that 'whoooaaaa' factor as you flew through the air. I will work on methods of giving the illusion of speed. I have already sped up the tyre spin speed on my main version which has helped a bit.<br><br>Again, all feedback is good, positive or negative, cheers.<br><br>If I could get fps' from people with lo specs, that would be great. I am expecting people to get around 60, but would be curious to here if anyone gets lower than 50.<br><br><img src="http://www.blitzbasic.com/gallery/pics/1852.jpg"> <br><br></td></tr></table><br>
<a name="876292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Judd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry should have posted FPS:-<br><br>Steady at 31/32 FPS<br><br>System Spec. :P4 3.2GHz 1.5Gb RAM running Win XP with a 256Mb Geforce 7600GS<br><br>cheers,<br><br>Mark <br><br></td></tr></table><br>
<a name="876301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Working on Linux, 33fps. <br><br></td></tr></table><br>
<a name="876307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool demo, but the car does move too slowly - I'd forgotten just how fast the car blats along in the original SCR (in terms of speed and distance, not framerate) until I tried it recently in a emulator.<br><br>Currently it feels like its playing in one of those slo-mo replay modes.<br><br>Up the movement speed and give the gravity a bit more oomph and it would be great. Already it feels much like the original. <br><br></td></tr></table><br>
<a name="876317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Steady 60fps <br><br></td></tr></table><br>
<a name="876381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just played it some more, that sense of "oh s**t" as you sail just over the track edge after getting a jump wrong is great! <br><br></td></tr></table><br>
<a name="876417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jerome Squalor</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> 15 - 16 fps, pretty slow. probably just my computer though. other than that, very fun <br><br></td></tr></table><br>
<a name="876500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks very promising.  I remember reading an article on the making of the original SCR and they definately had auto steering assistance.  <br><br>One thing which Vorderman put me on to years a go is limiting the turning the faster your going ... this will make control less twitchy at higher speeds.<br><br>Stevie <br><br></td></tr></table><br>
<a name="876527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> in the original SCR, if you released both left and right keys or centred the joystick then the car would automatically align itself down the track, so long as the track was straight. This meant you didn't need to keep twitching it left and right trying to go in a straight line, and also made it much easier to line up for jumps to ensure you flew straight. <br><br></td></tr></table><br>
<a name="876535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tested on AthlonX2 64 3800 - 1gb ram - ge6600 : FPS = 55 <br><br></td></tr></table><br>
<a name="876595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi WM, thought you'd like to know that I'd a steady 25fps 95 percent of the time, my system is:<br><br>Video card RADEON 9600 series @ 1280x1024 pixels in 32 bit colour<br>CPU:  AMD Duron 1600MHz, skta with 128KB L1 Cache &amp; 64KB l2 Cache<br>640MBytes RAM<br>Info sourced from PC Wizard 2006 .<br><br>Anyhoo,   enjoyed playing your demo WM,  are you going to incorporate a small ramp facility to enable people unfortunate enough to 'fall off' to drive back on again (albeit only at one place in the track, maybe at the start finish line....?  -  not true to the original but could be an option ?)  <br><br>fantastic piece of coding though - and such a small download.  Great work! <br><br></td></tr></table><br>
<a name="876636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hausmeister</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> looks really nice but i tested it and there where no textures only a black track, light brown ground and ablue sky.<br>I got 26 fps<br>My System Intel Celeron 1,6GB, 512MB RAM, Intel GMA 940<br><br>at least i think there flight phase is too long, in the last curve i landed at the ground at a speed of 115 <br><br></td></tr></table><br>
<a name="876638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> @haus, I'd the same thing on my laptop, worked fine on my 'big computer' though.  maybe dedicated 3D card required - i dunno ? <br><br></td></tr></table><br>
<a name="876639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Terry B.</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried it, went REALLLLLLLLLLLLLLLYYYYYYYYYYYYYYYYYYYY SLOWWW<br>but only when I was facing the track.<br>When I rode off into the distance there was about 35 or 40 fps, then when I was facing the track it gave me a constant 2. Is your track like really really high poly? <br><br></td></tr></table><br>
<a name="876646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jerome Squalor</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> same thing happened to me terry.. <br><br></td></tr></table><br>
<a name="876665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzPlotter, Hausmeister, Terry, Jerome, Degac, Thanks for the FPS, and spec, I have something to work with. I'm visiting a relative Sunday who has an incredibly low 1GHz Intel, Geforce 2MX and 384MB ram. I'm going to take the B3D demo version, my code and this test demo on  a memstick and rudely have a play for 20 mins. I usually have to fix something on their computer whenever I visit, so I can guarantee I'll get on it.<br><br>These low fps are very intriguing, I was not expecting such a dramatic drop, but I have some ideas to improve it. As for polys, it is already pretty much as low poly as it could be (except I could remove the side strips, they do nothing practical anyway). However, I am hoping this is not necessary as I want to up the polys on the twists and bends to make a smoother ride and less 'jagged' look on the corner, the authentic look I have devised should not interfere with good gameplay in my opinion.<br><br><br><div class="quote">  Vorderman: in the original SCR, if you released both left and right keys or centred the joystick then the car would automatically align itself down the track  <br></div><br><br>Vorderman and Mark are both right about the auto align, I spent last night scratching my head perfecting realistic steering, making it not look too slidey. Now that I have a good working formula, I can use it to make the auto align as you quite rightly point out. Fear not, I will get it where we want it, then put in lots of switches to make updated version options. Some of these ideas practically write themselves....<br><br>BlitzPlotter: You almost read my mind about the on/off ramps. I may consider this. As it is the classic will continue with the good old fashion crane lifting and dropping players on to the track, but the updated version could well include the option to drive back on, I'll have a think about it.<br><br>At the moment, I am looking to improve low fps on limited machines (if at all possible) and getting a bit of springyness into the suspension. I think by the end of this, I'll have developed my own physics car model... lol...<br><br>see y'all soon. <br><br></td></tr></table><br>
<a name="876677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> The track is really low poly so it should run fast on even the lowest spec machines.  How many surfaces does the track have in total as I think this may be your issue? <br><br></td></tr></table><br>
<a name="876683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >McSeb</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Getting steady 60 fps (Core 2 Duo 1.8, ATI x1950 Pro)<br><br>The car doesn't feel heavy enough, the one in the original game felt like it weighed tons, this feels floaty.<br><br>Looks good so far hehe <br><br></td></tr></table><br>
<a name="876719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> ....And the award goes to..... &lt;drum roll&gt; Stevie G. For: <div class="quote">  How many surfaces does the track have in total as I think this may be your issue?  <br></div><br>I am not being sarcastic, this really does look to be the problem. I was creating a surface per segment, which did not seem to be a problem on my system. I tested single surfaces early on in my code and even now, changing the number of surfaces seems to have no affect on my machine (i.e. still no higher than 60fps), which is why I did not suspect this as being a problem.<br><br>I have just tested it on an Athlon XP2100 with GeForce FX5600 and the rate was 27fps. With single surfaces I got 60fps. I am now going back to make the textures work properly again with as few surfaces as possible.<br><br>Many thanks Stevie G, you just saved me a headache, and hours of experiments in the wrong direction. :)<br><br>Terry, Jerome, I don't know how close to 60fps this will get you, but I am expecting it should get you at least up to 30-40fps. I might even try a skybox on/off setting.<br><br>Hausmeister: I almost missed your comment about the lack of textures, I have an old laptop with onboard graphics but it is Windows ME, so I don't know how faithfully it will recreate your problem. If I get enough time I will see if I can sort this. Although, I have seen other posts on the blitz website that seem to suggest some rather bizarre results from Intel onboard graphics cards. I have seen this with some 3d games in the past too. If that is the problem, then I may not be able to do much beyond a coloured vertex mode (I don't even know if that would work). Perhaps you could try Stevie G's rather cool bezier track demo code posted above and see if it produces it's colourful track (strong red's and greens). It uses coloured vertices. let me know if it is good.<br><br>MCSEB: I am hoping that putting springs into my wheels (i.e. suspension) will give this impression, also the adition of sound effects, damage bar and suspension response on the banked corners should improve the weghty feel. You may be able to see that I have already put more weight on the front than the back of the vehicle, but on some test tracks I have created it can sometimes flip over, with bizare results. Again, this would not happen on the original, so I will be working on this also.<br><br>Vorderman: I have also altered the scale of the car, which has improved the apparent speed of the vehicle, and altered the weight and speed accordingly, so that the jump is still just about acheivable at the right speeds (140-150 on the original game is top speed without any turbos, mine now matches this and the little ramp can be just about cleared).<br><br>Hopefully I'll have a new improved exe for everyone to try by sunday morning. <br><br></td></tr></table><br>
<a name="876747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Many thanks Stevie G, you just saved me a headache, and hours of experiments in the wrong direction. :)<br> <br></div><br><br>No worries - I made the same mistake many moons ago.  It's the biggest frame rate killer in blitz.  You might be able to make good use of addmesh without alot of fiddling around with texture uv's as this combines surfaces which have the same brush properties.<br><br>p.s. I think you should forget about textures as it looks far better without them IMO. <br><br></td></tr></table><br>
<a name="876761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, when I say with or without textures, even the non-textured look is using blitz generated textures (i.e. drawing red/white rects onto brushes). It was the simplest way I could think of to get lines onto selected edges without creating new polys.<br><br>for example creating a white texture of say 32x64, then drawing red lines down either side, and applying it to a segment replicates the track segment lines in the original. <br><br>Is there perhaps a simpler way without adding more triangles/meshes/surfaces?<br><br>As for the 'updated textures' this really is an after thought and although easily written into the final version, I plan to keep the classic original look available throughout (unless of course anyone with the licensing to the original objects to my game, in which case I will do the honourable thing and branch it off into my own version) as you might notice in the screenshots, not all of the textures are my own, some are borrowed from the blitz examples until I have time to do my own.<br><br>As for Addmesh, I'll be looking into it tonight. <br><br></td></tr></table><br>
<a name="876818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> For my SRX track editor I create one surface for the track - each segment is created and depending upon the length of that segment I just increment the UV coord in the V direction to tile the texture along the track independently of the track segment length (ie. 1 texture metre is always 1 track metre, even if that metre is made from 1 segments or 20 segments).<br><br>You should be able to easily tile your texture down the track - just calculate your V coord as you generate the track mesh.<br><br>My track surface has a flat top then a 2-poly curve which leads into the vertical sides - this allows the cars to rub along the edge but still recover if the driver thinks quickly - with a flat track top and vertical sides it was very unforgiving.<br><br>The only bits I place on a seperate surface are the vertical ends of the jumps, because I don't want Blitz to smooth around the edge of these onto the track. <br><br></td></tr></table><br>
<a name="876835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very good first release. The gameplay already feels close to the original.<br><br><br>To pick up on the comments about suspension/weight ..<br><br>I would say the car needs to be more bouncy (which I guess is what you are aiming for with the addition of springs/suspension). I remember on the original when you go quickly over bumps the car would bounce, creak and groan it's way through. Another example, when touching down onto a flat part of the track after a long jump the car would bouce up again a little before settling down<br><br>I look forward to see the damage bar. Are you going to mimic the originals creak-o-meter? I used to love watching that increase as the car got more punishment<br><br>The already mentioned auto re-centering of the car to the track should be the icing on the cake as far as control is concerned<br><br>For the tilt you mention putting more weight on the front makes the vehicle topple over in some tracks. How about you cap the maximum amount of tilt for the car? I think even the original never titled forward more than a specific degree(?) <br><br></td></tr></table><br>
<a name="876955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> 12fps, black track (no textures?). :(<br><br>Intel On Board 82845G<br>512k<br>2.93 ghz Celeron<br><br>Runs most B3D stuff ok. Probably the surface problem you mentioned. <br><br></td></tr></table><br>
<a name="876962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> JGOware: A newer version coming soon, will see if it works any better.<br><br>I have been working on this intenseley last night. Sadly I ran out of time, but here's a sort of worklog entry:<br><br>Improved usage of texture and surfaces - whole track is now one surface using a single texture, calculated using segment positions. Also created an 'intelligent' increased poly count. The program now decides whether to use an increased poly count if it generates a bank or turn. (Just need to introduce this to the track editor)<br><br>The increased polys on the twists and turns as reduced the bobbling to nothing. the increase in polys is adjustable as well, so if necessary it could be possible for the program to test the affect on performance and raise or lower the poly count according to how much performance is available (although this might be overdoing it at least the option is there).<br><br>Turns have been greatly improved, car now rotates propotionally to how sharp it is turning and how fast it is going.<br><br>restricted the angle at which the car can topple forwards.<br><br>Added a simple shadow to the car , looks quite good, but I may need to improve it as it does act strange sometimes.<br><br>Have been trying to introduce auto align, and is a bit trickier than I expected. Auto alignment of the car is easy, finding what to align it to is another matter. I originally intended to use each segment as a mini checkpoint, but quickly discovered that it is possible to miss a check point. My plan now, is to use the same 'intelligence' in the track building to generate checkpoints at appropriate straights, particularly before and after turns or jumps. Tha last checkpoint registered can then be the point at which the crane relocates the player when derailed. these checkpoints can also be a reference point for the auto align to aim for.<br><br>This means I failed to get anywhere with bouncy suspension and although I have a cunning plan, so far no checkpoints or auto align. But bear with me.<br><br>I'll try and get an updated exe out as soon as I can. <br><br></td></tr></table><br>
<a name="876991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Turns have been greatly improved, car now rotates propotionally to how sharp it is turning and how fast it is going.  <br></div><br><br>its this kind of attention to detail that makes this seem very promising indeed....  cunning plans lol {;-) <br><br></td></tr></table><br>
<a name="877206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers blitzplotter.<br><br>The more I do this the more it writes itself.<br><br>Exe now has all of the above improvements with the addition of auto-aligned steering. I have also incorporated checkpoints and added turbo speed. (right ctrl) there's nothing to acknowledge its use eccept increased speed.<br><br>I still haven't done the bouncy suspension yet,but have done a lot of tweaking to the controls of the car, it is even almost ready to add ai players. The checkpoints are autocreated by the system so even novice users will be able to create tracks without having to worry about details, and the positioning of the checkpoints means that the program will be able to run it's own tests on the track to see a) if jumps are viable keeping for a playable game, and b) to determine the best speeds to approach certain points on the track.<br><br>The only other thing left to see is how well it performs on lower specs. I tested yesterdays version on a 1Ghz pc with Geforce 2MX, and it gave a respectable 30fps.<br><br>As for the intel chipset users. I'm still using textures to draw the track and haven't added vertex colors as an alternative yet.<br><br>Which reminds me, pressing w now switches to wireframe so you can see the polys. I put this in whilst improving the track to a single surface, it helped me iron out bugs no end.<br><br>Will hopefully have a link up for the new one in the next 24 hours. (I'll look for some webspace to stick it in). <br><br></td></tr></table><br>
<a name="877218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll host it for you WMsteadman if you e-mail it to me. <br><br></td></tr></table><br>
<a name="877225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers m8. It's on it's way to you now. :) <br><br></td></tr></table><br>
<a name="877229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ooh, no wait: I just spotted rapidshare in another forum. Here is the link to my latest version:<br><br><a href="http://rs258.rapidshare.com/files/117702759/SCR_TEST10b.zip" target="_blank">http://rs258.rapidshare.com/files/117702759/SCR_TEST10b.zip</a><br><br>Thanks again for hosting it properly Stevie G. I think I need to set up a proper home online for my stuff. Just one of those things I never got round to since the last time I changed broadband providers.<br><br><a href="http://www.steviegoodwin.plus.com/SCR_TEST10b.zip" target="_blank">http://www.steviegoodwin.plus.com/SCR_TEST10b.zip</a><br><br>Still less than 700k folkes. <br><br></td></tr></table><br>
<a name="877234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> FPS in now averaging 46 to 50... looking good.  Same specs as above <br><br></td></tr></table><br>
<a name="877284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wayne,<br><br>This version is quite rough for me compared to the last one<br><br>- There are a few places where the whole demo slows right down (corners /flats). After an initial lap everything is ok. I'll restart the PC later and check again. Sometimes that cures these situations for me<br>**** EDIT -- Yup. A reset has solved this problem<br><br><br>- The texture from the edges of the track are bleeding into the main road area making everything look a little messy. If you stop near a corner you will see what I mean<br><br>- For me the steering speed and car speed are way too fast now. Somewhere half-way between this version and the last would be better. Currently the handling feels too easy and there is next to no challenge when corning (but I guess others will say opposite to this).<br><br>- The front needs to be a little heavier. You really want the car to look like its going to nose dive into the track after a big jump for example. Again, slowing the speed down will allow time for the car to tilt anyway<br><br>+ Better control system now. Great!<br><br>- Although, if you travel in the opposite direction the car becomes uncontrollable due to it trying to align with the opposite end of the track<br><br>- Secondly, if you stop on a bend the car trys to turn all by itself (left or right). Talking of corners, the In-Car view suffers a little bit of vibration when running around corners<br><br>(Hopefully all of that does not sound too nit-picking)<br><br>There, that should keep you busy !! ha !!<br><br><br><br>To sum up about the speed<br>=====================================<br>The original was all about learning the correct aproach speed for each jump. You had to be pretty accurate otherwise you would run short or overshoot the jump.<br>Therefore, the control of the vehicles speed is vital. The player needs to be able to slowly build up speed (or use the turbo when running out of space) in order to get the vehicle running at the best MPH before an approach. Be it cornering or jumping.<br>Equally, the vehicle should gradually slow down by itself (the player using brakes if necessary). Currently, the demo is way too fast in both areas giving no time to think and plan. Hope that helps <br><br></td></tr></table><br>
<a name="877301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkMere</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree Jim above that the new version is a little messy regarding the texture bleeding onto the road.<br><br>I like the speed, at least using my laptop, not tried it on my desktop yet. The last version was giving me 7fps on my laptop, its now steady at 30fps. <br><br></td></tr></table><br>
<a name="877362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, it feels too twitchy now - the previous version had a nicer sense of weight to the car, but was just too slow. This one is too fast and twitchy, the auto-centre is too severe, but even though it's faster it's still very easy to make all the corners at top speed.<br><br>Based on the first demo, maybe you needed to keep the slower steering but allow the car to accelerate a bit faster to reach a higher overall speed.<br><br>Also, you need some form of gravity so it slows down when climbing a hill, and accelerates when going downhill. <br><br></td></tr></table><br>
<a name="877388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I know what you mean, on all counts. The texture bleeding is a bit strange, I used a line picker to place the shadow on the surface of the track, but since I made the track pickable, it has been doing all sorts of strange things, with or without entityfx.<br><br>I also think the corner mesh isn't quite right, I wasn't sure how noticable it was. I'll address it.<br><br>Thank god you think it's too fast, I thought so too. I also noticed after releasing it this morning that the corners can be negotiated at an exact same trajectory no matter the speed. I'll get back on them, the maths are already in place, I just have to tweak the variables.<br><br>As for reversing. I conciously put the auto align in so that the car would do so in forward or reverse, however judging by your reaction, it is obviously no good when the player is not expecting it. I can switch that off easily.<br><br>weight and nosediving, are just var tweaks as well, except at the moment when the car begins to nose dive, it's trajectory heads the way the nose is facing. I'll look at how I can improve this.<br><br>the influence of gravity on hills is already there, I guess it doesn't influence enough. again, I'll sort it.<br><br>Overall, cheers again for all the feedback, it's all constructive. I may not be updating this until the end of the week now, as some stuff has come up I gotta sort. <br><br></td></tr></table><br>
<a name="877516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Geehawk</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another observation. <br>In the later (and like others IMO worse demo) you now seem to be able to drive up vertical surfaces. i.e. if you leave the track you can drive back up the walls onto (or more usually right over) it. <br><br></td></tr></table><br>
<a name="877568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BIG BUG</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vorderman &amp; WMSteadman <br>This one might come in handy for setting up the vertex normals of your tracks properly: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2176" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2176</a> <br><br></td></tr></table><br>
<a name="879219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers Big Bug.<br><br>I have worked out my texture bleed problems. I have been a bit busy lately so I had to put SCR on hold for a bit. But I am back on it. And focusing on the trackeditor to suit the modifications made to the demo's mesh. also added a nice little extra of bridges so figure 8 tacks are possible either with jumps or by tunnelling underneath. also a structurally impossible spiral can be acheived, great for coaster style levels.<br><br>will keep you posted. <br><br></td></tr></table><br>
<a name="882119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foolish</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow.  Awesome work.  Please keep it up.  I loved the old PC Game Stunts from the early 90's.  Nothing has compared since.  Really impressive stuff, amigo.  More power to you. <br><br></td></tr></table><br>
<a name="885319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi everyone,<br><br>I've been away from the picture for a week or so, and my time on this has now been limited. If I don't get this finished by end of August, I'll release the source and hope someone else can finish it.<br><br>However, I've nearly finished the track editor, it just needs polishing up. Currently Load and save disabled, but the whole thing is in a single exe so people can have aplay and see how it works.<br><br><a href="http://rapidshare.com/files/125147775/SCRED01.zip.html" target="_blank">http://rapidshare.com/files/125147775/SCRED01.zip.html</a><br><br>Feedback welcome, but I won't have time to make any drastic changes. most of it should be self explanitory, and there is no track completion wizard at the moment.<br><br>Have a play and see what you think.<br><br>Cheers all. <br><br></td></tr></table><br>
<a name="885325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Network Error (tcp_error)<br><br>A communication error occurred: ""<br>The Web Server may be down, too busy, or experiencing other problems preventing it from responding to requests. You may wish to try again at a later time.<br> <br></div> <br><br></td></tr></table><br>
<a name="885328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Judd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sadly - same message as Perturbatio above :(<br><br>Mark <br><br></td></tr></table><br>
<a name="885331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems quite good although very fiddly at first.  The 'left mouse to increase, right to decrease' thing confused me.<br><br>[edit] I didn't have any problems at all downloading from Rapidshare.  Click on 'advanced' options and try another server. <br><br></td></tr></table><br>
<a name="885338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers GFK. As I say, needs tidying up abit. I wasn't gonna do the left/right mouse bit at first, which is why there are so many needless buttons. But it is a part of the GUI I plan to clean up. I found clicking on one button for increase and another for decrease, was far too time consuming overall. <br><br></td></tr></table><br>
<a name="885361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Judd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> "You have reached the limit for Free users......<br>......you can wait 134 minutes"<br><br>Guess i'll have to wait a while longer to have a look ;)<br><br>cheers,<br><br>Mark <br><br></td></tr></table><br>
<a name="885362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> "You have reached the limit for Free users......<br>......you can wait 134 minutes"<br><br>Guess i'll have to wait a while longer to have a look ;)<br><br>cheers,<br><br>Mark  <br></div>That means your IP has recently downloaded something quite big from rapidshare already. <br><br></td></tr></table><br>
<a name="885914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> looking good, have downloaded and briefly tried it, will critique it for you soon.  regards, BP. <br><br></td></tr></table><br>
<a name="885924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; I found clicking on one button for increase and another for decrease, was far too time consuming overall<br><br>I aggree with you. Less is more<br>Although I find the control too sensitive. As an example, when I click a mouse button on an icon I find the changes it makes to the track a bit drastic. I think it would be better if you could hold the LMB on an icon and move the mouse up/down to control the change. Just an idea for you <br><br></td></tr></table><br>
<a name="885943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers BP and Jim.<br><br><div class="quote">  Although I find the control too sensitive. <br></div><br><br>The top row of buttons allow single clicks for small changes the bottom row allows for more drastic changes. I am guessing you found the bottom row first. But I will consider your suggestion of click and drag for some modifications. It wouldn't take too much to change/add that idea. <br><br></td></tr></table><br>
<a name="889325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Axel Wheeler</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great job and fun to play with.<br><br>Too bad we can't save the track; I already want to try it out!<br><br>My thoughts (I apologize in advance if I'm repeating someone's issues from above; I think I've read all of this thread but not all recently):<br><br>- I agree the fine tuning controls are so fast the values go to the maximum before I can let off the button.  Presumably this isn't true on all machines and is a bug.<br><br>- The turn angle choices are too few.  The fastest turn (5 degrees) is still pretty tight.  I had to alternate one 5 degree segment with three straight segments to get the turn I wanted (that did work pretty well, but it's cumbersome).  Suggestion: Use .1, .5, 1, 5, 10 and 20 degree choices for the lower buttons, and allow the fine tuning control to start at .1 and go by tenths.<br><br>- Do you plan to save the track as a mesh or as a text (or binary) datafile of segments with turn, ramp and twist angles, etc.  The latter would be easier since saving meshes in Blitz can be oddly cumbersome.  Of course you then have to parse it when you read it back in, which could also be cumbersome.  But at least no-one will mess with your tracks in Blender... :-)<br><br>- When I brought the track ends together they seemed to line up fairly closely, but clearly this won't always be the case.  Will there be a Link button to morph the final segment as needed to fit the first?  Othersize users will have to spend a bunch of time fiddling with the final turn.<br><br>- Curious: Are you adding vertices for each straight section in a row or just stretching a single straight section in the actual mesh?  Some folks will want to push the envelope on the overall length of the track, and that would make a vast difference for us, er, I mean them...<br><br>- Track width control?<br><br>- You might want to include this track editor into the main program exe rather than a separate program.  That would allow the user to hit a Play button and try the track out without having to save it first (Yes the editor could background save the track and then launch the game with a parameter set to load the edited track, but it doesn't look like such a big program that it's really necessary - and I bet it's difficult to get something like that right the first time you try it.)<br><br>Good luck WMS and thanks for letting us try it out. <br><br></td></tr></table><br>
<a name="894976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone want the unfinished source code for this? My wife has had a baby boy, and I have had a problem with redundancy at work, so I have no time to work on this at the moment.<br><br>I'll post it all up in a zip if anyone is interested. <br><br></td></tr></table><br>
<a name="895009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mortiis</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very generous offer. I'm sure a lot of people will be happy to have it. Especially puki :)<br><br>Congrats with the baby! <br><br></td></tr></table><br>
<a name="895043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> engage ! <br><br></td></tr></table><br>
<a name="895052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chwaga</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> I second Mortiis. <br><br></td></tr></table><br>
<a name="896001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Congrats on the baby!  my 2 are 7 and 9 now....<br><br>Very generous offer on the source code.  All the best for the future (;-) <br><br></td></tr></table><br>
<a name="898512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the congrats, folkes. Here is the source and executables. There a bit mixed up as it was all in development, but I have sort of commented it where necessary. Perhaps I'll be able to pick this up where I left it in the future, but for now, if anyone else can finish it then all the better, so we can play a classic again!<br><br><a href="http://rapidshare.com/files/140021332/SCR_Source.zip.html" target="_blank">http://rapidshare.com/files/140021332/SCR_Source.zip.html</a><br><br>In answer to some of axels questions:<br>I had hoped to implement a track wizard to finish them off better. <br><br>The angles were at 5 10 and 20 because they best fitted the tracks of the original game it would not be difficult to implement smaller increments I designed the buttons to be quite configurable within the code.<br><br>as for fine tuning. there are fine tuning buttons already there.<br><br>Track width would be a cool idea, but I was hoping to recreate the original first then make improvements.<br><br>I originally planned to save the tracks as data files, and parse them into the game. Although I had not ruled out the possibility of exporting them to meshes at a latter date as per blitzplotters request. I was going to make some tracks built into the code, that would be the originals that could not be edited or exported, but user created tracks, I figured only fair to allow users to do whatever they liked with their own creations.<br><br>The straights are currently additional verexs, but you kinda read my mind. The final version I planned to make straights as just one long segment, mainly to reduce the polys, since I had to increase the polys by a great deal on corners to make it smoother.<br><br>Finally the track ed was going to be including in the main game, I had even intended to do a test button so that the computer could examine the track and ensure that it was possible to complete it and so that the user could test drive the track themselves. All stuff I still intend to try and put in, if I get the time.<br><br>For now, it's feeding, nappy changing and job hunting time.... <br><br></td></tr></table><br>
<a name="898640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chwaga</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> lookin good!<br><br>However, I can't seem to load a map I've made into the game, I've gone into the source code, used the other Load Function, but it comes up looking wrong, and I don't collide with anything but the ground.  <br><br><br>There should also be a way to get back up when you fall (maybe an option to add rails in the editor?)<br><br><br>??? <br><br></td></tr></table><br>
<a name="898757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; There should also be a way to get back up when you fall<br><br>F1 resets you<br><br><br>I have made a few tweaks to the code. Mainly for speed and braking control. In the original this was a vital key area for timing the jumps.<br>In the version below the car very gradually slows down when no keys are in use. You should be able to make the first jump now at a speed of 185 and the next at around 180<br><br>The handling is a little less friendly too because I think the inital handling makes things too easy for the player<br><br>On-screen info updated and you can now hide the text<br><br>See source below<br><br>TODO<br>================<br>1) What this game really needs is bounce for the car but it's beyond my scope<br>2) The shadow needs fixing beneath the car so that it does not disappear<br>3) When cornering the skybox and car tend to judder<br><br><br><br>MANY THANKS TO WAYNE FOR THE SOURCE. ITS GOOD STUFF!!<br><br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
AppTitle="SCR TEST"

Graphics3D 800,600 ;,0,2
SetBuffer BackBuffer()

Const MAX_SPEED = 1.8	; max speed of car without turbo
Const MAX_TURBO = 2.7	; max speed of car with turbo

Const ehx#=0.1 , ehy#=0.1; edge height
Const widen#=0
Const minheight#=1
Const tris=2

;Global camera,plane,light
Global pivot=CreatePivot()
Global p1.cartype
Global size#=3
Global view=1
Global reset=0
Global checkpoints=0

Global anga#,angb#,diff#


Const body=1,wheels=2,scene=3,ground=4,checkp=5

Collisions body,scene,2,2
Collisions wheels,scene,2,2
Collisions body,ground,2,2
Collisions wheels,ground,2,2
Collisions wheels,checkp,2,0

Type CarType
	Field Model
	Field shadow
	Field Vx#, Vy#, Vz#,prev_X#,prev_y#,prev_z#
	Field Acceleration#
	Field Brakes#
	Field Friction#
	Field Traction#
	Field Speed#
	Field steering#
	Field steeringspeed#
	Field turn#
	Field weight#
	Field frontweight#
	Field oldturn#
	Field maxSpeed#
	Field turbospeed#
	Field reversespeed#
	Field checkpoint
	Field next_checkpoint
	Field Wheel[4]
	Field wheelpiv[4]
	Field radius#[4]
	Field spin#[4]
	Field chasecam
	Field camera
	Field incarcam
	Field careye
	Field lamp
End Type


Type seg
	Field main_pivot ; main piv point (bottom of T)
	Field front_pivot
	Field bl_pivot
	Field br_pivot
	
	Field top_pivot
	Field tl_pivot
	Field tr_pivot
	
	Field top_pointer
	Field tl_pointer
	Field tr_pointer
	
	Field er_pivot
	Field el_pivot
	
	Field track_mesh ;meshes and surfaces
	Field track_surf
	Field wall_surf
	Field edge_mesh
	Field edge_surf
	
	Field numtris
	Field surface_f[tris]
	Field surface_m[tris]
	Field surface_r[tris]
	
	Field surface_rl ; vertices for top surface
	Field surface_rr
	Field surface_fl
	Field surface_fr
	Field surface_fm
	Field surface_rm
	
	Field surface_rlm ; extra vertices added
	Field surface_flm
	Field surface_rrm
	Field surface_frm
	
	Field leftside_top_front ; vertices for leftside
	Field leftside_bot_front
	Field leftside_top_rear
	Field leftside_bot_rear

	Field rightside_top_front ; vertisces for rightside
	Field rightside_bot_front
	Field rightside_top_rear
	Field rightside_bot_rear
	
	Field leftedge_top_front
	Field leftedge_bot_front
	Field leftedge_top_rear
	Field leftedge_bot_rear

	Field rightedge_top_front
	Field rightedge_bot_front
	Field rightedge_top_rear
	Field rightedge_bot_rear

	Field checkpoint
	Field checkpointcounter
	Field next_checkpoint
	Field prev_checkpoint
	Field height#
	Field slope#
	Field twist#
	Field turn#
	Field angle#
	Field jump#
	
End Type

Dim segment.seg(8000)
Dim copyseg.seg(8000)

;
; LOAD THE BUTTONS IMAGE
;
;Global buttons=LoadImage("images\buttons_small.png")
;MaskImage buttons,255,0,255

;
; SETUP GLOBAL VARIABLES FOR MAIN TEXTURES AND BRUSHES
;

Include "tracks\newtest.bb"
Include "includes\environment.bb"


textures=True
camera=CreateCamera()
;
; SETUP MAIN LIGHTING
;
;light=CreateLight(2)
;PositionEntity light,100,1000,0
;TurnEntity light,0,45,0
;LightColor light,-255,-255,-200
;LightRange light,5000
;marker(light)
set_daylight()

;
; SETUP MAIN CAMERA VIEW
; 
;Global campiv=CreatePivot()
;Global camera=CreateCamera(campiv)
;CameraViewport camera,0,ImageHeight(buttons),GraphicsWidth(),GraphicsHeight()-ImageHeight(buttons)
;MoveEntity campiv,0,8,0


;
; CREATE THE STARTING PIVOTS (SEGMENT 0)
;
segment(0)=create_pivots(0)

;
; CREATE GLOBAL VARIABLES FOR EDITOR
;
Global slope# ,twist# ,turn#                ; edit variables
;Global aslope ,ahileft ,ahiright ,aturn ,anumsegs       ; targets active flags

Global segments=0
Global edit_seg=0,old_seg=0
Global pointers=1


p1=car_create(200,100,100)

load()


;
; now for the main program loop
;
clock#=MilliSecs()+1000 : counter=0
targetday#=1 : actualday#=1
Repeat
	timer#=MilliSecs()
	If timer#&gt;clock#
		clock#=MilliSecs()+1000
		fps=counter	
		counter=0
	Else
		counter=counter+1
	EndIf

	car_update(p1)
		
	If KeyHit(59) Then reset=200 ; ESCAPE key

	If (KeyHit(156) Or KeyHit(14)) Then targetday=1-targetday ; numpad ENTER or BACKSPACE
	actualday#=set_daylight(actualday+((targetday-actualday)/100))	

	If reset&gt;0
		reset=reset+1
		If reset&gt;100
			p1=reset_pos(p1)
			reset=0
			UpdateWorld
		EndIf
	EndIf

	If KeyHit(17) Then wire=1-wire ; key 'W'
	WireFrame wire

	; finally update the world and render it		
	UpdateWorld
	RenderWorld

	If KeyHit(35) Then hidetext=1-hidetext ; key 'H'
	If hidetext=0
		showtext( 400,10,"ARROWS                   = MOVE CAR")
		showtext( 400,20,"LCTRL / RCTRL            = TURBO")
		showtext( 400,30,"NUMPAD ENTER / BACKSPACE = TOGGLE DAYLIGHT")
		showtext( 400,40,"F1                       = RESET")
		showtext( 400,50,"ESC                      = QUIT")
		showtext( 400,60,"H                        = HIDE/SHOW THIS TEXT")
	EndIf

	sped=Int(p1\speed*100) : showText( 11,51,"SPEED:"+sped);+p1\speed)

	If reset&gt;0 Then showText (09,09,"RESET IN: "+(5-(reset/100)))
	showText (GraphicsWidth()-100,GraphicsHeight()-30,"FPS:"+fps)

	;showtext(10,70,"PITCH:"+EntityPitch(p1\model))
	;showtext(10,85,"YAW:  "+EntityYaw(p1\model)+"  -  "+EntityYaw(p1\model,True))
	showtext(10,125,"CHECKPOINT:"+segment(p1\checkpoint)\checkpointcounter)
	showtext(10,145,"NEXT  :"+segment(p1\next_checkpoint)\checkpointcounter)
	showtext(10,165,"DISTANCE:"+EntityDistance(p1\careye,segment(p1\next_checkpoint)\top_pivot))

	
	Flip
Until KeyHit(1)

Function showtext(x,y,d$)
	Color 0,0,0 : Text x+1,y+1,d$
	Color 255,255,255 : Text x,y,d$

End Function




; *************************************
;
;	FUNCTIONS START HERE
;
; *************************************

;
; aligns the minicams with a specified peice
;
Function align_cam(peice=1,zoom=20)
	If peice&gt;0
		r.seg=segment(peice)
		tempiv=CreatePivot(r\front_pivot)
		ypos#=(VertexY(r\track_surf,r\surface_rl)+VertexY(r\track_surf,r\surface_rr))/2
		MoveEntity tempiv,0,ypos#,0
	
		p.seg=segment(peice)

		ypos#=(VertexY(p\track_surf,p\surface_rl)+VertexY(p\track_surf,p\surface_rr))/2
	
		PositionEntity thecampiv,EntityX(tempiv,True),EntityY(tempiv,True),EntityZ(tempiv,True)	
	
	EndIf
	FreeEntity tempiv
End Function

;
; track alternates in texture
; a = track peice number
; b = the divisible by number
; c = the remainder filter
; d = option 1 var
; e = option 2 var (alternative)
;
Function alternate#( a=1 , b=16 , c=7 , d#=0.5 , e#=0 )
	g=a Mod b
	If g&gt;c
		f#=d
	Else
		f#=e
	EndIf
	Return f
End Function


;
; New button Function
;
Function button#(x=0,desc$="",value#=0,hit=0,amount#=0,max#=34567,min#=34567)
	test=button_range(x,0,64,96,hit,desc$)
	If test=1 Then value=value+amount
	If test=2 Then value=value-amount
	If test=3 Then value=0

	If value&lt;min And min&lt;&gt;34567 Then value=min
	If value&gt;max And max&lt;&gt;34567 Then value=max

	Color 0,0,0
	fn#=Int(value*100) : fn=fn/100 : f$=fn# : f$=RSet$(f$,7)
	Text x+4,32+3,f$
	Color 255,255,255
	Text x+3,32+2,f$

	Return value#
End Function

Function button_range(x1=0,y1=0,x2=0,y2=0,hit=0,info$="")
	check=False
	
	If MouseX()&gt;x1 And MouseX()&lt;x1+x2
		If MouseY()&gt;y1 And MouseY()&lt;y1+y2
			If info$&lt;&gt;"" Then message(info$)
			check=-1
			If hit&gt;0 Then check=hit
		EndIf
	EndIf
	
	Return check
End Function

;
; Check all the buttons and affect the appropriate values
;
Function check_buttons(hit)
	oldslope#=slope#
	oldtwist#=twist#
	oldturn# =turn#

	slope#=button(000,"CHANGE THE SLOPE STEEPNESS",slope#,hit,0.2,10,-10)
	twist#=button(064,"CHANGE THE TWIST ANGLE"    ,twist#,hit,0.2,10,-10)
	turn# =button(126,"CHANGE THE TURN ANGLE"     ,turn# ,hit,  5,20,-20)
	
	If button_range(256,64,32,32,hit,"SAVE CURRENT TRACK")&gt;0 Then save()
	If button_range(288,64,32,32,hit,"LOAD CURRENT TRACK")&gt;0 Then load()
	
	If button_range(288,00,32,32,hit,"SHOW/HIDE POINTERS")&gt;0
		pointers=1-pointers
		showhide_pointers()
	EndIf
		
	If hit
		correct_pivots(edit_seg)
		correct_segment(edit_seg)
		
		If edit_seg&lt;segments Then refresh(edit_seg)
	EndIf

	Text 20,400,edit_seg+"   "+segments
	Text 20,420,segment(edit_seg)\angle+"   "+segment(edit_seg)\turn#

	get_settings(edit_seg)
End Function

;
; copy data to a duplicate array
;
Function copy_data.seg(peice=1,target=-1)
	If target&lt;0 Then target=peice
	If copyseg(target)=Null Then copyseg(target)=New seg
	
	p.seg=segment(peice)
	n.seg=copyseg(target)
	
	n\height#=p\height#
	n\slope# =p\slope#
	n\twist# =p\twist#
	n\turn#  =p\turn#
	n\angle# =p\angle#
	n\jump#  =p\jump#
	
	Return n
End Function

Function get_copy_data(peice)
	slope#=copyseg(peice)\slope#
	twist#=copyseg(peice)\twist#
	turn# =copyseg(peice)\turn#

End Function

;
; make any changes to pivots
;
Function correct_pivots(peice)
	p.seg=segment(peice)
	
	r.seg=segment(peice-1)
	
	diff#=slope#-(EntityY(p\top_pivot,True)-EntityY(r\top_pivot,True))
	MoveEntity p\top_pivot,0,diff#*size,0

	diff#=twist#-(EntityY(p\tl_pivot,True)-EntityY(p\tr_pivot,True))
	MoveEntity p\tl_pivot,0,(diff#/2)*size#,0
	MoveEntity p\tr_pivot,0,(-(diff#/2))*size#,0
	
	RotateEntity p\front_pivot,0,turn#,0
	
	p\height#=EntityY(r\top_pivot,True)
	p\slope# =slope#
	p\twist# =twist#
	p\turn#  =turn#	
	p\angle# =r\angle+turn#
	p\jump#  =jump#

End Function

Function create_checkpoints(alpha#=0.0)

	checkpointmain=CreatePivot()

	For peice=1 To segments-1
		r.seg=segment(peice-1)
		create=False
		p.seg=segment(peice)
		n.seg=segment(peice+1)

		; the first type of checkpoint is a ramp edge (previous goes up and next goes down).
		If r\slope&gt;0 And p\slope&lt;0 Then create=True
		;If r\slope&lt;0 And p\slope&gt;0 Then create=True
		; the next 2 types of checkpoints are for hills
		If r\slope&gt;0 And p\slope=0 Then create=True ; if uphill stops
		If r\slope=0 And p\slope&lt;0 Then create=True ; if flat begins downhill

		; finally turns are necessary for computer player and human straights		
		If n\turn&lt;&gt;0 And p\turn=0 Then create=True ; if the next seg is a turn and the current one is not
		If p\turn&lt;&gt;0 And n\turn=0 Then create=True ; if the current seg is a turn and the next is not.

		If peice&gt;4 And p\turn&lt;&gt;0 
			If segment(peice-4)\checkpoint&lt;&gt;0
				create=True
			EndIf
		EndIf

		If create
			thecheckpoint=CreateMesh(checkpointmain)
			check_surf=CreateSurface(thecheckpoint)

		
	
			fly#=EntityY(p\tl_pivot,True); same height as current peice topleft pivot
			fry#=EntityY(p\tr_pivot,True); same as topright	

			; move the pivots wider apart
			MoveEntity p\bl_pivot,-1*size,0,0 
			MoveEntity p\br_pivot,+1*size,0,0
			
			bflx# = EntityX( p\bl_pivot , True )
			bflz# = EntityZ( p\bl_pivot , True )
	
			bfrx# = EntityX( p\br_pivot , True )
			bfrz# = EntityZ( p\br_pivot , True )
			
			; and move them back again
			MoveEntity p\bl_pivot,-1*size,0,0
			MoveEntity p\br_pivot,+1*size,0,0

			tl=AddVertex( check_surf, bflx , fly + (100 * size) , bflz , 0 , 0 )
			tr=AddVertex( check_surf, bfrx , fry + (100 * size) , bfrz , 1 , 0 )
			bl=AddVertex( check_surf, bflx , 0                  , bflz , 0 , 1 )
			br=AddVertex( check_surf, bfrx , 0                  , bfrz , 1 , 1 )
	
			AddTriangle check_surf,tl,tr,bl
			AddTriangle check_surf,tr,br,bl

			EntityPickMode thecheckpoint,2
			EntityAlpha thecheckpoint,alpha#


			; load the data into the segment info
			p\checkpoint=thecheckpoint
			p\next_checkpoint=-1
			t=peice
			Repeat
				t=t-1
			Until t=0 Or segment(t)\next_checkpoint=-1
			segment(    t)\next_checkpoint=peice
			If t=0 Then t=-1
			segment(peice)\prev_checkpoint=t
		
			checkpoints=checkpoints+1
			p\checkpointcounter=checkpoints
		EndIf
	Next
	
	; loop the checkpoints
	prev=0 : Nxt=0
	For t=0 To segments
		If segment(t)\prev_checkpoint=-1 Then prev=t
		If segment(t)\next_checkpoint=-1 Then Nxt=t
	Next
	segment(nxt )\next_checkpoint=prev
	segment(prev)\prev_checkpoint=nxt


End Function

;
; make any corrections to specified segment
;
Function correct_segment(peice)
	; this function aligns the mesh upto the pivot points stored within a segment

	p.seg=segment(peice)
	
	; this may need to change
	r.seg=segment(peice-1)

	
	;sort get ypos's first
	rly#=EntityY(r\tl_pivot,True); same height as the topleftpivot of previous peice
	rry#=EntityY(r\tr_pivot,True); same as topright pivot of prev peice
	
	fly#=EntityY(p\tl_pivot,True); same height as current peice topleft pivot
	fry#=EntityY(p\tr_pivot,True); same as topright
	
	; next get the xpos's
	rlx#=EntityX(r\tl_pivot,True)
	rrx#=EntityX(r\tr_pivot,True)
	
	flx#=EntityX(p\tl_pivot,True)
	frx#=EntityX(p\tr_pivot,True)
	
	; finally the zpos's
	rlz#=EntityZ(r\tl_pivot,True)
	rrz#=EntityZ(r\tr_pivot,True)
	
	flz#=EntityZ(p\tl_pivot,True)
	frz#=EntityZ(p\tr_pivot,True)

	; bottom pivots are slightly wider so x and z are needed
	brrx# = EntityX( r\br_pivot , True )
	brrz# = EntityZ( r\br_pivot , True )
	
	brlx# = EntityX( r\bl_pivot , True )
	brlz# = EntityZ( r\bl_pivot , True )
	
	bflx# = EntityX( p\bl_pivot , True )
	bflz# = EntityZ( p\bl_pivot , True )
	
	bfrx# = EntityX( p\br_pivot , True )
	bfrz# = EntityZ( p\br_pivot , True )

	; also get the position of the edge tops
	erlx# = EntityX( r\el_pivot , True )
	erly# = EntityY( r\el_pivot , True )
	erlz# = EntityZ( r\el_pivot , True )
		
	; same for the position of the rear right position
	errx# = EntityX( r\er_pivot , True )
	erry# = EntityY( r\er_pivot , True )
	errz# = EntityZ( r\er_pivot , True )
		
	; front left is taken from the pivot positions of the new segment
	eflx# = EntityX( p\el_pivot , True )
	efly# = EntityY( p\el_pivot , True )
	eflz# = EntityZ( p\el_pivot , True )

	; same for the position of the front right position
	efrx# = EntityX( p\er_pivot , True )
	efry# = EntityY( p\er_pivot , True )
	efrz# = EntityZ( p\er_pivot , True )

	; now alter the meshe accordingly
	numtris=p\numtris

	For t=0 To numtris
		
		fx#=flx# + ( ((frx# - flx# ) / numtris) * t ) 
		rx#=rlx# + ( ((rrx# - rlx# ) / numtris) * t )
		mx#=(fx#+rx#)/2
		
		fy#=fly# + ( ( (fry# - fly# ) / numtris ) * t )
		ry#=rly# + ( ( (rry# - rly# ) / numtris ) * t )
		my#=(fy#+ry#)/2
	
		fz#=flz# + ( ((frz#-flz#)/numtris) * t )
		rz#=rlz# + ( ((rrz#-rlz#)/numtris) * t )
		mz#=(fz#+rz#)/2
						
		VertexCoords p\track_surf , p\surface_f[t] , fx , fy , fz
		VertexCoords p\track_surf , p\surface_m[t] , mx , my , mz
		VertexCoords p\track_surf , p\surface_r[t] , rx , ry , rz 
	Next

	; next left side
	; front
	VertexCoords p\wall_surf,p\leftside_top_front, flx,fly, flz ; adjust left side
	VertexCoords p\wall_surf,p\leftside_bot_front,bflx,  0,bflz ; adjust left side bottom (for turns)
	; then back
	VertexCoords p\wall_surf,p\leftside_top_rear , rlx,rly, rlz ; adjust left side
	VertexCoords p\wall_surf,p\leftside_bot_rear ,brlx,  0,brlz ; adjust left side bottom (for turns)
	
	; and right side
	; front
	VertexCoords p\wall_surf,p\rightside_top_front, frx,fry, frz ; adjust left side
	VertexCoords p\wall_surf,p\rightside_bot_front,bfrx,  0,bfrz ; adjust left side bottom (for turns)
	; then back
	VertexCoords p\wall_surf,p\rightside_top_rear , rrx,rry, rrz ; adjust left side
	VertexCoords p\wall_surf,p\rightside_bot_rear ,brrx,  0,brrz ; adjust left side bottom (for turns)
	
	
	; Now the left edge
	; front
	VertexCoords p\edge_surf,p\leftedge_bot_front, flx, fly , flz ; adjust bottom of left edge
	VertexCoords p\edge_surf,p\leftedge_top_front,eflx,efly,eflz ; adjust top of left edge
	; and back
	VertexCoords p\edge_surf,p\leftedge_bot_rear , rlx, rly, rlz ; adjust bottom of left edge
	VertexCoords p\edge_surf,p\leftedge_top_rear ,erlx,erly,erlz ; adjust top of left edge

	; Finally the right edge
	; front first
	VertexCoords p\edge_surf,p\rightedge_bot_front, frx, fry, frz ; adjust bottom of right edge
	VertexCoords p\edge_surf,p\rightedge_top_front,efrx,efry,efrz ; adjust top of right edge
	; then the back
	VertexCoords p\edge_surf,p\rightedge_bot_rear, rrx, rry, rrz ; adjust bottom of right edge
	VertexCoords p\edge_surf,p\rightedge_top_rear,errx,erry,errz ; adjust top of right edge
	
	; this bit used to applyt the ramp brush. needs revisiting
	
	uy#=alternate#(peice,2,0,0.25,0)
	uy2#=alternate#(peice)	
	If p\slope#&gt;5 Or p\slope#&lt;-5
		For t=0 To p\numtris 
			brushx# = 0.250 + (0.250 * uy2# ) + ( t * ( 0.124 / numtris ) ) + 0.001		
			VertexTexCoords p\track_surf,p\surface_f[t],brushx,0.000+uy#
			VertexTexCoords p\track_surf,p\surface_m[t],brushx,0.250+uy#
			VertexTexCoords p\track_surf,p\surface_r[t],brushx,0.500+uy#
		Next		
	Else
		;VertexTexCoords p\track_surf,p\surface_fl,0.755,0.00+uy2#+uy#
		;VertexTexCoords p\track_surf,p\surface_fr,0.995,0.00+uy2#+uy#
		;VertexTexCoords p\track_surf,p\surface_rl,0.755,0.25+uy2#+uy#
		;VertexTexCoords	p\track_surf,p\surface_rr,0.995,0.25+uy2#+uy#
	EndIf
	;Then apply_brushes(peice)
End Function

;
; function to create pivots for new segments
;
Function create_pivots.seg(peice=0)
	p.seg=New seg

	; create a main pivot on which the entire peice can move
	If peice&gt;0
		p\main_pivot=CreatePivot(segment(peice-1)\front_pivot)
	Else
		p\main_pivot=CreatePivot() 
	EndIf

	; now add the rest of the bottom pivots
	p\front_pivot=CreatePivot(p\main_pivot)
	p\bl_pivot=CreatePivot(p\front_pivot)
	p\br_pivot=CreatePivot(p\front_pivot)
	; position the child pivots into appropriate locations
	PositionEntity p\front_pivot, 0, 0, 2*size#
	PositionEntity p\bl_pivot,-(4+widen)*size#, 0, 0
	PositionEntity p\br_pivot,(+4+widen)*size#, 0, 0
	; next create the top pivots
	p\top_pivot=CreatePivot(p\front_pivot)
	p\tl_pivot=CreatePivot(p\top_pivot)
	p\tr_pivot=CreatePivot(p\top_pivot)
	p\el_pivot=CreatePivot(p\tl_pivot) ; for left upper edge
	p\er_pivot=CreatePivot(p\tr_pivot) ; for right upper edge
	; including the new upper pivots
	PositionEntity p\top_pivot  , 0,+4*size#, 0 ; default height is 4
	PositionEntity p\tl_pivot   ,-4*size#, 0, 0
	PositionEntity p\tr_pivot   ,+4*size#, 0, 0
	PositionEntity p\el_pivot   ,-ehx#*size, ehy#*size, 0
	PositionEntity p\er_pivot   ,+ehx#*size, ehy#*size, 0

	; for testing purposes cubes are also created.
	;p\top_pointer=marker(p\top_pivot)
	;p\tl_pointer=marker(p\tl_pivot)
	;p\tr_pointer=marker(p\tr_pivot)

	;If pointers=0
	;	HideEntity p\top_pointer
	;	HideEntity p\tl_pointer
	;	HideEntity p\tr_pointer
	;EndIf

	Return p
End Function

Function create_segment.seg(peice=1)
	p.seg=segment(peice)

	odd=peice Mod 2
	
	uy#=alternate(peice,2,0,0,0.5)
	uy2#=alternate(peice)	
		
		
	If peice&gt;0
		r.seg=segment(peice-1)
		
		; each track peice is it's own mesh - for the editor.
		If peice=1
			p\track_mesh=CreateMesh(); p\main_pivot )
			p\track_surf=CreateSurface(p\track_mesh,track_brush)
			p\wall_surf=CreateSurface(p\track_mesh,track_brush)
			p\edge_mesh=CreateMesh()
			p\edge_surf=CreateSurface(p\edge_mesh,track_brush)
		Else
			p\track_mesh=r\track_mesh
			p\track_surf=r\track_surf
			p\wall_surf=r\wall_surf
			p\edge_mesh=r\edge_mesh
			p\edge_surf=r\edge_surf
		EndIf

		; align the top pivot with the previous segments' top peice making it flat on the y axis 
		PositionEntity p\top_pivot,0,EntityY(r\top_pivot,True),0

		; get the position of the rear left of the segment (same as the front left of previous segment)
		rlx# = EntityX( r\tl_pivot , True )
		rly# = EntityY( r\tl_pivot , True )
		rlz# = EntityZ( r\tl_pivot , True )
		
		; same for the position of the rear right position
		rrx# = EntityX( r\tr_pivot , True )
		rry# = EntityY( r\tr_pivot , True )
		rrz# = EntityZ( r\tr_pivot , True )
		
		; front left is taken from the pivot positions of the new segment
		flx# = EntityX( p\tl_pivot , True )
		fly# = EntityY( p\tl_pivot , True )
		flz# = EntityZ( p\tl_pivot , True )

		; same for the position of the front right position
		frx# = EntityX( p\tr_pivot , True )
		fry# = EntityY( p\tr_pivot , True )
		frz# = EntityZ( p\tr_pivot , True )

		; bottom pivots are slightly wider so x and z are needed
		brrx# = EntityX( r\br_pivot , True )
		brrz# = EntityZ( r\br_pivot , True )
		
		brlx# = EntityX( r\bl_pivot , True )
		brlz# = EntityZ( r\bl_pivot , True )
		
		bflx# = EntityX( p\bl_pivot , True )
		bflz# = EntityZ( p\bl_pivot , True )
		
		bfrx# = EntityX( p\br_pivot , True )
		bfrz# = EntityZ( p\br_pivot , True )

		; also get the position of the edge tops
		erlx# = EntityX( r\el_pivot , True )
		erly# = EntityY( r\el_pivot , True )
		erlz# = EntityZ( r\el_pivot , True )
		
		; same for the position of the rear right position
		errx# = EntityX( r\er_pivot , True )
		erry# = EntityY( r\er_pivot , True )
		errz# = EntityZ( r\er_pivot , True )
		
		; front left is taken from the pivot positions of the new segment
		eflx# = EntityX( p\el_pivot , True )
		efly# = EntityY( p\el_pivot , True )
		eflz# = EntityZ( p\el_pivot , True )

		; same for the position of the front right position
		efrx# = EntityX( p\er_pivot , True )
		efry# = EntityY( p\er_pivot , True )
		efrz# = EntityZ( p\er_pivot , True )
		
	
		numtris=tris
		;If ((fly=rly And fry=rry) Or (fly=fry And rly=rry)) And turn#=0 Then numtris=1
		p\numtris=numtris
		For t=0 To numtris
		
			fx#=flx# + ( ((frx# - flx# ) / numtris) * t ) 
			rx#=rlx# + ( ((rrx# - rlx# ) / numtris) * t )
			mx#=(fx#+rx#) /2
		
			fy#=fly# + ( ( (fry# - fly# ) / numtris ) * t )
			ry#=rly# + ( ( (rry# - rly# ) / numtris ) * t )
			my#=(fy#+ry#)/2
	
			fz#=flz# + ( ((frz#-flz#)/numtris) * t )
			rz#=rlz# + ( ((rrz#-rlz#)/numtris) * t )
			mz#=(fz#+rz#)/2

			brushx# = (0.250 * uy2# ) + ( t * ( 0.124 / numtris ) ) + 0.001
					
			p\surface_f[t] = AddVertex ( p\track_surf , fx , fy , fz , brushx#  , 0.00 + uy#)
			p\surface_m[t] = AddVertex ( p\track_surf , mx , my , mz , brushx#  , 0.25 + uy#)
			p\surface_r[t] = AddVertex ( p\track_surf , rx , ry , rz , brushx#  , 0.50 + uy#)
		Next	

		For t=0 To numtris-1
			AddTriangle p\track_surf,p\surface_f[t] , p\surface_f[t+1] , p\surface_m[t]
			AddTriangle p\track_surf,p\surface_m[t] , p\surface_f[t+1] , p\surface_m[t+1]

			AddTriangle p\track_surf,p\surface_m[t] , p\surface_m[t+1] , p\surface_r[t]
			AddTriangle p\track_surf,p\surface_r[t] , p\surface_m[t+1] , p\surface_r[t+1]
		Next

		; texture edges of the wall
		If odd
			wl#=0.51 : wr#=0.625
		Else
			wl#=0.625 : wr#=0.74
		EndIf

		brushx#= 0.5 + ( 0.0625 * uy# ) + (0.125 * uy2# )

		; next 4 create left side vertice
		p\leftside_top_rear =AddVertex(p\wall_surf ,  rlx , rly ,  rlz , brushx + 0.03125 , 1 ) 
		p\leftside_top_front=AddVertex(p\wall_surf ,  flx , fly ,  flz , brushx , 1 ) 
		p\leftside_bot_rear =AddVertex(p\wall_surf , brlx ,   0 , brlz , brushx + 0.03125 , 0 )
		p\leftside_bot_front=AddVertex(p\wall_surf , bflx ,   0 , bflz , brushx , 0 )
		
		AddTriangle p\wall_surf,p\leftside_top_rear ,p\leftside_bot_rear,p\leftside_top_front
		AddTriangle p\wall_surf,p\leftside_top_front,p\leftside_bot_rear,p\leftside_bot_front

		; next 4 create right side vertice
		p\rightside_top_rear =AddVertex ( p\wall_surf ,  rrx , rry ,  rrz , brushx + 0.03125 , 1 ) 	
		p\rightside_top_front=AddVertex ( p\wall_surf ,  frx , fry ,  frz , brushx , 1 ) 
		p\rightside_bot_rear =AddVertex ( p\wall_surf , brrx ,   0 , brrz , brushx + 0.03125 , 0 )
		p\rightside_bot_front=AddVertex ( p\wall_surf , bfrx ,   0 , bfrz , brushx , 0 )				
			
		AddTriangle p\wall_surf,p\rightside_top_rear,p\rightside_top_front,p\rightside_bot_rear
		AddTriangle p\wall_surf,p\rightside_bot_rear,p\rightside_top_front,p\rightside_bot_front

		; now create the right edge
		p\rightedge_top_rear =AddVertex( p\edge_surf , errx , erry , errz , 1.000 , 0.5 +uy#)
		p\rightedge_top_front=AddVertex( p\edge_surf , efrx , efry , efrz , 1.000 , 0.0 +uy#)
		p\rightedge_bot_rear =AddVertex( p\edge_surf ,  rrx ,  rry ,  rrz , 0.999 , 0.5 +uy#)
		p\rightedge_bot_front=AddVertex( p\edge_surf ,  frx ,  fry ,  frz , 0.999 , 0.0 +uy#)
		; now create the surface (outer)
		AddTriangle p\edge_surf,p\rightedge_top_rear,p\rightedge_top_front,p\rightedge_bot_rear
		AddTriangle p\edge_surf,p\rightedge_bot_rear,p\rightedge_top_front,p\rightedge_bot_front
		; and the flip side (inner)
		AddTriangle p\edge_surf,p\rightedge_bot_rear ,p\rightedge_top_front,p\rightedge_top_rear
		AddTriangle p\edge_surf,p\rightedge_bot_front,p\rightedge_top_front,p\rightedge_bot_rear
	
		; now create the left edge
		p\leftedge_top_rear =AddVertex(p\edge_surf , erlx , erly , erlz , 1.000 , 0.5 +uy#)
		p\leftedge_top_front=AddVertex(p\edge_surf , eflx , efly , eflz , 1.000 , 0.0 +uy#)
		p\leftedge_bot_rear =AddVertex(p\edge_surf ,  rlx ,  rly ,  rlz , 0.999 , 0.5 +uy#)
		p\leftedge_bot_front=AddVertex(p\edge_surf ,  flx ,  fly ,  flz , 0.999 , 0.0 +uy#)
		; create the surface (outer)
		AddTriangle p\edge_surf,p\leftedge_bot_rear, p\leftedge_top_front,p\leftedge_top_rear
		AddTriangle p\edge_surf,p\leftedge_bot_front,p\leftedge_top_front,p\leftedge_bot_rear
		; and the flip side (inner)
		AddTriangle p\edge_surf,p\leftedge_top_rear, p\leftedge_top_front,p\leftedge_bot_rear
		AddTriangle p\edge_surf,p\leftedge_top_front,p\leftedge_bot_front,p\leftedge_bot_rear


	EndIf

End Function

;
; FUNCTION TO CREATE WALL TEXTURE BRUSHES
;
Function Create_wall_brushes(texs=False,customized=True)

	c=0
	If customized Then c=10

	If texs=False
		SetBuffer TextureBuffer( track_texture )

		; set the borders
		border = 4 ; for the stripes on track
		border2 = 8 ; lines on walls

		; do the red edges first
		r=085 : g=000 : b=000
		Color r,g,b 
		Rect 0,0,512,512
		
		;next the yellow edges
		r=255 : g=255 : b=000
		Color r,g,b
		Rect 0,128,512,128
		Rect 0,384,512,128
		
		;light top surface
		r=187 : g=187 : b=153
		Color r  ,g  ,b   : Rect border,000,256-(border*2),256
		Color r+c,g+c,b+c : Rect border,128,256-(border*2),128
		
		; dark top surface
		r=153 : g=153 : b=119		
		Color r  ,g  ,b   : Rect border,256,256-(border*2),256
		Color r+c,g+c,b+c : Rect border,384,256-(border*2),128

		; red walls
		r=085 : g=000 : b=000
		Color r,g,b : Rect 256,0,128,256
		r=119 : g=051 : b=051
		Color r,g,b : Rect 256+border2,0,128-(border2*2),256
	
		; white walls	
		r=085 : g=000 : b=000
		Color r,g,b : Rect 256,256,128,256
		r=255 : g=255 : b=255
		Color r,g,b : Rect 256+border2,256,128-(border2*2),256
		

		; finally the black ramp segments
		r=000 : g=000 : b=000
		Color r,g,b : Rect 384+border,0,128-(border*2),512

		SetBuffer BackBuffer()

		; create floor grid texture
		SetBuffer TextureBuffer( grid_tex )
		Color 115,115,82:Rect 0,0,32,32
		;Color 0,0,0:Rect 0,0,32,32,False
		SetBuffer BackBuffer()
	EndIf

	BrushTexture track_brush,track_texture

	EntityTexture grid_plane,grid_tex
	EntityFX grid_plane,0
	EntityType grid_plane,ground
	EntityPickMode grid_plane,2
	
End Function

Function daylight#(day#=True)
	AmbientLight 200*day,200*day,200*day

	If 200*day&gt;100
		r=0:g=0:b=0
	Else
		r=255 : g=255 : b=200
	EndIf

	For t.cartype=Each cartype
		LightColor t\lamp,r,g,b
	Next	
	Return day
End Function

;
; delete specified segment and update the rest
;
Function delete_segment(peice=1)
	If peice&gt;1
		If peice=segments
			erase_Segment(segments)
			segments=segments-1
			If edit_seg&gt;segments Then edit_seg=segments
		Else
			refresh(peice,-1)
			edit_seg=edit_seg-1
		EndIf
	EndIf
End Function

;
; erases specified segment
;
Function erase_segment(peice)
	If peice&gt;0
		p.seg=segment(peice)

		; every surface is unique and must be cleared.
		ClearSurface p\track_surf
		ClearSurface p\track_surf
		ClearSurface p\track_surf
		ClearSurface p\track_surf
		ClearSurface p\track_surf

		; free the track mesh entity
		FreeEntity p\track_mesh
		
		; free the pivots it contained
		FreeEntity p\main_pivot
		;FreeEntity p\front_pivot
		;FreeEntity p\left_pivot
		;FreeEntity p\right_pivot
		;FreeEntity p\top_pivot
		;FreeEntity p\tl_pivot
		;FreeEntity p\tr_pivot
		
		Delete p
	EndIf
End Function


;
; THIS FUNCTION CHECKS FOR KEYPRESSES AND MOVES THE CAMERA APPROPRIATELY
;
Function get_camera_movements()
	; arrow keys can be movement
	If KeyDown(200) Then MoveEntity campiv,   0,   0, 0.5 ; up
	If KeyDown(208) Then MoveEntity campiv,   0,   0,-0.5 ; down
	
	If KeyDown(030) Then MoveEntity campiv,-0.5,   0,   0 ; left
	If KeyDown(032) Then MoveEntity campiv, 0.5,   0,   0 ; right
	
	If KeyDown(157) Then MoveEntity campiv,   0,-0.5,   0 ; rctrl
	If KeyDown(082) Then MoveEntity campiv,   0, 0.5,   0 ; kp_INS
	
	; wasd is rotation
	If KeyDown(017) Then TurnEntity camera,-1,   0,   0 ; up
	If KeyDown(031) Then TurnEntity camera, 1,   0,   0 ; down

	If KeyDown(203) Then TurnEntity campiv,   0, 1,   0 ; left
	If KeyDown(205) Then TurnEntity campiv,   0,-1,   0 ; right

End Function

;
; get settings from segment 'peice'
;
Function get_settings(peice=1)
	p.seg=segment(peice)
	slope#=p\slope#
	twist#=p\twist#
	turn# =p\turn#
End Function


;
; this hilites segment 'peice' and unhilites segment 'old'
;
Function hilite_segment(peice=1,old=1)
;	If old&lt;&gt;peice
		If old&gt;0 And old&lt;=segments
			EntityColor segment(old  )\track_mesh,255,255,255
			EntityAlpha segment(old  )\track_mesh,1
		EndIf
		If peice&gt;0 And peice&lt;=segments
			EntityColor segment(peice)\track_mesh,100,100,255
			EntityAlpha segment(peice)\track_mesh,0.75
		EndIf
;	EndIf
End Function

;
; this function inserts a new complete segment into the current edit position
;
Function insert_segment()
	If edit_seg=segments
		edit_seg=edit_seg+1
		segments=segments+1
		segment(segments)=create_pivots(segments)

		create_segment(edit_seg)
		correct_pivots(edit_seg)
		correct_segment(edit_seg)
	Else
		edit_seg=edit_seg+1
		refresh(edit_seg,1)

		;get_settings(edit_seg)

	EndIf
End Function

Function load(show=False)
	;first clear existing track
	If segments&gt;0
		Repeat
			erase_segment(segments)
			segments=segments-1
		Until segments=0
	EndIf
	edit_seg=segments

	Read total;=ReadInt(loadfile)

	For t=1 To total
		Read slope# ;= ReadFloat(loadfile)
		Read twist# ;=ReadFloat(loadfile) ; may not be needed.
		Read turn#  ;=ReadFloat(loadfile)
		Read jump#  ;=ReadFloat(loadfile)		

		insert_segment()
	Next
	EntityPickMode segment(1)\track_mesh,2
	EntityType segment(1)\track_mesh,scene
	UpdateNormals segment(1)\track_mesh
	;UpdateNormals segment(1)\edge_mesh ; turn this off if you don't want to see the edges at night
	
	create_checkpoints()

End Function

;Function load(show=False)
;	hilite_segment(-1,edit_seg)	
;	;first clear existing track
;	If segments&gt;0
;		Repeat
;			erase_segment(segments)
;			segments=segments-1
;			;align_cam(segments)
;		Until segments=0
;	EndIf
;	edit_seg=segments
;	
;	loadfile=ReadFile("NEWTEST2.TRK")
;	
;	total=ReadInt(loadfile)
;	
;	For t=1 To total
;		slope# =ReadFloat(loadfile)
;		twist# =ReadFloat(loadfile) ; may not be needed.
;		turn#  =ReadFloat(loadfile)
;		jump#  =ReadFloat(loadfile)		
;
;		insert_segment()
;		;align_cam(segments)
;		
;		; view track as it loads
;		If show Then UpdateWorld:RenderWorld:Flip	
;	Next
;	
;	segments=total
;	EntityPickMode segment(1)\track_mesh,2
;	UpdateNormals segment(1)\track_mesh
;
;	;align_cam(segments)
;	CloseFile(loadfile)
;End Function

;
; function to display message in the message box
;
Function message(display$)
	Color 0,0,0
	Text 4,ImageHeight(buttons)-16,display$	
	Color 255,255,255
	Text 3,ImageHeight(buttons)-17,display$
End Function



Function refresh(peice=1,eraseinsert=0)
		f=segments : r=f
		If eraseinsert=-1 ; -1=erase
			r=r-1
			segments=segments-1
		EndIf
		
		If eraseinsert=1 ; 1=insert
			r=r+1
			; temporarily create new peice at end but copy it into the copy data at the correct location
			segment(segments+1)=create_pivots(peice)
			create_segment(segments+1)
			correct_pivots(segments+1)
			copy_data(segments+1,peice)
			erase_segment(segments+1)
			segments=segments+1		
		EndIf

		Repeat
			copy_data(f,r)
			erase_segment(f)
			f=f-1 : r=r-1
			;UpdateWorld : RenderWorld : Text 10,400,edit_seg+"  "+segments+"  "+f: Flip : Repeat : Until KeyHit(156)
		Until f&lt;peice
		Repeat	
			f=f+1
			segment(f)=create_pivots(f)
			create_segment(f)

			get_copy_data(f)
			correct_pivots(f)
			correct_segment(f)
			;UpdateWorld : RenderWorld : Text 10,500,edit_seg+"  "+segments+"  "+f: Flip : Repeat  : Until KeyHit(156); purely for testing
		Until f=segments
End Function

Function save()
	savefile=WriteFile("NEWTEST.TRK")
	
	WriteInt savefile,segments
	
	For t=1 To segments
		WriteFloat savefile,segment(t)\slope#
		WriteFloat savefile,segment(t)\twist#
		WriteFloat savefile,segment(t)\turn#
		WriteFloat savefile,segment(t)\jump#		
	Next
	
	CloseFile(savefile)
End Function

Function showhide_pointers()
	For t=0 To segments
		If pointers
			ShowEntity segment(t)\top_pointer
			ShowEntity segment(t)\tl_pointer
			ShowEntity segment(t)\tr_pointer
		Else
			HideEntity segment(t)\top_pointer
			HideEntity segment(t)\tl_pointer
			HideEntity segment(t)\tr_pointer		
		EndIf
	Next
End Function

Function test_track()
	trackpos=0
	ypos#=0
	climb#=0
	twist#=0	 
	turn#=0
	speed#=0.5
	PositionEntity campiv,EntityX(segment(0)\top_pivot,True),EntityY(segment(0)\top_pivot,True)+1,EntityZ(segment(0)\top_pivot,True)
	counter=0
	Repeat
		p.seg=segment(trackpos)

		If oldpos&lt;&gt;trackpos
			targetturn#=p\angle#
			targettwist#=p\twist#
			
			If trackpos=0
				turn=targetturn
				twist=targettwist
			EndIf
		EndIf

		If twist&lt;targettwist*8 Then twist=twist+1
		If twist&gt;targettwist*8 Then twist=twist-1
		RotateEntity camera,0,0,-twist
		
		If turn&lt;targetturn Then turn=turn+3
		If turn&gt;targetturn Then turn=turn-3
		RotateEntity campiv,0,turn,0

		MoveEntity campiv,0,0,speed#		
		
		counter=counter+1
		
		oldpos=trackpos
		If counter=&gt;2/speed#
			counter=0
			trackpos=wrap(trackpos+1,0,segments)
		EndIf

		; align the skybox around the new camera position
		PositionEntity sky,EntityX(campiv),EntityY(campiv),EntityZ(campiv)
	
		RenderWorld
		Flip
	Until KeyHit(1)
End Function

Function WRAP#( var , v1 , v2 )
	If v1&lt;v2
		diff#=v2-v1
	Else
		diff#=v1-v2
	EndIf
	If var&lt;v1 Then var=var+diff
	If var&gt;v2 Then var=var-diff
	Return var
End Function




Function car_create.cartype(r,g,b)
	c.CarType = New CarType

	c\Model = CreateCube()
	EntityAlpha c\model,0.7
	PositionMesh c\model,0,.5,1
	ScaleMesh c\model,.8,0.75,1.5
	UpdateNormals c\model
	EntityColor c\model,r,g,b
	EntityType c\model,body
	EntityRadius c\model,.9
	
	PositionEntity c\model,0,10*size,0
	
	brush=CreateBrush()
	textu=CreateTexture(64,64)
	BrushTexture brush,textu
	
	SetBuffer TextureBuffer(textu)
	Color 0,0,0 : Rect 0,0,64,64
	Color 255,255,255:Rect 0,0,32,32 : Rect 32,32,32,32		
	SetBuffer BackBuffer()

	c\radius#[1]=0.6 : c\radius#[2]=0.6 : c\radius#[3]=0.6 : c\radius#[4]=0.6

	w=1
	For z# = 2 To 0 Step -2
		For x# = -1 To 1 Step 2
			
			temp = CreateCylinder( 16 )
			RotateMesh temp,0,0,90
			ScaleMesh temp,c\radius[w]*0.66,c\radius[w],c\radius[w]
			PaintEntity temp,brush

			c\wheelpiv[w]=CreatePivot(c\model)
			c\Wheel[w] = CopyEntity( temp, c\wheelpiv[w] )
			UpdateNormals c\Wheel[w]
			PositionEntity c\Wheelpiv[w],x*(1.22+(c\radius[w]*0.3)/2),-0.5,z*(1.2+(c\radius[w]/2))
			EntityRadius c\wheel[w],c\radius[w]
			EntityType c\wheel[w],wheels
			w = w + 1

			FreeEntity temp
		Next
	Next
	FreeTexture textu
	FreeBrush brush

	
	c\shadow = CreateCube( c\Model )
	ScaleEntity c\shadow,1.5,.02,2.25
	EntityColor c\shadow,10,10,10
	EntityAlpha c\shadow,.6
	PositionMesh c\shadow,0,0,0.9
	PositionEntity c\shadow,0,0,0
	
	c\lamp=CreateLight(3,c\model)
	PositionEntity c\lamp,0,1,1.5
	RotateEntity c\lamp,30,0,0
	LightColor c\lamp,0,0,0 ;255,255,200
	LightRange c\lamp,50
	LightConeAngles c\lamp,100,50
	;marker(lamp)

	; copy to the new lamp type
	f.lamp=New lamp
	f\thelamp=c\lamp

	c\Acceleration = 0.005  ;0.005;.01
	c\Brakes = .992
	c\Friction = 1.001
	c\Traction = .95
	c\Speed = 0.0
	c\steering = 16
	c\steeringspeed=0.44
	c\maxSpeed = MAX_SPEED
	c\turbospeed = MAX_TURBO
	c\reversespeed= 0.5
	c\weight=0.006 ;0.0087;0.005
	c\frontweight=0.07
	c\Vx = 0
	c\Vy = 0
	c\Vz = 0
	c\prev_x#=EntityX( c\model )
	c\prev_y#=EntityY( c\model )
	c\prev_z#=EntityZ( c\model )
	c\chasecam=CreatePivot( c\model )
	PositionEntity c\chasecam,0,5,-12;,-5,5,0;-12

	c\incarcam=CreatePivot(c\model)
	PositionEntity c\incarcam,0,1,1.5
	
	c\checkpoint=0
	c\next_checkpoint=0
	
	c\careye=CreatePivot(c\model)
	PositionEntity c\careye,0,1,1

	; indicates sensor for checkpoint collisions
	;pointer=CreateCube(c\careye)
	;ScaleEntity pointer,0.2,0.2,0.2
	;EntityColor pointer,0,255,0
		
	Return c
End Function

Function reset_pos.cartype(c.cartype)

	FreeEntity c\model
	FreeEntity c\camera
	
	Delete c
		
	c=car_create(200,100,100)
	
	
	Return c
End Function

Function car_update( c.cartype )

	;align car to wheels
	zx#=   (EntityX( c\wheel[2],True )+EntityX( c\wheel[4],True ))/2
	zx =zx-(EntityX( c\wheel[1],True )+EntityX( c\wheel[3],True ))/2
	zy#=   (EntityY( c\wheel[2],True )+EntityY( c\wheel[4],True ))/2
	zy =zy-(EntityY( c\wheel[1],True )+EntityY( c\wheel[3],True ))/2
	zz#=   (EntityZ( c\wheel[2],True )+EntityZ( c\wheel[4],True ))/2
	zz =zz-(EntityZ( c\wheel[1],True )+EntityZ( c\wheel[3],True ))/2

	AlignToVector c\model,zx,zy,zz,1,1
	AlignToVector c\shadow,zx,zy,zz,1,1
		
	zx#=   (EntityX( c\wheel[1],True )+EntityX( c\wheel[2],True ))/2
	zx =zx-(EntityX( c\wheel[3],True )+EntityX( c\wheel[4],True ))/2
	zy#=   (EntityY( c\wheel[1],True )+EntityY( c\wheel[2],True ))/2
	zy =zy-(EntityY( c\wheel[3],True )+EntityY( c\wheel[4],True ))/2
	zz#=   (EntityZ( c\wheel[1],True )+EntityZ( c\wheel[2],True ))/2
	zz =zz-(EntityZ( c\wheel[3],True )+EntityZ( c\wheel[4],True ))/2

	AlignToVector c\model,zx,zy,zz,3,0.4
	AlignToVector c\shadow,zx,zy,zz,3,0.8
		
	;calculate car velocities	
	cx#=EntityX( c\model ): c\Vx=cx-c\prev_x : c\prev_x=cx
	cy#=EntityY( c\model ): c\Vy=cy-c\prev_y : c\prev_y=cy
	cz#=EntityZ( c\model ): c\Vz=cz-c\prev_z : c\prev_z=cz
	
	;resposition wheels
	cnt=1
	For z=1.5 To -1.5 Step -3
	For x=-1 To 1 Step 2
		PositionEntity c\wheel[cnt],0,0,0;,x,-.5,z
		cnt=cnt+1
	Next
	Next

	; restrict the 'dive' (front tilt) angle of the car
	If EntityPitch(c\model)&gt;70
		tip#=(70-EntityPitch(c\model))/2
		RotateEntity c\model,EntityPitch(c\model)+tip,EntityYaw(c\model,1),EntityRoll(c\model,1),True
	EndIf
	
	;shadow collisions
	unused = LinePick ( EntityX(c\model,1),EntityY(c\model,1),EntityZ(c\model,1),0,-200,0 )
	picked = PickedEntity()
	If picked = segment(1)\track_mesh Or picked = grid_plane
		;hug track
		height#=PickedY() : dist#=((EntityY(c\model,1)-0.99)-height#)
		height#=height#+(0.5*dist#)
		PositionEntity c\shadow,EntityX(c\model,1),height#,EntityZ(c\model,1),True
		nx#=PickedNX():ny#=PickedNY():nz#=PickedNZ()
		AlignToVector c\shadow,nx,ny,nz,2;,.1
		;AlignToVector c\shadow,nx,ny,nz,1,.1
	EndIf 

	; if not checkpoint is stored find the nearest checkpoint and store the next one
	If c\checkpoint=0 
		t=0 : Repeat : t=t+1 : Until segment(t)\next_checkpoint&lt;&gt;0
		c\next_checkpoint=t;segment(t)\next_checkpoint
		c\checkpoint=segment(t)\prev_checkpoint
	EndIf
	thepicked=EntityPick(c\careye,4)
	If thepicked&lt;&gt;0 
		t=c\next_checkpoint
		If thepicked=segment(t)\checkpoint And t&lt;&gt;0
			c\next_checkpoint=segment(t)\next_checkpoint
			c\checkpoint=t
		Else
			;c\checkpoint=-10
		EndIf
				
	EndIf

	; if come off the track and hit the floor
	hitFloor=False
	If EntityCollided( c\model,ground ) Then hitFloor=True
	;If hitFloor And reset=0 Then reset=1
	
	onground=False
	If EntityCollided( c\model, scene ) Then onground=True

	;move car
	
	align#=0
	steer#=c\steeringspeed#
	If KeyDown(203) Then align=+steer
	If KeyDown(205) Then align=-steer

	alignt#=0
	the_p=c\next_checkpoint
	If segment(the_p)\turn=0 And ((Not(hitfloor)) Or onground=True)
		the_piv=segment(the_p)\main_pivot
		anga#=EntityYaw(the_piv,1) : If anga#&lt;0 Then anga#=360+anga#
		angb#=EntityYaw(c\model,1) : If angb#&lt;0 Then angb#=360+angb#
		diff#=anga#-angb#
		If diff#&gt;+180 Then diff#=diff#-360
		If diff#&lt;-180 Then diff#=diff#+360
		If align#=0 And diff#&lt;&gt;0
			If diff&gt;c\turn+steer
				alignt#=steer
			Else
				If diff&lt;c\turn-steer
					alignt=-steer
				Else
					alignt#=diff/2
					c\turn#=diff#/2
				EndIf
			EndIf
		EndIf
		If c\speed&lt;0 Then alignt=0;alignt*-1
	EndIf

	; straighten the wheels out
	If (align=0 And alignt=0) And (c\turn#&lt; 0.0 And (Not(KeyDown(203)))) 
		align=+steer
		If turn#+align#&gt;0 And turn#&lt;0
			align#=turn#*-1
		EndIf
	EndIf
	If (align=0 And alignt=0) And (c\turn#&gt; 0.0 And (Not(KeyDown(205))))
		align=-steer
		If turn#-align#&lt;0 And turn#&gt;0
			align#=-turn#
		EndIf
	EndIf
	
	If alignt&lt;&gt;0
		c\turn#=c\turn#+alignt#
	Else
		c\turn#=c\turn#+align#
	EndIf

	If c\turn&lt;0.1 And c\turn&gt;-0.1 Then c\turn=0
	
	If c\turn&lt;-c\steering Then c\turn=-c\steering
	If c\turn&gt;c\steering Then c\turn=c\steering

	RotateEntity c\wheelpiv[1],0,c\turn#/1.2,0
	RotateEntity c\wheelpiv[2],0,c\turn#/1.2,0


	For t=1 To 4 
		If EntityCollided( c\wheel[t] , scene ) Then onground=True
	Next

	
	If onground Or hitFloor

		; translates the steering turn into a car turning angle
		theturn#=(c\turn/100)
		apercspeed#=100/c\maxspeed
		speed#=apercspeed#*c\speed
		theturn#=theturn#*Sqr(Abs(speed#))

		If c\speed&gt;0 TurnEntity c\model,0,theturn#,0
		If c\speed&lt;0 TurnEntity c\model,0,-theturn#,0
	
		; affect the maximum speed if going up hill
		maxspeed#=c\maxspeed# : reversespeed#=c\reversespeed

		; check if Left or Right CONTROL is pressed
		If (KeyDown(157) Or KeyDown(29)) Then maxspeed#=c\turbospeed#


		affect#=(EntityPitch(c\model)*c\weight)/10
		maxspeed#=maxspeed#+affect# : reversespeed=reversespeed#+affect#
	
		; if cursor UP increase speed
		If KeyDown(200)
			c\speed=c\speed+c\acceleration#
			; if TURBO is ON increase rate of speed even more
			If maxspeed=c\turbospeed Then c\speed=c\speed+c\acceleration#/1.5
			If c\speed&gt;maxspeed c\speed=c\speed*c\brakes
		Else If KeyDown(208) ; if cursor DOWN apply brakes
			c\speed=c\speed-c\acceleration#
			If c\speed&lt;-reversespeed c\speed=c\speed*c\brakes
		Else
			; cursor UP/DOWN not pressed so slow down (friction)
			c\speed=c\speed/c\friction ; (c\speed*c\brakes)
			If c\speed&gt;0 And c\speed&lt;0.002 Then c\speed=0
			If c\speed&lt;0 And c\speed&gt;-0.002 Then c\speed=0
		EndIf

		thespeed#=c\speed*.5
				
		; apply speed to the spin
		For t=1 To 4
			c\spin[t]=thespeed#
		Next
		
		; apply speed
		
		MoveEntity c\model,0,0,thespeed
		; apply gravity
		;TranslateEntity c\model,0,-c\weight,0
		
	Else ; if vehicle is in the air
		; if the forward key is pressed then spin the wheels forwards
		If KeyDown(200)
			c\spin[3]=c\maxspeed#/10
			c\spin[4]=c\maxspeed#/10
		EndIf
		
		; reduce the spin on all wheels
		For t=1 To 4 : c\spin[t]=c\spin[t]*0.99 : Next

		; apply air resistance to the car
		c\speed=c\speed*0.999
		
		; apply current velocity (including gravity)
		TranslateEntity c\model,c\Vx,c\Vy-c\weight,c\Vz
	EndIf

	; apply engineweight to the front wheels
	TranslateEntity c\wheel[1],0,-c\frontweight,0
	TranslateEntity c\wheel[2],0,-c\frontweight,0

	; spin the wheels
	; circumference=wheel_diameter*pi
	; rotation#=360.0*(velocity/circumference)
	For t=1 To 4
		TurnEntity c\wheel[t], 360 * ( c\spin[t] / ((c\radius[t]*2)*Pi) ),0,0
	Next

	;update camera
	If KeyHit(28) Then view=1-view ; RETURN key
	If view=1
		If c\speed&gt;=0 And KeyDown(57)=False	; SPACEBAR key
			dx#=EntityX( c\chasecam,True )-EntityX( camera )
			dy#=EntityY( c\chasecam,True )-EntityY( camera )
			dz#=EntityZ( c\chasecam,True )-EntityZ( camera )
			TranslateEntity camera,dx*.5,dy*.5,dz*.5
		EndIf
		PointEntity camera,c\model
	Else

		dx#=EntityX#(c\incarcam,True)
		dy#=EntityY#(c\incarcam,True)
		dz#=EntityZ#(c\incarcam,True)
		
		PositionEntity camera,dx,dy,dz
		
		dx#=(EntityPitch#(c\incarcam,True)); - EntityPitch#(camera))/2
		dy#=(EntityYaw#  (c\incarcam,True)); - EntityYaw#(camera))/2
		dz#=(EntityRoll# (c\incarcam,True)); - EntityRoll#(camera))/2
		
		RotateEntity camera,dx,dy,dz 
	EndIf
	
	; align the skybox around the new camera position
	PositionEntity sky,EntityX(camera),EntityY(camera),EntityZ(camera)

End Function


;
;
;
;
; ********************************************
;
;	END OF FUNCTIONS GAP
;
; ********************************************
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
; *****************************************
;
;	END OF PROGRAM.
;
; *****************************************</textarea> <br><br></td></tr></table><br>
<a name="898777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chwaga</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> agreed, but still, how are you supposed to load a map you make? <br><br></td></tr></table><br>
<a name="898920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is no updated code for the maps load/save. I had just started that when I had to stop working on it. If I get a few hours, I'll try and write an updated version.<br><br>As it is, saving from the editor is currently incompatible with the game included. The editor includes all new bits to overcome some of the issues listed above. It is worth noting that the const 'tris' affects how manye triangles are used per segment, this will improve the 'juddering' on corners.<br><br>I'm sorry I have not had more time to comment the code better, and hopefully if I get a chance I'll have a look at Jim's improvements. The TODOs listed were indeed, things I needed to address, I still haven't found any good examples of realtime shadows, hence why mine is so poor. <br><br></td></tr></table><br>
<a name="898924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LineOf7s</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay Mr Steadman, let's get one thing straight:<br><br>You've just invested a serious amount of time and effort into this.  You've given it away to all and sundry for free.<br><br>Comments?  Shadows?  <br><br>You, sir, have nothing to be apologising for.  So stop it. <br><br>:oP<br><br>Right, now get back to trying to wipe off that horrible tar-like baby poop. <br><br></td></tr></table><br>
<a name="899811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WMSteadman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks 7s. <br><br></td></tr></table><br>
<a name="899886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Axel Wheeler</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with LineOf7s.  Nice job.<br><br>I'm working on a racing game with randomly generated tracks; the straights are just as "vertex-dense" as the turns, but I decided to leave it that way so the straights could be slightly bendy.  In a stunt track game like yours you can also do things like alternating colors.<br><br>Good luck! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
