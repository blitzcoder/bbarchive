<!DOCTYPE html><html lang="en" ><head ><title >Rand- 16 bits only????</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Rand- 16 bits only????</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Rand- 16 bits only????</a><br><br>
<a name="269392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've started working on evolving constraints using verlet physics, and set up the seed configurations code. I'm using one bit per constraint, representing whether or not the constraint exists. I decided to be clever and fit it all into an int, but rand appears to only create 16 bits. sure, the bits cover a wide range, all the way to the max, but it only generates 16 bits. This is what I get in the debugger:<br>(displaying the bits)<br><pre class=code>
0100010101001010100000000000000
0010001010111011100000000000000
0100010111101110100000000000000
</pre><br>and so on and so on.....<br><br>Any ideas/ fixes <br><br></td></tr></table><br>
<a name="269413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This used to be true.<br><br>But with more recent versions of Blitz the values are 32-bit.<br><br>Edit: I've just tested this with Blitz3D 1.85 and it looks like random numbers have changed.<br><br><pre class=code>
For k = 1 To 10
	n = Rand(-2100000000,2100000000)
	DebugLog Bin(n)
Next
Stop
</pre><br>This produces:<br><br>10000000110100010010100101101100<br>01111110100110001101000000101000<br>10000001000010010001101001111000<br>10000000100010100000000111111000<br>01111111100010111000110100000100<br>01111110110101100111101101000000<br>01111111100011111100011000101100<br>10000010001110011110001010110001<br>10000010110001101111101001001010<br>01111111010110011111101000110100<br><br>These are 32-bit values. <br><br>But those bits sure don't look sufficiently random.<br>I see far too many large blocks of 000000... and 111111...<br><br>And here's the output from BlitzPlus 1.37<br><br>11101011101110000011110100000000<br>10111000000010110000111010000000<br>00110000101000110001110000000000<br>10101000001110001011100100000000<br>00010001110000010100110100000000<br>10101101011111101010101010000000<br>01000001011101101010110000000000<br>11011110011111110010100000000000<br>11110100111101111110110110000000<br>00010101101101011011011100000000<br><br>What's with all those zeroes on the right? <br><br></td></tr></table><br>
<a name="269472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you run a 100 iterations in B+ you get the following spread of 1's amoung the bit range.<br>50 50 39 52 49	49 45 49 55 50 50 54 51	58 57 42 52 42 48 38 48 51 53 51 25 10 4 4 0 1 0 0<br><br>ie that is the amount of times 1 appeared in that bit after 100 random iterations. 50 would be average with values within 15 on either side to be expected but the last 8 bits do not show a random occurrence. Interesting. To solve it you could try just using four concecutive high bytes.<br><br>edit just used the proper max values (-2114125312,2114125312) and still pretty much the same thing. <br><br></td></tr></table><br>
<a name="269734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. The random number generator isn't very good(sigh) I guess a user version might be good. I'll look up random number generators on the internet and look for algos. <br><br></td></tr></table><br>
<a name="269751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dan_upright</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> is it as simple as doing:<br><br><pre class=code>random# = sin(millisecs()) * maxvalue#</pre><br><br>or is there something i'm missing there? (besides needing to feed the number back in, so that you can use seeding to recreate a pattern of numbers<br><br>i'm just curious, cause i was pondering random number generation recently and that was my theory on how to do it <br><br></td></tr></table><br>
<a name="269801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> My post shows that the first 24 are quite random. You could solve the problem by using doing this<br>[/code]<br>n1=rand(-2114125312,2114125312)<br>n2=rand(-2114125312,2114125312)<br>n3= n1 shr 8<br>n4= n2 shr 24<br>n5=n4 shl24 + n1<br>[/code]<br>you could of course use less variables and do it all on one line but this makes it clearer. <br><br></td></tr></table><br>
<a name="270064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> that produces:<br><pre class=code>
11111111100100101111000011100000
00000000101110100011110110111010
11111110101011100011000100011100
00000000101100010010100010101000
00000000111100110111101001011000
00000001011100101101101111100110
00000010001100001101111100110100
11111110011001001000000000000100
11111111111100111110100110110000
11111111010011100111011111101010
</pre><br><br>ugh. it's almost worse. <br><br>dan_upright:<br>The sin function may generate semingly random binarey values, but They would clearly be orderly, ie one number a little above the first, etc.  <br><br>I forgot to look up generators, I'll check now. <br><br></td></tr></table><br>
<a name="270096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >podperson</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> From<br><a href="http://www.agner.org/random/" target="_blank">http://www.agner.org/random/</a><br><br>Note: this is a typical pseudo-random number generator (note that most random number generators are pseudo; the only true random number generators rely on some allegedly truly random input, such as observations of quantum mechanical behavior).<br><br>Mother-of-All<br>pseudo random number generator<br><br>This is a so-called multiply-with-carry or recursion-with-carry generator, invented by George Marsaglia<br>Algorithm:<br><br>S = 2111111111  Xn-4 + 1492  Xn-3 + 1776  Xn-2 + 5115  Xn-1 + C<br><br>Xn = S modulo 232<br><br>C = floor(S / 232)<br><br>The last four X'es and C are stored in a buffer as 32-bit unsigned integers. The intermediate S is a 64-bit unsigned integer.<br><br>The X'es and C are initialized to random values based on a seed. They cannot all be zero.<br><br>This algorithm is most effectively implemented in assembly language where you have an instruction for multiplying two 32-bit integers and get a 64-bit product. In high level languages you do not have such an instruction, so you have to use floating point numbers with a mantissa of at least 63 bits. Not all compilers support this precision, for example Microsoft Visual C++ does not.<br>Specifications:<br><br>    * 32-bit integer output<br>    * cycle length is 3x10^47<br>    * very good randomness <br><br></td></tr></table><br>
<a name="270426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> whoah. cool. It sounds nice. how would this look in blitz code?<br><br>somthing like<br><br><pre class=code>
global x1,x2,x3,x4,C

function rand()
 S=2111111111*X1+1492*X2+1776*X3+5115*X4+C
 x1=x2
 x2=x3
 x3=x4
 x4=S Mod 232
 C=floor(S/232)
end function
</pre><br><br>Hmm. must have done somthing wrong it's always between -256 and 256. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
