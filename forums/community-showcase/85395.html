<!DOCTYPE html><html lang="en" ><head ><title >Real-time, dynamic, striplighting in Blitz3D</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Real-time, dynamic, striplighting in Blitz3D</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Real-time, dynamic, striplighting in Blitz3D</a><br><br>
<a name="965948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://img205.imageshack.us/img205/4723/striplight.png"><br><br>I've not seen this done before in Blitz3D.  Although, I take into account it is not that hard to achieve.<br><br>The striplight pictured is irrelevent as it is not the actual striplight mesh/model.  I just made the light mesh out of 2 spheres connected by cylinders to demonstrate it.<br><br>It is the light being cast on the surface that is important.<br><br>I have dropped the light close to a surface to show it is a striplight and is lighting as such.  Obviously, as with a real striplight, if it is not near a surface then you cannot see it is a striplight casting the light.<br><br>The light can be moved and rotated dynamically over a surface, or multiple, surfaces and continue to real-time striplight a surface, or multiple surfaces.<br><br>This is real-time lighting.  Of course, you can have whatever colour you want.<br><br>It doesn't have to be a striplight - this technique can create a square light, or a zig-zag light - even a "Mickey Mouse"-shaped light.  It can also create multicoloured lights - ie imagine a neon sign which uses more than one tube colour.<br><br><br>Personally, I find it very exciting; however, I will understand if people deem it useless and boring.<br><br><br>EDIT:<br>I should have pointed out that no hardware (DX lights) are used. <br><br></td></tr></table><br>
<a name="965960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work! <br><br></td></tr></table><br>
<a name="965985"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pretty neat, I can imagine a neon-encrusted game world. <br><br></td></tr></table><br>
<a name="965989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its only exciting if its fast.   Show us a demo or video in a real scene :) <br><br></td></tr></table><br>
<a name="966070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pretty fast.  You can switch on and off the 'light-cells' in the tube, so you can control just how many are lighting a mesh - ie you can just enable every other cell of projected light or skip two, use one, skip 2, use one, etc.<br><br>Bare in mind you would only light very near services with the 'striplight' method.  Other that that it is a glorified, stretched, point light. <br><br></td></tr></table><br>
<a name="966194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dr.Puki, do you mind to show your magic trick? <br><br></td></tr></table><br>
<a name="966202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is part of the pLS - '"puki" Lighting System'.<br><br>I showed a picture of it in my first post. <br><br></td></tr></table><br>
<a name="966211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You using vertex colour, EFPS (that was used in Hunted) now uses vertex lighting and sees what vertices the light can see and what the light will reach and in what intensity the good thing about that is I can have as many lights as I want and they dont slow the engine down a jot and work on old hardware. <br><br></td></tr></table><br>
<a name="966212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://img199.imageshack.us/img199/5956/striplight2.png"><br><br>This is an example with 3 striplights with every other light-cell deactivated.<br><br>EDIT:<br>The red tube is pitching into the ground.  The other two (red and blue) are just rotating flat. <br><br></td></tr></table><br>
<a name="966215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> would be nice to see a demo of this <br><br></td></tr></table><br>
<a name="966235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stripey light (with a crude physical light mesh of cylinders and spheres):<br><br><img src="http://img140.imageshack.us/img140/2725/striplight3.png"><br><br>EDIT:<br>The cylinders and spheres are scaled to .03,.03,.03 <br><br></td></tr></table><br>
<a name="966240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Uncle</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool.  Now strap it on top of cop car and make them spin around in real time, with the light bouncing off some walls :) <br><br></td></tr></table><br>
<a name="966244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeh, you can do that - they can light multiple surfaces/meshes.<br><br>It is just a case of projecting the transformation per surface or mesh.  The lighting is unique per surface/mesh, so you can alter lighting density/strength and position uniquely, per surface/mesh. <br><br></td></tr></table><br>
<a name="966245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you just loop through every vertex, then calculate how much light that vertex has from angle and distance, then apply that to vertex color? <br><br></td></tr></table><br>
<a name="966252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looping through vertices is far too costly.  There is no form of picking going on either - that also would be too costly. <br><br></td></tr></table><br>
<a name="966305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikhailV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great ;) <br><br></td></tr></table><br>
<a name="966324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, puki, why don't you describe your technique or release some sources? Otherwise this thread is quite pointless. <br><br></td></tr></table><br>
<a name="966328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> No nawi, it isn't, as this is the Showcase threat, not the code archives.<br><br>This is fun to watch develop. Add more stuff as you go along Puki! <br><br></td></tr></table><br>
<a name="966439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks cool. Why would he have to share the "recipee", can you not admire the tasty cookies infront of you?<br><br>Would be interesting to see a little youtube video!<br><br>It kinda looks like it is proecting blob sprites onto the floor... <br><br></td></tr></table><br>
<a name="966444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> No blob sprites - this is real-time, dynamic, lighting. <br><br></td></tr></table><br>
<a name="966447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks like a nice effect, well done! <br><br></td></tr></table><br>
<a name="966476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I uploaded a video to YouTube: <a href="http://www.youtube.com/watch?v=qkLSi31v2F8" target="_blank">http://www.youtube.com/watch?v=qkLSi31v2F8</a><br><br>The footage seems choppy at the beginning - that is due to me moving the camera closer to the tube.<br><br>EDIT:<br>Having to convert and compress the footage didn't help the quality or fluidity, but you will get the idea of it. <br><br></td></tr></table><br>
<a name="966504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >InvisibleKid</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> thats pretty cool looking puki. i agree with Uncle in that you should attach it to a cop car, and have it go around a fake neibourhood block, that would deffinately be cool to see. or maybe have a soda machine in a corner casting a randomly flickering light (multiple colors for the effect of the light shining through the plastic front cover.) <br><br></td></tr></table><br>
<a name="966505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah the video looks very slugish from start to finish.  Should have had fraps running to show fps.<br><br>I was curious about the light range as well, all the shots and your vid have a fairly small range, is this just your choice for show, or a limitation of the system ? <br><br></td></tr></table><br>
<a name="966515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Range is not a factor.  The example shows micro-lighting.<br><br>If you pull the striplight away from a surface it will eventually blend the light, as it would do in real-life.  The whole point of the video was to keep the light close to the surface.  I was just proving the fact that it is real-time and that it can move and light at the same time. <br><br></td></tr></table><br>
<a name="966516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyway, this whole striplighting thing is just an offshoot of my lighting system.  I'm just toying with it at the moment.<br><br>The main basis of the system is to put light on a leash.  I was fed up of light passing through surfaces, so I decided to create my own real-time lighting system.  So, if a wall is in the way of a light, it won't shine through, etc. <br><br></td></tr></table><br>
<a name="966538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> How fast is it? did you analyse the performance on extreme situations? <br><br></td></tr></table><br>
<a name="966547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fast enough for me - I'm using high poly meshes.<br><br>You lot should make some striplights and test the performance.<br><br>I don't like the fake, textured, striplights on the doors/walls in Doom 3:<br><br><img src="http://www.visualwalkthroughs.com/doom3/deltalabs3/8.jpg"><br><br>I wanted proper ones - so I went ahead and developed them.  They work. <br><br></td></tr></table><br>
<a name="966591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> well doesnt look like you want to spill the beans :)  so i took a crack at it.. about 15 minutes worth.  <br><br>This could easily expand into somthing better, but I only did this while waiting on my dinner.  Wich should be about ready now :).<br><br>EDIT.. updated I had a small typo in there , I also added a global light so that it wasnt two lights in complete darkness<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D 640,480,32,2 
;Wireframe True
	camera=CreateCamera() 
	PositionEntity camera,-15,40,-50
	;create some random junk
	For i=1 To 2
	sc=Rand(1,10)
	Cube=CreateSphere(12)
	ScaleMesh cube,sc,sc,sc:EntityPickMode cube,2,True
	createfakelight_Receiver(cube)
	PositionEntity cube,Rand(-20,20),Rand(-20,20),Rand(-20,20)
	Next

	For i=-5 To 5
		For ii=-5 To 5
	        land=createsquare(2)
		    ScaleMesh land,10,1,10
	    	PositionEntity land,i*10,-3,ii*10
		    createfakelight_Receiver(land)
	    Next
	Next

    globallight=createfakelight(100,500,100,38,38,38,500)
	light1=createfakelight(10,5,10,0,0,255,53.5)
	light2=createfakelight(10,5,10,255,0,0,53.5)
	lightvisual=CreateCube()
	lightvisual2=CreateCube()
	; put a visual cube on the lights
	EntityParent lightvisual,light1,False
	EntityParent lightvisual2,light2,False
	TranslateEntity light1,0,10,20
	TranslateEntity light2,0,10,-20
	PointEntity camera,cube


	; update it all
	While Not KeyDown(1)

		MoveEntity light1,0,0,2
		TurnEntity light1,0,1.5,0
		MoveEntity light2,0,0,-.25
		TurnEntity light2,0,-.5,0

	 	lightfakereceivers()
		UpdateWorld()
		RenderWorld 
		Flip 
	Wend 
	End


Type FakeLight
 Field Ent
 Field r,g,b
 Field range#
 Field active
End Type

Type FakeLightReceiver
 Field ent    ;just the entity handle
End Type

Function CreateFakeLight(x#,y#,z#,r#,g#,b#,range#)
 fl.fakelight=New fakelight
 fl\ent=CreatePivot()
 PositionEntity fl\ent,x,y,z
 fl\r=r
 fl\g=g
 fl\b=b
 fl\range=range
 fl\active=1
 Return fl\ent
End Function 

Function FakeLightOnOFF(toggle=0)
 For fl.fakelight=Each fakelight
 	If fl\ent=ent Then 
       fl\active=toggle
       Exit
    EndIf
 Next
End Function  

Function SetFakeLightRange(ent,newrange#)
 For fl.fakelight=Each fakelight
 	If fl\ent=ent Then 
    	fl\range=newrange#
        Exit
    EndIf
 Next
End Function 

Function SetFakeLightRGB(ent,newr,newg,newb)
 For fl.fakelight=Each fakelight
 	If fl\ent=ent Then 
    	fl\r=newr
    	fl\g=newg
    	fl\b=newb
        Exit
    EndIf
 Next
End Function 

Function CreateFakeLight_Receiver(ent,fx=3)
flr.fakelightreceiver=New fakelightreceiver
flr\ent=ent
EntityFX ent,fx
End Function



Function LightFakeReceivers()
For flr.FakeLightReceiver=Each FakeLightReceiver
	LightMesh flr\ent,-255,-255,-255
	For fl.fakelight=Each fakelight
		If fl\active=1 And EntityDistance(flr\ent,fl\ent)=&lt;(fl\range*4) Then 
	        If EntityVisible (fl\ent,flr\ent) Then 
				TFormPoint 0,0,0,fl\ent,flr\ent 
				LightMesh flr\ent,fl\r,fl\g,fl\b,fl\range*.25,TFormedX(),TFormedY(),TFormedZ()
			EndIf					
		EndIf
	Next
Next
End Function

Function createsquare(segs#=2,parent=0)
    mesh=CreateMesh( parent )
    surf=CreateSurface( mesh )
    l# =-.5
    b# = -.5
    tvc= 0
    Repeat
      u# = l + .5
      v# = b + .5
      AddVertex surf,l,0,b,u,1-v
      tvc=tvc + 1
      l = l + 1/segs
      If l &gt; .501 Then
        l = -.5
        b = b + 1/segs
      End If
    Until b &gt; .5
    vc# =0
    Repeat
      AddTriangle (surf,vc,vc+segs+1,vc+segs+2)
      AddTriangle (surf,vc,vc+segs+2,vc+1)
      vc = vc + 1
      tst# =  ((vc+1) /(segs+1)) -Floor ((vc+1) /(segs+1))
      If (vc &gt; 0) And (tst=0) Then
        vc = vc + 1
      End If
    Until vc=&gt;tvc-segs-2
    UpdateNormals mesh
    Return mesh
End Function



</textarea> <br><br></td></tr></table><br>
<a name="966599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So how close is this puki ?  <br></div><br>Not close enough. <br><br></td></tr></table><br>
<a name="966606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Not close enough.  <br></div>  <br><br>Close enough for ?<br>if theres a prize, it has to be over 500.00 USD, 15 minutes is all you get for free :) <br><br></td></tr></table><br>
<a name="966609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why did you use LightMesh?<br>Remember that puki posted a vertex lighting thread a while ago, so I think he's lighting manually the vertices, based on the distance from lights and stuff like that, simple occlusion verification using linepicks, etc. <br><br></td></tr></table><br>
<a name="966611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Why did you use LightMesh? <br></div><br><br>Because lightmesh is faster than manually running through the verts and checking anything.   <br><br><br><div class="quote"> Remember that puki posted a vertex lighting thread a while ago, so I think he's lighting manually the verticesLooping through vertices is far too <br></div><br><br>...hm :)<br><br> <br><div class="quote"> puki (Posted 1 day ago) #15 <br> <br>Looping through vertices is far too costly. There is no form of picking going on either - that also would be too costly..   <br></div><br><br>im pretty sure hes breaking the meshes apart to small peices and doing close to what i have posted there, but only he can clarify that, and I think hes enjoying the attention too much to let it go just yet :) <br><br></td></tr></table><br>
<a name="966612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're probably right :D <br><br></td></tr></table><br>
<a name="966667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks cool however it is being done :) <br><br></td></tr></table><br>
<a name="966681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikhailV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> And my simple example :)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Graphics3D 800, 600, 0, 2

l=CreateLight()
c=CreateCamera()
CameraRange c,0.1, 5000
PositionEntity c, 0, 4 , -4

m = createsquare(60)
ScaleMesh m, 10,10,10
EntityFX m, 1 + 2 + 8 +16
PointEntity c,m

m1 = CreateSphere(24)
PositionMesh m1, 1, 1, 3.5
EntityFX m1, 1 + 2 + 8 +16
AddMesh m1, m
FreeEntity m1

t = CreatePivot()
PositionEntity t, 0, 0.5, 0

s0 = CreateSphere(8, t)
ScaleEntity s0, 0.1, 0.1, 0.1
EntityColor s0,255,0,0
PositionEntity s0, -2, 0,0
EntityBlend s0, 3

s1 = CreateSphere(8, t)
ScaleEntity s1, 0.1, 0.1, 0.1
EntityColor s1,0,255,0
PositionEntity s1, 2, 0,0
EntityBlend s1, 3

s2 = CreateSphere(8, t)
ScaleEntity s2, 0.1, 0.1, 0.1
EntityColor s2,0,0,255
PositionEntity s2, 0.665, 0,0
EntityBlend s2, 3

s3 = CreateSphere(8, t)
ScaleEntity s3, 0.1, 0.1, 0.1
EntityColor s3, 255, 255, 0
PositionEntity s3, -0.665, 0,0
EntityBlend s3, 3


y# = 0
While Not KeyHit(1)
	TurnEntity t, 0, 1, 0
	PositionEntity t, 0, 0.7 + 0.3 * Cos(y), 0
	y = y + 1
	
	LightMesh m, -255, -255, -255
	TFormPoint 0,0,0, s0, m
	LightMesh m, 512, 0, 0, 0.2, TFormedX(), TFormedY(), TFormedZ()
	TFormPoint 0,0,0, s1, m
	LightMesh m, 0, 512, 0, 0.2, TFormedX(), TFormedY(), TFormedZ()
	TFormPoint 0,0,0, s2, m
	LightMesh m, 0, 0, 512, 0.3, TFormedX(), TFormedY(), TFormedZ()
	TFormPoint 0,0,0, s3, m
	LightMesh m, 900, 900, 0, 0.1, TFormedX(), TFormedY(), TFormedZ()
	
	RenderWorld
	Text 10, 10, TrisRendered()
	Flip
Wend
End

Function createsquare(segs#=2,parent=0)
    mesh=CreateMesh( parent )
    surf=CreateSurface( mesh )
    l# =-.5
    b# = -.5
    tvc= 0
    Repeat
      u# = l + .5
      v# = b + .5
      AddVertex surf,l,0,b,u,1-v
      tvc=tvc + 1
      l = l + 1/segs
      If l &gt; .501 Then
        l = -.5
        b = b + 1/segs
      End If
    Until b &gt; .5
    vc# =0
    Repeat
      AddTriangle (surf,vc,vc+segs+1,vc+segs+2)
      AddTriangle (surf,vc,vc+segs+2,vc+1)
      vc = vc + 1
      tst# =  ((vc+1) /(segs+1)) -Floor ((vc+1) /(segs+1))
      If (vc &gt; 0) And (tst=0) Then
        vc = vc + 1
      End If
    Until vc=&gt;tvc-segs-2
    UpdateNormals mesh
    Return mesh
End Function
</textarea> <br><br></td></tr></table><br>
<a name="966693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess you really  need a subdivided quad on the ground to show this.   I hope you dont mind MikhailV, I added createsquare to my example too  :) <br>Only I made a small array of squares so the light will not illuminate those sections not visible to each light entity. <br><br></td></tr></table><br>
<a name="966729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikhailV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RifRaf: This is a simplest example, made for 5 minutes :) I think Puki too uses LightMesh function. <br><br></td></tr></table><br>
<a name="966740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WERDNA</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice puki!<br><br>You seem to be pretty good at doing lights, because this isn't the first<br>time you've shown off your lights in the show case :)<br><br>I think it looks very cool.<br>(Although a cop car would look even cooler)<br><br><b> WALNUT </b> <br><br></td></tr></table><br>
<a name="966801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have unlocked puki's secret!<br><br>in this image<br><br><img src="http://img199.imageshack.us/img199/5956/striplight2.png"><br>(I hope you dont mind me borrowing it puki)<br><br>look at the white light... does it not look like the white "strip" light is in reality 4 point lights?  just pointing out the obvious... <br><br></td></tr></table><br>
<a name="966839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> does it not look like the white "strip" light is in reality 4 point  <br></div><br><br>I thought this was out in the open from the start :)  <br><br><div class="quote"> This is an example with 3 striplights with every other light-cell deactivated. <br></div> <br><br></td></tr></table><br>
<a name="966845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 3 striplights with every other light-cell deactivated. <br></div><br><br>oh my bad..<br><br>so whats that supposed to mean? <br><br></td></tr></table><br>
<a name="966849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> It means the mesh is split up into a number of "light-cells", with every other light-cell deactivated. <br><br></td></tr></table><br>
<a name="966850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh ok<br><br>so puki do you have shadow effects with this pLS (puki lighting system)? or no? <br><br></td></tr></table><br>
<a name="966885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snixx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isnt it just a projected mesh for each "light" with a gradient texture on it? <br><br></td></tr></table><br>
<a name="966897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here, have a free book (worth £45.99/ $59.99):<br><a href="http://http.developer.nvidia.com/GPUGems/gpugems_copyrightpg.html" target="_blank">http://http.developer.nvidia.com/GPUGems/gpugems_copyrightpg.html</a><br><br>"puki" clutches his Blitz3D teddy bear and scampers off in search of sweeties. <br><br></td></tr></table><br>
<a name="966943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Isnt it just a projected mesh for each "light" with a gradient texture on it? <br></div><br><br>no that would be way too slow.  Im sure MikhailV hit the nail on the head with his example. <br><br></td></tr></table><br>
<a name="967282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> It certainly is an interesting way to do it. although i can see it not working any better than a dx light unless the mesh is split up appropriately. Nice stuff though. <br><br></td></tr></table><br>
<a name="967330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> i can see it not working any better than a dx light unless the mesh is split up appropriately <br></div><br>Ah, but standard DX lights (unless 'hacked' not to) will pass through surfaces which will destroy the intended precision/micro-lighting effect.<br><br>Clinical, precision, dynamic, real-time lighting is the future of everything.<br><br><br>You have to open your mind to what else can be achieved.<br><br>How can you avoid multiple TFormPoint calls for multiple lights and multiple surfaces - all of which are dynamic and can be moving?<br><br>"puki" knows. <br><br></td></tr></table><br>
<a name="967337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> haha puki I am determined to crack your secret... but first show us an example of multible lights and cubes/spheres casting shadows.. ;) this is the showcase after all <br><br></td></tr></table><br>
<a name="967338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> I patch my shadows through FastExtension. I'm sure "MikhailV" will figure it out and steal it. <br><br></td></tr></table><br>
<a name="967340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmm, all of the images in the thread have died (not just mine). <br><br></td></tr></table><br>
<a name="967353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> No they haven't, at least I can see them. <br><br></td></tr></table><br>
<a name="967366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I patch my shadows through FastExtension <br></div><br><br>thats cheating... well if you plan to release pLS that is you will have to require all users with pLS to have fast extension. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
