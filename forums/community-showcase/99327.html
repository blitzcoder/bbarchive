<!DOCTYPE html><html lang="en" ><head ><title >Asteroid Fields revisited</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Asteroid Fields revisited</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Asteroid Fields revisited</a><br><br>
<a name="1165352"></a>

<a name="1165367"></a>

<a name="1165369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.christianhart.de/bb/extrasolar/QuadAsteroidFieldDemo.jpg" target="_blank"><img src="http://www.christianhart.de/bb/extrasolar/QuadAsteroidFieldDemo_t.jpg"></a><br><br>This is another miniB3D tech demo I'm working - and I would love to hear your comments. It is using miniB3D's latest small fixes version, my source and a compiled EXE are included. Oh, this is just plain OpenGL, no shaders used here. There is still a lot of work, small fixes and ideas to include but I want to share this snapshot with the community right now because it's really, really eye candy :-D No comparison to my old <a href="/posts.php?topic=91575#1044584" target="_blank">procedural saturn</a> and it's even faster.<br><br>Fly around with the mouse and the arrow keys, LMB shoots some lasers (only if boosters are off) and RMB activates the boosters for faster system travel, other keys are displayed in the info text. The quad "engine" controls 25000 asteroid quads right now but it could handle even more with the proper CPU/GPU at a decent FPS rate.<br><br>Have fun and any improvements/suggestions with source are welcome.<br><br>Download: <a href="http://www.christianhart.de/bb/extrasolar/QuadAsteroidFieldDemo.zip" target="_blank">QuadAsteroidFieldDemo.zip</a> [5.0MB]<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well that download set my antivirus a-wailing. It seems very concerned, lots of red text and deleted the main executable.<br><br>It's probably a false positive - it's AVG, they always are - but I feel it's worth mentioning. <br><br></td></tr></table><br>
<a name="1165368"></a>

<a name="1165370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm the main executable inside the 7zip SFX archive is packed with UPX LZMA compression. I recompiled it again, this time uncompressed and packed everything in a standard ZIP File. My local virus scanner couldn't find anything (Antivir). Please try it again, I changed the download link.<br><br>Edit: I double-checked it with an online virusscan service with 37 different scanners, found nothing. So it must have been a false positive.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep second one works without any complaint.<br><br>As for the thing itself... wow. Amazing. Stunningly beautiful, very smooth, good FPS. That's a really clever technique with the asteroid lighting. I expect if you had a "full" game engine involving collision, the trickery wouldn't be visible at all, since you wouldn't be able to fly close enough to see it (currently you can sort of see how things are done if you fly within what ought to be an asteroid's radius, but you have to be looking for it).<br><br>Have you given any thought to how you would handle multiple light sources? The <i>only</i> thing that stands out at all at the moment is simply that weapons fire doesn't light up the back of a rock. Can the lighting effect be applied to only a part of an object? Although for most purposes you wouldn't have to do this: with a "big" light source like an explosion I guess you could light the whole object from the new angle briefly, which would be cheaper?<br><br>At any rate: sir, you have done it again. A fantastic piece of eye candy. <br><br></td></tr></table><br>
<a name="1165373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very impressive, a real bute.  Works fine on my system, getting about 60fps, just shows what blitz is capable of.  Pretty much everything with talent and good thinking behind it. <br><br></td></tr></table><br>
<a name="1165375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> In fact, reminds me a bit of the opening creds to star trek voyager when the ship flies through a planet's rings.  Real well done... <br><br></td></tr></table><br>
<a name="1165376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Have you given any thought to how you would handle multiple light sources? The only thing that stands out at all at the moment is simply that weapons fire doesn't light up the back of a rock. Can the lighting effect be applied to only a part of an object? Although for most purposes you wouldn't have to do this: with a "big" light source like an explosion I guess you could light the whole object from the new angle briefly, which would be cheaper? <br></div><br>Basically - as you can read from the full included source (see inc/TAsteroid.bmx and the main loop) - the quads are lit according to their vertex positions by their normals, so they are only lit by the main light source, the star. I think a second light should work somehow. But the light source must be a point light for proper lighting. I never tried a second light but you can play around with it.<br><br>I keep updating the quads in a very simple distance/time system: if the quad position is far away from the cam the update will be less frequently than a very close one, which gives a relative constant FPS inside the asteroid belt. I already thought about using real meshes for the very close asteroids. But even close the quads look stunning until you are *really* close to them. The asteroid texture is made of screenshots from some asteroid mesh models, so I could fade the real ones in. But the transition must be smooth.<br><br>Collisions will be a problem if I use the whole quad mesh but with separate close asteroid meshes it could work as I only have to check these for collision. And they can be lit independent from the far away asteroids.<br><br>I really don't know how big this "engine" will become, I'm just happy about the achieved result and the stunning optical FX right now :-D And it's a good proof what miniB3D is capable of, even in its current state. I'm only a little bit unhappy with my planet atmosphere, I think I could only improve it with a shader, but that's not possible with this version of miniB3D. <br><br></td></tr></table><br>
<a name="1165377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Beautiful environment indeed. :)<br><br>The demo runs ok on my machine.<br>Lenovo Thinkpad E325, DualCore AMD E-450 APU 1.65Ghz, 6 Go DDR3-1333, Radeon HD 6320 Graphics 384 mo, Windows 7 Home Premium<br><br>Can you explain what is "dot3" ? i prefer the appearance of the ship without it. <br><br></td></tr></table><br>
<a name="1165381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can you explain what is "dot3" ? i prefer the appearance of the ship without it.  <br></div><br>It can happen that some video cards don't display the Textureblend 4 mode correctly (Intel onboard in general). Dot3 is the use of a normalmap to let the model appear with more triangles that it really has, so the model looks more detailed and the most important thing is that the normalmap is being used for the lighting, too. I made a small animation to show the effect:<br><br><img src="http://www.christianhart.de/bb/extrasolar/dot3vertex.gif"><br><br>Look at the left wing's end, there is a noticable "depth" in the wing area which is missing in vertex only light - beside many other small details visible. It is the same mesh, the effect comes only from the normalmap, in this case it is this texture:<br><br><img src="http://www.christianhart.de/bb/extrasolar/normalmap.png"><br><br>How I applied it in miniB3D I already explained <a href="/posts.php?topic=99275" target="_blank">in this thread</a>. <br><br></td></tr></table><br>
<a name="1165385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok i see, it gives the illusion of more details. Thanks.<br><br>But if this effect is only to add the illusion of more details, why the light on the ship is of a different color. When i wrote that i prefered the appearance without the dot3 texture i meant the light color. <br><br></td></tr></table><br>
<a name="1165388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's because the effect only works with a fullbright model - the normalmap gets lighted from the base fullbright color of the model - and there is no place for other vertexcolors as the lighting would be messed up then. In other words - the star color doesn't matter here.<br><br>You describe the vertexcolors with the light color from the star. I already tried to simulate a colorful illumination with an additional texture on the fullbright model but weren't successful here at last. <br><br></td></tr></table><br>
<a name="1165425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awwww...can't run it, I get an access violation. Don't have minib3d hooked up to debug it right now, but just so you know...<br>I'm running it on windows 7 pro 64bit on 12core HP Z600 with Nivia Quadro 5000. <br><br></td></tr></table><br>
<a name="1165464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can run it...but no textures on craft. <br><br></td></tr></table><br>
<a name="1165495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Why0Why</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks really great.  Anytime I see your name starting a thread I always click on it :) <br><br></td></tr></table><br>
<a name="1165738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adding the lost post again:<br><br>Thanks! The problem with the missing textures on the craft could be the use of the "GL_DOT3_RGB_EXT" command in the miniB3D TMesh.bmx. I changed the lines under the tex_blend Selection from "EXT" to "ARB" like this:<br><br><pre class=code>Case 4
	glTexEnvf GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_COMBINE_ARB
	glTexEnvf GL_TEXTURE_ENV, GL_COMBINE_RGB_ARB, GL_DOT3_RGB_ARB
</pre><br>and then it worked with Intel cards, too (miniB3D must be recompiled then). But I'm not sure if this is a proper solution for all GPUs and the effect looks too "sharp" to me.<br><br>Here is a compiled EXE with the change applied to it, perhaps it works: <a href="http://www.christianhart.de/bb/extrasolar/demo2.exe" target="_blank">demo2.exe</a> [1.3MB] <br><br></td></tr></table><br>
<a name="1165926"></a>

<a name="1165927"></a>

<a name="1165928"></a>

<a name="1165935"></a>

<a name="1165961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.christianhart.de/bb/asteroidcreator/AsteroidCreator.jpg" target="_blank"><img src="http://www.christianhart.de/bb/asteroidcreator/AsteroidCreator_t.jpg"></a><br><br>For the asteroid improvements I just created a small tool to create random shaped asteroids using 3D Perlin Noise out of a standard sphere, with export to B3D files! Use mouse/arrows to rotate, LMB creates a new asteroid and RMB switches between DOT3 and Vertex Lighting. With Q/A you can move away and RETURN saves the asteroid to "asteroid.b3d". In the screenshot you can see the difference between simple vertex lighting and the cool DOT3 normalmap lighting.<br><br>The only thing I couldn't handle is to weld the unused sphere vertices before the B3D export, so the B3D mesh file has too many vertices now (1960 vs. 482 vertices after weld in Ultimate Unwrap 3D) and looks flat shaded without "Weld Model" or "Autosmooth model" applied to it. If anybody can provide some source to pre-weld the unused vertices before export please post your source here!<br><br>Anyway, have fun with it:<br><br>Download <a href="http://www.christianhart.de/bb/asteroidcreator/AsteroidCreator.zip" target="_blank">Asteroid Creator Demo</a> (4.0MB)<br><br>EDIT: updated the normalmap and changed some variables that a unique asteroid can be created with the same start parameters (if you note them first).<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1166131"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JonnyEnglish</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is insanely great. Keep up the Amazing work! <br><br></td></tr></table><br>
<a name="1166132"></a>

<a name="1166133"></a>

<a name="1166134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotshot2005</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Impressive - Elite Dangerous Watch out and Incoming tranmissions....You got Competions coming from Krischan! :-P<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1166173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take it easy, this is only tech demo - compared to a complete game like Elite I finished only 1%. But thanks for the commendations. <br><br></td></tr></table><br>
<a name="1166656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JonnyEnglish</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just love things like this, along with Orbiter etc. It's just look really nice! <br><br></td></tr></table><br>
<a name="1167911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Funny, earlier this year I wrote also such an asteroid creator for a game I had started. It, too, deforms a sphere based on my own perlin based turbulence, but I had variable polygon density that can create quite amazingly jagged asteroids as well as smoother ones. I wrote a fun normal map solution for it, too, which makes quite surprisingly detailed textures even with just a tiny image. However, I wrote it in Blitzmax. My game is actually 2.5d, but the story and gameplay was too ambitious for me to just finish it up...maybe I'll post a w.i.p at some point, not sure. <br><br>Anyway, your asteroid creator runs on my machine. Looks nice, too. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
