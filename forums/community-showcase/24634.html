<!DOCTYPE html><html lang="en" ><head ><title >Preprocessor profiling now more advanced</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Preprocessor profiling now more advanced</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Preprocessor profiling now more advanced</a><br><br>
<a name="255706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just spent the last two hours improving my preprocessors code profiling abilities. Each function now has its own HTML file, for now it only contains fastest and slowest function calls, but this will probably change soon.<br><br>Why am I doing this? The answer is Juno. My preprocessor has already identified four separate functions that took way too much CPU time than they should have, and they are fixed now. I want to continue to optomise it, but to do that I need better tools.<br><br>The future of this profiler is not as a part of my preprocsesor, it is as a separate DLL, callable from any language that supports DLL calling. It is simply too messy including it in the preprocessor. It may well be a good time to invest in a copy of PureBasic. The downside? Such a solution will probably either not be free or not be released.<br><br>But for now, the preprocessors profiler will have to do. An update will be out whenever I get around to it, along with some other misc features. I actually believe I released version 5.0 prematurely before, but these are the added features:<br><br><div class="quote"> <br>/* Changes Since 5.0<br> * Fixed a #Macro bug [I now clear out the conditional stack, what a mistake!]<br> * Fixed a #Define bug<br> * Added Enum<br> * Fixed a bug where double spaces between Function and the Function Name will interfere with profiling<br> * #ProfileNoFunctions<br> * #ProfileSection [Section]<br> * #EndProfileSection<br> * #Clamp Variable, Low, High<br> * Profiling now includes a separate HTML page per function.<br> * <br> * ProfileSections don't do any funky stack based things and so they have to be placed without overlap in terms of source position<br> */<br> <br></div><br><br>I'm off to optomise Juno! <br><br></td></tr></table><br>
<a name="255727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm.... the Clam Variable bit is almsot enough on it's own to get me to pick this up.  I'll have to take more of a look at it since im sure theres alot more too it ;). <br><br></td></tr></table><br>
<a name="255729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It added up to around 9 functions which were causing severe bottlenecks (most involved the FonText fucntions or freeing entities). Juno is as smooth as all hell now, my preprocessor now has my respect! <br><br></td></tr></table><br>
<a name="256641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Phil Newton</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The profiler has been a massive help to me. Not only has it made me organise my code much more effectively, but it's helped me no end with finding slow functions.<br><br>Top work! <br><br></td></tr></table><br>
<a name="256649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is great, thanks. <br><br></td></tr></table><br>
<a name="256672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It gives me application error when trying to compile...<br>"The application failed to initialize properly (0x0000135)"<br><br>I'm running Windows XP. <br><br></td></tr></table><br>
<a name="256674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Blonde</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just out of interest, what FONText functions were causing slowdown? <br><br></td></tr></table><br>
<a name="256689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bouncer - have you installed the .Net runtimes?<br>Mr Blonde - The fontext functions for freeing layers deleted an instance of a type with a BlitzArray inside, which causes massive slowdown. This isn't the fault of the FonText code, I believe this is a Blitz bug (check out my post on the bug forums). <br><br></td></tr></table><br>
<a name="256693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> No... didn't know it was required. Downloading now.... <br>24.2 megs.... this is gonna take for ages with my ISDN... <br>:( <br><br></td></tr></table><br>
<a name="256719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you think I feel, downloading the SDK on my 56k? :) <br><br></td></tr></table><br>
<a name="256728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just rewrote the Blitz portion of the profiler, completely untwining it from the preprocessor. It uses radically different methods to figure out time in the function, and should hopefully provide a *much* clearer picture of what is going on. In the following example, MiscFunction recieves a total call time of 0 because the time is 'allocated' to the delay function rather than them both. Which allows you to find out how much time the program spent in the actual function itself, rather than calling another function from it. Very cool compared to the old preprocessor.<br><br>The lib will work with normal Blitz though obviously you would want to use the preprocessor so you don't have to go through all the trouble of registering your functions etc.<br><br><pre class=code>
Profiler_Init( )

Global MiscFunction_ID = Profiler_RegisterFunction( "MiscFunction" )
Global DelayFunction_ID = Profiler_RegisterFunction( "DelayFunction" )

For Count = 1 To 10
	
	MiscFunction( Count )
	
Next

Profiler_Write( "code_profile\" )

Function MiscFunction( Count )

	Profiler_PushFunction( MiscFunction_ID )
	
		DelayFunction( Count )
		
	Profiler_PopFunction( MiscFunction_ID )
	
End Function

Function DelayFunction( Delay_Time )
	
	Profiler_PushFunction( DelayFunction_ID )
		
		Delay Delay_Time
		
	Profiler_PopFunction( DelayFunction_ID )
	
End Function
</pre> <br><br></td></tr></table><br>
<a name="256739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Michael - why were you freeing a FONText layer so often? <br><br></td></tr></table><br>
<a name="256752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have random text that isn't part of the hud that comes and goes. If it were not for the Blitz bug the method would have been plenty fast (and still is). <br><br></td></tr></table><br>
<a name="256753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Giano</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Michael Reitzenstein<br>I'm new of this post (lost 4 months mails and posts)<br>Please...<br>now that you have consolidate some awesome features of your preprocessor...<br>- Can you improve the documentation with some samples and codes?<br>I've downloaded the zip file but there isn't any kind of documentation..<br>- There is any possibility to see your preprocessor in some new blitz ide (blitzView, protean, etc)?<br>- What are the new features that you will implement?<br><br>Ciao<br>Gianluca <br><br></td></tr></table><br>
<a name="256767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> - Can you improve the documentation with some samples and codes? <br>I've downloaded the zip file but there isn't any kind of documentation..  <br></div><br>Nope - there is the documentation on the web site, but that's it. I don't get any financial compensation to work on the preprocessor and documentation is just something that I hate doing.<br><div class="quote"> - There is any possibility to see your preprocessor in some new blitz ide (blitzView, protean, etc)?  <br></div><br>It already does.<br><div class="quote"> - What are the new features that you will implement?  <br></div><br>Whatever I feel like - the source is included with the release so anybody who wants certain features can implement them themselves. <br><br></td></tr></table><br>
<a name="256772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Michael - an easy solution to this is to either hide/show the layer *OR* you can delete the surface belonging to the layer and rebuild. <br><br></td></tr></table><br>
<a name="257023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Michael - an easy solution to this is to either hide/show the layer *OR* you can delete the surface belonging to the layer and rebuild. <br></div><br>It would be, if there were a set number or limit on the text. Pooling them is overkill and probably wouldn't end up much faster at all. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
