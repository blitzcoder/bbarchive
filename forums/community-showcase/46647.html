<!DOCTYPE html><html lang="en" ><head ><title >BlitzXML - A XML function library</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BlitzXML - A XML function library</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >BlitzXML - A XML function library</a><br><br>
<a name="518787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzXML makes it easy to load, manipulate, and save XML files. BlitzXML is a library of functions for manipulating xml data, including a fast (parses roughly twice as fast as Microsoft Internet Explorer's XML viewer) xml parser and saver. XML is widely used anywhere from word-processors to level builders.<br><br>Included with BlitzXML_v1.71.zip is a function reference manual, and example code.<br><br><b>Update: </b><i>Version 1.71 Released! Version 1.71 includes some misc. bug fixes (BlitzXML now loads and saves nodes in the proper order)</i><br><b>Update: </b><i>Version 1.7 Released! Version 1.7 includes some misc. bug fixes.</i><br><b>Update: </b><i>Version 1.6 Released! Now BlitzXML can load XML files with the standard "&lt;?xml ... ?&gt;" header tag. BlitzXML also saves it's XML files with a header for compatibility with other applications.</i><br><b>Update: </b><i>Version 1.5 Released! Includes new features and minor bug fixes</i><br><br><b><a href="http://www.alsbonsai.com/john/BlitzXML_v1.71.zip" target="_blank">Click here to download BlitzXML <i>1.71</i></a></b> (12 KB) <br><br></td></tr></table><br>
<a name="518792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dragon57</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent! Thanks! <br><br></td></tr></table><br>
<a name="518822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can tell that this is useful...<br>My problem is I've got absolutely no clue what XML does :) <br><br></td></tr></table><br>
<a name="518826"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >R0B0T0</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xml does whatever you want it to :)  It's basically self-describing information, you can think of it as a human readable format for storing any kind of data (in our case for level data, positions, character stats, whatever)<br><br>It's nice if you like to tinker with your data files without having to write a custom editor.  It also allows others to easily mod your game data (assuming you want that) or even code their own editors.<br><br>Just look at the example file, you'll get the idea.  The trick is that xml doesn't do anything by itself, your program still has to make sense of what it is (kind of like data statements, but a lot better).<br><br>Anyways, thanks a lot John, very handy! <br><br></td></tr></table><br>
<a name="518936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks John - very useful indeed ! <br><br></td></tr></table><br>
<a name="518983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> XML rocks. <br><br></td></tr></table><br>
<a name="519019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xml is god.  GOD! <br><br></td></tr></table><br>
<a name="519064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I see!<br>John, you're god. <br><br></td></tr></table><br>
<a name="519122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> XML is nothing and everything.<br><br>It's the simplest thing in the world - when you look at an XML file you think "is that all it is?" - it's just structured text files - nothing you couldn't do on your own (but having a standard makes them so much more useful).<br><br>And at the same time it's one of the most powerful and useful things ever. A standard, structured, human-readable, platform and application independent data format has been needed for years  :-) <br><br></td></tr></table><br>
<a name="584164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's been 5 months since I've made any changes to BlitzXML, but I've finially spent a little time adding support for multiple simultaneous file support. Now you can load in as many XML files as you want at the same time!<br><br><br>I've tried to keep down the work for anyone using BlitzXML 1.0 who wants to switch to BlitzXML 1.5, so all you'll need to change is the xmlLoad code slightly, and remember to delete xml files before loading a new one, if you don't plan on accessing it later (just think of it as opening and closing files).<br><br>Loading an XML file now simply returns the root node of the file, allowing full access to all it's contents. You can then "close" these loaded XML files by calling the delete function on any file's root node.<br><br>Also, I fixed a bug where nodes were not being completely deleted, causing a small memory leak if you are accessing a large number of XML files.<br><br><i><b><a href="http://www.alsbonsai.com/john/BlitzXML_v1.5.zip" target="_blank">Get the new version here (BlitzXML 1.5)</a></b></i><br><br><br><br>The old version is still availible <b><a href="http://www.alsbonsai.com/john/BlitzXML.zip" target="_blank">here</a></b> if anyone still wants it. <br><br></td></tr></table><br>
<a name="584250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xml is O.K.<br><br>IMHO they made it too complicated. To create a truely compliant parser/emitter you have to write a ton of code.  The stuff like dtd, namespaces, encryption, signatures, entitization, proper charachters used in names, and a very complicated schema of unicode support.  Attributes are redundant with having child nodes (except in xpath where I suppose it is handy to have them).  Also, all attributes, node internals are strings.  No explicit typing of variables.<br><br>All of these factors makes proper xml api bloated and ugly. Which is why...<br><br>I'm going to write a markup language that looks similar to [url='http://www.yaml.org/']YAML[/url], only more of a subset of that, and include typing of node values.  The idea is to allow writing a parser and generator in less than 500 lines of code.<br><br>Sure, it wont be as  universal as XML but it will mirror programming objects in text beutifully. <br><br></td></tr></table><br>
<a name="584275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Booticus</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome! I *JUST* started a few tutorials on XML. This is great! Thanks! <br><br></td></tr></table><br>
<a name="584293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Booticus: I hope you get as much use out of BlitzXML as I have. Don't hesitate to post any suggestions if there's any features you would like to see in BlitzXML. Also, please let me know if you find any bugs (although hopefully there are none by now) :)<br><br>BotBuilder: I agree that the full XML specifications are a little unnecessary for most purposes for games. That's why I made BlitzXML. BlitzXML is definitely <i>not</i> bloated. From your post, I take it you haven't even taken a look at the BlitzXML documentation or examples. In fact, the BlitzXML "api" is very simple and easy to use. It has features for nodes, their attributes, and their data. You don't even need to know that it's using XML. Just create your data structures and save/load them as needed - All the unicode, encryption, signatures, dtd, etc. is not included since it's not <i>really</i> necessary for game and simple app. purposes. <br><br></td></tr></table><br>
<a name="584361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Err... Didn't this structure used to be called INI files? <br><br></td></tr></table><br>
<a name="584469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> John Blackledge: No.. INI files only allow one level of data.. a category, then a list of properties and their values.  XML is much better for game purposes and apps that require saving/loading of moderately structured data (INI files are very simple, not easily implimented for levels, AI files, etc.). With an xml file, you can save data like this:<br><pre class=code>
&lt;!--Test--&gt;
&lt;xml&gt;
  &lt;info&gt;
    &lt;title&gt;Test World&lt;/title&gt;
    &lt;author&gt;JohnJ&lt;/author&gt;
    &lt;description&gt;
      This is a test file in XML
      format used to test the
      BlitzXML loader/saver
      library.
    &lt;/description&gt;
  &lt;/info&gt;
  &lt;world&gt;
    &lt;entity type="cube"&gt;
      &lt;position x="3" y="0" z="0"/&gt;
      &lt;rotation pitch="57" yaw="35" roll="5"/&gt;
      &lt;color r="0" g="0" b="255"/&gt;
    &lt;/entity&gt;
    &lt;entity type="sphere"&gt;
      &lt;position x="-3" y="0" z="0"/&gt;
      &lt;color r="255" g="0" b="0"/&gt;
    &lt;/entity&gt;
    &lt;entity type="light"&gt;
      &lt;position x="-3" y="5" z="2"/&gt;
      &lt;color r="255" g="255" b="255"/&gt;
      &lt;source type="point" range="7"/&gt;
    &lt;/entity&gt;
    &lt;entity type="camera"&gt;
      &lt;position x="-7" y="-1" z="-4"/&gt;
      &lt;rotation yaw="-60"/&gt;
      &lt;bgcolor r="64" g="128" b="255"/&gt;
    &lt;/entity&gt;
    &lt;entity type="camera"&gt;
      &lt;position x="0" y="8" z="0"/&gt;
      &lt;rotation pitch="90"/&gt;
      &lt;bgcolor r="0" g="255" b="0"/&gt;
      &lt;viewport x="0" y="400" width="200" height="200"/&gt;
    &lt;/entity&gt;
  &lt;/world&gt;
&lt;/xml&gt;
</pre><br><br>What's nice about BlitzXML is that you can save/load this data easily, without even knowing how XML works. An entity might be a single xmlNode type, with all it's data easily accessible. You don't need to know a thing about what the above XML code means, although it helps if you want to manually edit your xml files. <br><br></td></tr></table><br>
<a name="584898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <i><b>Update:</b> The BlitzXML parser and saver now supports the standard "&lt;?xml ... ?&gt;" style header.</i> <br><br></td></tr></table><br>
<a name="584915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> John J - oh yeah, i havent looked at the docs for yours.  I was mainly referring to System.Xml in .net - bloatius maximus. <br><br>Nice work though. <br><br></td></tr></table><br>
<a name="588104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VP</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> XML is notoriously a 'bloated' format and ISTR that there was a proposed specification for a compressed XML format.<br><br>Perhaps if I can get zlib compression figured out for Blitz, it could provide an accompaniment to BlitzXML (I promise nothing!). <br><br></td></tr></table><br>
<a name="588122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LineOf7s</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> vinylpusher:<br><br>Here's a start.<br><a href="http://www.blitzcoder.com/cgi-bin/showcase/showcase_showentry.pl?id=peter__scheutz10222002181354&amp;comments=no" target="_blank">http://www.blitzcoder.com/cgi-bin/showcase/showcase_showentry.pl?id=peter__scheutz10222002181354&amp;comments=no</a><br>Perhaps Mr Scheutz has progressed further with his userlib version beyond the (now dead) link in the link provided above (I've not checked).<br><br>Still, the above works. <br><br></td></tr></table><br>
<a name="588139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VP</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lineof7s: Hmm, interesting. Still, the project I'm working on I intend to have no external DLL usage.<br><br>I only want to implement deflate with a 32k window, no other variations and certainly not a full implementation of all zlib functions. As such, it will only really be useful for 2 things:<br><br>1) PNG exporter (my project).<br>2) General compression of datafiles which have an original size of 0.5k (for binary) or 1k (for text) or larger.<br><br>I could do with getting rid of this cold though, useful coding whilst ill is not easy %^/ <br><br></td></tr></table><br>
<a name="588498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried the example and it worked.<br>I then loaded the example XML file into Microsoft XML editor and saved<br><br>then it would not work anymore. How do I make sure the file formats are correct? <br><br></td></tr></table><br>
<a name="600896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Update: </b><i>Version 1.7 Released! Version 1.7 includes some misc. bug fixes.</i><br><br>Slunkar: This bug-fix may solve the problem. If not, could you e-mail me the XML file that does not work? <br><br></td></tr></table><br>
<a name="601424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes it works now thanks<br><br>do you know if you can safely encrypt and decrypt these files? <br><br></td></tr></table><br>
<a name="601520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jake L.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just have to tell you that BlitzXML saved my day more than once. It's easy to use, fast and works like a charm.<br><br>I even wrote a little hack to store binary data (using banks) into a node. I don't know if this is the right way to go, but it works. Maybe you want to add this functionality to your official lib (hehe, I'm too lazy to rehack every new version you release).<br><br>These are the parts of your code I've changed/added (to version 1.5 or 1.6, I think):<br><br>Add a new Field "ContentType" and a function "xmlNodeDataSetBank":<br><pre class=code>
Type xmlNode
	Field Name$								;The name of the node
	Field AttributeCount					;The number of attributes for the node
	Field AttributeName$[MAX_ATTRIBUTES]	;The attribute name array
	Field AttributeValue$[MAX_ATTRIBUTES]	;The attribute value array
	Field Contents$							;The data contents of the node
	Field ContentType%						; 0 = string, 1=binary (bank-data)
	Field Parent.xmlNode					;This node's parent node. If this is set to Null, then this node is the "root" node
	Field Level								;This is the node's level
	
	;These fields are manipulated by xml_RegisterChild(), xml_GetChild(), and xml_UnregisterChild()
	Field ChildCount						;The number of the node's children
	Field ChildBank							;A memory bank of handles to the node's children
End Type

;// Pass a handle to store it's data into a node
Function xmlNodeDataSetBank (node,bank%)
	this.xmlNode=Object.xmlNode(node)
	this\ContentType=1	; binary
	this\Contents=Str(bank)
End Function
</pre><br><br>Some changes in xml_NextItem to load binary-nodes:<br><pre class=code>
Function xml_NextItem$(file)
	Local tag$
	While Eof(file) = False
		ch = ReadByte(file)
		If txt$ &lt;&gt; "" And (ch = 60 Or ch = 13) Then xml_ItemType = 2:SeekFile file,FilePos(file)-1:Return txt
		If ch=61
			If Left(txt$,7)="binary:"
				banklen=Mid(txt$,8,10)
				bank=CreateBank(banklen)
				ReadBytes (bank,file,0,banklen)
				txt$=Str(bank)
			EndIf
		EndIf
		If ch &lt;&gt; 13 And ch &lt;&gt; 15 And ch &lt;&gt; 10 Then txt$ = txt$ + Chr(ch)
		If ch = 13 And txt &lt;&gt; "" Then txt = txt + " "

</pre><br><br>and some changes in saveXML to store binary data:<br><br><pre class=code>
Function xmlSave(FileName$, thisnode, level = 0, file = 0)
	If file = 0 Then
		file = WriteFile(FileName)
		If file = 0 Then xml_AddError("Error writing XML file (possibly, file is in use, or is the folder/drive/file is write protected).", 0):Return
	End If
	
	If level = 0 Then WriteLine file, "&lt;?xml version="+Chr(34)+"1.0"+Chr(34)+" ?&gt;"

	If thisnode = 0 Then this.xmlNode = First xmlNode Else this.xmlNode = Object.xmlNode(thisnode)
	While this.xmlNode &lt;&gt; Null
		If this\Level &lt; level Then Exit
		If this\Level = level Then
			tag$ = this\Name
			closetag$ = "/" + this\Name
			For i = 1 To this\AttributeCount
				tag = tag + " " + this\AttributeName[i] + "=" + Chr$(34) + this\AttributeValue[i] + Chr$(34)
			Next
			indent$ = String$("  ", this\Level)
			If this\Contents = "" And this\ChildCount = 0 Then
				WriteLine file, indent + "&lt;" + tag + " /&gt;"
			Else
				If this\ChildCount &lt;&gt; 0 Then
					WriteLine file, indent + "&lt;" + tag + "&gt;"
					If this\Contents&lt;&gt;""
						If this\ContentType=0
							WriteLine file, indent + "  " + this\Contents
						Else ; binary data
							bank=this\Contents
							WriteLine file, indent + "  " + "binary:"+BankSize(bank)+"="
							SeekFile (file,FilePos(file)-2)
							WriteBytes bank,file,0,BankSize(bank)
						EndIf
					EndIf
					xmlSave("", Handle(After this), this\Level + 1, file)
					WriteLine file, indent + "&lt;" + closetag + "&gt;"
				Else
					WriteLine file, indent + "&lt;" + tag + "&gt;" + this\Contents + "&lt;" + closetag + "&gt;"
				End If
			End If
		End If
		this = After this
	Wend
	
	If level = 0 Then CloseFile file
End Function
</pre><br><br>Pass a Bank using xmlNodeDataSetBank, xmlSave will add a node like "&lt;mynode&gt;binary:1024=§/%&amp;§(%/§(%/&lt;/mynode&gt;" - the changed xml_NextItem will scan for this and store the next 1024 bytes into a new bank. Use xmlNodeDataGet to get the bank's handle.<br><br>The only limitation of my code is the usage of "binary:" as node-data, which is now preserved for binary-data. For me that's ok.<br><br>Hope you like it <br><br></td></tr></table><br>
<a name="601724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> John J.  just wondered if you could help,<br><br>Im trying to use XML for a character interaction system<br><br>edit-its ok I did it <br><br></td></tr></table><br>
<a name="601885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks like a very useful lib.<br><br>There were a few issues I had with it, however. It saves the nodes arse about, so that those created first in code are at the bottom of the file and those created last are at the top. This makes the file difficult to read, and may cause incompatibility with other XML readers (I don't know if node position is actully a relevant factor with XML).<br><br>Also, 'xmlSave' seems to be returning an error result (false) even when there isn't one.<br><br>Here's the code I tested with:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Include "BlitzXML_v1.7\BlitzXML.bb"



Graphics 800, 600, 0, 2

root = xmlNodeAdd( 0, "root" ) ; Create the root node.

	head = xmlNodeAdd( root, "head" ) ; Create the 'head' node.

		xmlNodeAttributeValueSet( head, "name", "head" )

		xmlNodeDataSet( head, "head" )

		title = xmlNodeAdd( head, "title" ) ; Create the 'title' node.

			xmlNodeAttributeValueSet( title, "name", "title" )

			xmlNodeDataSet( title, "title" )

	body = xmlNodeAdd( root, "body" ) ; Create the 'body' node.

			xmlNodeAttributeValueSet( body, "name", "body" )

			xmlNodeDataSet( body, "body" )

		data_1 = xmlNodeAdd( body, "data_1" ) ; Create the 'data_1' node.

			xmlNodeAttributeValueSet( data_1, "name", "data_1" )

			xmlNodeDataSet( data_1, "data_1" )

		data_2 = xmlNodeAdd( body, "data_2" ) ; Create the 'data_2' node.

			xmlNodeAttributeValueSet( data_2, "name", "data_2" )

			xmlNodeDataSet( data_2, "data_2" )



If xmlSave( "xmltest.xml", root ) ; If no error occurred...
	Print "File saved ok."
Else ; An error occurred, so...
	Print "An error occurred."
	num_errors = xmlErrorCount()
	Print num_errors
	For i = 1 To num_errors
		Print "Error: " + xmlError$( i )
	Next	
EndIf

WaitKey
End
</textarea><br><br>And here's the result:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
&lt;?xml version="1.0" ?&gt;
&lt;root&gt;
  &lt;body name="body"&gt;
    body
    &lt;data_2 name="data_2"&gt;data_2&lt;/data_2&gt;
    &lt;data_1 name="data_1"&gt;data_1&lt;/data_1&gt;
  &lt;/body&gt;
  &lt;head name="head"&gt;
    head
    &lt;title name="title"&gt;title&lt;/title&gt;
  &lt;/head&gt;
&lt;/root&gt;
</textarea> <br><br></td></tr></table><br>
<a name="607418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> So... any comments on the fact that this saves the file upside down. Seems to me like a bass ackwards way to do it. <br><br></td></tr></table><br>
<a name="607828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> (I don't know if node position is actully a relevant factor with XML) <br></div><br>As far as I know, the XML standard states that node positions are completely irrelevant. If you require node positions to be kept intact, you're probably misunderstanding the concept of XML structure. But I'll try to straighten this out for you anyway. <br><br></td></tr></table><br>
<a name="607834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scott Shaver</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> "When children are declared in a sequence separated by commas, the children must appear in the same sequence in the document. In a full declaration, the children must also be declared, and the children can also have children."<br><br>have a read about DTDs and XML here: <a href="http://www.xmlfiles.com/dtd/dtd_intro.asp" target="_blank">http://www.xmlfiles.com/dtd/dtd_intro.asp</a><br><br>Esentially you could argue the point either way, if you don't use a DTD to describe and validate the XML then you probably shouldn't worry about the order. If you do use a DTD then the order matters.<br><br>hope this helps<br><pre class=code>
Within the DTD for the purchase_order document, 
you could then define elements, such as:


&lt;!DOCTYPE purchase_order [ 
&lt;!ELEMENT purchase_order (customer)&gt; 
&lt;!ELEMENT customer (account_id, name)&gt; 
&lt;!ELEMENT account_id (#PCDATA)&gt; 
&lt;!ELEMENT name (first, mi, last)&gt; 
&lt;!ELEMENT first (#PCDATA)&gt; 
&lt;!ELEMENT mi (#PCDATA)&gt; 
&lt;!ELEMENT last (#PCDATA)&gt;]&gt;
The example DTD declares seven elements (purchase_order, customer, 
account_id, name, first, mi, and last) and sets the order in which 
those elements may be entered in a document. The line breaks used 
aren't relevant to the DTD, and neither is the order in which the 
elements are listed. Although the elements are entered from the 
highest level to the lowest level, you could also enter them in this order:


&lt;!DOCTYPE purchase_order [ 
&lt;!ELEMENT last (#PCDATA)&gt; 
&lt;!ELEMENT mi (#PCDATA)&gt; 
&lt;!ELEMENT first (#PCDATA)&gt; 
&lt;!ELEMENT name (first, mi, last)&gt; 
&lt;!ELEMENT account_id (#PCDATA)&gt; 
&lt;!ELEMENT customer (account_id, name)&gt; 
&lt;!ELEMENT purchase_order (customer)&gt;]&gt;
or this order:


&lt;!DOCTYPE purchase_order [ 
&lt;!ELEMENT account_id (#PCDATA)&gt; 
&lt;!ELEMENT customer (account_id, name)&gt; 
&lt;!ELEMENT first (#PCDATA)&gt; 
&lt;!ELEMENT last (#PCDATA)&gt; 
&lt;!ELEMENT mi (#PCDATA)&gt; 
&lt;!ELEMENT name (first, mi, last)&gt; 
&lt;!ELEMENT purchase_order (customer)&gt;]&gt;
As these examples show, the order of DTD declarations isn't important. 
What is important are the declaration, the declaration name, and the 
associated values. In the case of elements, the values in parentheses 
set the order in which the elements must be used. Here, customer 
elements must contain exactly one account_id element followed by exactly 
one name element. The name element must contain exactly one first 
element followed by exactly one mi ele-ment followed by exactly one 
last element. The first, mi, and last elements must contain parsed 
character data (#PCDATA), which is raw text that could contain entity 
references, such as &amp;gt; or &amp;lt; but don't contain other markup or 
child elements.

The spacing between the declaration name and other elements is also 
important. The following declaration is improperly formatted:


&lt;!ELEMENTaccount_id (#PCDATA)&gt;
as is the following declaration:


&lt;!ELEMENT account_id(#PCDATA)&gt;
The correct format is:


&lt;!ELEMENT account_id (#PCDATA)&gt;
</pre> <br><br></td></tr></table><br>
<a name="607982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info. Like I said, I'll try to fix the node order reversal. I doubt I will ever add support for DTD and other XML "features", because I think most of those features are unnecessary and just adds to the confusion. (At the local library here, there's a book titled "XML In A Nutshell", which is about 5 inches thick and has over 600 pages. If that's XML in a nutshell, I'd hate to see a complete guide. :) )<br><br>However, if there's a feature you really would like in MaXML, I'll do my best to add it. <br><br></td></tr></table><br>
<a name="608051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad to hear you're going to sort this out, John :-)<br><br>The main issue I had was one of readability as I'm working on a world editor and I'm planning on using this library to generate export files with it. I'd like the end user to be able to view the exported file in a text editor to get a clear idea of how the file format is structured.<br><br>As I said above, it's a very usefull lib, and greatly appreciated. <br><br></td></tr></table><br>
<a name="639172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Update: </b> Nodes now save/load in the correct order.<br><br>P.S. Bill Stanbrook: Sorry this took so long - I got side-tracked with other projects (MaXML, BattleTanks II, etc.) and I forgot about this problem. <br><br></td></tr></table><br>
<a name="639380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Roland</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome!  Thanks's John! <br><br></td></tr></table><br>
<a name="639791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Roland</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick question -- Is there a way to indicate where in the XML a new node should be positioned (at which point in the order, not at which point in the hierarchy?)<br><br>ie:<br><br>if my existing XML was:<br>&lt;rootnode&gt;<br>    &lt;child1&gt;<br>    &lt;/child1&gt;<br><br>    &lt;child3&gt;<br>    &lt;/child3&gt;<br>&lt;/rootnode&gt;<br><br>Is there any way i could put "child2" inbetween child1 and child3?<br><br>Thanks!<br><br>Roland <br><br></td></tr></table><br>
<a name="639911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VP</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> [lack of] DTD validation and generation is one of the first things I noticed re MaXML / BlitzXML, but didn't pass comment on because I don't think we really need it, do we?<br><br>Unless you're creating some fairly high-brow application, DTD's are not needed. Your average 3D map dataset isn't going to need a DTD generating, nor will it need to be checked against one when you load it into your game.<br><br>I looked at the DTD spec when I began to grok XML. Whilst you do need one for standards compliance, stuff tends to work without it. The most use I've had from a DTD is checking that my hand-written XML was not contradicting itself. It took more work to figure out the correct DTD than it did to figure out the XML structure.<br><br>If you really do need DTD, then your project perhaps is not one that should be reliant on a free set of procedures! Altova XMLSpy is a great piece of software which, incidentally, generates a correct DTD at the click of a button. <br><br></td></tr></table><br>
<a name="640020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Roland: There isn't really any way to do that in BlitzXML currently, unless you delete all nodes of a parent and re-insert them. I'll see if I can add some features to re-arrange nodes. Unfortunately, BlitzXML is ancient technology compared to MaXML 2.0, which is much faster and feature-rich (I never really considered keeping node order intact when I created BlitzXML 1.0). I may someday re-write BlitzXML with all the features of BlitzMax.<br><br><div class="quote"> Unless you're creating some fairly high-brow application, DTD's are not needed. Your average 3D map dataset isn't going to need a DTD generating, nor will it need to be checked against one when you load it into your game.<br><br>I looked at the DTD spec when I began to grok XML. Whilst you do need one for standards compliance, stuff tends to work without it. The most use I've had from a DTD is checking that my hand-written XML was not contradicting itself. It took more work to figure out the correct DTD than it did to figure out the XML structure.<br> <br></div><br>I agree. DTD support isn't really necessary in most cases. <br><br></td></tr></table><br>
<a name="646208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadMunky</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> is there any way to get MaXML to work with BlitzMax 1.18? or when will there be an update? <br><br></td></tr></table><br>
<a name="646472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wasn't aware of this problem. I'll try to fix it as soon as possible. <br><br></td></tr></table><br>
<a name="767291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to use this for Skinning? Like Yahoo Messenger does? <br><br></td></tr></table><br>
<a name="767377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use BlitzXML do load/save any kind of data you want, so yes, you can save skinning configurations as XML if you want. But the actual skinning of your application is up to you (the programmer) - BlitzXML has nothing to do with graphics. <br><br>P.S. Or did you accidentally post in the wrong thread? <br><br></td></tr></table><br>
<a name="1036258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Axel Wheeler</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hate to bump this thread but:<br><br>A: BlitzXML is sufficiently wonderful to merit it anyway, and<br><br>B: I found a bug:<br><br>Self-closing tags without attributes seem to add a spare "/" with each save.  As in &lt;players////&gt;.  When reloaded, it then keeps all but the last slash as part of the node\Name$ string, which generally makes it unusable.<br><br>Here's my simple fix:<br><br><pre class=code>
	xmlRootNode=xmlLoad("settings.xml")
	
	;This next loop is due to a bug in BlitzXML which passes the closing / in a tag as part of the name itself.  We remove it here.
	For n.xmlNode=Each xmlNode
		name$=n\name$
		While Right$(name$,1)="/"
			name$=Left$(name$,Len(name$)-1)
		Wend
		n\name$=name$
	Next
</pre><br><br>Thanks John J. for a great library.  I'm just getting into config files and this is definitely the way to go.  This website sorely needs a recommended solutions area, or rankings or something so folks don't have to browse everything to find gems like this. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
