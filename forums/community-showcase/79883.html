<!DOCTYPE html><html lang="en" ><head ><title >Single surface stress test,... 10,000+ particles</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Single surface stress test,... 10,000+ particles</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Single surface stress test,... 10,000+ particles</a><br><br>
<a name="897228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.andimages.com/proofs/pongo/blitz/SingleSurf_sample.zip" target="_blank">Download it here! </a><br><br><br>5000 particles running at 200 fps<br><img src="http://www.andimages.com/proofs/pongo/blitz/ss_stress.jpg"><br><br><br>Here is a single surface stress test mentioned in another thread. I'm interested in knowing what kind of framerates some of you get with this. I have posted some results for extreme tests (20,000 particles) below.<br><br><br><br><br>Below is the readme included with the .zip<br>____________________________________________<br><br>This is a stress test for a single surface particle system written in Blitz3d.<br><br>controls:<br><br>Space - toggle FPS lock<br>a/z rotate sprites<br>s/x scale sprites<br>mouse to move the camera<br>mouse wheel to zoom in and out.<br><br>When you run the program you will be prompted to enter a number of particles. Polygon count will be twice this, since each particle is made up of 2 triangles.<br><br>You can toggle the locked frame rate by pressing the space bar This will toggle between 60 fps and whatever speed your computer can handle. This engine does not do frame skipping so if it can not maintain 60fps it will dip below that. Fortunately it takes thousands of sprites before the frame rate dips this low.<br><br>Every particle is updated every frame as you can see by the texture animation playing.<br><br>You can see what happens when a transform is applied by pressing a/z to rotate every particle, or pressing s/x to scale every particle. In my tests, the frame rate remains constant.<br><br><br>Here are my results on my "fast machine"<br><br>1000 particles  <br>locked framerate: 60 fps<br>unlocked Framerate: 750 fps<br><br>5000 particles  <br>locked framerate: 60 fps<br>unlocked Framerate: 200 fps<br><br>10000 particles  <br>locked framerate: 60 fps<br>unlocked Framerate: 67 fps<br><br>20000 particles  <br>locked framerate: 29 fps<br>unlocked Framerate: 29 fps<br><br><br>I don't have the numbers for my "slow machine", but I am still able to get 30 fps with 10,000 particles on screen,... this is far more than I will ever need in my game. Running several thousand will result in frame rates of a solid 60 fps (Which is locked by the game engine) <br><br></td></tr></table><br>
<a name="897234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chwaga</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice particle engine. 50000 particles: 9FPS  (though that means nothing since my computer is L337) <br><br></td></tr></table><br>
<a name="897246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> For 5000 objects I get 12fps which is pretty much indentical to my Blitzmax engine running a similar demo. <br><br>However, I forget the name of the forum member, but he is coding 3D screensavers with B3D and I remember one of his demos had something like 20k sprites (he was claiming pretty much unlimited number of sprites with hardly any slow down) and he was achieving frame rates in B3D that I could not match in BMax. (Boiled something??) <br><br></td></tr></table><br>
<a name="897251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get 60fps unlocked for 10,000 quads.  <br><br>I think Boiled Sweets may have used the fasttext library or possibly a .dll?  I can't see a single surface system getting any faster than this natively. <br><br></td></tr></table><br>
<a name="897253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> MGE- what speed computer are you running? Did you mean 50,000 instead of 5,000?<br><br>The system that put up the numbers I listed above is my workstation at work, and I would put it right near the top of what is available, but even my home machine which is quite old can handle 10k at 30fps<br><br><br>I'm surprised that Blitz max isn't faster for this, but I guess at some point it's all about hardware speed. <br><br></td></tr></table><br>
<a name="897257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately it continually zooms in for me. :o/<br><br>I did, however, manage to get...<br><br>20000 - 19FPS<br>10000 - 36-&gt;37FPS<br>5000  - 69-&gt;71FPS<br><br>...before my scroll wheel finger burst into flames. ;o) <br><br></td></tr></table><br>
<a name="897259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> 5,000 - 34FPS<br>10,000 - 19FPS<br>50,000 - 4FPS<br><br>Intel GMA X3100 <br><br></td></tr></table><br>
<a name="897260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Duckstab[o]</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> getting 11 Fps with 60000 <br><br></td></tr></table><br>
<a name="897283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snixx</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 100000 15 - 20ish fps , not bad<br><br>edited as you need spec I guess,<br><br>Vista Home Premium x64 SP 1<br>Intel Core2Quad 9450<br>4gig ram<br>9800gtx<br>*snip*<br><br>probally all ya need really, <br><br></td></tr></table><br>
<a name="897297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> 5000 sprites, 12fps<br>Intel 82845G Integrated GPU<br>Intel Celeron 2.93GHz<br><br>I don't dare develop on high end systems like you guys have. ;) <br><br></td></tr></table><br>
<a name="897304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for all the numbers. I guess there is a good reason I avoid the intel graphics and stick to Nvidia!<br><br>Other than those chipsets, the results are what I was hoping for though. My game is limited to only around 2-3000 particles, but it was fun to see how many of these the system could push through. <br><br></td></tr></table><br>
<a name="897345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> "I guess there is a good reason I avoid the intel graphics and stick to Nvidia!"<br><br>If you're creating a 2D game, I would disagree. ;)  :) <br><br></td></tr></table><br>
<a name="897378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> 72FPS for 1000<br>21FPS for 5000<br><br>WinXP Home ; ATI Radeon 9250 ; Mobile AMD Athlon XP-M +1700 ; 1.47 GHz, 512 MB RAM <br><br></td></tr></table><br>
<a name="897430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> 10000 @ 37FPS.<br><br>P4 3.2GHz, Radeon 9800XT, 1GB RAM, XP Home.  My video card and PC are about 4 years old but were considered very good back then. <br><br></td></tr></table><br>
<a name="897442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is not really single surface is it. I see that you have four textures representing the four shapes - that's four surfaces not one. Try putting all the textures into one larger texture. You may also want to attempt using a single triangle instead of two but the extra texture memory is a trade-off. <br><br></td></tr></table><br>
<a name="897451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh I assumed form the title that all the 4 images were on a single surface.  Weird that they are not... <br><br></td></tr></table><br>
<a name="897481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indiepath- That is correct. There are as many surfaces as there are textures.<br><br>I'm ok with that though,... the speed is there and I'm using 4 surfaces instead of 5000 surfaces.<br><br><br>I also tried the single triangle particles, but it's not worth it for me. In order to make it work the triangle has to be drawn much larger to fit the square texture on it. when you do that you get slowdowns because you are drawing overlapping alpha due to the extra size on the particles. <br><br></td></tr></table><br>
<a name="897505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it faster if you put all those 4 different particles on a single surface though so there's 100% no surface change states going on with the GPU? <br><br></td></tr></table><br>
<a name="897520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be faster yes, so long as the texture is big enough to hold all your images. It would be ideal to put your entire game graphics on a single texture. If not you have to be careful that you group or batch your objects so that you switch textures as infreqently as possible.<br><br>On my iMac running Vista, which is a an Intel Dual Core 2 @ 2GHz with ATI X1600 graphics, I had to adjust to about 8000 particles to get 60fps. It bombed out when I tried 100,000, but 50,000 worked at a few frames per second. Somehow I am thinking this is still slow compared with what I've seen in OpenGL.<br><br>I also agree triangles are probably not much benefit compared to quads - your triangle has to cover as much space as 2 quads in order to fit the same-sized quad inside it, which means more alpha tests/overdraw. <br><br></td></tr></table><br>
<a name="897523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I mentioned the triangle thing as the trade off is not worth it - it's good to know you tried though :)<br><br>1 Texture is always going to be the fastest - there are some really great texture packers on the market too that will do all the hardwork for you. <br><br></td></tr></table><br>
<a name="897529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> You won't get a huge speed boost by using a single texture for 10,000 quads.  The biggest overhead with single surfaces system in Blitz is that vertex manipulation is costly.  IIRC each single vertex change is sent to your card as a state change. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
