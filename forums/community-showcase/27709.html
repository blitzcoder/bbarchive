<!DOCTYPE html><html lang="en" ><head ><title >Perfect 2D in 3D Quads - no Blurr</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Perfect 2D in 3D Quads - no Blurr</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Perfect 2D in 3D Quads - no Blurr</a><br><br>
<a name="290353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >coffeedotbean</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> We all wanna make 2D games but want to do it in 3D with quads because of all kinds of cool effects.<br>The problem was that all textures got filtered in B3D, right?.. wrong, as long as you use square images in the power of 2 (2,4,8,16,32,64,128 etc), it can be done with no blur, and crisp images, you can't tell the difference between 2D and 3D Quads.<br><br>Current Commands:<br><br>Graphics2D(Width,Height,Depth,Mode)<br>Load3DImage(FileName$,[Alpha#])<br>Load3DAnimImage(FileName$,FrameWidth,FrameHeight,StartFrame,FrameCount,[Alpha#])<br>Draw3DImage(Image,X,Y,[Frame])<br>Handle3DImage(Image,PosX,PosY)<br><br>I can't take full credit for this I put this together when skidracer posted a way of creating a no blurred sprite in a BB post. I just made it work with quads.<br><br>Feel free at add to this, It got all the tools I want for my game.  Enjoy.<br><br><a href="http://www.jabawokie.ukgamers.net/2DSprite.zip" target="_blank">http://www.jabawokie.ukgamers.net/2DSprite.zip</a><br><br><img src="http://www.jabawokie.ukgamers.net/com.png"> <br><br></td></tr></table><br>
<a name="290390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool! although I am afraid it must be used in a certain resolution(?). However, the example pic looks very crispy. thx! <br><br></td></tr></table><br>
<a name="290399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >coffeedotbean</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Certain Resolution?<br><br>Works ok in 640,480 and 800x600 and 1024x768... unless you mean the image must be sqaure and in the power of 2 (2,4,8,16,32,64,128 etc). A fair trade off :D<br><br>I just added Rotation (will be in the next release)Look pretty good although theres a slight blurr, hard to tell unless you zoom in though.<br><br>I think I'll need to add some kind of draw order though. <br><br></td></tr></table><br>
<a name="290403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, if the "images" are used with a fixed size (as they are in 2D), then it might work ok (although the resolution must be a factor in the positioning), but if you want them to be scaled resolution independently (eg. a quad is always 25 percent of the screen, no matter what resolution) then it might be blurred in lower and higher resolutions.<br><br>However, very nice and useful stuff! <br><br></td></tr></table><br>
<a name="290404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> skidracer posted some code for doing this in the code archives - I think his term for them was 'pixies'. <br><br></td></tr></table><br>
<a name="290407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >coffeedotbean</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I credited SkidRacer.<br><br>The images don't scale depending on the resolution if you load a 64x64 image with my Load3d[Anim]Image() and position it at X:12 Y:67 for example, it will stay that size and at that position no matter the resolution, tried resolutions from 320x240 to 1027x768 and all is A-OK.<br><br>I just added draw ordering also.<br><br>I think thats about it, I looked at scale image but it went all blurry... what i wanted to avoid in the first place. <br><br></td></tr></table><br>
<a name="290571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian  Thompson</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice! <br><br></td></tr></table><br>
<a name="290593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for that - very nice idea!<br><br>IPete2. <br><br></td></tr></table><br>
<a name="290600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >coffeedotbean</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> For the next release.. tonight i hope, there will be a few more function:<br><br>Rotate3DImage(Image,Angle) - Done!<br>ImagesOverlap(Image1,X,Y,Image2,X,Y) - Working on it<br><br>I'll also be reworking the Draw3DImage() function to have the Alpha and other Entity effects in the Draw3DImage function. instead of the Load3DImage() function... make mroe sense.<br><br>I'll also be fixing the slow up when the program runs for a while, i just need to free textures when they are used. <br><br></td></tr></table><br>
<a name="290663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is great. Have you seen Sprite Control? Will your functions have as many features?<br><br>Jason. <br><br></td></tr></table><br>
<a name="291739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work David. This is the sort of thing I've been wanting to do in SpriteControl for ages.<br><br>What do you think to this version of your Load3DImage() function? It let's you load and display any image size.<br>The function loads a padded version of the original image into a texture and scales the texture to stretch beyond the quads size (which mimics the original image size).<br>The downside to this is that if the programmer say, loads an image at 258 by 130 then the size of the image after being padded out will be 512 by 256.<br><br>Anyhow, the sprite and image still seem identical:<br><img src="http://homepage.ntlworld.com/config/img/spritecompare2.png"><br><br><br><pre class=code>Function Load3DImage(File$,Alpha#=1)
	
	Local TempMesh = CreateMesh()
	Local TempSurf = CreateSurface(TempMesh)

	AddVertex TempSurf,-1,1,0 ,0,0 : AddVertex TempSurf,1,1,0 , 1,0
	AddVertex TempSurf,-1,-1,0 ,0,1 : AddVertex TempSurf,1,-1,0 , 1,1
	AddTriangle TempSurf,0,1,2 : AddTriangle TempSurf,3,2,1
	
	Local tmpimg=LoadImage(File$)
	Local imgW=ImageWidth(tmpimg) , imgH=ImageHeight(tmpimg)
	Local sizeX=NextPower(imgW) , sizeY=NextPower(imgH)
	Local newimg=CreateImage(sizeX,sizeY)
	CopyRect 0,0,imgW,imgH,0,0,ImageBuffer(tmpimg),ImageBuffer(newimg)
	FreeImage tmpimg
	Local tmpfile$=SystemProperty("tempdir")+"scTMP"+Rand(9999)
	SaveImage newimg,tmpfile$ : FreeImage newimg
	
	tex=LoadTexture(tmpfile$,1+4) : DeleteFile tmpfile$
	sizeX=TextureWidth(tex) : sizeY=TextureHeight(tex)
	ScaleTexture tex,Float(sizeX)/Float(imgW),Float(sizeY)/Float(imgH)

	EntityTexture TempMesh,tex
	EntityFX TempMesh,1
	EntityParent TempMesh,SpriteControler
	ScaleEntity TempMesh,Float(ImgW)/2,Float(imgH)/2,1	 
	EntityAlpha TempMesh,Alpha#
	
	Handle3DImage(TempMesh,-1,-1)
	spritetexture=tex
	Return TempMesh
	
End Function

</pre><br><br>You also need this function:<pre class=code>; round to next POWER   (2..4..8..16..32..64 etc)
Function NextPower(n)
	Return 2 Shl (Len(Int(Bin(n-1)))-1)
End Function</pre><br><br>!EDIT!<br>I got this working with my ImageWidth3D() and ImageHeight3D() functions. It now shows the correct (original) image size in pixels.<br><br>I may incorporate your method into SpriteControl with full credits of course :-)<br><br>Good luck with the collision stuff! <br><br></td></tr></table><br>
<a name="291796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >coffeedotbean</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jim, thats nice work ill try it when i get home, it not me who needs the credit, skidracer did the hard work i just made it work with quads and put it into easy to use functions.<br><br>But if you can get your sprite control to work with this pixel perfect-ness then please go ahead.<br><br>heres the image collision function its very basic, and wont work with images that have be rotated, and you have to manualy enter each images size, and they must have the same handle position... but hey it works :)<br><pre class=code>
Function Images3DOverlap(Image1,X1,Y1,Size1,Image2,X2,y2,Size2)

	If X1+Size1&gt;X2 And X1&lt;X2+Size2 And Y1+Size1&gt;Y2 And Y1&lt;Y2+Size2 Then Return 1

End Function
</pre> <br><br></td></tr></table><br>
<a name="291943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wedoe</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice, I use Norc's old system which basically does the same and it never fails :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
