<!DOCTYPE html><html lang="en" ><head ><title >Performance Test - Isometric Engine Using ZBuffer</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Performance Test - Isometric Engine Using ZBuffer</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Performance Test - Isometric Engine Using ZBuffer</a><br><br>
<a name="652147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All,<br><br>Could I please ask some people to try out this demo and let me know how good/bad it performs on different PCs.<br><br>Demo is here:<br><br><a href="http://home.swiftdsl.com.au/~Matthew.Lloyd/lloyd/IsoTest.zip" target="_blank">http://home.swiftdsl.com.au/~Matthew.Lloyd/lloyd/IsoTest.zip</a><br><br>It is a 2.8 MB download zip file.<br><br>I am interested in finding out how many 'units' it takes before the frame rate drops below 40fps and/or what the frame rate is when the unit count is between 30-50 units.<br><br>When it loads it should show a fairly basic dungeon environment with the logictime/rendertime/fps/unit count shown in the upper left.<br><br>Press space bar to place a unit on screen (which can be moved around with the cursor keys) and press the left mouse button to add units (not player controlled) to the environment.<br><br>Thanks,<br>Matt<br><br>PS - I've tried it on my old 500 Mhz AMD machine (Geforce 2 MX) and it slows down considerably with only a few (less than 10) units on screen.  While on my laptop (AMD 3600+ (?I think?) ATI Radeon 9700 64MB VRam 512MB System Ram)  I can have around 50 units on screen before any noticeable slow down occurs. <br><br></td></tr></table><br>
<a name="652152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Frame rate (30-50 units): 60FPS<br>Units before framerate drops: ~110<br><br>Anything over 110 gives me a sudden drop from 60FPS to around 30/35FPS.<br><br>(Specs in sig) <br><br></td></tr></table><br>
<a name="652157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Frame rate ( up to 145 units ) 60fps<br>Anything above and Frame rate drops to 30 suddenly?!<br><br>Specs: P4 3mhz , gfx440mx , 512meg RAM , WinXPPro.<br><br>Stevie <br><br></td></tr></table><br>
<a name="652169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> He's using vwait or flip 1 :) <br><br></td></tr></table><br>
<a name="652172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Duckstab[o]</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> FrameRate (30-50) 60 fps<br><br>over 110 drops to 30/35 fps<br><br>Things to take into account that can cause frame rate drops like that<br><br>1. Make sure you only check collision with the nearest characters to the player.<br><br>2.Ai units dont really need any imagecollision with the map .store map info in a grid format and reference that ie 3-4 passable 5-7 blocked.<br><br>3.Make sure you dont have collision set up to check if all ai units collide ie only check for units that are within a fixed range of each other or use similar to method 2. <br><br></td></tr></table><br>
<a name="652187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cyg has it: a halving in framerate means Vsync is on, which I prefer actually.  Best to keep the game running full speed where pos but it it drops the odd frame here and there, that's OK as it won't be noticed.  Actually running at 30FPS doesn't look so bad if it's constant, what's worse is constantly going from one to the other because the code is borderline. <br><br></td></tr></table><br>
<a name="652233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> i've run into the same sorta timing thing... i wound up slowing down the game logicm independent of the refresh rate, so that everything has a chance to get done before the next game tic...<br><br>still though, i can see some potential problems... and each level of the game has to have a different logic speed...<br><br>this is what i'm asking Ant about now concerning the structure of his latest 'engine'... the 'stuffing all the update function calls for everything in your game in mainloop' method is what i have a problem with...<br><br>better to have some sort of messaging or callback available... yes, no ?<br><br>--Mike <br><br></td></tr></table><br>
<a name="652237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All,<br>I am using flip 1 which is why it drops to 30 fps suddenly - I am mainly concerned with knowing on what level of hardware I can have 30-50 units in game on and still run at 60 frames per second or higher.<br><br>Duckstab - you will likely find that it is not the collisions which are slowing things down but the draw routine.  That is why I had the 'logic time' and 'render time' displayed on screen.  I would be surprised if the logic time went above 10 ms (even on my 500 Mhz machine the logic time remains below that figure way before the render time becomes a problem.)  <br><br>I'd be quite keen to also hear from anyone with a lower end system how their system performs, particularly with regards to when 30-50 units are present.<br><br>I'm thinking of using this to re do my "Blood And Plunder" game or at least make something similar. <br><br></td></tr></table><br>
<a name="652293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Duckstab[o]</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> didnt mean to seem negative but if i see that sort of fps with less than 2000 images,sprites using blending on my spec it normally points to code not the images.<br>ie sorting methods..<br><br>what are the character dimensions 128 by 64? <br><br></td></tr></table><br>
<a name="652476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reason it slows down so much with only ~110 images is because I am using writepixelfast for every sprite (coded in blitzplus) in order to be able to use a single bitmap as the background.  <br><br>As you know most isometric engines use tiles.  Mine uses a single image as the backdrop.  This means that I need to have two depth values for each pixel - one for the detailed environment and another for the 'floor'.  By comparing each individual pixel in the image between the backdrop depth value and the floor depth value at the unit's feet I can tell whether a pixel should be obscured by walls and other obstacles.  Therefore I cannot use 'drawimage' (which would easily allow for thousands of sprites) but instead must use writepixelfast....unless you or anyone else can point to another method of doing an isometric engine that uses a single image for the environment.  Also - I have ensured that no pixel ever gets drawn more than twice.<br><br>The image strip that the character dimensions came from was 128x128 but I don't store the images in VRAM but instead store them in system RAM using my own image format (all those .pix files).  By doing this I can have many more different characters.  For these character sprites the file size is slightly larger than a corresponding png file but it is not compressed. <br><br></td></tr></table><br>
<a name="652507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok..well on my 800mhz 9600pro setup..10 units drops fps<br>under 50...to 40 something.. Then i doubt you care about<br>having it run on systems this old..<br><br>You no doubt have your reasons for performing per pixel ops,<br>but its going to be killer even on good systems..there must<br>be another solution.<br><br>anyway - goodluck. <br><br></td></tr></table><br>
<a name="652511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Regular K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> At 95 it starts to go to 30 once and a while.<br><br>Specs below <br><br></td></tr></table><br>
<a name="652628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> 39 units is still at 70fps then suddenly 40 dips the fps to 40 ish.<br><br>IPete2.<br><br><br>Athlon 1900+<br>768 MB RAM<br>GeForce 6600 (256MB ddr) <br><br></td></tr></table><br>
<a name="652701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mrtricks</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> same as IPete2 but mine dips when I have 39 units. <br><br></td></tr></table><br>
<a name="652762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Matty, I cannot understand the need for a single image for the background?  Why not use a tiling system like most others?  Surely the overheads needed to determine the drawing order for each tile / character / item far outweigh writing each invividual pixel on screen. <br><br></td></tr></table><br>
<a name="652795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reason I use a single image for the background is that it means I can use a prerendered image for the environment which may not be easily reduced to 'tiles'.  <br><br>Also another reason for writing each pixel is that I have a lot more control over the appearance of the sprites - I can adjust colors in real time (for no additional performance hit) so that for instance the sprite flashes or is brightened/darkened without needing additional images for each of these states.  Also I can fit a lot more different types of unit into the game as for each sprite I am only storing the color value of non transparent pixels in system RAM instead of Video RAM meaning that each image uses less memory than if I were to use standard images and that I have more memory to play with since available system RAM is usually greater than Video RAM. <br><br></td></tr></table><br>
<a name="653625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kenshin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> No Units - 1000fps<br>42 Units - approx 200fps<br>200 Units - approx 40fps <br><br></td></tr></table><br>
<a name="653672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> 40 units   = ~70 fps<br>100 untis = ~40 fps<br>170 units = ~30 fps<br><br>These figures are based on the number of units required to start making the fps drop below the stated level. <br><br></td></tr></table><br>
<a name="653744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks everyone. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
