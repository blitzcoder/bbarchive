<!DOCTYPE html><html lang="en" ><head ><title >The Mario Genome</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >The Mario Genome</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >The Mario Genome</a><br><br>
<a name="1055066"></a>

<a name="1055067"></a>

<a name="1055068"></a>

<a name="1055069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was reading <a href="http://forums.tigsource.com/index.php?topic=15544.0" target="_blank">this thread</a> over at the TIGForum earlier and noticed a link to <a href="http://rogeralsing.com/2008/12/07/genetic-programming-evolution-of-mona-lisa/" target="_blank">this website</a> showing an example of a genetic algorithm. I found this very interesting so I decided to create my own version of the app the author describes.<br><br><img src="http://www.gooeyblob.com/temp/eiscreen.png"><br><i>The algorithm quickly makes an appoximation, but finds details much harder</i><br><br>For the most part it works quite well, but the small population(only two) meant that it quickly gets into an evolutionary dead end and is unable to evolve out of it. If I wanted to experiment properly then I needed a much larger population, and the image generating algorithm isn't suited to that. As the genetic code is it's own entity it can be used to control any style of app that takes numeric input, and feeds back a quantifiable success rate. As most games take some kind of user input and give a defined score it made perfect sense to have the gene codes control a simple game and see how well they do. And so was born <b>The Mario Genome</b>.<br><br><a href="http://www.gooeyblob.com/temp/mgscreen.png" target="_blank"><img src="http://www.gooeyblob.com/temp/mgscreentmb.png"></a><br><i>Given enough time the genetic code can equal any human player</i><br><br>The premise is simple, a platformer with two controls, right and jump, and a population of 1,000 genetically controlled Marios. Each run the genetic codes attempt the level, and are given feedback on their success. The 500 least successful codes then die and the remaining 500 reproduce to bring the population back to 1,000. This lifecycle is repeated indefinitely, and every generation, as a whole, makes improvements over the last. In theory the Marios should keep improving until they can complete the level in the perfect time.<br><br>So how did they do? Well the first task was for them to complete the level, which they did in only 1935 generations. It actually surprised me how quickly they learnt how to get to the end. Next I played the level myself and decided that a good speedrun time was 452 ticks(1/60 second). The evolving Marios made the time at generation 3010. Finally I calculated the best time possible was 431 ticks and set them about the task of equalling it. This was much harder and took them a very long(several hours) time to do, but they did make it at generation 7705.<br><br>Ok thats enough talk here are <a href="http://www.gooeyblob.com/temp/evo_tests.zip" target="_blank">the apps(win&amp;mac)</a> for anyone who wants to try them out. Evo is the image app and you'll need an image for it to test against, 256x256 pixels works best. Evoplat is The Mario Genome and the controls are on screen for that one. Some things to note. The generations may not go up every run, this is because the last batch of children were all worse performers than their parents, and the same parents have a new batch of children. My cpu is quite beefy so the apps run really fast on my setup, but I can't vouch for the speed on slower machines. The Alpha Mario is the Mario who was most successful on the previous run, he may not actually be the best of the current crop. As the genetic codes adapt to their current environment it is possible for the same codes to learn more than one game. As long as the codes can interface with the game and get quantifiable feedback then these simple gene codes can play it.<br><br>What next? Well I'm done with this as I've used up too much time already. If I was to expand upon it I'd try something like Mario 1-1, and give the gene codes full game controls.<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1055071"></a>

<a name="1055072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks for sharing , ill take a look<br>can the marios 'see' the environment or are they merely selecting for the best weights between left right and jump<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1055076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No not in this experiment. The only feedback the gene codes get are how far they got and how quickly they got there. Giving more feedback than that would have made a little experiment into a rather large one. It would still work the same way though, the only real difference would be that the gene codes could 'learn' specialised behaviour for different situations. <br><br></td></tr></table><br>
<a name="1055080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> true, <br><br></td></tr></table><br>
<a name="1055083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >andy_mc</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> this looks awesome, I'm defo trying this tonight. <br><br></td></tr></table><br>
<a name="1055092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> . Giving more feedback than that would have made a little experiment into a rather large one. <br></div><br>I can only imagine what kinda hyperbolic increase would be involved with more complex processes...<br>Still, it's really interesting stuff and this is the groundwiork for all sorts of potential!<br>Nice stuff, Oddball! <br><br></td></tr></table><br>
<a name="1055142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> any plans to release the source? <br><br></td></tr></table><br>
<a name="1055162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WERDNA</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> This looks awesome Oddball. Simply fascinating!<br><br>How long have you been coding for, if you don't mind me asking? <br><br></td></tr></table><br>
<a name="1055180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's very interesting. <br>Over a year ago I wrote a super mario bros framework to be used with an AI controller. The sim has 3 types of SMB enemies and breakable blocks, left and right movement and a random map generator. <br>Its pretty quick, doing about 1500 games a second on my computer. <br>I wrote the sim the day i heard about the SMB AI contest and was frustrated that the only language to use was java. This sim was intended to be compiled as a dll to be usable by any language. <br>You can get the sim source and sample viewer with a (cheap) genetic algo controller <a href="http://www.gutterbox.com/download/SMB_SIM.zip" target="_blank">HERE</a><br><br>I also duplicated the Evolutionary image generation tool [EVO Mona Lisa] a long time ago, If oddball doesn't want to release the source for his, i'll put mine up for download too. <br><br></td></tr></table><br>
<a name="1055214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's pretty interesting stuff GW. Looks like you've been working on some similar stuff. I might have a go at setting my gene codes loose in your sim if I get time, but to be honest I've probably spent too much time on this already. I'm actually supposed to be working on a different project at the mo'.<br><br>@WERDNA: I've only been coding for ~20 years. <br><br></td></tr></table><br>
<a name="1055237"></a>

<a name="1055238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks, the api is pretty simple, so you shouldn't have any trouble plugging in your own controller. It would be interesting to try a multi objective fitness function.  Instead of just calculating fitness based on farthest x value of the mario, perhaps something like: <br>sqrt(timesteps_to_finish_map) - number_of_enemies_killed + (number_of_jumps)<br>that could help eliminate needless jumping and being aggressive with koopa's at the same time.<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1055259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>interesting topic...I'd like to ask a question - I understand using the 'score' of some sort to determine the fitness of a gene sequence, ie number of kills, furthest distance reached, time taken to complete etc but what I don't understand is how you decide on when to 'jump' and when to 'go right'.  <br><br>Do the marios observe their current situation and respond, or how do they know when to jump.<br><br>The AI I've usually coded in the past has been fairly 'reactional' - if a situation is encountered respond with xyz...<br><br>How does one decide on a response with a genetic algorithm? What does each gene represent? <br><br></td></tr></table><br>
<a name="1055289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matty, the answer is... any way you like. A gene sequence could simply code a list of moves, a set of weight in some kind of intelligent algorithm, or whatever. What Oddball is doing specifically is another question. <br><br></td></tr></table><br>
<a name="1055325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok I shouldn't still be working on this, but I altered the way genes control the Marios slightly. Behaviour should now be more consistent from generation to generation. The Marios will work out the solution much quicker, just over hundred gens in my first test, but might struggle to get a perfect speedrun. This also means I could lower the population significantly. I've added an equal number of controls for fairness, and I've altered the fitness test to use the amount of jumps as a tie breaker. If two Marios score the same on the fitness test then the Mario who made the least jumps is rated higher. Finally the genetic codes are now stored on exit to the file 'data.tmg' if you wish to start a fresh batch of gene codes then simply delete this file.<br><br><a href="http://www.gooeyblob.com/temp/tmg.zip" target="_blank">The Mario Genome v2 [Win&amp;Mac]</a> <br><br></td></tr></table><br>
<a name="1055412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> GW - how do you see the gameplay? i just get a blank screen <br><br></td></tr></table><br>
<a name="1055484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> hold down the space bar. sorry i didnt put that in the readme. <br><br></td></tr></table><br>
<a name="1056628"></a>

<a name="1056629"></a>

<a name="1056630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Congratulations, you made Hackaday! About 3/4 down the page.<br><br><a href="http://hackaday.com/page/4/" target="_blank">http://hackaday.com/page/4/</a><br><br>Woof woof!<br><br><font class="tiny">Last edited 2010</font><br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
