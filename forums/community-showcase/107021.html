<!DOCTYPE html><html lang="en" ><head ><title >Voxel Slicer (Fake 3D in Max2D)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Voxel Slicer (Fake 3D in Max2D)</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Voxel Slicer (Fake 3D in Max2D)</a><br><br>
<a name="1322436"></a>

<a name="1322437"></a>

<a name="1322438"></a>

<a name="1322439"></a>

<a name="1322440"></a>

<a name="1322441"></a>

<a name="1322442"></a>

<a name="1322443"></a>

<a name="1322444"></a>

<a name="1322445"></a>

<a name="1322446"></a>

<a name="1322447"></a>

<a name="1323134"></a>

<a name="1323135"></a>

<a name="1323136"></a>

<a name="1323193"></a>

<a name="1323195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I started playing around with <a href="https://voxel.codeplex.com/" target="_blank">MagicaVoxel</a> and wanted to import the .VOX files to BlitzMax but not use any 3D engine.<br>A friend of mine showed me <a href="http://www.like100bears.com/writing/2d-3d-in-gamemaker-studio" target="_blank">this method</a> to get "3D" in GameMaker.<br>So I decided to use a similar method to get the .VOX files into BlitzMax using nothing but BlitzMax's standard Max2D module.<br>Here's the result:<br><img src="https://dl.dropboxusercontent.com/u/2842751/2016-10-25_19-44-10.gif"><br><br><img src="https://dl.dropboxusercontent.com/u/2842751/2016-10-25_19-42-50.gif"><br><br><img src="https://dl.dropboxusercontent.com/u/2842751/2016-10-25_19-38-37.gif"><br>Basically I just load the .VOX file and create slices, like a CRT scan, and render those ontop of each other.<br>You can load the .VOX files directly, or you can output a PNG file and load that, which is a lot faster!<br>You can also use palettes and change the camera angle of the voxel model.<br>The shadow I put in there is just for show, you can use it but it's pretty "cheap".<br><br>Here's the final module: <a href="https://bitbucket.org/Hezkore/vox-loader" target="_blank">https://bitbucket.org/Hezkore/vox-loader</a><br>The module comes with some examples and .VOX files to get you started.<br>Though it's so simple to use, I doubt anyone will need the examples heh.<br>In the end you just use it like a normal TImage.<br>SetRotation, SetScale, SetColor etc. all works like normal with it, just that rotation is now 3D.<br><br>Here's a module for Monkey X that can load PNG slices: <a href="https://bitbucket.org/Hezkore/monkey-vox-slice-loader" target="_blank">https://bitbucket.org/Hezkore/monkey-vox-slice-loader</a><br><br>I hope someone uses this to make something cool! <br><br></td></tr></table><br>
<a name="1322451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool and interesting mod Hezkore. Any chance of handling incbin files? <br><br>I wonder how would that handle animations, as a separate sprite? <br><br></td></tr></table><br>
<a name="1322477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice stuff ! <br><br></td></tr></table><br>
<a name="1322483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RustyKristi The downside to voxels have always been the animations.<br>You could do, as you said, separate images for each frame, but It's mostly used for static things.<br>I might be able to get incbin working for PNG slices, probably not VOX files though.<br><br>@Bobysait Thank you! :)<br><br>I've added a VOX viewer you can use to save PNG slices directly from VOX files, then import the slices to your project. <br><br></td></tr></table><br>
<a name="1322512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RustyKristi I've made LoadSlices work with IncBin now.<br>Check out example 7 if you want to know how it works. <br><br></td></tr></table><br>
<a name="1322682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome! <br><br></td></tr></table><br>
<a name="1322790"></a>

<a name="1322791"></a>

<a name="1322848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've updated the module.<br>The shading is now much nicer and drawing has been optimized.<br>It now also comes with a simple demo showing everything in action.<br>You can grab the Windows EXE for that demo right here: <a href="https://dl.dropboxusercontent.com/u/2842751/vox_demo.zip" target="_blank">https://dl.dropboxusercontent.com/u/2842751/vox_demo.zip</a><br>Hold left mouse button to move.<br>Hold right mouse button to rotate the camera and change angle.<br><img src="https://dl.dropboxusercontent.com/u/2842751/vox3.png"> <br><br></td></tr></table><br>
<a name="1322842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Superb coding. very sneaky and clever! Well impressed... <br><br></td></tr></table><br>
<a name="1322844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome Hezkore! Source code please? :B <br><br></td></tr></table><br>
<a name="1322845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RustyKristi check my first post. :) <br><br></td></tr></table><br>
<a name="1322846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..hey..this is very nice..thanks man.. <br><br></td></tr></table><br>
<a name="1322847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah yes, thanks! <br><br></td></tr></table><br>
<a name="1323022"></a>

<a name="1323023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> It looks like MagicaVoxel's got a big update and now supports animations, built-in palettes and different material types per voxel.<br>I'll try to add support for all of this but it might take some time as I'll have to redo a big part of the module.<br>You can still use the module of course, it still loads the newest VOX format, it just doesn't use the new data. <br><br></td></tr></table><br>
<a name="1323029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would absolutely LOVE to see a Blitz3D version of this!<br><br>Thanks alot bro!<br><br>~GF <br><br></td></tr></table><br>
<a name="1323032"></a>

<a name="1323035"></a>

<a name="1323037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Guy Fawkes If you just want to load the sliced PNG files (which you should anyways) it's super simple to use in any language.<br>It's built to support the standard LoadImage function frame system.<br>All you do is load for example "obj_tree3_10x10.png" and in this case each frame/slice is 10 width and 10 in height.<br>Then just draw those ontop of each other.<br>Rotate the frames/slices from the middle and voila, it's 3D!<br>Though with Blitz3D I would probably recommend loading the voxels and generating a proper 3D mesh.<br>I only did this because BlitzMax has no official 3D engine. <br><br></td></tr></table><br>
<a name="1323042"></a>

<a name="1323043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> as Hezkore mentioned..<br><br><div class="quote"> Though with Blitz3D I would probably recommend loading the voxels and generating a proper 3D mesh.<br><br>I only did this because BlitzMax has no official 3D engine. <br><br> <br></div><br><br><div class="quote"> I would absolutely LOVE to see a Blitz3D version of this! <br></div><br><br>Fake 3D in Blitz3D?? yea what's the point? :-) <br><br></td></tr></table><br>
<a name="1323047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> The point is to have a little bit of fun! That's all! I think it would be really AWESOME to see something like this in Blitz3D! I mean. Think about it. We could make Chrono Trigger-like games with this type of function! The point that this can also save ALOT of memory by it being Fake 3D anyway!<br><br>Thanks alot!<br><br>~GF <br><br></td></tr></table><br>
<a name="1323049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Guy Fawkes Just load the slices and get to it! :)<br>But since you're not using 3D, maybe you could just use BlitzMax?<br>Notice that animations are rather difficult when it comes to voxels.<br>Though I now have the new animation system MagicaVoxel uses working in the module, so things are a bit easier now atleast. <br><br></td></tr></table><br>
<a name="1323050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not going to change my program of choice! I am a blitz3D programmer &amp; that's that! Why can't there be like an example not necessarily THIS library, but an example showing an animated character LIKE this in Blitz3D?<br><br>I think it would be fun &amp; could bring back Super Nintendo graphics which are the BEST!<br><br>Thanks alot Hekzore!<br><br>~GF <br><br></td></tr></table><br>
<a name="1323055"></a>

<a name="1323056"></a>

<a name="1323057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Guy Fakwes I haven't used Blitz3D, so I don't think I'll ever get around to porting it, sorry :/<br><br>In other news.<br>I've gotten most of the new features working and updated the source code, so grab it while it's hot!<br>Here's an animation example for Windows (works in Linux too): <a href="https://dl.dropboxusercontent.com/u/2842751/example9.exe" target="_blank">example9.exe</a><pre class=code>ADDED: Support for VOX animations/frames
ADDED: Support for built-in palettes
FIXED: Junk pixels when saving PNG slices
CHANGED: Depth and Frame count is now included in PNG name
ADDED: Frame slider in VOX Viewer
ADDED: TVox now uses already loaded VOX files instead of loading new ones
ADDED: Example 9 showing animations</pre>I'm not sure if I should support "materials".<br>The only thing that would actually work in 2D would be the glass material which would make voxels transparent. <br><br></td></tr></table><br>
<a name="1323071"></a>

<a name="1323072"></a>

<a name="1323073"></a>

<a name="1323075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm not going to change my program of choice! I am a blitz3D programmer &amp; that's that!  <br></div><br><br>GF, we're not questioning your loyalty with B3D lol, but it helps if you have a little bit of knowledge in BlitzMax because they are related language, in fact a successor of B3D w/o the 3D. It's really not that hard (I have converted some small snippets myself) esp if the code base is not that big.<br><br>So now is your chance.. ;-)<br><br>@Hezkore<br><br>COOL ANIMATION DEMO! :D<br><br><div class="quote"> I'm not sure if I should support "materials" <br></div><br>yea why not? at least make it experimental or optional? <br><br></td></tr></table><br>
<a name="1323076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RustyKristi Thanks! :)<br><br>I've added some very basic glass material support.<br>It's hard to do transparency when the slices add to the overall alpha.<br>But things do become a bit see-through at least heh.<br>Not sure if I should add an example for it or just include it as sort of an unsupported feature.<br><br>I'm going to port the Slice loading part over to Monkey X (And Monkey 2 eventually) if anyone's interested. <br><br></td></tr></table><br>
<a name="1323105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Hezakore<br>Been tinkering with the core drawing routines to optimize a bit and improve the shadows.<br><br>The shadows now take an alpha from 0 to 1 and fade them out as they are drawn so you get nicer effects.<br><br>the drawing code has been tidied up and precalcs added and if's removed giving a speed boost<br><br>Here's the augmented code:<br><pre class=code>
	Method DrawShadow(dX:Float, dY:Float, angleX:Float, angleY:Float, Frame:Int = 0)
		If Not _Shadow Then Return
		
		GetScale(_LastScale[0], _LastScale[1])
		dX = ScreenX(dX, GetRotation())
		dY = ScreenY(dY, GetRotation())
		brl.max2d.SetRotation(_Rotation + _LastRotation)
		
		Frame:Mod _ModelCount
		If Frame &lt; 0 Then Frame:+_ModelCount
		
		local inAlpha:float = GetAlpha()
		local alpha:float = inAlpha
		local alphadiff:float = (1.0 / _MaxZ) * .5
		setcolor 0,0,0
		
		For Local i:Int = 0 Until _MaxZ
			setalpha alpha
			alpha :- alphadiff
			
			dX:+_LastScale[0] * angleX * i
			dY:+_LastScale[1] * angleY * i
			
			'Don't draw things we don't see!
			If dX &lt; - _MaxX * _LastScale[0] Then dX:-_LastScale[0] * angleX * i;dY:-_LastScale[1] * angleY * i;Continue
			If dX &gt; GraphicsWidth() + _MaxX * _LastScale[0] Then dX:-_LastScale[0] * angleX * i;dY:-_LastScale[1] * angleY * i;Continue
			If dY &lt; - _MaxY * _LastScale[1] Then dX:-_LastScale[0] * angleX * i;dY:-_LastScale[1] * angleY * i;Continue
			If dY &gt; GraphicsHeight() + _MaxY * _LastScale[1] Then dX:-_LastScale[0] * angleX * i;dY:-_LastScale[1] * angleY * i;Continue
			
			DrawImage(_Shadow, dX, dY, i + (_MaxZ * Frame))
			DrawImage(_Shadow, dX, dY - _LastScale[1] * 0.5, i + (_MaxZ * Frame))
			If i + 1 &lt; _MaxZ Then DrawImage(_Shadow, dX, dY - _LastScale[1] * 1, i + (_MaxZ * Frame))
			
			dX:-_LastScale[0] * angleX * i
			dY:-_LastScale[1] * angleY * i
		Next
		
		SetAlpha inAlpha
		brl.max2d.SetRotation(_LastRotation)
	EndMethod


	
	Method Draw(dX:Float, dY:Float, Frame:Int = 0)
		If Not _Slices Then Return
		
		GetScale(_LastScale[0], _LastScale[1])
		dX = ScreenX(dX, GetRotation())
		dY = ScreenY(dY, GetRotation())
		brl.max2d.SetRotation(_Rotation + _LastRotation)
		
		Frame:Mod _ModelCount
		If Frame &lt; 0 Then Frame:+_ModelCount
		
		local dxi:float
		local itilt:float

		local tiltdiff:float = _Tilt * .25
		local tilt:float = 0

		local dyi:float
		local iangle:float = 0

		local anglediff:float = _Angle * .25
		local angle:float = 0
		
		local _mframe:int = _MaxZ * Frame
		
		SetColorBaseShade()
		if _Quality then
			For Local i:Int = 0 Until _MaxZ
				'precalc
				dxi = dX - itilt * _LastScale[0]
				tilt = tiltdiff
				dyi = dY - iangle * _LastScale[0]
				angle = angleDiff
				
				'Don't draw things we don't see!
				If dX &lt; - _MaxX * _LastScale[0] Then Continue
				If dX &gt; GraphicsWidth() + _MaxX * _LastScale[0] Then Continue
				If dyi * _Angle &lt; - _MaxY * _LastScale[1] Then Continue
				If dyi * _Angle &gt; GraphicsHeight() + _MaxY * _LastScale[1] Then Continue
	
				'Draw the slice itself
				SetColorShade(i)
				DrawImage(_Slices, dxi - _LastScale[0] * tilt, dyi - _LastScale[0] * angle, _mframe)
				tilt :+ tiltdiff
				angle :+ anglediff
				
				'Draw more slices to fill in the gaps above
				SetColorShade(i + 0.25)
				DrawImage(_Slices, dxi - _LastScale[0] * tilt, dyi - _LastScale[0] * angle, _mframe)
				tilt :+ tiltdiff
				angle :+ anglediff
				
				SetColorShade(i + 0.5)
				DrawImage(_Slices, dxi - _LastScale[0] * tilt, dyi - _LastScale[0] * angle, _mframe)
				tilt :+ tiltdiff
				angle :+ anglediff
	
				SetColorShade(i + 0.75)
				DrawImage(_Slices, dxi - _LastScale[0] * tilt, dyi - _LastScale[0] * angle, _mframe)
	
				_mframe :+ 1
				itilt :+ _Tilt
				iangle :+ _Angle
			next
		else
			For Local i:Int = 0 Until _MaxZ
				'precalc
				dxi = dX - itilt * _LastScale[0]
				tilt = tiltdiff
				dyi = dY - iangle * _LastScale[0]
				angle = angleDiff
				
				'Don't draw things we don't see!
				If dX &lt; - _MaxX * _LastScale[0] Then Continue
				If dX &gt; GraphicsWidth() + _MaxX * _LastScale[0] Then Continue
				If dyi * _Angle &lt; - _MaxY * _LastScale[1] Then Continue
				If dyi * _Angle &gt; GraphicsHeight() + _MaxY * _LastScale[1] Then Continue
	
				'Draw the slice itself
				SetColorShade(i)
				DrawImage(_Slices, dxi - _LastScale[0] * tilt, dyi - _LastScale[0] * angle, _mframe)
				tilt :+ tiltdiff + tiltdiff
				angle :+ anglediff + anglediff
				
				'Draw more slices to fill in the gaps above
				SetColorShade(i + 0.5)
				DrawImage(_Slices, dxi - _LastScale[0] * tilt, dyi - _LastScale[0] * angle, _mframe)
	
				_mframe :+ 1
				itilt :+ _Tilt
				iangle :+ _Angle
			next
		end if

		If _Shade Then SetColor(_LastColor[0], _LastColor[1], _LastColor[2])
		brl.max2d.SetRotation(_LastRotation)
	EndMethod
	
	
</pre> <br><br></td></tr></table><br>
<a name="1323119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> @AdamStrange Cool stuff!<br>I've been meaning to add fading shadows, though I feel like that should be optional.<br>Have you measured the improved drawing time?<br>I'm not sure I like having two drawing methods but if it gives a speed boost I guess it's okay haha. <br><br></td></tr></table><br>
<a name="1323142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, great work as always Adam...I'm sure I'm not the only one thinking, be great too see a game of his on Steam. <br><br></td></tr></table><br>
<a name="1323153"></a>

<a name="1323154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> @AdamStrange Alright I've done some testing and it takes about 4ms (in debug mode) for me to render a frame of the start area from demo.bmx<br>With your code I get exactly the same 4ms render time.<br>Got an example of where the render time would be improved? <br><br></td></tr></table><br>
<a name="1323196"></a>

<a name="1323198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've made a quick version of this for Monkey X.<br>It only loads sliced PNGs though.<br>You can find the module in my first post in this thread.<br><br>The BMax module can now save padded PNG slices which you should use with Monkey X.<br>I've also fixed some bugs. <br><br></td></tr></table><br>
<a name="1323202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe do a stress test with very a large number?<br><br>what's a padded slice? <br><br></td></tr></table><br>
<a name="1323204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you use SaveSlices with the Padded parameter set to true you'll get a one pixel border around each slice. <br><br></td></tr></table><br>
<a name="1323214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> aha - brilliant!<br><br>Just been working on a magicavoxel import for monkey2. needed to go back to the magic site and get the palette reference and file format.<br>Here's the initial result:<br><img src="https://vjointeractive.files.wordpress.com/2016/10/screen-shot-2016-10-26-at-08-22-18.png"><br>No 3d was harmed in this process<br><br>It is a full vexed editor as well working on vertical slices <br><br></td></tr></table><br>
<a name="1323240"></a>

<a name="1323253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice!<br>That doesnt look like the slice hack though.<br>How are you rendering this? <br><br></td></tr></table><br>
<a name="1323255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh my, this thread is VERY interesting, might get my blitz on tomorrow ;) <br><br></td></tr></table><br>
<a name="1323327"></a>

<a name="1323332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> it's a 2d voxel renderer.<br>based on the concepts here:\<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=106157#1305128" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=106157#1305128</a><br><br>import magica voxel = no problem, custom palette = no problem. Oh wait...<br>bugger, color 0 is never changed load from 1 - fixed! <br><br></td></tr></table><br>
<a name="1323460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, all stuff fixed and added support for up to 8 frames and improved the ui<br><img src="https://vjointeractive.files.wordpress.com/2016/10/screen-shot-2016-10-28-at-07-53-27.png"><br><br>the right ghosted version is the editor working on a vertical slice<br><br>I can add an exported to the png slice format next ;) <br><br></td></tr></table><br>
<a name="1323476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work Adam!<br>Official editor for the module haha.<br>Something I'd really like and is missing from MagicaVoxel is the ability to edit several models at once, sort of in layers.<br>For example, I'm working on a game for a client and you play as a truck and the cargo you pull is a separate model, and as it is now, it's very hard to make the two models fit each other.<br>I had to make the model as one and then delete the truck and save as cargo, reload the model and remove the cargo and save the truck. <br><br></td></tr></table><br>
<a name="1323479"></a>

<a name="1323480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work guys.  I do like the voxel look.  Plenty of life left in 2d yet :) <br><br></td></tr></table><br>
<a name="1323527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> @hezakore it's not using anything from the module - its monkey2 code.<br>ok.<br>how about a feature that shows multiple frames at once?<br><br>currently the size is 50x50x25 <br><br></td></tr></table><br>
<a name="1323691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, latest<br>added ability to view more than one frame at a time. There are 8 available frames.<br><br>Here it is showing all four frames from the deer model<br><img src="https://vjointeractive.files.wordpress.com/2016/10/screen-shot-2016-10-31-at-08-14-31.png"> <br><br></td></tr></table><br>
<a name="1323894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm now working on reversing the process so I can import voxels from the saved slices <br><br></td></tr></table><br>
<a name="1323980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> sorted. Can now read in exported slices and construct the original voxel model with animation.<br><br>If the filename does not have the correct format name_XxYxZxF.png It will load the png as an image and construct the voxel frame from that.<br><img src="https://vjointeractive.files.wordpress.com/2016/11/screen-shot-2016-11-03-at-08-49-38.png"><br><br>Here you can see a simple image of a green monster thing has been imported and the voxels created. this should make editing more like a paint program.<br><br>I've also allowed for painting of existing voxels. so you can take an imported model and repaint the colors without adding new voxels <br><br></td></tr></table><br>
<a name="1324149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Before I get into writing the slice exporter. here's a shot of the new pop-up menu showing the color choices, and quick tool selection<br><img src="https://vjointeractive.files.wordpress.com/2016/11/screen-shot-2016-11-04-at-10-29-41.png"><br><br>You can also see that new tools have appeared.<br>- pencil is draw a voxel in the current color<br>- brush is color any existing voxels with the current color<br>- eyedropper will pick the color of an existing voxel<br><br>the pop-up colors are darker and lighter (available) color variations of the current color <br><br></td></tr></table><br>
<a name="1324468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> after some weird little stuff Here's the first result loaded, exported and loaded as slices:<br><img src="https://vjointeractive.files.wordpress.com/2016/11/screen-shot-2016-11-07-at-14-13-58.png"><br><br>There was some issues with the way HezKore dealt with multiple frames. so unfortunately I have had to drop slice support in his original format.<br>The new format has the slices grouped in frames horizontally. this makes for very fast referencing with multiple frame exports.<br><br>The draw routines can be written as you want. I've implemented a quality setting of 1 to 4 as shown above. quality 1 just draws the individual slices, 2 draws 2, 3, 3 and 4 draws 4 slices <br><br></td></tr></table><br>
<a name="1324794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> And here with some shadows and a bit of artistic licence<br><img src="https://vjointeractive.files.wordpress.com/2016/11/screen-shot-2016-11-08-at-08-45-57.png"><br><br>this isn't a moving or blurred shot. it is a static image.<br><br>I suppose you could use it for a depth of field effect? <br><br></td></tr></table><br>
<a name="1324830"></a>

<a name="1324831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Finally a quick app to show all the frames<br><img src="https://vjointeractive.files.wordpress.com/2016/11/screen-shot-2016-11-08-at-14-23-06.png"><br><br>and the slice data that created it:<br><img src="https://vjointeractive.files.wordpress.com/2016/11/t-rexy_24x9x25x8.png"> <br><br></td></tr></table><br>
<a name="1324877"></a>

<a name="1324878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's cool and all AdamStrange but maybe you should start your own thread for the editor. :)<br>Especially now that the editor has nothing to do with my module or even uses the same slice format.<br>And regarding frames and animations, my format just tries to create a square picture and fit all the layers next to each other for each frame.<br>I've made some very detailed voxel models with a lot of frames and it's worked great.<br><br>In other news!<br>I'm using the Monkey X version of my module for 2 client projects.<br>I'm glad people got interested in this heh. <br><br></td></tr></table><br>
<a name="1324965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> good point.<br>What I will do is add support for import and export both formats.<br>Yours will be _XxYxZxF.png mine will be _XxYxZfF.png so they don't get in the way of each other :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
