<!DOCTYPE html><html lang="en" ><head ><title >rainbow generator</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >rainbow generator</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >rainbow generator</a><br><br>
<a name="1319606"></a>

<a name="1319607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello, :)<br><br>Just playing with Blitz3d to see if i could reproduce a rainbow in 3d with a mesh (made of several arcs) and vertices colors :<br><br>with a grey sky :<br><img src="http://rd-stuff.fr/rainbow-generator-(greysky)-201609201116.jpg"><br><br>with a blue sky : <br><img src="http://rd-stuff.fr/rainbow-generator-(bluesky)-201609201116.jpg"><br><br>animated gif :<br>rd-stuff.fr/rainbow-generator-(greysky)-500w312h-10fps.gif<br><br>source code here : <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=3288" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=3288</a> <br><br></td></tr></table><br>
<a name="1319637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice piece of code. But appears the blue sky filters out the other colors.<br>I did a quick experiment and changed the '3' to '1' as you suggested in below line which gives a brighter colored result - at least on my system.<br><pre class=code>
EntityBlend(Rainbow_Mesh,1)  ;1 or 3
</pre><br>Now let's add some clouds, sun, rain hills, trees a few rabbits and we're in Teletubby land ;-) <br><br></td></tr></table><br>
<a name="1319638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Btw: I couldn't locate the pot of gold at the end of the raibow.. <br><br></td></tr></table><br>
<a name="1319639"></a>

<a name="1319640"></a>

<a name="1319641"></a>

<a name="1319642"></a>

<a name="1319643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes it looks better with a grey/white sky.<br><br>With a whiter sky it is better to use blendmode alpha (1) instead of blendmode add (3)<br><br><br><div class="quote"> <br>Btw: I couldn't locate the pot of gold at the end of the raibow.. <br> <br></div><br>take a look at that : <br>en.wikipedia.org/wiki/Rainbow#Full-circle_rainbow<br>it may help : ;) <br><br></td></tr></table><br>
<a name="1319668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah that explains it all. :-) Or.. perhaps the leprechaun can only be found when in Ireland? <br><img src="http://vignette3.wikia.nocookie.net/simpsonstappedout/images/7/7f/Leprechaun_the_simpsons.png/revision/latest?cb=20131201122712"> <br><br></td></tr></table><br>
<a name="1319674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice work, to be sure ;) <br><br></td></tr></table><br>
<a name="1319699"></a>

<a name="1319700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> More for fun than for a real need ;)<br><br><br>I bet it could look even nicer with a glow effect on it... <br><br></td></tr></table><br>
<a name="1319710"></a>

<a name="1319711"></a>

<a name="1319712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fun is a need :)<br>And sometimes best things comes from the need for fun :p<br>Plus, who doesn't like rainbows..<br>Ask Noah <br><br></td></tr></table><br>
<a name="1319717"></a>

<a name="1319718"></a>

<a name="1319719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice looking.<br>Perhaps you could/should skip vertexcolor (for once ^_^) and use a texture instead (a single row texture like 8*1 pixels)<br><br>And by the way, the arc equation is pretty simple to implement, you'll save yourself a lot of time by just using cos/sin instead of all this pivot stuff<br><br><br>(a small sample of using a texture -&gt; it also use alpha on the texture to fade the borders)<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D 800,600,0,2
SetBuffer BackBuffer()

AmbientLight		( 0,0,0 )

Local Light		=	CreateLight		( 2 )
					MoveEntity		( Light, 100,400,500 )
					LightRange		( Light, 1500 )
					
Local Cam		=	CreateCamera	( )
					MoveEntity		( Cam, 0,5,0 )
					CameraClsColor	( Cam, 100,150,220 )
					
Local Ground	=	CreatePlane		( 8 )
					EntityColor		( Ground, 20,50,10 )

; Rainbow Texture
	Local RTex		=	CreateTexture	( 8, 2, 3+32 ) ; 1+2 -&gt; color + alpha (32-&gt; clamp V)
						SetBuffer TextureBuffer(RTex)
							LockBuffer()
								For j = 0 To 1
									Local RainbowCA% = $00000000 ; first row is alpha 0
									If j = 1 Then RainbowCA = $FF000000 ; second row is alpha 255
									WritePixelFast 0,j, $00000000 + $A000FF ; alpha 0 (mix between first and last color)
									WritePixelFast 1,j, RainbowCA + $FF0000 ; Red
									WritePixelFast 2,j, RainbowCA + $FF8000 ; Orange
									WritePixelFast 3,j, RainbowCA + $FFFF00 ; Yellow
									WritePixelFast 4,j, RainbowCA + $50FF50 ; Green
									WritePixelFast 5,j, RainbowCA + $0080FF ; Blue
									WritePixelFast 6,j, RainbowCA + $0000FF ; Indigo
									WritePixelFast 7,j, RainbowCA + $8000FF ; Violet
								Next
							UnlockBuffer()
						SetBuffer BackBuffer()

; Rainbow setup
	; Rainbow Radius
	Local RainbowR#	=	100.0
	Local RainbowA0# =	-75.0 ; Arc From Angle A0 To Angle A1
	Local RainbowA1# =	75.0
	; Rainbow Width ( "linewidth" )
	Local RainbowW#	=	16.0
	; Details ( Arcs )
	Local RainbowSeg%=	64 ; you can decrease this to 20-30, but we will start spotting the segments ^^

; Rainbow Mesh
	Local Rainbow	=	CreateMesh		( )
						; you can use fx 16 to draw the 2 sides of the triangles (here the rainbow is in front of the camera, so it's useless )
						EntityFx		( Rainbow, 1+8 ) ; fullbright and disable fog
						; you can use blend 1 or 3 (1 will be more solid but less lighted)
						EntityBlend		( Rainbow, 3 )
						; you can also use EntityAlpha to fade the rainbow
						EntityTexture	( Rainbow, RTex ) ; use the rainbow texture
						PositionEntity	( Rainbow, 0,-30,150 ) ; move it far enough so we can see it
	Local Surf		=	CreateSurface	( Rainbow )
	Local NSeg		=	16
	Local n, Ang
	
	; draw an arc
	For n = 0 To RainbowSeg
		Local DAng# = Float(n)/RainbowSeg;
		Local rx# = Cos(90 + RainbowA0 + (RainbowA1-RainbowA0)*DAng);
		Local ry# = Sin(90 + RainbowA0 + (RainbowA1-RainbowA0)*DAng);
		Local tv# = Sin(n*180 / RainbowSeg); define the tex V coord (lower = more alpha) -&gt; tweak this equation to create different effects
		; outer vertex
		AddVertex Surf, RainbowR*rx, RainbowR*ry, 0, 0.05, tv
		;For inner vertex U tiles a bit to get the alpha of first pixel
		AddVertex Surf, (RainbowR-RainbowW)*rx, (RainbowR-RainbowW)*ry, 0, 1.07, tv
		; build the triangle strip
		If n&gt;0
			AddTriangle (Surf, n*2-2, n*2-1, n*2+1)
			AddTriangle (Surf, n*2-2, n*2+1, n*2)
		EndIf
	Next


Repeat
	RenderWorld()
	Flip True
Until KeyDown(1)
End
</textarea><br><br>The mesh is composed of a single "line" of triangle (a triangle strip), so you can get higher details with lower triangles. (just notice that below 25 for RainbowSeg, you'll start to see the segment) <br><br></td></tr></table><br>
<a name="1319729"></a>

<a name="1319730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Bobysait&gt;&gt;yes i could have used another approach to create the arcs but i do what i can with what i know :P<br><br><br>Nice example too. :) <br><br></td></tr></table><br>
<a name="1319731"></a>

<a name="1319732"></a>

<a name="1319733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is weird how that even with the same alpha, the same blendmode, the same background color, the result does not seem to look the same... <br><br></td></tr></table><br>
<a name="1319737"></a>

<a name="1319738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Forget about what i said (in post#11), using the same alpha, the same blendmode, the same background color, the results look similar :<br><img src="http://rd-stuff.fr/Rrainbow-Brainbow.jpg"> <br><br></td></tr></table><br>
<a name="1319755"></a>

<a name="1319756"></a>

<a name="1319757"></a>

<a name="1319758"></a>

<a name="1319759"></a>

<a name="1319786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> .. <br><br></td></tr></table><br>
<a name="1319761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RemiD The second image (the one on the right) has a very nice 'smooth' look to it, plus the nice fade towards the bottom.<br><br>the other one has a blocky feel - you can see the geometry underneath it. - looks like 9 segments on the left?<br><br>Me preference would be the one on the right as it has a professional look to it. The blocky one feels a bit cheap in comparison... <br><br></td></tr></table><br>
<a name="1319764"></a>

<a name="1319765"></a>

<a name="1319766"></a>

<a name="1319767"></a>

<a name="1319783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> The one at right is the example by Bobysait<br>The one at left is my example<br><br>However you can add more sections to have a more round shape, no worry, just edit the code !<br><br><br>I find interesting how it is possible to achieve a similar result using only a mesh and vertices colors, or with a mesh and texels colors (a texture) <br><br></td></tr></table><br>
<a name="1319784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> less blocky more roundy version for Adam :<br><img src="http://rd-stuff.fr/rainbow-generator-normalrender-wirerender-201609211841.jpg"><br><br>and you can also understand how it is made with the wire view. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
