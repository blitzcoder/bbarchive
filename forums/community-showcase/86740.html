<!DOCTYPE html><html lang="en" ><head ><title >TileMax</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TileMax</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >TileMax</a><br><br>
<a name="983270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there,<br><br>A fair bit of work done under the hood.. I'm curious how it runs on other machines.. there are still anomalies with the player movement but its getting better.<br><br>BTW: This is a split pane view so that my daughters don't argue about whose turn it is to try it out LOL...<br><br>Oh, clicking on the lower pane will add dumb actors that just follow the nearest player.. they don't even know how to jump yet :)<br><br><img src="http://sites.google.com/site/skullyproductions/Home/Screengrab.png"><br><a href="http://sites.google.com/site/skullyproductions/Home/TileMax.zip" target="_blank">TileMax</a><br><br>{edit} Oops.. I labeled the window key controls backwards... 8)<br>{edit} Fixed that.. and included a new version that constrains the actors apart (so they don't bunch up outside pits)<br>Cheers <br><br></td></tr></table><br>
<a name="983280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pretty smooth on my rig with 250 actors (never dropped below 30):<br><br>i920, 6GB, Win7RC1 <br><br></td></tr></table><br>
<a name="983325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks therevills,<br><br>Any weirdnesses / anomalies that you noticed? <br><br></td></tr></table><br>
<a name="983399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pretty cool so far.  Are you using farseer, and ahh I see why my physics engine wouldnt work for tile max.  It needs to be a little more developed to be used as a physics engine for your purposes.  BTW if you are using farseer, why not add a bunch of boxes?<br><br>anyway, nice job so far. <br><br></td></tr></table><br>
<a name="983413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Nate... no its all custom code so far... extremely basic stuff right now.. I've just added a constraint class with one constraint type (ActorSeparation) that keeps actors at a distance instead of piling on top of each other, but its not working 100% yet... I'm feeling your pain with the balancing act you were talking about LOL<br><br>The problem I was having with VerletMax is the same problem I would have with any physics system... mixing pixel collisions with the rest of the lot... and.. with the way the tiles are connected as I explained earlier. So I'm stuck coding my own.  The benefits I see with this system will be seen when I add the network code :)<br><br>Cheers <br><br></td></tr></table><br>
<a name="983418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I found my constraint problem... wasn't the constraint code it was the execution ;)<br><br>Updated the DL and Screenshot <br><br></td></tr></table><br>
<a name="983451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >InvisibleKid</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> stayed at about 30, until i got to about 220 actors then dipped to about 27-28. <br><br></td></tr></table><br>
<a name="983468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks KingNothing,<br><br>Its using a timer to keep it at 30 :) It shouldn't be consuming huge processor time... heres the main game loop :)<br><br><pre class=code>
'--------------------------------------------------------------------------
Global timer:TTimer=CreateTimer(30)
While Not KeyDown(KEY_ESCAPE)
	WaitEvent()
	If EventSource()=timer Then RunGame()
Wend
'--------------------------------------------------------------------------
EndGraphics
End
</pre><br><br>I'm happy with 220 since they are interacting with constraints as well now... further optimization allows for deactivating actors while not on screen or within a range of a player as well.<br><br>Cheers <br><br></td></tr></table><br>
<a name="983536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The problem I was having with VerletMax is the same problem I would have with any physics system...  <br></div><br><br>Oh I see.  So you are making it network based?  I am working with making my game FLOOD online but after some experiments I dont think online real time mass physics is achievable at this point.  Let me know if you discover otherwise :)<br><br>BTW, nice job on the constraints.  Are you using a grid based acceleration system for everything? if not then you definitely should... you should be able to fit thousands of actors in with a grid acceleration, and it wouldnt be nearly as confusing as my physics grid. <br><br></td></tr></table><br>
<a name="983538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure am.. the tiles are the grids and actors are added to and removed from appropriate tile-Tlists as they move around the map... so when doing the constraints it tests against surrounding tiles (or further if the actor is bigger)<br><br>Your game over a network ... yes hard.  Maybe if you just send the verlet location/vector information and the client just plays that out until it receives new information...(you would have to smooth the update so it doesn't jerk) and just send client actions back to the server. <br><br></td></tr></table><br>
<a name="983539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "you should be able to fit thousands of actors in with a grid acceleration"<br><br>Assuming fairly high spec cpu/gpu. ;) <br><br></td></tr></table><br>
<a name="983547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think I'm going to need over 200 simultaneous actors as it is much less thousands anyway lol but I am all about making it as efficient as possible :) if the game plays well on my laptop I think it should be OK <br><br></td></tr></table><br>
<a name="983552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Assuming fairly high spec cpu/gpu. ;) <br></div><br><br>if you assume 2.6 ghz really high spec... Just sayin that maybe tile collisions should be more efficient than my verlet collisions since they involve a sqr() call and tile collisions are generally faster. and a thousand is not that much for certain applications like fluids...<br><br>I would say, if you arent, use grids for your actor-tile collisions too. For example, say you have 100 tiles in a scene... and 1 actor, for the scene collisions thats 100 collision checks every frame... now lets say you have 10 actors, thats 1000 checks per frame... 200 actors = 20,000 checks per frame.<br>Now what if you add the grid formula... maybe a millisecond to place the actors in their grids. then say we have 200 actors... thats only about 200-800 collision checks now with out grid.. :) yay much less than 20,000<br><br>for this in action see<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=86254" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=86254</a><br><br>edit: this is all just assuming you need more actors... just a big fyi :) and im not sure if you are already doing this or not, if you are then im not sure where you can suck up much more speed from. <br><br></td></tr></table><br>
<a name="983556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way collisions work in TileMax is that actors have "feelers" around them that I call "Appendages"... those are what "feel" for collisions and react to them... so I'm not doing and imagescollide calls just readpixels on surrounding tile pixelmaps<br><br>Thats also how the constraints are being done between actors... the actors are stored in a list on each tile and adjusted as they move, so when I compare the actor to other actors I just compare them to surrounding tiles not every actor on the entire map<br><br>For example.. here's the setup code for the actors in TileMax<br><pre class=code>
Global player:Actor=actor.CreateActor(ID_Player,TMax.Currentlevel.First,10,10)
player.MaxVelocity=6
player.JumpSpeed=10
player.AddAppendage(-7,0,,False)	' lt arm
player.AddAppendage(7,0,,False)		' rt arm
player.AddAppendage(-3,19,False)	' lt leg
player.AddAppendage(3,19,False)		' rt leg
player.AddAppendage(0,-7)		' head
Local an:Anim=player.CreateAnim("walk left",walksprite,240,296,0.01)
an.AddFrames(0,5,0,4)
an.scaleX=-0.15
an.scaleY=0.15
an=player.CreateAnim("walk right",walksprite,240,296,0.01)
an.AddFrames(0,5,0,4)
an.scaleX=0.15
an.scaleY=0.15
player.SetAnim(an)
</pre> <br><br></td></tr></table><br>
<a name="983742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh, Ive never done a platformer so you kinda lost me there... ah well. you are much more experienced in that area than I am. <br><br></td></tr></table><br>
<a name="983824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just think of the tiles as grids with a given size 32x32 in this case... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
