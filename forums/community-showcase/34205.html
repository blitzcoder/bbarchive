<!DOCTYPE html><html lang="en" ><head ><title >BLESS (BLitz EventS System) beta released!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BLESS (BLitz EventS System) beta released!</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >BLESS (BLitz EventS System) beta released!</a><br><br>
<a name="369303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, almost coincidentally on my 1000th post in the Blitz forums, I'm announcing that I've finally released something.  =) (Thanks to those who encouraged me.)  I hope you find it useful.<br><br>Here's the README... Post any questions, successes, failures, etc on the board.<br><br>Get it from <a href="http://www.mintysoftware.com" target="_blank">http://www.mintysoftware.com</a><br><br>...<br><br>BLESS (BLitz EventS System)<br>Take control of Windows events!<br><br>--------------<br>What is BLESS?<br>--------------<br><br>BLESS stands for "BLitz EventS System".  It is a small DLL made to augment the event-handling power of BlitzPlus and Blitz3D, hopefully alleviating some of their shortcomings.<br><br>-----------------------<br>Why would I want BLESS?<br>-----------------------<br><br>BlitzPlus users, have you ever wished BlitzPlus had a certain feature, and been frustrated to find that you couldn't code it yourself because of the shortcomings of the language?  Blitz3D users, have you ever wanted some of the event-handling power of BlitzPlus?<br><br>BLESS increases the number of Windows events your program can monitor and react to.  BlitzPlus gives you access to 21 (or so) events.  Blitz3D mostly just gives you access to input-related events.  But, with BLESS, you can monitor and react to pretty much any Windows event that occurs for any window -- not just your own Blitz window.<br><br>Also, BLESS is built to be very open-ended.  With a little knowledge of the Windows API and some documentation from MSDN, it can be a very powerful tool.  It was written to be as unintrusive as possible, doing only what Blitz CAN'T do, thereby letting you, the Blitz programmer, implement whatever you like, however you like.<br><br>-------------------------<br>What can I do with BLESS?<br>-------------------------<br><br>Here are some of the things BLESS allows you to do, as shown in the example programs:<br>1) Create your own custom Windows gadgets by catching WM_PAINT and WM_DRAWITEM messages <br>2) Catch mouse events from any gadget<br>3) Monitor keypresses in another program, like notepad<br>4) Minimize your app to the system tray<br>5) Monitor system tray events, like clicks and mousemoves<br>6) Know when other windows are closed<br>7) Know when CUT, COPY, and PASTE are used<br>8) Know when a treeview node is expanded or contracted<br>9) Know when any item in any gadget (treeview, listbox, etc) is changed... with the mouse OR keyboard<br>10) Drag-and-Drop files into your window<br><br>But since there are so many different Windows messages, notifications, and events, there are many more possibilities with BLESS.<br><br>--------------------<br>How does BLESS work?<br>--------------------<br><br>You tell BLESS an event and gadgets/window you're interested in, and when BLESS notices the particular event happening to the particular gadget or window, it lets you know by sending a BLESS event to your Blitz program.  What is a BLESS event?  For BlitzPlus, the BLESS event is disguised as a special character code from the unused portion of the UTF-16 (unicode) range.  For Blitz3D, it is disguised as a scancode for a non-existent keyboard key.  Either way, for you to detect the event, it's as simple as using KeyHit (Blitz3D) or event $103 (Keystroke in BlitzPlus).<br><br>-------------------<br>How do I use BLESS?<br>-------------------<br><br>See "Bless Docs.txt" for more info.  To quickly get up and running, it's as simple as this:<br><br>1) Put bless.bb and bless.dll in your development folder<br>2) Put bless.decls in your userlib folder<br>3) In your sourcecode, use:<br>	Include "bless.bb"<br>4) If you're using Blitz3D, use this line:<br>	Bless_UseAlternateMethod(True) ; Alternate BLESS event notification method<br>5) Then let BLESS know which event and window you want to monitor with Bless_RegisterEvent()<br>6) In your main loop or event loop, check BLESS events with KeyHit or event $103<br>7) Use EventData() to get any extended event information, if necessary<br>8) Before terminating your program, call:<br>	Bless_UnregisterEvent(0)<br><br>That's it.  Also, check out the examples' source code.<br><br>--------------------------------<br>Are there known issues in BLESS?<br>--------------------------------<br><br>Yes, BLESS is currently classified as beta.  Here are some issues:<br><br>* Some problems may occur when running more than one program that uses BLESS (at the same time)<br>* In the Notepad Demo, sometimes Blitz3D doesn't process the WM_DESTROY message after rapidly pressing a bunch of characters and quickly closing Notepad<br>* If Bless_UnregisterEvent(0) isn't called before program termination, Windows may not completely unload the DLL for a few minutes, during which time BLESS events may not work completely.<br>* Since Bless_EventData only returns information for the last event that occurred of a certain BLESS event ID, any previous event data not queried will be lost.  So, if events occur very rapidly, (like WM_MOUSEMOVE while rapidly moving the mouse), not all mouse event coordinates may be able to be retrieved.<br><br>-------------------------------------<br>Is there unknown territory for BLESS?<br>-------------------------------------<br><br>Yes, I'm interested in knowing how the following work:<br><br>1) Detecting some events (like WM_COMMAND and WM_NOTIFY) on Win95/98/ME systems<br>2) BLESS on Unicode-enabled systems (using the default BLESS event method)<br>3) BLESS on slow systems<br>4) BLESS on weirdo keyboards and other input devices (using the alternate BLESS event method) <br><br></td></tr></table><br>
<a name="369370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> God BLESS you, soja ;-)<br><br>THANK YOU VERY MUCH!! I tried BLESS and it works perfectly!! That's great!!!!!!!!!!!! Very very good job!!<br><br>I am interested by the drag'n'drop feature. I have implemented in Cod2Doc, and it works perfectly!! Thanks to you, Cod2Doc has now a full-featured drag'n'drop... And it will be useful to a lot of other applications also...<br><br>Also, I tried the demo you gave. All works perfectly, except the notepad demo. Notepad is opening, but then nothing more: no message, nothing when I type. I have Blitz 3D and win98...<br><br>By the way, can I already use BLESS in Cod2Doc? (next version is going to be released in a few days). Will it be free?<br><br>Thanks for this very good job!! <br><br></td></tr></table><br>
<a name="369378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very interesting. I don't much like the idea of using input events to hack into blitz, but it seems like a clever way to do it all :) <br><br></td></tr></table><br>
<a name="369412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow Soja, I was waiting for this since years. Thank you very much! <br><br></td></tr></table><br>
<a name="369424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> soja: when I use 2 instances of Cod2Doc with BLESS, then there is an error (in kernel32). Then windows is VERY slow, and almost frozen. I have to restart my computer (win98).<br>So it's like we can't run 2 programs with BLESS at the same time.<br>Is it a known bug of the beta version? Is there any chance it will be corrected in the future version?<br>Thanks! <br><br></td></tr></table><br>
<a name="369439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aCiD2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>-------------------------------- <br>Are there known issues in BLESS? <br>-------------------------------- <br><br>Yes, BLESS is currently classified as beta. Here are some issues: <br><br>* Some problems may occur when running more than one program that uses BLESS (at the same time) <br> <br></div><br><br>RepeatUntil: Think that might have something to do with it? ^_^ <br><br></td></tr></table><br>
<a name="369467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work, Soja. One little error is that the default example has 2 references to Shell_NotifyIcon instead of Bless_NotifyIcon so fails unless people have defined Shell_NotifyIcon already. Very impressive though! <br><br></td></tr></table><br>
<a name="369469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> RepeatUntil: All works perfectly, except the notepad demo. Notepad is opening, but then nothing more: no message, nothing when I type. I have Blitz 3D and win98... <br></div><br><br>Hmm, I was afraid of that.  As I understand it, some (not all) of the messages are interpreted differently on 95/98/ME than on NT/2K/XP.  This was one of the "unknown territories" for me.  <br><br><div class="quote"> RepeatUntil: By the way, can I already use BLESS in Cod2Doc? (next version is going to be released in a few days). Will it be free? <br></div><br>If you have confidence in it, you're welcome to use it as it is...  It's certainly free right now, as it's a beta.  I'm not sure if people will find it useful enough to charge for in the future, when all the issues have been worked out.<br><br><div class="quote"> skn3[ac]: I don't much like the idea of using input events to hack into blitz, but it seems like a clever way to do it all <br></div><br>Yes, you're right, I would classify it as a "hack" too.  =)    As it stands, it seems to me the safest (and easiest) way to do it.  Coding some other method of communication between bless.dll and your Blitz program would (a) be more complicated for the programmer, (b) have essentially introduced another message queue to the Blitz program, opening the door to all kinds of race conditions and such -- very, very difficult to deal with correctly, especially not having access to the internal workings of Blitz.<br><br>Fortunately, the "hack" is (hopefully) quite benign.  It works ("plays nice") with Blitz' own internal message pump to get messages to the programmer via either unused UTF-16 codes or unused keyboard scancodes.  I still wonder how it will work on a unicode-enabled machine (with the default method) or on a machine with some weird keyboard that actually uses the "unused" scancodes (with the alternate method).<br><br>Anyway, you should give it a try for your custom GDI stuff -- I wrote it partly with that dilemma in mind, having run into that problem before (no way to get WM_PAINT).<br><br><div class="quote"> RepeatUntil: So it's like we can't run 2 programs with BLESS at the same time.<br>Is it a known bug of the beta version? Is there any chance it will be corrected in the future version?  <br></div><br>Yes, as aCID2 noted, it's a known issue, though it seems to react much worse on a Win98 machine than on an XP machine.  Yikes.  I am planning on fixing that.<br><br>All, thanks for the kind words and support.  I hope it (eventually?) works out great in your projects. <br><br></td></tr></table><br>
<a name="369471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Skidracer: ...references to Shell_NotifyIcon instead of Bless_NotifyIcon... <br></div><br>Good eye, James, thanks for the heads up and encouragement.  I did indeed want it to work out of the gate for everybody -- looks like I missed that one. <br><br></td></tr></table><br>
<a name="370008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way, the bug regarding 2 instances of BLESS is a difficult bug to correct?? Do you have any time scale to know when this bug will be corrected??<br>Thanks! <br><br></td></tr></table><br>
<a name="370083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >electronin</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> VERY cool, soja! downloading it now :) <br><br></td></tr></table><br>
<a name="371988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Do you have any time scale to know when this bug will be corrected? <br></div>Working on it now... I couldn't give the time scale for certain. <br><br></td></tr></table><br>
<a name="371999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to put the pressure on you (he, he, he): Cod2Doc is waiting for your fix to be released :-) <br><br></td></tr></table><br>
<a name="373842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> BLESS has doubled the functionality of our latest BlitzPlus application.<br><br>Great work soja  :) <br><br></td></tr></table><br>
<a name="379561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Soja: were you able to fix BLESS?? If not, do you think it's possible to know when a second instance of BLESS is running and then disable it?? <br><br></td></tr></table><br>
<a name="379565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Put this inside the kernel32.decls:<br><br><pre class=code>
CreateMutex%(lpMutexAttributes%,bInitialOwner%,lpName$):"CreateMutexA" 
</pre><br><br>and then use this to detect if the program is running already, and if so then shut it down.<br><br><pre class=code>
	Const ERROR_ALREADY_EXISTS=183
	CreateMutex(0,1,"My Program Instance") ; Mutex accessible to any program
	If GetLastError() = ERROR_ALREADY_EXISTS Then
		End
	EndIf
</pre><br><br>I don't remember who posted the above a while ago, but it will prevent a blitz program from starting more than once. Don't know if its of any help though. <br><br></td></tr></table><br>
<a name="379725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> RepeatUntil: were you able to fix BLESS?? <br></div><br>Not yet, but I'm in the middle of it.  I can't say Windows makes it very easy -- you have to jump through a ton of hoops and stuff...  I hope to have something up within a week or two (earlier if I get more time).<br><br><div class="quote"> zawran: I don't remember who posted the above a while ago... <br></div><br>Coincidentally, me.  <br>=) <br><br></td></tr></table><br>
<a name="379784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> soja:  I figured as much, but wasn't sure. You have been quite generous with your knowledge about the windowsApi and its use and you should know that its highly appreciated. <br><br></td></tr></table><br>
<a name="380093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You have been quite generous with your knowledge about the windowsApi and its use and you should know that its highly appreciated. <br></div><br>Thanks, it's my pleasure.  I'm glad I could be helpful to you. <br><br></td></tr></table><br>
<a name="391775"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would like to release Cod2Doc in a few days now. Soja, apparently this fix seems to be hard to implement (undoubtely because of windows :-( ). So I think I will use the solution that Zawran gave me: when a first instance of Cod2Doc is running, then I don't start Bless in the second instance of Cod2Doc.<br>  This won't allow the Drag'n'Drop in the second instance of Cod2Doc, but it should work...<br><br>  Anyway, let me know when the next version of Bless will be released. And THANK YOU for this excellent Bless!!!!! <br><br></td></tr></table><br>
<a name="391979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I've hit some snags (that and went away to Virginia for two weeks).  Yes, it is because of WIndows.  =)  It's nothing that I can't handle, I think, but it is new territory, so of course, I don't expect you to wait for me.     (Every time I think I'm getting somewhere, something new pops up in my way.  Grr..) <br><br>Also, if you want to make sure you're updated, you can go to www.mintysoftware.com and sign up for the announcement list.<br><br>In the meantime, there is a workaround:<br>Check the return value of Bless_RegisterEvent.  If it fails, try using another BLESS event (i.e. BLESS+5).  You could, I suppose, just keep trying until you find one that works (up to BLESS+2047).  Also, in the next release, I will change the error codes so that different return codes mean different errors.  For example, 0 = BLESS event already in use, -1 = something else, etc.<br><br>Thanks for your support. <br><br></td></tr></table><br>
<a name="393073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Soja,<br><br>  I have signed up to your list, to be sure to be updated at the right time.<br><br>  I will try your workaround, and post here if I have some other questions! <br><br>  Many thanks! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
