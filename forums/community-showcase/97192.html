<!DOCTYPE html><html lang="en" ><head ><title >Artemax: A component based entity system.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Artemax: A component based entity system.</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Artemax: A component based entity system.</a><br><br>
<a name="1127431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there,<br><br>I've been busy porting Artemis (http://gamadu.com/artemis/) to Blitzmax. It is a high-performance data oriented, component based entity system.<br><br>I think this is the first component based system for blitzmax.<br><br>Why use a Data Oriented Design entity system instead of Object Oriented Design? It avoids the pitfalls of game object OOD designs: large, monolith, inflexible game objects. It also makes code (systems) very easy to re-use, as there are minimal relations to other systems.<br><br>The module is located in the download section of my google code page: <a href="http://code.google.com/p/noisycode/" target="_blank">http://code.google.com/p/noisycode/</a><br>The download also contains a simple (very simple) asteroids clone to show how to build a game using this system. The game includes a few sample systems for you to look at.<br><br>To play: Use arrows left and right to steer, arrow up to thrust, enter to fire, R to restart, ESC to quit the game.<br><br><br>Here is a little snippet from the website explaining the system:<br><br><b>Mini guide/about</b><br>So, how does it work? While we cannot explain entity/component paradigm here (there are other better articles out there) we can explain how you use Artemis to accomplish separation of data and logic, including rendering.<br><br>The main concepts in Artemis are: Entities, Components and Systems. There are other things in there as well, but they are mainly meant to facilitate those three things and make things "go".<br><br><b>Entities</b><br>Entities are very raw and basic, think of them as a identifier for an entity. An instance of Entity is meant to identify that entity throughout the system. The most important aspect of Entity is the entityId, which no other living entity has in the system. <br><br><b>Components</b><br>Components are pure data classes, they do not have any logic in them other than that for setting/getting the data. An example component would be Position, containing only X and Y coordinate values, and an allowed set method would be setPosition(x,y).<br><br>All components extend Component, which is meant to identify the components in the framework.<br><br><b>Systems</b><br>These are really the most important aspect of the framework. Entity systems are meant to process certain aspects of entities. An entity aspect means that a entity possessing certain components that enable it to be processed in a certain manner but one or more systems. One system processes only one aspect. <br><br>An example aspect be Movement, which would process an entity aspect consisting of Position and Velocity. The system that would process such an aspect could be called MovementAspect and would contain the logic necessery to move entities around according to their Position and Velocity, setting and getting whatever data it requires. <br><br>Entities do not communicate between themselves, but systems can communicate with other systems. Use the SystemManager to retrieve a system within another. Systems can provide whatever API necessery for inter-system communication. <br><br>The framework bundles a few EntitySystem implementations that can be extended, depending on the usage, be sure to read the JavaDoc description on all EntitySystem implementations and be sure to understand them, because choosing the right EntitySystem can provide a significant performance boost. <br><br></td></tr></table><br>
<a name="1127577"></a>

<a name="1127579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I skimmed through the source code of DemoRocks and I think I've gotten the general idea. It sure does like a clean way of programming. The way you apply components to entities makes me think of roles/traits in certain programming languages (at least in concept). With the added benefit that you can do it dynamically here.<br><br>I feel I'm not doing enough with BlitzMax and really should do some game development again, for which this system would be perfect.<br><br>Very nice!<br><br>Update: One thing I do wonder about is performance. You'll probably be using a lot more objects for a single entity than 'normally'. At least it's going to use a little bit more memory I think.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1127654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br><br>Are you wondering about performance or memory usage?<br><br>Performance:<br><br>The system does not use lists, or enumerate classes to find components. Everything is referenced, and lookup is fast. Processing is also fast, all array based, no linked lists etc.<br><br>Of course, there is a bit of overhead. But the flexibility gained is what you are after. What you also gain is great reuse-ability of code, as systems are self contained (if you design them the right way)<br><br>And as blitzmax is aimed at desktop gaming, I don't think there is a problem.<br><br><br>Memory:<br><br>I agree with you that in small games it would make more sense to just create a gameobject and extend it for each type of gameobject you need. This will surely consume less memory. For larger implementations, and for systems where you need a lot of flexibility in gameobject structure (for instance, an RPG)<br><br>I also find that creating large objects with lots of unused code (even though it is only references to code) is messy and reeks of bad design.<br><br>This system is insanely flexible. You can create and modify object structure at run-time. Think of a tank which owns a weapon component. You can change the component in the tank at run-time to make it use a different weapon. <br><br></td></tr></table><br>
<a name="1127672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was wondering about both actually. Is there really such a big difference in performance with lists and arrays? When assigning new stuff you will have to resize the array.<br><br>I think I'll play with it sometime soon, if I have the time for it :(.<br><br>Also, kudos for the unit tests. I still find myself not to do them enough. <br><br></td></tr></table><br>
<a name="1127682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, there is not much of a difference when iterating through them in a first to last manner.  Random access has more overhead though.  But this system does not use random access: because of the use of arrays everything must and is referenced. No random access or search through collections required.<br><br>Unit testing saves LOTS of time during development. You have basically created a complete test application when you are done, which ensures that your code works when you later implement it in a larger project.<br>I could never go back to compile-test-bug fix-compile-repeat development. Sure, you are doing essentially the same while making the unit tests, but all tests are contained and bugs are easy to spot: they MUST be in the code you added after the last test. <br><br></td></tr></table><br>
<a name="1127683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> SWEET system! :) <br><br></td></tr></table><br>
<a name="1127688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh I totally agree on unit testing. The Maximus webapplication is completely unit tested. Sadly for my BlitzMax stuff I've never got to it. Never too late to start with it, though it does make it a bit harder to get stuff covered that way. <br><br></td></tr></table><br>
<a name="1127738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Tundros :) I hope it will be of use to you.<br><br>Htbaa: Yes, I had to really push myself as well. It's weird in the beginning but now I cannot think about development otherwise. <br><br></td></tr></table><br>
<a name="1136034"></a>

<a name="1136035"></a>

<a name="1136036"></a>

<a name="1136037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> For those interested in this awesome entity system: I am currently creating a set of default systems and components which will be easily extendible. For this I am also creating a little game engine framework to get things up and running really fast. This engine will also be at the core of a new game I am developing right now.<br><br>Reading the wiki pages I am setting up might shed some more light upon the proceedings and intentions: <a href="http://code.google.com/p/noisycode/wiki/game2d" target="_blank">http://code.google.com/p/noisycode/wiki/game2d</a><br><br>Feel free to send me feedback or ask if you want to know more...<br><br>[edit: lots of typos]<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1136115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> A very interesting project Wiebo, I wish you well with this and hope to try it out soon, had a quick scan of the wiki pages - looking good! <br><br></td></tr></table><br>
<a name="1136205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Blitzplotter! It will indeed be very interesting to see how this develops, as I am using it for my next game project. <br><br></td></tr></table><br>
<a name="1139157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Was just reading a little more about this concept today. Looks interesting and looking forward to see how it progress :). <br><br></td></tr></table><br>
<a name="1145453"></a>

<a name="1145457"></a>

<a name="1145502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I just started playing around with this and I think it's pretty cool. Just to make sure, a System will only process entities that have the components that are registered with it, right?<br><br>Basically all logic would go into systems. What I was wondering about though was when you have an influence map would that be managed and generated by a system as well? And how can Systems communicate with each other?<br><br>It does require a bit of a different mindset to get everything tied up together though. But that's good, keeps you thinking and makes you learn new stuff :-).<br><br>Edit: Wiebo, what's the difference between tags and a group in Artemax?<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1145672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Htbaa<br><br>Yes, all logic should be within a system.  I'm not sure what you mean with an influence map. Can you explain?<br><br>The difference between a group and a tag is that you can only one entity with the same tag.  Use groups if you need to 'tag' more entities with the same name.  Tag is a bit faster though, so preferred when you only intent to label a single entity.<br>Groups and Tags allow you to quickly locate an entity, while not relying on components. <br><br></td></tr></table><br>
<a name="1145741"></a>

<a name="1145742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use an influence map in your path finding algorithm. Instead of going to the set target right away you could calculate a path that avoids contact with any enemies. Using the location of all enemies you decide in which part of the grid they belong and add a score to that cell.<br><br>More on influence maps: <a href="http://gameschoolgems.blogspot.nl/2009/12/influence-maps-i.html." target="_blank">http://gameschoolgems.blogspot.nl/2009/12/influence-maps-i.html.</a><br><br>Thanks for clearing up the difference between tags and groups. Why is it that an entity can only be assigned 1 group? That seems a bit limiting. For example, take units in a RTS game. They can be soldiers, vehicles, and can be subclassed as well; rifleman, grenadier, light tank, heavy tank, etc.. One group doesn't seem to cut it. What would your suggested solution be for this situation? Add components to the entities that describe this?<br><br>Edit: I'm also finding <a href="http://slick.javaunlimited.net/viewtopic.php?p=20885" target="_blank">http://slick.javaunlimited.net/viewtopic.php?p=20885</a> an interesting thread to read about Artemis. Very helpful.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1145745"></a>

<a name="1145746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Htbaa, thanks for asking and using the system.. It's ideal for RTS games, I think. You can easily create awesome unit combinations and such.<br><br>As for the grouping limitation you mention: Why would you want to group units that way? In your example of military units, you could use groups to form squads. These squads can consist of different kind of units, as you mention, but you don't need a group for each type of component combination (entities are only in the framework as a way to group components, classes and subclasses are non existent in this framework)  You could create a squad system to keep track of these units, though.<br><br>So yes, a rifleman would carry the components "soldier" and "rifle." A grenadier would be a combination of "soldier" and "grenade thrower." I would create systems for each combination, to fine-tune behaviour if needed. If a simple 'fire' instruction to the weapon component would be enough then a single soldier system would be enough for all ground troops.  The real fun starts when you allow the units to pick up different weapons. You would only need to replace the weapon component and you're off.<br>Same goes for tanks.<br><br>You can create a system for influence maps. The system manages the grid, and entities can carry an 'influence' component. This component can report the grid position of the unit to the system and its weight. The system can find and update the components because they are registered to it.<br><br>System communication is not that hard. You can add a reference to another system into your system and add some sort of communication interface. It's not against the framework concepts to add some references.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1145758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm I see. And how would you for example only select allied or enemy units, that have the 'aircraft' component. I understand you can create a systems for that for every kind of combination. But it seems to me this can get a bit tedious. Take for example a Select Target System. Not every type of unit can attack an airplane for example and it doesn't seem very effective to me to iterate over all units, instead of only the ones that the current unit can actually attack.<br><br>Maybe my understanding of the system isn't quite there yet. Mainly thinking out loud. It's a real paradigm shift working like this. <br><br></td></tr></table><br>
<a name="1145801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> How to select allied or enemy aircraft units: Give each entity a 'allied' or 'enemy' component. you don't need a system for these components, they are to identify the entity.  Then, each entity which also has the 'aircraft' component is registered to the aircraft system. The aircraft system can create a list of entities registered to it with either the 'allied' or 'enemy' component.<br>Identify components are very handy. In the demo game I use the 'player' component to identify the player entity to the playerinput system.<br><br>A 'select target' system would indeed be overkill, I would put that logic in the weapon system itself.<br><br>But let's be realistic here: You WILL write a lot of systems. This framework will not enable you to write less code. It will enable you to better contained, re-usable code.  The logic code is MOVED from the game objects to the systems.<br><br><br>And I agree: it's another way of getting things done. In the end, it will pay of though, I am sure of it. That's why I ported it to blitzmax (and will port it to monkey) <br><br></td></tr></table><br>
<a name="1145827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the answers. I'll play some more with it. I'll come back if more questions pop-up :-). <br><br></td></tr></table><br>
<a name="1145829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem! Please do. <br><br></td></tr></table><br>
<a name="1149439"></a>

<a name="1149440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> These past few days I've been adding systems: Quadtree, Collision, LayeredRendering. Right now I'm working on a LUA system which will eliminate the need to make a system for each game object.  I'm using Noel's LuGi module for max/LUA integration. Trying to come up with a decent interface to and from LUA is what I'm doing now.<br>I think I make a small asteroids game again, using LUA for all logic.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1302537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm curious about using an entity system and I found this but I have trouble building the test  unit with this <br><br>"Identifier Export not found", under artemax.mod/test/source/t_entitymanager.bmx<br><br><pre class=code>w.Export(s)</pre><br><br>all includes works bt except for that one. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
