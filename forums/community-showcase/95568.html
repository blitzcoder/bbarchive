<!DOCTYPE html><html lang="en" ><head ><title >2d module, opengl3.3 based WiP</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2d module, opengl3.3 based WiP</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >2d module, opengl3.3 based WiP</a><br><br>
<a name="1101524"></a>

<a name="1101525"></a>

<a name="1101526"></a>

<a name="1101528"></a>

<a name="1101529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I''ve been playing around with opengl 3.3 and I thought, why not make a 2d module for blitzmax.. faster than native and with shaders?<br>The idea starts to turn real and I already achieved nice performance boost in some parts.<br>Alpha blending, light blend etc. is at similar/same speed as native but solidblend is sometimes mega faster. The larger image you use the faster it goes (interesting huh?)<br><img src="http://i292.photobucket.com/albums/mm9/polan92/pixeltest.png"><br>That image is Build out of 512*512 1pixel images. Running at 40fps.<br>To compare native blitzmax module run the same code at 20fps.<br>That example run same at all blends.<br>Doubled the fps rate for 1image-perpixel. Great. But we can do better.<br><img src="http://i292.photobucket.com/albums/mm9/polan92/imagtest.png"><br>This one is even more interesting. it draw 22500 256x256 images at once. Blitzmax render it at 2fps rate. No matter what blend we use (image have alpha mask). My module draw it at 2fps while using alpha (to be improved..) and.. at 30fps while ignoring it. :) 15x faster.<br><br>We got some raw numbers and processing power. Note this module use glsl3.3 shaders, so you can get ALOT better effects and great speed (blur,hdr,shadows,lights?) with correct shader.<br><br><br>Some technical info about module:<br>Module will be similar to blitz3d. You will loadimage and then create instance of it, position then , color,rotate. And forget. Everything will be rendered on plrenderworld() call, while all math will be done at plUpdateWorld().<br>You will be able to set parent for instances for bone animations, participle system or whatever you want.<br>You will get camera system which will let you move,rotate,color whole world with really few function calls. You will be able to have multiple cameras for stuff like deathcam or whatever.<br>During loading of images you will be able to generate mipmaps and set filter (NEAREST/LINEAR).<br>You will be able to use few images per instance. In case you want to use bumpmapping etc.<br>Module will include plerNet, that's multithreaded networking module I've wrote, and which should let you have 100+ clients running at 24dl/6up, via tcp with 60-70ms ping... all sitting on the same pc (bet that ping was caused by 100-120 app running at same time, my cpu was at crawling speed during that test..).<br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1101543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simply awesome!  can't wait... <br><br></td></tr></table><br>
<a name="1101578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds fast but how many people have OpenGL 3.3 support. I know my Mac only has 2.0 and it's only 5 years old, so you're going to greatly narrow your audience. <br><br></td></tr></table><br>
<a name="1101580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Supported Cards: GeForce 8, GeForce 9, GeForce 100, GeForce 200 and GeForce 300 series, Radeon HD series"<br>I checked steam and about 90% of people have 3.3 support :). Ogl is not direct it doesn't require any specific system and works on old cards (my 5old pc can support it ;)) <br><br></td></tr></table><br>
<a name="1101606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok but I'm telling you MY 5-year old pc cannot support it and steam statistics are skewed towards higher end gamers. <br><br></td></tr></table><br>
<a name="1101638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> HAHAHAHA! (sorry)  ...openGL compatibility is insanely tough to keep, even across different brands of same generation gfx boards. Nvidia is extremely generous and tolerant, when it comes to shader coding, but ATI alone can throw a wrench in your endeavors. I have not seen any ogl code of higher versions that takes advantage of the latest features, which would run on any older generation, particularly because it tries to take advantage of the latest features of your gfx board, so at the latest there it will fail.<br><br>BUT, I absolutely love your faith and enjoy to not concern myself with such issues, either. At the end even opengl 3.3 will be old and all former versions will be laughed at. So don't let that confuse you, but realize that you may run into many complains of people, who can't run your stuff yet. <br><br></td></tr></table><br>
<a name="1102016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just incase anyone is interested :).<br>I'm impleting keyframe like animation, so animating image will be as simples as createanimation(few params goes here) and then just playanimation/animate. This will also include parts for begging-end of animation for seamles animation. You also will be able to create rotation-scale-color state per frame, in case you want to get some bone system going.<br>Blitzmax animation (tile set images) will have optional linear filter. It means that frames will blend. You can see that effect on image. It should be really fast (as it's done on gpu).<br><img src="http://i292.photobucket.com/albums/mm9/polan92/blend.png"> <br><br></td></tr></table><br>
<a name="1102038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way 30fps is not 15 times faster.<br><br>15fps is half the speed of 30fps<br>7fps is quarter<br>3.5fps is 1/8th<br><br>so it's not more than about 8 times faster<br><br>But anyway, good luck with it. Blitz could do with a speed boost. <br><br></td></tr></table><br>
<a name="1102050"></a>

<a name="1102051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taumel</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> People will be interested in it if it works, best on all platforms BlitzMax supports and will be a benefit to them. Otherwise a few will play around with it for some time before it will end up nowhere, again.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1102070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AltanilConard</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> By the way 30fps is not 15 times faster. <br></div><br>You say 30fps is not 15 times faster then 2fps ? <br><br></td></tr></table><br>
<a name="1102278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It will be released for windows and probably for linux. Have no mac, and know noone with mac so I won't be able to compile it there. Oh and here's the animation showing the difference between nearest filter and linear :).<br><img src="http://i292.photobucket.com/albums/mm9/polan92/animation.gif"><br>Left one is nearest, right one is linear. Both are 10 frame animation. <br><br></td></tr></table><br>
<a name="1102290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yea you're right, never mind. <br><br></td></tr></table><br>
<a name="1102605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm impleting keyframe like animation, so animating image will be as simples as createanimation(few params goes here) and then just playanimation/animate. This will also include parts for begging-end of animation for seamles animation. You also will be able to create rotation-scale-color state per frame, in case you want to get some bone system going.<br>Blitzmax animation (tile set images) will have optional linear filter. It means that frames will blend. You can see that effect on image. It should be really fast (as it's done on gpu). <br></div> fantastic.  and btw, I can compile it for you on a Mac if needed. <br><br></td></tr></table><br>
<a name="1102606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to target OpenGL 3.2 for Mac.<br><br>I'm not aware of any advantage OpenGL 3.2 has over OpenGL 2.1, for 2D drawing. <br><br></td></tr></table><br>
<a name="1102741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's not much advantage of 2.0 over 1.1 for 2d, except perhaps to do stuff in the shader. <br><br></td></tr></table><br>
<a name="1103026"></a>

<a name="1103128"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> With Ogl3.3 being the new standard, where deprecated functions are deleted you won't have to live in fear of possible (hardly...) drop of support for your code. It might also get some optimalisation and is more elastic :).<br><br>And now little update on progress:<br>Parenting is in, so when you rotate 1 instance, all it's kid get rotated.. Making solar system is just case of few functions. There is move command similar to blitz3d.<br>I got collision commands that Are based on basic shapes, circle and tris. Rect is also in but it's based on tris.<br>Tris can be specified by all 3 points so you are not limited by rotation, shape or scaling. There will be helper function for images which will take care of corner position calculation :).<br>I got "screenshot" function. It just take part or whole screen and save it to file. TGA supported right now but I should add some more formats before release.<br>There are way more feature on their way and I'm preparing to build some tech demo soon.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1104029"></a>

<a name="1104046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> UPDATE!<br>More and more progress is made but now I need little help.<br>I need to check if other people with ogl 3.3 can run my exe, just for sure I'm not making single-use-mod.<br><a href="http://www.mediafire.com/?dbngb5sj0qj6tu6" target="_blank">http://www.mediafire.com/?dbngb5sj0qj6tu6</a><br><br>And here's how the code look like.<br><pre class=code>
SuperStrict
Framework BRL.Random
Import pler.pler2d
SeedRnd(MilliSecs())
Global gw:Int = 1024 , gh:Int = 768
plGraphics2d(gw,gh)
Print "Opengl version: "+plGLVersion()


Global size:Int = 24
Global img:Int = plCreateImage(size,size)
   For Local x:Int = 0 To size-1
   For Local y:Int = 0 To size-1
   If plDist(size/2,size/2,x,y) &lt; size/2
      plWritePixel(img,x,y,0,Rand(50,100),0,255)
         EndIf
   Next
   Next
   plBakeImage(img)
   plMidHandleImage(img)
   plSetBlend(img,PL_ALPHA)

Global inst:Int[5]
inst[0] = plCreateInst(img)
   plInstPos(img,inst[0],gw/2,gh/2)
For Local x:Int = 1 To 4
inst[x] = plCreateInst(img,img,inst[x-1])
plInstPos(img,inst[x],0,150-x*30)
Next

While Not KeyHit(key_escape)
plCLS

For Local x:Int = 0 To 4
plInstRot(img,inst[x],.1)
Next

plUpdateWorld
plRenderWorld

Flip
Wend
</pre><br><br>EDIT:<br>switched link to debug version<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1104039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems to work here -- there are some green circles moving about anyway! <br><br></td></tr></table><br>
<a name="1104042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well that's what you were supposed to see :). You used the machine from tag? (Beta test specs: Windows 7/XP; Intel Core 2 Quad Q6600 @ 2.4 GHz; GeForce GTX260.)? <br><br></td></tr></table><br>
<a name="1104045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, that's right. <br><br></td></tr></table><br>
<a name="1104495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update:<br>Fonts will be bitmap based, I will provide fontgen exe that will generate plf and pli file. plf contains font data and pli is my own image format with compression prepared for images with lots of blank data (like 1 color background in fonts). There is function in engine which let you save to that format. Using it is optional, it's there just to let you secure your arts a little and maybe compress them.<br>Drawing data is a little different from blitzmax native. You will create string which will be autodrawn, it will save position, spacing between letters, handle, string height, string width, font, color etc. It will let you do some action on every chars in string so effects like waving text will be easy to do :).<br>Next on todo list is basic gui module with inputs etc. and customizable image.<br>After this I will write few default shaders like lights, shaders. If it will take to long I will release the engine without default shaders and update it later. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
