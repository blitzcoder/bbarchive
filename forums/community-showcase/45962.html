<!DOCTYPE html><html lang="en" ><head ><title >SeamlessTG  - New Sharpen Algorithm! (image heavy)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >SeamlessTG  - New Sharpen Algorithm! (image heavy)</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >SeamlessTG  - New Sharpen Algorithm! (image heavy)</a><br><br>
<a name="511033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> After a week of head scratching and reading lots of research  papers with lots of pretty pictures, and a bunch of math I don't understand, I've developed a new algorithm for sharpening images which will be in the next update for my Seamless Texture Generator!<br><br>Why have I developed a new sharpening algorithm, you might ask?<br><br>The standard method of sharpening an image is called "unsharp masking".  Unsharp masking is an old photographic technique where one makes a blurrier version of an image and then subtracts that from the original, producing an image where the edges made brighter on one side, and darker on the other.<br><br>This brightening and darkening of the edges creates the appearance of a sharper edge, but it also creates what is known as a "ringing" effect.  A bright dot in an image will end up with a dark circle around it.<br><br>In photographs, one can get away with this ringing effect, because one's images are generally not examined too closely.  But textures are often seen from up close, and on a zoomed image, such sharpening artifacts look horrible.<br><br>My algorithm GREATLY reduces this ringing effect while still allowing you to sharpen the image just as much as with unsharp masking.  Also, my algorithm does not squeeze edges like unsharp masking does...  It does not make narrow gaps into even narrower ones.<br><br>But don't take my word for it, see for yourself, pictures speak louder than words. :-)<br><br>I'm not sure yet when this new version will be out, I'm still working on it and adding stuff, but it will be fairly soon.  Besides sharpening the update will also have other functions to improve the final image before saving. <br><br></td></tr></table><br>
<a name="511037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Btw, if you're struggling to see the difference, just take the cropped unsharp radius 0.5, and the cropped version of mine radius 1, and open them in different tabs or save them so you can switch between them and see the changes as you switch.  It'll be pretty obvious then. <br><br></td></tr></table><br>
<a name="511043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You keep calling it Unsharp, but isn't what you're doing called Sharpening?  (The reverse of that would be Softening) <br><br></td></tr></table><br>
<a name="511057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I'm doing is sharpening, but "unsharp masking" is a specific method of sharpening, probably the most popular one among artists.  "Unsharp masking" is what it is called in Photoshop, and every other program out there, as well as by computer scientists.<br><br>Unsharp masking is called unsharp masking because it has its origins in photography.  <br><br>In the old days, it was done in dark rooms by creating blurry negatives from photos and then using them to "mask the unsharpness" of the original image by placing the blurry mask negative over the original negative to produce a sharp final image on the photo paper.<br><br>So that's how it got its name.  Make sense if you know the origins, but I wouldn't have called it that. :-) <br><br></td></tr></table><br>
<a name="511221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm posting the sample images here instead so I can stick them side by side for easier comparison:<br><br>(Note that a radius of 0.5 for an unsharp mask is approximately equivalent to a radius of 1 in my program.)<br><br>-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br><br>Original image:<br><img src="http://www.seamlesstexturegenerator.com/cmp-original.png"><br><br>Unsharp radius 0.3 : 0,5 : 1.0<br><img src="http://www.seamlesstexturegenerator.com/cmp-unsharp-0.3.png"><img src="http://www.seamlesstexturegenerator.com/cmp-unsharp-0.5.png"><img src="http://www.seamlesstexturegenerator.com/cmp-unsharp-1.0.png"><br><br>Mine radius 1 : 1 : 2<br><img src="http://www.seamlesstexturegenerator.com/cmp-mine-radius1.png"><img src="http://www.seamlesstexturegenerator.com/cmp-mine-radius1.png"><img src="http://www.seamlesstexturegenerator.com/cmp-mine-radius2.png"><br><br><br>I have also cropped and zoomed the images so you can see the differences more easily.<br><br>Note the ringing around the white panels, and note how the gap there gets smaller.<br>Also note the square metal bracket, and how unsharp making makes it very dark so the detail is effectively lost.  <br>And note how the gaps in the bricks are more defined with my filter.<br><br>Original image:<br><img src="http://www.seamlesstexturegenerator.com/cmp-original-c.png"><br><br>Unsharp radius 0.3 : 0.5 : 1.0<br><img src="http://www.seamlesstexturegenerator.com/cmp-unsharp-0.3-c.png"><img src="http://www.seamlesstexturegenerator.com/cmp-unsharp-0.5-c.png"><img src="http://www.seamlesstexturegenerator.com/cmp-unsharp-1.0-c.png"><br><br>Mine radius 1 : 1 : 2<br><img src="http://www.seamlesstexturegenerator.com/cmp-mine-radius1-c.png"><img src="http://www.seamlesstexturegenerator.com/cmp-mine-radius1-c.png"><img src="http://www.seamlesstexturegenerator.com/cmp-mine-radius2-c.png"> <br><br></td></tr></table><br>
<a name="511239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> How's the game coming along, sswift?<br><br>i.e. Apps = bugger all money.<br>Games = possibly good money. <br><br></td></tr></table><br>
<a name="511261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Big10:<br>I'm making enough money on this to justify a couple more weeks of work on it. :-) <br><br></td></tr></table><br>
<a name="511727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I look forward to the update! <br><br></td></tr></table><br>
<a name="511776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't reall tell the difference? <br><br></td></tr></table><br>
<a name="511790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, it's kinda hard to tell the difference in my examples.<br><br>Look at just these two images:<br><br><img src="http://www.seamlesstexturegenerator.com/cmp-unsharp-0.5-c.png"><br><img src="http://www.seamlesstexturegenerator.com/cmp-mine-radius1-c.png"><br><br>That is unsharp 0.5 radius on the top, and mine, radius 1 on the bottom.<br><br>Look at the brown rectangle in the middle of the white plywood.  See how it is darker and has a light outline around it in the top image?<br><br>Also, look on the right, where the grey border touches the white plywood.  In the top image, the edge of the grey wood is much lighter.<br><br>Unfortunately, I didn't sharpen these examples enough to really show the difference.  These samples aren't as sharp as they could be, and you want them as sharp as possible obviously.  <br><br>Increasing the sharpness with the unsharp making would grealy increase those light borders you see there.  Here I am only using 100% strength on the sharpening, but if you crank my algorithm up to 200% then you get a much sharper image, and you still don't have those ugly outlines.  But if you cranked up the unshapr mask to 200% you'd see very bright outlines and stuff like that brown rectangle would be really dark.<br><br>I'll come up with some better examples for ya. <br><br></td></tr></table><br>
<a name="511798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lovely, the domain name server crashed just now. <br><br></td></tr></table><br>
<a name="511815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had to change the domain name server my domain is using.  I guess the change will propogate over the next few hours until everyone can access the domain name again. <br><br></td></tr></table><br>
<a name="511877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> They all look the same to me,... tiny white box with a red X in it,...<br><br>Sorry,... couldn't resist. Looking forward to seeing the pics when all is well again. <br><br></td></tr></table><br>
<a name="512014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> First me website goes down, then the DNS servers go down, and now Share*It is reporting that they are the target of a distributed DOS attack by 100 PC's.<br><br>Ugh. <br><br></td></tr></table><br>
<a name="512020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now you know why you stuck with PayPal for so long ;]<br><br>...<br><br>Just kidding!  It's not ShareIts fault their popular... <br><br></td></tr></table><br>
<a name="512058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been doing some more research, and it looks like my algorithm isn't really new or original... I've found some pages describing an algorithm which is pretty much identical, if not an improvement on my own algorithm.  It's not used in more than one image editing program I know of though.<br><br>So I guess it won't hurt to explain what I'm doing.<br><br>Apparently, what I am doing is called Weighted Median Sharpening, though I'm doing it without the weighting.<br><br>Imagine a 1D slice of an edge in a blurry image.  It might look like this:<br><br><img src="http://ceicher.homeunix.com/archives/mask.jpg"><br><br>That is unsharp maksing at work.  Unsharp masking works by taking the original image, applying a gaussian blur, then subtracting that from the original image to produce a high pass image which is then multiplied with the original image. <br><br>As the high pass image will have edges highlighted with light and dark bands, this brightens and darkens the area around the edge.<br><br>But look at the waveform above.  See the bumps at the top and bottom of the waveform?  The idea wave for a perfectly sharp edge is a square wave.  We don't want those bumps.  We especially don't want to modify portions of the wave that don't need to be modified, like the flat bits there.  <br><br>That modification happens because the flat bits are averaged with the bits that are next to them that are lower or higher, and that averaging means the resulting color there is lighter or darker than the flat bit.<br><br>We only want to modify the slanty bit of the waveform, ideally, to push it up in the middle. to make a square wave.<br><br>Now if we could work on these waveforms in 1D that would be easy to do, but we have to work in 2D or we'll get weird artifacts on things like circles.  We can't work in a horizontal direction and a vertical.<br><br>So I came up with the best solution I could think of.  Median filtering.<br><br>If you have a list of numbers, and you order them from high to low, and then take the middle number, that is a median.<br><br>A median differs from an average in that an average can be skewed if one of the values is really high or really low.<br><br>The median doesn't have this problem.  The median is not affected  by outlying values.<br><br>So look at our waveform again, and imagine you are sampling the point at the edge of the cliff.  At that point, the average of several pixels to the left and right would say that the color of that pixel is dark.  Just inside that edge on the top flat part, you'd still have some dark pixels in there saying the pixel is dark.<br><br>But the median of that point is the center value.  And if half the pixels are on the flat part, and half are on the slanty bit, then the median would be the value of the flat part!<br><br>If you move in a little bit down the slanty bit, now you've got more slanty pixels, and your median is a tiny bit lower.  In fact, in this particular case, the median will generally be about the value of the pixel at that location, but all edges are not this smooth a gradient.<br><br>Anyway, so what's so special about that...  Well, what it means is that now the only values that will be modified are those on the slanty bit.  The edges in our high pass image will be razor sharp and lined up against the edges of the slanty bit.  That means the dark and light bits will only be inside the slanty bit, and when we brighten or darken the pixels, only those bits which are in the slanty bit will get pushed up or down.<br><br>This stops the bits that shouldn't be modified at all from being brightened or darkened, and gives us a much closer approximation of a square wave, and shrinks the ringing artifacts down to be very small if there are any at all.<br><br>Here is a picture of a cameraman which has been sharpened using unsharp masking:<br><br><img src="http://img243.echo.cx/img243/1197/cameramanunsharp3ra.png"><br><br>And here is the same image sharpened using my method, which I guess you would call "Median Sharpening"* <br><br><img src="http://img243.echo.cx/img243/4734/cameramanmine6rl.png"><br><br>You should be able to see the ringing on the edges in the unsharp version, if you save the images and zoom in on them a bit.<br><br><br>* As opposed to Weighted Median, because I'm not doing any weighting which would reduce the amplification of the noise, which I consider makes the texture sharper in appearance and is appropriate for a texture, though inappropriate for a photograph. <br><br></td></tr></table><br>
<a name="513365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> the camera man is holding a sswifts special real world sharpening device. works great on creases for suits/trousers etc.<br>Or it could be a comdey water squirting camera<br><br>( I will go away now) <br><br></td></tr></table><br>
<a name="513447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you're trying to sell this to the wrong bunch of people!<br><br>I don't really see the difference apart from the top one looks sharper... which I guess isn't what you're looking for. But you look at the tower in the background and it certainly stands out better than in your "Median Sharpening" example.<br><br>I do see the ringing in the top one though which is not in the lower (white outline on the tripod leg). <br><br></td></tr></table><br>
<a name="513451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I don't really see the difference<br> <br></div><br><br>Do you have a CRT or LCD? I'm on my laptop now and those pictures look like day and night to me. <br><br></td></tr></table><br>
<a name="513455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mustang:<br>And the Unsharp one looks sharper right? :-)<br><br>You really need to look at them zoomed in, like you would see a texture.  The Unsharp Maksing makes the image look better when it is small, but as you get closer you'll see that it doesn't have a lot of fine detail and you've got the ringing artifacts. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
