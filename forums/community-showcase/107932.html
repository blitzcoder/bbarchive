<!DOCTYPE html><html lang="en" ><head ><title >Monkey2 Node Editor</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Monkey2 Node Editor</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=61" >Showcase</a>/<a href="#bottom" >Monkey2 Node Editor</a><br><br>
<a name="1338710"></a>

<a name="1339573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="https://vjointeractive.files.wordpress.com/2017/04/screen-shot-2017-04-18-at-14-14-20.png"><br><br>This is something in very early dev. basically a node based shader constructor.<br>It's all very prototype but I am pleased about the cubic spline and that everything scales perfectly <br><br></td></tr></table><br>
<a name="1338712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mainsworthy</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool , you can tell you've used apps like poser and reaper , as your apps seem to have that same pro feel <br><br></td></tr></table><br>
<a name="1338765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good stuff. Cubic splines are hard math. <br><br></td></tr></table><br>
<a name="1338771"></a>

<a name="1338772"></a>

<a name="1338789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi adam.. ive Broke my mind once trying to make those round line connectors<br>Is it modifiable and if so any chance to get a code for doing so? <br><br></td></tr></table><br>
<a name="1338817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @mainsworthy I used poser very briefly many years ago, not come across reaper - had to google it<br><br>OK. a little background for you. I do have a lot of experience with UI's and stuff like that when I took over a large project many years back... Here's what I got:<br><img src="http://www.audiovisualizers.com/toolshak/vjprgpix/vjockey/vjockey1.gif"><br>and after I had finished (this was a one man job over a 2 years)<br><img src="http://img.informer.com/screenshots/476/476973_4_3.png"><br><img src="http://cdm.link/app/uploads//2008/02/visualjockey-thumb.jpg"><br>and one of the new editors I developed for it:<br><img src="http://www.visualjockey.com/gallery/storm-ui4.gif"><br><br>I was really looking for a pic of the automation systems which were designed to look exactly like a mixing desk. All of this was OSC, Midi, externally controllable with full output controls and movie export.<br><br>Here's someone using it with projectors and mapping<br><img src="https://vjointeractive.files.wordpress.com/2017/04/mapping.jpg"> <br><br></td></tr></table><br>
<a name="1338818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Hardcoal The code is about 40 lines line. really simple stuff:<br><pre class=code>
DrawCubicCurve( canvas,  2, 2, 4, 2,  10, 5, 8, 5 )
		
method DrawCubicCurve( canvas:Canvas, x0:float, y0:float, hx0:float, hy0:float, x1:float, y1:float, hx1:float, hy1:float )
		x0 *= _scale
		y0 *= _scale
		x1 *= _scale
		y1 *= _scale
		hx0 *= _scale
		hy0 *= _scale
		hx1 *= _scale
		hy1 *= _scale
		Local mx:float = (hx1+hx0) * 0.5
		Local my:float = (hy1+hy0) * 0.5
		
		canvas.LineWidth = _scale * 0.5
		
		DrawCurve( canvas, x0, y0, hx0, hy0, mx, my, 5 )
		DrawCurve( canvas, mx, my, hx1, hy1, x1, y1, 5 )

		canvas.LineWidth = 1
	End method
	
method DrawCurve( canvas:Canvas, x0:float, y0:float,  hx0:float, hy0:float,  mx:float, my:float,  lines:int )
		Local k:int
		Local sc:float = _scale * 0.5
		x0 += sc
		y0 += sc
		mx += sc
		my += sc
		hx0 += sc
		hy0 += sc
		Local sx:float = x0
		Local sy:float = y0
		Local sx1:float = hx0
		Local sy1:float = hy0
		Local xd:float = (hx0 - x0) / lines
		Local yd:float = (hy0 - y0) / lines
		Local xd1:float = (mx - hx0) / lines
		Local yd1:float = (my - hy0) / lines
		Local nx:float = sx
		Local ny:float = sy
		Local nx1:float
		Local ny1:float
		For k = 1 To lines
			nx1 = sx+((sx1 - sx) / lines * k)
			ny1 = sy+((sy1 - sy) / lines * k)
			canvas.DrawLine( nx, ny, nx1, ny1 )
			nx = nx1
			ny = ny1
			sx += xd
			sy += yd
			sx1 += xd1
			sy1 += yd1
		Next
		canvas.DrawLine( nx, ny, mx, my )
		
	end method
</pre><br><br>this is monkey2 code, but it is very simple to understand (remove the canvas and scale stuff and you're good to go)<br>a line goes from point 0 to point 1, each point having a handle where you drag the influence<br><br>so point 0 is 2,2 with a handle at 4,2<br>and point 1 is 10,5 with a handle at 8,5<br><br>first you find the midpoint of the line h0,h1 the middle of the handles<br>you then feed each side of the midpoint into a simple curve drawer...<br><br>Here's a pic to show what is actually going on (and how I worked it out)<br><img src="https://vjointeractive.files.wordpress.com/2017/04/untitled-1.jpg"> <br><br></td></tr></table><br>
<a name="1338824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tnx adam ill check it out.. And ill put you on my credits list :) <br><br></td></tr></table><br>
<a name="1338825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> no problem ;)<br><br>I was working on the internal systems and thought about what I posted above and how it is a similar tree. so....<br><img src="https://vjointeractive.files.wordpress.com/2017/04/screen-shot-2017-04-19-at-08-21-47.png"><br><br>Looks like i'm recoding this again... <br><br></td></tr></table><br>
<a name="1338834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sexy lookin.. <br><br></td></tr></table><br>
<a name="1338839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> sexy -lol<br>Let me know how you get on with the curve code ... <br><br></td></tr></table><br>
<a name="1338875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure Bud..! <br><br></td></tr></table><br>
<a name="1339353"></a>

<a name="1339354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Adam.. I did this on Xors 3D but I get a straight line.<br>If have no Idea whats the inputs of your function means.. beside that start and end point of the curved line<br><br><pre class=code>
Import xorsteam.xors3d

xSetEngineSetting("Splash::TilingTime", "0")
xSetEngineSetting("Splash::AfterTilingTime", "0")
xGraphics3D(800, 600)


Repeat
	
	xCls()
	xRenderWorld()
		DrawCubicCurve(0, 0, 45, 45, 300, 300, 300, 300)
	xFlip()
	
Until xKeyHit(xKEY_ESCAPE)
		
Function DrawCubicCurve(x0:Float, y0:Float, hx0:Float, hy0:Float, x1:Float, y1:Float, hx1:Float, hy1:Float)

		Local mx:float = (hx1+hx0) * 0.5
		Local my:float = (hy1+hy0) * 0.5

		
		DrawCurve(x0, y0, hx0, hy0, mx, my, 5)
		DrawCurve(mx, my, hx1, hy1, x1, y1, 5)

	End Function
	
Function DrawCurve(x0:Float, y0:Float, hx0:Float, hy0:Float, mx:Float, my:Float, lines:Int)
		Local k:int
		Local sc:Float = 0.5
		x0 = x0 + sc
		y0 = y0 + sc
		mx = mx + sc
		my = my + sc
		hx0 = hx0 + sc
		hy0 = hy0 + sc
		Local sx:float = x0
		Local sy:float = y0
		Local sx1:float = hx0
		Local sy1:float = hy0
		Local xd:float = (hx0 - x0) / lines
		Local yd:float = (hy0 - y0) / lines
		Local xd1:float = (mx - hx0) / lines
		Local yd1:float = (my - hy0) / lines
		Local nx:float = sx
		Local ny:float = sy
		Local nx1:float
		Local ny1:float
		For k = 1 To lines
			nx1 = sx+((sx1 - sx) / lines * k)
			ny1 = sy+((sy1 - sy) / lines * k)
			xLine(nx, ny, nx1, ny1)
			nx = nx1
			ny = ny1
			sx = sx + xd
			sy = sy + yd
			sx1 = sx1 + xd1
			sy1 = sy1 + yd1
		Next
		xLine(nx, ny, mx, my)
		
End Function

</pre> <br><br></td></tr></table><br>
<a name="1339366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Flanker</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> H0 is a control point to determine the shape of the curve. If it's on the line beetween start and end point you have a straight line.<br><br>Try DrawCubicCurve(0,0, 0,300, 300,300, 10) it should draw a perfect circle arc. <br><br></td></tr></table><br>
<a name="1339367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok ill give it a shot , tnx <br><br></td></tr></table><br>
<a name="1339459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry didnt work. + you forgot to put another variable on your example Flanker..<br><br>Also I dont understand what "the shape of the curve" means.. a curve is a curve.. <br><br></td></tr></table><br>
<a name="1339460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Flanker</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't try Adam's code but you can try this one, it's a bezier curve adapted from the code archives, you can visualize and move "control points" :<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

Graphics 800,600

Local p1x:Int = 50
Local p1y:Int = 100
Local v1x:Int = 400
Local v1y:Int = 300

Local p2x:Int = 700
Local p2y:Int = 500
Local v2x:Int = 600
Local v2y:Int = 100

Local segments:Int = 10

Local pickRadius:Int = 50

SetLineWidth(3)

While Not KeyHit(KEY_ESCAPE)
	
	Cls
	
	If MouseDown(1)
		If (MouseX()-p1x)*(MouseX()-p1x) + (MouseY()-p1y)*(MouseY()-p1y) &lt; pickRadius*pickRadius
			p1x = MouseX()
			p1y = MouseY()
		ElseIf (MouseX()-p2x)*(MouseX()-p2x) + (MouseY()-p2y)*(MouseY()-p2y) &lt; pickRadius*pickRadius
			p2x = MouseX()
			p2y = MouseY()
		ElseIf (MouseX()-v1x)*(MouseX()-v1x) + (MouseY()-v1y)*(MouseY()-v1y) &lt; pickRadius*pickRadius
			v1x = MouseX()
			v1y = MouseY()
		ElseIf (MouseX()-v2x)*(MouseX()-v2x) + (MouseY()-v2y)*(MouseY()-v2y) &lt; pickRadius*pickRadius
			v2x = MouseX()
			v2y = MouseY()
		EndIf
	EndIf
	
	DrawBezier(p1x,p1y,v1x,v1y,p2x,p2y,v2x,v2y,segments)
	
	
	Flip
	
Wend

End


Function DrawBezier(p1x:Int,p1y:Int,v1x:Int,v1y:Int,p2x:Int,p2y:Int,v2x:Int,v2y:Int,segments:Int)
	
	' control points drawing
	SetColor 50,50,50
	DrawLine p1x,p1y,v1x,v1y
	DrawLine p2x,p2y,v2x,v2y
	SetColor 255,255,255
	''''''''''''''''''''''''
	
	Local x1:Float = p1x
	Local y1:Float = p1y
	Local x2:Float
	Local y2:Float
	
	For Local i:Float = 1 To segments
	
		Local t:Float = i/segments
		
		Local x2:Float = p1x*(1-t)^3 + 3*v1x*(1-t)^2*t + 3*v2x*(1-t)*t^2 + p2x*t^3
		Local y2:Float = p1y*(1-t)^3 + 3*v1y*(1-t)^2*t + 3*v2y*(1-t)*t^2 + p2y*t^3

		DrawLine x1,y1,x2,y2
		
		x1 = x2
		y1 = y2
		
	Next
	
	' control points drawing
	SetColor 0,255,0
	DrawOval p1x-3,p1y-3,6,6
	DrawOval p2x-3,p2y-3,6,6
	SetColor 255,0,0
	DrawOval v1x-3,v1y-3,6,6
	DrawOval v2x-3,v2y-3,6,6
	''''''''''''''''''''''''

End Function</textarea> <br><br></td></tr></table><br>
<a name="1339466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok sir flanker.. Ill try it thanks :) <br><br></td></tr></table><br>
<a name="1339468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted April)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats Great man! thats what I was looking for... Flanker.. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
