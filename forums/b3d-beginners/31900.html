<!DOCTYPE html><html lang="en" ><head ><title >More Efficient Code</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >More Efficient Code</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >More Efficient Code</a><br><br>
<a name="340864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mental Image</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can someone make this more efficient for me, please (it shouldn't be too difficult!).<br><br>For x=warning_pos To warning_pos+(warning_max-2)<br>	y1=warning_store(x)<br>	If y1&gt;100 Then y1=100<br>	y2=warning_store(x+1)<br>	If y2&gt;100 Then y2=100<br>	Line xpos,20+(300-(3*y1)),xpos+20,20+(300-(3*y2))<br>	xpos=xpos+20<br>Next<br><br>OK, "warning_pos" is just a pointer into an array, and "warning_max" is the limit of iterations. "Warning_Store" is an array that will usually contain values between 0 and 100, but MAY contain values higher than that. I am plotting the values on an axis which ranges from 100 at the top to 0 at the bottom. The top of this axis is located at screen position y=20 (hence the 20+.....) and each vertical position is separated by 3 pixels (hence 3*y). I want to clip any value greater then 100. This is drawing a line graph between succesive points, by the way.<br><br>It works fine, but is messy. Show me how to be elegant! <br><br></td></tr></table><br>
<a name="340872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It mostly looks good to me.  I mean, I would format it a little differently but the content would be the same.  Well, you could change 20+(300-(3*y1)) to just 320-3*y1.  Frankly though, depending on the context (ie. the rest of your code) that may make things confusing.  Definitely don't leave 20 hanging out like that, but it might make sense to set a constant to 20 at the top of your code and use that constant here, as in:<br><br>Const offset=20<br>...<br>Line xpos,offset+300-3*y1...<br><br>Incidentally, efficient and elegant are often two very different things.  The most efficient code is often quite inelegant, and thus, unless you really need to optimize the routine, undesirable because it is harder to understand.  For example, replacing all the magic numbers in your code with named constants would be more elegant but less efficient. <br><br></td></tr></table><br>
<a name="340875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> A tough one, there's not much to optimise.<br><br>Depending on how often you are updating the values in the array 'warning_store()' it may be better to clip the values at 100 when you store them in the array rather than every time you read from the array.<br><br>If the updating of the values is very rarely you might benefit from multiplying by 3 and adding 20 when you store them rather than when you read them, also storing them 300- may speed things up and simplify and speed up this loop.<br><br>In short prepare the values to be correct for reading when you write them.<br><br>Can't think of anything else atm. <br><br></td></tr></table><br>
<a name="340880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>AnExtraVar=warning_pos+warning_max-1
y1=warning_store(warning_pos) 
If y1&gt;100 Then y1=100
For x=warning_pos+1 To AnExtraVar
y2=warning_store(x) 
If y2&gt;100 Then y2=100 
Line xpos,320-3*y1,xpos+20,320-3*y2
xpos=xpos+20 
y1=y2
Next</pre><br>I think this is the best I can do, should be faster. <br><br></td></tr></table><br>
<a name="340881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good one.  I didn't think of reducing the number of calls into the array by storing the value of y2 in y1 every time through the loop.  Odd that I didn't think of that since I do it all the time, but whatever. <br><br></td></tr></table><br>
<a name="340904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mental Image</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool - thanks guys.<br><br>I can't clip when storing the values in the array, because I use the genuine values elsewhere. I could duplicatet he arrays, but am not overly bothered about that much of a speed hit, just wanted to know if it could be done better.<br><br>Excellent point about the relative merits of elegant vs efficient Joe.<br><br>Thanks again,<br><br>Paul <br><br></td></tr></table><br>
<a name="341139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oso</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes indeed, Joe, very interesting. I had to teach myself programming and I found the only sure way I could code a complicated algorithm and know it would work was to realise that at bottom all instruction can be thought of as a collection of two-way decisions with labels before them. In other words either keep going or jump somewhere else. I used this way to programme professionally for years. My code looked like a dog's breakfast to most people and my flowcharts sprawling collections of little inverted "Y"s, but it always ran very quickly and had remarkably few bugs.<br><br>I understand structure now, (I have to for modifications to other people's code at work) but here at home, for really complicated recursive things of my own (geometrical puzzle solvers or mathematical work) - I still run riot and fall back on what is essentially a collection of forks with gotos and labels because I know I can always make it work.<br><br>So I have a foot in each camp, but I'm afraid at heart I am much closer to efficiency than to elegance. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
