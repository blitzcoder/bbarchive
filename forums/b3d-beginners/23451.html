<!DOCTYPE html><html lang="en" ><head ><title >This doesnot work right!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >This doesnot work right!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >This doesnot work right!</a><br><br>
<a name="242250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this;<br><br>Graphics 800,600,16<br>SetBuffer BackBuffer()<br>For x=0 To 9<br>	;Cls<br>	Rect 0,0,800-10*x,600-10*x,0<br>	Flip<br>	VWait 20<br>Next	<br><br>It should have 5 rectangles on each bank, right?<br>Why can I see all 10 at the same time?<br><br>Marg <br><br></td></tr></table><br>
<a name="242255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well if I try your code I see only 5. When you use Flip, I think the frontbuffer and backbuffer are swapped: what is on back will be on front and what was on front will be on back. Therefore, like you say, there should be 5 on each bank, and this is also what I see. Hmm...<br><br>By the way, also in reference to your other post: if I use<br><br><pre class=code>
SetBuffer FrontBuffer()
</pre><br><br>in this program instead of backbuffer, and remove the flip, I see all 10 rectangles (also adding a Waitkey() at the end so you can see it, or a Delay(1000) in the loop).<br><br>I think that the SetBuffer() command is not a way to select between double buffering, or no double buffering. There are always the two buffers; with SetBuffer() you just select the buffer you are drawing to. It only actually becomes "double buffering" when you 1) choose the backbuffer to draw to and 2) use Flip to flip what you have drawn to the frontbuffer.<br><br>If you don't want double buffering you should select the frontbuffer, and NOT use flip. I think this is how it works. <br><br></td></tr></table><br>
<a name="242264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NTense</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see 10, but it's for the same reason as this program "drawing" a yellow line instead of just a box at the mouse pointer:<br><pre class=code>
Graphics 800,600,16

Global mouseimage = CreateImage (10,10)

SetBuffer ImageBuffer(mouseimage)
Color 255,255,0
Rect 0,0,10,10,1

SetBuffer BackBuffer() 

While Not KeyHit(1)
	;Cls
	DrawImage mouseimage,MouseX(), MouseY()
	Flip 
Wend
End 
</pre><br><br>Notice that the Cls is commented out as yours is in your example.  The problem is that even though you are flipping the buffer, you're not clearing the flipped buffer.  So the buffer flips to the back with whatever was on it to begin with.  In your loop, the buffer is carrying the rectangles with it that have already been drawn on the buffer.  You have to cls the buffer.  I'm not sure if the clearing is dependent on video card or not.. Maybe some clear automatically when flipped to the back buffer, and other's don't. <br><br></td></tr></table><br>
<a name="242284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> But if you clear the buffer (using Cls), in the end you will only see the last rectangle that was drawn. I see 5 rectangles because you draw one, flip it to front, and flip front to back. Front was empty so back is now empty. You draw one, and so on: of every two rectangles you draw, each of them will end up on a different buffer. (Or, on one of the two images that you are flipping between back and front.)<br><br>When you see 10 rectangles, this means that when you do flip, the back is flipped to the front *but the front is not flipped to the back*. So you draw a rectangle, flip it to front. You draw a second rectangle next to the first one and flip the result, two rectangles, to front. This way, you will have all 10 rectangles in the end.<br><br>So with respect to dependency on video card, I think the difference between two cards would be in the effect of the Flip command, with these two possibilities:<br><br>a) Flip has the effect of *interchanging* the contents of back and front<br>b) Flip has the effect of copying back to front<br><br>My video card (5 rectangles) would be doing "a" while your video cards (10 rectangles) would be doing "b".<br><br>Or could it be a difference between the way Flip is operating in Blitz 2D versus Blitz Plus? (As I am using Blitz 2d.) <br><br></td></tr></table><br>
<a name="242287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NTense</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the flip function is video card dependent...  I've seen this in a couple of my games that use the flip command without clearing a screen..  I've tested on a TNT, NVidia TI 4200, Radeon 9000 Pro, and Radeon Mobility..  ATI definitely handles the Flip routine differently than NVidia. <br><br></td></tr></table><br>
<a name="242294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a Radeon 7000.<br><br>So to be certain we should always use Cls (or another full screen redraw) after Flipping, as you can't be sure the Backbuffer still contains what it contained before OR that it contains what was previously on the Frontbuffer. (In most practical cases you would want to clear the buffer anyway to get proper animation, but I guess it is the theory here that counts.)<br><br>(Or instead of Cls you could of course make sure you redraw the entire buffer in another way, like in typical single-screen 2D game where you redraw a background image each frame.) <br><br></td></tr></table><br>
<a name="242363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> a) Flip has the effect of *interchanging* the contents of back and front <br>b) Flip has the effect of copying back to front <br> <br></div><br><br>FYI - Flip does neither (Unless I've missed something somewhere).  It only changes the REFERENCE to the drawing buffer.  On each screen refresh of the monitor the video card will transfer information to the monitor STARTING at the memory location referenced in either FrontBuffer() or BackBuffer().  No information is ever copied from one buffer to the other.<br>This way, ABSOLUTELY no time is lost transferring any data anywhere.  This is the fastest possible screen update available.<br><br>This phenomenon you are talking about where any data is being moved around doesn't sound correct.  If it is a video card 'feature', it sounds like a stupid one.  Two buffers have to co-exist anyways (to allow you to draw to one while displaying the other) so why bother transferring any data? <br><br></td></tr></table><br>
<a name="242443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well it was only a (bad) theory...<br><br>Just to see if I got it right: using Flip, the *addresses* in FrontBuffer() and BackBuffer() are interchanged? <br><br></td></tr></table><br>
<a name="242466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think it even does that.<br><br>Flip just changes which of the two buffers is used for the display. <br><br></td></tr></table><br>
<a name="242493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> But that would mean that after an odd number of Flips you are drawing to the same buffer that is used for display. <br><br></td></tr></table><br>
<a name="242509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. You ALWAYS draw to backbuffer<br><br>(or whatever is set by SetBuffer command).<br><br>When you 'flip'<br><br>the reference is changed, so the front buffer 'becomes' the backbuffer and vice versa. <br><br></td></tr></table><br>
<a name="242622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, thanks everyone.<br><br>I think it should draw rectangles alternately on each buffer. How it manages to get all 10 on both is a mystery.<br><br>I think the fact it works with Foppy (using Blitz2D) tells me there is a bug somewhere with B+.<br><br>Thanks <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
