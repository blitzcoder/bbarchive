<!DOCTYPE html><html lang="en" ><head ><title >Object Problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Object Problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Object Problem</a><br><br>
<a name="468791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been trying to use "Object" to sort things out, but it isn't working.<br><br>What I've done is I've made a function called "InitLevel." This functions sets up the level and has no errors. But when "InitLevel" calls the function "InitLevelGuns," I recive an error "Entity does not exist."<br><br>I know the problem, but I just don't know how to fix it because this is the first time I've ever needed to use "Object."<br><br>I named all my guns using "EntityName," but I don't know how to utilize this. Please help.<br><br>This is the "InitLevelGuns" function:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function InitLevelGuns()

	;pistol (gun1)
	pistol.weapon = New weapon
	;lazer (gun2)
	lazer.weapon = New weapon
	;dartgun (gun3)
	dartgun.weapon = New weapon
	;XM1014 (gun4)
	rifle.weapon = New weapon
	;HK-MP5
	mp5.weapon = New weapon
	;SAW
	saw.weapon = New weapon
	
	pistol\category = "C90-KL"
	pistol\index = 1
	pistol\offsetx = .60
	pistol\offsety = -.60
	pistol\offsetz = .9
	pistol\entityhandle = LoadMesh("weapons\pistol1\pistol1.x",camera)
	pistol\gotit = False
	pistol\ammo = 16
	pistol\rounds = 10
	pistol\damage = 7
	NameEntity pistol\entityhandle, "pistol"
	
	lazer\category = "LAS-74"
	lazer\index = 2
	lazer\offsetx = .95
	lazer\offsety = -.63
	lazer\offsetz = 1.3
	lazer\entityhandle = LoadMesh("weapons\lazer\lazer.3ds", camera)
	lazer\gotit = False
	lazer\ammo = 100
	lazer\rounds = 50
	lazer\damage = 10
	NameEntity lazer\entityhandle, "lazer"
	
	dartgun\category = "D4-S"dartgun\index = 3
	dartgun\offsetx = .8
	dartgun\offsety = .64
	dartgun\offsetz = 1.8
	dartgun\entityhandle = LoadMesh("weapons\dartgun\dartgun.x", camera)
	dartgun\gotit = False
	dartgun\ammo = 6
	dartgun\rounds = 5
	dartgun\damage = 7
	NameEntity dartgun\entityhandle, "dartgun"
	
	rifle\category = "Benneli XM1014"
	rifle\index = 4
	rifle\offsetx = .60
	rifle\offsety = -.4
	rifle\offsetz = .8
	rifle\entityhandle = LoadMesh("weapons\xm\w_xm1014.3ds", camera)
	rifle\gotit = False
	rifle\ammo = 12
	rifle\rounds = 16
	rifle\damage = 13
	NameEntity rifle\entityhandle, "rifle"
	
	mp5\category = "HK-MP5"
	mp5\index = 5
	mp5\offsetx = .6
	mp5\offsety = -.5
	mp5\offsetz = .6
	mp5\entityhandle = LoadMesh("weapons\raven\w_mp5.3ds", camera)
	mp5\gotit = False
	mp5\ammo = 80
	mp5\rounds = 12
	mp5\damage = 10
	NameEntity mp5\entityhandle, "MP5"
		
	saw\category = "SAW M-2492
	saw\index = 6
	saw\offsetx = .95
	saw\offsety = -.84
	saw\offsetz = 1
	saw\entityhandle = LoadMesh("weapons\saw\saw.3ds", camera)
	saw\gotit = False	
	saw\ammo = 80
	saw\rounds = 24
	saw\damage = 15
	NameEntity saw\entityhandle, "SAW"
	
	;setup
	ScaleEntity pistol\entityhandle, 1, 1, 1
	ScaleEntity lazer\entityhandle, .08, .08, .08
	ScaleEntity rifle\entityhandle, .027, .027, .027
	ScaleEntity mp5\entityhandle, .05, .05, .05
	ScaleEntity saw\entityhandle, .1, .1, .1
	
	TranslateEntity pistol\entityhandle, pistol\offsetx, pistol\offsety, pistol\offsetz
	TranslateEntity lazer\entityhandle, lazer\offsetx, lazer\offsety, lazer\offsetz
	TranslateEntity dartgun\entityhandle, dartgun\offsetx, dartgun\offsety, dartgun\offsetz
	TranslateEntity rifle\entityhandle, rifle\offsetx, rifle\offsety, rifle\offsetz
	TranslateEntity mp5\entityhandle, mp5\offsetx, mp5\offsety, mp5\offsetz
	TranslateEntity saw\entityhandle, saw\offsetx, saw\offsety, saw\offsetz
	
	RotateEntity rifle\entityhandle, 90, 90, 0
	RotateEntity mp5\entityhandle, 90, 90, 0
	RotateEntity saw\entityhandle, 90, 90, 0

	HideEntity rifle\entityhandle
	HideEntity dartgun\entityhandle
	HideEntity lazer\entityhandle
	HideEntity mp5\entityhandle
	HideEntity saw\entityhandle
	
	;hide weapons that we don't have yet
	For w.weapon = Each weapon
		
		If w\gotit = False
			HideEntity w\entityhandle
		EndIf	
	
	Next
	
End Function
</textarea><br><br>Here is "UpdateGun," where the problem is:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function UpdateGun()
	
	If KeyHit(15)
		gun = gun + 1
		If gun &gt;= 7
			gun = 1
		EndIf
	EndIf
	
	If gun = 1
	;	If pistol\gotit = True
			HideEntity pistol\entityhandle ;&lt;--convert this to "Object"
			HideEntity rifle\entityhandle
			HideEntity mp5\entityhandle
			HideEntity dartgun\entityhandle
			HideEntity saw\entityhandle
			ShowEntity pistol\entityhandle
	;	EndIf
	ElseIf gun = 2
	;	If lazer\gotit = True
			HideEntity pistol\entityhandle
			HideEntity rifle\entityhandle
			HideEntity mp5\entityhandle
			HideEntity dartgun\entityhandle
			HideEntity saw\entityhandle
			ShowEntity lazer\entityhandle
	;	EndIf
	ElseIf gun = 3
	;	If dartgun\gotit = True
			HideEntity lazer\entityhandle
			HideEntity rifle\entityhandle
			HideEntity mp5\entityhandle
			HideEntity pistol\entityhandle
			HideEntity saw\entityhandle
			ShowEntity dartgun\entityhandle
	;	EndIf
	ElseIf gun = 4
	;	If rifle\gotit = True
			HideEntity lazer\entityhandle
			HideEntity pistol\entityhandle
			HideEntity mp5\entityhandle
			HideEntity dartgun\entityhandle
			HideEntity saw\entityhandle
			ShowEntity rifle\entityhandle
	;	EndIf
	ElseIf gun = 5
	;	If mp5\gotit = True 
			HideEntity lazer\entityhandle
			HideEntity rifle\entityhandle
			HideEntity pistol\entityhandle
			HideEntity dartgun\entityhandle
			HideEntity saw\entityhandle
			ShowEntity mp5\entityhandle
	;	EndIf
	ElseIf gun = 6
	;	If saw\gotit = True
			HideEntity lazer\entityhandle
			HideEntity rifle\entityhandle
			HideEntity pistol\entityhandle
			HideEntity dartgun\entityhandle
			HideEntity mp5\entityhandle
			ShowEntity saw\entityhandle
	;	EndIf
	EndIf
	
	;Shoot
	;-----
	If gun=1
	If ammo &gt;= 1
	If MouseHit(1)
		PlaySound shoot
		ammo = ammo - 1
		picked=CameraPick(camera, 400, 300)
		p.hole = New hole
		p\entityhandle = CopyEntity(bullethole)
		p\alpha = 0.9
		p\typething = "pistol"
		PositionEntity p\entityhandle, PickedX(), PickedY(), PickedZ()
		CreateSomeParticles(PickedX(), PickedY(), PickedZ(), 100, 100, 100, 6)
	EndIf
	EndIf
	EndIf
	
	If gun=2
	If ammo &gt;= 1
	If MouseHit(1)
		PlaySound shoot
		ammo = ammo - 1
		picked=CameraPick(camera, 400, 285)
		For i = 1 To 4
		l.laserhole = New laserhole
		l\entityhandle = CopyEntity(laserspark)
		l\alpha = 0.9
		l\typething = "laser"
		PositionEntity l\entityhandle, PickedX(), PickedY(), PickedZ()
		Next
	EndIf
	EndIf
	EndIf
	
	If gun=4
	If ammo &gt;= 1
	If MouseHit(1)
		PlaySound shoot
		ammo = ammo - 1
		For i = 1 To 5
			picked=CameraPick(camera, Rnd(390,410), Rnd(275, 295))
			s.hole = New hole
			s\entityhandle = CopyEntity(bullethole)
			s\alpha = 0.9
			s\typething = "shotgun"
			PositionEntity s\entityhandle, PickedX(), PickedY(), PickedZ()
			CreateSomeParticles(PickedX(), PickedY(), PickedZ(), 100, 100, 100, 6)
		Next
	EndIf
	EndIf
	EndIf
	
	If gun=5
	If ammo &gt;= 1
	If MouseDown(1)
	If MilliSecs() &gt; mp5timer + 160
		PlaySound shoot
		ammo = ammo - 1
		picked=CameraPick(camera, Rnd(390,410), Rnd(275, 295))
		m.hole = New hole
		m\entityhandle = CopyEntity(bullethole)
		m\alpha = 0.9
		m\typething = "mp5"
		PositionEntity m\entityhandle, PickedX(), PickedY(), PickedZ()
		CreateSomeParticles(PickedX(), PickedY(), PickedZ(), 100, 100, 100, 6)
		mp5timer = MilliSecs()
	EndIf 
	EndIf
	EndIf
	EndIf
	
	If gun=6
	If ammo &gt;= 1
	If MouseDown(1)
	If MilliSecs() &gt; sawtimer + 84
		PlaySound shoot
		ammo = ammo - 1
		picked=CameraPick(camera, Rnd(390,410), Rnd(275, 295))
		w.hole = New hole
		w\entityhandle = CopyEntity(bullethole)
		w\alpha = 0.9
		w\typething = "saw"
		PositionEntity w\entityhandle, PickedX(), PickedY(), PickedZ()
		CreateSomeParticles(PickedX(), PickedY(), PickedZ(), 100, 100, 100, 6)
		mp5timer = MilliSecs()
	EndIf 
	EndIf
	EndIf
	EndIf
	
	For b.hole = Each hole
		EntityAlpha b\entityhandle, b\alpha
		b\alpha = b\alpha-0.02
		If b\alpha &lt;= 0
		FreeEntity b\entityhandle
		Delete b
		EndIf
	Next
	
	For k.laserhole = Each laserhole
		EntityAlpha k\entityhandle, k\alpha
		k\alpha = k\alpha-.1
		If k\alpha &lt;= 0
		FreeEntity k\entityhandle
		Delete k
		EndIf
	Next 
	

End Function 
</textarea><br><br>The problem is where you switch guns - where all the "HideEntity"'s and "ShowEntity"'s are.<br><br>I need to convert those Hide and ShowEntities to Object, but I don't know how.<br><br>(Sorry this is such a long post - I hope I've made it thorough enough :P) <br><br></td></tr></table><br>
<a name="468880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it a problem with Globals? <br><br></td></tr></table><br>
<a name="469370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JKP</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Posting the same topic in two forums is a bad idea:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=41777" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=41777</a> <br><br></td></tr></table><br>
<a name="470187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I posted here, waited a while, and didn't get an answer. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
