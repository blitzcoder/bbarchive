<!DOCTYPE html><html lang="en" ><head ><title >Need help with types</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Need help with types</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Need help with types</a><br><br>
<a name="327297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chi3f Stadi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>i got stuck in a type problem. It would be great if somebody can help.<br><br>Description:<br>I create some NPC's (Bot's) and some of the NPC's get a Type called Effect assigned during Gameplay.<br><br>But i'm not sure if i did it correctly. The type Effect is an child of the type NPC. And there can be more than one Effect types for a NPC.<br><br>I think this part should be ok ! Some lines are ommited ...<br>Type NPC<br>	Field entity<br>	Field model<br>	...<br>	Field his_effect.Effect<br>End Type<br><br>Type Effect<br>	Field entity<br>	Field model<br>	...<br>End Type<br><br>...<br><br>Function CreateBot()<br>	this.NPC = New NPC<br>	this\model = CopyEntity(..<br>	...<br>End Function<br><br>Function CreateEffect(this.NPC)<br>	If this&lt;&gt;Null<br>		For i = 1 To 6<br>			this.NPC\his_effect.Effect = New Effect<br>			this.NPC\his_effect\entity = CopyEntity(sprite)<br>			...<br>		Next<br>	End If<br>End Function<br><br>And here is where i got stuck.<br>Function UpdateNPC()<br>	For this.NPC = Each NPC<br>		If this\his_effect &lt;&gt; Null<br>			ScaleSprite this\his_effect\entity,0.1,0.1<br>			TurnEntity this\his_effect\entity2,90,0,0<br>			...<br>		Next<br>	Next<br>End Function<br><br>With this method i can just iterating through the first type Effect in type NPC but not though all, so:<br>- How can i iterate though all of them.<br><br>I tried also this\his_effect = After this\his_effect but this goes to the next NPC handle.<br><br>best rgds<br>Karel <br><br></td></tr></table><br>
<a name="327332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>With this method i can just iterating through the first type Effect in type NPC but not though all, so: <br>- How can i iterate though all of them. <br> <br></div><br><br>The effect type structure can be looped as any other type structure, so if you want to go through all the effects, you just need:<br><br><pre class=code>
for temp.effect = each effect
.
.
next
</pre><br><br>Anyway, I would do this in a slight different manner.<br><br>Since type collections can't be located in different sections, that is, each type element will belong to the same element collection, I would add in the NPC type structure an ID field.<br><br>The same ID field should be added in the effect type structure, and set it to the NPC one used to create the effect for.<br><br>In other words:<br>[CODE]<br>type t_npc<br>field NPC_ID<br>.<br>.<br>end type<br><br>type t_effect<br>field NPC_ID<br>.<br>.<br>end type<br><br>NPC.t_npc = new t_npc<br>npc\npc_id = NPC ;here is where the id is set<br>.<br>.<br>;let's add an effect fot the just created npc<br>effect.t_effect = new t_effect<br><br>;let's assign the same npc id to the effect<br>effect\NPC_ID = NPC<br>.<br>.<br><br><br>;Now, if you want to go through all the effect that belong to an NPC:<br><br>for npc.t_npc = each t_npc ;go through all NPC<br>for effect.t_effect = each t_effect ;go through all effects<br>if effect\NPC_ID = npc\NPC_ID then ;peek only the ones that belong to the current NPC<br>;...and do something here<br>endif<br>next<br>next<br>[/CODE]<br><br>Hope this has sense for you,<br>Sergio. <br><br></td></tr></table><br>
<a name="327334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chi3f Stadi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks semar. Thats my point !<br><br>Imagine, if the Bot get's killed, the effect is still iterated if i do it like you suggested. This would look very strange.<br><br>I want to iterate all effects from the parent NPC. How do i solve that. <br><br></td></tr></table><br>
<a name="327338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've edited my previous post, and added some other concept.<br>It may help.. <br><br></td></tr></table><br>
<a name="327342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> As already said, when you destroy a bot, before you perform the delete command on the npc, then delete all the associated effects:<br><pre class=code>
delete_effect_that_belong_to_this_npc_ID(NPC_ID)
delete NPC
.
.
function delete_effect_that_belong_to_this_npc_ID(NPC_ID)
for effect.t_effect = each t_effect
if effect\NPC_ID = NPC_ID then
delete effect
endif
next
end function
</pre><br><br>Did it help ?<br><br>Sergio. <br><br></td></tr></table><br>
<a name="327345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chi3f Stadi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you semar. That's another solution which i considered in the beginning. But it's not answering my question. Sorry.<br><br>What i don't like is that i always have to remember that a NPC may has an effect while deleting !<br><br>delete_effect_that_belong_to_this_npc_ID(NPC_ID)<br><br>May it has also another type associated. So i have to keep all those things in mind which doesn't make me very happy.<br><br>It would be nice to just delete the parent and this is deleting all dependend types as well. This is working with the codesnippet on the top.<br><br>My problem is still how to iterate through all the "child" types ?<br><br>rgds<br>Karel <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
