<!DOCTYPE html><html lang="en" ><head ><title >Working with Collisions and Meshes</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Working with Collisions and Meshes</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Working with Collisions and Meshes</a><br><br>
<a name="337846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StOrM3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you use functions like nameentity and collisions etc.. and pass them the handle of the actual mesh inside the type you are using, that you loaded out of a b3d file, should I be using the overall entity instance, or do I use the mesh handle just like any other entity, the reason I ask, is I have a wierd Memory Violation error, after using collision stuff, and setting like collision radius, and fitmesh etc..  I think it is the functions I am using on the mesh to name it, and obtain info about it, like the collision type etc.. may need to be used on the actual entity itself instead of the mesh handle.<br><br>Can someone please help me, I am down to writing debug info out to a debug.txt file, and have limited the crash to one function which is rather large, but if need be I can paste it for review.  Please help, as I don't really want to do a complete rewrite of this function, but I will if necessary, it may actually come out better the 2nd time.<br><br>Ken <br><br></td></tr></table><br>
<a name="337854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmmm....<br><br>I got a bit lost reading that, but I hope this helps:<br><br>If in a type, you have a field which coresponds to a mesh handle i.e. MyType\mesh=LoadMesh("Mesh.B3D") or MyType\mesh=CopyEntity (Master_Mesh) then MyType\mesh acts like any ordinary mesh handle. Are you sure you have copied or loaded the mesh as a type instance? Have you deleted the instance? Also, some collision commands work with handles, others work with occurrences of collisions or entity 'types' so check you've got the syntax of these right too. Perhaps sticking DebugMode on and checking the actual error line may be helpful. <br><br></td></tr></table><br>
<a name="337962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StOrM3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have helped more than you know, so I can put in my main sourcefile Debugmode on or is it Debugmode=on or what, and this will break execution on the error and point to the line with the problem ?  That is great.. here I was trying to use writestring to track the bug down, and write values out to a text file.  Thank you very very much.<br><br>Ken <br><br></td></tr></table><br>
<a name="338226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could try and see if the mesh handle your using is Global. I know are Global, but type pointers,<br><br><pre class=code>
p.pointer=new pointer
</pre><br><br>are not unless you<br><br><pre class=code>
Global p.pointer=new pointer
</pre><br><br>Maybe this is your problem? Maybe your freeing the handle in the function or main program and using the other handle to try and access the entity, which doesn't work :) <br><br></td></tr></table><br>
<a name="338258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> To use debug mode, run your program using the standard Blitz editor and make sure the 'Debug enabled?' item is ticked in the 'Program' menubar menu. <br><br></td></tr></table><br>
<a name="338261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>To use debug mode, run your program using the standard Blitz editor and make sure the 'Debug enabled?' item is ticked in the 'Program' menubar menu. <br> <br></div><br>So when an error occurs, it will give you more detailed info about what the error is (i.e. 'Object Muyst Be A Type') and as this exits back to the IDE, the cursor will be at the line containing the error ;) <br><br></td></tr></table><br>
<a name="338262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StOrM3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got the memory bug fixed.  Now the collisions won't work when I took out the fitmesh line though, the scaling is not working as expected and as such some of the fruit items are falling through the level, but it was working using fitmesh, but then I had an extra ghost item that was displayed in the middle of the level, but after that item it correctly placed all the other fruit in rows and columns offset correctly and everything.  I don't know the collision stuff is too tough to get working correctly under blitz, and the scaling stuff doesn't work right either, either with entity or mesh, but fitmesh somewhat works.  I may need someone to look at it.<br><br>Ken <br><br></td></tr></table><br>
<a name="338267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StOrM3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> does anyone have a simple example showing how to load two models out of B3D files, scale them larger, and demonstrate checking for collisions etc.. ?  I think this would greatly help me understand which functions to use, and help to drive the way blitz handles scaling and collision home.<br><br>Thanks for all your help guys.<br><br>Ken <br><br></td></tr></table><br>
<a name="338273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some points to remember:<br><br>Collision source/destination - don't forget the MOVING entity must be the Source (*hope that's the right way round!)<br><br>Scaling and collisions - ScaleEntity won't affect 'EntityRadius', Either use ScaleMesh (I think) or set the radii AFTER scaling.<br><br>Sorry, StOrM3, but I don't have much experience with the Collisions and scaling to help much more...<br><br>Why not post the relevant sections of your code regarding the meshes/collisions? ;) <br><br></td></tr></table><br>
<a name="338317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StOrM3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If count% = 1 Then<br>    fruitarray(count%)\fmodel% = LoadMesh("../media/cherry.b3d")  ;Load initial model from b3d file.<br>	meshx# = EntityX(fruitarray(count%)\fmodel%,True)  ;get initial x,y,z coords for model.<br>	meshy# = EntityY(fruitarray(count%)\fmodel%,True)<br>	meshz# = EntityZ(fruitarray(count%)\fmodel%,True)<br>	RotateMesh(fruitarray(count%)\fmodel%,60,30,0)  ;  Rotate the mesh after loading it.<br>	FitMesh(fruitarray(count%)\fmodel%, meshx#, meshy#, meshz#, 20.0, 20.0, 20.0, True)  ;stuff it in a box<br>	EntityRadius(fruitarray(count%)\fmodel%,20.0)  ;  setting the entities collision radius to 20.<br>	fruitarray(count%)\number% = count%<br>	fruitarray(count%)\name$ = "cherry"<br>	NameEntity fruitarray(count%)\fmodel%, "cherry"  ;entityname for use in collision and points etc..<br>  EndIf<br><br>Here is how one of the fruit models is setup.. with the fitmesh it works... though I still get a ghost fruit item.. for some reason.. I have 7 models in total setup inside a for loop. <br><br></td></tr></table><br>
<a name="338513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StOrM3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I post some code, and ask for help, and this is when I get no replies...  Can someone please help, I will post the full source code level I am working with right now.. I am seriously considering starting over from scratch on a couple of the functions, because something is clearly not doing what I think it should be, meaning it is a logic error and those are the hardest ones to find.  On the next post I am posting the source code, there are three files, tstlvl.bb which is the main game test file containing all the setup, main loop.  Then there is the types.bb which contains all of my custom types I am using.  Finally there is the functions.bb which contains the meat and potatoes functions for all of it, the random fruit generation positions x,z coords, and the Y dropping routine to set the y coord when the current fruit item in the loop collides with the level.  I will email them as well as any media including textures, models so you can test it fully and see what I am seeing, and then you can help to figure out where the ghost item is coming from, and why the collision is not working.<br><br>I don't mean to sound mean, but I am very tired, and have looked through and changed this source code like over 200 times now, and still am unable to get the affects I need.  Can someone please, please help me.  My head is hurting, if I had not tried rewriting it and changing it so many times already, and if the functions didn't seem logical to me, I would not be begging for help, but I am at my ropes end.  I need someone to throw me a life preserver or life saver which ever you have available.  heeheh that is about as much joking as I can make about this.  Sorry, but I am starting to lose faith in Blitz3D and my own coding ability even though I have written 5 full games previously in the past, but am unable to make this simple game work as envisioned or designed.<br><br>my email for anyone interested in getting the full source and models email me at storm3@..., also I am posting just the source files here for review as well.<br><br>Ken <br><br></td></tr></table><br>
<a name="338518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StOrM3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;************************************************<br>;FILENAME:types.bb<br>;PURPOSE:define all my custom types used in game.<br>;************************************************<br>Type player<br>  Field pmodel%  ;  Player Model starts off as a bubble, when we hit an item, we copymesh that fruit model to this one changing player to new fruit items.<br>  Field controller%  ;  What are we controlled by ?  1=Keyboard, 2=Mouse, 3=Joystick.  This will be one value setup from options menu.<br>  Field locx#  ;  These are the locations that we are currently located at x,y,z values...<br>  Field locy#<br>  Field locz#<br>  Field roty#  ;  Current direction we are facing!  NOTE: 90degree increments, 0, 90, 180, 270<br>  Field direction%<br>  Field speed#  ; speed controls how far we move with each move, how fast we get from point a to point b.<br>  Field special%  ; special = 0 = none = 1 = speedup = 2 = acid = 3 =  bomb = 4 = dynamite<br>  Field fruit%  ; number of fruit we currently are... 1=cherry  2=strawberry  3=orange  4=pear  5=apple  6=pineapple  7=banana<br>  Field points%  ;  Current score for player!<br>  Field lives%  ;  How many lives do we have left ?  Start off with 3 lives only!  May add a point value 1up goal to reach.  50000 points = 1up<br>  Field dead%  ; 1=yes we are dead, so sit and watch the main bubble bounce up and down<br>End Type<br><br>Type fruit<br>  Field fModel%<br>  Field number%<br>  Field name$<br>End Type <br><br>Type level<br>  Field levfloor%  ; floor model of level<br>  Field levtwall%  ;  top wall model of level<br>  Field levbwall% ;  botton wall model of level<br>  Field levlwall%  ;  left wall model of level<br>  Field levrwall%  ;  right wall model of level<br>  Field timelimit%  ;  how long do we have before losing a life or the game on this level ?<br>  Field number%  ;  what level are we on ?<br>  Field name$  ;  what is the name of this level called ?<br>End Type<br><br>Type fruititems<br>   Field points%<br>   Field number%<br>   Field Model%<br>   Field name$<br>   Field locx#<br>   Field locy#<br>   Field locz#<br>   Field dead%<br>   Field special%  ;  1 if special or 0 if just fruit.<br>   Field specnum%  ; used to track what kind of special item it is, 0 if just fruit.<br>   Field visible%  ; are we gonna draw it or not ?<br>End Type<br><br>Type special<br>  Field points%<br>  Field number%<br>  Field name$<br>  Field special%<br>  Field timelimit%<br>  Field dead%<br>  Field lives%<br>  Field area%  ; how big of area will be affected by this object ?  1 = just player bubble, more=other fruit or boxes etc..  also take into account direction<br>End Type<br><br>;************************************************<br>; lvltest.bb - written by: Ken Cornett (ceo) Pain Killa Entertainment(tm)<br>; Copyright(c) 2004 - All rights reserved.<br>; Purpose: Load in and test simple level display and cameras and lighting.<br>;  for useage of variables listed below see types.bb file as these variables are used in the types.bb file and functions are in functions.bb<br><br>Dim fruitarray.fruit(7)  ;used to hold loaded fruit items models..<br>;Dim specialarray.special(5)  ;used to hold loaded specialty items models..<br>Dim fruitlevel.fruititems(6,6)  ;  used to hold randomly placed fruit or special items...<br>Dim testlevel.level(1)  ; used to test engine out merely, later it will be an array of all levels loaded one after the other stored in array for later use...<br>Dim playerone.player(1) ;  used to setup the player we control in the game!<br><br>Global cntfruit%<br>Global cntx%<br>Global cntz%<br>Global dispmouse$<br>Global flagme%<br>Global colflag%<br>Global xspeed#<br>Global yspeed#<br>Global x#<br>Global y#<br>Global debugfile%<br><br>flagme% = 1<br>colflag% = 0<br><br>debugfile% = OpenFile("../debug/debug.txt")<br><br>For cntfruit% = 1 To 7<br>  fruitarray.fruit(cntfruit%) = New fruit<br>Next <br>;specialarray.special(5) = New special<br>For cntz% = 1 To 6<br>  For cntx% = 1 To 6<br>    fruitlevel.fruititems(cntx%,cntz%) = New fruititems<br>  Next<br>Next<br><br>testlevel.level(1) = New level<br>playerone.player(1) = New player<br><br>Include "types.bb"<br>Include "functions.bb"<br><br>Graphics3D 800,600,16,0<br><br>GameSetup()  ; lets setup the various stuff needed like a camera, light, backbuffer!<br><br>loadlevel("../media/floor.b3d","../media/twall.b3d","../media/bwall.b3d","../media/lwall.b3d","../media/rwall.b3d")  ; loading in 5 parts of level layout separetly for collide stuff.<br><br>positionlevel()  ;  Offset the loaded level to 0,0,0 so we have a starting place for the camera.<br><br>If setupfruit() = -1  ;  Load the initial fruit models from the b3d files stored in media folder...<br>  WriteString(debugfile%,"Setup Fruit Return = -1")<br>Else<br>  WriteString(debugfile%,"Setup Fruit Return = 0")<br>EndIf<br>  <br>setupfruitarray(6)  ;  Create a 6x6 array of randomized fruit items for the level to be displayed...<br><br>setupplayer(2,175.0,2.0,75.0,3,0,50.0)  ;  cntrlr, x, y, z, lives, direction, speed.<br><br>;*******************************************************************************************************************************************************************************************<br>; ; no more memory leak.  Now have To figure out where the fruit are positioned on the screen And why I can't see them, maybe turn off EntityAlpha Function use.<br>; fruit are positioned perfecto now, and rotated to make them easy to see, scaled as well.  !! MILESTONE REACHED !!<br>; ** NEXT MILESTONE **<br>; Mouse routines are in, displaying mouse coords to help setup fruit positioning and the player position as you move the mouse...<br>;  Now I need to get the fruit centered in the level again.<br>;  Memory allocation error.  Adding general purpose debug routines, which write out results to debug.txt file for further study.<br>;*******************************************************************************************************************************************************************************************<br><br><br>; the previous two includes allow us the types and functions we need to load in a test level for our game!<br>While Not KeyDown (1)	; now entering main loop<br>   <br>  RenderWorld	; setup everything that is to be displayed render it fully with textures and lights...<br>  doinput()  ;  process player input, hopefully!<br>  Flip	; have to use this because we are drawing to the backbuffer so the drawing won't be seen during game play...<br>Wend<br>CloseFile(debugfile%)  ;  Close file used for debug output earlier...<br>;  clean up code!<br>Delete Each fruit<br>;Delete Each special<br>Delete Each fruititems<br>Delete Each level<br>Delete Each player<br><br>;************************************************<br>;FILENAME:functions.bb<br>;PURPOSE:define all my functions used in game.<br>;************************************************<br>;  Written By: Ken Cornett CEO - Pain Killa Entertainment(tm)  - Copyright(c) 2004 - All Rights Reserved.<br>Global countx%<br>Global countz%<br><br>; Provides all the game setup features such as the cameras and lighting and backbuffer setup etc...<br>Function GameSetup()<br>  ; tell it to use backbuffer for all drawing operations until we flip it in main loop<br>  SetBuffer BackBuffer()<br>  ; got to have one of these so we can see the world we create.<br>  camera = CreateCamera()<br>  ; now placing the camera where we want it for the scene...<br>  MoveEntity camera,0,400,-5<br>  RotateEntity camera,90,0,0<br>  ; every scene must have even simple lighting...<br>  light = CreateLight()<br>End Function<br><br>;  This loads the level geometry from a b3d file into the testlevel variable.<br>;  loadlevel("../media/floor.b3d","../media/twall.b3d","../media/bwall.b3d","../media/lwall.b3d","../media/rwall.b3d")<br>Function loadlevel%(filename1$, filename2$, filename3$, filename4$, filename5$)<br>  ;  placeholder<br><br>  ;  EntityBox entity,x#,y#,z#,width#,height#,depth#  Use this to setup the various bounding boxes.<br>  ;  Use MeshHeight, MeshWidth, MeshDepth to get values for each level piece to use in the entitybox setup stuff.<br>  ;  May have to center each piece in milkshape, so when I call these values we get correct values for box size so it is only size of each piece.<br>  ;  I need to get the width and depth of floor to help position the other cube pieces.  Worse case scenario use cube objects created in blitz.<br>  testlevel(1)\levfloor% = LoadMesh(filename1$)<br>  testlevel(1)\levtwall% = LoadMesh(filename2$)<br>  testlevel(1)\levbwall% = LoadMesh(filename3$)<br>  testlevel(1)\levlwall% = LoadMesh(filename4$)<br>  testlevel(1)\levrwall% = LoadMesh(filename5$)<br>  EntityType(testlevel(1)\levfloor%,8,True)  ; set this entitytype to 8 for collision checking in the setup_y function described later.<br>  EntityType(testlevel(1)\levtwall%,8,True)  ; set this entitytype to 8 for collision checking in the setup_y function described later.<br>  EntityType(testlevel(1)\levbwall%,8,True)  ; set this entitytype to 8 for collision checking in the setup_y function described later.<br>  EntityType(testlevel(1)\levlwall%,8,True)  ; set this entitytype to 8 for collision checking in the setup_y function described later.<br>  EntityType(testlevel(1)\levrwall%,8,True)  ; set this entitytype to 8 for collision checking in the setup_y function described later.<br>  testlevel(1)\number% = 1<br>  testlevel(1)\timelimit% = 300  ;  5 minutes = 60 * 5<br>  testlevel(1)\name$ = "test"<br>  NameEntity testlevel(1)\levfloor%, testlevel(1)\name$<br>  <br>  Return -1<br>End Function<br><br>;  This is to move the level geometry to absolute center 0,0,0 so that when we drop the fruit it lands on the level correctly positioned right...<br>Function positionlevel%()<br>  ; This function is for moving the level model into place, so that when we setup the fruit positions, and drop the Y coords it will be where it is supposed to be...<br>  MoveEntity testlevel(1)\levfloor%,0,0,0<br>  MoveEntity testlevel(1)\levtwall%,0,0,0<br>  MoveEntity testlevel(1)\levbwall%,0,0,0<br>  MoveEntity testlevel(1)\levlwall%,0,0,0<br>  MoveEntity testlevel(1)\levrwall%,0,0,0<br>  Return -1<br>End Function<br><br>;  Loads the fruit models out of b3d files from hard drive into the fruitarray variable.<br>;  Function updated 03_09_04 - Build 030904-a<br>;  Created Fruit models, got initial x,y,z coords, rotate it, fit it into a 15x15x15 Bound Box<br>;  Also set the entityName to whatever fruit it is.<br>Function setupfruit%()<br><br>  Local count% = 1<br>  Local meshx# = 0.0<br>  Local meshy# = 0.0<br>  Local meshz# = 0.0<br>  Local sizex# = 0.0<br>  Local sizey# = 0.0<br>  Local sizez# = 0.0<br>  Local avg# = 0.0<br>  <br>  For count% = 1 To 7<br>  If count% = 1 Then<br>    fruitarray(count%)\fmodel% = LoadMesh("../media/cherry.b3d")  ;Load initial model from b3d file.<br>	meshx# = EntityX(fruitarray(count%)\fmodel%,True)  ;get initial x,y,z coords for model.<br>	meshy# = EntityY(fruitarray(count%)\fmodel%,True)<br>	meshz# = EntityZ(fruitarray(count%)\fmodel%,True)<br>	RotateMesh(fruitarray(count%)\fmodel%,60,30,0)  ;  Rotate the mesh after loading it.<br>	;FitMesh(fruitarray(count%)\fmodel%, meshx#, meshy#, meshz#, 20.0, 20.0, 20.0, True)  ;stuff it in a box<br>	ScaleMesh(fruitarray(count%)\fmodel%,3,3,3)<br><br>	sizex# = MeshWidth(fruitarray(count%)\fmodel%)<br>	sizey# = MeshHeight(fruitarray(count%)\fmodel%)<br>	sizez# = MeshDepth(fruitarray(count%)\fmodel%)<br><br>	avg# = sizex# + sizey# + sizez# / 3<br>	<br>	EntityRadius(fruitarray(count%)\fmodel%,avg# + 10.0)  ;  setting the entities collision radius to 20.<br>	fruitarray(count%)\number% = count%<br>	fruitarray(count%)\name$ = "cherry"<br>	NameEntity fruitarray(count%)\fmodel%, "cherry"  ;entityname for use in collision and points etc..<br>  EndIf<br><br>  If count% = 2 Then<br>    fruitarray(count%)\fmodel% = LoadMesh("../media/strawberry.b3d")<br>	meshx# = EntityX(fruitarray(count%)\fmodel%,True)<br>	meshy# = EntityY(fruitarray(count%)\fmodel%,True)<br>	meshz# = EntityZ(fruitarray(count%)\fmodel%,True)<br>	RotateMesh(fruitarray(count%)\fmodel%,60,30,0)  ;  Rotate the mesh after loading it.<br>	;FitMesh(fruitarray(count%)\fmodel%, meshx#, meshy#, meshz#, 20.0, 20.0, 20.0, True)<br>	ScaleMesh(fruitarray(count%)\fmodel%,3,3,3)<br>	<br>	sizex# = MeshWidth(fruitarray(count%)\fmodel%)<br>	sizey# = MeshHeight(fruitarray(count%)\fmodel%)<br>	sizez# = MeshDepth(fruitarray(count%)\fmodel%)<br><br>	avg# = sizex# + sizey# + sizez# / 3<br>	<br>	EntityRadius(fruitarray(count%)\fmodel%,avg# + 10.0)  ;  setting the entities collision radius to 20.<br>	fruitarray(count%)\number% = count%<br>	fruitarray(count%)\name$ = "strawberry"<br>	NameEntity fruitarray(count%)\fmodel%, "strawberry"<br>  EndIf<br>  <br>  If count% = 3 Then<br>    fruitarray(count%)\fmodel% = LoadMesh("../media/orange.b3d")<br>	meshx# = EntityX(fruitarray(count%)\fmodel%,True)<br>	meshy# = EntityY(fruitarray(count%)\fmodel%,True)<br>	meshz# = EntityZ(fruitarray(count%)\fmodel%,True)<br>	RotateMesh(fruitarray(count%)\fmodel%,60,30,0)  ;  Rotate the mesh after loading it.<br>	;FitMesh(fruitarray(count%)\fmodel%, meshx#, meshy#, meshz#, 20.0, 20.0, 20.0, True)<br>	ScaleMesh(fruitarray(count%)\fmodel%,3,3,3)<br>	<br>	sizex# = MeshWidth(fruitarray(count%)\fmodel%)<br>	sizey# = MeshHeight(fruitarray(count%)\fmodel%)<br>	sizez# = MeshDepth(fruitarray(count%)\fmodel%)<br><br>	avg# = sizex# + sizey# + sizez# / 3<br>	<br>	EntityRadius(fruitarray(count%)\fmodel%,avg# + 10.0)  ;  setting the entities collision radius to 20.<br>	fruitarray(count%)\number% = count%<br>	fruitarray(count%)\name$ = "orange"<br>	NameEntity fruitarray(count%)\fmodel%, "orange"<br>  EndIf<br>  <br>  If count% = 4 Then<br>    fruitarray(count%)\fmodel% = LoadMesh("../media/pear.b3d")<br>	meshx# = EntityX(fruitarray(count%)\fmodel%,True)<br>	meshy# = EntityY(fruitarray(count%)\fmodel%,True)<br>	meshz# = EntityZ(fruitarray(count%)\fmodel%,True)<br>	RotateMesh(fruitarray(count%)\fmodel%,60,30,0)  ;  Rotate the mesh after loading it.<br>	;FitMesh(fruitarray(count%)\fmodel%, meshx#, meshy#, meshz#, 20.0, 20.0, 20.0, True)<br>	ScaleMesh(fruitarray(count%)\fmodel%,3,3,3)<br>	<br>	sizex# = MeshWidth(fruitarray(count%)\fmodel%)<br>	sizey# = MeshHeight(fruitarray(count%)\fmodel%)<br>	sizez# = MeshDepth(fruitarray(count%)\fmodel%)<br><br>	avg# = sizex# + sizey# + sizez# / 3<br>	<br>	EntityRadius(fruitarray(count%)\fmodel%,avg# + 10.0)  ;  setting the entities collision radius to 20.<br>	fruitarray(count%)\number% = count%<br>	fruitarray(count%)\name$ = "pear"<br>	NameEntity fruitarray(count%)\fmodel%, "pear"<br>  EndIf<br>  <br>  If count% = 5 Then<br>    fruitarray(count%)\fmodel% = LoadMesh("../media/apple.b3d")<br>	meshx# = EntityX(fruitarray(count%)\fmodel%,True)<br>	meshy# = EntityY(fruitarray(count%)\fmodel%,True)<br>	meshz# = EntityZ(fruitarray(count%)\fmodel%,True)<br>	RotateMesh(fruitarray(count%)\fmodel%,60,30,0)  ;  Rotate the mesh after loading it.<br>	;FitMesh(fruitarray(count%)\fmodel%, meshx#, meshy#, meshz#, 20.0, 20.0, 20.0, True)<br>	ScaleMesh(fruitarray(count%)\fmodel%,3,3,3)<br>	<br>	sizex# = MeshWidth(fruitarray(count%)\fmodel%)<br>	sizey# = MeshHeight(fruitarray(count%)\fmodel%)<br>	sizez# = MeshDepth(fruitarray(count%)\fmodel%)<br><br>	avg# = sizex# + sizey# + sizez# / 3<br>	<br>	EntityRadius(fruitarray(count%)\fmodel%,avg# + 10.0)  ;  setting the entities collision radius to 20.<br>	fruitarray(count%)\number% = count%<br>	fruitarray(count%)\name$ = "apple"<br>	NameEntity fruitarray(count%)\fmodel%, "apple"<br>  EndIf<br>  <br>  If count% = 6 Then<br>    fruitarray(count%)\fmodel% = LoadMesh("../media/pineapple.b3d")<br>	meshx# = EntityX(fruitarray(count%)\fmodel%,True)<br>	meshy# = EntityY(fruitarray(count%)\fmodel%,True)<br>	meshz# = EntityZ(fruitarray(count%)\fmodel%,True)<br>	RotateMesh(fruitarray(count%)\fmodel%,60,30,0)  ;  Rotate the mesh after loading it.<br>	;FitMesh(fruitarray(count%)\fmodel%, meshx#, meshy#, meshz#, 20.0, 20.0, 20.0, True)<br>	ScaleMesh(fruitarray(count%)\fmodel%,3,3,3)<br>	<br>	sizex# = MeshWidth(fruitarray(count%)\fmodel%)<br>	sizey# = MeshHeight(fruitarray(count%)\fmodel%)<br>	sizez# = MeshDepth(fruitarray(count%)\fmodel%)<br><br>	avg# = sizex# + sizey# + sizez# / 3<br>	<br>	EntityRadius(fruitarray(count%)\fmodel%,avg# + 10.0)  ;  setting the entities collision radius to 20.<br>	fruitarray(count%)\number% = count%<br>	fruitarray(count%)\name$ = "pineapple"<br>	NameEntity fruitarray(count%)\fmodel%, "pineapple"<br>  EndIf<br>  <br>  If count% = 7 Then<br>    fruitarray(count%)\fmodel% = LoadMesh("../media/banana.b3d")<br>	meshx# = EntityX(fruitarray(count%)\fmodel%,True)<br>	meshy# = EntityY(fruitarray(count%)\fmodel%,True)<br>	meshz# = EntityZ(fruitarray(count%)\fmodel%,True)<br>	RotateMesh(fruitarray(count%)\fmodel%,60,30,0)  ;  Rotate the mesh after loading it.<br>	;FitMesh(fruitarray(count%)\fmodel%, meshx#, meshy#, meshz#, 20.0, 20.0, 20.0, True)<br>	ScaleMesh(fruitarray(count%)\fmodel%,3,3,3)<br>	<br>	sizex# = MeshWidth(fruitarray(count%)\fmodel%)<br>	sizey# = MeshHeight(fruitarray(count%)\fmodel%)<br>	sizez# = MeshDepth(fruitarray(count%)\fmodel%)<br><br>	avg# = sizex# + sizey# + sizez# / 3<br>	<br>	EntityRadius(fruitarray(count%)\fmodel%,avg# + 10.0)  ;  setting the entities collision radius to 20.<br>	fruitarray(count%)\number% = count%<br>	fruitarray(count%)\name$ = "banana"<br>	NameEntity fruitarray(count%)\fmodel%, "banana"<br>	Return -1<br>  EndIf<br>  Next<br>End Function<br><br>;  This sets up the type of fruit at each array position that makes up the level.  Also setup the positions, point values, whether it is fruit or special item or not...<br>;  This is the master array which holds the model handles for either fruit or special items both, and positions etc..  So an external special array is not necessary..<br>;  One draw routine needed only because of this methodology.  The setupspecial function loads in the special items models and stores that info in one location,<br>;  which is copied from that array and also the setupfruit function stores the model and other info for the fruit models in one location, and this function brings both<br>;  the two seperate arrays together into a two dimensional array for the map layout.  This function will need to be called once for each new level loaded.<br>Function setupfruitarray%(levelsize%)<br>  Local highval%=0  ;  used for determing random point values, also used with lowval to make a decision if it is special item or just fruit. <br>  Local lowval%=0<br>  ;  Logic is this, if the lowvalue ends up being less than the high value then this is a piece of fruit, else we are a specialty item..<br>  Local seedvalue%=0<br>  Local fruitxyz$<br>  countx% = 1<br>  countz% = 1<br> <br>  seedvalue% = MilliSecs()  ;  We want truely random numbers so we seed the random values with the realtime clock value...<br>  SeedRnd seedvalue%<br>  <br>  ;  this function sets up the large array of fruit that makes up the level items including special items...<br>  ;  We want truely random numbers so we seed the random values with the realtime clock value...<br>  For countz% = 1 To levelsize%<br>    For countx% = 1 To levelsize%<br>        lowval% = Rand(1,10)  ;  Get a random number between 1 and 10 to use as a low value for comparison later on for fruit or special item!<br>        highval% = Rand(1,10)  ;  Get a random number between 1 And 10 To use as a high value For comparison later on For fruit Or special item!<br><br>		fruitlevel(countx%,countz%)\number% = Rand(1,7)  ;  pick a random number between 1 and 7, seven different fruits total to pick from...<br>		<br>    fruitlevel(countx%,countz%)\Model% = CopyMesh(fruitarray(fruitlevel(countx%,countz%)\number%)\fModel%)  ;  grab fruit model handle assign it to this item in array<br>		fruitlevel(countx%,countz%)\special% = 0  ;  we are not a special item!<br>	  fruitlevel(countx%,countz%)\specnum% = 0  ;  we are not a special item at all.<br>		fruitlevel(countx%,countz%)\name$ = fruitarray(fruitlevel(countx%,countz%)\number%)\name$  ;  grab fruit name and assign it to this array items name<br>		WriteString(debugfile%, "Current Fruit = " + fruitlevel(countx%,countz%)\name$)  ;  Output debug info, so we know where it is stopping.<br>		;  Placeholder 03_07_04<br>		;  Need to set scale values seperately for each fruit to ensure it looks right and fruit is all the same size.<br>		<br>		If name$ = "cherry" Then<br>		  fruitlevel(countx%,countz%)\points% = 25<br>		  EntityType(fruitlevel(countx%,countz%)\Model%, 1, False )  ;  Here we are setting the cherry type to 1 for collisions !!!<br>          Collisions(1,8,2,1)  ;  Here we are setting up to do stop on collision between Cherry and Level model... aka type 8<br>		EndIf<br>    If name$ = "strawberry" Then<br>		  fruitlevel(countx%,countz%)\points% = 50<br>		  EntityType(fruitlevel(countx%,countz%)\Model%, 2, False)  ;  Here we are setting the Strawberry type to 2 for collisions !!!<br>          Collisions(2,8,2,1)  ;  Here we are setting up to do stop on collision between Strawberry and Level model... aka type 8<br>		EndIf<br>		If name$ = "orange" Then<br>		  fruitlevel(countx%,countz%)\points% = 75<br>		  EntityType(fruitlevel(countx%,countz%)\Model%, 3, False)  ;  Here we are setting the Orange type to 3 for collisions !!!<br>          Collisions(3,8,2,1)  ;  Here we are setting up to do stop on collision between Orange and Level model... aka type 8<br>		EndIf<br>		If name$ = "pear" Then<br>		  fruitlevel(countx%,countz%)\points% = 100<br>		  EntityType(fruitlevel(countx%,countz%)\Model%, 4, False)  ;  Here we are setting the Pear type to 4 for collisions !!!<br>          Collisions(4,8,2,1)  ;  Here we are setting up to do stop on collision between Pear and Level model... aka type 8<br>		EndIf<br>		If name$ = "apple" Then<br>		  fruitlevel(countx%,countz%)\points% = 250<br>		  EntityType(fruitlevel(countx%,countz%)\Model%, 5, False)  ;  Here we are setting the Apple type to 5 for collisions !!!<br>          Collisions(5,8,2,1)  ;  Here we are setting up to do stop on collision between Apple and Level model... aka type 8<br>		EndIf<br>		If name$ = "pineapple" Then<br>		  fruitlevel(countx%,countz%)\points% = 500<br>		  EntityType(fruitlevel(countx%,countz%)\Model%, 6, False)  ;  Here we are setting the pineapple type to 6 for collisions !!!<br>          Collisions(6,8,2,1)  ;  Here we are setting up to do stop on collision between Pineapple and Level model... aka type 8<br>		EndIf<br>		If name$ = "banana" Then<br>		  fruitlevel(countx%,countz%)\points% = 1000<br>		  EntityType(fruitlevel(countx%,countz%)\Model%, 7, False)  ;  Here we are setting the Banana type to 7 for collisions !!!<br>          Collisions(7,8,2,1)  ;  Here we are setting up to do stop on collision between Banana and Level model... aka type 8<br>		EndIf<br>		;  now we have points, name, model, next we must assign the location values for this item...<br>		<br>    fruitlevel(countx%,countz%)\locz# = 50 * countz%  - 160  ;  Perfected z even spacing, fruit location offset as well to be inside level.<br>		fruitlevel(countx%,countz%)\locx# = 50 * countx%  - 175  ;  Perfect x positioning for fruit offsets, location offset to be inside the level.<br><br>		If dropitems(countx%,countz%, 1.0) = -1<br>		  fruitlevel(countx%,countz%)\dead% = 0<br>	    Else<br>		  fruitlevel(countx%,countz%)\dead% = 1  ;  this item is dead and hidden currently.<br>		EndIf<br>	     WriteString(debugfile%, "Dropped Fruit = " + fruitlevel(countx%,countz%)\name$)<br>		 fruitxyz$ = "Fruit X,Y,Z = " + Str fruitlevel(countx%,countz%)\locx# + "," + Str fruitlevel(countx%,countz%)\locy# + "," + Str fruitlevel(countx%,countz%)\locz#<br>		 WriteString(debugfile%, fruitxyz$)<br>		 WriteString(debugfile%, "-----------------------------------------------------------------------------------------")  ;  Seperate Items to make them easier to read.<br>    Next<br>  Next<br>End Function<br><br>;  Drop the fruit items to a certain level, using collision detection to stop when it collides with the level.<br>;  There is a memory bug in this function, I think it is because the collision stuff for level is not setup all the way for each wall.<br>;  Need to setup bounding boxes, for floor and walls.<br>Function dropitems(countx%,countz%, destinationy#)<br>  Local virtualspot#<br>  Local coll%  ;  Returned entity from the collision the fruit item was involved in...<br>  Local colcount%  ;  variable to count the number of collisions of the current fruit item...<br>  ; setup initial position for fruit to fall from!<br>  colflag% = 0  ; initially no collisions with this fruit item and level!<br>  colcount% = 0  ; initially no collisions to count.<br>  <br>  PositionEntity fruitlevel.fruititems(countx%,countz%)\Model%, fruitlevel.fruititems(countx%,countz%)\locx# ,200.0,fruitlevel.fruititems(countx%,countz%)\locz#<br>  fruitlevel.fruititems(countx%, countz%)\locy# = 200.0  ;  Have to set initial Y starting position to 200 also...<br><br>  For virtualspot# = 200.0 To destinationy# Step -20.0  ;  Dropping -20 each time through loop til we collide on the level...<br><br>	  colcount% = CountCollisions(fruitlevel.fruititems(countx%,countz%)\Model%)  ; how many collisions is fruit in ?<br>	  If colcount% &gt; 0<br>	    coll% = CollisionEntity(fruitlevel.fruititems(countx%,countz%)\Model%, colcount%) ; return other entity in collision.<br>	  <br>      If EntityName(coll%) = EntityName(testlevel.level(1)\levfloor%)<br>    	  fruitlevel.fruititems(countx%, countz%)\locy# = virtualspot# + 1.0  ;set Y coord to collision spot + 1.0<br>	      colflag% = 1<br>		  Return -1<br>      EndIf<br>		Else<br>	      MoveEntity fruitlevel.fruititems(countx%,countz%)\Model%, 0,-20.0,0  ;  drop the entity by -10.0 same as loop to have item move downward!<br>		    fruitlevel.fruititems(countx%, countz%)\locy# = fruitlevel.fruititems(countx%, countz%)\locy# -20.0<br>    EndIf<br>	;If EntityDistance(fruitlevel.fruititems(countx%, countz%)\Model%, testlevel.level(1)\levfloor%) &lt; 20.0<br>	;    fruitlevel.fruititems(countx%, countz%)\locy# = 5.0<br>	;    colflag% = 1<br>	;	Return -1<br>	;EndIf<br>	RenderWorld<br>	Flip <br>  Next <br>  ;  If we get here we have not collided with level so we need to turn this item off.  I will use the entityalpha value to set it to invisible.<br>  ;EntityAlpha fruitlevel.fruititems(countz%, countx%)\Model%, 0<br>  If colflag% = 0<br>    Return 0  ;  We return false as this item did not collide with the level!<br>	EndIf <br>End Function<br><br>;  Load the player model out of b3d file, setup the player variables default values.<br>Function setupplayer%(controller%, startx#, starty#, startz#, lives%, roty#, speed#)<br>  Local colnum% = 1  ;  use to setup collisions between player and other fruit items!<br>  playerone(1)\pmodel% = LoadMesh("../media/bubble.b3d")  ;  load the players initial model the bubble if you will!<br>  ScaleEntity playerone(1)\pmodel%,3,3,3  ;  We have to enlarge the player model to make them able to see...<br>  playerone(1)\controller% = controller%  ;  what are we initially controlled by ?  1KB, 2MS, 3JS<br>  playerone(1)\locx# = startx#  ;  These represent the initial starting locations for the player x,y,z<br>  playerone(1)\locy# = starty#<br>  playerone(1)\locz# = startz#<br>  playerone(1)\roty# = roty#  ;  What direction are we currently facing 90degree increments, 0,90,180,270.<br>  playerone(1)\direction% = 1<br>  playerone(1)\speed# = speed#  ;  How far/fast we are going to move, each time we move the player model.<br>  playerone(1)\special% = 0  ;  we are not currently using specialty items, this is merely for easy expansion.<br>  playerone(1)\fruit% = 0  ;  fruit that we currently are, we start out as a bubble so 0, 1=cherry,2=strawberry,3=orange,4=pear,5=apple,6=pineapple,7=banana.<br>  playerone(1)\points% = 0  ;  players current score!, of course we start player out with 0 points anything else would be cheating!<br>  playerone(1)\lives% = lives%  ;  How many lives do we start off with, I think I decided on 3 to start with, then 1up every 50000.<br>  playerone(1)\dead% = 0  ;  It's Alive!  In other words set this initially to 0, because we are not dead yet.<br>  EntityType(playerone(1)\pmodel%,9,True)  ; set this entitytype to 9 for collision checking later.<br>  NameEntity(playerone(1)\pmodel%,"player")  ;  setting up player entity name so its easier to check collisions.<br>  Collisions(9,8,1,1)  ;  Here we are setting up to do stop on collision between Player type 9 and Level type 8<br>  For colnum% = 1 To 7  ;  Setting up stop collisions on player colliding into fruit items.<br>    Collisions(9,colnum%,1,1)<br>  Next<br>  PositionEntity playerone(1)\pmodel%, playerone(1)\locx#, playerone(1)\locy#, playerone(1)\locz#  ;  Move the player model to the starting position, ready to begin.<br>  MoveMouse(400,300)  ;  set the mouse pointer to the center of the screen<br>End Function<br><br>Function rotateplayer(direction%)<br><br>End Function<br><br>Function moveplayer()<br>If playerone(1)\roty# = 0<br>  MoveEntity playerone(1)\pmodel%, playerone(1)\speed#, 0, 0<br>  <br>EndIf<br><br>If playerone(1)\roty# = 180<br>  MoveEntity playerone(1)\pmodel%, playerone(1)\speed# * -1, 0, 0<br>EndIf<br><br>If playerone(1)\roty# = 90<br>  MoveEntity playerone(1)\pmodel%, 0, 0,playerone(1)\speed#<br>EndIf<br><br>If playerone(1)\roty# = 270<br>  MoveEntity playerone(1)\pmodel%, 0, 0,playerone(1)\speed# * -1<br>EndIf<br>RenderWorld<br>Flip 	<br>End Function<br><br>Function doinput()<br>Local direction%<br><br>If flagme% = 1<br>  x# = 400<br>  y# = 300<br>  flagme% = flagme% + 1<br>EndIf<br><br>If playerone(1)\controller% = 2<br>  <br>  xspeed# = MouseXSpeed()<br>  yspeed# = MouseYSpeed()<br>  x# = x# + xspeed#  ;  use to update the mouse coords.<br>  y# = y# + yspeed#<br>  x# = x# Mod 50<br>  y# = y# Mod 50  ;  This is for 50 pixel jumps, we still need to keep player in a Y Line if on left or right side, or X Line if above or below...<br>  dispmouse$ = Str(x#+","+y#)<br>  Text x#, y#, dispmouse$<br><br>  MoveEntity playerone(1)\pmodel%, x#,y#, 0<br><br>  If colflag% = 1<br>    Text 1.0,1.0, "TRUE"<br>  Else<br>    Text 1.0,1.0, "FALSE"<br>  EndIf<br>  <br>  ;  Contstrain mouse movement inside the screen<br>  If x# &gt; GraphicsWidth() -1 Then<br>    x# = GraphicsWidth() -1<br>  EndIf<br>  If x# &lt; 0 Then<br>    x# = 0<br>  EndIf<br>  If y# &gt; GraphicsHeight() -1 Then<br>    y# = GraphicsHeight() -1<br>  EndIf<br>  If y# &lt; 0 Then<br>    y# = 0<br>  EndIf<br>  ;  end mouse screen constraint code...<br>EndIf<br><br>If playerone(1)\controller% = 1<br>  If KeyHit( 205 )=True<br>    If playerone(1)\direction% = 1<br>	  TurnEntity playerone(1)\pmodel%, 0,0,0<br>      playerone(1)\direction% = 1<br>	EndIf<br>	If playerone(1)\direction% = 2<br>	  TurnEntity playerone(1)\pmodel%, 0,270,0<br>      playerone(1)\direction% = 1<br>	EndIf<br>	If playerone(1)\direction% = 3<br>	  TurnEntity playerone(1)\pmodel%, 0,180,0<br>      playerone(1)\direction% = 1<br>	EndIf<br>	If playerone(1)\direction% = 4<br>	  TurnEntity playerone(1)\pmodel%, 0,90,0<br>      playerone(1)\direction% = 1<br>	EndIf<br>  EndIf<br><br>  If KeyHit( 203 )=True<br>    If playerone(1)\direction% = 1<br>	  TurnEntity playerone(1)\pmodel%, 0,180,0<br>      playerone(1)\direction% = 3<br>	EndIf<br>	If playerone(1)\direction% = 2<br>	  TurnEntity playerone(1)\pmodel%, 0,90,0<br>      playerone(1)\direction% = 3<br>	EndIf<br>	If playerone(1)\direction% = 3<br>	  TurnEntity playerone(1)\pmodel%, 0,0,0<br>      playerone(1)\direction% = 3<br>	EndIf<br>	If playerone(1)\direction% = 4<br>	  TurnEntity playerone(1)\pmodel%, 0,270,0<br>      playerone(1)\direction% = 3<br>	EndIf<br>  EndIf<br>  <br>  If KeyHit( 200 )=True<br>    If playerone(1)\direction% = 1<br>	  TurnEntity playerone(1)\pmodel%, 0,90,0<br>      playerone(1)\direction% = 2<br>	EndIf<br>	If playerone(1)\direction% = 2<br>	  TurnEntity playerone(1)\pmodel%, 0,0,0<br>      playerone(1)\direction% = 2<br>	EndIf<br>	If playerone(1)\direction% = 3<br>	  TurnEntity playerone(1)\pmodel%, 0,270,0<br>      playerone(1)\direction% = 2<br>	EndIf<br>	If playerone(1)\direction% = 4<br>	  TurnEntity playerone(1)\pmodel%, 0,180,0<br>      playerone(1)\direction% = 2<br>	EndIf<br>  EndIf<br>  <br>  If KeyHit( 208 )=True<br>    If playerone(1)\direction% = 1<br>	  TurnEntity playerone(1)\pmodel%, 0,270,0<br>      playerone(1)\direction% = 4<br>	EndIf<br>	If playerone(1)\direction% = 2<br>	  TurnEntity playerone(1)\pmodel%, 0,180,0<br>      playerone(1)\direction% = 4<br>	EndIf<br>	If playerone(1)\direction% = 3<br>	  TurnEntity playerone(1)\pmodel%, 0,90,0<br>      playerone(1)\direction% = 4<br>	EndIf<br>	If playerone(1)\direction% = 4<br>	  TurnEntity playerone(1)\pmodel%, 0,0,0<br>      playerone(1)\direction% = 4<br>	EndIf<br>  EndIf<br>EndIf<br><br>;rotateplayer(playerone(1)\direction%)<br>;<br>If KeyHit(57)=True<br>  moveplayer()<br>EndIf<br>End Function<br><br>;  Next step are to test each function seperately in this game.bb file by calling only the necessary ones to display items, such as the level first, then move on to the<br>;  difficult stuff such as testing and debugging the fruit/special items display functions.<br>;  Finally a player item must be loaded and setup, with movement functions, and the functions to handle special items, countdown, useage, point system, lives, etc.. <br><br></td></tr></table><br>
<a name="338520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StOrM3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hope someone can help me, or has the time to help, also feel free to use some of the code in your own projects if you like, but please don't steal my game idea, I have worked long and hard on this game, started in 3drad, then ported to blitz3d when I found that 3drad has problems with strings etc..  When talking to the creator/s of blitz3d I thought that I could handle it in blitz3d alot easier, but collision is not working as expected, nor is scaling stuff.  Someone needs to write a tutorial about how to load a model from a b3d file, into a custom type, then scale it, then rotate it, then load another object and do the same to it, and show how to make collision work with it, maybe with rebound affects if collided with level, or stop when it hits a level, or if it hits an item to remove the item off the screen, using mouse input, to move the player around the outside of the items in 50 pixel increments.  Or even if someone can help me with some of the pieces of this puzzle, I don't need anyone to write the whole game for me, but maybe with a level rectangle, and one or two items falling down to hit the level and stop, and a simple cube or sphere moved by the mouse, stopping at 50 pixel increments, demonstrating how to track collision between both the player to level, player to items, and items to level.<br><br>Thanks for everyones help, this community is one of the main reasons I decided on Blitz3D instead of DarkB*)ic .. I checked the forum out to make sure we had intelligent mature people willing to help out, so far you have not let me down in the least.<br><br>Ken <br><br></td></tr></table><br>
<a name="338526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StOrM3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey just a thought, but maybe I shouldn't be using the built in collision routines from blitz, maybe I should use a userlib like coldet wrapper, or one of the other dll or user made libs in the code archives.. Wonder how long it would take to port it to Tokamak now that it has collision response and stuff in it.  Any thoughts, or favorites that people have used with ease and success ?  I am open to all suggestions, sorry for the ramblings, I am tired.. Night all.  Ken <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
