<!DOCTYPE html><html lang="en" ><head ><title >freeing resources?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >freeing resources?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >freeing resources?</a><br><br>
<a name="656854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> i have a 2.5d scrolling shooter like r-type delta or Einhander in style. ive been making the space stations etc you fly throught in 3d world studio. making lots of standard size sections i can place next to each other in blitz. <br><br>i want have quite alot of detailed models and textures so i need a good routine for freeing meshes as they go out of the left of the screen and loading the next mesh just before it comes into view at the right off the screen.<br><br>has anyone done this before and whats a good way of doing this? i know trial and error is a good way to learn but i have limited time and i want to finish this game. <br><br>Pete <br><br></td></tr></table><br>
<a name="656878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Peter,<br><br>Assume you're building re-usable mesh sections in each level?<br><br>Would not recommend loading stuff dynamically as this will be very Slooooow and halt program execution. There is no native way for blitz to stream the loading of a mesh.<br><br>Instead load all the mesh sections required for the level at the outset and hide them all.  Create the level by placing instances of the sections in a row.  Blitz will automatically handle the culling of sections which are not on screen although it may be quicker hiding and showing the relevant parts manually.<br><br>Stevie <br><br></td></tr></table><br>
<a name="656883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, loading files from harddrive during runtime is a very slo-o-w proposition.  Stevie G's solution is good. <br><br></td></tr></table><br>
<a name="656899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks ok, but if i do that, im going run out of memory for textures real quick, as the memory isnt freed up when the meshes are not rendered are they? ill have to run some tests. <br><br>so for all blitz3d games you have to load all meshes etc for the whole level into memory. no wonder everyone keeps banging on about DXTC. any other info on this subject would be handy<br><br>Pete <br><br></td></tr></table><br>
<a name="656906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What happens, from tests and other peoples info, that, you load your resources in blitz. Anything that is viewed in the camera view, is put into VRAM. Anything that is not, is kept in system RAM. Load up your code, and check out it's system RAM usuage in the task manager, or any other RAM managing app. You'll find all the resources are loaded into system RAM. <br><br></td></tr></table><br>
<a name="656919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok so if i only show small sections at a time i should be ok for memory. even on older graphics cards. i guess you can limit what is rendered by shortening the camera range? this could be easyer than i thought then.<br><br>Pete <br><br></td></tr></table><br>
<a name="656928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, alot of this is done for you. But, just be wary of computers with little RAM :o) <br><br></td></tr></table><br>
<a name="656948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;so for all blitz3d games you have to load all meshes etc <br>&gt;for the whole level into memory.<br><br>Of course not, but it's dificult to add dynamic ressource management if your game is already halfway finished.<br><br>emulating threading is inefficient, slow and dirty, but it works. As for your purpose, I would go with the suggestions made, as you really shouldn't need to load resources dynamically.<br><br>&gt;no wonder everyone keeps banging on about DXTC. any other <br>&gt;info on this subject would be handy<br><br>Even with dynamic resource loading, DXTC would be great. A richer and more vibrant world could be built.<br><br>EDIT: You can see an example here.<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1531" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1531</a><br><br><br>Andy <br><br></td></tr></table><br>
<a name="657026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks everyone you have given me lots to think about!<br><br>Pete <br><br></td></tr></table><br>
<a name="659103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ive done some tests and ive got a spacestation section and a space ship. ive set it up so the ship is visible to start with then it slowly moves with the camera following along side, at this point the ship is loaded in Vram and the spacestation in system ram, as it moves close to the spacestation blitz loads the spacestation into vram. the only thing is that once you move away from the space station it is not removed from vram an just stays there? is there any way to remove it from vram?<br><br>Pete <br><br></td></tr></table><br>
<a name="659169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is an interesting thread.<br><br>Out of interest, what happens if you try to 'FreeEntity' it?<br><br>I wonder if there is potential to combine 'FreeEntity' (assuming it clears the entity from VRAM) with 'CopyEntity' to work around this and put something exclusively back into system RAM. <br><br></td></tr></table><br>
<a name="659432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> it stays in vram, well it did in my test. this is what i want to know, does blitz3d start clearing out the freed stuff from vram at some point or does it just fill up and crash?<br><br>Pete<br><br>it would be great if Mr Sibly could give us some detail on how blitz deals with vram/system ram? <br><br></td></tr></table><br>
<a name="659482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd assume that blitz frees VRAM when the last entity that references it is freed. <br><br></td></tr></table><br>
<a name="659634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it leaves things in there until something new needs to go in. I guess it's for speed. There's no point clearing out the VRAM unless something new needs to go in there.<br><br>I had a thought about streameing in textures ;o) AGAIN<br><br>Basically, you break your textures into say, 32x32 or smaller squares and load each of these chunks in, bit by bit. Then, copyrect these to the main texture. Since blitz is loading and putting these to a texture for you, the copyrect command isn't actually THAT slow. Plus, you could use the Force to VRAM flag, beause each texture piece would get freed immediately after copying. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
