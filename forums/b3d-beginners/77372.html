<!DOCTYPE html><html lang="en" ><head ><title >Collision issues</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Collision issues</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Collision issues</a><br><br>
<a name="865690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zortzblatz</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have no idea what is wrong with my code. I want the cans of lazer to disappear upon colliding with the camera. I cannot figure out why they aren't<br>&lt;code&gt;<br><br>; ---------------------------------------------------------------<br>; Graphics/light...<br>; ---------------------------------------------------------------<br><br>Global dWidth  = 640<br>Global dHeight = 480<br><br>Graphics3D dWidth, dHeight<br>SetBuffer BackBuffer ()<br><br><br>run	 	 = LoadSound ("snd/gravel.wav")<br>wade	 = LoadSound ("snd/water2.wav")<br><br><br><br><br>Type Timer<br>	Field start<br>	Field timeOut<br>End Type<br><br>;------------------------------------------------------------------<br>;and ZortZblatZ said, let there be cans!<br>;------------------------------------------------------------------<br><br><br><br>Type lazercan<br>	Field model<br>	Field ID<br>	Field collided<br>End Type<br><br><br><br><br><br>;-------------------------------------------------------------------<br>;creates the ship<br>;-------------------------------------------------------------------<br><br>shipmodel = LoadMesh ("msh/ship3.3ds")<br>EntityShininess shipmodel, 0.1<br>ship = CenterPivot (shipmodel)<br>ScaleEntity ship, 6, 6, 6 <br>PositionEntity ship, 3750, 600, 1300<br>RotateEntity ship, 0, 45, 0<br>scaler = 2<br><br><br>terrain = LoadTerrain ("gfx/height.bmp")<br>ScaleEntity terrain, 5, 50, 5<br>TerrainShading terrain, True<br>TerrainDetail terrain, 2500, True<br>grass = LoadTexture ("gfx/sand.jpg")<br>ScaleTexture grass, 20, 20<br>EntityTexture terrain, grass, 0, 1<br>MoveEntity terrain, 0, -4, 0<br><br>seabed = CreatePlane ()<br>EntityTexture seabed, grass<br>MoveEntity seabed, 0, -3.9, 0<br><br><br><br>; ---------------------------------------------------------------<br>; Water...<br>; ---------------------------------------------------------------<br><br>water = CreatePlane ()<br>h20 = LoadTexture ("gfx/greywater.bmp")<br>EntityAlpha water, 0.75<br>PositionEntity water, 0, -25, 0<br>ScaleTexture h20, 200, 200<br>EntityTexture water, h20<br>EntityColor water, 64, 64, 64<br>EntityShininess water, 0.05<br><br>; ---------------------------------------------------------------<br>; Camera and fog...<br>; ---------------------------------------------------------------<br><br>cam = CreatePivot ()<br>EntityRadius cam, 2<br><br>camera = CreateCamera (cam)<br>CameraViewport camera, 0, 0, dWidth, dHeight<br>CameraFogMode camera, 1<br>CameraFogRange camera, 1, 1600<br>CameraFogColor camera, 0, 0, 0<br>CameraRange camera, 1, 1600 * scaler<br>PositionEntity cam, 2340, 0, 2390 <br>dome = CreateSphere (12)<br>clouds = LoadTexture ("gfx/sky.bmp")<br>ScaleEntity dome, 1600 * scaler, 1600 * scaler, 1600 * scaler<br>EntityTexture dome, clouds<br>ScaleTexture clouds, 0.25, 0.25<br>EntityOrder dome, 1<br>FlipMesh dome<br>EntityFX dome, 8<br><br>flash = CreateLight ()<br>LightColor flash, 0, 0, 0<br>PositionEntity flash, 1900, 100, 0<br>RotateEntity flash, 90, 0, 0<br><br>; ---------------------------------------------------------------<br>; Collisions...<br>; ---------------------------------------------------------------<br>	<br>;Const ENTITY_TERRAIN = 1<br>;Const ENTITY_CAM	 = 2<br>;Const ENTITY_PLANE	 = 3<br>;Const ENTITY_CAN     = 4<br>Global ENTITY_TERRAIN = 1<br>Global ENTITY_CAM	 = 2<br>Global ENTITY_PLANE	 = 3<br>Global ENTITY_CAN     = 4<br><br>EntityType terrain, ENTITY_TERRAIN<br>EntityType cam, ENTITY_CAM<br>;If gimme747<br>	EntityType shipmodel, ENTITY_PLANE<br>;EndIf<br><br>Collisions ENTITY_CAM, ENTITY_TERRAIN, 2, 1<br>Collisions ENTITY_CAM, ENTITY_PLANE, 2, 1<br>Collisions ENTITY_CAM, ENTITY_TERRAIN, 1, 2<br>Collisions ENTITY_CAM, ENTITY_PLANE, 1, 2<br><br>Function CurveValue#(current#,destination#,curve)<br>	current#=current#+((destination#-current#)/curve)<br>	Return current#<br>End Function<br><br>; ---------------------------------------------------------------<br>; Main loop...<br>; ---------------------------------------------------------------<br><br><br>	If EntityCollided (camera, ENTITY_CAN)<br>	HideEntity lazercan<br>	EndIf<br><br><br>canmodel = LoadMesh("msh\can.3ds")<br>ScaleEntity canmodel,5,5,5<br><br>For c=1 To 1000<br>canz.lazercan = New lazercan<br><br>canz\ID = CopyEntity (canmodel)<br>;EntityColor canz\ID,Rand(0,255),Rand(0,255),Rand(0,255)<br>x = Rand(1000,3000)<br>z = Rand(1000,3000)<br>PositionEntity canz\ID,x,TerrainY(terrain,x,0,z)+15,z <br>TurnEntity canz\ID,0,Rand(0,365),0<br>EntityType canz\ID, ENTITY_CAN<br>EntityRadius canz\ID,20<br>Collisions ENTITY_CAM, ENTITY_CAN,1,2 <br>Collisions ENTITY_CAM, ENTITY_CAN,2,1<br><br>Next<br><br><br><br>FPS = 50<br><br>period = 1000 / FPS<br>time = MilliSecs () - period<br><br>SoundVolume run, 0<br>SoundVolume wade, 0<br><br><br>LoopSound run<br>LoopSound wade<br><br>runChannel = PlaySound (run)<br>wadeChannel = PlaySound (wade)<br><br><br><br>CameraFogColor camera, 36, 36, 36<br><br>; Titles...<br>horror = LoadSprite ("gfx/ambatlogo.bmp", 48, camera)<br>ScaleSprite horror, 9, 5<br>PositionEntity horror, 0, 0, 10<br>horrorAlpha# = 0<br>EntityAlpha horror, horrorAlpha<br>showHorror = 1<br><br>steps# = 1.5<br><br>HidePointer<br><br><br>disclaimer$ = "Better than Jed's version."<br>SetFont LoadFont ("arial")<br><br>Repeat<br><br>	If startlite &lt; 40<br>		startlite = startlite + 0.5<br>		;AmbientLight startlite, startlite, startlite<br>		AmbientLight 300000,300000,300000<br>	EndIf<br><br>	If makesun = 0<br>		sun = CreateLight ()<br>		LightColor sun, 0, 0, 0<br>		PositionEntity sun, 3000, 500, 3000<br>		RotateEntity sun, 45, 0, 0<br>		makesun = 1<br>	Else<br>		; Titles... requesting the services of Major Hack... Major Hack, you're needed for some titles...<br>		If Not noMoreHorror<br>			EntityAlpha horror, horrorAlpha<br>			If Not reduce<br>				If horrorAlpha &lt;= 1<br>					horrorAlpha = horrorAlpha + 0.05<br>				Else<br>					reduce = 1<br>				EndIf<br>			Else<br>				If horrorAlpha =&gt; 0<br>					horrorAlpha = horrorAlpha - 0.005<br>				EndIf<br>			EndIf	<br>			If horrorAlpha &lt;= 0<br>				FreeEntity horror<br>				noMoreHorror = 1<br>			EndIf<br>		EndIf<br>		<br>	EndIf<br>	<br>	If sunlite &lt; 70<br>		sunlite = sunlite + 0.5<br>		If sun<br>			LightColor sun, sunlite, sunlite, sunlite<br>		EndIf<br>	EndIf<br><br>	If foglite &lt; 20<br>		foglite = foglite + 0.5<br>		CameraFogColor camera, foglite, foglite, foglite<br>		CameraClsColor camera, foglite, foglite, foglite<br>	EndIf<br><br>	Repeat<br>		elapsed = MilliSecs () - time<br>	Until elapsed<br><br>	ticks = elapsed / period<br>	<br>	tween# = Float (elapsed Mod period) / Float (period)<br>	<br>	For framelimit = 1 To ticks<br>	<br>		If framelimit = ticks Then CaptureWorld<br>		time = time + period<br><br>		PositionEntity cam, EntityX (cam), TerrainY (terrain, EntityX (cam), EntityY (cam), EntityZ (cam)) + 25, EntityZ (cam)<br>	<br>		mxs = MouseXSpeed()<br>		mys = MouseYSpeed()<br>		<br>		dest_xang# = dest_xang + mys<br>		dest_yang# = dest_yang - mxs<br>	<br>		xang# = CurveValue (xang, dest_xang, 5)<br>		yang# = CurveValue (yang, dest_yang, 5)<br>	<br>		RotateEntity camera, xang, 0, 0<br>		RotateEntity cam, 0, yang, 0<br>		<br>		MoveMouse GraphicsWidth()/2,GraphicsHeight()/2<br>		<br>		running# = 0<br>		<br>		If KeyDown (200)<br>			MoveEntity cam, 0, 0, steps<br>			running = Rnd (0.35, 0.75)<br>		EndIf<br>	<br>		If KeyDown (208)<br>			MoveEntity cam, 0, 0, -steps<br>			running = Rnd (0.55, 0.95)<br>		EndIf<br>		<br>		<br><br>		<br>		<br>				<br><br>		<br>		<br>		If running &gt; 0<br>			ChannelPitch runChannel, Rnd (8000, 14000)<br>			ChannelPitch wadeChannel, Rnd (7000, 9000)<br>		EndIf<br>		<br>		<br>		<br>		wading# = 0<br>		<br>		If running<br>			If EntityY (cam) &lt; EntityY (water) + 24<br>				wading = Rnd (0.5, 1)<br>				running = 0<br>			EndIf<br>		EndIf<br>		<br>		ChannelVolume wadeChannel, wading<br>		ChannelVolume runChannel, running<br>		<br>		PositionEntity dome, EntityX (cam), EntityY (cam), EntityZ (cam)<br>		TurnEntity dome, 0.005, 0.025, 0.005<br>		UpdateWorld<br>		<br><br>;---------------------------------------------------------------------------<br>;water movement<br>;---------------------------------------------------------------------------<br><br><br><br>		PositionEntity water, Sin (time * 0.01) * 10, (EntityY (water) + (Sin (time * 0.05) * 0.2) * 0.25), Cos (time * 0.02) * 10<br><br>		If foglite &gt; 20<br>			foglite = foglite - 10<br>			If foglite &lt; 20 Then foglite = 20<br>		EndIf<br>		CameraClsColor camera, foglite, foglite, foglite					<br>					<br><br>	Next<br><br>	RenderWorld tween<br><br>	If Not nomorehorror<br>		Text (GraphicsWidth () / 2) - (StringWidth (disclaimer$) / 2), GraphicsHeight () - (StringHeight (disclaimer$) * 2), disclaimer$<br>	EndIf<br>	<br><br>	<br>	Flip<br><br>		<br>Until KeyDown (1)<br><br>Function CenterPivot (model)<br>	FitMesh model, 0, 0, 0, MeshWidth (model), MeshHeight (model), MeshDepth (model)<br>	modelPivot = CreatePivot ()<br>	PositionEntity modelPivot, MeshWidth (model) / 2, MeshHeight (model) / 2, MeshDepth (model) / 2<br>	EntityParent model, modelPivot<br>	Return modelPivot<br>End Function<br><br>Function SetTimer.Timer (timeOut)<br>	t.Timer = New Timer<br>	t\start   = MilliSecs ()<br>	t\timeOut = t\start + timeOut<br>	Return t<br>End Function<br><br>Function TimeOut (test.Timer)<br>	If test &lt;&gt; Null<br>		If test\timeOut &lt; MilliSecs ()<br>			Delete test<br>			Return 1<br>		EndIf<br>	EndIf<br>End Function<br>End<br>&lt;/code&gt; <br><br></td></tr></table><br>
<a name="865701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If EntityCollided (camera, ENTITY_CAN)<br>HideEntity lazercan<br>EndIf<br><br>Shouldn't that be in the actual Main Loop? <br><br></td></tr></table><br>
<a name="865702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KillerX</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you assign an entitytype to Camera? <br><br></td></tr></table><br>
<a name="865729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zortzblatz</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Umm, it is in the main loop (I think) I can collide with the cans but I just stop and they don't disappear. <br><br></td></tr></table><br>
<a name="865768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to learn to use functions better :o) If only to make the code more readable, as it's very hard to pinpoint sections of code.<br><br>I agree with puki. That code needs to be in the main loop, or it won't work at all. You need to check EVERY loop for collisions. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
