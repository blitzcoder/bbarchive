<!DOCTYPE html><html lang="en" ><head ><title >map 2D connected or infinite</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >map 2D connected or infinite</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >map 2D connected or infinite</a><br><br>
<a name="1084814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bashc</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am writting a simple map 2D and I would like make it coneccted by borders for when scroll reach end of screen, then tiles of map which appears be tiles of begin and vice-versa. So, an infinite repeated map o some like this.<br><br>I have posted and example of code to show better what I mean.<br><br>I apreciate any sugestion an example becouse I do not know the way to do this with an array still. <br><br>Thanks<br><br><br><br><br><pre class=code>


Graphics 640,480,16,2
Global mapx,mapy,xp,yp
mapx = 20
mapy = 25
xp=0
yp=0
Dim map(mapx,mapy)

Global VistaGrandx1, VistaGrandy1, VistaGrandx2, VistaGrandy2 ; vista grande de graficos
Global limiteX, limitey
VistaGrandx1 = 1
VistaGrandy1 = 1
VistaGrandx2 = 600
VistaGrandy2 = 440
Color 0,250,4
;Rect  VistaGrandx1-1 , VistaGrandy1-1 ,VistaGrandx2+2 , VistaGrandy2+2,1
Viewport VistaGrandx1 , VistaGrandy1 ,VistaGrandx2 , VistaGrandy2


Restore mapa
For a=1 To 20
	For b=1 To 25
		Read map(a,b)
	Next
Next
Restore mapa
.mapa
Data 0,0,0,0,1,1,1,2,1,3, 0,0,0,1,1,2,1,0,0,0 ,0,0,0,0,0
Data 0,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,5
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,0
Data 0,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,0
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,0
Data 9,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,0
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 1,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 9,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1

Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 1,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 1,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 9,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 1,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,3,2,1
Data 0,0,0,0,0,0,0,0,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,5,1




limiteX=0
limitey=0

While Not KeyHit(1) ; As long as the user hasn't hit ESC yet ... 
	Cls
	Viewport VistaGrandx1, VistaGrandy1, VistaGrandx2, VistaGrandy2
	Color 0,250,0
	Rect VistaGrandx1+1, VistaGrandy1+1, VistaGrandx2-2, VistaGrandy2-2,0
	Color 255,255,255
	DibujaPantalla()
	
	
			; Scroll of screen up
	If KeyDown(208) And limitey&lt;0 Then
		yp=yp+3 
		limitey=limitey+3
		
		
	EndIf
	
            ; Scroll of screen down        ; actually map stop when it ends, but...
	If KeyDown(200) And limitey&gt;-240 Then  ; I would like change those next four conditions for some as "If data is last of array then appears in screen, 
		yp=yp-3                            ; first data of array" So, it would be an "infinite map"
		limitey=limitey-3                  ; somethig as: if map(1,25) next data when screen scroll should be map(1,1) and all as this whwn scroll reach
		                                   ; end of array.
		
	EndIf
	
            ; Scroll of screen left
	
	If KeyDown(203) And limiteX&gt;-450 Then
		xp=xp-3 
		limiteX=limiteX-3
		
		
	EndIf
	
	
            ; Scroll of screen rigth
	If KeyDown(205) And limiteX&lt;0
		xp=xp+3
		limiteX=limiteX+3
		
		
	EndIf
	
	
			; Double buffer mode for smooth screen drawing 
	SetBuffer BackBuffer() 
	
	Flip
	
	
Wend



Function DibujaPantalla()
	
	Local x,y,zx,zy
	x=0
	y=0
	zx=42
	zy=34
	For a=1 To 20
		For b=1 To 25
			Select  map(a,b)
				Case 0
					Color 120,20,120
					Rect x+xp,y+yp,zx,zy
				Case 1
					Color 20,120,120
					Rect x+xp,y+yp,zx,zy
				Case 2
					Color 20,220,120
					Rect x+xp,y+yp,zx,zy
				Case 3
					Color 40,0,120
					Rect x+xp,y+yp,zx,zy
				Case 4
					Color 20,20,120
					Rect x+xp,y+yp,zx,zy
				Case 5
					Color 60,20,120
					Rect x+xp,y+yp,zx,zy
				Case 6
					Color 100,20,120
					Rect x+xp,y+yp,zx,zy
				Case 7
					Color 20,220,120
					Rect x+xp,y+yp,zx,zy
				Case 8
					Color 20,20,10
					Rect x+xp,y+yp,zx,zy
				Case 9
					Color 10,0,120
					Rect x+xp,y+yp,zx,zy
					
			End Select
			x=x+42
		Next
		x=0
		y=y+34
		
	Next	
	Flip
End Function



</pre> <br><br></td></tr></table><br>
<a name="1084819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In this example, you can only scroll to the right. Hopefully it helps a bit:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Dim map(20, 25)

For a=0 To 19
	For b=0 To 24
		Read map(a,b)
	Next
Next
Restore mapa
.mapa

Data 0,0,0,0,1,1,1,2,1,3, 0,0,0,1,1,2,1,0,0,0 ,0,0,0,0,0
Data 0,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,5
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,0
Data 0,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,0
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,0
Data 9,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,0
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 1,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 9,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1

Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 1,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 1,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 9,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,1,2,1
Data 1,3,5,7,9,0,1,2,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,2,1
Data 0,1,2,3,9,1,1,2,1,3, 5,7,9,1,1,2,1,3,5,7 ,9,0,3,2,1
Data 0,0,0,0,0,0,0,0,1,3, 5,7,9,0,1,2,1,3,5,7 ,9,0,1,5,1


Graphics 800, 600, 0, 2
SetBuffer BackBuffer()


scrollx = 0
scrolly = 0

Repeat

	;use keys to scroll
	If KeyHit(205) scrollx = scrollx + 1
	If KeyHit(208) scrolly = scrolly + 1
	
	Cls
	
	;draw tiles onto screen
	For da = 0 To 19 ;&lt;&lt;---DA,DB are used to draw tiles onto the screen
	For db = 0 To 24
	
		;apply scrolling to A,B --&gt; they are used to read the data from array
		a = (da + scrollx) Mod 20  ;&lt;&lt;---"MOD" ensures number is allways smaller than 20 (a&lt;20)
		b = (db + scrolly) Mod 25  ;&lt;&lt;---"MOD" ensures number is allways smaller than 25 (a&lt;25)
		
		Color 0, 0, ConvertToColor( map(a,b) ) ;&lt;---quick fix to get a color from tile number
		Rect da * 10, db * 10, 10, 10 ;&lt;----draw tile at DA,DB
		
	Next
	Next
	
	Flip
	
Until KeyHit(1)

End 


;quick fix to get a color from a single number
Function ConvertToColor( number )

	SeedRnd number
	Return Rand($FFFFFF)
	
End Function

</textarea> <br><br></td></tr></table><br>
<a name="1084834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bashc</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Warner, I will examine this code and try to adapt. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
