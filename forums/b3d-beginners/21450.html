<!DOCTYPE html><html lang="en" ><head ><title >Problem with Tetris game I am making</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Problem with Tetris game I am making</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Problem with Tetris game I am making</a><br><br>
<a name="219640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am making a Tetris like game in order to learn Blitz Basic - this is my first real attempt so please forgive the n00b code.<br><br>I have got quite a long way (although my code is very messy).  I am having problems with my shapes - they are made up of 4 cubes with 1 as the parent entity.  If a non-parent cube hits a wall then it goes behind another one of the cubes.  If I put collision detection on the actual cubes to prevent this, it has strange effects on my shape as it moves.<br><br>Take a look - you'll quickly see what I mean.<br><br>Any suggestions on how to fix this most appreciated.  Also suggestions on better ways to do things would be useful.<br><br>Thanks, here's my code:<br><br>[CODE]<br>;;;;;;;;;;;;;;;;;;;;<br>;                  ;<br>; Main starts here ;<br>;                  ;<br>;;;;;;;;;;;;;;;;;;;;<br><br>Graphics3D 800,600<br><br>SetBuffer BackBuffer()<br><br>Camera = CreateCamera()<br><br>CameraViewport Camera,0,0,GraphicsWidth(),GraphicsHeight()<br><br>Light = CreateLight()<br><br>Dim Block(4)<br><br>Block(1) = InitGame()<br><br>SeedRnd = MilliSecs()<br><br>ShapeType = Rnd(7)<br><br>Block(2) = NewShape(ShapeType,2)<br>Block(3) = NewShape(ShapeType,3)<br>Block(4) = NewShape(ShapeType,4)<br><br>Timer = CreateTimer(5)<br><br>Dim Grid(11,20)<br><br>While Not KeyHit(1)<br><br>	Frames = WaitTimer(Timer)<br>	<br>	For k = 1 To Frames<br><br>		x = 0<br>		y = -2<br>		<br>		StopCollision = 0<br>		Collision = 0<br>		LCollision = 0<br>		RCollision = 0<br>		<br>		<br>		For c = 1 To 4<br>		<br>			If EntityCollided(Block(c),1)<br>			<br>				Collision = 1<br>				<br>				If CollisionNX(Block(c),1) &gt; 0<br>				<br>					LCollision = 1<br>								<br>				End If<br>				<br>				If CollisionNX(Block(c),1) &lt; 0<br>				<br>					RCollision = 1<br>				<br>				End If<br>			<br>				If CollisionNY(Block(c),1) = 1<br>				<br>					StopCollision = 1<br>				<br>				End If<br>						<br>			End If<br>		<br>		Next<br>		<br>	<br>		If KeyHit(203)<br>		<br>			If LCollision = 0<br>			<br>				x = -2<br>			<br>			End If<br>	<br>		End If<br>		<br>	<br>		If KeyHit(205)<br>		<br>			If RCollision = 0<br>			<br>				x = 2<br>			<br>			End If<br>	<br>		End If<br>		<br>		;If KeyHit(200)<br>		<br>		;	TurnEntity Block(1),0,0,90<br>			<br>		;	For a = 1 To 4<br>			<br>		;		TurnBack = 0<br>			<br>		;		If EntityCollided(Block(a),1)<br>				<br>		;			TurnBack = 1<br>				<br>		;		End If<br>				<br>		;		If TurnBack = 1<br>				<br>		;			TurnEntity Block(1),0,0,-90<br>				<br>		;		End If<br>			<br>		;	Next<br>		<br>		;End If<br>		<br><br><br>		If StopCollision = 1<br>		<br>			For a = 1 To 4<br>			<br>				If Not a = 1<br>				<br>					AdjX = EntityX(Block(1)) + EntityX(Block(a))<br>					AdjY = EntityY(Block(1)) + EntityY(Block(a))<br>				<br>				Else<br>				<br>					AdjX = EntityX(Block(1))<br>					AdjY = EntityY(Block(1))<br>				<br>				End If<br>				<br>				ValX = AdjX/2 + 6<br>				ValY = AdjY/2 + 10<br>				<br>				Grid(ValX,ValY) = PlaceBlock()<br>				PositionEntity Grid(ValX,ValY),AdjX,AdjY,30<br>				EntityType Grid(ValX,ValY),1<br>			<br>			Next<br>			<br>			FreeEntity Block(1)<br>			<br>			For r = 1 To 20<br>					<br>				Full = 1<br>					<br>				For c = 1 To 11<br>					<br>					If Grid(c,r) = 0<br>						<br>						Full = 0<br>					<br>					End If<br>					<br>				Next<br>					<br>				If Full = 1<br>					<br>					For c = 1 To 11<br>						<br>						FreeEntity Grid(c,r)<br>						Grid(c,r) = 0<br>						<br>					Next<br>						<br>					For s = r + 1 To 20<br>						<br>						For c = 1 To 11<br>							<br>							If Not Grid(c,s) = 0<br>							<br>							 	TranslateEntity Grid(c,s),0,-2,0<br>							<br>								Grid(c,s-1) = Grid(c,s)<br>									<br>								Grid(c,s) = 0<br>							<br>							End If<br>							<br>						Next<br>						<br>					Next<br>					<br>				End If<br>			<br>			Next<br>				<br>				Block(1) = NewBlock()<br>				<br>				ShapeType = Rnd(7)<br><br>				Block(2) = NewShape(ShapeType,2)<br>				Block(3) = NewShape(ShapeType,3)<br>				Block(4) = NewShape(ShapeType,4)<br>			<br>		Else<br>	<br>			TranslateEntity Block(1),x,y,0<br>	<br>		End If<br>	<br>		UpdateWorld<br>	<br>	Next<br>	<br>	RenderWorld<br>	<br>		<br>;	o = 10<br>;	q = 10<br>;	<br>;	For r = 1 To 20<br>;	<br>;		For c = 1 To 11<br>;		<br>;			If Grid(c,r) = 0<br>;			<br>;			Text p,q,"0"<br>;			<br>;			Else<br>;			<br>;			Text p,q,"X"<br>;			<br>;			End If<br>;			<br>;			p = p + 10<br>;			<br>;		Next<br>;		<br>;		q = q + 10<br>;		<br>;		p = 10<br>;	<br>;	Next<br>	<br>	Flip<br>	<br>Wend<br><br>;;;;;;;;;;;;;;;;;;;;<br>;                  ;<br>;  Main ends here  ;<br>;                  ;<br>;;;;;;;;;;;;;;;;;;;;<br><br><br>Function InitGame()<br><br>	For a = 0 To 20 Step 2<br>	<br>		x = -10 + a<br>	<br>		BottomWall = CreateCube()<br>		PositionEntity BottomWall,x,-20,30<br>		EntityType BottomWall,1	<br>		<br>	Next<br>	<br>	For a = 0 To 40 Step 2<br>	<br>		y = 20 - a<br>	<br>		LeftWall = CreateCube()<br>		PositionEntity LeftWall,-12,y,30<br>		EntityType LeftWall,1<br>		<br>		<br>		RightWall = CreateCube()<br>		PositionEntity RightWall,12,y,30<br>		EntityType RightWall,1<br>		<br>	Next<br>	<br>	<br>	aBlock = NewBlock()<br>	<br>	Return aBlock<br>	<br>End Function<br><br>Function NewShape(ShapeType,BlockNo)<br><br>	aBlock = CreateCube(Block(1))<br>	EntityRadius aBlock,0.5<br>	EntityType aBlock,2<br>	EntityColor aBlock,100,100,100<br>	<br>	Select ShapeType<br>		Case 1<br>			Select BlockNo<br>				Case 2<br>					PositionEntity aBlock,0,2,0<br>				Case 3<br>					PositionEntity aBlock,0,4,0<br>				Case 4<br>					PositionEntity aBlock,0,6,0<br>			End Select	<br>		Case 2<br>			Select BlockNo<br>				Case 2<br>					PositionEntity aBlock,2,0,0<br>				Case 3<br>					PositionEntity aBlock,0,2,0<br>				Case 4<br>					PositionEntity aBlock,0,4,0<br>			End Select<br>		Case 3<br>			Select BlockNo<br>				Case 2<br>					PositionEntity aBlock,-2,0,0<br>				Case 3<br>					PositionEntity aBlock,0,2,0<br>				Case 4<br>					PositionEntity aBlock,0,4,0<br>			End Select<br>		Case 4<br>			Select BlockNo<br>				Case 2<br>					PositionEntity aBlock,0,2,0<br>				Case 3<br>					PositionEntity aBlock,0,4,0<br>				Case 4<br>					PositionEntity aBlock,2,2,0<br>			End Select	<br>		Case 5<br>			Select BlockNo<br>				Case 2<br>					PositionEntity aBlock,0,2,0<br>				Case 3<br>					PositionEntity aBlock,2,2,0<br>				Case 4<br>					PositionEntity aBlock,2,0,0<br>			End Select<br>		Case 6<br>			Select BlockNo<br>				Case 2<br>					PositionEntity aBlock,2,0,0<br>				Case 3<br>					PositionEntity aBlock,2,2,0<br>				Case 4<br>					PositionEntity aBlock,4,2,0<br>			End Select	<br>		Case 7<br>			Select BlockNo<br>				Case 2<br>					PositionEntity aBlock,0,2,0<br>				Case 3<br>					PositionEntity aBlock,-2,2,0<br>				Case 4<br>					PositionEntity aBlock,2,0,0<br>			End Select		<br>	End Select<br>	<br>	Collisions 2,1,1,1<br>	<br>	Return aBlock<br><br>End Function<br><br><br>Function NewBlock()<br><br>	aBlock = CreateCube()<br>	EntityRadius aBlock,0.5<br>	PositionEntity aBlock,0,22,30<br>	EntityType aBlock,2<br>	EntityColor aBlock,150,100,100<br>	<br>	Return aBlock<br><br>End Function<br><br>Function PlaceBlock()<br><br>	aBlock = CreateCube()<br>	EntityRadius aBlock,0.5<br>	EntityType aBlock,1<br>	EntityColor aBlock,100,100,100<br>	<br>	Return aBlock<br><br>End Function<br>[/CODE] <br><br></td></tr></table><br>
<a name="219778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tricky</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd love to sort this out for you, but that will need time... I first need to install Blitz on my new PC, and then try the entire code...<br><br>Bugfixing other people's code is not really my forte... <br><br></td></tr></table><br>
<a name="219792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wouldn't use the built-in collision detection for this.  Blitz's collision detection is great for what it is designed for, semi-realistic in an arbitrary level, but Tetris is neither realistic nor arbitrary.  What I would do is check manually, by comparing block positions and the wall, before moving if the shape is already abutting the wall, in which case I won't move it.  Along the same lines I would represent the blocks at the bottom of the level in an array and check that array before moving the shape down.  If the shape has landed on blocks then add the shape to the array. <br><br></td></tr></table><br>
<a name="219849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the Tetris game that I completed a few weeks ago, I have the entire playfiled stored in a 2 dimensional array Playfield(x,y) and before I move the blocks I check to see if the piece can't move any further or if it has reached the left or right wall. If it can't move anymore I place the block into the array. I have a rutine that checks the entire array for filled lines and if there is any they are deleted and everything is moved down. The current block is not part of the array until it can't move anymore. Until then it is moved seperately on top of the playfield.<br><br>I hope that helps. <br><br></td></tr></table><br>
<a name="219897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the help guys.<br><br>I am already storing stationary blocks in an array that scans for full lines.  It clears if there is a full line and moves the rest of the array down.<br><br>So I should be able to use this for the collision detection too.<br><br>Thanks again. <br><br></td></tr></table><br>
<a name="219974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, it seems to be working now.<br><br>For anyone who's interested here is the code I came up with.  Cursors move and rotate.<br><br>Any suggestions on improvements so far welcome.<br><br>[CODE]<br>;;;;;;;;;;;;;;;;;;;;<br>;                  ;<br>; Main starts here ;<br>;                  ;<br>;;;;;;;;;;;;;;;;;;;;<br><br>Dim Grid(11,20)<br>; Cube,Gridx,Gridy,Left,Right,Down,Rotate,Realx,Realy<br>Dim Block(4,9)<br><br>Timer = InitGame()<br><br>While Not KeyHit(1)<br><br>	Frames = WaitTimer(Timer)<br>	<br>	For k = 1 To Frames<br>	<br>		MoveShape()<br>	<br>		UpdateWorld<br>	<br>	Next<br>	<br>	RenderWorld<br>	<br>	Flip<br>	<br>Wend<br><br>;;;;;;;;;;;;;;;;;;;;<br>;                  ;<br>;  Main ends here  ;<br>;                  ;<br>;;;;;;;;;;;;;;;;;;;;<br><br><br>Function InitGame()<br><br>	Graphics3D 800,600<br><br>	SetBuffer BackBuffer()<br><br>	Camera = CreateCamera()<br>	CameraViewport Camera,0,0,GraphicsWidth(),GraphicsHeight()<br><br>	Light = CreateLight()<br>	<br>	For a = 0 To 20 Step 2<br>		<br>		x = -10 + a<br>	<br>		BottomWall = CreateCube()<br>		PositionEntity BottomWall,x,-20,30<br>			<br>	Next<br>	<br>	For a = 0 To 40 Step 2<br>	<br>		y = 20 - a<br>	<br>		LeftWall = CreateCube()<br>		PositionEntity LeftWall,-12,y,30<br>		<br>		RightWall = CreateCube()<br>		PositionEntity RightWall,12,y,30<br>		<br>	Next<br>	<br>	NewShape()<br>	<br>	Timer = CreateTimer(5)<br>	<br>	Return Timer<br>	<br>End Function<br><br><br><br>Function NewShape()<br><br>	SeedRnd = MilliSecs()<br>	<br>	ShapeType = Rnd(1,7)<br>	<br>	For a = 1 To 4<br>	<br>		Block(a,1) = NewBlock(ShapeType,a)<br>	<br>	Next<br><br>End Function<br><br><br><br>Function NewBlock(ShapeType,BlockNo)<br><br>	If BlockNo = 1<br>	<br>		aBlock = CreateCube()<br>		PositionEntity aBlock,0,22,30<br>		EntityColor aBlock,150,100,100<br><br>	Else<br>	<br>		aBlock = CreateCube(Block(1,1))<br>		EntityColor aBlock,100,100,100<br>	<br>		Select ShapeType<br>			Case 1<br>				Select BlockNo<br>					Case 2<br>						PositionEntity aBlock,0,2,0<br>					Case 3<br>						PositionEntity aBlock,0,4,0<br>					Case 4<br>						PositionEntity aBlock,0,6,0<br>				End Select	<br>			Case 2<br>				Select BlockNo<br>					Case 2<br>						PositionEntity aBlock,2,0,0<br>					Case 3<br>						PositionEntity aBlock,0,2,0<br>					Case 4<br>						PositionEntity aBlock,0,4,0<br>				End Select<br>			Case 3<br>				Select BlockNo<br>					Case 2<br>						PositionEntity aBlock,-2,0,0<br>					Case 3<br>						PositionEntity aBlock,0,2,0<br>					Case 4<br>						PositionEntity aBlock,0,4,0<br>				End Select<br>			Case 4<br>				Select BlockNo<br>					Case 2<br>						PositionEntity aBlock,0,2,0<br>					Case 3<br>						PositionEntity aBlock,0,4,0<br>					Case 4<br>						PositionEntity aBlock,2,2,0<br>				End Select	<br>			Case 5<br>				Select BlockNo<br>					Case 2<br>						PositionEntity aBlock,0,2,0<br>					Case 3<br>						PositionEntity aBlock,2,2,0<br>					Case 4<br>						PositionEntity aBlock,2,0,0<br>				End Select<br>			Case 6<br>				Select BlockNo<br>					Case 2<br>						PositionEntity aBlock,2,0,0<br>					Case 3<br>						PositionEntity aBlock,2,2,0<br>					Case 4<br>						PositionEntity aBlock,4,2,0<br>				End Select	<br>			Case 7<br>				Select BlockNo<br>					Case 2<br>						PositionEntity aBlock,0,2,0<br>					Case 3<br>						PositionEntity aBlock,-2,2,0<br>					Case 4<br>						PositionEntity aBlock,2,0,0<br>				End Select		<br>		End Select<br><br>	End If<br>	<br>	Return aBlock<br>	<br>End Function<br><br><br>Function MoveShape()<br><br>	LBlocked = 0<br>	RBlocked = 0<br>	DBlocked = 0<br>	<br>	;Rotate<br>	If KeyHit(200)<br>	<br>		TurnEntity Block(1,1),0,0,90<br>		<br>		TurnBack = 0<br>		<br>		For a = 1 To 4<br>		<br>			TranslateToGrid(a)<br>			CheckRotate(a)<br>			<br>			If Block(a,7) = 1<br>			<br>				TurnBack = 1<br>			<br>			End If<br>		<br>		Next<br>		<br>		If TurnBack = 1<br>		<br>			TurnEntity Block(1,1),0,0,-90<br>		<br>		End If<br>		<br>	End If	<br><br>	;CheckMovement<br>	For a = 1 To 4<br>	<br>		TranslateToGrid(a)<br>		CheckMovement(a)<br>		<br>		If Block(a,4) = 1<br>			<br>			LBlocked = 1<br>			<br>		End If<br>		<br>		If Block(a,5) = 1<br>			<br>				RBlocked = 1<br>			<br>		End If<br>		<br>		If Block(a,6) = 1<br>		<br>			DBlocked = 1<br>		<br>		End If<br><br>	Next<br>	<br>	x=0<br>	y=-2<br>	<br>	If KeyHit(203)<br>	<br>		If Not LBlocked = 1<br>		<br>			x = -2<br>		<br>		End If<br>	<br>	End If<br>	<br>	If KeyHit(205)<br>	<br>		If Not RBlocked = 1<br>		<br>			x = 2<br>		<br>		End If<br>	<br>	End If<br>	<br>	If DBlocked = 1<br>		<br>		MoveToGrid()<br>		<br>		CheckFull()<br>	<br>		NewShape()<br>	<br>	Else<br>	<br>		TranslateEntity Block(1,1),x,y,0<br>	<br>	End If	<br>	<br>End Function<br><br>Function TranslateToGrid(BlockNo)<br><br>	x = EntityX(Block(BlockNo,1),True)<br>	y = EntityY(Block(BlockNo,1),True)<br>	<br>	a = x/2 + 6<br>	b = y/2 + 10<br>	<br>	Block(BlockNo,2) = a<br>	Block(BlockNo,3) = b<br>	Block(BlockNo,8) = x<br>	Block(BlockNo,9) = y<br><br>End Function<br><br><br>Function CheckMovement(BlockNo)<br><br>	Blockx = Block(BlockNo,2)<br>	Blocky = Block(BlockNo,3)<br>	<br>	For a = 4 To 6<br>	<br>		Block(BlockNo,a) = 0<br>	<br>	Next<br><br>	;CheckLeft<br>	<br>	If  Blockx = 1<br>		<br>		Block(BlockNo,4) = 1<br>		<br>	Else<br>	<br>		If Blocky &lt;= 20<br>		<br>			If Not Grid(Blockx-1,Blocky-1) = 0<br>			<br>				Block(BlockNo,4) = 1<br>			<br>			End If<br>		<br>		End If<br>			<br>	End If<br>	<br>	;CheckRight<br>	<br>	If Blockx = 11<br>	<br>		Block(BlockNo,5) = 1<br>		<br>	Else<br>	<br>		If Blocky &lt;= 20<br>		<br>			If Not Grid(Blockx+1,Blocky-1) = 0<br>			<br>				Block(BlockNo,5) = 1<br>			<br>			End If<br>		<br>		End If<br>	<br>	End If<br>	<br>	;CheckDown<br>	<br>	If Blocky = 1<br>	<br>		Block(BlockNo,6) = 1<br>	<br>	Else<br>	<br>		If Blocky &lt;= 21<br>		<br>			If Not Grid(Blockx,Blocky-1) = 0<br>			<br>				Block(BlockNo,6) = 1<br>			<br>			End If<br>		<br>		End If<br>	<br>	End If<br>	<br>End Function<br><br>Function MoveToGrid()<br><br>	For a = 1 To 4<br>	<br>		If Not Block(a,3) &gt; 20<br>		<br>			Grid( Block(a,2),Block(a,3) ) = CreateCube()<br>			PositionEntity Grid( Block(a,2),Block(a,3) ),Block(a,8),Block(a,9),30<br>			EntityColor Grid( Block(a,2),Block(a,3) ),100,100,100<br>			<br>		Else<br>		<br>			GameOver()<br>		<br>		End If<br>	<br>	Next<br>	<br>	FreeEntity Block(1,1)<br><br>End Function<br><br>Function CheckFull()<br><br>	For r = 1 To 20<br>					<br>		Full = 1<br>					<br>		For c = 1 To 11<br>					<br>			If Grid(c,r) = 0<br>						<br>				Full = 0<br>					<br>			End If<br>					<br>		Next<br>					<br>		If Full = 1<br>					<br>			For c = 1 To 11<br>						<br>				FreeEntity Grid(c,r)<br>				Grid(c,r) = 0<br>						<br>			Next<br>						<br>			For s = r + 1 To 20<br>						<br>				For c = 1 To 11<br>							<br>					If Not Grid(c,s) = 0<br>							<br>							TranslateEntity Grid(c,s),0,-2,0<br>							<br>						Grid(c,s-1) = Grid(c,s)<br>									<br>						Grid(c,s) = 0<br>							<br>					End If<br>							<br>				Next<br>						<br>			Next<br>			<br>		CheckFull()<br>					<br>		End If<br>			<br>	Next<br><br>End Function<br><br>Function GameOver()<br><br>	ClearWorld<br><br>	Stop<br><br>End Function<br><br>Function CheckRotate(BlockNo)<br><br>	Blockx = Block(BlockNo,2)<br>	Blocky = Block(BlockNo,3)<br>	<br>	Block(BlockNo,7) = 0<br>	<br>	If Blockx &lt; 1 Or Blockx &gt; 11 Or Blocky &lt; 2<br>	<br>		Block(BlockNo,7) = 1<br>	<br>	End If<br>	<br>	If Blocky &lt; 20<br>	<br>		If Not Grid(Blockx,Blocky) = 0<br>		<br>			Block(BlockNo,7) = 1<br>		<br>		End If<br>	<br>	End If<br><br>End Function<br><br>[/CODE] <br><br></td></tr></table><br>
<a name="220034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >robleong</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Daniel,<br><br>If this is your first game on Blitz, I look forward to seeing more!!<br><br>Keep it up - great job!<br><br>Robert. <br><br></td></tr></table><br>
<a name="220038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Robert,<br><br>I'm still working on it but it's shaping up quite well now.  I've added colours to the blocks and also it now shows the next shape.<br><br>Just need to add a score counter and also levels and it should be just about there. <br><br></td></tr></table><br>
<a name="220044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >robleong</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should consider posting it in the showcase section of BlitzCoder... - it will be well received there! <br><br></td></tr></table><br>
<a name="220056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think it's quite good enough for that, apart from to show how easy it is to make your first game perhaps. <br><br></td></tr></table><br>
<a name="220076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >robleong</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It certainly is "good enough" for BlitzCoder!! Just touch it up a little to include a score maybe, and paste it there. If you don't think it's complete enough, you could put a version number &lt; 1 on it, and alter it later.<br><br>Anyway, cheers, and keep up the great programming. <br><br></td></tr></table><br>
<a name="220081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've now added a score.<br><br>Want to make an intro screen and varying levels of difficulty now.<br><br>Once I've finished tweaking I'll put it up. <br><br></td></tr></table><br>
<a name="220143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The latest version can be found here, for anyone who is interested:<br><br><a href="http://members.fortunecity.com/rainking2/BlockDropV0.71.zip" target="_blank">http://members.fortunecity.com/rainking2/BlockDropV0.71.zip</a> <br><br></td></tr></table><br>
<a name="220148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have any problems downloading go here:<br><br><a href="http://members.fortunecity.com/rainking2/" target="_blank">http://members.fortunecity.com/rainking2/</a><br><br>And click download BlockDrop <br><br></td></tr></table><br>
<a name="220157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >robleong</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks good, Daniel! One small bug - if you score a high score from level 2 upwards, your high score disappears when you restart the game at level 1... <br><br></td></tr></table><br>
<a name="220159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Rob.<br><br>I think the problem you are experiencing is because it doesn't save the high score if you close the game and open it again.<br><br>I'll be fixing this by writing it to a file in a future version.  Also I have plans to add a full-screen option, a pause function, and of course better graphics etc. <br><br></td></tr></table><br>
<a name="220161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >robleong</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Daniel, I'm not talking about restarting the game by double-clicking the .exe file. Consider rechecking your high-score code as I think there is a bug... <br><br></td></tr></table><br>
<a name="220166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> See what you mean now.<br><br>Fixed it in Version 0.73.<br><br>Thanks for the help :) <br><br></td></tr></table><br>
<a name="220363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Version 0.75 is up at <a href="http://members.fortunecity.com/rainking2/" target="_blank">http://members.fortunecity.com/rainking2/</a><br><br>Here's the change log from 0.71:<br><br>Change Log<br><br>0.75 (20 May 2003)<br><br>Slowed the down movement of the blocks by half<br><br>0.74 (20 May 2003)<br><br>Added Pause Function (Use P key to pause and unpause)<br><br>0.73 (19 May 2003)<br><br>Fixed High Score bug<br><br>0.72 (19 May 2003)<br><br>Cleaned up the level-up scoring <br><br></td></tr></table><br>
<a name="221466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rainking. Hmmm. Maiden BB? <br><br></td></tr></table><br>
<a name="222208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes.<br><br>Who be you? :) <br><br></td></tr></table><br>
<a name="222216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi :) I'm Rottbott over there as well, I just don't post very much. Ah well it's good to know at least someone on these forums has music taste :) <br><br></td></tr></table><br>
<a name="222377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> What Blitz stuff have/are you working on at the moment? <br><br></td></tr></table><br>
<a name="222492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> At the moment, a rather silly MMORPG called Another Life, and a multiplayer take-over-the-universe type strategy game called Galactic Empire Conquest II :)<br><br>Screenshots:<br><br>Another Life:<br><img src="http://marksweb.pwp.blueyonder.co.uk/images/Screenshots/NewStuff.JPG"><br><br>GEC2:<br><img src="http://marksweb.pwp.blueyonder.co.uk/images/Screenshots/game.JPG"><br><br>My programming is okay, but my graphics skills are... let's just say 'unique' :-) <br><br></td></tr></table><br>
<a name="222499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> What happened to Galactic Empire Conquest I? ;)<br><br>I am designing a MMORPG myself at the moment, but I'm still deciding whether to use Blitz3d for it or a prebuilt C++ engine since there are lots of good ones out there.  I'm a little more at home with C++ to be honest but my BASIC skills are coming back to me slowly since I picked up Blitz3D again.<br><br>Maybe you would like to collaborate on the project?  So far I have myself and 2 artists, 1 doing concept art and one who is a graphic designer.  I still have alot of game design to do, and then concept art etc before the coding starts. <br><br></td></tr></table><br>
<a name="222951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Having "Game Name II" makes it sound cooler. There was a game called F-22 Lightning II a few years ago, and one of the mags that reviewed it pointed out that there had never been an F-22 Lightning :-) Wait till you see the names for the ships and weapons in it, they'll sound rather familiar to you...<br><br>Anyway, I'd like to work with you on your game, it'd be a luxury to have some other buggers to do some art for a change. I suggest using Blitz3D though 'cos I don't have enough C++ experience to tackle something like that yet (although I'd get the hang of it quite fast I suppose..) <br><br></td></tr></table><br>
<a name="223030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay going to fire you a PM on the Iron Maiden BB with the details.<br><br>Catch up with you there. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
