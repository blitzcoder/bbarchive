<!DOCTYPE html><html lang="en" ><head ><title >Terrain LOD pop-in is horrible</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Terrain LOD pop-in is horrible</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Terrain LOD pop-in is horrible</a><br><br>
<a name="989178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IcyDefiance</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, so I'm not new to the BlitzBasic coding language, but I never got very good at the 3D aspect before moving on to some web development languages.  Now I'm back and working on a small FPS just for the practice it'll give me.<br><br>Anyway, my problem is that the terrain is morphing a lot, even when it's very close to the camera.  When I increase the TerrainDetail, it seems to morph less, but it gets very rough when viewing it from very close.  The best median I could find was 6,000, and the pop-in might be slow enough that people won't notice, once I slow down the camera to the speed that people will be moving once I put characters in the game, but the roughness is still horrible.<br><br>Here's the code handling the terrain:<br><br><pre class=code>Global ground = LoadTerrain("terrains/temperate_HM.jpg")
TerrainDetail ground,6000,True
ScaleEntity ground,1,200,1</pre><br><br>Terrain is 1024x1024 px, supposed to represent 2km of distance.  Generated with L3DT, I've tried using jpg, png, and bmp files, but there's little to no improvement with any of them.  I could always save it as .3ds or .x or something, but I really would like to keep the polycount down as far as possible if I can.<br><br>Camera moves at a rate of 2 units per frame.  Frame rate is regulated at 62 fps, and it achieves this easily on my computer.<br><br>Here's a screenshot of the roughness:<br><br><img src="http://i457.photobucket.com/albums/qq291/Yippee2393/lodPopIn.png"><br><br>Here's the heightmap if it helps: <a href="http://i457.photobucket.com/albums/qq291/Yippee2393/temperate_HM.jpg" target="_blank">http://i457.photobucket.com/albums/qq291/Yippee2393/temperate_HM.jpg</a> <br><br></td></tr></table><br>
<a name="989183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried applying a blur to your heightmap (2 pixels worth maybe?)? <br><br></td></tr></table><br>
<a name="989191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IcyDefiance</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah.  I even went overkill and did a 10px gaussian blur, and it didn't make any noticeable difference.  So I don't think it's a problem with the heightmap itself. <br><br></td></tr></table><br>
<a name="989203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you considered something like this?<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=84809" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=84809</a><br><br>As far as I know nobody really uses Blitz terrains for this reason and many others. If what you want to achieve can be done with a mesh, I would strongly recommend that you do use a mesh. <br><br></td></tr></table><br>
<a name="989206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IcyDefiance</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I bookmarked that link to look through when I find the time.<br><br>And yeah, I guess I'll have to use a mesh.<br><br>Thanks for your help.<br><br>EDIT: Problem #2<br><br><pre class=code>Global ground = LoadMesh("terrains/temperate/temperateTerrain.b3d")
groundTEX = LoadTexture("terrains/temperate_TX.jpg")
EntityTexture ground, groundTEX</pre><br><br><img src="http://i457.photobucket.com/albums/qq291/Yippee2393/badTex.png"><br><br>I've had this same problem with other meshes, but terrains, planes (such as the water in that screen that needs to be repositioned...), and the other odd thing here and there work perfectly.  Why?  And what can I do to get the texture to do something besides making my terrain green? <br><br></td></tr></table><br>
<a name="989273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks like UV coords aren't set for that green terrain. <br><br></td></tr></table><br>
<a name="989286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikhailV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Yippee: Don't use JPEG format for heightmap! Lossless only - PNG, BMP. <br><br></td></tr></table><br>
<a name="989339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IcyDefiance</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Matty: That's my first thought, but if L3DT exported it and didn't give me any options about UV coords, you'd think it would work with a texture exported from the same program...  Meh, I'll try exporting as *.x or something.<br><br>@MikhailV: I know quite a bit about images, a whole lot more than I do about 3D game programming, and a JPEG compressed to 95% quality is just as good as a PNG or BMP for just about anything.  This is no exception.  There's a couple things, like screenshots from games like RuneScape that you plan on using transparency on, that PNG's work better, but not many.<br><br>Of course, if I saved it in Paint (which compresses to 85% quality), that would make a difference, but I didn't.  It was exported with L3DT, which compresses to 95%.<br><br>Besides, I already stated that I already tried using PNG and BMP, and it made no difference.<br><br>EDIT: Oh, crap, I export as *.x instead, and load it into the program and it doesn't even appear.  It exists, because I can handle it without errors, but it's invisible, or too small to appear, or in a different location...<br><br>EDIT 2: All right, I spend a couple hours figuring out that BlitzTiles thing, re-exported my terrain 1 unit bigger in .ter format, etc, and it works perfectly.  Thanks for your help, everyone. <br><br></td></tr></table><br>
<a name="989789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> "As far as I know nobody really uses Blitz terrains for this reason"<br><br>I hate comments like this.<br>Blitz terrains are highly optimised and I've used them in all my products.<br>Mesh terrains caused an immediate frame loss.<br><br>You just have to tweak/play with all the settings. <br><br></td></tr></table><br>
<a name="989817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IcyDefiance</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, John, but I did tweak all of the settings I could find and I couldn't get it to work right.  I know it can work right if done right, but I really like this BlitzTiles and it made things just that much easier once I got the code I needed in there. <br><br></td></tr></table><br>
<a name="989818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> you do understand that B3D terrains are 8 bits only? <br><br></td></tr></table><br>
<a name="990688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Naughty, he's talking about LOD pop-in.<br>That's a permanent feature of Blitz, but he'd like it optimised. <br><br></td></tr></table><br>
<a name="992170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grindalf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found that 1024x1024 terrains ALWAYS have a lot of pop in<br>I always reduce the heightmap to about 256x256<br>and you can always up the terraindetail. <br><br></td></tr></table><br>
<a name="993336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> a JPEG compressed to 95% quality is just as good as a PNG or BMP for just about anything. <br></div> not entirely true, especially when you need 100% accurate color values for heights, masks etc. Jpeg will still dither slightly even at very high quality. <br><br></td></tr></table><br>
<a name="993452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fox95871</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Call me a jerk for saying anything bad about Blitz3D, but I decided a long time ago to never use heightmaps when I saw the pop in problems it has. It might take a little longer to make things in Maya, but then there's never any pop ins, which is well worth it I think.<br><br>If you really like heightmaps though, I did notice once that shrinking everything often makes things much more accurate in general because then it's all in the low decimal range, or it's all closer to 0,0,0... something like that. I never tested it on pop ins, but it worked great for Driver when the wheels were falling through the mesh at the far extents of a bigger landscape I made for it.<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=85855#972247" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=85855#972247</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
