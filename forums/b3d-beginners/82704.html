<!DOCTYPE html><html lang="en" ><head ><title >Joystick Name?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Joystick Name?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Joystick Name?</a><br><br>
<a name="932860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone happen to know of a .dll  and how to use it (Or any other method, I hjust figured it would most likely be a .dll) that can obtain the name of a joystick/controller? <br><br></td></tr></table><br>
<a name="932863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> A guy called 'Pepsi' did one years ago so you might check the toolbox or something.  Not sure if its still around anywhere, though.<br><br>[edit] Oh, actually I have it sat on my hard drives among 8 years worth of backups.  Not sure it'd be 'proper' to upload it though since it isn't mine to do so with.<br><br>If Pepsi OKs it I'll maybe make it available somewhere. <br><br></td></tr></table><br>
<a name="932875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks GfK, yeah I remember Pepsi did a LOT of joystick stuff. I'll have another look over the toolbox and code archives int he meantime :D <br><br></td></tr></table><br>
<a name="933187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You dont need a dll for that - you can retrieve the joystick name and more (like Vendor ID and Product ID) just using Windows API call "joyGetDevCaps", just google it and it shouldn't be too hard to use it. <br><br></td></tr></table><br>
<a name="933206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> i guess knowing the joypad name makes it easier in supporting multiple types of button layouts without resorting to configuration screnes<br><br>if microsoft 360 joypad use this config<br>if ps3 joypad use this config<br>if logic3 use this config<br>if saitek use this config<br>etc<br>i guess youd need to know the joypads themselves to make sure it works right (not that im saying you need to buy every stick under the sun) <br><br></td></tr></table><br>
<a name="933852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exactly, GingerTea that's where I'm headed with this! :)<br><br>SLotman... <div class="quote"> You dont need a dll for that - you can retrieve the joystick name and more (like Vendor ID and Product ID) just using Windows API call "joyGetDevCaps", just google it and it shouldn't be too hard to use it <br></div><br>Okay, you're talking to an idiot here.. how can I make a Windows API call without a DLL? <br><br></td></tr></table><br>
<a name="933894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you're asking for trouble if you're going to hard code pad configurations based on their names.   What happens when a new pad comes out that your app doesn't recognise or there is one you didn't support etc..<br><br>If your going to support joypads then you should support them ALL ( analogue &amp; digital ) by letting the user configure them as they like,  the name is irrelevant IMO.<br><br>Stevie <br><br></td></tr></table><br>
<a name="933899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with Stevie G.<br><br>Its useful to the player if you can display the joystick name in situations where there might be several connected to the PC and they want to select a specific one to use.<br><br>As for storing a separate joystick configuration based on its name - forget it.  There are millions.  And a lot of them are "Generic Gamepad" kind of thing anyway. <br><br></td></tr></table><br>
<a name="933993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> how can I make a Windows API call without a DLL? <br></div><br>Userlibs :)<br><br>Of course you will actually be accessing a dll, but one from windows... you don't need to create/compile a dll yourself.<br><br><div class="quote"> Its useful to the player if you can display the joystick name in situations where there might be several connected to the PC and they want to select a specific one to use.<br><br>As for storing a separate joystick configuration based on its name - forget it. There are millions. And a lot of them are "Generic Gamepad" kind of thing anyway. <br></div><br><br>Pretty much this is what I used it for... but also for identifying which joystick is a x360 (based on PId and VId, not on names) - so I can treat them with my x360 userlib instead of Blitz internal commands ;) <br><br></td></tr></table><br>
<a name="934024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Pretty much this is what I used it for... but also for identifying which joystick is a x360 (based on PId and VId, not on names) - so I can treat them with my x360 userlib instead of Blitz internal commands ;)<br> <br></div><br><br>Just curious but what features does a x360 pad have that others don't which requires a userlib? <br><br></td></tr></table><br>
<a name="934043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> afaik none<br>the dpad is listed as a hat (and last i tried blitz wont nativly see it)<br>the triggers are Z and not 11/12 or whatever, so using both buttons at the same time isnt an option ... pitty<br>and other buttons MIGHT be in a different order compared to a 'typical' pc pad, ive only compared with a ps3 clone<br><br>so unless it fixes the joyhat issues and allows both triggers then im in the dark as i was before finding out it existed ;)<br><br>edit:<br>unless it supports the chatpad thingie?<br>edit:<br><div class="quote"> Library to read and control XBOX 360 joysticks. With this lib you can even make them vibrate. <br></div> <br><br></td></tr></table><br>
<a name="934068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Of course you will actually be accessing a dll, but one from windows... you don't need to create/compile a dll yourself <br> <br></div><br><br>Thanks, I guess I shoulda been more specific originally, the whole userlibs/decals/dll thingy is all the same to me :D<br><br>I'll give it a try googling then and see what I can find! <br><br></td></tr></table><br>
<a name="934097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay.,.. I am not good at this.<br><br>I have managed to obtain the following info on joyGetDevCaps() from MSDN, <br><br><pre class=code>

joyGetDevCaps(
  UINT_PTR  uJoyID, 
  LPJOYCAPS pjc,    
  UINT      cbjc    
);



typedef struct { 
    WORD wMid; 
    WORD wPid; 
    TCHAR szPname[MAXPNAMELEN]; 
    UINT wXmin; 
    UINT wXmax; 
    UINT wYmin; 
    UINT wYmax; 
    UINT wZmin; 
    UINT wZmax; 
    UINT wNumButtons; 
    UINT wPeriodMin; 
    UINT wPeriodMax; 
    UINT wRmin; 
    UINT wRmax; 
    UINT wUmin; 
    UINT wUmax; 
    UINT wVmin; 
    UINT wVmax; 
    UINT wCaps; 
    UINT wMaxAxes; 
    UINT wNumAxes; 
    UINT wMaxButtons; 
    TCHAR szRegKey[MAXPNAMELEN]; 
    TCHAR szOEMVxD[MAX_JOYSTICKOEMVXDNAME]; 
} JOYCAPS;
</pre><br><br>I understand a 'Structure' to be equivalent in C to a Blitz 'Custom Type', however, I am not sure how to actually extract the 'fields'.<br><br>I've gotten only so far with the Decls:<br><pre class=code>
.lib "WinAPI.dll"
GetController(uJoyID,pjc,cbjc):"joyGetDevCaps"
</pre><br>(Which I'm totally proud of the fact the function shows up in the Blitz IDE, tregardless of it working or not!!!)<br><br>To test this, I made the extremely simple bb code: <br><pre class=code>

Print GetController(0,0,0)

</pre><br>Which results in an "Illegal Type Conversion". <br>I'm guessing it's because I need some form of syntax to point to the fields I want, not just leave the parameters as they are, but I have no clue how to go about this.<br><br>Apologies for my complete ignorance, but any pointers would be really helpful! <br><br></td></tr></table><br>
<a name="934587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> This discussion has changed to a WinAPI discussion, so I've slapped in a new topic in the other forum. Please lock/delete or whatever is necessary :) <br><br></td></tr></table><br>
<a name="938208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>You dont need a dll for that - you can retrieve the joystick name and more (like Vendor ID and Product ID) just using Windows API call "joyGetDevCaps", just google it and it shouldn't be too hard to use it. <br> <br></div><br><br>Well, SLotman, it has proven too hard for me, It's been a coupla weeks now, but there's been no hit of replies. <br>ANYONE please, that knows more of decls, could you nudge me in the right direction some? <br><br></td></tr></table><br>
<a name="938299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I replied here: <a href="http://www.blitzmax.com/Community/posts.php?topic=82836" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=82836</a> <br><br></td></tr></table><br>
<a name="938890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Warner that really helps lots :) <br><br></td></tr></table><br>
<a name="938901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> O yes, and the error you got, is because the decl misses a % sign.<br>Wait, now I tried it, and I see, this should be the entire decl:<br><pre class=code>
.lib "Winmm.dll"

GetController%(uJoyID*, pjc*, cbjc):"joyGetDevCapsA"
</pre><br>This is the code I used for using it:<br><pre class=code>
jc = CreateBank(311)

uJoyID = CreateBank(2)

print "mmresult:"
Print GetController(uJoyID, jc, 310)

print "joyid:"
Print PeekShort(uJoyID, 0)

print "content jc:"
For i = 0 To 310
	b = PeekByte(jc, i)
	Write Chr$(b)
	If i Mod 30 = 29 Then Print
Next
</pre><br>Unf. I have no joystick, so it only returns a bunch of zeros here, but GetController return 165. <br><br></td></tr></table><br>
<a name="938920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright, thanks for looking into it... <br><br>I'll get cracking on wha tI can and post back if I have any more trouble. <br><br></td></tr></table><br>
<a name="939890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Warner! At least GetController returns something. For me, it's "6"<br>Though I too get the lines of zeros regardless of what controllers are plugged in if at all.<br><br>------------<br><br>Edit: <br><br>Woohooo! I just found this! Dunno why I didnt see it before:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=840" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=840</a><br><br>Right now, it's giving me a MAV but I think I'm making progress! <br><br></td></tr></table><br>
<a name="940014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is a good find. I think that inside uJoyID there should be a number which tells the PC which joystick it should read. Maybe the ID's starts off from one ? I hope that fredborg's code in the archive helps, that would be quite nice. <br><br></td></tr></table><br>
<a name="940300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> The name isn't too helpful either as it gives the driver name, which is just the windows one for me.<br><br>Seems I bit off a bigger chunk than I can chew, but Il chom away at it ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
