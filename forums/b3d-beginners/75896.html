<!DOCTYPE html><html lang="en" ><head ><title >Make cubemap light not shiney?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Make cubemap light not shiney?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Make cubemap light not shiney?</a><br><br>
<a name="848277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using a cubemap to light my character. It renders a small 16x16 cubemap of the surroundings, and it gives my character the look that he is being properly lit by his surroundings.<br><br>Looks great if he was wearing a shiney suit of armour ^_^<br><br>However, he's not. I have fiddled with different blend modes and setcubemode, and nothing really seems to work. In fact, the mode that best works, is the 3rd setcubemode. Which seems to invert the cubemap, but provide much better lighting.<br><br>Anyone have any ideas? I currently use the texture to provide detail and the cubemap to light him. <br><br></td></tr></table><br>
<a name="848281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, i have partially solved this by making my cubemap 2x2. It seems to flesh the light out more. Looks like i'll need to show and hide some light sprites to make my torch light more visible. Also have the problem of surfaces with lightmaps creating more light than the light source. Only really a problem with particle light sources, so the show and hide sprite idea should work.<br><br>I may also hide the lightmaps when rendering, so i only get the light sources... But, i will lose any reflective surfaces... <br><br></td></tr></table><br>
<a name="848345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone have any ideas or experiences doing this? <br><br></td></tr></table><br>
<a name="848350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The more detailed the cubemap, the more detailed the reflection.  The more detailed the reflection, the more shiny the surface appears.  A matte surface is just one which scatters light more.<br><br>So you need to either blur your cubemaps, or if you can't afford to do that, use a low res one, which you have done.  The low res one will not be as good of quality as a blurred one though, because you're only sampling four pixels on the screen, so you're gonna miss a lot.<br><br>I have a function in the code archives which will do a hardware accelerated blur.  If you use that with a lower res texture to boot, it might work.  But it would probably be costly to blur a larger texture enough.<br><br><br>Hm... a thought just occured to me how one might do a real box blur using a setup similar to the one I used, but different.  It would be a little slower because it would require you to copy the texture twice, but it would allow greater blur radiuses to be done in realtime.<br><br>It would involve drawing several copies of the texture offset horizontally on top of one another using the darken+add method I have in my blur function, and then copying the result, and then using the result to do the same thing vertically, and then copying that result to use it as the final texture.   I think that would result in a proper box blur.  The method I used leaves little circle cutout looking things at the corners of things in your texture.  So a blurred square has little circles on the corners that are missing kinda.  Also since it has to use so many copies of the image to render the texture large blur radiuses, there's a lot of overdraw. <br><br></td></tr></table><br>
<a name="848446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, i might just go with blurring the cubemap. Thanks for your suggestion :o) <br><br></td></tr></table><br>
<a name="848551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depending on how your scene is painted, you might use a set of low contrast materials for rendering the reflection pass. Before rendering the cube map, paint everything with it's low contrast material and then afterward paint it back with the normal materials. Exactly what the materials should be depends on the blend mode you use, but for example, with add blend mode, a completely black material gives you nothing at all, so if you worked in dark to medium shades of your colors, it would temper the affect and save you having to post process anything.<br><br>Since your cubemap res is so low, I'm not sure if the post-processing cost would be higher or lower. Just a thought, based on something similar I do with per-object glow effects in my own game engine. <br><br></td></tr></table><br>
<a name="848726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also a good suggestion. I'll try it out, thanks guys :o)<br><br>I was thinking of placing an appropriate sprite at each light emittor to give more light from them. But i'll have a tinker and see whats best. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
