<!DOCTYPE html><html lang="en" ><head ><title >Functions Problem (Moving Sphere)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Functions Problem (Moving Sphere)</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Functions Problem (Moving Sphere)</a><br><br>
<a name="1116498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Captain Wicker (crazy hillbilly)</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br>  I like to learn the hard way so could someone please look at this code and tell me what is wrong with it and why it will not work?<br><pre class=code>Graphics3D 800,600,32,2
SetBuffer BackBuffer()

Global cam=CreateCamera()

Local sphere=CreateSphere()
Global light=CreateLight()
PointEntity light,sphere

PositionEntity sphere,0,0,6


Repeat
	
	control()
	
	
	
	UpdateWorld
	RenderWorld
	Flip
Forever



;FUNCTIONS
Function control()
	If KeyDown(200) Then MoveEntity sphere,0,0,1
	If KeyDown(208) Then MoveEntity sphere,0,0,-1
	If KeyDown(203) Then MoveEntity sphere,-1,0,0
	If KeyDown(205) Then MoveEntity sphere,1,0,0
End Function
</pre> <br><br></td></tr></table><br>
<a name="1116500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's because you've defined sphere as Local, for some reason, so it isn't recognised inside the control() funtion. Make sphere Global, instead. <br><br></td></tr></table><br>
<a name="1116501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> sphere is a local variable and therefore inaccessible to the function "control()" - unless you pass it as a parameter, or declare it global. <br><br></td></tr></table><br>
<a name="1116502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Captain Wicker (crazy hillbilly)</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh ok thanks for that wonderful piece of info. :)<br>Thank you big10p! :)<br>Thank you Matty! :) <br><br></td></tr></table><br>
<a name="1116505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Useful Wikipedia resources:<br><br><a href="http://en.wikipedia.org/wiki/Variable_scope" target="_blank">http://en.wikipedia.org/wiki/Variable_scope</a><br><a href="http://en.wikipedia.org/wiki/Variable_%28programming%29#Scope_and_extent" target="_blank">http://en.wikipedia.org/wiki/Variable_%28programming%29#Scope_and_extent</a><br><a href="http://en.wikipedia.org/wiki/Call_stack" target="_blank">http://en.wikipedia.org/wiki/Call_stack</a><br><br>Variables in Blitz3D follow a simple lexical scoping rule with no nested procedures.<br><br>It's very important to master the concepts of scope and functions in order to proceed onto using "procedural programming", a powerful step up from simple structured programming. <br><br></td></tr></table><br>
<a name="1116525"></a>

<a name="1116526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent way to begin, Captain Wicker - a simple, but effective program which is easy enough to understand, but very easy to make changes to and update as you go!<br><br>I'd recommend you keep going with this framework, think of more ideas, such as, maybe introducing mouse controls to rotate the camera or such.<br><br><br><br><br><br><br><br><br>By declaring the sphere Global at the top instead of Local, everything is then perfect with that program.<br><br>You've made a great use of Whitespace and that really helps to see how the program is structured.<br><br>You've got 3 basic parts to it.<br><br>The first, is the "initialisation" part:<br>Thios sets the screen display, defines all the objects and (Global) variables you will need and makes sure everything's in the right place ready for the next part...<br><pre class=code>Graphics3D 800,600,32,2
SetBuffer BackBuffer()

Global cam=CreateCamera()

Local sphere=CreateSphere()
Global light=CreateLight()
PointEntity light,sphere

PositionEntity sphere,0,0,6

</pre><br><br>The second part, is the "Main Loop"<br>Very typical, this begins and ends with Repeat/Forever. <br><br>Other options are While/Wend or Repeat/Until which allow you to stop the Looping when cetain conditions arise.<br>My personal favouriote is<br><pre class=code> While ( Not (KeyHit (1) ) )
     ; Loop contents
 Wend</pre><br>Since this ensures that Pressing Escape will stop the program. The same can be achieved by using Repeat/Until<br><pre class=code> Repeat
     ; Loop contents
 Until (KeyHit (1) )
</pre><br>Or to keep the Forever, you can add a clause WITHIN the Loop to 'jump out' if Escape is pressed by usig Exit:<br><pre class=code> Repeat
     ; Loop contents
     If (KeyHit(1)) Then Exit
 Forever</pre><br><br>There are subtle differences between using these varieties of loops. Mainly, note than the condition (the check for Escape  being pressed in this case) for While/Wend accompanies the While command. This means that If escape had already been pressssed, the loop wont even execute at all - unlike the Repeat/Until where the condition is only checked at the END of the loop, accompanying "Until", so if Escape had been pressed earlier, the entire Loop would still run through ONCE.<br>The use of the Exit command allows the program to 'Jump Out' of any Loop (While/Wend, Repeat/Until/Forever and even For/Next loops) at any point within the Loop. Sometimes, it's handy to do just that!<br><br><br><br><br>In a game, this Main Loop would be where most things happen, although by putting the controls in the control() function, and just calling that inside the loop, you're not only keeping the Main Loop neat and tidy (which I feel is VERY important especially when you end up with very big, very complicated games), but you're also making it easier for yourself if you need to change something with the controls later. You only need to change the function withoout altering anything in the Main Loop, This is good coding practice.<br><pre class=code>
Repeat
	
	control()
	
	
	
	UpdateWorld
	RenderWorld
	Flip
Forever</pre><br><br><br><br><br><br><br><br><br><br><br>Finally, the third section is where you declare your control () function. (Also nicely and distinctly labelled with the ;FUNCTIONS comment!)<br>It's neat to keep this down here out of the way, and, as your program grows and you add more functions, these too can be declared at the bottom of the code away from the Main Loop and the Initialisation. I personally think it's great to do this, keeping them separated in such a way since the Initialisation part at the top AND the Main Loop are both directly  procedural when you run the program, whilst the functions are only run through as and when they are called. Basically, you're ensuring that as the program runs (and works through the code from top to bottom), that order is clear and easy to see when looking at the code.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1116586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Function control(Entity)
	If KeyDown(200) Then MoveEntity Entity,0,0,1
	If KeyDown(208) Then MoveEntity Entity,0,0,-1
	If KeyDown(203) Then MoveEntity Entity,-1,0,0
	If KeyDown(205) Then MoveEntity Entity,1,0,0
End Function
</pre><br>=) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
