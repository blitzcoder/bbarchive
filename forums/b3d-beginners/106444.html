<!DOCTYPE html><html lang="en" ><head ><title >Embedded midis</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Embedded midis</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Embedded midis</a><br><br>
<a name="1309885"></a>

<a name="1309886"></a>

<a name="1309887"></a>

<a name="1309888"></a>

<a name="1309889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fox95871</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello, I've been thinking about how much I like Blitz3d programs that use no outside media, because of all the cool stuff you can do with CreateMesh and other such commands. But is there a way to do that kind of thing with midis, so you don't have to rely on a midi file? In the past, I've used long lines of code that go way off the page - I think the maximum was 50 scrolls over - so I was thinking, maybe since midis are so small, I could do the same thing with the music, accessing each instrument to play at set times, and using colons to make it all as "off the page" as possible, so in the end it just looks like a few lines of code. Please don't hesitate to post anything that might help me with this... I guess probably unheard of request ;P <br><br></td></tr></table><br>
<a name="1310335"></a>

<a name="1310419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi fox95871<br><br>You found my topic here: <a href="http://www.blitzbasic.com/Community/post.php?topic=100066&amp;post=1179878" target="_blank">http://www.blitzbasic.com/Community/post.php?topic=100066&amp;post=1179878</a> and asked to aswer here.<br><br>No outside media means, that you don't want to use files? My tool does the opposite. it builds a audio file of each midi tone. At the end you work with dozends of "piano.ogg" instead of calling the piano via midi commands. So that is not what you are looking for...<br><br>There are some tools that can includ files into your compiled Exe. I don't remember the name, but I used it years ago successfully. That is very comfortable and easy to use.<br><br>The official way is to build an install file with installers like "inno setup". where you build a exe with all files you need. The installer unpacks the game files once at the users computer into a folder.<br><br>MIDI<br><br>Instead of using big midi files you can also fire single MIDI events. This is what I'm doing in all my software. It is super-small. To send a tone you only need a sequence of 3 bytes. To stop it another 3 bytes. You can define your own "song-format" where it may be possible to need 1 byte for one tone.<br><br>You need a MIDI userlib or build a wrapper to call the MCI or MIDI SERVICE: <a href="https://msdn.microsoft.com/de-de/library/windows/desktop/dd742875(v=vs.85).aspx" target="_blank">https://msdn.microsoft.com/de-de/library/windows/desktop/dd742875(v=vs.85).aspx</a><br><br>Blitz3D library:<br><a href="http://www.abrexxes.huntingsoftware.de/blitz/midi.zip" target="_blank">http://www.abrexxes.huntingsoftware.de/blitz/midi.zip</a><br><br>steps:<br>1.You check what MIDI devices are on the computer<br>2.You open a MIDI-OUT  device.<br>3. Send 3 bytes strings<br>4. jump to 3. for each tone<br>5. You close the device<br><br>A three byte string contains: <br><br>&lt;action+channel&gt;, &lt;midi note&gt;, &lt;midi velocity&gt;<br><br> action is what you want to do f.e. 143 mean "play a tone",<br><br>channel is a free number between 0 to 15 added to action, (use 0 for notes<br>10 for drums)<br> <br>midi note is the tone f.e. 60=C, 61=c#<br><br>volume=1-127, 0=note off<br><br>there are complete list of all command in the internet<br><br>I have no idea, how good this is working on Blitz3D, because I only work with BlitzMax. So good luck. <br><br></td></tr></table><br>
<a name="1310367"></a>

<a name="1310368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fox95871</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for taking the time to write all that :) The program that combines media with an exe is called Blitz media linker. I have it, and I think I'll go that way instead, using midis turned into oggs. <br><br></td></tr></table><br>
<a name="1310417"></a>

<a name="1310421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah! then my tool will be very comfortable for you. It plays a complete set (chromatic scales) of single tones on a MIDI instrument and saves each single tone into an audio file. <br><br>In your game you will be possible to combine this single audio sounds to create whole songs. The advantage is, that you can use a high quality MIDI instrument (ROLAND GS...), which often has a high latency of more than 200msec, to create the OGGs. But later the converted OGGs sounds will have 0 latency in your game.<br><br>If you use MIDI channel 10 and scan every note from 1 to 127, you will get 127 OGGs of a complete drum set.<br><br>Here is the correct link: <a href="http://www.blitzbasic.com/toolbox/toolbox.php?tool=264" target="_blank">http://www.blitzbasic.com/toolbox/toolbox.php?tool=264</a> <br><br></td></tr></table><br>
<a name="1310491"></a>

<a name="1310493"></a>

<a name="1310494"></a>

<a name="1310495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fox95871</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have over 30,000 midis, so any instrument Roland has, I probably run into at some point. Could I turn all the instruments into oggs, then write code that does the same thing as a midi, playing each instrument at a set time using PlaySound, or would Blitz3d blow up or something? By the way, I'm not trying to detract from what you made, I'd just rather do it myself. Having more control like that might also solve a problem I had a while ago, where I'd made it so the music in my games could be intro&gt;loop&gt;loop like in most games, but it always had delays, even though I used oggs, and they were properly loaded beforehand, and so on. Someone even posted something like "Please perfect this, it's beautiful!", but I was never able to. Anyway, I have a zillion and one questions about music coding, so I'll leave it at that for now. <br><br></td></tr></table><br>
<a name="1310529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> to run complete MIDI files you would need to many OGGs. That's the reason microsoft uses a virtual "sythesizer" like "ROLAND GS". There are 128 Instruments with each 80 scale notes  + 80 drum sound=10.000 OGGs.<br><br>But if you only use f.e. a piano within 4 octaves you will need max 60 OGGs or less. For a drum machine a dozend OGGs are often enough. This is the point where I prefer my converted sounds. Latency shrinks to 0 and files size is often below 4kB per OGG.  So no delays any more. <br><br>Good luck <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
