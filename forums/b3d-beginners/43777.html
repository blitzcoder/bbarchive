<!DOCTYPE html><html lang="en" ><head ><title >Cross / Dot Product question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Cross / Dot Product question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Cross / Dot Product question</a><br><br>
<a name="488651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have 2 vectors<br><br>vx1 = 10<br>vy1 = 0<br>vz1 = 0<br><br>vx2 = 20<br>vy2 = 0<br>vz2 = -10<br><br>Like so ....<br><br><pre class=code>

(1)

------v1
     / \
    /   \
   /     \
  v3      v2

(2) Needs to work for this also

-----v1--------v2
      !
      !
      v3

</pre><br><br><br>What I need is to find the normal vector between the two points v3.  How do I do this again ? <br><br></td></tr></table><br>
<a name="488658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need the cross product for that.  The cross product takes two vectors, and makes a new one at a 90 degree angle to both.  <br><br>It might make it easier to remember if you imagine that it CROSSES the plane that the two vectors form.<br><br>The dot product takes two vectors and returns a single number that tells you how much they point towards eachother.<br><br>The dot product is used with normals for lighting vertices,  which are dots. :-)<br><br>Cross product:<br>x3 = y1*z2 - z1*y2<br>y3 = z1*x2 - x1*z2<br>z3 = x1*y2 - y1*x2 <br><br></td></tr></table><br>
<a name="488659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Sswift.  I only need the angle on the xz plane really so this won't hold.  In the pictures above the y component would not be 0 if it was at right angles to both vectors. <br><br>In example (1) the new vector can't be at 90 degrees to both vectors .  I should have explained better I guess - can this be done? <br><br></td></tr></table><br>
<a name="488663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I mistook your drawings for being 3D representations because you said you wanted to use the cross product.<br><br>But if your example is 2D, and V3 represents a 2D normal realtive to those two lines, then your sketches are incomplete, because you're missing a point.<br><br><pre class=code>
(1)

v4----v1
     / \
    /   \
   /     \
  v3      v2

(2) Needs to work for this also

v4----v1--------v2
      !
      !
      v3
</pre><br><br>Now this, you can calculate.<br><br>If you have three points, V4, V1, and V2, and they form two lines, V4-&gt;V1, and V1-&gt;V2, and you want to calculate the normal V1-&gt;V3, then what you need is not a cross product.  <br><br>A cross product takes two lines in a plane, and tells you the normal of the plane.  <br><br>But you have two lines, and you want to determine a line which is at an angle that is half the angle between them.<br><br>I'll get back to you on this...  I think I know how to do it without using any sin or cosine or arctan. <br><br></td></tr></table><br>
<a name="488666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, I know what you have to do.  This is the same problem as generating vertex normals over a surface.<br><br>What you need to do is generate the normal for lines V4V1 and V1V2.  I put code in the code archives to calculate the normal of a line a while back...<br><br>Ah here we go:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=450" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=450</a><br><br>Now that you have the normal of each of the lines... And do note that the order you put the points into the equation determines if the normals will point towards the inside of your angle (correct) or the outside of your angle in the diagrams above...  <br><br>You can now simply add the normals of the two lines, Nx1+Nx2, Ny1+Ny2, and normalize the result:<br><br><pre class=code>
; Normalize the new vertex normal.
			; (Normalizing is scaling the vertex normal down so that it's length = 1)

				Nl# = Sqr(Nx#^2 + Ny#^2 + Nz#^2)

				; Avoid a divide by zero error if by some freak accident, the vectors add up to 0.
				; If Nl# = 0 Then Nl# = 0.1

				Nx# = Nx# / Nl#
				Ny# = Ny# / Nl#
				Nz# = Nz# / Nl#
</pre><br><br>Just delete all references to Nz in the above, as it is 0.<br><br>And voila, you are finished.<br><br>In example 2 above, where V4 V1 and V2 lie on a line, the normals of both lines would point downard.  You would then add them together, and renormalize.  That would result in a normal pointing downward as well, line V1V3.<br><br>So that's it.  I think that's what you wanted to do, right? <br><br></td></tr></table><br>
<a name="488794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perfect - cheers sswift! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
