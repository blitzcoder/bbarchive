<!DOCTYPE html><html lang="en" ><head ><title >Assigning HeightMap to Terrain</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Assigning HeightMap to Terrain</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Assigning HeightMap to Terrain</a><br><br>
<a name="612591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >-Rick-</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am creating my Heigtmap pre-game and want to load them into a terrain. Currently the only way I can do this is to save my Heightmap to a .bmp file then use LoadTerrain on it. Is there a simple method to apply my randomly generated Heightmap to a terrain without save/loading or reading each pixel of the heightmap image and altering each corrisponding terrain Y point?<br><br>If I use LoadTerrain(HeightMap) I get "failure to load heigtmap" error. The heightmap is there (i've displayed it out to screen and saved it to file directly prior to trying to load it into the terrain) so its not simply a null return error. <br><br></td></tr></table><br>
<a name="612595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You do realize that LoadTerrain requires a filename, right? such as LoadTerrain("heightmap.bmp")<br><br><div class="quote"> Is there a simple method to apply my randomly generated Heightmap to a terrain without save/loading  <br></div>You can always use the ModifyTerrain command. <br><br></td></tr></table><br>
<a name="612606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >-Rick-</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm interested in knowing if there is a way that avoids having to load in the file. It seems wasteful to create my heightmap, save it to a file, then call it again with a LoadTerrain call.<br><br>I also considered using the ModifyTerrain command, but again, rather than setting up a loop to read in all the values and modifying the the terrain 1 point at a time I was wondernig if there was a simpler method. LoadTerrain("hm.bmp") is a 1 step method and bang, its done. It just seems wasteful to me that if I have the image or texture right there on hand I cant apply it to a terrain. I was hoping that there was a command or simple method I wasn't aware of.<br><br>Best way to describe what I'm doing is that I've created a terrain and I have a few other images and textures that represent various depths and features underneath. I'm taking "core samples" of my terrain. The terrain is 512,512 and I'm selecting a point and copying a little 10x10 section from that point and of all "layers" below it and then creating a 3d looking Core of the area selected by stacking each layer. Hope that makes sense.<br><br>Anyway, just wondering if there was an easier or better method than saving to file and reloading, or going point by point to draw it. Optimally I'd like to just create a new terrain and simply apply an image (heightmap) to it. <br><br></td></tr></table><br>
<a name="612612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anytime you'd like a 1 step command, write a function.  Write your own function to loop through and set all the terrain points (via ModifyTerrain()) using an array (or an image, if you insist) for input values.<br><br>There's nothing wrong with "going point by point to draw it," as that's precisely what LoadTerrain() is doing behind the scenes. <br><br></td></tr></table><br>
<a name="612702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >-Rick-</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ?! You guys ... ah nevermind. This feels like when talking to the help desk and they keep asking if the computer is plugged in or if the monitor is turned on.<br><br>Thanks for giving me a bit of your time at anyrate. <br><br></td></tr></table><br>
<a name="612748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Octophorpe is right though. Create a function like...<br><br><pre class=code>

Function ApplyHeightMap(terrain,image)

</pre><br><br>And have your function loop through the bitmap, find the Values of the red channel, And use the modifyterrain command to make the changes.<br><br><pre class=code>
			RGB1=ReadPixelFast(loop,loop1,TextureBuffer(texture))
			r=(RGB1 And $FF0000)shr 16;separate out the red
			g=(RGB1 And $FF00) shr 8;green
			b=RGB1 And $FF;and blue parts of the color
			a=(RGB1 And $FF000000)Shr 24
</pre><br><br><br>That's the code to extract the R, G and B values from the readpixel command. :o) <br><br></td></tr></table><br>
<a name="612924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If I use LoadTerrain(HeightMap) I get "failure to load heigtmap" error. <br></div>You do also realize that you can overload built-in functions with your own right?<br><br>So, for your example above (passing LoadTerrain() an image handle), you can write your own LoadTerrain function (as Ross suggested) that deals with an internal image as opposed to an external one such as you wish.<br><br>Of course if you do this, you won't be able to use the original LoadTerrain function any longer... <br><br></td></tr></table><br>
<a name="613089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The answer is NO. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
