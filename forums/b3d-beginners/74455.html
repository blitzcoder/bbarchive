<!DOCTYPE html><html lang="en" ><head ><title >really simple fake shadows?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >really simple fake shadows?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >really simple fake shadows?</a><br><br>
<a name="831651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ive been using Sswifts shadow system for years and its great. but its not suited to my current project, which is a over track view racing game with up to 6 players on split screen. I have been getting alot of slow down because of the realtime shadow being cast by all the cars. I dont need real shadows there to small to really tell. <br><br>How do i go about making a blob shadow ive made a alpha texture that fits nicely under the car and looks like a shadow but how do i make it follow the shape of the track mesh? do i use project how fast is this? <br><br></td></tr></table><br>
<a name="831656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, use a texture for your shadow.  Good example here:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=384" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=384</a><br><br>Also plenty more simple shadow examples in the archives :). <br><br></td></tr></table><br>
<a name="831661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Copy the mesh, colour it black and flaten it :o) Parent it to the car and tada! Or use the blob method :o) <br><br></td></tr></table><br>
<a name="831662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stayne: so the above code draws the shadow shape to a texture thats apply to the mesh. and the shadow res is just how bit the shadow texture is. <br><br>ok its not how i thought it would work. but it should work.<br><br>is there any other ways? <br><br></td></tr></table><br>
<a name="831666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> As an alternative you could create your own simple square mesh in wings3d, blender or whatever modeling app you like, UV map it and apply the texture to that.<br><br>You said your game is a top-down view... if the camera is looking straight down at the cars then I wouldn't be too concerned with conforming the shadow to the road unless you're doing jumps, crashing and flipping over, etc? <br><br></td></tr></table><br>
<a name="831668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> jumps, crashing and flipping over, etc <br></div><br>yes all of those im using Jv-ode and its from a 45 degree angle so the shadows would need to conform. <br><br></td></tr></table><br>
<a name="831683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, then I would just make the track pickable, do a linepick down and position your textured shadow mesh at that location. <br><br></td></tr></table><br>
<a name="831690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> there is a bit of code called "Flex shadows" in the code archives... look there<br><br>Alternatively if you are experienceing slow down with Swifts system, it is possibly to do with the number of polygons in the track which you are testing for and if the cars are high poly this will also cause slowdown if you have a few of them.<br><br>So one option is to break the track down into small sections and only test the road surfaces which could be affected by shadows.  This means deleting the receiver on the fly and creating a new receiver for the next bit of track needed to receive shadows, but it is super fast and quite possible (I just did the same in my project).  I managed it so that the last two parts of my world affected by shadows would be remembered so I could turn my character back and cross a shadow boundary without noticing too much.<br><br>Shawn implemented a really great feature which you can utilise and make life a lot easier, as the cars are not animated (or even if they are) can you make a reduced polygon version of them?  If so you could be laughing, as Shawn allows you to hide a mesh which is parented to an object and cast a shadow from this lower polygon version, meaning the calculations are drastically reduced.  I am not sure where this is documented, but during a recent project I asked for help and asked why the shadow system detects meshes parented to my main mesh, yet hidden, that was the reason.  Low poly animated characters can be hidden and parented and used as the shadow casters for more complex animated characters.  You could even create a very low polygon sphere and cast that as a simple shadow for you cars, meaning you dont have to do too much re-coding or new coding to see if it works - Sweet!<br><br>Hope this is useful.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="831693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> IPete2 : I was wondering about that so if i lower the polycount of the track and use low poly dumby car models it should improve permormance enough. ill do some tests. <br><br></td></tr></table><br>
<a name="831694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pete<br><br>Yeah only test the actual surface the vehicles may drive on - Since you read my post I have added some more information so please re read it again<br>as theres something really good in there at the end .<br><br>The on the fly receiver deletion and creation is a really great way to go btw as it means you can keep the surface checking down to just where the cars are, not the entire track.<br><br><br>IPete2. <br><br></td></tr></table><br>
<a name="831763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Out of interest - what version of "sswifty's" Shadow System does everyone have?<br><br>My last version I got from him is v115 (26/10/04). <br><br></td></tr></table><br>
<a name="831785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> puki: v120<br><br>IPete2: ive split the track mesh into 2 so that just the bit of the track i need to be tested is tested and ive made a low poly dummy of the car mesh and it runs alot better, its still not super smooth though im not running a lo end system so it making me think i should have basic shadow option so that the user can select basic shadows if there systems not up to the real time ones. <br><br>As for your surgestion of deleting receivers on the fly I havent a clue how id do it  because i have 1 light and 4 cars with shadows and they can be spread out at any distance around the track, how do you go about tracking which sections to delete and which to activate? <br><br>thanks for your help :O)<br><br>Pete <br><br></td></tr></table><br>
<a name="831856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pete I have just read your request - can I give you some info later today ?  I have to go to work in Manchester today I'll be back in 9 hours - then I shall give you the process I went through it is easy so don't worry.  It will mean you need to identify which part of the track your cars are on - I use Meshesintersect or collision detection for this - having broken the floor of my levels down into 5 sections in each level.  Be back later today<br><br>IPete2. <br><br></td></tr></table><br>
<a name="831930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats IPete2: No problem, I too have got work today. I work as front of house for my local live music venue. I wont be back until after the last band has played and we've packed away all the mics etc so quite late. <br><br>thanks again for your help. <br><br></td></tr></table><br>
<a name="832032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> whats actually preventing you from using sswifts texture shadow casting instead of real shadow? the system already offers that feature (beside realtime and static shadow casting) <br><br></td></tr></table><br>
<a name="832048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pete,<br><br>(1) I broke my level into small sections <br><br>- I would suggest you do the same and ensure the sections where the cars can cast shadows (the track and tracksides) are broken down into low polygon sections - the less polygons the better, certainly not thousands in each section as a rough guide.  This will also depend upon the power of the users pc's minimum spec you are aiming for I guess.<br><br>I load these in, and then set up a type so that I know where my character's camera is - you too may only need to show shadows around your main cars camera - as follows:<br><br>Path000 would be your staring grid<br>Path001 would be the next bit of track afterwards.<br>Path002 would be the third section of track the cars will come to<br><br>Part 1 of my set up is something like this<br><pre class=code>
Type LevelShadow
	Field entity
	Field On
End Type

b.LevelShadow = New LevelShadow
b\entity = path000
b\on = 1 ; the shadow receiver for this section of track is set to on - it will dsiplay a shadow

b.LevelShadow = New LevelShadow
b\entity = path001
b\on = 2 ; the shadow receiver for this section of track is set to on - it will display a shadow 
;the '2' part of this is so I can have a previous piece of path with a shadow still able to fall on it if I go back - retracing my steps - you won't need this I don't think.


b.LevelShadow = New LevelShadow
b\entity = path002
b\on = 0 ; the shadow receiver for this section of track is switched off - it wont display a shadow

</pre><br><br>(2) I switch the shadow receviers on if they are ready to be turned on:<br><br>Part 2 of my set up is something like this<br><pre class=code>
;switch shadows to be received if they are set ON=True/1

For b.Levelshadow = Each LevelShadow
	If b\on= 1 
		Receive_Shadow(b\entity) ; If not already shadow receiver then - make this entity a receiver	
	End If
Next

</pre><br><br><br>(3) Then I check for the character (this will be each of your cars I guess) to see if he is stood on any particular part of the track, and if so which part.  <br><br><br>Now in my main loop I monitor which area my character is stood on it, and turn it on so it can receive a shadow.<br><pre class=code>

; Now in the main loop,  use something like this routine - entHit has the name of the section of my level the character is stood on
; defind by 

entHit = EntityCollided(playerentityname,ground_collision_type) 

If entHit &lt;&gt; oldenthit Then 
; don't keep setting the same receivers or it will grind to a halt
; Oldhit contains the entity of the path the character is stood on 	
	
		
		For b.Levelshadow = Each LevelShadow
			
			
			If (b\on=1) And (entHit &lt;&gt; oldenthit)
				delete_shadow_receiver(b\entity)	
				b\on=0
			End If
			
			
			If (b\on &gt;0) And (entHit &lt;&gt; oldenthit) 
				b\on=b\on-1
			End If
			
			
			If b\on= 0 And entHit = b\entity Then 
				Receive_Shadow(entHit) ; If not already shadow receiver then - make this entity a receiver	
				oldenthit=entHit 
				b\on= 2
				
			End If
			
		Next
		
		oldenthit=entHit
		
		
	
	End If
	
</pre><br><br>You may have to do this for all your cars so it would be best to set up a function with this last bit in it and send each entHit after each car is tested for what is under it.<br><br>What should happen is only those sections which your cars touch will have shadows receivers on them, this means that you will be testing a very much smaller section of your track every loop, so you should see a huge jump in fps - er I hope! lol.<br><br>Let me know how you get on.  Email me or msn me(peter@...) or skype me (petermcaddock) if you want to chat live.<br><br>Best regards,<br><br>IPete2. <br><br></td></tr></table><br>
<a name="832161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> IPete: great stuff ill take a close look at this in the morning and let you know how i get on. thanks for your help. Ill email you, i must sort out skype at some point.<br><br>Dreamora: i forgot it even had that function. its been along time since ive used it. thanks for pointing that out. ive desided to have both a projected  texture type shadow for the low spec system setup and the real shadows for the higher spec setup, but i will still try to add IPete's system because it should make it so more people can enjoy the detail shadow setup. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
