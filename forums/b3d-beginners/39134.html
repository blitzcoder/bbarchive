<!DOCTYPE html><html lang="en" ><head ><title >How to detect graphic modes</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to detect graphic modes</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >How to detect graphic modes</a><br><br>
<a name="435952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br>I created a small initialization-screen for my game, where the user can select the gfxcard and the resolution to use for the actual game.<br><br>P.S.: Don't mind that logo (the 3D rendered text "SpaceGame").<br>This is where the actual logo must be displayed.<br>That was just a test about positioning images over other images.<br>Later on, I just have to replace that logo (is a different file) with the new one, and the interface is automatically updated.<br><br>Screenshot:<br><img src="http://users.pandora.be/vge/Blitz/InitScreen.jpg"><br><br>Only the optionsbuttons on the top-right portion of this window actually work, as the rest isn't programmed yet.<br><br>This screen is the first thing the player will see when he runs the game-exe and is displayed as a 2D-window (using the Graphics-command).<br><br>Each time the player selects another "Graphics driver:" (on the top-right), the game selects the selected gfxcard (with the SetGfxDriver-command).<br><br>But the question is: how will this run if the user selects a Voodoo-card (or similar card, which don't do 2D)?<br><br>Will the window still be visible, or does the player get an error-message?<br><br>Or should I only set the gfxdriver when the player clicks the "Run game" button?<br>If I do this, how can I detect all other gfx-modes on the selected card, when it isn't active (by the SetGfxDriver-command)? <br><br></td></tr></table><br>
<a name="435987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got another idea a few minutes ago.<br><br>What if I would loop through all available graphics drivers and automatically select the first one with 3D-capabilities?<br>And display the window with the Graphics3D-command, instead of the Graphics-command?<br>And if the user has no 3D-capable card, display an error-message.<br><br>How do other games do this (that don't allow you to select the gfx-driver to use)? <br><br></td></tr></table><br>
<a name="436081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> how will this run if the user selects a Voodoo-card (or similar card, which don't do 2D)?  <br></div>If the card doesn't accelerate 2D then the operating system does the drawing.  No problem.<br><br><div class="quote"> What if I would loop through all available graphics drivers and automatically select the first one with 3D-capabilities? <br></div>I'm not sure but could this be a problem?  What if your accessing the card causes a crash?  Since the program would check all cards every time it starts up, it would always crash.  Maybe it's better to let the user manually choose? <br><br></td></tr></table><br>
<a name="436366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've never heard that checking a graphics driver for 3D-capability causes crashes.<br>But I've got only 1 pc at home and cannot check it on other systems.<br><br>But I've created the routine to do it (check for 3D-capability) and select the first 3D-card.<br><br><pre class=code>
; Get the number of graphics drivers available in a user's system
GfxCardCount% = CountGfxDrivers()

; Select the first 3D-capable card
For i = 1 To GfxCardCount%
	If GfxDriver3D(i) = True Then
		SetGfxDriver i
		Exit
	EndIf
Next

; Set window for displaying the init-screen (see screenshot above)
Graphics3D 640, 480, 0, 2
</pre><br><br><div class="quote"> <br>Maybe it's better to let the user manually choose?<br> <br></div><br><br>What if the user selects a card that Blitz reports as 3D-capable, and crashes if he selects it?<br>That would cause the same crash.<br><br>But currently, on startup of the game, the interface also checks all cards for 3D-capable modes, as the user will not be allowed to select a 2D-card for the game (because it will be entirely 3D).<br>The optionbutton in front of the card's name will be greyed out if it doesn't do 3D.<br>Then either way, the program would crash in both situations, if just checking the driver for 3D-capabilities causes a crash. <br><br></td></tr></table><br>
<a name="436371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What if the user selects a card that Blitz reports as 3D-capable, and crashes if he selects it? <br>That would cause the same crash.  <br></div>Yes, but if it did, then the user would know not to select that one again in the future.  Whereas, if your program ALWAYS checks it, it will always crash.<br><br>But, I could be way wrong here.  Maybe checking 3D caps. won't ever cause a crash. <br><br></td></tr></table><br>
<a name="436426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I could also make the program scan all cards only the first time.<br>When the user has selected the required card, a settingsfile will be generated, where the user's selection is stored.<br><br>Next time the game is started, it will check if the file exists, and if it does, load it and skip scanning the cards.<br><br>But one more question:<br>When the user selects a card and resolution, should I immediately select the graphics card, using SetGfxDriver()?<br>Or is it best to only set the driver when the user clicks the "run game"-button and check if that resolution is supported for that card (and if not, redisplay the interface and give an error-message, stating that the user has to select another resolution)?<br><br>Because currently, when the user selects a different driver than the first one, the interface-images should transfer to the new card.<br>What if the interface is loaded and displayed with a pure 2D card (e.g. onboard gfx-driver), and the user selects it's AGP-card (that was not selected as a default)?<br>Then all images were loaded into the RAM of the onboard gfxdriver, and when the user selects the other card, it doesn't have anything to display.<br><br>Or am I totally wrong here?<br>I wonder how other games do this. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
