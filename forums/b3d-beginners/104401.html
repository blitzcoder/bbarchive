<!DOCTYPE html><html lang="en" ><head ><title >Got fire to run but won't reload level, problems.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Got fire to run but won't reload level, problems.</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Got fire to run but won't reload level, problems.</a><br><br>
<a name="1264645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gerald</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm still trying fire.  I finally got the basic effect to load and run but now  it won't allow reloading a level.  I use f1-3 to start sections of a game.  The code won't allow restarting a level, after character dies, or returning to a previous section.  In section 1 you can still go to section 2 or 3 but not back to 1.<br><br>The update_fires was causing the first problem with memory access violation.  I put it in a loop that only calls it when fire is showing.  It now finishes the level.  I guess you can't update something that isn't there.<br><br>I lose so much control with the effect I would like to improve on it.<br><br>Any help available?<br><br>Gerald<br><br><br><br><br><br><br><br><br><br><br><br><br>code follows<br><br><br><br>.game1<br><br><br><br>Graphics3D 1024,768<br>SetBuffer BackBuffer()<br><br><br>Global tfire2.fire2=Add_Fire2(0,-25,0)<br>Global tfire.fire=Add_Fire(0,-25,0)<br>Global tfire3.fire3=Add_Fire3(0,-25,0)<br><br><br><br>Global flame04=LoadSprite("gameart\base4.bmp"):HideEntity flame04<br>Global flame02=LoadSprite("gameart\base2.bmp"):HideEntity flame02<br>Global flame03=LoadSprite("gameart\base3.bmp"):HideEntity flame03<br><br>Global piv=CreatePivot()<br>Global piv2=CreatePivot()<br>Global piv3=CreatePivot()<br><br><br><br><br>;.game1<br><br>Gosub stwof2-<br>-<br>-<br>-<br>tfire2.fire2=Add_Fire2(0,-23,50)<br><br>se = 10<br>fe = 10<br><br>fire = False<br>main loop<br><br>-<br>-<br>-<br>tfire2.fire2=Add_Fire2(0,-23,300)<br><br>-<br>-<br>se = se + 1<br><br>If se &gt; 10 Then<br>HideEntity exp1<br>End If<br><br><br>fe = fe + 1<br>If fe &gt;= 10 And fire = True Then<br>erase_Flames2<br>HideEntity Exp1<br>TranslateEntity tfire2\piv2,0,500,0<br>fire = False<br>End If<br><br>If fe &lt;= 10 Then <br>Update_Fires2()<br>End If<br>-<br>-<br>-<br>-<br><br>;in collision loop<br>-<br>-<br><br>PositionEntity tfire2\piv2,CollisionX#(bullet(q),1),CollisionY#(bullet(q),1),CollisionZ#(bullet(q),1)<br>;PositionEntity Exp1,CollisionX#(bullet(q),1),CollisionY#(bullet(q),1),CollisionZ#(bullet(q),1)<br>;ShowEntity Exp1<br>ShowEntity tfire2\piv2<br><br><br><br>fe = 0<br><br><br>-<br>-<br><br>-<br>;subroutines near end of code file<br>-<br><br><br>. <br><br><br><br>.stwof2<br><br><br>flame02=LoadSprite("gameart\base2.bmp"):HideEntity flame02<br>;a\piv=CreatePivot()<br><br>;Each Flame of the fire<br>Type flame2<br>	Field ent2<br>	Field ang2#<br>	Field size2#<br>	Field piv2;mine<br>	Field alph2#<br>	Field dis2#<br>	Field dx2#, dy2#, dz2#<br>End Type<br><br>;The fire itself<br>Type fire2<br>	Field piv2<br>		; Direction<br>	Field dx2#, dy2#, dz2#<br>End Type<br><br><br>;Add a fire to the scene<br>Function Add_Fire2.fire2(x2#,y2#,z2#,dx2#=0,dy2#=.23,dz2#=0)<br>    ;a2.fire2=New fire2<br>    a2.fire2=New fire2<br>        <br>    ;L.fire2=First fire2<br>    ;L2.fire2=After L.fire2<br>    ;L3.fire2=Last L.fire2<br><br>	a2\piv2=CreatePivot()<br>	PositionEntity a2\piv2,x2,y2,z2<br>	a2\dx2=dx2:a2\dy2=dy2:a2\dz2=dz2<br>	Return a2<br>	<br>End Function<br><br><br><br><br><br><br>;Add a flame to the fire<br>Function Add_flame2(x2#,y2#,z2#,size2#=1,dis2#=.016,dx2#=0,dy2#=0.3,dz2#=0)<br>	a2.flame2=New flame2<br>	flame02=LoadSprite("gameart\base2.bmp")<br>	;a\ent=CopyEntity(flame02)<br>	<br>	a2\ent2=LoadSprite("gameart\base2.bmp")<br>	;a\piv=CreatePivot()<br>    <br>	PositionEntity a2\ent2,x2,y2,z2<br>	a2\alph2=1<br>	a2\size2=size2<br>	a2\dis2=dis2<br>	a2\ang2=Rnd(360)<br>	ScaleSprite a2\ent2,a2\size2,a2\size2<br>	EntityColor a2\ent2,Rnd(150,255),Rnd(0,100),0<br>	a2\dx2=dx2<br>	a2\dy2=dy2<br>	a2\dz2=dz2<br>End Function<br><br>;Update flames<br>Function Update_flames2()<br>	For a2.flame2=Each flame2<br>		If a2\alph2&gt;0.01 Then<br>			a2\alph2=a2\alph2-a2\dis2<br>			EntityAlpha a2\ent2,a2\alph2<br>			RotateSprite a2\ent2,a2\ang2<br>			a2\ang2=a2\ang2+.2<br>			MoveEntity a2\ent2,a2\dx2,a2\dy2,a2\dz2<br>		;Else<br>			;FreeEntity a2\ent2<br>			;Delete a2<br>		End If<br>	Next<br>End Function<br><br>;Erase all flames<br>Function erase_Flames2()<br>	For a2.flame2=Each flame2<br>		If a2\ent2&lt;&gt;0 Then FreeEntity a2\ent2<br>		;If a2\ent2 = 0 Then FreeEntity a2\ent2<br><br>	Next<br>	Delete Each flame2<br>End Function<br><br><br><br><br>;Update all fires<br>Function Update_Fires2()<br>	For a2.fire2=Each fire2<br>	<br>	Add_flame2(EntityX(a2\piv2),EntityY(a2\piv2),EntityZ(a2\piv2),Rnd(1,4),.04,a2\dx2,a2\dy2,a2\dz2)<br>     ;Add_flame EntityX(x),EntityY(y),EntityZ(z),Rnd(1,4),.04,a\dx,a\dy,a\dz<br><br>				;Add_flame2(x#,y#,z#,size#=1,dis#=.016,dx#=0,dy#=0.3,dz#=0)<br><br>	Next<br>	Update_Flames2()<br>End Function<br><br>;Erase all fires<br>;Function Erase_Fires2()<br>	;For a2.fire2=Each fire2<br>		;If a2\piv2&lt;&gt;0 Then FreeEntity a2\piv2<br>		;If a2\piv2 = 0 Then FreeEntity a2\piv2<br><br>	;Next<br>	;Delete Each fire2<br>;End Function<br><br><br>Return<br><br><br><br><br><br><br><br><br><br>When the program runs, it has basic function.  The level select switches f1-f3, o restart level work but the memory access violation message comes up if you try to play the level.  This is only on going back to a level previously accesed.  In level 1 you can select level 2 or 3 but you cannot go back to level 1. <br><br>This means you cannot restart the level if your character dies.  The game must be restarted completely.  <br><br>Why can’t the levels be restarted? (Or go back to a level?) <br><br></td></tr></table><br>
<a name="1264787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gerald</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Because the tfield costs so much function (reloads, restarts) and I cannot do it well I'm  using a wings 3d snow entity and pivoting it at the  camera.<br><br>createpivot piv(camera)<br>snow position camera<br>rotate camera pitchyawroll<br>trunentity piv,.3,0,0<br><br>Let me know if you can figure out my mistakes and correct them or advise me on tfields.<br><br>Gerald <br><br></td></tr></table><br>
<a name="1264810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have 112 forum posts - but still have not had the time to take a look into the forum codes?<br>Why don't you put your code into code or codebox? This way tabs are kept - code is blitzcode and not changed into html, aso aso aso ... <br><br></td></tr></table><br>
<a name="1265017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Irvau</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm....<br>Lemme try and help out. I'm having a hard time following the flow of this program - I suck at reading code that I didn't spit out.<br>Ah, well. :P<br><br>Anyways, from what I can tell, you have a system that flows using labels.<br>That's your first error. Well, it's not really an error, but it still makes debugging and running your code a lot more painful than it needs to be. Instead, try using a main loop that initiates after the buffer is set. Have a global keep track of your game state. Select the global in the main loop, and do stuff depending on the state. At the end of the loop, you can update the game state, so that it responds to keys 1-3 being pressed.<br><br>Oh, and, yeah, following RGR's tip helps A LOT. Tabs really do help with readability... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
