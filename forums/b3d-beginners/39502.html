<!DOCTYPE html><html lang="en" ><head ><title >SkyBox code doesn't work</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >SkyBox code doesn't work</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >SkyBox code doesn't work</a><br><br>
<a name="440799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nx01</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The various skybox codes that I have seen on the forums do not work with a first-person space simulation game.  My camera is a child Entity of my spaceship.  So the camera follows the ship around while it's flying.  I have two enemy ships in space that don't move (as of now).  My sky is an inverted sphere.<br><br>This does not work:<br>EntityOrder sphereSky, 1;<br>EntityParent sphereSky, camera;<br><br>The above has the effect of making the sky move with the main spaceship, so when I turn, the stars don't move.  Also, the other two enemy ships disappear if I fly too far away from them, becuase they pass right through the other side of the sky.  <br><br>I have also tried:<br>EntityOrder sphereSky, 10; higher z-buffer numbers<br>along with<br>EntityParent sphereSky, camera;<br>or<br>PositionEntity sphereSky, EntityX(camera),EntityY(camera),EntityZ(camera);<br>Which has no effect.<br><br>So If I don't make the sphere a child of the camera/ship, my ship can fly right through the sphere.  When I make the sphere a child of the camera/ship, the stars don't move (relative to me) AND the other ships move out of the sphere when I fly too far away from them.  <br><br>None of the above situations look/feel even close to realistic.  Perhaps the skybox code works for games that are set on the ground (i.e. first person shooters), but not in an outer space simulation.<br><br>I asked Blitz programmers to create a special SkyBox entity, but all I got was the recommendations that I used above.  And a few put off Blitz programmers who responded with things like, "There's no need for a skybox, becuase it's easy to implement."<br><br>If you think I'm incorrect then prove me wrong.  Set up a simple situation like the one I described above and get the sky to work correctly and then post it.  I can also email or post my code for anyone, who thinks they can make it work.  It's a small program.<br><br>Thanks, <br><br></td></tr></table><br>
<a name="440824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with the people who said a special skybox entity is completely unnecessary and you've just demonstrated why. Because a skybox that suited people making one type of game wouldn't suit people making another type of game.<br><br>What's wrong with <br><br>PositionEntity sphereSky, EntityX(camera),EntityY(camera),EntityZ(camera)<br><br>Which has no effect is not very specific. What exactly does it not do that it should? As long as you don't parent it, it shouldn't rotate when the ship does. <br><br></td></tr></table><br>
<a name="440831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, if the camera is parented to the ship, you'll need<br><br><pre class=code>PositionEntity sphereSky, EntityX(camera,true),EntityY(camera,true),EntityZ(camera,true)</pre><br><br>That'll make it use Global ( world ) coordinates instead of local ( relative to the ship ) ones. <br><br></td></tr></table><br>
<a name="440837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nx01</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adding the true to the EntityX(camera, true) etc. Did help two of the three problems.  First it solved the part about the main ship flying through the sphere.  Second, the stars move relative to my main ship position.  <br><br>However the third problem still exists.  When I fly the main ship far away from the enemy ships, the enemy ships go right through the other side of the sky sphere.  So they disappear. When I turn around and fly toward the direction of the enemy ships, I can see them reappear through the other side of the sky sphere.  <br><br>This is not how a skybox is supposed to work.  No matter what direction I fly in or for how long I go in that direction, nothing within the confines of the skybox should ever reach the edge of the skybox.<br><br>When you play 3D games, do objects in the scene ever go through the skybox, no matter how far away you move from them?  No, so it still doesn't work correctly. <br><br></td></tr></table><br>
<a name="440859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make a second camera.  Place it somewhere far away in the world.  Put the skybox around that.<br><br>Set your main cameraclsmode to clear the zbuffer but not the color buffer.<br><br>Hide the first camera, show the second camera.  Render the scene.<br>Hide the second camera, show the first camera.  Render the scene.<br><br>Voila, perfect sky. <br><br></td></tr></table><br>
<a name="440891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why the two cameras sswift?  What's wrong with just one? <br><br></td></tr></table><br>
<a name="440894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well if you want to keep track of all your objects and hide everything in the level during the first render, then you could use a single camera.<br><br>The idea is to render the sky first and then clear all the zbuffer information so that nothing can appear behind the sky.<br><br>If entityorder is giving you trouble with your sky, then this method will always work.  I use this method to render heads up displays, because there is the off chance someone might want to have a 3D object in the HUD and it does not suffer from the shaking some people reported on their HUDS when they tried parenting them to the camera and moved the camera far from the center of the world. <br><br></td></tr></table><br>
<a name="440896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I'm following you sswift but it sounds like you made a conflicting statement:<br><br><div class="quote"> Make a second camera. Place it somewhere far away in the world. Put the skybox around that. <br><br> it does not suffer from the shaking some people reported on their HUDS when they tried parenting them to the camera and moved the camera far from the center of the world. <br></div> <br><br></td></tr></table><br>
<a name="440899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right, i understand sswifts idea- but why not use EntityZOrder!? <br><br></td></tr></table><br>
<a name="440922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, my statement isn't conflicting.<br><br>Some folks tried makign a space game, and they parented the hud to the camera.  But when the camera MOVED AROUND while far from the center of the world, the children would shake because of 32bit floating point inaccuracy.<br><br>When I say stick the camera far from the center of the world, for most cases, 65536, 0, 0 would be just fine.  That's not nearly as far away as these guys were sticking their camera.  But even if it were, the camera is just sitting at one location, so even if the other objects were children of the camera, which they are not, they would not jiggle as they are not being moved by the camera. <br><br></td></tr></table><br>
<a name="440924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "but why not use EntityZOrder!?"<br><br>I dunno.  For the case of a skysphere, in general that should work fine, so long as the skysphere is small enough that it falls within the clipping radius of the camera, and you move it with the camera using positionentity.  (Parenting it would make it rotate with the camera which would look wrong.)<br><br>I offered an alternative suggestion because the fellow above was syaing entityorder didn't do what he wanted.<br><br><br>"However the third problem still exists. When I fly the main ship far away from the enemy ships, the enemy ships go right through the other side of the sky sphere."<br><br>Have you considered making the skysphere so large that the enemies would be really tiny before they pass through the sphere?  At some point the enemies are going to be clipped by your clipping plane on your camera, OR be too small to see.  So if you make the sky sphere big enough then it won't matter if they pass through it at some point cause you won't be able to see it happening. <br><br></td></tr></table><br>
<a name="440979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JKP</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use fog with a high start distance and a slightly higher far distance. That way the entities will fade out as they approach the sky sphere. You would need to get the distances right, and you would also need to disable fog for the sky sphere. <br><br></td></tr></table><br>
<a name="440998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> nx01, When I made a skybox, it was only a couple of units bigger than the camera.  Nothing disappeared even though I know objects were outside of the box.  EntityOrder makes sure the skybox is drawn before anything else is, so it will always appear behind.  You sure that the ships are just simply not disappearing beyond the camera's clipping plane?  Try adjusting the camera range and see what happens.<br><br>Sswift, as for the jittering, I had the same problem.  Turns out it was the collisions that were causing it.  I'd move the entity, move the skybox, do an updateworld, then renderworld.  What was happening was that my character would move, then the skybox, but updateworld would move the character again, leaving the skybox offset.  I solved it by making sure I didn't move the skybox until right before renderworld.<br><br>nx01, I just happened to think, you using Entityorder on the ships?  If so, you should only use EntityOrder on the skybox.  When setting EntityOrder to anything other than 0 will disable z buffering on the entity, so objects will not be drawn as expected. <br><br></td></tr></table><br>
<a name="441673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ive been developing my own space game for a while now..<br> - all you need to do is ensure that you have set the<br> - camera range to a reasonable value, force the z-order<br> - rendering of skybox/sphere + position the skybox<br> - at the world coords of your camera...simple..<br><br>This is pretty much jst repitition of whats already been<br>said...but it should be quite easy to get working...<br><br>anyway - goodluck.... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
