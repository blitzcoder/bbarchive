<!DOCTYPE html><html lang="en" ><head ><title >Functions as Types?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Functions as Types?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Functions as Types?</a><br><br>
<a name="382538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MAX711</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why doesn't this work? ('troop' and 'unit' are previously defined Types), it's the '\checked' bit it doesn't seem to like.<br>;<br>;<br>FindTroopLeader(troop)\checked = True<br>;<br>;<br>Function FindTroopLeader.unit(troop.troop)<br>  For this.unit = Each Unit<br>    If this\troop = troop<br>      If this\leader = True<br>        Return this.unit<br>      EndIf<br>    EndIf<br>  Next<br>End Function<br><br>If I use an array it works fine, such as...<br><br>claimedNode(x,y)\checked = true<br><br>where claimedNode is defined as..<br><br>Dim claimedNode.unit(48,48) <br><br></td></tr></table><br>
<a name="382541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> 2 things.<br><br>1)<br>I would change the function call with:<br>temp = FindTroopLeader(troop)<br>temp\checked = true<br>where temp is declared as temp.troop<br><br>2)<br>I would distinguish between type structure name and type pointer name; in your example, troop is the type structure name, and also the type pointer name, which I find a bit confusing.<br>So, make your type structure always with t_ suffix, for example:<br>type t_troop<br>field...<br>end type<br>global troop.t_troop<br><br>Hope this helps,<br>Sergio. <br><br></td></tr></table><br>
<a name="382546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MAX711</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply Sergio.  I tried your suggestion 1) and it works great.  I was hoping there was a way to avoid creating a 'temp' Type just to check the result of a Function, just seems like redundant code to me, especially when it seems to work fine with Arrays.  Thanks again for the help.  Also, do you always define your Types as Global?  I pass all my Types between Functions and have never needed to make them Global, is there another reason? <br><br></td></tr></table><br>
<a name="382548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I declare them global only for code consistence, but it is not needed, a type pointer becomes global the moment you declare it.<br>So this:<br><div class="quote"> <br>troop.t_troop<br> <br></div><br>has the same effect of:<br><div class="quote"> <br>global troop.t_troop<br> <br></div><br> <br>More, since you return a troop element (this), you can just refer to that, since the for..next loop has exited, that means that 'this' points already to the right element. In other words, you may do like:<br><br>FindTroopLeader(troop)<br>this\checked = true ;'this' points already to the element you want to edit<br><br>That's why I think, also, that you can set the 'checked' field of 'this' element, directly in the FindTroopLeader function:<br><div class="quote"> <br>Function FindTroopLeader.unit(troop.troop) <br>For this.unit = Each Unit <br>If this\troop = troop <br>If this\leader = True <br><pre class=code>
;Return this.unit 
this\checked = true
return
</pre><br>EndIf <br>EndIf <br>Next <br>End Function <br> <br></div><br><br>That means also that the function declaration does not need to return any 'unit' type, so you can declare it as:<br><br>Function FindTroopLeader(troop.troop) <br><br>Hopefully I didn't confuse you !<br><br>Sergio. <br><br></td></tr></table><br>
<a name="382702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MAX711</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> A little bit confused, but more concerned that all my Type pointers used in Functions survive outside the function, if I understand what you are saying?  I also don't want to set the \leader field inside the FindTroopLeader function because I call that function from lots of different places in the code for other reasons.  Thanks for the advice and info. <br><br></td></tr></table><br>
<a name="382833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>troop.t_troop <br><br>has the same effect of: <br><br>global troop.t_troop <br> <br></div><br><br>I don't think so. :)<br>If you want a type pointer (or any other type of variable) to be accessible inside functions, you have to specifically declare them as Global, in the main code.<br><br>MAX711, you're OK - local function variables are destroyed on exiting the function and so are not accessible outside of functions. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
