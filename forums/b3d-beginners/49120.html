<!DOCTYPE html><html lang="en" ><head ><title >How do I create a terrain with tiled textures?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How do I create a terrain with tiled textures?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >How do I create a terrain with tiled textures?</a><br><br>
<a name="546408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fraggle</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi. I want to create an outdoor terrain with tiled graphics. The tiles have to be changed in-game to, for example, build streets. I have tried out some solutions, but non of them worked well. In OpenGL I would bind the corresponding texture per quad. From my understanding, i can only asign ONE texture per entity (I am not speaking about multi texturing) so i tried to generate a mesh with mapsizex*mapsizey surfaces(each surface contains two triangles to represent a quad) and painted them individualy with the texture. This is working but really slow:(<br>I do not like the idea to work with one big texture and painting in the texture itselfe ingame, because the terrain should be 8192^2 minimum and the texture would be really big to get a nrea good looking experience.<br><br>Any ideas? <br><br></td></tr></table><br>
<a name="546439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> 8192^2? you must be kidden. This is 128 million triangles. No way. Do you really need to display all of it onscreen? I doubt it. So how about to hold your terrain data in an array, bitwise to save space. Now all you have to do is creating a littel mesh with everything that is visible onscreen. I think you can do that every frame without to lose too much performence. <br><br></td></tr></table><br>
<a name="546450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could have 1 big texture, which contains all other textures.<br>You can have a road-texture where the road goes left-right (horizontally), up-down (vertically), and diagonally.<br>This would be one texture of 256x256, with 4 parts in it (each part 128x128).<br><br>Then when you change one quad's texture, set the UV-coordinates to the correct sub-texture.<br><br>I've played with this before in 3DS Max.<br>I had one model with only one surface (one texture) and each quad's UV-coords where adjusted manually to get each quad show a different part of the texture.<br>I even imported the B3D model into Blitz3D and it worked fine.<br><br>This way, you can have 100s of quads use the same part of the big texture, where other quads use a different part. <br><br></td></tr></table><br>
<a name="546537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fraggle</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I told about the map size, not the amount of triangles. Using a LOD terrain algorythm like ROAM or roetger will lover the triangles down. Trying to make some sort of tiles of LOD terrains will give you problems at the borders of the terrain tiles like strange looking poppings. Nevertheless:<br>Creating a mesh from 3ds would work for static streets. Creating them ingame wouldn't. Well... wouldn't with my information. That is what i hoped for. someone, knowing, how to generate a mesh ingame with each vertex textured differently. and this at an acceptable performance:)<br><br>some first tries with really bad performance:<br><br>Function CreateTerrain(sizeX%, sizeY%)<br>	mesh=CreateMesh()<br>	tex=LoadTexture( "mossyground.bmp" )<br>	brush1=CreateBrush()<br>	BrushTexture brush1,tex<br><br>	For x=0 To sizeX%-1<br>		For z=0 To sizey%-1<br>			surface=CreateSurface(mesh)<br>		v0=AddVertex(surface,x+0,0,z+0,0,0)<br>		v1=AddVertex(surface,x+0,0,z+1,0,1)<br>		v2=AddVertex(surface,x+1,0,z+1,1,1)<br>		t0=AddTriangle(surface,v0,v1,v2)<br>		v0=AddVertex(surface,x+0,0,z+0,0,0)<br>		v1=AddVertex(surface,x+1,0,z+1,1,1)<br>		v2=AddVertex(surface,x+1,0,z+0,1,0)<br>		t0=AddTriangle(surface,v0,v1,v2)<br>		PaintSurface (surface, brush1);or some other brush.. depending on x,z<br>		Next<br>	Next<br>	Return mesh<br>End Function <br><br></td></tr></table><br>
<a name="546547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fraggle</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> To clarify: I made a snapshot of the battlefield editor:<br><img src="http://www.spielgestalt.de/example.jpg"><br>this is what i want to be able to do:) <br><br></td></tr></table><br>
<a name="547022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nik Green</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi fraggle<br><br>Surfaces seem to hit performance more than tris do. Try creating only one surface for each texture (or brush) and add tris to the appropriate surface for each square.<br><br>Hope this helps. <br><br></td></tr></table><br>
<a name="547381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fraggle</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have found a demo doing the work in "samples\birdie\Brush Tiles". Do not yet understand the use there of FindSurface(mesh, brush) in the function "Function Create_Map(tilex,tilez,tile)" but it definetly boosts the performance a lot. Only limitation is, that the terrain grid can't be bigger than 127*128. This seems to be some Blitz3d max poligon limitation. Ok. Since i do have to use a quad-tree algo to lower the objects, shown in the map, I will now do the subdivision with the map to a 64*64 level. Thank you for your help. <br><br></td></tr></table><br>
<a name="547635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi fraggle,<br><br>take a look at this:<br><br><a href="http://www.blitzcoder.com/cgi-bin/showcase/showcase_showentry.pl?id=makakoman04012003155225&amp;comments=no" target="_blank">http://www.blitzcoder.com/cgi-bin/showcase/showcase_showentry.pl?id=makakoman04012003155225&amp;comments=no</a><br><br>Regards - Xaron <br><br></td></tr></table><br>
<a name="550960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Do not yet understand the use there of FindSurface(mesh, brush) in the function "Function Create_Map(tilex,tilez,tile)" <br></div><br>"samples\birdie\Brush Tiles" creates a mesh with one surface per tile graphic, which is better than one surface per tile, but it does so in a convoluted way using FindSurface() and redundant brushes:<br><br>First it creates a brush for each grid square - I'm not sure how brushes are stored internally, but the program actually calls CreateBrush() 1024 times.  Next, it cycles through the grid squares again, to create triangles.  It attempts to find an existing surface which has already been painted with the same brush properties; if it cannot find one it creates a new surface and paints it.  Herein lies the trickery: FindSurface() finds a surface painted with the same brush *properties* as the brush you pass it - even though you may have 900 brushes, one for each tile of grass, any one of these will return the surface you created for the first tile which used a similar [congruent?] brush.  The resulting mesh will consist of 8 surfaces, one for each brush (i.e. terrain type).<br><br>P.S. Your Battlefield Editor looks nice, keep up the good work! :D <br><br></td></tr></table><br>
<a name="550972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raitsun</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> P.S. Your Battlefield Editor looks nice, keep up the good work! :D  <br></div><br><br>It's not his Editor. It's the Editor of the Game "Battlefield" ;-] <br><br></td></tr></table><br>
<a name="551032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fraggle:<br>Did you try my terrain system?<br><br>If that didn't work out for you, then you're in trouble. :-)<br><br>If you need more terrain tiles an/or greater speed then you'd probably need to make a terrain system which combines multiple objects that use the same texture into a single object.<br><br>You might want to check out my foliage system.  I no longer support it, but it is free:<br><br>www.seamlesstexturegenerator.com/foliagesystem-062.zip<br><br>The foliage system combines meshes like the trees you will see in the demo using octrees.  It should work just as well with terrain squares you create and pass to it.  <br><br>I don't provide support for the foliage system though so you're on your own if you try to do anything with it.<br><br>If you combined the foliage system with my terrain system you might be able to get a terrain up and running that is much faster at a larger size. <br><br>The foliage system handles multiple levels of detail which is what allows it to show high poly meshes up close, and lower detail ones in the distance.  The lower detail ones are combined into single surfaces.  The higher detail ones aren't and can't be or they'd exceeed the number of polys per surface allowed in Blitz.<br><br>The drawback to this method is that it uses a lot of video memory and ram for storing the meshes, and I'm not sure how much, or how far it can be pushed.  You'd have to experiment.  It may be that it would choke on the terrain sizes you need, or even those my terrain system can produce.<br><br>Another drawback is the foliage will be static unless you have that as a seperate element which you animate and position yourself.<br><br>The upside of this method is theoretically it is as fast as you can get in Blitz rendering highly detailed terrains.  It  packs the most polygons into the fewest surfaces for a particular scene, and does not calculate anything on the fly except which entities to show. <br><br></td></tr></table><br>
<a name="551033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just looked at your screenshot.  To do that fat basically you need to combine as many of those "mud" tiles into a single surface in a single entitiy.  Since they all use the same texture you can stick all the polygons in one surface.<br><br>But you might not be able to put all the mud tiles in the entire level in the single surface and besides that might be slow to render.  So you'll need to decide on the size of area which each entity will cover, and then only add those mud tiles which fall into that area to each entity.<br><br>My foliage system does something like this when you add meshes to it.  But again, I can't support it.  You'll have to figure it out on your own or get someone else to assist you, I'm way too busy on a project right now to explain it. :-) <br><br></td></tr></table><br>
<a name="551035"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Consider putting all your tiles on one surface, using VertexTexCoords() to select separate tile graphics. <br><br></td></tr></table><br>
<a name="551780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fraggle</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for your responses. <br>Now I have to go to the research phase again *g*. <br>Xaron: I will have a near look at the algo. Unfortunatly I can't use endless terrains and the engine gets an out of memory exception really fast if i try to higher the size.<br>octothorpe: thank you. that clarifies a lot.<br>sswift: <br>Let me some days to understand you code:) I recognize some LOD code, but I am not really in love with basic. I think, you are talking about a quadtree and not an octree.    I hoped, Blitz3d would be a scene graph and do the oculsion culling for me... I hope, I can ignore quadtrees with the terrain itself. For the game objects; this will be server work.<br>At the moment I try to get the engine working with terrain tiles. I divided the big terrain (4097*4097) by 64*64 pieces and show 4-16(depending on computer speed) of them. Depending on the camera/player position, I destroy and regenerate the tiles or meshes. To reduce the pause while generating a new tile, I have a delay between the creation of the new tiles, so in fact, one tile per 1-some frames are generated. (noticable, but not as disturbing as before:) ). I have written a dll to start a java virtual machine and execute any static function in any java class to get the network code running (no multithreading in blitz3d). I try to get the generation of the tiles and the creation/removing of objects to the java side, so I could implement the ROAM 2.0 algorithm from Trent Polack and move the vertex data over a memory bank. If someone sees a 4097*4097 or even 8193*8193 map with the ability to texture each quad individually, give me a shout please. I have bought blitz3d as an ideal prototyping tool... why can't I accept some limitations?;) <br><br></td></tr></table><br>
<a name="551782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fraggle</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> and sorry... autor of ROAM is Mark Duchaineau. Trent Polack has worked out the new version with him. Just to ease some lawyers;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
