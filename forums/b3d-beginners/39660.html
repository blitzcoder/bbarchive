<!DOCTYPE html><html lang="en" ><head ><title >One more time!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >One more time!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >One more time!</a><br><br>
<a name="442603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PCBGuy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry folks but I still have a problem with counter control<br>everything works in the code below except instead of reading all 5 counters it reads only the first one. I shortened the code and added remarks to make it easy to look at and figure out the problem. I have been working every angle for the last few days and now I am stumped!!!!Also anywhere I can get a sample of "WW2 strategy" type gaming code (In blitz of course) for moving and controlling game counters on the board, that would be great.<br><br><br>Graphics 1280,1024,16,2  <br>SetBuffer BackBuffer()<br>;Load Image (5) counter 43x32 pixels each<br>Global imgcounter = LoadAnimImage("AAshipcounter_all5.bmp",43,32,0,5)<br><br>;load background data into files<br>backgroundimage =  LoadImage("star1280.jpg") <br>ECshipprofile =        LoadImage ("ECShip_profile.bmp")<br>Planets =                 LoadImage ("planets.bmp")<br>GameLogo=            LoadImage ("ShipGameLogo.bmp")<br><br>;Set up counter holder for placing existing counters<br>Global CurrentCounter.FleetCounter = New FleetCounter<br>CurrentCounter\X = -1<br>Type Fleetcounter<br>   Field X%<br>   Field Y%<br>End Type<br><br>;Dimension board to place counters<br>Dim Board(39,31) <br><br>;Starting placement for (5) Ship Counters using the "1" flag in the following functions <br>Board (34, 4)=1<br>Board (34, 5)=1<br>Board (35, 5)=1<br>Board (35, 4)=1<br>Board (35, 6)=1                         <br><br>;Start game loop<br>While Not MouseHit(3)<br>;Draw background data to screen<br>TileBlock backgroundimage<br>	MaskImage ECshipprofile,001,001,001<br>DrawImage ECshipprofile,300,-145<br>MaskImage Planets,001,001,001<br>DrawImage Planets,0,0<br>MaskImage Gamelogo,001,001,001<br>DrawImage Gamelogo,22,925<br>;Start counter hold process but first it will draw the (5) counters in the first location discribed above in "board" array<br>    CheckInput1()<br>	DrawCounters1()<br>	Flip <br>	Cls<br>	<br>Wend<br>End<br>;;;;;;;;;;;;;;;;;;;<br>Function CheckInput1()<br>;if left mouse button is pressed<br>If MouseHit(1) Then <br>;if there is no current counter<br>If CurrentCounter\X &lt; 0 Then<br>;if a tile is under the mouse<br>If Board(MouseX()/32,MouseY()/32) = 1 Then<br>			<br>			<br>CurrentCounter\X = MouseX()/32<br>Currentcounter\Y = MouseY()/32<br>							<br>EndIf<br>Else ;there is already a current counter<br>If Board(MouseX()/32,MouseY()/32) = 0 Then<br>						<br>;move it to the new location<br>Board(CurrentCounter\X,CurrentCounter\Y) = 0<br>Board(MouseX()/32,MouseY()/32) = 1<br>CurrentCounter\X = -1<br>Currentcounter\Y = -1<br>EndIf<br>EndIf<br>EndIf<br>	<br>If MouseHit(2) Then<br>CurrentCounter\X = -1<br>EndIf<br>	<br>End Function<br>;;;;;;;;;;;;;;;;;;;<br><br>;;;;;;;;;;;;;;;;;;;<br>Function DrawCounters1()<br><br><br>For x = 0 To 39<br>For y = 0 To 31<br><br>;!!!!!The statement below is where I have the problem. I cannot control the "c" variable in this loop so it winds up creating 5 images of the first image from the .bmp file!!!!!<br> <br>If Board(x,y) = 1   Then  DrawImage imgcounter, ((x*32)-6),(y*32),c<br>MaskImage imgcounter,001,001,001<br>											<br>Next<br>Next<br>End Function <br><br></td></tr></table><br>
<a name="442608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looking at your code, I can't tell what you are trying to do.  Are you trying to draw the same image every time, or a different image based on the array data?.  I can't tell because all of your array data seems to just equal 1, so how can your function tell the "ship counters" (whatever they are???) apart?<br><br>You gripe about this 'c' variable.  I don't know what you are trying to do with it for the reasons I mentioned above, but the c variable is local to the function, therefore it equals zero (since you didn't set it elsewhere in the function).<br><br>If you want the c variable to contain a value that is used outside of the function then you either have to pass the value to the function<br><pre class=code>Function DrawCounters1(c)</pre><br>or you have to make c a global variable<br><pre class=code>Global c</pre> <br><br></td></tr></table><br>
<a name="442610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PCBGuy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is I can't find where to loop the "c" variable 5 times for each of the images in the .bmp file. Can you tell me where in the code to do this <br><br></td></tr></table><br>
<a name="442612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I really don't know what you want to achieve.  What is this 'c' variable suppose to represent?  Why do you want to loop it?<br><br>You should try explaining what your program is about more... <br><br></td></tr></table><br>
<a name="442614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PCBGuy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to place 5 seperate counters on the board each from a different position in AAshipcounter_all5.bmp file.<br>This file has five images in a row with different counter numbers from 1-5. <br>Now to the program,<br>The counter is first drawn 5 times for each place on the Board with the array<br>Baord(x,y)<br><br>Board (34, 4)=1<br>Board (34, 5)=1<br>Board (35, 5)=1<br>Board (35, 4)=1<br>Board (35, 6)=1  <br><br>But this is only a flag to the Drawcounter1() function. So I thought if I control everytime it draws "Board (x,y)" with a c variable then it will draw the consecutive images from the AAshipcounter_all5.bmp file. <br><br>What works is if I replace the variable c in:<br><br>Then  DrawImage imgcounter, ((x*32)-6),(y*32),c<br><br>with any number, 1-5 I get its cooresponding image from AAshipcounter_all5.bmp but I cannot control it <br><br><br>Here the Variable needs to change from 1 to 2 to 3 etc.. for each of the five draws from statements:<br><br>        Board (34, 4)=1 ; First image in AA*.bmp file<br>        Board (34, 5)=1 ; second<br>        Board (35, 5)=1 ; third<br>        Board (35, 4)=1 ; Forth<br>        Board (35, 6)=1 ; Fifth <br><br>  If "Then" in the DrawCounter() function calculates 5 times for each of the draws then c=C+1 would do the trick but it does not!(Of course first adding a Global c=0)<br><br>So where can I change the c variable "x" number of times equal to the number of "Board(x,y)" iterations. This looks easier then it is due to the way the functions handle the counters. I adapted this from perputiato sample but its real limited in how it controls the counters. I may better off starting with a more robust counter countroller if someone has a sample to work with. If you ever played any WW2 Computer stategy games they are "counter" manipulation routines and I would like to see the code on one of these, <br><br></td></tr></table><br>
<a name="442617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sorry but I still don't understand you.<br><br>First of all, what is a 'counter' as you say it?<br><br><br><br><br>Is this what you meant to do?:<br><pre class=code>
Board (34, 4)=1 ; First image in AA*.bmp file 
Board (34, 5)=2 ; second 
Board (35, 5)=3 ; third 
Board (35, 4)=4 ; Forth 
Board (35, 6)=5 ; Fifth

;later...

Function DrawCounters1() 
  For x = 0 To 39 
    For y = 0 To 31 
      If Board(x, y) &gt; 0
        DrawImage imgcounter, ((x*32)-6),(y*32), board(x, y)
      EndIf
    Next 
  Next 
End Function 
</pre> <br><br></td></tr></table><br>
<a name="442621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or did you mean to do this?:     (which to be honest, I couldn't understand why, if it is...)<br><pre class=code>Function DrawCounters1() 
  For x = 0 To 39 
    For y = 0 To 31 
      If Board(x,y) = 1
        DrawImage imgcounter, ((x*32)-6),(y*32),c
        c = c + 1
      EndIf
    Next 
  Next 
End Function 
</pre> <br><br></td></tr></table><br>
<a name="442631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PCBGuy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> My game board is a 40x32 square area (each square is a 32 pixels x 32 pixel for a 32 pixel square image) in space and the counters are simply individual fleets (32 pixel sqr. images) in space. I want to bring the counters (Images) on to the board and move them around much like the old game boards we use to use, before computers. Each fleet counter (Image)has data attached to it (Would be represented by "Fleet types")and that data changes as it moves to different sqaures (ie. planets) on the board. <br> So I need to first:<br>  1. place each of these counters (Images of a space fleet) <br> 2. I need to move each of them around on the board.<br>  3. I need them to interact with each square  on the board where there is a Planet, enemy fleet etc ..... <br><br>I created 5 races each with 5 fleets, the first is the AA race:<br>Global imgcounter = LoadAnimImage("AAshipcounter_all5.bmp",43,32,0,5)<br><br>This has five fleet counter images in it.<br>Then I place them on specific areas of the board<br>Board (34, 4)=1 <br>Board (34, 5)=1 <br>Board (35, 5)=1  <br>Board (35, 4)=1  <br>Board (35, 6)=1 <br>The "=1" is a flag in the function Drawcounter1() and also used in the function "Checkinput()":<br><br>Board(CurrentCounter\X,CurrentCounter\Y) = 0<br>Board(MouseX()/32,MouseY()/32) = 1<br><br><br>This allows you to pick up the counter (once its initially drawn)and move it to another location. Though there may be a better way to handle this, this is the sample I got and the only one I know. <br><br>Back to the Drawcounter1()function<br>This function needs to be smart enough to know how many fleets I am drawing onto the board and make sure it does not draw the same fleet over and over again.<br>  I am sure there is a better way to handle this but I am not sure where to start so I hoped to atleast make it work somewhat in the sample I am using now<br> Your sample gives me a Memory violation I think due to the <br>        Checkinput() function<br> I tryed your example by adding another array Dim Boardi(X,Y) and then more input<br> Boardi (34, 4)=1 <br>Boardi (34, 5)=2 <br>Boardi (35, 5)=3  <br>Boardi (35, 4)=4  <br>Boardi (35, 6)=5 <br>Then changed lines in Drawimage() function to<br>If Board(x, y) &gt; 0<br>        DrawImage imgcounter, ((x*32)-6),(y*32), boardi(x, y)<br>But no go! No images loaded<br> <br>If I use "Boardi" in<br><br>If Boardi(x,y) &gt; 1<br> <br>I get a program violation <br><br></td></tr></table><br>
<a name="442637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I think your problem resides in how you are storing your data.  You don't have to try so hard to draw the correct images, if you would just assign your array elements with numbers that correspond to the image you want.<br><br>You stated this:<br><div class="quote"> I created 5 races each with 5 fleets, the first is the AA race: <br>Global imgcounter = LoadAnimImage("AAshipcounter_all5.bmp",43,32,0,5) <br><br>This has five fleet counter images in it. <br>Then I place them on specific areas of the board <br>Board (34, 4)=1 <br>Board (34, 5)=1 <br>Board (35, 5)=1 <br>Board (35, 4)=1 <br>Board (35, 6)=1 <br> <br></div>and I assume you set all of those board positions with 1's because they are fleets from the FIRST race. I also assume that you would have used, say 2, for the second race, and so on.  The problem, as you see, is that you don't know which fleet is which.<br><br>You should try a method like this:<br>1-5 = fleets 1-5 of race 1<br>11-15 = fleets 1-5 of race 2<br>21-25 = fleets 1-5 of race 3<br>etc...<br><br>Set up an array to store your animimages:<pre class=code>Dim imgcounter(5)</pre>Load in your race images:<pre class=code>Global imgcounter(1) = LoadAnimImage("AAshipcounter_all5.bmp",43,32,0,5) 
Global imgcounter(2) = LoadAnimImage("BBshipcounter_all5.bmp",43,32,0,5) 
Global imgcounter(3) = LoadAnimImage("CCshipcounter_all5.bmp",43,32,0,5) 
Global imgcounter(4) = LoadAnimImage("DDshipcounter_all5.bmp",43,32,0,5) 
Global imgcounter(5) = LoadAnimImage("EEshipcounter_all5.bmp",43,32,0,5)</pre><br>and mask them:  (Note that it's not necessary to mask your images every time they are drawn like you were doing in the code above)<pre class=code>For iter = 1 to 5
  MaskImage imgcounter(iter),001,001,001
Next</pre>Then in your DrawCounter function, do something like I showed you above:<br><pre class=code>Function DrawCounters() 
  For x = 0 To 39 
    For y = 0 To 31 
      If Board(x, y) &gt; 0
        race = floor(board(x,y)/10.0)
        fleet = board(x,y) MOD 10
        DrawImage imgcounter(race), ((x*32)-6),(y*32), fleet
      EndIf
    Next 
  Next 
End Function</pre><br><br>That should do it for you.   If not, then I am lost at what you are trying to achieve. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
