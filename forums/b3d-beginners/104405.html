<!DOCTYPE html><html lang="en" ><head ><title >Text highlighting</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Text highlighting</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Text highlighting</a><br><br>
<a name="1264659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eren</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello!<br><br>I'm looking to create a fully-fledged text adventure in blitz, and I'm wondering how I can get the player to pick a choice by highlighting a choice.<br><br>For example, if the player wants to go left, he/she would use the arrow keys (or the mouse) to hover over the text 'left', and then click on it which triggers a command.<br><br>Anyone know how to do this? You probably can, but I'm not that good. <br><br></td></tr></table><br>
<a name="1264661"></a>

<a name="1264662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take a look at these functions :<br>Rect()<br>Text()<br>Line()<br><br>Here : <a href="http://www.blitzbasic.com/b3ddocs/docs.php" target="_blank">http://www.blitzbasic.com/b3ddocs/docs.php</a> <br><br></td></tr></table><br>
<a name="1264712"></a>

<a name="1264713"></a>

<a name="1264714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Omnicode</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function Draw_Box(x,y,width,height,brR,brG,brB,FgR,FgG,FgB,txt$)
	If (x+width-2)&gt;GraphicsWidth() Then x=GraphicsWidth()-width-2
	If x&lt;0 Then x=0 ;Will always keep it inside the viewport.
	
	Color brR,brG,brB
	Rect x,y+2,width,height-4,1
	Rect x+2,y,width-4,height,1
	Color FgR,FgG,FgB
	Rect x+2,y+2,width-4,height-4,1
	
	If txt$&lt;&gt;""
		Color brR,brG,brB
		Text (x+2+(width-4)/2),y+(height/2),txt$,True,True
	EndIf
End Function
</textarea><br><br><br>Hope this helps. <br><br></td></tr></table><br>
<a name="1264721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eren</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply Omni, but to be honest I'm fairly new to this language and I don't understand all of it. Could you break it down? Thanks. <br><br></td></tr></table><br>
<a name="1264728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are having trouble because you're trying to do something that you don't understand yet. You need to study software architecture. No one can do this for you, but yourself.<br>Read this intently: <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">http://en.wikipedia.org/wiki/Model–view–controller</a><br><br>There are two things you're trying to do here:<br><br>1) You're trying to change the state of the program. The user presses keys and changes the selected option. There's nothing on the screen in this context, this is all internal. The user is changing values stored in variables.<br><br>2) You're trying to represent the state of the program visually to the user, in some specific way. You will interpret the state of the program (the values in the variables) and will display graphics that represent this state. This means drawing the 'n' amount of options, and highlighting the one option that is selected.<br><br>You need to clearly see these two separate concepts or else you won't move forward and make your fully-fledged text adventure game.<br>Whether you're using Blitz3D, Java, Python etc. the logic is the same. So reflect if you're having trouble with the logic (how the program should behave) or having trouble with the implementation (the actual Blitz3D code for checking key presses, drawing text on the screen etc.). <br><br></td></tr></table><br>
<a name="1264729"></a>

<a name="1264730"></a>

<a name="1264731"></a>

<a name="1264732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Omnicode</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;THIS IS A COMMENT
;COMMENTS DO NOT EXECUTE ANYTHING, MERELY TO ANNOTATE CODE.


Graphics 600,400,32,2 ;Set the window width to 600, height to 400, 32 bit, and windowed. (2)
SetBuffer BackBuffer() ;habit, doesn't really matter

Global Screen_Center_Width=GraphicsWidth()/2 ;get middle of screen_width
Global Screen_Center_Height=GraphicsHeight()/2 ;get middle of screen height

;Small Demo
Global Action_Log=CreateImage(600,300) ;create a image that can be accessed throughout the program at any time with a width of 600 and a height of 300.
Global Action_Log_Message=1 ;create a variable to track whats happened.

While Not KeyDown(1)=True
	Cls ;Sets the current draw buffer to 0,0,0 (black) so we can redraw stuff, as we need to update it with new stuff
;otherwise it'll be drawn together.
	
	Draw_Box(0,GraphicsHeight()-78,600,78,255,255,255,5,5,5,"",False) ;Action Bar
	
	;Display a small Action Bar Setup
	
	;Controls
	Draw_Box(8,GraphicsHeight()-50,64,32,255,0,0,40,30,30,"Attack",True) ;attack button
	Draw_Box(74,GraphicsHeight()-50,64,32,0,255,0,30,40,30,"Heal",True) ;heal button
	Draw_Box(76+64,GraphicsHeight()-50,64,32,0,0,255,30,30,40,"Flee",True) ;flee button
	
	Draw_Box(Screen_Center_Width-48,GraphicsHeight()-40,32,32,255,255,255,20,20,20,"&lt;",True) ;etc
	Draw_Box(Screen_Center_Width-16,GraphicsHeight()-40,32,32,255,255,255,20,20,20,"\/",True)
	Draw_Box(Screen_Center_Width-16,GraphicsHeight()-70,32,32,255,255,255,20,20,20,"/\",True)
	Draw_Box(Screen_Center_Width+16,GraphicsHeight()-40,32,32,255,255,255,20,20,20,"&gt;",True)
	
	DrawImage Action_Log,0,0
	
	Flip
Wend
End




;Im using this function i created to handle all HUD related things when dealing with buttons (simple)
Function Draw_Box(x,y,width,height,brR,brG,brB,FgR,FgG,FgB,txt$,HIGHLIGHT)
;x coord, y coord, border Red, border Green, border Blue
;background Red, background Green, background Blue
;What the box/button will display centered inside it, leave
;blank if not wanting to display.
;HIGHLIGHT - will flag the box/button as being able to be clicked and hovered over with a brightening effect.
;NOTE: ALL THESE PARAMETERS CAN BE CALLED ANYTHING, SO LONG AS ITS NOT A DUPLICATE OF A GLOBAL,LOCAL.. i.e BORDERCOLOR or some other variant.

	If (x+width-2)&gt;GraphicsWidth() Then x=GraphicsWidth()-width-2
	If x&lt;0 Then x=0 ;Will always keep it inside the viewport.
	
	Color brR,brG,brB ;Set Draw Color HENCEFORTH \/\/
	Rect x,y+2,width,height-4,1
	Rect x+2,y,width-4,height,1
	Color FgR,FgG,FgB
	Rect x+2,y+2,width-4,height-4,1
	
	If txt$&lt;&gt;""
		Color brR,brG,brB
		Text (x+2+(width-4)/2),y+(height/2),txt$,True,True
		If HIGHLIGHT=True
			If RectsOverlap(MouseX(),MouseY(),1,1,x,y,width,height)=True ;If the mouse is hovering over the box.
				FgR=FgR*1.8 ;Brighten to HIGHLIGHT
				FgG=FgG*1.8
				FgB=FgB*1.8
				
				FgR=Clamp_Value(FgR,255,0) ;limit the value to 255 maximum. etc\/
				FgG=Clamp_Value(FgR,255,0)
				FgB=Clamp_Value(FgR,255,0)
				
				;Redraw Slightly Brighter Box
				Draw_Box(x,y,width,height,brR,brG,brB,FgR,FgG,FgB,txt$,False)
				
				If MouseHit(1)=True ;If I left click this box
					Select txt$ ;my possible actions
					    Case "/\"
							Update_Action_Log("Player moved forward one square.")
						Case "&lt;"
							Update_Action_Log("Player turned left.")
						Case "&gt;"
							Update_Action_Log("Player turned right.")
						Case "\/"
							Update_Action_Log("Player moved backward one square.")
						Case "Attack"
							Update_Action_Log("Player attacked for:"+Rand(0,10)+" damage!")
						Case "Heal"
							Update_Action_Log("Player healed for:"+Rand(0,10)+" health!")
						Case "Flee"
							Update_Action_Log("Player attempted to flee: "+Flee_Roll$()+"!")
					End Select
					Return ;Exit This Function
				EndIf
			EndIf
		EndIf
	EndIf
End Function

Function Update_Action_Log(txt$)
	SetBuffer ImageBuffer(Action_Log) ;Sets ur drawing buffer to the image so u can draw DIRECTLY TO THE IMAGE INSTEAD OF THE SCREEN. (FRONTBUFFER)
	Text 0,Action_Log_Message*FontHeight(),txt$ ;Display text
	Action_Log_Message=Action_Log_Message+1 ;Say we've got one more text line to add.
	If Action_Log_Message&gt;=22 Then Action_Log_Message=1 : Cls ;Resets the draw y coord whenever it reaches its max message amount.
	SetBuffer BackBuffer() ;put back to main buffer (frontbuffer also works)
End Function

Function Clamp_Value(value,high,low)
	If value&gt;high Then Return high
	If value&lt;low Then Return low
	Return value
End Function

Function Flee_Roll$() ;little function to seem random in chance to flee :)
	Local Roll=Rand(100)
	If Roll&lt;20 Then Return "they failed"
	Return "they fleed"
End Function
</textarea> <br><br></td></tr></table><br>
<a name="1264748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eren</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys, omni, for the explanation, and kryzon for the heads-up. I knew that I needed to get to know the language, program order etc, but I never knew where to start. <br><br></td></tr></table><br>
<a name="1264793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> To reword what Kryzon has explained :<br><br>You need to separate the "logic" and the "drawing"<br><br>In the case you describe, <br>depending on the previousstate and the playerinput (keys pressed), determine the nowstate<br>depending on the nowstate, determine what to draw on screen<br>choose a buffer where to draw (usually the backbuffer) <br>draw on the buffer<br>flip to display the results to the player <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
