<!DOCTYPE html><html lang="en" ><head ><title >how would u...(bout collisions)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >how would u...(bout collisions)</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >how would u...(bout collisions)</a><br><br>
<a name="342817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apollonius</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is for BlitzPlus,<br><br>If u draw squares on ur screen, green,blue and one yellow(player) everything 32x32. And you want the blue squares to collide with the yellow(player) and stop it when it hit it... u need to make somekind of area like inbetween x,y to x,y if it hits that spot which would be a blue square then stop the command to move the yellow thing forward or something,<br><br>could anyone help me? a mini-simple example would help alot! Thannk yooou~ <br><br></td></tr></table><br>
<a name="342824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are ready-made examples for imagescollide, rectscollide, imagesoverlap, rectsoverlap.  Something like that is what you want. <br><br></td></tr></table><br>
<a name="342832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apollonius</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> nah I doubt they're exactly what I want oh well I'll try to do this one on my own...<br><br><br>I prolly can succeed with my extended knowledge of BP! hahaha lol &lt;dies&gt;<br><br>they all require an image which i dont want to use <br><br></td></tr></table><br>
<a name="342891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This does not require an image!<br><br>RectsOverlap (rect1 X,rect1 Y,rect1 Width,rect1 Height,rect2 X,rect2 Y,rect2 Width,rect2 Height)<br>Parameters<br>rect1 X = rectangle 1 x location <br>rect1 Y = rectangle 1 y location <br>rect1 Width = rectangle 1 width <br>rect1 Height = rectangle 1 height <br>rect2 X = rectangle 2 x location <br>rect2 Y = rectangle 2 y location <br>rect2 Width = rectangle 2 width <br>rect2 Height = rectangle 2 height  <br><br>Description<br>This command will take two rectangular locations on the screen and see if they overlap. You will need to know the x, y, width, and height of both regions to test. <br><br>I'm still trying to find a real good logical use for this command with all the other collision commands available to you like ImagesOverlap, ImagesCollide, ImageRectOverlap, and ImageRectCollide. My guess is that this is the absolute fastest possible collision method available and useful to those wishing to write their own collision routines. <br><br>Unlike the other collision commands, there is no image to detect a collision with - simply one rectangular location overlapping another. You could probably use this command instead of the ImageRectOverlap command, as they are really basically doing the same thing (and I betcha this is faster). <br><br>This would be useful for very easy-going 'Monkey Island' games to check the position of your pointer against a screen location (or 'hot spot') when pixel perfect accuracy (heck, image graphics in general) are not really needed. <br><br></td></tr></table><br>
<a name="342939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neo Genesis10</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a piece of code I did for someone else who recently asked me this very question. The code is for Blitz 2D, but all the commands work perfectly well in B+. All the images are created by the program, so no external files are needed.<br><br>Use the cursor keys to move the man around and check for collisions. Its commented as well, so you should be able to figure out how it works.<pre class=code>Graphics 640, 480
SetBuffer BackBuffer()

Global man = CreateImage(32, 48)
Global tile = CreateImage(32, 32, 4)

; This just creates the images needed. Nothing collision related.
CreateImages

; This is where we create types to store our map information

Type map_tile
	Field block_type	; 0 - Passable, 1 - Unpassable
	Field graphic
End Type

; Here we create a 2D array to represent the map. Think of the first
; and second subscripts as the  X and Y coordinates.

Dim map.map_tile(30, 20)

; This loads in a basic map for the example
CreateMap

; Here we create offsets for drawing

Global Xoffset, Yoffset

Main
EndGraphics
End

Function Main()

	quit = False
	
	playerX = 64
	playerY = 80
	
	ClsColor 0, 0, 255
	
	; Here is the main game loop
	
	While quit = False
	
		; Everytime a key is hit, the collision check function ensures
		; that moving in that direction wont cause an impact. If it doesnt
		; the player moves.
	
		If KeyDown(200)
;			Stop
			If CheckCollision(playerX, playerY - 4) = False
				playerY = playerY - 4
			EndIf
		EndIf
		
		If KeyDown(208)
			If CheckCollision(playerX, playerY + 4) = False
				playerY = playerY + 4
			EndIf
		EndIf
		
		If KeyDown(203)
			If CheckCollision(playerX - 4, playerY) = False
				playerX = playerX - 4
			EndIf
		EndIf
		
		If KeyDown(205)
			If CheckCollision(playerX + 4, playerY) = False
				playerX = playerX + 4
			EndIf
		EndIf	
	
		; This simply offsets the screen to keep our man centered
	
		If (playerX - Xoffset) &lt; (GraphicsWidth() / 3)
			Xoffset = Xoffset - 4
		EndIf
		
		If (playerY - Yoffset) &lt; (GraphicsHeight() / 3)
			Yoffset = Yoffset - 4
		EndIf
		
		If (playerX - Xoffset) &gt; ((GraphicsWidth() / 3) * 2)
			Xoffset = Xoffset + 4
		EndIf
		
		If (playerY - Yoffset) &gt; ((GraphicsHeight() / 3) * 2)
			Yoffset = Yoffset + 4
		EndIf
	
		Cls
		DrawMap
		DrawImage man, (playerX - Xoffset), (playerY - Yoffset)
		Flip
	Wend

End Function

Function CheckCollision(x, y)

	; Since our man is larger than most tiles, we need to check all four corners.
	; For this reason I will use a For loop.

	For i = 1 To 6
	
		nx = x
		ny = y
	
		Select i
		Case 2
			nx = x + 31
		Case 3
			ny = y + 47
		Case 4
			nx = x + 31
			ny = y + 47
		Case 5
			ny = y + 24
		Case 6
			nx = x + 31
			ny = y + 24
		Case 5
			
		End Select
	
	
		; The following converts the x and y coords into an actual map array position
		tx = Floor(nx / 32)
		ty = Floor(ny / 32)
		
		; Important to ensure we dont try checking outside the array boundaries
		If tx &gt;= 30 Or tx &lt; 0 Then Return True
		If ty &gt;= 20 Or ty &lt; 0 Then Return True
		
		; Check which block we are moving into
		Select map(tx, ty)\block_type

		Case 0						; PASSABLE
			
			; Do nothing, since the player can pass through
			
		Case 1						; UNPASSABLE
			Return True		; Tell the main loop the player has bumped something
		End Select
	
	Next
	
	Return False

End Function

Function CreateImages()

	SetBuffer ImageBuffer(man)
	ClsColor 255, 255, 255
	Cls
	Color 0, 0, 0
	Oval 7, 0, 16, 16, False
	Line 1, 17, 30, 17
	Line 15, 16, 15, 32
	Line 15, 32, 0, 48
	Line 15, 32, 31, 48
	
	MaskImage man, 255, 255, 255
	
	For i = 1 To 4
		Select i
		Case 1
			ClsColor 255, 255, 255
		Case 2
			ClsColor 0, 0, 255
		Case 3
			ClsColor 0, 255, 0
		Case 4
			ClsColor 255, 0, 0
		End Select
		
		SetBuffer ImageBuffer(tile, i-1)
		Cls
	Next
	
	ClsColor 255, 255, 255
	SetBuffer BackBuffer()

End Function

Function CreateMap()

	Restore mapdata
	For y = 0 To 19
		For x = 0 To 29
		
			; Create a new map tile
			map.map_tile(x, y) = New map_tile
			Read map(x,y)\block_type
			
			; Just for the example, we are using the same frame number as the
			; block type
			map(x,y)\graphic = map(x,y)\block_type
			
		Next
	Next


End Function

Function DrawMap()

	tx = Floor(Xoffset / 32)
	ty = Floor(Yoffset / 32)
	
	; This gets the number of odd pixels we need to offset drawing by
	PXoffset = Xoffset - (tx * 32)
	PYoffsey = Yoffset - (ty * 32)
	
	If tx &lt; 0 tx = 0
	If ty &lt; 0 ty = 0
	If tx &gt;= 30 tx = 29
	If ty &gt;= 20 ty = 19
	
	For x = tx To (tx + 19)
		For y = ty To (ty + 15)
			If y &lt; 20 And x &lt; 30
				
				; Heres where we get the actual drawing coordinates
				dx = (x * 32) - Xoffset
				dy = (y * 32) - Yoffset
				
				DrawImage tile, dx, dy, map(x,y)\graphic

			EndIf
		Next
	Next

End Function

.mapdata
Data 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
Data 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 1 ,1 ,1 ,1 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 1 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 1 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 1 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,1 ,1 ,1 ,0 ,0 ,1
Data 1, 0, 1 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,1
Data 1, 0, 1 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,1
Data 1, 0, 1 ,1 ,1 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,1
Data 1, 0, 0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,1 ,1 ,1 ,0 ,0 ,1 ,0 ,0 ,1
Data 1, 0, 0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 1 ,1 ,1 ,1 ,1 ,1 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ,1 ,1 ,1 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1
Data 1, 0, 0 ,0 ,0 ,1 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1
Data 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1</pre> <br><br></td></tr></table><br>
<a name="343052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apollonius</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Neo that code is pretty nice but in B+ I don't see the square u hit with the little character I only see a blue bg <br><br></td></tr></table><br>
<a name="343257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neo Genesis10</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Substitute the created images for your own loaded versions and it'll work perfectly. I believe this has something to do with how B+ deals with buffers. <br><br></td></tr></table><br>
<a name="343772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> *RossC smacks Kaisuo with the lazy stick*<br><br>:P <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
