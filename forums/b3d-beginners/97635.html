<!DOCTYPE html><html lang="en" ><head ><title >Blitz arrays</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitz arrays</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Blitz arrays</a><br><br>
<a name="1135657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey guys,<br><br>A bit of a beginner question I suppose, but how would one go about setting the size of a blitz array (type field array), based on an external save file. I know you could just set the blitz array to it's maximum needed size and cover all possible outcomes, but is there another way?<br><br>The only time you can use a variable to declare a blitz array, is if it's a const you use. But const's have to be set using a number, so... Any ideas? <br><br></td></tr></table><br>
<a name="1135677"></a>

<a name="1135739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The answer to this question is an easy "no," because constants aren't really variables. Literally, they aren't; although they look like that to us in the IDE, all instances of a constant are converted to its contents by the compiler. Therefore, as far as the ultimate <i>program</i> is concerned, constants are just fixed, hard-written values the same as any other.<br><br>Therefore, there's no way to use a <i>variable</i> to set the size of a Blitz array. In a case like this, I'd say banks are more along the lines you'd need.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1135704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I keep forgetting about banks! Cheers. <br><br></td></tr></table><br>
<a name="1135738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem; I did the same thing a week or two ago in my own game when I decided that I wanted enemies to be able to have "sub-parts," like legs and such, but I didn't want to be limited to a preset maximum. Once upon a time I would've tried something silly with Types, but I've discovered more recently that such a solution isn't really possible/practical in Blitz, and requires an OO language instead. Realizing that all I needed was an expandable way to store the integer handles for the sub-part entities, banks were the only real remaining solution. <br><br></td></tr></table><br>
<a name="1135792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> something silly with Types <br></div><br><br>Foo?<br><br>Depending on what you wanted to do, there may be a way that's not as silly as you initially thought. Blitz3D can certainly implement trees and lists without any great difficulty.<br><br>From an intellectual/academic point of view, it's "cleaner" to try to avoid banks where possible as they have no structure. Performance-wise they're often one of the better solutions since more structured approaches sometimes require a bit of runtime casting, but that performance boost isn't always necessary and may come at the cost of some clarity, depending as always on what you're doing. <br><br></td></tr></table><br>
<a name="1135820"></a>

<a name="1135822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> True. Fortunately the sub-parts methodology only has one level of the hierarchy, i.e. the base enemy entity and all the parts (if any) attached to it. Most of the enemies don't even HAVE additional parts.<br><br>I'm not quite sure how Types would be much good for a tree though; I tried fancy things a while ago like<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Type Parent
	Field ID
	Field Child.Child
End Type

Type Child
	Field ID
End Type

; Set up five parents, each with three children
For i = 1 To 5
	Parent.Parent = New Parent
		Parent\ID = i
	
	For kids = 1 To 3
		Parent\Child.Child = New Child
			Parent\Child\ID = kids
	Next
Next

; List off the data for each parent
For Parent.Parent = Each Parent
	kids = 0
	For Parent\Child.Child = Each Child
		kids = kids + 1
	Next
	Print "Parent " + Parent\ID + " has " + kids + " children."
Next

WaitKey

End</textarea><br>This just counts through every single Child Type, instead of those "attached" to the parent, thus returning all 15 children instead of 3 per parent. There's no way that I've ever found to just affiliate specific children with their parent Type[s], and then not loop through ALL the child Types later.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1135831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> And by the way, wot's "foo?"<br><br>(inb4 dozens of smart answers) <br><br></td></tr></table><br>
<a name="1135838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ("Foo?" = onomatopoeic-noise-representing-innocent-curiosity, rather than "Eh?" or "What?" that might imply hostility or condescension. Kinda misfired.)<br><br>As for trees... well there are a few things to cover, but the biggest problem with the above code is actually this line:<br><br><pre class=code>Parent\Child.Child = New Child</pre><br><br>...put that inside a loop and you may as well not bother storing the pointer at all, as it keeps being overwritten.<br><br>Anyway, what you're currently doing up there (I think) is mixing the loose concept of trees with the built-in list functionality. Trees work best when they rely on <i>fixed</i> node structure (i.e. knowing in advance how many children each node has: canonise it in the object structure), and a non-fixed tree depth (so not distinguishing between parents and children, because any node could be both a child and a parent depending on the size of the tree).<br><br>This is because trees are mainly useful if you're going to search for specific entries: if you're going to go over the whole thing you may as well have a linear list anyway. Assuming the data is sorted, trees decrease the search time by making looping over the whole data set unnecessary (by an enormous factor).<br><br>So in answer to this:<br><br><div class="quote"> There's no way that I've ever found to just affiliate specific children with their parent Type[s], and then not loop through ALL the child Types later. <br></div><br><br>Firstly, you can affiliate specific children with their parent by ...storing them in fields:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Type Parent
	Field ID
	Field Child.Child[3]
End Type

Type Child
	Field ID
End Type

; Set up five parents, each with three children
For i = 1 To 5
	Parent.Parent = New Parent
	Parent\ID = i
	
	For kids = 1 To 3
		Parent\Child[kids] = New Child
		Parent\Child[kids]\ID = kids
	Next
Next</textarea><br><br>...the children are <i>right there</i> in the parent, in its fields (or in this case, elements of the Child field; normally for a tree you'd use two fields "left" and "right" or something like that). There is no second search-and-count step or comparing of IDs because you don't need to search for them: their existence is implied by the presence of the parent.<br><br>Secondly, you'd normally only have a single Node type rather than dividing Parents and Children in this way, because as I said above a tree with only two layers isn't really a tree at all. By analogy, consider a list: you'd use a single Element type with a NextNode field, not dedicated types for ListHead and ListEnd and so on; or you couldn't have a list of arbitrary length (instead the end is implied by pointing to Null as the next element, or something similar to that).<br><br>For some actual working tree code, see here: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2574" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2574</a><br><br>It might address some of your concerns about how to make custom types a little more useful (although it's a complicated working example, may not be entirely transparent).<br><br>I'm not really sure what to explain specifically, since I'm not sure which part it is that you're not comfortable with, but ...eh, if you actually want to get lectured, feel free to ask specific questions! (might do well to have a new thread for that that isn't titled with someone else's array question... sorry Ross) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
