<!DOCTYPE html><html lang="en" ><head ><title >Transitions on tiles</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Transitions on tiles</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Transitions on tiles</a><br><br>
<a name="220700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Uraliss</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi folks,<br>The map editor for my game is coming along nicely and im starting to knock up a simple game level so i can progress onto the actual game. The problem im having is one of lazyness really - i need to get transitions on some of my tiles so that say - a pebbled area goes into a grassy area. Rather than drawing hundreds of tiles that show this transition i was wondering if it was possible to calculate the images for these tiles in realtime. In my level array data I would use a flag that says that a particular tile should be a transitionl tile of the one above and the below it say... My game is a strategy game and doesnt need fast graphics except for spell effects etc.<br>Can anybody suggest a way to do this or should I bite the bullet and spend a week or so on photoshop doing them manually?<br><br>Cheers <br><br></td></tr></table><br>
<a name="220737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> A simple fade blend would be the cheapest way. Go through the tile set and find the transition tiles, then for each one read through the pixels of the two different tiles to be blended, take an average of the rgb components and write it to a new tile. <br><br></td></tr></table><br>
<a name="221206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Uraliss</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im having problems with the blending - cant seem to get my head around it.<br>Beaker helped me with the gradient but im still a little stuck.<br>Here is my code (with some rgb functions from Rob Farley)<br>It should blend the first tile into black (my idea is to blend 2 tiles together but i need to get this right first) - It isn't working - it seems to start ok then turns into a rainbow pattern!?!?!<br>Any help appreciated Thanks<br><br><br><br>;### Initialise<br><br>graphics 800, 600, 16<br>transition=loadanimimage("D:\Projects\Game Graphics\tileset2.bmp",64,64,0,50)<br>drawimage transition,0,0,1<br>drawimage transition,128,0,2<br>trans1=createimage(64,64)<br>trans2=createimage(64,64)<br>grabimage trans1,0,0<br>grabimage trans2,128,0<br>scratch=createimage(64,64)<br><br><br>;### Main Loop<br><br>for y=0 to 63<br>	for x= 0 to 63<br><br><br><br>		red1=read_r(x,y,trans1)<br>		green1=read_g(x,y,trans1)<br>		blue1=read_b(x,y,trans1)<br><br><br><br>;		red2=read_r(x,y,trans2)<br>;		green2=read_g(x,y,trans2)<br>;		blue2=read_b(x,y,trans2)<br><br><br>		gradient1#=float(x)/63*255<br><br><br>		compred#=float(red1/gradient1#)*255<br>		compgreen#=Float(green1/gradient1#)*255<br>		compblue#=float(blue1/gradient1#)*255<br><br><br>		write_rgb x,y,compred#,compgreen#,compblue#,scratch<br>	next<br>next<br><br>drawimage scratch,64,0<br>while not keyhit(1)<br>wend<br><br><br>;### Functions<br>;####################################################################<br><br>;ARGB Functions by Rob Farley 2003<br>;rob@...<br>;http://www.mentalillusion.co.uk<br><br>Function read_r(x,y,image_name)<br>argb=ReadPixel(x,y,ImageBuffer(image_name))<br>Return (ARGB Shr 16) And $ff<br>End Function<br><br>Function read_g(x,y,image_name)<br>argb=ReadPixel(x,y,ImageBuffer(image_name))<br>Return (ARGB Shr 8) And $ff<br>End Function<br><br>Function read_b(x,y,image_name)<br>argb=ReadPixel(x,y,ImageBuffer(image_name))<br>Return ARGB And $ff<br>End Function<br><br>Function write_rgb(x,y,r,g,b,image_name)<br>argb=(b Or (g Shl 8) Or (r Shl 16) Or ($ff000000))<br>WritePixel x,y,argb,ImageBuffer(image_name)<br>End Function <br><br></td></tr></table><br>
<a name="221216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just given it a quick scan, and I see one problem: you should be multiplying them numbers by 256 not 255 <br><br>oh, given it another quick scan and I see that no, actually 255 is right in this case, I thought you were doing the bit-shifting.... um, okay, give me a bit longer. <br><br></td></tr></table><br>
<a name="221218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> --<br><br>sorry just noticed:<br>"He stands at the Citadel of Uraliss, looking Northwest to the Plains of Blood. <br>It is dawn and Uraliss is slightly tired. The Ice Fear is very mild. Uraliss is utterly bold. "<br><br>Have you seen the LOM remakes at icemark.com?<br>Really impressive PC version :) <br><br></td></tr></table><br>
<a name="221225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, well for starters, better and faster to do this:<br>Get rid of unnecessary floats, and unnecessary multiplications and stuff.<br><br><pre class=code>
gradient1#=x/63.0

compred=red1*gradient1#
compgreen=green1*gradient1#
compblue=blue1*gradient1#
</pre> <br><br></td></tr></table><br>
<a name="221232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Uraliss</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anthony<br>That seems to have done the trick! dont understand why it wasnt working before.<br><br>Thanks.<br><br><br>malice<br>Yep they are cracking remakes. Brings back memories of late night speccy sessions stomping doomdark into the ground. And... I so had the hots for Shareth. <br><br></td></tr></table><br>
<a name="221236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good-o. Those floats probably didn't help.<br>While I'm at it, this is how you blend the 2.<br><br><pre class=code>
compred=(red1*gradient1#) + (red2*(1-gradient1#))
compgreen=(green1*gradient1#) + (green2*(1-gradient1#))
compblue=(blue1*gradient1#) + (blue2*(1-gradient1#))
</pre><br><br><br>Oh, and your reading of the pixels is massively inefficient. You're reading each pixel 3 times. And not using readpixelfast. And you're making function calls for each one, instead of doing it in-line. Slow, slow, slow. You should probably fix that. <br><br></td></tr></table><br>
<a name="221250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Uraliss</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Anthony,<br>I had worked out to blend the 2 but did it in a slightly different way to you.<br><br>Now that I understand the concept and you have helped me fix where I was going wrong I can take a look at optimising the code a bit.<br><br>Before that though I was going to investigate how to blend multiple tiles together so say:<br><br>1 1 2<br>2 X 3<br>1 1 3<br><br>where x will be the blended tile and tiles 1, 2, 3 are rocks, grass, and soil perhaps.<br>Then again maybe thats not feasible because the surrounding tiles wont be blended.<br><br>Maybe I will just pre-render the main ones and save em off to an animstrip for my level editor....<br><br>Any thoughts? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
