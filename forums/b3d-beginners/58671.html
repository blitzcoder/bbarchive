<!DOCTYPE html><html lang="en" ><head ><title >Flashlight for 3rd Person</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Flashlight for 3rd Person</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Flashlight for 3rd Person</a><br><br>
<a name="652740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kind of like the one in Silent Hill games. Any ideas? <br><br></td></tr></table><br>
<a name="652794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Baystep Productions</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> err. how about a cone set to "add" blend mode? <br><br></td></tr></table><br>
<a name="652797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a play around with this, it uses a projected spotlight texture:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1000" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1000</a> <br><br></td></tr></table><br>
<a name="652801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried that demo. I was hoping for something a little less complicated...<br><br>Edit: How can I make a cone a real time glowing light source? I want to import the cone and make it glow and produce dynamic light when moved around. <br><br></td></tr></table><br>
<a name="652879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Baystep Productions</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, first you need to learn C, then you need to by a powerful engin like Unreal. Then maybe you could do something like silent hill. ;)<br><br>Sorry buddy, unless your using blitz's internal spot lights, its really not gonna look that good. <br><br></td></tr></table><br>
<a name="653088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh was just using Silent Hill as an example. I know this effect is possible though, as I've played some demos like that before.<br><br>If that "batman" example can create realtime lighting, than I can probably turn my cone into a realtime light source.<br><br>And I do play on switching to Truevision3D in the future ;) <br><br></td></tr></table><br>
<a name="653255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is a visible light demo for Blitz3D somewhere. <br>It uses a few shapes next to each other with a different alpha blend value. It gives an atmosphere/blur like effect.<br>So maybe you could generate a number white cones, with incremental sizes and alpha values. <br><br></td></tr></table><br>
<a name="653285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I want to actually light up the dark areas of the map. I don't want to just "give the effect". <br><br></td></tr></table><br>
<a name="653321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not combine the cone with a spotlight then ? <br><br></td></tr></table><br>
<a name="653619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Didn't know spotlights could render in realtime. Can they? I'll try right now.<br><br>Edit: Yeah well this just isn't working. Might be because my meshes are already prelit, but I can't even get a proper light working. Any suggestions for this whole "flashlight" idea in general? It's a must-have for my game. <br><br></td></tr></table><br>
<a name="653767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about creating a pivot, then hanging a cone on it such that the pointed vertex tip of the cone is at the pivot and the base is away from the pivot; then, add a light at the pivot pointing toward the cone.  Use alpha on the cone so that it's mostly transparent, and DON'T set the cone for collisions.  That way, the light is shining down along the axis of the cone and throughout the cone.  Maybe you could play with the range/distance on the light, and also maybe use fogging on its range, to make sure the flashlight doesn't illuminate too far, and that it gets diffused as it shines away from the flashlight.  Could maybe that work?<br><br>Also, set AmbientLight to 0,0,0, to make the scenery dark so that the flashlight can be seen to do its work without being overruled by ambient light.<br>Here's some code I use in a dungeon crawler game I'm working on.  It's not directly a flashlight effect, but I set the light at the pcam (camera at player's position, simulating the player carrying a light source with him as he walks around the dungeon corridors).<br><br>;camera stuff<br>CameraFogMode camera,1<br>Const fogrange# = 30<br>CameraFogRange camera,1,fogrange<br><br>;light stuff<br>AmbientLight 0,0,0   ;dungeon to be dark, except for torch (local) lighting<br>light=CreateLight(2,pcam) <br>LightRange light,5 <br><br></td></tr></table><br>
<a name="653873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> And the light will generate "realtime" light while it is moved? <br><br></td></tr></table><br>
<a name="653925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, my example uses a radius light effect, i.e. the lighting of the environment operates at a radius from the pcam (player-camera) position, but the light effect emanating from the pcam point is definitely real-time.  However, I am not using a cone as in your flashlight situation, so the previous post is only theoretical.  I'll have to give it a test in the environment of my dungeon game and see if it works. <br><br></td></tr></table><br>
<a name="654056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wait, forget my whole "cone" idea for now. What do I have to do to make my light realtime? Just put it in the main loop? Because I've tried that before. Guess I'll just try it again later.<br><br>Edit: Doh! I just realized that since I'm using a level editor (3DWS) to make all my maps, I can't use B3D lights since everything already has lightmaps! Damn :( <br><br></td></tr></table><br>
<a name="654161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't you, once you have loaded your level, use the B3D command AmbientLight 0,0,0?  That should make general lighting to darkness, and only specific light sources would show the environment. <br><br></td></tr></table><br>
<a name="654192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. Just not possible with my prerendered lightmaps. Oh well :( <br><br></td></tr></table><br>
<a name="655720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you set your map meshes FX to zero instead of 1 (fullbright) then it should work noless. AFAIK you cannot override the FX setting after loading, so you need to set it in world studio. But the flashlight should then be the only light in the scene. and of course in lightmap-lit places the flaslite won't be very effective, like IRL.<br><br>But don't expect any shadows with DX-lights (CreateLight). <br><br></td></tr></table><br>
<a name="655736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well if I wanted to take off fullbright, I wouldn't render lightmaps in the first place. I'll try it just for now as an experiment, but it might not be the best idea in the long run.<br><br>Edit: I can't not render lights in 3DWS. Which means I'm stuck. FX doesn't work and making lights doesn't affect anything. <br><br></td></tr></table><br>
<a name="655753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe the mesh has no normals set, try updatennormals mesh <br><br></td></tr></table><br>
<a name="655845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope, doesn't work. Like I said, I can't "not" render lightmaps. Hope that makes sense. <br><br></td></tr></table><br>
<a name="656297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess you might as well forget the flashlight, then? <br><br></td></tr></table><br>
<a name="656352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not try and writepixels to the lightmap? You'd need to keep a record of the orginal pixel colours your overwriting though. If the torch length wasn't too long, you could get away with doing linepicks in a cone shape, getting the UV co-ords of the texture, and writing brighter pixels. <br><br></td></tr></table><br>
<a name="656360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have another idea here. Basically it would require two renders. Render the level. Hide everything except the cone shape for your torch beam. Render that against a black camera backround. Then texture a sprite in front of the camera with firstly the level render, then multi-texture the torch cone texture. Now, you could set this texture to modx2 or just add. It should give you a decent effect. I'll knock up a demo soon. <br><br></td></tr></table><br>
<a name="656509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm pretty much ditching the idea for now. It's just too hard for a beginner like me. Besides, it would just be more easy to make with a modern engine that supports dynamic lighting. I would rather do it the right way than just try to "cheat" the effect in. <br><br></td></tr></table><br>
<a name="656930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mostly everything you do in games programming is a cheat ;o) <br><br></td></tr></table><br>
<a name="656940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross C is onto something there.  After all, programming is just a way to get the computer to accomplish something you want done.  IMHO, there is no "cheat", just an algorithm to achieve your goal.  The quasi-3D effect of Doom was an algorithm to get the look and feel of a three-dimensional world, spurred on by the limits of technology available when it first came out.  You do what you can with what's available to achieve your goal.  If a straightforward programming command can't do it, you work "outside the box" to find a way to do it.  So, I would encourage you not to ditch it, but keep trying. <br><br></td></tr></table><br>
<a name="656942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well said <br><br></td></tr></table><br>
<a name="717589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Morbius</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross, did you ever try this? <br><br></td></tr></table><br>
<a name="717682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since this thread was exhumed, some additional thoughts by me.<br><br>True volumetric light with dynamic shadows would be nice, but I think it's not really neccessary.<br><br>One thing should be clear:<br><br>lightmapped meshes ARE fullbright, the lightmap will then be blended using the multiplying mode. So DX lights won't affect the scene.<br><br>You won't be able to override the FX of a loaded B3D in Blitz3D, so you need to save it with the wanted FX. If WordStudio doesn't allow to do that, then you may patch the file, using something like B3DTweak.<br><br>You need then to find a good balance of "halffullbright" geometry USING AMBIENTLIGHT, mixed with the lightmap and finally the dynamic DX flashlight. The lack of shadows with the flashlight may look unnatural.<br><br>Ross your idea with two renders may allow to do some interesting combinations. Personally I'm not a fan of additional renders. I think in  the end of the day there are still more than enough things that will force you to do additional renders. So we should try to keep this overhead on a low level.<br><br>One cone shaped flaslight I have seen that was looking really nice was in Deus Ex 2 the flashlight of the drones. It is made of a row of add-blended sprites. The row starts with a small sprite, then they are getting bigger, but also less opaque. The sprites are circular lights with very blured borders. If the flaslight is parallel to the camera, it will be about 25% opaque. If the camera is looking right into the flashlight, the sprites will blind the camera in their addition. The number of sprites is about 10 or so. Since its additional blending, it won't be very slow (compared to alpha)<br><br>Additionally you may use a DX light, positioned on a location that is determined using a linepick from the flashlight body. Or you could use a DX light in Cone Mode, tho I think this may be not very efficient, I could be wrong here.<br><br>So this sprite-row flashlight is also cone shaped, but it has no sharp edges as a cone mesh based solution usually suffers of. <br><br></td></tr></table><br>
<a name="718420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DQ</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i know this isn't exactly related the topic (sorry) but there's something i want cleared for my knowledge:<br><br>what exactly do u guys mean when u say something like "render something and then do another render"? or "additional renders"? or "rendered in 2 phases/passes"?<br><br>i mean, i think i get the CONCEPT but what is roughly the basic behind the scenes concept of this in blitz? or maybe i don't get the concept... :P<br><br>thx. <br><br></td></tr></table><br>
<a name="718880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>You won't be able to override the FX of a loaded B3D in Blitz3D<br> <br></div>You should be able to EntityFX 0 stuff.<br><br>@DQ you can have more than one camera in Blitz3D so essentially you can<br><br>Hide Camera 2<br>Show Camera 1<br>Do a RenderWorld()<br>Do stuff to this screen e.g. apply a blur filter etc.<br>Hide Camera 1<br>Show Camera 2<br>Do another Renderworld()<br><br>If camera 2 is set to not clear the screen ( Use cameraclsmode ) then it can render on top of camera 1's render. <br><br></td></tr></table><br>
<a name="718927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  If camera 2 is set to not clear the screen ( Use cameraclsmode ) then it can render on top of camera 1's render. <br></div><br><br>What an interesting idea.  I am so used to double-buffering  this line of thinking never occurred to me! <br><br></td></tr></table><br>
<a name="719348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Shambler - my mistake. I clearly remember EntityAlpha and some other commands didn't work with loaded B3D, some time ago. Now I just tested EntityAlpha and it works. <br><br>I guess this depends on the App that was used to export the mesh. May have something to do with missing normals. Fact is: A map mesh that was exported in Maplet/Decorator was imported in giles. I then added some stuff that was made in 3dsMax, with standard normals/smoothing. After exporting the lightmapped result in giles, the maplet/decorator parts of the mesh don't show any diffrence when I toggle FX 1/0, only the parts that I added from 3dsMax show the diffrence (for some reason even after adding an UpdateNormals). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
