<!DOCTYPE html><html lang="en" ><head ><title >Collision Detection</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Collision Detection</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Collision Detection</a><br><br>
<a name="467876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jellon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is my goal:  Be able to detect if a player is touching the ground or not.  I tried using a height off the ground, but then if the player gets stuck in cone shaped hole, then they can't jump to get out b/c the game thinks the player is off the ground.  There is no function I can find that detects if a player is touching a specific object (say terrain) or not.  Any ideas? <br><br></td></tr></table><br>
<a name="467895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >doctorskully</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just use Collisions; read about this command in your Blitz Docs to get a better idea.  Blitz will automatically act upon collision (yay!) so that way your character won't be going through the ground.  (Look up EntityRadius and such while you're at it.)<br><br>Here's the basic gist: Set up a radius on one mesh and then a radius, box, or nothing on the other.  Then assign an EntityType (a number).  Use Collisions to set up collision detection between mesh#1 and mesh#2.<br><br>To figure out if one mesh is touching another, then use the loop:<br><br>For c = 1 to CountCollisions(mesh)<br><br>...<br><br>Next<br><br>During the loop there are all sorts of commands you can use, such as EntityCollided or CollisionEntity and other good stuff.  The BlitzDocs do a much better job at explaining this in detail--check 'em out.<br><br>No functions?  There's at least ten. <br><br></td></tr></table><br>
<a name="467906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jellon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I get the collisions command and how it acts upon it.  I read about all that I could.  I like to learn for myself instead of bothering others, however, I want to detect air or ground for other purposes, such as you can't start moving while you're in the air jumping.  That means if you're on the ground, cause the object's velocity to be 0 when the key isn't held down, but only slowly decress the velocity while in the air.  So I need a way to detect in the air or not.  I tried using EntityCollided and I can't get it to work.  I'm low on time, I'll come back and post my code later.  Basically it always has an entitycollided return of zero, even when it is colliding.  I know it knows I'm colliding b/c otherwise I would fall through the ground and I double checked that I typed in the correct text. <br><br></td></tr></table><br>
<a name="467908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >doctorskully</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Common error before even looking at your code--the EntityCollided command is this: EntityCollided(entity,TYPE).  Are you SURE you're putting in the TYPE of the entity (the number) and not the entity itself?  Sorry, it's real common, thought I ought to mention it. <br><br></td></tr></table><br>
<a name="468034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jellon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;	Collisions<br>;Player<br>Const ColType_Zelon=1<br>Collisions ColType_Zelon,ColType_Zelon,1,1<br>Collisions ColType_Zelon,ColType_Solid,2,2<br>;Objects<br>Const ColType_Solid=2<br>Collisions ColType_Solid,ColType_Zelon,2,2<br><br>Function InAir(Zelon.Zelon)<br>	If EntityCollided(Zelon\Image3D,ColType_Solid)&lt;&gt;0 Then Return True Else Return False<br>End Function<br><br>Yeah, of corse the terrain is a solid and the zelon (the type of being that I have created) is a zelon.  I know they are setup right b/c the "Collisions ColType_Solid,ColType_Zelon,2,2" works just fine.  But the EntityCollided returns 0 unless I am holding down the movement button to force my zelon into a wall made from terrain.  When I do force it to move into the terrain, it returns some incredibly large number, like 256789 or something like that.<br>Somehow I overlooked the CollisionEntity Command.  It will probably suit my need.<br>Thanks Everyone. <br><br></td></tr></table><br>
<a name="468054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jellon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it:<br><br>Function InAir(Mesh)<br>;Does it touch the terrain?<br>	If EntityCollided(Mesh,ColType_Solid)&lt;&gt;0 Then<br>		For c=1 To CountCollisions(Mesh)<br>			If CollisionEntity (Mesh,c)=Terrain Then Return False<br>		Next<br>;Prevents being in air while running down slopes<br>	ElseIf EntityY(Mesh)-TerrainY(Terrain,EntityX(Mesh),EntityY(Mesh),EntityZ(Mesh))&lt;3 Then<br>		Return False<br>	Else<br>		Return True<br>	EndIf<br>End Function <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
