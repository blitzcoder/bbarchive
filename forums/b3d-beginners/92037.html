<!DOCTYPE html><html lang="en" ><head ><title >Finding and texturing  "parts" of a mesh?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Finding and texturing  "parts" of a mesh?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Finding and texturing  "parts" of a mesh?</a><br><br>
<a name="1047660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cubed Inc.</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I already posted a topic kind of like this, but I stated it completely wrong. <br><br>I'm working on this game, and I'm trying to add character costumization into it. It's  a lego game(the lego brand is in copyright of the Lego Company) so there won't be any seperate clothing meshes added to the already naked mesh. <br><br>Instead, i'm trying to make it so that you can change the texture of the lego person's head, torso, arms, legs and hands. In order to do this, I need to learn how to pick out the parts of the one whole naked mesh, such as the head or the torso, so you can change the texture of each part of the mesh indivisualy.<br><br>Can someone teach me how to do this? <br><br></td></tr></table><br>
<a name="1047681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GNS</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Load your mesh with LoadAnimMesh(). You can then use <a href="/b3ddocs/command.php?name=FindChild" target="_blank">FindChild()</a> and <a href="/b3ddocs/command.php?name=GetChild" target="_blank">GetChild()</a> to grab specific parts of the mesh. You can then apply different textures/brushes to the specific parts via whatever command is appropriate for you (PaintMesh, PaintSurface, EntityTexture, etc. etc.). <br><br>As an example, let's say I had a player model. In my modelling program I name each section of the body (i.e. the verts/faces that make up the head will be named "Head", the verts/faces that make up the torso are named "Torso" and so on). In Blitz, I can then load this mesh via something like:<br><pre class=code>
myMesh = LoadAnimMesh("myPlayerMesh.b3d")
</pre><br><br>Now let's say I wanted to grab the torso section, I could do:<br><pre class=code>
meshTorso = FindChild(myMesh, "Torso")
</pre><br><br>And to texture just the torso, I might do something like:<br><pre class=code>
PaintMesh(meshTorso, torsoTexture)
</pre><br><br>I'm not exactly in 'Blitz' mode right now (I'm kneck deep in TGE's ridiculous C++ codebase) but hopefully that'll give you a headstart. <br><br></td></tr></table><br>
<a name="1047721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cubed Inc.</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> GNS<br>I tried doing that but it doesn't work. Whenever I try, it says that the entity doesn't exist. <br><br></td></tr></table><br>
<a name="1047732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is the model constructed by using multiple mesh's or is it just a single mesh? If it's the latter then I would look at the commands that deal with surfaces. <br><br></td></tr></table><br>
<a name="1047739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cubed Inc.</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> dawlane <br>The model is constructed of multiple mesh's. I forgot to mention that -_- <br><br>Can someone teach me more of surfaces and how to use them to achieve my goal? <br><br></td></tr></table><br>
<a name="1047774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GNS</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's printed to the debuglog if you use this:<br><br><pre class=code>
For i = 1 To CountChildren(YOUR_MESH)
   DebugLog(EntityName$(GetChild(YOUR_MESH, i))
Next
</pre><br><br>Be sure to change YOUR_MESH to the entity handle of the mesh you loaded via LoadAnimMesh(). <br><br>The above code should print the names of all of the submeshes in your mesh to the debug log. <br><br></td></tr></table><br>
<a name="1047781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> It might be REALLY helpful if TAGames posted his attempted code here too, so we could better see whereabouts it's going wrong. For example:<br><br><div class="quote"> <br>I tried doing that but it doesn't work. Whenever I try, it says that the entity doesn't exist. <br> <br></div><br>Sounds like you possibly didn't change the example handle names given by GNS.<br>__________________________________________________________________<br><br>If your character model is indeed separate Meshes, then I think it may be  likely each has its own surface, in which case, you ought to be able to texture each individually.<br><br><br>________________________________________________________<br><br><br>GNS' debuglog code (PROVIDED YOU REMEMBER TO CHANGE THE HANDLE)  should identify the child mesh names perfectly for you. <br><br></td></tr></table><br>
<a name="1047786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cubed Inc.</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Malice <br>I did what GNS said and then I checked the debuglog and it said it only showed the root_joint bone of the animated mesh(which was animated with pacemaker)<br><br>I then tried it using a mesh that had no bones or animations, and after checking, none of the submeshes were shown.<br><br>I created the 3d model in Milkshape 3d 1.8.5<br><br>Does the 3d modeller or animation program have anything to do with it? <br><br></td></tr></table><br>
<a name="1047789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Then that sounds like it's all one mesh, then - Which I think means you ought to consider a multi-surface approach. This would involve knowing the specific triangles &amp; verts for each part of the mesh and how to orient the UV values...  Not something I am at all competent with I'm afraid.<br><br>Presumably Milkshape will dfefault its own 'names' for the bones etc. But also, the format will make a difference to waht data is actually exported, and then, I think there's some issue of what information is actually retained by B3D on Loading a mesh of particular formats.<br><br>I don't know enough of these details, but I'm confident someone on these forums can give you more advice. <br><br></td></tr></table><br>
<a name="1047833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You may need to use recursion as the root bone you are finding probably has children of its own, as does the one beneath that... <br><br></td></tr></table><br>
<a name="1047835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GNS</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, Matty may be right about that one. It comes down to how you have your model setup in the 3D package and how the exporter handles it. <br><br>There's some code in the Code Archives to recursively find children in anim meshes. I can't remember exactly where it is, though. <br><br></td></tr></table><br>
<a name="1047871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Function DebugNameChildren(Ent)
DebugLog(EntityName$(Ent))
n=CountChildren(Ent)
If (n)
For i = 1 To n
   DebugNameChildren(GetChild(Ent,i))
Next
End If
</pre> <br><br></td></tr></table><br>
<a name="1047943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cubed Inc.</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matty <br>Could you tell me more of "using recursion". I've never heard of it, and from what other users say abdout your idea, it just might be the solution. <br><br></td></tr></table><br>
<a name="1047959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Malice's example demonstrates it (post above yours). <br><br></td></tr></table><br>
<a name="1048165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Welcome back, rez. It sounds like you only have a single mesh. You tried to export in another format? <br><br></td></tr></table><br>
<a name="1048219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cubed Inc.</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross C <br>whos rez? I modelled the single mesh in milkshape, and have never really tried exporting meshes using anything other than b3d. <br><br></td></tr></table><br>
<a name="1048613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah , apologies then. You reminded me of a former member of the community a little :) <br><br></td></tr></table><br>
<a name="1054434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >K</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would recommend "PaintSurface(GetSurface())" to grab different surfaces or materials of a mesh, but only works when the mesh is UV Mapped,otherwise it might just go snow-white. <br><br></td></tr></table><br>
<a name="1054445"></a>

<a name="1054446"></a>

<a name="1054447"></a>

<a name="1054448"></a>

<a name="1054449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can put different materials on different parts of the model in Milkshape, but I don't know how Pacemaker handles the materials.<br><br>I'm not sure I would recommend separate materials for each part of the model though, since you describe customizing pretty much every body part. Having that many separate surfaces would be pretty inefficient for rendering, where you want to minimize how many separate materials are being pushed to the videocard (ie. share materials on as many polygons in the scene as possible.)<br><br>I think a better approach in this situation would be to actually modify the texture images on the fly. Yes modifying the texture could be expensive, but that hit only happens once (if it's a character creation section, who cares if it takes half a second to update) and after that it's considerably more efficient than a bunch of separate materials because, well, it's just one material.<br><br>Basically use commands like ImageBuffer and DrawImageRect to mix and match pieces of different textures into a single image. Like, you could grab the hand from one texture and the head from another and draw them into a new image that's applied to the model. If you do that, then the main tricky bit is making sure you lay out the UVs so that each body part is in a separate rectangular section for easy copying.<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1054455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is that MilkShape export the model without its hierarchy of groups, for that reason gives the error to find the feature with the command FindChild, if you want to recover those parts change their model was for this reason that I go to 3d max to export to b3d and retrieve parts findchild ... <br><br></td></tr></table><br>
<a name="1054681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now I'm thinking of whipping up a demo of what I described. I've never actually done that before, I just came up with that method. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
