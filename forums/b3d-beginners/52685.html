<!DOCTYPE html><html lang="en" ><head ><title >Emitting sound trouble</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Emitting sound trouble</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Emitting sound trouble</a><br><br>
<a name="588495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I've been toying with this simple thing now for over a half hour, but can't figure out what I'm doing wrong!  <br><br>footstep=Load3DSound("C:\Documents and Settings\user\Desktop\moo.wav")<br> If Sin(90+a1*2)&lt;-.85<br>  If  footstep_needed&lt;&gt;1<br>   EmitSound footstep,footstep_needed<br>   footstep_needed=0<br>  EndIf<br> Else<br>  footstep_needed=1<br> EndIf<br><br>I'm thinking its somewhere in the EmitSound part, the location of the sound is correct (i know lol, just experimenting) but any help is appreciated!<br><br>Chad <br><br></td></tr></table><br>
<a name="588536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, you didn't bother to say what the problem was!<br><br>But I think I've figured out your problem.  In the EmitSound command, you pass the footstep_needed variable as the entity to emit the sound from.<br><br>Either you're confused, or you made a mistake.  Replace the footstep_needed variable with one that contains an entities handle. <br><br></td></tr></table><br>
<a name="588660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, footstep_needed has nothing to do with the EmitSound Command! It's only a flipflop varible.<br><br>I see you took this snippet from my "headbanger" example. But there' something I don't understand: why did you alter the line<br><br>If  footstep_needed&lt;&gt;0<br><br>to<br><br>If  footstep_needed&lt;&gt;1<br><br>??<br><br>This way it's likely that it is never played. Because it works this way: The value of Sin(90+a1*2) will vary between -1.0 and +1.0. At a value of -1.0 the camera reaches the deepest point, representing the point where you will hear the footstep. Since the value -1.0 will not be reached EXACTLY, instead it may be something between -0.85 and -1.0 (due to shoe_size) we need to do the footstep as soon as it's below -0.8499. To prevent playing the sound multiple times we set the variable footstep_needed to zero as soon as we have played it once, and reset it to 1 as soon as the mentioned sin() value is higher than -0.85, to make it ready for the next footstep sound.<br><br>BTW if you altered the variable shoe_size and then the example didn't work anymore, you probably need to use a value higher than -0.85, maybe -0.5 or even -0.25 to make sure the step won't be missed. But basicly you need to understand what the code is doing!<br><br>Here's the original snippet:<br><pre class=code>
; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;wobble camera
 If walking=1
  a1#=(a1#+shoe_size) Mod 360
  Else
  ;a1#=a1#*0.8
 EndIf
 PositionEntity camera,Cos(a1#)*head_bang_X#,Sin(90+a1#*2)*head_bang_Y#,0,0

 UpdateWorld
 RenderWorld

 ; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;control footstep sound
 If Sin(90+a1*2)&lt;-.85 ; camera min distance to ground?
  If  footstep_needed&lt;&gt;0
   Color 255,255,255
   Text 50,50, "Tap!" ; play a footstep once!
   footstep_needed=0 ; disallow further footstep sounds
  EndIf
 Else ; camera out of min distance range,
  footstep_needed=1 ; allow next footstep
 EndIf
</pre><br><br>I hope I made this clear. And did you create a listener? You need a listener to make 3D Sounds work. But hey, personally I think you don't really need 3D sound for the footsteps of the FPS Camera! because they will come from the same origin, whereever you go. THe foosteps always com from below the camera, so you may use ordinary PlaySound commands instead. You better use 3D Sounds for things that are not fixed with the camera, like example given  other Characters footsteps. <br><br></td></tr></table><br>
<a name="588860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, thanks guys for the help, I got it working,  and yes you cleared it up jfk.<br><br>Thanks again!<br>Chad <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
