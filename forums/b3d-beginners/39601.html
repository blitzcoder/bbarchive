<!DOCTYPE html><html lang="en" ><head ><title >Perturbatio or anyone</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Perturbatio or anyone</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Perturbatio or anyone</a><br><br>
<a name="441861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PCBGuy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perturbatio or anyone less, (about "the damn mouse" question)<br>  Your code (supplied in previous message)was very helpful and I adapted to my code just fine but I am still stumped with an issue. I am using different graphic bitmaps as counters (ie KCFleet1.bmp) for the game so the Global "imgcounter" in your sample even adjusting it for using .bmp images won't work in its present form. It grabs the same image each time no mater how I set it up. Each of the counters I use in the game are different and actually a placement for a whole other level of the game. So they are more like "data head counters"  (ie. So when I place and then move these (.bmp images) counters I am actually moving a header "variable" for each fleet of a varied number of ships. How can I use your imgcounter in a more robust form with the code you supplied? <br><br> Also a small issue: the curser grabs the counter at the corner when it would be kool to grab it in the center, No mater where I place AutoMidhande it doesn't do anything for the mouse curser. (I got it to center my .bmp images nicely on the board grid though) also this is all within the code you supplied. Anyone to help would be GREAT! <br><br></td></tr></table><br>
<a name="441905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. In Pertubatio's example, add another field to the TYPE, or in fact as many as you want, to determine what counter is there.<br>eg.<br><pre class=code>     Type Counter
     Field X
     Field Y
     Field Image
     Field TypeOfCounter
     End Type
     
     for n = 1 to 10      ;10 different types of counters with 10 different images
     game.counter = new counter
     game\x = rand(7)
     game\y = rand(7)
     game\image = LoadImage("counter"+n+:.bmp")
     game\typeofcounter = n
     next</pre>Then in your code, rather than just drawing imgcounter at the location, draw game\image for each counter.<pre class=code>     for game.counter = each game
     DrawImage game\image,game\x,game\y
     Next</pre>And likewise, when you move a counter, keep track of which one has been moved where. I'm guessing you can figure out that for yourself. :)<br><br>2. If you want the mouse at the center of the counter, then use the MoveMouse command, to move it to the center. I assume you know where the center of the button is? Just use MoveMouse X,Y to move the cursor to that location before starting the dragging.<br><br>+BlackD<br><br>Then have, <br><br></td></tr></table><br>
<a name="441908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PCBGuy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks +BlackD, <br>  I'll take it from there and see what I can do. I solved the second problem simply by adding a shift to the x,y in the Drawcounter function, Thanks again <br><br></td></tr></table><br>
<a name="441934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PCBGuy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK here is the problem once more. It all works except I still have no control on the number of counters. All I get is the first counter ("ECShipcounter1.bmp")printing over again for as many times as the loop goes which in this case is 5 times. They are printed where I want them its just they are all the same one not #2,#3 etc... Please anyone????? <br><br><br>Graphics 1280,1024,16,2  ; Create size of map<br><br>SetBuffer BackBuffer()<br><br>backgroundimage =  LoadImage("star1280.jpg") <br>ECshipprofile =    LoadImage ("ECShip_profile.bmp")<br>Planets =          LoadImage ("planets.bmp")<br><br><br><br><br>;***************************************************************************************<br><br>Type Fleetcounter<br>   Field X%<br>   Field Y%<br>   Field Image<br>   Field TypeofCounter<br>End Type<br><br><br>Dim ECFleet(5)<br>ECFleet(0) = LoadImage ("ECShipcounter1.bmp")<br>ECFleet(1) = LoadImage ("ECShipcounter2.bmp")<br>ECFleet(2) = LoadImage ("ECShipcounter3.bmp")<br>ECFleet(3) = LoadImage ("ECShipcounter4.bmp")<br>ECFleet(4) = LoadImage ("ECShipcounter5.bmp")<br><br>For i = 0 To 4<br><br>NextCounter.Fleetcounter = New Fleetcounter<br>NextCounter\X = x<br>NextCounter\Y = y<br>NextCounter\image = LoadImage (ECFleet(i))<br>NextCounter\TypeofCounter = i<br>Next<br><br><br>Dim Board(39,31)<br><br><br>;***** Sets up a loop to place 5 counters when variablearray "Board" = 1 *************<br>For i = 0 To 4<br>    AutoMidHandle True<br>	x=x+1<br>   Board (x, y)=1<br>   Next<br><br><br><br>Global CurrentCounter.FleetCounter = New FleetCounter<br>	CurrentCounter\X = -1<br>	<br>While Not MouseHit(3)<br><br>TileBlock backgroundimage<br>MaskImage ECshipprofile,001,001,001<br>DrawImage ECshipprofile,300,-145<br>MaskImage Planets,001,001,001<br>DrawImage Planets,0,0<br><br><br><br>	CheckInput()<br>	DrawGrid()<br>	DrawCounters()<br><br>	<br>	Flip <br>	Cls<br>Wend<br><br>End<br><br><br>;;;;;;;;;;;;;;;;;;;<br>Function CheckInput()<br>	;if left mouse button is pressed<br>	If MouseHit(1) Then <br>		;if there is no current counter<br>		If CurrentCounter\X &lt; 0 Then<br>			;if a tile is under the mouse<br>			If Board(MouseX()/32,MouseY()/32) = 1 Then<br>			<br>			<br>				CurrentCounter\X = MouseX()/32<br>				Currentcounter\Y = MouseY()/32<br>			EndIf<br>		Else ;there is already a current counter<br>			If Board(MouseX()/32,MouseY()/32) = 0 Then<br>						<br>				;move it to the new location<br>				Board(CurrentCounter\X,CurrentCounter\Y) = 0<br>				Board(MouseX()/32,MouseY()/32) = 1<br>				CurrentCounter\X = -1<br>				Currentcounter\Y = -1<br>			EndIf<br>		EndIf<br>	EndIf<br>	<br>	If MouseHit(2) Then<br>		CurrentCounter\X = -1<br>	EndIf<br>	<br>End Function<br><br><br>;;;;;;;;;;;;;;;;;;;<br>Function DrawGrid()<br>	Color 45,45,45<br>	For x = 0 To 39<br>		For y = 0 To 31<br>			Rect x*32,y*32,32,32,False<br>		Next<br>	Next<br>End Function<br><br><br>;;;;;;;;;;;;;;;;;;;<br>Function DrawCounters()<br>	For x = 0 To 39<br>		For y = 0 To 31<br>					If Board(x,y) =  1 Then	DrawImage (ECFleet(i)), (x*32)+16,(y*32)+16<br>	             	MaskImage (ECFleet(i)),001,001,001<br>		Next<br>		<br>	Next<br>		If CurrentCounter\X &gt;-1 Then<br>		          If MouseX() = -1 Then<br>	            	DrawImage (ECFleet(i)), (MouseX()+16), (MouseY()+16)<br>	            	MaskImage (ECFleet(i)),001,001,001<br>		        Else<br>				EndIf<br>		<br>	EndIf<br>End Function <br><br></td></tr></table><br>
<a name="441935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why do you need to LoadImage twice?<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Dim ECFleet(5) 
ECFleet(0) = LoadImage ("ECShipcounter1.bmp") 
ECFleet(1) = LoadImage ("ECShipcounter2.bmp") 
ECFleet(2) = LoadImage ("ECShipcounter3.bmp") 
ECFleet(3) = LoadImage ("ECShipcounter4.bmp") 
ECFleet(4) = LoadImage ("ECShipcounter5.bmp") 

For i = 0 To 4 

NextCounter.Fleetcounter = New Fleetcounter 
NextCounter\X = x 
NextCounter\Y = y 
NextCounter\image = (ECFleet(i)) 
NextCounter\TypeofCounter = i 
Next 
</textarea><br><br><br>and...<br><br>Im not 100% on this, but maybe you need some <br><br>For i=0 to 4<br>...<br>Next<br><br>lines in your functions??? <br><br></td></tr></table><br>
<a name="441939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh...<br><br>You dont need to use DrawImage (ECFleet(i)) etc.<br><br>When you have CurrentCounter\image<br><br>also dont forget to For/Next your CurrentCounter types.<br><br>i.e. For f=CurrentCounter.Counters Each Counters<br>or whatever. <br><br>Sorry, Im at work and havent got b3d so cannot test this. <br><br></td></tr></table><br>
<a name="441940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PCBGuy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont know what the line from previous message:<br><br>game\image = LoadImage("counter"+n+:.bmp")<br><br>does. As it is it doesnt work, can someone show how to use the +n+:.  stuff <br><br></td></tr></table><br>
<a name="442165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> there's a typo in that line, it should be:<br><pre class=code>
game\image = LoadImage("counter"+n+".bmp") 
</pre><br><br>as a quick example of what it does, run this:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
For n = 0 To 4
Print "counter"+n+".bmp"
Next
WaitKey()
</textarea><br><br>*EDIT*<br>However, you may be better off using LoadAnimImage and having one image with all your counters in it (assuming they are all the same size).<br>Then used DrawImage x,x,n where n is the number of the counter you want to use.<br><br>*EDIT*<br>to draw the counter with the mouse at the centre, simply offset the x and y coordinates by one half the image width and height respectively.<br><br>i.e.<br><pre class=code>
DrawImage imgCounter, MouseX()-(ImageWidth(imgCounter)/2), MouseY()-(ImageHeight(imgCounter)/2)
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
