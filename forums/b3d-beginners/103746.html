<!DOCTYPE html><html lang="en" ><head ><title >Lightmapping partial success, need final advice!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Lightmapping partial success, need final advice!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Lightmapping partial success, need final advice!</a><br><br>
<a name="1251917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I finally made some progress in blending lightmaps and texture shadows, somehow.. :)<br><br>My only problem is the original global illumination quality is discarded when using Multiply mode (default = Mode 2 or multipl2x = Mode 5) on the lightmap.<br><br>Any tips to retain the global illumination lighting with multiply?<br><br>Here is a sample that I have done using Gile[s] and FastExt Shadows Trial<br><br><img src="http://i.imgur.com/c1R3Rorl.jpg"><br><br>You can see the comparison with the untouched mesh vs the modified mesh using textureblend.<br><br>Appreciate any help, thanks! <br><br></td></tr></table><br>
<a name="1251926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am not sure if your problem is produced by the blendmode, it may be produced by a too dark ambientlight in giles and too bright ambientlight in blitz3d/fastext <br><br></td></tr></table><br>
<a name="1251934"></a>

<a name="1251936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi RemiD,<br><br>Thank you for the quick response. Apparently, both are the same model and texture. I have setup a trigger to switch between blendmode on the lower mesh and it changed to a darker tone when I switch and trigger between the blend modes, and the above is multiplyx2.<br><br>Question, do I need to use the same ambient light color in giles and blitz3d? <br><br>I would just like to have a darker shadow in my lightmaps (so I'm using ambient light in giles) while maintaining a bright static gi lighting like the original mesh above it.. <br><br></td></tr></table><br>
<a name="1251938"></a>

<a name="1251939"></a>

<a name="1251940"></a>

<a name="1251941"></a>

<a name="1251942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The shadowed areas and thus the shadows, are of the color of the ambient light (remember the ambient light is everywhere even in shadowed areas, this is why some meshes can be visible even without a light).<br>If you use one color for the shadowed areas/never changing shadows of the static casters and another color for the changing shadows of the turning moving casters, it will appear weird.<br><br>Just my opinion, you do what you want. <br><br></td></tr></table><br>
<a name="1252046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I already set the ambient color the same for both, nothing changed.<br><br>What I am still having problems with is still the blend mode with blitz changing my lightmap texture and removing the gi maps by blending it..<br><br>I do not see any results when I only manipulate the shadow texture and leave the lightmapped model untouched. when I apply both multiply on both it ruins the lighting on the model :((<br><br>Do you have any success with this type of setup? How? <br><br></td></tr></table><br>
<a name="1252059"></a>

<a name="1252060"></a>

<a name="1252061"></a>

<a name="1252062"></a>

<a name="1252067"></a>

<a name="1252068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have access to the mesh of the shadow, maybe you can color the texels of the shadow to the color of the ambient light (or slightly darker) and then decrease the alpha of the mesh of the shadow until the shadow blends well with the shadowed areas of the lightmap ?<br><br>another idea would be to keep a copy of the lightmap with the shadows of the static casters, and create a copy of the lightmap, and use copyrect to add the shadows of the turning moving casters to the copy of the lightmap, and paint your mesh with the copy of the lightmap on your mesh instead of the original lightmap. Not sure if this will be fast enough... Also you will need to have a lightmap with enough texels per unit (at least 1 texel per 0.1unit) or it will look bad... <br><br></td></tr></table><br>
<a name="1252206"></a>

<a name="1252207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again for these info RemiD. I wish you could provide some basic demo if you have tried it already at your end. As for the texels, I have no idea where to start and how to go about those.<br><br>I believe there's a solution for this and I have yet to see a game that fully utilizes this either as indie or just a demo in Blitz3d.<br><br>It does work with multiply blend but it's obvious with the multiply option it also ruins the GI data that is also on the lightmap texture. or am I just doing it incorrectly?<br><br>P.S: Already contacted FastLib and Frecle (giles) and still have not received any response from them :/ <br><br></td></tr></table><br>
<a name="1252213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You cannot do this in a straightforward way with only the fixed functionality that Blitz3D and the FastLib give you.<br><br>This is done with pixel shaders, where you have complete control over how a pixel from the dynamic shadow texture and the static lightmap are combined. In this case Blitz3D is holding you back.<br><br>Perhaps you can port your project to that "Hardwired" engine, which seems to support shaders. You'll have to inform yourself with other users how to use shaders with that.<br><a href="http://www.blitzbasic.com/logs/userlog.php?user=13255&amp;log=1897" target="_blank">http://www.blitzbasic.com/logs/userlog.php?user=13255&amp;log=1897</a><br><br>- - - - -<br><br>Here are some examples of this being done with other engines:<br><br><img src="http://s28.postimg.org/oq2hvkarx/Dual_Lightmaps_In_Action_Detail.png"><br>Taken from: <a href="http://docs.unity3d.com/Manual/LightmappingInDepth.html" target="_blank">http://docs.unity3d.com/Manual/LightmappingInDepth.html</a><br><br><img src="http://s28.postimg.org/zbmd7kh3h/c008d0132204d9f3aca8555f2ac94138.jpg"><br>Taken from: <a href="https://answers.unrealengine.com/questions/48053/unreal-engine-udk-shadow-blending-method.html" target="_blank">https://answers.unrealengine.com/questions/48053/unreal-engine-udk-shadow-blending-method.html</a> <br><br></td></tr></table><br>
<a name="1252217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for this info Kryzon :) I'm just not aware that Blitz3d, particularly 3rd party libraries like FastLib did not support this. I don't mind porting to the HardWired version, in fact I really like the project!<br><br>So now my questions are:<br><br>1) How hard is it to replicate the above effects that seems to be the standard now to optimize scenes? I know even UDK and Unity has these features for performance reasons and a very significant tool.<br><br>2) Is hardwired compatible with existing libs like Fastext?<br><br>3) Do I need to use DX9 now and the new commands or can I stick with the default Blitz3d DX7 functions since I will be just using shaders? <br><br></td></tr></table><br>
<a name="1252248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1)  It's as hard as learning shader programming. Once you know how to write complex HLSL shaders you'll understand how to implement a variety of effects, and mixing shadowmaps with lightmaps is such a use.<br>Here someone suggests a formula for it:<br><a href="http://irrlicht.sourceforge.net/forum/viewtopic.php?f=4&amp;t=45070#p259025" target="_blank">http://irrlicht.sourceforge.net/forum/viewtopic.php?f=4&amp;t=45070#p259025</a><br><br>2) No. The FastLibs poke and peek the Blitz3D memory for integration. Hardwired was programmed from scratch, so the architecture is absolutely different.<br><br>3) I don't know much about Hardwired, you'd better ask someone more experient. As far as I know there is an effort to use the same commands etc. <br><br></td></tr></table><br>
<a name="1252421"></a>

<a name="1252422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you Kryzon, this is very informative. Now I know and have a clear understanding on where I will be moving forward with my Blitz project.<br><br>BTW, are you a shader guy yourself? or could you recommend someone of caliber who can take on this task? I would be interested in offering contract work to achieve this feature and at the same time make it open source to blitz community down the line.<br><br>Kudos and thanks again. <br><br></td></tr></table><br>
<a name="1252426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br>You can reach me through my e-mail. You can find it in my profile page by clicking on my nickname. <br><br></td></tr></table><br>
<a name="1252711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Kryzon. just sent you an email! :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
