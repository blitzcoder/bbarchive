<!DOCTYPE html><html lang="en" ><head ><title >Bi-Directional Rotation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Bi-Directional Rotation</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Bi-Directional Rotation</a><br><br>
<a name="795025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do I steer (yaw) a wheel and spin it (pitch) at the same time without making it "wobble?" I've tried using pivots and parenting them to the wheel, but that doesn't work. <br><br>It's the same idea as using "TranslateEntity" to move a object while turning it.<br><br>Thanks <br><br></td></tr></table><br>
<a name="795040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something like this?  See example code I posted further down the thread ...<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=45936#511351" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=45936#511351</a> <br><br></td></tr></table><br>
<a name="795167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Stevie. I was using "TurnEntity" instead of "Rotateentity"--I think that was the problem. <br><br></td></tr></table><br>
<a name="795168"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chwaga</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> if that doesnt work, I found that roll can mess things up, so i just constantly set roll to 0 <br><br></td></tr></table><br>
<a name="795242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @chwaga<br>Thanks for the heads up, but I have no need to rotate the tire in the roll axis.<br><br>@Stevie<br>Is that the same (obviously not as complicated) base you used for your 3D Verlet engine?<br><br>@Everyone<br>Works great now! <br><br></td></tr></table><br>
<a name="795290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>@Stevie<br>Is that the same (obviously not as complicated) base you used for your 3D Verlet engine?<br> <br></div><br><br>Not really - it's just a wee bit unrealistic don't you think ;) <br><br></td></tr></table><br>
<a name="795738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Not really - it's just a wee bit unrealistic don't you think ;)  <br></div>Especially because you can turn without moving forward :) <br><br></td></tr></table><br>
<a name="797601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another question while on the subject of vehicles:<br><br>How is realistic collision between wheels (with shocks) and the terrain done? <br><pre class=code>AlignToVector</pre>seems the closest command to what I'm looking for. It still won't work in a world with ramps (or hills) due to the fact that it only aligns to one axis. <br><br></td></tr></table><br>
<a name="797611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>How is realistic collision between wheels (with shocks) and the terrain done? <br> <br></div><br><br>If you're talking about suspension then you'll need to look into spring physics.<br><br>To align the chassis to the wheels when on any terrain ( hills / ramps etc.. ) you can use align to vector on both the pitch and roll axes.  See the driver demo in 3d samples for an example.<br><br>Stevie <br><br></td></tr></table><br>
<a name="797806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think I understand the AlignToVector command. The docs aren't very clear on how it works and there isn't currently an example. What does vectorX, vectorY, and vectorZ, tell the compiler?<br><br>Thanks for the help. <br><br></td></tr></table><br>
<a name="797813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Eh .. the vector which you want to align the axis to.<br><br><div class="quote"> <br>...........<br>..........2<br>...........<br>1..........<br> <br></div><br><br>Say point 1 is the left tyres and point 2 is the right tyres, looking from behind the vehicle.<br><br>The vector pointing from p1 to p2 is ..<br><br>V\x = p2\x - p1\x     <br>V\y = p2\y - p1\z <br>V\z = p2\z - p1\z<br><br>To align the x ( roll axis ) of the chassis to this vector use ...<br><br>Aligntovector Chassis, Vx, Vy, Vz, 1<br><br>Like I said - look at the driver example in the 3d samples folder.<br><br>Stevie <br><br></td></tr></table><br>
<a name="798398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> So "driver" averages of the wheels' positions to find the position of the chassis? I understand why it aligns it twice, but why does it calculate the center of the chassis using two different methods?<br><pre class=code>zx#=(EntityX( wheels[2],True )+EntityX( wheels[4],True ))/2
zx=zx-(EntityX( wheels[1],True )+EntityX( wheels[3],True ))/2
zy#=(EntityY( wheels[2],True )+EntityY( wheels[4],True ))/2
zy=zy-(EntityY( wheels[1],True )+EntityY( wheels[3],True ))/2
zz#=(EntityZ( wheels[2],True )+EntityZ( wheels[4],True ))/2
zz=zz-(EntityZ( wheels[1],True )+EntityZ( wheels[3],True ))/2
AlignToVector car,zx,zy,zz,1</pre>As apposed to:<br><pre class=code>zx#=(EntityX( wheels[1],True )+EntityX( wheels[2],True ))/2
zx=zx-(EntityX( wheels[3],True )+EntityX( wheels[4],True ))/2
zy#=(EntityY( wheels[1],True )+EntityY( wheels[2],True ))/2
zy=zy-(EntityY( wheels[3],True )+EntityY( wheels[4],True ))/2
zz#=(EntityZ( wheels[1],True )+EntityZ( wheels[2],True ))/2
zz=zz-(EntityZ( wheels[3],True )+EntityZ( wheels[4],True ))/2
AlignToVector car,zx,zy,zz,3</pre><br>Thanks for clearing this up Stevie! <br><br></td></tr></table><br>
<a name="800254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmmm...<br>Stevie hasn't posted in the forums for several days... <br><br></td></tr></table><br>
<a name="800404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I didn't realise I was your personal tutor ;)<br><br>Imagine this image ...<br><br><div class="quote"> <br>1.....2<br>.......<br>.......<br>3.....4<br> <br></div><br><br>Neither alignment methods are finding the center of the chassis.  The first works out the vector from midpoint of wheel 1&amp;3 to midpoint of 2&amp;4, the second works out the vector from midpoint of 3&amp;4 to midpoint of 1&amp;2.  <br><br>It's quite logical if you think about it.  For example,  you could align the x-axis solely based on a vector from wheel 1 to wheel 2 but ..... using the average of the left wheels and right wheels makes the alignment smoother when you consider it will be rare for all 4 wheels to be touching the ground<br><br>Stevie <br><br></td></tr></table><br>
<a name="800453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Sorry, I didn't realise I was your personal tutor ;) <br></div>Heh :)<br>I think you're one of the only (active) knowledgeable blitzers on this topic.<br><br>It makes sense to find the average of the left and right wheels...<br><br><br>My lack of understanding relates to the internal processes of the command.<br>I'm under the impression that the Entity is aligned to the vector positions given, on top of the entity it's colliding with (the landscape). Correct?<br><br>Thanks for all the constructive help. <br><br></td></tr></table><br>
<a name="800486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I think I understand now (after doing a test):<br><br>The "vector" values in the "AlignToVector" command are the 1-dimesional deferences inbetween the wheels.<br><br>Is this correct?<br><br><br><br>Now how does "AlignToVector" know to align to the car to the terrain? Does "Collisions" take care of that?<br><br>Thanks again... <br><br></td></tr></table><br>
<a name="800493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The "vector" values in the "AlignToVector" command are the 1-dimesional deferences inbetween the wheels.<br><br>Is this correct?<br> <br></div><br><br>Pretty much.<br><br><div class="quote"> <br>Now how does "AlignToVector" know to align to the car to the terrain? Does "Collisions" take care of that?<br> <br></div><br><br>Blitz collisions prevent penetration with the terrain so the wheels are always sitting just on top or above.  Strictly speaking you're not aligning the car to the terrain, you are aligning the car to the wheels.  The result gives the impression of alignment with the terrain. <br><br></td></tr></table><br>
<a name="800643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nathaniel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> :O<br><br>Now this finally makes sense!<br><br><br>This method makes the suspension system easier to control (and code) because I can manipulate the differences inbetween the wheels to make it look like the car is bouncing/rocking. Right?<br><br><br>Thank you for all of your help, Stevie! <br><br></td></tr></table><br>
<a name="800693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad to help. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
