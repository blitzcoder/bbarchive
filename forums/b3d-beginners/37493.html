<!DOCTYPE html><html lang="en" ><head ><title >Sin &amp; Cos trouble</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sin &amp; Cos trouble</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Sin &amp; Cos trouble</a><br><br>
<a name="412662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pazza</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All its been a while.<br><br>Line 164,188,164+Sin(angle*4)*distance,188+Cos(angle*4)*distance <br><br>im using the above to draw a line starting at 164,188 screen coordinates.<br><br>the routine draws the line at various angles and distances.<br><br>What i need to know is at which screen coordinate does the line actually end.<br><br>basically i need to find the x,y pixel coordinates at which the line stops drawing.<br><br>I thought i could just do:<br><br>x=164+Sin(angle*4)*distance<br>y=188+Cos(angle*4)*distance<br><br>but that doesnt work.<br><br>Any help would be greatly appreciated.<br><br>many thanks <br><br></td></tr></table><br>
<a name="412665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think sin(angle*4) will be converted to an integer once multiplied by distance in this example - assuming 'distance' is defined as an integer, hence the incorrect x &amp; y<br><br>try <br><br>x = 164 + sin(angle*4) * float( distance ) <br><br></td></tr></table><br>
<a name="412666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should work.  The line command draws from x, y to  x1, y1.<br><br>So the end point coordinate is x1, y1. <br><br></td></tr></table><br>
<a name="412680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pazza</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That doesnt work either just gives the same result for some reason. <br><br></td></tr></table><br>
<a name="412695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks like a bracketting problem<br><br>try<br><br>x=164+(Sin(angle*4)*distance)<br>y=188+(Cos(angle*4)*distance) <br><br></td></tr></table><br>
<a name="412706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pazza</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still doing the same thing,heres the whole code if<br>that helps any:<br><br>It should run ive removed the graphic loading &amp; drawing stuff.<br><br>The function shotangle draws the line &amp; uses sin &amp; cos<br><br>;***fielder testing*************<br><br><br><br>Graphics 640,480,16<br>SetBuffer BackBuffer()<br>Dim  field1%(2),xfield%(15,11),yfield%(15,11)<br>Dim  game%(19,1),history%(2,5),game_results(18,1)<br><br><br>;Global pitch_graphic = LoadImage("pitch2.png")<br>;Global fielder = LoadImage("fielder.png")<br>Global rnd1<br>Global x,y,angle,distance<br><br>;***READ FIELD POSITIONS***<br><br>;Gosub readfield<br><br><br><br><br><br>;***Draw pitch*************<br>m=0<br>While m&lt;10<br>Cls<br>;DrawBlock pitch_graphic ,0,78<br><br><br><br>;** Destination in screen coordinates**<br>Text 10,10,"X="+x<br>Text 10,20,"y="+y<br><br>For i%=1 To 11<br>Color 202,20,20<br>  ;PCIRCLE xfield%(n%,i%),yfield%(n%,i%),1<br>   ;Oval 2*xfield%(n%,i%),2*yfield%(n%,i%),10,10,1<br><br><br>;DrawImage fielder,2*xfield%(8,i%),(2*yfield%(8,i%))+26,0<br><br><br>Next<br><br>rand1(6)<br>r=rnd1<br><br>rand1(90)<br><br>shotangle(rnd1,r)<br><br><br><br> Flip<br> VWait<br> Delay 1000<br><br> m=m+1<br><br><br>Wend<br><br><br>WaitKey<br><br>End <br><br><br><br><br><br><br><br>;/***random numbers**/<br>Function rand1(n)<br> rnd1=Rand(0,n)<br>End Function<br><br><br><br>Function shotangle(angle%,distance%)<br><br><br>If distance&gt;3 distance=distance*30<br>If distance&lt;4 Then distance=distance*25<br><br><br><br>;;limit distance;;<br>If angle%&gt;-1 And angle%&lt;12 And distance%&gt;105 Then distance%=105<br>If angle%&gt;11 And angle%&lt;18 And distance%&gt;90 Then distance%=90<br>If angle%&gt;17 And angle%&lt;26 And distance%&gt;82 Then distance%=82<br>If angle%&gt;25 And angle%&lt;33 And distance%&gt;68 Then distance%=68<br>If angle%&gt;32 And angle%&lt;59 And distance%&gt;60 Then distance%=60<br>If angle%&gt;58 And angle%&lt;63 And distance%&gt;70 Then distance%=70<br><br>If angle%&gt;62 And angle%&lt;79 And distance%&gt;92 Then distance%=92<br>If angle%&gt;78 And angle%&lt;91 And distance%&gt;105 Then distance%=105<br><br><br>distance=distance*2<br><br>Color 255,255,255<br>Line 164,188,164+Sin(angle*4)*distance,188+Cos(angle*4)*distance <br>Color 200,200,200<br>x=164+(Sin(angle*4)*distance) <br>y=188+(Cos(angle*4)*distance) <br><br> <br>End Function<br><br><br><br><br><br><br>;**FIELD POSITIONS**<br><br>.readfield<br><br>Restore positions<br><br>For a=1 To 15<br>For i=1 To 11<br>   Read xfield(a,i),yfield(a,i)<br>Next <br>Next<br><br><br>.positions<br>;''normal 1''<br>Data 74,69,66,112,26,72,53,34,119,72,120,111<br>Data 47,144,102,142,57,60,6,113,100,42<br><br>;''normal 2''<br>Data 74,69,66,112,24,56,58,58,109,99,7,103<br>Data 126,69,90,35,116,140,35,126,77,159<br><br>;''normal 3''<br>Data 74,69,66,112,43,51,22,81,26,123,46,150<br>Data 93,36,101,93,128,59,121,144,86,139<br><br>;''normal 4''<br>Data 74,69,66,112,59,64,98,45,128,81,120,128,85,157<br>Data 101,96,38,150,45,106,23,75<br><br>;''normal 5''<br>Data 74,69,66,112,63,60,128,74,98,37,134,121,99,149<br>Data 18,119,53,97,51,147,110,99<br><br>;''attack 1''<br>Data 74,69,66,112,63,61,53,57,55,89,99,100<br>Data 97,45,119,76,45,131,111,148,31,73<br><br>;''attack 2''<br>Data 74,69,66,112,47,95,106,96,63,61,54,58<br>Data 121,71,27,71,43,135,102,134,94,52<br><br>;''attack 3''<br>Data 74,69,66,112,64,63,56,58,99,78,115,103<br>Data 101,129,37,74,57,91,24,113,51,139<br> <br>;''attack 4''<br>Data 74,69,66,112,63,61,58,83,88,82,104,60<br>Data 26,70,25,103,44,133,119,104,96,144<br><br>;''attack 5''<br>Data 74,69,66,112,62,62,40,79,49,103,100,77<br>Data 88,97,129,121,51,138,100,142,98,52<br><br>;''defend 1''<br>Data 74,69,66,112,18,79,136,76,48,41,97,37<br>Data 14,114,30,139,126,110,100,124,64,153<br><br>;''defend 2''<br>Data 74,69,66,112,105,43,121,74,138,99,118,115<br>Data 108,152,56,138,31,118,35,74,50,48<br><br>;''defend 3''<br>Data 74,69,66,112,53,43,35,66,13,93,24,129<br>Data 55,147,118,52,129,84,102,104,102,154<br><br>;''defend 4''<br>Data 74,69,66,112,10,77,124,75,52,33,106,40<br>Data 30,105,33,143,69,162,123,107,100,136<br><br>;''defend 5''<br>Data 74,69,66,112,101,36,130,73,121,101,124,141<br>Data 88,153,38,150,16,114,23,73,51,53<br><br>Return <br><br></td></tr></table><br>
<a name="412717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't really be arsed to look at your code, so here's something that might help...<br><br><pre class=code>Graphics 640,480

Repeat
	Cls

	x=Rand(0,639)
	y=Rand(0,480)

	For n=1 To 50
		angle = Rand(0,359)
		distance = Rand(0,200)
		Line x,y,x+(Sin(angle)*distance),y+(Cos(angle)*distance)
		Delay 50
	Next

Until KeyHit(1)</pre> <br><br></td></tr></table><br>
<a name="412727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Regular K</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you do Sin(45)+Cos(45) it should be equal to 1 or almost (few tenths off because of floats inprecision). So if you find the distance between x,y and x1 and y1, just multiply sin and cos by that. In theory it should work, or at least for me. <br><br></td></tr></table><br>
<a name="412907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pazza</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for trying rob,but your codes the same as mine<br>i still cant find the destination of the line using:<br><br>x1=x+(Sin(angle)*distance)<br>y1=y+(Cos(angle)*distance)<br><br>There must be an easy way of doing this?. <br><br></td></tr></table><br>
<a name="412911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pazza,<br><br>It's not very clear from your code what you're trying to acheive here.  If you could explain in more detail I'm sure there'll be a more elegant way of doing this.  You're doing alot of messing about with 'distance', probably unecessarily - which may be you're problem.<br><br>Happy to help if you give more details :) <br><br></td></tr></table><br>
<a name="412912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I really don't understand what you're trying to achieve.<br><br>x1=x+(Sin(angle)*distance)<br>y1=y+(Cos(angle)*distance) <br><br>x/y is the beginning of the line, x1/y1 is the end of the line. <br><br></td></tr></table><br>
<a name="412922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pazza</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> all i want is the pixel coordinates for the end of the line,the line starts at the same position so i know the beggining i just cant get the end screen position.<br><br>Heres a simpler example,x1 &amp; y1 variables should give the end point of the line in pixel coordinates,but if you run it they dont give the proper screen coordinates.<br><br><br>Graphics 640,480,16<br>SetBuffer BackBuffer()<br><br>distance=90<br><br>;***Draw pitch*************<br>m=0<br>While m&lt;10<br>Cls<br><br><br>Text 10,10,"X1="+x1<br>Text 10,20,"y1="+y1<br><br><br> Color 202,20,20<br> angle=Rand(0,90)<br><br> Line 164,188,164+(Sin(angle*4)*distance),188+(Cos(angle*4)*distance)<br><br> x1=164+(Sin(angle*4)*distance)<br> y1=188+(Cos(angle*4)*distance) <br><br> Flip<br> VWait<br> Delay 1000<br><br> m=m+1<br><br>Wend<br><br>end <br><br></td></tr></table><br>
<a name="412925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pazza</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doh sorry guys ive worked it out my mistake.<br><br>Thats what you get for programming whilst drinking beer last night and a megga hangover today. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
