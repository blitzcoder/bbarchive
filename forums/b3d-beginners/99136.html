<!DOCTYPE html><html lang="en" ><head ><title >rendering new environments</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >rendering new environments</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >rendering new environments</a><br><br>
<a name="1162294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >airborne</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would anyone be able to give me an example of a code to transition from one location to another on keypress? I have the main world and buildings of my game rendered via sketchup and i have it functioning in blitz fine, I'm just attempting figure out how to walk up to a door, press a button and go into that room/building (obviously would have to create the room in sketchup as well) I'm just a little stumped on how the code would work. Any advice appreciated thanks :) <br><br></td></tr></table><br>
<a name="1163502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >airborne</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> bump <br><br></td></tr></table><br>
<a name="1163503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...I think this topic is way too big to give any meaningful help without knowing something about the way your game is already set up. There are as many ways to handle levels and environments are there are to make a game, not least because the concept of "room", "level", "environment" etc. is itself really too vague to be useful by itself. <br><br></td></tr></table><br>
<a name="1163529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd suggest you take a browse through the 3D samples that came with your Blitz3D download. You'll get a clearer idea of what's involved after looking at the sample code and seeing it in action. <br><br></td></tr></table><br>
<a name="1163586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not that hard to do.<br><pre class=code>If Keyhit(key) Then PositionEntity(entity,x,y,z)</pre><br><br>Look at picking commands and make the door pickable.<br><pre class=code>EntityPickMode(door,2)
If CameraPick(camera,x,y) = door Then PositionEntity(entity,x,y,z)</pre> <br><br></td></tr></table><br>
<a name="1163587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Load next map?  Simple question people...<br><br>You will need to detect the portal location somehow by detecting if you're near something with either:<br><br>1. An array of coordinates stored in a file compared against the player/camera's location with the common distance formula:<br>Where (X1,Y1,Z1)=Source (X2,Y2,Z2)=Target<br>Dist = Sqr((Abs(X1 - X2) ^ 2) + (Abs(Y1 - Y2) ^ 2))<br>Dist = Sqr((Dist ^ 2) + (Abs(Z1 - Z2) ^ 2))<br><br>2. Using the collision detection functions (no keypress required)<br><br>Then either:<br><br>1. Dump the old map data out with the various FreeEntity functions, and load the new map and model information into your program.<br><br>2. Assuming you've compiled your program into executable form,<br>using the Fastextensions (a separate library you can purchase)<br>ExecAndExit function to call your next .exe program (I haven't tried the built in ExecFile or End commands yet so try them out) <br><br></td></tr></table><br>
<a name="1163636"></a>

<a name="1163637"></a>

<a name="1163638"></a>

<a name="1163683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming you want to use a loading screen or a screen with an animation of a door (as in Morrowind or Resident Evil) when the player activates a door. (not a streaming engine)<br><br>This is how i would do it :<br><br>Step 1 : detect if the player activates the door :<br>you can check if a collision happened between the player collider and the door collider<br>or <br>you can check if a door collider has been picked after a linepick (after a KeyHit() for example)<br><br>Step 2 : do the transition between the outdoor to the indoor or to a zone to another zone :<br>Disactivate the player controls<br>and<br>you can show a loading screen with an image displayed (it can be the name of the zone or a screensot of the zone)<br>or<br>you can show an animation of a door being opened<br><br>During this step,<br>you can delete all entities of the previous zone and load all entities of the next zone (the list of entities to load depending on the zone can be directly in the bb code or written in an external file)<br>or<br>you can simply use HideEntity(PivotZone001) and ShowEntity(PivotZone002) where PivotZone001 and PivotZone002 are pivots which are parents of some entities depending on their zone. In this case, there is no need to delete or to create anything because all entities have been previously loaded/created and set as childs of a pivot depending on their zone.<br><br>Step 3 : show the new zone, return to the game<br>you can now show the new zone <br>and <br>position player to the wanted position (the other side of the door)<br>and<br>reactivate the player controls<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1163703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >airborne</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah mostly like the elderscroll series, mostly noticable in skyrim how the door would open slightly then load into the room, i did do a ton of digging into code example/posting archives. I appreciate all the info everyone it'll at least give me something to experiment with. This is what I'm working with now, keep in mind it's a test program for this purpose, no game entities or textures are in this code line, so you very well could run this yourself. The biggest problem with this code right now, is that "entityradius" command is forcing the sphere object down into the plane, as soon as the sphere collides with either cube it sticks, it is intended to "positionentity" from one sphere to the other upon contact. In anycase, code example is in next post. <br><br></td></tr></table><br>
<a name="1163704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >airborne</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;opening settings<br>Graphics3D 1240,800,16,2<br>SetBuffer BackBuffer()<br><br>;camera and light settings<br>light=CreateLight()<br>camera=CreateCamera()<br>CameraRange camera,1,10000<br>CameraClsColor camera,0,0,255<br>AmbientLight 50,50,50<br>RotateEntity light,90,0,0<br><br>;Misc. Object transparency/gravity/collision<br>alpha#=1<br>type_plane=1 <br>type_player=2 <br>type_scenery=3 <br><br>;create plane<br>	;ground<br>	plane=CreatePlane()<br>	PositionEntity plane,0,-1,0<br>	EntityColor plane,0,255,0<br>	EntityType plane,type_scenery<br>	EntityRadius plane,2 <br>	EntityBox plane,-2,-2,-2,4,4,4<br>	<br>;player object<br>sphere=CreateSphere()<br>ScaleEntity sphere,0.1,0.1,0.1<br>EntityColor sphere,255,0,0<br>PositionEntity sphere,30,0,0<br>PositionEntity camera,30,0,0<br>ScaleEntity sphere,0.1,0.1,0.1<br>EntityParent camera,sphere<br>EntityType sphere,type_player<br>EntityType camera,Type_player<br><br>;building objects<br>cube=CreateCube()<br>PositionEntity cube,-25,0,0<br>EntityType cube,type_scenery<br>EntityColor cube,255,0,0<br>cube1=CreateCube()<br>PositionEntity cube1,25,0,0<br>EntityType cube1,Type_scenery<br>EntityColor cube1,0,0,255<br>x#=0<br>y#=0<br>z#=0<br>EntityRadius sphere,sphere_radius#<br>EntityRadius cube,cube_radius#<br>EntityRadius cube1,cube1_radius#<br><br>;Player Object Keyboard and Mouse Controls<br>While Not KeyDown(1)<br>If KeyDown(32)=True Then TurnEntity sphere,0,-1,0<br>If KeyDown(30)=True Then TurnEntity sphere,0,1,0<br>If KeyDown(31)=True Then MoveEntity sphere,0,0,-0.05<br>If KeyDown(17)=True Then MoveEntity sphere,0,0,0.05<br>If KeyDown(207)=True Then MoveEntity camera,0,0,1<br>If KeyDown(199)=True Then MoveEntity camera,0,0,-1<br>If KeyHit(57)=True Then MoveEntity sphere,0,10,0<br>mxs# = mxs# + MouseXSpeed()<br>mys# = mys# + MouseYSpeed()<br><br>If msx# &gt; 45 Then mxs# = 0<br>If msx# &lt; 0 Then Msx# = 45<br><br>If Mys# &gt; 45 Then mys# = 45<br>If mys# &lt; -45 Then mys# = -45<br><br>RotateEntity camera,mys#,-mxs,0<br>MoveMouse 620,400<br>If MouseDown(3) Then MoveEntity sphere,0,0,0.5<br><br>;Set Collision Method and Response Values<br>method=2 <br>response=2 <br><br>method_info$="ellipsoid-to-polygon" <br>response_info$="slide1" <br><br>MoveEntity sphere,0,-0.50,0 ;Gravity<br><br><br>;Change Collision Method<br>If KeyHit(1)=True <br>method=method+1 <br>If method=4 Then method=1 <br>If method=1 Then method_info$="ellipsoid-to-sphere" <br>If method=2 Then method_info$="ellipsoid-to-polygon" <br>If method=3 Then method_info$="ellipsoid-to-box" <br>EndIf <br><br>;Change Collision Response<br>If KeyHit(1)=True <br>response=response+1 <br>If response=4 Then response=1 <br>If response=1 Then response_info$="stop" <br>If response=2 Then response_info$="slide1" <br>If response=3 Then response_info$="slide2" <br>EndIf <br>;Enable collisions between type_character and type_ground <br>Collisions type_player,type_player,2,2 <br><br><br>;Enable collisions between type_character and type_scenery <br>Collisions type_player,type_scenery,method,response <br><br>;Enable collisions between world/buildings/player<br>For k = 1 To CountCollisions(sphere)<br><br>  If CollisionEntity(sphere,k) = cube Then <br>     PositionEntity sphere,26,0,0<br>  EndIf<br>  <br>  If CollisionEntity(sphere,k) = cube1 Then <br>      PositionEntity sphere,-26,0,0<br>  EndIf<br>Next<br><br>Flip<br>UpdateWorld<br>RenderWorld<br>Text 10,10, "x: " + EntityX(sphere) +"  y: " + EntityY(sphere) + "  z:  " + EntityZ(sphere)<br>Wend<br>End <br><br></td></tr></table><br>
<a name="1163706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >airborne</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nearly forgot, -home- and -end- key function camera zoom in/zoom out. <br><br></td></tr></table><br>
<a name="1163868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >airborne</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> so, i can seem to move objects on contact now, but it would seem that walls tend to block character entity from being placed in the room <br><br></td></tr></table><br>
<a name="1163908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Airborne&gt;&gt;From my tests, if you want to move a collider through others colliders (in this case in order to position the Player at the other side of the door), you have to delete the collider, then position the Player, then create a new collider.<br><br>You can read on others posts on this forum that it is possible to use either :<br>HideEntity(Collider)<br>ShowEnitty(Collider)<br>or<br>ResetEntity(Collider)<br>in order to achieve the same effect (move a collider through others colliders)<br>however i have not found it works properly or maybe i have not used it in the correct way.<br>See this example :<br><a href="http://blitzbasic.com/Community/posts.php?topic=98459#1150341" target="_blank">http://blitzbasic.com/Community/posts.php?topic=98459#1150341</a> <br><br></td></tr></table><br>
<a name="1163987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't understand why a mesh has to pass trough another mesh when repositioning.<br>It just needs to be drawn at the specified location, not moved. <br><br></td></tr></table><br>
<a name="1166064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >airborne</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I ended up doing was... leaving a ceiling off a room, and moving said object above the room, when it loads the character falls into the room, the interesting thing about this is, you never even notice the player object falling, it just shows the room upon loading.... Well guys onto other things now days... new maps... trying to animate so on and so forth... good luck with your projects. <br><br></td></tr></table><br>
<a name="1166065"></a>

<a name="1166066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >airborne</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> nearly forgot... an easy fix to this problem also involves making the ceiling a non-collidable object, so the character would simply pass through it, as long as the character cant jump into it/touch it, then a player would simply never know.<br>-Remi, thanks for the advice, I'm still learning Blitz so what you have been saying more or less i've been attempting to understand, but with all the work i've put into collisions thus far i think i get what you're saying now, simply integrate hide/show into the function lines when moving between rooms, even though it does feel like a tricky thing to balance, you have my gratitude as attempting to create a separate object for a ceiling and then properly position it so that it blocks character view from the outside would be pain-staking.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1166070"></a>

<a name="1166071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >K</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use this instead of PositionEntity:<br><pre class=code>Function Repos(entity,x,y,z,Yaw=-500)
 t=GetEntityType(entity)
  EntityType entity,0
   PositionEntity entity,x,y,z,1
  If Yaw&lt;&gt;-500RotateEntity entity,EntityPitch(entity,1),Yaw,EntityRoll(entity,1),1
 EntityType entity,t
End Function</pre><br>..and all issues go away.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1166105"></a>

<a name="1166106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> K&gt;&gt;I have tried to delete the EntityType in order to be able to reposition the entity but it does not always work, see the example in the link i have posted above.<br><br><br><div class="quote"> <br>i think i get what you're saying now, simply integrate hide/show into the function lines when moving between rooms, even though it does feel like a tricky thing to balance<br> <br></div><br>Airbone&gt;&gt;<br>No i don't suggest you use EntityType(Collider,0) or HideEntity(Collider) then ShowEntity(Collider) because from my tests it does not work in all cases.<br>What i suggest is to set the mesh as a child of the collider and when you want to reposition the mesh, you unset the parent&gt;child relation with the collider, you delete the collider, you create a new collider at the position you want, and you set the mesh as a child of the new collider. From my tests, this will work correctly in all cases.<br><br>For example :<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;When you create the character
CharacterCollider(I) = CreatePivot()
PositionEntity(CharacterCollider(I),5,0.251,5) ;0.251 because of the 0.25 radius of the collider
CharacterMesh(I) = CopyEntity(CharacterXMesh)
PositionEntity(CharacterMesh(I),EntityX(CharacterCollider(I),True),EntityY(CharacterCollider(I),True),EntityZ(CharacterCollider(I),True))
RotateEntity(CharacterMesh(I),EntityPitch(CharacterCollider(I),True),EntityYaw(CharacterCollider(I),True),EntityRoll(CharacterCollider(I),True))
MoveEntity(CharacterMesh(I),0,-0.25,0) ;-0.25 because of the radius of the collider
EntityParent(CharacterMesh(I),CharacterCollider(I),True)
EntityRadius(CharacterCollider(I),0.25)
EntityType(CharacterCollider(I),CollCharacters)

Collisions(CollCharacters,CollWalls,2,2)

;When you want the Character to go through a wall with a collider or when you want to reposition it :
EntityParent(CharacterMesh(I),0)
FreeEntity(CharacterCollider(I))
CharacterCollider(I) = CreatePivot()
PositionEntity(CharacterCollider(I),30,0.251,30)
PositionEntity(CharacterMesh(I),EntityX(CharacterCollider(I),True),EntityY(CharacterCollider(I),True),EntityZ(CharacterCollider(I),True))
RotateEntity(CharacterMesh(I),EntityPitch(CharacterCollider(I),True),EntityYaw(CharacterCollider(I),True),EntityRoll(CharacterCollider(I),True))
MoveEntity(CharacterMesh(I),0,-0.25,0) ;-0.25 because of the radius of the collider
EntityParent(CharacterMesh(I),CharacterCollider(I),True)
EntityRadius(CharacterCollider(I),0.25)
EntityType(CharacterCollider(I),CollCharacters)
</textarea><br><br>If you create a routine that manages the creation/deletion of all moving sphere colliders in this way, this is easy to do.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1167883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >airborne</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> XD kindof on the back burner for right now, I don't know what the hell happened but I cant even get the open world to free, and individual rooms to load in place of the open world... ugh, this is taxing<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">;Initialize
AppTitle "Relics of Cilldrea"
Graphics3D 1240,800,32,2
SetBuffer BackBuffer() 
WBuffer enable
MoveMouse 620,400

;Camera and Lighting
light=CreateLight()
camera=CreateCamera()
CameraRange camera,1,10000
CameraClsColor camera,0,0,255
AmbientLight 100,100,100

;Object Transparency/Collision Types
alpha#=1
type_player=2 
type_scenery=3 

;Player
sphere=CreateSphere()
ScaleEntity sphere,0.1,0.1,0.1
EntityColor sphere,255,0,0
PositionEntity sphere,3767.575684,173.597656,3840.225586
PositionEntity camera,3767.575684,174,3837
ScaleEntity sphere,0.1,0.1,0.1
cone=CreateCone()
PositionEntity cone,3767.575684,173.597656,3841
RotateEntity cone,90,0,0
EntityColor cone,0,255,0
ScaleEntity cone,0.1,0.1,0.1
EntityType sphere,type_player
EntityType camera,Type_player
EntityParent camera,sphere
EntityParent cone,sphere

;Global Maps
zone1=LoadMesh("zone1.3ds")
PositionEntity zone1,0,-1,0
ScaleEntity zone1,0.1,0.1,0.1
EntityType zone1,Type_scenery
EntityRadius zone1,2
EntityBox zone1,-2,-2,-2,4,4,4

;Locations
;Cilldrea
	Cilldrea=LoadMesh("Cilldrea.3ds")
	PositionEntity Cilldrea,4085,168,3470
	ScaleEntity Cilldrea,0.1,0.1,0.1
	RotateEntity Cilldrea,0,145,0
	EntityType Cilldrea,Type_scenery
	EntityRadius Cilldrea,2
	EntityBox Cilldrea,-2,-2,-2,4,4,4
	A=CreateCube()
	PositionEntity A,52.271523,0.826000,32.899349
	EntityColor A,255,0,0
	EntityType A,type_scenery
;Siria
	Siria=LoadMesh("Siria.3ds")
	PositionEntity Siria,1324.533203,172,3992.619385
	ScaleEntity Siria,0.1,0.1,0.1
	EntityType Siria,Type_scenery
	EntityRadius Siria,2
	EntityBox Siria,-2,-2,-2,4,4,4
;Inferenza

;Cities/Buildings
;Cilldrea Item Store
itemstore=LoadMesh ("item_store.3ds")
ScaleEntity itemstore,0.3,0.3,0.3
EntityType itemstore,type_scenery
HideEntity itemstore
AA=CreateCube()
PositionEntity AA,3838.277588,248.776001,3349.664307
ScaleEntity AA,0.5,0.5,0.5
EntityColor AA,255,0,0
EntityType AA,type_scenery
;Cilldrea Castle

;Player Object Keyboard and Mouse Controls
While Not KeyDown(1)
If KeyDown(32)=True Then MoveEntity sphere,1,0,0
If KeyDown(30)=True Then MoveEntity sphere,-1,0,0
If KeyDown(31)=True Then MoveEntity sphere,0,0,-0.05
If KeyDown(17)=True Then MoveEntity sphere,0,0,0.05
If KeyDown(207)=True Then MoveEntity camera,0,0,1
If KeyDown(199)=True Then MoveEntity camera,0,0,-1
If KeyDown(29)=True Then MoveEntity sphere,0,10,0
If KeyHit(57)=True Then MoveEntity sphere,0,10,0
If MouseDown(1) Then MoveEntity sphere,0,0,5
If MouseDown(3) Then MoveEntity sphere,0,0,0.5

	mxs# = mxs# + MouseXSpeed()
	mys# = mys# + MouseYSpeed()
	If msx# &gt; 90 Then mxs# = 0
	If msx# &lt; 0 Then Msx# = 90
	If Mys# &gt; 45 Then mys# = 45
	If mys# &lt; -45 Then mys# = -45
	
RotateEntity camera,mys#,0,0
RotateEntity sphere,0,-mxs#,0

;Gravity
MoveEntity sphere,0,-0.50,0


;Set Collision Method and Response Values
method=2 
method_info$="ellipsoid-to-polygon" 

;Enable collisions between type_character and type_scenery 
Collisions type_player,type_scenery,method,response 

;Enable collisions between world/buildings/player
For k = 1 To CountCollisions(sphere)

  If CollisionEntity(sphere,k) = A Then 
    FreeEntity Cilldrea
	FreeEntity zone1
	FreeEntity A
	ShowEntity itemstore
	ShowEntity AA
	PositionEntity itemstore,1,5000,1
	PositionEntity sphere,1,5001,1
	PositionEntity cone,1,5001,1
	PositionEntity camera,1,5002,-2
	UpdateWorld 
  EndIf
  
  If CollisionEntity(sphere,k) = AA Then
	HideEntity itemstore
	HideEntity AA
	ShowEntity zone1
	ShowEntity A   
	PositionEntity sphere,183.7,65,67
	PositionEntity camera,183.7,66,64
	UpdateWorld 
  EndIf
Next

Flip
UpdateWorld
RenderWorld 
Text 10,10, "x: " + EntityX(sphere) +"  y: " + EntityY(sphere) + "  z:  " + EntityZ(sphere)
Wend
End </textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
