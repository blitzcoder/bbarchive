<!DOCTYPE html><html lang="en" ><head ><title >Really large 3D scenes - pushing my luck...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Really large 3D scenes - pushing my luck...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Really large 3D scenes - pushing my luck...</a><br><br>
<a name="1163304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess I'm having memory issues.<br>I get a Memory Access Violation when I try to load my scene file.<br><br>It had worked under the demo version of BB3D, but now it doesn't.<br>It's a 43MB .x file.<br>I tried saving it as a .b3d file (Max5 &amp; exporter)<br>Size was 16MB, still won't load. Frustrating.<br><br>I wanted to see how far I could push this application since I have<br>12 other .x files about 8MB apiece that are skinned meshes with<br>184 bones in them.<br><br>I have my own visual basic 6 code, but the frame rate stank.<br>The demo encouraged me to purchase this full version because it worked STELLAR in the hacked mak/castle demo -- I had left the terrain map in and it still ran really fast!!!<br><br>I'm trying to make a movie here...<br>Can I expand the available memory to B3D somehow??? <br><br></td></tr></table><br>
<a name="1163310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can I expand the available memory to B3D somehow??? <br></div><br><br>No. This isn't the problem, anyway: B3D applications only have the same memory limits as any other 32-bit application (2GB, cannot be crossed in any practical way).<br><br>My best recommendation for loading would be to simply split things up. What are these meshes that they have to be loaded as single files? Break 'em apart into scene components and see if that works a bit better. You might need some kind of scene manager, but it will probably be worth it. Note that you can export animations as armatures of meshless pivots if necessary, and then parent meshes or bones onto these, so the scene doesn't need to be one huge file simply for the purposes of animating it in one go. In terms of total quantity 96MB is nothing for a loaded and running application, but the loader might choke on it if it's one file.<br><br>Also, don't use the .x format unless you can verify that it's the DirectX 7 version (which I'm pretty sure doesn't support bones, and even if it does the Blitz3D loader won't load them). The .b3d format is best in all circumstances.<br><br><br>As for performance, Blitz3D animates bone deformations in software. This is <i>slooooow</i> for large numbers of boned meshes. Do consider switching smaller/background animated elements to something with better performance like MD2/3 - bones are really most useful for their dynamic nature and a movie doesn't need that, so if you can spare the memory a vertex-animated mesh will render much more quickly. (On the other hand, if it worked before it worked before, so...)<br><br>Do you even care about performance for a movie? Render frames for as long as you want in top quality - it only has to be done once, after all! <br><br></td></tr></table><br>
<a name="1163314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, please talk to me a bit...  You clearly know what you're talking about!<br><br>1. I read somewhere that the limit was 65K verts.  Is this correct?<br>2. My x files are pretty generic<br>3. By skinned mesh, I meant bones in an x file - skin weights 1.0 only<br>4. Just 12 maximum actors, the rest would be dummies.<br>5. Live rendered movie would be preferable - I have an AI <br><br></td></tr></table><br>
<a name="1163315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can split up my scenes.  So OK.<br>How about a theoretic maximum for the application?<br>My card pulls 67.5MV/S fill rate.<br>I was able to load skins in the demo - haven't tried it yet in my purchase copy. <br><br></td></tr></table><br>
<a name="1163316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1 more thing - My AI animates the bones from an .ani file, so I can have a large library of different motions.  I don't use the .x animation <br><br></td></tr></table><br>
<a name="1163317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does load the actors ok.<br>How can I reference their bones by bone number-<br>FindChild is all I've got right now. <br><br></td></tr></table><br>
<a name="1163318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I read somewhere that the limit was 65K verts. Is this correct? <br></div><br><br>This is per-surface, not per-mesh (a mesh can have an arbitrary number of surfaces) and certainly not per-scene! On some cards it may be lower (this isn't really Blitz's fault, more of a graphics system limitation). Unless you have unusually intricate single objects, this is unlikely to be a problem for you. There is no upper limit to the total number of surfaces except performance and your patience.<br><br>I'm afraid I don't really know what I'm talking about when it comes to .x files though other than that they're not "fully" supported by B3D, whereas .b3d is (obviously, being the custom format). I'm not aware of .x being able to load as deformable meshes, but must check this.<br><br><br>... as for bone number, if this is a .x thing it won't be preserved. You've got child index (i.e. the array index of a child in its parent's vector of children - non-hierarchical identifier, likely not helpful, possibly not even predictable) and you've got name, used by FindChild. Perhaps you can programmatically rename bones to their number in your editing program? <br><br></td></tr></table><br>
<a name="1163320"></a>

<a name="1163329"></a>

<a name="1163330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> My scene mesh has 140K triangles.  I gave up on that for a while...<br><br>Actors:<br>So, I'm now not able to rotate any bones...<br>I loaded it as:<br>	For t=0 To 12<br>	   actor[t]=LoadAnimMesh( "d:\desktop\new folder\myter.x" )<br>	   EntityType actor[t],TYPE_CHARACTER,True<br>	   ScaleEntity actor[t],.15,.15,.15<br>	   MoveEntity actor[t],(t*5)-(6*5),0,-25<br>	Next<br><br>Good.  They're there.<br><br>	For t=0 To 12<br>		RotateEntity FindChild(Actor[t],"Jaw"),Rnd(0,-25),0,0<br>	Next<br><br>isn't doing anything.  Correctly placed in the main look - tested on the actor itself.<br>It also says entity not found on one of my placeholder bones.<br><br>(Bone number: I was only hoping to move ALL of the joints to see how much things slowed down when I did.)<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1163323"></a>

<a name="1163324"></a>

<a name="1163325"></a>

<a name="1163326"></a>

<a name="1163327"></a>

<a name="1163328"></a>

<a name="1163331"></a>

<a name="1163332"></a>

<a name="1163333"></a>

<a name="1163335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried the bliz exporter for max5, and I guess it isn't exporting the hierarchy correctly because I didn't use actual BONES on the mesh, but parent/child dummy objects - max allows this.<br>Bones are very inconvenient since you can't reposition them without affecting all of the child bones - - - and you can't change their length.<br>It's also inconvenient to use an actual SKINNED MESH in max5, and I just use vertex colors assigned to dummy points that are the same color when I export a skinned mesh to an .x file.<br>My hand-written (took a year) macroscript for Max5 creates the .x file that is perfectly valid in directx 7 or 8.<br>This was all working FINE in the demo.<br><br>And you know, this character has transparent polygons for the fur and whiskers that we haven't addressed yet.<br>Now I did buy the fastextensions and was able to address anisotropy/sharpness problem with fences and such.<br><br>BlitBasic3D Demo      1.83<br>BlitBasic3D Purchase 1.99<br>Blitz3d Exporter 0.7<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1163338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If all else fails, you can always roll-back the installed version of Blitz3D to match the version in the demo? You should have access to every released version as an update from the "Product Updates" page, for addressing exactly this situation.<br><br><br><div class="quote"> vertex colors assigned to dummy points that are the same color when I export a skinned mesh to an .x file. <br></div><br><br>I'm totally lost at this point: how does that help with skinning? Do we have different definitions of skinning? I was assuming you meant deformation...<br><br><br><div class="quote"> I was only hoping to move ALL of the joints to see how much things slowed down when I did <br></div><br><br>You don't need to move all of them for this test: the way the software animation works is such that the bones only have to be present and engaging the animation system (if you're not using the builtin animation system then that's one thing cut out already). You should only need to move the one around for test purposes (basically it rebuilds rather a lot of stuff it doesn't necessarily have to, for simplicity over massive scalability).<br><br><br><div class="quote"> isn't doing anything. Correctly placed in the main look - tested on the actor itself. <br></div><br><br>Case sensitivity? Exporter appending extra characters? Exporter doing something else to the names? <br><br></td></tr></table><br>
<a name="1163339"></a>

<a name="1163340"></a>

<a name="1163341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll try a roll-back.<br><br>My exporter:<br>When I write an x file with my exporter in max, all it has to do is look at the mesh's unused vertex colors and match them to the 'bone' colors to create the file (short cut).  To move a bone, all I have to do is drag the dummy point to a new location to recenter it where I want it.<br><br>Yeah, the hierarchy would have to update if I picked a bone at the start.<br><br>Not case sensitivity.<br><br>I found the b3d file spec, it's VERY SIMILAR in structure to an .x file.<br>I'll try rewriting my macro to output one.<br><a href="http://www.blitzbasic.com/sdkspecs/sdkspecs/b3dfile_specs.txt" target="_blank">http://www.blitzbasic.com/sdkspecs/sdkspecs/b3dfile_specs.txt</a><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1163345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aha! - no rollback yet -<br><br>The exporter had these checks required:<br>Scene Root<br>Meshes<br>Normals<br>Materials<br>	Textures<br>	Relative Paths<br>Bone Meshes<br>Export Bones<br>Preserve Key Frames (Probably not needed)<br><br>and NOTHING ELSE checked. <br><br></td></tr></table><br>
<a name="1163352"></a>

<a name="1163353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skeletal mesh problem seems solved with b3d exporter.<br>Problem is now only transparency.<br>There was a fur.tga file, tried also fur.dds.  No good.<br>Mesh has 5 materials assigned to it.<br>Only the one is transparent.<br>Should I be using a dds or tga spritesheet type of file??<br><br>Currently running latest update with no difficulty.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1163354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you exporting the texture flag to enable the alpha channel?<br><br>If so, perhaps you could try setting the EntityFX for the child mesh in question to force alpha blending? (Don't do this for anything that isn't totally convex.) <br><br></td></tr></table><br>
<a name="1163357"></a>

<a name="1163358"></a>

<a name="1163359"></a>

<a name="1163360"></a>

<a name="1163364"></a>

<a name="1163365"></a>

<a name="1164473"></a>

<a name="1164474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks to me like the relevant body parts aren't being exported at all.<br>I hexed the filename to a .bmp (a blank white bitmap)<br>and still no fur body parts showed up.<br><br>[Update] I had set opacity to 0 in max.<br><br>Now they show up as solid even with the tga map.<br>TextureBlend ttex, 1 ;Alpha<br>EntityTexture FindChild(actor[t],"z_FurHeadL"),ttex  ;Does't work - not a model<br><br>EntityFx:<br>1: full-bright<br>2: use vertex colors instead of brush color<br>4: flatshaded<br>8: disable fog <br>Nothing listed about alpha<br><br>[RESOLVED]<br>People using 3DS Max 5 should go here:<br><a href="http://www.onigirl.com/pipeline/" target="_blank">http://www.onigirl.com/pipeline/</a><br>and download the package - it makes including brushes and alpha data easy to do.<br><br>[UPDATE]<br>Noted the memory issues above probably caused by my graphics card.<br>See my other sequel post to this one 'Really large 3d scenes revisited"<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
