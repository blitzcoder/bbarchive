<!DOCTYPE html><html lang="en" ><head ><title >String pointer</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >String pointer</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >String pointer</a><br><br>
<a name="763290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fernhout</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to get the pointer to a string. <br><br>I want to pass a string to a DLL but it only accept a pointer to the string. <br><br></td></tr></table><br>
<a name="763321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, you can create a bank and poke the string into it. The string should end with a chr$(0) :<br><pre class=code>
bank = CreateBank(255)
s$ = "hello world" + chr$(0)
for i = 1 to len(s$)
PokeByte bank, i-1, asc(mid$(s$,i,1))
next
//---&gt;send bank to dll here
FreeBank bank
</pre> <br><br></td></tr></table><br>
<a name="763576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fernhout</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks i will try it.<br><br>Another question. If have a example program that use a '*' gehind the name. I can not find the explenation of it. I assume  thats a pointer.<br><br>E.g.<br><pre class=code>
Pointer* = CreatBank(150)
</pre> <br><br></td></tr></table><br>
<a name="763598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I only saw this "*" sign in .decls files. In that case, that is a pointer. When I tried in B3D, it returned an "end of line expected" error. <br><br></td></tr></table><br>
<a name="763936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fernhout</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your right. Thats where i saw it to. So the "*" is a pointer. That means that if i use a membank and the adres i get back is a pointer. <br>correct me if iam wrong. I try to understand it compleetly. Sorry for that many questions. <br><br></td></tr></table><br>
<a name="764034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the dll function is expecting a memory-adress (eg. to move data to it, or to read data from it) as a parameter, and you want it to work with a blitz bank, then you have to use the *. <br><br></td></tr></table><br>
<a name="764237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fernhout</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right but if i use the * at a variable i got the warning expeted end of file. So how come the * in use. <br><br></td></tr></table><br>
<a name="764242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The asterix is only allowed in a .decls file. In Blitz, you can use a bank. The bank variable is an integer pointer to the bank's memory.<br><br>bank = createbank(255)<br>;now the variable 'bank' holds an integer pointer to the 255 bytes of allocated memory<br>;to read/write the content of this memory, use Peek/PokeByte<br><br>Some DLL calls return string pointers (something like LPSTR?), for example to enumerate device names. To read them, first create a bank, then call the function with the bank as a parameter, then use Chr$(PeekByte()) to read the string from the bank into Blitz. I believe, in these situations, that the final character of the string is a Chr$(0) as well. <br><br></td></tr></table><br>
<a name="764485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fernhout</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks now i get thew hole idea behind the pointer part. See if i can use it to work for me. <br><br></td></tr></table><br>
<a name="764486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Buggy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondering, what use does this have?  I don't know a lot about memory manipulation... <br><br></td></tr></table><br>
<a name="764539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fernhout</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a I/O muodule and i want sending text to it. The communication DLL for this can handle only pointers. So i have to send pointer for the screen location and characters. I am busy with it and for now i get only tiny dot on the display. But that is more then i have 3 days ago.<br>The conversion in the program is not working right but that is matters of days befor i found it. <br><br></td></tr></table><br>
<a name="764619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The advantage of sending pointers, I think, is that you don't need to pass a large structure to the .dll, only a single integer that points to this structure.<br>You could maybe use a single bank. First, pokeint the two coordinates for the screen position, then pokebyte the string into the bank. Then, call the function with the parameters bank, bank + 4, and bank + 8. If you still have trouble getting the function to work, maybe you could post the dll/decls ? <br><br></td></tr></table><br>
<a name="764642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not only for your own DLLs, but also for the windows dlls.<br>Many Windows API commands ask for such an adress. They tell you a description of the data block structure they need to transmit data to it (in the API docs), and you have to make this bank ready. After the dll used to write to this bank you'll be able to peek certain information from it.<br>I used this not so long ago to make a windows movie dll transfer a certain frame of an AVI to a blitz bank (see code archives)<br><br>The handle of the bank (eg: bankhandle=createbank(256)) is somehow related to the REAL physical adress of the banks memory in the Ram. I used to post an example on how to use a bank as an image in the archives that explains this relation. Sometimes you need to obtain the physical adress of a bank, but it isn't a common situation. <br><br></td></tr></table><br>
<a name="764912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fernhout</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the informnation. But by giving the pointer to the DLL works here. I haven to give 4 pieces of information in mem bank as pointer in one file. Try it today and the information is working. The strobe was not good in the first place thats why i got onlhy a dot on the display. But now i have all the characters i want. Thanks for the help guy's <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
