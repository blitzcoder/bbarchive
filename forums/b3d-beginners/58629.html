<!DOCTYPE html><html lang="en" ><head ><title >Wierd texturing problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Wierd texturing problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Wierd texturing problem</a><br><br>
<a name="652168"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hockings</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't figure this one out for the life of me.<br><br>I draw a shape from 6 triangles (it ends up 3 boxes joined together). 2 of the boxes texture correctly, the first one doesn't. Can someone please run the following code and see if they can figure out the problem?  Use a 32x32 image of anything to see the problem. It's a problem with the u and v values for the texture, but I can't work out why the other boxes texture correctly and the first one doesn't.<br>Thanks for your help!!!<br>Shane<br>----------------------------------------------------------------<br><br>Global ScreenWidth  = 800<br>Global ScreenHeight = 600<br>Global ScreenDepth  = 16<br>Global ScreenMode   = 2<br><br>Graphics3D ScreenWidth,ScreenHeight,ScreenDepth,ScreenMode <br>SetBuffer BackBuffer()     ; Switch to Back Buffer for Double Buffered drawing.<br><br>; Setup the lighting...<br>AmbientLight 200,200,200<br><br>; Setup the texture<br>ShapeBrush=LoadBrush("c:\my_texture.png")<br>If ShapeBrush = 0 <br>	RuntimeError ("cannot open my_texture.png")<br>EndIf<br><br><br>; Setup the camera.<br>Global MainCamera = CreateCamera()<br>CameraViewport MainCamera,0,0,ScreenWidth,ScreenHeight<br>WireframeState=0<br><br>MoveEntity (MainCamera,10,5,-8)<br>TurnEntity (MainCamera,0,45,0)<br><br>;######################################################################<br><br>; Draw Shape<br> 	ShapeMesh = CreateMesh() <br>	ShapeSurface = CreateSurface(ShapeMesh)	 <br>	<br>	Restore ShapeData<br>	For VertexLoop=1 To 18<br>		Read TempX<br>		Read TempY<br>		Read TempZ<br>		v4=AddVertex(ShapeSurface,TempX,TempY,TempZ)<br>		VertexTexCoords ShapeSurface, v4,TempX,TempY<br>	Next<br>		<br>	For v0 = 0 To 15 Step 3<br>		v1 = v0 + 1 <br>		v2 = v1 + 1 <br>		AddTriangle(ShapeSurface,v0,v1,v2) <br>		AddTriangle(ShapeSurface,v2,v1,v0) <br>	Next<br><br>	PaintMesh (ShapeMesh,ShapeBrush)<br>	<br>;######################################################################<br>Repeat ; Main Game Loop<br>	UpdateWorld<br>	RenderWorld<br>	ModifyCamera()<br>    <br>;<br>	Flip<br>Until KeyDown(1) Or Terminate<br>End<br><br>;######################################################################<br><br>Function ModifyCamera()<br>	If KeyDown(200) Then<br>          MoveEntity MainCamera,0,0,1<br>      EndIf<br><br>      If KeyDown(208) Then<br>          MoveEntity MainCamera,0,0,-1<br>      EndIf<br><br>      If KeyDown(203) Then<br>          TurnEntity MainCamera,0,1.0,0<br>      EndIf<br><br>      If KeyDown(205) Then<br>          TurnEntity MainCamera,0,-1.0,0<br>      EndIf<br><br><br>	If KeyDown(30) Then<br>		TurnEntity MainCamera,1.0,0,0<br>	EndIf<br><br>    If KeyDown(44) Then<br>            TurnEntity MainCamera,-1.0,0,0<br>      EndIf<br>		If KeyDown(44) Then<br>            TurnEntity MainCamera,-1.0,0,0<br>      EndIf<br><br>End Function<br><br>;######################################################################<br><br>.ShapeData ; x,y,z triplets for triangles<br>Data 7,1,5,7,0,5,6,0,5<br>Data 6,1,5,7,1,5,6,0,5<br>Data 5,1,6,6,1,5,6,0,5<br>Data 5,1,6,6,0,5,5,0,6<br>Data 5,1,7,5,1,6,5,0,6<br>Data 5,0,7,5,1,7,5,0,6 <br><br></td></tr></table><br>
<a name="652185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> A quick look at the code suggests these lines are the problem:<br><br>v4=AddVertex(ShapeSurface,TempX,TempY,TempZ)<br>VertexTexCoords ShapeSurface, v4,TempX,TempY<br><br>You are using the same values (TempX, TempY) for vertex positions and for texture coordinates.<br><br>Position values can be anything. But texture U,V values should generally be in the range of 0 to 1.<br><br>A (U,V) of (0,0) is the upper left corner of the texture and (1,1) is the lower right. Thus ( 0.1, 0.9 ) would be a little to the right and above the lower left corner.<br><br>Unless you specify otherwise the U,V values wrap 'modulo 1'. For example, U values of 0.3, 1.3, 2.3 etc. all denote the same location. <br><br></td></tr></table><br>
<a name="652220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hockings</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Floyd,<br>Thanks for the reply. As you noted, the values are modulo 1 which is what I want. The code draws 3 squares - I want all 3 to have the same texture. It works for 2 of them, but one it doesn't work for - all should work as far as I can tell though due to the modulo thing. <br><br></td></tr></table><br>
<a name="652280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit: Second attempted explanation deleted. It made no sense, although I had the right basic idea.<br><br>Okay, this time for sure! Look at the last two Data statements:<br><br>Data 5,1,7,5,1,6,5,0,6<br>Data 5,0,7,5,1,7,5,0,6 <br><br>All X values are the same. This makes all U values the same. Both triangles are textured with a single vertical stripe from the image. <br><br></td></tr></table><br>
<a name="652467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hockings</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahhh! Of course! Thanks Floyd! That had me beat!<br>I had bram32 at coders workshop suggest the following solution for anyone interested.<br><a href="http://www.codersworkshop.com/viewpost.php?id=63984#63984" target="_blank">http://www.codersworkshop.com/viewpost.php?id=63984#63984</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
