<!DOCTYPE html><html lang="en" ><head ><title >ExecFile problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ExecFile problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >ExecFile problem</a><br><br>
<a name="820996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ervin</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all.<br><br>I'm stuck on a little problem with ExecFile.<br>My program needs to run a .bat file which runs some ImageMagick scripts.<br><br>Unfortunately a DOS window pops up briefly while the .bat file runs.<br>Is there any way to avoid this window popping up?<br><br>Thanks for any help. <br><br></td></tr></table><br>
<a name="821043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you call the ImageMagick scripts directly, instead of the .bat? <br><br></td></tr></table><br>
<a name="821088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ervin</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suppose I could try that.<br><br>The difficulty then will be knowing when an ImageMagick operation has finished before something else happens.<br>In a batch file, the commands would happen one at a time, but running them from Blitz may not be the case... <br><br></td></tr></table><br>
<a name="821094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could also create a shortcut to the batch file and set it to run minimised from there. The shortcut address system looks pretty dumb (you can't just erase the target location and have it look in its own directory) so it might be a headache if this is an application you intend for others to install and use, but if it's a personal project then it's a quick fix. <br><br></td></tr></table><br>
<a name="821110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ervin</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, that's an interesting idea.<br>Unfortunately, my program is something for other people to use.<br><br>Anyway, I just had an idea which may work.<br><br>I'm actually using ImageMagick to stream in bits of images which would otherwise be WAY too large to load using blitz's LoadImage, or even FreeImage's facilities.<br><br>I know in advance how big each piece will be, so I can just calculate the number of bytes that the filesize will take up, and then my b3d program can check (as part of the main loop) if the file has reached the expected size. When it has, it means I can make use of the file.<br><br>Does this sound feasible? <br><br></td></tr></table><br>
<a name="821112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The main thing that may trip you up there is that you're probably using compressed image formats -- how much space they take up on disc won't equate to how much memory they consume. Mind you, as long as you know the dimensions of each portion of the image that you're streaming you should be fine, because the size of the bank/array required can be derived from that. You're probably ahead of me there.<br><br>Can I ask what you mean by an image being way too large for LoadImage to handle? It's received wisdom that you shouldn't try to draw images that are larger than the screen resolution but there's nothing to stop you CopyRect'ing a screen-sized portion of a much larger graphic AFAIK. <br><br></td></tr></table><br>
<a name="821121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ervin</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> LoadImage causes a MAV when trying to load very large images (I haven't done tests to figure out exactly how many MB is too many on my PC).<br>It's obviously because it wants to load the entire image into RAM (and of course store it as an uncompressed bitmap).<br>FreeImage, while being able to load slightly larger files for some reason, does hit the same brick wall.<br><br>I'm actually building a mesh at runtime, and then painting surfaces with 256x256 textures.<br>I'm only displaying a small number at any one time, so that won't present any RAM problems.<br>I am indeed using banks to bring the data in from the files produced from the image pieces.<br><br>My requirement to use ImageMagick stems from wanting to grab arbitrary 256x256 pieces of an image, regardless of that image's size.<br>ImageMagick has a stream command that lets you do this.<br><br>Incidentally, I've just had a go at running ImageMagick directly using ExecFile() with the following command:<br><pre class=code>ExecFile("stream -extract 256x256+0+0 -map rgb -quiet "+Chr$(34)+"test.png"+Chr$(34)+" "+Chr$(34)+"test.tmp"+Chr$(34))</pre>But I still get the dos box appearing for a second...<br>:o(<br><br>The whole image-streaming technique I'm using seems to be working nicely - it's just the dos box thing that's driving me nuts. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
