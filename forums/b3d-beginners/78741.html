<!DOCTYPE html><html lang="en" ><head ><title >Confused as to how Fitmesh works</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Confused as to how Fitmesh works</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Confused as to how Fitmesh works</a><br><br>
<a name="883807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kendo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am creating a 3DModel scene editor and i want to scan through a list of models , each one of which will be displayed at screen centre.  I have no problem with that, i just need to parent displayed "temporary" model display to camera.<br>   However i want the models to be displayed all the same size.  No problem i thought, i'll use fitmesh, thus:<br><br><pre class=code>tmpry.tempmodel = new tempmodel
tmpry\obj=copyentity(3Dmodel(g))  ;  load my chosen model
entityparent tmpry\obj, cam, 0
fitmesh tmpry\obj,0,0,0,6,6,6,1

positionentity tmpry\obj,-3, -4,10
</pre><br><br>This works for displaying any model in my "expected area".<br><br>But then my problems start when i select the model (having first unparented it - entityparent tmpry\obj,0  )and try to place it on a terrain using pickedX#, pickedY#, pickedZ.  Whereas, before trying to use fitmesh in my program, the model would drop nicely right onto the picked coordinates, now using fitmesh the model floats above the ground, and is displaced a distance on the X and Y axis ( roughly i need to adjust picked coords by -1.85) to get approx right.<br><br>This discrepancy would be even greater if i hadnt made fitmesh x,y,z coords 0,0,0.<br><br>Can anyone put me straight please?<br><br>Also, i want to scale the selected 3d Model up or down, but i dont understand whether or not fitmesh has scaled the model in real terms or just temporarily.  If it has rescaled in real terms, does that mean that scaleentity 3dmodel, 1,1, 1 is now the "base" size of the model?<br><br>As always your assistance would be greatly appreciated <br><br></td></tr></table><br>
<a name="883828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> All mesh commands affect the model's data itself, as Entity do not. So ScaleEntity mesh,1,1,1 will still be the base size.<br>A good example is RotateMesh. If you use it too often, the model might get deformed because of rounding errors.<br>Entity properties only affect the model's matrix. That means the actual mesh data is not altered, only the way it is being rendered and dealt with in terms of collisions and picking.<br><br>FitMesh describes a box, so to center it around zero, you need:<br>FitMesh mesh, -1, -1, -1, 2, 2, 2<br>Where (-1,-1,-1) is one corner of the box and (2,2,2) is the width/height/depth.<br><br>To be able to place it on the ground, you'll need:<br>FitMesh mesh,-1,0,-1,2,2,2 <br><br></td></tr></table><br>
<a name="883844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kendo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks Warner for your help.<br><br>Changing my fitmesh command to read -3,0,-3,6,6,6 now enables me to place the model on the terrain at the correct picked coords on the X and Z axis.  Most models seat correctly on the ground on the Y axis but not all - presumably this is to do with a specific model's unique centre of origin?<br><br>Thankyou for explaining the difference between "mesh" and "entity" commands.  I think i grasped the principle!<br><br>The problem i now have  is:  <br>obviously using the fitmesh command on my "menu display" model has rescaled the mesh.  How do I best determine what that rescaling factor is so that i can then apply it in the same ratio to my "copy" model I am going to place on the terrain using the scaleentity command? <br><br></td></tr></table><br>
<a name="884026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can get the size of the mesh with MeshWidth/MeshHeight/MeshDepth.<br><br>If you want the model to fit in a box of size 6x6x6 and your mesh would be 18x18x18, then your scaling factor would be 0,333333, as you need to scale it down with a factor 3 to make it fit within that box of 6x6x6. <br><br></td></tr></table><br>
<a name="884335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kendo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks PowerPC603.  All is sorted now! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
