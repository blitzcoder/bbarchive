<!DOCTYPE html><html lang="en" ><head ><title >Ideal target framerate?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Ideal target framerate?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Ideal target framerate?</a><br><br>
<a name="452814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leto</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi folks,<br><br>I'm working on my first game in Blitz3D -- it's 800x600x32 (window), 2D, tile-based, no scrolling.  My question is regarding framerate/screen updates because I'm a little concerned (possibly unnecessarily) about the CPU load on my engine so far.<br><br>Every frame draws the entire screen from a pre-drawn graphics buffer, does a little sorting and timer updating and draws players, updated tile animations, etc.<br><br>My system is P4 2.4GHz &amp; Geforce 4 Ti4200.  At 60 fps, the CPU load for the game process is 89-97% (this is basically just an idle game test too, nothing much going on).  If I drop to 50 fps, it's about 40-70% CPU load.  I also tested 40 fps but this felt a little bit jerky...<br><br>So... if my CPU has so much load, how are slower processors going to handle it?  Or is it not even something to worry about?<br><br>--Leto <br><br></td></tr></table><br>
<a name="452827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try some of these links for more info. Since your game is 2D the delta timing tutorial will probably be what you're looking for.<br><br><a href="http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=gamemorduun03212002.html" target="_blank">http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=gamemorduun03212002.html</a><br><br><a href="http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=johnblackledge09202003161847.html" target="_blank">http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=johnblackledge09202003161847.html</a><br><br><a href="http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=jl2k11032002164857.html" target="_blank">http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=jl2k11032002164857.html</a> <br><br></td></tr></table><br>
<a name="452838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leto</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for those, Axeman.<br>Guess I'm just worried about the performance on slower processors :) <br><br></td></tr></table><br>
<a name="452840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't draw the entire screen if you don't have to.<br><br>For instance, Windows uses a technique called 'dirty rectangles'.  Only the 'dirty rectangle' parts of the screen need updating so only those rectangles ARE updated. <br><br></td></tr></table><br>
<a name="452979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> 2D tile map, what to do is to draw all the tiles that are onscreen, plus a border of tiles which lie offscreen, and draw these all onto an imagebuffer, larger than the screen. Then, when u scroll, only draw in the tiles that are needed. <br><br></td></tr></table><br>
<a name="453092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> At 70fps it will use about 98% cpu load. At 80 fps, it will use about 98% cpu load. At 100 fps, it will use about 98% cpu load. Notice a pattern emerging? Basically, anything below 70, and you're introducing delays which cause slowdown on the cpu and therefore more CPU time. Simply because you're using 98% CPU time doesn't mean thats the fastest your program can go - Blitz simply chews up all idle CPU time. If you turn off frame limiting and vsync, you'll probably get about 200fps, still with 98% CPU load.<br><br>Most 2D games will work pretty well on slower processes as long as you're not using TFORMIMAGE or resizing/scaling any images. The fact your cpu usage is high doesn't reflect how much power is required to run the game. A simple "REPEAT:RENDERWORLD:FLIP:FOREVER" will use 99% CPU time, even on a P4 3.4 Extreme. The only way to really find out if your game runs okay on slower processors is testing. Submit a demo to the forums, let a few people try it out, and ask what kind of CPUs they have and how it performed.<br><br>As far as what Wolron was saying about 'dirty rectangles' - only needing to draw the parts of the screen that are updated - the fastest way to achieve this is via buffer copying. After the flip, copy the FRONTBUFFER to the BACKBUFFER. Then, just draw the changes on the backbuffer that have been updated. No other drawing required. FLIP it, and these changes are reflected while the rest stays the same. <br><br>+BlackD <br><br></td></tr></table><br>
<a name="453108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> In addendum to my previous post - the reason you're getting lighter CPU load at lower framerates is because you're using framelimiting - ie, simple delaying. Delaying is a waste of CPU time. In the time you delay the frame, Blitz could have already rendered the entire next scene (even if its only 0.05 seconds). Sure - in early programming we all start out controlling framerate by delaying - but when you feel suitably advanced enough, you need to switch to deltatiming. <br><br>Do a forum search for Delta Time to get a feel for it. Basically, rather than limiting the framerate to control CPU load, you let the program run as fast as it possibly can. Then, each frame, you see how much time has elapsed since the last frame, and update entity movements (or 2d graphics movement, whatever) relative to how far they should move at a given rate. If you want a character to move 50 pixels a second, and a hundredth of a second elapses between frames, then that frame, just move the character half a pixel (it'll sort itself out fluidly while playing). This way you're using the CPU as optimally as possible, and it'll run at the same speed on slow and fast CPUs. If someones computer can only run at half the speed required to move a character 50 pixels a second, then each frame it'll move the character 2 pixels. Get the idea? :) It takes a bit of getting used to and a couple of extra functions to write, but its the most efficient way to time a game.<br><br>You can use this timing system not only for player movement, but also for everything else - animations, hud updates, etc. Most modern games use delta timing as opposed to frame limiting. You can see it in use by loading up a 3D game that your CPU can't handle (For your computer, try PainKiller or Doom3 at high res). When you move around, the character doesn't move slower as a result - it "jumps" about, giving the "jerky" effect that occurs when a computer isn't powerful enough to run a game at a minimum speed. Thats because each frame, no matter how long it took between frames, or no matter how short, it updates the player movement/enemy movement/animations/etc at the same constant rate.<br><br>+BlackD <br><br></td></tr></table><br>
<a name="453159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leto</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for the replies :) <br><br></td></tr></table><br>
<a name="453308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem, glad to help. :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
