<!DOCTYPE html><html lang="en" ><head ><title >Rotating mesh problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Rotating mesh problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Rotating mesh problem</a><br><br>
<a name="1019078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dicon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a mesh that is loaded in and then I need to rotate it.<br>Sounds simple?<br>Well the rotation point on some meshes generated with Blender is way off the centre of the mesh, so that when I try to rotate it, it zooms of into the distance. I am using the routine supplied by<br>PowerPC603 ( Thanks, it works very well ) <br>...............................................................................................<br>Function load_mesh() <br><br>	; Create a new TObj instance<br>	temp.TObj = New TObj<br>	; Create a new cube entity and store the handle in the type instance<br>	temp\Entity =LoadMesh(item$)<br>	; Position the cube at some random coordinates<br>	PositionEntity temp\Entity, 0,0,60<br>	; Scale the cubes<br>	ScaleEntity temp\Entity, 25.0, 25.0, 25.0<br>	; Make the cube polygon-pickable<br>	EntityPickMode temp\Entity, 2<br>	; Set the entityname<br>	NameEntity temp\Entity, item$<br>	;ScaleEntity temp\entity,mesh_scale_x#,  mesh_scale_y#, mesh_scale_z#<br>	TranslateEntity temp\entity,0,0,200<br>	; Finally add a number to the instance<br>	temp\Value = cntr * 1000<br>	cntr=cntr+1<br>	mode=1 <br>             End If<br>but I cannot see where to put the pivot, or is there another way of "centering" the rotation point in the mesh?<br>I did try creating a pivot "pivot" then"temp\Entity =LoadMesh(item$,pivot)", but it doesn't work.<br>Thanks......<br> <br>Dicon <br><br></td></tr></table><br>
<a name="1019079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rather than apply a hack, its much better to export it correctly in the first place.<br><br>I hate blender and don't know how it works, but you get can get a similar effect in some formats when exporting from almost any 3D app including Lightwave, 3DS Max, even Milkshape.<br><br>The way I found to correct it was to move the model to global world coordinates 0,0,0 (with the pivot point of the mesh being in that position), then export it.<br><br>The axis should then be exactly where you put it. <br><br></td></tr></table><br>
<a name="1019084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ardee</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> In Blender,<br><br>Place the cursor at world center and with the object selected, in the Editing Panel (F9), click the Center Cursor Button. <br><br>Alternatively in the object menu select Clear--&gt;Location. which should re-center the object prior to export. Good practice to apply scale and rotations too.<br><br>Standard practice whatever application you use. <br><br></td></tr></table><br>
<a name="1019101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This problem frequency rears it's head, when exporting multiple meshes with a modelling application. What seems to happen upon saving to blitz3d format anyway, is all the meshes lose there centre, and take on the centrepoint of the modelling applications global 0,0,0.<br><br>To solve this, you need to find the centrepoint of the mesh, by looping through all the vertices in it. Then, store this centre. Fit your mesh around it's 0,0,0 axis. Then, use PositionEntity to move it back to it's original location. This way, you shift the axis, without moving the mesh. <br><br></td></tr></table><br>
<a name="1019119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dicon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks all will try this ( just read the posts...<br> Dicon <br><br></td></tr></table><br>
<a name="1019327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dicon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross C,<br> I did find the vertex position, and would be quite happy to have the rotation around any of them but do not see how to "fit your mesh around it's 0,0,0 axis". I used entitynz() etc, but the moving of the centre eludes me. The example given doesn't even mention entitynz().<br><br>Dicon <br><br></td></tr></table><br>
<a name="1019330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dicon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> And yes, I did try centering in Blender, making sure the centre was erm.. in the centre. Ultimate unwrap pro seems to throw out the centering. I will dig around in the tutorials to see if Unwrap can centre the mesh.<br> Thanks<br> Dicon <br><br></td></tr></table><br>
<a name="1019332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> To centre your mesh around the 0,0,0 you would do:<br><br><pre class=code>
FitMesh entity,-meshwidth(entity)/2,-meshheight(entity)/2,-meshdepth(entity)/2,meshwidth(entity),meshheight(entity),meshdepth(entity)
</pre> <br><br></td></tr></table><br>
<a name="1019430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dicon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dear Ross C, <br>WOOT!!<br>Great it works. Now that gem has been added to my program, I can get on and progress with it instead of banging my head against the wall. I would never have been able to come up with that solution myself.<br>Thanks to you &amp; all here.<br> Dicon <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
