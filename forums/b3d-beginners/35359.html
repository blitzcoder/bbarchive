<!DOCTYPE html><html lang="en" ><head ><title >bullet help</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >bullet help</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >bullet help</a><br><br>
<a name="384586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RyanD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm new to blitz, I'm current;y working on my 3rd blitz game and I am trying to make it one of my finest. My problem is when I hit the spacebar the bullet appears for about half a second I think it has somethinf to do with this line<br><br>If KeyHit(57) And hpistol = 1 And pistol\ammo &gt; 0<br>b.bullet = New bullet<br><br> b\x = pistol\x<br> <br> b\y = pistol\y<br><br>pistol\ammo = pistol\ammo - 1<br>b\x = b\x + 1<br> DrawImage(ibullet,b\x,b\y)<br><br>If pistol\ammo &lt;= 0<br>	pistol\ammo = 0 <br>EndIf<br>EndIf<br><br>Can some one help me? <br><br></td></tr></table><br>
<a name="384588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rook Zimbabwe</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Read this tutorial:<br><br><a href="http://www.blitzbasic.co.nz/Community/posts.php?topic=35127" target="_blank">http://www.blitzbasic.co.nz/Community/posts.php?topic=35127</a><br><br>I commented and got a lot of help but I think it can help you.<br><br>-Rook <br><br></td></tr></table><br>
<a name="384641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know your error,'cause i made it sometimes :P<br>If you put the "drawimage"command in the same "if keyhit" ecc ecc you are drawing the image if the button is pressed,so when the button isn't pressed the image is not drawn! <br><br></td></tr></table><br>
<a name="384642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try modify in this manner your function:<br><pre class=code>
If KeyHit(57) And hpistol = 1 And pistol\ammo &gt; 0
b.bullet = New bullet

b\x = pistol\x

b\y = pistol\y

pistol\ammo = pistol\ammo - 1
b\x = b\x + 1
;DrawImage(ibullet,b\x,b\y)commented!!must be uotside the loop!!

If pistol\ammo &lt;= 0
pistol\ammo = 0
EndIf
EndIf 
DrawImage(ibullet,b\x,b\y)   ;must be outside and it works!
</pre> <br><br></td></tr></table><br>
<a name="384672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Valgar, I think that is only slightly better, this should do what you want:<pre class=code>If KeyHit(57) And hpistol = 1 And pistol\ammo &gt; 0
b.bullet = New bullet

b\x = pistol\x

b\y = pistol\y

pistol\ammo = pistol\ammo - 1

If pistol\ammo &lt;= 0
pistol\ammo = 0
EndIf
EndIf
For b.bullet = Each bullet
  b\x = b\x + 1
  DrawImage(ibullet,b\x,b\y)
Next</pre> <br><br></td></tr></table><br>
<a name="384676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes,i've made only this light modification for helping him only to know what caused the error.<br>He must add the "for--next"loop to cicle trough the bullet type(my mistake sorry)before using outside the function any of the bullet fields... <br><br></td></tr></table><br>
<a name="384869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RyanD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you soooo much Now I am going to make some grenades for this :P <br><br></td></tr></table><br>
<a name="385027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RyanD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> alright I need some more help, when I try to switch my guns everything works out fine but when I try to shoot them seperate, nothing comes out of the shotgun but both bullets come out of the pistol<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
AppTitle "Attack of the Evil Smileys"
Graphics 800,600,0,2
SetBuffer BackBuffer()

;load images

character = LoadImage("Images\killer.png")
MaskImage character,255,0,255

smiley = LoadAnimImage("Images\smiley.png",38,36,0,2)
MaskImage smiley,255,0,255

healthpack = LoadImage("Images\healthbar.png")

ishotgun = LoadImage("Images\ishotgun.png")
MaskImage ishotgun,255,255,255

ipistol = LoadImage("Images\ipistol.png")
MaskImage ipistol,255,255,255

ibullet = LoadImage("Images\ibullet.png")
MaskImage ibullet,255,255,255

isbullet = LoadImage("Images\isbullet.bmp")
MaskImage isbullet,255,255,255

Type player
	Field x,y
	Field health
	Field image
	Field lives
	Field score
End Type

Type enemy
	Field x,y
	Field health
	Field image
	Field frame
End Type

Type health_pack
	Field x,y
End Type

Type shotgun
	Field x,y
	Field ammo
End Type

Type pistol
	Field x,y
	Field ammo
End Type

Type bullet
	Field x,y
End Type

player.player = New player
enemy.enemy = New enemy
health_pack.health_pack = New health_pack
shotgun.shotgun = New shotgun
pistol.pistol = New pistol


player\x = 400
player\y = 500
player\health = 100
player\lives = 3
player\score = 0

enemy\x = 100
enemy\y = 500
enemy\health = 100

health_pack\x = 500
health_pack\y = 500

shotgun\ammo = 25
pistol\ammo = 30


; if player is facing left or right
direction = 1
;Holding Gun?
hshotgun = 0
hpistol = 0
hm4a1 = 0
eshotgun = 0
epistol = 0
em4a1 = 0



While Not KeyHit(1)


	
;move player
If KeyDown(203)
player\x = player\x - 2
direction = 0
EndIf
If KeyDown(205)
player\x = player\x + 2
direction = 1
EndIf





;update colliding thanks to shane from blitzcoder
For h.health_pack = Each health_pack
  If ImagesCollide(character,player\x,player\y,0,healthpack,h\x,h\y,0) Then
    player\health = player\health + 20
    Delete h

    If player\health &gt;= 150
      player\health = 150
    EndIf
  EndIf
Next




;update characters

	If ImagesCollide(character,player\x,player\y,0,smiley,enemy\x,enemy\y,0) And enemy\frame &lt;&gt;1
	player\health = player\health - 10
	enemy\frame = enemy\frame + 1
EndIf







;update ghetto hud

Locate 0,20 Print "lives: " + player\lives
Locate 0,40 Print "Score: " + player\score
Locate 0,0 Print "health: " + player\health





;draw the characters
DrawImage(character,player\x,player\y)

For h.health_pack = Each health_pack
DrawImage(healthpack,h\x,h\y)
Next

DrawImage(smiley,enemy\x,enemy\y,enemy\frame)

If KeyHit(2)
hshotgun = 1
hpistol = 0
EndIf

If KeyHit(3)
hpistol = 1
hshotgun = 0
EndIf

If hshotgun = 1
shotgun\x = player\x + 5
shotgun\y = player\y + 25
DrawImage(ishotgun,shotgun\x,shotgun\y)
Locate 500,10 Print "Ammo: " + shotgun\ammo
EndIf

If hpistol = 1 
pistol\x = player\x + 35
pistol\y = player\y + 6
DrawImage(ipistol,pistol\x,pistol\y)
Locate 500,10 Print "Ammo: " + pistol\ammo
EndIf




If KeyHit(57) And hpistol = 1 And pistol\ammo &gt; 0 
b.bullet = New bullet

b\x = pistol\x

b\y = pistol\y

pistol\ammo = pistol\ammo - 1

If pistol\ammo &lt;= 0
pistol\ammo = 0
EndIf
EndIf
For b.bullet = Each bullet
  b\x = b\x + 6
  DrawImage(ibullet,b\x,b\y)
Next

If KeyHit(57) And hshotgun = 1 And shotgun\ammo &gt; 0
s.bullet = New bullet

s\x = shotgun\x
s\y = shotgun\y

shotgun\ammo = shotgun\ammo - 1


If shotgun\ammo &lt;= 0
shotgun\ammo = 0
EndIf
EndIf
For s.bullet = Each bullet
  s\x = s\x + 8
  DrawImage(isbullet,s\x,s\y)
Next


Flip
Cls
Wend
End
</textarea> <br><br></td></tr></table><br>
<a name="385068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dude, when you loop trough all bullets, you loop trough ALL bullets. If you write s.bullet = New bullet or b.bullet = New bullet doesn't matter, they are all the same. Either you can create two different types, or you can add a few extra attributes to your type, for now you will need a speed field and an image handle field, later on you will probably need a field for the damage that the bullet will do. I don't know why your shotgun doesn't fire. <br><br></td></tr></table><br>
<a name="385132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have resolved this to make a different type for every direction as eBusiness say.<br>So you must threat the types in different manner accordingly to the direction. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
