<!DOCTYPE html><html lang="en" ><head ><title >Simple Camera?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Simple Camera?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Simple Camera?</a><br><br>
<a name="436657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >po</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone know a simple way to get the camera to follow your character in 3D? I took a look at the castle demo but I didn't like that camera to much. I just need a camera to follow the character just above it's head and to turn when it turns and jumps, etc. A 3rd person view I guess.<br>I'm using B3D. <br><br></td></tr></table><br>
<a name="436675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is what I did.<br>Put this near the top:<br><pre class=code>
player=CreateCylinder()
camera=CreateCamera(player)
PositionEntity camera, EntityX(player), EntityY(player)-3, EntityZ(player)-5
</pre><br>And this in your main loop:<br><pre class=code>
PositionEntity camera, EntityX(player), EntityY(player)-3, EntityZ(player)-5
</pre><br><br>It's not the best way, though. <br><br></td></tr></table><br>
<a name="436719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are many ways...parent the camera to the player and such...part of it will depend on how you want the player to control the character.<br><br>for example...Do you want direct control where pressing the up arrow (or up on the gamepad/joystick) always makes the character move foreward as in resident Evil games?...or do you want relitive control where pressing up makes the character move toword the top of the screen no matter what direction the camera is faceing?<br><br>If its the first way you may want something along the lines of parenting the camera to the character inorder to give a better sense of direct control...else you may want to use a system where the camera is within a certain distance from the character, but free to look at the character without rotateing with them...<br><br>basicly American McGees Alice is direct control...while Prince of Pershia:Sands of Time is relative control...direct is easyer, relative can be (but isn't exclusively) more robust in the things that can be done...so which is it? <br><br></td></tr></table><br>
<a name="436792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Digital Fortress:<br>In the code you display, since you parented the camera to the player, there is no need to 'position' the camera in your loop like you show.<br>The camera will automatically follow since it's parented. <br><br></td></tr></table><br>
<a name="436798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK - thanks - I'm still new to parenting :) <br><br></td></tr></table><br>
<a name="436803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Agamer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> how old is he/she and you seem a bit young to be a parent, sorry I could not resist.<br><br>And yes I agree with wolron you don't need to position so he's wright! <br><br></td></tr></table><br>
<a name="436978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >po</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> MSW: I guess what I want is direct control, I will try Digitals way. <br><br></td></tr></table><br>
<a name="436991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey po. I find this way good for a camera. Adds a nice smooth effect to the camera. Basically what you do is have a pivot parented to the player. Place the pivot at the height/distance away from the player, you want the camera to be. Then, move the camera towards the pivot, based on the distance between the two, whilst always pointing the camera to face the player. Like so :<br><br><pre class=code>
Graphics3D 800,600
SetBuffer BackBuffer()

Global player = CreateCube()

Global cam_piv = CreatePivot(player) ; parent the pivot to the player
PositionEntity cam_piv,0,2,-8

Global camera = CreateCamera()

Dim cubes(20) ; create some surroundings
For loop = 0 To 20
   cubes(loop) = CreateCube()
   EntityColor cubes(loop),Rand(0,255),Rand(0,255),Rand(0,255)
   PositionEntity cubes(loop),Rnd(-29,29),0,Rnd(-29,29)
Next

While Not KeyHit(1)


   If KeyDown(200) Then MoveEntity player,0,0,0.1
   If KeyDown(208) Then MoveEntity player,0,0,-0.1
   If KeyDown(203) Then TurnEntity player,0,1,0
   If KeyDown(205) Then TurnEntity player,0,-1,0

   UpdateWorld
   updatecam()
   RenderWorld
   Flip
Wend
End

Function updatecam()

   PointEntity camera,cam_piv
   MoveEntity camera,0,0,EntityDistance#(camera,cam_piv)/50
   PointEntity camera,player

End Function
</pre> <br><br></td></tr></table><br>
<a name="437068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >po</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woah, thanks Ross.<br>It's amazing such a smooth camera can be made with such little code. <br><br></td></tr></table><br>
<a name="437069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeppe Nielsen</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this, you can also specify where the camera should point at, relative to the entity:<br><pre class=code>
Graphics3D 800,600
SetBuffer BackBuffer()

player = CreateCube()

camera = CreateCamera()

Dim cubes(20) ; create some surroundings
For loop = 0 To 20
   cubes(loop) = CreateCube()
   EntityColor cubes(loop),Rand(0,255),Rand(0,255),Rand(0,255)
   PositionEntity cubes(loop),Rnd(-29,29),0,Rnd(-29,29)
Next

While Not KeyHit(1)

   If KeyDown(200) Then MoveEntity player,0,0,0.1
   If KeyDown(208) Then MoveEntity player,0,0,-0.1
   If KeyDown(203) Then TurnEntity player,0,1,0
   If KeyDown(205) Then TurnEntity player,0,-1,0

;   CameraUpdate(camera,player,0,5,-5,0,-4,0)
   CameraUpdate(camera,player,0,5,-5,0,2,0)
 
   RenderWorld
   Flip
Wend
End

Function CameraUpdate(camera,ent,camx#,camy#,camz#,aimx#=0,aimy#=0,aimz#=0,smoothcam#=0.1,roll#=0)
	
	TFormPoint camx#,camy#,camz#,ent,0
	
	dx#=(TFormedX()-EntityX(camera))*smoothcam#
	dy#=(TFormedY()-EntityY(camera))*smoothcam#
	dz#=(TFormedZ()-EntityZ(camera))*smoothcam#
	
	TranslateEntity camera,dx,dy,dz
	
	TFormPoint aimx#,aimy#,aimz#,ent,0
	
	dx# = EntityX(camera)-TFormedX()
	dy# = EntityY(camera)-TFormedY()
	dz# = EntityZ(camera)-TFormedZ()
	dist#=Sqr#((dx#*dx#)+(dz#*dz#))
	pitch#=ATan2(dy#,dist#)
	yaw#=ATan2(dx#,-dz#)
	
	RotateEntity camera,pitch#,yaw#,roll#
	
End Function
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
