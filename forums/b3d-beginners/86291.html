<!DOCTYPE html><html lang="en" ><head ><title >Illegal type conversion error...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Illegal type conversion error...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Illegal type conversion error...</a><br><br>
<a name="977998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Elendia Starman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get this error when I'm trying to return an int from a function that uses a type, like so:<br><br><pre class=code>c = FindClosest.point(pointID)

Function FindClosest.point(id)

	For p.point = Each point
	
		If p\id = id
		
			min = 1000000
			close = 0
		
			For p2.point = Each point
			
				If p2\taken = 0
			
					If p&lt;&gt;p2
					
						dx = p\x-p2\x
						dy = p\y-p2\y
						
						d# = Sqr#(dx*dx+dy*dy)
						
						If d &lt; min
							min = d
							close = p2\id
						EndIf
					
					EndIf
					
				EndIf
			
			Next
			
			Return close
		
		EndIf
	
	Next
	
	Return 0

End Function</pre><br><br>Any help? <br><br></td></tr></table><br>
<a name="978002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the end you are simply returning an Integer, not a Type instance.<br><br>There is no need to add the ".point" suffix at the function's name; that's what is causing the problem. <br><br></td></tr></table><br>
<a name="978003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Elendia Starman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> But I need to add the .point to be able to use a non-global type! <br><br></td></tr></table><br>
<a name="978004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> No you don't. Remove the .Point from the function declaration AND the function call. That compiles and runs fine, because I just tried it. If it doesn't for you, then you obviously have more code you're not showing, in which case we'll need to see that too. Adding .point after the function name serves no purpose other than declaring your intention to return a .point, whicih is not your intention. <br><br></td></tr></table><br>
<a name="978005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Elendia Starman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ....it works....I wonder what was causing the problem so long ago... <br><br></td></tr></table><br>
<a name="978173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're welcome. <br><br></td></tr></table><br>
<a name="978187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Elendia Starman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. So, what would the .point be needed for? <br><br></td></tr></table><br>
<a name="978200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The suffix in a function's name must always be the kind that that function will return.<br><br>If you don't put any suffix, then the default kind is utilized which is Integer.<br>For all the other kinds of possible Return values, you must type in the precise symbol\type in the suffix.<br><br>Let's say I want the function to return a String:<br><pre class=code>
Function ReturnName$()    ;I put the "$" because that symbol indicates that the function returns a string

Return "Mark Sibly"

End Function
</pre><br>Similar thing for floats, where you will be putting a "#".<br>For returning Type instances, you need to put a ".Type" in the suffix. <br><br>The appropriate type you put in the suffix is the structure that you will be returning instances of (I hope you can understand that).<br><br>In practice:<br><pre class=code>
Function FindEnemyObject.Enemy(ID) ;I'll be returning an instance of the Enemy type.

For E.Enemy = Each Enemy
      If E\ID = ID Then Return E ;Returns the handle to an instance.
Next

End Function
</pre><br>To use this function, you could do something like:<br><pre class=code>
Enemy5.Enemy = FindEnemyObject( 5 )
</pre><br><br>Get it?<br><br>Since in your code you are returning an integer, you can either use <b>FindClosest()</b> or <b>FindClosest%()</b> (the "%" is the symbol for Integers). <br><br></td></tr></table><br>
<a name="978201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Elendia Starman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aaaahhhaaaaa.... thanks for clearing it up for me. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
