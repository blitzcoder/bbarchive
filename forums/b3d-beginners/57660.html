<!DOCTYPE html><html lang="en" ><head ><title >convert float to int</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >convert float to int</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >convert float to int</a><br><br>
<a name="641318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wasn't there a function that allows to convert a float to an int in a binary way (like poking a float to a bank, then read it out as an int) OR maybe it was float to 4-byte string. I just can't find it right now in the docs, sorry.<br><br>I am currently using the bank method I just described, but I think it would be more elegant to use the directly converting function. <br><br></td></tr></table><br>
<a name="641323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I take it, it's not as simple as saying:<br><br><pre class=code>
x% = y#
</pre><br><br>? <br><br></td></tr></table><br>
<a name="641331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, that's not what I mean.<br><br>try this:<br><br>a#=3.14159<br><br>ba=createbank(4)<br>pokefloat ba,0,a#<br>a2%=peekint(ba,0)<br><br>print a2%<br><br>pokeint ba,0,a2%<br>a#=peekfloat(ba,0)<br>print a#<br><br>a2% is the binary equivalent of a#, not the numeric equivalent. <br><br></td></tr></table><br>
<a name="641358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh right, i get what you mean now :o) Sorry i can't be of any help on that one. <br><br></td></tr></table><br>
<a name="641360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks anyway. <br><br></td></tr></table><br>
<a name="641466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The C++ equivilent of what you want to do is called a "reinterpret_cast".  There's no way to do this in Blitz3D without using files or banks. <br><br></td></tr></table><br>
<a name="641495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok i see, thanks. <br><br></td></tr></table><br>
<a name="642228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> umm,  can a float be converted to pure binary?  True binary is in whole numbers (powers of 2), not fractions. <br><br></td></tr></table><br>
<a name="642253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) Never heared of 0.0001 ?<br><br>Seriously, in the end of the day <b>everything</b> is stored binary in your machine. <br><br></td></tr></table><br>
<a name="642285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> True, everything is stored in binary.  Certainly, 0.0001 is represented as binary in a computer memory in a particular format that works out as a float, but I am not understanding what was meant in the original question. <br><br></td></tr></table><br>
<a name="642412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe when floats are represented in binary, it uses bits to represent 1/2 , 1/4, 1/8 etc etc. That's what i was taught in college. I never did figure out how they stored 0.1 though... <br><br></td></tr></table><br>
<a name="642437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> floats are implemented in various way, one is, as the name says, with a floating point. So there is a number , like 134523, and a point index, eg. 4, the result would then be 1345.23 cause the point has to be set after the forth digit.<br><br>A binary piece of ram (eg 32 bits) would then use eg. 5 bits to store the point position and the rest for the value without a point.<br><br>thought my question was clear. when there is a float in the ram, and you peek it as an int, that's the binary integer equivalent of the float. I needed this because when you peek random ram adresses as float, blitz will oftenly return NAN (not a number), and when you compare this with eg. zero, it will say NAN is zero, although it may be something completely diffrent that simply was not a float. So I needed to compare in a binary way (see the "how to hack properties" thread in the tutorials section). <br><br></td></tr></table><br>
<a name="642446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> floats are implemented in various way, one is, as the name says, with a floating point. So there is a number , like 134523, and a point index, eg. 4, the result would then be 1345.23 cause the point has to be set after the forth digit.<br><br>A binary piece of ram (eg 32 bits) would then use eg. 5 bits to store the point position and the rest for the value without a point. <br></div><br>Not sure where you got that idea from. Floats on PC's certainly aren't stored as 'simply' as that. Take a look:<br><a href="http://en.wikipedia.org/wiki/IEEE_floating-point_standard#Single-precision_32_bit" target="_blank">http://en.wikipedia.org/wiki/IEEE_floating-point_standard#Single-precision_32_bit</a> <br><br></td></tr></table><br>
<a name="642478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I said it's <b>one way</b>. Bysides, what sounds so educted on that wiki page isn't that far from what I said, I only simplified it in respect to this thread. You may have realized that the basic method is the same: Normalised numbers use exponent and fraction. If you cut off all the educted sounding phrases you'll realize they're only cooking with water too. <br><br>But why should we make things simple if they can be complicated, hu? <br><br></td></tr></table><br>
<a name="642748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ... NAN (not a number), and when you compare this with eg. zero, it will say NAN is zero ... <br></div><br><br>Not quite.<br><br><div class="quote"> <a href="http://en.wikipedia.org/wiki/NaN" target="_blank">In the IEEE floating-point standard, arithmetic operations involving NaN always produce NaN, allowing the value to propagate through a calculation.</a> <br></div><br><br>It's just that comparing NaN to zero yields NaN, which Blitz is interpreting as a true value when deciding whether the IF condition should succeed.<br><br><pre class=code>
If Sqr(-1) = 0 And Sqr(-1) = 12345 Then Print "told you so"
</pre><br><br>Here are some partially-tested "special case float" testing functions I just wrote:<br><br><pre class=code>
Function isNaN(n#)
	Return n = 0 And n = 12345
End Function

Function isInf(n#)
	Return n / 1000 = n And (Not isNaN(n))
End Function

Function isPosInf(n#)
	Return isInf(n) And Sgn(n) = 1
End Function

Function isNegInf(n#)
	Return isInf(n) And Sgn(n) = -1
End Function
</pre><br><br>EDIT: fixed isInf() so as not to report true on NaN<br>EDIT: fixed isInf() to work with huge floats <br><br></td></tr></table><br>
<a name="642845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks, very interesting. Some time ago I already discovered that blitz has some relations to quantum physics with multiple realities (where nan is zero and one in the same time :) ) <br><br></td></tr></table><br>
<a name="642900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note that Blitz's handling of NaN is completely incorrect according to the wikipedia page on NaN:<br><br><div class="quote"> A NaN does not compare equal to any floating-point number or NaN, even if the latter has an identical representation. <br></div><br><br>I've submitted a <a href="/posts.php?topic=57799" target="_blank">bug report</a>. <br><br></td></tr></table><br>
<a name="643076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Umm, has anybody actually checked out how Blitz stores floats internally?  It seems to me that once you know that, you should be able to obtain the solution desired. <br><br></td></tr></table><br>
<a name="643083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz must store floats in the native format used by the CPU, just as every other PC program does. That's why I posted a link to the format used and pointed out it was different to the method jfk mentioned. I was only trying to help. <br><br></td></tr></table><br>
<a name="643092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Makes sense.  After all, why re-invent the wheel?  And, as I understand it, Blitz was created in C (or a variation thereof), so however the compiler does a float, that would seem to be the format we would reasonably expect. <br><br></td></tr></table><br>
<a name="643399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> big10p, ok, thanks. Although, decoding a float based on that IEEE standard is an overkill, compared to poking it as a float to a bank, then reading it out as an int. So I let the CPU do the convertion. <br><br></td></tr></table><br>
<a name="643587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> a#=3.14159<br><br>ba=createbank(4)<br>pokefloat ba,0,a#<br>a2%=peekint(ba,0)<br><br>print a2%<br><br>pokeint ba,0,a2%<br>a#=peekfloat(ba,0)<br>print a# <br></div><br><br>To get the numeric equivelant, why not just read it out as a float and convert it to an int, like this:<br><pre class=code>a#=3.14159

ba=CreateBank(4)
PokeFloat ba,0,a#
a2%=PeekFloat(ba,0)

Print a2%</pre><br>... or am I misunderstanding the question? <br><br></td></tr></table><br>
<a name="643766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, misunderstanding. The numeric equivalent was NOT needed, it's the binary equivalent I needed. Again, run this:<br><br>a#=3.14159<br><br>ba=createbank(4)<br>pokefloat ba,0,a#<br>print "numeric equivalent integer:"<br>print int(peekfloat(ba,0))<br>print "binary equivalent integer:"<br>print peekint(ba,0)<br><br>I need this to compare ints that have been "peeked" from RAM using the kernel32.dll's function "RTLMoveMemory" to some floats that are known. I am searching for a float that was used in BrushAlpha, but comparing floats will incorrectly return true in some cases, when one of them is an invalid float, eg. NAN. So both need to be ints to be able to compare them in a way that works. <br><br></td></tr></table><br>
<a name="643806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> but comparing floats will incorrectly return true in some cases <br></div><br><br>Not if you use a comparison function that isn't broken!<br><br>Run my test program below to show the results of several comparisons.  Add more to the bottom of the file if you want, just make sure you leave Data secret_data_end_value at the bottom.<br><br>To explain the function a bit, a&lt;&gt;-b is false if either is NaN, but also false if both are zero, so I had to add the extra (a=0 And a&lt;&gt;1) to allow for the case where a=b=0.  The a&lt;&gt;1 is there to make sure that a is in fact really 0 and not NaN.<br><br>Note that I went out of my way to ensure Infinity==Infinity and -Infinity==-Infinity.  :)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function proper_float_equality_test(a#, b#)
	Return a=b And (a&lt;&gt;-b Or (a=0 And a&lt;&gt;1))
End Function

Const inf# = 99^99
Const nan# = inf - inf
Const secret_data_end_value# = 76.23972795

While True
	Read a#
	If proper_float_equality_test(a#, secret_data_end_value) Then Exit
	Read b#
	
	If proper_float_equality_test(a#, b#) Then result$ = " == " Else result$ = " != "
	Print a# + result$ + b#
Wend


Data 0, 0
Data 5, 5
Data 100000000, 100000000
Data 5, -5
Data 6, 5
Data 0, inf
Data -17, -inf
Data inf, inf
Data inf, -inf
Data inf, nan
Data nan, 6
Data nan, 0
Data nan, nan
Data nan, -inf

Data secret_data_end_value</textarea> <br><br></td></tr></table><br>
<a name="643850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree, NAN may be handled not correctly internally. Noless the power of Bitz3D outweights this bug by far. I never had any serious problems with it. At the other hand I'm sure when I would use C++ to code my FPS game engine, I'd stuck somewhere in the beginning.<br><br>Once I had a frame per second counter for a test program and when it was running very fast then the counter said FPS: infinite - well that was rather a funny sideeffect than a bug.<br><br>Usualy you will not be confronted with NANs etc. as long as you compare floats that are created by blitz. <br><br></td></tr></table><br>
<a name="643979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I am searching for a float that was used in BrushAlpha, but comparing floats will incorrectly return true in some cases, when one of them is an invalid float, eg. NAN. So both need to be ints to be able to compare them in a way that works. <br></div><br><br>So are you going to use my proper_float_equality_test() or keep with the reinterpret_cast to ints strategy? :) <br><br></td></tr></table><br>
<a name="644105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> the reinterpretation of the bank content is in fact much simpler. But your functions are useful for some special cases. So I saved this thread. thanks for sharing :) <br><br></td></tr></table><br>
<a name="644630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ugh.  I hope no one ever has to touch that code again.  Including you 6 months later!  :) <br><br></td></tr></table><br>
<a name="646670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> And this was "Beginner's" thread? <br><br></td></tr></table><br>
<a name="646735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) yes it started as a beginner thread and evolved slowly. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
