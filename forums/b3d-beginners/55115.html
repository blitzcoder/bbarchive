<!DOCTYPE html><html lang="en" ><head ><title >Need help with firing bullets B4 I go CRAZY!!!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Need help with firing bullets B4 I go CRAZY!!!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Need help with firing bullets B4 I go CRAZY!!!</a><br><br>
<a name="613597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >W</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am really having some trouble getting my bullets to work correctly in my FPS, I mean they still don't move, and I keep getting errors saying that my bullet entity no longer exists when I know it should, I think I am going legally crazy. I have been working at this all day. I tried to understand Wolron's FPS Turorial, but I think I need it put in lamens terms or broken down for me pa pa pa please!!!! <br><br></td></tr></table><br>
<a name="613603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> code plz <br><br></td></tr></table><br>
<a name="613613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Baystep Productions</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Possible problem....<br><br>You are updating your bullets with a FOR loop and you are requesting the variable after you have deleted it. Usualy you would have deleted it when it hits a target, but are still calling for it after the "Deleter x" part.<br><br><br>I find that using actual entities is a slow aproach to making bullets. Instead just use LinePick/CameraPick to instanly find the end location of the bullet. So in other words call....<br><br>pick=CameraPick(camera,GraphicsWidth()/2,GraphicsHeight()/2)<br><br>Your end locations will be found using PickedX(), PickedY(), and PickedZ(). Then use this to actualy place a bullet hole<br><br><pre class=code>
hole=CopyEntity(bullethole,holes)
	PositionEntity hole,PickedX(),PickedY(),PickedZ(),True
	AlignToVector hole,-PickedNX(),-PickedNY(),-PickedNZ(),3
	MoveEntity hole,0,0,-0.05
	If CountChildren(holes)&gt;200 Then FreeEntity GetChild(holes,1)
</pre><br>Where "holes" is a blank pivot and "bullethole" is a small sprite of a bullet hole image. <br><br></td></tr></table><br>
<a name="613712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes PCD GUY, but that method only works for instantaneous 'bullets'.  For slower 'bullets' (such as a rocket), my 'bullet' code would be necessary.<br>Also, my bullet code can be adapted to work with real (or unreal) flight trajectories, such as when the forces of gravity and friction affect the projectile.<br><br><br>By the way "W", did you read the responses to your last question in this thread?: <a href="http://www.blitzbasic.com/Community/posts.php?topic=54979" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=54979</a><br><br><br>Also, I decided to reformat some of the 'bullet code' on my website to seperate it into different parts.  Now the section of the code that kills the badguy is seperate from the rest of the bullet stuff so that it isn't as confusing.<br><br>Take a look at it again and see if it makes more sense now.<br><br><div class="quote"> Add code between UpdateWorld and RenderWorld to check if any collisions occured between the bullets and anything else. Kill a badguy if the bullet hit one. <br></div><pre class=code>For thisbullet = Each bullettype				;iterate through all of the bullets
  If CountCollisions(thisbullet\entityhandle) &gt; 0		;check if bullet collided with something
    enemyhit = EntityCollided(thisbullet\entityhandle, 3)	;note which enemy (entity type 3) bullet collided with (if any)
    If enemyhit &gt; 0 Then KillBadGuy(enemyhit)			;enemyhit contains entity handle of enemy that was hit
    FreeEntity thisbullet\entityhandle				;delete the bullet mesh
    Delete thisbullet						;delete the bullet
  EndIf
Next</pre><div class="quote"> And finally add this function after the end of the program to kill a badguy if he was struck with a bullet. <br></div><pre class=code>Function KillBadGuy(enemyhit)
  For thisbadguy.badguytype = Each badguytype			;iterate through all of the badguys
    If enemyhit = thisbadguy\entityhandle			;check if the enemy hit = this badguy
      If thisbadguy\state &lt;&gt; 5					;check if badguy is alive
        thisbadguy\state = 5 ;dead				;make him dead
        EntityType thisbadguy\entityhandle, 0			;turn off collisions for this badguy
        RotateEntity thisbadguy\entityhandle, 90, 0, 0		;make him horizontal
        TranslateEntity thisbadguy\entityhandle, 0, -.9, 0	;set him on the ground
        Exit							;exits the badguy For-Next loop (no need to check rest of badguys)
      EndIf
    EndIf
  Next
End Function</pre><br><br><br>"W", if all else fails, then try posting for us some of the relevant code. <br><br></td></tr></table><br>
<a name="614496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >W</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the input guys the input is Very helpful! I do have a question though, PCD guy,  The blank pivot is confusing....how did you set it's location for each bullethole??? <br><br>-All input Appreciated!! <br><br></td></tr></table><br>
<a name="614506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >W</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im just confused as to what Im supposed to do with "holes", which is the blank pivot, can anyone help me out??? <br><br></td></tr></table><br>
<a name="614536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe the PickedX(camera), PickedY(camera) and PickedZ(camera) give you coordinates for where to put the pivot, and hence the location of where to set the location for each bullethole. <br><br></td></tr></table><br>
<a name="614848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >W</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okkay I am trying to get ahold of this concept guys.<br><br>-This is what I got soo far, and it is still non responsive, can anyone tell my why or help me out at all??<br><br>;some code of mine ======================================<br>Function CheckWeapon()<br><br>pick = CameraPick(cam\model,GW,GH)<br><br><br>If MouseHit(1)<br>hole = CopyEntity(b\holes,holes)<br>PositionEntity holes,PickedX(),PickedY(),PickedZ(),True<br>PositionEntity hole,PickedX(),PickedY(),PickedZ(),True <br>AlignToVector hole,-PickedNX(),-PickedNY(),-PickedNZ(),3<br>MoveEntity hole,0,0,-0.05<br>EndIf <br><br>If CountChildren(holes) &gt; 200 Then <br>FreeEntity GetChild(holes,1)<br>EndIf<br><br>End Function<br>;========================================================<br><br>In the initialization section I did this..<br><br>;=======================================<br>ScaleEntity b\holes,.05,.05,.05<br>Global holes = CreatePivot()<br><br>;=========================================<br><br>Oh GW and GH is the graphics width and height <br><br></td></tr></table><br>
<a name="614883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, just quickly looking at your code, I see that you are picking an entity at the lower right corner of the screen...<pre class=code>pick = CameraPick(cam\model,GW,GH)</pre>I believe you meant to use:<pre class=code>pick = CameraPick(cam\model,GW/2,GH/2)</pre> <br><br></td></tr></table><br>
<a name="614887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >W</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> well my GW and GH variables were already divided by 2 previously sorry about that not posting that. <br><br>I just can't get the bullet hole picture technique to work.<br>Can you help me out here WolRon?? <br><br></td></tr></table><br>
<a name="615066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> W,<br><br>Just a few bits of friendly advice.<br><br>I would make the 'hole' a cube entity or something else  you can definately see - ie with depth for debug purposes.<br><br>I m confused by the fact you have two entities holes and hole.<br>PositionEntity holes,PickedX(),PickedY(),PickedZ(),True<br><br>As you have two different names holes and hole - which is the hole you are trying to see?<br><br>Also write the co- ordinates of the camera and the holes to screen top left so you can see if they are about right.<br><br>Makbe try to make your life a little easier by placing the holes somewhere you know you can see them and we then know they are being created upon command (i.e. when you expect them to be).<br><br>IPete2. <br><br></td></tr></table><br>
<a name="615226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >W</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I DID IT.............. OH my god I have bullets and shooting action, thanks 2 all <br><br></td></tr></table><br>
<a name="615259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't know if you want to fire at where the mouse cursor is, but if you are, consider the following:<br><pre class=code>
pick = CameraPick(cam\model,MouseX(),MouseY())</pre>This way, you can shoot at whatever you hover your mouse pointer over anywhere at the screen, not just dead-ahead. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
