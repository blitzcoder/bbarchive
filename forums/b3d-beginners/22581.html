<!DOCTYPE html><html lang="en" ><head ><title >B+.. More math trouble (decimal related)..</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >B+.. More math trouble (decimal related)..</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >B+.. More math trouble (decimal related)..</a><br><br>
<a name="231908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BachFire</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey,<br><br>First, some code:<br><br><pre class=code>
Graphics 640,480
SetBuffer BackBuffer()

b=20

Text 20,b,"Should be 53.36: "+Float(5.8)*9.2
b=b+15:Text 20,b,"Should be 31738.47: "+Float(1661.7)*19.1
b=b+15:Text 20,b,"Should be 32767.1226: "+Float(385.49556)*85

b=b+30:Text 20,b,"Hit ESC to quit.."

Flip

While Not KeyHit(1)
Wend
</pre><br><br>Why are all the decimals present in the first one, but not in the rest? In the last two, it's truncated to only 1 decimal. Is there some way, to force any number of decimals, or something? Or what's wrong here..<br><br>Thanks for the help. ;) <br><br></td></tr></table><br>
<a name="231923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Myke-P</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I remember it's *something* to do with the "Single Precision" float type used by Blitz? Either way it looks like you get a maximum of 6 acurate figures followed by 0s (zeros).<br><br><pre class=code>
b=b+15:Text 20,b,"Should be 3276712.26: "+Float(385.49556)*8500 ;Actual result = 3276710.0
</pre><br><br>Someone else may well be able to elaborate further, but whatever the reason, it's nothing you're doing wrong (or can do anything about.) <br><br></td></tr></table><br>
<a name="231934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Floating point numbers are single precision and are displayed with six digit accuracy.<br><pre class=code>
Graphics 500, 400, 0, 2

x# = 2.0
y# = 2.0000002
z# = 2.0000001

Text 50, 10, "x = " + x
Text 50, 30, "y = " + y
Text 50, 50, "z = " + z

If x &lt;&gt; y Then Text 50, 70, "x and y are different"

If x = z  Then Text 50, 90, "x and z are equal"

WaitKey
</pre> <br><br></td></tr></table><br>
<a name="231946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BachFire</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot you guys, but I still don't understand..<br><br>When I try Floyd's code bit, it displays that x, y and z are all '2.0', and x and y are different, and x and z are equal. Is that what's supposed to happen? If so, I don't see the logic, I'm sorry..<br><br>How can I get more than one decimal, and why was the first one in my code (top of thread) NOT 1 decimal, but 2..? <br><br></td></tr></table><br>
<a name="231964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay... first up, you don't need those float() commands in your code. <br><br>As to your confusion, floating point variables have 6 digits of precision. Therefore you can have 1.37484 (6 digits) or 57391.6 (6 digits) or 749.547 (6 digits)... but no more. Hence floyd's example: <br><br>x=2.0<br>y=2.0000002 - which, when reduced to 6 digits, comes out as<br>y=2.00000 <br><br>therefore x and y are equal.<br><br>One other thing - you can also store values like 468234000.0, which looks like more than 6 digits, but it's actually just 6 with the decimal point moved way back...<br><br>Perhaps one day, we will get double precision floats... <br><br></td></tr></table><br>
<a name="232012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BachFire</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Anthony,<br><br>Thanks for clearing that up for me. I now understand what the 6 digits precision means. And my code makes sense to me now. I love it, when I understand something.. Thanks a lot. ;)<br><br>However, I can only partially see the logic of Floyd's code.. Because of the 6 digits precision, all of them (x, y and z) have the value 2.0 - right?? I therefore fully understand the last statement "x and z are equal", because they're both 2.0.. But I DON'T understand the FIRST statement "x and y are different", because they're NOT different - they're both 2.0.. They're all 2.0..<br><br>This does not make sense to me.. Sorry, if I'm slow.. I SO wanna understand this.. :-( <br><br></td></tr></table><br>
<a name="232039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is hard to explain without going into a horrible amount of detail.<br>But here is my attempt.<br>======================================================<br><br>Imagine floats are base ten numbers, exactly 4-digit precision.<br><br>In this system the next number after 1.0 would be 1.001 = 1 + 1/(10^3).<br>There are no numbers in between.<br><br>Because of rounding, the assignment x=1.0007 actually sets x to 1.001.<br>Similarly x=1.0004 sets x to 1.000.<br><br>Now on to the way it really works...<br><br>Floats are actually base two, 24-bit precision. This means the next number<br>after 1 is 1 + 1/(2^23) = 1 + 1/8388608.<br><br>The example code shows x=y but x&lt;&gt;z despite that fact they are all displayed the same way.<br><br>z would be larger than x by one part in twenty million, if this were possible.<br>As the example shows, it is not.<br><br>The result is that x and z, as floats, are identical.<br><br>y is enough larger than x to be a different single precision number.<br><br>The code attempts to make y larger than x by one part in ten million.<br>This exact value is not possible. In fact, y is set to the next single precision<br>value after x, namely 2 + 2/(2^23). This is the *exact* value of y.<br><br>As to the six digit display, well that's just a compromise.<br>Unfortunately, Blitz doesn't let you format the displayed values.<br>If you could display more digits you would see x=z and x&lt;y.<br><br>For example, with a 9-digit display y would appear as <br>2.00000024, which is the closest 9-digit number to 2 + 2/8388608.<br><br>With even more digits, y would display as 2.0000002384185791016. <br><br></td></tr></table><br>
<a name="239037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oldefoxx</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Le me add a comment here or two:<br><br>Fractions are presented in the form 1234/5678, which is an incomplete division form.  If the division is performed, the value may appear to be 0.2173300458, if your calculator can display that many places.  A calculator with only an 8-digit display will only show 0.2173300.  Which of these is the correct answer?  How about 1/3, which is shown as 0.3333333333 on my calculator, buy may only show as 0.3333333 on yours.  Do they agree?  Are they the same?  Are they truely accurate?<br><br>We have three considerations:  Precision, accuracy, and range.  How precisely a value can be represented, how accurate a value can be represented, and the range over which values can be represented.<br><br>As you probably learned in school, positive numbers can go towards infinity, negative numbers can go towards infinity, and fractions can go towards infinity, either getting bigger, or ever smaller as they approach zero.  But infinity is not a place you can ever get to, it is a concept of there always being something more, something still reachable, without end.<br><br>So we cannot represent infinity when we build machines, because they are finite (have limits) by nature.  The is always going to be a maximum large number or maximum small number involved, so while we can easily represent zero, there is no infinity, large or small, that we can represent or obtain using a machine.<br><br>In fact, we have no way at all of representing the concept of infinity in and of itself, within a computer.  There is no "without end", unless you consider the infinite loop, which is a ceaseless process (but we can always stop it).<br><br>So we cannot have infinite precision, nor infinite accuracy, nor infinite range, when dealing with numbers, expressions, or results.  We can only go so far.  And because of this, we round off values.  Either we do it, or the machine does it for us.  And when we carry on computations involving rounded-off values, we get round-off errors.  And the more complex the computations, the more likely that the round-off errors will grow in size and distort our results.  The computer, in comparing two values, is looking for an exact match to the limits of its ability to accurately represent both values, or determine that one value is larger than the other. Because of round-off errors, the values represented may be such that the wrong value may appear to be larger, or they may appear to be equal when they truely are not, or they may appear to be slightly different when they should be exactly the same.<br><br>So, in general, you are not concerned with accuracy and round-off errors until you ask the computer to compare values for you, and then you run into the problem of round-off errors causing you grief.  Well, the fact is, round-off errors give you an added half-bit of accuracy, where truncated values lack that feature.  But truncated values also lead to truncation errors, which are at least as bad as round-off errors, and often worse.<br><br>So what is the answer?  Round-off errors most commonly occur when you divide, so do all your multiplies first if you can.  Instead of testing for exact matches, you may have to use the &gt;= and &lt;= test to see if a value is within an acceptable range. such as:<br><br><pre class=code>
    If a#&gt;=1.333 And a#&lt;=1.334 Then

Or you could try...

    IF a#=Float(1/3) Then
</pre><br>Some programmers do not like that second form, because it means an extra divide step each time it is executed.  But it means you are checking a# to the limits of the accuracy of the representation possible, and besides, a smart compiler could recognize the use of constants and here and store the results of 1/333 as an internal representation of 0.333333333333... to as many places as it can.<br><br>Still, round-off and truncation errors can haunt you, so just keep it in mind that you may have to try a variety of methods to narrow the error down to something you can live with. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
