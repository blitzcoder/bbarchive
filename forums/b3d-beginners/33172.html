<!DOCTYPE html><html lang="en" ><head ><title >Strange INT behavior</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Strange INT behavior</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Strange INT behavior</a><br><br>
<a name="357036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DaveEdwards</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Should this:<br><br>a# = Int(123.456) + (Int(123.456)/1000)<br>Print a#<br><br>print out 123.123?<br><br>David William Edwards <br><br></td></tr></table><br>
<a name="357040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> No it should print out 123.0 <br><br></td></tr></table><br>
<a name="357043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, because dividing an INT by an INT results in an INT.  If you want a floating point result, one of the sides of the division must be a float.  You can try these options:<br><br>a# = Int(123.456) + (Int(123.456)/1000.0) <br><br>or<br><br>a# = Int(123.456) + Float(Int(123.456)/1000) <br><br></td></tr></table><br>
<a name="357044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, the 2nd part isnt returning an int as the brackets are wrong for it. <br><br></td></tr></table><br>
<a name="357060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, well, hopefully the idea is clear anyway ...<br><br>One of the arguments has to be a float. <br><br></td></tr></table><br>
<a name="357063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DaveEdwards</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! But then why does:<br><br>a# = Int(123.456)<br>b# = Int(123.456)/10000.0<br>Print a# + b#<br><br>print out: 123.012 and not 123.0123 ? <br><br></td></tr></table><br>
<a name="357069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because a# = int(123.456) is being rounded down since you are converting to an int. <br><br></td></tr></table><br>
<a name="357078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Logically (well, logically to me anyway) if you want a floating point result, you should be doing math on floating point values.  Why you're using Int() to convert floating point values to integers before doing the math, and then converting back to a floating point value, is beyond me.  In fact, the more I think about it, the more ludicrous it seems. <br><br></td></tr></table><br>
<a name="357086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DaveEdwards</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe I'm using the wrong command, but I'm using INT to round a floating point. I've looked at Ceiling and Floor, but that doesn't seem to work the way I want them to. <br><br></td></tr></table><br>
<a name="357092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not true, you're using the right command but remember that blitz's floats have quite a low precision.  Try a#= 123.0123 and print a.  You'll notice that this is also 123.012.<br><br>It's a bit of a pain to be honest but there you go.<br><br>Stevie. <br><br></td></tr></table><br>
<a name="357093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Int() doesn't just round the number, it actually converts the number to an integer (ie. not floating point anymore.)  Ceiling and Floor are the proper commands for rounding; that they aren't working the way you expect is probably due to how they behave with negative numbers.  For example, -2.0 is lower than -1.1 so Floor#(-1.1) will give you -2.0; if you wanted/were expecting -1.0 (ie. simply replacing everything after the decimal point with 0) you have to use an If statement to check the value first and then use Floor or Ceiling as appropriate. <br><br></td></tr></table><br>
<a name="357098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DaveEdwards</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> So Floats have only 6 digits of precision? I didn't find this in the manual or a workaround. <br><br></td></tr></table><br>
<a name="357105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sure floats have more than 6 digits of precision.  Blitz would be useless otherwise. <br><br></td></tr></table><br>
<a name="357108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>For example, -2.0 is lower than -1.1 so Floor#(-1.1) will give you -2.0; if you wanted/were expecting -1.0 (ie. simply replacing everything after the decimal point with 0) you have to use an If statement to check the value first and then use Floor or Ceiling as appropriate. <br> <br></div><br><br>or you could do something like:<br><pre class=code>
a# = 1.123
Print Floor(Abs(a#)) Or a#
</pre><br>*edit*<br>then again, forget that one. <br><br></td></tr></table><br>
<a name="357110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not much more. When we say 6 digits, we're talking in decimal numbers. A floating point value has a mantissa of 23 bits (if you don't count the sign), which makes the max number be 8388608. So that's between 6 &amp; 7 digits.<br><br>[EDIT]Crosspost, this was a reply for EpicBoy. <br><br></td></tr></table><br>
<a name="357118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Koriolis<br><br>I think he was talking about after the decimal point. <br><br></td></tr></table><br>
<a name="357125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Me too. A float is of the form S*M*2^E.<br>S: sign (-1 or 1), 1 bit<br>M: mantissa, a 23 bits integer<br>E: exponent, a 8 bits integer<br><br>The size of M directly dictates the maximum number of digits after the decimal point.<br><br>[Edit:] Corrected myself, it's a 8 bits long exponenet, not 7 bits. <br><br></td></tr></table><br>
<a name="357151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh, OK, I'm tired.<br><br>Well, Blitz seems to handle any calcs I throw at it, so I'd still be surprised if that was all the precision that floats had.  And if it is, I guess that's fine since, as I say, it seems to work.  Heh. <br><br></td></tr></table><br>
<a name="357186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tested this out, and it seems to be only 6 digits.... strange. This a bug maybe?? <br><br></td></tr></table><br>
<a name="357192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Ceiling and Floor are the proper commands for rounding; that they aren't working the way you expect is probably due to how they behave with negative numbers. For example, -2.0 is lower than -1.1 so Floor#(-1.1) will give you -2.0; if you wanted/were expecting -1.0 (ie. simply replacing everything after the decimal point with 0) you have to use an If statement to check the value first and then use Floor or Ceiling as appropriate."<br><br><br>Ugh!  I'll have to remember that.  That sucks.<br><br>So we can't count on Int(-256.56) to return -256, and we can't cound on floor(-256.56) to return -256, and we obviously don't want to have to use an IF statement every time we do a math operation.<br><br>I wonder what Blitz does if you go a = -256.56.  Does it round up/down, or does it just round down?  I guess I'll have to test it...<br><br>Oh wonderful.  It rounds both up and down like Int().  WHY MARK?!  WHY?!  WHY MUST YOU TORMENT ME SO?!<br><br>Converting to int should discard the remainder.  That allows such wonderful constructs as:<br><br>A# = B# - Int(B#)<br><br>Which would give you the fractional part of a number and which I used to use constantly, before Blitz.<br><br>And:<br><br>A# = Int(B#)<br><br>Which of course would give you the integral part of the number only.<br><br>But how do I do these with this weird setup?  I can't think of a way without using if statements.<br><br><br><br>[edit]<br><br>Actually, I just realised that with negative numbers you want floor() to round "up".<br><br>Here's why.  Imagine you have a grid, with each tile being 1 unit wide.  So you have a tile start at 0, 1, 2, 3, 4, etc.<br><br>Now, if you go leftwards, you hit negative tile starting locations... -1, -2, -3...<br><br>Now imagine you have a point at 0.5.  If you want to find out which tile that is at, you use floor() and that rounds it down to 0.  So you know you're at the tile that starts at 0.<br><br>But what if you have a point at -0,5?  Well, rather than it rounding "down" to 0, which would be wrong in this case, you want it to round "up" to -1.<br><br>So floor really does "round down" properly because -1 is less than -0.5.<br><br>Hey I never said I got A's in algrebra. :-)  (Actually, I got F's!)<br><br>[/edit] <br><br></td></tr></table><br>
<a name="357200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can't think of a way without using if statements. <br></div><br>So use If statements.<br><br>The exact behavior of Int, Floor and Ceil is in the docs.<br>The only confusing thing is that Int actually means round, not the traditional 'chop'.<br><br>Calculating chop is certainly slower than Int. But this is unavoidable. Intel CPUs do not have a built-in command for this. So even if Blitz changed the behavior of Int to chop it would still have to be done by calculation. <br><br></td></tr></table><br>
<a name="357210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Function ChopDown#(num#)
	If num &lt; 0 Then
		Return Floor(Abs(num#))
	Else
		Return Floor(num#)
	EndIf
End Function

Function ChopUp#(num#)
	If num &lt; 0 Then
		Return Ceil(Abs(num#))
	Else
		Return Ceil(num#)
	EndIf
End Function
</pre> <br><br></td></tr></table><br>
<a name="357267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> The implied meaning of the word Chop is that the digits after the decimal point are lopped off.<br><pre class=code>
Function Chop( x# )
	If x &gt; 0 
		Return Floor( x )
	Else
		Return Ceil( x )
	End If
End Function
</pre> <br><br></td></tr></table><br>
<a name="357297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh I'm sure calling a Blitz function in the middle of a high speed function that has to operate on millions of points will be reeeeal fast. :-)  Specially if it's got an if statement in there! <br><br></td></tr></table><br>
<a name="357301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did a test, and I found something interesting.<br><br>B# = A# - Floor(A#) will return the absolute value of the fractional part of A#.<br><br>In other words, if A# is 1.5, you get 0.5.  If A# is -0.5, you get 0.5.  I tried this with .4 and .6 as well both positive and negative to be sure it works in all cases, and it does.<br><br>[edit]<br>Whoops, scratch that, I just realised I tested the positive case twice and failed to test two of the negative cases, which did not work right.<br>[/edit] <br><br></td></tr></table><br>
<a name="357464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> "B# = A# - Floor(A#) will return the absolute value of the fractional part of A#."<br><br>No it will return the number in the interval [0;1[ that will make a whole number if subtracted from a. This is what is calculated fastest, and what you will need for your tile example. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
