<!DOCTYPE html><html lang="en" ><head ><title >memory erase</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >memory erase</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >memory erase</a><br><br>
<a name="841331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> is there a way to erase all loaded data from blitz3d? I have a level where I want the player to respawn at the origional location but when I respawn, nothing is there except for the level <br><br></td></tr></table><br>
<a name="841344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> never mind I need help on this<br><br>Graphics3D 640,480,16,2<br>SeedRnd MilliSecs()<br>AmbientLight 50,50,50<br><br>Global screenbk=CreateImage(GraphicsWidth(),GraphicsHeight())<br>Global underw_a<br><br>gamespeed#=1<br><br>players=1<br>shots=2<br>items=3<br>walls=4<br>water=5<br><br>light=CreateLight()<br>TurnEntity light,90,0,0<br><br>Dim floatdie(3)<br>Dim ow(8)<br>Dim die(4)<br>Dim drown(2)<br>Dim ricochet(3)<br><br><br><br>reticle=LoadAnimImage("gfx\pointer.bmp",27,27,0,15)<br><br>ammo=LoadMesh("3ds\items\ammo-50.b3d")<br>EntityShininess ammo,5<br>EntityType ammo,items<br>HideEntity ammo<br><br>turret=LoadAnimMesh("3ds\bots\turret.b3d")<br>ExtractAnimSeq(turret,1,15)<br>ExtractAnimSeq(turret,15,30)<br>ExtractAnimSeq(turret,30,45)<br>EntityShininess turret,1<br>EntityType turret,players<br>HideEntity turret<br><br>floater=LoadAnimMesh("3ds\bots\floater.b3d")<br>EntityShininess floater,1<br>EntityType floater,players<br>HideEntity floater<br><br>Gosub setup<br>Gosub playsetup<br><br>.gameload<br><br>fire=MilliSecs()<br>mx#=0<br>mz#=0<br>my#=0<br>falldamage=0<br>fallbase#=0<br>fallheight#=0<br>waterdamage=0<br>height#=6<br>jump=False<br>zoom#=0<br>controlvolume#=1<br>Ammo=100<br>clipammo=200<br>Replacement=0<br>falldeath#=-500<br>liquid#=-3<br>health#=100<br>armor#=100<br><br>levelload$="lvls\station1"<br><br><br>c=LoadMesh(levelload$+".b3d")<br>EntityColor c,255,255,255<br>ScaleEntity c,2,2,2<br>MoveEntity c,0,-5,0<br>EntityType c,walls<br>EntityPickMode c,2<br><br>info=ReadFile(levelload$+".dat")<br><br>If info&lt;&gt;0 Then<br>While unit$&lt;&gt;"end"<br>unit$=ReadString$(info)<br>x#=ReadFloat(info)<br>y#=ReadFloat(info)<br>z#=ReadFloat(info)<br>rx#=ReadFloat(info)<br>ry#=ReadFloat(info)<br><br>If unit$="player" Then<br>HideEntity feet<br>HideEntity eyes<br><br>PositionEntity feet,x#,y#+5,z#<br>RotateEntity feet,0,ry#,0<br>RotateEntity eyes,rx#,0,0<br>ShowEntity feet<br>ShowEntity eyes<br><br>EndIf<br><br>If unit$="bot" Then<br>f.floater=New floater<br>f\entity=CopyEntity(floater)<br>HideEntity f\entity<br>EntityPickMode f\entity,2<br>f\fire=-5<br>f\alpha#=1<br>f\healthmax#=1<br>f\health#=1<br>f\target=0<br>PositionEntity f\entity,x#,y#,z#<br>RotateEntity f\entity,rx#,ry#,0<br>ShowEntity f\entity<br>EndIf<br><br>If unit$="ammo" Then<br>a.ammo=New ammo<br>a\entity=CopyEntity(ammo)<br>HideEntity a\entity<br>a\alpha#=1<br>PositionEntity a\entity,x#,y#+2,z#<br>RotateEntity a\entity,rx#,ry#,0<br>EntityType a\entity,items<br>ShowEntity a\entity<br>EndIf<br><br>If unit$="turret" Then<br>t.turret=New turret<br>t\entity=CopyEntity(turret)<br>HideEntity t\entity<br>EntityPickMode t\entity,2<br>t\fire=-5<br>t\alpha#=1<br>t\health#=1<br>t\target=0<br>PositionEntity t\entity,x#,y#,z#<br>RotateEntity t\entity,rx#,ry#,0<br>ShowEntity t\entity<br>EndIf<br><br>Wend<br>EndIf<br>CloseFile(info)<br><br><br>liquids=LoadAnimTexture("gfx\anim water.bmp",1,128,128,0,15)<br>ScaleTexture liquids,15,15<br><br>plane=CreatePlane()<br>PositionEntity plane,0,liquid#,0<br>EntityAlpha plane,.5<br>EntityType plane,water<br>stars=LoadTexture("gfx\stars.bmp")<br>ScaleTexture stars,.1,.1<br><br>sky=loadskybox("gfx\sky")<br>EntityParent sky,eyes<br>EntityOrder sky,4<br>EntityPickMode sky,2<br><br>tech=LoadFont("blitz",16,1,0,0)<br>death=LoadFont("chiller",128,0,0,0)<br><br>Collisions players,walls,2,3<br>Collisions players,items,2,3<br>Collisions players,players,2,1<br>Collisions shots,walls,2,1<br>Collisions shots,players,2,1<br>Collisions shots,items,2,1<br>Collisions shots,water,2,1<br>Collisions items,walls,2,3<br>Collisions items,players,2,3<br>Collisions items,items,2,3<br><br>HidePointer<br>MoveMouse GraphicsWidth()/2,GraphicsHeight()/2<br><br>SetFont tech<br><br>While Not KeyHit(1)<br>PositionTexture liquids,15,45<br>frame=MilliSecs()/50 Mod 15<br>EntityTexture plane,liquids,frame<br><br>RotateEntity sky,0,0,0,1<br><br>If KeyDown(15) Then<br>gamespeed#=gamespeed#+1<br>Else gamespeed#=gamespeed#-1<br>EndIf<br><br>If gamespeed#&lt;1 Then gamespeed#=1<br>If gamespeed#&gt;100 Then gamespeed#=100<br><br>For a.ammo=Each ammo<br>TranslateEntity a\entity,0,-.75,0<br>If EntityDistance(a\entity,feet)&lt;=7 Then clipammo=clipammo+50:a\alpha#=0<br>If a\alpha#&lt;=0 Then FreeEntity a\entity:Delete a<br>Next<br><br><br>;update files<br>Gosub playerupdate<br>Gosub update<br><br>UpdateWorld(1/gamespeed#)<br>RenderWorld<br>If EntityY(eyes)&lt;=liquid# Then<br>alpha#=.25<br>EntityColor fade,32,175,223<br>capturescreen()<br>wobbleview()<br>EndIf<br><br>If KeyHit(12) Then savescreenshot()<br><br>If health&gt;0 Then<br><br>Color 255,0,0<br>x=GraphicsWidth()/2<br>y=GraphicsHeight()/2<br>If MilliSecs()&gt;tmrmouse+100*gamespeed# Then<br>tmrmouse=MilliSecs()<br>fmrmouse=(fmrmouse+1)Mod 15<br>EndIf<br>DrawImage reticle,x-13.5,y-13.5,fmrmouse<br><br>Color 57,203,219<br>Rect 120,25,armor*4,25,1<br>Color 233,65,60<br>Rect 120,25,health*4,15,1<br>Color 123,236,74<br>Rect 119,24,401,26,0<br><br>Color 175,175,75<br>Rect 10,15,16,202,0<br><br>Color 207,221,40<br>Rect 11,16,14,ammo*2,1<br><br><br>Color 255,255,255<br>Text 10,215,ammo<br>Text 10,230,clipammo<br><br>Text 0,0,(EntityY(eyes)/liquid#)<br><br><br>Text 0,10,MilliSecs()/1000<br><br>Text 0,20,fire<br><br>Else<br>HideEntity gun<br>HideEntity feet<br>EndIf<br><br>If alpha#&gt;=1 Then <br>Text 320,240,"You Have Failed",1,1<br>EndIf<br><br>If alpha#&gt;=2 Then End<br><br>Text 600,0,alpha#<br>Flip<br>Wend<br><br>health#=0<br><br>Gosub update<br><br>FreeBank info<br><br>Goto gameload<br><br>End<br><br>.playsetup<br>Include "subs\player.bb"<br>Return<br><br>.setup<br>Include "subs\types.bb"<br>Include "subs\sounds.bb"<br>Return<br><br>.playerupdate<br>Include "subs\player run.bb"<br>Return<br><br><br>.update<br>Include "subs\projectile.bb"<br>Include "subs\ai.bb"<br>Include "subs\bullets.bb"<br>Include "subs\effects.bb"<br>Return<br><br><br>Function computertype(word$,x#,y#,Dela#)<br>Locate x#,y#<br>For i=1 To Len(word$)<br>Write Mid$(word$,i,1)<br>Delay dela#<br>Next<br>End Function<br><br>Function capturescreen()<br> CopyRect 0,0,GraphicsWidth(),GraphicsHeight(),0,0,BackBuffer(),ImageBuffer(screenbk)<br>End Function<br><br>Function WobbleView()<br> gw#=GraphicsWidth()<br> gh#=GraphicsHeight()<br> underw_a=(underw_a+4)<br> steph#=gh/32<br> mu8#=gh/60<br> If underw_a&gt;359 Then underw_a=0<br>  For iif#=0 To gh-4  Step .001<br>   wsin#=(Sin((underw_a+iif)Mod 360.0)*mu8#)<br>   CopyRect 0,  iif,         gw,steph+4, 0,iif+wsin#, ImageBuffer(screenbk),BackBuffer()<br>   iif=iif+steph<br>  Next<br>End Function<br><br>Function LoadSkyBox( file$ )<br>	m=CreateMesh()<br>	;front face<br>	b=LoadBrush( file$+"_FR.bmp",49 )<br>	s=CreateSurface( m,b )<br>	AddVertex s,-1,+1,-1,0,0:AddVertex s,+1,+1,-1,1,0<br>	AddVertex s,+1,-1,-1,1,1:AddVertex s,-1,-1,-1,0,1<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	;right face<br>	b=LoadBrush( file$+"_LF.bmp",49 )<br>	s=CreateSurface( m,b )<br>	AddVertex s,+1,+1,-1,0,0:AddVertex s,+1,+1,+1,1,0<br>	AddVertex s,+1,-1,+1,1,1:AddVertex s,+1,-1,-1,0,1<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	;back face<br>	b=LoadBrush( file$+"_BK.bmp",49 )<br>	s=CreateSurface( m,b )<br>	AddVertex s,+1,+1,+1,0,0:AddVertex s,-1,+1,+1,1,0<br>	AddVertex s,-1,-1,+1,1,1:AddVertex s,+1,-1,+1,0,1<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	;left face<br>	b=LoadBrush( file$+"_RT.bmp",49 )<br>	s=CreateSurface( m,b )<br>	AddVertex s,-1,+1,+1,0,0:AddVertex s,-1,+1,-1,1,0<br>	AddVertex s,-1,-1,-1,1,1:AddVertex s,-1,-1,+1,0,1<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	;top face<br>	b=LoadBrush( file$+"_UP.bmp",49 )<br>	s=CreateSurface( m,b )<br>	AddVertex s,-1,+1,+1,0,1:AddVertex s,+1,+1,+1,0,0<br>	AddVertex s,+1,+1,-1,1,0:AddVertex s,-1,+1,-1,1,1<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	ScaleMesh m,500,500,500<br>	FlipMesh m<br>	EntityFX m,1<br>	Return m<br>End Function<br><br>Function SaveScreenshot()<br><br>    iFileNumber% = 0<br>    Repeat<br>        iFileNumber = iFileNumber + 1<br>        sFileName$ = "Screenshot" + String$("0", 3 - Len(Str$(iFileNumber))) + iFileNumber + ".jpeg"<br>    Until Not(FileType(sFileName))<br>    <br>    SaveBuffer FrontBuffer(), sFileName<br><br>End Function<br><br><br>this is my main code loop, i have to errors but when I try to respawn, my guys stays in the same spot. <br><br></td></tr></table><br>
<a name="841350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've not run this.  However,  considering you have walls in your code, bare in mind that collisions are stopping your 'guy' from moving - even if he is dead.  You might need to reset your collisions.<br><br>Bare in mind I've not run your code, I just browsed it - but collisions are a common cause for this problem. <br><br></td></tr></table><br>
<a name="841361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you understand how to use the 'include' command looking at your code. <br><br></td></tr></table><br>
<a name="841402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you put include in a subroutine you can use it in more than one place. and to puki, when the player is placed at the top, he is hidden before any movement takes place. when I hit esc to respawn the player simply 'jumps' aprox. a foot in the air. you won't be able to run it because I can not supply the files online <br><br></td></tr></table><br>
<a name="841744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the problem is with the read file my program does not seem to read the file again is there something I'm not getting about readfile? <br><br></td></tr></table><br>
<a name="841759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's no point in calling your include files every loop. Include takes blitz code saved in the include file and drops it right where the include command is at. This happens at complie time. Blitz will include these files regards of whether you put a condition against them.<br><br>As for your code, it might be easier to spot the errors if you indent your code at loops and IF THEN conditions etc etc.<br><br>It's hard to dry run in your head the code if it's that big, so you'll need to provide the media to go along with this so we can run it. <br><br></td></tr></table><br>
<a name="841860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont have anywhere to post the files <br><br></td></tr></table><br>
<a name="841935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> email me a zip file of all the files and i'll try and see if i can sort it. <br><br></td></tr></table><br>
<a name="842270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> okay <br><br></td></tr></table><br>
<a name="842806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't my zip file is 50 Mb and my e-mails allows only 10 Mb <br><br></td></tr></table><br>
<a name="842807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess my question is can a data file be read more that once in a program? <br><br></td></tr></table><br>
<a name="842808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> never mind I fixed it, it was this issue<br><br>this line right here, I never told the program to reset unit$ so it ignored the load program after it had gone through once<br>While unit$&lt;&gt;"end"<br><br><br>sorry for wasting your time guys, I feel really stupid now. <br><br></td></tr></table><br>
<a name="842939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're not wasting our time - if people felt their time was being wasted they wouldn't bother replying at all. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
