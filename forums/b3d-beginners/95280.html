<!DOCTYPE html><html lang="en" ><head ><title >Entity Animation question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Entity Animation question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Entity Animation question</a><br><br>
<a name="1096429"></a>

<a name="1096430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tyoud</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> From the manuals, there's this example (modified slightly for some clarity)<br><br><pre class=code>
mesh=LoadAnimMesh("model.b3d") ;anim sequence 0.
ExtractAnimSeq( mesh,0,30 ) ;anim sequence 1: frames 0...30 are 'run'
ExtractAnimSeq( mesh,31,40 ) ;anim sequence 2: frames 31...40 are 'jump' etc  etc...

Animate mesh,3,1,2 ;play one-shot jump anim 
</pre><br><br>The code makes perfect sense, and things do work exactly as it suggests.<br><br>But I was looking inside of my meshes' .b3d file, and just a few kilobytes in, I find a section labelled "ANIM" and then bits labelled "SEQS" and I can see the names for each animation "Walk" "Run" "Stand" etc, and around them are the bytes for the start and stop frames... <br><br>And I'm kind of left wondering why the animated meshes don't work more like this (making up the AnimSequence() function as an example)<br><br><pre class=code>
Animate mesh,3,1,GetAnimSequenceFromMesh("Jump", "model.b3d")
</pre><br><br>Do other people have these kinds of tags in their .b3d files? If the file has these tags, why doesn't it use it? It is more flexible for sure to have ExtractAnimSequence() type functions where you can hand code the start and stop times, but that's pretty tedious, when it's already there in the file!<br><br>Maybe the tags are there because I exported the model using the tool called 'fragMOTION'?<br><br>Let me know if there's any interest in a snippet of code after I find a good way to read in the values, save them to some kind of structure, and then not type in all of these values by hand.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1096440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If the file has these tags, why doesn't it use it? <br></div><br><br>My guess is backward compatibility. The B3D format was only developed partway through Blitz's released product life cycle - originally it only supported X, 3DS and MD2, so all of the "standard mesh" animation commands were originally written to handle 3DS and X meshes (I assume 3DS and X don't provide this information, not having studied the formats - if they do too, then I really have no idea).<br><br>You can find some B3D loading/saving functions in the code archives ( <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1794" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1794</a> , <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=866" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=866</a> ), if you want a head start on the snippet. <br><br></td></tr></table><br>
<a name="1096442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tyoud</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow thanks for the snippets - the code is there, just commented out:<br><br><pre class=code>
		Select chunk$
		Case "SEQS"
			
		;	b3dseq.sequence=New sequence
		;	b3dseq\name$=b3dReadString()
		;	b3dseq\fstart%=b3dReadInt()
		;	b3dseq\fend%=b3dReadInt()
		;	b3dseq\seq%=ExtractAnimSeq (mesh,b3dseq\fstart%,b3dseq\fend%)
		;	b3dseq\gui_id=AddListBoxItem( lstSeq, 0, b3dseq\seq% + " - " + b3dseq\name$)

</pre><br><br>There's the name$, the fstart% (frame start), and fend% (frame end) <br><br></td></tr></table><br>
<a name="1097381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tyoud</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi I was just going to post a follow-up.<br><br>I wound up making a small C utility to read out ANIM SEQS, and it worked great. Not as ideal as Blitz3D code would be. I do intend to use snippets like these later.<br><br>The big improvement in my code came when I used the hashC code snippet to store animation sequences by name into a hash array and call them by name. I think that that method will scale really well if I ever get to hundreds of models, each with hundreds of animations.  I'll be able to code up animations like so:  Animate,mymodel,1,get_hash(HoL, "mymodel_Run")  and it should just work. <br><br>Thanks very much for the help. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
