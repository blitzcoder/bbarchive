<!DOCTYPE html><html lang="en" ><head ><title >All the same speed?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >All the same speed?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >All the same speed?</a><br><br>
<a name="248321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, my question is about making a 'game' run at the same speed on many different computers.<br><br>I'm using a computer with a screen refresh rate of 60Hz. Currently I get everything done within the frame, so that the game works smoothly.<br><br>I only have a P3 600Mhz with an LCD at 60Hz. I've heard quoted that monitor refresh can be a lot faster than 60Hz which would make my game probably run faster than what it should.<br><br>Basically I'd like to know how to make the game work at the same speed on any computer and have smooth animation.<br><br>I've had a look at some games sources and they do something like the following.<br><br>GameTimer = CreateTimer(30)<br>NoOfUpdates = WaitTimer(GameTimer)<br>For Count=1 To NoOfUpdates<br>   UpdateGame()<br>Next<br>RenderGame()<br><br>Can someone explain this a little bit? Or point me in the right direction?<br><br>Thanks<br>Marg <br><br></td></tr></table><br>
<a name="248326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It depends if you're talking about a 2D or 3D game.  There are different approaches to each.<br><br>That said, the WaitTimer approach is pretty simple (if far from ideal.)  However that code complicates things.  In that code the game is updated more often than it is rendered, kind of a silly approach for most games (although the additional updates between rendered frames makes a difference for stuff like calculating physics.)  To just have it update and render 30 times/second it would be:<br><br>GameTimer=CreatTimer(30)<br><br>While Not KeyHit(1)<br>  WaitTimer(GameTimer)<br>  UpdateGame()<br>  RenderGame()<br>Wend <br><br></td></tr></table><br>
<a name="248335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >keyboard</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> heres a link to a timing example in the code archives:<br><br><a href="/codearcs.php?code=140" target="_blank">game timing</a><br><br>The idea behind this code is: Your program measures the gap in Milliseconds between two consecutive time readings. On fast computers this will be a smaller gap, a bigger gap on slow computers. Then the movement of a sprite is calculated by multiplying by that *gap* mentioned above. As a fast machine updates the screen more often, and a slow machine updates a bigger *gap* - the sprite movement is the same on both machines.<br><br>hope my explanation makes sense... <br><br></td></tr></table><br>
<a name="249435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stoop Solo</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Marg,<br><br>I did it this way with the game I'm working on in BlitzPlus. It's quick 'n' crude, but works out pretty well on the machies I've tried it on so far.<br><br>------------------------------------------------------------<br>gamespeed=9 ;Number of milliseconds each update should take<br><br>.gameloop<br>starttime=millisecs()<br><br>cls<br>---blah blah all the rendering to be done<br>flip false<br><br>---blah blah all the collision checking to be done<br><br>---blah blah blah the UDP network stuff<br><br>---blah blah read mouse/joystick/keyboard, update movement variables<br><br>timeleft=gamespeed-(millisecs()-starttime)   <br>if timeleft&gt;0 delay timeleft<br>goto gameloop<br>--------------------------------------------------<br><br><br>Provided the loop is done within the number of millisecs I specify in the gamespeed variable (which for my actual application, it was easily. Damn, B+ is fast!), the game will always update every 9 milliseconds (or whatever gamespeed is set to).<br><br>-It takes a reading of the system timer at the start of the loop (starttime)<br><br>-runs through all the loop gubbins (rendering, collision, movement etc)<br><br>-and at the end works out the remaining time needed to delay (timeleft) by subtracting the time it took to do the loop (millisecs()-starttime) and subtracting it from the time you want the loop to take in total (gamespeed-(millisecs()-starttime)).<br><br>-the loop will then delay for the remaining milliseconds (timeleft) (it needs to check that it's greater than zero, as in the event that it does ever go below 1, it will delay forever).<br><br>Also, the loop uses Flip False. Flip on it's own will always delay the loop until the next vertical retrace, so the refresh rate of the monitor will impact the game speed (producing the problem you cited), whereas Flip False will just flip the buffer immediately, thus becoming monitor refresh independent.<br><br>Good luck! :D <br><br></td></tr></table><br>
<a name="250781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> if timeleft&gt;0 delay timeleft <br></div><br>I'm not sure that DELAY is the best command to use (depending on the situation of course).  Most of the time you are going to want to let the CPU do other tasks while waiting but I don't think that the DELAY command allows this.  A better setup would be to use a timer and WaitTimer command. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
