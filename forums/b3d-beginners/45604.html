<!DOCTYPE html><html lang="en" ><head ><title >Do hidden polys affect framerate</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Do hidden polys affect framerate</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Do hidden polys affect framerate</a><br><br>
<a name="507013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexus6</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am just testing a level i created with Maplet (about 3000 polys so far) and everything is running fine at about 130fps ( I have an old PC ) but when i turn the camera in certain directions i get a drop of about 40-50 fps. I swithched on the wireframe view and noticed that  it only occured when i was facing a staircase (almost a 1000 polys alone) that  was in another part of the level but was not visible to the camera.<br><br>So my question is, does Blitz render polys that are not visible and without splitting up my level into single rooms/corridors, how do I avoid this slow down. <br><br></td></tr></table><br>
<a name="507015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whole models are culled, ie, if your level is a single model everything will always be rendered.<br><br>Blitz will automatically cull stuff that is out of the camera range, ie, behind the camera or off the sides.<br><br>Blitz will NOT automatically cull stuff that is behind other stuff, ie, a statue behind a wall. <br><br></td></tr></table><br>
<a name="507019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexus6</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Rob,<br>It is a whole model, so that means the whole model is being rendered, but why then does it only occur when I turn to face in the direction were there is a high number polys. <br><br></td></tr></table><br>
<a name="507023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't know... Blitz may cull surfaces... not sure though. <br><br></td></tr></table><br>
<a name="507048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doubt it, TrisRendered() ;)<br><br>[edit] More useful:<br><br><br>Blitz will put it in the render pipeline, but if theres no pixels to be filled by it, the card wont render it.<br><br>Objects behind walls that are in view WILL get drawn by the card first, this slowing it all down.<br><br>If somethnig is off-screen, Blitz will still process it, but it wont be drawn.<br><br>So if theyre hidden theyer still impacting speed, just not as much... <br><br></td></tr></table><br>
<a name="507053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="507055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The sort answer is YES.<br><br>If you are looking at a solid wall, but there is a staircase behind it the camera can see it just fine, and it is drawing it, but you can't see it, because you only get to see the finished scene.<br><br>When polygons are drawn, the distance to each pixel is compared to the pixel in the zbuffer at that position.  If there is no pixel, or if the pixel there is farther away than the pixel you're triyng to draw, then a new distance is saved for that pixel, and the pixel color overwrites the old pixel color there.<br><br>So, the stairs get drawn, and then the wall is drawn over them.  So they're invisible to you, bu tthe camera had to draw them anyway.<br><br>Even if the stairs get drawn last, the camera still has to compare them to the zbuffer, so they'll still slow things down.<br><br>Therefore you can speed things up greatly if you can figure out which parts of your level can safely be hidden.  I would do this by making each room a seperate entity, and then for each room making a list of all other rooms which can be seen from that room.  Then you can hide all rooms that are not potentially visible.<br><br>(You would want to figure out which room a player is in by creating bounding boxes and figuring out which bounding box the camera is in.)<br><br><br>Also, even if the polygons aren't on the screen, Blitz may still attempt to draw them if they are in front of the camera.  I don't know exactly what it does, but I do know that if you create a large 2D-like plain of entities in a grid pattern and you can only see one of them, others will also get drawn even if they are off the screen.  I made a 3D starfield that used this technique, and I found that it was much faster if I actually told Blitz which entities to show than if I just let it try to figure it out on it's own.<br><br><br>So you should definitely try to hide stuff you know isn't visible from a particular location, even if you think the camera can't see it. <br><br></td></tr></table><br>
<a name="507059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>but why then does it only occur when I turn to face in the direction were there is a high number polys. <br> <br></div><br><br>Fillrate. If you look towards the wall that has nothing behind it and compare that to a situation where you have many walls behind the wall you're looking at, 3D-card still have to "draw" everything [whole model] in both cases but the 3D-card discards the polys that are behind the camera or have normals that face away from the camera just before rendering in the DX pipeline and doesn't actually draw them... but those walls-behind-the-walls it has to, and if they fill large part of the screen it slows down the framerate obviously.<br><br>You can try to control this FPS fluctuation if it's too bad for example by hiding and un-hiding blocks [with somekind of visibility code] from the level geometry - this is usually called as having "portals" or "BSP". <br><br></td></tr></table><br>
<a name="507061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexus6</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Guys,<br>I knew everything was going to easy for me, <br>Pathfinding/node editor done <br>Basic AI done<br>Particle effects done<br>control system done<br>Make level(s) with easiest to use modeller (I have no artistic talent) partially done and already knocking chunks of my fps.<br><br>Oh well, back to the drawing board. <br><br></td></tr></table><br>
<a name="507082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nexus, theres code in the archives just added that will do the hide/show thing simplistically for you, so if you want a quick fix that works, use that :)<br><br>[edit]<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1343" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1343</a> <br><br></td></tr></table><br>
<a name="507087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexus6</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Cygnus,<br><br>Im at work at the moment, its 4:20pm, I've had enough, im going home.<br><br>I'll download the code when I get home, thanks again. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
