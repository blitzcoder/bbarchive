<!DOCTYPE html><html lang="en" ><head ><title >Drawing debug text has big impact on FPS</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Drawing debug text has big impact on FPS</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Drawing debug text has big impact on FPS</a><br><br>
<a name="578238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have debug information that can be toggled with the F1 key.<br><br>When debug is on, I use the TEXT command to display all my debug variables on screen.<br><br>This seems to have a BIG effect on FPS.<br><br>Is this normal ? <br><br></td></tr></table><br>
<a name="578249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, the built in text command is for debug purposes only, you wouldn't use it in a released game.<br><br>Your alternatives are to look in the code archives for code which uses a quad mesh to display text etc. or use something like spritecandy or Fontext. <br><br></td></tr></table><br>
<a name="578257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've never noticed a huge speed hit using Text, myself. It seems to be driver related, mostly.<br><br>How big a difference are you getting, Dax? What is the FPS with and without Text displayed? <br><br></td></tr></table><br>
<a name="578267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> 300 fps debug on<br>2000 fps debug off <br><br></td></tr></table><br>
<a name="578269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Holy shizzle! That is a big difference. What GFX card have you got? <br><br></td></tr></table><br>
<a name="578303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might want to check out my Tutorial website on Speed Tips (it's far from finished but it's a start) <br><br></td></tr></table><br>
<a name="578306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fontext link is in my sig (or in Toolbox on this site). <br><br></td></tr></table><br>
<a name="578307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> big10p, <br><br>I use a Radeon 9800 Pro<br><br>the botleneck must be elsewhere in the code I guess - based on your reaction!<br><br>Wolron, thanks - will check it out. <br><br></td></tr></table><br>
<a name="578314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> the botleneck must be elsewhere in the code I guess - based on your reaction! <br></div>Not neccessarily. It seems the newer GFX cards are more prone to slowdowns with Text as they're geared almost exclusively to accelerating 3d. My aging GF 256 and GF2 GTS cards seem to cope with it quite well. <br><br></td></tr></table><br>
<a name="578386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a 9800Pro and text commands hardly have any effect on speed.<br>You might be right that it's something else taking the time.<br>2700+, 1G RAM, 9800Pro <br><br></td></tr></table><br>
<a name="578479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  have a 9800Pro and text commands hardly have any effect on speed. <br></div><br>Are you using FLIP or FLIP FALSE? With FLIP, no - you won't noticed much difference as it can easily do it at 60fps. However, with FLIP FALSE, you'll notice framerates drop dramatically with text (or any 2D - but mainly text) on-screen.<br><br><div class="quote"> It seems the newer GFX cards are more prone to slowdowns with Text as they're geared almost exclusively to accelerating 3d. <br></div><br>With pixel-perfect sprites like the Pixies system or Sprite Control, there's no reason to use 2D graphics commands in 3D at all. I avoid 2D graphics completely now, as mixing 2D/3D has too high a variance on different systems to be worth taking the time to factor in.<br><br>+BlackD <br><br></td></tr></table><br>
<a name="578945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlackD<br><br>I originally used delta time, but reverted back to<br>VWAIT FLIP:FALSE for some reason<br><br>Why is it FLIP FALSE has such an impact on TEXT ?<br><br>I've never heard of Pixies or Sprite Control - what are they?<br><br>So far the game I'm writing, a retro 80's arcade game, doesn't have much cpu overhead. Its all fairly simple - 2D sprite collision, background collision, etc... <br><br></td></tr></table><br>
<a name="579063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> well - it isn't FLIP FALSE that has the impact. Basically, with FLIP FALSE (and no text) you can expect a good 1000 or so FPS. With FLIP, it waits for vsync then FLIPs, so your FPS is limited to 60 (or whatever you've got max refresh set to). So, text takes lots of drawing time - however, when FLIPing with vsync on - you won't notice this impact the framerate as it's happening far faster than the vsync does. With FLIP FALSE, you'll notice it simply because it FLIPs as soon as it can, rather than waiting for vsync. Since text takes a few extra milliseconds to render - this makes the difference.<br><br>+BlackD <br><br></td></tr></table><br>
<a name="579140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Question - Is the CPU flagged whenever there's a vertical blank / retrace ? <br><br></td></tr></table><br>
<a name="579143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> From the docs:<br><div class="quote"> <br><b>VWait [frames]</b><br>Note that this command is different to the vertical blank waiting mechanism in Flip because Flip will cause the graphics card (as opposed to the CPU) to wait for the next vertical blank. The vertical blank can be disabled on some graphics cards, hence it is quite common to use "VWait : Flip False" to ensure consistent updates on all setups. <br></div><br><br>For some reason, using "VWait : Flip False" on my PC is giving jittery scolling and doesn't seem to be waiting for the vertical blanking signal properly - I can see tearing. It used to work great so I've no idea what's going on. :/ <br><br></td></tr></table><br>
<a name="579983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I originally used delta time, but reverted back to<br>VWAIT FLIP:FALSE for some reason<br><br>Why is it FLIP FALSE has such an impact on TEXT ?<br><br>I've never heard of Pixies or Sprite Control - what are they? <br></div><br>Pixies are quads with a texture aligned perfectly with screen pixels<br>[url]http://www.blitzbasic.com/codearcs/codearcs.php?code=773[/url]<br>If you use text commands on the texture buffer of a quad (SetBuffer TextureBuffer() : Text 0,0,"woohoo" : SetBuffer BackBuffer()) can you write the text only once and display it every frame on the sprite (or pixie as Skidracer called it).<br><br>If you don't use Pixies you get a fuzzyness on the texture.<br><br>You can also use camera tricks to set up Pixies to map 1 to 1 to screen coordinates, so you can basically have a large textured sprite and draw on that instead of to the screen. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
