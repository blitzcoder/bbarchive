<!DOCTYPE html><html lang="en" ><head ><title >Missing frame when you change direction</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Missing frame when you change direction</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Missing frame when you change direction</a><br><br>
<a name="962969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fox95871</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm trying to get sharp directional changes like in some old games, where you press left and the character faces left, you press right and they're instantly facing right, with no frame in between. The problem I was having initially was that I was getting a stray frame in between. For one frame the character wasn't facing one of the eight set directions, but instead some random midpoint direction. So I've since changed to a system where EntityAlpha swaps between one of eight meshes that are always present, each already facing one of the set directions. It's helped to get rid of the midpoints, but now in their place the character is invisible for one frame. Please help if you can.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;setup
Graphics3D 640,480,32,1
SetBuffer BackBuffer()
SeedRnd MilliSecs()
Const fps=30
blitz=LoadFont("blitz",10,1,0,0)
SetFont blitz
Color 100,100,100
ClearTextureFilters
period=1000/fps
time=MilliSecs()-period
elapsed%=0
ticks%=0
tween#=0
rt%=0

;character variables
Global characterposition#=0
Global characterheight#=10
Global characterdistance#=0
Global facing$="right"
Global facing2$=""
Global walking$=""
Global walking2$=""
Global running$=""
Global running2$=""
Global positionspeed#=0
Global heightspeed#=0
Global distancespeed#=0

;collision variables
Global charactercollider%=1
Global levelcollider%=2
Global collisionmethod%=2
;1=sphere
;2=mesh
;3=box
Global collisionresponse%=3
;1=stick
;2=slide
;3=slide but not down 

;camera creation
Global camera=CreateCamera()
CameraZoom camera,1.6
RotateEntity camera,10,0,0
PositionEntity camera,0,10,-30
CameraClsColor camera,0,0,0

;light creation
Global light=CreateLight(1)
RotateEntity light,40,-70,0

;ground creation
Global ground=CreateCube()
EntityColor ground,90,80,50
EntityType ground,levelcollider
ScaleMesh ground,20,1,10
NameEntity ground,"ground"

;character creation
;/character
Global character=CreateCube()
EntityType character,charactercollider
EntityRadius character,.05,2
EntityColor character,30,40,70
ScaleEntity character,1,1.5,1
arrow=CreateCone()
ScaleMesh arrow,.5,.5,.5
RotateMesh arrow,90,0,0
PositionMesh arrow,0,0,2
AddMesh arrow,character
FreeEntity arrow
EntityAlpha character,0
;/eight meshes facing different ways
Global characterup=CopyEntity(character,character)
Global characterupright=CopyEntity(character,character)
RotateEntity characterupright,0,-45,0
Global characterright=CopyEntity(character,character)
RotateEntity characterright,0,-90,0
Global characterdownright=CopyEntity(character,character)
RotateEntity characterdownright,0,-135,0
Global characterdown=CopyEntity(character,character)
RotateEntity characterdown,0,-180,0
Global characterdownleft=CopyEntity(character,character)
RotateEntity characterdownleft,0,-225,0
Global characterleft=CopyEntity(character,character)
RotateEntity characterleft,0,-270,0
Global characterupleft=CopyEntity(character,character)
RotateEntity characterupleft,0,-315,0
PositionEntity character,characterposition,characterheight,characterdistance
;/initial facing, based on facing$ in character variables
If facing="up"        EntityAlpha characterup,       1
If facing="upright"   EntityAlpha characterupright,  1
If facing="right"     EntityAlpha characterright,    1
If facing="downright" EntityAlpha characterdownright,1
If facing="down"      EntityAlpha characterdown,     1
If facing="downleft"  EntityAlpha characterdownleft, 1
If facing="left"      EntityAlpha characterleft,     1
If facing="upleft"    EntityAlpha characterupleft,   1

;collision setup
Collisions charactercollider,levelcollider,collisionmethod,collisionresponse

;moving variables
Global runstate$=""

;jumping variables
Global ascentspeed#=0

;timer variables
Global timenow=0
Global starttime=0
Global timerstate$=""

While Not KeyHit(1)
Cls
Repeat
elapsed=MilliSecs()-time
Until elapsed
ticks=elapsed/period
tween#=Float(elapsed Mod period)/Float(period)
For rt=1 To ticks
time=time+period
If rt=ticks Then CaptureWorld

;blitz3d functions
FacingAndMovingControlActivator()
FacingEffects()
WalkingEffects()
RunningEffects()
Gravity()

UpdateWorld
Next
RenderWorld tween

;blitz2d functions
Text 0,0,"Controls: up down z x and left"

Flip
Wend
End

;removes control while in midair
Function FacingAndMovingControlActivator()
If EntityCollided(character,levelcollider)&gt;0
FacingAndMovingControl()
EndIf
End Function

;nate's code
Function FacingAndMovingControl()
;/walking
If     KeyDown(200):facing="up"    :walking= "up"
ElseIf KeyDown(208):facing="down"  :walking= "down"
Else               :facing=""      :walking= ""     :running=""
EndIf
If KeyDown(45)     :facing2="right":walking2="right"
ElseIf KeyDown(44) :facing2="left" :walking2="left"
Else               :facing2=""     :walking2=""     :running2=""
EndIf
;/running
If     KeyDown(200) And KeyDown(203):facing= "up"   :running= "up"    :walking=""
ElseIf KeyDown(208) And KeyDown(203):facing= "down" :running= "down"  :walking=""
Else                                                 running=""
EndIf
If     KeyDown(45)  And KeyDown(203):facing2="right":running2="right" :walking2=""
ElseIf KeyDown(44)  And KeyDown(203):facing2="left" :running2="left"  :walking2=""
Else                                                 running2=""
EndIf
;/prevariables 
walking=walking$+walking2$
running=running$+running2$
facing=facing$+facing2$
End Function

;move the character at normal speed
Function WalkingEffects()
Select walking
Case "up":distancespeed=+.2:positionspeed=0
Case "upright":distancespeed=+.2:positionspeed=+.2
Case "right":positionspeed=+.2:distancespeed=0
Case "downright":distancespeed=-.2:positionspeed=+.2
Case "down":distancespeed=-.2:positionspeed=0
Case "downleft":distancespeed=-.2:positionspeed=-.2
Case "left":positionspeed=-.2:distancespeed=0
Case "upleft":distancespeed=+.2:positionspeed=-.2
Case "":positionspeed=0:heightspeed=0:distancespeed=0
End Select
TranslateEntity character,positionspeed,heightspeed,distancespeed
End Function

;move the character a little faster if run is being held
Function RunningEffects()
Select running
Case "up":distancespeed=+.4:positionspeed=0
Case "upright":distancespeed=+.4:positionspeed=+.4
Case "right":positionspeed=+.4:distancespeed=0
Case "downright":distancespeed=-.4:positionspeed=+.4
Case "down":distancespeed=-.4:positionspeed=0
Case "downleft":distancespeed=-.4:positionspeed=-.4
Case "left":positionspeed=-.4:distancespeed=0
Case "upleft":distancespeed=+.4:positionspeed=-.4
Case "":positionspeed=0:heightspeed=0:distancespeed=0
End Select
TranslateEntity character,positionspeed,heightspeed,distancespeed
End Function

;hide 7 meshes and show 1 depending on the direction chosen. other
;methods just rotate a mesh, causing visible midpoint frames
Function FacingEffects()
Select facing
Case "up"
EntityAlpha characterup,       1
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "upright"
EntityAlpha characterupright,  1
EntityAlpha characterup,       0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "right"
EntityAlpha characterright,    1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "downright"
EntityAlpha characterdownright,1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "down"
EntityAlpha characterdown,     1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "downleft"
EntityAlpha characterdownleft, 1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "left"
EntityAlpha characterleft,     1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterupleft,   0
Case "upleft"
EntityAlpha characterupleft,   1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
End Select
End Function

Function Gravity()
TranslateEntity character,0,-1.2,0
End Function















;
</textarea> <br><br></td></tr></table><br>
<a name="962974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It looks like it is the tweening that causes this.<br>Instead of using EntityAlpha use ShowEntity/HideEntity. That is not affected by the tweaning.<br>Another thing: I noticed that in your code, you are using CopyEntity(entity, entity) That works once, but the second time you use that, the previously added entity seems to get copied along with it. Because the original mesh has Alpha=0, the copies aren't visible, but if you change that, you'll see a strange looking big mesh. To see it, change:<br><pre class=code>EntityAlpha character,0</pre> to <pre class=code>EntityAlpha character,1</pre>after "FreeEntity arrow".<br>In this version, I replaced EntityAlpha by ShowEntity:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;setup
Graphics3D 640,480,0,2
SetBuffer BackBuffer()
SeedRnd MilliSecs()
Const fps=30
blitz=LoadFont("blitz",10,1,0,0)
SetFont blitz
Color 100,100,100
ClearTextureFilters
period=1000/fps
time=MilliSecs()-period
elapsed%=0
ticks%=0
tween#=0
rt%=0

;character variables
Global characterposition#=0
Global characterheight#=10
Global characterdistance#=0
Global facing$="right"
Global facing2$=""
Global walking$=""
Global walking2$=""
Global running$=""
Global running2$=""
Global positionspeed#=0
Global heightspeed#=0
Global distancespeed#=0

;collision variables
Global charactercollider%=1
Global levelcollider%=2
Global collisionmethod%=2
;1=sphere
;2=mesh
;3=box
Global collisionresponse%=3
;1=stick
;2=slide
;3=slide but not down 

;camera creation
Global camera=CreateCamera()
CameraZoom camera,1.6
RotateEntity camera,10,0,0
PositionEntity camera,0,10,-30
CameraClsColor camera,0,0,0

;light creation
Global light=CreateLight(1)
RotateEntity light,40,-70,0

;ground creation
Global ground=CreateCube()
EntityColor ground,90,80,50
EntityType ground,levelcollider
ScaleMesh ground,20,1,10
NameEntity ground,"ground"

;character creation
;/character
Global character=CreateCube()
EntityType character,charactercollider
EntityRadius character,.05,2
EntityColor character,30,40,70
ScaleEntity character,1,1.5,1
arrow=CreateCone()
ScaleMesh arrow,.5,.5,.5
RotateMesh arrow,90,0,0
PositionMesh arrow,0,0,2
AddMesh arrow,character
FreeEntity arrow

;/eight meshes facing different ways
Global characterup=CopyEntity(character)
Global characterupright=CopyEntity(character)
Global characterright=CopyEntity(character)
Global characterdownright=CopyEntity(character)
Global characterdown=CopyEntity(character)
Global characterdownleft=CopyEntity(character)
Global characterleft=CopyEntity(character)
Global characterupleft=CopyEntity(character)

RotateEntity characterupright,0,-45,0
RotateEntity characterright,0,-90,0
RotateEntity characterdownright,0,-135,0
RotateEntity characterdown,0,-180,0
RotateEntity characterdownleft,0,-225,0
RotateEntity characterleft,0,-270,0
RotateEntity characterupleft,0,-315,0

EntityParent characterup, character
EntityParent characterupright, character
EntityParent characterright, character
EntityParent characterdownright, character
EntityParent characterdown, character
EntityParent characterdownleft, character
EntityParent characterleft, character
EntityParent characterupleft, character
EntityAlpha character,0.0
PositionEntity character,characterposition,characterheight,characterdistance

;/initial facing, based on facing$ in character variables
If facing="up"        EntityShow characterup,       1
If facing="upright"   EntityShow characterupright,  1
If facing="right"     EntityShow characterright,    1
If facing="downright" EntityShow characterdownright,1
If facing="down"      EntityShow characterdown,     1
If facing="downleft"  EntityShow characterdownleft, 1
If facing="left"      EntityShow characterleft,     1
If facing="upleft"    EntityShow characterupleft,   1

;collision setup
Collisions charactercollider,levelcollider,collisionmethod,collisionresponse

;moving variables
Global runstate$=""

;jumping variables
Global ascentspeed#=0

;timer variables
Global timenow=0
Global starttime=0
Global timerstate$=""

While Not KeyHit(1)

	Cls
	Repeat
		elapsed=MilliSecs()-time
	Until elapsed
	ticks=elapsed/period
	tween#=Float(elapsed Mod period)/Float(period)

	For rt=1 To ticks
		time=time+period
		If rt=ticks Then CaptureWorld

		;blitz3d functions
		FacingAndMovingControlActivator()
		FacingEffects()
		WalkingEffects()
		RunningEffects()
		Gravity()

		UpdateWorld
	Next
RenderWorld tween

;blitz2d functions
Text 0,0,"Controls: up down z x and left"

Flip
Wend
End

;removes control while in midair
Function FacingAndMovingControlActivator()
	If EntityCollided(character,levelcollider)&gt;0
		FacingAndMovingControl()
	EndIf
End Function

;nate's code
Function FacingAndMovingControl()
	;/walking
	If     KeyDown(200):facing="up"    :walking= "up"
	ElseIf KeyDown(208):facing="down"  :walking= "down"
	Else               :facing=""      :walking= ""     :running=""
	EndIf
	If KeyDown(45)     :facing2="right":walking2="right"
	ElseIf KeyDown(44) :facing2="left" :walking2="left"
	Else               :facing2=""     :walking2=""     :running2=""
	EndIf
	;/running
	If     KeyDown(200) And KeyDown(203):facing= "up"   :running= "up"    :walking=""
	ElseIf KeyDown(208) And KeyDown(203):facing= "down" :running= "down"  :walking=""
	Else                                                 running=""
	EndIf
	If     KeyDown(45)  And KeyDown(203):facing2="right":running2="right" :walking2=""
	ElseIf KeyDown(44)  And KeyDown(203):facing2="left" :running2="left"  :walking2=""
	Else                                                 running2=""
	EndIf
	;/prevariables 
	walking=walking$+walking2$
	running=running$+running2$
	facing=facing$+facing2$
End Function

;move the character at normal speed
Function WalkingEffects()
	Select walking
		Case "up":distancespeed=+.2:positionspeed=0
		Case "upright":distancespeed=+.2:positionspeed=+.2
		Case "right":positionspeed=+.2:distancespeed=0
		Case "downright":distancespeed=-.2:positionspeed=+.2
		Case "down":distancespeed=-.2:positionspeed=0
		Case "downleft":distancespeed=-.2:positionspeed=-.2
		Case "left":positionspeed=-.2:distancespeed=0
		Case "upleft":distancespeed=+.2:positionspeed=-.2
		Case "":positionspeed=0:heightspeed=0:distancespeed=0
	End Select
	TranslateEntity character,positionspeed,heightspeed,distancespeed
End Function

;move the character a little faster if run is being held
Function RunningEffects()
	Select running
		Case "up":distancespeed=+.4:positionspeed=0
		Case "upright":distancespeed=+.4:positionspeed=+.4
		Case "right":positionspeed=+.4:distancespeed=0
		Case "downright":distancespeed=-.4:positionspeed=+.4
		Case "down":distancespeed=-.4:positionspeed=0
		Case "downleft":distancespeed=-.4:positionspeed=-.4
		Case "left":positionspeed=-.4:distancespeed=0
		Case "upleft":distancespeed=+.4:positionspeed=-.4
		Case "":positionspeed=0:heightspeed=0:distancespeed=0
	End Select
	TranslateEntity character,positionspeed,heightspeed,distancespeed
End Function

;hide 7 meshes and show 1 depending on the direction chosen. other
;methods just rotate a mesh, causing visible midpoint frames
Function FacingEffects()
	Select facing
	Case "up"
		EntityShow characterup,       1
		EntityShow characterupright,  0
		EntityShow characterright,    0
		EntityShow characterdownright,0
		EntityShow characterdown,     0
		EntityShow characterdownleft, 0
		EntityShow characterleft,     0
		EntityShow characterupleft,   0
	Case "upright"
		EntityShow characterupright,  1
		EntityShow characterup,       0
		EntityShow characterright,    0
		EntityShow characterdownright,0
		EntityShow characterdown,     0
		EntityShow characterdownleft, 0
		EntityShow characterleft,     0
		EntityShow characterupleft,   0
	Case "right"
		EntityShow characterright,    1
		EntityShow characterup,       0
		EntityShow characterupright,  0
		EntityShow characterdownright,0
		EntityShow characterdown,     0
		EntityShow characterdownleft, 0
		EntityShow characterleft,     0
		EntityShow characterupleft,   0
	Case "downright"
		EntityShow characterdownright,1
		EntityShow characterup,       0
		EntityShow characterupright,  0
		EntityShow characterright,    0
		EntityShow characterdown,     0
		EntityShow characterdownleft, 0
		EntityShow characterleft,     0
		EntityShow characterupleft,   0
	Case "down"
		EntityShow characterdown,     1
		EntityShow characterup,       0
		EntityShow characterupright,  0
		EntityShow characterright,    0
		EntityShow characterdownright,0
		EntityShow characterdownleft, 0
		EntityShow characterleft,     0
		EntityShow characterupleft,   0
	Case "downleft"
		EntityShow characterdownleft, 1
		EntityShow characterup,       0
		EntityShow characterupright,  0
		EntityShow characterright,    0
		EntityShow characterdownright,0
		EntityShow characterdown,     0
		EntityShow characterleft,     0
		EntityShow characterupleft,   0
	Case "left"
		EntityShow characterleft,     1
		EntityShow characterup,       0
		EntityShow characterupright,  0
		EntityShow characterright,    0
		EntityShow characterdownright,0
		EntityShow characterdown,     0
		EntityShow characterdownleft, 0
		EntityShow characterupleft,   0
	Case "upleft"
		EntityShow characterupleft,   1
		EntityShow characterup,       0
		EntityShow characterupright,  0
		EntityShow characterright,    0
		EntityShow characterdownright,0
		EntityShow characterdown,     0
		EntityShow characterdownleft, 0
		EntityShow characterleft,     0
	End Select
End Function

Function Gravity()
	TranslateEntity character,0,-1.2,0
End Function

;

Function EntityShow(e, show#)

	If show = 1 Then ShowEntity e Else HideEntity e
	
End Function</textarea> <br><br></td></tr></table><br>
<a name="962998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Josaih6/10</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not use "RotateEntity"? <br><br></td></tr></table><br>
<a name="963202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guessed it was because they need to be 8 differently shaped meshes? Like when they are optimized to be shown only from one side or something. <br><br></td></tr></table><br>
<a name="963230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fox95871</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because it was causing a problem where you'd sometimes see a non multiple of 45 type angle. In other words, you'd see a frame that was halfway between one of the eight set directions.<br><br>I'll check out your suggestion in the next few days Warner, thanks. <br><br></td></tr></table><br>
<a name="963259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you do your turn immediately before the CaptureWorld command, you should be able to eliminate the tweened frames. Doing it this way may possibly cause additional side effects, though. Some experimentation may be required to get it right. <br><br></td></tr></table><br>
<a name="963390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fox95871</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, I'll experiment then. To be honest the only things I know about the render tween is what it's for and how to use it. How it works or any of that I have no idea about. I'll try to get the EntityAlpha and/or direction change code nearer to CaptureWorld like you said though, thanks. <br><br></td></tr></table><br>
<a name="964475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fox95871</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't thank you enough Warner, works perfect now. I assume you made the EntityShow function just so you wouldn't have to alter all my longhand code? I did it anyway though, so here it is for anyone who needs perfect eight directional walking and running code:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;setup
Graphics3D 640,480,32,1
SetBuffer BackBuffer()
SeedRnd MilliSecs()
Const fps=30
blitz=LoadFont("blitz",10,1,0,0)
SetFont blitz
Color 100,100,100
ClearTextureFilters
period=1000/fps
time=MilliSecs()-period
elapsed%=0
ticks%=0
tween#=0
rt%=0

;character variables
Global characterposition#=0
Global characterheight#=10
Global characterdistance#=0
Global facing$="right"
Global facing2$=""
Global walking$=""
Global walking2$=""
Global running$=""
Global running2$=""
Global positionspeed#=0
Global heightspeed#=0
Global distancespeed#=0

;collision variables
Global charactercollider%=1
Global levelcollider%=2
Global collisionmethod%=2
;1=sphere
;2=mesh
;3=box
Global collisionresponse%=3
;1=stick
;2=slide
;3=slide but not down 

;camera creation
Global camera=CreateCamera()
CameraZoom camera,1.6
RotateEntity camera,10,0,0
PositionEntity camera,0,10,-30
CameraClsColor camera,0,0,0

;light creation
Global light=CreateLight(1)
RotateEntity light,40,-70,0

;ground creation
Global ground=CreateCube()
EntityColor ground,90,80,50
EntityType ground,levelcollider
ScaleMesh ground,20,1,10
NameEntity ground,"ground"

;character creation
;/character
Global character=CreateCube()
EntityType character,charactercollider
EntityRadius character,.05,2
EntityColor character,30,40,70
ScaleEntity character,1,2,1
arrow=CreateCone()
ScaleMesh arrow,.5,.5,.5
RotateMesh arrow,90,0,0
PositionMesh arrow,0,0,2
AddMesh arrow,character
FreeEntity arrow
EntityAlpha character,1
;/eight meshes facing different ways
Global characterup=CopyEntity(character)
Global characterupright=CopyEntity(character)
Global characterright=CopyEntity(character)
Global characterdownright=CopyEntity(character)
Global characterdown=CopyEntity(character)
Global characterdownleft=CopyEntity(character)
Global characterleft=CopyEntity(character)
Global characterupleft=CopyEntity(character)
RotateEntity characterupright,0,-45,0
RotateEntity characterright,0,-90,0
RotateEntity characterdownright,0,-135,0
RotateEntity characterdown,0,-180,0
RotateEntity characterdownleft,0,-225,0
RotateEntity characterleft,0,-270,0
RotateEntity characterupleft,0,-315,0
EntityParent characterup, character
EntityParent characterupright, character
EntityParent characterright, character
EntityParent characterdownright, character
EntityParent characterdown, character
EntityParent characterdownleft, character
EntityParent characterleft, character
EntityParent characterupleft, character
EntityAlpha character,0.0
PositionEntity character,characterposition,characterheight,characterdistance
;/initial facing, based on facing$ in character variables
If facing="up"        ShowEntity characterup
If facing="upright"   ShowEntity characterupright
If facing="right"     ShowEntity characterright
If facing="downright" ShowEntity characterdownright
If facing="down"      ShowEntity characterdown
If facing="downleft"  ShowEntity characterdownleft
If facing="left"      ShowEntity characterleft
If facing="upleft"    ShowEntity characterupleft

;collision setup
Collisions charactercollider,levelcollider,collisionmethod,collisionresponse

;moving variables
Global runstate$=""

;jumping variables
Global ascentspeed#=0

;timer variables
Global timenow=0
Global starttime=0
Global timerstate$=""

While Not KeyHit(1)
Cls
Repeat
elapsed=MilliSecs()-time
Until elapsed
ticks=elapsed/period
tween#=Float(elapsed Mod period)/Float(period)
For rt=1 To ticks
time=time+period
If rt=ticks Then CaptureWorld

;blitz3d functions
FacingAndMovingControlActivator()
FacingEffects()
WalkingEffects()
RunningEffects()
Gravity()

UpdateWorld
Next
RenderWorld tween

;blitz2d functions
Text 0,00,"Controls: up down z x and left"
Text 0,15,"facing " +facing

Flip
Wend
End

;removes control while in midair
Function FacingAndMovingControlActivator()
If EntityCollided(character,levelcollider)&gt;0
FacingAndMovingControl()
EndIf
End Function

;nate's code
Function FacingAndMovingControl()
;/walking
If     KeyDown(200):facing="up"    :walking= "up"
ElseIf KeyDown(208):facing="down"  :walking= "down"
Else               :facing=""      :walking= ""     :running=""
EndIf
If KeyDown(45)     :facing2="right":walking2="right"
ElseIf KeyDown(44) :facing2="left" :walking2="left"
Else               :facing2=""     :walking2=""     :running2=""
EndIf
;/running
If     KeyDown(200) And KeyDown(203):facing= "up"   :running= "up"    :walking=""
ElseIf KeyDown(208) And KeyDown(203):facing= "down" :running= "down"  :walking=""
Else                                                 running=""
EndIf
If     KeyDown(45)  And KeyDown(203):facing2="right":running2="right" :walking2=""
ElseIf KeyDown(44)  And KeyDown(203):facing2="left" :running2="left"  :walking2=""
Else                                                 running2=""
EndIf
;/prevariables 
walking=walking$+walking2$
running=running$+running2$
facing=facing$+facing2$
End Function

;move the character at normal speed
Function WalkingEffects()
Select walking
Case "up":distancespeed=+.2:positionspeed=0
Case "upright":distancespeed=+.2:positionspeed=+.2
Case "right":positionspeed=+.2:distancespeed=0
Case "downright":distancespeed=-.2:positionspeed=+.2
Case "down":distancespeed=-.2:positionspeed=0
Case "downleft":distancespeed=-.2:positionspeed=-.2
Case "left":positionspeed=-.2:distancespeed=0
Case "upleft":distancespeed=+.2:positionspeed=-.2
Case "":positionspeed=0:heightspeed=0:distancespeed=0
End Select
TranslateEntity character,positionspeed,heightspeed,distancespeed
End Function

;move the character a little faster if run is being held
Function RunningEffects()
Select running
Case "up":distancespeed=+.4:positionspeed=0
Case "upright":distancespeed=+.4:positionspeed=+.4
Case "right":positionspeed=+.4:distancespeed=0
Case "downright":distancespeed=-.4:positionspeed=+.4
Case "down":distancespeed=-.4:positionspeed=0
Case "downleft":distancespeed=-.4:positionspeed=-.4
Case "left":positionspeed=-.4:distancespeed=0
Case "upleft":distancespeed=+.4:positionspeed=-.4
Case "":positionspeed=0:heightspeed=0:distancespeed=0
End Select
TranslateEntity character,positionspeed,heightspeed,distancespeed
End Function

;hide 7 meshes and show 1 depending on the direction chosen. other
;methods just rotate a mesh, causing visible midpoint frames
Function FacingEffects()
Select facing
Case "up"
ShowEntity characterup
HideEntity characterupright
HideEntity characterright
HideEntity characterdownright
HideEntity characterdown
HideEntity characterdownleft
HideEntity characterleft
HideEntity characterupleft
Case "upright"
ShowEntity characterupright
HideEntity characterup
HideEntity characterright
HideEntity characterdownright
HideEntity characterdown
HideEntity characterdownleft
HideEntity characterleft
HideEntity characterupleft
Case "right"
ShowEntity characterright
HideEntity characterup
HideEntity characterupright
HideEntity characterdownright
HideEntity characterdown
HideEntity characterdownleft
HideEntity characterleft
HideEntity characterupleft
Case "downright"
ShowEntity characterdownright
HideEntity characterup
HideEntity characterupright
HideEntity characterright
HideEntity characterdown
HideEntity characterdownleft
HideEntity characterleft
HideEntity characterupleft
Case "down"
ShowEntity characterdown
HideEntity characterup
HideEntity characterupright
HideEntity characterright
HideEntity characterdownright
HideEntity characterdownleft
HideEntity characterleft
HideEntity characterupleft
Case "downleft"
ShowEntity characterdownleft
HideEntity characterup
HideEntity characterupright
HideEntity characterright
HideEntity characterdownright
HideEntity characterdown
HideEntity characterleft
HideEntity characterupleft
Case "left"
ShowEntity characterleft
HideEntity characterup
HideEntity characterupright
HideEntity characterright
HideEntity characterdownright
HideEntity characterdown
HideEntity characterdownleft
HideEntity characterupleft
Case "upleft"
ShowEntity characterupleft
HideEntity characterup
HideEntity characterupright
HideEntity characterright
HideEntity characterdownright
HideEntity characterdown
HideEntity characterdownleft
HideEntity characterleft
End Select
End Function

Function Gravity()
TranslateEntity character,0,-1.2,0
End Function















;
</textarea><br><br>Thanks again for the help. I still have some questions about what fixed what exactly, but whatever. I still have the rest of my engine to finish so never mind!<br><br>Bill, your suggestion worked too, but I'm a little hesitant to use it since it feels like I'm working with a wrench in an engine room. I don't want to mess with the render tween at all! Here's your suggestion in action though, it does work just as well:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;setup
Graphics3D 640,480,32,1
SetBuffer BackBuffer()
SeedRnd MilliSecs()
Const fps=30
blitz=LoadFont("blitz",10,1,0,0)
SetFont blitz
Color 100,100,100
ClearTextureFilters
period=1000/fps
time=MilliSecs()-period
elapsed%=0
ticks%=0
tween#=0
rt%=0

;character variables
Global characterposition#=0
Global characterheight#=10
Global characterdistance#=0
Global facing$="right"
Global facing2$=""
Global walking$=""
Global walking2$=""
Global running$=""
Global running2$=""
Global positionspeed#=0
Global heightspeed#=0
Global distancespeed#=0

;collision variables
Global charactercollider%=1
Global levelcollider%=2
Global collisionmethod%=2
;1=sphere
;2=mesh
;3=box
Global collisionresponse%=3
;1=stick
;2=slide
;3=slide but not down 

;camera creation
Global camera=CreateCamera()
CameraZoom camera,1.6
RotateEntity camera,10,0,0
PositionEntity camera,0,10,-30
CameraClsColor camera,0,0,0

;light creation
Global light=CreateLight(1)
RotateEntity light,40,-70,0

;ground creation
Global ground=CreateCube()
EntityColor ground,90,80,50
EntityType ground,levelcollider
ScaleMesh ground,20,1,10
NameEntity ground,"ground"

;character creation
;/character
Global character=CreateCube()
EntityType character,charactercollider
EntityRadius character,.05,2
EntityColor character,30,40,70
ScaleEntity character,1,1.5,1
arrow=CreateCone()
ScaleMesh arrow,.5,.5,.5
RotateMesh arrow,90,0,0
PositionMesh arrow,0,0,2
AddMesh arrow,character
FreeEntity arrow
EntityAlpha character,0
;/eight meshes facing different ways
Global characterup=CopyEntity(character,character)
Global characterupright=CopyEntity(character,character)
RotateEntity characterupright,0,-45,0
Global characterright=CopyEntity(character,character)
RotateEntity characterright,0,-90,0
Global characterdownright=CopyEntity(character,character)
RotateEntity characterdownright,0,-135,0
Global characterdown=CopyEntity(character,character)
RotateEntity characterdown,0,-180,0
Global characterdownleft=CopyEntity(character,character)
RotateEntity characterdownleft,0,-225,0
Global characterleft=CopyEntity(character,character)
RotateEntity characterleft,0,-270,0
Global characterupleft=CopyEntity(character,character)
RotateEntity characterupleft,0,-315,0
PositionEntity character,characterposition,characterheight,characterdistance
;/initial facing, based on facing$ in character variables
If facing="up"        EntityAlpha characterup,       1
If facing="upright"   EntityAlpha characterupright,  1
If facing="right"     EntityAlpha characterright,    1
If facing="downright" EntityAlpha characterdownright,1
If facing="down"      EntityAlpha characterdown,     1
If facing="downleft"  EntityAlpha characterdownleft, 1
If facing="left"      EntityAlpha characterleft,     1
If facing="upleft"    EntityAlpha characterupleft,   1

;collision setup
Collisions charactercollider,levelcollider,collisionmethod,collisionresponse

;moving variables
Global runstate$=""

;jumping variables
Global ascentspeed#=0

;timer variables
Global timenow=0
Global starttime=0
Global timerstate$=""

While Not KeyHit(1)
Cls
Repeat
elapsed=MilliSecs()-time
Until elapsed
ticks=elapsed/period
tween#=Float(elapsed Mod period)/Float(period)
For rt=1 To ticks
time=time+period

;bills suggestion
If rt=ticks
FacingEffects()
CaptureWorld
EndIf

;blitz3d functions
FacingAndMovingControlActivator()
WalkingEffects()
RunningEffects()
Gravity()

UpdateWorld
Next
RenderWorld tween

;blitz2d functions
Text 0,0,"Controls: up down z x and left"

Flip
Wend
End

;removes control while in midair
Function FacingAndMovingControlActivator()
If EntityCollided(character,levelcollider)&gt;0
FacingAndMovingControl()
EndIf
End Function

;nate's code
Function FacingAndMovingControl()
;/walking
If     KeyDown(200):facing="up"    :walking= "up"
ElseIf KeyDown(208):facing="down"  :walking= "down"
Else               :facing=""      :walking= ""     :running=""
EndIf
If KeyDown(45)     :facing2="right":walking2="right"
ElseIf KeyDown(44) :facing2="left" :walking2="left"
Else               :facing2=""     :walking2=""     :running2=""
EndIf
;/running
If     KeyDown(200) And KeyDown(203):facing= "up"   :running= "up"    :walking=""
ElseIf KeyDown(208) And KeyDown(203):facing= "down" :running= "down"  :walking=""
Else                                                 running=""
EndIf
If     KeyDown(45)  And KeyDown(203):facing2="right":running2="right" :walking2=""
ElseIf KeyDown(44)  And KeyDown(203):facing2="left" :running2="left"  :walking2=""
Else                                                 running2=""
EndIf
;/prevariables 
walking=walking$+walking2$
running=running$+running2$
facing=facing$+facing2$
End Function

;move the character at normal speed
Function WalkingEffects()
Select walking
Case "up":distancespeed=+.2:positionspeed=0
Case "upright":distancespeed=+.2:positionspeed=+.2
Case "right":positionspeed=+.2:distancespeed=0
Case "downright":distancespeed=-.2:positionspeed=+.2
Case "down":distancespeed=-.2:positionspeed=0
Case "downleft":distancespeed=-.2:positionspeed=-.2
Case "left":positionspeed=-.2:distancespeed=0
Case "upleft":distancespeed=+.2:positionspeed=-.2
Case "":positionspeed=0:heightspeed=0:distancespeed=0
End Select
TranslateEntity character,positionspeed,heightspeed,distancespeed
End Function

;move the character a little faster if run is being held
Function RunningEffects()
Select running
Case "up":distancespeed=+.4:positionspeed=0
Case "upright":distancespeed=+.4:positionspeed=+.4
Case "right":positionspeed=+.4:distancespeed=0
Case "downright":distancespeed=-.4:positionspeed=+.4
Case "down":distancespeed=-.4:positionspeed=0
Case "downleft":distancespeed=-.4:positionspeed=-.4
Case "left":positionspeed=-.4:distancespeed=0
Case "upleft":distancespeed=+.4:positionspeed=-.4
Case "":positionspeed=0:heightspeed=0:distancespeed=0
End Select
TranslateEntity character,positionspeed,heightspeed,distancespeed
End Function

;hide 7 meshes and show 1 depending on the direction chosen. other
;methods just rotate a mesh, causing visible midpoint frames
Function FacingEffects()
Select facing
Case "up"
EntityAlpha characterup,       1
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "upright"
EntityAlpha characterupright,  1
EntityAlpha characterup,       0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "right"
EntityAlpha characterright,    1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "downright"
EntityAlpha characterdownright,1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "down"
EntityAlpha characterdown,     1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "downleft"
EntityAlpha characterdownleft, 1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "left"
EntityAlpha characterleft,     1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterupleft,   0
Case "upleft"
EntityAlpha characterupleft,   1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
End Select
End Function

Function Gravity()
TranslateEntity character,0,-1.2,0
End Function















; 
</textarea> <br><br></td></tr></table><br>
<a name="990559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fox95871</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is an old thread, but I wanted to dig it up because I just fixed a major bug with it! If anyone has problems with EntityAlpha and the render tween not getting along, try the code at the label .billssuggestion<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;setup
Graphics3D 640,480,32,1
SetBuffer BackBuffer()
SeedRnd MilliSecs()
Const fps=30
blitz=LoadFont("blitz",10,1,0,0)
SetFont blitz
Color 100,100,100
ClearTextureFilters
period=1000/fps
time=MilliSecs()-period
elapsed%=0
ticks%=0
tween#=0
rt%=0

;character variables
Global characterposition#=0
Global characterheight#=10
Global characterdistance#=0
Global facing$="right"
Global facing2$=""
Global walking$=""
Global walking2$=""
Global running$=""
Global running2$=""
Global positionspeed#=0
Global heightspeed#=0
Global distancespeed#=0

;collision variables
Global charactercollider%=1
Global levelcollider%=2
Global collisionmethod%=2
;1=sphere
;2=mesh
;3=box
Global collisionresponse%=3
;1=stick
;2=slide
;3=slide but not down 

;camera creation
Global camera=CreateCamera()
CameraZoom camera,1.6
RotateEntity camera,10,0,0
PositionEntity camera,0,10,-30
CameraClsColor camera,0,0,0

;light creation
Global light=CreateLight(1)
RotateEntity light,40,-70,0

;ground creation
Global ground=CreateCube()
EntityColor ground,90,80,50
EntityType ground,levelcollider
ScaleMesh ground,20,1,10
NameEntity ground,"ground"

;character creation
;/character
Global character=CreateCube()
EntityType character,charactercollider
EntityRadius character,.05,2
EntityColor character,30,40,70
ScaleEntity character,1,1.5,1
arrow=CreateCone()
ScaleMesh arrow,.5,.5,.5
RotateMesh arrow,90,0,0
PositionMesh arrow,0,0,2
AddMesh arrow,character
FreeEntity arrow
EntityAlpha character,0
;/eight meshes facing different ways
Global characterup=CopyEntity(character,character)
Global characterupright=CopyEntity(character,character)
RotateEntity characterupright,0,-45,0
Global characterright=CopyEntity(character,character)
RotateEntity characterright,0,-90,0
Global characterdownright=CopyEntity(character,character)
RotateEntity characterdownright,0,-135,0
Global characterdown=CopyEntity(character,character)
RotateEntity characterdown,0,-180,0
Global characterdownleft=CopyEntity(character,character)
RotateEntity characterdownleft,0,-225,0
Global characterleft=CopyEntity(character,character)
RotateEntity characterleft,0,-270,0
Global characterupleft=CopyEntity(character,character)
RotateEntity characterupleft,0,-315,0
PositionEntity character,characterposition,characterheight,characterdistance
;/initial facing, based on facing$ in character variables
If facing="up"        EntityAlpha characterup,       1
If facing="upright"   EntityAlpha characterupright,  1
If facing="right"     EntityAlpha characterright,    1
If facing="downright" EntityAlpha characterdownright,1
If facing="down"      EntityAlpha characterdown,     1
If facing="downleft"  EntityAlpha characterdownleft, 1
If facing="left"      EntityAlpha characterleft,     1
If facing="upleft"    EntityAlpha characterupleft,   1

;collision setup
Collisions charactercollider,levelcollider,collisionmethod,collisionresponse

;moving variables
Global runstate$=""

;jumping variables
Global ascentspeed#=0

;timer variables
Global timenow=0
Global starttime=0
Global timerstate$=""

While Not KeyHit(1)
Cls
Repeat
elapsed=MilliSecs()-time
Until elapsed
ticks=elapsed/period
tween#=Float(elapsed Mod period)/Float(period)
For rt=1 To ticks
time=time+period

.billssuggestion
;bills suggestion
If rt=ticks
FacingEffects()
CaptureWorld
EndIf

;blitz3d functions
FacingAndMovingControlActivator()
WalkingEffects()
RunningEffects()
Gravity()

UpdateWorld
Next
RenderWorld tween

;blitz2d functions
Text 0,0,"Controls: up down z x and left"

Flip
Wend
End

;removes control while in midair
Function FacingAndMovingControlActivator()
If EntityCollided(character,levelcollider)&gt;0
FacingAndMovingControl()
EndIf
End Function

;nate's code
Function FacingAndMovingControl()
;/walking
If     KeyDown(200):facing="up"    :walking= "up"
ElseIf KeyDown(208):facing="down"  :walking= "down"
Else               :facing=""      :walking= ""     :running=""
EndIf
If KeyDown(45)     :facing2="right":walking2="right"
ElseIf KeyDown(44) :facing2="left" :walking2="left"
Else               :facing2=""     :walking2=""     :running2=""
EndIf
;/running
If     KeyDown(200) And KeyDown(203):facing= "up"   :running= "up"    :walking=""
ElseIf KeyDown(208) And KeyDown(203):facing= "down" :running= "down"  :walking=""
Else                                                 running=""
EndIf
If     KeyDown(45)  And KeyDown(203):facing2="right":running2="right" :walking2=""
ElseIf KeyDown(44)  And KeyDown(203):facing2="left" :running2="left"  :walking2=""
Else                                                 running2=""
EndIf
;/prevariables 
walking=walking$+walking2$
running=running$+running2$
facing=facing$+facing2$
End Function

;move the character at normal speed
Function WalkingEffects()
Select walking
Case "up":distancespeed=+.2:positionspeed=0
Case "upright":distancespeed=+.2:positionspeed=+.2
Case "right":positionspeed=+.2:distancespeed=0
Case "downright":distancespeed=-.2:positionspeed=+.2
Case "down":distancespeed=-.2:positionspeed=0
Case "downleft":distancespeed=-.2:positionspeed=-.2
Case "left":positionspeed=-.2:distancespeed=0
Case "upleft":distancespeed=+.2:positionspeed=-.2
Case "":positionspeed=0:heightspeed=0:distancespeed=0
End Select
TranslateEntity character,positionspeed,heightspeed,distancespeed
End Function

;move the character a little faster if run is being held
Function RunningEffects()
Select running
Case "up":distancespeed=+.4:positionspeed=0
Case "upright":distancespeed=+.4:positionspeed=+.4
Case "right":positionspeed=+.4:distancespeed=0
Case "downright":distancespeed=-.4:positionspeed=+.4
Case "down":distancespeed=-.4:positionspeed=0
Case "downleft":distancespeed=-.4:positionspeed=-.4
Case "left":positionspeed=-.4:distancespeed=0
Case "upleft":distancespeed=+.4:positionspeed=-.4
Case "":positionspeed=0:heightspeed=0:distancespeed=0
End Select
TranslateEntity character,positionspeed,heightspeed,distancespeed
End Function

;hide 7 meshes and show 1 depending on the direction chosen. other
;methods just rotate a mesh, causing visible midpoint frames
Function FacingEffects()
Select facing
Case "up"
EntityAlpha characterup,       1
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "upright"
EntityAlpha characterupright,  1
EntityAlpha characterup,       0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "right"
EntityAlpha characterright,    1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "downright"
EntityAlpha characterdownright,1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "down"
EntityAlpha characterdown,     1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "downleft"
EntityAlpha characterdownleft, 1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterleft,     0
EntityAlpha characterupleft,   0
Case "left"
EntityAlpha characterleft,     1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterupleft,   0
Case "upleft"
EntityAlpha characterupleft,   1
EntityAlpha characterup,       0
EntityAlpha characterupright,  0
EntityAlpha characterright,    0
EntityAlpha characterdownright,0
EntityAlpha characterdown,     0
EntityAlpha characterdownleft, 0
EntityAlpha characterleft,     0
End Select
End Function

Function Gravity()
TranslateEntity character,0,-1.2,0
End Function















;
</textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
