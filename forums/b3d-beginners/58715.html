<!DOCTYPE html><html lang="en" ><head ><title >Film Grain</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Film Grain</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Film Grain</a><br><br>
<a name="653201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> For a film grain effect, I could make an animated texture and apply it to the camera, right? If so, how would I go about applying it to the camera? <br><br></td></tr></table><br>
<a name="653207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nicstt</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> position the texture in front of the camera using the camera cords <br><br></td></tr></table><br>
<a name="653212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >n8r2k</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey IKG, just curiuos, what kind of project are you working on? <br><br></td></tr></table><br>
<a name="653243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh heh. Can't say yet. Right now I'm just trying to learn some new techniques. Thanks, Nicoust.<br><br>Edit: What if the player chooses 1024x480 instead of 800x600? How would I make the sprite adjust to the new camera resolution? In fact, how would I even do that with everything else 2D (inventory, etc.) Sorry to go off topic but I need to know =/ <br><br></td></tr></table><br>
<a name="653253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> But aren't when you're on 3d mode, all distances in worldspace, so that the resolution has no effect on it ?<br><br>The best thing to do for the grain effect would be creating a box, with the camera as a parent.<br>box = CreateBox(camera)<br>then moving it a bit further away from the camera with MoveEntity.<br>If you move the camera, the box should stay in front of it.<br><br>Later on, replace the box with a quad, using CreateMesh and Addvertex. <br><br></td></tr></table><br>
<a name="653271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Er didn't really understand your post, Bram. You're saying that anything I place in 2D will automatically adjust in different resolutions? <br><br></td></tr></table><br>
<a name="653322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe 3D is allways scaled the same way, independant from the resolution selected. <br>So "2D-in-3D" (using a texture) will be rescaled automatically.<br>Textures should be allways square and have a width 2^something, like 64x64,128x128,256x256,512x512 etc.<br>If an texture image has a different size, it will be resized at load. <br><br></td></tr></table><br>
<a name="653329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Baystep Productions</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> sprites work better.<br><br>Create a sprite parented to the camera, move it about 1 unit forward, add a simple 64x64 static texture and jsut update the UV's on the sprite to random values like so.<br><br>PositionTexture static,Rand(1,64),Rand(1,64)<br><br>And that will work to! <br><br></td></tr></table><br>
<a name="653529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very large texture fills, textures filling 70+% of the screen, take a huge performance hit on Blitz. A full screen textured sprite will scale according to screen but be quite a slowdown, which on older cards could be a killer. The alternative is to randomly 2D draw grain particles on the backbuffer. You'd only need to draw to some 5% or the screen which should be a lot faster. If you want every pixel to have a variation, like a random alpha on a black texture, the sprite method might well be no slower than full-screen per pixel processing. <br><br></td></tr></table><br>
<a name="653641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suppose drawing random dots on the screen would be more natural than a sprite. <br><br></td></tr></table><br>
<a name="653646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you could draw a masked 2D imagestrip on top of the rendered scene with black and white noise. <br><br></td></tr></table><br>
<a name="653670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now that I think of it, I'm probably just going to go for a "grainy" effect. I'll either draw it randomly by code, or load an animated sprite. <br><br>Thanks all! <br><br></td></tr></table><br>
<a name="653801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> What could work is something I tried with a parallax starfield. Rather than one big sprite with noise, create a few dozen smaller sprites with randomised noise and position them fairly randomly over the screen each frame. This avoids the large-texture problem, keeps it 3D which is faster than 2D in many cases, and scales with resolution. <br><br></td></tr></table><br>
<a name="655721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> So you say when I cover the screen with lots of small sprites this ill be faster than to cover it with one big sprite?<br><br>Maybe it would also be faster to use blendmode 3 (Add) instead of alpha for the texture ?<br>I mostly like the PositionTexture solution. It allows a lot of fx, such as a nightview google greenish grain/noise. <br><br></td></tr></table><br>
<a name="655798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's what I've found. I first noticed then when running my program on a lowly 266 MHz K6, and it was really, really slow, when commenting out various things I removed the sphere-with-texture backdrop and suddenly increased the speed 5 to 10 times. First I thought it the sphere complexity (though only CreateSphere(12) in resolution) but replacing the backdrop with a full-screen quad had the same problem. I then tried a half-size quad and the spped was back up to fast and smooth.<br><br>I raised this with Mustang in the atmosphere thread and he found similar slowdowns, but of course it was rendering a lot more pixels. So it could have been on this old GPU (ATi Rage I think) there was a dramatic fillrate bottleneck that isn't as present on newer GPUs. A quick test program shows increasing backdrop fill doesn't have this dramatic drop-off threshold I experienced on the slower PC, but has a proportional change in render speed relative to quad size, whether that's made of multiple quads or one big one.<br><br>It might not be an issue if you don't care to support anything older than maybe a GeForce 2/3. <br><br></td></tr></table><br>
<a name="655800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://blitzbasic.com/codearcs/codearcs.php?code=1183" target="_blank">http://blitzbasic.com/codearcs/codearcs.php?code=1183</a> <br><br></td></tr></table><br>
<a name="655814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, btw, when positioning the texture:<br><pre class=code>
PositionTexture static,Rand(1,64),Rand(1,64)
</pre><br><br>Won't do anything, unless you've set your uv co-ords weird.<br><br><pre class=code>
PositionTexture static,Rand(0,1),Rand(0,1)
</pre><br><br>might be better ;) <br><br></td></tr></table><br>
<a name="655828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jams</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> actually that might be alot worse since Rand() returns an integer :P<br><br>Might be better to use Rnd(), returning a float..<br><br>hoho <br><br></td></tr></table><br>
<a name="655977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats what i get for copy and pasting a guess ;o) <br><br></td></tr></table><br>
<a name="656204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>CreateSphere(12)<br> <br></div><br><br>Is it me or would that create a super-high res mesh? <br><br></td></tr></table><br>
<a name="656342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jams</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> 12 segments for a sphere isn't that much, i believe the default is 8 - i usually use 32 when a nice smooth sphere is needed.. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
