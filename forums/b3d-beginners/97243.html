<!DOCTYPE html><html lang="en" ><head ><title >Problem with scaling?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Problem with scaling?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Problem with scaling?</a><br><br>
<a name="1128420"></a>

<a name="1128423"></a>

<a name="1128424"></a>

<a name="1128432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, Ross. I'm having trouble with the scale code I created...<br><br><br>What I need it to do is retain the object's size, BUT when u hold down CTRL + Shift + A, depending on if u hold down A (which is positive), or S (which is negative), then it scales it by whatever value is in the scale_selected parameters, as long as the value is &gt; 0.0, and &lt;= 0.5...<br><br><br><br>Here's the code: <br><br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Function check_control_keys()

	If KeyDown(29) Or KeyDown(157) ; IF either LEFT or RIGHT CTRL held down
		If KeyHit(46) Then ; IF C key pressed
			copy_selected()
		End If
	
		If KeyHit(30) Then ; IF A key pressed
			select_all()
		End If
		
		If KeyDown(42) Or KeyDown(54) ;IF either LEFT or RIGHT SHIFT held down
		
			If KeyDown(30) Then ;IF Shift + A key held down
					scale# = scale_selected(1,0.1)
			EndIf
		
		EndIf
		
	Else
	
		If KeyDown(200) Then
			move_selected(0,0,0.1) ; Move along +Z aixs
		End If
		If KeyDown(208) Then
			move_selected(0,0,-0.1) ; Move along -Z axis
		End If
		If KeyDown(203) Then
			move_selected(-0.1,0,0) ; Move along +X axis
		End If
		If KeyDown(205) Then
			move_selected(0.1,0,0) ; Move along -X axis
		End If
		If KeyDown(30) Then
			move_selected(0,0.1,0) ; Move along +Y axis
		End If
		If KeyDown(44) Then
			move_selected(0,-0.1,0) ; Move along +Y axis
		End If
		
		If KeyHit(211) Then
			delete_selected
		End If
	End If
	
	FlushKeys()
	
End Function


Function scale_selected#(scale_positive=1, newscale#=0.1)
	
	If newscale# = 0.0 Then Return
	If newscale# &gt; 0.5 Then Return

		For c.obj = Each obj
		
			old_x_scale# = MeshWidth#(c\mesh)
			old_y_scale# = MeshHeight#(c\mesh)
			old_z_scale# = MeshDepth#(c\mesh)
			
			oldscale# = scale#
	
			Select scale_positive
					
				Case 0
				
					scale# = scale# - newscale#
				
				Case 1
								
					scale# = scale# + newscale#
						
			End Select
			
			final_xscale# = scale#
			final_yscale# = scale#
			final_zscale# = scale#

			If scale#&lt;&gt;oldscale# Then ScaleEntity c\mesh,final_xscale#,final_yscale#,final_zscale#
							
		Next
		
	Return scale#
	
End Function</textarea><br><br><br>Thanks, Ross! :)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128437"></a>

<a name="1128438"></a>

<a name="1128439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, fixed the ABOVE problem. Having another problem...<br><br><br>It seems when u make one copy of an object, then scale the object with Ctrl + Shift + A or Ctrl + Shift + S, then make another copy, then try to scale it, the objects dont take into account the new position of an object when it is scaled...<br><br><br><br>Here's the problem: <br><br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Function scale_selected#(scale_positive=1, newscale#=0.1)
	
	If newscale# = 0.0 Then Return
	If newscale# &gt; 0.5 Then Return

	For c.obj = Each obj	
	
			If scale# &lt; -999.99 Then scale# = -999.99
			If scale# &gt; 999.99 Then scale# = 999.99
		
	Select scale_positive

		Case 0		
		
			scale# = scale# - newscale#
			
		Case 1
			
			scale# = scale# + newscale#
		
	End Select
	
			SmoothScale(c\mesh, scale#, 12.0,12.0)
		
	Next
		
	Return scale#
	
End Function

Function SmoothScale(Entity,Current#,Goal#,Smooth#)
Current#=Current#+(Goal#-Current#)/Smooth#	
If Current# &lt; -999.99 Then Current# = -999.99
If Current# &gt; 999.99 Then Current# = 999.99
ScaleEntity(Entity,Current#,Current#,Current#)
End Function</textarea><br><br><br><br>Here's the code: <br><br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Const graphics_width = 800
Const graphics_height = 600
Graphics3D graphics_width,graphics_height,0,2
SetBuffer BackBuffer()

	;mouse modes are:
	; 0 = nothing
	; 1 = in
	; 2 = held
	; 3 = out
	; 4 = click
	; 5 = just this loop being held in
	Const mouse_in = 1
	Const mouse_held = 2
	Const mouse_out = 3
	Const mouse_click = 4
	Const mouse_just_held = 5
	
	;left mouse button
	Global mouse_1_mode = 0
	Global mouse_1_hold_time = 150 ; length of time for mouse to be considered held down
	Global mouse_1_hold_timer
	
	;right mouse button
	Global mouse_2_mode = 0
	Global mouse_2_hold_time = 150 ; length of time for mouse to be considered held down
	Global mouse_2_hold_timer
	
	; middle mouse button
	Global mouse_3_mode = 0
	Global mouse_3_hold_time = 5 ; length of time for mouse to be considered held down
	Global mouse_3_hold_timer
; END

Type obj

	Field selected
	Field mesh
	
	Field red
	Field green
	Field blue
	Field alpha#
	Field shininess#
	
End Type

Include "b3dfile.bb"

; Create a floor and texture, to give reference
ground = CreatePlane()
PositionEntity ground,0,-1,0
Global ground_tex = CreateTexture(256,256,8)
SetBuffer TextureBuffer(ground_tex)
Color 0,0,0
Rect 0,0,256,256
Color 100,100,255
Rect 1,1,254,254
SetBuffer BackBuffer()
EntityTexture ground,ground_tex


camera = CreateCamera()
CameraRange camera,.1,50000

; Variables for camera mouse moving.
Global mouse_down_1 = 0
Global mouse_x_reset
Global mouse_y_reset

Global c_surfs

; create some spheres
For loop = 1 To 2

	c.obj = New obj
	
	c\mesh = CreateSphere()
	size# = Rnd(1,3)
	ScaleMesh c\mesh,size,size,size
	c\red = Rand(0,255)
	c\green = Rand(0,255)
	c\blue = Rand(0,255)
	EntityColor c\mesh,c\red,c\green,c\blue

	object_count = object_count + 1

	PositionEntity c\mesh,Rnd(-20,20),Rnd(0,0),Rnd(3,50)
	
	EntityPickMode c\mesh,2

	c_surfs=CountSurfaces(c\mesh)

Next


Dim c_surf(c_surfs)
Dim c_brush(c_surfs)
Dim c_tex(c_surfs)
Dim c_tex_name$(c_surfs)


Global scale#


Global temp_x_offset
Global temp_y_offset
Global temp_z_offset


While Not KeyHit(1)


	Update_Thundros_Editor%()


Wend

End

Function Update_Thundros_Editor%()

	Cls
	If mouse_down_1&gt;0 Then HidePointer()
	If mouse_down_1=0 Then ShowPointer()
	process_mouse_hits()
	camera_move()
	check_control_keys()
	check_mouse()
	UpdateWorld
	RenderWorld

	Text 0,0,"Basic Editor.                                                   Number of Objects:"+object_count
	Text 0,12,"ARROW KEYS,A &amp; D to move selected objects/raise lower"
	Text 0,24,"HOLD LEFT CLICK to control camera. WASD/ARROW KEYS to move"
	Text 0,36,"CTRL A to select all"
	Text 0,48,"CTRL C to copy selected"
	Text 0,60,"Left click to select one object"
	Text 0,72,"SHIFT Left click to select multiple"
	Text 0,84,"CTRL left click to deselect an item"
	Text 0,96,"scale#: "+scale#
		
	Flip
	Color 255,255,255

End Function

Function camera_move()

	If MouseDown(1) Then
		If mouse_down_1 = 0 Then
			mouse_down_1 = 1
			mouse_x_reset = MouseX()
			mouse_y_reset = MouseY()
			MoveMouse mouse_x_reset,mouse_y_reset
		End If
		If KeyDown(17) Or KeyDown(200) Then
			MoveEntity camera,0,0,0.1
		End If
		If KeyDown(31) Or KeyDown(208) Then
			MoveEntity camera,0,0,-0.1
		End If
		If KeyDown(30) Or KeyDown(203) Then
			MoveEntity camera,-0.1,0,0
		End If
		If KeyDown(32) Or KeyDown(205) Then
			MoveEntity camera,0.1,0,0
		End If
		
		pitch# = EntityPitch#(camera,True)+(MouseYSpeed()*0.2)
		yaw#   = EntityYaw#(camera,True)+(MouseXSpeed()*-0.2)
		
		If pitch# &lt; -85.0 Then pitch# = -85.0
		If pitch# &gt; 85.0 Then pitch# = 85.0
		
		If yaw# &lt; -359.0 Then yaw# = 0.0
		If yaw# &gt; 359.0 Then yaw# = 0.0
		
		RotateEntity camera,pitch#,yaw#,0
		MoveMouse mouse_x_reset, mouse_y_reset
	Else
		mouse_down_1 = 0
	End If


End Function

Function check_control_keys()

	If KeyDown(29) Or KeyDown(157) ; IF either LEFT or RIGHT CTRL held down
		If KeyHit(46) Then ; IF C key pressed
			copy_selected()
		End If
	
		If KeyHit(30) Then ; IF A key pressed
			select_all()
		End If
		
		If KeyDown(42) Or KeyDown(54) ;IF either LEFT or RIGHT SHIFT held down
		
			If KeyDown(30) Then ;IF Shift + A key held down
					scale# = scale_selected#(1,0.01)
			EndIf
			
			If KeyDown(31) Then ;IF Shift + S key held down
					scale# = scale_selected#(0,0.01)
			EndIf
		
		EndIf
		
	Else
	
		If KeyDown(200) Then
			move_selected(0,0,0.1) ; Move along +Z aixs
		End If
		If KeyDown(208) Then
			move_selected(0,0,-0.1) ; Move along -Z axis
		End If
		If KeyDown(203) Then
			move_selected(-0.1,0,0) ; Move along +X axis
		End If
		If KeyDown(205) Then
			move_selected(0.1,0,0) ; Move along -X axis
		End If
		If KeyDown(30) Then
			move_selected(0,0.1,0) ; Move along +Y axis
		End If
		If KeyDown(44) Then
			move_selected(0,-0.1,0) ; Move along +Y axis
		End If
		
		If KeyHit(211) Then
			delete_selected
		End If
	End If
	
	FlushKeys()
	
End Function

Function delete_selected()

	For c.obj = Each obj
	
		If c\selected = 1 Then
			FreeEntity c\mesh
			Delete c.obj
			object_count = object_count -1
		End If
		
	Next
	
End Function

Function select_all()

	For c.obj = Each obj
	
		c\selected = 1
		select_object(c.obj)
		
	Next
	
End Function

; This function doesn't use a FOR/NEXT loop for cycle through the type objects. This is because I don't want to be creating new type objects and looping through the newly created ones.
; It also gives me the ability to deselected the copied entities and select the newly created ones.
Function copy_selected()

	temp_count = object_count ; this is because the copy function will add to the object count. Since we don't want to loop through newly copied entities, this stops it reading the new entities.

	If temp_count &gt; 0 Then
		
		temp_counter = 0
		
		c.obj = First obj
	
		Repeat
	
			temp_counter = temp_counter + 1

			If c\selected = 1 Then
				create_new_copy(c.obj,1,0,0,1)
				deselect_object(c.obj)
			End If

			If c.obj &lt;&gt; Last obj Then ; move forward to the next object, only if not current on the last object
				c = After c
			End If

		Until temp_counter = temp_count
		
	End If


End Function


; creates a copy and positions it away from the original. Uses the originals width to space, mulitplied by the provided values
Function create_new_copy(temp.obj,offset_x#,offset_y#,offset_z#,selected = 0)

	new_c.obj = New obj
	new_c\selected = 0
	new_c\mesh = CopyEntity (temp\mesh)
	temp_x_offset = (MeshWidth(new_c\mesh) + (MeshWidth(new_c\mesh)*0.1)) * offset_x
	temp_y_offset = (MeshHeight(new_c\mesh) + (MeshHeight(new_c\mesh)*0.1)) * offset_y
	temp_z_offset = (MeshDepth(new_c\mesh) + (MeshDepth(new_c\mesh)*0.1)) * offset_z
	
	DebugLog(temp_y_offset)
	
	PositionEntity new_c\mesh,EntityX(new_c\mesh,True)+temp_x_offset, EntityY(new_c\mesh,True)+temp_y_offset, EntityZ(new_c\mesh,True)+temp_z_offset

	new_c\red = temp\red
	new_c\green = temp\green
	new_c\blue = temp\blue
	EntityColor new_c\mesh,new_c\red,new_c\green,new_c\blue
	
	If selected = 1 Then
		select_object(new_c.obj)
	End If
	
	object_count = object_count + 1
	
End Function

Function move_selected(x#,y#,z#)

	For c.obj = Each obj
	
		If c\selected = 1 Then
		
			MoveEntity c\mesh,x,y,z
			
		End If
		
	Next
	
End Function

Function scale_selected#(scale_positive=1, newscale#=0.1)
	
	If newscale# = 0.0 Then Return
	If newscale# &gt; 0.5 Then Return
	

	
	For c.obj = Each obj
	
	
	
			If scale# &lt; -999.99 Then scale# = -999.99
			If scale# &gt; 999.99 Then scale# = 999.99
	
	
	
	Select scale_positive
	
	

		Case 0
		
		
		
			scale# = scale# - newscale#
			
			
			
		Case 1
		
		
		
			scale# = scale# + newscale#
			
			
			
	End Select
	


			SmoothScale(c\mesh, scale#, 12.0,12.0)

			
			
	Next

		
	Return scale#
	
End Function

Function SmoothScale(Entity,Current#,Goal#,Smooth#)
Current#=Current#+(Goal#-Current#)/Smooth#	
If Current# &lt; -999.99 Then Current# = -999.99
If Current# &gt; 999.99 Then Current# = 999.99
ScaleEntity(Entity,Current#,Current#,Current#)
End Function

Function check_mouse()

	If mouse_1_mode = mouse_click Then
	
		CameraPick(camera,MouseX(),MouseY())

		If KeyDown(29) Or KeyDown(157) Then ; IF LEFT or RIGHT CTRL key is held down (remove from selection)

			remove_entity(PickedEntity())

		ElseIf KeyDown(42) Or KeyDown(54) Then
		
			add_to_selection(PickedEntity())
		
		Else
		
			add_only_to_selection(PickedEntity())
			
		End If
		
	End If

End Function

Function remove_entity(entity)

	For c.obj = Each obj
	
		If c\selected = 1 Then
			If c\mesh = entity Then
				deselect_object(c.obj)
			End If
		End If
		
	Next
	
End Function


Function add_to_selection(entity)

	For c.obj = Each obj
	
		If c\mesh = entity Then
			If c\selected = 1 Then
				Return
			Else
				select_object(c.obj)
			End If
		End If
		
	Next

End Function


Function add_only_to_selection(entity)

	remove_all_selections()

	For c.obj = Each obj
	
		If c\mesh = entity Then

			select_object(c.obj)
			
		End If
		
	Next

End Function


Function remove_all_selections()

	For c.obj = Each obj
	
		deselect_object(c.obj)
		
	Next
	
End Function


Function select_object(temp.obj)

	temp\alpha = 0.5
	EntityAlpha temp\mesh,temp\alpha
	temp\selected = 1
	
End Function


Function deselect_object(temp.obj)

	temp\alpha = 1
	EntityAlpha temp\mesh,temp\alpha
	temp\selected = 0

End Function



Function process_mouse_hits()

	If mouse_1_mode = mouse_just_held Then
		mouse_1_mode = mouse_held
	End If
	If mouse_2_mode = mouse_just_held Then
		mouse_2_mode = mouse_held
	End If
	If mouse_3_mode = mouse_just_held Then
		mouse_3_mode = mouse_held
	End If

	If MouseDown(1) Then
		If mouse_1_mode = 0 Then
			mouse_1_mode = mouse_in
			mouse_1_hold_timer = MilliSecs()
		ElseIf mouse_1_mode = mouse_in Then
			If MilliSecs() &gt; mouse_1_hold_timer+mouse_1_hold_time Then
				mouse_1_mode = mouse_just_held
			End If
		End If
	Else
		If mouse_1_mode = mouse_click Or mouse_1_mode = mouse_out Then ; check for click first, as other may set click below
			mouse_1_mode = 0
		ElseIf mouse_1_mode = mouse_in Then
			mouse_1_mode = mouse_click
		ElseIf mouse_1_mode = mouse_held Then
			mouse_1_mode = mouse_out
		End If
	End If


	If MouseDown(2) Then
		If mouse_2_mode = 0 Then
			mouse_2_mode = mouse_in
			mouse_2_hold_timer = MilliSecs()
		ElseIf mouse_2_mode = mouse_in Then
			If MilliSecs() &gt; mouse_2_hold_timer+mouse_2_hold_time Then
				mouse_2_mode = mouse_just_held
			End If
		End If
	Else
		If mouse_2_mode = mouse_click Or mouse_2_mode = mouse_out Then ; check for click first, as other may set click below
			mouse_2_mode = 0
		ElseIf mouse_2_mode = mouse_in Then
			mouse_2_mode = mouse_click
		ElseIf mouse_2_mode = mouse_held Then
			mouse_2_mode = mouse_out
		End If
	End If

	If MouseDown(3) Then
		If mouse_3_mode = 0 Then
			mouse_3_mode = mouse_in
			mouse_3_hold_timer = MilliSecs()
		ElseIf mouse_3_mode = mouse_in Then
			If MilliSecs() &gt; mouse_3_hold_timer+mouse_3_hold_time Then
				mouse_3_mode = mouse_just_held
			End If
		End If
	Else
		If mouse_3_mode = mouse_click Or mouse_3_mode = mouse_out Then ; check for click first, as other may set click below
			mouse_3_mode = 0
		ElseIf mouse_3_mode = mouse_in Then
			mouse_3_mode = mouse_click
		ElseIf mouse_3_mode = mouse_held Then
			mouse_3_mode = mouse_out
		End If
	End If

End Function

Function Save_File(f$)


			DeleteFile f$
			If FileType(f$) = 0 Then savefile = WriteFile("level.dat")
			If FileType(f$) = 1 Then savefile = OpenFile(f$)
			If FileType("meshes\")&lt;&gt;2 Then CreateDir("meshes\")
		

		
			;Get EACH object's ID / X/Y/Z Position/Rotation/Scale
			


				all_objects_count = object_count
			

			
				WriteLine(savefile, all_objects_count)


			; Open up the directory, and assign the handle to myDir 
			myDir=ReadDir(CurrentDir$()+"\meshes\") 
			; Let's loop forever until we run out of files/folders to list! 
			Repeat 
			; Assign the next entry in the folder to file$ 
			file$=NextFile$(myDir) 
			If file$&lt;&gt;"" And file$&lt;&gt;"."And file$&lt;&gt;".." Then
					;Delete ALL old B3D files
					If  getextension$(file$)=".b3d" Then DeleteFile file$
			EndIf
			; If there isn't another one, let's exit this loop 
			If file$="" Then Exit
			Forever
			
			
					
For c.obj = Each obj								
				
				
				
				;Save the ACTUAL object here
				
				
				
				objid = c\mesh
				
				
				;If FileType("meshes\"+objid+".b3d")=1 Then DeleteFile "meshes\"+objid+".b3d"
				

				
				red   = BP_GetEntityColorR%(c\mesh)
				green = BP_GetEntityColorG%(c\mesh)
				blue  = BP_GetEntityColorB%(c\mesh)
				alpha# = BP_GetEntityAlpha#(c\mesh)
				shininess# = BP_GetEntityShine#(c\mesh)



				dif=red*(256*256)+green*(256)+blue				

				
				
				;IF mesh is NOT imported



				If Not mesh_imported Then
				
				
				
						;Write the B3D file
				
				
				
						WriteBB3D("meshes\"+objid+".b3d", c\mesh) ;,dif)
						
						
						
				;OTHERWISE, IF the mesh IS imported
						
						
						
				ElseIf mesh_imported Then
				
				
				
						;If the mesh file DOES exist
				
				
				
						If FileType("meshes\"+imported$+".b3d")=1 Then
						
						
						
						
								;Grab Imported location and make a copy of the file in "meshes\" dir
								
								
								
								
									CopyFile(import_location$, CurrentDir$()+"\meshes\")
								
								
								
								
						EndIf
						
						
						
				EndIf
				
											
		
				
				WriteLine(savefile, objid)
				


				WriteLine(savefile, red)
				WriteLine(savefile, green)
				WriteLine(savefile, blue)
				WriteLine(savefile, alpha#)
				WriteLine(savefile, shininess#)

			
				
				WriteLine(savefile, EntityX#(c\mesh, True))
				WriteLine(savefile, EntityY#(c\mesh, True))
				WriteLine(savefile, EntityZ#(c\mesh, True))
				
									

				
				WriteLine(savefile, EntityPitch#(c\mesh, True))
				WriteLine(savefile, EntityYaw#(c\mesh, True))
				WriteLine(savefile, EntityRoll#(c\mesh, True))
				

				
				
				WriteLine(savefile, MeshWidth#(c\mesh))
				WriteLine(savefile, MeshHeight#(c\mesh))
				WriteLine(savefile, MeshDepth#(c\mesh))
			
			
			
Next
			
			
			
				CloseFile savefile
				
				
				
				Return savefile
			
			
			
End Function



Function Open_File(f$)



			If FileType(f$) = 0 Then loadfile = 0
			If FileType(f$) = 1 Then loadfile = ReadFile(f$)
			

			

					For c.obj = Each obj
					
					
					
							select_all()
					
					
		
							delete_selected()
							
							

							object_count = 0
							
							
							
					Next
		

		
					;Get EACH object's ID / X/Y/Z Position/Rotation/Scale


					
					all_objects_count = ReadLine(loadfile)

					
					
					While Not Eof(loadfile)
			
					
					
					objid = ReadLine(loadfile)
					
					
					
					red  	          = ReadLine(loadfile)
					green             = ReadLine(loadfile)
					blue              = ReadLine(loadfile)
					alpha#            = ReadLine(loadfile)
					shininess#        = ReadLine(loadfile)

				
					
					objpositionx#     = ReadLine(loadfile)
					objpositiony#     = ReadLine(loadfile)
					objpositionz#     = ReadLine(loadfile)
					
									
					
					objpitch#         = ReadLine(loadfile)
					objyaw#           = ReadLine(loadfile)
					objroll#          = ReadLine(loadfile)
					
					
					
					objwidth#         = ReadLine(loadfile)
					objheight#        = ReadLine(loadfile)
					objdepth#         = ReadLine(loadfile)
					
					
					
					;Load ALL objects here
					
					
					
					c.obj = New obj
					
					
					
					c\mesh = objid
					
					
					
					api_MessageBox(0,"meshes\"+objid+".b3d","meshes\"+objid+".b3d",0)
									
					
					
					objid = LoadAnimMesh("meshes\"+objid+".b3d")
					
					
					
					;objid = LoadAnimMesh("meshes\dwarf1.x")
					
					
					
							;APPLY THE objid of the object, to c\mesh
					

					
							c\mesh = objid

					

							Update_Thundros_Editor%()



							c\alpha# = alpha#
							
							
							
							c\red = red
							
							
							
							c\green = green
							
							
							
							c\blue = blue
						
						
						
							c\shininess# = shininess#
							
							
							
							object_count = all_objects_count

				
					
							PositionEntity objid, objpositionx#, objpositiony#, objpositionz#
					
					
					
							RotateEntity objid, objpitch#, objyaw#, objroll#
					
					
					
							ScaleEntity objid, objwidth#, objheight#, objdepth#
					
					
					
							EntityColor objid, red, green, blue

					
					
							EntityAlpha objid, alpha#
					
					
					
							EntityShininess objid, shininess#



							EntityPickMode objid,2,1
							


				Wend

			
			
					CloseFile loadfile
			
			
			
			Return loadfile
			
			
			
End Function

Function getfilename$(filename$) ; Returns the filename and extension
	lastdir = 1
	For i=1 To Len(filename$)
		If Mid$(filename$,i,1) = "\" Then Lastdir = i
	Next
	If Lastdir &gt; 1 Then Lastdir = Lastdir + 1
	For i=Lastdir To Len(filename$)
		a$ = a$ + Mid(filename$,i,1)
	Next
	Return a$
End Function



Function getextension$(filename$) ; Returns the extension minus the .
	lastdir = 1
	For i=1 To Len(filename$)
		If Mid$(filename$,i,1) = "." Then Lastdir = i
	Next
	If Lastdir &gt; 1 Then Lastdir = Lastdir + 1
	For i=Lastdir To Len(filename$)
		a$ = a$ + Mid(filename$,i,1)
	Next
	Return "."+a$
End Function



Function getdirectory$(filename$) ; Returns the complete directory including drive
	lastdir = 1
	For i=1 To Len(filename$)
		If Mid$(filename$,i,1) = "\" Then Lastdir = i
	Next
	For i=1 To Lastdir
		a$ = a$ + Mid(filename$,i,1)
	Next
	Return a$
End Function

Function WriteBB3D( f_name$,mesh )

	file=WriteFile( f_name$ )

	b3dSetFile( file )
	
	b3dBeginChunk( "BB3D" )
		b3dwriteint( 1 )	;version

		b3dBeginChunk( "TEXS" ) ; list all textures used by the mesh
		For i=1 To c_surfs
			b3dWriteString( c_tex_name$(i) ) 	;texture file
			b3dwriteint( 1 )					;flags
			b3dwriteint( 2 )					;blend
			b3dWriteFloat( 0 )					;x in tex 0 (hu?)
			b3dWriteFloat( 0 )					;y in tex 0
			b3dWriteFloat( 1 )					;x scale 1
			b3dWriteFloat( 1 )					;y scale 1
			b3dWriteFloat( 0 )					;rotation 0
			
		Next
		b3dEndChunk()	;end of TEXS chunk

		
		For i=1 To c_surfs
			b3dBeginChunk( "BRUS" ) ; describe all brushes used by the mesh
		
			b3dwriteint( 1 )					;number of textures per brush ; (eg 2 with lightmap)
			b3dWriteString( "brush"+(i-1) )		;brushname
			b3dWriteFloat( 1 )					;red
			b3dWriteFloat( 1 )					;green
			b3dWriteFloat( 1 )					;blue
			b3dWriteFloat( 1 )					;alpha
			b3dWriteFloat( 0 )					;shininess
			b3dwriteint( 1 )					;blendmode
			b3dwriteint( 0 )					;FX
			b3dwriteint( i-1 )					;used texture index 
;			b3dwriteint( ? )					;additional texture index (eg lightmap), but here we only use 1 (see above)

			b3dEndChunk()	;end of BRUS chunk
		Next
		
		b3dBeginChunk( "NODE" )
			b3dWriteString( "entity_name_here!" )
			b3dWriteFloat( 0 )	;x_pos
			b3dWriteFloat( 0 )	;y_pos
			b3dWriteFloat( 0 )	;z_pos
			b3dWriteFloat( 1 )	;x_scale
			b3dWriteFloat( 1 )	;y_scale
			b3dWriteFloat( 1 )	;z_scale
			b3dWriteFloat( 1 )	;rot_w
			b3dWriteFloat( 0 )	;rot_x
			b3dWriteFloat( 0 )	;rot_y
			b3dWriteFloat( 0 )	;rot_z
			WriteMESH( mesh )
		b3dEndChunk()	;end of NODE chunk
		
	b3dEndChunk()	;end of BB3D chunk
	
	CloseFile file
End Function

Function WriteMESH( mesh )

	n_surfs=CountSurfaces( mesh )
	
	b3dBeginChunk( "MESH" )
		b3dwriteint( -1 )				;no 'entity' brush -1
		
		b3dBeginChunk( "VRTS" )
			b3dwriteint( 0 )			;flags - 0=no normal/color
			b3dwriteint( 1 )			;number of tex_coord sets (eg: 2 with lightmap)
			b3dwriteint( 2 )			;coords per set (u,v,w?) 2 with uv, 3 with uvw
			
			For k=1 To n_surfs
				surf=GetSurface( mesh,k )
				n_verts=CountVertices( surf )-1
				
				For j=0 To n_verts
					b3dWriteFloat( VertexX( surf,j ) )
					b3dWriteFloat( VertexY( surf,j ) )
					b3dWriteFloat( VertexZ( surf,j ) )
					b3dWriteFloat( VertexU#( surf,j,0 ) )
					b3dWriteFloat( VertexV#( surf,j,0 ) )
;					b3dWriteFloat( VertexW#( surf,j,0 ) )
;;					b3dWriteFloat( VertexU#( surf,j,1 ) ) ; lightmap uv
;;					b3dWriteFloat( VertexV#( surf,j,1 ) ) ; lightmap uv
;					b3dWriteFloat( VertexW#( surf,j,1 ) )
				Next
			Next
		b3dEndChunk()	;end of VRTS chunk
		
		first_vert=0
		For k=1 To n_surfs
			surf=GetSurface( mesh,k )
			n_tris=CountTriangles( surf )-1
			
			b3dBeginChunk( "TRIS" )
				b3dwriteint( k-1 )		;brush for these triangles (surf -1 !!!)
				
				For j=0 To n_tris
					b3dwriteint( first_vert+TriangleVertex( surf,j,0 ) )
					b3dwriteint( first_vert+TriangleVertex( surf,j,1 ) )
					b3dwriteint( first_vert+TriangleVertex( surf,j,2 ) )
				Next
				
			b3dEndChunk()	;end of TRIS chunk
			
			first_vert=first_vert+CountVertices( surf )
			
		Next
		
	b3dEndChunk()	;end of MESH chunk
	
End Function</textarea><br><br><br><br>b3dfile.bb: <br><br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;
;b3d file utils to be included
;

Dim b3d_stack(100)
Global b3d_file,b3d_tos

Function b3dSetFile( file )
	b3d_tos=0
	b3d_file=file
End Function

;***** functions for reading from B3D files *****

Function b3dReadByte()
	Return ReadByte( b3d_file )
End Function

Function b3dReadInt()
	Return ReadInt( b3d_file )
End Function

Function b3dReadFloat#()
	Return ReadFloat( b3d_file )
End Function

Function b3dReadString$()
	Repeat
		ch=b3dReadByte()
		If ch=0 Return t$
		t$=t$+Chr$(ch)
	Forever
End Function

Function b3dReadChunk$()
	For k=1 To 4
		tag$=tag$+Chr$(b3dReadByte())
	Next
	sz=ReadInt( b3d_file )
	b3d_tos=b3d_tos+1
	b3d_stack(b3d_tos)=FilePos( b3d_file )+sz
	Return tag$
End Function

Function b3dExitChunk()
	SeekFile b3d_file,b3d_stack(b3d_tos)
	b3d_tos=b3d_tos-1
End Function

Function b3dChunkSize()
	Return b3d_stack(b3d_tos)-FilePos( b3d_file )
End Function

;***** Functions for writing to B3D files *****

Function b3dWriteByte( n )
	WriteByte( b3d_file,n )
End Function

Function b3dWriteInt( n )
	WriteInt( b3d_file,n )
End Function

Function b3dWriteFloat( n# )
	WriteFloat( b3d_file,n )
End Function

Function b3dWriteString( t$ )
	For k=1 To Len( t$ )
		ch=Asc(Mid$(t$,k,1))
		b3dWriteByte(ch)
		If ch=0 Return
	Next
	b3dWriteByte( 0 )
End Function

Function b3dBeginChunk( tag$ )
	b3d_tos=b3d_tos+1
	For k=1 To 4
		b3dWriteByte(Asc(Mid$( tag$,k,1 )))
	Next
	b3dWriteInt( 0 )
	b3d_stack(b3d_tos)=FilePos( b3d_file )
End Function

Function b3dEndChunk()
	n=FilePos( b3d_file )
	SeekFile b3d_file,b3d_stack(b3d_tos)-4
	b3dWriteInt( n-b3d_stack(b3d_tos) )
	SeekFile b3d_file,n
	b3d_tos=b3d_tos-1
End Function</textarea><br><br><br><br>Any help is GREATLY appreciated! :)<br><br><br><br>Thanks! :)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please don't pick out forums members to fix your code.<br><br>For one thing, your not checking in your scale_selected code, if anything is selected.<br><br>I'm not sure what you mean by:<br><br><div class="quote"> <br>It seems when u make one copy of an object, then scale the object with Ctrl + Shift + A or Ctrl + Shift + S, then make another copy, then try to scale it, the objects dont take into account the new position of an object when it is scaled...<br> <br></div><br><br>You copy an object. You scale it. You make another copy. You try to scale the copy. Then what happens? I don't follow... <br><br></td></tr></table><br>
<a name="1128456"></a>

<a name="1128457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok... u copy an object. u scale it. u then try to scale the copy, and it scales straight in to the other objects..<br><br><br><br>...<br><br><br><br>This happens: <br><br><br><br><img src="http://i406.photobucket.com/albums/pp148/DarkShadowWing/Copy_Glitch.png"><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do u need more information, Ross? :) <br><br></td></tr></table><br>
<a name="1128563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to use CopyMesh instead of CopyEntity in the copy function, and ScaleMesh instead of ScaleEntity whereever it's used. That will sort it. The ScaleEntity command does nothing to actually scale the mesh, so the MeshWidth/Height/Depth commands only refer to the orginal mesh, not any scale entity modifiers. <br><br></td></tr></table><br>
<a name="1128569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Copymesh screws up the way it pastes objects &gt;&lt; <br><br></td></tr></table><br>
<a name="1128571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just now found out. there's also a problem with copying. When u copy a bunch of objects, then u go back to the 1st 1 IF it's still in the same position, or RELATIVELY close to the same position, it copies a mesh inside of a mesh &gt;&lt; and keeps on doing that til it reaches the last mesh, THEN it goes back to normal and continues copying normally. <br><br></td></tr></table><br>
<a name="1128579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> CopyMesh only copies the mesh. You'll need to set the pickmode of the newly created mesh and other properties that are required, including position. <br><br></td></tr></table><br>
<a name="1128580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ? i DID set the pickmode.... o.o<br><br><br>as for position. what do u mean, exactly? <br><br></td></tr></table><br>
<a name="1128581"></a>

<a name="1128582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fix for the copy function:<br><br><pre class=code>
; creates a copy and positions it away from the original. Uses the originals width to space, mulitplied by the provided values
Function create_new_copy(temp.obj,offset_x#,offset_y#,offset_z#,selected = 0)

	new_c.obj = New obj
	new_c\selected = 0
	new_c\mesh = CopyMesh(temp\mesh)
	temp_x_offset = (MeshWidth(new_c\mesh) + (MeshWidth(new_c\mesh)*0.1)) * offset_x
	temp_y_offset = (MeshHeight(new_c\mesh) + (MeshHeight(new_c\mesh)*0.1)) * offset_y
	temp_z_offset = (MeshDepth(new_c\mesh) + (MeshDepth(new_c\mesh)*0.1)) * offset_z
	
	EntityPickMode new_c\mesh,2
	
	PositionEntity new_c\mesh,EntityX(temp\mesh,True)+temp_x_offset, EntityY(temp\mesh,True)+temp_y_offset, EntityZ(temp\mesh,True)+temp_z_offset

	new_c\red = temp\red
	new_c\green = temp\green
	new_c\blue = temp\blue
	EntityColor new_c\mesh,new_c\red,new_c\green,new_c\blue
	
	If selected = 1 Then
		select_object(new_c.obj)
	End If
	
	object_count = object_count + 1
	
End Function
</pre><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Ross. Here's a better fix: <br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">; creates a copy and positions it away from the original. Uses the originals width to space, mulitplied by the provided values
Function create_new_copy(temp.obj,offset_x#,offset_y#,offset_z#,selected = 0)

	new_c.obj = New obj
	new_c\selected = 0
	new_c\mesh = CopyMesh(temp\mesh)
	ScaleEntity new_c\mesh,BP_GetEntityScaleX#(temp\mesh),BP_GetEntityScaleY#(temp\mesh),BP_GetEntityScaleZ#(temp\mesh)
	temp_x_offset = (MeshWidth(new_c\mesh) + (MeshWidth(new_c\mesh)*0.1)) * offset_x + MeshWidth#(temp\mesh) * offset_x
	temp_y_offset = (MeshHeight(new_c\mesh) + (MeshHeight(new_c\mesh)*0.1)) * offset_y
	temp_z_offset = (MeshDepth(new_c\mesh) + (MeshDepth(new_c\mesh)*0.1)) * offset_z
	
	EntityPickMode new_c\mesh,2
	
	PositionEntity new_c\mesh,EntityX(temp\mesh,True)+temp_x_offset, EntityY(temp\mesh,True)+temp_y_offset, EntityZ(temp\mesh,True)+temp_z_offset

	new_c\red = temp\red
	new_c\green = temp\green
	new_c\blue = temp\blue
	EntityColor new_c\mesh,new_c\red,new_c\green,new_c\blue
	
	If selected = 1 Then
		select_object(new_c.obj)
	End If
	
	object_count = object_count + 1
	
End Function</textarea><br><br><br>It's still doing that entity inside entity thing though. Where if I 1st select an object, make a copy of it. then I select the 1st object AGAIN, and make ANOTHER copy of it, it pastes the entity inside of the entity. after that, if I hit copy a 3rd time or greater, it's back to normal AFTER it reaches beyond the last mesh. :) <br><br></td></tr></table><br>
<a name="1128587"></a>

<a name="1128588"></a>

<a name="1128589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's not a bug. It would be extremely difficult to keep track of how many copies you've made from each entity, and where you have positioned them, in order to keep going in a row. Your stuck with it the way it is i'm afraid, unless you can devise a better system. It's not doing anything other than copying the mesh and offseeting it, then selecting the copy.<br><br>Solution, don't do it, or create some kind of click where you want to paste system.<br><br>Regarding your better fix. Don't call it that please, as you could fix it in the first place :)Also, I don't have that function, as it must use an external DDL. I would stick with the ScaleMesh though, for simplicity, but meh. It's up to you.<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hard. BWAHAHA. Take a look at this: <br><br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">; creates a copy and positions it away from the original. Uses the originals width to space, mulitplied by the provided values
Function create_new_copy(temp.obj,offset_x#,offset_y#,offset_z#,selected = 0)

	new_c.obj = New obj
	new_c\selected = 0
	new_c\mesh = CopyMesh(temp\mesh)
	ScaleMesh new_c\mesh,BP_GetEntityScaleX#(temp\mesh),BP_GetEntityScaleY#(temp\mesh),BP_GetEntityScaleZ#(temp\mesh)
	ScaleMesh temp\mesh,BP_GetEntityScaleX#(temp\mesh),BP_GetEntityScaleY#(temp\mesh),BP_GetEntityScaleZ#(temp\mesh)
	temp_x_offset = (MeshWidth(new_c\mesh) + (MeshWidth(new_c\mesh)*0.1)) * offset_x
	temp_y_offset = (MeshHeight(new_c\mesh) + (MeshHeight(new_c\mesh)*0.1)) * offset_y
	temp_z_offset = (MeshDepth(new_c\mesh) + (MeshDepth(new_c\mesh)*0.1)) * offset_z
	PositionMesh new_c\mesh,EntityX(temp\mesh,True)+temp_x_offset, EntityY(temp\mesh,True)+temp_y_offset, EntityZ(temp\mesh,True)+temp_z_offset
	PositionMesh temp\mesh,EntityX#(temp\mesh,True),EntityY#(temp\mesh,True)+MeshHeight#(temp\mesh),EntityZ#(temp\mesh,True)
		
	EntityPickMode new_c\mesh,2

	new_c\red = temp\red
	new_c\green = temp\green
	new_c\blue = temp\blue
	EntityColor new_c\mesh,new_c\red,new_c\green,new_c\blue
	
	If selected = 1 Then
		select_object(new_c.obj)
	End If
	
	object_count = object_count + 1
	
End Function</textarea><br><br><br><br>The ONLY thing left now, is to keep the "last" selected entity the same size as all the other copied entities :) If u can tell me how to do THAT, then problem solved! :) <br><br></td></tr></table><br>
<a name="1128592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> O yea! Ross, I almost forgot. U'll need the Blitz3D+ DLL to run this function with the editor, as I use "BP_GetEntityScaleX#,Y#,Z#", in order to get the EXACT correct size of an object! :) <br><br></td></tr></table><br>
<a name="1128593"></a>

<a name="1128597"></a>

<a name="1128599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. Why are you scaling the entity you are copying's mesh, to the same size it is already?<br><br>2. You do realise what PositionMesh does? Your moving the mesh away from it's actual entity location. If you where to say, PositionEntity c\mesh, it would be offset from this position by the amount you stated in PositionMesh. Furthermore, your RotateEntity/RotateMesh will be using the 0,0,0 co-ords of the Entities own co-ords, to rotate things around. The same goes with the ScaleEntity/ScaleMesh commands. Now, when you scale a mesh, if it's offset via PositionMesh, it will move away from the centre spot whilst scaling, and rotating.<br><br>3. Your moving the original entity away from it's location. Surely that's a very bad idea!<br><br>If your happy with it, then fair enough, but I can be pretty sure noone is going to want to use a copy function like that. It's crazy!<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> RossC: when you're done with your personal tutoring i was wondering if you, being the helpful sort that you are, might be able to find the time to do my knee operation?  Would go to the NHS but i'd only have to wait and if figure you would do it right now and save me the trouble of going through the proper channels.  Let me know in the next five minutes.  Kthxbai. <br><br></td></tr></table><br>
<a name="1128595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont think it's crazy. Hell, I can create over 1000 objects in &lt; 30 seconds! :) <br><br></td></tr></table><br>
<a name="1128596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> GFK, get ur own bloody thread. and LEAVE ME ALONE! :&lt; <br><br></td></tr></table><br>
<a name="1128598"></a>

<a name="1128602"></a>

<a name="1128603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Run this code:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D 800,600
SetBuffer BackBuffer()


Global camera = CreateCamera()
PositionEntity camera,0,0,-5


Global sphere1 = CreateSphere()
PositionEntity sphere1,-2,0,0

Global sphere2 = CreateSphere()
PositionMesh sphere2,2,0,0


Global light = CreateLight()

While Not KeyHit(1)


	RotateEntity sphere1,EntityPitch(sphere1),EntityYaw(sphere1)+1,EntityRoll(sphere1)
	RotateEntity sphere2,EntityPitch(sphere2),EntityYaw(sphere2)+1,EntityRoll(sphere2)


	RenderWorld
	Flip
Wend
End
</textarea><br><br>The sphere on the left has been positioned using PositionEntity.<br>The sphere in the right has been positioned using PositionMesh.<br><br>They now are both rotated. The same will happen with scaling.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D 800,600
SetBuffer BackBuffer()


Global camera = CreateCamera()
PositionEntity camera,0,0,-50


Global sphere1 = CreateSphere()
PositionEntity sphere1,-2,0,0

Global sphere2 = CreateSphere()
PositionMesh sphere2,2,0,0


Global light = CreateLight()

Global count# = 1.0

While Not KeyHit(1)


	;RotateEntity sphere1,EntityPitch(sphere1),EntityYaw(sphere1)+1,EntityRoll(sphere1)
	;RotateEntity sphere2,EntityPitch(sphere2),EntityYaw(sphere2)+1,EntityRoll(sphere2)

	count = count + 0.001

	ScaleEntity sphere1,count,count,count
	ScaleMesh sphere2,count,count,count


	RenderWorld
	Flip
Wend
End
</textarea><br><br>That is why it's crazy. I can create 1,000 objects in &lt; 30 seconds as well.  But, as you wish. Sits at the side with popcorn.<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gfk, no problem. I'm actually rather good at knee operations. If you sit right there, i'll start the procedure and someone else will fix what i've done and make it better. There you go sir. You didn't need that lung it seems. <br><br></td></tr></table><br>
<a name="1128601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> No one says u HAVE to use it -.- thats what single object copy is for. its for ppl who wanna create a MASSIVE LOAD of objects at one time just before work, and dont have time to sit there and keep on hitting CTRL + C <br><br></td></tr></table><br>
<a name="1128604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you read anything I typed. Did you run the code I posted? I give up! Mmmmmmm... Popcorn. <br><br></td></tr></table><br>
<a name="1128605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes. I'm modifying my formula now :) <br><br></td></tr></table><br>
<a name="1128606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> god darn it! Im so close... :(<br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">; creates a copy and positions it away from the original. Uses the originals width to space, mulitplied by the provided values
Function create_new_copy(temp.obj,offset_x#,offset_y#,offset_z#,selected = 0)

	new_c.obj = New obj
	new_c\selected = 0
	new_c\mesh = CopyMesh(temp\mesh)
	tempsizex# = BP_GetEntityScaleX#(temp\mesh)
	tempsizey# = BP_GetEntityScaleY#(temp\mesh)
	tempsizez# = BP_GetEntityScaleZ#(temp\mesh)
	newsizex# = BP_GetEntityScaleX#(new_c\mesh)
	newsizey# = BP_GetEntityScaleY#(new_c\mesh)
	newsizez# = BP_GetEntityScaleZ#(new_c\mesh)
	ScaleEntity temp\mesh,tempsizex#,tempsizey#,tempsizez#
	ScaleMesh new_c\mesh,tempsizex#,tempsizey#,tempsizez#
	temp_x_offset = (MeshWidth(new_c\mesh) + (MeshWidth(new_c\mesh)*0.1)) * offset_x
	temp_y_offset = (MeshHeight(new_c\mesh) + (MeshHeight(new_c\mesh)*0.1)) * offset_y
	temp_z_offset = (MeshDepth(new_c\mesh) + (MeshDepth(new_c\mesh)*0.1)) * offset_z
	PositionEntity new_c\mesh,EntityX(temp\mesh,True)+temp_x_offset, EntityY(temp\mesh,True)+temp_y_offset+new_y_offset, EntityZ(temp\mesh,True)+temp_z_offset
	PositionEntity temp\mesh,EntityX#(temp\mesh,True),EntityY#(temp\mesh,True),EntityZ#(temp\mesh,True)
		
	EntityPickMode new_c\mesh,2

	new_c\red = temp\red
	new_c\green = temp\green
	new_c\blue = temp\blue
	EntityColor new_c\mesh,new_c\red,new_c\green,new_c\blue
	
	If selected = 1 Then
		select_object(new_c.obj)
	End If
	
	object_count = object_count + 1
	
End Function</textarea> <br><br></td></tr></table><br>
<a name="1128610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok... Ok... Ive made it so u can copy only SINGLY selected objects.<br><br><br>Function check_mouse(): <br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Global singly_selected

Function select_all()

	singly_selected = False

	For c.obj = Each obj
	
		c\selected = 1
		select_object(c.obj)
		
	Next
	
End Function

Function check_mouse()

	If mouse_1_mode = mouse_click Then
	
		singly_selected = True
	
		CameraPick(camera,MouseX(),MouseY())

		If KeyDown(29) Or KeyDown(157) Then ; IF LEFT or RIGHT CTRL key is held down (remove from selection)

			remove_entity(PickedEntity())

		ElseIf KeyDown(42) Or KeyDown(54) Then
		
			add_to_selection(PickedEntity())
		
		Else
		
			add_only_to_selection(PickedEntity())
			
		End If
		
	End If

End Function</textarea> <br><br></td></tr></table><br>
<a name="1128611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> HA! I've almost got it stacking in rows! :)<br><br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">; creates a copy and positions it away from the original. Uses the originals width to space, mulitplied by the provided values
Function create_new_copy(temp.obj,offset_x#,offset_y#,offset_z#,selected = 0)

	new_c.obj = New obj
	new_c\selected = 0
	new_c\mesh = CopyMesh(temp\mesh)
	tempsizex# = BP_GetEntityScaleX#(temp\mesh)
	tempsizey# = BP_GetEntityScaleY#(temp\mesh)
	tempsizez# = BP_GetEntityScaleZ#(temp\mesh)
	newsizex# = BP_GetEntityScaleX#(new_c\mesh)
	newsizey# = BP_GetEntityScaleY#(new_c\mesh)
	newsizez# = BP_GetEntityScaleZ#(new_c\mesh)
	ScaleEntity temp\mesh,tempsizex#,tempsizey#,tempsizez#
	ScaleMesh new_c\mesh,tempsizex#,tempsizey#,tempsizez#
	temp_x_offset = (MeshWidth(new_c\mesh) + (MeshWidth(new_c\mesh)*0.1)) * offset_x
	temp_y_offset = (MeshHeight(new_c\mesh) + (MeshHeight(new_c\mesh)*0.1)) * offset_y
	temp_z_offset = (MeshDepth(new_c\mesh) + (MeshDepth(new_c\mesh)*0.1)) * offset_z
	count = count + 1
	If count &gt; 5 Then count = 0
	If count = 5 Then temp_x_offset = 0:new_y_offset = new_y_offset + MeshHeight#(new_c\mesh)+temp_y_offset : count = 0
	PositionEntity new_c\mesh,EntityX(temp\mesh,True)+temp_x_offset, EntityY(temp\mesh,True)+temp_y_offset+new_y_offset, EntityZ(temp\mesh,True)+temp_z_offset
	PositionEntity temp\mesh,EntityX#(temp\mesh,True)+new_x_offset,EntityY#(temp\mesh,True),EntityZ#(temp\mesh,True)
		
	EntityPickMode new_c\mesh,2

	new_c\red = temp\red
	new_c\green = temp\green
	new_c\blue = temp\blue
	EntityColor new_c\mesh,new_c\red,new_c\green,new_c\blue
	
	If selected = 1 Then
		select_object(new_c.obj)
	End If
	
	object_count = object_count + 1
	
End Function</textarea> <br><br></td></tr></table><br>
<a name="1128662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok... my math is still off. Can someone please help?<br><br><br>Any help is greatly appreciated! :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
