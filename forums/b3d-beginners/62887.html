<!DOCTYPE html><html lang="en" ><head ><title >floating points</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >floating points</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >floating points</a><br><br>
<a name="702464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mindstorms</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How far does the blitz floating point number system go?  I can't figure out how to get anything more than 6 digits (on either side of the decimal)...Is there a way to do more?<br><br>It rounds stuff down to zero that would be elsewhere 3.8897051e-6<br><br>I have compared this to my ti-84 calculater and identical c++ code and they both come out with 3.8897051e-6 while blitz comes out to zero... <br><br></td></tr></table><br>
<a name="702465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz3D only provides single precision floats, which give 6 digits of precision, I think. Not much you can do about it, AFAIK. What do you need the increased precision for, BTW? <br><br></td></tr></table><br>
<a name="702468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mindstorms</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> trying to convert some c++ code to blitz...everything is so small and at the same time so large (like from the above example to 4414.7339, but I thought it could be done because there are no doubles in the code, just floating points...)  It is affecting the code because it rounds down each frame, which means that instead of gradually becoming smaller or bigger it just stays at zero. <br><br></td></tr></table><br>
<a name="702473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, if the C++ code is using doubles, I'll assume it's using them because it needs them. Maybe you could compile the code into a DLL and call it from blitz? <br><br></td></tr></table><br>
<a name="702474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mindstorms</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> How would I go about doing that(compiling code into a dll)<br><br>I said that there were no doubles in the c++ code...<br><br>(I think that sin,cos,... use doubles, not sure...)<br><br>Problem is that it calculates these itty bitty numbers and then add them each frame to different things, sometimes multiplying.  If blitz changes them to zero, multiplying definately won't work, and adding does nothing...) <br><br></td></tr></table><br>
<a name="702515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is something else.<br><br>Single precision is the same in Blitz and C++. In either case if you try to add a very small number to a very large one there will be no change. <br><br>For example 5000.0 + 0.00005 would produce 5000.0, because there is not enough precision to represent 5000.00005. <br><br></td></tr></table><br>
<a name="702563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> And it is not the conversion from c++ cos/sin to blitz cos/sin ? With the deg/rad conversion? *pi/180? <br><br></td></tr></table><br>
<a name="702570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mindstorms</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I figured the sin,cos,atan stuff out (after a couple of hard hours)...What I am saying is that the c++ code seems to update it's numbers to a higher decimal place than blitz...c++ might return 4.3888 and blitz might return a 4.4...the problem is when c++ almost goes to zero, then blitz goes to zero, making it impossible to get away from zero (because of multiplication) <br><br></td></tr></table><br>
<a name="702576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> To compile a .dll, go to file-&gt;new in c++ an select dynamic link library as a project type. You can find examples of blitz userlibs on the net.<br>If c++ makes the right calculations, the function will have a correct result. However, when the .dll is used in Blitz, it's result is still converted to a blitz float. <br><br></td></tr></table><br>
<a name="702609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mindstorms</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks bram32, will try! <br><br></td></tr></table><br>
<a name="705338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mindstorms</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uhhhhhhhhhh,  I can't figure out how to create a .dll file in c++ (visual studio 6.0)...can someone please help? <br><br></td></tr></table><br>
<a name="705451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use Delphi to create .DLL's. Since Pascal is more like Basic, I find it far more easy to work with it than C++. <br>I tried the following thing:<br>(1) In Visual Studio goto File-&gt;New-&gt;Projects-&gt;Win32 Dynamic Link Library<br>(2) Enter project name "test2" and press "Ok"<br>(3) Select "An empty DLL project" and press "Finish"<br>(4) File -&gt; New -&gt; Files -&gt; C++ Source File<br>(5) Enter a file name and press "Ok"<br>(6) Paste this:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#include &lt;math.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;

#define BBDECL extern "C" _declspec(dllexport)
#define BBCALL _stdcall

BBDECL float BBCALL Formula( float ax,float bx,float cx,float dx,float e ){

	return (ax*ax*ax*ax+bx*bx*bx+cx*cx+dx+e);

}
</textarea><br>(7) Press Build (F7)<br>(8) Copy the compiled .DLL in the userlibs directory<br>(9) Make an empty text file in the userlibs directory, and paste this:<br><pre class=code>
.lib "test2.dll"

Formula#(ax#, bx#, cx#, dx#, e#):"_Formula@20"
</pre><br>--&gt; And save it/rename it to "test2.decls"<br>(10) **Notice that the .dll name in the decls should be the same as the compiled dll<br>(11) **The @20 equals the number of bytes passed to the function. In this case, 5 floats x 4 bytes. Integers are 4 bytes, too.<br>(12) Test the function in Blitz using this:<br><pre class=code>
Print Formula(1,1,1,1,1)

WaitKey()

End
</pre><br><br>These links show examples of DLL's in C++:<br><br>On this page is the original documentation:<br><a href="http://www.blitzbasic.com/sdkspecs/sdkspecs.php" target="_blank">http://www.blitzbasic.com/sdkspecs/sdkspecs.php</a><br><br>These are just random links containing DLL's:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=51944" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=51944</a><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1639" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1639</a><br>http://www.google.nl/search?hl=nl&amp;safe=active&amp;q=bbcall+blitz3d&amp;meta=<br><a href="http://www.blitzforum.de/forum/viewtopic.php?t=254&amp;sid=1434dc251f0bca47fc770a1175c994b2" target="_blank">http://www.blitzforum.de/forum/viewtopic.php?t=254&amp;sid=1434dc251f0bca47fc770a1175c994b2</a> <br><br></td></tr></table><br>
<a name="705571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mindstorms</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Bram32...This will help alot! <br><br></td></tr></table><br>
<a name="705664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mindstorms</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to be such a bother, never have done this....When I build the code, it creates a .lib, and then when I try to use it in blitz it highlights the commands well enough but comes up with an error saying it can't find the userlib?<br><br>EDIT:  sorry about that, right after I posted found the dll file... <br><br></td></tr></table><br>
<a name="705666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> There should be a .dll too in the same dir <br><br></td></tr></table><br>
<a name="705697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mindstorms</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Had to go into project properties and specify that I wanted a .dll make, even though it was already selected that way, Thank you very much bram32 for helping me with all the trouble I have caused. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
