<!DOCTYPE html><html lang="en" ><head ><title >String terminators</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >String terminators</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >String terminators</a><br><br>
<a name="1046140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> What 'control code' is used to recoognise a string terminator?<br><br>I had assumed it was Chr(0), but somehow, this is bypassed with the following example:<br><br><pre class=code>
d$=CurrentDir()
wf=WriteFile(d$+"file.txt")
WriteString wf,"Hello "+Chr(0)+"World"

CloseFile wf

rf=ReadFile(d$+"file.txt")
s$=ReadString(rf)

CloseFile rf
Print s$</pre> <br><br></td></tr></table><br>
<a name="1046145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm pretty sure Blitz doesn't use terminators, and just records the string's length internally somewhere in the string's (inaccessible) data structure. Consider the way strings are written as data to files or streams. <br><br></td></tr></table><br>
<a name="1046146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's no string termination character for Blitz3D's internal strings. Instead, they have a 32 bit length header which defines the length of the string.<br><br>If you need a terminator for a string in a text file, then use an end-of-line character sequence (a Carriage Return character followed by a LineFeed character - Chr(13)+Chr(10)), and use the WriteLine and ReadLine functions to write and read the data.<br><br>For a data file, you'll need to create your own terminator characters, plus the code to split up the string using those characters. Or just write out multiple strings. <br><br></td></tr></table><br>
<a name="1046152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> optimally you go the same file for files as blitz goes: write a short / int with the length of the string then write the string.<br><br>reason is that this allows you to just use a readbytes to read the whole string in 1 go. while a string terminator requires you to read every character one by one to find it basically.<br>Thats a magnitude++ slower (and one of the main reason why tcp in blitz has such a bad reputation, cause people did such stupid things in production code) <br><br></td></tr></table><br>
<a name="1047213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks all, that really helps.<br>Suprised to hear about the inaccessible value, but i agree it's a lot better to store the length rather than process each byte until reaching a terminator.<br>Presumably this limits the string lengths to 2^32 chars (really way more than should ever be needed ;) ) So maybe a Short byte of 16 bits would be a little improvement.<br><br>The main reason for asking was in relation to ways of making reading/writing a little more efficient or a sort of compression routine for filesizes, so it's very helpful, Thanks! <br><br></td></tr></table><br>
<a name="1047279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Today's history lesson...<br><br>It's traditional for Basics to handle strings like this. It means that every character code can be a string element. C took the attitude that strings were text, so a terminator code could be chosen.<br><br>The fact that strings could hold all byte values was used back in the 8-bit days for embedding machine language into interpreted (non-compiled) Basic code. The bytes of the machine language subroutine were stored in the string. The code was executed by branching to the address of the start of the string. <br><br></td></tr></table><br>
<a name="1047364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's right, I remember now the Z80 assembly code had 256 commands in its set, which of course, could also be represented with the ASCII char set or rather, any 8-bit byte.<br>terminators are messy oin my opinion, and in having a "terminator code", we're losing out on a value which might otherwise be used... maybe... :P` <br><br></td></tr></table><br>
<a name="1047513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stanrol</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pascal strings. <br><br></td></tr></table><br>
<a name="1047790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Pascal strings. 
</pre>What? <br><br></td></tr></table><br>
<a name="1048405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stanrol</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Malice Turbo Pascal used those string typel. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
