<!DOCTYPE html><html lang="en" ><head ><title >Colliding camera with mesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Colliding camera with mesh</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Colliding camera with mesh</a><br><br>
<a name="892807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >spriteman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi There,<br><br>Once 2 objects have collided i.e in my case the Camera being the player and the mesh being a gun, I would like to display on the screen that the player can use the gun by pressing a key. <br><br>However the collision will only hold true for as long as I hold the move up key down.<br><br>Is there a way of coliding with an object and holding the condition true untill the camera(player) moves away from it...i.e keep the option to choose a gun while standing near it.<br><br>I use the code below to detect the collision. The guns are types as there is more than 1 gun dotted around the map.<br><br>  For g.gun = Each gun<br>      <br>   If EntityCollided ( camera,col_gun )<br>      Text 0,0, "Press 'Enter' key to use gun"<br>    End If<br><br>  Next <br><br></td></tr></table><br>
<a name="892808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> For something like that surely simply using entitydistance would be sufficient, and not checking for an actual collision with the gun.  <br><br><pre class=code>
For g.gun  = each gun
     IF EntityDistance(player,g\entityhandle) &lt;= SomeSmallDistanceSpecifiedInYourCode then 
          ;Perform whatevery step you wish for when close to the gun.
     endif 
next
</pre> <br><br></td></tr></table><br>
<a name="893147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >spriteman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matty,<br><br>Great advice buddy. So I understand that what happens is that when the player is in the proximity of the gun, they will be able to pick it up when EntityDistance(camera,G\GMESH) &lt;= dist. This works a treat.<br><br>A second little question - About collisions. I would like to detect collision with the gun only when in proximity of it so, I am using the function below but cannot see how to check the clearcollisions function has worked when outside of the gun proximity. Any Ideas on how to check the collision list has been cleared...Thanks,<br><br>Function neargun()<br><br>  If guncol=0<br>    ClearCollisions;Clear all collisions<br>  End If<br><br>  For g.gun = Each gun<br>      <br>   If EntityDistance(camera,G\GMESH) &lt;= dist Then<br>       Collisions col_character,col_gun,2,2<br>       Text 0,10, "Press enter to use the " +G\GNAME$<br>       If KeyHit( 28 ) Then gogun=1-gogun<br>   Else<br>       guncol=0<br>   End If<br>   <br>  Next<br><br>End Function <br><br></td></tr></table><br>
<a name="893195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello spriteman,<br><br>The ClearCollisions command, and the Collisions commands are not used in that manner.<br><br>Usually you will set up the collision responses between different 'types' of entity outside your main loop, usually just before it and should never, as far as I know, need to use the ClearCollisions command - which simply removes all collision response relationships between all your different entity types.<br><br>I still believe you only need to use the entitydistance to pick up a gun, mainly because the collision commands are usually used to set a relationship between different entity 'types' in regards to their response, whether the first entity will 'stop' 'slide' or 'slide upwards' upon contacting the second, as well as setting the mode of collision detection - sphere to sphere (which is no different than entitydistance to a small extent), or sphere to box or sphere to polygon - with sphere to polygon being overkill for a collision detection between a player and an item to pick up. <br><br></td></tr></table><br>
<a name="893281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >spriteman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Matty,<br><br>Thanks for the reply. Just to elaborate a little, I am walking up to a gun and when I say gun I mean a big field gun(mesh) sitting on the terrain. So the entitydistance will detect when I am in close proximity and say 'press blah blah to use gun. At this point (within proximity) I am looking to enable the collision detection between the Gun and the player only. <br><br>What I mean is if by enabling collisions at this point btween gun/player, it will only check against the entity that is in range and not all the other entitys on the map. Then if I am out of range of entity(s) then clearcollisions<br><br>I thought this to be an efficient way of handling collision detection thinking that checking for all collisions on the map all the time may be a little more loading on the CPU.<br><br>Regds, <br><br></td></tr></table><br>
<a name="893317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simply set the 'entitytype' of the gun to zero whilst you don't want to check for collisions and then set the entitytype to whatever value you use for detecting collisions as normal when within 'range'. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
