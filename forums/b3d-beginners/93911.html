<!DOCTYPE html><html lang="en" ><head ><title >Calculating Array Memory usage. How?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Calculating Array Memory usage. How?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Calculating Array Memory usage. How?</a><br><br>
<a name="1075712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Galdy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can some one tell me how to calculate how much memory an array would use? <br><br></td></tr></table><br>
<a name="1075715"></a>

<a name="1075716"></a>

<a name="1075717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it is an array of floats or integers then the number of elements in the array multiplied by 4 is the amount of memory (in bytes) used by the array.<br><br>Eg:<br>Dim MyArray(10000) is an array of integers with 10001 (including '0' as the first element) elements which is 40004 bytes, or roughly 40kb...pretty small.<br><br>The same would be the case if it was an array of floats, however an array of strings I'm not sure how blitz handles the memory for one of these, I would imagine it would be 4 bytes per element where the string is empty (header of 4 bytes indicating length of string), and 4 bytes per element plus length of the string, where the string is not empty, in bytes.<br><br>To give you an example though, if you wanted to take up 100MB of RAM then with an array of integers or floats you'd need roughly<br>25,000,000 elements in your array.....<br>ie Dim MyArray(25,000,000) would roughly equate to a 100MB array.<br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1075816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Galdy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok. Then I have plenty of memory for my application since it just involves intergers. Thanks. <br><br></td></tr></table><br>
<a name="1076072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Dim MyArray(10000) is an array of integers with 10001 (including '0' as the first element) elements which is 40004 bytes, or roughly 40kb...pretty small.<br> <br></div><br>The Array will contain EXACTLY 40004 Bytes which is EXACTLY 39kb and 68bytes.<br><br>For 100Mb, you would need 26214400 4-byte elements in an array.<br><br>floats and Ints  4 Bytes<br>Shorts = 2 Bytes (Obviously)*<br>Strings = length+4 Bytes<br>Bytes = 1 Byte (Obviously)*<br><br>* However, these are only ever relevant, when used with Poke or Write, otherwise, all instances will be 4-Bytes.<br><br>When arrays are of strings, the length-byte is still stored**<br><br><br>For Example<br><pre class=code>
Local bBank=CreateBank(4)
For f=0 to 3
PokeByte(bBank,f,Rand(256) Mod 256)
Next

MyInt=PeekInt(bBank,0)
MyByte=PeekByte(bBank,0)
FreeBank bBank
</pre><br>Despite the fact only 1 byte is read with PeekByte, MyByte will actually contain 4 bytes. Three of which are efrfectively wasted.<br><br>I'm not sure if it's possible to make a custom typedef of a variable type to only accept 1 byte, you might try:<br><br><pre class=code>
bbyte=(Rand(256) Mod 256)+(Rand(256) Mod 256)Shl 8+(Rand(256) Mod 256)Shl 16+(Rand(256) Mod 256)Shl 24

.Byte bbyte=(bbyte And 255)
Print .Byte bbyte</pre><br><br>But still, there's no guarantee bbyte isn't just going to default to a 4-Byte integer again :S <br><br></td></tr></table><br>
<a name="1076073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm not sure if it's possible to make a custom typedef of a variable type to only accept 1 byte <br></div><br><br>....wut?<br><br>Blitz3D doesn't support the typedef command... and judging by the syntax of the code example... have you been smoking C++? <br><br></td></tr></table><br>
<a name="1076082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strangely enough, that code seems to run without an error. But it doesn't create an 8-bit type tho. It just seems to ignore the ".Byte" part right after Print. At least, when I tried using "goto Byte", it jumped to the first .Byte label, and when I removed that, it complained about an undefined label.<br>Maybe the second ".Byte" is removed during one of the (pre)parsing steps in compilation? <br><br></td></tr></table><br>
<a name="1076097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br><br>Strangely enough, that code seems to run without an error.<br> <br></div><br>Why wouldn't it?<br><br>In Blitz "." either refers to a custom object or a label.<br><br>If you are using Goto, it's treated as a label. <br><br></td></tr></table><br>
<a name="1076099"></a>

<a name="1076102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> In Blitz "." either refers to a custom object or a label <br></div><br><br>It is the type signature for variables of user-defined type, in which case it follows the variable name. Type never precedes variable-name in B3D - that's C syntax! And it can't refer to a type if the type hasn't been defined.<br><br>Aside from that, what has the first line of the example - combining randomised bytes into one integer - got to do with typedef, which doesn't exist in any Blitz language (again, C)?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Why wouldn't it? <br></div><br>1. There is a label in the middle of a Print statement or a type identifier that defines "Print" as a Byte, followed by an undefined function without brackets.<br>2. Depending on the above, there is either a duplicate label or no Type Byte defined.<br><br>A 32-bit processor deals with 4 bytes at a time. So unless you're packing bytes into groups of four and deal with them at the same go, a Byte would use up as much processing power as an Int.<br>I think that is the reason why there is only Peek/PokeByte and Read/WriteByte and no Byte prototype. <br><br></td></tr></table><br>
<a name="1076431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> hrmm... sorry about that. Looking back on it, I dunno what I was thinking &gt;.&lt;<br><br>Very bad, bad syntax and imporper use indeed.<br><br>Seems Blitz just interpreted the first .Byte as a label, since there was no stopping the runtime execution, it continued past it ignoring it completely. (Which is normal)<br><br>When it came to the second one, though, it also seemed to ignore it, even if it thought it was a label it shoulda picked up on the duplication. You're right, it's wo weird that didn't throw an error, either invalid type object or the duplicate label! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
