<!DOCTYPE html><html lang="en" ><head ><title >X/Y/Z Collision</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >X/Y/Z Collision</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >X/Y/Z Collision</a><br><br>
<a name="912400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, another one from me!<br><br>I have a jump code that lets my player jump when its in collision with the world, to prevent him jumping, without his feet touching anything.<br><br>Here is the code!<br><pre class=code>If KeyHit(57) 

	If EntityCollided(player,world_col)

	 	While Player_velocityY =&lt; 2		
		
			Player_velocityY = Player_velocityY + Gravity

		Wend
		
	EndIf
	
EndIf</pre><br><br>It works perfect... so far. I was thinking of adding a pivot with a collision radius as a child of the player, to detect if the players feet area is touching the ground.<br><br>At this point, pressing jump and standing against the wall, makes the player fly up. Funny as it is, that's not what I need :P<br><br>Before I make the child radius, is there a way to detect if a certain part/location of a collision radius is colliding?<br><br><br>Thanks!! <br><br></td></tr></table><br>
<a name="912486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grindalf</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> you could always load the walls in as a seprate entity. <br><br></td></tr></table><br>
<a name="912492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is an option. I have thought of that as well. <br><br>I'd still like to know how this is done, cause I have a small team who will be working on the maps and models, so I want to do it properly so it will be as simple as possible for them.<br><br><br>thanks <br><br></td></tr></table><br>
<a name="912496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check the collision normals. That will tell you what angle the collision happened. <br><br></td></tr></table><br>
<a name="912704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess your last reply in the next link is covering this. How could have I missed that thread? :-\<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=79122#888485" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=79122#888485</a><br><br><br>Anyway, gonna try to implement it! Thanks! <br><br></td></tr></table><br>
<a name="912721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> What i do, is a linepick straight down from the characters position. Basically, it will return how close the ground is and if there is any ground below the characters. Slightly, ever so slighly slower than using normal collisions, but i find it more useful. <br><br></td></tr></table><br>
<a name="912781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or you could use the existing collision information to find the average collision normal in the Y direction.  If it's &gt; 0 the normal points up and your standing on something.  Like so :<br><br><pre class=code>
If KeyHit(57)

	If EntityCollided(player,world_col)
	
		If CollNY( player ) &gt; 0

			While Player_velocityY =&lt; 2		
				
				Player_velocityY = Player_velocityY + Gravity
		
			Wend
			
		EndIf
		
	EndIf
	
EndIf


Function CollNY#( Entity )

	Ny# = 0
	cc = CountCollisions( Entity )

	For c = 1 To cc
		Ny# = Ny# + CollisionNY( Entity , c )
	Next
	
	Return ( Ny / cc )
	
End Function		
</pre><br><br>Even then, your jumping code doesn't look right.  You want to be adding an acceleration ( greater than gravity ) to the velocity in the upward direction if jump is pressed and you are on the ground.  Also, apply gravity whenever you are not on the ground.<br><br>You'd need to play with the gravity and jumpacceleration variables ..<br><br><pre class=code>
Const Gravity# = 9.81
Const JumpAcceleration# = 25.0

.
.
.
.

OnGround = ( CollNY( player ) &gt; 0 )

If OnGround
	If KeyHit(57)
		Player_velocityY = Player_velocityY + JumpAcceleration
	EndIf
Else
	Player_velocityY = Player_velocityY - Gravity
EndIf
</pre><br><br><br>Stevie <br><br></td></tr></table><br>
<a name="912820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot, Stevie! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
