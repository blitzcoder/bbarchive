<!DOCTYPE html><html lang="en" ><head ><title >drawing economics</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >drawing economics</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >drawing economics</a><br><br>
<a name="934135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi yall<br><br>I'm writing a gui a.t.m. and I'm wondering weather it would be better (more economical) to draw changing buttons when they are detected by the handler, or to stick them in a list and draw them in one go, when you are certain nothing changes anymore.<br>The first method is simple, but has the disadvantage that; if several buttons interact (with each other and mouse-events)you run the risc of drawing the same button several times.(some of my buttons are beasts..)<br>The second method takes a bit more planning, but offers more control. I just don't know weather it would cause the GPU to "stall", waiting for each draw to finish. In the latter case it would be better to draw that list before the handler, so the program could flow while the drawing takes place; and not wait on each other.<br>----sooo much considerations---- HA<br>Hope anyone can shine some light in this.  <br>It's not THAT much of a problem now, but who knows what a gui will be used for in the future? <br><br></td></tr></table><br>
<a name="934138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think I fully understood your post., but if you're drawaing to the back buffer and flipping, you'll need to draw all the buttons and what-have-you each frame anyway, right?<br>So it would  be more efficient, I think, to determine the buttons' states and draw the reqired 'version'each frame. <br><br></td></tr></table><br>
<a name="934143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> well,not each frame per-say, but at least each cycle, yes. So drawing them as soon as possible seems logical. But I assume it will depend on how much time if takes for the GPU to draw a square, compared to the time it takes the CPU, to calculate what needs to be drawn, and in what order.<br>hmm... How many line of code would take as much time as the GPU would need to draw "let's say" , a 16x16 16bit-image? <br><br></td></tr></table><br>
<a name="934199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not going to be an issue..drawing 2d boxes, sorting them is not going to have a performance hit unless you are drawing thousands of gui elements each frame - even on a Pentium 2. <br><br></td></tr></table><br>
<a name="934214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ehm.. one of my buttons consists of up to 100 "sub-Buttons"  ;)<br>when I scroll its content, the frame-rate drops from 80 to 40.<br>Still trying to figure how to avoid drawing the whole thing instead <br>of just the portion that changes, but this "question" is more about weather "in general" its better to draw all things in a row, or draw them as they come in view while checking the changes, with the risk of drawing them twice. <br><br></td></tr></table><br>
<a name="934311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take off vsync, via flip false. That will give you a more accurate frame rate and just use code to control the fps.<br><br>What to do is this: (I believe it's called triple buffering)<br><br>Draw your whole button, including sub buttons, onto a master image, big enough to hold all the sub buttons. Draw this image EVERY frame, however, only update that image, if there is a change, in which case, update the entire image again. That way, the computer is only drawing one image most frames.<br><br>It's a bit like the idea behind 2d tilemaps. You don't draw every tile on the screen each frame, you draw these tiles onto a master image, the size of the screen, and scroll the master image left,right,up and down, and only update the image when new tiles are introduced. <br><br></td></tr></table><br>
<a name="934350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross... that is brilliant!<br>And exactly how I do it! hehe.<br>I only redraw all the parts when the scrollbar is activated or when the 'user' sets its position 'by hand'.<br>An extra advantage of 'triple buffering' is, that drawing to an image, and than that image to the screen, that image always will be 'compleet'.<br>while drawing to the backbuffer directly can result in showing an image that is still being 're'drawn.<br>Problem I face is, that the 'cells' of this 'scrolling button' have no fixed dimensions. Else I could 'predraw' them and use something like 'quadruple' buffering, instead of drawing background,picture and text of each 'cell' every time I draw the whole thing.<br>Perhaps I could consider leaving it like this, since such 'gadgets' are more likely to be used for something like a database, and not something that needs realtime-drawing.<br>....<br>it just bugs me ;) <br><br></td></tr></table><br>
<a name="934373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe, the hunt for efficiency. Things like that bug me too, and i never get anything done because i'm too busy refining parts of my code :o( Don't fall into that trap ;o) <br><br></td></tr></table><br>
<a name="934378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> too late!  oink! <br><br></td></tr></table><br>
<a name="934396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I also believe that for some time now, as the focus is on 3D graphics, GPUs are comparitively getting slower at 2D than 3D, meaning it may even be possible that a 3D sprite-based UI system may be more efficient than a 2D image-based one.<br>Regardless, you're talking thousandTHs of millisecs here, so it's really not an issue. <br><br></td></tr></table><br>
<a name="934418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indeed I also thought in thousandths of millisecs,<br>But I did just some testing:<br>drawing a 32x32 image a  1000 times, takes roughly 50 fps.<br>witch is 20 millisecs per 1000 drawings, so 1 draw takes 1/50th of a millisec. not a thousandth?<br>Isn't that rather slow, or is it me?<br>Drawing 4 lines to make a square of the same proportions takes 6 times longer than drawing an image... so that's kind of a nono.<br>If these numbers add, I think I know where to find some bottlenecks in my progs. <br><br></td></tr></table><br>
<a name="934424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> drawing a 32x32 image a 1000 times, takes roughly 50 fps.<br>witch is 20 millisecs per 1000 drawings, so 1 draw takes 1/50th of a millisec. not a thousandth?<br> <br></div><br>That does dsound INCREDIBLY slow.. <br>are you talking about the time taken to draw the images and flip the buffer? Remember, that other factors will contributre to any methof of timing too, such as other processor concerns and other graphical concerns too.<br>For best results,  try closing all unnecessary processes and comment out any delays.<br><br>Multiply the 1000 drawings so you're drawing something like 1000000. The greater this number, the easier you can determine the average speed per each.<br><br>Keep your code extremely quick for the drawing. Use constant values all defined before any loops for maximum efficiency.<br><br>I'm sure there's methods of deciding whether the background colour is worth writibng over if the pixcel is the same or closer enough in colour, but at some point, it'll either get silly or just not worth the hassle :D <br><br></td></tr></table><br>
<a name="934458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure your using<br><br><pre class=code>
Flip False
</pre><br><br>?<br><br>Remember also, you should let blitz set up, and put a delay right before your loop to measure your fps. <br><br></td></tr></table><br>
<a name="934463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> well: this is what I use;<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics 800,600 ,16,2  

test=CreateImage (32,32)

SetBuffer BackBuffer()
Delay 1
timer=MilliSecs()
For reps=1 To 1000
	For t=1 To 1000
		DrawImage test,10,10
	Next
	timecount=timecount+1
	If MilliSecs()-time &gt;1000 
		time =MilliSecs()
		fps=timecount
		timecount=0
	EndIf
Next
	timer=(MilliSecs()-Timer)/1000
Cls
	Print timer 
	Print fps 
Flip
WaitKey()
End
</textarea><br>I get 14 for the time needed to draw 1000 images whith an fps of 68.<br>Am I stupid or my PC?!<br>/edit<br>my X86 puts out:30 and 31<br>/end edit <br><br></td></tr></table><br>
<a name="934492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are drawing 1,000,000 images. NOT 1,000. <br><br></td></tr></table><br>
<a name="934497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I divide timer by 1000, so it represents 1 repetition.<br>I am curious though what others get for outcome.<br>Or what the time SHOULD be drawing 1000 32x32 images? <br><br></td></tr></table><br>
<a name="934514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Change from flip, to flip false and see what fps you get. <br><br></td></tr></table><br>
<a name="934516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's really dependant on your system specs of course.<br><br>I ran a quick test and got a similar result (77 fps mean over 13 seconds for 1000 images sized 32x32 )<br><br>based on the equivalent of pretty good games playing hardware around 2-3 years ago. <br><br></td></tr></table><br>
<a name="934520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Meh, graphics hardware for 2d is the same it was about 7 or 8 years ago. 1,000,000 images per second is a hell of alot though... <br><br></td></tr></table><br>
<a name="934522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can see why flip false would do nothing :o) I get 146 fps. <br><br></td></tr></table><br>
<a name="934526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1.000.000 seems much, but it means; if you want to fill a 800x600 screen,(20*25=500) with a framerate of 50, you can only redraw the screen twice per frame... <br><br></td></tr></table><br>
<a name="934737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should only be redrawing the screen once per frame :o) <br><br></td></tr></table><br>
<a name="934741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> hehe. pffft... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
