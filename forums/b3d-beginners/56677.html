<!DOCTYPE html><html lang="en" ><head ><title >Trouble Writing Multiple Lines</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Trouble Writing Multiple Lines</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Trouble Writing Multiple Lines</a><br><br>
<a name="630089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr.Bob94</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br>I'm trying to create a program that writes multiple lines of input to a file. However, for some reason, so far I've only been able to write the last line (which is "Close", because that's what stops the loop) to a file. How can I set this up so that that dosen't happen without using hundreds of thousands of variables?<br>Sorry... I thought I posted it. Here you go:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics 1024,768
save$ = Input ("Under what name do you want this log saved?")
Writef$ = Input ("Ready.")
Repeat
mainfile$ = Input ("")
rcon = WriteFile("C:\temp\Test Docs\"+save$+".con")
Until mainfile$ = "Close"
.writer
WriteLine (rcon,mainfile$)
CloseFile rcon
WaitKey 
End 
</textarea><br>Thanks for you help. <br><br></td></tr></table><br>
<a name="630148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jams</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> We'll need to take a looky at your code... :) <br><br></td></tr></table><br>
<a name="630199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Open the file (WriteFile()) before your loop starts - you only want to open it once.  Write each line (WriteLine()) inside your loop.<br><br>P.S. Indent each line in a block (e.g. inside a loop) with a Tab character to improve readability. <br><br></td></tr></table><br>
<a name="630233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr.Bob94</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you all! This really helps!<br><br>*Edit*<br>Hello again, <br>I finished with the creation part of my program, but now I'm having trouble with the part for opening files. I'm getting the error "Stream Does Not Exist". Here's my code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
.start
Graphics 1024,768
open$ = Input ("Would you like to open or create a file? O = Open, C = Create, Q = Quit.")
If open$ = "O" Then Goto openscript 
If open$ = "C" Then Goto createscript
If open$ = "Q" Then End 
.openscript
openf = Input ("Please type the file you wish to open.")
fopen = OpenFile ("C:\temp\Test Docs\"+open$+".rcn")
filetext= ReadFile (fopen)
fileread$ = ReadLine (filetext)
Print fileread$
WaitKey 
readf$ = Input ("Ready.")
Repeat
mainfile2$ = Input ("")
WriteLine (openf,mainfile2$)
Until mainfile2$ = "Close"
CloseFile fopen
.createscript
save$ = Input ("Under what name do you want this log saved?")
Writef$ = Input ("Ready.")
rcon = WriteFile("C:\temp\Test Docs\"+save$+".rcn")
Repeat
WriteLine (rcon,mainfile$)
mainfile$ = Input ("")
Until mainfile$ = "Close"
WriteLine (rcon,mainfile$)
CloseFile rcon
WaitKey 
Goto start
</textarea> <br><br></td></tr></table><br>
<a name="632293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm I would use local-folder addresses rather than start at the top of the tree drive letters.<br><br><br>Try just reading and writing to a file within the same folder as the .bb first <br><br></td></tr></table><br>
<a name="632449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr.Bob94</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now I'm getting "Memory Acess Violations". I haven't changed anything... <br><br></td></tr></table><br>
<a name="632673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe it's the Stream Does Not Exist error, but it's referred to as Memory Access Violation due to the Debugger being turned off? <br><br></td></tr></table><br>
<a name="632674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, this bit's wrong, for starters:<br><pre class=code>
fopen = OpenFile ("C:\temp\Test Docs\"+open$+".rcn")
filetext= ReadFile (fopen)
</pre><br>That opens the specified file and assigns the file handle to fopen; you then use this file handle as the name to open another file for reading (ReadFile).<br><br>And the OpenFile line should be using the string variable openf$, not open$. <br><br></td></tr></table><br>
<a name="632887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr.Bob94</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Malice: Yeah, you were right about the debug thing. It's giving me the stream error now.<br>@big10p: I fixed the open$ error, thanks. But what should I use instead of ReadFile? <br><br></td></tr></table><br>
<a name="632922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this, Mr.Bob94:<br><pre class=code>
Graphics 1024,768

.start
open$ = Input ("Would you like to open or create a file? O = Open, C = Create, Q = Quit.")
If open$ = "O" Then Goto openscript 
If open$ = "C" Then Goto createscript
If open$ = "Q" Then End 

.openscript
openf$ = Input ("Please type the file you wish to open.")
fopen = OpenFile ("C:\temp\Test Docs\"+openf$+".rcn")

While Not Eof(fopen)
	Print ReadLine (fopen)
Wend

readf$ = Input ("Ready.")

Repeat
	mainfile2$ = Input ("")
	WriteLine (fopen,mainfile2$)
Until mainfile2$ = "Close"

CloseFile fopen
WaitKey
Goto start

.createscript
save$ = Input ("Under what name do you want this log saved?")
rcon = WriteFile("C:\temp\Test Docs\"+save$+".rcn")

Writef$ = Input ("Ready.")

Repeat
	mainfile$ = Input ("")
	WriteLine (rcon,mainfile$)
Until mainfile$ = "Close"

CloseFile rcon
WaitKey 
Goto start
</pre> <br><br></td></tr></table><br>
<a name="632954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr.Bob94</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I changed my sript to that, but I'm still getting the error. Here's my code now:<br><pre class=code>
.start
Graphics 1024,768
open$ = Input ("Would you like to open or create a console session? O = Open, C = Create, Q = Quit.")
If open$ = "O" Then Goto openscript 
If open$ = "C" Then Goto createscript
If open$ = "Q" Then End 
.openscript
openf$ = Input ("Please type the file you wish to open.")
fopen = OpenFile ("\Documents\"+openf$+".rcn")
While Not Eof(fopen)
	Print ReadLine (fopen)
Wend
readf$ = Input ("Ready.")
Repeat
	mainfile2$ = Input ("")
	WriteLine (fopen,mainfile2$)
Until mainfile2$ = "Close"

CloseFile fopen
WaitKey
Goto start
.createscript
save$ = Input ("Under what name do you want this log saved?")
Writef$ = Input ("Rynet Console Loaded.")
rcon = WriteFile("C:\Documents and Settings\Max Zimon\My Documents\IDL Files\Programs\Documents\"+save$+".rcn")
Repeat
WriteLine (rcon,mainfile$)
mainfile$ = Input ("")
Until mainfile$ = "Close"
	WriteLine (rcon,mainfile$)
	CloseFile rcon
WaitKey 
Goto start
</pre><br><br>Thanks again for all your help. :) <br><br></td></tr></table><br>
<a name="633030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Luke.H</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> This bit looks like an error to me:<br><br><pre class=code>

Until mainfile$ = "Close"
	WriteLine (rcon,mainfile$)
	CloseFile rcon
WaitKey

</pre><br><br>look at big10p's code <br><br></td></tr></table><br>
<a name="633409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr.Bob94</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, that part works fine for me. It's just in the Open File part that I'm getting errors. <br><br></td></tr></table><br>
<a name="633432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try...<br><br><pre class=code>
fopen = OpenFile ("C:\Documents and Settings\Max Zimon\My Documents\IDL Files\Programs\Documents\"+openf$+".rcn")
If fopen=0 Then 
	Print "Unable to open logfile"
 	Goto openscript
EndIf
</pre><br>To see why the change to an abolute path might be relevant:<br>Print SystemProperty("appdir")<br>Relative paths from your program will work when you create an executable.<br><pre class=code>
rcon = WriteFile("C:\Documents and Settings\Max Zimon\My Documents\IDL Files\Programs\Documents\"+save$+".rcn")
If rcon=0 Then
	Print "Unable to create logfile"
	Goto createscript
EndIf
</pre> <br><br></td></tr></table><br>
<a name="633438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr.Bob94</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't use the "Print SytemProperty("appdir")" command, it gives me a "Function Not Found" error. <br>As for your suggestion, that does stop the error, but I still can't read and then write to the file, and that's what I'm trying to do.<br><br>Thanks for the help. <br><br></td></tr></table><br>
<a name="633439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, typo - corrected.  It is SystemProperty().<br><br>If you want to append to a file check out the Filesize() and Seekfile() functions. They might be helpful. <br><br></td></tr></table><br>
<a name="633779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr.Bob94</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. This is interesting, but I really could use some help with getting the files to open. I don't mean to push, it's just that I need to get this working soon. <br><br></td></tr></table><br>
<a name="633922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems to work ok here with a couple of changes.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics 1024,768

dirpath$="C:\Documents and Settings\Max Zimon\My Documents\IDL Files\Programs\Documents\"
;dirpath$=SystemProperty("appdir") ; Use when creating executable
extension$=".rcn"
displayloginfo=True
tabspacing=4

Repeat
	Cls :	Locate 0,0 : Color 255,255,0
	open$ = Input ("Would you like to open or create a console session? O = Open, C = Create, Q = Quit.")
	Select Upper(open$)
		Case "O" Gosub Openscript
		Case "C" Gosub Createscript
		Case "Q" End
	End Select
Until False

.openscript
	Color 255,255,0
	openf$ = Input ("Please enter the file you wish to open.")

	If openf$="" Then Return

	ftype=FileType(dirpath$+openf$+extension$)

	If ftype=0 Then
		Color 255,0,0
		Print "file "+dirpath$+openf$+extension$+" does not exist. Please try again"
		Goto openscript
	Else
	
		Fsize=FileSize(dirpath$+openf$+extension$)
	
		fopen = OpenFile (dirpath+openf$+extension$)
		If fopen=0 Then 
			Color 255,0,0
			Print "Unable to open file for reading and writing"
		 	Goto openscript
		EndIf
		
		Gosub Readfilescript
	
		SeekFile fopen,fsize
	
	EndIf
	
	Print
	Color 255,255,0
	confirm$=Input ("Append to file (Y/N) ")
	
	If Upper(confirm$)&lt;&gt;"Y" Then Return

	Gosub WriteFileScript

Return


.CreateScript
	Color 255,255,0
	save$ = Input ("Enter log file name:")
	If save$="" Then Return
	fopen = WriteFile(dirpath+save$+extension$)
	If fopen=0 Then
		Color 255,0,0
		Print "Failed to create file"
		Goto CreateScript
	EndIf
	Gosub WriteFileScript
Return


.WriteFileScript
	Color 255,255,0
	Print "Input new data. Enter CLOSE to end"
	output$ = "*** Logging commenced on "+CurrentDate()+" at "+CurrentTime()
	Repeat
		WriteLine (fopen,output$)
		output$ = Input ("&gt;")
	Until Upper(output$) = "CLOSE"
	WriteLine (fopen,"*** Logging ended on "+CurrentDate()+" at "+CurrentTime())
	CloseFile fopen
Return

.ReadFileScript
	linecount=0
	maxlines=(GraphicsHeight()/FontHeight())-2	
	
	While Not Eof(fopen) Or KeyDown(1)
		fileinput$ = ReadLine(fopen)
		fileinput$ = Replace(fileinput$,Chr(9),String(" ",tabspacing))
		If Left(fileinput$,3)="***" Then 
			If Displayloginfo Then 
				Color 128,128,128 
				Print Right("0000"+linecount,5)+" "+fileinput$
				linecount=linecount+1
			EndIf
		Else
			Color 255,255,255
			Print Right("0000"+linecount,5)+" "+fileinput$
			linecount=linecount+1
		EndIf	
				
		If linecount Mod maxlines = 0  Then
			Color 255,255,0
			Print "(paused) Press any key"
			WaitKey()
		EndIf
	Wend
Return
</textarea> <br><br></td></tr></table><br>
<a name="634084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr.Bob94</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's amazing! Wow!! Thank you so much, it works perfectly! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
