<!DOCTYPE html><html lang="en" ><head ><title >Changing colour of sprite "in game"</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Changing colour of sprite "in game"</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Changing colour of sprite "in game"</a><br><br>
<a name="212375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gnipper</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have designed a sprite which I wish to use more than once on the same screen (which isnt a problem) HOWEVER i want to change part of the sprite to a different colour (to identify between the numerous ones on screen).<br><br>There must be an easier way than drawing 10 different coloured sprites when they are essentially the same!  Is there a command which lets you change a certain colour to another? i.e. the sprites shirt colour <br><br></td></tr></table><br>
<a name="212383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Miracle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's no palette-swap command. However, you could generate different sprites at runtime with a combination of ReadPixel/WritePixel if your sprite's shirt color is unique. <br><br></td></tr></table><br>
<a name="212392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gnipper</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> the read/write pixel command, do I have to specify each pixel to change colour? could take an age and it would be quicker to do different colour sprites in paint!<br><br>I have one animstrip (10 frame) of which part is "colour a" and its this "colour a" i want to be able to change without drawing 10 or 20 sets of sprites! <br><br></td></tr></table><br>
<a name="212423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont think miracle meant to change the colours on the fly within the main game loop.<br><br>You can just load the 1 anim then create all the other images as copies of the original with the colour changed.<br><br>OK.. so you will still end up with 10 images in memory but at least you only have 1 animstrip to draw. <br><br></td></tr></table><br>
<a name="212428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Miracle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You just need to do something like this (pseudocode):<br><br>For n = 1 to 10 ; 10 frames<br>  SetBuffer ImageBuffer(image,n)<br>  LockBuffer<br>  For x = 1 to imagewidth<br>    For y = 1 to imageheight<br>      c = ReadPixelFast x,y<br>      If c = shirtcolor Then WritePixelFast x,y,newcolor<br>    Next<br>  Next<br>  UnlockBuffer<br>Next<br>SetBuffer BackBuffer()<br><br>If you want to make a copy first, just do a CopyImage ahead of time and run this routine on the copy instead.<br><br>Edit: Yeah, you do this before your main loop. <br><br></td></tr></table><br>
<a name="212432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gnipper</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmmmmmm yeah i see what you are doing... but would that not change the entire sprite to the new colour - effectively erasing the image!?<br><br>Quietblokes idea is the one i need to pursue.. i spose i will need to locate the pixels on the indiviual animation frames and repace them 1 by 1?  Not a quick task but "do-able" <br><br></td></tr></table><br>
<a name="212457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Miracle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Er, no ... it's only looking for the old short color, and if it finds it, replaces it with the new one. <br><br></td></tr></table><br>
<a name="212975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gnipper</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh i c now!! ill give it a go!<br><br>This is just what i needed!<br><br>Cheers <br><br></td></tr></table><br>
<a name="213513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SSS</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> btw are you talking bout blitz3d sprites or custom sprites because if you are using blitz3d sprites all you have to do is entitycolor sprite, 255,0,0 for a red sprite <br><br></td></tr></table><br>
<a name="213623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another thing worth noting - if you use 256 colour bitmaps, you can apply different palletes to it to get different colours at loadtime (this is much faster). "But blitz doesn't support paletted images!" I hear you cry. True, but it loads them in well enough. Every paletted bmp has the pallet info at the start of the file. If you overwrite these values with a new palette before loading the image, hey presto! I had some code that did this knocking about on the forum somewhere, but gawd onlyknows where it is... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
