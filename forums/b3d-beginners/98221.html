<!DOCTYPE html><html lang="en" ><head ><title >Thoughts about exporters/importers of an .obj file</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Thoughts about exporters/importers of an .obj file</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Thoughts about exporters/importers of an .obj file</a><br><br>
<a name="1146090"></a>

<a name="1146091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, :)<br><br>I am currently trying to understand how to code an exporter/importer of an .obj file for Blitz3d.<br><br>I have tried to export a simple cube with several groups and several materials from the softwares :<br>Anim8or<br>Wings3d<br>Fragmotion<br>Blender<br><br>Each time, i have assigned exactly some tris to the same groups, and others tris to the same materials.<br><br>However when i open the different .obj files with notepad i don't see consistent datas from one .obj file to another.<br><br>The .obj files exported with Fragmotion and Anim8or have 8 vertices and 12 faces, which corresponds to a cube.<br><br>The .obj files exported with Wings3d and Blender have 8 vertices but only 6 faces... But there are 4 vertex indexes for each face so i guess it refers to quads...<br><br>The groups and materials seems to be exported correctly by Fragmotion but not by Anim8or and i don't know for the 2 others.<br><br>Moreover the datas  are not written in the same order, sometimes the materials lines and the groups lines are before and near the faces lines (which makes the faces their childs), sometimes no.<br><br>I thought a file format had rules but it seems each .obj file seems to be different from one exporter to another.<br><br>That's not a problem for me because i only need to have an .obj importer that imports an .obj file exported with Fragmotion and the export seems to be clean so that's ok.<br><br>But i have difficulty to understand how the programmers of modeling softwares manage to retrieve the correct datas from a mesh file that has no clear rules.<br>Retrieving the vertices and the faces seems easy enough, but retrieving the faces associated to a specific material or to a specific group is difficult or impossible if the lines are put in such a random order.<br><br>I guess that's why it is rarely possible to work with several softwares without breaking a mesh.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1146151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the important thing here is to recognise the difference between "import/export" and "load/save".<br><br>Importing or exporting is generally understood to mean saving to something <i>other than</i> the program's native data format. In other words, to export, the data must be converted out of whatever format it's in while the program works on it, <i>then</i> written to disk. To import, the data must be read, <i>then converted</i> to the internal format. In contrast, loading and saving (e.g. writing a .wings file with Wings3D) normally implies no conversion - the data will be written in pretty much the same form as the program uses it.<br><br>Why is this important? Because it hides the fact that the different internal formats may have different things they can <i>easily</i> represent, and because of this some data may not be converted symmetrically, resulting in the same thing at the end of the process as there was at the start.<br><br>What we can guess from these results is that the .obj file can represent faces with more than three sides if desired. However, since Fragmotion uses the B3D engine (if I recall correctly), we know that its internal data format will never produce a four-sided polygon. Since .obj is flexible on the issue, it just writes triangles as one might expect of a conventional mesh. Meanwhile, Wings3D has a similar "winged edge" rule with its internal data structures meaning its polygons can have a large number of vertices; so it probably writes its face information more directly and outputs quads, because internally in the Wings engine, the cube really was represented by quads. If you load that exported Wings cube into a B3D engine editor like Fragmotion, it <i>will</i> be made up of triangles even if the exported file describes it in terms of quads, because the importer has to convert it to the internal triangle representation.<br><br>In other words, even though the models look the same onscreen, their different internal representation when loaded in the editor means that really, a <i>very slightly different</i> model is being exported, and therefore it is actually logical that differences in the file should accumulate.<br><br>The issue with materials and groups is probably closer to an error: most mesh formats have <i>something like</i> these but they all differ in much more substantial ways than vertices and triangles which usually mean more or less the same things from engine to engine. This data will be corrupted on re-exporting if the engine it's in in between doesn't have a direct equivalent to the concept of a group or material. Many don't, and remember the "import/export" distinction (from load/save) means that an editor has <i>no responsibility</i> to preserve data it can't immediately understand - which answers your question about retrieving correct data: often, they don't, and can't because that data simply can't be read... and then ceases to exist to be re-exported.<br><br><br>Overall, my own advice is to not use .obj if you can avoid it. It's not designed for 1) work with the B3D engine, 2) use as a transfer format, or 3) support for B3D features. Data <i>will</i> be lost, and many things cannot be represented accurately. Fragmotion exports .b3d files... why not use those? <br><br></td></tr></table><br>
<a name="1146171"></a>

<a name="1146172"></a>

<a name="1146173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Fragmotion exports .b3d files... why not use those? <br> <br></div><br><br>Because the import/export of .obj files with Fragmotion produces clean .obj files, but the export of .b3d files with Fragmotion produces a .b3d with several errors :<br>-a useless animation is added<br> -a useless joint is added<br>-For each triangle, 3 vertices are added<br>-therefore the materials are not associated with the tris and vertices as i want...<br>-the groups are not exported correctly.<br><br>That's bad for me because i need to have clean meshes (closed not unwelded) with low tris and low vertices in order to have nice shadows with DSS without wasting too many ressources (3 times the numbers of vertices is really bad when a routine uses them to calculate shadow volumes !)<br><br>I am working on an.obj importer and i think this will be better to have a clean mesh imported, i have also posted a question on the Fragmotion forum in order to improve the .b3d exporter but i have no answer for the moment.<br><br><br><br>Thanks for your explanations, i see what you mean about the faces not being handled the same way depending on the software.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1146688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have just managed to code a clean .obj importer with materials for Blitz3d and guess what ? The .obj exporter of Fragmotion does not export the materials colors properly.<br><br>Now i have clean meshes colored with random colors. <br><br>Ok i stay calm... <br><br></td></tr></table><br>
<a name="1153311"></a>

<a name="1153317"></a>

<a name="1153318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to let you know that there has been an update of Fragmotion and now it exports the .b3d file correctly (without duplicated vertices).<br><br>This is a good news, this software is really good for modeling, skinning, animation.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1313372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm curious about your object importer if you could share it. I see there's one by Volderman in the archives but it looks quite complicated. <br><br></td></tr></table><br>
<a name="1313430"></a>

<a name="1313431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I remember to have finished it in the past, but i can't find it... (4 years ago probably !)<br><br>An obj exporter/importer is easy to code anyway, since you can open and read and debug the obj file with notepad (it is a text file !) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
