<!DOCTYPE html><html lang="en" ><head ><title >Online High Score Table</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Online High Score Table</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Online High Score Table</a><br><br>
<a name="647095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >alloidgames</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In a simple game of mine, I created a high score table that included both one's personal high scores and high scores posted up on a website.  On the website, the scores are kept in a simple text file.  I used the following code to bring the scores down from the site and put them in arrays:<br><br><br>tcp = OpenTCPStream("www.alloidgames.com",80)<br>	If tcp Then<br>		WriteLine tcp,"GET http://www.alloidgames.com/raingamehs.txt"<br>		WriteLine tcp,Chr$(10)<br>		If Not Eof(tcp) Then<br>			While Not Eof(tcp)<br>				For i = 1 To 10<br>					olscore(i) = ReadLine(tcp)<br>					olname$(i) = ReadLine$(tcp)<br>					ollevel(i) = ReadLine(tcp)<br>				Next<br>			Wend<br>		End If<br>		CloseTCPStream tcp<br>	End If<br><br><br>So far, I've only been able to figure out how to get high scores going one way.  Is there any way, after comparing the recent score to the lowest high score from online (olscore(10)), to have the game send the score up to the text file or to the site?  The goal would be for players to post their own scores on the site automatically, without allowing them to alter their scores.  If this is not directly possible, what are some other ways to possible communicate the score information? Could I have the game send an e-mail automatically with the score in it, without allowing the player to edit the e-mail? <br><br></td></tr></table><br>
<a name="647269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use GET to send the users score as a part of the URL, eg: <br>GET www.alloidgames.com/raingamehs.php?user=joe&amp;score=12345"<br><br>But useing GET allows the user to edit this and send it manually over the Adresslin ef a browser.<br><br>You can use POST instead of GET (see code archives), but basicly the best protection against cheating is to encrypt the data and/or add some kind of checksum, so invalid data will be rejected. If you do this, you may use GET without any risk.<br><br>I would strongly suggest to use a php script that will read the users score and name, compare it to the list and add his score to the list if required, then return the updated list to the user in text format. This is really very simple when you know the basics of PHP and MySql, assuming your server supports PHP and MySql. You may use a simple textfile instead of the Database MySql to store the list, but MySql offers very simple sorting functions, so all you have to do is reading the database sorted by the size of the score field.<br><br>However, using a checksum to validate the score must be done in a way that is <b>not known by the public</b>. Example:<br><br>a=12345 ; the score!<br><br>b$=a<br>checksum=0<br>for i=1 to len(b$)<br> checksum=(checksum+floor(mid$(b$,i,1))*1234) and $FFFF<br>next<br><br>c$=user$+"."+b$+"."+checksum<br><br>c$ will then be sent to the server, as GET parameter.<br><br>now the php script will extract username, the score and the checksum. It will then create its own checksum from the received score (using the same code, but in php). If the received checksum and the instantly created checksum are the same, the score is valid and legal. If they differ, it's a cheater and you may send a string like "you lousy cheater! your harddrive will be formated in 3 seconds, byebye!" <br><br></td></tr></table><br>
<a name="647373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >alloidgames</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply!<br><br>I think I understand your concept for the checksum and what the pages need to do, but I have no clue how to implement it.  So I would send the URL containing the info (name,score,level,checksum), and they are basically variables and values included in the URL, which the PHP script can than read and interpret?  How does the PHP script read the variables in the URL?<br><br>My server does support PHP and MySql, but I have absolutely no  experience in either.  I'd rather use a textfile to store the info as I've already got a sorting algorithm within the program so the order doesn't really matter in the textfile (in fact, every score could be posted and the sorter only shows the top ten, so I don't have to worry about comparing a posted score to the high scores list and deleting the lowest high score, etc.  It could just add every new score to the bottom of the text file, and I'd occaisionally just clean it out). <br><br></td></tr></table><br>
<a name="647415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a look in the code archives, I'm pretty sure there's a solution for B3D in there somewhere and I believe it includes the PHP script too.<br><br>[edit]<br>Hmm...I just had a look but couldn't find it. Perhaps it was just posted on the forum then, which is a bummer as it'd be long gone by now (this was a couple of years ago). :o(<br><br>You could have a go at converting <a href="/codearcs.php?code=1579" target="_blank"><b>this</b></a> to B3d.<br>[/edit] <br><br></td></tr></table><br>
<a name="647440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about using ETNA - Lib? <br><br></td></tr></table><br>
<a name="647514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >alloidgames</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, so I got all the PHP stuff going.  It's really simple, and it works like a charm.  The only problem I've got left (and I have a feeling it has a really simple answer) is that I need the Blitz program to access the webpage "www.alloidgames.com/raingame.php?" + senddata$<br><br>(within senddata$ is all the info).<br><br>The PHP program just takes senddata$ and puts it in a textfile.<br><br>I've tried WriteLine stream,"GET www.alloidgames.com/raingame.php?" + senddata$, but all that ends up in my textfile is that little annoying unreadable square.  If I access the page directly on my browser, substituting something in for senddata$, it appears correctly in the textfile.  How can I get the program itself to access that? <br><br></td></tr></table><br>
<a name="647517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> are you sure senddata$ is set correctly? did you print it to the screen to monitor it?<br>you may also try to use brackets:<br> WriteLine stream,("GET www.alloidgames.com/raingame.php?" + senddata$)<br><br>But in theory this should work also without the brackets. <br><br></td></tr></table><br>
<a name="647521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >alloidgames</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, senddata$ is correct all the way through (I think, at least everywhere I've checked it).  Here's a snippit, with senddata$ changed just to send$:<br><br>Text width / 2, height / 2 + 150, "You got an online high score!!!!", True,True<br>		Locate width / 2 - 40, height / 2 + 180<br>		sendingname$ = Input("What is your name?")<br>		send$ = "|" + Str(Int(score#)) + "|" + sendingname$ + "|" + Str(level)<br>		Print send$<br>		tcp = OpenTCPStream("www.alloidgames.com",80)<br>		If tcp Then<br>			WriteLine tcp,"GET http://www.alloidgames.com/raingamehs.php?" + send$<br>			WriteLine tcp,Chr$(10)<br>		EndIf<br>		CloseTCPStream tcp<br><br><br><br>My PHP code looks like this:<br><br><br>&lt;?php<br>$newString = $_GET['info'];<br>$fp = fopen( "raingamehs.txt" , "a+" );<br>fwrite( $fp, $newString );<br>fclose($fp)<br>?&gt; <br><br></td></tr></table><br>
<a name="647576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> ETNA is IDEAL for this - and it's free! Why bother with own code when you have a great solution at your fingertips? <br><br></td></tr></table><br>
<a name="647579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ETNA is IDEAL for this - and it's free! Why bother with own code when you have a great solution at your fingertips? <br></div>Because believe it or not, some people write code for personal enjoyment and a sense of achievement - which you simply do not get by using other people's code. <br><br></td></tr></table><br>
<a name="647611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> thats just like re-inventing the wheel... <br><br></td></tr></table><br>
<a name="647641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try something like this...<pre class=code>name$ = Input("Enter name : ")

send$ = "|" + Rand(1000) + "|" + name$ + "|" + Rand(10)
send$ = Replace(send$, " ", "_")
Print send$

tcp = OpenTCPStream("alloidgames.com", 80)

If tcp Then
	WriteLine tcp, "GET /raingamehs.php?info=" + send$ + " HTTP/1.0"
	WriteLine tcp, "HOST: alloidgames.com"
	WriteLine tcp, ""
EndIf

CloseTCPStream tcp</pre>Bear in mind that this is extremely insecure. <br><br></td></tr></table><br>
<a name="647677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alloidgames, of course it's nice to do things by yourself, but you might consider using the ETNA library as t3K|Mac mentionned. <br>Advantage of ETNA:<br>- uses thread, so it's not slowing down your program (you can even use it in your main loop if you wish)<br>- uses encryption (coming soon!), so that nobody can cheat and add a very high score<br><br>ETNA comes with an example for a high score on a web site (with php). See my sig if you are interested... <br><br></td></tr></table><br>
<a name="647916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >alloidgames</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, thanks guys for the replies.<br><br>Hamish, your code works great! (You've got an extra little apostraphe after the send$ = Replace(... line, but otherwise its perfect.)  You're right, it is really insecure, so I'll add a checksum as jfk suggested.<br><br>I checked out ETNA and it seems extremely useful; I'll definetely check into it on later games, but I'll leave this one as it is for now.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="648031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm...I've no idea how that apostrophe got there. 8o/ <br><br></td></tr></table><br>
<a name="648052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW, apropos checksums: when you use "AND $FFFF" for the checksum, like in my example, you have to realize that the checksum will never be higher than 65535. This means, a hacker could brute force the right checksum with a max of 65535 attempts. If your server has no automatic recognition of brute force attacks or dos attacks, this will take only a while for the hacker.<br><br>Using a 32 Bit checksum (and $FFFFFFFF) will make it much harder for the cheater, since it allows 4 billion possible checksums. But in that case you should also use a higher multiplier than 1234 for the digits, eg. 12345678.<br><br>That said, since the checksum code is not pubic, the hacker won't know if it's 16 bit or 32 bit. You may also use an uncommon checksum, like a 25 bit checksum: <br><br>checksum = checksum AND %1111111111111111111111111 <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
