<!DOCTYPE html><html lang="en" ><head ><title >Unable to Set Graphics Mode</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Unable to Set Graphics Mode</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Unable to Set Graphics Mode</a><br><br>
<a name="572511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jamie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings,<br><br>I have been working on a project for some time now and periodically I will receive the Unable to Set Graphics Mode message when starting my project (but only if compiled). This happens on 3 or 4 PCs and appears to be somewhat random. Below is sample specs for one of the PCs (the development PC):<br><br>nVidia GeForce 6200A 512MB <br>P4 3.2 GHz<br>1.5 GB RAM<br>Windows XP Pro SP2<br><br>Project/Development Specs<br>Blitz3D IDE V1.90 Linker V1.84 Runtime V1.90<br>Protean IDE V 1.4 Build 1884 Revision 26595<br>Project Running at 1024 x 768 32-bit color<br><br>I have not tried the newest GeForce drivers, but at least two of the PCs that exhibit this are using different driver versions. All PCs that I have tried this on are running Windows XP Pro SP2<br><br>I realize that no one can "tell me whats wrong", but I was hoping for some direction to begin troubleshooting. Obviously this is very frustrating and limits my ability to distribute my project. Any help would be greatly appreciated.<br><br>Thanks,<br><br>Jamie <br><br></td></tr></table><br>
<a name="572512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well posting the code you use to set a graphics mode would help. <br><br></td></tr></table><br>
<a name="572518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jamie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry about that.... here are the lines that I use for setting the graphics mode:<br><br>ClearWorld<br>;<br>.GRAPHICS_SETTINGS<br>Graphics3D 1024,768,32<br><br>Before these lines I have a number of types, variables, and functions defined, but this is the only Graphics or Graphics3d call in the entire project.<br><br><br>Thanks,<br>Jamie <br><br></td></tr></table><br>
<a name="572520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure if ClearWorld should be called before Graphics3d is called. <br><br>Anyway, try changing to Graphics3d 1024,768,0<br><br>That should pick the bit depth automatically, according to what is available.<br><br>The only other thing I can think of which might cause a problem is if you're already running a program which has a D3D window open. They don't seem to like having two open at once. <br><br></td></tr></table><br>
<a name="572530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jamie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will remove the ClearWorld call and change the Graphics3D line to let it choose the highest available. <br><br>It does appear that this problem occurs usually after I have ran the project numerous times. I wonder if something is not truely getting unloaded and there is a D3D window open somewhere, eventhough it is not visible?!? Right now when I want to exit my program I make the following calls after freeing all of the sounds, textures, etc:<br><br>	ClearWorld<br>	EndGraphics<br>	End<br><br>I am going through and making sure I have freed all items before I make these calls; but if any ideas while I check through that would be appreciated.<br><br>Thanks,<br><br>Jamie <br><br></td></tr></table><br>
<a name="572968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Graythe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jamie,<br><br>A shot in the dark...<br><br>If you are using writepixelfast or readpixelfast then examine these routines for possible bounds errors.  If there is doubt then construct another set of almost identical routines but using readpixel and writepixel which will not write out of bounds even if instructed to. Naturally, if the problem endures then it's not an out of frame write.<br><br>A good tool to check running processes is Winsonar (do a google search) which is free.<br><br>I hope it helps... <br><br></td></tr></table><br>
<a name="573028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd try:<br>Remove the Clearworld, especially if you really didn't call Graphics3D before!<br><br>Then: explicitely define if it should be windowed or fullscreen. Your command<br>Graphics3D 1024,768,32<br>will run windowed in debug mode and fullscreen in non-debug mode. So use<br>Graphics3D 1024,768,32,1 ; (or 2, of course) <br><br></td></tr></table><br>
<a name="573223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fernhout</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am a beginner in Blitz 3D but i know a bit more about Windows. and for me the problem is not Blitz but windows. Specialy Combination windows and Graphics card. You say this wil happens after you opend you program a couple of times. Windows don't like to reserve and free up memory to the same program again and again. There will be a memory fragmentation between windows and the graphics card. Normaly you get a warning can't created memblock. But if the fragmentation is to high your color depth wil not work anymore. Your program gets a error back and reports that it cant create the graphics mode you requested. You can test this by simple restart windows. Its clear out the memory. If you application starts after a restart windows then this is the problem. If the problem stil exist after a restart then the problem is not windows, and i can't help you either. <br><br></td></tr></table><br>
<a name="573675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jamie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks to all that have posted. I have performed some of the fixes/tests described above. Before making the code changes, I found that if my program gets the unable to set graphics mode error, I can either restart and it works fine or I can re-reun the program and it appears to work fine. I will let you know if the aobve code changes have made any differences.<br><br>Jamie <br><br></td></tr></table><br>
<a name="1282144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brownie</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is my code and it is saying that it cannot set graphics mode??????????<br><br>Can someone help me out please!<br><br><br><br><br><br><br><br>Graphics 1920, 1080, 16, 1<br>AutoMidHandle True<br>SetBuffer BackBuffer()<br><br>playerimage = LoadImage("player.bmp")	;Images<br>close = LoadImage("stars.bmp")<br>far = LoadImage("starsfarther.bmp")<br>blasterimage = LoadImage("Blast.bmp")<br><br>Dim blasterx(10000)<br>Dim blastery(10000)<br>blast = 0<br>blasts = 0<br>scrolly = 0<br><br>While Not KeyDown(1)<br>Cls<br>;	blasts = blast - 1<br><br>	TileImage far, 0, scrolly<br>	TileImage close, 0, scrolly * 2<br>	scrolly = scrolly + 1<br>	If scrolly &gt;= ImageHeight(close)<br>		scrolly = 0<br>	EndIf<br><br> If KeyDown(203)	;when player is holding left key moves ship to left<br>	x = x - 3<br>	 If x &lt;= 0		;if ship is off<br>		x = 1920; - playerimage x<br>	 End If<br>;	Text 0, 0, x<br> End If<br><br> If KeyDown(205);right<br>	x = x + 3<br>	If x &gt;= 1920; - playerimage x<br>		x = 0<br>	End If<br>;	Text 0, 0, x<br> End If<br><br> If KeyDown(200);up<br>	y = y - 10<br>	If y &lt;= 0<br>		y = 1080; - playerimage y<br>	End If<br>;	Text 0, 20, y<br> End If<br><br> If KeyDown(208);down<br>	y = y + 5<br>	If y &gt;= 1080; - playerimage y<br>		y = 0<br>	End If<br>;	Text 0, 20, y<br> End If<br><br>Text 0, 0, x + ", " + y<br><br>	 If KeyDown(30)<br>	    RotateImage playerimage, -90<br>	  ElseIf KeyDown(32)<br>	    RotateImage playerimage, 90<br>	 EndIf<br><br>; If KeyHit(57);space<br>;   If ammo &gt; 0	;if you have ammo, lower ammo amount and shoot, set blaster x and y at ship's x and y<br>;	blasterx(ammo) = x<br>;	blastery(ammo) = y<br>;	ammo = ammo - 1<br>;	blasts = blasts + 1<br>;   End If<br>; End If<br><br>  If KeyDown(57)	;Spacebar<br><br>	blasterx(blast) = x<br>	blastery(blast) = y<br>	blast = blast + 1<br>	<br>  End If<br><br><br>;Text 0, 40, "Ammo: " + ammo<br><br><br><br>;	For loop = 100 To 100 - blasts Step 1<br>;	  If loop &lt; 101<br>;			 If blastery(loop) &gt; 0<br>;				blastery(loop) = blastery(loop) - 10<br>;			 End If<br>;			DrawImage blasterimage, blasterx(loop), blastery(loop)<br>;	  End If<br>;<br>;	 Text 0, 80, "Loop: " + loop + ", Blast: " + blasts<br>;	Next<br>	For l = 0 To blast<br><br>		DrawImage blasterimage, blasterx(l), blastery(l)<br>		Text 0, l * 20, "Blasts: " + blasts + ", Blaster X and Y: " + blasterx(l) + ", " + blastery(l)<br>		blastery(l) = blastery(l) - 10<br>	Next<br>	<br><br><br>DrawImage playerimage, x, y<br><br>Flip<br>	<br>Wend<br><br>End <br><br></td></tr></table><br>
<a name="1282161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> The error typically refers to trying to set a graphics mode which is unsupported by the driver, or, that is incompatible with the display hardware.<br><br><pre class=code>
Graphics 1920, 1080, 16, 1]</pre><br><br>I suspect it may be the 16-bit colour depth that is unsupported, however, to be certain and to identify a display mode that is definitely supported, use the following to check first:<br><br><pre class=code>SetGfxDriver 1

Const GW=1920
Const GH=1080
Const GD=16

If (GfxModeExists(GW,GH,GD))
DebugLog("Mode is supported")
Else
DebugLog("Mode is not supported. Change values!")
End If

Graphics gw,gh,gd,1
</pre> <br><br></td></tr></table><br>
<a name="1282262"></a>

<a name="1282263"></a>

<a name="1282264"></a>

<a name="1282265"></a>

<a name="1282268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems that you can use any width height in windowed mode but you have to use one of the available resolution in fullscreen mode.<br>Here is an example on how to get the available resolutions where the width is superior to the height and height/width &gt;= 0.5 and width/height &lt;=2 and the colors depth is 32bits<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D(640,480,32,2)

Global ResolutionsCount%
Dim ResolutionPWidth%(100)
Dim ResolutionPHeight%(100)

For i% = 1 To CountGfxModes()
 ;DebugLog("")
 ;DebugLog("GfxModeWidth("+i+") = "+GfxModeWidth(i))
 ;DebugLog("GfxModeHeight("+i+") = "+GfxModeHeight(i))
 ;DebugLog("GfxModeDepth("+i+") = "+GfxModeDepth(i))
 If( GfxModeWidth(i) &gt;= 640 And GfxModeHeight(i) &gt;= 480 And GfxModeDepth(i) = 32 And Float(GfxModeHeight(i))/Float(GfxModeWidth(i)) &gt;= 0.5 And Float(GfxModeWidth(i))/Float(GfxModeHeight(i)) &lt;= 2 And GfxModeWidth(i) &gt; GfxModeHeight(i) )
  ResolutionsCount = ResolutionsCount + 1
  Id% = ResolutionsCount
  ResolutionPWidth(Id) = GfxModeWidth(i)
  ResolutionPHeight(Id) = GfxModeHeight(i)
  Print( "Resolution("+Str(Id)+") = "+Str(ResolutionPWidth(Id))+"x"+Str(ResolutionPHeight(Id)) )
 EndIf
Next

WaitKey()

End()
</textarea> <br><br></td></tr></table><br>
<a name="1282308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RemiD<br>Perhaps you need to edit/reference your post here ;-)<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=3180#comments" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=3180#comments</a> <br><br></td></tr></table><br>
<a name="1282309"></a>

<a name="1282310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or create another code archives entry, why not, it can be useful for somebody else someday... <br><br></td></tr></table><br>
<a name="1282323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> True. <br><br></td></tr></table><br>
<a name="1282391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="https://www.youtube.com/watch?v=R16wgQLmqxE" target="_blank">https://www.youtube.com/watch?v=R16wgQLmqxE</a> :D <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
