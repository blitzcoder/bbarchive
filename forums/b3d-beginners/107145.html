<!DOCTYPE html><html lang="en" ><head ><title >why does this fail?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >why does this fail?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >why does this fail?</a><br><br>
<a name="1325497"></a>

<a name="1325498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gauge</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I cannot remember how to do code blocks.  But i tried to do this multiple ways.  After and If statement, or in a subfunction the writeline stream, chr$(13)    does not work.  This sends a blank line to a text base mud that I play that uses ansi.  And i cannot seem to figure it out.  Any suggestions.   The one that its set for under the comment works and repeatedly hits enter at the menu.  the one in the if then fails.  <br><br>Graphics3D 800,600,16,2<br>Global stream<br>Global msg$<br><br>Print "Test server starting up...."<br>;Stream=OpenTCPStream("10.0.0.2",4000)<br>stream=OpenTCPStream("dsl-mud.org",4000)<br><br>If stream Then<br>Print "*Connected*"<br>Else<br>Print "failed to connect..."<br>EndIf<br><br>Print "running<br><br>WriteLine stream,"no"<br>p.player=New player<br>p\stream=stream<br><br><br><br>WriteLine STREAM, Chr$(13)<br>While Not KeyHit(1)<br>For p.player = Each player<br><br>If ReadAvail(p\stream) Then<br>;While ReadAvail(STREAM)<br>Print "reading"<br>msg$=ReadLine(p\stream)<br>Print msg$<br>   ;n=ReadByte(stream)<br>   ;Print Chr$(n)<br>   ;Print n<br>;WaitKey()<br>;Wend<br>EndIf<br>;this one works.....<br><br>WriteLine p\stream, Chr$(13)<br><br>If KeyHit(57) Then <br>;;;none of the next 3 work at all<br>WriteLine p\stream,Chr$(13)<br>;writeline stream, chr$(13)<br>;writeline p\stream, ""<br>Print "writing"<br>EndIf<br><br>Next<br><br><br>Wend<br><br><br>End<br><br>Type player<br>Field stream<br>End Type <br><br></td></tr></table><br>
<a name="1325504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> writeline stream, chr$(13) writes two empty lines. Instead writeline stream,"" writes just one linebreak, which may or may not be understood as a linefeed by the server. I think http protocol servers expect chrs 10 as linebreaks, no? <br><br></td></tr></table><br>
<a name="1325607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gauge</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh that could help. However the qriteline in the while/loop works fine.<br>But the writeline in the if/then fails. Also it will not work in a function either. Anyway I try it. <br><br></td></tr></table><br>
<a name="1325630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You would be better using writebyte if you just want to send a single byte as writeline terminates the string with two bytes. <br><br></td></tr></table><br>
<a name="1325633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> per the Blitz3D docs on WriteLine<br><div class="quote">  Each line of text is automatically terminated with an "end-of-line" mark, consisting of a Carriage Return character followed by a LineFeed character. (i.e. 0Dh, 0Ah ) <br></div><br><br>So when you use WriteLine, you send your explicit Chr$(13) and B3D adds a Chr$(13)+Chr$(10).  If you need to write one, and only one CHr(13), you are better off using WriteByte Stream,13 if expecting 8 bit characters or WriteShort Stream,13 if expecting 16 bit characters. (No need for the Chr$() in this instance). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
