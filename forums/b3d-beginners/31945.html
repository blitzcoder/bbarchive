<!DOCTYPE html><html lang="en" ><head ><title >Weird Problem - Stuck and Desperate!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Weird Problem - Stuck and Desperate!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Weird Problem - Stuck and Desperate!</a><br><br>
<a name="341432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Spomo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello folks,<br><br>I'm working on a space shooter; and here's my problem.<br><br>I am basically throwing some alien ships on the screen at random X and Y locations. Now, we all know that this method can cause some of the images to overlap. However, I am trying to write a small routine that checks each alien against one another and if they are within 50 pixels of each other on the Y plane, then one of them gets moved.<br><br>I wrote the function which *should* work. In fact, when I execute it and use some "print" statements to check my variables to make sure the math and comparisons are working properly, all is well. The code works as I intended.<br><br>HOWEVER.....<br><br>When I transfer the code into my Space Game engine, overlap does occur. Can someone explain to me why it works fine when I use "print" to display the co-ordinates but it misbehaves when I'm blitting to the screen?<br><br>Here is the code:<br><br>;----------<br>Function Initialize_Aliens ()<br><br>Alien_Count = 0<br>SeedRnd MilliSecs() <br><br>For Alien_Index = 1 To NUM_ALIENS<br>Aliens(Alien_Index)=New Alien<br>Aliens(Alien_Index)\Alien_X=800+(Rnd(0,500))<br>Aliens(Alien_Index)\Alien_Y=100+(Rnd(0,500))<br>Aliens(Alien_Index)\Alive=1<br>Alien_Count = Alien_Count+1<br>Next<br><br>;Below is the routine that is giving me the problems!!;<br><br>For Alien_Index = 1 To NUM_ALIENS<br>For Alien_Work_Counter= 1 To NUM_ALIENS <br><br>Alien_Math=Aliens(Alien_Index)\Alien_Y-Aliens (Alien_Work_Counter)\Alien_Y<br><br>(NOTE: That line above is all on one line in my program. This website won't let me post it as one line...)<br><br>Alien_Math=Abs(Alien_Math) <br><br><br>If Alien_Math &lt;= 50 And Alien_Index &lt;&gt; Alien_Work_Counter Then Aliens(Alien_Index)\Alien_Y=Aliens(Alien_Index)\Alien_Y+50 <br><br>(Please note that the above line beginning with "If Alien_Math &lt;= 50" is also all on one line in my editor.) <br><br>Next<br>Next<br><br>End Function<br><br>;--------<br>As you can see, I am subtracting one Y position from another and then using the ABS command to turn it positive. If that number is less than or equal to 50, I increase the value of the Y position of the Alien Craft by 50.<br><br>Again, it works using "print" to check the variables. It does not work correctly when I blit my bitmaps to the screen.<br><br>So....<br><br>What am I doing wrong?<br><br>Thanks to all in advance.<br><br>-Spo-<br><br>PS: I do have all my variables defined as global, so I can access them throughout the program. (Yes, I know this is sloppy..... ) <br><br></td></tr></table><br>
<a name="341439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, it seems to me that when you change the position of an alien, it's possible that you're moving it onto another alien that you already checked (and won't check again).  Of course I could be getting mixed up, but it seems like that's probably what's happening.<br><br>Another method you might try (off the top of my head) is to use a linked list representing pixels on the Y axis, and delete the appropriate list nodes when their "pixels" become unavailable.  Something like this:<br><pre class=code>Type y_pixel
  Field y
End Type

For i = 0 To MAX_Y
  temp.y_pixel = New y_pixel
  temp\y = i
  available% = available + 1
Next

; then...
; for each alien ship...
; Pick a random number from 0 to "available" (we'll call it N)
; iterate from First y_pixel to Nth y_pixel
; create the alien ship at that y_pixel\y value
; delete that type and the 50 types Before and After (or until start or end of list)
; for each type deleted, subtract 1 from "available"</pre><br>The advantage to this method is that you don't have to "keep trying" to find the right coordinate, and also you know that every type that's in the list is available. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
