<!DOCTYPE html><html lang="en" ><head ><title >Exiting Parts Of A Game</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Exiting Parts Of A Game</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Exiting Parts Of A Game</a><br><br>
<a name="214791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I was wondering if you could put me on the right track with this problem?<br><br>What I would like to happen is to be able to exit back to the title screen from the main game, and when on the title screen exit the game proper, by using escape.<br><br>I am using the following code, but it exits completly no matter which area your at<br><br><br><pre class=code>
;Example

setup_variables() ; sets up any variables

While not keyhit(_esc)

title_screen()
main_game()


Wend
savescores()

End
</pre><br><br>I know Im doing something drastically wrong.<br><br>Please could you show me a better method, if im going about it the wrong way?<br><br>Many Thanks, Mikey F <br><br></td></tr></table><br>
<a name="214793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tiger</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try to change _esc to 1.<br><br>Bye. <br><br></td></tr></table><br>
<a name="214796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> First make the main game loop an infinite loop:<br>While 1<br><br>Now in the title_screen function check for the Escape key being hit.  If it is, End:<br>Function title_screen()<br>if KeyHit(1) End<br>End Function <br><br></td></tr></table><br>
<a name="214799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> what does " while 1" mean? <br><br></td></tr></table><br>
<a name="214829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is shorthand for "while 1 is true."  Since that is always true (in Blitz "1" is a synonym for "true") you get an infinite loop.  That's a pretty common way to do infinite loops in just about all programming languages.  As in:<br>While 1<br>title_screen()<br>Wend<br><br>Then just make sure the program executes End at some point inside the loop.  "End" exits the program immediately. <br><br></td></tr></table><br>
<a name="214831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> the while loop repeats until the expression you give it returns a false. Usually you would do something like while a &lt; 10. By typing while 1 what you are doing is creating an infinate loop because 1 will always return true. <br><br></td></tr></table><br>
<a name="214834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys.<br><br>Are there any other methods, for selecting which parts of the game to go to? <br><br></td></tr></table><br>
<a name="214843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Binary_Moon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> while 1 - wend<br><br>Or you could do it the 'proper' way and use <br><br>repeat - forever :)<br><br>Obviously it isn't really the proper way but it saves adding a check every loop. Won't give you any noticeable speed gains but I think it looks nicer. Certainly easier to read/ understand. <br><br></td></tr></table><br>
<a name="214845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're exiting the both the game and the title screen with Esc, then you need to wait until Esc is released before exiting the game portion of code.  It's quite easy to accomplish.  Once you know that Esc has been pressed, wait until it's not before continuing to the next section of code.<br><br><pre class=code>
Function game()
  Repeat
    ...game...
  Until KeyDown(1)

  ; now wait for Esc to be released
  Repeat
  Until Not KeyDown(1)
End Function
</pre><br><br>Hope that points you in the right direction. <br><br></td></tr></table><br>
<a name="214899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use a simple state engine to figure out what part of the game you are in. Create a variable which will store what stage the game is in. In the main loop you can then use this variable to decide what to do.<br><br>eg.<br><br>Global gameState = 0<br><br>while gameState != 2<br> select gameState<br>  case 0:<br>   ; We are in the title screen<br>   TitleScreen()<br>  case 1:<br>   ; we are in the game<br>   MainGame()<br>wend<br><br>The TitleScreen() function can then change the GameState to 2 if the Esc key is pressed.<br>The mainGame function can change the state back to 0 when the game ends.<br><br>You can further improve readablitiy by creating constants for the game states.<br><br>Const GAME_TITLE = 0<br>Const GAME_PLAY = 1<br>Const GAME_END = 2<br><br>Now the code will be <br><br>Global gameState = GAME_TITLE<br><br>while gameState != GAME_END<br> select gameState<br>  case GAME_TITLE:<br>   ; We are in the title screen<br>   TitleScreen()<br>  case GAME_PLAY:<br>   ; we are in the game<br>   MainGame()<br>wend<br><br>This is basically how I tend to write my code. If later on you decide you want another screen to perhaps allow the player to change the controls you just insert a new state.<br><br>Const GAME_TITLE = 0<br>Const GAME_SETCONTROLS = 1<br>Const GAME_PLAY = 2<br>Const GAME_END = 3<br><br>Global gameState = GAME_TITLE<br><br>while gameState != GAME_END<br> select gameState<br>  case GAME_TITLE:<br>   ; We are in the title screen<br>   TitleScreen()<br>  case GAME_SETCONTROLS:<br>   ; we are in the game<br>   SetControls()<br>  case GAME_PLAY:<br>   ; we are in the game<br>   MainGame()<br>wend<br><br>Now your TitleScreen can check if the users hits the C key or clicks on a button on the screen then it can set the gameState to GAME_SETCONTROLS.<br><br>The SetControls function can set the state back to GAME_TITLE when it is finished.<br><br>Hope that makes sense. <br><br></td></tr></table><br>
<a name="215032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberseth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't listen to me.<br>It's already been said what I was going to say. <br><br></td></tr></table><br>
<a name="215213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> So would I then have the functions like this?<br><br><pre class=code>

Function Title_Screen()

While Not Keyhit(1) ;If I havent pressed escape key

 Cls
 Text 320,240,"T I T L E"
  
 If keyhit(57) then GAME_STATE=MAIN_GAME ;space bar goes to next GAME_STATE 

Flip

Wend
GAME_STATE=GAME_END
End Function

Function Main_Game()

While Not Keyhit(1)

Cls
Text 320,240,"M A I N    G A M E"

Flip
Wend
GAME_STATE=TITLE_SCREEN ; or the next section e.g game over/hiscore etc?

End Function

</pre><br><br>Thanks ever so much guys!! <br><br></td></tr></table><br>
<a name="215214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
global ExitGame = 0

while not ExitGame

whattodo = MenuScreen()
if whattodo = 1
 DoGame()
end if
ShowHighScores()

wend

function MainMenu()

while not exitfunc
 if keyhit(1)
  exitfunc = 1
  exitgame = 1
  return 0
 end if
 if keyhit(57)
  exitfunc = 1
  return 1
 end if
end function
</pre> <br><br></td></tr></table><br>
<a name="215292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just want to add here that instead of saying<br><pre class=code>While 1</pre>you can also say<br><pre class=code>While True</pre>since Blitz knows the keywords True and False. Using 1 is not wrong, but using True makes the code a bit easier to read. The same is true for the example in the message just above this one; exitgame = 1 could be written as exitgame = True, return 0 as return False etc. <br><br></td></tr></table><br>
<a name="215300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks ever so much guys for pointing me in the right way, much appreciated. <br><br></td></tr></table><br>
<a name="215472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drago</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> btw, you might want to flush the keys after you exit the game to the amin menu cause somethime blitz checks the input buffer and it still has the esc key it it, so basically iif the person presses esc in game, then it might also quit from the main menu.<br><br>this is done easily with the <pre class=code>FlushKeys</pre>command. <br><br></td></tr></table><br>
<a name="215685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tend not to rely on the Flush commands, because for some reason they don't appear to completely clear the buffer.  Don't know why, but I've found myself using the Repeat...Until Not KeyDown() route quite a few times - even after using FlushKeys/Mouse. <br><br></td></tr></table><br>
<a name="215989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or, like in the examples, use KeyHit() instead of KeyDown(). If the key is hit once but not released, KeyHit() will register the key being hit only once, while using KeyDown would result in "hits" being registered continuously. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
