<!DOCTYPE html><html lang="en" ><head ><title >openTCPstream in loop ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >openTCPstream in loop ?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >openTCPstream in loop ?</a><br><br>
<a name="1228750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have I to place the OpenTCPStream command in the main loop, or is it exclued ? <br>I don't find any info in the forums . (I have not read all)<br><br>I know how to use AcceptTCPStream ( in the loop ) , <br>but I am in doubt concerning OpenTCPStream . <br>It seems that this is slowing the main loop speed . <br>Is that command like CreateTCPServer , and may be called only in the beginning , before the loop . <br><br>Thanks . <br><br></td></tr></table><br>
<a name="1230991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi <br><br>Yes one can put it anywhere in code. but it will make program slow.<br><br>like 8000 ms delays. Specialy if it fails.<br><br>I recomend look at code arcive and find your own way.<br><br>Remember after open a stream dont Close it. instead reuse the stream untill it breaks of it self.<br><br>1) OpenTCPStream<br>2) In main Loop use the stream with WriteBytes,Readbytes. <br><br>(not to me self To optimise Blitz basic TCP ip never send more than 1800 bytes untill recived its a feature not a bug. if you do it also slow down :/) <br><br></td></tr></table><br>
<a name="1231133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gauge</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Years ago I was making a mud, and i have a little code.  I don't know what type of file your trying to open/stream.  whats the purpose of the stream?  <br><br> if your attempting to send information, then a tcp stream should always stay open.  Then pass information from the server to the client using writeline, and readline or readbyte. <br><br>If your stream needs to open/close you should be using udp.<br>  <br><br>I'd be more than happy to give you a sample, server, client, game, whatever. <br><br></td></tr></table><br>
<a name="1231134"></a>

<a name="1231135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gauge</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> OH a little code:<br><br>note while keep a tcp stream open, you have to make sure you have a stream avail with information or blitz shuts down.<br><br>(probably too much)<br><br>[/B]<br>global server<br><br><br>server=createtcp server()<br>if not server then<br>print "server failed to start"<br>end<br>elseif<br>print "*connected"<br>endif<br><br>While()   ;main loop<br>stream=acceptcpstream(server)<br>If stream then<br>p.player =new player<br>p\stream=stream<br>writeline p\stream, "Whats your name?"<br>delay 100   ;nothing else to put here yet<br><br>and check each stream<br>for p.player=each player<br>if readavail(p\stream) msg$=readline(p\stream)<br>;;;;or yyou could use the following:<br>;;;;while  readavail(p\stream) then<br>;;;;b=readbyte(p\stream)<br>;;;;msg$=msg$+chr$(b)<br>;;;;wend<br>for pp.player=each player<br>writeline pp\stream msg$<br>next<br>endif<br><br>wend<br><br>type Player<br>field stream<br>field name<br>field msg$<br>end type <br><br></td></tr></table><br>
<a name="1231737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> An extract of my code , the 'play' loop . <br>Why does Not it work when I suppress <br>the two lines with OpenTCPStream And with CloseTCPStream ? <br>I have Not used Type declarations For MULTIplayers yet , only arrays . <br><br><br><br><br><br>;;;;<br><br>; inits ... <br>;if serverexist then <br>; partie = joinnetgame = 1 ...<br>;else <br>;createserver <br>; partie = hostnetgame = 2 ...<br><br>strStream48cli = OpenTCPStream ( adresserveur$ , 8080 ) ; , 1 ) <br>; 1 : absolutely needed for a local net/play ??? <br><br><br><br><br><br>While Not KeyHit ( 27 ) <br><br>		If MULTI = True Then <br>			For Nmodele = 0 To 3 <br>				PositionEntity playerMULTI ( Nmodele ) , Xplayer0MULTI ( Nmodele ) , Yplayer0MULTI ( Nmodele ) , Zplayer0MULTI ( Nmodele ) ; , 1 <br>				RotateEntity playerMULTI ( Nmodele ) , pitchplayer0MULTI ( Nmodele ) , yawplayer0MULTI ( Nmodele ) , rollplayer0MULTI ( Nmodele ) ; , 1 <br>			Next <br>		EndIf <br><br><br>;		CaptureWorld <br>		UpdateWorld <br>		RenderWorld ; tween# <br>		Flip <br><br><br>		If MULTI = True Then <br>			Xplayer0MULTI ( numplayer0 ) = EntityX ( player0 , 1 )<br>			Yplayer0MULTI ( numplayer0 ) = EntityY ( player0 , 1 )<br>			Zplayer0MULTI ( numplayer0 ) = EntityZ ( player0 , 1 )<br>			pitchplayer0MULTI ( numplayer0 ) = EntityPitch ( player0 , 1 )<br>			yawplayer0MULTI ( numplayer0 )   = EntityYaw ( player0 , 1 )<br>			rollplayer0MULTI ( numplayer0 )  = EntityRoll ( player0 , 1 ) <br>			If partie = 2 Then <br>				strStream48ser = AcceptTCPStream ( TCP48 ) <br>				If strStream48ser &lt;&gt; 0 Then <br>					Nmodele = ReadInt ( strStream48ser ) <br>					playerID  ( Nmodele ) = ReadInt ( strStream48ser ) <br>					numplayer0pris ( Nmodele ) = ReadInt ( strStream48cli ) <br>					Xplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser ) <br>					Yplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser ) <br>					Zplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser ) <br>					pitchplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser ) <br>					yawplayer0MULTI ( Nmodele )   = ReadInt ( strStream48ser ) <br>					rollplayer0MULTI ( Nmodele )  = ReadInt ( strStream48ser ) <br>					For Nmodele = 0 To 3 <br>						WriteInt strStream48ser , Nmodele <br>						WriteInt strStream48ser , playerID ( Nmodele ) <br>						WriteInt strStream48ser , numplayer0pris ( Nmodele ) <br>						WriteInt strStream48ser , Xplayer0MULTI ( Nmodele ) <br>						WriteInt strStream48ser , Yplayer0MULTI ( Nmodele ) <br>						WriteInt strStream48ser , Zplayer0MULTI ( Nmodele ) <br>						WriteInt strStream48ser , pitchplayer0MULTI ( Nmodele ) <br>						WriteInt strStream48ser , yawplayer0MULTI ( Nmodele ) <br>						WriteInt strStream48ser , rollplayer0MULTI ( Nmodele ) <br>					Next <br>				EndIf <br>			ElseIf partie = 1 Then <br>	;			strStream48cli = OpenTCPStream ( adresserveur$ , 8080 ) ; ( DottedIP$ ( HOSTplayerID ) , 8080 ) <br>	;			If strStream48cli &lt;&gt; 0 Then <br>					WriteInt strStream48cli , numplayer0 <br>					WriteInt strStream48cli , playerID ( numplayer0 ) <br>					WriteInt strStream48cli , numplayer0pris ( numplayer0 ) ; 1 ; <br>					WriteInt strStream48cli , Xplayer0MULTI ( numplayer0 ) ; EntityX ( player0 , 1 ) ; <br>					WriteInt strStream48cli , Yplayer0MULTI ( numplayer0 ) ; EntityY ( player0 , 1 ) ; <br>					WriteInt strStream48cli , Zplayer0MULTI ( numplayer0 ) ; EntityZ ( player0 , 1 ) ; <br>					WriteInt strStream48cli , pitchplayer0MULTI ( numplayer0 ) ; EntityPitch ( player0 , 1 ) ; <br>					WriteInt strStream48cli , yawplayer0MULTI ( numplayer0 ) ; EntityYaw ( player0 , 1 ) ; <br>					WriteInt strStream48cli , rollplayer0MULTI ( numplayer0 ) ; EntityRoll ( player0 , 1 ) ; <br>					For Nmodele = 0 To 3 <br>						cubemodele = ReadInt ( strStream48cli ) ; Nmodele = ; cubemodele = sa dépane <br>						playerID ( Nmodele ) = ReadInt ( strStream48cli ) <br>						numplayer0pris ( Nmodele ) = ReadInt ( strStream48cli ) <br>						Xplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli ) <br>						Yplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli ) <br>						Zplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli ) <br>						pitchplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli ) <br>						yawplayer0MULTI ( Nmodele )   = ReadInt ( strStream48cli ) <br>						rollplayer0MULTI ( Nmodele )  = ReadInt ( strStream48cli ) <br>					Next <br>	;				CloseTCPStream strStream48cli <br>	;			EndIf <br>			EndIf <br>			<br>Wend <br><br><br><br><br><br>CloseTCPStream strStream48cli <br><br>End <br><br><br><br><br><br>;;;; <br><br></td></tr></table><br>
<a name="1231804"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gauge</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> what is your good doing/not doing from when you the the open/close tcp streams  enabled and what does it do when disabled?<br><br>Do not reopen a tcpstream, you should only open a tcpstream when the player connects.  Then that stream remains open. until they are done playing.  And keep your server stream open. <br><br>I can't really make heads/tails out of your code, however have declared the streams as a global?  global strstream48ser and you client streams if not.  I think your losing some info/data somewhere, make sure all your globals are declared.<br><br>Also the more write/reads you have write int to stream etc the more slow down your going to have.  It would be better for you to add them all to one line writethem and readthem.  Good luck <br><br></td></tr></table><br>
<a name="1231851"></a>

<a name="1231852"></a>

<a name="1231853"></a>

<a name="1231854"></a>

<a name="1231855"></a>

<a name="1231856"></a>

<a name="1231857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics3D(800, 600, 0, 2)

Global game_name$ = "Test"

Global adresserveur$ = "127.0.0.1"
Global port% = 8080

Global strStream48ser

Global strStream48cli = OpenTCPStream(adresserveur$, port%)
If Not strStream48cli Then RuntimeError "Could not connect to game: '"+game_name$+"' on server: '"+adresserveur$+": "+port%+"'..."

Global max_players = 0

Dim playerMulti(max_players)

Dim Xplayer0MULTI#(max_players)
Dim Yplayer0MULTI#(max_players)
Dim Zplayer0MULTI#(max_players)

Dim pitchplayer0MULTI#(max_players)
Dim yawplayer0MULTI#(max_players)
Dim rollplayer0MULTI#(max_players)

Dim playerID(max_players)

Dim numplayer0pris(max_players)

If strStream48cli Then partie = JoinNetGame(game_name$, adresserveur$)
If strStream48cli = 0 Then partie = HostNetGame(game_name$)

Global MULTI = True

Global cam = CreateCamera()
PositionEntity cam, 0, 1, 0
CameraRange cam, .01, 10000.0

Global light = CreateLight()
RotateEntity light, 45, 45, 0

Global player0 = CreateCube()
PositionEntity(player0, 0, 1, 10, 1)

api_ShowWindow(SystemProperty$("AppHWND"), 1)

	While Not KeyDown(1)

		While Not Eof(strStream48cli)
		
			If MULTI = True Then 
	
				Xplayer0MULTI#(numplayer0) = EntityX#(player0, 1)
				Yplayer0MULTI#(numplayer0) = EntityY#(player0, 1)
				Zplayer0MULTI#(numplayer0) = EntityZ#(player0, 1)
		
				pitchplayer0MULTI#(numplayer0) = EntityPitch#(player0, 1)
				yawplayer0MULTI#(numplayer0) = EntityYaw#(player0, 1)
				rollplayer0MULTI#(numplayer0) = EntityRoll#(player0, 1)

				If partie = 1 Then 
										
					WriteInt strStream48cli, numplayer0 
		
					WriteInt strStream48cli, playerID(numplayer0) 
										
					WriteInt strStream48cli, numplayer0pris(numplayer0)
										
					WriteInt strStream48cli, Xplayer0MULTI#(numplayer0)
					WriteInt strStream48cli, Yplayer0MULTI#(numplayer0)
					WriteInt strStream48cli, Zplayer0MULTI#(numplayer0)
	
					WriteInt strStream48cli, pitchplayer0MULTI#(numplayer0)
					WriteInt strStream48cli, yawplayer0MULTI#(numplayer0)
					WriteInt strStream48cli, rollplayer0MULTI#(numplayer0)
										
				Else If partie = 2 Then
								
					strStream48ser = AcceptTCPStream(strStream48cli)
	
					If strStream48ser Then Nmodele = ReadInt(strStream48ser) 
									
					playerID(Nmodele) = ReadInt(strStream48ser)
									
					numplayer0pris(Nmodele) = ReadInt(strStream48cli) 

					Xplayer0MULTI#(Nmodele) = ReadFloat(strStream48ser) 
					Yplayer0MULTI#(Nmodele) = ReadFloat(strStream48ser) 
					Zplayer0MULTI#(Nmodele) = ReadFloat(strStream48ser) 
									
					pitchplayer0MULTI#(Nmodele) = ReadFloat(strStream48ser) 
					yawplayer0MULTI#(Nmodele) = ReadFloat(strStream48ser) 
					rollplayer0MULTI#(Nmodele) = ReadFloat(strStream48ser) 

					For Nmodele = 0 To 3

						cubemodele = ReadInt(strStream48cli)
												
						playerID(Nmodele) = ReadInt(strStream48cli)
		
						numplayer0pris(Nmodele) = ReadInt(strStream48cli)
												
						Xplayer0MULTI#(Nmodele) = ReadFloat(strStream48cli)
						Yplayer0MULTI#(Nmodele) = ReadFloat(strStream48cli)
						Zplayer0MULTI#(Nmodele) = ReadFloat(strStream48cli)
												
						pitchplayer0MULTI#(Nmodele) = ReadFloat(strStream48cli)
						yawplayer0MULTI#(Nmodele) = ReadFloat(strStream48cli)
						rollplayer0MULTI#(Nmodele) = ReadFloat(strStream48cli)

						WriteInt strStream48ser, Nmodele

						WriteInt strStream48ser, playerID(Nmodele) 

						WriteInt strStream48ser, numplayer0pris(Nmodele) 

						WriteInt strStream48ser, Xplayer0MULTI#(Nmodele) 
						WriteInt strStream48ser, Yplayer0MULTI#(Nmodele) 
						WriteInt strStream48ser, Zplayer0MULTI#(Nmodele) 

						WriteInt strStream48ser, pitchplayer0MULTI#(Nmodele) 
						WriteInt strStream48ser, yawplayer0MULTI#(Nmodele) 
						WriteInt strStream48ser, rollplayer0MULTI#(Nmodele) 

						If MULTI = True Then 
							
							PositionEntity playerMULTI(Nmodele), Xplayer0MULTI#(Nmodele), Yplayer0MULTI#(Nmodele), Zplayer0MULTI#(Nmodele) ;, 1 
							RotateEntity playerMULTI(Nmodele), pitchplayer0MULTI#(Nmodele), yawplayer0MULTI#(Nmodele), rollplayer0MULTI#(Nmodele) ;, 1 
				
						EndIf

					Next
							
				EndIf
								
			EndIf
			
			If KeyHit(1) Then End

		Wend

		UpdateWorld
		RenderWorld

		Flip 

	Wend

	CloseTCPStream strStream48cli

End</textarea> <br><br></td></tr></table><br>
<a name="1232994"></a>

<a name="1233270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Gauge, <br>Thank you for your precisions .<br>I will go back to my PC and try some things.<br>I have to translate (oups!) exactly what you mean.<br>I wonder where in my code the datas are lost and the stream closed.<br>The datas are all globals and no other trace of closestream in my code .<br>See you.<br>Thank. <br><br></td></tr></table><br>
<a name="1235621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello to all the members of the blitzbasic forum <br>Is there someone who can help me to correct my LAN game Galaxang (space 3D) ? <br>I have put the multiplayer chunk of the main loop . <br>I have modified? it and expose it in this post .<br>Status :<br>I have connected two Windows 7 home PCs with a blue LAN cable in their net plugs . My net is declared as "Reseau indefini" (FR : windows 7 "net and connections" page ) . <br>Is it normal ? <br>Can it be the reason why my program loop does not work ? <br>Is there a configuration in windows that I have to do to use a LAN net ? <br><br>The loop chunk works with this line : <br>;				strStream48cli = OpenTCPStream ( adresserveur$ , 8080 ) ; ( DottedIP$ ( HOSTplayerID ) , 8080 ) <br>But it slows too much the loop, and I know I don't have to do like that . <br><br>Thank you for your answers and suggestions . <br>The Gauge example does not work anymore for me . <br><br>.pabonreso<br><br><br><br><br><br><br><br><br><br><br>		If MULTI = True Then <br><br>			If parentplayer0 = pivotterrainchateau Then <br>				Xplayer0MULTI ( numplayer0 ) = EntityX ( player0 , 0 ) ; Xplayer0 <br>				Yplayer0MULTI ( numplayer0 ) = EntityY ( player0 , 0 )<br>				Zplayer0MULTI ( numplayer0 ) = EntityZ ( player0 , 0 )<br>;				pitchplayer0MULTI ( numplayer0 ) = EntityPitch ( player0 , 0 )<br>;				yawplayer0MULTI ( numplayer0 )   = EntityYaw ( player0 , 0 )<br>;				rollplayer0MULTI ( numplayer0 )  = EntityRoll ( player0 , 0 ) <br>			Else ; If parentplayer0 = 0 , pivotTEMP , ou autres Then <br>				Xplayer0MULTI ( numplayer0 ) = EntityX ( player0 , 1 )<br>				Yplayer0MULTI ( numplayer0 ) = EntityY ( player0 , 1 )<br>				Zplayer0MULTI ( numplayer0 ) = EntityZ ( player0 , 1 )<br>;				pitchplayer0MULTI ( numplayer0 ) = EntityPitch ( player0 , 1 )<br>;				yawplayer0MULTI ( numplayer0 )   = EntityYaw ( player0 , 1 )<br>;				rollplayer0MULTI ( numplayer0 )  = EntityRoll ( player0 , 1 ) <br>			EndIf <br>			pitchplayer0MULTI ( numplayer0 ) = EntityPitch ( player0 ) ; , 1 )<br>			yawplayer0MULTI ( numplayer0 )   = EntityYaw ( player0 ) ; , 1 )<br>			rollplayer0MULTI ( numplayer0 )  = EntityRoll ( player0 ) ; , 1 ) <br>			<br>			If KeyHit ( 57 ) Stop ; 57 = Espace ; DebugLog verifs<br><br>			If partie = 2 Then <br><br>				strStream48ser = AcceptTCPStream ( TCP48 ) <br>				DebugLog "TCP48  = " + TCP48 <br>				DebugLog "strStream48ser = " + strStream48ser <br>;				DebugLog "ReadAvail ( strStream48ser ) = " + ReadAvail ( strStream48ser ) <br>;				DebugLog "strStream48cli = " + strStream48cli <br>;				DebugLog "ReadAvail ( strStream48cli ) = " + ReadAvail ( strStream48cli ) <br>				If strStream48ser &lt;&gt; 0 Then <br>					If ReadString$ ( strStream48ser ) = "coordscli" Then <br>						Nmodele = ReadInt ( strStream48ser ) <br>						playerID  ( Nmodele ) = ReadInt ( strStream48ser ) <br>						numplayer0pris ( Nmodele ) = ReadInt ( strStream48ser ) <br>						Xplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser ) <br>						Yplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser ) <br>						Zplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser ) <br>						pitchplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser ) <br>						yawplayer0MULTI ( Nmodele )   = ReadInt ( strStream48ser ) <br>						rollplayer0MULTI ( Nmodele )  = ReadInt ( strStream48ser ) <br>					EndIf <br>;				EndIf <br>					WriteString strStream48ser , "coordsser" <br>					For Nmodele = 0 To 3 <br>						WriteInt strStream48ser , Nmodele <br>						WriteInt strStream48ser , playerID ( Nmodele ) <br>						WriteInt strStream48ser , numplayer0pris ( Nmodele ) <br>						WriteInt strStream48ser , Xplayer0MULTI ( Nmodele ) <br>						WriteInt strStream48ser , Yplayer0MULTI ( Nmodele ) <br>						WriteInt strStream48ser , Zplayer0MULTI ( Nmodele ) <br>						WriteInt strStream48ser , pitchplayer0MULTI ( Nmodele ) <br>						WriteInt strStream48ser , yawplayer0MULTI ( Nmodele ) <br>						WriteInt strStream48ser , rollplayer0MULTI ( Nmodele ) <br>					Next <br>					DebugLog "TCP48  = " + TCP48 <br>					DebugLog "strStream48ser = " + strStream48ser <br>;					DebugLog "ReadAvail ( strStream48ser ) = " + ReadAvail ( strStream48ser ) <br>;					DebugLog "strStream48cli = " + strStream48cli <br>;					DebugLog "ReadAvail ( strStream48cli ) = " + ReadAvail ( strStream48cli ) <br>;				CloseTCPStream strStream48ser <br>				EndIf <br>		<br>			ElseIf partie = 1 Then <br>			<br>;				strStream48cli = OpenTCPStream ( adresserveur$ , 8080 ) ; ( DottedIP$ ( HOSTplayerID ) , 8080 ) <br>;				DebugLog "TCP48  = " + TCP48 <br>;				DebugLog "strStream48ser = " + strStream48ser <br>;				DebugLog "ReadAvail ( strStream48ser ) = " + ReadAvail ( strStream48ser ) <br>				DebugLog "strStream48cli = " + strStream48cli <br>				DebugLog "ReadAvail ( strStream48cli ) = " + ReadAvail ( strStream48cli ) <br>				If strStream48cli &lt;&gt; 0 ; And ReadAvail ( strStream48cli ) = 0 Then <br>					WriteString strStream48cli , "coordscli" <br>					WriteInt strStream48cli , numplayer0 <br>					WriteInt strStream48cli , playerID ( numplayer0 ) <br>					WriteInt strStream48cli , numplayer0pris ( numplayer0 ) ; 1 ; <br>					WriteInt strStream48cli , Xplayer0MULTI ( numplayer0 ) ; EntityX ( player0 , 1 ) ; <br>					WriteInt strStream48cli , Yplayer0MULTI ( numplayer0 ) ; EntityY ( player0 , 1 ) ; <br>					WriteInt strStream48cli , Zplayer0MULTI ( numplayer0 ) ; EntityZ ( player0 , 1 ) ; <br>					WriteInt strStream48cli , pitchplayer0MULTI ( numplayer0 ) ; EntityPitch ( player0 , 1 ) ; <br>					WriteInt strStream48cli , yawplayer0MULTI ( numplayer0 ) ; EntityYaw ( player0 , 1 ) ; <br>					WriteInt strStream48cli , rollplayer0MULTI ( numplayer0 ) ; EntityRoll ( player0 , 1 ) ; <br>					If ReadString$ ( strStream48cli ) = "coordsser" Then <br>						For Xmodele = 0 To 3 <br>							Nmodele = ReadInt ( strStream48cli ) ; Nmodele = cubemodele = : sa dépane <br>							playerID ( Nmodele ) = ReadInt ( strStream48cli ) <br>							numplayer0pris ( Nmodele ) = ReadInt ( strStream48cli ) <br>							Xplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli ) <br>							Yplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli ) <br>							Zplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli ) <br>							pitchplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli ) <br>							yawplayer0MULTI ( Nmodele )   = ReadInt ( strStream48cli ) <br>							rollplayer0MULTI ( Nmodele )  = ReadInt ( strStream48cli ) <br>						Next <br>					EndIf <br>;					DebugLog "TCP48  = " + TCP48 <br>;					DebugLog "strStream48ser = " + strStream48ser <br>;					DebugLog "ReadAvail ( strStream48ser ) = " + ReadAvail ( strStream48ser ) <br>					DebugLog "strStream48cli = " + strStream48cli <br>					DebugLog "ReadAvail ( strStream48cli ) = " + ReadAvail ( strStream48cli ) <br>				EndIf <br>		<br>			EndIf <br>			<br>		EndIf <br><br></td></tr></table><br>
<a name="1235622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Prym.. Please use "[ codebox][ /codebox]" (remove the spaces) around your source code so it doesn't take up the whole forum.<br><br>Thank You!<br><br>Sincerely, <br><br>~GF <br><br></td></tr></table><br>
<a name="1235788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Prym <br><br>please read this post its explains tcpip networking sample.<br>its clearly wee need turtorial about this :)<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=76772" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=76772</a> <br><br></td></tr></table><br>
<a name="1235835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Wings and Guy Fawkes, <br>Thank you for your suggestion.<br>I run to read this post . <br><br>I hope that my question has been posted in the right place . <br>I have asked if my local net configuration was correct . <br>I am in doubt about it . <br>I am not connected to internet . Can some configuration be missing ? <br>Is it enough for testing my LOCAL multiplayer section ? <br>I see that the client stream is cut for every pass of my program loop . <br><br>Thanks <br>I can go and try . <br><br></td></tr></table><br>
<a name="1235842"></a>

<a name="1235845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please see my <a href="/posts.php?topic=102935" target="_blank">K-Netlib thread</a> for help with networking! <br><br></td></tr></table><br>
<a name="1235866"></a>

<a name="1235867"></a>

<a name="1235868"></a>

<a name="1235870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> here a full example. no downloads. i hacked this yesterday :)<br><br>unlimitet players 10.000 limit.<br>its unstable code to be small smal as possible.<br>tested with 5 clients on my pc "localhost" with no lagg.<br><br>feel free to use, improve and sale it :)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; Example blitz3d tcpip game.
; Written by wings on blitz forum wings@...
;

Global server
Global player
Global player_guid ; player clident global indentifyer.
Global player_guid_counter ; Here we create new ids

Global client_debug_network ; A millisecond counter for debuging 
Global link ; This is player link. accaly i store session in this. i prefare name link.


;Data base for players
Type player_type
	Field name$
	Field player_guid
	Field x#,y#,z#,rot#,status
	Field mesh
	Field link
End Type

;Data base for sessions connection to server. not all sessions is players. you will discover liker hackers, bots, crawler and ipred ;)
;Type sessions
;	Field link
;End Type



;Try to Start the server. if port 7001 is not available game goes into client mode.
Server = CreateTCPServer (7001) ; if this fails game will go on as a client



Global rec_bank=CreateBank(512) ; A common datablock. used to store data from client
Global send_bank=CreateBank(512) ; A common datablock. used to store data that is sent to clients.





;Setup Graphics mode &amp; camera envornoment
Graphics3D 800,600
SetBuffer BackBuffer()
camera=CreateCamera()
CameraViewport camera,0,0,800,600
CameraRange camera,1,100
CameraFogRange camera,2,100
CameraFogMode camera,True
CameraFogColor camera,150,200,255
CameraClsColor camera,150,200,255
PositionEntity camera,0,10,-10
TurnEntity camera,30,0,0
light=CreateLight()


;Create a grass texture 64*64 with 1 flag and that is color.  one can also use loadtexture
grass=CreateTexture(64,64,1)
SetBuffer TextureBuffer(grass)
ClsColor 22,100,22
Cls
For i=0 To 256
	Color 0+Rnd(10),50+Rnd(155),0+Rnd(10)
	Plot Rnd(64),Rnd(64)
Next
SetBuffer BackBuffer()
ScaleTexture grass,3,3  
Color 255,255,255
ClsColor 0,0,0


;Create the grass entity as a endless plane
plane=CreatePlane()
EntityTexture plane,grass


;Create player mesh
player=CreateCube()
PositionEntity player,5,1,5






;The big main. mixed server &amp; client in same code.
While Not KeyHit(1)

	server_function()

	player_controlls()
	update_player_positions()

	UpdateWorld()
	RenderWorld()

	draw_status_texts()
	client_networking()
	
	Flip
	
Wend





;Draw varius status text on screen. and some help.
Function draw_status_texts()

	Text 0,0,"Blitz3d TCPIP Example"

	If server
		Text 0,10,"player_guid_counter="+player_guid_counter
	Else
		If link=0 Then Text 0,10,"Press F1 for connect to server"
		Text 0,30,"client_debug_network="+client_debug_network
	End If

	If link=0
		Text 0,20,"Not Connected"
	Else
		Text 0,20,"Connected"
		
	End If
	
End Function







; Here we place all server handling functions. like accept new streams and send recive data from clients.
Function server_function()
	;Only run this if its the server. 
	If server 

		;TCP/IP stream check for new one.
		server_check() ;
		
		;TCP/IP Handling of streams. like sending reciving.
		server_handle_player()

		;update client position of server object. this makes the server also move at clients no neet to send our self to server. ;)
		p.player_type = First player_type
		p\x#=EntityX#(player)
		p\y#=EntityY#(player)
		p\z#=EntityZ#(player)
		p\rot#=EntityYaw(player)

	End If
	
End Function




;Here we handle all player controlls. left/right forward/backward even commands for connect to server.
Function player_controlls()

	If KeyHit(59) And server=False Then connect_to_server() ; Connect to server F1

	If KeyDown(17) ; Mover forward  "w"
		MoveEntity player,0,0,0.05
	End If
	
	If KeyDown(31) ; Move backward "s"
		MoveEntity player,0,0,-0.05
	End If
	
	If KeyDown(30) ; Turn Left "a"
		TurnEntity player,0,1,0
	End If
	
	If KeyDown(32) ; Turn right "d"
		TurnEntity player,0,-1,0
	End If

End Function







;Updates the meshes from data structure. that been loaded from network last. this makes players move on each other screens. and rotates
Function update_player_positions()

	;Update player positions
	For p.player_type=Each player_type
		If p\mesh&lt;&gt;player
	
			PositionEntity p\mesh,p\x#,p\y#,p\z#
			RotateEntity p\mesh,EntityPitch(p\mesh),p\rot#,EntityRoll(p\mesh)
			
		End If
	Next
	
End Function







;Server needs to check for new players connection setup. it alls hapends here.
Function server_check()

	;This code counts the registred players
	i=0
	For p.player_type = Each player_type
		i=i+1
	Next
	
	;If there is no one register even the server is not register. then this code creates the first player with the Guid 0  The first one :)
	If i=0	
		p.player_type= New player_type
		p\x#=EntityX#(player)
		p\y#=EntityY#(player)
		p\z#=EntityZ#(player)
		p\player_guid=0
		p\mesh=player
		
	End If
	
	
	;Check for new streams connected. and if detect a new stream create a new player give it a guid. 
	stream=AcceptTCPStream(Server)
	If stream
		Cls
		Print "A new stream connected !"
		Delay 2000
		
		;Create a new player for stream
		p.player_type= New player_type
		p\link = stream
		p\mesh=CreateCube()
		
		player_guid_counter=player_guid_counter+1
		p\player_guid = player_guid_counter ; The stream has now a global indentifyer. now that is nice.
		
	End If


	;Security code
	If player_guid_counter&gt;10000 Then RuntimeError ("Some fool is hacking our little game client or you been playing far to long.") ; Be sure to put in this kind of bugs. lamo lama


	

End Function





;Player networking handling. here player clients get there data from server and sending it curent position.
Function client_networking()

	;Only run this code if a datalink has been establish
	If link
		ms=MilliSecs()
	
		;Send client data to server. evert frame this is done ;)
		PokeInt send_bank,0,1000 ; CLient cord package.
		PokeFloat send_bank,4,EntityX#(player)
		PokeFloat send_bank,4+8,EntityY#(player)
		PokeFloat send_bank,4+16,EntityZ#(player)
		PokeFloat send_bank,4+24,EntityYaw#(player)
		WriteBytes send_bank,link,0,512 ; Write it all to stream.
		
		
		
		Repeat 
			again=False
			If ReadAvail(link)&gt;=512 ; Ya we got somthing to read.
				again=True
				bytes=ReadBytes(rec_bank,link,0,512)
				If bytes&lt;512 Then RuntimeError "The client stream broke sir.." ; Lamo was here
		
		
				Select PeekInt(rec_bank,0)
				Case 1001 ; Found a client cordinate package.
				
					guid=PeekInt(rec_bank,4) ; global id
					newplayer=True
					
					For p2.player_type = Each player_type
						If guid=p2\player_guid
							newplayer = False ; Found the player.. now store data
							
							p2\x#=PeekFloat#(rec_bank,8)
							p2\y#=PeekFloat#(rec_bank,16)
							p2\z#=PeekFloat#(rec_bank,24)
							p2\rot#=PeekFloat#(rec_bank,32)
								
						End If
					Next
				
					If newplayer=True
						p2.player_type = New player_type
						p2\mesh=CreateCube()
						EntityColor p2\mesh,Rnd(255),Rnd(255),Rnd(255)
						p2\player_guid=guid
						p2\x#=PeekFloat#(rec_bank,8)
						p2\y#=PeekFloat#(rec_bank,16)
						p2\z#=PeekFloat#(rec_bank,24)
						p2\rot#=PeekFloat#(rec_bank,32)
	
					
					End If
				
				End Select 
		
			End If
			
		Until ReadAvail(link)&lt;512
		
		
		client_debug_network=MilliSecs()-ms

	End If ;End of whole network block 
	
End Function





;This functions takes care of all player in/out puts.
Function server_handle_player()

	For p.player_type= Each player_type
	
		If p\player_guid&lt;&gt;0
		
			If Eof(p\link) Then RuntimeError "A client quitet.. server crash !  Best regards Lamo coder" ;Realy put in some client kill &amp; cleanup code here ;D
		
			Repeat
			If ReadAvail(p\link)&gt;=512 ; Yes only 512 is a magic thing. 
			
				bytes=ReadBytes(rec_bank,p\link,0,512)
				
				If bytes&lt;&gt;512 Then RuntimeError ("Awsome client dint send 512.. wat to to Regards Lamo coder"); Yes we shold kick and ban this hacker or poor internet connection for a user.
				
					Select PeekInt(rec_bank,0) ; Reads the first byte and we go from there..
	
					Case 1000 ; Defaul x,y,z, data player cordinate packet recived.
						
						
						;Read the data from packet into the database. X,Y,Z and Rotation  (yaw)
						p\x#=PeekFloat(rec_bank,4)
						p\y#=PeekFloat(rec_bank,4+8)
						p\z#=PeekFloat(rec_bank,4+16)
						p\rot#=PeekFloat(rec_bank,4+24)
						
						;Well we shold make a payback to client as thanks for player cords ;)
						For p2.player_type= Each player_type
						
							If p2.player_type&lt;&gt; p.player_type;Every one except it self.
								
								PokeInt rec_bank,0,1001 ; A client cordinate package. Note i call this one 1001.. a reply from server clients cords. its verry important
								PokeInt rec_bank,4,p2\player_guid
								PokeFloat rec_bank,8,p2\x#	;X position
								PokeFloat rec_bank,16,p2\y# ;Y position
								PokeFloat rec_bank,24,p2\z# ;Z Position
								PokeFloat rec_bank,32,p2\rot# ; Rotation
							
								WriteBytes rec_bank,p\link,0,512 ; Send the data block
							
							End If		
							
						Next ; End of all other clients cords to the client
									
					End Select
						
				End If
				
			Until ReadAvail(p\link)&lt;512 ; we need to read all packets before continue to clear tcp buffer. 
			
		End If
	Next

End Function






;Simple try to connect to server.
Function connect_to_server()

	Cls
	Print "Trying to connect to server"
	Print "Open stream"
	
	link=OpenTCPStream("localhost",7001)
	Print link
	If Not link Then RuntimeError "Failed to connect to server."

	Print "Connection success"
	Flip
	
	Delay 2000

End Function 




</textarea> <br><br></td></tr></table><br>
<a name="1235883"></a>

<a name="1235885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice, Wings! <br><br></td></tr></table><br>
<a name="1236026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thank you , Wings , but please , <br>I would like someone to tell me what is wrong in my code . <br><br>Now I think that the acceptTCPstream command <br>may not be present in main loop . Is it right ? <br><br>I omissed to say that I already had written <br>my LAN inits code for server and players <br>( partie = 2 = HostNetGame and partie = 1 = JoinNetGame ) , <br>and it seems working well to define the streams and players . <br><br>The problem is in my loop code . <br>I have hope that you read that few lines <br>to suggest what is definitely wrong or nocive in my loop code . <br><br>Note : When I use OpenTCPstream at every round, <br>the transmissions are working ( but slowly ) <br><br>Thank you for your patience(fr?~) . <br><br></td></tr></table><br>
<a name="1236028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Please see my K-Netlib thread for help with networking! <br></div><br><br>It's easier with the K-Netlib. Trust me. <br><br></td></tr></table><br>
<a name="1236045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> OpenTCP stream will take a while.  dont do it every frame :) <br><br></td></tr></table><br>
<a name="1236276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello , <br><br>Thank you Wings for this confirmation about OpenTCPStream (not in loop)<br><br>Thank you Guy Fawkes for the reference to K-NNetlib . <br>I have gone , download the materials , began to resd . <br>But I think it's too much evolued for me . <br>OK, I have to translate all that in french . It would be better . <br>It seems a big tool , and the server/client config is not the same to me . <br>I am a little beginner forever . <br><br>Thank you for your help . <br>We'll try . <br><br></td></tr></table><br>
<a name="1236407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Wings, <br>Here are some things I'd like to precise to you . <br><br>I am not internet connected . My two Win 7 PCs are both connected with a blue LAN cable . <br>Is it the reason why the IP adress, localhost or 127.0.0.1, is not present on my machines (two Win7 PCs) ? <br><br>The "full example" that you indicate to me does not work . <br>I think my personal streams code could work well . I don't know, now . <br>My problem is perhaps the config and connections of my PCs/net . <br>Is there somebody who can light the way to me ? <br><br></td></tr></table><br>
<a name="1236512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1) make suer the lan Cable is a crossover Cable. and not straigt.<br><a href="http://en.wikipedia.org/wiki/Ethernet_crossover_cable" target="_blank">http://en.wikipedia.org/wiki/Ethernet_crossover_cable</a><br><br>2) You need to set ip adress of your network card on both computers.<br><br>pc1<br>ip  192.168.0.5   Mask 255.255.255.0<br>(Gateway its not used but usaly set to 192.168.0.1)<br><br>pc2<br>ip 192.168.0.10 mask 255.255.255.0<br>(Gateway its not used but usaly set to 192.168.0.1)<br><br><br>to test connectivity and share files printers you need to turn of your firewall on both computers. usaly<br><br>try use the ping command from pc1  <br><br>start / run / cmd<br>ping 192.167.0.10  <br><br>you sold get respond ? <br><br></td></tr></table><br>
<a name="1236564"></a>

<a name="1236565"></a>

<a name="1236566"></a>

<a name="1236761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, Wings, <br>and thank you to take care of my problem. <br><br>I had set the same IP for the server and the client ( server PC ) <br>And as you tell me , I'll turn off both firewalls . <br>Thanks for the info of the ping command in the command line . <br>And I have to check the LAN cable . <br><br>I will come back to the forum to say if it runs or not . <br>I see a little light, enough for me for keeping to work . <br><br></td></tr></table><br>
<a name="1236762"></a>

<a name="1236845"></a>

<a name="1236974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Wings<br><br>I bought a network cable "crossover".<br>I disabled the firewalls for both my Win7 PCs (x64 and x86).<br>This still does not work.<br><br>Neither my program nor your example "fullexample."<br><br>For my program, I set the same IP address<br>(169.254.66.224 server PC) for the server and the client.<br>For your fullexample I tested with "127.0.0.1" and "169.254.66.224".<br><br>My network are displayed as "Reseau indefini" (undefined network)?<br><br>I know it's not BB3D,<br>but can you give me some suggestions?<br><br>Thank you for your efforts. <br><br></td></tr></table><br>
<a name="1237145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> the ip adress 169.254.66.224   is a local never goes online adress.<br><br>try change ip adress<br><br>Computer 1<br>ip 192.168.0.10<br>mask 255.255.255.0<br>gateway <br><br>Computer 2<br>ip 192.167.0.11<br>mask 255.255.255.0<br><br>After set ip adresses run cmd.exe from computer1<br>ping 192.168.0.11<br><br>se if you get respond. <br><br></td></tr></table><br>
<a name="1237746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Wings, <br><br>Another remark : <br>I want to have a LAN play on a local network . <br>Server and players are using the same ip adress . <br>Can I use the ip adress 169.254.66.224 in this case ? <br>And how ? ( it doesn't work well at this time )<br><br>Thank you for your precise technical answers . <br>I go and try all these IP configurations . <br>And I'll Come back to inform you about success . <br><br><a href="http://www.prymprog.wikeo.net" target="_blank">http://www.prymprog.wikeo.net</a> <br><br></td></tr></table><br>
<a name="1237814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont trust the 169.254.66.224. i got bad experiance about it. as working on it department in 1997.<br><br>i keep a Eye on this thread later.. <br><br></td></tr></table><br>
<a name="1238180"></a>

<a name="1238183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Wings,<br><br>I want to tell you that my prog does not work with the IP changes.<br>The ping tests have worked well . <br>Even my routine initiation of the network does not work. <br><br>I remind you that I like to have a local multiplayer (to see, for starters).<br>What do you think of the multiplayer code, which I introduced earlier, for my main loop? What comments? What evidence?<br><br>I rewrite here (simplified):<br><br>Xplayer0MULTI ( numplayer0 ) = EntityX ( player0 , 1 )<br>Yplayer0MULTI ( numplayer0 ) = EntityY ( player0 , 1 )<br>Zplayer0MULTI ( numplayer0 ) = EntityZ ( player0 , 1 )<br>pitchplayer0MULTI ( numplayer0 ) = EntityPitch ( player0 ) , 1 )<br>yawplayer0MULTI ( numplayer0 ) = EntityYaw ( player0 ) , 1 )<br>rollplayer0MULTI ( numplayer0 ) = EntityRoll ( player0 ) , 1 )<br><br>If partie = 2 Then<br><br>strStream48ser = AcceptTCPStream ( TCP48 )<br>If strStream48ser &lt;&gt; 0 Then<br>If ReadString$ ( strStream48ser ) = "coordscli" Then<br>Nmodele = ReadInt ( strStream48ser )<br>playerID ( Nmodele ) = ReadInt ( strStream48ser )<br>Xplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser )<br>Yplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser )<br>Zplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser )<br>pitchplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser )<br>yawplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser )<br>rollplayer0MULTI ( Nmodele ) = ReadInt ( strStream48ser )<br>EndIf<br>EndIf<br>WriteString strStream48ser , "coordsser"<br>For Nmodele = 0 To 3<br>WriteInt strStream48ser , Nmodele<br>WriteInt strStream48ser , playerID ( Nmodele )<br>WriteInt strStream48ser , Xplayer0MULTI ( Nmodele )<br>WriteInt strStream48ser , Yplayer0MULTI ( Nmodele )<br>WriteInt strStream48ser , Zplayer0MULTI ( Nmodele )<br>WriteInt strStream48ser , pitchplayer0MULTI ( Nmodele )<br>WriteInt strStream48ser , yawplayer0MULTI ( Nmodele )<br>WriteInt strStream48ser , rollplayer0MULTI ( Nmodele )<br>Next<br>; CloseTCPStream strStream48ser<br>EndIf<br><br>ElseIf partie = 1 Then<br><br>; strStream48cli = OpenTCPStream ( adresserveur$ , 8080 ) ; ( DottedIP$ ( HOSTplayerID ) , 8080 )<br>If strStream48cli &lt;&gt; 0 ; And ReadAvail ( strStream48cli ) = 0 Then<br>WriteString strStream48cli , "coordscli"<br>WriteInt strStream48cli , numplayer0<br>WriteInt strStream48cli , playerID ( numplayer0 )<br>WriteInt strStream48cli , Xplayer0MULTI ( numplayer0 ) ; EntityX ( player0 , 1 ) ;<br>WriteInt strStream48cli , Yplayer0MULTI ( numplayer0 ) ; EntityY ( player0 , 1 ) ;<br>WriteInt strStream48cli , Zplayer0MULTI ( numplayer0 ) ; EntityZ ( player0 , 1 ) ;<br>WriteInt strStream48cli , pitchplayer0MULTI ( numplayer0 ) ; EntityPitch ( player0 , 1 ) ;<br>WriteInt strStream48cli , yawplayer0MULTI ( numplayer0 ) ; EntityYaw ( player0 , 1 ) ;<br>WriteInt strStream48cli , rollplayer0MULTI ( numplayer0 ) ; EntityRoll ( player0 , 1 ) ;<br>If ReadString$ ( strStream48cli ) = "coordsser" Then<br>For X = 0 To 3<br>Nmodele = ReadInt ( strStream48cli ) <br>playerID ( Nmodele ) = ReadInt ( strStream48cli )<br>Xplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli )<br>Yplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli )<br>Zplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli )<br>pitchplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli )<br>yawplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli )<br>rollplayer0MULTI ( Nmodele ) = ReadInt ( strStream48cli )<br>Next<br>EndIf<br>EndIf<br><br>EndIf<br><br>EndIf <br><br></td></tr></table><br>
<a name="1238181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wings, please use translator so others can understand what you need help with. :) Thank You! <br><br></td></tr></table><br>
<a name="1239359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello ! It is traduced , now ... <br>Can I have your help ? <br><br></td></tr></table><br>
<a name="1239804"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Prym<br><br>Good to hear ping now works<br><br>Try somthing simpler first to get know TCPIP.<br>like sending a Hello World to other computer. <br><br></td></tr></table><br>
<a name="1241714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would like to put my init routine for Lan in the forum . <br>I have make mistakes the last time I tried . <br>Can you tell me how to do exactly ? <br>Could I put it in or after these lines ? <br><br>This routine works well and I'd like to keep it for my project . <br>My pb is in the main loop I have already put in the forum . <br><br>Thank you for your answer and effort . <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
