<!DOCTYPE html><html lang="en" ><head ><title >Gravity, LoadAnimMesh, Future Goals!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Gravity, LoadAnimMesh, Future Goals!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Gravity, LoadAnimMesh, Future Goals!</a><br><br>
<a name="1292271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CuteNCreamy</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> NOTE: I am running Windows 10, and am always wary that this will affect something. Take that into consideration if you think it could be a problem. Thanks!<br><br>I feel like both of these following issues are things that newcomers such as myself experience a lot. Unfortunately, finding no suitable response to my issues, I have come here. The game I am programming follows a 3-D Third Person platformer style. My first issue, and also the thing that seems to annoy the veterans a lot is that I have no usable gravity system. I wouldn't need a gravity acceleration system, as I plan to implement wall climbing anyways, but an acceleration system would be convenient for a lot of things. I have tried a lot of the ones people have suggested, but noticed that most of them are constructed for 2-D, and the ones that are constructed for 3-D either give me the "Expecting End-Of-File" error, or the screen is just black. Anyone who knows about an easy 3D gravity system, please share! I repeat, I don't really need acceleration! <br><br>My second problem is that through Blender I have made an animated 3-Dimensional model file, which when I implement into the code, only shows my character static with the first frame of the animation. When I tell it to animate the character, I receive the error "Entity has no animation". I've heard this as a pretty common problem before as well. I'm certain that Blender is actually saving an animation, and I tried with both the .3ds and .b3d extensions just to make sure that wasn't affecting the process, but each one still crashes when I try to implement the 'Animate' command. Any thoughts on different programs, commands, file extensions to use?<br><br>SUM-UP<br><br>1. 3-D ThirdPerson Gravity System<br><br>2. LoadAnimMesh and then Animate doesn't work<br><br><br>The following items aren't at all pressing, just some things I was planning to add on the side. The first two items above are more important, and these ones are mostly here just in case anybody knows anything off the top of their heads about this and is willing to help:<br><br>1. Scanning system (Reminiscent of Goombella's Tattle Log in Paper Mario The Thousand Year Door, but inclusive of items that the player may collect)<br><br>2. Inventory/item system<br><br>3. Menus<br><br>4. Switching out characters<br><br>5. RPG-like battle elements<br><br>6. Fall damage<br><br>7. Climbing system(Press space[57] to advance upward by something like Y-Axis 0.4 on the surface of the wall)<br><br><br>I'm sorry if this post feels at all demanding, I was just trying to set out some of my goals for this game all at once to make it less tedious by divvying it up into several different posts. Please don't search too hard trying to come up with an answer, I despise being a hassle.<br><br><br>Thanks, community! <br><br></td></tr></table><br>
<a name="1292289"></a>

<a name="1292290"></a>

<a name="1292291"></a>

<a name="1292292"></a>

<a name="1292294"></a>

<a name="1292295"></a>

<a name="1292296"></a>

<a name="1292317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> About the gravity : very easy to implement a gravity which looks realistic enough, (with increasing gravityspeed)<br><br>You need one variable (for example GravitySpeed#) for the thing, and one variable (or simply a value) for the gravityforce (for example GravityForce#).<br><br>When thing is on the ground, GravitySpeed = 0<br>When thing is on the air, GravitySpeed = GravitySpeed - GravityForce, so GravitySpeed will become more and more negative so it will look like the thing is falling faster and faster.<br>then translate the thing with TranslateEntity(Thing,0,GravitySpeed,0)<br>A code example here : <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2933" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2933</a><br>Take a look at these lines :<br><pre class=code>
PlayerVY = PlayerVY - 0.0025 
TranslateEntity(PlayerCollider,PlayerVX,PlayerVY,PlayerVZ)
</pre><br><br><br>About the animations, as you may have seen in my tests, all works well, you have a problem on your side.<br>Before trying to make your own model and animations, i suggest to try to load and animate an existing b3d model that we know works well. For example the free models by psionic :<br>ninja : <a href="http://tempsend.com/68D58728AC" target="_blank">http://tempsend.com/68D58728AC</a><br>zombie : <a href="http://tempsend.com/FFEF7F4389" target="_blank">http://tempsend.com/FFEF7F4389</a><br>About how to manage the animations, i suggest to first determine the actionstate of the character depending on its previous actionstate and depending on the player/ai input, and then depending on its actionstate, turn/move and animate the character.<br><br><br>Before asking for something, it is good practice to search the forum and the code archives for previous discussions/solutions about your problem/request, and then post a more precise question/request if necessary.<br><br><br>Good luck, <br><br></td></tr></table><br>
<a name="1292297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm...I know I'm being picky but when I see 'RPG Battle Elements" (nbr 5) I can't help but wonder what sort of RPG are we talking? Action RPG like Diablo? Pause/Realtime RPG like Baldurs Gate? Turn based first person like the old Might and Magic? Realtime first person like Eye of the Beholder? Side view group of sprites turn based like Final Fantasy? - it's a pretty broad picture I've painted there - maybe you could narrow it down a little....? <br><br></td></tr></table><br>
<a name="1292320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CuteNCreamy</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ RemiD<br>Thanks a ton for all of your help, you've cleared a lot of things up for me. Still working on implementing it, but things are looking up. As for the animations, I gathered the ninja and tried it out. Clearly I have misdeveloped the animation on my end, thank you for the clarification! I very much appreciate your comment on searching around the forum, as I was actually searching for a week, which tells me I'm just not being analytical enough about it. Thanks again for all of your help! <br><br></td></tr></table><br>
<a name="1292321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CuteNCreamy</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Matty<br>No, you're 100% right there. It's actually quite a misguided term that I used. I realized, too late, my mistake. What I meant was using numeric values for stats like attack power, defensive power, and health power, which is not exclusive to RPGs, in fact. Also, considering the variable system used in Blitz3D, the system should be pretty easy, even for me, to work out. Sorry to confuse you. <br><br></td></tr></table><br>
<a name="1292327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @CuteNCreamy&gt;&gt;Quick tip to search the forum/codearchives :<br>go to google.com<br>then type : keywords or question + site:blitzbasic.com <br>for example :<br>export animated mesh blender site:blitzbasic.com <br>Try to keep it short, only a few keywords.<br>Then when reading some posts, you will see others words to express the same thing, you can then use these words to try a new search. <br><br></td></tr></table><br>
<a name="1292330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you wanna climb a wall, shoot a linepick straight ahead. If the entity it hits is INDEED a wall &amp; the player can see the wall &amp; the player is colliding with the wall, then align the player to the Y-Axis Wall Vector. Then switch Gravity from subtracting to adding if the player is holding the climb button, else realign to the previous vector and set Gravity back to normal.<br><br>Hope this helps.<br><br>~GF <br><br></td></tr></table><br>
<a name="1292355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now that actually sounds useful GF. Good call. <br><br></td></tr></table><br>
<a name="1292386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! :)<br><br>~GF <br><br></td></tr></table><br>
<a name="1292391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CuteNCreamy</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RemiD<br><br>Good point. Google's advanced search has scarcely let me down in the past. Thanks for the tip! I'm off to give it a shot. <br><br></td></tr></table><br>
<a name="1292392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CuteNCreamy</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Guy Fawkes<br><br>Sounds good to me. This most certainly has helped! That's a pretty unique way of thinking about it. I wouldn't have tried that for a while! <br><br></td></tr></table><br>
<a name="1292419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The easiest way to do fall damage assuming youve got working gravity is to apply points of damage based on the velocity of the entity at point of impact...if it exceeds a threshold apply damage that scales linearly with the velocity magnitude. <br><br></td></tr></table><br>
<a name="1292429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ThePaiva</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> About animations, maybe you have some childs of the mesh you're trying to animate and you're trying to animate the mesh instead of the childs. Blitz doesn't animate all the childs of the mesh and it might be the problem you're facing with your models not animating.<br>Try using findchild(mesh,"child_name") and animate it, it'll probably work.<br><br>for fall damage you could check the gravityspeed when the player touches the ground and have a minimum speed before it deals damage to the player, something like<br><pre class=code>if entitycollided(player,ground_collision_type) and gravityspeed&gt;100 then playerlife = playerlife - (gravityspeed*0.2)</pre><br><br>for the RPG-like battle elements, switching characters, tattle log, inventory system and all that stuff that you'll need to keep, change and check a lot of information you should definitely use TYPES, they're really useful for organizing a lot of variables. There's a good tutorial somewhere here in the forums, not difficult to find at all and explains everything in an easy way with examples.<br>Here's a small example of how to use it for what you're trying to achieve:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;creates an item type to hold items information
Type item
	Field item_name$
	Field value%
End Type

;creates a type player with all the information needed,
;including an inventory variable of the item type
Type player
    Field name$
    Field playerlife%
    Field attack%
    Field defense%
	Field inventory.item[3]
End Type

;let's create an item and an empty item
i.item = New item

i\item_name = "Attack Buff"
i\value = 10

;
no.item = New item

no\item_name = "Empty"
no\value = 0



;let's create a new player with one item in his inventory
p.player = New player

p\name = "Mario"
p\playerlife = 100
p\attack = 5
p\defense = 10
p\inventory[0] = i.item
p\inventory[1]= no.item
p\inventory[2]= no.item

;let's print the information
Print "Player info:"
Print "name: " + p\name
Print "life: " + p\playerlife
Print "attack: " + p\attack
Print "defense: " + p\defense
Print "item 1: " + p\inventory[0]\item_name
Print "item 2: " + p\inventory[1]\item_name
Print "item 3: " + p\inventory[2]\item_name
Print ""

;now let's use the attack buff, add it's effect to the player attack and discard the item
Print p\name + " used " + p\inventory[0]\item_name + "!!!"

p\attack = p\attack + p\inventory[0]\value

p\inventory[0] = no.item

;let's see all the information after the attack buff was used
Print ""
Print "Player info after changes:"
Print "name: " + p\name
Print "life: " + p\playerlife
Print "attack: " + p\attack
Print "defense: " + p\defense
Print "item 1: " + p\inventory[0]\item_name
Print "item 2: " + p\inventory[1]\item_name
Print "item 3: " + p\inventory[2]\item_name
Print ""

WaitKey()
</textarea><br><br>About menus, you can use drawimage(x,y,image), check the mouse position and if mouse was clicked to check what button the player clicked at. <br><br></td></tr></table><br>
<a name="1292457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> RemiD comments about gravity are good.<br><br>Code archives has plenty and samples does as well....the castle demo in the mak folder has this.<br><br>Gravity = acceleration so not sure i follow when you say you want gravity but dont want acceleration.  But check out the samples....especially the castle demo. <br><br></td></tr></table><br>
<a name="1293132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll try and code an example tomorrow... Too tired tonight...<br><br>~GF <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
