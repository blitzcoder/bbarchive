<!DOCTYPE html><html lang="en" ><head ><title >Memory usage of int float string textures meshes ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Memory usage of int float string textures meshes ?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Memory usage of int float string textures meshes ?</a><br><br>
<a name="1139877"></a>

<a name="1139879"></a>

<a name="1139880"></a>

<a name="1222895"></a>

<a name="1222896"></a>

<a name="1222898"></a>

<a name="1222899"></a>

<a name="1222900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi :)<br><br>I have searched the forum to understand how many bytes/octets a variable or a texture or a mesh or an animation can take in memory.<br><br>I want to know this by curiosity, and also to see how detailed a mesh can be before taking as much memory as a texture.<br><br>What i have read so far :<br>1 integer = 4 bytes<br>For example :<br>1000 integers = 4*1000 = 4000 bytes which is approximately 4 ko ?<br><br>1 float = 4 bytes<br>For example :<br>1000 floats = 4*1000 = 4000 bytes which is approximately 4 ko ?<br><br>1 string = 4 bytes + length of string<br>For example :<br>1000 strings of 20 characters = (4+20)*1000 = 24000 bytes which is approximately 24 ko ?<br><br>1 texture or 1 image = PWidth%*PHeight%*3 bytes (R%,G%,B%)<br>For example :<br>1 texture or 1 image of 1024*1024 -&gt; 1024*1024*3 = 3145728 bytes which is approximately 3.1 mo ?<br><br>1 mesh = number of surfaces + number of vertices per surface*12 (X#,Y#,Z#,NX#,NY#,NZ#,U#,V#,R%,G%,B%,A#) + number of triangles per surface*3 (V0%,V1%,V2%)<br>For example:<br>1 mesh of 2000 tris with one surface, assuming each triangle has its own vertices = 1 + 2000*3*12 + 2000*3 = 78001 bytes which is approximately 78 ko ?<br><br>1 animation 3d (with each vertex influenced by only one joint, no weights) = numbers of frames*number of joints*9 (X#,Y#,Z#,Pitch#,Yaw#,Roll#,ScaleX#,ScaleY#,ScaleZ#)<br>For example :<br>1 animation of 100 frames with 17 joints = 100*17*9 = 15300 bytes which is approximately 15ko ?<br><br><br><br>These previous examples are not accurate, they are a guess, please correct what you think is false or missing.<br><br><br><br>From the results above, it shows that a mesh is really "light" compared to a texture ! But i guess this does not mean that the performance will be better with a highly detailed mesh rather than with a texture ?<br><br>Thanks,<br><br>edit : removed some errors, added some details <br><br></td></tr></table><br>
<a name="1139892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, you've only really considered the core data here and not the packaging objects that "wrap" this data to make it usable (e.g. consider where EntityX and so on are held - not in the vertex array!).<br><br><br>e.g. A string is actually has a 24-byte header, which is copied for every reference to the string (but on the other hand, allocated from a free list so technically the space used doesn't change often... yeah), and the character data may take up more space than the length of the string too, as it is rounded up to the nearest convenient size for fast allocation.<br><br>Images and textures pixel data is held within a DirectX buffer, which in turn is held within a Blitz Image or Texture object. These objects hold data like the X and Y size of the image, the refcount of the texture, the blending modes in use, and various other magic used for speeding things up much of which isn't available to the end user. Probably come to &lt;256 bytes if I recall correctly?<br><br>Meshes are entities, and thus have a vast amount of metadata beyond just the vertices and triangles (position, rotation, scale, parents, names, transformation in "high-speed" internal matrix format, more alpha blending and so on). All together comes to around 1KB.<br><br>For animations... bone weights are stored in the mesh/surface data, and have nothing technically to do with animation (the visible effect on the mesh is part of the rendering step, not the animation step). More importantly, there is <i>no guarantee</i> that an animation will have a keyframe for every joint every frame, so no there is no easy way to guess the size of an animation by its length or skeleton size: any given frame could be a keyframe for an object, or it could not. Most animations won't be anywhere near as large as that estimate.<br><br><br>So.... the answer is that while inaccurate, your guesses <i>are</i> useful because they do account for the bulk of the data and the rest is tiny by comparison. It's actually more useful to think in terms of orders-of-magnitude, or size multipliers, than it is to bother to remember the individual bytes of tiny structures that don't get multiplied up.<br><br><br><div class="quote"> But i guess this does not mean that the perfomance will be better with a highly detailed mesh rather than with a texture ? <br></div><br><br>The way things are handled in hardware these days with dedicated circuits for applying a texture to a mesh means that texturing is essentially a free operation, performance-wise.<br><br>Important limits to consider are:<br> - B3D meshes have a detail limit of 65535 vertices<br> - you can add surfaces to get more detail<br> - surfaces are the blocks in which data is sent to the graphics card: one complex surface will load quickly, ten simple surfaces will load slowly<br> - textures stay on the graphics card unless being edited<br><br>...while it is possible to come up with interesting new ways of rendering things, textures are very, <i>very</i> fast these days. CPU-edited meshes on the other hand are not, as that's kinda the opposite of where shader technology has evolved. <br><br></td></tr></table><br>
<a name="1139904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting infos, thanks :)<br><br>I have forgotten to count the material used by each surface in a mesh.<br><br><br><br><div class="quote"> <br>CPU-edited meshes on the other hand are not, as that's kinda the opposite of where shader technology has evolved. <br> <br></div><br>I don't know if you meant "in real time" or not but if a mesh of, for example, an armor part, is created only when the player opens a furniture or when he equips it inside the inventory, i don't think this will cause any slow down.<br><br><br><br>What i am trying to do is to create a game with only meshes colored with vertex colors and to use vertex lighting on subdivided meshes so that the render looks nice. <br>I will use a few textures for some effects and the particles but that's all.<br><br>A render like this but with more detailed crates and furnitures : <br><img src="http://img839.imageshack.us/img839/6863/screeniedss2012042501h2.jpg"><br><br>I also use the DevilShadowSystem, and i really like it :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
