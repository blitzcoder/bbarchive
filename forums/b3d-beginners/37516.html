<!DOCTYPE html><html lang="en" ><head ><title >Timing</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Timing</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Timing</a><br><br>
<a name="413029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thalamus</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I'm trying to get my head around timing and keeping an even framerate, and I'm more than a little confused.<br><br>The way I see it, you create a timer with CreateTimer(x), where X is the FPS you require.<br><br>Then, you can either use WaitEvent or WaitTimer to check the timer. If you use Waitevent, your program can still receive events until the end of the frame. If you use WaitTimer, all activities cease until the next frame.<br><br>But, as the docs say: "You should never use the WaitTimer AND WaitEvent methods of controlling speed at the same time, as you will 'lose' ticks."<br><br>So which is the best system? Presumably, WaitTimer is best for games and WaitEvent best for GUI stuff?<br><br>So where does Vwait come into things? Is Vwait purely to stop your graphics being updated mid-screen? <br><br></td></tr></table><br>
<a name="413050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In BlitzPlus (WaitEvent doesn't apply to Blitz3D), I use WaitEvent exclusively.  The only reason I can see not using it is for backwards compatibility with Blitz2D.<br><br>You are correct in your other assumptions.<br><br>I usually start with a loop like this:<br><pre class=code>
CreateTimer(60)
InitGui()
InitGame()

Repeat
	Select WaitEvent()
		Case $803 : End
		; other cases here (input, etc)
		Case $4001
			Logic()
			Update()
			Render()
	End Select
Forever
</pre><br><br>You can even enclose the Select WaitEvent() block in a Select GameState block, along with more Select WaitEvent() blocks for other states. <br><br></td></tr></table><br>
<a name="413058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thalamus</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, that sort of answers my next question: the Editor I'm writing started off as a full-screen app, then moved to a window, then I added GUI functionality (basically it progressed like this as I was learning Blitz+).<br><br>At the moment I have a "Code" section which clears the canvases, updates the map, checks the controls, and updates the cursor. This is followed by a WaitEvent loop, which contains the GUI checks. At the bottom, if Escape hasn't been pressed, it goes back to the Code section and so forth.<br><br>Am I right in my assumption that everything should be done within the WaitEvent loop? I have a control routine, for instance, that checks keypresses and initiates the relevant drawing tool - this should be done using Event checks?<br><br>(Thanks for your help, by the way soja - immensely useful :) ) <br><br></td></tr></table><br>
<a name="413108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Am I right in my assumption that everything should be done within the WaitEvent loop? I have a control routine, for instance, that checks keypresses and initiates the relevant drawing tool - this should be done using Event checks?  <br></div><br>In BlitzPlus, ideally, yes.  I would recommend using an event system exclusively or not at all.  If not at all, then it's more like a legacy Blitz2D style.  It's easiest not to mix them.<br><br><div class="quote"> Thanks for your help, by the way soja - immensely useful :) <br></div><br>You're welcome =) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
