<!DOCTYPE html><html lang="en" ><head ><title >What do the OR and AND in these snippets mean?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What do the OR and AND in these snippets mean?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >What do the OR and AND in these snippets mean?</a><br><br>
<a name="1103286"></a>

<a name="1103287"></a>

<a name="1103288"></a>

<a name="1103289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >iprice</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't coded in Blitz3D for quite a while now and looking back through some sample code I found this -<br><br>[CODE]array(x,y-1)=array(x,y-1) Or 32[/CODE]<br><br>Surely the array will return a TRUE value as array=array. So what does the OR at the end do/mean? <br><br><br>The sample code also does something similar with AND -<br><br>[CODE]target=array(x,y) AND 31[/CODE]<br><br><br>I've never used OR or AND like this (they are usually part of an IF/THEN statement), so can anyone explain exactly what each snippet means?<br><br>Cheers.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1103298"></a>

<a name="1103305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Surely the array will return a TRUE value as array=array. <br></div><br><br>You're actually being confused by two separate things here.<br><br>The first is that (assuming it's the whole line) that's an assignment, not a comparison. Comparison = is an arithmetic operator with a higher precedence than Or (so it would compare then do the Or operation), but assignment is a <i>statement</i>, not an expression, and has lowest precedence of all infix operators, so the array is being assigned the value of the Or expression. This may not have been obvious if you didn't know the second thing, which is...<br><br>Or and And (and Xor and Not) aren't some kind of special control flow construct - they're actually just mathematical expressions same as + and -. They're bitwise operators, which means they perform their logical operation on the bits of the integer values passed to them. What they actually do is similar to the logic you're familiar with, but at a lower level:<br><br> - "And" compares each bit of the two numbers and in the result number, places a 1 at that bit if both values had a 1, and an 0 otherwise<br> - "Or" compares each bit of the two numbers and in the result number, places a 1 at that bit if either value had a 1, and an 0 if neither did<br> - "Xor"  compares each bit of the two numbers and in the result number, places a 1 at that bit if <i>one</i> value had a 1, and an 0 if neither did or if both did<br><br>To add to the confusion, "Not" is actually boolean, not bitwise, and will return 1 for 0 and 0 for any other value. The true bitwise Not operator is supplied as the unary ~ (which has the same precedence as unary +/-) - this flips each bit of the number passed to it.<br><br>Now that you can see that these can be used in arbitrary expressions, what are they good for?<br><br>Well, there are two main uses: combining, and masking, of bitflag or compound values.<br><br>Or is commonly used to combine values. In the expression %01 Or %10, the result will be %11 (that's binary notation in Blitz3D, by the way). If you have a bit-flag array, like the parameter to CreateTexture, this lets you ensure that the second bit is set to 1 without checking if it's set first. If you'd tried to use +, and the 2 bit was set, you'd get some unpredictable number (4 or 5) with the wrong set bits; this just ensures it's turned on. This is also the common way to combine ARGB colour values into a single integer.<br><br>"And" works the other way around. In the expression "flags And %10", the result will be just the second bit of "flags" - the other bits were compared to zero and thus lost, while that bit was compared to 1 and therefore if it too was 1, it still is (i.e. its value was preserved). So "And" acts as a mask, letting you chop out parts of a value you don't want to look at without affecting the ones you do.<br><br>Incidentally, this is where Shl and Shr come in handy. Say you wanted to get at the green component of a colour, you'd use colour And $00FF00 to mask out the red and blue. But the green value is 255 times larger than 255, which is its range. Shl and Shr literally shove bits left and right so you can convert them to the value you want, then shove them back up to the left of the "bit array" for storage.<br><br>So what's happening in those expressions above? In the first one, the sixth bit is being set to "on" in that array element (access, Or with flag, reassign), regardless of whether it was on before. In the second, the sixth and higher bits are being turned off, and the first five are left as they were. 32 is a single-bit number (being 2 ^ 5), so it can be used like this (generally people use the binary or hex notations to make this more visible though, especially for complex bit layouts).<br><br>In short? And and Or are actually arbitrary arithmetic operations that you can use anywhere a numerical expression is allowed. There are infinite combinations of uses for them, and now that you know this, I'm sure you'll start to see them too.<br><br>(Oh, and in case you were wondering - they're built-in CPU instructions - they're actually faster than +, -, etc. on some machines).<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1103303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> exelent<br><br>if it helps in any way, i use two handy functions to clarify when i need to set/clear a particular bit on a variable:<br><br><pre class=code>
;return the state 0 or 1 of the FlagNumber bit in Flags
Function TestOnOff(Flags, FlagNumber)
	Return (Flags And (1 Shl FlagNumber)) &lt;&gt; 0
End Function

;set the State of FlagNumber in Flags
Function FlagOnOff(Flags, FlagNumber, State)
	Local Mask
	Mask = 1 Shl FlagNumber
	If State=1 Then
		Return Flags Or Mask
	Else
		Return Flags And ( $FFFFFFFF Xor Mask )
	End If
End Function
</pre><br><br>using "FlagOnOff function" the two senteces you are asking for should be:<br><pre class=code>
array(x,y-1) = FlagOnOff( array(x,y-1), 5, 1)
</pre><br><br><pre class=code>
Target = FlagOnOff( array(x,y), 5, 0)
</pre><br><br>aside the particullar question, i supose you are trying to know what this senteces do in the program context, i supose that the array holds variables with 6 relevant flags (numbered form 0 to 5)<br><br>In the first case the code is Setting the sixth flag: number 5 and in the second one the code is clearing the sisth (and any other with higger number: in a 32 bit variable the sentence clerar bits from 31 to 5, letting bits 4 to 0 unchanged)<br><br>Juan <br><br></td></tr></table><br>
<a name="1103312"></a>

<a name="1103313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob the Great</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, very useful information.<br><br>I've seen the And-Or commands used like this all the time, but I've never really understood the process until now.<br><br>Is there a piece of code floating around somewhere which could better describe this with examples? Better yet, is there some sort of exercise I can try to solidify this in my mind. This is definately an area I could improve on.<br><br><div class="quote"> <br>The true bitwise Not operator is supplied as the unary ~ (which has the same precedence as unary +/-) - this flips each bit of the number passed to it.<br> <br></div><br>Huh. I'll probably never use a bitwise Not operator, but it's fun to know it's there. Has it always been there? If I understand this right, this would be useful if you wanted to make a color-brightness invert filter, right? Man, I sound like such a noob right now.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1103327"></a>

<a name="1103328"></a>

<a name="1103329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> in the function FlagOnOff i use: "$FFFFFFFF Xor Mask" that operation performs a bitwise Not operation (indirectly) it should be done with "~Mask"<br><br>there's an example for using the "~" operator<br><br>I don't knew this one when wrote the FlagOnOff function, so i made the Not operation in an indirect way ("Not" operator didn't work and didn't know why until today!)<br><br>Juan<br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1103334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >iprice</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my haste to post my original question I never even considered that the code statement wasn't a comparison! Stoopid!<br><br>There's a lot of info here to digest and some of it I definitely don't understand at the moment, despite programming for 25+ years! I've probably been doing similar things to AND/OR, but in a much less direct manner.<br><br>Cheers chaps :)<br><br>Now to have a play and get a better understanding. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
