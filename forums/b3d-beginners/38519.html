<!DOCTYPE html><html lang="en" ><head ><title >Array question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Array question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Array question</a><br><br>
<a name="427161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to create a space sim.<br><br>I'm using arrays of types to store all data about the spacestations and other stuff.<br><br>When I have a sector that has only 4 stations, I will use an arrays with indexes 1-4.<br><br>I want the ability to let the player build his own stations later on.<br><br>But then I should need to increase the array's indexes, so it can hold the existing data and add one more.<br><br>How would I do that?<br><br>Should I create a second (temporary) array and copy all data to this new array, then redim the original array (with one more index) and copy all data back to it?<br>As redimming an array clears all data that's in it.<br><br>I could also preset a certain maximum to it, but then the player is limited to these settings. <br><br></td></tr></table><br>
<a name="427181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not dim a larger array in the first place, and then set a maximum in your game for how many stations the player can build... an array of 100 or so lying around not doing much won't break the bank! <br><br></td></tr></table><br>
<a name="427198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> An alternative would be to use a bank to store the handles of the data, you can resize them without data loss. <br><br></td></tr></table><br>
<a name="427422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Why not dim a larger array in the first place, and then set a maximum in your game for how many stations the player can build... an array of 100 or so lying around not doing much won't break the bank!<br> <br></div><br><br>I was considering that, but it would use too much memory upfront, if each index also points to an unused (but existing) type-instance, with lots of fields in it.<br><br>I want the game to be expandable as much as I can (like X2).<br>In this game, the player can build an unlimited number of stations.<br><br>But since I will be making arrays that only hold a specific type of station (power plant, food factory, ...), the indexes will be low in the first place (a maximum of 10 per sector) and I want to have around 100 sectors.<br><br>Then it is easy (and quick) to copy the array to another first, then redim it and copy the data back to it.<br><br>I didn't considered a bank before, as I've not yet experienced with them.<br>I will try to understand those too and see if they are easier to use.<br><br>But can you use a bank for storing pointers to type-instances and access it like arrays of types (Array(index)\Fieldname = xxx)? <br><br></td></tr></table><br>
<a name="429039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't use arrays then use types instead - that way you can add and delete as you please without the constraints of arrays. <br><br></td></tr></table><br>
<a name="429255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's also true, but when I have to edit some data in one field of a certain type-instance, I would have to loop through them all, just to edit one field.<br><br>Using an array, I can "group" all stations in a sector together (using the first index as the sector-number, the second as the station-number).<br><br>That way, I only have to loop through the second index of the array (if you have 100 sectors and 10 stations per sector), then you would have to loop through 1000 type-instances, instead of 10.<br><br>I'm trying all kinds of different approaches, but can't find the perfect solution.<br>And as long as I cannot find the perfect one, I cannot start with the game.<br><br>They should be:<br>- grouped together (so looping through them doesn't take too long)<br>- easy to use<br>- expandable, without re-compiling the entire EXE (I use textfiles to store all data)<br>- memory-efficient <br><br></td></tr></table><br>
<a name="429357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> How often are you going to cycle through these arrays...looping through 1000 types isn't going to be that slow. But anyhow why don't you keep count of your type list- have global variables to represent which is the start of a sector population count and the second can represent the population of that type of object in that sector number...so if you wanted to make 100 zones then make your first generic type only one hundred big - you would need 200 global variable though...so perhaps use an array to hold those values is a way better idea. Basically if you then add 1 new station into a sector (let's say sector 10) you find it's sector number in your array - the first number is your start position in your type - the second number will hold the population count of that sector which to start will be 0 ( this is also the end count)...you then make your type by copying one of your global meshes and add 1 to the second number - then all sector numbers after sector 10 must be moved up 1, so add 1 to their value in your sector numbers array - as well as well (as adding one to the population end number) anything between start and end values is the poulation count ...this way you can keep track of all your sectors and their populations.<br>You use the array population start and end counts as the start and end numbers for your timer inside your type - you can use before and after as well as insert commands as well.<br>I just thought this out quickly so there may be some flaws here - but best bet is to just make a start on your system as it becomes more and more obvious what you must do to achieve your exact goal.<br><br>I hope you get it anyhow! <br><br></td></tr></table><br>
<a name="429361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would this help...<br><a href="http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=cyberseth11252002124838.html" target="_blank">http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=cyberseth11252002124838.html</a><br>or how long would it take to copy to new array and copy back? <br><br></td></tr></table><br>
<a name="429462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's pretty much the idea there Tonyg...a nice slick tutorial to really show the power of the array/type relationship!! Cool! <br><br></td></tr></table><br>
<a name="429563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If anybody is unaware of the articles section at Blitzcoder then it's well worth having a browse. <br><br></td></tr></table><br>
<a name="430052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Tonyg,<br><br>I can really use that, because I am using arrays of types.<br><br>I have found a solution for my game.<br>Since the player can only be in one sector at a time,<br>it has no use to load all data about every station in the universe, especially for sectors were you're not present (the other 99).<br><br>I will first be trying to create a game in the style of Freelancer (having lots of sectors and only one ship at a time and no other player-owned stuff).<br><br>This way I can create arrays with only 1 dimension.<br>When you enter a jumpgate (to go to another sector), all current data (and type-instances) are destroyed, the arrays will be redimmed, new type-instances are created (as much as needed) and data is loaded into them.<br><br>No need to copy/restore arrays and have too much data loaded at a given time.<br><br>Guess the station-building thingie will be for the next version of the game, when this one is working perfectly.<br>I will first try to get this game working, before I attempt to let the user build anything else, as this would be my first game.<br><br>If I would use 2-d arrays, and when one sector contains 15 stations, the first index of the array would represent the sectornumber (100), the second the stationnumber (15).<br><br>If another sector only had 1 station, this array would have 14 indexes (and also 14 type-instances) to many.<br><br>I was concearned (or how do you write this, as I'm Dutch) that my game would use too much unused, but allocated memory.<br><br>Looping through all these types (1000) is not slow, I know, but if you would have to loop through them, say 10 times per loop, at 50 fps (= 50 loops per second), then Blitz hasn't any time left to render the scene.<br>Then the framerate would go down to a crawl.<br><br>But thanks for the help, guys (and girls). <br><br></td></tr></table><br>
<a name="430110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I doubt that iterating through 10,000 types per frame will slow any modern computer down. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
