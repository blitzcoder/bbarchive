<!DOCTYPE html><html lang="en" ><head ><title >How to tell WHICH NPCs which point they belong to?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to tell WHICH NPCs which point they belong to?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >How to tell WHICH NPCs which point they belong to?</a><br><br>
<a name="1096179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, as the title says, how do you make it, so that EACH different NPC knows which waypoint to go to?<br><br>How would I assign both the waypoints AND the NPCs the same IDs?<br><br>Thanks! :) <br><br></td></tr></table><br>
<a name="1096275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> With a variable.<br><br>That's a very general question - where should one start?<br><br>Perhaps forget for now about the specifics of NPCs, waypoints, AI and such - and plan out a small program to get a rectangle to follow a set path in 2d space.<br><br>There are lots of ways of doing this. But explore the idea a little and have a go. <br><br></td></tr></table><br>
<a name="1096276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I HATE 2d. <br><br></td></tr></table><br>
<a name="1096279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The same principles that apply to 'waypoint' in 2d apply in 3d.  So perhaps try with a red cube navigating its way from blue cube to blue cube in 3d space then... <br><br></td></tr></table><br>
<a name="1096281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now THERE'S a good idea :) <br><br></td></tr></table><br>
<a name="1096282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> but most NPC's follow a 2D route anyway, granted the terrain might raise or lower accordingly, but the route is rarely straight up (ala a ladder) just ground level and inclines.<br><br>So a 2D prototype is gonna be the foundations of a 2D in 3D one. <br><br></td></tr></table><br>
<a name="1096283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> i prefer 3d. the more complex it is, the easier it is for me to understand. <br><br></td></tr></table><br>
<a name="1096285"></a>

<a name="1096286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well unless your characters and NPC's can fly or climb wall's most will be following a 2D route behind the scenes any way.<br>A 3D cube zooming along a flat plane along a predefined route or a line of sight is no different logically than a bitmap doing the same.<br><br>Chess is still chess if its played with paper pieces, a 2D notation heavy program, battle chess (great game) or fully rendered humans with fancy hats on a playing field*.<br><br>Hell I'd go as far as to say the multi layerd startrek chess game was nothing more than the same game with a fancy board, although I've never looked into it.<br><br>*One glastonbury (2000 I think) I along with others was trying to round up enough people to do LARP chess, most people said "but I don't know how to play chess."<br>To which I retorted "You don't have to, some one else is playing you would just be a playing piece.<br><br><br><br>Edit:<br>Unless you do need NPC's to traverse stairs and other floors in their route's, but I've found most just pootle about outdoors between huts waiting for you to engage them in conversation, ie staying in a 2D realm regarless of how hilly it might be.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1096293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Graythe</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are many ways to do it - here's a demo of one method<br><br><pre class=code>Const IntWidth%=4
Const EntityCount%=10
Const EntitySpeed#=.001

Global EntityIndex=CreateBank(IntWidth)
Global WaypointIndex=CreateBank(IntWidth)

Graphics3D 640,480,0,2
Light=CreateLight()
PositionEntity Light,0,0,-1
Camera=CreateCamera()

CreateEntities
CreateWayPoints	100




Repeat

	NoEntities=PeekInt(EntityIndex,0)
	For EntityLoop=True To NoEntities

		EntityBank=PeekInt(EntityIndex,EntityLoop*IntWidth)
		EntityNo=PeekInt(EntityBank,0)
		WaypointSerial=PeekInt(EntityBank,4)
		
		Select WayPointSerial
			Case False
				;No waypoint is selected! - Select a waypoint
				WayPointSerial=Rand(1,100)
				;Apply waypoint serial to entity
				PokeInt EntityBank,4,WayPointSerial
				;Set entity to yellow 
				EntityColor EntityNo,255,255,0
				
				Waypoint=PeekInt(WaypointIndex,WaypointSerial*IntWidth)
				;Point entity at new waypoint
				PointEntity EntityNo,Waypoint
				;Calculate moves required and store
				PokeInt EntityBank,8,EntityDistance(EntityNo,Waypoint)/EntitySpeed

			Default
				
				;How many moves Left?
				MovesCounter=PeekInt(EntityBank,8)
				If MovesCounter
					MoveEntity EntityNo,0.,0.,EntitySpeed
					PokeInt EntityBank,8,PeekInt(EntityBank,8)+-1
				Else
					;Waypoint reached - set waypoint to nil
					PokeInt EntityBank,4,False
					;Set entity to red
					EntityColor EntityNo,255,0,0
				End If

		End Select
									
	Next
		
	RenderWorld
	Flip

Until KeyHit(True)




Function CreateWayPoints(WayLimit%)

For WayLoop=True To WayLimit

	PointBank=CreateBank(16)
	Waypoint=CreatePivot()
	PositionEntity Waypoint,Rnd(-.5,.5),Rnd(-.5,.5),1.62+Rnd(-.5,.5)

	PokeFloat PointBank,0,EntityX(WayPoint)
	PokeFloat PointBank,4,EntityY(WayPoint)
	PokeFloat PointBank,8,EntityZ(WayPoint)

	PokeInt WaypointIndex,0,PeekInt(WaypointIndex,0)+True
	ResizeBank WaypointIndex,PeekInt(WaypointIndex,0)*IntWidth+IntWidth
	PokeInt WaypointIndex,PeekInt(WaypointIndex,0)*IntWidth,Waypoint
	
Next


End Function




Function CreateEntities()

;Create entities
For EntityLoop=True To EntityCount
	
	EntityBank=CreateBank(12)
	
	;Create, scale and position entity
	EntityNo=CreateCube()
	ScaleEntity EntityNo,.01,.01,.01
	PositionEntity EntityNo,Rnd(-.5,.5),Rnd(-.5,.5),1.62+Rnd(-.5,.5)

	;Increment entity count
	PokeInt EntityIndex,False,PeekInt(EntityIndex,False)+True
	;Adjust memory size
	ResizeBank EntityIndex,PeekInt(EntityIndex,False)*IntWidth+IntWidth
	;Append new entity to list
	PokeInt EntityIndex,EntityLoop*IntWidth,EntityBank

	;Store entity data
	PokeInt EntityBank,0,EntityNo
	;Select a waypoint serial at random
	PokeInt EntityBank,4,Rand(1,100)
	;Entity movement counter
	PokeInt EntityBank,8,False	

	EntityColor EntityNo,255,0,0
Next
</pre> <br><br></td></tr></table><br>
<a name="1096295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> So this will figure out the closest waypoint if the NPC is chasing after a player? <br><br></td></tr></table><br>
<a name="1096297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Graythe</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'How to tell WHICH NPCs which point they belong to?'. <br><br>That's what this demonstrates. <br><br></td></tr></table><br>
<a name="1096302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Naughty Alien answered your question in this thread dude...<br><br><a href="http://blitzbasic.com/Community/posts.php?topic=89382#1015096" target="_blank">http://blitzbasic.com/Community/posts.php?topic=89382#1015096</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
