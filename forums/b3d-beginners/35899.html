<!DOCTYPE html><html lang="en" ><head ><title >How to I implement occlusion in a B3D game?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to I implement occlusion in a B3D game?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >How to I implement occlusion in a B3D game?</a><br><br>
<a name="391978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WarpZone</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've seen some great blitz demos featuring pretty graphics and working FPS physics, but these seem to draw ALL of the polygons in the world.  <br><br>I have heard certian tools can be used to create indoor maps with BSP-like culling and occusion.  Is that data included within the B3D format, or would I need to use a different file format, like .x or .3DS?  Or is the culling/occlusion data stored in an external file of some sort?<br><br>I'm pretty much asking the usual, here.  How do I do it, what tools will I need, how many competing tools are availible for me to choose from, etc.<br><br>Ideally, I would like to be able to use good old Milkshape to model everything, from my characters to my indoor environments, export them to B3D, polish them up in B3DTweak and render them as-is.  If this is not possible, then I'd like to know how to get from Milkshape to optimized 3D worlds with as few extra steps as possible, and while buying as few extra tools as possible. <br><br></td></tr></table><br>
<a name="391980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/Community/posts.php?topic=34893" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=34893</a><br><br>The only map making tool that offers any form of built in occlusion is quill3d.  If you want to buy it and are in the UK you can buy mine cheap. :D<br><br>The BSP file format offers occlusion, but has many limitations, the main one being the licensing issues.<br><br>My recommended tool path is:<br>1. Milkshape<br>2. gile[s] for lightmapping and setup<br>3. portalpal for occlusion (I am biased)<br><br>Good luck in your search. <br><br></td></tr></table><br>
<a name="391989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> MasterBeaker, is portalpal the occlusion tool you are working on?  How long before it's done?<br><br>Right now the best way to do occlusion culling is by hiding/showing entire chunks of your level based on where the player is, with occlusion zones setup manually or perhaps a fast visibility check.  Don't worry about overdraw; with modern graphics cards the key is to quickly chop the scene down into a reasonable number of polygons for the video hardware, as opposed to wasting a lot of time and effort nitpicking exactly which polygons can and cannot be seen. <br><br></td></tr></table><br>
<a name="392062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It was finished when I posted the demos.  But, due to lack of time (and partly lack of interest, and some hostility about selling stuff, from other blitzers) I've not had chance to setup a website etc.<br><br>I'm also considering adding an auto-slice feature.  I personally don't think it needs it, but I suspect I would come under much criticism without it.<br><br>Time will tell. <br><br></td></tr></table><br>
<a name="392093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WarpZone</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay... so the PortalPal source was lost in a hard drive crash, and Blitz's linepicks turned out to be so slow that the optimized app ran slower than the original version anyway?<br><br>If I'm understanding you right, I should just make my world out of discreet rooms that can't see each other and code it into my app?<br><br>How do I do a "fast visibility check?" <br><br></td></tr></table><br>
<a name="392317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't have to be as anal as rooms that can't see into each other, just descrete rooms which you turn on/off based on which can be seen.  As for "fast visibility check," there are a number of possible tricks which could be useful depending on your game/level.  For example, Project Plasma was doing something with color coding the rooms and seeing what color pixels are rendered during a first render pass.  You might also find the LineOfSight3D function from the code archives useful. <br><br></td></tr></table><br>
<a name="392554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WarpZone</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm... so it would be kinda like Sectors in Serious Sam... they auto-occlude each other if you can't see from one sector into the next, so it's kind of up to the mapper to to seperate sectors inteligently.  <br><br>If each big chunk of level is a seperate model or entity, or something, would it be possible to simply return if they are visible or not using LineOfSight3D?<br><br>I'm trying to think of a way to make it happen, and so far the best thing I can think of would be to create a list of all the rooms(models) on level startup and then turn them off if they are NOT in LOS, and include some kind of entity in the background beyond even the skybox, and re-display all the room/models again and then cull the ones that weren't drawn.  <br><br>I haven't the foggiest idea how to actually do that, though. :P  I need to learn the programming side of Blitz more befoire I start trying to do something like that. <br><br></td></tr></table><br>
<a name="392862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;&gt;and some hostility about selling stuff, from other blitzers&lt;&lt;<br><br>Cmon - you are free to do what ever you want. I thought it would be nice to see some freeware tools from time to time.<br><br>Personally I would deal with occlusion in a manual way:<br><br>Create a tool that displays your entire huge super map. Then you can open boxes with the mouse (ala Maplet) and cover zones with such boxes. You don't need to make every room a zone, think of 5 to 10 thousand polys per zone. Use overlapping boxes and cover the whole map. Then the app can parse all boxes and check if one of the 3 Vertices of a Trianlge is inside a box. It will then create a mesh for each box, containing all neccessary Triangles. In the Game you will only have to ask if the player is inside the xyzwhd of one of the boxes and show that box and hide all the other ones.<br><br>This is the easiest way IMHO and considering that you spent maybe a week or more to create the Map Mesh, you shouldn't worry about 5 Minutes of Zone Boxes definitions. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
