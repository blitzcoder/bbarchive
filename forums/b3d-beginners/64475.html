<!DOCTYPE html><html lang="en" ><head ><title >Texture on a textured terrain</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Texture on a textured terrain</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Texture on a textured terrain</a><br><br>
<a name="719761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ingenium</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> mmm...<br>i want to place a texture on a textured terrain...<br>like a circle to indicate what unit i have selected...<br>how can I? <br><br></td></tr></table><br>
<a name="719765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >elcoo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You mean like a sprite? I don't understand i think <br><br></td></tr></table><br>
<a name="719766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >elcoo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, now i'm sure. You have to make a sprite. Well, maybe there's another possibillity. I'm also not to good in blitzbasic <br><br></td></tr></table><br>
<a name="719767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ingenium</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here it is an example: <img src="http://www.x-zine.de/portale/games/images/sacredneu/bild3.jpg"><br>As you can see under the main character there is a circle that is not a sprite... <br><br></td></tr></table><br>
<a name="719770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >elcoo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, i understand. I'm german so I've problems with the speech. I would make it with a sprite. And if u want to put screenshots in the forum, just copy the url in your post, without any "[img]" <br><br></td></tr></table><br>
<a name="719771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ingenium</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah sorry for the image :D <br><br></td></tr></table><br>
<a name="719785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> After EntityTexture you can put a "index" parameter, that indicates which level of the entity is textured.<br>So you could apply the new texture using EntityTexture Terrain, texture2, 0, 1. If you want to move it, try using PositionTexture. <br><br></td></tr></table><br>
<a name="719795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ingenium</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah but the texture is repeated for the whole extension of the terrain! i don't want that! <br><br></td></tr></table><br>
<a name="719796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Then, use ScaleTexture texture, TerrainSize(terrain), TerrainSize(terrain) <br><br></td></tr></table><br>
<a name="719797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ingenium</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> it's the same! the only difference is that the pieces of textures are smaller! <br><br></td></tr></table><br>
<a name="719799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, so that is going into the right direction, then! Maybe try entering values yourselve, ie. ScaleTexture texture, 1024, 1024<br>And there is a EntityFX that is used for "clamping". You can disable repeating the texture on the sides of a mesh. Not sure about terrains though. <br><br></td></tr></table><br>
<a name="719801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ingenium</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> can't find the entityfx command you are talking about...<br>fx - <br>0: nothing (default) <br>1: full-bright <br>2: use vertex colors instead of brush color <br>4: flatshaded <br>8: disable fog <br>16: disable backface culling <br>32: force alpha-blending <br><br>there is nothing for clamping... <br><br></td></tr></table><br>
<a name="719804"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, you are right. The right command is TextureFilter. (edit)However I tried it and it does not work. <br>Here is an example of what I mean:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;setup graphics
Graphics3D 800, 600, 0, 2
SetBuffer BackBuffer()

;create 1st texture
texture1 = CreateTexture(512, 512)
Cls
Color 0, 0, 255
For i = 0 To 512 Step 10
	Line i, 0, i, 512
	Line 0, i, 512, i
Next
CopyRect 0, 0, 512, 512, 0, 0, BackBuffer(), TextureBuffer(texture1)

;create 2nd texture
Color 255, 255, 255
texture = CreateTexture(512, 512)
Cls
Oval 236, 236, 40, 40, 0
CopyRect 0, 0, 512, 512, 0, 0, BackBuffer(), TextureBuffer(texture)
ScaleTexture texture, 4, 4
PositionTexture texture, 0.5, 0.5

;create terrain
tw = 512 ;terrainwidth
terrain = CreateTerrain(tw)
EntityTexture terrain, texture1
EntityTexture terrain, texture, 0, 1
TextureBlend texture, 3
ScaleTexture texture, tw, tw


;create camera
camera = CreateCamera()
;CameraProjMode camera, 2
PositionEntity camera, tw/2, 500, tw/2
RotateEntity camera, 90, 0, 0

;main loop
Repeat
	;calculate x/y position circle
	time = time + 1
	x# = Cos(time) / 4
	y# = Sin(time) / 4
	;position circle
	PositionTexture texture, x#, y#
	;render
	RenderWorld()
	Flip
;until ESC is pressed
Until KeyHit(1)

End
</textarea><br>!note!edited <br><br></td></tr></table><br>
<a name="719806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ingenium</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh ok thnx <br><br></td></tr></table><br>
<a name="719816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tweaked the example a bit and it seems that the best way to go for a clamping version, is using a big texture for the circle (terrainsize*3) and then scaling it up so only 1/3rd of the entire texture is shown. Finally, use PositionTexture to move it. That way, even when the circle crosses the edge of the terrain, the repetition of the circle on the other side still remains outside of the visible area. So then it doesn't repeat in sight.<br>(edit)OR: take 4 points. Read the TerrainHeight from their position and place them on top of the terrain. Then, move a quad to match these 4 points. This method is faster, but less precise. The more points the quad has, the better it 'fits' on the terrain.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;setup graphics
Graphics3D 800, 600, 0, 2
SetBuffer BackBuffer()

;create 1st texture
texture1 = CreateTexture(512, 512)
Cls
Color 0, 0, 255
For i = 0 To 512 Step 10
	Line i, 0, i, 512
	Line 0, i, 512, i
Next
CopyRect 0, 0, 512, 512, 0, 0, BackBuffer(), TextureBuffer(texture1)

;create terrain
tw = 512 ;terrainwidth
terrain = CreateTerrain(tw)
EntityTexture terrain, texture1

;create camera
camera = CreateCamera()
;CameraProjMode camera, 2
PositionEntity camera, tw/2, 500, tw/2
RotateEntity camera, 90, 0, 0

;create quad
mesh = CreateMesh()
surf = CreateSurface(mesh)
AddVertex surf, -1, -1, 0, 0, 0
AddVertex surf,  1, -1, 0, 1, 0
AddVertex surf,  1,  1, 0, 1, 1
AddVertex surf, -1,  1, 0, 0, 1
AddTriangle surf, 0, 1, 2
AddTriangle surf, 0, 2, 3
RotateMesh mesh, 90, 0, 0 
ScaleMesh mesh, 10, 1, 10
FlipMesh mesh

;main loop
Repeat
	time = time + 1
	PositionEntity mesh, Cos(time) * 100 + tw/2, 0, Sin(time) * 100 + tw/2
	;calculate x/y position circle
	For t = 0 To 3
		TFormPoint VertexX(surf, t), VertexY(surf, t), VertexZ(surf, t), mesh, 0
		yy# = TerrainY(terrain, TFormedX(), TFormedY(), TFormedZ())
		TFormPoint TFormedX(), yy#, TFormedZ(), 0, mesh
		VertexCoords surf, t, TFormedX(), TFormedY(), TFormedZ()
	Next	
	
	;render
	RenderWorld()
	Flip
;until ESC is pressed
Until KeyHit(1)

End
</textarea> <br><br></td></tr></table><br>
<a name="719930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I sprite would probably be alot easier to do :) <br><br></td></tr></table><br>
<a name="719951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is right. And considering that a character is above the terrain all the time, simply parenting the sprite to the object might work.<br>I guess every method has it's disadvantages. Using a sprite doesn't allow for moving the vertices up and down separately. Using EntityOrder causes the terrain to be rendered below any characters. The multitexture solution works, but it takes far more memory than needed. And using a quad (preferrably with multiple subdivisions) will also need some tweaking to get it right, because the distance between the vertices should somehow match the vertices of the terrain. Otherwise some parts of the quad will still end up under the terrain.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;setup graphics
Graphics3D 800, 600, 0, 2
SetBuffer BackBuffer()

;create 1st texture
texture1 = CreateTexture(512, 512)
Cls
Color 0, 0, 255
For i = 0 To 512 Step 10
	Line i, 0, i, 512
	Line 0, i, 512, i
Next
CopyRect 0, 0, 512, 512, 0, 0, BackBuffer(), TextureBuffer(texture1)
ScaleTexture texture1, 512, 512

;create terrain
tw = 512 ;terrainwidth
terrain = CreateTerrain(tw);LoadTerrain("c:\_Xfiles\height44.bmp")
ScaleEntity terrain, 1, 10, 1
EntityTexture terrain, texture1


;create camera
camera = CreateCamera()
;CameraProjMode camera, 2
PositionEntity camera, tw/2, 500, tw/2
RotateEntity camera, 90, 0, 0

;create quad
mesh = CreateMesh()
surf = CreateSurface(mesh)
AddVertex surf, -1, -1, 0, 0, 0
AddVertex surf,  1, -1, 0, 1, 0
AddVertex surf,  1,  1, 0, 1, 1
AddVertex surf, -1,  1, 0, 0, 1
AddTriangle surf, 0, 1, 2
AddTriangle surf, 0, 2, 3
RotateMesh mesh, 90, 0, 0 
;ScaleMesh mesh, 10, 1, 10
FlipMesh mesh

camera2 = CreateCamera(mesh)
MoveEntity camera2, 0, 20, -50
HideEntity camera

;main loop
Repeat
	time = time + 1
	PositionEntity mesh, Cos(time) * 100 + tw/2, 0, Sin(time) * 100 + tw/2
	;calculate x/y position circle
	For t = 0 To 3
		TFormPoint VertexX(surf, t), VertexY(surf, t), VertexZ(surf, t), mesh, 0
		yy# = TerrainY(terrain, TFormedX(), TFormedY(), TFormedZ()) + 1
		TFormPoint TFormedX(), yy#, TFormedZ(), 0, mesh
		VertexCoords surf, t, TFormedX(), TFormedY(), TFormedZ()
	Next	
	
	;render
	RenderWorld()
	Flip
;until ESC is pressed
Until KeyHit(1)

End
</textarea> <br><br></td></tr></table><br>
<a name="719980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ingenium</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think i will use a sprite... <br><br></td></tr></table><br>
<a name="725948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
