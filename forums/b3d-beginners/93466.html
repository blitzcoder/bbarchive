<!DOCTYPE html><html lang="en" ><head ><title >Paint onto a mesh? Fps questions.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Paint onto a mesh? Fps questions.</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Paint onto a mesh? Fps questions.</a><br><br>
<a name="1069279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kiyoshi</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey y'all, a quick question (or 2). First is, how would I go about painting a color onto a mesh? I'm making an FPS, and I'm using Camerapick to determine where the bullets hit. Basically:<br><br><pre class=code>
Camerapick(camera,mousex(),mousey())
If Pickedentity()=e\mesh e\health-1
</pre><br><br>What I would like is for the section of the body that's hit to turn a reddish color, like blood seeping through the clothes (Goldeneye 64-ish). How would I find the section that's hit, and paint some red onto it; if thats even possible.<br><br>My next question is, if my previous question is possible, can the same be done with sprites? I.e. bulletholes in the wall? Note that I don't mean lining up a sprite with the picked coordinates, but rather actually painting the sprite onto the mesh that is my building.<br><br>Thanks for taking the time to read this! :D <br><br></td></tr></table><br>
<a name="1069283"></a>

<a name="1069287"></a>

<a name="1069288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depending on the UV mapping of your mesh, this might be possible. What you need is PIckedU() and PickedV(), I've seen this in the archives as well as on the Blitz3D CD in one of the samples. You will then have to paint directly to the texture. If other meshes are useing the same texture, they will bleed a well.<br><br>Painting to a texture is rather slow. Furthermore, DrawImage directly to a texture may not work on every machine. It might be better to keep a copy of the texture as an image, then draws the blood to the image, then copyrect the image to the texture.<br><br>If your NPCs are using the same texture (which is likely) then you maybe need to force them to use individual ones, eg. by using individual texture filenames. (I guess a Zipper can shrink this redundant data).<br><br>Basicly for wall decals, and often for blood as well, sprites are used (Or better: quads, due to some recent sprite problems). But I do agree, some nice "blood seeping through the clothes" fx canbe achieved when painted directly to the texture. But the UVMapping must be predestinated for this usage. For example you cannot use the same texture space for the two legs of the NPC (something that is common). Every Triangle must be UV-mapped to its own texture space, like in a (unoptimized) lightmap.<br><br>BTW. There may be a problem with Linepicking animated Meshes (B3D), as far as I know they will pick the initial pose only and not the current animation frame. Maybe that's not really important for the effect.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1069413"></a>

<a name="1069447"></a>

<a name="1069448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Goldeneye for the N64 used vertex-coloring - that's why you get that smooth blending of the red color.<br>Find out the closest vertices to the picked point and paint them progressive shades of red.<br><br>EDIT: I meant 'progressive' because if you shoot an area repeatedly, that spot will turn redder and redder.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1069710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got to agree, VertexColor is a better solution. Although with a very low poly model it might be rather unrealistic, and the vertices need to be shared, it's a cheap solution that doesn't slow things down. I never played goldeneye, but I think it's looking really nice when you slowly and progressively  increase the red-ness of a vertex after one bullet hit, and of course increase the speed after further bullet hits on the same vertex.<br><br>See PickedTriangle Function <a href="http://www.blitzbasic.com/b3ddocs/command.php?name=PickedTriangle&amp;ref=goto" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=PickedTriangle&amp;ref=goto</a> , from that one it's gonna be easy to find the closest of 3 Vertices of the triangle. Then VertexColor it: <a href="http://www.blitzbasic.com/b3ddocs/command.php?name=VertexColor&amp;ref=goto" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=VertexColor&amp;ref=goto</a><br><br>You probably best hold an array for every NPC, storing the current blood factor for every vertex, so you can increment the values. But maybe you can also utilize VertexRed# ( surface,index ) instead.<br><br>Depending on the original vertex color you may need to A: in case of original color 255,255,255 decrease green and blue, B: in case of eg. 127,127,127 decrease green and blue and increase red at the same time and C: in case of 0,0,0 increase red only. Blendmode and FX need to be set right. (entityfx 2 ) <br><br></td></tr></table><br>
<a name="1069973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kiyoshi</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot, guys! This really helps! :D <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
