<!DOCTYPE html><html lang="en" ><head ><title >2D polygon generation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2D polygon generation</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >2D polygon generation</a><br><br>
<a name="425669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kmick</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I first created this function to give myself some extra polys to play with. So far Iv'e just used it in a screen saver.<br><b>THE PROBLEM IS</b>, the octogon, decagon,dodecagon have gaps between some of the corners. And the 11 gon(whatever thats called) has an uneven side.  I originally thought that it was due to coordinates not being floating point numbers, but it's mostly the even numbers giving me problem. Any help would be greatly appreciated.<br><pre class=code>
Graphics 320,240,16,2
AutoMidHandle(True)
size = 3

Print "Press mouse button to change polygons......"
WaitMouse
While Not KeyDown(1)
Cls
polygon = PolyImage(size,100,0,255,255,255)

DrawImage polygon,320/2,240/2
FreeImage polygon
Text 320/2,240/2,size + " sides",1,1
WaitMouse


size = size + 1
If size &gt; 12 Then size = 3

Wend

End



;Creates an image of a polygon and returns it to specified handle
;****************************************************************

Function PolyImage(numSides,size,rotation,r,g,b)

Color r,g,b

polygon = CreateImage(size*2,size*2)
SetBuffer ImageBuffer(polygon)
Origin size,size

rotationSolver = rotation + 90

sides= 360/numSides

degrees = 0-rotationSolver

a = 0


;Generate coordinates of the polygon corners with polar coordinate system based on sin/cos
;*****************************************************************************************
Repeat
 

	y = Sin(degrees)*size 
	
	x = Cos(degrees)*size 
	;Plot x,y
	
	a = a + 1
	
	Select a
		Case 1
			px1 = x
			py1 = y
		Case 2
			px2 = x
			py2 = y
		Case 3
			px3 = x
			py3 = y
		Case 4
			px4 = x
			py4 = y
		Case 5
			px5 = x
			py5 = y
		Case 6
			px6 = x
			py6 = y
		Case 7
			px7 = x
			py7 = y	
		Case 8	
			px8 = x
			py8 = y
		Case 9	
			px9 = x
			py9 = y
		Case 10	
			px10 = x
			py10 = y
		Case 11	
			px11 = x
			py11 = y
		Case 12	
			px12 = x
			py12 = y


	End Select
	
degrees = degrees + sides	

Until degrees &gt; 360



;draw sides of polygons based on corners coordinates
Select numSides
	Case 3
		Line px1,py1,px2,py2
		Line px2,py2,px3,py3
		Line px3,py3,px1,py1
		
	Case 4
		Line px1,py1,px2,py2
		Line px2,py2,px3,py3
		Line px3,py3,px4,py4
		Line px4,py4,px1,py1


	Case 5
		Line px1,py1,px2,py2
		Line px2,py2,px3,py3
		Line px3,py3,px4,py4
		Line px4,py4,px5,py5
		Line px5,py5,px1,py1

	Case 6
		Line px1,py1,px2,py2
		Line px2,py2,px3,py3
		Line px3,py3,px4,py4
		Line px4,py4,px5,py5
		Line px5,py5,px6,py6
		Line px6,py6,px1,py1 
		
	Case 7
		Line px1,py1,px2,py2
		Line px2,py2,px3,py3
		Line px3,py3,px4,py4
		Line px4,py4,px5,py5
		Line px5,py5,px6,py6
		Line px6,py6,px7,py7
		Line px7,py7,px1,py1
		
	Case 8
		Line px1,py1,px2,py2
		Line px2,py2,px3,py3
		Line px3,py3,px4,py4
		Line px4,py4,px5,py5
		Line px5,py5,px6,py6
		Line px6,py6,px7,py7
		Line px7,py7,px8,py8
		Line px8,py8,px1,py1

	Case 9
		Line px1,py1,px2,py2
		Line px2,py2,px3,py3
		Line px3,py3,px4,py4
		Line px4,py4,px5,py5
		Line px5,py5,px6,py6
		Line px6,py6,px7,py7
		Line px7,py7,px8,py8
		Line px8,py8,px9,py9
		Line px9,py9,px1,py1

	Case 10
		Line px1,py1,px2,py2
		Line px2,py2,px3,py3
		Line px3,py3,px4,py4
		Line px4,py4,px5,py5
		Line px5,py5,px6,py6
		Line px6,py6,px7,py7
		Line px7,py7,px8,py8
		Line px8,py8,px9,py9
		Line px9,py9,px10,py10
		Line px10,py10,px1,py1

	Case 11
		Line px1,py1,px2,py2
		Line px2,py2,px3,py3
		Line px3,py3,px4,py4
		Line px4,py4,px5,py5
		Line px5,py5,px6,py6
		Line px6,py6,px7,py7
		Line px7,py7,px8,py8
		Line px8,py8,px9,py9
		Line px9,py9,px10,py10
		Line px10,py10,px11,py11
		Line px11,py11,px1,py1

	Case 12
		Line px1,py1,px2,py2
		Line px2,py2,px3,py3
		Line px3,py3,px4,py4
		Line px4,py4,px5,py5
		Line px5,py5,px6,py6
		Line px6,py6,px7,py7
		Line px7,py7,px8,py8
		Line px8,py8,px9,py9
		Line px9,py9,px10,py10
		Line px10,py10,px11,py11
		Line px11,py11,px12,py12
		Line px12,py12,px1,py1
End Select

SetBuffer FrontBuffer()

Return polygon

End Function  ;PolyImage()
</pre> <br><br></td></tr></table><br>
<a name="425737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, first of all, I would change all of your position variables to floating point numbers.  You actually only have to do this the first time the variable is used in the code if you don't feel like changing all of them.<br><br>11 sided polygons do not have angles that are integers.<br>360/11 = 32.727272727272727272727272727273<br><br>This is why your last side is shorter. <br><br></td></tr></table><br>
<a name="425743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kmick</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanx for the reply WolRon. Unfortunatly, that doesn't work. Although I agree with you on 11. 8,10,and 12 give me even results. The math problem has to be somewhere else. <br><br></td></tr></table><br>
<a name="425745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kmick</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> And on another note. Can coordinates be other than whole numbers? <br><br></td></tr></table><br>
<a name="425749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> change <b>polygon = CreateImage(size*2,size*2)</b> to <b>polygon = CreateImage(size*2+1,size*2+1)</b> or change <b>y = Sin(degrees)*size </b>and <b>x = cos(degrees)*size</b> to <b>y = Sin(degrees)*(size - 1)</b> and <b>x = Cos(degrees)*(size - 1)</b><br><br>Edit:  reason for the gaps is that your plotting off the edge of the image by 1 pixel. <br><br></td></tr></table><br>
<a name="425756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kmick</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tom....good eyes.  I knew it was something stupid, I just could not see it. <br>Thanks. <br><br></td></tr></table><br>
<a name="425770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, not really.  Noticed you put in a function to rotate the ploygons.  Thought I'd make use of it and see if the problem was caused by the angle of the lines.  Then I noticed that all the gaps appeared either at the very bottom or at the very right edge, that's when I realized that it must be drawing off the edge of the image buffer.  So I changed DrawImage to DrawBlock (so it wouldn't draw transparent) then colored the background of the screen red.  Then it was easy to notice the lines drawing off the rectangle.  Had you not put in that rotation function, I might still be trying to figure out your problem. <br><br></td></tr></table><br>
<a name="425778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kmick</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats kinda funny. If I never put in the rotation, I might have figured it out. Putting in the rotation allowed you to fix it.  Cool nun the less.<br>Thanks again. <br><br></td></tr></table><br>
<a name="425935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PGF</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is a strange and not very good way to do the loop.  what if you want say 37 sides ?<br><br>How about this:<br><br><pre class=code>
Const ScreenWidth = 640
Const ScreenHeight = 480

Const CentreX = ScreenWidth / 2
Const CentreY = ScreenHeight / 2

Graphics ScreenWidth, ScreenHeight, 16, 2
AutoMidHandle(True)
Sides = 3

Print "Press mouse button to change polygons......"
WaitMouse

While True
	If KeyHit(1)
		Exit
	EndIf
		
	X = MouseX() - CentreX 
	Y = MouseY() - CentreY
	Size# = Sqr(X * X + Y * Y)
	Rot# = ATan2(Y, X)
	Polygon = PolyImage2(Sides, Size, Rot, 255, 255, 255)

	SetBuffer BackBuffer()
	Cls
	TileImage Polygon, CentreX, CentreY
	FreeImage Polygon
	Text CentreX, CentreY, "Sides = " + Sides + "  Rot = " + Rot, 1, 1
	Flip True

	If MouseHit(1)
		Sides = Sides + 1
		If Sides &gt; 12 Then Sides = 3
	EndIf

Wend

End

;Creates an image of a polygon and returns it to specified handle
;****************************************************************
Function PolyImage2(numSides, size, rotation, r, g, b)

	Color r, g, b
	
	polygon = CreateImage(size * 2 + 1, size * 2 + 1)
	SetBuffer ImageBuffer(polygon)
	Origin size,size

	Local OldX#, OldY#
	Local NewX#, NewY#
	Local AngleStep# = 360 / numSides
	Local Angle#
	
	For i = 0 To numSides
		Angle = i * AngleStep + rotation
		OldX = NewX
		OldY = NewY
		NewX = size * Cos(Angle)
		NewY = size * Sin(Angle)
		If (i &lt;&gt; 0)
			Line OldX, OldY, NewX, NewY
		EndIf
	Next
	
	Return polygon
End Function
</pre><br>The function is not only a lot shorter but more flexible as numSides can be anything with no need to add code.<br><br>I also added a bit more functionality in the mainline like rotating the polygon according to the mouse position and tiling the image for a cool but cheap effect.  Hence the switch to continuous drawing and flip etc. <br><br></td></tr></table><br>
<a name="426095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kmick</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is alot shorter. And better for equilateral shapes. In fact that is very similar to how i was originally writing it.  I chose this method because it allowed me to more easily prototype other shapes based on the same numbers like pentangles and hexangles. It also gives me more direct control over the individual coordinates for non equilateral shapes, instead of effecting each pair equally. Eventually it will all be much more economical.  And as for the amount of sides.....I definitely agree , But I also figured once you get past 15 or so, you would be better off using the oval command.  <br>I DO VERY MUCH APPRECIATE THE IMPROVEMENT TO MY CODE.<br>Thanks PGF. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
