<!DOCTYPE html><html lang="en" ><head ><title >Help to rewrite code for BlitzPlus</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Help to rewrite code for BlitzPlus</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Help to rewrite code for BlitzPlus</a><br><br>
<a name="452374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kaminari</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could someone help rewrite the code below to work in BlitzPlus.  I am struggling with getting examples to work in BlitzPlus and haven't been able to figure it out from the documentation.  I believe if I could see how to write the code below to work in B+, it would answer a lot of questions.<br>Thanks in advance.<br><br><br>; demo06-07.bb - A ReadPixelFast/WritePixeFast Example <br><br>Graphics 800,600 <br><br>Print "Press any key to use ReadPixel" <br>;wait for user to do something<br>WaitKey <br><br>;load rectangle image<br>image =LoadImage("rectangle.bmp") <br><br>;Draw the intro screen<br>DrawImage image,0,0 <br>DrawImage image,100,100<br>;Hold up  a second<br>Delay (1000)<br><br>;Create a pixel array that will hold the entire screen<br>Dim pixelarray(GraphicsWidth(),GraphicsHeight()) <br><br>;lock the buffer REQUIRED<br>LockBuffer <br><br>;Copy all of the pixels of the screen to the array<br>For rows=0 To GraphicsWidth() <br><br>	For cols=0 To GraphicsHeight() <br>	<br>		;Copy the current pixel<br>		pixelarray(rows,cols)=ReadPixelFast(rows,cols) <br>	Next <br>Next <br><br>;Unlock the buffer<br>UnlockBuffer <br><br>Cls <br>;Locate 0,0 <br>Print "Press another key to copy pixels backwards"<br>;Wait for key press<br>WaitKey<br><br>;Lock the buffer to allow WritePixelFast<br>LockBuffer <br><br>; Use WritePixel to redraw the screen using the color information we got earlier <br>For rows=0 To GraphicsWidth() <br>	For cols=0 To GraphicsHeight() <br>		;Draw the current pixels<br>		WritePixelFast rows,cols,pixelarray(GraphicsWidth()-rows,cols) <br>	Next <br>Next <br><br>; Unlock buffer after using WritePixelFast <br>UnlockBuffer <br><br>Print "Press a key to exit"<br>WaitKey <br><br></td></tr></table><br>
<a name="452392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kevin_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok heres a few things I noticed....<br><br>1. You haven't set up a drawing buffer. Try 'Setbuffer BackBuffer()' after your graphics statement.<br><br>2. You are trying to lock a buffer but no buffer is defined - see above.<br><br>3. You are using a 'print' statement after setting graphics up. Try using the 'Text' command instead.<br><br>4. I couldn't see a 'flip' anywhere. Try putting this command before your 'CLS' command.<br><br><br>Hope that helps. <br><br></td></tr></table><br>
<a name="452419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kaminari</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. I will try all those steps. <br><br></td></tr></table><br>
<a name="452423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kaminari</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Following those instructions worked.  I actually had to add a flip after each write or text command.<br><br>The code is below that finally worked.  If anyone is using BlitzPlus with "Game Programming for Teens" this hsould help with the examples at the end of chapter 6.<br><br>; demo06-07.bb - A ReadPixelFast/WritePixeFast Example <br><br>Graphics 800,600,32,2 <br>SetBuffer BackBuffer()<br><br>Text 0,0,"Press any key to use ReadPixel" <br>Flip<br>;wait for user to do something<br>WaitKey <br><br>;load rectangle image<br>image =LoadImage("rectangle.bmp") <br><br>;Draw the intro screen<br>DrawImage image,0,0 <br>DrawImage image,100,100<br>Flip<br><br>;Hold up  a second<br>Delay (1000)<br><br>;Create a pixel array that will hold the entire screen<br>Dim pixelarray(GraphicsWidth(),GraphicsHeight()) <br><br>;lock the buffer REQUIRED<br>LockBuffer <br><br>;Copy all of the pixels of the screen to the array<br>For rows=0 To GraphicsWidth() <br><br>	For cols=0 To GraphicsHeight() <br>	<br>		;Copy the current pixel<br>		pixelarray(rows,cols)=ReadPixelFast(rows,cols) <br>	Next <br>Next <br><br>;Unlock the buffer<br>UnlockBuffer <br><br>Cls <br><br>;Locate 0,0 <br>Text 0,0,"Press another key to copy pixels backwards"<br>;Wait for key press<br>WaitKey<br><br>;Lock the buffer to allow WritePixelFast<br>LockBuffer <br><br>; Use WritePixel to redraw the screen using the color information we got earlier <br>For rows=0 To GraphicsWidth() <br>	For cols=0 To GraphicsHeight() <br>		;Draw the current pixels<br>		WritePixelFast rows,cols,pixelarray(GraphicsWidth()-rows,cols) <br>	Next <br>Next <br>Flip<br><br>; Unlock buffer after using WritePixelFast <br>UnlockBuffer <br><br>Text 0,0,"Press a key to exit"<br>Flip<br>WaitKey <br><br></td></tr></table><br>
<a name="452585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Following those instructions worked. I actually had to add a flip after each write or text command. <br></div><br><br>Kaminari, I don't want to sound patronising but are you actually familiar with the concept of double buffering? If you are, you should realise why you neeed to put a Flip after Text and DrawImage in order to actually see what's been drawn. <br><br></td></tr></table><br>
<a name="452761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kaminari</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> big10p,<br>Thanks.  I am realizing slowly but surely many things about BlitzBasic.<br>I'm actually just learning BlitzBasic and game programming in general.  That is why I was asking questions in the "Beginners" area.  I am using the "Game Programming For Teens" book which actually used the code at the top which must work in whatever version was used when the book was written. (Blitz2D I suppose)  Many of the examples, however, though they may work, as written, in Blitz2D, have to be modified to run in BlitzPlus.  That is what I was asking for help on.  I would love to read a book written specifically for BlitzPlus, but haven't come across one, yet.  I liked the format of the GPFT book because I am using it to teach my 8 year old and twin 4 year olds to program in a fun way.  I am also showing them how forums work and how they will be able to ask other programmers out there for help when example code they read in a book does not function as expected. <br><br></td></tr></table><br>
<a name="452797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> We welcome your questions and will happily explain anything you're trying to wrap you head around. <br><br></td></tr></table><br>
<a name="452934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It sounds to me like the example code from the book doesn't work without alteration because Blitz2D defaults to using the FrontBuffer, whereas BlitzPlus defaults to using the BackBuffer. I can't be certain as I don't own BlitzPlus.<br><br>Try running the original example code in BlitzPlus, but add the line 'SetBuffer FrontBuffer()' directly after the Graphics command. Does it work then? <br><br></td></tr></table><br>
<a name="452935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> In BlitzPlus, FrontBuffer() and BackBuffer() are the exact same thing--the Back Buffer.  In other words, FrontBuffer() is just there for backwards compatibility, and you still need to add a flip, because it's the back buffer either way.  One cannot draw directly to the front buffer anymore. <br><br></td></tr></table><br>
<a name="452939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, then that explains why the original code doesn't work in BlitzPlus. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
