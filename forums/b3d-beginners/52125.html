<!DOCTYPE html><html lang="en" ><head ><title >Type/function question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Type/function question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Type/function question</a><br><br>
<a name="581967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lowpoly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, hate to make my first post such a newb question, but this is the first roadblock I've been unable to work through. Basically, I want to pass a value to a function and use that value to work with an entity. Example code is something like this:<br><br>global box = createcube()<br><br>type foo<br>field xyz<br>end type<br><br>;main loop<br><br>a.foo = new foo<br>a\xyz = copyentity(box)<br><br>;*awesome unrelated code*<br><br>myFunction("xyz")<br><br>;end main loop<br><br>function myFunction(name$)<br>for a.foo = each foo<br>scaleentity "a\" +name$,100,100,100<br>end function<br><br>It seems simple enough, all I want to do is pass 'xyz' from the main loop to myFunction then take that value and tack on the phrase "a\" to the front so I can call and scale a\xyz from within the function. <br><br>Right now, all I get is 'entity not found' but if I replace the "a\"+name$ with a\xyz it works fine. When I send "a\" +name$ back to the main loop and call it, it also returns a\xyz...<br><br>So is it an issue with Type or because I'm working in a function, or what?<br><br>Racking my brain a bit so I'd really appreciate the help, thanks :) <br><br></td></tr></table><br>
<a name="581970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is that "a"+name$ is a string, not an entity handle. Just pass the type (containing the entity handle) to the function instead:<br><br><pre class=code>
function myFunction(a.foo)
  scaleentity a\xyz,100,100,100
end function
</pre> <br><br></td></tr></table><br>
<a name="581977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> or alternatively just pass the entity itself:<br><pre class=code>xyz = copyentity(box)

;*awesome unrelated code*

myFunction(xyz)

;end main loop

function myFunction(entity)
scaleentity entity,100,100,100
end function</pre> <br><br></td></tr></table><br>
<a name="582027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lowpoly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the quick replies...<br><br>I have to wait until I get home to try this out, but from first glance I'm still a bit skeptical.<br><br>the two biggest factors are:<br><br>1. It has to remain as a type since there's actually a 'for' loop that dupes up to 8 copies per field.<br><br>2. I believe there is close to 12 fields I would need to run through this function.<br><br>because of those 2 points, it would be brilliantly easy if I could just specify the entity with the function and then call it 12 times from my main loop (to cover each field).<br><br>Sorry I wasn't clear before, I was hoping it was something simple like passing a string and not a handle. I would love to just send the entity like you suggested Beaker, but I think when I was struggling with this last night, it wasn't working as well: myFunction(a/xyz) <br><br></td></tr></table><br>
<a name="582040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The example I gave <i>does</i> pass the type to the function. Inside the function, you can then access all the type fields. I don't think I understand exactly what it is you're trying to do. Can you explain a bit more? <br><br></td></tr></table><br>
<a name="582085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lowpoly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> to answer your question with another question, wouldn't passing the type as a whole force all the fields to inherit the same results? Unfortunately, I need each field's pass through the function to be able to work with unique parameters. I think I would lose that by passing the type rather than on a field by field basis.<br><br>so for instance, let's say I have my type with 10 fields.<br><br>each field goes through the function and brings with it a secondary, unique variable that will affect how the function works:<br><br>myFunction(a\xyz, 38)  &lt;-- where 38 is that unique variable I mentioned above.<br><br>so, if I sent the entire type through, then all 10 fields would be working with 38, which is what I don't want to happen. I need the function to be flexible.<br><br>Sorry if I am overcomplicating my explanation here :) <br><br></td></tr></table><br>
<a name="582092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really not making much sense. <br>You either want to...<br>a) Apply '38' to a field of a type. Send the type and then access the field and 'action' 38 against it.<br>b) Apply '38' to *any* field of *any* type. Assign the value of the field to a varibale, send the variable, action 38 against it and return the result into the type field.<br>c) Apply '38' to a particular entity. Use object/handle.<br>d) something else... <br><br></td></tr></table><br>
<a name="582093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> to answer your question with another question, wouldn't passing the type as a whole force all the fields to inherit the same results? <br></div>You don't have to work on all the fields of the type from within the function - just the ones you want to affect. Hmmm, it's late and I still can't get a grasp of exactly what you want to do. :)<br><br>Are you saying all 10 fields are the same kind? e.g. all entity handles.<br><br>Maybe if you describe the actual task you want your program to achieve, we can then suggests methods. In your example, using "Type foo", "Field xyz", "Function MyFunction()" etc. doesn't help us understand what you're actually trying to do. ;) <br><br></td></tr></table><br>
<a name="582101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lowpoly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> heh sorry, the combination of me not being in front of my code and it being late for you guys isn't the optimal solution :D<br><br>the actual task is somewhat irrelevant; the function that I wrote works fine, but it *only* works with one specific field/entity handle. My goal was to be able to dynamically pass entity handles to the function so that I would have one master function, I could feed values to it and have it do it's magic. My original problem was just getting it understand "a/" +name$ is an entity handle and not just a string. But yes, all 10 fields are entity handles.<br><br>I guess my '38' example just made things worse... :)<br>what I was trying to say was if I have:<br><br>type foo<br>field a<br>field b<br>field c<br>...<br>field z<br><br>and I take each of those fields and pass their handle along through a function:<br><br>myFunction(a)<br><br>but I also want to pass a second value along with it:<br><br>myFunction(a,38)<br><br>then that's all well and good. The problem is, the number '38' is relevant only to 'a', whereas 'b' might be '6' and 'c' might be '200,000'<br><br>so my ultimate goal was to be able to do this:<br><br>myFunction(a,38)<br>myFunction(b,6)<br>myFuntion(c,200000)<br>...<br>myFunction(z,12)<br><br>so really what happens inside the function isn't as important to me right now as getting it to understand 'A' as the handle for the entity. My problem is less the application of the values and more just being able to call them by splicing together strings and variable names.<br><br>argh! sorry and thanks again for the help. This is what happens when you let artists program... :P <br><br></td></tr></table><br>
<a name="582135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
type monster
   field entity
   field health
end type

global thismonster.monster

thismonster = new monster
   thismonster\entity = createsphere()
   thismonster\health = 10

thismonster = new monster
   thismonster\entity = createcube()
   thismonster\health = 10

thismonster = new monster
   thismonster\entity = createcylinder()
   thismonster\health = 10

For thismonster = each monster
   SubtractHealth(ThisMonster)
next

Function SubtractHealth(ThatMonster.Monster)
   
   ; Make monster red, and reduce health by 1.
      EntityColor ThatMonster\Entity, 255, 0, 0
      ThatMonster\Health = ThatMonster\Health - 1

End Function
</pre><br><br>That's all there is to it.  I create a bunch of monsters, I assign an entity to each, then I loop through all monsters I created and reduce their health by 1 and make them red.<br><br>That is how you access the fields of a type in a function.  You pass a pointer to the type to the function.  In doing that, you're not creating a new type instance, you are editing the data of the one you passed.  Each variable that accesses a type is a pointer to a type, not the type itself.  You can have 10 pointers pointing to the same memory allocated for a type.  Only New allocates new memory for a new type.<br><br>PS:<br>Please excuse my code to create the entities, it's not right.  I didn't bother to look up the function parameters for the functions to create primitives.<br><br>Also, you could have used ThisMonster.Monster as the function parameter, which I would normally do.  Then when you use ThisMonster in the function you'd be using the pointer passed to the function not the global variable I declated.  So they would not conflict with one another unless you tried to access the global in the functionm, which you probably have no reason to do.  In fact, I didn't even need to make ThisMonster a global here. <br><br></td></tr></table><br>
<a name="582144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Finjogi</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> lowpoly, there is no point to make function to assign one value to type field... just assign it "inline"<br><br>myfoo\a = 100<br>vs.<br>ChangeValueFunction(myfoo\a, 100)<br>or are you aftet this?<br>ChangeValueFunction(myfoo, "a", 100)<br>I think it is impossible to search match for "a" &lt;-&gt; myfoo\a ?<br><br>If you mean someting else I dont get it as you use 'a' for a fieldname and later on write 'a' as a handle for a entity. <br>So which way do you want it to do, pass a type, or a type field?<br><br>English is not my native lang, so sorry if I got it totally wrong :) <br><br></td></tr></table><br>
<a name="582171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lowpoly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey all, thanks for your input on this problem, I really appreciate the help.<br><br>I think the most important lesson I learned is to not ask for help when my code is not in front of me:) Naturally, when I got home, opened blitz and looked at what I had, I quickly realized what my mistake was :/<br><br>If you're interested, here's how I solved my problem: <br><br>Going back to my first post's code,  it came down to taking the For/Each/Next loop out of the function and sandwiching it around myFunction(xyz) in the main loop. This way the entity handle for XYZ got passed and parsed individually through the function. This ended up being the best way for isolating what I wanted to perform and now it works perfectly.<br><br>Lesson learned, I should have just posted my actual code  and avoid confusing everyone :) sorry, but thanks for the effort! <br><br></td></tr></table><br>
<a name="582413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The best solutions are those where you figured out the problem and the solution by yourself.  A solution just handed over to you by someone else may or may not teach you.  Resolving it yourself allows you to know how to fix it the next time that kind of problem comes up.<br><br>So, kudos to you for figuring it out yourself!<br><br>(P.S.  Of course, when you're stuck, a helpful hand is sometimes all you need to see the light, like the saying, You can't see the forest for the trees, meaning, you're too close to the problem to see the solution.) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
