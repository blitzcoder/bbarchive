<!DOCTYPE html><html lang="en" ><head ><title >Alpha Channel for Sketchup models</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Alpha Channel for Sketchup models</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Alpha Channel for Sketchup models</a><br><br>
<a name="728397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simcenter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I recently used Sketchup to create a tree-scape (just a whole bunch of trees).  In sketchup I used Bitmap textures with alpha channels for the trees.   So each tree is basically a plane with an alpha bitmap applied to it, so that in Sketchup you only see the tree.<br><br>So, I export that tree layer out as one .3ds file.  I import it into Blitz3D, but the alpha channel doesn't automatically work.  I've been searching all over for some alpha help but have given up searching the codes and archives.<br><br>I guess the problem is that within this one 3ds file, there are three different bitmap textures...so I don't think I can just apply a texture to the mesh created from the 3ds...<br><br>Am I the only one baffled by this conundrum? <br><br></td></tr></table><br>
<a name="728426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use TextureFilter. It searches for a certain word in the filename of any texture that is loaded and then applies the specified filters to that texture.<br>Ie: Texturefilter "_masked", 4<br>will search for the term "_masked" in texture filenames and then apply flag 4 (=masked) <br><br></td></tr></table><br>
<a name="728631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simcenter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks b32, but so far the "texturefilter" command isn't helping at all.  I think I'm using it properly, according to the help content, but I still keep seeing the black of the alpha channel.<br><br>I've used the mask function before when loading an image from a jpg, when I didn't want to see the black pixels, but for some reason it's not working when the texture is embedded with the 3ds file... <br><br></td></tr></table><br>
<a name="728649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've had difficulties too with using alpha. Have you tried setting EntityFX 32 ? And have you tested the textures on standard shapes (createcube) ? That way you can test if the standard way of appying the texture works:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; CreateCube Example (from docs)
; ------------------

Graphics3D 640,480,0,2
SetBuffer BackBuffer()

camera=CreateCamera()
CameraClsColor camera, 0, 255, 0

light=CreateLight()
RotateEntity light,90,0,0

; Create cube
cube=CreateCube()
tex=LoadTexture("c:\_xfiles\alpha2.png", 2)
EntityTexture cube, tex

PositionEntity cube,0,0,5

While Not KeyDown( 1 )
RenderWorld
Flip
Wend

End
</textarea><br>In this, I've used a .png file, because it can hold alpha data. If you can apply the texture onto the mesh with maintaining the alpha, you can use:<br>GetSurface(), GetSurfaceBrush(), GetBrushTexture() and finally GetTextureName$() to find out what texture is applied to what surface. Then you can reload the same texture and re-apply it to the mesh.<br>If you can't solve this, try posting one of the models with textures. <br><br></td></tr></table><br>
<a name="728655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> simcenter,<br><br>I don't get how you can apply alpha channels to a Bmp.  Bmp's don't hold alpha information so it'll be lost as soon as it's loaded with the model.  Entityfx 32 will have no bearing on the texture as it relates to vertex alpha only.<br><br>The simplest way is to save the texture as a .png which does support alpha.  I've never used SketchUp so no idea if this is even possible.  <br><br>If that still doesn't work then one hack would be to getbrushtexture as above and loop through all the pixels in the texture setting the alpha as you go ... e.g. if color doesn't equal 0 then alpha = 1.0 else alpha = 0.0. <br><br>Stevie <br><br></td></tr></table><br>
<a name="728894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, so that is what EntityFX 32 is for .. it is just one of those things I try when stuff doesn't work. :) <br><br></td></tr></table><br>
<a name="731451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simcenter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, so now it seems as if I figured out how to use TextureFilter, at least a little.  However there are some more problems that maybe someone knows about:<br><br>When I use the code:<br><br><pre class=code>trees=LoadMesh("models\trees\trees.3ds")
PositionEntity trees,0,0,0
TextureFilter "", 6</pre><br><br>I see this image:<br><img src="http://www.brianheagney.com/blitz/images/web-tree_alpha-notworking.jpg"><br><br>At first, I thought that the Texturefilter didn't work...however, I then used the following code:<br><br><pre class=code>trees=LoadMesh("models\trees\trees.3ds")
PositionEntity trees,0,0,0
TextureFilter "", 6

trees2=LoadMesh("models\trees\trees.3ds")
PositionEntity trees2,0,0,0
TextureFilter "", 6
FlipMesh trees2</pre><br><br>..and then, I saw this:<br><br><img src="http://www.brianheagney.com/blitz/images/web-tree_alpha-working.jpg"><br><br>Which made be believe that the code was working...however, walking around the landscape a little more, I saw that the trees were actually coming in as the following:<br><br><img src="http://www.brianheagney.com/blitz/images/web-tree_alpha-half.jpg"><br><br>So, it seems as if the Texture filter only works for the flipped version of the "trees.3ds" file...Although I also found that if I load only one entity from the 3ds and flip it, the alpha doesn't work.  I can only "see through" the flipped version if there is a non flipped version as well...<br><br>The images are the same if I use Texture Filter (2), (4) or (6)...<br><br>(I also tried the GetBrushTexture() to no avail, although I could have been doing it wrong.  I think I'm getting closer with the TextureFilter.) <br><br></td></tr></table><br>
<a name="731458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simcenter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Side note: I now realize that this is not an alpha issue, its a masking issue.<br><br>I don't know that much about image formats, but it seems as if bmp can now store alpha channels.  the newer Photoshops seem to be able to open them up.<br><br>Sketchup can load many types of image files as textures, but when exporting to 3ds, it will only export jpg and bmp, thus all png or rgba will be turned into bmp or jpg automatically.  This is why I'm trying to deal with a masking as opposed to jpb, and also why I'm trying to figure out if the alpha channel from a bmp is doable in Blitz.<br><br>But for now, the TextureFilter is still giving me problems as displayed above. <br><br></td></tr></table><br>
<a name="731460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simcenter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This whole topic should probably be erased, since I just found the answer <a href="/posts.php?topic=57812#643028" target="_blank">here</a><br><br>Evidently I wasn't understanding where to put the TextureFilter portion of the code.  Instead of putting it right before loading the 3ds file, I was putting it directly after...<br><br>I realize I'm still making these horrible simple mistakes, thanks for all who helped me. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
