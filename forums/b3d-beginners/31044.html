<!DOCTYPE html><html lang="en" ><head ><title >sprite trajectory (10deg, 20deg,30deg)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >sprite trajectory (10deg, 20deg,30deg)</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >sprite trajectory (10deg, 20deg,30deg)</a><br><br>
<a name="331084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any code kicking around showing how to draw a sprite along a given angle ?<br><br>eg. say I want a sprite to move along a path, 1 pixel at a time, and that path is at 10 degrees - I could use an array full of precalculated values and add these to the x &amp; y or...<br><br>...I'm hoping I could use some kind of equation to work it out "on the fly"<br><br>Any ideas ? <br><br></td></tr></table><br>
<a name="331092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brendane</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> you don't need any kind of array, use Sin() and Cos() to precalculate the step values for the changes in x,y (in 2d)<br><br>example in the x,y plane for an angle of 10 degrees :-<br><br>dx# = sin(10)<br>dy# = cos(10)<br><br>now you just modify the sprite's x,y by adding on dx,dy each frame. <br><br></td></tr></table><br>
<a name="331106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brendane,<br><br>but isn't using sin and cos quite costly in terms of cpu performance ?<br><br>I thought there may be a less intensive approach instead <br><br></td></tr></table><br>
<a name="331112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brendane</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dax,<br><br>In your instance it's a single pre-calculation - you call sin/cos to get the delta values for your angle just once - no need to calculate the deltas again unless the angle changes.<br><br>There is no real problem using sin/cos in these days of modern processors - go for it. <br><br></td></tr></table><br>
<a name="331271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> by the way, isn't your working the wrong way around ?<br><br>dx# = cos (10)<br>dy# = sin (10) <br><br></td></tr></table><br>
<a name="331360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brendane</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah :) could be. <br><br></td></tr></table><br>
<a name="331443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brendane, <br><br>so just to confirm, you think its a good idea to perform COS &amp; SIN every frame ? (I have 4 sprites, and that means 4xCOS and 4xSIN calcs every frame which would be costly on cpu wouldn't it ?)<br><br>Or are you saying pre-calc the values and put them in an array ? That way the only hit on the cpu is retrieving the values from the array <br><br></td></tr></table><br>
<a name="331449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stevious</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ultimately a precalculated array would be the faster alternative, but with modern CPUs you'd need to be hitting COS and SIN pretty hard before you'd notice the speed difference. Still, every little bit of speed counts :-) <br><br></td></tr></table><br>
<a name="331465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 8 calls to sin and cos is blisteringly fast. There's very little point in precalculating them unless you're at least doing a few hundred per frame. I've done thousands of calls per frame and although it was faster to use lookup tables, it still wasn't slow with sin and cos, even on a moderate ( around 1Ghz ) CPU. <br><br></td></tr></table><br>
<a name="331487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brendane</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The main point to be made here is that planning for optimisation is good - but don't worry too much about speed issues until you have a working piece of software. Then you can apply some profiling technique and figure out what parts of code you should try and optimise. I've worked on commercial 3d engines for big games companies and it's pretty much always the last thing I'd do. For a new programmer (if indeed you are) the main skill for you to develop is to structure and modularise your code well. <br><br></td></tr></table><br>
<a name="331657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hansie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dax Trajero<br><br>Brendane has a good point above <br><br></td></tr></table><br>
<a name="332265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> People keep mentioning 1GHz processors - I'm doing a retro remake and I wanted it to be available on Pentium II class processors at least.<br><br>Thats why I'm looking at cpu optimisation techniques for SIN &amp; COS. I do take Brendane's advice on board and will perhaps leave optimisation til the end.<br><br>Things are going quite nicely by the way - writing my first game is proving to be a very rewarding experience. I've just  written my first timer code yesterday and am starting on types today (tonight)<br><br>-Dax <br><br></td></tr></table><br>
<a name="332274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dax, PIIs have substantial maths on board so sin and cos are not a big worry.<br><br>Optimisations come looking at your code once you've finshed, where you can shave cycles off loops, or indeed remove loops altogther.<br><br>For example. You might not need to run AI code for every enemy every loop. You might be able to get away with running 1 ai code per game loop and running through your enemies therefore removing an entire loop from you main loop. <br><br></td></tr></table><br>
<a name="332278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use a simple method of spreading function calls out in the main loop e.g.<br><br><pre class=code>
gFrame=0

;main loop
While Not KeyHit(1)

gFrame=(gFrame+1) Mod 100

If gFrame Mod 2=0 Then Update_AI() ;call every 2 frames
If gFrame Mod 4=0 Then Update_Physics() ;call every 4 frames
If gFrame Mod 10=0 Then Update_Rooms() ;call every 10 frames

Wend

</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
