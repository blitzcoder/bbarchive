<!DOCTYPE html><html lang="en" ><head ><title >Screensavers &amp; FPS(Frames Per Second)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Screensavers &amp; FPS(Frames Per Second)</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Screensavers &amp; FPS(Frames Per Second)</a><br><br>
<a name="1094588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aussie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey everyone, it’s been quite a while since I have been able to do anything in B3d &amp; now have a bit of spare time on my hands.<br><br>I have found heaps of info regarding screensavers &amp; thought I would do one myself. I just have a couple of questions regarding FPS(Frames Per Second) limiting.<br><br>Here is a piece of code I usually use.<br><br>Function LimitFrameRate(FPS = 65)<br>	If FrameTime = 0 Then<br>		Period = 1000 / FPS<br>		FrameTime = MilliSecs()<br>	EndIf<br><br>	While (FrameTime + Period) &gt; MilliSecs()<br>			Delay 1<br>	Wend<br>	FrameTime = MilliSecs()<br>End Function<br><br>My questions are.<br>1. I have read on other posts of programs crashing when MilliSecs() reaches a certain point, if so what would be an alternative so the program doesn’t crash?<br><br>2. This may be a stupid question, but If I limit FPS in the screensaver will it affect anything else running in the background, eg rendering, downloading or the general performance of a PC?<br><br>Cheers. <br><br></td></tr></table><br>
<a name="1094621"></a>

<a name="1094627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I have read on other posts of programs crashing when MilliSecs() reaches a certain point, if so what would be an alternative so the program doesn’t crash? <br></div><br><br>This is because MilliSecs() returns an int, and ints are signed 32-bit numbers which means they can only represent 4.2 billion unique numbers, half of which are negative. If your computer has been running for longer than ~2.1 billion milliseconds, it will "roll over" into a negative number (which is what happens if you add one to the maximum), which in turn will continue to grow and eventually reach zero again... etc.<br><br>2.1 billion milliseconds is a constant amount of time, obviously, so this issue only affects computers that have been left running for <i>over</i> three weeks. Most Blitzers tend to ignore it, at least for client code, as this is quite rare for a home desktop user (however, it is important on a server).<br><br>Even then, it doesn't cause a problem internally - the designers of the functions are aware of the limitation, so calling MilliSecs() is safe - but it does cause a problem if you only do simple checks to see whether the current MilliSecs() is greater than the last MilliSecs(), which will return false if it rolled over <i>in between</i>. So there may be an error in your own program logic. It is possible to solve this issue and it has been discussed at length in various other threads (do a search on "millisecs" and "rollover" to get a few relevant results) The simplest effective answer is here: <a href="http://www.blitzbasic.com/Community/posts.php?topic=49285#548324." target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=49285#548324.</a><br><br>The answer given by Floyd in the linked post will work for small intervals such as a few seconds (...or hours); you can test if the interval was longer than a given value by testing if time1 - time2 &gt; INTERVAL, so 1000 for checking FPS. This will ignore rollover as long as the interval itself is less than the maximum int value (i.e. not just the computer, but your actual game would have to be running for 25 days to break this simple change - for most people this is a non-issue).<br><br><div class="quote"> If I limit FPS in the screensaver will it affect anything else running in the background, eg rendering, downloading or the general performance of a PC? <br></div><br><br>Yes, it will <i>improve</i> the performance of things running in the background by freeing more resources for your computer to assign to other tasks! Simple as that. You can't affect the general speed of your machine from within Blitz3D, only waste more CPU time than you need.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1094622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could change to:<pre class=code>
While Abs(MilliSecs() - FrameTime) &lt; Period</pre> <br><br></td></tr></table><br>
<a name="1094716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aussie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys. <br>Am i correct in saying that buy changing<br><br>While (FrameTime + Period) &gt; MilliSecs()<br>to<br>While Abs(MilliSecs() - FrameTime) &lt; Period<br><br>that the Abs function will turn a negative value into a positive so after the 25 days of running the program wouldn't crash?<br><br>My screensaver is finished, just need to make sure it won't crash.<br><br>Cheers. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
