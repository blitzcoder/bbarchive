<!DOCTYPE html><html lang="en" ><head ><title >Sound commands</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sound commands</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Sound commands</a><br><br>
<a name="474822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drekinn</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings all,<br><br>I've been having troubles understanding the Blitz3D sound command set. Any assistance would be appreciated.<br><br>1) If two or more sounds are played in the same channel, subsequent channel commands only affect the last sound that was played in that channel, resulting in the earlier sounds continuing to play without being able to stop them! (ie. if looped) Why don't the channel commands affect all sounds currently playing in the specified channel?? What then is the point of having separate Sound and Channel commands for seemingly the same purpose? (Eg. <b>SoundVolume</b> vs <b>ChannelVolume</b>, <b>SoundPitch</b> vs <b>ChannelPitch</b>, <b>SoundPan</b> vs <b>ChannelPan</b> etc.)<br><br>With other programs, playing a second sound in a channel that is already playing a sound would cut short the first sound and take new precedence of that channel. Is this not so in Blitz? Do I need to create a new channel for each sound I want to manipulate?<br><br>2) Is there a command to find out the normal pitch a of sound?<br><br>3) Is it possible to set the overall volume level of the whole program?<br><br>4) How do I unloop a sound previously looped with the <b>LoopSound</b> command?<br><br><br>If someone could please explain the intricacies of Blitz sound (especially with a demo) I would be grateful.<br><br>Thanks. <br><br></td></tr></table><br>
<a name="474827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. All sounds played are assigned their own channels.  The Channel commands only affect the channel specified.  IIRC, the Sound commands affect all sounds (don't quote me on this though...).<br><br>2. Not to my knowledge.  But if you know what it is beforehand, you can certainly alter it.<br><br>3. SoundVolume<br><br>4. AFAIK, you can't.  I think the intent was to set up a sound as looping or non-looping indefinitely.  If you are attempting to only loop a sound a finite amount of times, then do something like this:<br><pre class=code>sound = LoadSound("asound.wav")
channel = PlaySound sound
Repeat
  If Not ChannelPlaying(channel)
    channel = PlaySound sound
    loops = loops + 1
  EndIf
Until loops = 5
</pre> <br><br></td></tr></table><br>
<a name="474845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drekinn</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wolron,<br><br>1,2) Not true. <b>SoundVolume</b> only affects the specified sound (as do the other <b>Sound~</b> commands). So I'm still none-the-wiser as to the purpose of the separate <b>Sound~</b> and <b>Channel~</b> commands. Anyone? <br><br></td></tr></table><br>
<a name="474849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think, athough I could be wrong: <br><br>Sound volume sets the volume for that sound so if you've got a loud sound that you want to balance with your other sounds you can set it's volume to .5 say. Then it's channel volume will be from 0 - 1 which in reality go from 0 - .5. Also you can use a sound twice, so if you have say a bang noise you might want to use the sound "Bang" at a high volume and a low volume therefore these would be channel volumes and not sound volumes. <br><br></td></tr></table><br>
<a name="474851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to set SoundVolume for EACH sound. You can use a variable and set the soun volume for each sound to the variable, however, of course different sounds are 'recorded' at different levels too.<br><br>The separate channels are required for giving more control. So that you cna affect the volume While a channel is playing, STOP a loop-ed sound (LoopSound) etc.<br><br>hope this helps <br><br></td></tr></table><br>
<a name="474969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Not true. SoundVolume only affects the specified sound (as do the other Sound~ commands).  <br></div>Oh, well then perhaps you could explain this straight from the docs:<br><br><div class="quote"> <b>ChannelVolume channel_handle, volume#</b><br>Parameters<br>channel_handle = variable assigned to the channel when played <br>volume# = volume level floating value between 0 and 1  <br><br>Description<br><b>While SoundVolume happily changes the volume of the entire program</b>, this command will let you adjust volume rates on a 'per channel' basis. Extremely useful. <br><br>The volume value is a floating point value between 0 and 1 (0 = silence, .5 = half volume, 1= full volume). You can do other cool stuff like ChannelPitch and ChannelPan too!  <br> <br></div> <br><br></td></tr></table><br>
<a name="475577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drekinn</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rob,<br>Thanks for the helpful feedback. Nicely explained.<br><br>Malice,<br>Ah thank you for clearing that up. ie. the Channel commands can be applied -while- the sound is playing. Understood!<br><br>WolRon,<br>I wish I could explain. Look at the info for the <b>SoundVolume</b> command:<br><br><div class="quote"> <b>SoundVolume sound_variable,volume#</b><br>Parameters<br>sound_variable = any valid sound variable previously created with the LoadSound command. <br>volume# = floating point number from 0 (silence) to 1 (full volume)  <br><br>Description<br><b>Alter the playback volume of your sound effect with this command.</b> This command uses a floating point number from 0 to 1 to control the volume level. <br></div><br><br>As you can see there's no mention of this command controlling the volume of the entire program, which it doesn't anyway. This is confirmed by the reference to a specific sound within the command's syntax.<br><br>Unfortunately the documentation for this and many other commands seem to have been typed up in a couple of seconds, without proof reading. Either that or cut and pasted from other commands with minor alterations.<br><br>I surely hope the docs for BlitzMax have been given the attention they deserve. <br><br></td></tr></table><br>
<a name="476712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drekinn</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> 5) By the way, is there an easy way to set the volume level of the entire program, or do I have to set the volume of each loaded sound individually with <b>SoundVolume</b>?<br><br>6) The sounds in my program seem to be playing at differing volumes each time they play! I have used the <b>SoundVolume</b> command to set the volume levels for each sound, but this is before the main program loop, with no other changes to volume levels during the program. Why are these volume jumps occuring?? Please help! :( <br><br></td></tr></table><br>
<a name="476780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 5. Wish I knew...<br><br>6. Can't really say.  You may have to post some code in order for us to figure it out. <br><br></td></tr></table><br>
<a name="476931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm dunno about 5<br><br>as for 6 - Are you referring to the sounds directly or are you using channels.<br><br>Bear in mind if you change a Channel's volume, the next sound placed in that channel will maintain that same volume, I believe. Plus after 'so many' channels, they will be re-used, so a particular sound may overwrite into a channel already used.<br><br>Not 100%, more of a guess as to what's happening.... <br><br></td></tr></table><br>
<a name="477658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drekinn</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> WolRon, Malice,<br><br>To narrow down the problem I reduced my code to its simplest state, ie. just loading the sound into a variable with <b>LoadSound</b> outside the main program loop (with no alterations to sound volume etc.) and then within the program loop played the sound using <b>PlaySound</b> (with reference to a channel) every time the mouse was clicked. The same sudden jumps in volume still occurred!<br>So no idea what's going on there. Anyone know?<br><br>I am happy to announce though that by executing <b>StopChannel</b> with reference to the channel in question just before playing the sound seems to fix the volume jump problem. Hooray!<br><br>I'd still like to know why these volume jumps occur though.<br><br>Malice,<br>Hmm.. if your 'channels are re-used and overwritten' theory holds true then that would most likely be the reason for my troubles as I am sometimes using hundreds of channels at any one time.<br><b>How many sound channels are available to Blitz?</b> <br><br></td></tr></table><br>
<a name="477665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would think the number of channels available would be limited by your sound-card or chip.<br><br>The same may in fact be the reason for the jumps etc.<br><br>What hardware are you running for sound and have you got the latest drivers?<br><br>---<br>Im not sure about this, but it's just a logical step to eradicate possibilities. <br><br></td></tr></table><br>
<a name="477746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I seem to remember Mark adding the ability to use up to 1024 channels simultaneously (fairly recently). AFAIK FMOD mixes the channels down internally.<br><br><br>For the global volume, you could use something like:<pre class=code>Global g_snd_volume# = 0.5
...
chn = MyPlaySound(bang, 0.5)
...
End

Function MyPlaySound(snd, vol#=1)
 Local chn
 
 If g_snd_volume = 0 Then Return
 
 chn = PlaySound(snd)
 ChannelVolume chn, vol# * g_snd_volume#

 Return chn
end Function

Function MyChannelVolume(chn, vol#)
  If chn then ChannelVolume chn, vol# * g_snd_volume#
End Function
</pre>Or did you mean more of a 'normalising' type of affair? <br><br></td></tr></table><br>
<a name="477748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Definately go the route of creating your own sound control library. For example in the Alien Breed code I've written a sound control library that sets the volume and pan based on where you are and where the sound is. Also this will take into account global volume settings etc. <br><br></td></tr></table><br>
<a name="478515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drekinn</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Malice,<br>I'm using a Sound Blaster Live! card. Guess I could check if there's a more recent driver out there.<br><br>Neville,<br>1024? Wow, that's reassuring to know. Thanks also for the global volume code.<br><br>Rob,<br>Sounds great (no pun intended). I've never delved into libraries before. How do I go about creating my own? Where can I find more info about libraries in general?<br><br>Thanks all, <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
