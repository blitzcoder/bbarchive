<!DOCTYPE html><html lang="en" ><head ><title >My shot-gun won't move with the camera pivot</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >My shot-gun won't move with the camera pivot</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >My shot-gun won't move with the camera pivot</a><br><br>
<a name="551860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zortzblatz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> UPDATE:<br>just so you all can see my code and make possible suggestions<br><br>;basically pointless<br>Graphics3D 800,600<br>SetBuffer BackBuffer()<br>;health<br>Global health = 100<br>Print "your health is " + health<br>;fired?<br>Global fired = False<br>Global speed = 4<br>;lighting<br>Global light = CreateLight()<br>RotateEntity light,90,0,0<br>LightColor light,0,0,0<br>;collision stuff<br>Global door = 3<br>Global player = 2<br>Global scene = 1<br>Global enemy = 4<br>;pivot stuff<br>Global pivot = CreatePivot()<br>EntityRadius pivot,1.5<br>;camera<br>Global camera = CreateCamera(pivot)<br>CameraRange camera,1,1000<br>CameraFogMode camera,1<br>CameraFogRange camera,60,200<br>EntityType pivot,player<br>;weapon<br>	;left barrel<br>Global barrel1= CreateCylinder(32)<br>RotateEntity barrel1,90,0,0<br>EntityColor barrel1,128,128,128<br>PositionEntity barrel1,1.5,-1,2.5<br>EntityParent barrel1,pivot<br>ScaleEntity barrel1,0.2,2,0.2<br>EntityType barrel1,scene<br>EntityOrder barrel1,-2<br>	;right barrel<br>Global barrel2 = CreateCylinder(32)<br>RotateEntity barrel2,90,0,0<br>EntityColor barrel2,128,128,128<br>PositionEntity barrel2,2,-1,2.5<br>EntityParent barrel2,pivot<br>ScaleEntity barrel2,0.2,2,0.2<br>EntityType barrel2,scene<br>EntityOrder barrel2,-1<br>;the sky<br>Global sky = CreateSphere(16,pivot)<br>FlipMesh sky<br>ScaleEntity sky,100,100,100<br>PositionEntity sky,0,50,0<br>EntityColor sky,0,0,255<br>;terrain<br>Global terrain = CreatePlane()<br>ScaleEntity terrain,3,15,3<br>PositionEntity terrain,0,0,-530<br>EntityRadius terrain,0.2<br>EntityColor terrain,0,255,0<br>EntityType terrain,scene<br>PositionEntity pivot,0,5,0<br>;trees?<br>stump = CreateCylinder() <br>ScaleEntity stump,1,7,1<br>PositionEntity stump,0,-1,30<br>EntityColor stump,128,64,0<br>EntityRadius stump,1<br>tree = CreateSphere(32)<br>EntityColor tree,0,100,0<br>ScaleEntity tree,3,4,3<br>PositionEntity tree,0,8,30<br>EntityType tree,scene<br>EntityRadius tree,3<br>stump2 = CreateCylinder() <br>ScaleEntity stump2,1,7,1<br>PositionEntity stump2,10,-1,30<br>EntityColor stump2,128,64,0<br>EntityRadius stump2,1<br>tree2 = CreateSphere(32)<br>EntityColor tree2,0,100,0<br>ScaleEntity tree2,3,4,3<br>PositionEntity tree2,10,8,30<br>EntityType tree2,scene<br>EntityRadius tree2,3<br>stump3 = CreateCylinder() <br>ScaleEntity stump3,1,7,1<br>PositionEntity stump3,-10,-1,30<br>EntityColor stump3,128,64,0<br>EntityRadius stump3,1<br>tree3 = CreateSphere(32)<br>EntityColor tree3,0,100,0<br>ScaleEntity tree3,3,4,3<br>PositionEntity tree3,-10,8,30<br>EntityType tree3,scene<br>EntityRadius tree3,3<br>;building?<br>bricks = CreateCube()<br>ScaleEntity bricks,19,9,9<br>PositionEntity bricks,0,9,50<br>EntityColor bricks,255,0,0<br>EntityType bricks,scene<br>	;eves<br>eve = CreateCylinder(3)<br>RotateEntity eve,30,0,90<br>ScaleEntity eve,13,20,13<br>PositionEntity eve,0,23,50<br>EntityColor eve,145,72,0 <br>	;door<br>door = CreateCube()<br>ScaleEntity door,3,5,3<br>PositionEntity door,-6.5,5,43,7<br>EntityColor door,170,85,0<br>	;knob of door<br>knob = CreateSphere()<br>ScaleEntity knob,0.8,0.8,0.8<br>PositionEntity knob,-5,5,40<br>EntityColor knob,255,255,0<br>;the great purple googler!<br>googler = CreateSphere(32)<br>ScaleEntity googler,4,4,4<br>PositionEntity googler,30,5,10<br>EntityColor googler,128,0,255<br>EntityType googler,enemy<br>EntityRadius googler,4<br>EntityAlpha googler,0.7<br>;ammunition<br>bullet = CreateSphere()<br>ScaleEntity bullet,0.2,0.2,0.2<br>PositionEntity bullet,7,5,2<br>;RotateEntity bullet,90,0,0<br>RotateEntity bullet,EntityPitch(pivot),EntityYaw(pivot),EntityRoll(pivot)<br>HideEntity bullet<br>EntityRadius bullet,1<br>;explode<br>boom = CreateSphere()<br>EntityColor boom,255,0,0<br>EntityAlpha boom,0.5<br>HideEntity boom<br>;collisions<br>Collisions player,scene,2,1<br>Collisions enemy,player,1,1<br>Collisions player,enemy,2,1<br>Collisions enemy,scene,2,1<br>;loopieness<br>While Not KeyHit(1)<br>If KeyDown(200) MoveEntity pivot,0,0,1<br>If KeyDown(208) MoveEntity pivot,0,0,-1<br>If KeyDown(203) TurnEntity pivot,0,2,0<br>If KeyDown(205) TurnEntity pivot,0,-2,0<br>;shooting now!<br>If KeyDown(57)<br>If Not fired<br>fired = True<br>PositionEntity bullet,EntityX(pivot) ,EntityY(pivot)-.5 ,EntityZ(pivot) <br>RotateEntity bullet,EntityPitch(pivot),EntityYaw(pivot),EntityRoll(pivot) <br>ShowEntity bullet<br>End If <br>End If <br>If fired<br>MoveEntity bullet,0,0,speed<br>         boomx# = EntityX(bullet,1)<br>         boomy# = EntityY(bullet,1)<br>         boomz# = EntityZ(bullet,1)<br>         <br>         HideEntity boom<br>         ShowEntity bullet<br>      PositionEntity boom,boomx,boomy,boomz<br>      End If <br>   <br>     <br><br>   If EntityDistance(bullet,pivot) &gt;100<br>      HideEntity bullet<br>      fired = False<br>   End If<br><br>	;googler movement<br>MoveEntity googler,0,0,0.4<br>TurnEntity googler,0,1.6,0<br>UpdateWorld<br>RenderWorld<br>Flip<br>Wend<br>End<br><br>Function lose()<br>Cls<br>Print "YOU LOSE"<br>End Function <br><br></td></tr></table><br>
<a name="551863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Amend<br>'Global barrel1= CreateCylinder(16,pivot)'<br>to<br>Global barrel1= CreateCylinder(16)<br><br>After positioning it use (after your 'PositionEntity' command) add:<br>EntityParent barrel1,pivot<br><br>p.s. you will have to reposition the barrel<br>PositionEntity barrel1,2.5,-1,2.5<br>will move it into view - then just adjust accordingly.<br><br>EDIT:<br><br>;left barrel<br>Global barrel1= CreateCylinder(16)<br>RotateEntity barrel1,90,0,0<br>EntityColor barrel1,128,128,128<br>PositionEntity barrel1,1.5,-1,2.5<br>EntityParent barrel1,pivot<br>ScaleEntity barrel1,0.2,2,0.2<br>EntityType barrel1,player<br>EntityOrder barrel1,-2<br>;right barrel<br>Global barrel2 = CreateCylinder(16)<br>RotateEntity barrel2,90,0,0<br>EntityColor barrel2,128,128,128<br>PositionEntity barrel2,2,-1,2.5<br>EntityParent barrel2,pivot<br>ScaleEntity barrel2,0.2,2,0.2<br>EntityType barrel2,player<br>EntityOrder barrel2,-1<br><br><br>EDIT:<br><br>ps, it is not important to put the 'EntityParent' command after you have positioned the barrel, etc - I just do it that way - you could do it after creating the barrel.  I just tend to position and then parent. <br><br></td></tr></table><br>
<a name="551872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rubiks14</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i found a flaw with the collisions because i was playing around with it because i thought it was cool and noticed when the "shotgun" hits the trees it is pushed back and can end up behind the camera. i don't know why it does that or how to fix it but i thought i would let you know <br><br></td></tr></table><br>
<a name="551876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zortzblatz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I fixed the collision problem by making the shotguns type scene instead of player, I also added toon shading, now I will add shooting and enemy <br><br></td></tr></table><br>
<a name="551962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another (better?) way to handle a first person weapon is to render it to a seperate (faraway) camera after you have drawn the rest of the scene.<br><br>Look-up <a href="/b3ddocs/command.php?name=CameraClsMode&amp;ref=3d_cat" target="_blank">CameraClsMode</a>.<br><br>This also helps you have better control/handling of the z-buffer. <br><br></td></tr></table><br>
<a name="551979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zortzblatz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've updated the origional source code because now I'm having another problem, if you crash into the googler he is solid but if he crashes into you he isn't I have no idea whats causing this shouldnt setting the collisions both ways fix it? <br><br></td></tr></table><br>
<a name="551995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Amend<br>Collisions enemy,player,2,1<br><br>to<br>Collisions enemy,player,1,1<br><br><br>EDIT:<br><br>Now you need to set up collisons for the 'googler' and the scenery - unless he is 'ghost-like' and meant to pass through the trees. <br><br></td></tr></table><br>
<a name="552036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zortzblatz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you again Puki.<br>I updated the code again, I'm open to suggestions, I need to add collision between the bullet and the various things in the level. also I need to add the collision between the player and the googler. I will most likely do that in a couple of hours. <br><br></td></tr></table><br>
<a name="552990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>i found a flaw with the collisions because i was playing around with it because i thought it was cool and noticed when the "shotgun" hits the trees it is pushed back and can end up behind the camera. i don't know why it does that or how to fix it but i thought i would let you know <br> <br></div><br><br>There is a recursive flag that will give child entities the collision properties of their parents, however, if the Children do not interact with the collision at the same time, they can be 'nudged' around the parent changing their Locally-relative positions. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
