<!DOCTYPE html><html lang="en" ><head ><title >'Invalid Image Handle'</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >'Invalid Image Handle'</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >'Invalid Image Handle'</a><br><br>
<a name="254798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Flynn</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any idea why I'm getting this error for this code?<br><br>A .bmp called 'player' is clearly in the BlitzPlus folder.<br><br>-----<br>Global gfxplayer<br><br>Graphics 640,480,16<br><br>SetBuffer BackBuffer()<br><br>gfxplayer=LoadImage("player.bmp")<br><br>While Not KeyHit(1)<br>	Cls<br>	DrawImage gfxplayer,MouseX(),MouseY()<br>	Flip<br>	Wend <br><br></td></tr></table><br>
<a name="254800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The file should be in the same place as you have saved your source file. <br><br></td></tr></table><br>
<a name="254805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Flynn</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers, skidracer. Pretty obvious now I come to think of it. :embarrassed: <br><br></td></tr></table><br>
<a name="1164026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dr Dink</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> MY ONE DONT WORK EITHER IT ANNOYING <br><br></td></tr></table><br>
<a name="1164035"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kirkkaf13</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dr.Dink,<br><br>I am new to Blitz3D but I can confirm that the code above does work if the image is saved in the same directory as your source code, if you haven't saved your source code it will not work. Also make sure that the file type is bitmap. <br><br></td></tr></table><br>
<a name="1322635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DodgeCodingOwner</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm making a rendering program in BlitzPlus for an automatic painting program that randomly generates 640x480 pictures and I keep getting this error. The rendering program is completely separate from the painting program.<br><pre class=code>
AppTitle "Rendering Picture..."

Graphics 640,480,32,2
SetBuffer BackBuffer()

Dim colors(640,480,3)
Dim Rave(160,240)
Dim Gave(160,240)
Dim Bave(160,240)

picture=LoadImage("D:\Programming\Paintings\painting0.png") ;It won't even work with the full path to the picture, the program is in the same folder
DrawImage picture,0,0
Flip

For y=0 To 479
    For x=0 to 639
        GetColor x,y
        colors(x,y,0)=ColorRed()
        colors(x,y,1)=ColorGreen()
        colors(x,y,2)=ColorBlue()
    Next
Next
For y=0 To 479 Step 4
    For x=0 To 639 Step 4
        Rave(x/4,y/4)=(colors(x,y,0)+colors(x+4,y,0)+colors(x,y+4,0)+colors(x+4,y+4,0))/4
        Gave(x/4,y/4)=(colors(x,y,1)+colors(x+4,y,1)+colors(x,y+4,1)+colors(x+4,y+4,1))/4
        Bave(x/4,y/4)=(colors(x,y,2)+colors(x+4,y,2)+colors(x,y+4,2)+colors(x+4,y+4,2))/4
        DebugLog "R: " + Rave(x/4,y/4) + "---G: " + Gave(x/4,y/4) + "---B : " + Bave(x/4,y/4) ;For testing  the code up to this point
    Next
Next
</pre> <br><br></td></tr></table><br>
<a name="1322646"></a>

<a name="1322647"></a>

<a name="1322648"></a>

<a name="1322649"></a>

<a name="1322650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> some things to try :<br>-check if the image is not corrupted (open it with the windows image viewer or with an image editor)<br>-check if the path is correct (or put the image in the same directory than your .bb/.exe)<br>-check if the filename is correct (in the name of the file and in your bb code)<br>-check if a reference exists after you have tried to load the image<br><pre class=code>
Image = loadimage("Image.jpg")
debuglog(Image)
</pre><br>-try to draw the image on the screen and stop the program just after :<br><pre class=code>
setbuffer(backbuffer())
clscolor(000,000,000)
cls()
drawimage(Image,0,0)
flip()
waitkey()
</pre><br>-try to do the same thing with another image<br>-try to do the same thing with another file format (maybe your image editor exporter for this file format is incompatible with the Blitz3d importer for this file format)<br><br>if after all of this, you still get the error, post a simplified code with your file (or a similar file) that we can run and test on our side <br><br></td></tr></table><br>
<a name="1322659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi DodgeCodingOwner,<br><br>It owuld be really helpful if you could describe exactly what "error" it is you are getting.<br>Does Blitz fail to compile, return an actual error message on execution, or is the code simply not working as expected?<br><br>The code you have posted will return 0 for the ColorRed(),ColorGreen() and ColorBlue() results every time since you perform GetColor() AFTER the Flip statement.<br><br>GetColor ALWAYS operates on the current GraphicsBuffer() Which you have set as SetBuffer BackBuffer() at the beginning.<br>After the Flip, the mage drawn to the backbuffer is swapped to the frontbuffer for display, and nothing else is drawn to the BackBuffer.<br><br>I suspect the following is more what you hoped for:<br><br><pre class=code>
AppTitle "Rendering Picture..."

Graphics 640,480,32,2
SetBuffer BackBuffer()

Dim colors(640,480,3)
Dim Rave(160,240)
Dim Gave(160,240)
Dim Bave(160,240)

picture=LoadImage("D:\Programming\Paintings\painting0.png") ;It won't even work with the full path to the picture, the program is in the same folder
DrawImage picture,0,0

For y=0 To 479
    For x=0 to 639
        GetColor x,y
        colors(x,y,0)=ColorRed()
        colors(x,y,1)=ColorGreen()
        colors(x,y,2)=ColorBlue()
    Next
Next

For y=0 To 479 Step 4
    For x=0 To 639 Step 4
        Rave(x/4,y/4)=(colors(x,y,0)+colors(x+4,y,0)+colors(x,y+4,0)+colors(x+4,y+4,0))/4
        Gave(x/4,y/4)=(colors(x,y,1)+colors(x+4,y,1)+colors(x,y+4,1)+colors(x+4,y+4,1))/4
        Bave(x/4,y/4)=(colors(x,y,2)+colors(x+4,y,2)+colors(x,y+4,2)+colors(x+4,y+4,2))/4
        DebugLog "R: " + Rave(x/4,y/4) + "---G: " + Gave(x/4,y/4) + "---B : " + Bave(x/4,y/4) ;For testing  the code up to this point
    Next
Next

Flip

</pre> <br><br></td></tr></table><br>
<a name="1322663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @_PJ_&gt;&gt;the title of the thread is "Invalid Image Handle" so i assumed this was the error he/she had... <br><br></td></tr></table><br>
<a name="1322672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DodgeCodingOwner</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I figured out that if I tried the code in Blitz 3D it runs perfectly. @_PJ_ Idk how you got the code to return 0 to every ColorRed(), ColorGreen() and ColorBlue() statement but that doesn't happen to me. <br><br></td></tr></table><br>
<a name="1322804"></a>

<a name="1322805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <strike>Can blitzplus even read PNG's ?</strike> posted before checking the Doc'S. According to them, it can. <br><br></td></tr></table><br>
<a name="1322810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DodgeCodingOwner</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep it can, and personally, I would never use anything other than a png, jpeg or a gif <br><br></td></tr></table><br>
<a name="1322838"></a>

<a name="1322839"></a>

<a name="1322840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @_PJ_ Idk how you got the code to return 0 to every ColorRed(), ColorGreen() and ColorBlue() statement but that doesn't happen to me.  <br></div><br><br>Sorry, I think I was confusing with ReadPixel.<br><br>If the code fails on BlitzPlus but works on Blitz3D (which is strange that you are referring to blitzplus issues in the Blitz3D discussion) - then it would seem to indicate the error is with the manner in which image data is stored.<br>Blitz3D uses driectdraw surfaces for images, whilst Blitz+ either uses the given graphics engine format or holds the image in RAM by default I think it's as scratch.<br><br>To get the code to run in Blitzplus, use<br>SetGfxDriver<br><br>and also declare the correct type of storage as the second parameter in the LoadImage line. <br><br></td></tr></table><br>
<a name="1322991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gpete</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I ran both of the sample programs in Blitz 3D- the original works fine and so does PJ's version...both wrote the data to the debug log.<br><br>I have been specifying exact full paths to images,models and other files in Blitz 3d for quite a while- had difficulties otherwise. <br><br></td></tr></table><br>
<a name="1323102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>had difficulties otherwise. <br></div><br>It's good to ensure the correct path. Obviously, on ends-user machines the paths will not necessarily be the same.<br>This is best solved either by prefixing with a correct directory path determined from SystemProperty("AppDir") or specified environment variables, possibly in combination with accurate use of ChangeDir() and CurrentDir() <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
