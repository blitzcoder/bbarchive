<!DOCTYPE html><html lang="en" ><head ><title >optimizing texture size</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >optimizing texture size</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >optimizing texture size</a><br><br>
<a name="621743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Osoko</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there, <br>I have a big X file with many objects and textures in it.<br>Each object has only one texture applied to it.<br>I want to deal with the texture size, according to the distance from the camera.<br>I've 3 textures size for every objects, small medium and big.<br>The name of the texture  define the size, Mytexture0.jpg,Mytexture1.jpg,Mytexture2.jpg<br>How to correctly access the hierarchy and change the texture <br>? <br><br></td></tr></table><br>
<a name="621756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't. Blitz3D &amp; DirectX automatically generates set of different sized textures called mip-maps. There is no need for the user to do anything by themselves if it's just size related. Changing textures by yourself doesn't make your program faster, probably just the opposite.<br><br>And if you load only ONE .X file, then you have one object with lot's of textures, not many objects with one texture. If you want them to be individual objects you'll have break the big .X file to many smaller ones. <br><br></td></tr></table><br>
<a name="621765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Osoko</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, i want to do this for reduce the amount of texture used in my project. It's in use with freetexture. <br>The only one X file is more practice for me, or I will have to export a lot of objects, which takes times.<br>In my X file, meshes are separate ( not welded ),  and as i say, one texture for one meshe.<br>In fact, with 3 set of texture, i have a 128, 64 and 32 mo demo. I want to have just one, which can optimize the amount of memory.<br>For example, the 128 mo demo has asbolutly no optimisation, i thought that free the big texture for distant objects and replace it with a small one could help. <br><br></td></tr></table><br>
<a name="621774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you load the mesh with LoadAnimMesh instead of LoadMesh then you'll be able to access the sub-meshes as children entities (using a recursive hierarchy parser). You may then track down the brushes and their textures as demonstrated in the SaveB3D Example (Code archives) and replace the textures by downscaled copies (probalby scaled using a temporary imagebuffer and Copyrect).<br><br>But I have to agree with Mustang, there isn't much you can optimize, other than replacing the texture files by smaller versions. Note: when 2 Objects use the same texture with the same texture flags, Blitz has already optmized the usage and holds only one copy of it in memory, so it wouldn't make sense to replace the texture of the one that is far away, if the other one is located near the camera, but it would eat even more Vram. <br><br></td></tr></table><br>
<a name="621782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Osoko</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is no sharing of object, i'm making an very old street of my city. Every house is unique. As i'm making a photorealistic work i'm going to explode my memory budget ( i have 256 but want the demo to work with 128 or 64 too). I can't make any optimisation like in a normal game, i'm working on a church built in 1230  and very old houses ( 1483, for one of the most exceptionnal ).  My work is not a game, but a virtual visite of these monuments.  I'm not an expert programmer, but Blitz permits me too achieve my goal : it works great !<br>Now, i'm looking for optimisation. <br><br></td></tr></table><br>
<a name="621800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> virtual visite? so people can walk to the distant buildings? So you have to swap the textures on the fly? This will freze the app, in the worst case for a few seconds, because DirectX has to send the textures to the Vram, that takes some time.<br><br>I would first try to run the 256 version with only 64 Megs, probably DirectX is doing this already using virtual Vram and Mipmapping.<br><br>Anyway, if you want to try it, it's possible, altough I'm not sure if it will help a lot. Here's the Source that shows how to track down the textures used by a bursh and the brush used by a surface:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=866" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=866</a><br>(note the order of the surfaces differs each time you run the app. Note: GetBrushTexture creates a texture clone and GetSurfaceBrush creates a brush clone, both should be deleted after the identification of the used texture file)<br><br>If you want to access the sub-meshes as children (using LoadAnimMesh instead of LoadMesh) then you may use a Hierarchy parser like this:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=615" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=615</a><br>where this one shows how to determine if a child is a mesh or a pivot or a bone etc:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1170" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1170</a><br><br>If every sub mesh is using only one texture then you probably don't need to track down the textures as seen in SaveB3D, you could also indentify a child by its entity name (probably simply store the texture filename in the entity name). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
