<!DOCTYPE html><html lang="en" ><head ><title >Alpha Channel Render Order</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Alpha Channel Render Order</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Alpha Channel Render Order</a><br><br>
<a name="1165147"></a>

<a name="1165148"></a>

<a name="1166294"></a>

<a name="1166295"></a>

<a name="1166296"></a>

<a name="1166297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> [ALPHA TOPIC RESOLVED - See Update below]<br>I made my first .b3d file and it loads correctly with alpha maps displayed correctly, but when I move my camera behind the brass fences, I see themselves and the other fences right through them.<br><br>With pivots centered, the upper levels should be further away from the camera and rendered before the lower levels.<br>Do I have to do this ordering manually?  This is why I made my exporter.<br><br>[Update]  No I don't - my mistake?  Loading the scene with LoadMesh and not LoadAnimMesh<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have had the same problems.<br>2 ways to avoid this zordering problem :<br>Use the flag 4 "mask" when you load a texture (instead of the flag 2 "alpha")<br>or<br>Use EntityOrder(Mesh,x) and change the EntityOrder of each mesh with alpha depending on where the Camera is. <br><br></td></tr></table><br>
<a name="1165257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is a known limitation of Blitz3D, basically caused by its DirectX 7 engine.<br><br>DirectX 7 can't depth-sort polygons with alpha enabled, and won't try. So when Blitz3D throws an array of polygons (surface) to DirectX, instead of being depth-sorted, they're simply drawn from first to last in the order that they appeared in the surface. It would technically be possible to reorder the polygons within the surface, in software, but in practice this is usually far too expensive to work in realtime.<br><br>The absence of a depth test also means polygons are not properly sorted between objects; an alpha-enabled object drawn after another one will appear in front of it unless manually ordered to be drawn first. <i>However</i>, the order in which the whole objects are drawn is still sorted by distance - it's just that it measures the distance to the entity pivot, so if your entity pivot isn't perfectly centred it may not give the expected results.<br><br>Anyway, in this case it looks like the answer is to use masking, since you're not actually using semitransparent pixels: masking shouldn't count as enabling alpha since all relevant pixels are either present-or-not, and it can still use the normal "solid" depth sort mode for the pixels that are present.<br><br>You might find that DDS textures work better with masking than other image types (I have no idea, never used them but I recall a discussion a while back where they got rid of someone's black-edge artifacts). <br><br></td></tr></table><br>
<a name="1165393"></a>

<a name="1165398"></a>

<a name="1165399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you.  My old engine sorted alpha objects, so nothing new if I have to.<br>The Masking works on my fence example perfectly.<br>Thank you both very much!<br><br>I will now investigate DDS textures for translucent objects (haven't had a need until now - I have a tool though)<br><br>I keep hoping for a free ride :)<br><br>Do you know if folks will have an interest in my Max5 macroscripts for export here?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1165836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> YA KNOW...  It seems that I was loading my mesh with LoadMesh and not <br><br>*************  LoadAnimMesh *************<br><br>It had nothing to do with pivots.<br>Now everything works magically...<br><br>Sigh. <br><br></td></tr></table><br>
<a name="1165841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, for future reference you do need to use LoadAnimMesh to preserve mesh hierarchy when loading.<br><br>If in doubt just use it for everything. <br><br></td></tr></table><br>
<a name="1165846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah.  I've noted however, that I still can't load my very large scene...<br><br>And for reference-- Fragmotion doesn't import large b3d scenes very well probably for the same reasons that b3d doesn't.  They're not wrong or bad.  Just too big I think.<br><br>Here's my latest attempt to load this insanely large map.<br>Can anybody else get it to load -and stay in memory-   ?<br><br><a href="http://sites.google.com/site/mikorians/ArcGBldg.zip" target="_blank">http://sites.google.com/site/mikorians/ArcGBldg.zip</a> <br><br></td></tr></table><br>
<a name="1165930"></a>

<a name="1165931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'll find that they do indeed load without trouble separately (not in fragmotion, of course).<br><br>** I don't want to keep pestering you guys about this - if you have no problem loading both together, I just wanna know so I can go buy a newer graphics card or something. ***<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1166002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mikorians&gt;&gt;I have tried to run "loadb3d.bb" and there is an error :"parameter mus be greater than 0"<br><br>At this line :<br>If Instr("0123456789",Mid(a$,i,1))&lt;&gt;0 And Instr("0123456789",Mid(a$,i-1,1))&lt;&gt;0 Then<br><br>I don't understand what is your problem with large scenes ? You can probably export the scene in different parts and load them in Blitz3d separately.<br>It will be much better for an occlusion routine. <br><br></td></tr></table><br>
<a name="1166069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry about the viewer app. It is meant to be compiled and used as a drag and drop.  The same problem with loading occurs no matter how many pieces I break the scene up into. <br><br></td></tr></table><br>
<a name="1166298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, and RemiD - thanks for the Mask suggestion. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
