<!DOCTYPE html><html lang="en" ><head ><title >Blitz3D Lesson4 Error</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitz3D Lesson4 Error</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Blitz3D Lesson4 Error</a><br><br>
<a name="1229045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jillinger</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I seem to have messed up the lesson4.bb file, because Blitz3d demo does not undo changes, unfortunately, and it also apparently auto saves the file, so now the file is messed up.<br>However, I had created my own file, as I followed the lessons. I am getting this error: Memory Access Violation, and can't get it fixed. Can someone help please.<br>Here's the code:<br><br>;This is my lessons file<br>; Variables<br>Global escape_key = 1<br>Global screenW = 640, screenH = 480 ; create a Global variable for the game screen<br>Global run, run_vol#, runchannel ; Running sound effect handle and volume tags<br><br>Graphics3D (screenW,screenH,32,2) ; 32 bit color depth ; windowed<br>SetBuffer BackBuffer() ;<br><br>AmbientLight 200, 200, 200 ;add some Ambient light so that if the player gets too far from the point light source things won't go dark<br>Global myLight_01 = CreateLight(2)<br><br>; create single camera<br>Global myCam_01 = CreateCamera()<br>CameraViewport (myCam_01,0,0,screenW,screenH)<br><br>Include "spriteLoader.bb" ; Load/Use sprite functions<br>Include "soundFunctions.bb" ; INSERTS "soundFunctions.bb" file ; Load/Use sound functions<br><br>;FUNCTIONS<br>LoadMusic()<br>LoadSFX()<br>; Load world randomly with "tree" sprites using our NEW reuseable LoadRandomSprites() function<br>; Just give the sprite image, how many, and the X and Z range for random placement!<br>LoadRandomSprites ("tree.bmp", 500, -250, 250, -250, 250) ; call function<br><br>; Run a loop as long as no escap key is not pressed - so that I can see what happens<br>While Not KeyHit(escape_key)<br><br>; sprite control<br>; Use the sprite "RUN" sound volume to toggle sprite animation<br>If (run_vol# &gt; 0) Then AnimSprite (sprChar, sprCharAnim_tex, 200, 4) ; execute function<br><br>UpdateWorld<br>RenderWorld<br><br>Flip<br>Wend<br><br>End<br><br><br>;This is the spriteLoader.bb file<br>; -----------------------------------------------;<br>; These functions are called from 'lesson003.bb' ;<br>;------------------------------------------------;<br><br>sprChar = CreateSprite()<br>sprCharAnim_tex = LoadAnimTexture ("char_back.bmp", 7, 32, 48, 0, 4)<br><br>EntityTexture (sprChar,sprCharAnim_tex,1) ; the 1 represents either the frame or the index (I'm not sure)<br>HandleSprite (sprChar,0,-1) ; Sets a sprite handle<br>ScaleSprite (sprChar,2,2)<br>PositionEntity (sprChar,0,0,10)<br><br>Function LoadRandomSprites (sprite$, total, x1, x2, z1, z2)<br>temp_sprite = LoadSprite (sprite$,7)<br>HandleSprite (temp_sprite,0,-1) ; Sets a sprite handle<br>EntityAutoFade (temp_sprite,100,120)<br>For s=1 To total ; total 500 trees<br>sx# = Rnd (x1,x2) : sz# = Rnd (z1,z2) ; randomize<br>PositionEntity (copied_sprite,sx,0,sz)<br>ScaleSprite (copied_sprite,Rand(2,3),Rand(4,6))<br>Next<br>FreeEntity (temp_sprite)<br>End Function<br><br>Function AnimSprite (obj, atex, d, f)<br>frame = MilliSecs () /d Mod f<br>EntityTexture obj,atex,frame<br>End Function <br><br></td></tr></table><br>
<a name="1229047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jillinger</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I managed to get that error sorted out. Apparently I placed this code:<br><br>; Load world randomly with "tree" sprites using our NEW reuseable     <br>LoadRandomSprites() function<br>; Just give the sprite image, how many, and the X and Z range for random placement!<br>LoadRandomSprites ("tree.bmp", 500, -250, 250, -250, 250) ; call function<br><br>the wrong place. I put it back where it should be - at the beginning of the spriteLoader.bb file, and I get this error: 'Entity Does Not Exist'<br><br> on the HandleSprite (temp_sprite,0,-1) line. <br><br>Here is the code update:<br><br>;This is my lessons file<br>; Variables<br>Global escape_key = 1<br>Global screenW = 640, screenH = 480 ; create a Global variable for the game screen<br>Global run, run_vol#, runchannel ; Running sound effect handle and volume tags<br><br>Graphics3D (screenW,screenH,32,2) ; 32 bit color depth ; windowed<br>SetBuffer BackBuffer() ;<br><br>AmbientLight 200, 200, 200 ;add some Ambient light so that if the player gets too far from the point light source things won't go dark<br>Global myLight_01 = CreateLight(2)<br><br>; create single camera<br>Global myCam_01 = CreateCamera()<br>CameraViewport (myCam_01,0,0,screenW,screenH)<br><br>Include "spriteLoader.bb" ; Load/Use sprite functions<br>Include "soundFunctions.bb" ; INSERTS "soundFunctions.bb" file ; Load/Use sound functions<br><br>;FUNCTIONS<br>LoadMusic()<br>LoadSFX()<br>; Load world randomly with "tree" sprites using our NEW reuseable LoadRandomSprites() function<br>; Just give the sprite image, how many, and the X and Z range for random placement!<br>LoadRandomSprites ("tree.bmp", 500, -250, 250, -250, 250) ; call function<br><br>; Run a loop as long as no escap key is not pressed - so that I can see what happens<br>While Not KeyHit(escape_key)<br><br>; sprite control<br>; Use the sprite "RUN" sound volume to toggle sprite animation<br>If (run_vol# &gt; 0) Then AnimSprite (sprChar, sprCharAnim_tex, 200, 4) ; execute function<br><br>UpdateWorld<br>RenderWorld<br><br>Flip<br>Wend<br><br>End<br><br><br>;This is the spriteLoader.bb file<br>; -----------------------------------------------;<br>; These functions are called from 'lesson003.bb' ;<br>;------------------------------------------------;<br>; Load world randomly with "tree" sprites using our NEW reuseable LoadRandomSprites() function<br>; Just give the sprite image, how many, and the X and Z range for random placement!<br>Global sprite$ = LoadSprite ("tree.bmp")<br>LoadRandomSprites (sprite, 500, -250, 250, -250, 250) ; call function<br><br>sprChar = CreateSprite() <br>sprCharAnim_tex = LoadAnimTexture ("char_back.bmp", 7, 32, 48, 0, 4)<br><br>EntityTexture (sprChar,sprCharAnim_tex,1) ; the 1 represents either the frame or the index (I'm not sure)<br>HandleSprite (sprChar,0,-1) ; Sets a sprite handle<br>ScaleSprite (sprChar,2,2)<br>PositionEntity (sprChar,0,0,10)<br><br>Function LoadRandomSprites (sprite$, total, x1, x2, z1, z2)<br>temp_sprite = LoadSprite (sprite$,7)<br>HandleSprite (temp_sprite,0,-1) ; Sets a sprite handle<br>EntityAutoFade (temp_sprite,100,120)<br>For s=1 To total ; total 500 trees<br>sx# = Rnd (x1,x2) : sz# = Rnd (z1,z2) ; randomize<br>PositionEntity (copied_sprite,sx,0,sz)<br>ScaleSprite (copied_sprite,Rand(2,3),Rand(4,6))<br>Next<br>FreeEntity (temp_sprite)<br>End Function<br><br>Function AnimSprite (obj, atex, d, f)<br>frame = MilliSecs () /d Mod f<br>EntityTexture obj,atex,frame<br>End Function <br><br></td></tr></table><br>
<a name="1229052"></a>

<a name="1229053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>Firstly, if you have not already done that, when the Blitz3d IDE is open, in the menu, click on "Program" and make sure the "Debug Enabled" is activated, this will give you a better description of the error.<br><br>About the error "Entity Does Not Exist", it can mean that you try to access, to modify, to apply an action to an entity (pivot, mesh, sprite) which has not been created yet or which has not been loaded properly or which has already been freed.<br><br>To know if your entity exists at one place in the program, you can use Debuglog("")<br><br>For example :<br><pre class=code>
Thing = LoadMesh("Thing.b3d") ;or CreateMesh() or LoadSprite("Thing.png") or CreateSprite() or CreatePivot()
Debuglog("Thing = "+Thing) ;if Thing is different from 0, it means it has been created or loaded then created properly

PositionEntity(Thing,0,0,5)
</pre><br><br>When you don't need an entity and you want to remove it from your world and from memory, instead of using only FreeEntity(Thing), you want to use :<br>FreeEntity(Thing)<br>Thing = 0<br><br>This is because if you need to debug your code later because you have an error in it and you only use FreeEntity(Thing), Thing will still contain the pointer number.<br><br>Example :<br><pre class=code>
Graphics3D(800,600,32,2)
SetBuffer(BackBuffer())
SeedRnd(MilliSecs())

Camera = CreateCamera()

Thing = CreatePivot()
DebugLog("Thing = "+Thing)
FreeEntity(Thing)
DebugLog("Thing = "+Thing)
Thing = 0
DebugLog("Thing = "+Thing)

WaitKey()

EndGraphics()
End()
</pre> <br><br></td></tr></table><br>
<a name="1229062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jillinger</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks<br>I think that information will work for the basics, but this code is technical, as the lesson indicated.<br>For one thing I understand what<br>    LoadRandomSprites ("tree.bmp", 500, -250, 250, -250, 250) <br>is supposed to do but, it does not seem like <br>    temp_sprite = LoadSprite (sprite,7) ; <br>in the function is working.<br><br>I changed the code a bit<br><br>   Global aSprite$ = LoadSprite ("tree.bmp")<br>   LoadRandomSprites (aSprite, 500, -250, 250, -250, 250) ;<br><br> to see  if that would fix the problem, but no such thing.<br>I also checked to make sure the image is fine, and it is.<br>I know the problem in in the string 'sprite$', but I can't figure out how to fix it.<br>I'd be glad if an expert out there could just use the code I posted and just help me fix it. <br><br></td></tr></table><br>
<a name="1229065"></a>

<a name="1229066"></a>

<a name="1229067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> After a quick look, here :<br><pre class=code>
Function LoadRandomSprites (sprite$, total, x1, x2, z1, z2)
temp_sprite = LoadSprite (sprite$,7)
HandleSprite (temp_sprite,0,-1) ; Sets a sprite handle
EntityAutoFade (temp_sprite,100,120)
For s=1 To total ; total 500 trees
sx# = Rnd (x1,x2) : sz# = Rnd (z1,z2) ; randomize
PositionEntity (copied_sprite,sx,0,sz)
ScaleSprite (copied_sprite,Rand(2,3),Rand(4,6))
Next
FreeEntity (temp_sprite)
End Function
</pre><br><br>copied_sprite does not seem to be created anywhere.<br><br>Also if you plan to use copied_sprite = copyentity(temp_sprite), and then you use freeentity(temp_sprite) this will produce an error because each copied_sprite uses the temp_sprite as the "model"<br><br>A better approach would be to first create your prebuilt sprite (the one which will be used as the model) and then use copyentity to create many copies of it. <br><br></td></tr></table><br>
<a name="1229076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jillinger</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. I'll keep that information for if I need it later, but I found a work around and got the error with the trees fixed. Now all my trees are placed. Now I am getting an error on the character function, but I  believe I can fix this with a few tweaks.<br>Thanks for all the suggestions.<br>Here's the code for getting the trees in:<br><br>; Load world randomly with "tree" sprites using our NEW reuseable LoadRandomSprites() function<br>; Just give the sprite image, how many, and the X and Z range for random placement!<br>aSprite$ = LoadSprite ("tree.png")<br>LoadRandomSprites (500, -250, 250, -250, 250) ; call function<br>; Set sprite view mode <br>SpriteViewMode aSprite,4 ; 4 sprite always remains upright. Gives a 'billboard' effect. Good for trees, spectators etc.<br><br>Function LoadRandomSprites (total, x1, x2, z1, z2)<br>	temp_sprite = LoadSprite ("tree.png", 7) ; creates a sprite and textures it with whatever image we pass through sprite$ . <br>	; Since we will be using a copy command this sprite (called temp_sprite) will only be used temporarily. <br>	; The 7 is a commonly used flag For multiple image options... By Default, black background in any image becomes transparent.<br><br>	HandleSprite (temp_sprite, 0,-1) ; Sets a sprite handle<br>	EntityAutoFade (temp_sprite, 100, 120) ; cause an entity's alpha level to be adjusted at distances between near and far <br>	; near# - distance in front of the camera at which entity's will start being faded <br>	; far# - distance in front of the camera at which entity's will Stop being faded (And will be invisible)  <br>	; code above start to fade at 100 units and be invisible by 120 units. This helps prevent large levels with lots of objects to run faster<br>	<br>	For s=1 To total ; total 500 trees<br>		sx# = Rnd (x1,x2) : sz# = Rnd (z1,z2) ; randomize <br>		; set x1 , x2 And z1 , z2 To -250, 250, And -250, 250 which will scatter our 500 trees in a 500 x 500 unit square centered in our level<br><br>		copied_sprite = CopyEntity (temp_sprite) ; lets us quickly copy our previously loaded temp_sprite <br>		; rather than waste time reloading the image 500 times off the hard drive!<br>		PositionEntity (copied_sprite,sx,0,sz) ; an old command that now uses the randomly generated coordinates (sx,sz) to place things<br>		ScaleSprite (copied_sprite,Rand(2,3),Rand(4,6)) ; different size trees no wider than 3, no higher than 6<br>		; ScaleEntity works only for 3D objects. Sprites are flat and require their own scale command - ScaleSprite<br>	Next<br>	FreeEntity (temp_sprite) ; Since we don't need the temp_sprite any more we can save a little memory by freeing it up (deleting it)<br>End Function <br><br></td></tr></table><br>
<a name="1229087"></a>

<a name="1229088"></a>

<a name="1229104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What i usually do when i want to create several entities which use the same model :<br><pre class=code>
;i first load and create a prebuilt/prefab/model of the thing
Global ThingXSprite = LoadSprite("Thing.png")
SpriteViewMode(ThingXSprite,x)
ScaleSprite(ThingXSprite,1,1,1) 
HideEntity(ThingXSprite)

;then i create a list (with arrays) to store my things
Global ThingsCount% = 0
Dim ThingSprite(100)

;then i create my things and i store them in the list (in the arrays)
For i% = 1 to 100
 ThingsCount = ThingsCount + 1
 Id% = ThingsCount
 ThingSprite(Id) = CopyEntity(ThingXSprite)
 SXYZ#= rnd(0.5,1.5)
 ScaleEntity(ThingSprite(Id),SXYZ,SXYZ,SXYZ)
 PositionEntity(ThingSprite(Id),rnd(0,100),0,rnd(0,100)) 
Next

;then i can access/modify/update the things in the list
For Id% = 1 to ThingsCount
 MoveEntity(ThingSprite(Id),0.01,0,0)
Next
</pre> <br><br></td></tr></table><br>
<a name="1229127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jillinger</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> That looks like a good method for using Types. I'll try that. Thanks <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
