<!DOCTYPE html><html lang="en" ><head ><title >Cohesion</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Cohesion</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Cohesion</a><br><br>
<a name="381683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MAX711</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! <br><br>New to programming so if this is really obvious I appologise. Does anyone have a good routine for checking if characters on a board game are all within a certain distance of each other, say 40 pixels max? I might have upto 20 characters and they all need to be within 40 pixels of each other, but in any random location.  Or maybe another way to think of it is a flock of pigeons on the ground, all randomly spaced but needing to be within 2 feet of each other, how would you go about checking if they are?<br><br>Thanks <br><br></td></tr></table><br>
<a name="381707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RiverRatt</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your working in 3d you could use <br>EntityDistance# ( src_entity,dest_entity)<br><br>If your working in 2d you could use mathamatics<br>and if then statments to check number of pixels between<br>characters.<br><br>And check the code archives under algorithms, ther is one that checks the distance between 2 rectangles and another <br>one with homing missles that could just as well be little<br>sheep folowing a sheep herder.Have a looksee. <br><br></td></tr></table><br>
<a name="381710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Todd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe something like this?:<br><br><pre class=code>
Const MaxDistance = 40

Type Character
	Field PosX, PosY
End Type

For Ch.Character = Each Character
	InRange = False
	For Ch2.Character = Each Character
		DistX# = Ch2\PosX - Ch\PosX
		DistY# = Ch2\PosY - Ch\PosY
		If Sqr((DistX#^2)+(DistY#^2)) &lt;= MaxDistance
			InRange = True
		EndIf
	Next
	If Not InRange
		;Character Too Far Away
	Else
		;Character Within MaxDistance Range
	EndIf
Next
</pre> <br><br></td></tr></table><br>
<a name="381711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I would definitely suggest using 'Types' as Todd suggested because it is a quick way to check through each 'instance'. <br><br></td></tr></table><br>
<a name="381737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MAX711</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply(s).  I have been working with something very similar to Todd's suggestion but the problem that I'm having is that the algorithm would allow a situation where the flock of pigeons break into 2 seperate groups on other sides of the field.  This is not allowed, but as long as the pigeons in each group are close enough to each other, the algoritm above wouldn't catch this situation.  Somebody mentioned a "Binary Heap" might work, but I don't even know what a "Binary Heap" is, let alone whether it would work? <br><br></td></tr></table><br>
<a name="381742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'Binary heap' means nothing to me either ;)<br><br>If you need the 'pigeons' to split up into separate groups, are these groups different for a reson? different 'teams'???<br><br>If so, then repeat the above, but have a different Type for each group maybe? <br><br></td></tr></table><br>
<a name="381757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MAX711</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, the 'pigeons' are all part of the same team.  It's the splitting up that I'm trying to stop them doing, but I have no way of detecting when it happens. <br><br></td></tr></table><br>
<a name="381761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you post some of your existing code? <br><br></td></tr></table><br>
<a name="381788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps simply looking for two or more 'pigeons' in close proximity is what you are after... <br><br></td></tr></table><br>
<a name="381816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Todd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The method I wrote just checks if each "pigeon" is within 40 pixels of at least one other pigeon. If you wanted to check that each pigeon should be within 40 pixels of each other pigeon, than just change the "&lt;=" to "&gt;", and change "If Not InRange" to "If InRange". That way, the code after "If InRange" would only be run if a pigeon was more than 40 pixels away from any other pigeon.<br><br>For example, using the code I wrote in my first post, both A and B would work. If you made those two changes I described though, only B would work, because in A it's possible for pigeons to be more than 40 pixels away:<br><br><img src="http://www.sitelinedirect.com/files/pigeons.gif"> <br><br></td></tr></table><br>
<a name="382046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MAX711</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow! great graphics Todd, I think I might use them in my game ;).  I've attached a screenshot from the game that might help.<br><br>In this shot, all the units (members of 'red' team) are within 2 cells of each other and there are no gaps of more than 2 cells between 'clusters', i.e. 14,1,7,4 are not more than two cells away from 10,12,8.  So this is perfectly OK, but.....<br><br><img src="http://168.144.30.215/images/BlitzBasicStuff/cohesion_ok.JPG"><br><br>In the shot below, 14,2,4 meet the criteria, but they are more than two cells away from the rest, which is not allowed, but the algorithm can't catch this because when 14 is tested, it finds that it's next to 2, so it thinks it's OK.<br><br><img src="http://168.144.30.215/images/BlitzBasicStuff/cohesion_false.JPG"> <br><br></td></tr></table><br>
<a name="382322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Curtastic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> if the pieces start out next to eachother, you could check for adjaceceny when one is moved, if it is no longer adjacent, then move back to original position.<br><br>but if the pieces become scattered or dont start next to eachother, you would have to do a union tree or a flood fill, to check them all.<br><br>make a fill Type, each only has a position on the grid<br>start on any piece, by placeing a fill spot there<br>check all tiles within adjacency radius of the fill spot, if there is a piece on any of those tiles, with a piece \checked=false then set that piece's\checked=true and place a fill spot on that piece. <br>delete the origional fill spot when you check all its adjacent tiles<br>for each fill spot do that same thing until theres no more fill spots<br><br>youre done. you can go through each piece and if it's \checked is false then it is unconnected <br><br></td></tr></table><br>
<a name="382699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MAX711</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Coorrae, it worked like a charm! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
