<!DOCTYPE html><html lang="en" ><head ><title >Multitexturing and EntityAlpha problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Multitexturing and EntityAlpha problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Multitexturing and EntityAlpha problem</a><br><br>
<a name="554683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a multitextured quad which is to act as a window for a GUI.  The first texture is a simple tiled background for my window.  The second texture needs to be either masked or transparent so I can show through parts of the window background where there are no gadgets or text; since I couldn't seem to get masking working, I'm using alpha.<br><br>Details:<br>texture 0: loadtexture_COLOUR, textureblend_ALPHA<br>texture 1: loadtexture_COLOUR+loadtexture_ALPHA+loadtexture_VRAM, textureblend_ALPHA<br><br>My problem is that when I set the enitity to an Alpha setting less than 1, the first texture disappears entirely.<br><br>1. How do I fix this?<br><br>2. Is there some page I can read that will explain all the nuances of what issues there are when combining alpha, multitextuing, and any other directx features i should be concerned about?<br><br>3. It seems rediculous that createtexture() defaults each pixel to be opaque, and I have to loop through and set them to 0.  Am I doing something wrong?<pre class=code>; create the overlay texture which will be drawn to
this_window\overlay_texture = createtexture(next_power_of_two(width), next_power_of_two(height), loadtexture_COLOUR+loadtexture_ALPHA+loadtexture_VRAM)
scaletexture(this_window\overlay_texture, texturewidth(this_window\overlay_texture), textureheight(this_window\overlay_texture))
textureblend(this_window\overlay_texture, textureblend_ALPHA)
; make it transparent
for x=0 to texturewidth(this_window\overlay_texture)-1:for y=0 to textureheight(this_window\overlay_texture)
	writepixel(x,y,0,texturebuffer(this_window\overlay_texture))
next:next</pre> <br><br></td></tr></table><br>
<a name="554983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> help? <br><br></td></tr></table><br>
<a name="554988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DH</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> From my experience (back when we were given the ability to store textures in VRam and what not), you don't have much leeway with writing directly to textures with alpha or mask information and have it acutally work.<br><br>There was something from mark that said the 256 flag wasn't intended as official and if too many problems arose he was going to take it out...  That was months ago though. <br><br></td></tr></table><br>
<a name="557379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it wasn0t the 256 flag, but the mix of multiply blending and alpha blending. Some cards can't take it. <br><br>But if a mesh disappears if you reduce the alpha, sounds more like a driver bug to me. I had something similar, then I updated the driver (catalyst) and the problem was solved.<br><br>Also, you may swap the texture index for your mutlitexturing, so use an other layer for the alpha texture.<br><br>Unfortunatly this isn't really exact science since even the cards interprets these things individually.<br><br>BTW yes, you normally need to set the Alpha Bytes "manually", but there's a trick that may speed things up:<br><br>Keep a texture in memory that is black and fully transparent. Now use copyrect to copy from this texture to the texture you want to work with. Now draw to the edited texure (eg. Line, Plot or Text). You'll see, the texture is masked. <br><br></td></tr></table><br>
<a name="557380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW don't use Writepixel, but writepixelfast instead! (With Lockbuffer) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
