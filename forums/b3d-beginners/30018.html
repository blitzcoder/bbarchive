<!DOCTYPE html><html lang="en" ><head ><title >Simple "bouncing ball" physics?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Simple "bouncing ball" physics?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Simple "bouncing ball" physics?</a><br><br>
<a name="319122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm a bit of a physics newbie, so I'll need help with this...<br><br>What variables would need to be defined in order to allow simple "bouncing ball" physics to be obtained? Currently, I have worked out that my ball needs to have a mass, and that a value for gravity needs to be defined. I would like my ball to bounce realistically off the walls of a cuboid 3D room. However, my game is not like Pong, so I don't want the ball to have a constant velocity - rather, I'd like it to be influenced by gravity. (Basically, what I mean by this is that even if the ball hits a wall or even the ceiling, it will ultimately hit the floor again anyway due to gravity.)<br><br>If anyone could offer some more help as to how to go about implementing basic "bouncing ball" physics in 3D, then I'd love to hear it, as I currently have absolutely no idea what I'm doing when it comes to physics - but I realise that if I want to program games, then I'd need some sort of physics knowledge to be able to simulate different things.<br><br>What I'd like to eventually have with this game is a gravity value for each level (taking 10 as Earth's gravity), so that I can change the way the ball bounces (how high it bounces, or how slowly it falls) with different levels. I'd also like the ball's left/right movement controllable using the keyboard, so that you can move the bouncing ball over an obstacle course, which will be the point of my game.<br><br>Sorry for the long post, thanks for your time, and many thanks in advance for your help. I get easily confused when it comes to matters of physics, so please try and explain this to me in as newbie-friendly a way as possible.<br><br>Thanks. <br><br></td></tr></table><br>
<a name="319132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apocalypse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is how i've done it in the past. Not with Blitz but in other languages. Hope I remembered it right...<br><br>;You need variables for speed for each vector<br>SpeedX=0<br>SpeedY=0<br>SpeedZ=0<br>;Then you need vector speeds<br>Dx=0<br>Dy=0<br>Dz=0<br>;Then you need flags for adding or subtracting vector speeds<br>DirX=1<br>DirY=1<br>DirZ=1<br>;Then you need to calculate speed for each vector<br>SpeedX=SpeedX+(Dx*DirX)<br>SpeedY=SpeedY+(Dy*DirY)<br>SpeedZ=SpeedZ+(Dz*DirZ)<br>;Then you need to take into account gravity<br>if Dy&gt;0 then Dy=Dy-Gravity<br>;Then you need to take into account boundaries<br>;and perform an elastic transfer of inertia<br>If EntityX&lt;min or EntityX&gt;max then DirX=DirX * (-1)<br>If EntityY&lt;min or EntityY&gt;max then DirY=DirY * (-1)<br>if EntityZ&lt;min or EntityZ&gt;max then DirZ=DirZ * (-1)<br>;Then finally, if you want the ball to eventually slow<br>;down then subtract a resistance force from vector speeds.<br>if Dx&gt;0 then Dx=Dx-.1 else Dx=0<br>if Dy&gt;0 then Dy=Dy-.1 else Dy=0<br>if Dz&gt;0 then Dz=Dz-.1 else Dz=0 <br><br></td></tr></table><br>
<a name="319182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... so how would I take into account the mass of the ball, considering I want the bouncing effect to change depending on how heavy the ball is? We have gravity, but eventually, I want to have different ball materials which will affect the ball's mass, and therefore its bounce: like rubber (normal bounce), steel (littler bounce) and glass (paperweight style - no bounce, just roll)...<br><br>I will fiddle with the example you've given though. Thanks for that. It is much appreciated, for now, at least I have something to start with. :)<br><br>However, even though I'm fiddling, nothing is yet final. I'm still open to suggestions. <br><br></td></tr></table><br>
<a name="319279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>  there is a code for simple ball boucing (with gravity, friction) which was used millions of times. This code appears often on this forum. But I am not sure who writes it (swift ?) and where is this code. Maybe in the code archive? Anyway, try to do a search on this forum.<br>  The code is very simple, and yet perfect for what you want to do! <br><br></td></tr></table><br>
<a name="319387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apocalypse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> All objects fall at the same rate regardless of their mass (Isaac Newton). The only thing the mass of the ball would change would be collisions with other balls of lesser or greater mass (not equal transfer of vector inertia). As for different materials, that would also only change the transfer of inertia when hitting other objects or the wall. (ie: a rubber ball may rebound with 99% of the energy it hits the wall whereas a bowling ball may only transfer 20% of its energy in a collision). <br><br></td></tr></table><br>
<a name="319405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apocalypse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's some code to cut-n-paste<br>-------------------------------<br><br>; Bouncing ball physics<br>;<br>Const GRAVITY#=-.05<br><br>Graphics3D 640,480<br><br>;Lets create the floor<br>Room=CreateTerrain(64)<br>PositionEntity room,-32,0,-32<br><br>;Create Ball<br>RedBall=CreateSphere(8)<br>EntityColor RedBall,255,0,0<br><br>;Create Camera<br>camera=CreateCamera()<br>PositionEntity camera,0,5,-16<br><br>;Variables for Ball<br>x#=0<br>y#=20	;set ball 20 units above floor<br>z#=0<br>dx#=0	;at rest<br>dy#=0	;at rest<br>dz#=0	;at rest<br>elasticity#=.75	;value from &gt;0 to &lt;1 (1=pure elastic collision)<br><br>While Not KeyHit(1)<br><br>	If y=&lt;1 Then<br>		y=1<br>		dy=-dy<br>		dy=dy * elasticity<br>	End If<br>	<br>	If y&gt;=1 Then<br>		dy=dy + GRAVITY<br>		x=x+dx<br>		y=y+dy<br>		z=z+dz<br>	End If<br>	<br>	PositionEntity RedBall, x, y, z<br><br>	UpdateWorld<br>	RenderWorld<br><br>	Flip<br><br>Wend<br><br>End <br><br></td></tr></table><br>
<a name="319410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >joncom2000</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Apocalypse (Posted 2004-01-31 11:01:46) <br> <br>All objects fall at the same rate regardless of their mass (Isaac Newton).  <br><br>Really, so if I throw you and a feather out of an airplane at 1000 feet you both will hit the ground at the same time? What school did you go to?<br>I am sure Isaac Newton is turning in his grave. <br><br>Here's some theory for you:-<br><br>The magnitude of terminal velocity depends on the weight of the falling body. For a heavy object, the terminal velocity is generally greater than a light object. This is because air resistance is proportional to the falling body's velocity squared. For an object to experience terminal velocity, air resistance must balance weight. An example that shows this phenomenon was the classic illustration of a rock and a feather being dropped simultaneously. In a vacuum with zero air resistance, these two objects will experience the same acceleration. But on the earth this is not true. Air resistance will equal weight more quickly for the feather than it would for the rock. Thus the rock would accelerate longer and experience a terminal velocity greater than the feather.<br><br>Another factor that affects terminal velocity is the orientation at which a body falls. If an object falls with a larger surface area perpendicular to the direction of motion it will experience a greater force and a smaller terminal velocity. On the other hand, if the object fell with a smaller surface area perpendicular to the direction of motion, it will experience a smaller force and a greater terminal velocity. <br><br></td></tr></table><br>
<a name="319414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apocalypse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> This version bounces in all three axis and uses the Blitz logo as a texture for the ball to give the appearance of actually rolling. Simple and basic. You will need to make sure you have the image file blitzlogo.bmp to run the demo now.<br>-----------------------------------------------------------<br><br>; Bouncing ball physics<br>;<br>Const GRAVITY#=-.05<br><br>Graphics3D 640,480<br><br>;Lets create the floor<br>Room=CreateTerrain(64)<br>PositionEntity room,-32,0,-32<br><br>;Create Ball<br>RedBall=CreateSphere(8)<br>;EntityColor RedBall,255,0,0<br>FlipMesh RedBall<br>txt=LoadTexture("blitzlogo.bmp")<br>EntityTexture RedBall, txt<br><br><br>;Create Camera<br>camera=CreateCamera()<br>PositionEntity camera,0,15,-45<br><br>SeedRnd (MilliSecs())<br><br>;Variables for Ball<br>x#=0<br>y#=20	;set ball 20 units above floor<br>z#=0<br>dx#=Rand(5)		<br>dy#=0;at rest<br>dz#=Rand(5)	<br><br>elasticity#=.8	;value from &gt;0 to &lt;1 (1=pure elastic collision)<br>friction#=.01<br><br>PointEntity camera, RedBall<br><br>While Not KeyHit(1)<br><br>	If KeyHit(57) Then<br>		;Variables for Ball<br>		x#=0<br>		y#=20	;set ball 20 units above floor<br>		z#=0<br>		dx#=Rand(5)		<br>		dy#=0;at rest<br>		dz#=Rand(5)		<br>	End If<br>	<br>	If y=&lt;1 Then<br>		y=1<br>		dy=-dy<br>		dy=dy * elasticity<br>	End If<br><br>	If x=&lt;-32 Then<br>		x=-32<br>		dx=-dx<br>		dx=dx * elasticity<br>	End If<br><br>	If x&gt;=32 Then<br>		x=32<br>		dx=-dx<br>		dx=dx * elasticity<br>	End If<br>	<br>	If z=&lt;-32 Then<br>		z=-32<br>		dz=-dz<br>		dz=dz * elasticity<br>	End If<br><br>	If z&gt;=32 Then<br>		z=32<br>		dz=-dz<br>		dz=dz * elasticity<br>	End If<br>	<br>	If y&gt;=1 Then<br>		dy=dy + GRAVITY<br>		y=y+dy<br>	End If<br>	<br>	x=x+dx<br>	z=z+dz<br><br>	dx=dx-(dx*friction)<br>	dz=dz-(dz*friction)<br>	<br>	;Move ball to new coords<br>	PositionEntity RedBall, x, y, z<br>	<br>	;Rotate mesh to give appearance of rolling<br>	RotateMesh RedBall, -dz*100,0,-dx*100<br>		<br>	UpdateWorld<br>	RenderWorld<br><br>	Text 0,5,"Press ESC to Exit"<br>	Text 0,15,"Press SPACE to throw ball"<br><br>	Flip<br><br><br>Wend<br><br>End <br><br></td></tr></table><br>
<a name="319415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apocalypse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> [joncom2000]<br>&gt;&gt;Really, so if I throw you and a feather out of an airplane at 1000 feet you both will hit the ground at the same time? What school did you go to? <br>I am sure Isaac Newton is turning in his grave&lt;&lt;<br><br>You are speaking about a completely different set of physics when you talk about wind resistance. The original post was speaking to a general algorithm for bouncing a ball, not a feather. Your pedantic rant, while wonderfully written, is woefully out of place for this discussion.<br><br>PS: Throw your feather and a bowling ball on the moon and they both indeed fall at the same rate. Isaac Netwon rolling in his grave INDEED! <br><br></td></tr></table><br>
<a name="319448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The magnitude of terminal velocity depends on the weight of the falling body. <br></div>No. There is no 'weight' aspect to physics. There is mass and force.<br><div class="quote"> For a heavy object, the terminal velocity is generally greater than a light object. <br></div>No. Weight has nothing to do with it.<br><div class="quote"> This is because air resistance is proportional to the falling body's velocity squared. <br></div>No. The two most significant factors are speed and cross-sectional area of the object.<br><div class="quote"> For an object to experience terminal velocity, air resistance must balance weight. <br></div>No. Terminal velocity is reached when air resistance becomes as great a force as the acceleration of gravity, thus preventing any further acceleration.<br><br>Here's some good info on <a href="http://www.batesville.k12.in.us/Physics/PhyNet/Mechanics/Newton2/Newton2Intro.html" target="_blank">Newtons Second Law</a>. <br><br></td></tr></table><br>
<a name="319605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >joncom2000</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Flameduck, this is taken from the site you point to<br><br>Terminal velocity occurs when the air resistance (sometimes called "drag") force equals the weight iof the falling object. This means that: <br>the object is falling with a constant velocity - its acceleration is zero. <br>heavy objects will have a higher terminal velocity than light objects. Therefore, heavy objects will fall faster in air than light objects. <br><br>So your saying my previous post is wrong yet the site you point to says basicly the same thing? Ok no problem.<br><br>Apocalypse, sorry, I do not imply that your coded example is incorrect, it does exactly as the original poster requested :) I just disagree with your statement on Newton's theory.<br><br>But enough of that, you have given a good example of simulating a bouncing ball, lets let Ash see how he get's on and put the topic back on track :) <br><br></td></tr></table><br>
<a name="321924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmmmmmm...<br><br>I've been playing around with your example, Apocalypse, and I've found that it's good if you specify the position values absolutely. However, I'm currently toying with the idea of using the Blitz collision system to handle collisions with the ground and walls - because my level is not just a box... It's a CShop level with ramps and obstacles, and I want an easy way to handle all the collisions.<br><br>The gravity works until the ball collides with the level; after that, it gets stuck on the ground and does not bounce back up.<br><br>Here's the code I have:<br><pre class=code>
If Not EntityCollided(Player(i)\Model, COLTYPE_Level) Then
	Player(i)\dY = Player(i)\dY + MAP_CurrentMap\Gravity
	Player(i)\Y = Player(i)\Y + Player(i)\dY
ElseIf EntityCollided(Player(i)\Model, COLTYPE_Level) Then
	Player(i)\Y = CollisionY(Player(i)\Model, 1) + 0.1
	ResetEntity Player(i)\Model
	DebugLog Player(i)\Y
	Player(i)\dY = -Player(i)\dY
	DebugLog Player(i)\dY
	Player(i)\dY = Player(i)\dY * Player(i)\Elasticity
	Player(i)\Y = Player(i)\Y + Player(i)\dY			
EndIf
PositionEntity Player(i)\Model, Player(i)\X, Player(i)\Y, Player(i)\Z
</pre><br><br>When the ball hits the ground, the values of Player(i)\Y and Player(i)\dY get stuck in this loop:<br><br><pre class=code>
0.1
-10.0
0.1
10.0
</pre><br><br>Why does this happen, and how can I get the ball to bounce back up, rather than stay on the ground like a vegetable? (I'm only working with the Y axis for now - once I get the Y axis working, I can just use the same principle for the X and Z axes, to enable collisions on the walls.)<br><br>Your help is much appreciated. <br><br></td></tr></table><br>
<a name="321956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apocalypse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is the new and improved version.<br><pre class=code>

;
; Bouncing ball physics - by Vincent DeCampo 2/1/04
;

Const GRAVITY#=-.05
Const BALLS=1
Const GROUND=2

Graphics3D 640,480

;*** Type for Ball ***
Type Ball_Object
	Field Entity
	Field Pivot
	Field x#
	Field y#
	Field z#
	Field dx#
	Field dy#
	Field dz#
	Field xMin#
	Field xMax#
	Field yMin#
	Field yMax#
	Field zMin#
	Field zMax#
	Field elasticity#
	Field friction#
End Type

Collisions BALLS, BALLS, 1, 2
Collisions BALLS, GROUND,2, 3

;*** Lets create the floor ***
Room=CreateTerrain(64)
PositionEntity room,-32,0,-32
EntityColor Room, 0, 150, 0

Plane1=CreateTerrain(64)
EntityColor Plane1, 160,0,0
PositionEntity Plane1,-48,32,-32
RotateEntity  Plane1,0,0,-45
EntityType Plane1, GROUND

Plane2=CreateTerrain(64)
EntityColor Plane2, 0,0,170
PositionEntity Plane2,0,-16,-32
RotateEntity  Plane2,0,0,45

EntityType Plane2, GROUND

;******* Create Initial Ball ******
Blitz.Ball_Object = New Ball_Object
InitBallVars(Blitz)

;***** Create Camera *****
camera=CreateCamera()
PositionEntity camera,0,35,-50
PointEntity camera, Blitz\Entity

;**********************************
;			 Main Loop
;**********************************
;
While Not KeyHit(1)

	If KeyHit(57) Then

		;***** Seed RND Generator *****
		SeedRnd (MilliSecs())
		
		;*** Create New Ball ***
		Blitz.Ball_Object = New Ball_Object	
		InitBallVars Blitz

	End If


	;**** Perform Room Physics ****
	For Ball.Ball_Object = Each Ball_Object
		BallPhysics (Ball)		
	Next

	UpdateWorld	

	;**** Perform Ball-on-Ball Physics ****
	CheckCollisions (Blitz)
		
	RenderWorld 
		
	Text 0,5,"Press SPACE to throw another ball"
	Text 0,15,"Press ESC to Exit"

	Flip

Wend

End

;**********************************

Function CheckCollisions (Ball.Ball_Object)

	For C.Ball_Object = Each Ball_Object
				
		If EntityCollided(c\Entity, BALLS) &gt; 0 
					
			For i = 1 To CountCollisions(c\Entity)

				Ent=CollisionEntity (c\Entity, i)

				;Get the normal of the surface which the entity collided with. 
				Nx# = CollisionNX(c\Entity, i) 
				Ny# = CollisionNY(c\Entity, i) 
				Nz# = CollisionNZ(c\Entity, i) 
			
				;Compute the dot product of the entity's motion vector And the normal of the surface collided with. 				
				VdotN# = (c\dx# * Nx# + c\dy# * Ny# + c\dz# * Nz#)
									
				;Calculate the normal force. 
				NFx# = -2.0 * Nx# * VdotN# 
				NFy# = -2.0 * Ny# * VdotN# 
				NFz# = -2.0 * Nz# * VdotN# 
										
				;Add the normal force to the direction vector. 
				c\dx# = c\dx# + NFx#/2
				c\dy# = c\dy# + NFy#/2	;Force /2 assumes balls equal in mass
				c\dz# = c\dz# + NFz#/2
								
				For Hit.Ball_Object = Each Ball_Object

					If Hit\Entity = Ent Then
						
						;Add negative force to collision entity vector		
						Hit\dx# = Hit\dx# - NFx#/2
						Hit\dy# = Hit\dy# - NFy#/2	;Force /2 assumes balls equal in mass
						Hit\dz# = Hit\dz# - NFz#/2		
											
					End If
																									
				Next

			Next
													
		Else
		
			If EntityCollided(c\Entity, GROUND) &gt;0
		
				For i = 1 To CountCollisions(c\Entity)
			
					Ent=CollisionEntity (c\Entity, i)

					;Get the normal of the surface which the entity collided with. 
					Nx# = CollisionNX(c\Entity, 1) 
					Ny# = CollisionNY(c\Entity, 1) 
					Nz# = CollisionNZ(c\Entity, 1) 
				
					;Compute the dot product of the entity's motion vector And the normal of the surface collided with. 				
					VdotN# = (c\dx# * Nx# + c\dy# * Ny# + c\dz# * Nz#)
										
					;Calculate the normal force. 
					NFx# = -2.0 * Nx# * VdotN# 
					NFy# = -2.0 * Ny# * VdotN# 
					NFz# = -2.0 * Nz# * VdotN# 
											
					;Add the normal force to the direction vector. 
					c\dx# = c\dx# + NFx#
					c\dy# = c\dy# + NFy#
					c\dz# = c\dz# + NFz#
	
				Next
			
			End If
		
		End If
		
	Next
							
End Function

;**********************************

Function InitBallVars(Ball.Ball_Object)

	;Create Ball
	Ball\Entity=CreateSphere(16)
	ScaleEntity Ball\Entity, 1,1,1
	EntityType Ball\Entity, BALLS

	txt=LoadTexture("blitzlogo.bmp")
	EntityTexture Ball\Entity, txt
	
	;Create Pivot
	Ball\Pivot=CreatePivot()
	
	;*** Variables for Ball ***	
	Ball\x#=0
	Ball\y#=20	;set ball 20 units above floor
	Ball\z#=0
	Ball\dx#=Rand(10-5)
	Ball\dy#=0	;at rest
	Ball\dz#=Rand(10-5)
	Ball\yMin#=1
	Ball\yMax#=9999
	Ball\xMin#=-32
	Ball\xMax#=32
	Ball\zMin#=-32
	Ball\zMax#=32
	Ball\elasticity#=.85	;value from &gt;0 to &lt;1 (1=pure elastic collision)
	Ball\friction#=.01
	;**************************

End Function

;**********************************

Function BallPhysics (Ball.Ball_Object)

	If ball\y   =&lt; Ball\yMin# Then
		Ball\y  =  Ball\yMin#
		Ball\dy = -Ball\dy
		Ball\dy =  Ball\dy * Ball\elasticity
	End If

	If Ball\x   =&lt; Ball\xMin# Then
		Ball\x  =  Ball\xMin#
		Ball\dx = -Ball\dx
		Ball\dx =  Ball\dx * Ball\elasticity
		UpdatePivot (Ball)
	End If

	If  Ball\x &gt;=  Ball\xMax# Then
		Ball\x  =  Ball\xMax#
		Ball\dx = -Ball\dx
		Ball\dx =  Ball\dx * Ball\elasticity
		UpdatePivot (Ball)
	End If
	
	If Ball\z   =&lt; Ball\zMin# Then
		Ball\z  =  Ball\zMin#
		Ball\dz = -Ball\dz
		Ball\dz =  Ball\dz * Ball\elasticity
		UpdatePivot (Ball)
	End If

	If Ball\z  &gt;=  Ball\zMax# Then
		Ball\z  =  Ball\zMax#
		Ball\dz = -Ball\dz
		Ball\dz =  Ball\dz * Ball\elasticity
		UpdatePivot (Ball)
	End If
	
	If Ball\y  &gt;= Ball\yMin# Then
		Ball\dy = Ball\dy + GRAVITY
	End If	

	Ball\x = Ball\x + Ball\dx
	Ball\z = Ball\z + Ball\dz
	Ball\y  = Ball\y + Ball\dy

	Ball\dx = Ball\dx - (Ball\dx*Ball\friction)
	Ball\dz = Ball\dz - (Ball\dz*Ball\friction)

	;Move ball to new coords
	PositionEntity  Ball\Entity, Ball\x, Ball\y, Ball\z, 0

	;Rotate mesh to give appearance of rolling	
	TurnEntity Ball\Entity, Ball\dz*50,0,-Ball\Dx*50, 1
			
End Function

Function UpdatePivot (Ball.Ball_Object)

	;Move pivot to coords + deltas
	PositionEntity Ball\Pivot, Ball\x+Ball\dx, Ball\y+Ball\dy, Ball\z+Ball\dz
	
	PointEntity Ball\Entity, Ball\Pivot, 0		

End Function
</pre><br>PS: You need the file Blitzlogo.bmp as the ball texture. <br><br></td></tr></table><br>
<a name="321958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apocalypse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> What you need to do is add a collision test for the floor or scenery, then during the collision check, if the collision in not with another ball, skip over the section that applies negative force back to the colliding entity (since it will be the wall), and make sure you give 100% of the positive force back to the ball instead of Force/2.<br><br>I will try to modify the code to deal with your situation. <br><br></td></tr></table><br>
<a name="322004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> heavy objects will have a higher terminal velocity than light objects. Therefore, heavy objects will fall faster in air than light objects. <br></div><br>I think you're slightly misguided, it's nothing to do with the objects weight it's to do with the amount of drag it causes. If you could have a feather that is the size of a football pitch that weighed over a tonne and a bowling ball... the bowling ball would fall faster. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
