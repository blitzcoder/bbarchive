<!DOCTYPE html><html lang="en" ><head ><title >Blitz inbuild functions much faster than thought</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitz inbuild functions much faster than thought</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Blitz inbuild functions much faster than thought</a><br><br>
<a name="540458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lo-tekk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Again i stumbled over a little function for calculating distance without the need for a sqr-call. I always thought that these little functions would be computed faster, but here's the code:<br><pre class=code>
Graphics3D 800,600

pivot_01 = CreatePivot()
pivot_02 = CreatePivot()

starttime = MilliSecs()

For i=1 To 10000

	PositionEntity pivot_01, Rand(-10000,10000),0,rand(-10000,10000)

	dist = EntityDistanceXZ(pivot_01,pivot_02)	
	
	;dist = EntityDistance (pivot_01,pivot_02)

Next

Text 0,0,MilliSecs() - starttime

Flip

;*********************************************************************************
;*** This calculate the 2d distance*distance on y axes 
;*** 
;*********************************************************************************
Function EntityDistanceXZ(Entity1,Entity2)
	p#=EntityX(Entity2)-EntityX(Entity1)
	q#=EntityZ(Entity2)-EntityZ(Entity1)
	Return (p*p)+(q*q)
End Function
</pre><br>That's happening when you "optimize" your code :-)<br><br>-------------------------<br>www.moonworx.de <br><br></td></tr></table><br>
<a name="540480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, thats great and all, but by optimize do you mean break?  Because, your function returns the incorrect answer.  Sqr is necessary to calculate distance correctly (although there are some approximations that do not use sqr).<br><br>You can do this sometimes, but usually only when comparing to another distance that wasnt sqrooted.<br><br>&lt;edit&gt;ah, nvrmind.  I dont have b3d on this computer (just bmax on a flash drive).  I guess you mean that entity distance is faster than your algorithm without even using a sqr? <br><br></td></tr></table><br>
<a name="540706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lo-tekk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  I guess you mean that entity distance is faster than your algorithm without even using a sqr?  <br></div><br>Right, that was the point. For my current needs an aproximation to the real distance was sufficient, but Blitz runs nearly three times faster.<br><br>-------------------------<br>www.moonworx.de <br><br></td></tr></table><br>
<a name="540735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Probably because you have to call 4 Entityblah() functions rather than looking the values up directly. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
