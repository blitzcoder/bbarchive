<!DOCTYPE html><html lang="en" ><head ><title >EntityOrder</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >EntityOrder</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >EntityOrder</a><br><br>
<a name="410453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lordon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im using something built with maplet(inside of a a building). inside the game, ive got the arrow and the bow on the screen with the same code i used for outside the building. i run it... and the bow AND arrow isn't there!<br><br>so i change the entity order of both of them to: -1<br><br>fixed it, except now, when the arrow is fired, and it goes through the building, it doesn't disapear... it just shows it going and going until it's out of range for viewing.<br><br>im assuming this is because of the EntityOrder command, i just don't know how to fix it... any ideas? <br><br></td></tr></table><br>
<a name="410465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> entity order tells the engine where it should draw the geometry, kind of like Photoshop Layers. What you did is, you told the engine to draw the bow and arrow in front of everything else so the arrow never disappears behind objects despite the fact that its still moving in 3D space.<br><br>Since I don't code in blitzbasic I don't know what the default entity order settings are.<br><br>What I use Entity order for are things like 3D HUDS and UI's built in 3dsmax that I want attached to the camera and drawn in front of everything else. Or things like the sky which I don't want to be invinately large so its attached to the camera and has the entity order set to allway draw first behind everything else in the scene.<br><br>can be used for all sorts of things if you use a little imagination. You shouldn't really need to use entityorder for the bow and certainly not the arrow, which you will want to have bass behind objects in your scene. <br><br></td></tr></table><br>
<a name="410467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lordon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, thank you. do u know a better way to make the arrow appear? the maplet program is placed in front of the arrow, i just don't know of a better way to make it appear... <br><br></td></tr></table><br>
<a name="410469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Post your code so that we can see where the problem lies. <br><br></td></tr></table><br>
<a name="410476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lordon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Graphics3D 800,600,16,0<br><br>Const CollisionType_Camera = 1<br>Const CollisionType_Level = 999<br><br>Collisions CollisionType_Camera,CollisionType_Level,2,2<br>Collisions ArrowT,CollisionType_Level,2,1<br><br>Global Mouse_X_Speed#<br>Global Mouse_Y_Speed#<br>Global Camera_VelX#<br>Global Camera_VelZ#<br>Global Camera_Pitch<br>Global Camera_Yaw<br><br>Global arrow_in_air = False<br>Global shottimer = MilliSecs()<br>Global arrow_speed = 15<br><br>Global pum = LoadSound("bowfire2.wav")<br><br>SetBuffer BackBuffer()<br><br>light = CreateLight()<br><br>Global cam=CreateCamera()<br>CameraRange Cam,0.1,50000<br>PositionEntity cam,1,0.8,0.5<br>CameraZoom Cam,0.8<br>EntityType cam,CollisionType_Camera<br>EntityRadius cam,0.1<br><br>Global weapon2 = LoadMesh("bow.3ds")<br>weapon_tex2 = LoadTexture("Bow_tex.bmp")<br>EntityTexture weapon2,weapon_tex2<br>ScaleEntity weapon2,1,1,1<br>EntityOrder weapon2,-1<br><br>Global arrow = LoadMesh("arrow.b3d")<br>EntityType arrow,ArrowT<br>ScaleEntity arrow,1.2,1.2,1.2<br>RotateEntity arrow,0,180,0<br>EntityRadius arrow,0.1<br>EntityOrder arrow,-1<br><br>world = LoadMesh("InnerCityHall.b3d")<br>EntityType world,CollisionType_Level<br>PositionEntity world,0,0,0<br><br>While Not KeyHit(1)<br><br>	UpdateWorld<br>	RenderWorld<br><br>	Text 0,10,"X: " + EntityX(cam)<br>	Text 0,25,"Y: " + EntityY(cam)<br>	Text 0,40,"Z: " + EntityZ(cam)<br>	<br>	Text 400,0, "Health" + health<br><br>	Flip<br>	<br><br>	PositionEntity cam,EntityX(cam),0.8,EntityZ(cam)<br>	<br>	Proc_UpdateGame()<br><br>Wend<br><br>Function Proc_Freelook(CamEntity,Velocity#,Speed#)<br>	Mouse_X_Speed#=MouseXSpeed()*0.5<br>	Mouse_Y_Speed#=MouseYSpeed()*0.5<br><br>	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2<br>	Camera_Pitch=Camera_Pitch+Mouse_Y_Speed#<br>	Camera_Yaw=Camera_Yaw+Mouse_X_Speed#<br><br><br>	RotateEntity CamEntity,Camera_Pitch,-Camera_Yaw,0<br><br>	If KeyDown(203) Then <br>		Camera_VelX=Camera_VelX-Speed#/100000<br>	ElseIf  KeyDown(205)<br>		Camera_VelX=Camera_VelX+Speed#/100000<br>	EndIf <br>	If KeyDown(208) Then <br>		Camera_VelZ=Camera_VelZ-Speed#/100000<br>	ElseIf  KeyDown(200)<br>		Camera_VelZ=Camera_VelZ+Speed#/100000<br>	EndIf<br>	<br>	Camera_VelX=Camera_VelX/velocity#<br>	Camera_VelZ=Camera_VelZ/velocity#<br>	MoveEntity CamEntity,Camera_VelX,0,Camera_VelZ<br><br>	If KeyDown(200) Then<br>		MoveEntity CamEntity,0,0,Speed# / 20<br>	EndIf<br><br>	If KeyDown(208) Then<br>		MoveEntity CamEntity,0,0,-Speed# / 20<br>	EndIf<br><br>	If KeyDown(205) Then<br>		MoveEntity CamEntity,Speed# / 20,0,0<br>	EndIf<br><br>	If KeyDown(203) Then<br>		MoveEntity CamEntity,-Speed# / 20,0,0<br>	EndIf<br>End Function<br><br>Function Proc_UpdateGame()<br>	Proc_Freelook(Cam,1.05,0.5)<br>	<br>	RotateEntity weapon2,EntityPitch(cam),EntityYaw(cam)+5,0,EntityRoll(cam)<br>	PositionEntity weapon2,EntityX(cam)+Sin(EntityYaw(cam)),EntityY(cam)-1,EntityZ(cam)-Cos(EntityYaw(cam))<br>	MoveEntity weapon2,-16,0,0<br>	MoveEntity weapon2,0,0,24<br>	<br>	If MouseHit(1) Then<br>		If arrow_in_air = False<br>			PositionEntity arrow,EntityX(weapon2),EntityY(weapon2),EntityZ(weapon2)<br>			RotateEntity arrow,EntityPitch(weapon2),EntityYaw(weapon2),EntityRoll(weapon2)<br>			PlaySound(pum)<br>			arrow_in_air = True<br>			ShowEntity arrow<br>			ShotTimer = MilliSecs()<br>			arrow_hit = False<br>		End If<br>	End If<br>	<br>	If arrow_in_air = False<br>		PositionEntity arrow,EntityX(weapon2),EntityY(weapon2),EntityZ(weapon2)<br>		RotateEntity arrow,EntityPitch(weapon2),EntityYaw(weapon2),EntityRoll(weapon2)<br>	End If<br>	<br>	<br>		MoveEntity arrow,0,0,arrow_speed<br><br>	;If EntityCollided(arrow,CollisionType_Level)<br>	;	PositionEntity arrow,-5000,-5000,-5000<br>	;End If<br>	<br>	<br>	<br>	<br>	If MilliSecs() &gt; ShotTimer + 2000<br>		arrow_in_air = False<br>		ShowEntity Arrow<br>	End If<br><br>End Function <br><br></td></tr></table><br>
<a name="410478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> First you can avoid all of this:<pre class=code>RotateEntity weapon2,EntityPitch(cam),EntityYaw(cam)+5,0,EntityRoll(cam) 
PositionEntity weapon2,EntityX(cam)+Sin(EntityYaw(cam)),EntityY(cam)-1,EntityZ(cam)-Cos(EntityYaw(cam)) 
MoveEntity weapon2,-16,0,0 
MoveEntity weapon2,0,0,24 </pre>by just parenting weapon2 to the camera.<br><br><br>In this part:<pre class=code>If MilliSecs() &gt; ShotTimer + 2000 
arrow_in_air = False 
ShowEntity Arrow 
End If </pre>You probably meant for ShowEntity to be HideEntity.<br><br><br>Every frame you set the arrow next to the bow:<pre class=code>If arrow_in_air = False 
PositionEntity arrow,EntityX(weapon2),EntityY(weapon2),EntityZ(weapon2) 
RotateEntity arrow,EntityPitch(weapon2),EntityYaw(weapon2),EntityRoll(weapon2) 
End If 


MoveEntity arrow,0,0,arrow_speed</pre>but then you move the arrow 15 units (arrow_speed) ahead.  Is this correct?  It doesn't appear to be.  This might be your problem.  Try changing that and rerunning it without the entityorder commands. <br><br></td></tr></table><br>
<a name="410481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lordon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> first part: yeah ill change that, thx<br><br>on the second part: no, actually i meant it to be ShowEntity, the reason being something i had to do awhile ago to make it work, but i found a better way. now i don't really need it anymore... <br><br></td></tr></table><br>
<a name="410482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wasn't done updating my post.  Read the last part. <br><br></td></tr></table><br>
<a name="410483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lordon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> i changed it to where it only moves the arrow forward when arrow_in_air = true, runs the same way:<br><br>when drawn normal, the arrow doesn't show at all, and when drawn last, the arrow is still shown after it goes through the wall<br><br>the code worked on my other level perfectly, but it's not working with the maplet level <br><br></td></tr></table><br>
<a name="410563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> CameraRange Cam,0.1,50000 <br></div>By the way, this is probably too extreme.  For better results, you should maybe set it to something similar to 1,5000.  But really, it depends on the units you are using.  Right now it looks like you are using a small scale since you are moving things around 10-25 units so you wouldn't want the first parameter to CameraRange to be so small (.1). <br><br></td></tr></table><br>
<a name="410707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah I found that extreme camera ranges causes graphics glitches, as Blitz precision goes off the wider the camera range so the larger the near and smaller the far the better. Otherwise you get more pronounced polygon Z sorting issues. Precision decreases the further away from the world origin you are, and its not recommended to have anything in your game further than 10,000 blitz units from 0,0,0 <br><br></td></tr></table><br>
<a name="410749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lordon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> i played around with it, and when i increase the small camera range, it makes teh walls disapear when the character walks through the hallway, i don't see a difference with the long camera range... <br><br></td></tr></table><br>
<a name="410759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> lissesul, probably because your level geometry is tiny. If it works then it works :) I was just pointing out one of blitz's problems that relates to the camera ranges. If you use a viewer like the B3D viewer in pipeline which lets you specify ranges you can see the effects pretty easily.<br><br>you should check what scale your level geometry is built to. I have mine as 1 blitz unit = 1 meter. So the largest level I can do would be about 10 kilometers, not that I'll be doing one that large. But my current level I'm working on is 500x500 meters and has the camera set to 1:500<br><br>you should really try an fit your camera range to the scale of your level as longer ranges can slow thing down and cause visual glitches, same with fog etc.<br><br>also sometimes gometry cn load up with the normals cacing the wrong way so the model is infact insid out, surprisingly it can sometimes be hard to tell lol. <br><br></td></tr></table><br>
<a name="410937"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lordon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> could it be something to do with maplet? because the arrow and bow both showed up fine on the outdoor level made with TerraEd <br><br></td></tr></table><br>
<a name="410968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try narrowing down the problem.  For instance, use the exact same code you are using now, but don't load the map and then see if you can see the bow and arrow.<br><br>Or try 'holding' the bow or arrow furthur from the camera and see if they then show up.<br><br>Or try rotating the bow and arrow around their axis a little bit every frame (for testing purposes) to see if something happens.<br><br>Or try a camerarange of something like .01/100 just to see if the bow and arrow are being clipped by the longer camerarange. <br><br></td></tr></table><br>
<a name="411180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lordon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i took out the maplet world, and they both showed up...<br>i parented the bow further from the bow, with the maplet level loaded, and neither the bow or arrow showed up. i spun the bow a little bit every frame, and neither showed up, i lowered the camerarange to .01,100 and neither showed up... =/<br><br>it seems to me that the maplet world is drawn over the arrow and bow... the only way that i know of to change that is the EntityOrder command, but, like i said before, that makes the arrow be drawn in front of the wall, even after the arrow passes through it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
