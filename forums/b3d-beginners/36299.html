<!DOCTYPE html><html lang="en" ><head ><title >Converting an Image to a texture</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Converting an Image to a texture</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Converting an Image to a texture</a><br><br>
<a name="397196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do I convert an image loaded into Blitz into a texture?<br><br>This is what I want to do:  I want to take the texture from a mesh convert it into an image, add a bullet hole, convert it back to a texture and apply it to the mesh.<br><br>I've been trying to add a bullet hole to a mesh for over a week and nothing seems to work.  I've tried sprites but when the mesh is animated (falling down) the sprite hangs in mid air above the mesh.  I thought image drawing might work but I can't use the image as a texture directly and saving it to disc would slow down my game too much.  It all has to happen in a fraction of a second.<br><br>Thanks <br><br></td></tr></table><br>
<a name="397197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>SetBuffer TextureBuffer(texture)
DrawImage imgBullet,X,Y
SetBuffer BackBuffer()</pre> <br><br></td></tr></table><br>
<a name="397198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do I apply the texture back to the mesh?  When I apply the texture back to the mesh the bullet hole (bh) doesn't show up.  What am I doing wrong?<br><br>Here's my code:<br><br>If MouseHit(1) Then<br>	bodtex=LoadTexture("Body.jpg")<br>	bh=LoadImage("bh.bmp")<br>	SetBuffer TextureBuffer(bodtex)<br>	DrawImage bh,MouseX(),MouseY()<br>	SetBuffer BackBuffer()<br>	EntityTexture m,bodtex<br>EndIf<br><br>Thanks <br><br></td></tr></table><br>
<a name="397203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> you're drawing the bullet hole at the wrong coordinates, i'd say.<br><br>MouseX() and MouseY() are most likely returning values which lie outside the boundaries of the texture. <br><br></td></tr></table><br>
<a name="397210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried 0,0  100,100  200,200  300,300  400,400  500,500 and I changed the bh image to an 800,600 black image so if it worked I would be able to see it no matter were it is.  But it still doesn't work.  What else can I try.  Can I save the altered texture to an image file?  That way I can inspect it more closely.<br><br>All this worked great when I was using 2D image commands but I couldn't use the image as a texture without first saving it to a file.  Is there a way to convert an image directly to a texture from within Blitz3D?<br><br>Thanks <br><br></td></tr></table><br>
<a name="397216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use CopyRect to copy part/all of an image to a texture (and vice versa).<br><br>It won't copy alpha data though (no alpha channel in 2D images). <br><br></td></tr></table><br>
<a name="397233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That worked but the texture no longer fits the mesh.<br><br>If MouseHit(1) Then<br>	bodtex=LoadImage("Body.jpg")<br>	bh=LoadImage("bh.bmp")<br>	bod=CreateTexture(600,600)<br>	SetBuffer ImageBuffer(bodtex)<br>	SetBuffer TextureBuffer(bod) <br>	DrawImage bodtex,0,0<br>	DrawImage bh,MouseX(),MouseY()<br>	CopyRect(0,0,600,600,0,0,ImageBuffer,TextureBuffer)<br>	EntityTexture m,bod<br>EndIf<br><br>Thanks <br><br></td></tr></table><br>
<a name="397250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> A 600x600 texture will be automatically resized to 1024x1024 internally.  That's probably why your texture coordinates are off. <br><br></td></tr></table><br>
<a name="397251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> So then how do I fix it?<br><br>I'll never understand why something that should be so simple has to be so difficult!<br><br>Thanks <br><br></td></tr></table><br>
<a name="397252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Video cards require textures to be powers of two.  Always have and probably always will.  I don't mean to offend, but this Game Development 101 material here.<br><br>The solution would be to resize your texture to be a power of two. <br><br></td></tr></table><br>
<a name="397275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess you can tell I'm new to 3D programing.<br>Thanks <br><br></td></tr></table><br>
<a name="397355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> We all were at one time.  :)  Stick with it,  it gets easier... <br><br></td></tr></table><br>
<a name="397876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Video cards require textures to be powers of two. Always have and probably always will. <br></div><br><br>Umm...textureRect? The only downside to a non power of 2 texture is your uvs are mapped in real pixel space, rather than 0 to 1.<br><br>(B3d can't use 'em, but video cards do support them, and now.) <br><br></td></tr></table><br>
<a name="398015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> If by "B3D" you mean "Blitz3D", that's incorrect.  It does support them but it stretches them internally to the proper size.<br><br>Non-powers of two is not something that is widely supported on the hardware end.  We aren't even contemplating using it at Epic ... for the next 2 or 3 foreseeable games, we're sticking with power of two textures. <br><br></td></tr></table><br>
<a name="398020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well it's not really using textureRect(The gl/nvidia term for it..no idea what dx calls them), it's just rescaling the image data to be power of 2, then using a normal texture.(I think..)<br><br>Btw, why not use them at epic? I mean unreal24k made my g5 work hard, so it's not like really old cards can run it anyway? Unless non power of 2 texture's is a very new addition..but the nvidia specifc extension is dated 2000. before the g2. Ati support no good? (I plan on using them for vivid, not just being pedantic..) <br><br></td></tr></table><br>
<a name="398072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I mean unreal24k made my g5 work hard, so it's not like really old cards can run it anyway? <br></div><br>Well, yeah, actually they can.  Turn the details down and UT2k4 will run on as low as a Voodoo3.  It won't be pretty, but it will run.<br><br>As for using them, well, the artists are so used to powers of two at this point there's really no compelling reason to change... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
