<!DOCTYPE html><html lang="en" ><head ><title >Encrypting\Decrypting data in .txt and .dat files</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Encrypting\Decrypting data in .txt and .dat files</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Encrypting\Decrypting data in .txt and .dat files</a><br><br>
<a name="390633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >3DFish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to encrypt files in my game.<br>The files are highscores, game save data, etc..<br><br>I'm using the XOR method.<br>Encryption and decryption works fine with one line of text.<br>But as soon as I try to encrypt\decrypt a complete file with text, some characters are missing.<br>The characters get thrown away when I decrypt the file again.<br><br>Example of encrypting a string:<br>s$="Try encrypting this"<br>encrypt_string$=""<br>key$="a"<br><br>For i = 1 to Len(s)<br>    char$=Mid(s,i,1)   <br>    encrypt_string=encrypt_string+Chr(Asc(char) + Xor Acs (key))<br>Next<br><br>I open a file, and read one line of text.<br>Then I call the above encrypt function.<br>I do this line for line.<br>I save the encrypted file.<br><br>The problem starts when I open the encrypted file and read<br>it line for line.<br>I call the above encrypt function.<br>Now the file is smaller in size &amp; some characters are missing.<br><br>Maybe i'm not using the correct encrypt method? <br><br></td></tr></table><br>
<a name="390641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you even get that running? You can't have an Xor after a +, they are both operators. <br><br></td></tr></table><br>
<a name="390717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't forget the ASCII codes only range 0 to 127, if the Xor'ed number is outside this range, you probably will lose some of the characters in the string.<br><br>A better method might be to convert each character into an integer value something like this:<br><br><pre class=code>
For i = 1 to Len(s$) 
encrypt_integer=Asc(Mid$(s$,i,1)) Xor Asc(key$)
; Save integer to file here
Next
</pre><br><br>Then save each integer instead of lines of strings. When you decrypt it just reverse the process, something like decrypted$=decrypted$+Chr$(encrypted_integer) Xor Asc(key$). The downside to this is an integer will take up four bytes whereas one ASCII character only takes up one byte, so the resulting file will be four times larger using integers.<br><br>Note, you will also have to either save an integer describing the final size of each string, or use a sequence of characters to show the end of each string, if each of the strings are to remain seperate. <br><br></td></tr></table><br>
<a name="390861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That was in the old days, now all 256 are legal ASCIIs.<br><br>Ціъб <br><br></td></tr></table><br>
<a name="390961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >3DFish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> eBusiness <br>How do you even get that running? You can't have an Xor after a +, they are both operators. <br><br>--------<br>Sorry my mistake.<br>The + is a typo...<br><br>---<br>Thanks VIP3R<br>I'll try the interger method this afternoon. <br><br></td></tr></table><br>
<a name="390962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>That was in the old days, now all 256 are legal ASCIIs.<br> <br></div><br>I feel old now ;) <br><br></td></tr></table><br>
<a name="391002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'a typo'??? Ever heard about copy/paste? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
