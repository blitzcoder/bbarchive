<!DOCTYPE html><html lang="en" ><head ><title >help with sprite engine!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >help with sprite engine!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >help with sprite engine!</a><br><br>
<a name="230596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, those who have seen my posts realize ive only been doing this for a week. Enough said, Im stumped with a particle engine I am trying to write. Im in the experimental stage, so some of the variables arent used yet. So far, Im trying to make the sprites travel a certain distance. Even though i have a dist# of 2, the sprites seem to be going forever. Even though I have a sprite creation total of 2 (numSprite), again it seems like infinity of sprites. Here is the code:<br><br><br>Graphics3D 800,600,32,2<br>SetBuffer BackBuffer()<br><br>AmbientLight 255,255,255<br><br>camera = CreateCamera()<br>PositionEntity camera, 0,0,0<br><br>Global particle_Img, particle_Spr; particle engine<br><br>Type particle<br>	<br>	Field ent 		;reference created sprite<br>	Field scale#		;sprites scale<br>	Field dist#		;sprites distance to travel<br>	Field speed# 		;sprites speed<br>	Field x#, y#, z#        ;initial location of sprite<br>	<br>End Type <br><br>flag = 1; flag to enable particle creation one time<br><br>While Not KeyDown(1)<br><br>particleEffects ("fire.bmp",flag, 2, 0.5, 2, 10, 0, 0, 10)<br>;release some particles<br><br>	UpdateWorld<br>	RenderWorld<br>	<br>	Flip<br>Wend<br>End<br><br><br>Function particleEffects (img$, flag, num_Particles,speed#, dist#, scale#, x#, y#, z#)<br>	<br>;img$ = filename<br>;flag = first time creating? <br>;num_particles = number of total particles<br>;speed# = particles speed <br>;dist# = distance to travel : scale# = particles scale<br>;x#,y#,z# = initial x,y,z location<br>	<br>If flag = 1	<br>    particle_Img = LoadTexture (img)<br>    particle_Spr = CreateSprite ()<br>    EntityTexture  particle_Spr, particle_Img<br>    ScaleEntity    particle_Spr, scale#, scale#, scale#<br>    PositionEntity particle_Spr, x#, y#, z#<br>	<br>For i = 1 To num_Particles<br>    particle.particle = New particle<br>    particle\ent = CopyEntity (particle_Spr)<br>    particle\x# = x# : particle\y# = y# : particle\z# = z#<br>    particle\scale# = scale#<br>    particle\dist#  = dist#<br>    particle\speed# = speed#<br>Next <br>			<br>For particle.particle = Each particle<br><br>MoveEntity <br>particle\ent, particle\dist#,particle\dist#, particle\dist#<br>					<br>Next<br>		<br>flag = 0 <br>				<br>EndIf<br><br>End Function<br><br><br>-----------------------------------------------------<br>sorry for the mess, I dont know how people post code so well :) the code looks better on my screen :) <br><br></td></tr></table><br>
<a name="230617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hum...<br><br>One thing comes in my mind.<br><br>You create a particle with<br><pre class=code>
particle_Spr = CreateSprite () 
</pre><br>so this particle will always be there, because you don't delete it.<br>Later, you copy this particle with<br><pre class=code>
particle\ent = CopyEntity (particle_Spr) 
</pre><br>Instead, I would do this:<br><pre class=code>
For i = 1 To num_Particles 
particle.particle = New particle 
particle\ent = createsprite() 
EntityTexture particle\ent, particle_Img 
ScaleEntity particle\ent, scale#, scale#, scale# 
PositionEntity particle\ent, x#, y#, z# 
</pre><br><br>More, if you call the function &lt;particleEffects&gt; at each loop, then you will create always num_Particles particles each time, that's why you will have an *huge* number of particles in a few moment.<br><br>I've noticed you use a flag to determine if the function should create the sprites or not; unfortunately, you did not declared that flag as Global, so when you think that inside the function flag is set to 0, in reality you set a local variable to 0, and the scope of that variable is only inside the function; the 'flag' variable that you use in the main loop, will not be affected by the setting done in the function. So, all the time you call that function, the flag value will always be 1, because the function does not change it, since it's not declared as global.<br>Instead, if you declare flag as a global variable, then your function &lt;particleEffects&gt; will indeed change its value.<br><br>Another way to do what you did, is:<br>(outside the main loop)<br>Global flag = 1<br>(inside the main loop)<br><pre class=code>
if flag = 1 then
particleEffects()
flag = 0
endif
</pre><br><br>Remember also, if you want to delete the sprite, you have to:<br>- delete each sprite individually<br>- THEN delete the type element which holds that sprite<br><br>Example:<br><pre class=code>
for particle.t_particle = each t_particle
freentity particle\ent ;frees the sprite
delete particle ;delete the type element
next
</pre><br><br><br>More, I usually call the type structure and the type pointer with different names:<br><pre class=code>
type T_particle
.
end type
Global particle.T_particle
</pre><br><br>Hope this has sense for you,<br>Sergio. <br><br></td></tr></table><br>
<a name="230625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks sergio, I will try this tommorrow. Its kinda late here 3:34am. I read over your feedback and it does make sense. Now I have something to work with :) thanks! <br><br></td></tr></table><br>
<a name="230641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Ok, those who have seen my posts realize ive only been doing this for a week. <br> <br></div><br><br>Dont worry about it. You should see the amount of really simple questions I have asked (and still do) <br><br>I have also found, that a lot of more efficient coding given as examples isn't as clear as less efficient, and more spaced-out code. In time, it gets easier to see what's going on.<br><br>Compared to me, you're doing really well for one week. I didn't dare approach Types for a couple of months :) <br><br></td></tr></table><br>
<a name="230853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well most of this stuff isnt that hard for me since I used Actionscript for a year or so. Actually I find a lot of similarities, though I think some of blitz code is a bit awkward. In actionScript, you would declare and object like this:<br>hero = new Object();<br>hero.x = 20;<br>hero.y = 40;<br>hero.lives = 2;<br><br>etc....<br>i kinda like that format better since it is less confusing. When you are doing stuff like this:<br>For particle.T_particle = each T_particle <br>particle\x = 20<br>particle\y = 40<br>particle\lives = 2<br>next<br><br>anyway. I dont like the slash format and i think the for/each loop was a bit hard to grasp. only because it looks very awkward. I know how to apply it in code now, but it still does not make sense to me. Im not sure if *each T_particle* refers to every single object in that group. For instance:<br><br>particle.T_particle = new T_particle<br>redglow.T_particle  = new T_particle<br>yellowGlow._T_particle = new T_particle<br><br>now, When you have all these references to T_Particles, I dont understand the Each loop. Unless, It is bassically saying for Every particle.T_particle in the particle.T_particle reference? Logic tells me this is how its interpreted. But still, awkward.<br><br>Ok Im making myself a bit nuts. :) <br><br></td></tr></table><br>
<a name="230855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually on the type note. I dont understand why its not like this:<br><br>particle = new T_particle<br>particle.x = 50<br>particle.y = 20<br><br><br>this looks so much cleaner, and particle just references the T_particle type.  where the slash in particle\y = something.... is beyond me. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
