<!DOCTYPE html><html lang="en" ><head ><title >maskimage and scaleimage problems</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >maskimage and scaleimage problems</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >maskimage and scaleimage problems</a><br><br>
<a name="489377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D_Town_Tony</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The 2D images I am using for the menus and such are at 800x600, when I scale them to fit 640x480 when the screen resolution is changed not all the maskimage works, somo of it still shows, any way around this? <br><br></td></tr></table><br>
<a name="489427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try<br>TFormFilter 0 <br><br></td></tr></table><br>
<a name="489493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D_Town_Tony</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did that and it works but the images become choppy, any other work arounds or suggestions <br><br></td></tr></table><br>
<a name="489566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, scaling a 800x600 image down to 640x480 is going to result in loss off some pixel data from the original image - end of story. :) Bi-linear filtering attempts to reduce the visible effect of this but, as you've said, it knackers some transparent pixels.<br><br>Can't you just make 2 copies of the images (one 800x600 and one 640x480) and load in the appropriate one? <br><br></td></tr></table><br>
<a name="489755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Theoreticly you could use a "maskcolor range", so you would manually repaint all pixels that are within the mask color range. The problem with this method is: the contours of the masked object will be antialiased when scaled with filters on, so there may be color tones that are outside the mask color range, but still should be masked. Well you can try it.<br><br>Let's assume your mask color is black. So make sure all the visible Pixels are brighter than about 15,15,15. after scaleing you would do something like this:<br><br><pre class=code>
mask_color=$000000 ; black

setbuffer imagebuffer(img)
lockbuffer()
for j=0 to imageheight(img)-1
 for i=0 to imagewidth(img)-1
  rgb=readpixelfast(i,j) and $FFFFFF 
  bri=(((rgb shr 16) and $FF) + ((rgb shr 8) and $FF) + (rgb and $FF))/3
  if bri &lt;=15 then writepixelfast i,j,mask_color
 next
next
unlockbuffer()
setbuffer backbuffer()
</pre><br><br>I am not sure if a range of 15 will be enough to catch all filter nuances. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
