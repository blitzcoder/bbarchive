<!DOCTYPE html><html lang="en" ><head ><title >I need help- Finding the direction of a moving obj</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >I need help- Finding the direction of a moving obj</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >I need help- Finding the direction of a moving obj</a><br><br>
<a name="474608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Everybody,<br><br> Ok, I have no hair left as I have yanked it all out trying to figure this out, now I am left with my own stupidity.<br><br> How can I find the direction of an object? An example would be- I have my charcater walking down a hallway, an object shoots out from a wall from his left. <br><br> Now, how do I determine that the object came from his left, then have my character "bump right" as a result from a hit to the left?<br><br>Ugh! Any help would be GREATLY appreciated. <br><br></td></tr></table><br>
<a name="474696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The object coming from the left - or wherever - will have a motion vector i.e. the amount you're moving the object each time in the X,Y,Z directions. Just add that vector (or a fraction of it) to you're character's X,Y,Z movement when a collision occurs. <br><br></td></tr></table><br>
<a name="474698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Forgive my lack of experience, but was is the Syntax to find the Motion Vector?<br><br>thanx <br><br></td></tr></table><br>
<a name="474701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was a bit unclear. :) What I mean is: somewhere in your code you're moving the object coming from the left with MoveEntity ent,x,y,z or whatever, right? Well, take those x,y,z values and add them to your character's movement when a collision occurs. <br><br></td></tr></table><br>
<a name="474705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanx for your help big10p. But I need a little more clarification.<br><br>Ok your right, I can add the x value of my object moving to the left, but what if my character is making his way back through the hallway...now the object is hitting him from the right.<br><br>What I am trying to figure out is, no matter what angle my character is hit by, I need him to move accordingly. <br><br>So actually, the x and the z values would change, but depending on how the character is pushed. Is there an easy way to handle this no matter the case?<br><br>:::perfect world:::<br>MotionVectorEntity (wall_object)= left-right-forard-back<br>:::end perfect world:::<br><br>Does B3D have a command(s) that can determine this?<br><br>thanx again. <br><br></td></tr></table><br>
<a name="474712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, it's difficult for me to say exactly how best to handle this as I don't know what method you're using to move things around in your game with. Specifically, if you're using global movement (TranslateEntity) or local movement (MoveEntity), or a combination of the two. :)<br><br>Basically, a solution may involve having to convert the motion vector of the object coming from the left, into the character's coordinate space. This can be done using the TFormVector command. It's not as difficult as it may sound and will ensure your character is pushed in the correct direction, regardless of which direction he/she/it is hit from. <br><br></td></tr></table><br>
<a name="474715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can also use the command TranslateEntity to move the pushing object.<br>This way the vectors are in a global scale, so they do not depend on the direction your pushing object is pointing.<br><br>When the pushing object hits your player character, then also use TranslateEntity on your character with the same values as the pushing object.<br><br>This way the character will be pushed in the direction that the pushing object is moving, without any interference by the direction either object (pushing object or character) is facing.<br><br>Imagine a cube that's located at coordinates -5, 0, 0.<br>So in 3D space this object is located a bit to the left from the center of 3D space.<br>This cube is your pushing object.<br><br>Then your player is located at 0, 0, 0, facing any direction.<br><br>You Translate that cube to the right:<br><pre class=code>
TranslateEntity cube, 0.1, 0, 0
</pre><br>When it hits your player character, also do:<br><pre class=code>
TranslateEntity Player, 0.1, 0, 0
</pre><br>This way both the cube and player are moving the same global direction, as seen from the 3D space center.<br><br>See the TranslateEntity command documentation for further details. <br><br></td></tr></table><br>
<a name="474855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simple, maybe long-winded solution?<br><br>Would it be possible to have say 4,6 or more Pivot objects around your entity and check for collision with these?<br><br>The Pivots could perhaps be named 'Up', 'Down' 'Left' etc. Dunno, just a basic approach to the problem! <br><br></td></tr></table><br>
<a name="474859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK... I posted this on another thread....<br><br>Personally I use a pivot to deal with forces I find it much easier to move things around etc. This way you don't need to worry about a whole load of stuff and it just works!<br><br>EG:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics3D 640,480

PlayerPhysicsPivot = CreatePivot()
Player = CreateCube()

Middle = CreatePivot()


Camera = CreateCamera()

PositionEntity camera,0,50,0
PointEntity camera,middle

; amount of force to apply to entity
Force# = 0.2

Repeat


	If KeyDown(200) Then TranslateEntity PlayerPhysicsPivot,0,0,Force#
	If KeyDown(208) Then TranslateEntity PlayerPhysicsPivot,0,0,-Force#
	If KeyDown(203) Then TranslateEntity PlayerPhysicsPivot,-Force#,0,0
	If KeyDown(205) Then TranslateEntity PlayerPhysicsPivot,Force#,0,0
	
	; Drag, the 0.1 is how much drag, the higher the figure the more drag (from 0 to 1)
	PointEntity PlayerPhysicsPivot,Middle
	MoveEntity PlayerPhysicsPivot,0,0,EntityDistance(PlayerPhysicsPivot,Middle)*0.1
	
	TranslateEntity Player,EntityX(PlayerPhysicsPivot),EntityY(PlayerPhysicsPivot),EntityZ(PlayerPhysicsPivot)
		
	RenderWorld
	Flip
	
Until KeyHit(1)</textarea><br><br>This has the added bonus that if you want to apply wind for example you just move all the physics pivots in the wind direction.<br><br>Same Example with a wind pivot:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics3D 640,480

PlayerPhysicsPivot = CreatePivot()
Player = CreateCube()

Middle = CreatePivot()


Camera = CreateCamera()

; Add a wind pivot
Wind = CreatePivot()
TurnEntity Wind,0,Rand(359),0
MoveEntity Wind,0,0,Rnd(0,.1)

PositionEntity camera,0,50,0
PointEntity camera,middle

; amount of force to apply to entity
Force# = 0.2

Repeat


	If KeyDown(200) Then TranslateEntity PlayerPhysicsPivot,0,0,Force#
	If KeyDown(208) Then TranslateEntity PlayerPhysicsPivot,0,0,-Force#
	If KeyDown(203) Then TranslateEntity PlayerPhysicsPivot,-Force#,0,0
	If KeyDown(205) Then TranslateEntity PlayerPhysicsPivot,Force#,0,0
	
	; Add wind force
	TranslateEntity PlayerPhysicsPivot,EntityX(wind),EntityY(wind),EntityZ(wind)
	
	; Drag, the 0.1 is how much drag, the higher the figure the more drag (from 0 to 1)
	PointEntity PlayerPhysicsPivot,Middle
	MoveEntity PlayerPhysicsPivot,0,0,EntityDistance(PlayerPhysicsPivot,Middle)*0.1
	
	TranslateEntity Player,EntityX(PlayerPhysicsPivot),EntityY(PlayerPhysicsPivot),EntityZ(PlayerPhysicsPivot)
		
	RenderWorld
	Flip
	
Until KeyHit(1)</textarea><br><br>So where I've got the wind example above, you'd have your object coming from the side being handled by it's own physics pivot, then when the object collide you just get the positions of the physics pivots and just move your player physics pivot say half the xyz components of the other physics pivot, job done, your guy will automatically move/get shoved etc without doing anything more than moving a pivot.<br><br>So that's my cheat physics solutions to pretty much everything! <br><br></td></tr></table><br>
<a name="475399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome! <br><br>Thanks for the help everybody...I have a working example based on all input from the responses that I think will work.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
