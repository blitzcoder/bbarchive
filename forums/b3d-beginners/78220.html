<!DOCTYPE html><html lang="en" ><head ><title >Huge terrains and the Fire Service</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Huge terrains and the Fire Service</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Huge terrains and the Fire Service</a><br><br>
<a name="877109"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tim77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I work for a large metropolitan Fire Service in England, UK.<br>We were recently given some terrain data to have a play with (x,y and altitude) that covers our entire Fire Brigade area. <br><br>We’ve got some cool ideas what we can do with this stuff (calculating where chemicals will “run off” if dropped, flooding visualisations, 3D views of major sites, 3D tracking of fire trucks etc.) but we’ve only a small amount of 3D programming experience.<br><br>So… we’ve got a massive grid of 10,800 x 7200 points (which equates to a height measurement taken for every 5m square in our Brigade area).<br><br>For each point I get an indication of if it is grass/road/water/building etc as well, which might make things look even better. In the future I can get the floor plans and heights for all the buildings, but I think that might be getting ahead of myself...I’ll stick with just trying to generate some terrain for now!<br><br>I would like to retain as much of this “5 metre resolution” as possible around the camera so we can accurately model the chemical run-off as mentioned earlier. But as well I would like to be able to generate much bigger LOD-based landscapes as well for other applications.<br><br>Has anyone got any suggestions about how to get going with rendering a huge terrain like this? After reading plenty of threads in these forums I’m not too sure what the best way forward is. I think I’ll need the works… not sure of the terms, but shading, shadows, alpha-blending (is it?) etc… most importantly - not an insurmountable learning curve!<br><br>I’ve settled on Blitz3D as my weapon of choice for knocking up prototypes and quick apps (and I really enjoyed BB on the Amiga and fancied get back into it!). We have very little budget, and our PC’s are “reasonable”, but certainly not state-of-the-art game machines.<br><br>Any suggestions about a suitable engine (that is really easy to get going in Blitz3D!) or even any general tips would be really appreciated.<br><br>Thanks for your time.<br><br>Tim <br><br></td></tr></table><br>
<a name="877120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this you?:<br><div class="quote"> Tim Needham, of the West Midlands Fire Service, fought off several other top candidates to become 2006’s IT Professional of the Year.<br><br>The senior systems developer delivered his groundbreaking vision for an Integrated Risk Management Information System (Irmis) in May 2005. In its first year the system captured the details of more than 60,000 varied activities from 1,500 employees in richer detail than ever before, enabling the brigade to work more productively in ways that previously had not been possible.<br><br>Needham also consistently demonstrated an ability to use his technical talent to meet business objectives. For example, the exceptional quality of the user interface he developed for Irmis reduced the need for user training.<br><br>Needham was also singled out for his softer skills, including the ability to convey his ideas in a way that captures people’s imagination and inspires the organisation to action. <br></div><br><br>This seems a very large and complex project.  However, 'Blitzland' does have various terrain experts.<br><br>To set the ball rolling:<br><br>The size of the terrain will probably not matter as it could be split into chunks.  However, this project will certainly need a physics engine too and terrain splitting might then be problem.  I don't use any physics engines, so not to sure how much custom coding would be required.<br><br>What mesh format is this massive terrain in?  Any idea of the number of polygons/triangles in it?  What is the file-size of it (how much hard disk space does it take?). <br><br></td></tr></table><br>
<a name="877142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tim77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Puki,<br><br>Errm… never met the bloke, sounds a right clown... ;)<br><br>Haven’t got the final data just yet, but we’re told it ships as several huge (not sure of the exact size) comma-delimited text files (x,y,z).<br><br>I’m resigned to writing some intermediary conversion/processing stage.<br><br>Perhaps writing something that could process these filea and produce lots of imagemaps is the way to go? But then won’t that limit me to having 256 “terraces” (perhaps losing all the subtleties in the data?)<br><br>All-in it’s looking like 77million points though…not sure how to turn that into an exact triangle count, but guessing it’ll weigh in as more than that? Like you say I’m sure it’ll all need splitting into chunks, any ideas about optimal sizes and (physic issues aside for now!) how best to load them as-and-when needed?<br><br>Thanks<br><br>Tim <br><br></td></tr></table><br>
<a name="877454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mtnhome3d</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> split it into 256 sized imagemaps and use those for your chunks. <br><br></td></tr></table><br>
<a name="877481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Happy Sammy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Tim77,<br><br>It seems that "T.ED TERRAIN &amp; WORLD EDITOR" and "JV-ODE" could help the integration of terrain and physics.<br><br><a href="http://www.d-grafix.com/?page=ted" target="_blank">http://www.d-grafix.com/?page=ted</a><br><a href="http://www.freeforum101.com/forum/viewtopic.php?t=9&amp;highlight=jvode&amp;mforum=dgrafix" target="_blank">http://www.freeforum101.com/forum/viewtopic.php?t=9&amp;highlight=jvode&amp;mforum=dgrafix</a><br><br>:) <br><br></td></tr></table><br>
<a name="877499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Splitting it may be the way to go. But, i'd avoid using blitz terrains. Make your own terrains, out of a mesh. It may lack LOD, but it's far faster, as blitz terrains calculate LOD every frame, and you get some degree of vertices popping.<br><br>I'm concerned about the lack of accuracy though, you'll get using standard physics engines, for simulating water. Such things like pourus rocks, soil absorbing liquid, various land features altering the flow of liquid... etc etc. I don't think it will be a very accurate simulation.<br><br>For 3d tracking of fire trucks, it would be a good idea i guess though :o) <br><br></td></tr></table><br>
<a name="877558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I might be able to help you Tim77 if you havent got it going yet.  Email me GameMaker04@... <br><br></td></tr></table><br>
<a name="877587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tim77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow! Thanks for all the feedback on this… really appreciated!<br><br>I think I’m headed down the route of splitting everything into 256x256 chunks (thanks mtnhome3d!) but using meshes instead of terrains in light of Ross C’s comments (couldn’t agree more about your concerns regarding the quality of simulation by the way, I think I’ll be able to get more geological stuff later, along with building floor-plans… but even crude modelling will be better than the stuff we’ve got at the moment!)<br><br>I’ve downloaded the T.ED demo, and hope to get going with JV-ODE once I’ve got the mesh side of things up and running (whenever that might be!)… thanks Happy Sammy.<br><br>And thanks for the offer of help RifRaf.. I’ll send on my e-mail address now.<br><br>Tim <br><br></td></tr></table><br>
<a name="877642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are your data points in grid form Like squared paper?<br><br>Do you need vizualisation to be as accurate as the simulation itself? <br><br></td></tr></table><br>
<a name="877645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tim77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Andy,<br><br>We're supplied it as a big text file of x,y,height values on each line (which do equate to a big grid), <a href="http://www1.getmapping.com/webshop/Web/CommonPages/Main/Sample.aspx?product=nextmap&amp;dataset=dsm" target="_blank">more file format info here!</a><br><br>The vizualisation need not be as accurate as the simulation, but just to get going I was thinking trying to tackle vizualisation first, then moving on to simulation, whenever that might be! :)<br><br>Many thanks<br><br>Tim <br><br></td></tr></table><br>
<a name="877652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you doing a proof of concept or will you be doing the actual app in Blitz3D?<br><br>How well do you know Blitz3D?<br><br>How much memory and what OS does the target PC have?<br><br>What kind of simulation time are you looking for? <br><br></td></tr></table><br>
<a name="877666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tim77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Andy,<br><br>This started life as a proof-of-concept thing, with a view of pulling together a few demos together to generate some video frames to accompany other projects we have underway.<br><br>But the more I see of the work that goes on in these forums, the more ideas we have and moving to a real-time, game-like interface seemed a much cooler way to go!<br><br>I think we’ll tackle it bit-by-bit though, based on the feedback so far I’m thinking of concentrating on a “Command and Conquer” style for the visualisation (with quite a limited zoom-out ability to keep things feasible) running a mesh-based terrain. <br><br>Then onto (somehow?!) streaming the building data…:)<br><br>Then throwing some physics/simulation at it once things are taking shape…<br><br>This as a project is currently “off the books”, I’m coming at it very much as an enthusiast at the moment, but if the POC goes well I might try and make things more official.<br><br>As for my knowledge of Blitz3D… not much to be honest. <br>I’ve got the rotating-cubes/plane/light embarrassment of a first program behind me now… and become pretty familiar with the commands available. <br><br>I’ve got 10+ years of dull business programming to call upon (must be useful for something, surely?!), and I used Blitz Basic on the Amiga a fair bit… I’m hoping it’ll all come back ;)<br><br>Target PC’s are our work machines, no real 3D graphic cards to speak of, but if things go well I’ll ask them to invest  :)…<br><br>Current kit is:<br><br>HP Compaq NW8440<br>Intel Core Duo<br>2.16ghz, <br>3.37GB RAM<br><br>Running<br>Blitz3D V1.98<br>On: XP Service pack 2.<br><br>The simulation stuff could be done “off line”… there wouldn’t be any problems (if needed) to “drop” your chemical at a certain point (along with quantity, and other parameters), then have a progress bar pop-up while things are calculated, then a new mesh could be overlaid (glowing radioactive yellow or something?!). Obviously instantaneous stuff would be cool, and the physics stuff mentioned above certainly looks interesting and a great first step, but perhaps real-time fluid simulation might be outside the scope of a proof-of-concept for Version 1.0!<br><br>Kind regards<br><br>Tim <br><br></td></tr></table><br>
<a name="877761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The physx physics library can do fluid simulation, and the nice thing about using this engine would be that you can put a hardware acceleration card in and it speeds it up massively (and not too much cost either) <br><br></td></tr></table><br>
<a name="878017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ansys or COMSOL might be much more appropriate for your task of simulating reality.<br><br>Realtime physics libraries will at best "only" be nearly ugly wrong but never anywhere near reality with real circumstances and complex data. <br><br></td></tr></table><br>
<a name="878024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Neither B3D terrains, nor meshtiles are suited for your task. They are well suited for games, but not for simulation.<br><br>Use just one mesh with several layers of LOD(starting with full LOD), and then rebuild the mesh at regular intervals when needed. This would enable you to render one mesh(at LOD 5 perhaps), but at the same do the actual simulation on a high fidelity model(at LOD 0 perhaps), visualising it on the less accurate model.<br><br>In stead of storing the data in a single file, you could store each datapoint in a separate file, with height as well as all other data and references to the datapoints to the north, south, east and west. It would take much more nonvolatile memory, but would make it easier to expand the area of interest later.<br><br>The aim is to make a system which will not be hampered by artificial boundries like the area that your fire brigade covers etc, while rendering it with various levels of LOD.<br><br>I haven't done much fluid simulation, but I would probably simulate fluids by creating a number of particle emiters, emitting a large number of particles, and then model the path of the particles. <br><br></td></tr></table><br>
<a name="878194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tim77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>Thanks for all of this again!<br>I'll take a look at Ansys and COMSOL, it looks pretty in-depth from first impressions! Not sure we'll have the budget for some of that kit though! :(<br><br>Andy... I was wondering how best way to structure the data, just to check I've got the right end of the stick though... if we had 7 million datapoints, do you envisage having a structure containing 7 million seperate files? I can see that being a pretty flexible set-up (which is what we're after), have you had good results with anything similar?<br><br>Thanks again for all the feedback, itching to have a go now!<br><br>Might be a little while until we're doing stuff like this though ;-)<br><a href="http://www.youtube.com/watch?v=-AiLyQWXjIg" target="_blank">Blender fluid demo</a><br><br>Many thanks, once again!<br><br>Tim <br><br></td></tr></table><br>
<a name="878199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tim77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...and thanks boomboom... I spent quite a while looking at what people were doing with physx, it looks incredible, and if I read rightly, very cheap..!<br><br>Tim <br><br></td></tr></table><br>
<a name="878215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;if we had 7 million datapoints, do you envisage having a structure <br>&gt;containing 7 million seperate files?<br><br>At second thought scratch that. I was working from the approach of a custom system I designed and programmed a while ago. It had significantly more datapoints, and used an array of large disks, and data footprint was of no importance as the size of the data would never change. <br><br>the numbers are against this, as you are targetting an NTFS volume. It would be about 30 GB worth of data at 4096 bytes pr file, even though you are only using 5KB of each file.<br><br>You are propably better off having all 78000000 datapoints in one file which should weigh in at around 810MB on disk and in memory, but you can still build the mesh on the fly.<br><br>&gt; I can see that being a pretty flexible set-up (which is what we're <br>&gt;after), have you had good results with anything similar?<br><br>Well yes, but I really got ahead of myself when suggesting you use that approach. I made a one off program which had to deal with a very large set of datapoints for visualisation mainly, but some processing was required depending on the data and the visualisation. It was written in B3D and would load the data seamlessly when needed and rebuild the mesh when it ran out of datapoints in memory. <br><br></td></tr></table><br>
<a name="878287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> putting your datafile on one of these drives with a gig of ram would double the speed of reading the file.<br><br><a href="http://techreport.com/articles.x/9312/1" target="_blank">http://techreport.com/articles.x/9312/1</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
