<!DOCTYPE html><html lang="en" ><head ><title >Creating 1 listener?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Creating 1 listener?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Creating 1 listener?</a><br><br>
<a name="593142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it true you can only create one, uno, 1 listener??  So if I want more than 1 background sound am I going have to mix the sounds in a 3rd party program for it to work?<br><br>Please correct me if I'm wrong,<br>Chad <br><br></td></tr></table><br>
<a name="593159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you are confused on what a listener is.  A listener is the point in space where your sounds are being heard from.  You can have multiple sounds emanating from multiple places, but they are all going to be heard in one place (kinda sensible, yes?) <br><br></td></tr></table><br>
<a name="593700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> well if you could use two headphones (with diffrent sound) on one computer, it would make sense to have more than one listener. But since you have only one headphone plug, it makes sense to have only one virtual listener in virtual 3D space. Of course you may apply the listener to various locations/objects, so if the FPS Player is beamed by Scotty, the listener will be beamed too.<br><br>The only problem I see is: the falloff parameters etc. are declared with the listener. I'd rather like to see them as parameters for the 3D Sounds instead. But that's just the way it is (I think it's a DirectX thing). <br><br></td></tr></table><br>
<a name="593817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another question about this, is there a way to make an entity produce a sound.  Also, what can I do so that when you press a button, say 1 for example, that a sound is played from another entity?  I was looking at some examples so have examples, just need directions HOW to do it..<br><br>Thanks,<br>Chad <br><br></td></tr></table><br>
<a name="593854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>If KeyHit(2)
  EmitSound entity, sound
EndIf</pre>Any more questions? <br><br></td></tr></table><br>
<a name="594235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just one, I don't get what the entity is, I know it ties it to an object, but if I'm loading a sound what do I assign it too?  For reference here's the sound code I have.<br><br><pre class=code>
Load3dSound moo=("moo.wav")
If KeyHit(2)
 Emit Sound whatever, moo
EndIf</pre><br><br>I just don't know what to assign the entity too, and that's why the sound isn't loading is my guess.<br><br>Also, don't know if it matters, but it's before End, and Repeat, and all that good stuff.<br><br>Thanks for your help,<br>Chad <br><br></td></tr></table><br>
<a name="594270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> In your example 'whatever' has to be an entity.<br><br>An entity in Blitz3D is a mesh, so it could be a simple cube or a sphere or more practically it could be an enemy in your game or the players weapon.It could be a door, so when the door opens/closes you could emit an opening/closing sound and it would appear to be coming from the door.<br><br>When you load a sound in your example you are assigning it to 'moo' which is fine, that is where the sound is stored.<br><br>When you want the sound to play you emit it from a 3d entity in your game world and it will sound depending on how far away this entity is from the listener and in what direction.<br><br>Typically when you 'createlistener' you specify the camera as the parent, this means that the listener will move around with the camera which is usually what you want.<br><br>[Edit] in your example is should be<br><pre class=code>
Emit Sound moo,whatever
</pre><br>Please download this small demo I made for you it should make things clearer, media included.<br><br><a href="http://mysite.wanadoo-members.co.uk/shambler/emitsound.zip" target="_blank">http://mysite.wanadoo-members.co.uk/shambler/emitsound.zip</a> <br><br></td></tr></table><br>
<a name="594340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The example in the docs is very simple and shows the 3Dsound commands well...<br><br><a href="http://www.blitzbasic.com/b3ddocs/command.php?name=EmitSound&amp;ref=3d_cat" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=EmitSound&amp;ref=3d_cat</a> <br><br></td></tr></table><br>
<a name="594804"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the little demo Shambler, I really appreciate it, and it's pretty cool too.<br><br>The problem is not a listener anymore, but just getting the sound to play when I press a button..<br><br>I've toyed with it but just can't get it, and it's very frustrating.. <br><br>Also thanks Malice for the link, I appreciate everything you guys are doin for me :-)<br><br><pre class=code>moo=Load3DSound("moo.wav")
If KeyHit(2) 
EmitSound moo,cube
EndIf</pre><br>no sound and have cube within range :(<br><br>Thanks again,<br>Chad <br><br></td></tr></table><br>
<a name="594822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remove code until you have the simplest possible program which demonstrates your problem.  Post that.  We'll be able to verify your problem and find a solution.<br><br>Hint: you can likely demonstrate this problem in less than 15 lines. <br><br></td></tr></table><br>
<a name="594836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Octothorpe,<br>I did what you said to do and it worked.. Now trying in regular program..<br><br>Result:<br>Just as I suspected,  I had to create another listener, but I already had the main listener that I cannot get rid of, well, maybe I can try, trying a new idea..<br><br>Result 2:<br>Didn't work, I need a listener for that sound too :-\<br>Basically this is what I've got..<br><br><pre class=code>
wind=CreateListener(player,.00001,10,5)
wind_snd=LoadSound("wind.wav")
LoopSound wind_snd
EmitSound(wind_snd,watermesh)

microphone=CreateListener(player)
moo=Load3DSound("moo.wav")

If KeyHit(2) 
  EmitSound moo,cube
  EndIf

EmitSound water, water</pre> <br><br></td></tr></table><br>
<a name="594843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why do you use the command CreateListener twice?  Didn't we already go over how you can only have one listener?<br><br>At any rate, the very last line is fishy.  You have the variable 'water' twice, but they should be different; one should be the sound, and one should be the entity.  Morover, I'm curious how these lines are arranged with respect the resot of your code.  All the setup stuff (ie. everything before If) should be called once at the beginning of your program, while that If statement should be in your main loop and thus called every frame. <br><br></td></tr></table><br>
<a name="594850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's the entire code minus a couple of mesh's and other sorts of stuff I have along in the program.  All mesh's are there, I just chose to disclude them in this example..<br><br>Also, everything I have here is in order in compliance with the program..<br><br><pre class=code>Graphics3D 1024, 768, 0, 1
SetBuffer BackBuffer()

;====================Sounds
wind=CreateListener(player,.00001,10,5)
wind_snd=LoadSound("wind.wav")
LoopSound wind_snd
EmitSound(wind_snd,watermesh)

microphone=CreateListener(player)
moo=Load3DSound("moo.wav")

player = CreatePivot()
camera = CreateCamera(player)

MoveEntity camera, 0, 4.9, 0
MoveEntity player, 20, 15, -20	

While Not KeyHit(1) 
If KeyHit(2) 
EmitSound moo,cube
EndIf

TranslateEntity player, 0, -.1, 0

UpdateWater()
UpdateWorld

RenderWorld
Flip
Wend
End

EmitSound water, water    ;dont ask it works, assigned to mesh not included..
</pre> <br><br></td></tr></table><br>
<a name="594859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> where is the entity variable "cube" defined? <br><br></td></tr></table><br>
<a name="594863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> [code]<br>cube=CreateCube()<br>PositionEntity cube,0,1,0<br><br>microphone=CreateListener(player)<br>moo=Load3DSound("moo.wav")<br>[/cube]<br><br>right there..  sorry about that..<br><br>It works if I (;) out the other listener with the wind listener,  but if I un (;) the other one, then it says multiple listeners, and I dont know a way around this. <br><br></td></tr></table><br>
<a name="594898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> why don't you name your listener "EARS" so there won't be any misunderstanding.<br><br>Now, I guess you only have ONE pair of ears, do you? (Well unless you're living near Mr. Burns power plant or something)<br><br>With only one pair of ears (= one listener!) you can hear the wind and the cow too! <br><br></td></tr></table><br>
<a name="594929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jams</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are several problems in your code, firstly win_snd is not being loaded with Load3DSound, but just a regular LoadSound, which could cause problems with EmitSound. Secondly ofcourse you have multiple listeners, you only need one. Thirdly, you're setting your listener as a child of an entity that hasnt been created yet, Player = CreatePivot() should be called *before* microphone=CreateListener( player ), otherwise microphone is going to be a child of nothing. <br><br></td></tr></table><br>
<a name="594961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also if you want an ambient wind background noise that is heard at equal volume anywhere in the level then just use LoadSound and Playsound, no need to load as a 3d sound and emit it from anything. <br><br></td></tr></table><br>
<a name="595061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D 1024, 768, 0, 1
SetBuffer BackBuffer()

;====================Sounds
EARS=CreateListener(player,0.00001,10,5)
wind_snd=Load3DSound("wind.wav")
LoopSound wind_snd
EmitSound(wind_snd,watermesh)

cube=CreateCube()
PositionEntity cube,0,1,0


moo=Load3DSound("moo.wav")
player = CreatePivot()
camera = CreateCamera()

MoveEntity camera, 0, 4.9, 0
MoveEntity player, 20, 15, -20	

EntityParent camera,player


While Not KeyHit(1) 
If KeyHit(2) 
EmitSound moo,cube
EndIf

TranslateEntity player, 0, -.1, 0

UpdateWater()
UpdateWorld

RenderWorld
Flip
Wend
End
</textarea><br><br><br>Try this!<br><br>And also, remember your 'player' object is gonna fall apst the cow and water VERY quickly (unless this is a grvity thing and he's kept firmly on the ground) <br><br></td></tr></table><br>
<a name="595266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it working with Malice's example!<br><br>Many thanks to all of you for this simple, yet complex problem! <br><br></td></tr></table><br>
<a name="596133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad to be able to help! :) <br><br></td></tr></table><br>
<a name="596451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I created this a while ago to help me play with the settings of a listener... it might help... you're going to need a sound for it though!<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics3D 640,480
MoveMouse 320,240

camera=CreateCamera()
light=CreateLight(2)
PositionEntity light,100,100,100

emitter=CreateCube()

rolloff_factor#=.1
doppler_scale#=10
distance_scale#=.5

listener=CreateListener(camera,rolloff_factor,doppler_scale,distance_scale)
sound=Load3DSound("bim.wav")
sound_play=EmitSound(sound,emitter)

PositionEntity emitter,-10,0,-100

x#=0
cx#=0

Repeat
	
	PositionEntity emitter,0,0,Sin(x)*200
	PositionEntity camera,Float(MouseX()-320)/10,0,0
	
	If Not ChannelPlaying(sound_play) Then sound_play=EmitSound(sound,emitter)
	
	x=x+.1
	If x&gt;359 Then x=0
		
	UpdateWorld
	RenderWorld
	
	Text 0,0,"Distance:"+EntityDistance(camera,emitter)
	Text 0,10,"Fall off:"+falloff_distance
	Flip

Until KeyHit(1)</textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
