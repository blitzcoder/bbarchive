<!DOCTYPE html><html lang="en" ><head ><title >Position-maps with Blitztree?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Position-maps with Blitztree?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Position-maps with Blitztree?</a><br><br>
<a name="782086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Quantum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just bought Blitz tree and so far I'm really happy with it's results on a 3D mesh landscape at least... despite the command syntax being incorrect!...  ie... MakeTREE("filename",x#,y#,z#, size#=0, rotation#, scalex#, scaley#, scalez#)... returns a "too many parameters" error??... while MakeTREE("filename",pos_x,pos_y,pos_z, treesize=0,2)... appears to work great? <br><br>But I'm now trying to place trees using a placement-map... I have created a height-mapped scene, used the tree load command... LoadTreeColorMap("lm/treemap.bmp","lm/trees.txt",terr,20)... using the exact syntax shown in the docs... and once again I get a "not enough parameters" error?... so I added another ",20"...  ie... LoadTreeColorMap("lm/treemap.jpg","lm/trees.txt",terr,20,20)... and now it works... or at least the error warning has stopped showing for this line!... but I have no idea what the last number is addressing, as it is obviously not covered in the docs?... and the position-map is still not working...<br><br>So I then created the position map using a single pixel 0,255,0 dot on a black texture (the same size as my height-map)... created th text file calling the trees (all exactly as shown in the docs)...ie...<br><br>1<br>"trees\sage\sage.btr" ,5, 5, 5<br><br>(# of trees followed by filesname, scale x/y/z)<br><br>... and NOW I get a "array index out-of-bounds" error?<br><br>Has anyone else here had problems implementing this?... cos I'd be very grateful of any help regarding the correct syntax for the use of placement-maps with Blitztree, as the supplied documentation is clearly out-of-date! <br><br></td></tr></table><br>
<a name="783007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Quantum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well... just as an update for anyone else who might be thinking of buying Blitz Tree... after 3 days of swearing, ranting &amp; general frustration... I've found the problem :)<br><br>Apparently... the version of the "bt3d_include.bb" contained in the "engine code" folder... is designed for use with "TerraEd" only!... however... in the "sample code" folder, where the demo of Blitz Tree resides (and where I hadn't previously looked... assuming it would be the same engine code!), there is another version of the "bt3d_include.bb" that ISN'T written specifically for "TerraEd" height-maps (but has the exact same name).<br><br>So if, like me, you don't have "TerraEd"... ONLY use the "bt3d_include.bb" file in the "Sample Code" folder!... it might save you 3 days of high blood pressure! lol... especially if you are a noob like me &amp; still trying to figure-out what does what &amp; why! lol <br><br></td></tr></table><br>
<a name="784051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you have any idea what version your bt3d_include.bb is - if not, what file-size is it? <br><br></td></tr></table><br>
<a name="784091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Quantum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes Puki... the actual "engine-code" version (TerraEd version that is) 35.8k... and the "sample-code" version is 33.8k :)<br><br>I can't find a version number... but I bought it about 10 days ago from the `TGC` site... and despite one of their customer services representatives emailing me &amp; telling me he would take a copy home to find out what the problem was... I've heard nothing back! lol... but as I explained above... I've discovered the problem now.<br><br>The "engine-code" folder should have both versions in it &amp; have them re-named appropriately!... eg "bt3d_TerraEd_include.bb" &amp; "bt3d_Gen_include.bb"... thats what I've done with mine now :) <br><br></td></tr></table><br>
<a name="784095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmm, the original 'bt3d_include.bb' was 33.8KB and the 1.42 update was 35.8KB.<br><br>The 35.8 (TerraEd version - as you call it), should be the 1.42 update.<br><br>As far as I know it is not a TerraEd version.<br><br>What happens when you use it without a placement-map method? <br><br></td></tr></table><br>
<a name="784111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Quantum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using the include file in the "Engine-Code" folder, I just keep getting "array out of bounds" errors no matter what I try?<br><br>Whereas the smaller version (33k) in the "sample-code" folder works like a charm?<br><br>One day I'll have to treat myself to TerraEd &amp; see if it make any difference.<br><br>The line(s) where the error show up in the include file are here....<br><br>;--- this function loads tree color maps produced by TerraED map maker<br>Function BT_LoadTerraEDColorMap(nt$,nl$,terrainPH,TerscaleTL#, col_type)<br><br> If FileType(nl$)=0 Then RuntimeError nt$+" Tree-list file missing!" : End<br> If FileType(nt$)=0 Then RuntimeError nl$+" Tree-color placement map file missing" : End<br> If terrainPH=0 Then RuntimeError "Terrain not found (Tree color map)" : End<br><br>;---  setup the treelist from user input file<br> BTcnt=0<br> op=ReadFile(nl$)<br> BTcnt=ReadLine(op) <br> Dim BTtcm(BTcnt,6 )<br> Dim BTtcmName$(btcnt)<br> For bt_temp=1 To BTcnt<br>    	treeLISTent$=ReadLine(op)<br>	parser$(treeLISTent$)<br>	BTtcm(bt_temp,1)=par(1);r<br>	BTtcm(bt_temp,2)=par(2);g<br>	BTtcm(bt_temp,3)=par(3);b<br>	BTtcmName$(bt_temp)=par(4);filename<br>	BTtcm(bt_temp,4)=par(5);scale ; ************** Array out of bound error shows HERE!!!<br>	BTtcm(bt_temp,5)=par(6);scale<br>	BTtcm(bt_temp,6)=par(7);scale<br> Next<br> CloseFile op<br><br>... as you can see... the include file is full of references to TerraEd???... this entire section is missing from the version that I found to work!... I've highlighted exactly where the array error shows in the code snippet above :)<br><br>When I used it without a placement map... by entering co-ords for individual trees &amp; loading them as individual scenery objects... it worked fine?... that was the method I had been using for about a week before I decided to try a placement map... thats when I hit all the probs lol <br><br></td></tr></table><br>
<a name="784112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmm, the TerraEd stuff certainly is in the 1.42 update.<br><br>Rename the 'bt3d_include.bb'  in your Sample Code directory to 'bt3d_include.b'.  Now copy the 1.42 (TerraEd) into the same directory.  Now run the Sample code example - does it work?  Forget about your code - does the sample work with the 1.42 update?<br><br>If not, post your copy of the sample code. <br><br></td></tr></table><br>
<a name="784117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Quantum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just tried it &amp; no... the sample code doesn't work with the 1.42 update?... "entity does not exist" error on the "tree_cam"<br><br>The sample code btw doesn't use placement maps... it uses random numbers for placement....<br><br>For t=1 To 45<br> x=Rand(0,18000) : z=Rand(0,18000)<br> atree=MakeTREE("trees/tree_h6/tree036.btr",x,TerrainY(ter,x,0,z),z,treesize=0,type_tree)<br> a=Rand(2,8) : b=Rand(3,7) :  ScaleTree atree,a,a,a :  RotateTree atree,0,Rand(-180,180),0<br>Next <br><br></td></tr></table><br>
<a name="784118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Quantum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's the "sample code" though :)....<br><br><br><br>Graphics3D 1024,768,32,2<br>Global cam=CreateCamera()<br>CameraRange cam,5,25000 : EntityRadius cam,15 ; : CameraFogMode cam,1 : CameraFogColor cam,255,255,255 : CameraFogRange cam,1000,15000<br><br>Global lig=CreateLight()<br>LightColor lig,255,255,0<br>RotateEntity lig,0,180,0<br>AmbientLight 105,105,105<br><br>Include "bt3d_include.bb"<br><br><br>ter=LoadTerrain("hmap_1.bmp")<br>ScaleEntity ter,20,1,20<br>;detail=1000:morph=True<br>TerrainDetail ter,detail,morph<br><br>  tex0=LoadTexture("bmap_1.bmp")<br>  tex1=LoadTexture("tmap_1.bmp")<br>  tex2=LoadTexture("cmap_1.bmp")<br>  tex3=LoadTexture("rmap_1.bmp")<br><br>  ScaleTexture tex0,20,20<br>  ScaleTexture tex3,25,25<br>  ScaleTexture tex2,TerrainSize(ter),TerrainSize(ter)<br>  ScaleTexture tex1,TerrainSize(ter),TerrainSize(ter)<br>  TextureBlend tex1,3<br><br> EntityTexture ter,tex3,0,0<br> EntityTexture ter,tex1,0,1<br> EntityTexture ter,tex0,0,3<br> EntityTexture ter,tex2,0,2<br><br> PositionEntity cam,11221,389,10085<br><br>;--- setup collision data<br>Const type_tree=1, type_cam=2<br>EntityType cam,type_cam<br>Collisions type_cam,type_tree,2,2<br>;---<br><br>For t=1 To 45<br> x=Rand(0,18000) : z=Rand(0,18000)<br> atree=MakeTREE("trees/tree_h6/tree036.btr",x,TerrainY(ter,x,0,z),z,treesize=0,type_tree)<br> a=Rand(2,8) : b=Rand(3,7) :  ScaleTree atree,a,a,a :  RotateTree atree,0,Rand(-180,180),0<br>Next<br><br><br>    FlushMouse()<br>	m=CreateMesh()<br>	;front face<br>	b=LoadBrush( "2_fr.bmp",49 )<br>	s=CreateSurface( m,b )<br>	AddVertex s,-1,+1,-1,0,0:AddVertex s,+1,+1,-1,1,0<br>	AddVertex s,+1,-1,-1,1,1:AddVertex s,-1,-1,-1,0,1<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	;right face<br>	b=LoadBrush( "2_lf.bmp",49)<br>	s=CreateSurface( m,b )<br>	AddVertex s,+1,+1,-1,0,0:AddVertex s,+1,+1,+1,1,0<br>	AddVertex s,+1,-1,+1,1,1:AddVertex s,+1,-1,-1,0,1<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	;back face<br>	b=LoadBrush( "2_BK.bmp",49)<br>	s=CreateSurface( m,b )<br>	AddVertex s,+1,+1,+1,0,0:AddVertex s,-1,+1,+1,1,0<br>	AddVertex s,-1,-1,+1,1,1:AddVertex s,+1,-1,+1,0,1<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	;left face<br>	b=LoadBrush( "2_RT.bmp",49 )<br>	s=CreateSurface( m,b )<br>	AddVertex s,-1,+1,+1,0,0:AddVertex s,-1,+1,-1,1,0<br>	AddVertex s,-1,-1,-1,1,1:AddVertex s,-1,-1,+1,0,1<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	;top face<br>	b=LoadBrush( "2_UP.bmp",49 )<br>	s=CreateSurface( m,b )<br>	AddVertex s,-1,+1,+1,0,1:AddVertex s,+1,+1,+1,0,0<br>	AddVertex s,+1,+1,-1,1,0:AddVertex s,-1,+1,-1,1,1<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	;bottom face	<br>	b=LoadBrush( "2_DN.bmp",49 )<br>	s=CreateSurface( m,b )<br>	AddVertex s,-1,-1,-1,1,0:AddVertex s,+1,-1,-1,1,1<br>	AddVertex s,+1,-1,+1,0,1:AddVertex s,-1,-1,+1,0,0<br>	AddTriangle s,0,1,2:AddTriangle s,0,2,3<br>	FreeBrush b<br>	ScaleMesh m,100,100,100<br>	FlipMesh m<br>	EntityFX m,1<br>    ScaleEntity m,15,15,15<br>    EntityOrder m,100<br>    skybox=m<br><br>Global gameFPS = 32<br>Global framePeriod = 1000/gameFPS <br>Global frameTime = MilliSecs() - framePeriod , update_frequency=20, clicktime<br>Global frameElapsed , aap<br>framePeriod = 1000 / gameFPS<br>frameTime = MilliSecs () - framePeriod<br><br><br>Repeat<br><br>	Repeat<br>		frameElapsed = MilliSecs () - frameTime<br>	Until frameElapsed<br>	frameTicks = frameElapsed / framePeriod<br>	frameTween# = Float (frameElapsed Mod framePeriod) / Float (framePeriod)<br><br>	<br>	For frameLimit = 1 To frameTicks<br>		If frameLimit = frameTicks Then CaptureWorld<br>		frameTime = frameTime + framePeriod<br>        click=0 <br>        If MouseDown(1)=1 Then click=1<br>        If MouseDown(2)=1 Then click=2<br>        If MouseDown(1)=1 And MouseDown(2)=1 Then click=3<br>        mx=MouseX() : my=MouseY()<br>        UpdateQuads() ; *************************************<br>        Gosub general<br>        UpdateWorld<br>	Next<br>;HideEntity skybox<br>    RenderWorld frameTween<br>    fps_counter=fps_counter+1 : If fps_counter=update_frequency Then ffps=1000/Float(((MilliSecs()-fps_milli))/update_frequency) : fps_milli=MilliSecs() : fps_counter=0 <br><br><br>    Color 0,0,0 : Text 1,1,"fps: "+ffps+"  "+TrisRendered()<br>    Color 255,255,255 : Text 1,15,"fps: "+ffps+"  "+TrisRendered()<br>    Text 1,30,aap<br>    Flip(False)<br><br>Until KeyHit (1)<br><br>End<br><br>.general<br><br>  mspeedy=MouseYSpeed()<br>  mspeedx=MouseXSpeed()<br>  dest_xang# = dest_xang + (mspeedy/3)<br>  dest_yang# = dest_yang - (mspeedx/3)<br>  xang# = CurveValue (xang, dest_xang, 5)<br>  yang# = CurveValue (yang, dest_yang, 5)<br>  mousetimermm#=MilliSecs()+200<br>  RotateEntity cam, xang#, yang#, 0<br>  MoveMouse 400,300<br><br>  hx=EntityX(cam)<br>  hy=EntityY(cam)<br>  hz=EntityZ(cam)<br>  If MouseDown(2)=1 Or MouseDown(1)=1 Then MoveEntity cam,0,0,30<br>  If KeyDown(200)=1 Then MoveEntity cam,0,0,40<br>  If KeyDown(208)=1 Then MoveEntity cam,0,0,-30<br>  If KeyDown(203)=1 Then MoveEntity cam,-15,0,0<br>  If KeyDown(205)=1 Then MoveEntity cam,15,0,0<br>  PositionEntity skybox,EntityX(cam),EntityY(cam)-150,EntityZ(cam)<br><br>Return<br><br>Function CurveValue#(current#,destination#,curve#)<br>	current#=current#+((destination#-current#)/curve#)<br>	Return current#<br>End Function <br><br></td></tr></table><br>
<a name="784120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmm.<br><br>I'll email you my 1.42 update - see if mine works with the sample code. <br><br></td></tr></table><br>
<a name="784213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Quantum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried it with my program puki... and got the same error cos the include file is identical to mine. It does work with the sample code but thats probably because it doesn't use a placement map :-S<br><br>Do you think it's my .txt file thats messing up?... here's what I'm using :-<br><br>5<br>trees\euc\euc.btr .5 .5 .5<br>trees\ftree_2\ftree2.btr .5 .5 .5<br>trees\ftree_3\ftree3.btr .5 .5 .5<br>trees\ftree_4\ftree4.btr .5 .5 .5<br>trees\ftree_5\ftree5.btr .5 .5 .5<br><br>... this works great in the smaller `bt3d_include.bb` file, but throws the "array out of bounds" error on the line I've highlighted above when I use the 1.42 version?<br><br>(mine is 1.42 btw... when I un-zipped it, it created a folder named "BlitzTree1_42"... but I was looking for a version number in the code!... Durrrrr lol <br><br></td></tr></table><br>
<a name="784220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've never had a problem with my copy - both includes work with the sample code.  However, I have never tried using placement methods.<br><br>Still, if it works with the (what I think is the 1.0.4 version) then great.<br><br>I'm not too sure what  improvements are in the 1.42 version other than the TerraED compatability. <br><br></td></tr></table><br>
<a name="784226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Quantum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, both of my versions work with the sample code... it's just placement maps the 1.42 version doesn't seem to like?<br><br>Like I said before though... maybe I'll get TerraEd one day and see if it works then! but for now I'm just happy that I got 1.0.4 working lol<br><br>Thanks any way puki :) <br><br></td></tr></table><br>
<a name="784228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Quantum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh BTW... if anyone out there IS using TerraEd placement maps with Blitz Tree v1.42... I'd really like to see an example of the tree definition .txt file please!... just out of curiosity :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
