<!DOCTYPE html><html lang="en" ><head ><title >Gem Placement on Static Mesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Gem Placement on Static Mesh</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Gem Placement on Static Mesh</a><br><br>
<a name="813728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All,<br><br>I was wondering what is the best method for Gem Placement on Static Mesh. <br><br>Meaning, I have a large .3ds mesh with rolling hills. I want to have like 100 collectible gems on it randomly placed.<br><br>How can I get each gem to follow/place itself just above my mesh without manually placing each one or having them go into the mesh?<br><br>thx for any help :) <br><br></td></tr></table><br>
<a name="813733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Set the static mesh to be pickable - entitypickmode 2 then use linepicks.<br><br>Assuming the mesh is 200x200 units square and the maximum height of the mesh is 100 units ..<br><br><pre class=code>

gem = loadmesh("mygem")

for l = 1 to 100 

  x# = rand(-100,100 )  
  z# = rand(-100,100 )
  copy = copyentity( gem )

  linepick x, 110, z, 0,-120,0
  positionentity copy, x,pickedy()+1, z

next

</pre><br><br><br>You may want to add in checks to make sure there aren't 2 gems at the same point.<br><br>If you need the gem to align to the landscape you could use ...<br><br>aligntovector pickednx(), pickedny(), pickednz(), 2<br><br>after positioning.<br><br>Stevie <br><br></td></tr></table><br>
<a name="813769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> that works great, thank you.<br><br>I'll give it a shot across my whole map and let you know it it turns out<br><br>:) <br><br></td></tr></table><br>
<a name="813772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I have spreading 6000 items across my map.<br><br>I notice a bit performance difference from 1k to 6k items. Is there a framerate friendly way to get 9k items with 5 faces each  across my map? <br><br></td></tr></table><br>
<a name="813816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jsoren</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> reducing the camera range, and hiding all the items that are not visible are some of the ways you can do that. <br><br></td></tr></table><br>
<a name="813834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Reducing the camera range will automatically cull everything outwith the view frostrum -  don't think it's necessary to hide and show 9000 items - now that will be slooooow.  You could put  a bit of fog in there or use entityautofade etc.. <br><br>Depends what yo want to do though - what frame rate hit do you actually get? <br><br></td></tr></table><br>
<a name="813934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> you could do this<br><br>for i=0 to 100<br>positionentity gem(i),rnd(-150,150),50,rnd(-150,150)<br>next<br><br>then you use <br>for i=0 to 100<br>translateentity gem(i),0,-.5,0<br>next<br><br>and they will fall down on top of the hills <br><br></td></tr></table><br>
<a name="814771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am getting around 150fps with 1000 gems....and around 10fps with 12000.<br><br>Today I will do the CameraRange and fog, and if needed, the autohide and see how that goes.<br><br>I appreciate all you guys input, thank you :) <br><br></td></tr></table><br>
<a name="814788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> With 12000 you will kill any GPU most likely. Implement some kind of oct tree culling or the like to remove the massive card load. <br><br></td></tr></table><br>
<a name="814803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jsoren</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @stevie G: i meant cam range OR hideing, since there are some instances that camerarange just wont do what you need.<br><br>@CodeOrc: thats ALOT of gems, even hiding most of them will cause alittle slowdown just because of the stress of trying to keep track of 12000 items. <br><br></td></tr></table><br>
<a name="814806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, can I ask another question then? <br><br>How do people using B3D get mega grass across their terrains? Is that not like 10k sprites to make up all that grass?<br><br>And if so, how are they kept track of? <br><br>thx :) <br><br></td></tr></table><br>
<a name="814822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jsoren</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, it depends, usually the ground would be textured like grass and the actual grass clumps would be spread around. ive never had to make grass all arcross a terrain fairly densly, but i suppose if i did i would probly make decent amount of grass sprites around the player, keep track of their x,z coords in relation to the player, and when one was too far away him, reposition it in the opposit direction of him, using appropriate alpha levels to make sure they blend (if that makes any sence). theres also a grass demo that comes in the blitz3d samples. <br><br></td></tr></table><br>
<a name="814857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>How do people using B3D get mega grass across their terrains? Is that not like 10k sprites to make up all that grass?<br> <br></div><br><br>Using individual sprites would be a killer for dense vegitation due to the simple fact that each is a new surface.  The more surfaces you use the more it kills the frame rate.  Clumps of quads created as single surfaces is the way to go for this.<br><br>Stevie <br><br></td></tr></table><br>
<a name="815166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Stevie- Could you show me an example of how to do this? I am confused by your idea. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
