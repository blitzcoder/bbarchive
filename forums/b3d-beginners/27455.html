<!DOCTYPE html><html lang="en" ><head ><title >Multiple game loops?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Multiple game loops?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Multiple game loops?</a><br><br>
<a name="287682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi to everyone, this is my first post.<br><br>I got Blitz+ about a month ago and have been studying the sample programs and all and then I jumped right in and started writing a game but, because I didn't have any real concept of what the game would be beyond it's general genre of puzzle\logic\line game, I've run into an issue with my general program design.<br><br>I'm using a finite state machine to control my main loop but when certain events occur, instead of handling them with code within the main loop, I jump to functions with their own independant timing loops and all so I've essentially got several main loops in my game. These functions take anywhere from a fraction of a second to about 3 seconds to complete so my main loop is frozen while this is going on.<br><br>Obviously this would be unacceptable in an event driven Windows app, but do I need to worry about this in a full screen (Blitz2D type) program, or can you pretty much do whatever you like in full screen programs?<br><br>Thanks for any replies<br>-=CGV=- <br><br></td></tr></table><br>
<a name="287691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ford escort</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> if i understand correctly you have some functions that don't return each frame to the main loop freezing it<br><br><br>you can use a kind of flag to keep track of the active function then jump each frame to this function until it's complete<br><br>for exemple when you have to jump to a function, set your flag to something <br><br>actualy your code may look iike that<br><br>mainloop<br> code<br> code<br> code<br> if condition:function1():endif<br> code<br> code <br> code<br>/mainloop<br><br>function1()<br> loop<br>  code<br>  code<br>  code<br> /loop until condition<br>return <br><br><br><br>------------------<br><br>you can make it look like that<br>mainloop<br> code<br> code<br> code<br> if condition:flag=1:endif<br> select flag<br> case 1<br>  function1()<br> end select<br> code<br> code <br> code<br>/mainloop<br><br>function1()<br>  code<br>  code<br>  code<br> if condition<br>   flag=0<br> endif<br>return <br><br>so the program still execute your main loop and jump every frame to your procedure until the same condition occurs ... <br><br>i admit that it's a difficult and looking weird way of code stuff :) <br><br></td></tr></table><br>
<a name="287713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, welcome. As above plus your function should only realy update things once per loop. Could you give me an idea of what your function is that is taking up to 3 seconds to perform? <br><br></td></tr></table><br>
<a name="287757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, thanks for the replies<br><br>I know how to write my code so it all runs in a single loop, I just want to know if could get away without doing so.<br><br>The game is sort of a 'Bejeweled' clone.<br>When you line up 3 or more chips, they get removed from the board which is where I jump to a function which handles the removal. Because it's all animated it takes about 1 second to perform.<br><br>I also gave the game a bomb chip. If you remove a line of chips containing a bomb, then the whole row and column where the bomb was located explodes taking out all those chips. The function which handles this takes about 3 seconds to perform all the animation.<br><br>When each of these functions gets called it becomes the main loop taking over the job of clearing the backbuffer, redrawing it and flipping it, so instead of running for one frame and then returning, it keeps running until the animation is complete and then returns. My main loop doesn't really do anything besides update the mouse cursor and wait for the users input.<br><br>I guess it's the type of game that makes this possible since after you make a move you just sit and watch the results, then you make your next move and so on. If it were an arcade game requiring continuous user input it would never work doing it this way.<br><br>It works, I just wonder if the Blitz compiler could end up getting confused if I put in one too many loops, although there's never more than one loop running inside another.<br><br>I guess what I was fishing for was an absolute:<br>"NO!!!, you'll crash everyone's computer and bring down the whole internet doing it that way!!!" <br><br>:)<br>Regards, <br><br></td></tr></table><br>
<a name="287767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nah, your alright if it's an event that the user has no input to. The compliler should be fine with that, no reason not to. :) <br><br></td></tr></table><br>
<a name="287768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I heard a while back that you can nest loops somewhere in the thousands if I remember right.  I think the only limit is the size of the stack your program is using.  For the most part, you should never have to worry about loops within loops. <br><br></td></tr></table><br>
<a name="288156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> UPDATE:<br><br>Well, it turns out you can't have more than one loop unless your game is really simple.<br><br>I tried adding a scoring feature today (the points you scored float their way up the screen) and there was no way to make it work due to my multiple loops so now I have to rewrite everything to run within a single loop.<br><br>Live and learn.<br><br>Regards, <br><br></td></tr></table><br>
<a name="288224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not true.<br><br>You can make your score floating function (hint, hint) as a FUNCTION.<br><br>And just call it from either loop if necessary. <br><br></td></tr></table><br>
<a name="288986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it is a function but I've got each loop running at a different speed as each animation has it's own requirements so the floating score keeps changing speed depending on which loop I'm in.<br><br>I'm sure it can be done but it needlessly complicates things. I only ended up with multiple loops because I sat down and just started coding with no plan or design.<br><br>Regards, <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
