<!DOCTYPE html><html lang="en" ><head ><title >Upon key release?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Upon key release?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Upon key release?</a><br><br>
<a name="910923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have made this 'duck movement' code for my FPS engine. This code makes it so the camera gets lowered and the player collision radius gets shrunken so he can crawl through smaller spaces.<br><br>Here is the code:<br><br><pre class=code>; Duck Code
If EntityCollided(player,world_col)

	If KeyDown(29) Then
	
		PositionEntity playercam,0,20,0  			
		EntityRadius player,16,25				; player collision radius
		
	Else
		
		EntityRadius player,16,40				; player collision radius
		PositionEntity playercam,0,36,0
	
	EndIf

EndIf</pre><br><br>It works, well sort of. I can make the player duck, but when I stand up (release the CTRL key) the player collision becomes bigger and clips through the terrain, so the player falls through because normal gravity resumes. This is not good.<br><br>So I figured, upon release of the ctrl key, I position the player a bit up (in its current location on the map) and the collision can become bigger, without going through the terrain collision.<br><br>I tried a lot of thing with many strange outcomes. Can anybody help me? I basically need a way to position the player pivot, on its current location on the map, after the CTRL key has been released.<br><br><br>Thanks a lot! <br><br></td></tr></table><br>
<a name="910941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >josk</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not great on 3D code but have you tried to Position the player before changing the entity radius. <br><br></td></tr></table><br>
<a name="910973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blade007</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well there's a way to detect if a key has been released for an instant.<br><pre class=code>
While Not KeyDown(1)
    If KeyDown(29)
           ;Stuff goes here.
           CtrlPress = True
   else
         If CtrlPress = True
                ;Ctrl has been Released!
                ;Stuff goes here.
                CtrlPress = False ;Now turn off the trigger
         Endif
   Endif
Wend
</pre> <br><br></td></tr></table><br>
<a name="910983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot!<br><br><br><b>Edit:</b>  Works like a charm! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
