<!DOCTYPE html><html lang="en" ><head ><title >Making a palette?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Making a palette?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Making a palette?</a><br><br>
<a name="975165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, need to create maybe a 1024 colour palette.<br><br>It needs to have 'main' colours such as red, green, blue, etc and some shades.<br><br>Is there somewhere I can get such a palette or maybe cannabolize one from somewhere?<br><br>Thanks<br>Jim <br><br></td></tr></table><br>
<a name="975295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure if I understand you right. Palette was something that was used when Computers had 256 Colors only, but each one could be any eg. 24 Bit RGB Color.<br><br>So I don't know why you would need that, simply use the 256 Colors you want.<br><br>If you want to reduce the number of colors from eg. a photo then you might use a bitwise color detail reduction. Simply start erasing the lower significant bits of Colors:<br><br><pre class=code>
rgb=readpixel(x,y) and $FFFFFF ; get original RGB

r=(rgb and $FF0000) shr 16 ;  separate red, green and blue
g=(rgb and $FF00) shr 8
b=(rgb and $FF)

r=r and %11111000 ; erase 3 lowest significant bits
g=g and %11111000
b=b and %11111000
rgb2= (r shl 16) or (g shl 8) or (b) ; re-assambling rgb

writepixelfast x,y,rgb2
</pre> <br><br></td></tr></table><br>
<a name="975390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of just apply a mask to the pixel.<br><pre class=code>
rgb2=ReadPixel(x,y) And $F0F0F0
</pre> <br><br></td></tr></table><br>
<a name="975433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys.<br><br>Jim <br><br></td></tr></table><br>
<a name="975781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bobysait is right, his suggestion is much easier, altough I tried to show how the bits work :)<br><br>Now I think I understand what you was talking about. A simple palette for a color picker, right?. Well you may use any true color palette and then reduce the color detail, as described earlier. Or try google images "palette". (Interestingly, with "palette 256" I get much better hits than with "palette 1024") <br><br></td></tr></table><br>
<a name="975782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again, yes I'm just looking for a 'color picker' with limited colours. So getting the palette from an image may work for me.<br><br>Jim <br><br></td></tr></table><br>
<a name="976156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Interestingly, with "palette 256" I get much better hits than with "palette 1024" <br></div><br><br>and so you would, no clut (colour look up table) used anything higher than 256 indexes, once we reached 24bit colour as standard VGA as was became redundant in all but .gif files.<br><br>in the dos days having multiple paletts was handy as you could change the hero's colour by swapping the 16 or so colours you had assigned to his uniform with another <br><br></td></tr></table><br>
<a name="976580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I might niot be 100% on what oytu're after, but it sounds like you just want to be able to allow the user to pick fropm a limited (i.e. 256 colours) selection?<br><br>Something I worked with before I dived in and wernt with the 'full' colour-picker of Blitzsys was simply create with code or draw in paint a 16*16 image with all of the colour range you want, then have a function which grabs the data either by GetColor from the image as displayed, or, perhaps if it's a code-generated palette, as a formulae of the X/Y location on the palette iage:<br><br>if thius isn't so clear, here's a sample of some code:<br><br><pre class=code>
 Graphics 800,600
SetBuffer BackBuffer()

Global Palette=BuildPalette()


Global CurrentRed=255
Global CurrentGreen=255
Global CurrentBlue=255

While Not KeyDown(1)
	
	DrawImage Palette,GraphicsWidth() - ImageWidth(Palette),0
	Color 255,255,255
	Rect 0,0,128,64,False
	Color CurrentRed,CurrentGreen,CurrentBlue
	Rect 1,1,126,62,True
	
	If (MouseDown(1))
		If ((MouseX()&gt;(GraphicsWidth() - ImageWidth(Palette))) And (MouseY()&lt;ImageHeight(Palette)))
			PickColor(MouseX(),MouseY())
		End If
	End If
	Flip
Wend
End

Function BuildPalette()
	
	Local PaletteImage=CreateImage(64,64)	; Note 64 is used instead of 16, single pixels are likely too small to select accurately witht he mouse cursor.
	
	SetBuffer ImageBuffer(PaletteImage)
	
	Local IterRed=0
	Local IterGreen=0
	Local IterBlue=0
	
	For IterRed=0 To 7
		For IterGreen=0 To 7
			Color IterRed Shl 6,IterGreen Shl 6,IterBlue Shl 6
			Rect IterRed Shl 2,IterGreen Shl 2,4,4,True
		Next
	Next
	IterGreen=0
	For IterRed=8 To 15
		For IterBlue=0 To 7
			Color (IterRed-8) Shl 6,IterGreen Shl 6,IterBlue Shl 6
			Rect IterRed Shl 2,IterBlue Shl 2,4,4,True
		Next
	Next
	IterRed=0
	For IterGreen=0 To 7
		For IterBlue=8 To 15
			Color IterRed Shl 6,IterGreen Shl 6,(IterBlue - 8) Shl 6
			Rect IterGreen Shl 2,IterBlue Shl 2,4,4,True
		Next
	Next
	
	For IterGreen=8 To 15
		For IterBlue=8 To 15
			Color (IterBlue - 8) Shl 6,(IterBlue - 8) Shl 6,(IterBlue - 8) Shl 6
			Rect IterGreen Shl 2,IterBlue Shl 2,4,4,True
		Next
	Next
	
	SetBuffer BackBuffer()
	Return PaletteImage
End Function

Function PickColor(X,Y)
	GetColor X,Y
	CurrentRed=ColorRed()
	CurrentGreen=ColorGreen()
	CurrentBlue=ColorBlue()
End Function
</pre> <br><br></td></tr></table><br>
<a name="976652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Malice. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
