<!DOCTYPE html><html lang="en" ><head ><title >Weird lightmapping problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Weird lightmapping problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Weird lightmapping problem</a><br><br>
<a name="614970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right, firstly I tried to video this - uploaded it to:<br><a href="http://rapidshare.de/files/10803640/blitzcc_2006-01-10_20-35-39-95.avi.html" target="_blank">http://rapidshare.de/files/10803640/blitzcc_2006-01-10_20-35-39-95.avi.html</a><br><br>But it doesn't seem to download.<br><br>Anyway, I was having a go at lightmapping a model - that already had a premade lightmap:<br><br><pre class=code>newhouse=LoadMesh(buildingmodelpath$+"house1\house1.b3d")
newhouselmap=LoadTexture(buildingmodelpath$+"house1\house11_lm.bmp")
TextureCoords newhouselmap,1
EntityTexture newhouse,newhouselmap,0,1</pre><br><br>Now, the end effect is a greyscale house that has 2 weird problems:<br><br>1: There is a kind of gauze/filter effect on the object that moves with the camera - as though the camera has a gauze on it - the effect is like having a dusty/dirty camera lens.  The effect is static to the game camera though and dynamic to the object, so when I mouse-look around the object the gauze effect which has some noticeable features (such as a sort of circular patch to it) appears to stay in the same place on the game camera (the blitz camera - about 2 inches northeast (up/right)) of the centre of the screen).<br><br>So, the texture is clearly mapped to the .b3d, yet is like it is mapped to the camera.<br><br>Also, when I mouse-look around, the .b3d file darkens and lightens.  It seems to lighten when I mouse-look up and darken when I mouse-look down.  So, let's suppose a wall directly opposite you is sort of light grey - it will darken as you mouselook down and lighten as you mouse-look up.<br><br><br>Is this a known effect?<br><br>It is sort of cool-looking, but I didn't intend to create it.  I hope I have explained this in enough detail.<br><br>This probably won't show up too well in screen-shots, which is why I tried doing the video of it. <br><br></td></tr></table><br>
<a name="614995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, number one is really bizarre.  Are you sure that is due to the house?  I know that's kind of an obvious question, but I'm really finding that one hard to believe.  If you comment out just those four lines, and instead CreatePlane(), do you still see the gauzy effect?<br><br>As for the other issue, it may be due to surface properties and real-time lights, perhaps shininess on the surface.  Make sure any lightmapped geometry is set to fullbright so that lights don't affect it.<br><br>I wish I could view the movie.  I don't know if it's too big, but you could yousendit to yourself and then post the download link. <br><br></td></tr></table><br>
<a name="615003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the house is one of many houses in the scene - when inside or outside the house, the effect is applied to the house.  So, if I stand outside the house - in the street - the gauze effect is still tied to the camera, but only over the surface of the house.<br><br>EDIT:<br>I'll try hosting it elsewhere - will try your suggestion.<br><br>EDIT:<br>I just created a cube inside the house and can see the effect on that too???<br><br>EDIT:<br>erm, I think I solved it.<br><br>Um, it would appear to be caused by the surface of my TFT screen.<br><br>Um, you see I would not normally look around in a grey-scale environment - normally textured stuff and games don't produce this effect.<br><br>Because when I lightmapped the house, it turned grey-scale and I noticed the weird effect.<br><br>Um, the reason why I noticed it on the video was coz I was playing it back full-screen - meaning the effect was being recreated (as it is on the monitor screen itself).<br><br>Um, I did actually, clean the monitor screen - it appears to be a case of the surface of the monitor is not completely flat, so it has *normally* unoticable blemishes that came to light when viewing the grey-scale image.<br><br>This effect is not noticeable when viewing statice images - like when using windows and wordprocessors, etc - just moving ones such as greyscale buildings which were not previously greyscale, yet turn greyscale when you try to lightmap them.<br><br>Um - I'm not taking the entire blame for this. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
