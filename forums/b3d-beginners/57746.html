<!DOCTYPE html><html lang="en" ><head ><title >Simulating Destructible Terrain with Brushes?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Simulating Destructible Terrain with Brushes?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Simulating Destructible Terrain with Brushes?</a><br><br>
<a name="642326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >x2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I'm stuck and need community help.  :-)<br><br>I have a small B3D tank like program which uses blitz terrains and would like to apply damage to the terrain texture (not the actual terrain) when shells hit.  Think: scorch marks or bullet holes.<br><br>My main world code works fine and I can navigate around and use camerapick to place spheres at the desired location of the scorch marks.  I toyed with the idea of placing sprites at the damage location but was disappointed in the results.  I'm guessing that I need apply a brush to the terrain texture but have not done this before and achieve unexpected results. <br><br>My terrain is a 512x512 bmp scaled to 1x40x1 to create a hilly terrain.  <br><br>My texture is 1024x1024 png and scaled to 1024x1024 (looks better this way).<br><br>My test brush was created in code as follows:<br><br><pre class=code>
myTexture = LoadTexture("resources\test\texture_yellow.png")
ScaleTexture myTexture ,0.0001,0.0001
;
myBrush= CreateBrush(255,255,0)
BrushTexture myBrush,myTexture 
</pre><br><br>I've tried various methods of applying myBrush to the terrain texture but I either end up with nothing or my entire terrain is yellow when I only want to add a scorch spot.  What am I missing here????<br>  <br>For two days I've googed, searched blitzbasic + a few of the other sites but have not found a solutions.<br><br>Please help save my sanity!<br><br>-- x2 <br><br></td></tr></table><br>
<a name="642332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is an example in the code archives for this type of thing.<br><br>EDIT:<br>I just had a quick look but couldn't find it - just a quick look though. <br><br></td></tr></table><br>
<a name="642402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> you could draw to the texture. Just calculate the UV location of a XZ coordinate, then draw some dark pixels.<br><br>The problem is drawing to a big texture may be slow. When you use the 256 texture flag, access may be faster, but Mipmapping is turned off for that texture, resulting in "uber-crispy" look. You may use a second layer texture for the terrain, using mask  mode (flag 4).<br>eg:<br>tex2=createtexture(1024,1024,4 or 256)<br>entitytexture terrain,tex2,0,1<br><br>You may need to set the blendmode of the texture as well. <br><br></td></tr></table><br>
<a name="642410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could put decals down on the terrain. A large texture may work, but, you'll get extreme stretching depending on the size of the terrain. <br><br></td></tr></table><br>
<a name="642453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >x2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the feedback guys!  I spent more time on the problem after my post and discovered the following...<br><br>By changing the yellow texture square to a half yellow and half red square, my terrain changed to an orange color.  This indicated a scaling problem with the texture so I scaled it up to 512x512.  After brushing the texture on to the terrain entity, I was presented with a half yellow / half red mesh.  Progress!<br><br>Now that I've read the replies, I think jfk probably has what I need.  Combining this with my scaling problem may do the trick.  However, I too am concerned about the quality of the stretched texture.  Are there any other solutions?<br><br>Ross, what are these decals you mentioned?  Can you point me to an example or post some code I could try out?<br><br>-- x2 <br><br></td></tr></table><br>
<a name="642464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> decals may work for flat terrains, but they may intersect hills and things. Decals are simple quads, positioned a bit over the ground, using an alpha texture to fade out the edges.<br><br>Blitz terrains force you to use one texture stretched across the entire terrain. A further solution would be to create a mini-terrain for each explosion location. you would then lay the mini terrain onto the main terrain and apply a fine texture to it. you could use TerrainY() etc. to position the Mini Terrain, although this would force you to use the same segment size and to position the mini terrain on a segment borderline.<br><br>what I would do is: I would use a number of prefab crater meshes and simply position them at the impact coordinate. Simple, easy and nice looking.<br><br>Oh, and BTW: if you use one big texture for the whoe terrain and draw to it, as I suggested first, you need to scale the texture this way:<br>scaletexture tex,terrainsize(ter)*ter_scalex#,terrainsize(ter)*ter_scalez#<br>Note: ter_scalex and y is the factor you used to scale the terrain in x and z. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
