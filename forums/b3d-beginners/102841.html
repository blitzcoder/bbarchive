<!DOCTYPE html><html lang="en" ><head ><title >Types And Entitydistance</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Types And Entitydistance</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Types And Entitydistance</a><br><br>
<a name="1233615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie31</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>I'm having problems with getting a distance calculation with entitydistance() between the player controlled mesh and the type generated rooms. I have no idea how to make this work and would like some help please?<br><br>Here is my code, the problem is in my final function......I think.<br><br><br> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">


MoveMouse GraphicsWidth() / 2 , GraphicsHeight() / 2										;Move mouse to screen center

;Set Graphics buffer
Graphics3D 800 , 600 , 2 , 2																;Sets the graphics mode to 3d
SetBuffer BackBuffer()																		;Sets the buffer.

;Create Global Names and Variables
Global PLYR = 1																				;Set Collision Type for ' player ' 							type -"PLYR"
Global ENVIR = 2																			;Set Collision Type for ' Scene and non-movable objects ' 	type -"ENVIR"
Global DOOR = 3																				;Set Collision Type for ' door and exit/entry points ' 		type -"DOOR"

;Set Name Place Holders
Global camera01																				;Create Global name 'camera01' to avoid errors if referenced before creation
Global player_pivot																			;Create Global name 'player_pivot' to avoid errors if referenced before creation
Global room01_door
Global player_mesh
Global cube

;Set Varible Place Holders


;Set How Collisions are interpreted 														;This line must be added to the Main Base Program / Default APP
Collisions PLYR , ENVIR , 2 , 1
Collisions PLYR , DOOR , 2 , 1


;---------LOAD DEFAULT WORLD -------
RPG_WORLD_CREATE()	

Type room
	Field room_mesh
	Field room_xpos
	Field room_ypos
	Field room_zpos
	Field room_name
	Field room_scale
	Field room_texture
End Type

																;This Refers to the function that will load and texture the default world. - IMPORTANT THIS MUST REMAIN AS A FUNCTION
;----------------------------------

;---------Load Default Player -------
player_mesh = CreateSphere()																;Load the default player mesh this must be loaded here or else the movement in the game loop or function will return an error.
PositionEntity player_mesh , 0 , 1 , 0														;Position the entity.
ScaleEntity player_mesh , 0.5 , 0.5 , 0.5													;Scale the entity.
EntityType player_mesh , PLYR																;Set entity collision type.
EntityRadius player_mesh , .5																;Set entity collision radius.

player_pivot = CreatePivot( player_mesh )													;Create a pivot at the center of the player for the camera to follow.
PositionEntity player_pivot , 0 , 1 , 0														;Position the pivot. (This should be close to the player)

camera01 = CreateCamera( player_mesh )														;Create camera - IMPORTANT This is cleared with the clearworld command and should be created immediately after.														
PositionEntity camera01 , 0 , 5 , -10														;Position the camera.
;------------------------------------	

cube = CreateCube()
PositionEntity cube , 25 , 0 , 25

;**********************************************************************************
;**     *****   **** ***** **     ****** ******   ****   ***    *******************
;** *** ***  **  ***  ***  ** ********** ***** *** ** *** ** *** ******************
;** ******  ****  ** * * * ** ********** ***** *** ** *** ** *** ******************
;** **  **        ** ** ** **    ******* ***** *** ** *** **    *******************
;** *** ** ****** ** ***** ** ********** ***** *** ** *** ** **********************
;**     ** ****** ** ***** **    *******     **   ****   *** **********************
;**********************************************************************************
;Main Game Loop
While Not KeyDown( 1 )																		;If the [ESC] has not been hit.
	
			;---- Keys To Move Player
	If KeyDown( 17 ) Or KeyDown( 200 ) 			;Keys [W] , [up]							;Keys that move the Player
		MoveEntity player_mesh , 0 , 0 , 0.5												;Keys that move the Player
	ElseIf KeyDown( 31 ) Or KeyDown( 208 )		;Keys [S] , [down]							;Keys that move the Player
		MoveEntity player_mesh , 0 , 0 , -0.5												;Keys that move the Player
	ElseIf KeyDown( 30 ) Or KeyDown( 203 ) 		;Keys [A] , [left]							;Keys that move the Player
		MoveEntity player_mesh , -0.5 , 0 , 0												;Keys that move the Player
	ElseIf KeyDown( 32 ) Or KeyDown( 205 ) 		;Keys [D] , [right]							;Keys that move the Player
		MoveEntity player_mesh , 0.5 , 0 , 0												;Keys that move the Player
	EndIf																					;Keys that move the Player
	
			;---- Keys To Move Camera
	If KeyDown( 72 ) 			;Keys [NumPad 8]											;Keys that move the Camera
		MoveEntity camera01 , 0 , 0 , 0.5													;Keys that move the Camera
	ElseIf KeyDown( 71 )		;Keys [NumPad 7]											;Keys that move the Camera
		TurnEntity camera01 , 0 , 1 , 0														;Keys that move the Camera
	ElseIf KeyDown( 72 )		;Keys [NumPad 9]											;Keys that move the Camera
		TurnEntity camera01 , 0 , -1 , 0													;Keys that move the Camera
	ElseIf KeyDown( 80 )		;Keys [NumPad 2]											;Keys that move the Camera
		MoveEntity camera01 , 0 , 0 , -0.5													;Keys that move the Camera
;	ElseIf KeyDown( 75 )		;Keys [NumPad 4]											;Keys that move the Camera
;		MoveEntity camera01 , -0.5 , 0 , 0													;Keys that move the Camera
;	ElseIf KeyDown( 77 )		;Keys [NumPad 6]											;Keys that move the Camera
;		MoveEntity camera01 , 0.5 , 0 , 0													;Keys that move the Camera
	EndIf																					;Keys that move the Camera
	
	mxspeed# = MouseXSpeed() / 5															;Checks to see if the mouse is moving horizontally
	myspeed# = MouseYSpeed() / 10															;Checks to see if the mouse is moving vertically
	
	If EntityPitch#( camera01 ) &lt; 5															;If camera position is too low
		myspeed# = .01																		;Mouse speed is moved in opposite direction.
	ElseIf EntityPitch#( camera01 ) &gt; 75 													;If camera position is too high
		myspeed# = -.01																		;Mouse speed is moved in opposite direction.
	EndIf	
	
	TurnEntity player_mesh , 0 , -mxspeed# , 0												;Turn Entity Player LEFT and RIGHT
;	MoveEntity camera01 , 0 , myspeed# , 0													;Lift the camera UP and DOWN
	PointEntity camera01 , player_pivot														;Point the Camera at the Player
	
	MoveMouse( GraphicsWidth() / 2, GraphicsHeight() / 2 )									;Move mouse to screen center
	
	If EntityDistance( camera01 , player_mesh ) &gt; 7											;If the camera gets to far from the player
		MoveEntity camera01 , 0 , 0 , 0.1 													;Move the camera towards the player
	EndIf
	
	
	WireFrame enable 																		;Toggle Wireframe
	If KeyHit( 57 ) 																		;Toggle Wireframe
		enable = 1 - enable																	;Toggle Wireframe
	EndIf																					;Toggle Wireframe
	
	If KeyHit(28)
		ClearWorld
		RPG_WORLD_CREATE()
		
		;---------Load Default Player -------
		player_mesh = CreateSphere()																;Load the default player mesh this must be loaded here or else thhe movement in the game loop or function will return an error.
		PositionEntity player_mesh , 0 , 1 , 0														;Position the entity.
		ScaleEntity player_mesh , 0.5 , 0.5 , 0.5													;Scale the entity.
		EntityType player_mesh , PLYR																;Set entity collision type.
		EntityRadius player_mesh , .5																;Set entity collision radius.
		
		player_pivot = CreatePivot( player_mesh )													;Create a pivot at the center of the player for the camera to follow.
		PositionEntity player_pivot , 0 , 1 , 0														;Position the pivot. (This should be close to the player)
		
		camera01 = CreateCamera( player_mesh )														;Create camera - IMPORTANT This is cleared with the clearworld command and should be created immediately after.														
		PositionEntity camera01 , 0 , 5 , -10														;Position the camera.
;------------------------------------	
		
		
	EndIf
	
	
	CameraProject( camera01 , EntityX( player_mesh ) , EntityY( player_mesh ) , EntityZ( player_mesh ) ) 
	
	
	
	UpdateWorld																				;Update World
	RenderWorld																				;Render World
	
;--------------------------------------	
	
	pitch% = EntityPitch#( camera01 )														;Create a varible to monitor the camera pitch  -  Testing Purposes
	
	Text 0 , 0 , "camera pitch : " + pitch%													;Display Camera pitch
	;normal
	playermeshx% = EntityX( player_mesh )
	playermeshy% = EntityY( player_mesh )
	playermeshz% = EntityZ( player_mesh )
	;absolute(no negative
;	playermeshx% = Abs( EntityX( player_mesh ) ) 
;	playermeshy% = Abs( EntityY( player_mesh ) ) 
;	playermeshz% = Abs( EntityZ( player_mesh ) ) 
	Text 0 , 20 , "Player_mesh - Xpos: " + playermeshx% + " Ypos: " + playermeshy% + " Zpos: " + playermeshz%
	;Text ProjectedX() , ProjectedY() , "player"
	
	RPG_WORLD_HUD()
	
	;Text GraphicsWidth() / 2 , GraphicsHeight() / 2 , "dist : " + EntityDistance( player_mesh , world\room_mesh )
	
	Flip
Wend

End

;For complete Game Notes...
;rather than entering the rooms/areas by moving the player and checking the player position against visible objects
;create a hiddden mesh that emcompasses the visible mesh and then check the distance between the hidden mesh and the player
;with EntityDistance might have to make them in 3d software, this way there positions can be positioned, loaded and checked from an array.
;because of the type of game lowres world , highres room it won't matter if the player is near a door or not.
;

;------------------------------------------------------------------------------------
;------------------------------------------------------------------------------------
;------------------------------- Zone Function [pregameloop ] -----------------------
;------------------------------------------------------------------------------------
;------------------------------------------------------------------------------------
Function RPG_WORLD_CREATE()
	
	;Create Information Constraints
	current_location$ = "WORLD MAP"
	
	ground = CreatePlane()
	PositionEntity ground , 0 , 0 , 0
	texture_ground = LoadTexture( "_textures\grass01.jpg" )
	EntityTexture ground, texture_ground
	
	bounds = CreateCube()
	ScaleEntity bounds , 100 , 20 , 100
	PositionEntity bounds , 0 , 0, 0 
	FlipMesh bounds
	EntityType bounds , ENVIR
	EntityRadius bounds , 1
	
	texture_zonewall = LoadTexture( "_textures\world.jpg" )
	EntityTexture bounds , texture_zonewall
	
	
	
	number_of_rooms% = 6
	For x = 1 To number_of_rooms%
		world.room = New room
		world\room_mesh = CreateCube()
		world\room_xpos = 80
		world\room_ypos = 4
		world\room_zpos = -100 + (x * 30)
		world\room_name$ = "Room "; + x
		;world\room_scale = 
		world\room_texture = LoadTexture( "_textures\brick0" + Rand( 1 , 3 ) + ".jpg" )
		
		
		
		PositionEntity world\room_mesh , world\room_xpos , world\room_ypos , world\room_zpos
		ScaleEntity world\room_mesh , 10 , 5 , 10
		EntityType world\room_mesh , ENVIR
		EntityRadius world\room_mesh , 1
		EntityTexture world\room_mesh , world\room_texture
		
	Next
	
	
End Function




Function RPG_WORLD_UPDATE()
	
	
	
End Function


Function RPG_WORLD_HUD()
	
	For world.room = Each room
		;If EntityDistance( player_mesh , world\room_mesh ) &lt; 10			;Doesn't Work
		If EntityDistance( player_mesh , cube ) &lt; 10				;Does Work
			Text ProjectedX() , ProjectedY() , "Within open Distance."
		EndIf
	Next
	
End Function


</textarea> <br><br></td></tr></table><br>
<a name="1233623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just out of curiosity try this:<br><br>If EntityDistance( player_mesh , world\room_mesh , 1) &lt; 10 <br><br></td></tr></table><br>
<a name="1233696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie31</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> returns error "too many parameters" <br><br></td></tr></table><br>
<a name="1233700"></a>

<a name="1233701"></a>

<a name="1233702"></a>

<a name="1233703"></a>

<a name="1233704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Global distfromtoent#

Global ent1
Global ent2

ent1 = CreateCube()
PositionEntity ent1, -10, 1, 10

ent2 = CreateCube()
PositionEntity ent2, 10, 1, 10</textarea><br><br>In Main Loop: <br><br><pre class=code>distfromtoent# = Distance3D#(EntityX#(entfrom, 1), EntityY#(entfrom, 1), EntityZ#(entfrom, 1), EntityX#(entto, 1), EntityY#(entto, 1), EntityZ#(entto, 1))

If distfromtoent# &lt; 10.0
    ;Insert what I should do next here
EndIf</pre><br><br>Insert below code ABOVE Flip and UNDER RenderWorld.<br><br><pre class=code>Text GraphicsWidth()/2, GraphicsHeight()/2, "Distance from ent1 to ent2: "+distfromtoent#, 1, 1</pre><br><br>Finally, below your Main Loop's "Until", "Forever", "Wend", or "End": <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Function Distance3D#(x1#,y1#,z1#,x2#,y2#,z2#)
	x#=x1#-x2#
	y#=y1#-y2#
	z#=z1#-z2#
	d#=Sqr#((x#*x#)+(y#*y#)+(z#*z#))
	Return d#
End Function</textarea><br><br>Hope this helps :)<br><br>Enjoy! :)<br><br>Sincerely, <br><br>~GF <br><br></td></tr></table><br>
<a name="1233708"></a>

<a name="1233709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>		;If EntityDistance( player_mesh , world\room_mesh ) &lt; 10			;Doesn't Work
		If EntityDistance( player_mesh , cube ) &lt; 10				;Does Work</pre>What do "Doesn't Work" and "Does Work" mean?<br><br>In both cases you are testing if EntityDistance( player_mesh, SomethingElse ) is less than 10. The test succeeds (Works) if the distance is in fact less than 10. It fails if the distance is not less than 10.<br><br>Perhaps you were expecting EntityDistance to somehow determine the closest points on the entities and measure that distance. For example two spheres, each with radius 1. Suppose the centers are 2 units apart. The spheres are actually touching and you might consider the distance to be zero. <br><br>But EntityDistance is just using the two entity positions, effectively measuring "center to center". The distance is 2. <br><br></td></tr></table><br>
<a name="1233726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Distance3d function is completely pointless as entitydistance does exactly the same thing.  <br><br>Really, if your rooms are uniform in size and placement you should be able to determine which room you are in by the coordinates of the player alone.<br><br>Alternatively, you need to compare the x and z axis' rather than the distance:<br><br>tformpoint 0,0,0,player_mesh, world\room_mesh<br>if abs( tformedx() ) &lt; 10 and abs( tformedz() ) &lt; 10 then<br>  ;I'm in this room<br>Endif <br><br></td></tr></table><br>
<a name="1233727"></a>

<a name="1233728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie31</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I'm am aiming for is a little bit like the old 2d games, where the player is a disproportionate size to the building and when you get within a certain distance you are offered the option to enter the area. then the game loads a higher poly version of the area.(like final fantasy 7 world map.)<br><br><br> <pre class=code>
		;If EntityDistance( player_mesh , world\room_mesh ) &lt; 10			;Doesn't Work
		If EntityDistance( player_mesh , cube ) &lt; 10				;Does Work

</pre><br><br>I like to put notes at the edge of my code when something isn't working. Usually the lines are interchangible and commenting out one and subbing in the other just how I check where the problem is eg.<br>What I mean is :<br><br><br> <pre class=code>

	If EntityDistance( player_mesh , world\room_mesh ) &lt; 10			;Doesn't Work
		Text ProjectedX() , ProjectedY() , "Within open Distance."
	EndIf

</pre><br>this code does not display text as it should when the player_mesh is within 10 units of the room. However <br><br> <pre class=code>

	If EntityDistance( player_mesh , cube ) &lt; 10				
		Text ProjectedX() , ProjectedY() , "Within open Distance."
	EndIf

</pre><br>this code does display text when the player_mesh is within 10 units of the cube.<br><br>I think the problem is that the entitydistance command is having problems retrieving the individual "mesh (world\room_mesh)" position.<br><br>I thought about trying it like guy fawkes suggests, (I actually did use this method in and earlier version of the code ) but I was having problems clearing the world when the player enters a room. In another <a href="/posts.php?topic=102731" target="_blank">thread</a> other members suggested I put as much could into types, which is what I do now.<br><br>What my code currently does.<br>1. creates a giant cube and flips the mesh, and applies collision.<br>2. creates a player and camera and assigns a way to move them.<br>3. creates 6 rooms (using a type), positions, textures and apllies collision.<br><br>Now I want to have text appear when the player is within a certain range of them, which is where I'm stuck?<br><br>Eventually I want the code I want it to do something like this.<br><pre class=code>

	If EntityDistance( player_mesh , world\room_mesh ) &lt; 10			
		Text ProjectedX , ProjectedY ," Press Return to enter " + world\room_name$
		If KeyHit( 28 )
			ClearWorld
			player_mesh = CreateSphere()
			camera01 = CreateCamera()
			loadhighpoly_interior()
		EndIf
	EndIf

</pre> <br><br></td></tr></table><br>
<a name="1233731"></a>

<a name="1233732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I still think the appearance of the cubes is the source of the confusion. If you are close to the surface of a big cube then visually you are near the cube. But you are still far from the center, which is all EntityDistance() cares about.<br><br>In fact, the way the room_mesh cubes are positioned and scaled it seems to be impossible to actually get within 10 units of the center, unless you are inside the cube. <br><br></td></tr></table><br>
<a name="1233754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try creating a simple cube in a 3D modeling app like Blender, create another small cube at the door and name it something like door_pivot, then search for that child once loaded and attach a pivot to it (CreatePivot I think).  Use that pivot to judge distance because as Floyd said you are working with the center of the cube.  Or not :) <br><br></td></tr></table><br>
<a name="1233760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The Distance3d function is completely pointless as entitydistance does exactly the same thing. <br><br>Really, if your rooms are uniform in size and placement you should be able to determine which room you are in by the coordinates of the player alone.<br><br>Alternatively, you need to compare the x and z axis' rather than the distance:<br><br>tformpoint 0,0,0,player_mesh, world\room_mesh<br>if abs( tformedx() ) &lt; 10 and abs( tformedz() ) &lt; 10 then<br>;I'm in this room<br>Endif <br></div><br><br>VERY good idea, Stevie! :) <br><br></td></tr></table><br>
<a name="1233766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simply print the distance to each of the rooms on screen - you'll soon see what Floyd is talking about.  <br><br>Due to the collisions you have set on the rooms you'll never get within 10 units as the collisions prevent penetration.  Why do you have collisions at all?  There are loads of different ways to do this but here are a few options:<br><br>1.  Check for &lt; 11 instead of 10<br>2.  Check for actual collisions, see entitycollided etc.. to determine which room you are touching rather than using entitydistance.<br>3.  Remove collisions from the rooms and stick with the &lt; 10 entitydistance<br>4.  Remove collisions from the rooms and use tformpoint to check the x and z axis distance. <br><br></td></tr></table><br>
<a name="1233786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie31</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I feel an idiot now. I always assumed that the entitydistance command was the distance between the two closest points on the object. You were right, when I turn off the collisions it worked. Thanks everybody. <br><br></td></tr></table><br>
<a name="1233788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> No prob! ;) <br><br></td></tr></table><br>
<a name="1233847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Couldn't he just move the call to RPG_WORLD_HUD() before UpdateWorld()? <br><br></td></tr></table><br>
<a name="1233905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie31</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heyo,<br><br>I have new problem now with the same if updated code. My code is pretty much the same. This is what is does.<br><br>1. Creates world and objects, and assign movement controls<br>2. Textures and applies collision.<br>3. Checks if the player_mesh is within a certain distance of the room.<br>4. If RETURN is pressed clears the world and remakes it.( for all it just appears as the player mesh position is reset.)<br><br>The problem is when you press RETURN it displays a 'entity does not exist' error in the line.<br><pre class=code>
If EntityDistance( player_mesh , world\room_mesh ) &lt; 13
</pre><br><br>I suspect that it has something to do with where I am placing the function but I don't know much about it.<br><br>If I disable the function.<br><pre class=code>
Function RPG_WORLD_HUD()
	
	For world.room = Each room
	;	CameraProject( camera01 , EntityX( world\room_mesh ) , EntityY( world\room_mesh ) , EntityZ( world\room_mesh ) )  
	;	Text ProjectedX() , ProjectedY() , "" + world\room_name$
		If EntityDistance( player_mesh , world\room_mesh ) &lt; 13
			Text (GraphicsWidth() / 5 ) * 2 , GraphicsHeight() / 2 ," Press RETURN to enter " + world\room_name$
		EndIf
	Next
	
End Function
</pre><br>Then everything works fine? Any Help?<br><br>Complete Code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">


MoveMouse GraphicsWidth() / 2 , GraphicsHeight() / 2										;Move mouse to screen center

;Set Graphics buffer
Graphics3D 800 , 600 , 2 , 2																;Sets the graphics mode to 3d
SetBuffer BackBuffer()																		;Sets the buffer.

;Create Global Names and Variables
Global PLYR = 1																				;Set Collision Type for ' player ' 							type -"PLYR"
Global ENVIR = 2																			;Set Collision Type for ' Scene and non-movable objects ' 	type -"ENVIR"
Global DOOR = 3																				;Set Collision Type for ' door and exit/entry points ' 		type -"DOOR"

;Set Name Place Holders
Global camera01																				;Create Global name 'camera01' to avoid errors if referenced before creation
Global player_pivot																			;Create Global name 'player_pivot' to avoid errors if referenced before creation
Global room01_door
Global player_mesh
Global cube

;Set Varible Place Holders


;Set How Collisions are interpreted 														;This line must be added to the Main Base Program / Default APP
Collisions PLYR , ENVIR , 2 , 1
Collisions PLYR , DOOR , 2 , 2


;---------LOAD DEFAULT WORLD -------
RPG_WORLD_CREATE()	

Type room
	Field room_mesh
	Field room_xpos
	Field room_ypos
	Field room_zpos
	Field room_name$
	Field room_scale
	Field room_texture
End Type

																;This Refers to the function that will load and texture the default world. - IMPORTANT THIS MUST REMAIN AS A FUNCTION
;----------------------------------

;---------Load Default Player -------
player_mesh = CreateSphere()																;Load the default player mesh this must be loaded here or else the movement in the game loop or function will return an error.
PositionEntity player_mesh , 0 , 1 , 0														;Position the entity.
ScaleEntity player_mesh , 0.5 , 0.5 , 0.5													;Scale the entity.
EntityType player_mesh , PLYR																;Set entity collision type.
EntityRadius player_mesh , .5																;Set entity collision radius.

player_pivot = CreatePivot( player_mesh )													;Create a pivot at the center of the player for the camera to follow.
PositionEntity player_pivot , 0 , 1 , 0														;Position the pivot. (This should be close to the player)

camera01 = CreateCamera( player_mesh )														;Create camera - IMPORTANT This is cleared with the clearworld command and should be created immediately after.														
PositionEntity camera01 , 0 , 5 , -10														;Position the camera.
;------------------------------------	

;**********************************************************************************
;**     *****   **** ***** **     ****** ******   ****   ***    *******************
;** *** ***  **  ***  ***  ** ********** ***** *** ** *** ** *** ******************
;** ******  ****  ** * * * ** ********** ***** *** ** *** ** *** ******************
;** **  **        ** ** ** **    ******* ***** *** ** *** **    *******************
;** *** ** ****** ** ***** ** ********** ***** *** ** *** ** **********************
;**     ** ****** ** ***** **    *******     **   ****   *** **********************
;**********************************************************************************
;Main Game Loop
While Not KeyDown( 1 )																		;If the [ESC] has not been hit.
	
			;---- Keys To Move Player
	If KeyDown( 17 ) Or KeyDown( 200 ) 			;Keys [W] , [up]							;Keys that move the Player
		MoveEntity player_mesh , 0 , 0 , 0.5												;Keys that move the Player
	ElseIf KeyDown( 31 ) Or KeyDown( 208 )		;Keys [S] , [down]							;Keys that move the Player
		MoveEntity player_mesh , 0 , 0 , -0.5												;Keys that move the Player
	ElseIf KeyDown( 30 ) Or KeyDown( 203 ) 		;Keys [A] , [left]							;Keys that move the Player
		MoveEntity player_mesh , -0.5 , 0 , 0												;Keys that move the Player
	ElseIf KeyDown( 32 ) Or KeyDown( 205 ) 		;Keys [D] , [right]							;Keys that move the Player
		MoveEntity player_mesh , 0.5 , 0 , 0												;Keys that move the Player
	EndIf																					;Keys that move the Player
	
			;---- Keys To Move Camera
	If KeyDown( 72 ) 			;Keys [NumPad 8]											;Keys that move the Camera
		MoveEntity camera01 , 0 , 0 , 0.5													;Keys that move the Camera
	ElseIf KeyDown( 71 )		;Keys [NumPad 7]											;Keys that move the Camera
		TurnEntity camera01 , 0 , 1 , 0														;Keys that move the Camera
	ElseIf KeyDown( 72 )		;Keys [NumPad 9]											;Keys that move the Camera
		TurnEntity camera01 , 0 , -1 , 0													;Keys that move the Camera
	ElseIf KeyDown( 80 )		;Keys [NumPad 2]											;Keys that move the Camera
		MoveEntity camera01 , 0 , 0 , -0.5													;Keys that move the Camera
;	ElseIf KeyDown( 75 )		;Keys [NumPad 4]											;Keys that move the Camera
;		MoveEntity camera01 , -0.5 , 0 , 0													;Keys that move the Camera
;	ElseIf KeyDown( 77 )		;Keys [NumPad 6]											;Keys that move the Camera
;		MoveEntity camera01 , 0.5 , 0 , 0													;Keys that move the Camera
	EndIf																					;Keys that move the Camera
	
	mxspeed# = MouseXSpeed() / 5															;Checks to see if the mouse is moving horizontally
	myspeed# = MouseYSpeed() / 10															;Checks to see if the mouse is moving vertically
	
	If EntityPitch#( camera01 ) &lt; 5															;If camera position is too low
		myspeed# = .01																		;Mouse speed is moved in opposite direction.
	ElseIf EntityPitch#( camera01 ) &gt; 75 													;If camera position is too high
		myspeed# = -.01																		;Mouse speed is moved in opposite direction.
	EndIf	
	
	TurnEntity player_mesh , 0 , -mxspeed# , 0												;Turn Entity Player LEFT and RIGHT
;	MoveEntity camera01 , 0 , myspeed# , 0													;Lift the camera UP and DOWN
	PointEntity camera01 , player_pivot														;Point the Camera at the Player
	
	MoveMouse( GraphicsWidth() / 2, GraphicsHeight() / 2 )									;Move mouse to screen center
	
	If EntityDistance( camera01 , player_mesh ) &gt; 7											;If the camera gets to far from the player
		MoveEntity camera01 , 0 , 0 , 0.1 													;Move the camera towards the player
	EndIf
	
	
	WireFrame enable 																		;Toggle Wireframe
	If KeyHit( 57 ) 																		;Toggle Wireframe
		enable = 1 - enable																	;Toggle Wireframe
	EndIf																					;Toggle Wireframe
	
	
	If KeyHit(28)
		
		ClearWorld
		RPG_WORLD_CREATE()
		;---------Load Default Player -------
		player_mesh = CreateSphere()																;Load the default player mesh this must be loaded here or else thhe movement in the game loop or function will return an error.
		PositionEntity player_mesh , 0 , 1 , 0														;Position the entity.
		ScaleEntity player_mesh , 0.5 , 0.5 , 0.5													;Scale the entity.
		EntityType player_mesh , PLYR																;Set entity collision type.
		EntityRadius player_mesh , .5																;Set entity collision radius.
		player_pivot = CreatePivot( player_mesh )													;Create a pivot at the center of the player for the camera to follow.
		PositionEntity player_pivot , 0 , 1 , 0														;Position the pivot. (This should be close to the player)
		camera01 = CreateCamera( player_mesh )														;Create camera - IMPORTANT This is cleared with the clearworld command and should be created immediately after.														
		PositionEntity camera01 , 0 , 5 , -10														;Position the camera.
		
	EndIf
	
	UpdateWorld																				;Update World
	RenderWorld																				;Render World
	
;--------------------------------------	
	
	
	RPG_WORLD_HUD()
	
	
	Flip
Wend

End

;For complete Game Notes...
;rather than entering the rooms/areas by moving the player and checking the player position against visible objects
;create a hiddden mesh that emcompasses the visible mesh and then check the distance between the hidden mesh and the player
;with EntityDistance might have to make them in 3d software, this way there positions can be positioned, loaded and checked from an array.
;because of the type of game lowres world , highres room it won't matter if the player is near a door or not.
;

;------------------------------------------------------------------------------------
;------------------------------------------------------------------------------------
;------------------------------- Zone Function [pregameloop ] -----------------------
;------------------------------------------------------------------------------------
;------------------------------------------------------------------------------------
Function RPG_WORLD_CREATE()
	
	;Create Information Constraints
	current_location$ = "WORLD MAP"
	
	ground = CreatePlane()
	PositionEntity ground , 0 , 0 , 0
	texture_ground = LoadTexture( "_textures\grass01.jpg" )
	EntityTexture ground, texture_ground
	
	bounds = CreateCube()
	ScaleEntity bounds , 100 , 20 , 100
	PositionEntity bounds , 0 , 0, 0 
	FlipMesh bounds
	EntityType bounds , ENVIR
	EntityRadius bounds , 1
	
	texture_zonewall = LoadTexture( "_textures\world.jpg" )
	EntityTexture bounds , texture_zonewall
	
	x_number_of_rooms% = 6
	For x = 1 To x_number_of_rooms%
		world.room = New room
		world\room_mesh = CreateCube()
		world\room_xpos = 80
		world\room_ypos = 4
		world\room_zpos = -100 + (x * 30)
		world\room_name$ = "Room " + x
		world\room_texture = LoadTexture( "_textures\brick0" + Rand( 1 , 3 ) + ".jpg" )
		PositionEntity world\room_mesh , world\room_xpos , world\room_ypos , world\room_zpos
		ScaleEntity world\room_mesh , 10 , 5 , 10
		EntityType world\room_mesh , DOOR
		EntityRadius world\room_mesh , 1
		EntityTexture world\room_mesh , world\room_texture
	Next
	
	HidePointer
	
End Function


Function RPG_WORLD_HUD()
	
	For world.room = Each room
	;	CameraProject( camera01 , EntityX( world\room_mesh ) , EntityY( world\room_mesh ) , EntityZ( world\room_mesh ) )  
	;	Text ProjectedX() , ProjectedY() , "" + world\room_name$
		If EntityDistance( player_mesh , world\room_mesh ) &lt; 13
			Text (GraphicsWidth() / 5 ) * 2 , GraphicsHeight() / 2 ," Press RETURN to enter " + world\room_name$
		EndIf
	Next
	
End Function


</textarea> <br><br></td></tr></table><br>
<a name="1233923"></a>

<a name="1233924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you activate the debugmode (Menu&gt;Program&gt;Debug enabled), you can see which is the entity which does not exist anymore in the BlitzDebugger window (displayed at the bottom after you have built and ran the code)<br><br>Also learn to use Debuglog(""), this is a really useful command to find and then fix bugs. <br><br></td></tr></table><br>
<a name="1233963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not immediately clear how to tell if an entity exists.<br><br><pre class=code>Graphics3D 600, 400, 0, 2
SetBuffer FrontBuffer()
Print

Global ent  ; will be an entity

Print "value of ent before creating anything: " + ent

ent = CreateSphere()
Print "           ent is now a sphere, value: " + ent

FreeEntity ent
Print "entity freed, no longer exists, value: " + ent

; ent does not exist, but value of variable is still non-zero.
; If ent had been reset to zero you could test if it exists.
; That doesn't happen automatically, but you can do it yourself.

ent = 0  ; do this after 'FreeEntity ent'

WaitKey</pre><br>If you manually set the entity variable to zero after FreeEntity then you can later test if that variable is zero to see if an entity exists.<br><br>You have to do this for each freed entity. The scattergun approach of ClearWorld will just make things unmanageable, as you have discovered. <br><br></td></tr></table><br>
<a name="1233971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with what Floyd explained, i do the same. <br><br></td></tr></table><br>
<a name="1234130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie31</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure I understand but I wrote this:<br><pre class=code>
		If KeyHit(28)
		
		;Free entity.
		free_world_type()
		
		ClearWorld()
		
		RPG_WORLD_CREATE()
		;---------Load Default Player -------
		player_mesh = CreateSphere()																;Load the default player mesh this must be loaded here or else thhe movement in the game loop or function will return an error.
		PositionEntity player_mesh , 0 , 1 , 0														;Position the entity.
		ScaleEntity player_mesh , 0.5 , 0.5 , 0.5													;Scale the entity.
		EntityType player_mesh , PLYR																;Set entity collision type.
		EntityRadius player_mesh , .5																;Set entity collision radius.
		player_pivot = CreatePivot( player_mesh )													;Create a pivot at the center of the player for the camera to follow.
		PositionEntity player_pivot , 0 , 1 , 0														;Position the pivot. (This should be close to the player)
		camera01 = CreateCamera( player_mesh )														;Create camera - IMPORTANT This is cleared with the clearworld command and should be created immediately after.														
		PositionEntity camera01 , 0 , 5 , -10														;Position the camera.
		
	EndIf
	
	UpdateWorld																				;Update World
	RenderWorld																				;Render World
	
;--------------------------------------	
	
	RPG_HUD_TEST()
	
	RPG_WORLD_HUD()
	
	Flip



;-----
In functions
;-----

Function free_world_type()
	
	For world.room = Each room
		FreeEntity world\room_mesh
		world\room_mesh = 0
	Next
	
End Function

Function RPG_HUD_TEST()
	
	Color 255 , 255 , 255
	Rect 0 , 0  , 500 , 100 , 1
	For world.room = Each room
		
		If world\room_mesh &lt;&gt; 0
			Color 0 , 0 , 0
			Text 0 , world\room_test_text_pos_y ," entity '" + world\room_mesh + "' exists, and is named '" + world\room_name$ + "'."
		ElseIf world\room_mesh = 0
			Text 0 , world\room_test_text_pos_y ," entity '" + world\room_mesh + "' does not exists."
		EndIf
		
	Next
End Function


Function RPG_WORLD_HUD()
	
	For world.room = Each room
		CameraProject( camera01 , EntityX( world\room_mesh ) , EntityY( world\room_mesh ) , EntityZ( world\room_mesh ) )  
		Text ProjectedX() , ProjectedY() , "" + world\room_mesh
		If EntityDistance( player_mesh , world\room_mesh ) &lt; 13
			Text (GraphicsWidth() / 5 ) * 2 , GraphicsHeight() / 2 ," Press RETURN to enter " + world\room_name$
		EndIf
	Next
	
End Function

</pre><br><br>but I still get 'entity does not exist' error. <br><br></td></tr></table><br>
<a name="1234135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Which entity does not exist ?<br>At which line ?<br><br>See in the BlitzDebugger window <br><br></td></tr></table><br>
<a name="1234143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie31</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found the problem. When I was using clearworld, I was clearing the old type (world\room_mesh) and creating a new one but my entitydistance  was trying to find the old type which didn't exist any longer. The solution was to delete the old type immediately before clearworld so it could start again.<br><pre class=code>
	For world.room = Each room
		Delete world
	Next
</pre><br><br>My code now that works:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">


MoveMouse GraphicsWidth() / 2 , GraphicsHeight() / 2										;Move mouse to screen center

;Set Graphics buffer
Graphics3D 800 , 600 , 2 , 2																;Sets the graphics mode to 3d
SetBuffer BackBuffer()																		;Sets the buffer.

;Create Global Names and Variables
Global PLYR = 1																				;Set Collision Type for ' player ' 							type -"PLYR"
Global ENVIR = 2																			;Set Collision Type for ' Scene and non-movable objects ' 	type -"ENVIR"
Global DOOR = 3																				;Set Collision Type for ' door and exit/entry points ' 		type -"DOOR"
Global clears% = 0

;Global Save Data
Global saved_area_loc$
Global saved_pos_X%
Global saved_pos_Y%
Global saved_pos_Z%
Global saved_rot_X%
Global saved_rot_Y%
Global saved_rot_Z%

;Set Name Place Holders
Global camera01																				;Create Global name 'camera01' to avoid errors if referenced before creation
Global player_pivot																			;Create Global name 'player_pivot' to avoid errors if referenced before creation
Global room01_door
Global player_mesh
Global cube

;Set Varible Place Holders


;Set How Collisions are interpreted 														;This line must be added to the Main Base Program / Default APP
Collisions PLYR , ENVIR , 2 , 1
Collisions PLYR , DOOR , 2 , 2


;---------LOAD DEFAULT WORLD -------
RPG_WORLD_CREATE()	

Type room
	Field room_mesh
	Field room_xpos
	Field room_ypos
	Field room_zpos
	Field room_name$
	Field room_test_text_pos_y
	Field room_texture
End Type

																;This Refers to the function that will load and texture the default world. - IMPORTANT THIS MUST REMAIN AS A FUNCTION
;----------------------------------

;---------Load Default Player -------
player_mesh = CreateSphere()																;Load the default player mesh this must be loaded here or else the movement in the game loop or function will return an error.
PositionEntity player_mesh , 0 , 1 , 0														;Position the entity.
ScaleEntity player_mesh , 0.5 , 0.5 , 0.5													;Scale the entity.
EntityType player_mesh , PLYR																;Set entity collision type.
EntityRadius player_mesh , .5																;Set entity collision radius.

player_pivot = CreatePivot( player_mesh )													;Create a pivot at the center of the player for the camera to follow.
PositionEntity player_pivot , 0 , 1 , 0														;Position the pivot. (This should be close to the player)

camera01 = CreateCamera( player_mesh )														;Create camera - IMPORTANT This is cleared with the clearworld command and should be created immediately after.														
PositionEntity camera01 , 0 , 5 , -10														;Position the camera.
;------------------------------------	

;**********************************************************************************
;**     *****   **** ***** **     ****** ******   ****   ***    *******************
;** *** ***  **  ***  ***  ** ********** ***** *** ** *** ** *** ******************
;** ******  ****  ** * * * ** ********** ***** *** ** *** ** *** ******************
;** **  **        ** ** ** **    ******* ***** *** ** *** **    *******************
;** *** ** ****** ** ***** ** ********** ***** *** ** *** ** **********************
;**     ** ****** ** ***** **    *******     **   ****   *** **********************
;**********************************************************************************
;Main Game Loop
While Not KeyDown( 1 )																		;If the [ESC] has not been hit.
	Cls
			;---- Keys To Move Player
	If KeyDown( 17 ) Or KeyDown( 200 ) 			;Keys [W] , [up]							;Keys that move the Player
		MoveEntity player_mesh , 0 , 0 , 0.5												;Keys that move the Player
	ElseIf KeyDown( 31 ) Or KeyDown( 208 )		;Keys [S] , [down]							;Keys that move the Player
		MoveEntity player_mesh , 0 , 0 , -0.5												;Keys that move the Player
	ElseIf KeyDown( 30 ) Or KeyDown( 203 ) 		;Keys [A] , [left]							;Keys that move the Player
		MoveEntity player_mesh , -0.5 , 0 , 0												;Keys that move the Player
	ElseIf KeyDown( 32 ) Or KeyDown( 205 ) 		;Keys [D] , [right]							;Keys that move the Player
		MoveEntity player_mesh , 0.5 , 0 , 0												;Keys that move the Player
	EndIf																					;Keys that move the Player
	
			;---- Keys To Move Camera
	If KeyDown( 72 ) 			;Keys [NumPad 8]											;Keys that move the Camera
		MoveEntity camera01 , 0 , 0 , 0.5													;Keys that move the Camera
	ElseIf KeyDown( 71 )		;Keys [NumPad 7]											;Keys that move the Camera
		TurnEntity camera01 , 0 , 1 , 0														;Keys that move the Camera
	ElseIf KeyDown( 72 )		;Keys [NumPad 9]											;Keys that move the Camera
		TurnEntity camera01 , 0 , -1 , 0													;Keys that move the Camera
	ElseIf KeyDown( 80 )		;Keys [NumPad 2]											;Keys that move the Camera
		MoveEntity camera01 , 0 , 0 , -0.5													;Keys that move the Camera
;	ElseIf KeyDown( 75 )		;Keys [NumPad 4]											;Keys that move the Camera
;		MoveEntity camera01 , -0.5 , 0 , 0													;Keys that move the Camera
;	ElseIf KeyDown( 77 )		;Keys [NumPad 6]											;Keys that move the Camera
;		MoveEntity camera01 , 0.5 , 0 , 0													;Keys that move the Camera
	EndIf																					;Keys that move the Camera
	
	mxspeed# = MouseXSpeed() / 5															;Checks to see if the mouse is moving horizontally
	myspeed# = MouseYSpeed() / 10															;Checks to see if the mouse is moving vertically
	
	If EntityPitch#( camera01 ) &lt; 5															;If camera position is too low
		myspeed# = .01																		;Mouse speed is moved in opposite direction.
	ElseIf EntityPitch#( camera01 ) &gt; 75 													;If camera position is too high
		myspeed# = -.01																		;Mouse speed is moved in opposite direction.
	EndIf	
	
	TurnEntity player_mesh , 0 , -mxspeed# , 0												;Turn Entity Player LEFT and RIGHT
;	MoveEntity camera01 , 0 , myspeed# , 0													;Lift the camera UP and DOWN
	PointEntity camera01 , player_pivot														;Point the Camera at the Player
	
	MoveMouse( GraphicsWidth() / 2, GraphicsHeight() / 2 )									;Move mouse to screen center
	
	If EntityDistance( camera01 , player_mesh ) &gt; 7											;If the camera gets to far from the player
		MoveEntity camera01 , 0 , 0 , 0.1 													;Move the camera towards the player
	EndIf
	
	
	WireFrame enable 																		;Toggle Wireframe
	If KeyHit( 57 ) 																		;Toggle Wireframe
		enable = 1 - enable																	;Toggle Wireframe
	EndIf																					;Toggle Wireframe
	
	If KeyHit( 10 ) 																		;Toggle Wireframe
		hud_on = 1 - hud_on																	;Toggle Wireframe
	EndIf
	
	
	If KeyHit(28)
		
		;Free entity.
		free_world_type()																	;Delete Old Types
		Save_Player_Data()
		
		ClearWorld()
		
		RPG_WORLD_CREATE()
		;---------Load Default Player -------
		player_mesh = CreateSphere()																;Load the default player mesh this must be loaded here or else thhe movement in the game loop or function will return an error.
		PositionEntity player_mesh , saved_pos_X%  , saved_pos_Y%  , saved_pos_Z% 					;Position the entity.
;		PositionEntity player_mesh , 0 , 1 , 0														;Position the entity.
		ScaleEntity player_mesh , 0.5 , 0.5 , 0.5													;Scale the entity.
		EntityType player_mesh , PLYR																;Set entity collision type.
		EntityRadius player_mesh , .5																;Set entity collision radius.
		player_pivot = CreatePivot( player_mesh )													;Create a pivot at the center of the player for the camera to follow.
		PositionEntity player_pivot , 0 , 1 , 0														;Position the pivot. (This should be close to the player)
		camera01 = CreateCamera( player_mesh )														;Create camera - IMPORTANT This is cleared with the clearworld command and should be created immediately after.														
		PositionEntity camera01 , 0 , 5 , -10														;Position the camera.
		
		clears% = clears% + 1
		
	EndIf
	
	If KeyHit( 5 )
		Save_Player_Data()
	EndIf
	
	UpdateWorld																				;Update World
	RenderWorld																				;Render World
	
;--------------------------------------	
	If hud_on = 1
		General_Hud()
	Else
		Text 0 , 0 , "Press [9] to toggle HUD."
	EndIf
	
	RPG_WORLD_HUD()
	
	Flip
Wend

End

;For complete Game Notes...
;rather than entering the rooms/areas by moving the player and checking the player position against visible objects
;create a hiddden mesh that emcompasses the visible mesh and then check the distance between the hidden mesh and the player
;with EntityDistance might have to make them in 3d software, this way there positions can be positioned, loaded and checked from an array.
;because of the type of game lowres world , highres room it won't matter if the player is near a door or not.
;

;------------------------------------------------------------------------------------
;------------------------------------------------------------------------------------
;------------------------------- Zone Function [pregameloop ] -----------------------
;------------------------------------------------------------------------------------
;------------------------------------------------------------------------------------
Function RPG_WORLD_CREATE()
	
	;Create Information Constraints
	current_location$ = "WORLD MAP"
	
	ground = CreatePlane()
	PositionEntity ground , 0 , 0 , 0
	texture_ground = LoadTexture( "_textures\grass01.jpg" )
	EntityTexture ground, texture_ground
	
	bounds = CreateCube()
	ScaleEntity bounds , 100 , 20 , 100
	PositionEntity bounds , 0 , 0, 0 
	FlipMesh bounds
	EntityType bounds , ENVIR
	EntityRadius bounds , 1
	
	texture_zonewall = LoadTexture( "_textures\world.jpg" )
	EntityTexture bounds , texture_zonewall
	
	x_number_of_rooms% = 6
	For x = 1 To x_number_of_rooms%
		world.room = New room
		world\room_mesh = CreateCube()
		world\room_xpos = 80
		world\room_ypos = 4
		world\room_zpos = -100 + (x * 30)
		world\room_name$ = "Room " + x
		world\room_texture = LoadTexture( "_textures\brick0" + Rand( 1 , 3 ) + ".jpg" )
		world\room_test_text_pos_y = ( x * 10 ) + 10
		PositionEntity world\room_mesh , world\room_xpos , world\room_ypos , world\room_zpos
		ScaleEntity world\room_mesh , 10 , 5 , 10
		EntityType world\room_mesh , DOOR
		EntityRadius world\room_mesh , 1
		EntityTexture world\room_mesh , world\room_texture
	Next
	
	HidePointer
	
End Function



Function free_world_type()
	
	For world.room = Each room
		Delete world
	Next
	
End Function




Function RPG_WORLD_HUD()
	
	For world.room = Each room
;		CameraProject( camera01 , EntityX( world\room_mesh ) , EntityY( world\room_mesh ) , EntityZ( world\room_mesh ) )  
;		Text ProjectedX() , ProjectedY() , "" + world\room_mesh
		If EntityDistance( player_mesh , world\room_mesh ) &lt; 13
			Text (GraphicsWidth() / 5 ) * 2 , GraphicsHeight() / 2 ," Press RETURN to enter " + world\room_name$
		EndIf
	Next
	
End Function


Function General_Hud()
	Text 0 , 0 , "World has been cleared '" + clears% + "' times. - TESTING DATA"
	Text 0 , 20 , "Currently you are in '" + current_location$ + "'."
	Text 0 , 40 , "'player_mesh' xpos: " + EntityX( player_mesh )
	Text 0 , 60 , "'player_mesh' ypos: " + EntityY( player_mesh )
	Text 0 , 80 , "'player_mesh' zpos: " + EntityZ( player_mesh )
	
	Text 300 , 40 , "'player_mesh' pitch: " + EntityPitch( player_mesh )
	Text 300 , 60 , "'player_mesh' yaw: " + EntityYaw( player_mesh )
	Text 300 , 80 , "'player_mesh' roll: " + EntityRoll( player_mesh )
	
	
	
	Text 0 , 120 , "Saved position only updates when world clears
	Text 0 , 140 , "'player_mesh' last saved area: '" + saved_area_loc$ + "'"
	Text 0 , 160 , "'player_mesh' last saved xpos: " + saved_pos_X%
	Text 0 , 180 , "'player_mesh' last saved ypos: " + saved_pos_Y%
	Text 0 , 200 , "'player_mesh' last saved zpos: " + saved_pos_Z%
	
	Text 300 , 160 , "'player_mesh' last saved pitch: " + saved_rot_X%
	Text 300 , 180 , "'player_mesh' last saved yaw: " + saved_rot_Y%
	Text 300 , 200 , "'player_mesh' last saved roll: " + saved_rot_Z%
	
End Function



;Function Area Save Data - This Function will store/create the data that is nessecary for a save
Function Save_Player_Data()
	saved_area_loc$ = current_location$
	saved_pos_X% = EntityX( player_mesh )
	saved_pos_Y% = EntityY( player_mesh )
	saved_pos_Z% = EntityZ( player_mesh )
	saved_rot_X% = EntityPitch( player_mesh )
	saved_rot_Y% = EntityYaw( player_mesh )
	saved_rot_Z% = EntityRoll( player_mesh )
End Function


</textarea><br><br>Thanks anyway for your help. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
