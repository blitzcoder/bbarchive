<!DOCTYPE html><html lang="en" ><head ><title >Returning the number of elements in an array</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Returning the number of elements in an array</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Returning the number of elements in an array</a><br><br>
<a name="244917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jondecker76</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is the easiest way to return the number of elements in a given array?<br><br>thanks <br><br></td></tr></table><br>
<a name="244938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Keep track of it when you dimension it? <br><br></td></tr></table><br>
<a name="244941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Insane Games</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't get it.. Arrays are not resizible. Can you give me an example of what you wanna do ?<br><br>Perhapes this will help somehow<br><br><pre class=code>
; We will create an array with 10 positions, but we wont use them all
; We will only count those that are not empty
Global arraySize = 10
Dim someArray$(arraySize)
someArray$(1) = "this"
someArray$(2) = "is"
someArray$(3) = "one"
someArray$(4) = "way"
someArray$(10) = "wtf"

Print returnSize()

Function returnSize()
	Local counter = 0
	For i = 1 To arraySize
		If someArray$(i) &lt;&gt; "" Then counter = counter + 1
	Next
	Return counter
End Function
</pre> <br><br></td></tr></table><br>
<a name="244945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Arrays ARE resizable in Blitz. Do another dim on it, and tada, you have resized it.<br>There is no built-in command to return its current size though, so retaking the example of 'Insane Games', your number of elements is in 'arraySize', and you'll have to set it to the right value by yourself each time you redime the array. <br><br></td></tr></table><br>
<a name="244950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Insane Games</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> as long as i know, when u do another dim, you loose all the informations.. so, they are not resizeble.. you are just erasing and creating a brand new one (with the same name).<br><br>Do the test by yourself..<br><br><pre class=code>
Dim a$(5)

a$(1) = "If it's resizeble, i'll not loose this information"

Dim a$(3)

Print a$(1)
</pre><br><br>You could simulate a resize, creating a temporary array, but there are not really sizesible. <br><br></td></tr></table><br>
<a name="244976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jondecker76</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks guys, that is waht I'm pretty much doing right now - using another variable to track size and using a temp array to retain information. I'm doing this because I use an array of types for a project i'm doing right now, and rather than putting a cap on the information it can hold, I would like it to dynamically resize the arrays at runtime according to how much information it would store. In any case, thanks for your input <br><br></td></tr></table><br>
<a name="244987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ken Lynch</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't need an array of types. Just use types if you want dynamic storage.<br><br>Types work sort of like a database, so you have a list of records and fields which contain the information. Say I have a type called my type and a variable m.MyType<br><br><pre class=code>
type MyType
  Field f1, f2, f3
end type

m.MyType = New MyType ; This creates a new type and m points to it
m.MyType = New MyType ; This creates another new type, m now points to this but our first type still exists
</pre><br><br>We can use types to create a large, dynamic list of data and use just one variable to track it. We can move through the list using<br><br><pre class=code>
m = After m  ; m points to the next item in the list
m = Before m  ; m points to the previous item in the list
m = First m  ; m points to the first item in the list
m = Last m  ; m points to the last item in the list
</pre><br><br>You can see types are very powerful, so you shouldn't need an array. Have a look at the Custom Types in the Language Reference for more info. <br><br></td></tr></table><br>
<a name="244996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be smart, however, to build an array of types IF you needed an index for quick access.  But you don't need to create the array until after you've created all your type instances.  Then you just count the type instances and dimension an array for them. <br><br></td></tr></table><br>
<a name="245020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Do the test by yourself. <br></div>Thanks, I know. I won't debate on vocabulary issues, it's not the point. You just said "I don't get it...", so I replied to point that as you can "create another array and put it in the same variable" (better like this?), the question of JonD was sensible. Don't you have built-in ways to return the size of an array in some languages? Yes you have. Say in Java by example. You create an array (which is an object), and keep track of it through a reference. You could later on replace it with a new array with a different size. Thus you make the equivalent of a "dim" : create a complete new array and assign it to the reference. Does that mean that there is no need to know the size of the array at a given time? Of course not, as the size of the array pointed by the reference changes in time (in fact the array changes, like in blitz).<br>The question WAS sensible. <br><br></td></tr></table><br>
<a name="245120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberseth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another road to go down is banks. Banks are resizable without losing data, AND you can find out the size of the bank. If you want to store integers, your values are stored in groups of 4.<br><br><pre class=code>
myarray = NewArray(100)

For i=0 To 100
    SetArray myarray, i, Rand(5000)
Next

Print GetArray(myarray, 40)
WaitKey()
End

;--------------------------------------
Function NewArray(arraysize)
    arrbank = CreateBank(arraysize*4+4)
    Return arrbank
End Function

Function ReDim(arrbank, newsize)
    ResizeBank arrbank, newsize*4
End Function

Function GetArray(arrbank, iCell)
    Return PeekInt(arrbank, iCell*4)
End Function

Function SetArray(arrbank, iCell, val)
    PokeInt arrbank, iCell*4, val
End Function

Function FreeArray(arrbank)
    FreeBank arrbank
End Function
</pre><br><br>It's also possible to do multi-dimensional banks, just requires a little math, and you'll need to use the CopyBank method to move the bytes around when resizing, otherwise if you resize the width then all the rows could go out of sync. But it's possible. <br><br></td></tr></table><br>
<a name="245302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> see when redimentioning an array, why not create an array the same size as the one you have, copy all the data across to it, resize the one needing resized, then copy back across? <br><br></td></tr></table><br>
<a name="245362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >roboslug</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Warning: partial hijack (and on my first post as well...heh)<br><br>Cyberseth,<br><br>Nice job.  Since you have wrapper functions for this "bank array", you could do multidimensions by storing bank addresses in upper dimensions (the first dimension in a 1x1 points to 2nd bank(N)).<br><br>Partially implemented re-work of your code...<br><br><pre class=code>
myarray = NewArray(100,100)

For i=0 To 50
    For j=0 To 50
       SetArray myarray, i, j, i+j 
       ; easier to check than Rand, result will be dim1+dim2
    Next
Next

Print GetArray(myarray,10,11)

WaitKey()

End



;--------------------------------------

Function NewArray(dim1,dim2)
    arrbank = CreateBank(dim1*4+4)
    For k=0 To dim1
       PokeInt arrbank, k*4,CreateBank(dim2*4+4)
    Next
    Return arrbank
End Function


Function GetArray(arrbank, d1cell,d2cell)
    d2bank = PeekInt(arrbank, d1cell*4)
    Return PeekInt(d2bank,d2cell*4)
End Function


Function SetArray(arrbank,d1cell,d2cell,val)
    d2bank = PeekInt(arrbank, d1cell*4)
    PokeInt d2bank, d2cell*4, val
End Function
</pre><br><br>I worked out a similar solution, only to easily accomodate bank arrays of different data types I point the bank cells at an address of a Type (using Handle on user defined types for string, array, int, float, bank) and the "type" of the type is specified at creation by the user and used in the supporting functions.<br><br>I imagine this uses much overhead and ultimately the thing to do would be more bank manipulation (ie., convert bank cell to string).<br><br>Ken,<br><br>Not only is quick access a great use of arrays, but if you read up on Blitz arrays (not the Dim style) you will see that it is possible to have local arrays as a field type (even of another type).<br><br>Type Object<br>  Field name<br>  Field description<br>End Type<br><br>Type Thing<br>  Field name<br>  Field inventory.Object[100]<br>End Type<br><br>The obvious advantage here is that you can have many "Thing"s that have their own inventory, so even if you have to parse the entire list, it is shorter than searching across (worse case) #_of_Things * #_of_inventories.<br><br>The main disadvantage of blitz arrays is that they cannot be resized at all and cannot be returned from a function (they can however be passed into one!), therefore my post is not really on topic.<br><br>Cheers!<br>-Roboslug <br><br></td></tr></table><br>
<a name="246271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oldefoxx</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good reading, but you guys missed a key point, which I just stumbled upon:  Null.  It DOES exist in Blitz!<br><br><pre class=code>
Null
Parameters
None  

Description
Designates a Null Type object. Useful for making a Type variable point to nothing or checking if a Type object exists. Also, useful for checking that there are still objects left on the end of a Type list using the After command. 

Can used for testing and setting. 

See also: Type, After.  

Example
; Null example 

Type Alien 
Field x,y 
End Type 

a.Alien = New Alien 
If a &lt;&gt; Null Then Print "Alien exists!" 
Delete a 
if a = Null Then Print "Alien gone!"  
</pre> <br><br></td></tr></table><br>
<a name="246291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> So? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
