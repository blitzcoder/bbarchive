<!DOCTYPE html><html lang="en" ><head ><title >What is a z-buffer?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What is a z-buffer?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >What is a z-buffer?</a><br><br>
<a name="680216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drekinn</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm new to the 3D realm of Blitz, and know these must be embarrassingly basic questions, but I'd like to know the following:<br><br>1) What is a z-buffer (and z-buffering)?<br><br>2) What is meant by the term 'normal'?<br><br>I tried scouring the forums for answers but only found obscure references. Any guidance would be most appreciated. <br><br></td></tr></table><br>
<a name="680219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, they are not Blitz specific.  More general 3D related.<br><br>Normals are used in 3D calculations such as in checking what direction a polygon is facing - ie which way a polygon's normal is pointing.<br><br>The 'Blitz' definition is 'Recalculates all normals in a mesh. This is necessary for correct lighting if you have not set surface normals using 'VertexNormals' commands.'<br><br>In Blitz you generally use normals for lighting reasons - but you could use them for backface culling, etc too.<br><br>Here is a link regarding the z-buffer:<br><a href="http://www.toymaker.info/Games/html/z_buffer.html" target="_blank">http://www.toymaker.info/Games/html/z_buffer.html</a><br><br>Blitz also has a wbuffer command.  Type wbuffer into Blitz3D - click on the word, then press F1 for a bit of info.<br><br>You are best Googling your two questions as they are not Blitz-based.  I believe though that there are quirks to the z-buffer in Blitz3D. <br><br></td></tr></table><br>
<a name="680267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> One definition:<br><br><div class="quote"> <br>Z-Buffer<br><br>The z-buffer is a portion of the local memory that is used to store depth information about each pixel in a frame. Depending on what type of process is used, each pixel in the next new frame is checked against the values in the z-buffer - if the new pixel is nearer than the one in the z-buffer, its value overwrites the old one and appears in the final frame. However, if the new pixel is further away, then the old value remains in the z-buffer and the pixel is not displayed. <br>The z-buffer is often referred to as the depth buffer for obvious reasons. <br> <br></div><br><br>Another z/w-article:<br><br><a href="http://www.extremetech.com/article2/0,1697,1171859,00.asp" target="_blank">http://www.extremetech.com/article2/0,1697,1171859,00.asp</a> <br><br></td></tr></table><br>
<a name="680276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> A ZBuffer is an extra integer for each pixel on the screen which specifies how far away that pixel is from the camera.  <br><br>You used to have to sort polygons from far to near and draw them in that order to get them to draw right, and this would not work for polygons that intersected one another, or polygons which were otherwise both behind and in front of another.<br><br>Now, when you draw a polygon, each pixel's depth is calculated, and is compared to the depth of the pixel on the screen.  If the pixel on screen is farther away from the camera, the pixel is drawn, otherwise, it is not.<br><br>Because of this behavior, transparent polygons must all be drawn in a second pass after everything else.  And that is why so many people have problems with stuff like particles near bodies of water.  The transparent polygons do not write their positions to the zbufffer when they are drawn, they only compare themselves to it to see if they should draw.  <br><br>They do this because trying to zbuffer them normally would not produce correct results.  You can't discard a transparent pixel if it is behind antoher transparent pixel after all.  So amongst themselves they are drawn like in the old days, but they are zbuffered with the opaque stuff.  And that is why people also have problems with alpha objects like trees made from a bunch of quads with alpha maps.  So people have to use tricks like the olde days to split up the polygons where the planes intersect and presort them and all that junk. <br><br></td></tr></table><br>
<a name="680279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh btw, the near and far planes for the camera define where 0 and the max z-value are as far as depths go, so the closer these two are together, the more accurate the zbuffer is.  If you need to see really far then you'll have less accurate intersections between polygons and possibly objects behind trees appearing in front of them.  That's why the far plane isn't just set to infinity.  Also, the near plane will have more effect than you expect because te depths are calculated in an exponential way I think.  So so if you move the near plane really close to the camera then you'll be compressing most of the zbuffer depths close to the camera.  Of course if you move it too far away then you see stuff clipped when the camera moves close to it. <br><br></td></tr></table><br>
<a name="680285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>depths are calculated in an exponential way I think<br> <br></div><br><br>Yup - and this is the most important detail to understand... the link I posted describes this in more detail. <br><br></td></tr></table><br>
<a name="680324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.sjbaker.org/steve/omniv/love_your_z_buffer.html" target="_blank">http://www.sjbaker.org/steve/omniv/love_your_z_buffer.html</a> <br><br></td></tr></table><br>
<a name="680519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> also see:<br><br><a href="http://en.wikipedia.org/wiki/Surface_normals" target="_blank">http://en.wikipedia.org/wiki/Surface_normals</a><br><br><a href="http://en.wikipedia.org/wiki/Z-buffer" target="_blank">http://en.wikipedia.org/wiki/Z-buffer</a> <br><br></td></tr></table><br>
<a name="680545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> A Normal is a line that points in totaly NOT the direction of whatever it is the normal to (???)<br><br>For example if a line points straight up and down, (In 2d), then a Normal of that line, is any line that doesnt go up or down at all. ie A left to right line.<br><br>In 3d you have a plain. The plane is left, right , forward and backwards. Now ANY line that DOESNOT go either left nor right nee Forward Nor Backwards is a normal to that plain Ie UP and down <br><br></td></tr></table><br>
<a name="684445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drekinn</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks everyone for the wealth of information; time to study methinks. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
