<!DOCTYPE html><html lang="en" ><head ><title >Sprite attached to mesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sprite attached to mesh</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Sprite attached to mesh</a><br><br>
<a name="396339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do I attach a sprite to a mesh so it moves with the mesh?  I made the mesh the parent of the sprite but that didn't work.  I then tried using AlignToVector along with the picked coordinates but the sprite disappears.  It may be inside the mesh where I can't see it.  I need to attach it to the surface.  I was also trying to paint a color onto the mesh texture which I figured out how to do but I can't obtain the color I want.  I want a very dark red color but I always get a pink color when applying to the flesh tone texture.<br><br>Thanks <br><br></td></tr></table><br>
<a name="396348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> you should use aligntovector, then turn the sprite 180 degrees since it may look away from the camera, then move it a tiny bit forward to prevent it will blink on the surface of the object due to floating point inaccuracy in the zbuffer. and parent it to the object, of course (don't confuse child and parent in the parameters) <br><br></td></tr></table><br>
<a name="396353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Synchronist</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You may wish to check this thread out:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=36125" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=36125</a><br>I think Vorderman provided a solution for this problem. <br><br></td></tr></table><br>
<a name="396764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried jfk’s advise but it still doesn’t work.  It might help to explain what I’m trying to do.  The mesh is a human figure called “man”.  The sprit is called sbhole which is a bullet hole.  I use a type called bhole.  When the man mesh is shot the bullet hole is created at the picked position then the “die” animation plays and the man falls backwards.  I want the sprite to remain attached to the man mesh while he falls.  Here is the code: <br><br>	If PickedEntity()=man Then	<br>		bh.bhole=New bhole<br>		bh\entity=CopyEntity(sbhole)<br>		bh\alpha=1<br>		PositionEntity bh\entity,PickedX(),PickedY(),PickedZ()<br>		EntityParent bh\entity,man<br>		AlignToVector bh\entity,PickedX(),PickedY(),PickedZ(),2<br>		RotateEntity bh\entity,0,0,180<br>		Animate man,3,5,die<br>	EndIf<br><br>Any help is appreciated.<br>Thank <br><br></td></tr></table><br>
<a name="396790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Inner</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd just paint the bullet hole onto the players texture, and re-texture the model, but that's just me. <br><br></td></tr></table><br>
<a name="396796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Inner, can you advise me on how to do that properly because when I try it the color comes out wrong.  How do I get a deep dark red?<br>Thanks <br><br></td></tr></table><br>
<a name="396813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Inner</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> (asuming your using 2d commands to write to the texture)<br><br>Color 128,0,0 (should be a darkish red)<br><br>Color -&gt; RED,GREEN,BLUE .. the greater the number the brighter the color, obviously the lower the number the darker the color.<br><br>alternatively;<br>paint program draw a red dot, of your desired appearence. load the image in as 2d, and draw the image to the texture at desired location, of course then you could get fance and instead of loading in just a static image, you could load in a whole anim strip of diferent types of holes. <br><br></td></tr></table><br>
<a name="396921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> But this way you still need the formula to find the right position on the texture. In the examples from the Blitz CD (no idea if they come with the download version as well) is something named paintmesh or something similar. You could use it to calculate the position of the hole on the texture.<br><br>But IMHO this is all a big trouble, compared to the sprite method. Don't forget, if multiple meshes are using this Texture, they may have that bullethole too, automaticly.<br><br>Blitz optimizes the Loading of Textures, so when you load a texture muliple times, it will use an instance of the first on instead. You really need to create new textures in this case, using CreateTexture and CopyRect from the original one... Big troubles IMHO.<br><br>If I was you, I would write that sprite thing as a seperate test, using a sphere and a sprite. If this once works, you know how to deal with it.<br><br>THere is an other thing you may need to consider: You "man" mesh: is this mesh animated? Did you load it with LoadAnimMesh? Well, then you need to handle the children, and not the top handle. Because LoadAnimMesh is using a Dummy Pivot at the top level of the Model, and it's children are Meshes or bones.<br><br>The easiest way to prevent such troubles would be to attach the Sprite not to "man", but to the handle that was returned by the pick command you used (I guess Linepick or CamerPick)<br><br><pre class=code>
picknick=CameraPick(mousex(),mousey())
if picknick&lt;&gt;0
 positionentity spri,pickedx(),pickedy(),pickedz(),1
 alignToVector spri,pickednx(),pickedny(),pickednz(),1
 turnentity spri,0,180,0
 moveentity spri,0,0,.05
 parententity spri,picknick
endif
</pre> <br><br></td></tr></table><br>
<a name="396954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the problem is the animation of the mesh.  If I move the mesh after attaching the bullet hole the bullet hole moves with mesh but the bullet hole doesn't move with the animation.  When the man mesh falls backwards to the ground the bullet whole stays in it's original position so it ends up hanging in mid air.<br><br>Thanks <br><br></td></tr></table><br>
<a name="396965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nivek</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again Inner.  The idea of drawing the image directly onto the texture is interesting and will probably work in my program since I will only have 1 mesh visible at once.  I wonder if you could explain in more detail how to do it in Blitz3D because I'm not sure.<br><br>Thanks <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
