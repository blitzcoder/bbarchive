<!DOCTYPE html><html lang="en" ><head ><title >blitz3d is CPU killing :S</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >blitz3d is CPU killing :S</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >blitz3d is CPU killing :S</a><br><br>
<a name="331498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> H!,<br><br>Why does Blitz3D using 100% CPU ?<br><br>For example this code<br>----------------------<br><pre class=code>
Graphics 350,200,32,2
While Not KeyHit(1)
Wend
</pre><br><br>I know that this is cool for big games.<br>But i'm making a desktop tool and I don't want that blitz uses 100% so you can't work with other programs (or slower)<br><br>Is this the only way:<br>[code]<br>Graphics 350,200,32,2<br>While Not KeyHit(1)<br>delay 20<br>Wend<br>[code]<br><br>Thanks <br><br></td></tr></table><br>
<a name="331500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that's only due to the debugger running. Have you tried this with a compiled .exe??? <br><br></td></tr></table><br>
<a name="331501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Delay is the only way.  And it works fine.  You probably don't need to Delay for so long tho, even Delay 1 will make a difference. <br><br></td></tr></table><br>
<a name="331507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ow k MasterBreak.<br><br>I place Delay 1 and it works oke.<br><br>I'm wondering if using 100% for is better then using delay 1<br><br>Thanks. <br><br></td></tr></table><br>
<a name="331525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Weird, I find that anything less than "delay 8" doesn't give up the processor reliably.  I go with "delay 10" myself. <br><br></td></tr></table><br>
<a name="331635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You really shouldn't do any hardcoded delays... as on slower machine your game might need 100% to run correctly. Best way is to adjust the delay so that your game runs with same speed always... and delays rest of the time, leaving resources free for another programs.<br><br>So use this kind of dynamic frame limiting...<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=749" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=749</a> <br><br></td></tr></table><br>
<a name="331642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kanati</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> And while it may work...  Best tool for the job doesn't usually include B3D when talking about apps.  :)<br><br>Kanati <br><br></td></tr></table><br>
<a name="331644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> We're talking about giving up less than 10 milliseconds a frame.  I really don't think it's a major concern. <br><br></td></tr></table><br>
<a name="331656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hansie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> For Applications I highly recommend BlitzPlus. Blitz3D is for games only - well in my opinion <br><br></td></tr></table><br>
<a name="331722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ice9</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Delay 10 causes stutter on my game running on delta time<br>Delay 1 runs OK maybe a stutter here and there.<br>No Delay runs smooth<br>on all it runs<br><br>Delay 10 drops fps to 76fps<br>Delay 1  drops it to  259fps<br>No Delay is a whopping 480fps<br><br>On RareEarth<br><a href="http://www.blitzbasic.com/gallery/view_pic.php?id=196&amp;gallery=&amp;page=3" target="_blank">http://www.blitzbasic.com/gallery/view_pic.php?id=196&amp;gallery=&amp;page=3</a><br><br>If your progam is a tool then a delay may stop crashes<br>If it's a full 3D game then I would say let it hog the <br>processor.<br><br>It seems using Delay at all, even to limit frame rate kills the processor time for your game. I might suggest<br>writing your own delay routine since it seems Delay is<br>doing some other things than just waiting in a loop. <br><br></td></tr></table><br>
<a name="331729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Epicboy: If game runnning at 50fps... 10 millisec is half of the frametime... so it IS a major concern. <br><br></td></tr></table><br>
<a name="331773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> So you have to decide - are you going to take 100% of the CPU or are you going to be a good Windows citizen?<br><br>The trade offs are personal and no one solution is right for everyone.<br><br>*shrug* <br><br></td></tr></table><br>
<a name="331973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is why Mark created BlitzPLUS.  It's an application creation tool.   Blitz3D wasn't designed to share the processor. <br><br></td></tr></table><br>
<a name="332017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GC-Martijn</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ow k , <br>I read all the idea's and comments.<br>And I think that I must buy BlitzPlus.<br><br>And I try this script:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=749" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=749</a><br><br>Thanks for all the info <br><br></td></tr></table><br>
<a name="332090"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mearrin69</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, for 3D level/effect/etc. editors you'd probably want to have 3D which B+ doesn't have without jumping through some hoops. Also, for 3D windowed puzzle or simple games, I'd rather not have my laptop throw a gasket. For these things, using a delay makes sense to *me* at least.<br><br>A full-screen FPS, on the other hand? I guess delta time with no delay makes the best sense.<br><br>No need to make this into a religious debate though - whatever works for you is what you should do.<br>M <br><br></td></tr></table><br>
<a name="332199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also check out <a href="http://www.purebasic.com/" target="_blank">http://www.purebasic.com/</a> for developing apps. It's probably a better choice than BlitzPlus at the moment.<br><br>For a Blitz3D map editor I'm working on, I use the system below to get CPU utilization down to below 0.5% when the program is idle.<br><br><br>; Example psuedocode.<br>---------------------------<br><br>Global do_update<br><br><br>Function check_for_control_input()<br><br>; If control input detected.<br>do_update = True<br><br>End Function<br><br><br>; Main program loop code.<br>If do_update<br><br>do_update = False<br><br>; Do UpdateWorld, RenderWorld, draw 2d graphics, do scheduled pick operations, etc.<br><br>Delay ( 1 )<br><br>Else<br><br>Delay ( 20 )<br><br>EndIf <br><br></td></tr></table><br>
<a name="332350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Klaas</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> why not use a timer ?<br><br><pre class=code>
Graphics 350,200,32,2

timer = CreateTimer(20) ;20 hz timer
While Not KeyHit(1)
	WaitTimer(timer)
Wend
</pre> <br><br></td></tr></table><br>
<a name="332390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a better suggestion...<br><br>Do what I do.  <br><br>PS: <br>Hasfocus() is a function available in the code archives.<br><br><br>This code allows you to specify a maximum framerate at which your game runs, and any extra time at the end of each frame is returned to windows.  Since your screen can only flip between 60 to 85 times a second depending on your frefresh rate, you can set this value to 80 and still get back time.  Also note that even a delay of 0 gives windows focus for a little while as far as I know.<br><br>This code also handles alt tabbing out of the app greacefully, and switching to another app normally when in windowed mode.  It detects if the app has focus, and if not, it runs in a loop with a delay(100) waiting for focus to return.  It then resets the timers so that the game is none the wiser that it has been paused.<br><br>This code also allows one o slow down time merely by dividing the Time_Delta_Sec# value by some amount.  Of course, this presumes that you use the Time_Delta_Sec value to adjust the movements of all your objects my specifying their movement in meters per second and multiplkying that value by the time passed in a particular frame to move them.<br><br>The only drawbacks of this method vs frame interpolation is that it can make physics a little more unstable and it makes recording and playing back demos impossible.  But that's a small price to pay for the incredible simplicity of it compared to frame interpolation methods.<br><br><pre class=code>

Const MAX_FPS = 60

Min_Frame_Time  = Floor(1000.0/Float(MAX_FPS))
Current_Time	= MilliSecs()
Game_Start_Time = Current_Time
	
Repeat
		
	Time_Old		= Current_Time									; Store the time the last frame began.							
	Current_Time 	= MilliSecs()									; Store the time at the start of this frame.
	Time_Delta 		= Current_Time - Time_Old						; Calculate how long the last frame took.
	Time_Delta_Sec# = Float(Time_Delta)/1000.0

	UpdateWorld														; Handle collisions.
	RenderWorld														; Render the current 3D view to the back buffer.
	Flip True														; Swap the back buffer with the front buffer.
				
	Time_Passed = MilliSecs() - Time_Old							; Calculate how long this frame took to render including the flip.
	Time_Left   = Min_Frame_Time-Time_Passed						; Calculate the amount of additional time we should wait to stay below MAX_FPS.
	Delay(Time_Left)												; Delay for that amount of time.
		
	If Not HasFocus()												; If the game lost focus...
	
		Repeat														; Pause the game until focus has been regained.
			Delay(100) 												; Using delay dramatically reduces the amount of CPU power the game uses!
		Until HasFocus()	
	
		Current_Time = MilliSecs()									; Correct the time.  
			
	EndIf
				
Until Quit_Game

</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
