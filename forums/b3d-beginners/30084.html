<!DOCTYPE html><html lang="en" ><head ><title >Gravity woes</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Gravity woes</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Gravity woes</a><br><br>
<a name="319866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Seivad Noj</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello. I am having difficulties with my character's movement/collision with the ground, and it's partly to do with the gravity. <br><br>I'm currently working on having my character walk along the ground in a 3D environment and still keeping ground level. The 3D environment is a .x file with an irregular surface, and some parts include raised pavements/sidewalks, so there are a few different types of elevated ground to tackle. Though the pavements do rise up vertically they are not terribly high - they come up to approximately the top of the player model's shoe. However some slopes are approaching something akin to a 25 degree angle. <br><br>Here is the code which handles this (it's very simple, possibly part of the problem):<br><br>------------------------------------------------------------<br>;Collisions<br>Const TYPE_PLAYER=1,TYPE_CAMERA=2,TYPE_SCENERY=3<br>; Player-to-scenery<br>Collisions TYPE_PLAYER,TYPE_SCENERY,2,3<br><br><br>	gravity#=EntityY(hero\entity)<br>	y_vel#=(gravity-hero\y)<br>	hero\y=gravity<br>	y_vel =-.2<br>	TranslateEntity hero\entity,0,y_vel,0<br>------------------------------------------------------------<br><br>The first bit is outside of any looping bits of code. The third part is inside a Function "updatePlayer", and the middle part is in a "Repeat...Forever" loop.<br><br>Now it's working okay, but there's a couple of big problems I'm having so far: namely some slopes are pretty hard to move up, and the kerb on the side of the street is nearly impossible to traverse unless you run at it at certain angles. I'm guessing it's to do with the "gravity" constantly pulling it down, but I can't think of any other manner with which to keep the player on ground level yet still allow them smooth movement over these parts.<br><br>Any suggestions? Ideas? I'd be very grateful. <br><br></td></tr></table><br>
<a name="319959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am extremly confused by your code. try this:<br><br>const gravity#=-.2<br><br>;Collisions<br>Const TYPE_PLAYER=1,TYPE_CAMERA=2,TYPE_SCENERY=3<br>; Player-to-scenery<br>Collisions TYPE_PLAYER,TYPE_SCENERY,2,3 <br><br>hero\y_vel#=hero\y_vel#+gravity#<br>hero\y=hero\y+hero\y_vel<br>translateentity hero\entity,0,hero\y_vel,0<br><br>note: this might be wrong as I did it in the browser :-/ also, it assumes that you have a y_vel field in type hero. <br><br></td></tr></table><br>
<a name="320021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neo Genesis10</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The answer is simple - sliding collisions. The sliding collisions means that if your walking speed isnt great enough, certain slopes become an uphill struggle (literally). Either turn them off or, better still, alter the speed / gravity settings until you get the desired effect. You may want to add some kind of 'smart gravity' routine which checks if the player is on a slope, but I suggest something simpler unless you're a pro. <br><br></td></tr></table><br>
<a name="320063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Seivad Noj</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay. Thanks for your help everyone. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
