<!DOCTYPE html><html lang="en" ><head ><title >Trouble getting meshes to play well together</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Trouble getting meshes to play well together</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Trouble getting meshes to play well together</a><br><br>
<a name="1070122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know how to ask my question other than to explain what I'm trying to do.  I created a mesh guy in Blender, and put a bone in his hand called "weapon".  I also created a mesh sword for him.  When he is equipped with the sword, I simply positionentity(sword) onto the weapon bone, and rotateentity(sword) to the rotation of the weapon bone.  This works perfectly and looks as if he's carrying the sword throughout all his animations.<br>Next, I've tried to equip him with gloves, but the gloves are big and they cross a joint (his wrist).  To solve this problem I thought to add two bones to the glove, to mimic the two bones on the man (forearm and hand bones).  I entityposition and rotate the forearm glove bone to the forearm man bone (as with the two hand bones), just like I did with the sword, but the results are completely different.  The glove is warped, stretched, and sometimes 90+ units away from the man's hand.<br>What's going on, or is there a better way of doing this?  The only difference I see is that in the sword case I'm "attaching" a mesh to a bone of a mesh, and in the second case I'm "attaching" a bone of one mesh to a bone of another mesh.  I hope this makes sense. <br><br></td></tr></table><br>
<a name="1070130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am no modeler, so just my 2p. Why don't you use EntityParent to attach the sword to the hand's bone? After that, you can use "PositionEntity sword, 0, 0, 0" and "RotateEntity sword, 0, 0, 0" and the sword will follow the hand's animation automatically.<br><br>In the second case, that sounds like a cloth problem. You could do it like this:<br>1. Create an animated human, using bones<br>2. Export human as .b3d<br>3. Delete human, keep wrist and hand bone + their animations<br>4. Create a glove, using existing wrist and hand bone<br>5. Export glove as .b3d<br>In Blitz3D, load them both, and use the same Animate commands on both meshes. <br><br></td></tr></table><br>
<a name="1070150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Parententity works too, I just did it the other way because I'm new and it's the first thing I thought of...I thought about syncing up the animations like you suggested, but the problem with that is my animation commands for my human throughout the program have variable transition speeds (number of frames).  If I wanted to sync them up I'd have to go find each animation command and find how many transition frames I used, otherwise the transition between one animation and another wouldn't be correct.  In hindsight, maybe I shouldn’t have written my game like this, but I'm new so I'm cutting myself some slack. <br><br></td></tr></table><br>
<a name="1070332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can set the animation frame of one animation to the current animation frame of an other animation (well both with the same bones etc.). I am doing this with an NPC clone that is painted white and positioned offscreen to render some shadows. (Because I need to hide it frequently, and Hiding resets the animation). Although, Transitional poses cannot be copied this way, only poses that are stored as animation frames.<br><br>A further problem you'll have to fight is: You can rotate and move bones manually, yes, but the vertices will be unweighted, meaning each vertex will be bound only to its most significantly bound bone. Esp. with clothes that are making use of vertex weighting this will look rather imperfect.<br><br>When you position things and it doesn't work, always make sure you did not positon it locally where a global position was meant ot be (see optional parameter). I am sure it isn't that easy to position and rotate 2 bones of one mesh like 2 bones of an other mesh and get the vertices being deformed correctly automaticly. Most important, first align the ellbow bone, then the hand (due to hierarchy). Again the vertex weighting could make problems here as well.<br><br>I think you want your NPC being able to pickup many diffrent weapons, and you don't want to load the entire NPC with the weapon and or glove? As a rather sophisticated solution you may think about to use some real physics, clothes simulation for the glove. I guess this would look really nice. <br><br></td></tr></table><br>
<a name="1072528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MCP</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you've tried any of the solutions above but you're still having problems with glove/hand deformation another solution could be to make the lower arms interchangable parenting to the upper arm at the elbow or lower down towards the wrist (near the edge of the glove). Both the bare hands and the gloved hands will be boned and animated in exactly the same way performing the same range of movements.<br>It's more work on the modelling/animating side but the results should be satisfactory. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
