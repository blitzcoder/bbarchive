<!DOCTYPE html><html lang="en" ><head ><title >Readpixel Discrepancy</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Readpixel Discrepancy</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Readpixel Discrepancy</a><br><br>
<a name="871270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another strange one that has me banging my head against the desk.<br><br>In full screen, using 'Readpixel' returns a different colour to the one in a windowed screen.<br><br>The command I use is 'Readpixel(x,y) And $FFFFFF'<br><br>Ie, a white (255,255,255) pixel in a window returns 16777215.  In full screen, the same pixel read returns 16317688.<br><br>Any ideas as to what is happening here? <br><br></td></tr></table><br>
<a name="871310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In Windowed mode, you cannot set a colour depth, the color depth will be whatever your desktop is set to. So if your desktop is set to a different colour depth than that which you are setting in fullscreen, this would account for the differences. For example, perhaps your desktop is 16 bit colour but you're setting 32 bit color in fullscreen? That would give you different colour values.<br><br>Although I wouldn't have expected white to be affected like this. <br><br></td></tr></table><br>
<a name="871311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are correct.  My windows colour depth is 32-bit, while my full screen proggy is 16-bit.<br><br>Although, other colours are affected too as well as pure white. <br><br></td></tr></table><br>
<a name="871432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is normal for the other colours as well.  In 32 bit each color component (red/green/blue) uses 8 bits whereas in 16bit it is something like 5bits for 2 of the colors and 6 bits for one of the other components (can't remember if blue/green/red).  Therefore it is highly unlikely that the value returned by readpixel will be the same in both 32 and 16 bit modes. <br><br></td></tr></table><br>
<a name="871518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snarkbait</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just force the depth by specifying it. <br><br></td></tr></table><br>
<a name="871527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Real men search...<br><br><a href="/posts.php?topic=31316" target="_blank"><b><u>http://blitzbasic.com/Community/posts.php?topic=31316</u></b></a><br><br>;op <br><br></td></tr></table><br>
<a name="871626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Just force the depth by specifying it.  <br></div><br>As I said, you can't force color depth in Windowed. It will be the same as your desktop, regardless of what you specify. <br><br></td></tr></table><br>
<a name="871640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Today I wouldn't use 16 Bit anymore, this mentioned problem is only one problem that may appear. It is however nice to offer flexible screensettings, so even old rigs can run your game in a worst case scenario like 640*480*16. Games usually don't need to search for exact RGB matches in pixels. If a tool is doing so, then you may force 32 Bit. <br><br></td></tr></table><br>
<a name="871641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is also the command GetColor, which returns ColorRed/Green/Blue. Maybe you can use it instead? <br><br></td></tr></table><br>
<a name="871790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> There is also the command GetColor, which returns ColorRed/Green/Blue. Maybe you can use it instead?  <br></div><br>Why? The results retrieved with ReadPixel are correct.<br><br><div class="quote"> Today I wouldn't use 16 Bit anymore, this mentioned problem is only one problem that may appear. <br></div><br>Agreed. There's no real reason to support 16 bit any more, but you do have to be aware that the end users desktop could be set at 16 bit, so whether you like it or not, in Windowed, you might be stuck in 16 bit. Perhaps a little bit of jiggery pokery with the Windows API could detect if the desktop is at 16 bit and post an error message warning the user to change to 32 bit color if it is? <br><br></td></tr></table><br>
<a name="871795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you really wanted to maximize how many people played your game, you would support 16-bit. I never really found it much more work to implement. You should try to avoid using read/writepixel if possible, especially in game time. I think 16-bit is 565 in bitmaps and 555 for video. <br><br></td></tr></table><br>
<a name="871833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you really wanted to maximize how many people played your game, you would support 16-bit.  <br></div><br>Well, if your game is really going to work in all other respects on a videocard which is 10-12 years old and probably hasn't had any new drivers released for five years, I guess.<br><br><div class="quote"> I never really found it much more work to implement.  <br></div><br>It's not about the amount of work, it's about making the experience worse for more users than you can improve it. For every one person who really can't use 32 bit colour who gets to play your game in 16 bit colour, ten other people suffer glitchy graphics because you didn't tell them to switch to 32 bit colour in the control panel. You see, you don't just get less colours in 16 bit video mode, you also get a vastly decreased zbuffer, which means far more vertex wobbling and depth sorting issues. Not to mention the obvious texture banding problems. <br><br></td></tr></table><br>
<a name="871879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> PLUS, alot of cards, are actually slower in 16 bit mode. I've read a good few articles on this. Since they work in 32 bit mode, everything has to be stepped down to 16 bit mode. <br><br></td></tr></table><br>
<a name="871954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, my point wasn't really about supporting old video cards (although saying as you have this option in B3D you might as well take it). Quite a few people (like myself) have cards with 16 and 32-bit options, so if a user is in 16-bit mode, as many will be, and the game is run in windowed mode, then you have to use 16-bit. If you don't it won't look pretty. It's fine in full screen though as you can then switch to 32-bit (assuming the card has 32-bit, which it should). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
