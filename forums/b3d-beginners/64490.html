<!DOCTYPE html><html lang="en" ><head ><title >2-player online technique?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2-player online technique?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >2-player online technique?</a><br><br>
<a name="719946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AJirenius</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, Ive come to the point where I want to start with all netcoding for my little game.<br>Now the game is 2-player only and it will contain 2 units fighting each other in a 3d-environment. The units may emit at most 3 bullets each that needs to be synced with each other. Also there will be about 4-6 animated obstacles in the arena so overall there might be around 14 objects that will be synced and transferred over net.<br><br>Now to the question:<br><br>What is the best way to confront this. I guess having a central server is overkill and as this must be a fair online experience I would like not to have one of the 2 players to host as server. Is there a way that the both clients acts like servers and sync each other?<br><br>I know nothing about netcoding (as you already might have noticed).. Could someone out there help me to at least know where to look, libs? example code? even offering their help and team up with me in this game? <br><br></td></tr></table><br>
<a name="719988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snader</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I once was doing this also but my little game stranded on the netcoding part.... so, good luck! <br><br></td></tr></table><br>
<a name="720016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Buggy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would think that there wouldn't be much unfairness if its only 2 players as each player has to send the same information to the other, regardless of who's the host.<br><br>But otherwise I guess you could set up two networks between the two players - one where the host is player 1 and one where the host is player 2 - but I think it would be overkill. <br><br></td></tr></table><br>
<a name="725947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way the commands are set in Blitz, and for ease of use by default, I would recommend setting it as server/client. Not necessarily overkill even if it's more of a peer-run game, but more of an organised approach. Besides even in a server/client setup, the data can still be transmitted as P2P. <br><br></td></tr></table><br>
<a name="726406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here a couple of suggestions:<br><br>1) Use UDP (peer-to-peer).<br><br>2) don't send any position data, instead send which key has been pressed by the player. I mean, if the player_1 presses the "move forward" button, then send once the string "P1_MOVE_F" which means, "player 1 moves forward".<br><br>When the other client receives this message, it should then move the player_1 character forward.<br><br>When the player_1 releases the "move forward" button, then send another message, for example "P1_STOP" and the remote client will stop the player_1 character.<br><br>This way, a very few amount of data is exchanged between the clients.<br><br>3) if you have other objects that are not player controlled, but moved by A.I. using random values, then send the random seed once at the beginning of the main loop, and let the two clients move the objects using that seed. That way, you don't need to send each object position between each client, because each client updates each object position automatically, using the same generated random numbers, thus moving each object in the same way.<br><br>In fact, if you 'sync' two programs to use the same random seed, they generate the same 'pseudo' random sequence. Try it yourself.<br><br>I do this in my BomberLAN game (see my website in my sig) and it works like a charm. In the LAN mode, the monsters are moved with a random A.I. that use the same random seed on each client. This random seed is sent each time a new round begins.<br><br>Bare in mind that when you play in Internet you have to deal with lag time, that is, the time interval that a message from a client needs to reach the other client.<br><br>You may solve this problem introducing a slight pause before to react to a player action; I mean, when the player presses a key, first send the key info to the other client player, then wait a while before to effectively move the player on the first client. This way, when your model moves on your client, it should move also in - quite the - same moment on the other client.<br><br>You have to adjust the pause accordingly with the lag between the clients.<br><br>In other words, if the average lag time between two clients is, say, 200 ms, then the pause you may introduce should be of 200/2 = 100 ms.<br><br>Obviously, you may NOT use the delay command to freeze the program execution; instead, you have to build up a sort of 'command booking list' which is a list of "commands" to be performed after a defined pause.<br><br>Say you press "Fire" on your client. What may happen is:<br><br>--&gt; first, the "P1_FIRE" message is sent to the other client <br><br>--&gt; the "FIRE" command is put in a new element of the commands type collection.<br><br>The commands type collection may contain two fields: the command to be performed as string, and an integer field called pause, which represents the amount of ms to wait before to perform that command. Set the pause to the lag you want to introduce (for example, 100)<br><br>--&gt; in your main loop, check all the elements in the command type collection, and update the field "pause" at each loop.When a pause has expired, then perform the related command - in this example, after 100 ms your local player will fire, and if you have a good timing, your player will fire in the same moment also on the remote client, which should have received and performed the same command after the lag time, which is the same pause you used.<br><br>Don't forget to delete a command from the collection list, once it has been performed!<br><br>An advanced timing can be obtained by checking the lag time at fixed intervals, and updating the pause to be introduced accordingly with the lag variations.<br><br>There are also more sophisticated techniques about this topic; for example, you may "preview" where an entity should be, and position it accordingly. You may search this forum or google to gain more infos about.<br><br>Hope it helps,<br>Sergio. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
