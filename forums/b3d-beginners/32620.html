<!DOCTYPE html><html lang="en" ><head ><title >MOD and Arrays</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MOD and Arrays</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >MOD and Arrays</a><br><br>
<a name="349809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AbbaRue</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do I get a 100 X 100 dynamic Array from 10,000 X 10,000 static array.<br>Let me explain what I mean.<br>Say I have a world of 10,000 X 10,000 Tiles. <br>My play area is 100 X 100 Tiles. <br>Every time I move in any direction by more then 10 Tiles, I want to create a new Array <br>of 100 X 100 Tiles from the static Array with me at the centre. <br>Moved over 10 tiles in the static array of course.<br>How would I do this?  I think it has something to do with the MOD math function. <br>Can anyone help me Please! <br><br></td></tr></table><br>
<a name="349815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The quick cheat way of doing it coz i'm tired. I guess u want something quicker?<br><br>[Code]<br>Dim BigArray(10000,10000)<br>X=720<br>Y=500<br><br>Dim SmallArray(100,100)<br>FOR i = x to x+99<br>for m = y to y+99<br>SmallArray(i-x,m-y) = BigArray(x,y)<br>next:next<br>[/code]<br><br>+BlackD <br><br></td></tr></table><br>
<a name="349816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Er.. let me correct that..<br><pre class=code>
SmallArray(i-x,m-y) = BigArray(i,m)
</pre><br><br>Whew! :D Now of course this doesn't take care of centering your character, etc, but I guess u can see how it works.<br><br>+BlackD <br><br></td></tr></table><br>
<a name="349823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AbbaRue</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh right. Thanks! <br>I was thinking of a one dim. array. That would use MOD. <br>A Two dim. array takes care of that on its own. <br>I'm using a 2 dim. array, so your example will work fine. <br>Steps would just be plus or minus 10 in X or Y. <br><br></td></tr></table><br>
<a name="349825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do note however, that this method is extremely slow.. It would be faster to use a single dim array for sure. But the best way would be to create a bank in memory, dump the single dim array in there. Then simply seek to the part of the bank u want and extract it to a new memory bank which you're using externally. As I said, I'm tired and a newbie so I'm not gonna look it up now :) but check out the BANK commands. Especially CreateBank (size), CopyBank src_bank,src_offset,dest_bank,dest_offset,count, and of course, the peeking and poking to get the data in and out. :) <br><br>Copying 10000 variables at once as used in my example will take a long time (too long for gameplay!). By using CopyBank u can figure out where u are, and just copy that portion of the bank to a new bank which you're using to display your map data.<br><br>+BlackD <br><br></td></tr></table><br>
<a name="349831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using arrays for my map data for my RPG too and am going to have to switch to banks for simple speed issues. It means creating a few custom functions, depending on how complex the data is of course. For instance, if you're using a 10000,10000 map (thats friggin huge man! are u sure u need all that space? :)), you'd have to create a minimum 2 meg bank to store tile data alone, assuming you're using a 256-tile set. And if you're using sprites on-top of that, then you'll also need to know whether or not a location is "walkable" or not, seeing as a castle sprite won't be made up of individual tiles - and so forth and so on.. so add another meg onto that bank for "walkable?" data.<br><br>THEN if it IS a sprite rather than a tile being drawn there, you've got to know what sprite to draw (and what tile to draw underneath it, in most cases). Not to mention knowing if you'll take damage in a certain area, and how much damage to take, or if such-and-such is a secret-passage (ie, a walkable wall tile), etc. <br><br>Perhaps, use map files for different areas so you're working with a much more manageable amount of memory, or read map data directly from the file? 'Dem hard drives are fast these-days. :)<br><br>+BlackD <br><br></td></tr></table><br>
<a name="349836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AbbaRue</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That post was actually just an example, to get my question across. <br>What I really want is to create a dynamic Array of a certain size that contains 2 32 bit numbers per cell. <br>Each of these numbers represents the x,y coords of a 1 meter square in a virtual world. <br>It is virtual because it is never stored anywhere. <br>I will then use those x,y coords in a formula that will dynamically create each 1 meter square on the fly. <br>Kind of like using fractals to create a landscape. <br>Then a number of these squares will be used to form a 3D mesh with height data, texture data, and plantlife data, water, etc. <br>That way every time you return to that mesh it will look the same. <br>This way one could dynamically create an almost endless 3D world. <br>That is why I needed to know how to create a smaller array from a larger, And redo it every so many steps. <br>Every time I get to the end of one mesh I want to create a new one in the direction of travel. <br>The only landscape data stored will be present viewing area. <br>And speed is not a problem because the new mesh is only made when you cross into the next mesh. <br>I actually create a number of meshes in a circle around my present area, <br>then at various points I render new meshes, so the rendering doesn't slow frame rate.<br>When you quit the game, the only data stored will be the location you were at in the virtual world. <br>And any game play info like:  items found, people met, skills learned, etc. <br>With this method I hope to create an entire planet dynamically. <br>I have my mesh tiles made, now I need to apply the height data, and texture data to them dynamically.  <br>My present viewing distance is about 88km in each direction and only uses about 88,000 polys. <br>I use 65 meshes so I need 65 arrays. Each array stores 729 verticies. So writing them doesn't take long.  <br>The 10,000 X 10,000 array was only an example and will be a lot larger. <br>About 16 million X 6 million it takes 1000 meters to make 1 km. and my world will be about 16,000 km by 6,000 km<br>And like I said that array is virtual, it doesn't really exist. <br>I just need to pass the numbers into my 65 arrays, and scroll those numbers as I walk in any direction. <br><br></td></tr></table><br>
<a name="349867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AbbaRue</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I use memory blocks then I will need to use MOD to poke and peek the points, will I not? <br>Unless I use 2 mem blocks, one for x and one for y. <br>Sounds complicated. <br><br></td></tr></table><br>
<a name="349920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, you will not. In order to load a 2dim array from a bank do it like this: set const maxx to the number of x-position you want. Then peek and poke at the point x+y*maxx, that simple! <br><br></td></tr></table><br>
<a name="349959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to stick with arrays you could use offset x/y variables to pick the data directly from the big array.<br><br><pre class=code>
dim level(10000,10000)
for y = 0 to 99
for x = 0 to 99
  leveldata = level(x+offsetX,y+offsetY)
  ; do whatever you need with the data.
next
next
</pre><br><br>ofcause you would have to make sure that the offset variables doesn't go past you max level size minus the number of data you pull. In the above example the limit would be 10000-100. That way you don't have to read the data into another array first. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
