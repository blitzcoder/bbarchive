<!DOCTYPE html><html lang="en" ><head ><title >Do you HAVE to loop through types?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Do you HAVE to loop through types?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Do you HAVE to loop through types?</a><br><br>
<a name="596733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am going to have to make use of large groups of types for my RPG.<br><br>I'm no expert on types, having always loved arrays.<br><br>Now that I need to store so much more data in types, a previous problem that was not really a problem is becoming a major problem.<br><br>It seems (as far as I know) that to find a particular type, you have to loop through the whole group:<br><br>For blah.blahblah= Each blahblah<br><br>Next<br><br><br>This is no good to me.  Can you set the start and end point of the For/Next loop, or does it always have to loop from beginning to end of the type?<br><br>If not, I'll have to subdivide my types - which won't be a major problem. <br><br></td></tr></table><br>
<a name="596736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GitTech</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
type blahblah
        field nextBlah.blahblah
end type

startBlah.blahblah=first blahblah
endBlah.blahblah=last blahblah


currentBlah.blahblah=startBlah
while (currentBlah&lt;&gt;endBlah)
        currentBlah=currentBlah\nextBlah
wend

</pre> <br><br></td></tr></table><br>
<a name="596744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmm, I don't like the way that you have to create a new field.<br><br>Going to have to rethink how I use types - I want to do as little searching/sorting as possible. <br><br></td></tr></table><br>
<a name="596752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> In fact, looking at somebody else's code they put the whole For/Next loop for their types in side the main loop and have separate If/EndIf for each main thing they want to do. <br><br></td></tr></table><br>
<a name="596756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not use an array of types like so ...<br><br><pre class=code>

Type Test
 field x, y
end type

Dim MyType.Test( 100 )

For l = 0 to 100
  MyType(l)  = new Test
  MyType(l)\x = rand(10)
  MyType(l)\y = rand(10)
next

</pre><br><br>Then you can iterate through a specific number of them ...<br><br><pre class=code>
for l = 12 to 22
  x = MyType( l )\x
next
</pre><br><br>Alternatively, depending on how you're doing things you could make use of the object &amp; handle commands.<br><br>Stevie <br><br></td></tr></table><br>
<a name="596759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was keeping away from Object and Handle - purely coz they are not totally legit.<br><br>The array of types idea is more like what I need to use.  I can use standard types for some things and array of types things for others.<br><br>I'll have a play tonight.<br><br>Thanks guys. <br><br></td></tr></table><br>
<a name="596779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PGF</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The idea that you need to loop through types is a misconception that is reinforced seemingly every time that somebody asks about how to use them.<br><br>Somebody always posts an example of for ... each where they iterate through the whole list to find an item with a particular id or name.  You can do that but you don't have to.<br><br>A type is a structure allocated in memory.  It can be referenced by a simple variable, by an element of an array (with one or more dimensions), by a node in a list or stack or queue or tree or hash table ... by any data structure that you want to implement.<br><br>And a type instance can be referenced by more than one method.<br><br>The inbuilt type list that Blitz2D and Blitz3D give you is handy if you want to iterate through the whole list but it does not prevent or do away with the use of more appropriate data structures.<br><br>BlitzMax does not have the automatic inbuilt type list but of course you can implement your own list with similar behaviour in the type definition.<br><br>Object and Handle are another method.  They expose the underlying data structure which Mark Sibly once said was just a C++ map of some type.  Be aware that access to an instance through Object gets slower as the number of objects increases.  I recall that it was something like O(log N) performance.  That's good for general application but a custom access mechanism like say an array will be better in some situations.  Don't search for something if you can locate it exactly.<br><br>So no - You do NOT have to loop through types. <br><br></td></tr></table><br>
<a name="596819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> What he said.<br><br>Think of it this way: if you use the same name twice when loading meshes, you lose the handle to the first mesh, right?  Well, the same is true of types.  Thus, conversely, if you want to retain the handle for the type instance, just make sure to use a unique name.  Now whenever you want a specific type instance, just use its name.<br><br>Of course, variable scope still matters.  You could define the type instance's name as Global at the top of your code, or you can make sure to pass it to/from other functions.<br><br>The really cool thing is that you can refer to type instances directly by name or loop through all of them, as the task demands.  Neither method interferes with the other, giving you greater flexibility.<br><br>---<br><br>Incidentally, Object and Handle are probably not going away any time soon.  I've been using those commands for years with no problem, and at this point Blitz3D isn't changing much more. <br><br></td></tr></table><br>
<a name="596835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maps (aka associative arrays, hash tables) have O(1) complexity, which is why they are so awesome.  See the Wikipedia articles on <a href="http://en.wikipedia.org/wiki/Associative_array" target="_blank">Associative Arrays</a>, <a href="http://en.wikipedia.org/wiki/Hash_table" target="_blank">Hash Tables</a>, and specifically the [a http://en.wikipedia.org/wiki/Talk:Hash_table#O.281.29_should_be_O.28k.29_k_being_the_key-length]talk on O(1)[/a]. <br><br>GitTech's example doesn't need a new Field, you can use the After command.  I wouldn't recommend this approach as it only half-solves the problem - you get multiple linked lists per type, but you have to keep track of start and end nodes, you can't have the same object in two lists, andyou have to make sure that nodes get entered into the correct "list" via Insert.<br><br>I've implemented some <a href="/posts.php?topic=53352" target="_blank">Container Classes</a> which make it easy to store collections of objects using Object() and Handle().  They circumvent the drawbacks of both builtin lists and typed arrays. <br><br></td></tr></table><br>
<a name="596882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GitTech</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>GitTech's example doesn't need a new Field, you can use the After command.<br> <br></div><br><br>Mmm, I had forgotten about the "After" command :-). Thanks for refreshing my memory! :-) <br><br></td></tr></table><br>
<a name="596975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for all the responses.<br><br>Still, not sure of the path to take (in terms of how I want to access and manipulate my data) - a lot of testing to do to see what way to go.<br><br>Of course, I could just be a cheeky little sausage and go back to my sluttish use of arrays. <br><br></td></tr></table><br>
<a name="597017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> It does depend on how many type objects you have. Looping through type objects is lightning quick. As for Object and Handle commands. There about legit as they are going to get. I don't think blitz3d will be receiving too many upgrades, and there's no real reason to remove them. And, again, depending on how many types you have to loop through, using them, might not be slow at all. <br><br></td></tr></table><br>
<a name="597074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think Stevies Examle is the best of both worlds. While it allows you to access things with a simple index, you still got some kind of custom data container.<br><br>It's a fact you can do a lot of mistakes with types. some people create a number of types and then add a field containing the index. Every time they need to access eg. the object with the index 123, they need to loop trough all objects and check the field containing the index. This is rubbish.<br><br>When indexed access is required, I'd suggest to use Stevies code.<br><br>That said I'm not a Types expert at all, and I try not to use them whenever possible. After all I still think not using them will help you stucture your app in a way that runs much faster.<br><br>EG I made a VIS computing app some time ago. Every Surface was colored with a unique Color (ICU, Idendification by Color Uniqueness), beginning somewhere near black.<br>The App then used Readpixelfast to determine the visible surfaces. Now I was capable of using the Color right as an Array index. This is what I call straight forward.<br><br>Also, from the benchmark test I made it seems simple read and write access to int types fields is about 2,25 times slower than array access (using arrays of types, like Stevie suggested).<br>The benchmark did a for loop and then subtracted the time for the same for loop not containing the Array/Types access.<br><br>So personally I think it's best not to use types whenever you can. <br><br></td></tr></table><br>
<a name="597084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Micro-optimization should be done after performance bottlenecks are found; otherwise, you sacrifice clean code and hours of work for a few measley CPU cycles.  Choosing better algorithms can often make huge performance improvements, but it's difficult to test changes if you've painted yourself into a corner by micro-optimizing early.  Donald Knuth put it plainly: "Premature optimization is the root of all evil."<br><br>If you're masochistically obsessed with squeezing every last drop of performance out of your code, perhaps you should try C.  This is Basic, and we should try to keep it so.<br><br>I strongly recommend that people choose the simple route at first.  If you find that your clean code is costing you too much performance, turning an encapsulated solution into an optimized one is easy; going the other way is usually impossible. <br><br></td></tr></table><br>
<a name="597104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not talking about Micro Optimation, but about a diffrent way of thinking. If you do it this way  in the first place, where's the problem? I was using Assembler a lot, maybe that's why I prefere a simple piece of Ram from a types construct.<br><br>And the definition "clean code" really depends. A lot of people seem to think their code is better when it looks object oriented. And at the end of the day they often have nothing but a bunch of attempts.<br><br>I am not masochistically obessed or something, I only said: Don't use types if you don't have to use them. This can be translated as: Don't use types only to have used them, or: Don't use types when there is no need to use types for a specific implementation. Why would you use "Print" when there's no need for printing? Because it's clean? <br><br></td></tr></table><br>
<a name="597182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> There may well be a small speed hit from accessing type fields as opposed to simple arrays, but in most realworld situations, this 'speed hit' is nothing but completely insignificant.<br><br>However, the tradeoff for this speed hit by using types is anything but insignificant. The advantages of using types as opposed to multiple arrays to hold relted data are too many to list here, frankly. Type-like structures were invented for a very good reason.<br><br>It comes down to this: are you writing code for humans that can be easily read/understood/managed, or are you writing code soley for the benefit of the CPU? There are, of course, occasions where the latter is desireable, but the former should be the default.<br><br>TBH, some peoples' dislike of types (and all the benefits they provide) astounds me. <br><br></td></tr></table><br>
<a name="597409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Personally I just think types are definitively NOT the holy grail, au contraire, they lead to lazy programming habits and the programmer gives the total control out of his hands.<br><br>"For Each" - I mean, what is that anyway? It's a mess. Throw a lot of stuff into the sandbox, and then do something with EACH one of them. It's called delegation and leads to rumours and revolutions, or in terms of computer speech: to bugs, lags and instabile apps.<br><br>Did you notice how long it took until somebody actually relaized the bug in the types that was fixed with version 1.91? Don't tell me you know what's going on when you don't realize such a bug for years. <br><br>ok &lt;/ :P&gt; <br><br></td></tr></table><br>
<a name="597874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm not talking about Micro Optimation, but about a diffrent way of thinking. If you do it this way in the first place, where's the problem? <br></div><br><br>How is using several arrays in place of an array of type objects for the purpose of saving a few cycles not micro-optimization?  The problem is that several arrays don't provide you with the encapsulation that one array of objects does.<br><br>(Note that in most languages, field lookup is done at compile time and using structs (type objects) won't cost you a cycle.)<br><br><div class="quote"> A lot of people seem to think their code is better when it looks object oriented. And at the end of the day they often have nothing but a bunch of attempts. <br></div><br><br>Your argument against object-oriented programming is that it isn't effective?  How did you come up with this theory?  A lot of professional programming shops use object-oriented techniques expressly because doing so saves them money.  I suggest you read a book on the subject before making any more wild claims.<br><br><div class="quote"> "For Each" - I mean, what is that anyway? It's a mess.  Throw a lot of stuff into the sandbox, and then do something with EACH one of them. <br></div><br><br>It's called a linked-list, a fairly standard computer science concept.<br><br><div class="quote"> delegation ... leads to ... bugs, lags and instabile [sic] apps. <br></div><br><br>Delegation makes the world go 'round, my friend!  The human brain can only deal with a certain amount of complexity at a time; to make a computer do anything reasonably complex we encapsulate code and then delegate work to it.  When you call a function, you're delegating.  When you use a compiler, you're delegating.<br><br>Really, the only way you could make that argument would be if you only used your own assembler code.  Since you bought a Basic compiler (one of the highest-level languages around!) you automatically lose.<br><br>Please insert coin to continue. <br><br></td></tr></table><br>
<a name="598293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd insert my 2 cent here, but it starts sucking. I mean, why don't you let people program the way they like to? Why has it got to be your way, your god and your religion?<br><br>The fact that I bought Blitz3D doesn't mean I am not using Assembler too. And there was no "argument against object-oriented programming", but one against pseudo-object-oriented basic. I used Java for some time, it's not the way that I don't know what I am talking about.<br><br>I actually released some things, eg, the most complete FPS game engine written in Blitz3D known to the community. And surprise I didn't use types there. Now show me what you did. No offence, but eh, seriously. <br><br>Ok, this was really my last 2 cents. IMHO people may code the way they want. If they choose to go a not so common way, for whatever reason, let them do so. <br><br></td></tr></table><br>
<a name="598678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, this machine only accepts quarters. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
