<!DOCTYPE html><html lang="en" ><head ><title >Using a brush as invisible trigger.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Using a brush as invisible trigger.</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Using a brush as invisible trigger.</a><br><br>
<a name="946778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello all!<br><br>Another n00b question from me!<br><br>I'm working on a 3D game with a world created with 3D world studio and I've build a large brush that needs to be invisible, and then when the player walks in, something happens. It's function is a simple 'area trigger' so to say.<br><br>I got it working so that it turns invisible, but after that, I hit a problem. If I do not setup collision (entitytype, const blabla=3,collisions, and in the loop If entitycollided....)<br><br>It works if all collision is enabled, but I want to let him pass thruogh the invisible brush but if I turn off the collision the action doesn't get triggered.<br><br>Is there a way to use the collision without making the player stop when he makes contact?<br><br><br>Thanks! <br><br></td></tr></table><br>
<a name="946788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not use a pivot? And check to see if the player is within a certain distance of this pivot. Then you don't need to bother with the blitz collision system.<br><br>Tbh, i'm not entirely sure what your explaining up there, so i'm suggesting an alternate method :) <br><br></td></tr></table><br>
<a name="946802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I understand, but I'd like to a brush for it. It has to be possible.<br><br>I would like to make the brush invisible and has no real collision for the player. The idea is than, that when the player walks through the invisible 'ghost' brush some other things get triggered.<br><br>The brush is a child of the map's mesh. It's found through a loop. <br><br></td></tr></table><br>
<a name="946850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you mean by brush? I'm unsure of what you are refering to, as in blitz a brush is a collection of properties, assigned to a surface. <br><br></td></tr></table><br>
<a name="946855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there a way to use the collision without making the player stop when he makes contact? <br></div>No, because a collision system prevents meshes from intersecting with one another by definition. Check out MeshesIntersect() instead, but don't use it because it's relatively slow whereas Ross' suggestion is pretty much optimal. <br><br></td></tr></table><br>
<a name="946884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there a way to use the collision without making the player stop when he makes contact?  <br></div><br><br>This is a frequently asked question and Sledge is right, this won't work by default, but there are some tricks to achieve what you want. Meshesinstersect is pretty slow and IMHO usually not a solution.<br><br>Here's my way:<br><br>After moving the entity, but before the updateworld you will store its entityX etc in some variables. Then you can do the updateworld and after that you can check for collision, as usual. Now, after the collsion check you can Re-position the entitiy to the stored coordinates, then Resetentity it. <br><br></td></tr></table><br>
<a name="946916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got some code in the code archives that will do that for you. Link below.<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1901" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1901</a> <br><br></td></tr></table><br>
<a name="946935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks everybody!!<br><br>@ Ross,<br>Well, I have a half-life modding background and there we call a single placed block, a brush.<br><br>@ Bill,<br>Thanks m8! I will take a look right away! <br><br></td></tr></table><br>
<a name="946939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, i wee bit of a confusion then, sorry :) <br><br></td></tr></table><br>
<a name="946958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem! :)<br><br>Hmm, I kinda wanted to make my water from a brush as well. Then the effect would be, when the player collides with the water he can pass through but get pushed upwards to the surface.<br><br>I kinda know how to set that up, but how would I make the water if I cannot use a brush for that? <br><br></td></tr></table><br>
<a name="946994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mortiis</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use custom entities, I suppose you use the LoadWorld() system that Leadwerks provided for Blitz3D. Just edit the "entites.def" file in your 3d World Studio folder, and in your custom loadworld source file, add your new entity and set it so it loads a chunk of mesh and add your water preferences to it. <br><br></td></tr></table><br>
<a name="947127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have that already, but it gave me a problem when using that setup for invisible triggers.<br><br>The water has the same setup, so I'm afraid I will get the same results. I will try it again. <br><br></td></tr></table><br>
<a name="947324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> For the water problem, you could use the OBB (Oriented Bounding Box) codelib I have at: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1920" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1920</a><br><br>Or you could use a simple AABB (Axially Aligned Bounding Box) test. You can probably find a few examples in the code archives.<br><br>Another option would be to use the Nuclear Glory collision system, which allows moving target entities: <a href="http://nuclearglory.com/products/ngc/" target="_blank">http://nuclearglory.com/products/ngc/</a><br><br>If you want proper bouyancy, then you will probably need to go the full physics engine route. There are a few different physics libs and related tools in the toolbox section of this site ( <a href="http://www.blitzbasic.com/toolbox/toolbox.php" target="_blank">http://www.blitzbasic.com/toolbox/toolbox.php</a> ). You could also try out the Newton wrapper at: <a href="http://www.blitzbasic.com/Community/posts.php?topic=66659" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=66659</a>  ( download from <a href="http://itmbin.nm.ru/newton/newton.zip" target="_blank">http://itmbin.nm.ru/newton/newton.zip</a> - purchase from <a href="https://www.plimus.com/jsp/buynow.jsp?contractId=1684727" target="_blank">https://www.plimus.com/jsp/buynow.jsp?contractId=1684727</a> ) <br><br></td></tr></table><br>
<a name="947433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sph!nx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Bill!<br><br>I happen to have the Nuclear Glory Collision System! I forgot all about that one!<br><br>So, if I understand correctly, I can use the NGC system to let brushes have a collision, without having the player stop on colliding, but still be able to use the collision to have other effects, like a trigger action, or alternate gravity effect (for water)?<br><br><br>Many regards, <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
