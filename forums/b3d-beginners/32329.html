<!DOCTYPE html><html lang="en" ><head ><title >Alpha Image overlay</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Alpha Image overlay</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Alpha Image overlay</a><br><br>
<a name="346191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d4rkl1gh7</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im a new convert to Blitz3d from Darkbasic.  Firstly, only in the single evening after buying Blitz I've noticed vast improvements (and speed and stability) from Darkbasic.<br><br>One thing I've been trying to do since I began various tests is to lay an image with an alpha map (created in Photoshop 7) over everything else that's occuring in the window including 3D and bitmapped background texture.<br><br>I've seen several posts about alpha maps but I'd really like to see the syntax in action.  Simply put, all I need to do is replace the mouse cursor with an image of a bubble.  This obviously is more opaque near the edge and transparent at the center, with highlited area.<br><br>What's the best way to approach this kind of problem?  Keep in mind again that I'm brand new to the syntax.<br><br>Thanks in advance for any help. <br><br></td></tr></table><br>
<a name="346202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's wrong with creating a sprite using your bubble as the texture and using EntityAlpha on it?<br>I suppose this would affect the entire image which isn't what you want though? <br><br></td></tr></table><br>
<a name="346205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use LoadTexture to load the texture.  Look in the help file and you will see that there is a flag to specify that the image has an alpha map with it.  Both TGA and PNG supprot alpha maps, though older versions of phootshop sometimes have problems exporting PNG properly.<br><br>Then create a sprite with createsprite() and change it's size and position with the appropriate sprite commands which will be right there alongside it in the help file.<br><br>Then use EntityTexture to apply the texture to the sprite entity.<br><br>Use EntityFX to set the sprite to full bright and no fog.<br><br>And finally, set EntityOrder ... to a positive value greater than 0 I believe, to make it draw in front of everything else in the scene. <br><br></td></tr></table><br>
<a name="346207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="346212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried to accomplish what DarkLight wanted but I had trouble figuring out the method.<br><br>Sswift, you stated " Look in the help file and you will see that there is a flag to specify that the image has an alpha map with it. Both TGA and PNG supprot alpha maps".  I ususally use PSP4 and I don't see any options in there to create an alpha map for the image (you make it sound like there are TWO images included in one file).<br><br>How would one go about doing this? <br><br></td></tr></table><br>
<a name="346220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simple.  <br><br>In photoshop, on the layers palette, down near the bottom there is a little square with a grey background and I beleive, a white circle in the middle.  That creates a mask for the current layer.  That is one kind of alpha channel.  Delete your background layer and you should see whatever it is you're making on a checkered background that represents transparency.<br><br>Another way that some versions of photoshop have used is if you go to the channels pallete, you can create a new channel down at the bottom by clicking the little sheet of paper.  This will automatically be made into an alpha channel.<br><br>Unfortunately, I can't tell you which one to use, it varies from version to version.  <br><br>There's even a THIRD alpha channel in photoshop which is normally hidden... If you make a new layer, it has no alpha channel, and no alpha mask, yet it is transparent until you draw on a particular area, and if you erase an area, that area becomes transparent.  This I think can also be exported... It behaves as a layer mask.  If you have an active layer mask I think it overrides this transparency.  And the alpha channel is I think an alpha channel for the entire image, but I forget.<br><br>So just try the first method of making a layer and clicking the alpha mask button.<br><br>Oh and to edit that mask, you'll see two thumbnails for the layer.  Click the left one to edit the colors, and click the right to edit the mask.  All transforms will affect only the mask when you have it selected.  That includes stuff like blur, and brightness/contrast. <br><br></td></tr></table><br>
<a name="346221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried loading some of my PNG's with transparency in PS7, and when I do, I notice that there's no layer mask or alpha channel.  So what you might try is simply deleting your background layer and selecting those areas of your image you want transparent and then clearing them.  <br><br>Or if you want more control, make a layer mask as described above, edit that to your liking, and then right click it's thumbnail when you're all set with your pic and select set that to the selection, and then you can clear the stuff you don't want that way. <br><br></td></tr></table><br>
<a name="346222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, and they're not two images.  It's just one image with an extra "channel".  RGB is 3 channels + A for alpha.  Each texture you load in Blitz has those 4 channels, even if you don't use the alpha channel. <br><br></td></tr></table><br>
<a name="346403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d4rkl1gh7</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the help sswift.  That DID work.  The only problem is that I was hoping to do this in a more 2D manner since I had wanted to eventually make various transparent overlays as well as reliable placement on the screen either in a static or dynamic manner such as replacing the mouse cursor.<br><br>Any ideas? <br><br></td></tr></table><br>
<a name="346485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bill Sims</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look in the Code Archives/3D - Graphics for Pixies by skidracer.  This is a good start for using sprites for 2D overlays.  This specific example replaces the mouse cursor with an image.  In  my experience, using sprites and parenting them to the camera (to simulate a 2D HUD, for example) is much faster than using the 2D commands over the 3D world. <br><br></td></tr></table><br>
<a name="346549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Any ideas?"<br><br>Yeah, see that first link in my sig.  Swift GUI.  It allows you to easily create "2D" overlays in 3D.<br><br>For exmaple, you could create a GUI_Sprite and then place that at 320x240, and whatever resolution you're in it's top left corner would be in the center of the screen.  All coordinates are realtive to 640x480 in the system.  The system also allows you to set the order GUI_Objects are drawn in, it supports alpha just like I showed you above with sprites... It will detect for you if the mouse has moved onto or off of any GUI_Object... like a button you make out of a sprite, or a bunch of text.  Speaking of text, the system also allows you to do fast fonts that you can have automaitcally wrap.  The fonts are single surface meshes with a texture.  Much faster than trying to draw with regular 2d fonts in 3D in blitz.  And better looking too.  And lastly the system supports "data bars" and "data arcs" which are like straight and curved bar graphs that you can use as life bars or speedometers and their length and color can change dpeending on what value you put in.  And you speciy the min and max values and the length of the bar or arc.<br><br>It's not free of course, but it is realtively cheap. <br><br></td></tr></table><br>
<a name="347213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d4rkl1gh7</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I sorted it out.  Thanks sswift for the suggestion but I suppose it was more an intelllectual puzzle than anything else. (wanted to sort out Blitz conventions for myself).<br><br>By the way, I'm an artist (3d as well) primarily, and am willing to donate aforementioned skills in return for technical knowledge.  Feel free to view my previous work through Turbosquid at : <a href="http://www.turbosquid.com/HTMLClient/Search/Index.cfm?FuseAction=ProcessSmartSearch&amp;istIncAuthor=DarkLight" target="_blank">http://www.turbosquid.com/HTMLClient/Search/Index.cfm?FuseAction=ProcessSmartSearch&amp;istIncAuthor=DarkLight</a> &amp;blAuthorExact=y&amp;intMediaType=-1&amp;stgBoolean=l&amp;blExternal=TRUE <br><br></td></tr></table><br>
<a name="349799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Get your original image. Extract the alpha channel. Save it as a separate image. Then...<br><br><pre class=code>

original=loadimage("yourimage.bmp")
alpha=loadimage("alphachannel.bmp")
DrawAlphaImage original,0,0,alpha

Function DrawAlphaImage(image,px,py,alphaimage)
; AlphaBlit Function by Simon Harrison (simon@...)
	w=ImageWidth(image)
	h=ImageHeight(image)
	gw=GraphicsWidth()
	gh=GraphicsWidth()
; clip
	x0=px:y0=py
	If x0&lt;0 w=w+x0 x0=0
	If y0&lt;0 h=h+y0 y0=0
	If x0+w&gt;gw w=gw-x0
	If y0+h&gt;gh h=gh-y0
	If w&lt;=0 Or h&lt;=0 Return
	x1=x0+w-1
	y1=y0+h-1
;	x0=px:y0=py
;	x1=px+w-1
;	y1=py+h-1
	ibuffer=ImageBuffer(image)
	abuffer=ImageBuffer(alphaimage)
	gbuffer=GraphicsBuffer()
	LockBuffer ibuffer
	LockBuffer abuffer
	LockBuffer gbuffer
	For y=y0 To y1
		For x=x0 To x1
			alpha=ReadPixelFast(x-px,y-py,abuffer) And 255
			If alpha&gt;1
				rgb0=ReadPixelFast(x-px,y-py,ibuffer)
				rgb1=ReadPixelFast(x,y,gbuffer)
				bit=$80
				rgb=0
				While bit&gt;1
					rgb0=(rgb0 Shr 1) And $7f7f7f
					rgb1=(rgb1 Shr 1) And $7f7f7f
					If (alpha And bit) rgb=rgb+rgb0 Else rgb=rgb+rgb1
					bit=bit Shr 1
				Wend
				WritePixelFast x,y,rgb
			EndIf
		Next
	Next
	UnlockBuffer gbuffer	
	UnlockBuffer ibuffer
	UnlockBuffer abuffer
End Function
</pre><br><br>Since you wanted to do it in a "2D-way", there ya go. Its heavy on the resources so BackBuffer()/Flip and don't use it for moving animated sprites. ;)<br><br>+BlackD <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
