<!DOCTYPE html><html lang="en" ><head ><title >Camera Bounces</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Camera Bounces</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Camera Bounces</a><br><br>
<a name="1209348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Giuliani</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>I have bought a source code in BlitzBasic, everything is already coded and it works great but I would like to make some modifications.<br>Problem, I'm not really gifted in programing, could you help me please?<br><br>the camera in third person works, but it seems to follow the moves of head bone, because when the character runs, the camera "bounces" a lot, it's unbearable!<br>If I try to make a rotation with the camera around the camera it's even worst...<br><br>I copy the parts of the code about camera:<br><br>Global Cam, CamDist# = 10.0, CamPitch#, CamYaw#, CamMode, CamHeight# ; Camera<br>Const CameraViewRange# = 2000<br><br>[...]<br><br>; Main loop ----------------------------------------------------------------------------------------------------<br>; Render game<br>	CameraProjMode(GY_Cam, 0)<br>	RenderWorld()<br>	CameraProjMode(GY_Cam, 1)<br>	; Render GUI<br>	CameraProjMode(Cam, 0)<br>	For S.Scenery = Each Scenery<br>		HideEntity(S\EN)<br>	Next<br>	For T.Terrain = Each Terrain<br>		HideEntity(T\EN)<br>	Next<br>	RenderWorld()<br>	CameraProjMode(Cam, 1)<br>	For S.Scenery = Each Scenery<br>		ShowEntity(S\EN)<br>	Next<br>	For T.Terrain = Each Terrain<br>		ShowEntity(T\EN)<br>	Next<br>	PostRenderWorld()	; DebugBanner update<br><br>	UpdateCamera()                 ; Camera movement<br><br>[...]<br><br>; Move<br>					If dist# &lt; CameraViewRange Then PointEntity(AI\CollisionEN, GPP) ; orig &lt; 1000		; Fix to remove the horizontally floating actor issue - found and submitted by atulos<br>					MoveEntity(AI\CollisionEN, 0.0, 0.0, Speed#)<br><br>[...]<br><br>; Updates the camera<br>Function UpdateCamera()<br><br>	Bonce = FindChild(Me\EN, "Head") : &lt;== I have tried to change "Head" by a pivot that I have created but it doesn't work, I have a camera with Top view?<br>	If Bonce = 0 Then RuntimeError(Me\Actor\Race$ + " actor mesh is missing a 'Head' joint!")<br><br>	; Third person<br>	If CamMode = 0<br>		; Ugly hack to allow repetion of camera positioning if camera ends up too close to the player (see below)<br>		Repeated = False<br>		.CameraRepeat<br>		; Find desired camera position in global units<br>		CamX# = EntityX#(Cam)<br>		CamY# = EntityY#(Cam)<br>		CamZ# = EntityZ#(Cam)<br>		PlayerX# = EntityX#(Me\CollisionEN)<br>		PlayerY# = EntityY#(Me\CollisionEN) + CamHeight#<br>		PlayerZ# = EntityZ#(Me\CollisionEN) <br>		PositionEntity(Cam, PlayerX#, PlayerY#, PlayerZ#)<br>		RotateEntity(Cam, CamPitch#, CamYaw# + EntityYaw#(Me\CollisionEN) + 180.0, 0.0)<br>		MoveEntity(Cam, 0.0, 0.0, -CamDist#)<br>		DesiredX# = EntityX#(Cam)<br>		DesiredY# = EntityY#(Cam) ; + 1.5 by default<br>		DesiredZ# = EntityZ#(Cam) <br>		; Camera collision with scenery (ensure player is always visible)<br>		SetPickModes()<br>		Result = LinePick(PlayerX#, PlayerY#, PlayerZ#, DesiredX# - PlayerX#, DesiredY# - PlayerY#, DesiredZ# - PlayerZ#)<br>		If Result &lt;&gt; 0<br>			DesiredX# = PickedX#()<br>			DesiredY# = PickedY#()<br>			DesiredZ# = PickedZ#()<br>		EndIf<br>		; Smoothly move camera towards the desired position<br>		ActualX# = CamX# + (((DesiredX# - CamX#) / 6.0) * Delta#)<br>		ActualY# = CamY# + (((DesiredY# - CamY#) / 6.0) * Delta#)<br>		ActualZ# = CamZ# + (((DesiredZ# - CamZ#) / 6.0) * Delta#)<br>		PositionEntity(Cam, ActualX#, ActualY#, ActualZ#)<br>		PositionEntity(GPP, PlayerX#, PlayerY#, PlayerZ#)<br>		PointEntity(Cam, GPP)<br>		; If the camera has collided, move it forwards so it doesn't clip the object<br>		If Result &lt;&gt; 0 Then MoveEntity(Cam, 0.0, 0.0, 0.1)<br>		; Flip camera 180 degrees if pushed too close to the player by a wall (prevents flickering)<br>		PositionEntity(GPP, DesiredX#, DesiredY#, DesiredZ#)<br>		If EntityDistance#(GPP, Bonce) &lt; 2.0 And Repeated = False<br>			CamYaw# = CamYaw# + 180.0<br>			Repeated = True<br>			Goto CameraRepeat<br>			Return<br>		EndIf<br>	; First person<br>	Else<br>		PositionEntity(Cam, EntityX#(Bonce, True), EntityY#(Bonce, True), EntityZ#(Bonce, True))<br>		ActualPitch# = CurveValue(EntityPitch#(Cam), -CamPitch#, 1.1)<br>		RotateEntity(Cam, ActualPitch#, EntityYaw#(Me\CollisionEN) + 180.0, 0.0)<br>	EndIf<br><br>	; Underwater camera effects<br>	WasUnderwater = CameraUnderwater<br>	CameraUnderwater = False<br>	For W.Water = Each Water<br>		If EntityY#(Cam) &lt; EntityY#(W\EN)<br>			If Abs(EntityX#(Cam) - EntityX#(W\EN)) &lt; (W\ScaleX# / 2.0)<br>				If Abs(EntityZ#(Cam) - EntityZ#(W\EN)) &lt; (W\ScaleZ# / 2.0)<br>					CameraClsColor Cam, W\Red, W\Green, W\Blue<br>					CameraFogColor Cam, W\Red, W\Green, W\Blue<br>					FogNearNow# = 1.0 : FogFarNow# = 50.0<br>					SetViewDistance(Cam, FogNearNow#, FogFarNow#)<br>					HideEntity SkyEN<br>					HideEntity StarsEN<br>					HideEntity CloudEN<br>					CameraUnderwater = True<br>					Exit<br>				EndIf<br>			EndIf<br>		EndIf<br>	Next<br>	If WasUnderwater = True<br>		If CameraUnderwater = False<br>			SetWeather(CurrentWeather)<br>			ShowEntity SkyEN<br>			ShowEntity StarsEN<br>			ShowEntity CloudEN<br>		EndIf<br>	EndIf<br><br>End Function<br><br>[...]<br><br>Thanks in advance for your help <br><br></td></tr></table><br>
<a name="1209564"></a>

<a name="1209565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>could you help me please?<br> <br></div><br>What do you want exactly ?<br><br>If you want the camera to follow the character but not move with the animations of the character, you have to create a pivot child of the character and position it at the level of the head, then you will be able to position rotate the camera depending on this pivot position and orientation. <br><br></td></tr></table><br>
<a name="1209579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Giuliani</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes thank you for the answer.<br>Yes this is exactly what I try to do, I have created a pivot, attached to the bone head, but in game the camera is in the sky, view from the top. I don't inox exactly how to fix it at head level. <br><br></td></tr></table><br>
<a name="1209583"></a>

<a name="1209584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> No you don't want to set the pivot as a child to the bone head because if it is a child of the bone, it will move/rotate like it.<br>What you want is to set the pivot as a child to the root bone (if it has no animations) and position rotate the pivot with the same position/orientation like the eyes of the character, this way the pivot will not be animated.<br><br>Another way is to create a pivot for the "feet" of the character, then set the character mesh as a child of the "feet", then create another pivot for the "eyes" of the character, set the "eyes" as a child of the "feet", then set the camera as a child of the "eyes".<br><br>See this example :<br><a href="http://blitzbasic.com/codearcs/codearcs.php?code=2933" target="_blank">http://blitzbasic.com/codearcs/codearcs.php?code=2933</a> <br><br></td></tr></table><br>
<a name="1209630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Giuliani</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot RemiD !<br><br>I will study that to adapt it to my code. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
