<!DOCTYPE html><html lang="en" ><head ><title >LinePick problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >LinePick problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >LinePick problem</a><br><br>
<a name="534008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flag</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want that spheres don't cover the boxes. I try to use linePick but it doesn't work. Anyone knows? Is it because i don't use correctly the function or there's another problem?<br><br>Thanx<br>Flag<br><br>my code (it's function createXcibles() which doesn't work) :<br><br><br><br>;Init graphiques<br>Graphics3D 1024,768<br><br>SetBuffer BackBuffer() <br><br><br>Const TYPE_JOUEUR% = 1<br>Const TYPE_DECOR% = 2<br>Const TYPE_ENEMY% = 3<br>Const TYPE_CIBLE% = 4<br>Global fond,cube<br><br>Type Tcible<br>	Field x#,y#,z# ;position<br>	Field vx#,vy#,vz# ; vitesse<br>	Field etat% ; Flag<br>	Field entite<br>	Field Typ%<br>End Type<br><br><br>;Environnement<br>camera=CreateCamera() <br><br><br>Light=CreateLight() <br>;rotateEntity light,90,0,0 <br>PositionEntity light,-10,-1,0<br><br><br><br>oldmillisecs# =MilliSecs()<br><br>loadLevel()<br><br><br><br>SeedRnd (MilliSecs ())<br><br><br><br>;cam<br>CameraProjMode camera,2<br>CameraZoom camera,.35<br>PositionEntity camera,.2,0,-3.4 ;.4,.4<br>PointEntity camera,fond<br>;PointEntity light,fond<br><br>;boucle principale de jeu<br>;========================<br><br>;Init<br>partie = createXcibles(100)<br><br>timeDeb# = MilliSecs()<br>While (Not KeyDown( 1 )) <br><br>	thistime# = MilliSecs()<br>	deltatime#=thistime#-oldmillisecs#<br>	oldmillisecs#=thistime# <br><br>	TurnEntity cube,0,0,.1<br><br>	<br>	UpdateWorld()<br>	ClearCollisions<br>	RenderWorld <br>	Flip <br><br>Wend <br><br> <br><br><br>;Fonctions<br>;=========<br><br><br>Function createxCibles(nb%)<br>Local e <br>	For i%=0 To nb%<br>		k% = 0<br>		c.TCible = New TCible<br>		c\typ% = typ%<br>		c\entite = CreateSphere(16)<br>		ScaleEntity c\entite,.05,.05,.05<br>		EntityType c\entite,TYPE_CIBLE<br>	 	EntityColor c\entite,100,100,180<br>		EntityRadius c\entite,.05<br>		NameEntity c\entite,Handle(c)<br>		<br>		Repeat<br>;			e = 0		<br>			c\x# = Rnd(-2,2)<br>			c\y# = Rnd(-2,2)<br>;	<br>			e = LinePick(c\x#-.02,c\y#-.02,-.5,.07,.07,0)<br>	<br>			If e &lt;&gt; 0 Then	<br>				DebugLog("move  !!!" + k%)<br>				k% = k% + 1<br>			EndIf<br>			<br>		Until (e = 0)<br>		PositionEntity c\entite,c\x#,c\y#,-.5	<br>	Next<br>	<br><br>End Function<br><br><br>Function loadLevel()<br>	;fond<br>	fond=CreateCube() <br>	ScaleEntity fond,2.66,2,.5<br>	PositionEntity fond,0,0,0 <br>	EntityColor fond,100,150,100<br>	<br>	<br>	;niveau<br>	cube=CreateCube() <br>	ScaleMesh cube,.5,.5,.5<br>	PositionEntity cube,-1,0,-.25<br>	RotateMesh  cube,0,0,23<br>	EntityType cube,TYPE_DECOR<br>	EntityPickMode cube,2<br>	NameEntity cube,"cube"<br>	EntityAlpha cube,.4	<br>	<br>	cube2=CreateCube() <br>	ScaleMesh cube2,.3,.3,.5<br>	PositionEntity cube2,1,1,-.25<br>	RotateEntity  cube2,0,0,46<br>	EntityType cube2,TYPE_DECOR<br>	EntityPickMode cube2,2<br>	NameEntity cube2,"cube2"<br>	EntityAlpha cube2,.4<br><br>	<br>	cube3=CreateCube() <br>	ScaleEntity cube3,.6,.05,.5<br>	PositionEntity cube3,0,-1,-.25<br>	EntityType cube3,TYPE_DECOR<br>	EntityPickMode cube3,2<br>	NameEntity cube3,"cube3"<br>	EntityAlpha cube3,.4	<br>	<br>	cube4=CreateCube() <br>	ScaleEntity cube4,.6,.6,.5<br>	PositionEntity cube4,-1,-1.5,-.25<br>	EntityType cube4,TYPE_DECOR<br>	EntityPickMode cube4,2<br>	NameEntity cube4,"cube4"<br>	EntityAlpha cube4,.4<br><br>	<br>End Function<br><br><br><br><br><br>End <br><br></td></tr></table><br>
<a name="534087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> FYI, <a href="/faq/faq_entry.php?id=2" >What are the forum codes?</a><br><br>You just didn't have your linepick command set up correctly.  That's the only line I changed.<br>Since your cubes are at Z position -.25, I set the line pick to check from -1 to 0.<br>I also set it to have a radius of .05 to account for the radius of the sphere.<br><br><pre class=code>Function createxCibles(nb%)
	Local e 
	For i%=0 To nb%
		k% = 0
		c.TCible = New TCible
		c\typ% = typ%
		c\entite = CreateSphere(16)
		ScaleEntity c\entite,.05,.05,.05
		EntityType c\entite,TYPE_CIBLE
		EntityColor c\entite,100,100,180
		EntityRadius c\entite,.05
		NameEntity c\entite,Handle(c)
		
		Repeat
			; e = 0 
			c\x# = Rnd(-2,2)
			c\y# = Rnd(-2,2)
			; 
			e = LinePick(c\x#, c\y#, -1, 0, 0, 1, .05)
			
			If e &lt;&gt; 0 Then 
				DebugLog("move !!!" + k%)
				k% = k% + 1
			EndIf
		
		Until (e = 0)
	PositionEntity c\entite,c\x#,c\y#,-.5 
	Next


End Function</pre><br><br>This basically works.<br>However, it doesn't take into account the fact that one of the cubes is rotating.<br>An easy fix for that could be to place a sphere/cylinder with the same radius as the cube at the rotating cubes position (with the same entitytype) while placing the small spheres, and then erase it later. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
