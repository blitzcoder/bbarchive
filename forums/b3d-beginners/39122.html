<!DOCTYPE html><html lang="en" ><head ><title >Timer not Working :(</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Timer not Working :(</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Timer not Working :(</a><br><br>
<a name="435732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> My game has three guns - a semi, a full auto, and a slow auto. The semi works like this:<br><pre class=code>
If MouseHit(1)
  CreateBullet()
EndIf
</pre><br>or something like that. The full auto looks like this:<br><pre class=code>
If MouseDown(1)
  CreateBullet()
EndIf
</pre><br>But the slow-auto, which uses a timer, doesn't work:<br><pre class=code>
If gun=3
  If MouseDown(1)
    If Millisecs() &gt;= shottimer + 500
      CreateBullet()
      shottimer = Millisecs()
    EndIf
  EndIf
EndIf
</pre><br>Yet it doesn't work. And "shottimer = Millisecs()" is in my Globals section. <br><br></td></tr></table><br>
<a name="435798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Should work. Check the spelling of your variable, since there's no Option Explicit in Blitz (at least, no yet). Perhaps you have declared it as shottiner, while in the code you refer to shottimer (do you see the difference ?).<br><br>Check also that the variable name is not a function name too.<br><br>Remember, to make any variable Global, you have to declare it in this way:<br><pre class=code>
Global shottimer
</pre>What do you mean with "Globals section" ? There's no such a section in Blitz. You make a variable Global only when you declare it as shown above.<br><br>Hope it helps,<br><br>Sergio. <br><br></td></tr></table><br>
<a name="435810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about adding a text message in between the 'IF's which<br>lets you know which bits are being processes and what the current values are? <br><br></td></tr></table><br>
<a name="435934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> oops,... deleted <br><br></td></tr></table><br>
<a name="436075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Globals section" - the place in my program where I declare all the Globals. I check for misspellings. Thanks. <br><br></td></tr></table><br>
<a name="436077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you added the text messages to check these sections of code are being run? I, generally, add a 'called from' parm to my functions (i.e. Createbullet("slowauto")) and<br>then add a text command to the function to display where it was called from. <br><br></td></tr></table><br>
<a name="436078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way, this code:<pre class=code>If MouseDown(1)
  CreateBullet()
EndIf</pre> will probably execute much faster than you wish it to.  You should probably change it the same code you are using for your 'slow auto', but just use a shorter time increment.<br><br>For example, if I remember correctly, an M-16 machine gun can fire about 700 rounds per minute.  That would equate to 11-2/3 rounds per second.  That would equate to a round about every 86 milliseconds.  So use that number in place of the 500 you use for your 'slow auto' mode. <br><br></td></tr></table><br>
<a name="436150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your code is fine, so it's something else. Check the value of the gun variable.<br><br>this works:<br><br><pre class=code>
While Not KeyHit(1) ; start main loop

If MouseDown(1) 

    If MilliSecs() &gt;= shottimer + 500
      Print "bullet";CreateBullet()
      shottimer = MilliSecs()
    EndIf

EndIf			

Wend	;end main loop
End		;end program
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
