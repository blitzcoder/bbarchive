<!DOCTYPE html><html lang="en" ><head ><title >Attaching one mesh to another with animation?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Attaching one mesh to another with animation?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=5" >Blitz3D Beginners Area</a>/<a href="#bottom" >Attaching one mesh to another with animation?</a><br><br>
<a name="1003792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheSkyIsUp</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need help.<br><br>     I want to load an animated mesh, then attach other meshes to parts of it, and have it move along with the animation. For example: Say I made a human character with a walking animation, then I wanted to put a glove on the character's hand. I'd want that glove to stay on the hand even though the hand is moving through an animation.<br><br>     I planned to try this by positioning the mesh I want attached at a vertex on the animated mesh with the Vertex X, Y, and Z commands, but for some reason those commands don't seem to take other frames of the mesh into account. The mesh is only placed where the vertex should be in the main frame of the animated mesh... <br><br>     So my question is. How can I attach or position one mesh on another mesh and have it follow alone in the animation as if they were both the same mesh? How can I 'put the glove on the hand'? <br><br></td></tr></table><br>
<a name="1003805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Parent the glove to the 'bone' in the hand.<br>You will need to use findchild / getchild to get the relevant bone, and may need to do so recursively if the bone itself is a child of another bone (most likely).<br><br>Note however, if the fingers in the hand flex / bend then the glove which is parented to the hand bone will not.<br><br>If the glove's fingers need to flex/follow the fingers on the base mesh then an alternative is to model the glove also to have animation based on the animation sequences of the fingers, then parent as above, and animate glove as well <br><br></td></tr></table><br>
<a name="1003848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheSkyIsUp</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see. So bones are child's of other bones and the root bone is the child of the mesh? So I have to find the child of the mesh to find the first bone, then find the child of that bone, and keep doing that how ever many times needed until I find the hand bone. Right?<br><br>Thanks, I'll try that. I'll come back here if I need more help.<br><br>EDIT: I just tried it out, it works perfect for what I need. Thanks again. <br><br></td></tr></table><br>
<a name="1003929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you know the name of the bone (you can set a name in your modelling tool), you can use FindChild on your animated model.<br>Then you don't have to search the children of your model to find it yourself. <br><br></td></tr></table><br>
<a name="1003955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheSkyIsUp</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, I'll try that too. <br><br></td></tr></table><br>
<a name="1004595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as I remember the entity handle of an AnmMesh is not the mesh itself. The mesh of an animated mesh entity is on the 2nd level of the hierarchy. I think the top level is only a pivot. This is why you cannot use Mesh commands on an animated Mesh, but you have to parse the children recursively and apply it to all chldren of type "Mesh". <br><br>This may also vary between animated B3D and 3ds/x.<br><br>See also EntityClass$(entity).<br><br><pre class=code>
global s=1
...
Function EntityInfo(m)
 Print string$("-",s) + EntityClass$(m) + " : " + Entityname$(m)
 For i=1 to CountChildren(m)
  s=s+1
  ww=GetChild(m,i)
  EntityInfo(ww)
 Next
 s=s-1
End Function
</pre> <br><br></td></tr></table><br>
<a name="1004786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> As far as I remember the entity handle of an AnmMesh is not the mesh itself. The mesh of an animated mesh entity is on the 2nd level of the hierarchy. I think the top level is only a pivot. This is why you cannot use Mesh commands on an animated Mesh, but you have to parse the children recursively and apply it to all chldren of type "Mesh".<br> <br></div><br>You can change that (with the B3D Pipeline at least). <br><br>If you link <b>every</b> element in the scene to the mesh, the "Scene Root" checkbox in the exporter dialog will be active and you can uncheck it, thus making the mesh your "scene root". <br><br>When you load this animmesh, the handle will be the mesh directly. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
