<!DOCTYPE html><html lang="en" ><head ><title >[Monkey 80c] Bug with Desktop compiling.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >[Monkey 80c] Bug with Desktop compiling.</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=501" >Monkey Bug Reports</a>/<a href="#bottom" >[Monkey 80c] Bug with Desktop compiling.</a><br><br>
<a name="2096779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> When compiling on Windows the application works as expected and runs fine, however if you then use the same game under linux or OSX and compile again it throws a:<br><pre class=code>
TRANS FAILED: Error executing 'mingw32-make CCOPTS="-Wno-free-nonheap-object" OUT="Debug/MonkeyGame"', return code=2
</pre><br><br>This was thrown from windows (MIGW32) on a project that was originally compiled on linux, the USB key with the project was then put into a laptop and compiled and it failed. If you delete the build folder it works as expected.<br><br>I post it here as 77f used to compile no problems with the same setup I could compile it on loads of different platforms without deleting the build folder every time I change OS. <br><br></td></tr></table><br>
<a name="2096778"></a>

<a name="2096838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay compiling on Linux after the windows compilation I get:<br><pre class=code>
"/media/edzup/8GIG/BRL/MonkeyXPro80c/bin/transcc_linux" -target=Desktop_Game -config=Debug -run "/media/edzup/8GIG/BRL/Projects/Survivor/Survivor.monkey"
TRANS monkey compiler V1.73
Parsing...
Semanting...
Translating...
Building...
gcc  -Wno-free-nonheap-object -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_enable.o ../glfw/lib/x11/x11_enable.c
gcc  -Wno-free-nonheap-object -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_fullscreen.o ../glfw/lib/x11/x11_fullscreen.c
gcc  -Wno-free-nonheap-object -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_glext.o ../glfw/lib/x11/x11_glext.c
gcc  -Wno-free-nonheap-object -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_init.o ../glfw/lib/x11/x11_init.c
gcc  -Wno-free-nonheap-object -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_joystick.o ../glfw/lib/x11/x11_joystick.c
gcc  -Wno-free-nonheap-object -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_thread.o ../glfw/lib/x11/x11_thread.c
gcc  -Wno-free-nonheap-object -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_time.o ../glfw/lib/x11/x11_time.c
gcc  -Wno-free-nonheap-object -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_window.o ../glfw/lib/x11/x11_window.c
../glfw/lib/x11/x11_window.c: In function ‘translateKey’:
../glfw/lib/x11/x11_window.c:238:5: warning: ‘XKeycodeToKeysym’ is deprecated (declared at /usr/include/X11/Xlib.h:1699) [-Wdeprecated-declarations]
     key = XKeycodeToKeysym( _glfwLibrary.display, keycode, 1 );
     ^
../glfw/lib/x11/x11_window.c:260:5: warning: ‘XKeycodeToKeysym’ is deprecated (declared at /usr/include/X11/Xlib.h:1699) [-Wdeprecated-declarations]
     key = XKeycodeToKeysym( _glfwLibrary.display, keycode, 0 );
     ^
gcc  -Wno-free-nonheap-object -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_keysym2unicode.o ../glfw/lib/x11/x11_keysym2unicode.c
g++  -Wno-free-nonheap-object -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../main.o ../main.cpp
g++  -o Debug/MonkeyGame ../glfw/lib/enable.o ../glfw/lib/fullscreen.o ../glfw/lib/glext.o ../glfw/lib/image.o ../glfw/lib/init.o ../glfw/lib/input.o ../glfw/lib/joystick.o ../glfw/lib/stream.o ../glfw/lib/tga.o ../glfw/lib/thread.o ../glfw/lib/time.o ../glfw/lib/window.o ../glfw/lib/x11/x11_enable.o ../glfw/lib/x11/x11_fullscreen.o ../glfw/lib/x11/x11_glext.o ../glfw/lib/x11/x11_init.o ../glfw/lib/x11/x11_joystick.o ../glfw/lib/x11/x11_thread.o ../glfw/lib/x11/x11_time.o ../glfw/lib/x11/x11_window.o ../glfw/lib/x11/x11_keysym2unicode.o ../stb/stb_image.o ../stb/stb_vorbis.o ../main.o -lGL -lopenal -lX11 -lpthread
../glfw/lib/enable.o:enable.c:(.text+0x1e): undefined reference to `__glfwPlatformShowMouseCursor'
../glfw/lib/enable.o:enable.c:(.text+0x66): undefined reference to `__glfwPlatformSetMouseCursorPos'
../glfw/lib/enable.o:enable.c:(.text+0xc4): undefined reference to `__glfwPlatformHideMouseCursor'
../glfw/lib/enable.o:enable.c:(.text+0x189): undefined reference to `__glfwPlatformEnableSystemKeys'
../glfw/lib/enable.o:enable.c:(.text+0x1ab): undefined reference to `__glfwPlatformDisableSystemKeys'
../glfw/lib/fullscreen.o:fullscreen.c:(.text+0x33): undefined reference to `__glfwPlatformGetVideoModes'
../glfw/lib/glext.o:glext.c:(.text+0x1c): undefined reference to `_glGetString@4'
TRANS FAILED: Error executing 'make CCOPTS="-Wno-free-nonheap-object" OUT="Debug/MonkeyGame"', return code=512
../glfw/lib/glext.o:glext.c:(.text+0x14b): undefined reference to `_strstr'
Done.
</pre><br><br>It seems like some of the files maybe put in the directory and is being compiled once on the first target compiled on but fails on the next target due to them being compiled on a different OS. <br><br></td></tr></table><br>
<a name="2096857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I need to study up on makefiles a bit more to fix this!<br><br>The problem is effectively caused by the fact that the 'easy' way to compile a bunch of .c files with a makefile ends up dumping the .o files in the same dir, so the .o files for different targets are 'clashing'.<br><br>If anyone with any knowledge of makefiles has any advice/clues, I'm all ears! <br><br></td></tr></table><br>
<a name="2096856"></a>

<a name="2096859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The usual method with a make file is to pass a parameter defined rule e.g. make clean. This snippet on stack overflow should help.<br><a href="http://stackoverflow.com/a/1484873" target="_blank">http://stackoverflow.com/a/1484873</a><br>There should be a number of tutorials on GCC make files around. You could include a clean function in trans to transverse the directories and remove all object files from a projects build directory. <br><br></td></tr></table><br>
<a name="2096858"></a>

<a name="2096861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Easier option maybe... build folder per-platform?<br><br><pre class=code>
app.buildv99a.platform
</pre> <br><br></td></tr></table><br>
<a name="2096874"></a>

<a name="2096875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah build folder per platform would solve it and make it easier to fix, as this only affects glfw I would split the three desktops up at compile time so it spits its out into glfw/windows etc <br><br></td></tr></table><br>
<a name="2096885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is one problem to DruggedBunny's solution. The data resources would be copied multiple times. It is possible to redirect object output to different directories using make files. Again this snippet on stack over flow should help.<br><a href="http://stackoverflow.com/a/17795692" target="_blank">http://stackoverflow.com/a/17795692</a><br><a href="http://stackoverflow.com/a/4102619" target="_blank">http://stackoverflow.com/a/4102619</a><br>If I get a chance I will look into it. <br><br></td></tr></table><br>
<a name="2096884"></a>

<a name="2096883"></a>

<a name="2096881"></a>

<a name="2096880"></a>

<a name="2096899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had a play with this yesterday afternoon and think I have a fix. <br><br></td></tr></table><br>
<a name="2096904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah that is good news :) <br><br></td></tr></table><br>
<a name="2096920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I finally got an hour to mess around with redirecting object output to the build directory. I don't know if Mark has up load anything to git yet as I haven't checked, but here is something that should work with GLFW2 for Linux and MinGW.<br>Linux<textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80"># Linux GLFW 2 Makefile
vpath %.c ../glfw/lib:../glfw/lib/x11:../stb
vpath %.cpp ..

CC=gcc
CFLAGS=

CXX=g++
CXXFLAGS=

LD=g++
LDFLAGS=
LDLIBS=-lGL -lopenal -lX11 -lpthread

INC=-I../glfw/include \
 -I../glfw/include/GL \
 -I../glfw/lib \
 -I../glfw/lib/x11 \
 -I../openal/include -I../stb

CPPFLAGS=$(CCOPTS) \
 -Wno-deprecated-declarations \
 -Wno-free-nonheap-object \
 -Wno-unused-result \
 -D_GLFW_HAS_GLXGETPROCADDRESS \
 -D_GLFW_USE_LINUX_JOYSTICKS \
 -pthread

_OBJS=enable.o fullscreen.o glext.o image.o init.o input.o \
joystick.o stream.o tga.o thread.o time.o window.o \
x11_enable.o x11_fullscreen.o x11_glext.o \
x11_init.o x11_joystick.o x11_thread.o x11_time.o x11_window.o \
x11_keysym2unicode.o stb_image.o stb_vorbis.o main.o

# Note OUT will have mixed case, so convert it all to lowercase or it complain about missing files. The tr command should be common on all distributions, if not then sed -e 's/\(.*\)/\L\1/' should do the trick.
BUILD=build/$(dir $(shell echo $(OUT) | tr A-Z a-z))

OBJS = $(patsubst %, $(BUILD)%, $(_OBJS))

all: $(OUT)

$(OUT) : $(OBJS)
	$(LD) $(LDFLAGS) -o $@ $(OBJS) $(LDLIBS)

$(BUILD)%.o : %.c
	$(CC) $(CFLAGS) $(INC) $(CPPFLAGS) -c -o $@ $&lt;

$(BUILD)%.o : %.cpp
	$(CXX) $(CPPFLAGS) $(INC) $(CXXFLAGS) -c -o $@ $&lt;</textarea><br>MinGW (not tested)<textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80"># MinGW GLFW 2 Makefile
vpath %.c ../glfw/lib:../glfw/lib/win32:../stb
vpath %.cpp ..

CC=gcc
CFLAGS=

CXX=g++
CXXFLAGS=

INC=-I../glfw/include -I../glfw/lib -I../glfw/lib/win32 -I../openal/include -I../stb

CPPFLAGS=$(CCOPTS)

LD=g++
LDFLAGS=-Wl,--subsystem,windows -L../openal/libs/Win32
LDLIBS=-lgdi32 -lopengl32 -lOpenAL32 -lws2_32

_OBJS=enable.o fullscreen.o glext.o image.o init.o input.o \
joystick.o stream.o tga.o thread.o time.o window.o \
win32_dllmain.o win32_enable.o win32_fullscreen.o win32_glext.o \
win32_init.o win32_joystick.o win32_thread.o win32_time.o win32_window.o \
stb_image.o stb_vorbis.o main.o

BUILD=build/$(dir $(OUT))

OBJS = $(patsubst %, $(BUILD)%, $(_OBJS))

all: $(OUT)

$(OUT) : $(OBJS)
	$(LD) $(LDFLAGS) -o $@ $(OBJS) $(LDLIBS)

$(BUILD)%.o : %.c
	$(CC) $(CFLAGS) $(INC) $(CPPFLAGS) -c -o $@ $&lt;

$(BUILD)%.o : %.cpp
	$(CXX) $(CPPFLAGS) $(INC) $(CXXFLAGS) -c -o $@ $&lt;</textarea><br>EDIT: Mark has updated the GLFW3, but I would suggest him checking that $OUT matches the directory character case on Linux. <br><br></td></tr></table><br>
<a name="2096919"></a>

<a name="2096918"></a>

<a name="2096917"></a>

<a name="2096925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pretty much exactly what I came up with! <br><br></td></tr></table><br>
<a name="2096931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a suggestion Mark. If VIsual Studio still uses nmake, what about changing the desktop target to use a make file instead of a VS project. I think it would make it a little easier to add rules to allow switching between building 32/64 bit, as well as saving messing around updating project files every time a new version of VS is released. <br><br></td></tr></table><br>
<a name="2096930"></a>

<a name="2099857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sensei</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey guys,<br><br>I've got a Pi 2 and followed Pharmhaus' directions on <a href="http://www.monkey-x.com/Community/posts.php?topic=8666" target="_blank"> this thread</a> to get Monkey up and running.<br>I'm using latest build of Rasbian and latest stable build of Monkey-X 82b.<br><br>The IDE works fine, but when I try build for both GLFW2 or 3, I get the same error as the OP:<br><pre class=code>
"/home/pi/Downloads/MonkeyXPro82b/bin/transcc_linux" -target=Desktop_Game_(Glfw2) -config=Debug -run "/home/pi/Downloads/MonkeyXPro82b/bananas/difference/champagne/champagne.monkey"
TRANS monkey compiler V1.71
Parsing...
Semanting...
Translating...
Building...
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/enable.o ../glfw/lib/enable.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/fullscreen.o ../glfw/lib/fullscreen.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/glext.o ../glfw/lib/glext.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/image.o ../glfw/lib/image.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/init.o ../glfw/lib/init.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/input.o ../glfw/lib/input.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/joystick.o ../glfw/lib/joystick.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/stream.o ../glfw/lib/stream.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/tga.o ../glfw/lib/tga.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/thread.o ../glfw/lib/thread.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/time.o ../glfw/lib/time.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/window.o ../glfw/lib/window.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_enable.o ../glfw/lib/x11/x11_enable.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_fullscreen.o ../glfw/lib/x11/x11_fullscreen.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_glext.o ../glfw/lib/x11/x11_glext.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_init.o ../glfw/lib/x11/x11_init.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_joystick.o ../glfw/lib/x11/x11_joystick.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_thread.o ../glfw/lib/x11/x11_thread.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_time.o ../glfw/lib/x11/x11_time.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_window.o ../glfw/lib/x11/x11_window.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../glfw/lib/x11/x11_keysym2unicode.o ../glfw/lib/x11/x11_keysym2unicode.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../stb/stb_image.o ../stb/stb_image.c
gcc  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../stb/stb_vorbis.o ../stb/stb_vorbis.c
g++  -Wno-free-nonheap-object -Wno-deprecated-declarations -Wno-free-nonheap-object -Wno-unused-result -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../main.o ../main.cpp
g++  -o Debug/MonkeyGame ../glfw/lib/enable.o ../glfw/lib/fullscreen.o ../glfw/lib/glext.o ../glfw/lib/image.o ../glfw/lib/init.o ../glfw/lib/input.o ../glfw/lib/joystick.o ../glfw/lib/stream.o ../glfw/lib/tga.o ../glfw/lib/thread.o ../glfw/lib/time.o ../glfw/lib/window.o ../glfw/lib/x11/x11_enable.o ../glfw/lib/x11/x11_fullscreen.o ../glfw/lib/x11/x11_glext.o ../glfw/lib/x11/x11_init.o ../glfw/lib/x11/x11_joystick.o ../glfw/lib/x11/x11_thread.o ../glfw/lib/x11/x11_time.o ../glfw/lib/x11/x11_window.o ../glfw/lib/x11/x11_keysym2unicode.o ../stb/stb_image.o ../stb/stb_vorbis.o ../main.o -lGL -lopenal -lX11 -lpthread
/usr/bin/ld: ../glfw/lib/x11/x11_time.o: undefined reference to symbol 'clock_gettime@@...'
Makefile:34: recipe for target 'Debug/MonkeyGame' failed
TRANS FAILED: Error executing 'make CCOPTS="-Wno-free-nonheap-object" OUT="Debug/MonkeyGame"', return code=512
//lib/arm-linux-gnueabihf/librt.so.1: error adding symbols: DSO missing from command line
collect2: ld returned 1 exit status
make: *** [Debug/MonkeyGame] Error 
</pre><br><br>So, my question is, how can I apply the proposed fix above to get this working? I see there is a few possible folder in the Monkey path, ie "//home/pi/Downloads/MonkeyXPro82b/targets/glfw/template/gcc_linux".<br>I backed up the Makefile in there and copied your above fix for GLFW2 in but I get pretty much the same issue.<br><br>One final thing: When I tried building to HTML5, I get the same error each time with any Bananas example:<br><pre class=code>
"/home/pi/Downloads/MonkeyXPro82b/bin/transcc_linux" -target=Html5_Game -config=Debug -run "/home/pi/Downloads/MonkeyXPro82b/bananas/difference/champagne/champagne.monkey"
TRANS monkey compiler V1.71
Parsing...
Semanting...
Translating...
Building...
/home/pi/Downloads/MonkeyXPro82b/bin/mserver_linux: 1: /home/pi/Downloads/MonkeyXPro82b/bin/mserver_linux: Syntax error: ")" unexpected
Done.
</pre><br><br>I ran "file" on mserver_linux and it reported it's (obviously) a x86-64 executable:<br><pre class=code>
mserver_linux: ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=0xcf35964b0f1ee57c9e9fdc518ea4051bd0b2d109, not stripped
</pre><br><br>I'm wondering if the provided tar file that Pharmhaus provided is compatible with the Pi 2's Arm cpu? <br><br></td></tr></table><br>
<a name="2099853"></a>

<a name="2099858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sensei</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> -UPDATE-<br>As for the 2nd part of my previous post, I found that running transcc_linux via commandline and targeting html5 works perfectly. Just open the resultant html monkey file in the web browser and it works! I still don't understand why it won't work within the IDE though. <br><br></td></tr></table><br>
<a name="2099866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Sensei: It's not a bug. Some distributions merged librt into glibc, so you will have to add the missing rt (real time extensions) library to LDLIBS (-lrt). As I don't own a PI yet, it would be difficult for me to assist you. But I would suggest that you generate a C++ source file of trans; transfer it over to the PI and recompile it then recompile all the other tools on the PI.<br><br>You will find that I made a few modified scripts of Marks to assist in the rebuilding of Trans and the tools. You will need a version of Monkey that has the tools as monkey source files and a C++ source of transcc.<br><a href="http://www.monkey-x.com/Community/posts.php?topic=9472&amp;page=1" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=9472&amp;page=1</a><br>The're about have way down the page. <br><br></td></tr></table><br>
<a name="2099864"></a>

<a name="2099863"></a>

<a name="2099862"></a>

<a name="2099861"></a>

<a name="2099867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sensei</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks mate. I'll give it a try later and see how I get on. <br><br></td></tr></table><br>
<a name="2099896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I own a Raspberry Pi B, and A  Raspberry Pi 2.<br>The Pi 2 is pretty fast. <br><br>It would be great if there was a Raspian (or similar) image with Monkey preinstalled we could get from the downloads page, that we could simply transfer to an sd card, like there is for MusicBox, RuneAudio Noobs etc. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
