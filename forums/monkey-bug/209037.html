<!DOCTYPE html><html lang="en" ><head ><title >App crashing in emulator when starting because of</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >App crashing in emulator when starting because of</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=501" >Monkey Bug Reports</a>/<a href="#bottom" >App crashing in emulator when starting because of</a><br><br>
<a name="2094802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> becasue of IAPs..<br><br>If I do not try to init IAP is working fine.<br><br>Tested with v 79e.<br><br>BTW, in VS 2013 I use MixedPlatofrms because everytime I want to use an emulator Mixed Platforms is automatically selected. If I select ARM the other selection jumps on Device..<br><br>this is the standard init IAP code:<br><pre class=code>
		_purchases = New JsonObject()
		_store = New MonkeyStore()
		_store.AddProducts(CONSUMABLES, 1)
		_store.OpenStoreAsync(Self)
</pre><br><br>this is the error I receive:<br><pre class=code>
First-chance exception at 0x76DC210B in TaskHost.exe: Microsoft C++ exception: Platform::COMException ^ at memory location 0x0786E878. HRESULT:0x805A0194

If there is a handler for this exception, the program may be safely continued.
</pre><br><br>and this appears in vs2013 debug window<br><pre class=code>
&gt;	MonkeyGame.PhoneComponent.dll!Concurrency::details::_ExceptionHolder::_RethrowUserException() Line 899	C++
 	MonkeyGame.PhoneComponent.dll!Concurrency::details::_Task_impl_base::_Wait() Line 1404	C++
 	MonkeyGame.PhoneComponent.dll!Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;::get() Line 3028	C++
 	MonkeyGame.PhoneComponent.dll!BBMonkeyStore::OpenStoreAsync::__l22::&lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt; currentTask) Line 4815	C++
 	MonkeyGame.PhoneComponent.dll!std::_Callable_obj&lt;void &lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;),0&gt;::_ApplyX&lt;void,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt; &gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt; &amp;&amp; _V0) Line 431	C++
 	MonkeyGame.PhoneComponent.dll!std::_Func_impl&lt;std::_Callable_obj&lt;void &lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;),0&gt;,std::allocator&lt;std::_Func_class&lt;void,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil&gt; &gt;,void,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil&gt;::_Do_call(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt; &amp;&amp; _V0) Line 239	C++
 	MonkeyGame.PhoneComponent.dll!std::_Func_class&lt;void,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil&gt;::operator()(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt; _Vx0) Line 515	C++
 	MonkeyGame.PhoneComponent.dll!Concurrency::details::_MakeTToUnitFunc::__l3::&lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt; t) Line 2185	C++
 	MonkeyGame.PhoneComponent.dll!std::_Callable_obj&lt;unsigned char &lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;),0&gt;::_ApplyX&lt;unsigned char,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt; &gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt; &amp;&amp; _V0) Line 431	C++
 	MonkeyGame.PhoneComponent.dll!std::_Func_impl&lt;std::_Callable_obj&lt;unsigned char &lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;),0&gt;,std::allocator&lt;std::_Func_class&lt;unsigned char,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil&gt; &gt;,unsigned char,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil&gt;::_Do_call(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt; &amp;&amp; _V0) Line 239	C++
 	MonkeyGame.PhoneComponent.dll!std::_Func_class&lt;unsigned char,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil&gt;::operator()(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt; _Vx0) Line 515	C++
 	MonkeyGame.PhoneComponent.dll!Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;::_ContinuationTaskHandle&lt;Windows::ApplicationModel::Store::ListingInformation ^,void,void &lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;),std::integral_constant&lt;bool,1&gt;,Concurrency::details::_TypeSelectorNoAsync&gt;::_Continue(std::integral_constant&lt;bool,1&gt; __formal, Concurrency::details::_TypeSelectorNoAsync __formal) Line 3410	C++
 	MonkeyGame.PhoneComponent.dll!Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;::_ContinuationTaskHandle&lt;Windows::ApplicationModel::Store::ListingInformation ^,void,void &lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;),std::integral_constant&lt;bool,1&gt;,Concurrency::details::_TypeSelectorNoAsync&gt;::_Perform() Line 3318	C++
 	MonkeyGame.PhoneComponent.dll!Concurrency::details::_PPLTaskHandle&lt;unsigned char,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;::_ContinuationTaskHandle&lt;Windows::ApplicationModel::Store::ListingInformation ^,void,void &lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;),std::integral_constant&lt;bool,1&gt;,Concurrency::details::_TypeSelectorNoAsync&gt;,Concurrency::details::_ContinuationTaskHandleBase&gt;::operator()() Line 1213	C++
 	MonkeyGame.PhoneComponent.dll!Concurrency::details::_UnrealizedChore::_InvokeBridge&lt;Concurrency::details::_PPLTaskHandle&lt;unsigned char,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;::_ContinuationTaskHandle&lt;Windows::ApplicationModel::Store::ListingInformation ^,void,void &lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;),std::integral_constant&lt;bool,1&gt;,Concurrency::details::_TypeSelectorNoAsync&gt;,Concurrency::details::_ContinuationTaskHandleBase&gt; &gt;(Concurrency::details::_PPLTaskHandle&lt;unsigned char,Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;::_ContinuationTaskHandle&lt;Windows::ApplicationModel::Store::ListingInformation ^,void,void &lt;lambda&gt;(Concurrency::task&lt;Windows::ApplicationModel::Store::ListingInformation ^&gt;),std::integral_constant&lt;bool,1&gt;,Concurrency::details::_TypeSelectorNoAsync&gt;,Concurrency::details::_ContinuationTaskHandleBase&gt; * _PChore) Line 4467	C++
</pre> <br><br></td></tr></table><br>
<a name="2094852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you read this?<br><br><a href="http://www.monkey-x.com/Community/posts.php?topic=8438&amp;post=86331&amp;view=all#86331" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=8438&amp;post=86331&amp;view=all#86331</a><br><br>&gt;You have to click 'continue' here - as far as I can tell, it's just the way msvc/winrt works. See my reply to your bug report for more info. Note that this only happens when you run the app from msvc<br><br>It generally indicates the store is not setup correctly, for whatever reason, and your app is not able to connect with it. Does clicking continue allow your app to keep running?<br><br>Also, I *strongly* recommend getting a real device for testing, esp. for winrt/android. <br><br></td></tr></table><br>
<a name="2094874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pressing on Continue will result in nothing.. The whole VS will crash. <br><br></td></tr></table><br>
<a name="2094877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> * What does your app do if store open fails?<br><br>* Have you tried iaptest in bananas/mak? What does it do? here, if I run it 'as is', I get: 1) app displays 'opening store'; 2) exception happens; 3) I click continue; 4) App continues with 'Store unavailable message'. This is with a real phone though - emulator just crashes for me these days.<br><br>* What windows phone OS version are you using? I'm actually still on 8.0 for BW compatibility testing reasons, and I'm still using the older VS express for windows phone. Just updating msvc2013 now...will then try installing windows 8.0 SDK, test, then upgrade phone, test etc. Fun day ahead! <br><br></td></tr></table><br>
<a name="2094876"></a>

<a name="2094875"></a>

<a name="2094882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok , I successfully updated VS 2013 so I can now compile windows phone apps in it.<br><br>Again, there were no problems with iaptest - it worked both on the phone and in the emulator (which I also got working). By 'worked', I mean it threw and exception after the 'opening store...' message , but I could successfully continue the app by clicking 'continue', which left the app displaying 'store unavailable'.<br><br>Please try iaptest and let me know what happens. <br><br></td></tr></table><br>
<a name="2095104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I managed to make the BETA app and BETA iaps to work on the real device.<br>I think there was a mistake on the market.<br><br>I hope it will be the same on the actual app. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
