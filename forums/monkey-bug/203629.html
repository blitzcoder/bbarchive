<!DOCTYPE html><html lang="en" ><head ><title >[Android] Weird LoadString behaviour</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >[Android] Weird LoadString behaviour</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=501" >Monkey Bug Reports</a>/<a href="#bottom" >[Android] Weird LoadString behaviour</a><br><br>
<a name="2038763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChristianK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br><br>I was building my app for Android and noticed that LoadString sometimes returns an empty string, although the file exists and doesn't contain any unusual characters. The following code loads both text files correctly on all other targets (except iOS and PSM, which I didn't try):<br><br><pre class=code>Import mojo

Class Text Extends App
	Field txt1:String, txt2:String
	
	Method OnCreate()
		SetUpdateRate 60
		
		txt1 = LoadString("text_1.txt")
		txt2 = LoadString("text_2.txt")
	End
	
	Method OnRender()
		Cls
		DrawText txt1 + ", Length: " + txt1.Length, 10, 10
		DrawText txt2 + ", Length: " + txt2.Length, 10, 30
	End
End

Function Main()
	New Text
End</pre><br>Here are the two text files that I used. The first one is loaded correctly, but for some reason, the second one results in an empty string.<br><br><pre class=code>This text has two lines.
ABC DEF GHI!</pre><br><pre class=code>This text has two lines.
Next line!</pre><br>Note: Compiled on Windows for the Android Emulator using Monkey Pro V64(b)<br><br>EDIT:<br><br>Output on xna, glfw, html5, flash:<br><pre class=code>This text has two lines.  ABC DEF GHI!, Length: 38
This text has two lines.  Next line!, Length: 36</pre><br>Output on android:<br><pre class=code>This text has two lines.  ABC DEF GHI!, Length: 38
, Length: 0</pre> <br><br></td></tr></table><br>
<a name="2038762"></a>

<a name="2038750"></a>

<a name="2038751"></a>

<a name="2038749"></a>

<a name="2038862"></a>

<a name="2038863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Works here on both emulator and a Nexus 7 with 64b.<br><br>Have you definitely updated to 64b?<br><br>Have you deleted .build dir?<br><br>If all else fails, please email me the EXACT code. <br><br></td></tr></table><br>
<a name="2038951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChristianK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your reply, Mark.<br>I did all of the above and it didn't work, but I finally solved the problem by using the "Wipe user data" option when starting the emulator.<br>Maybe one of the text files wasn't copied correctly to the device. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
