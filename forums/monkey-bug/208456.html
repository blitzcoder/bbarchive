<!DOCTYPE html><html lang="en" ><head ><title >NOT A BUG: Trans commandline parameters</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >NOT A BUG: Trans commandline parameters</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=501" >Monkey Bug Reports</a>/<a href="#bottom" >NOT A BUG: Trans commandline parameters</a><br><br>
<a name="2086776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think adding configuration parameters to trans using the + operator, seems to be broken. If I add this parameter:<br>+MINGW_PATH="C:\MINGW_" <br>it is ignored.<br><br>I'm trying to integrate most SDK installers in an automated process in jungle ide (sort of usability gain and a bit of marketing idea in behind too), Is it possible to make this with current Trans?<br><br>The idea is that the IDE should be able to download and install automatically anything required for desktop target. (I'll do the same for Android later). Once the user decides where he wants Mingw to be installed, the IDE should be able to tell trans on every compilation where MINGW is, without having to use the config file becouse this installation should be consistent across all Monkey updates in a way userd do not need to modifying once and again the config file. By leaving the IDE this work, we could have a very nice usability gain.<br>In the docs, it seems stated that you can add config variables as parameters, but it seems trans is ignoring them (or maybe just some of them?) Am I doing anything wrong?<br><br>As a side note, the openal installer exe link in the docs is broken. <br><br></td></tr></table><br>
<a name="2086626"></a>

<a name="2086625"></a>

<a name="2086628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is how I would do it.<br>On first run ask if they have a MinGW compiler installed.<br>If yes, check to see if MINGW environment variable has been set. If not, then get them to set it's path.<br>If no, then offer to download a version. Set the MINGW environment variable and it's path in the current users environment settings.<br>Then update the config.winnt.txt directly by replacing the first instance of MINGW_PATH="${MINGW}"<br><br><div class="quote"> As a side note, the openal installer exe link in the docs is broken/ <br></div>It needs removing and instructions to say that a copy is in the targets\glfw directory or linking to OpenAL-Soft (which is a doddle to build and from what I have read is faster than the Creative Labs version). <br><br></td></tr></table><br>
<a name="2086627"></a>

<a name="2086629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If yes, check to see if MINGW environment variable has been set. <br></div>AFAIK, there's no MINGW environment variable required on Monkey. If you add it to the path it happens to work, but I'm needing a more consistent way, specially one that does not require tweaking OS settings, as I plan to allow for unattended automatic and easy SDK install scripts for all targets.<br><br>I have Desktop (more or less), XNA and I'm finishing Flash. But without the trans parameter fix/feaure, the desktop compiler has to be installed after every Monkey update, and that's not nice. Also, the same in Flash, I'm automating the Java SDK setup and forcing a pre-maid folder destination, instead of letting the user choose becouse I can't ensure the choosen destination will be available after every Monkey update and I would like to avoid forcing the user to modify the config.txt file as much as possible, and I would love to avoid the scenario: 1.- Update Monkey, 2.- Nothing works, 3.- Ask the forums, 4.- Don't know what's wrong, 5.- arrrrhs, I hate this! Instead, I preffer: 1.- Update Monkey,. 2.- Keep on working. <br><br></td></tr></table><br>
<a name="2086634"></a>

<a name="2086635"></a>

<a name="2086636"></a>

<a name="2086637"></a>

<a name="2086639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> AFAIK, there's no MINGW environment variable required on Monkey. <br></div>trans does it internally with the aid of what's in the MINGW_PATH config variable.<br><br>Personally I would use my own configuration file for storing paths and then when there is a Monkey update just parse the monkey config.winnt.txt and replace or add said paths.<br>Speaking of the JDK, I've just about sussed how to automate selection and download the current version (7u55) (not the latest 8u5) it's not fast as to find the required file it has to try to download the file first. And I think I may have a way to automate selection and download of the Android SDK by parsing the xml in the repository.<br><br>One thing to remember ziggy, is no matter how idiot proof a designer makes something. He will always underestimate the ingenuity of idiots. <br><br></td></tr></table><br>
<a name="2086648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> trans does it internally with the aid of what's in the MINGW_PATH config variable. <br></div>Modifying an environment variable in order to be able to use an application parameter is too much for me! <br><br><div class="quote"> Speaking of the JDK, I've just about sussed how to automate selection and download the current version (7u55) <br></div>I'm ok with this if this version install by default into "${PROGRAMFILES}\Java\jdk1.7.0_17" Otherwise, it's a no go unless another environment variable is added (not nice IMHO) or config parameters are supported on Trans (as it seems to be stated in the trans documentation here: <a href="http://www.monkey-x.com/docs/html/Tools_Trans.html" target="_blank">http://www.monkey-x.com/docs/html/Tools_Trans.html</a> ) <br><br></td></tr></table><br>
<a name="2086666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that the settings are for what's in the application config settings <a href="http://www.monkey-x.com/docs/html/Programming_App%20config%20settings.html" target="_blank">http://www.monkey-x.com/docs/html/Programming_App%20config%20settings.html</a><br><br>Don't forget that on a 64bit OS any 32bit install goes to Program Files (x86), so the variable in JDK_PATH would have to read ${PROGRAMFILES(x86)} in stead of ${PROGRAMFILES}. <br><br></td></tr></table><br>
<a name="2086670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Don't forget that on a 64bit OS any 32bit install goes to Program Files (x86), so the variable in JDK_PATH would have to read ${PROGRAMFILES(x86)} in stead of ${PROGRAMFILES}. <br></div>Is this true? it makes no sense to me. I mean, if trans is 32, and expecting 32 bits SDKs to be installed, it should return Program Files (x86) on 64 bits windows, and Program File on 32 bits windows. Mixing them seems weird. I can force Java to be installed in whatever folder I want, but it's weird and I can't just install a 64 bits VM right now to test on. The funniest thing is that, on a fresh XP machine, installing java into a folder, and having config.winnt pointing to the wrong location does not prevent Flash from compiling, so I *think* the java path for Flash could just not be required. <br><br></td></tr></table><br>
<a name="2086692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any thing that is in ${} are treated as external variables. Open a terminal and type echo %PROGRAMFILES%, echo %PROGRAMFILES(x86)% (or one of the others apart from MONKEYDIR) on a 64bit version of Windows. You will see that they should return the path to what they represent.<br>Windows XP has a JAVA already installed, but later version of Windows do not. I have used a 64bit version of the JDK with a 64bit JRE without any problems so far. If you ever did read the Adobe FLEX install instructions, you will see that it says to use a 32bit JDK. But, I did a bit of digging around and came across the script that executes the flex jar build tools, and discovered that it used an option called d32. The JDK documentation isn't very clear on this option, but it is supposed to instruct a 64bit JRE to use 32bit mode. Note though any compiled 32bit native code will not work with a 64bit JRE and would have to be recompiled for use with a 64bit JRE.<br><br>If at some point Mark gives us some explanation on how to implement the NDK, then I suspect that you will have to use the 32bit JDK or at least the 32bit NDK to develop on Android devices.<br><br>Oh. It is possible to recompile any Monkey code to a 64bit executable. MSERVER and the MONKEY stub are written in BlitzMax and unless Mark fixes BlitMax for 64bit compiling or uses another tool then 32bit will always be with us. <br><br></td></tr></table><br>
<a name="2086688"></a>

<a name="2086689"></a>

<a name="2086693"></a>

<a name="2086697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, more fun related. I've just modified the config file in this way:<br><pre class=code> '--------------------
'Java dev kit path
'
'Must be set to a valid dir for ANDROID and FLASH target support
'
'The Java JDK is currently available here: <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a>
'
'For normal JDK
'JDK_PATH="${SYSTEMDRIVE}\Program Files\Java\jdk1.7.0_51"
'JDK_PATH="${SYSTEMDRIVE}\Program Files\Java\jdk1.7.0_17"
'JDK_PATH="${SYSTEMDRIVE}\Program Files\Java\jdk1.7.0_02"
'JDK_PATH="${SYSTEMDRIVE}\Program Files\Java\jdk1.6.0_23"
'JDK_PATH="${SYSTEMDRIVE}\Program Files\Java\jdk1.6.0_21"
'JDK_PATH="${SYSTEMDRIVE}\Program Files\Java\jdk1.6.0_19"

'For 32 bit JDK on 64 bit Windows
'JDK_PATH="${SYSTEMDRIVE}\Program Files (x86)\Java\jdk1.7.0_51"
'JDK_PATH="${SYSTEMDRIVE}\Program Files (x86)\Java\jdk1.7.0_17"
'JDK_PATH="${SYSTEMDRIVE}\Program Files (x86)\Java\jdk1.7.0_02"
'JDK_PATH="${SYSTEMDRIVE}\Program Files (x86)\Java\jdk1.6.0_23"
'JDK_PATH="${SYSTEMDRIVE}\Program Files (x86)\Java\jdk1.6.0_21"
'JDK_PATH="${SYSTEMDRIVE}\Program Files (x86)\Java\jdk1.6.0_19"
'--------------------</pre> so there's not any valid JDK_PATH and flash compiles perfectly well. Java is installed, just that Monkey is not told where it is.<br>What's going on here?<br><br>EDIT: is it possible that the config variable is only required for Android, and not for Flash? Flex seems to be happy with any installed JVM. Not sure if it even requieres the whole JDK <br><br></td></tr></table><br>
<a name="2086698"></a>

<a name="2086699"></a>

<a name="2086700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you set JAVA_HOME in you environment variables? And added it with bin to your PATH? <br><br></td></tr></table><br>
<a name="2086718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> The path vars in bin/ config files are not 'normal' #BLAH style vars as they control the behavior of the compiler.<br><br>From memory, there is a transcc option that allows you to select different a config file. I think it was you who asked for it in fact, although I didn't really like the idea as it meant Monkey code might compile in one IDE but not another.<br><br>&gt; so there's not any valid JDK_PATH and flash compiles perfectly well. Java is installed, just that Monkey is not told where it is. What's going on here?<br><br>You may already have javac in your system 'path'. Generally, transcc just adds any config file paths to the system 'PATH' to effectively emulate the user having added the path to PATH, but of course each SDK has it's own idiosyncrasies and there are not really any hard and fast rules here. <br><br></td></tr></table><br>
<a name="2086756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> From memory, there is a transcc option that allows you to select different a config file. I think it was you who asked for it in fact, although I didn't really like the idea as it meant Monkey code might compile in one IDE but not another. <br></div>But I thought it was never implemented! Is it? I'll take a look. thanks!<br><br><div class="quote"> You may already have javac in your system 'path'. Generally, transcc just adds any config file paths to the system 'PATH' to effectively emulate the user having added the path to PATH, but of course each SDK has it's own idiosyncrasies and there are not really any hard and fast rules here. <br></div>Thanks! So if trans is just adding the paths to the PATH, then it's ultra easy to setup. <br>Will keep with the automated installers. Jungle Ide now can automate the download and install of MinGW + OpenAL Desktop (on windows), XNA and Flash. I'll be doing Android soon and I'll add the Android tools to the IDE. I think this could bring a nice usability plus to Monkey.<br><br>If there's anything you think I should take into account, just tell me. <br><br></td></tr></table><br>
<a name="2086868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; So if trans is just adding the paths to the PATH, then it's ultra easy to setup. <br><br>Well, it depends on the target...JAVA_HOME still needs to be set for Android (or Ant?) and each target has it's own wrinkles in general. Best thing to do would be to just take a look at transcc source! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
