<!DOCTYPE html><html lang="en" ><head ><title >problem with android kitkat</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >problem with android kitkat</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=501" >Monkey Bug Reports</a>/<a href="#bottom" >problem with android kitkat</a><br><br>
<a name="2097949"></a>

<a name="2097950"></a>

<a name="2097951"></a>

<a name="2097952"></a>

<a name="2097953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> when using android kitkat<br><br>I minimise the app and bring it up again,<br> it crashes on a pushmatrix line<br><br>this happens with the old android target and the new android target on android kitkat<br> (but not with other targets like html5)<br><br>crash log:<br>I/[Monkey](17510): Monkey Runtime Error : length=6; index=6<br>I/[Monkey](17510): /root/Dropbox/Monkey/modules/mojo/graphics.monkey&lt;365&gt;<br>I/[Monkey](17510): /root/Dropbox/monkeygames/mapper/guis.monkey&lt;716&gt;<br>I/[Monkey](17510): /root/Dropbox/monkeygames/mapper/guis.monkey&lt;658&gt;<br>I/[Monkey](17510): /root/Dropbox/monkeygames/mapper/mapper.monkey&lt;91&gt;<br>I/[Monkey](17510): /root/Dropbox/Monkey/modules/mojo/app.monkey&lt;113&gt;<br>E/SensorManager(17510): Exception dispatching input event.<br><br><br>in my code the crash happens after a pushmatrix and 2 translates in a row <br><br></td></tr></table><br>
<a name="2097954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does it happen with the samples too? If not, sample code please!<br><br>Anyone else had any problems with kitkat? <br><br></td></tr></table><br>
<a name="2097964"></a>

<a name="2097965"></a>

<a name="2097966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> heres what happens with the bouncyaliens sample:<br>(after minimizing and bringing back the game)<br>im using v81b by the way<br><div class="quote"> <br>I/[Monkey](24895): BouncyAliens: OnSuspend<br>E/PlayEventLogger(24989): Invalid device id d1786d5845848f3f<br>E/com.amazon.venezia/com.amazon.identity.auth.device.framework.MAPApplicationInformationQueryer(23492): Notified by action android.intent.action.PACKAGE_CHANGED to invalidate app cache<br>E/com.amazon.kindle/com.amazon.identity.auth.device.framework.MAPApplicationInformationQueryer(24944): Notified by action android.intent.action.PACKAGE_CHANGED to invalidate app cache<br>E/com.amazon.mp3/com.amazon.identity.auth.device.framework.MAPApplicationInformationQueryer(24912): Notified by action android.intent.action.PACKAGE_CHANGED to invalidate app cache<br>I/[Monkey](24895): Display modes:<br>I/[Monkey](24895): Monkey Runtime Error : length=5; index=5<br>I/[Monkey](24895): /root/Dropbox/Monkey/modules/mojo/graphics.monkey&lt;479&gt;<br>I/[Monkey](24895): /root/Dropbox/Monkey/modules/mojo/graphics.monkey&lt;365&gt;<br>I/[Monkey](24895): /root/Dropbox/Monkey/modules/mojo/graphics.monkey&lt;482&gt;<br>I/[Monkey](24895): /root/Dropbox/Monkey/bananas/mak/bouncyaliens/bouncyaliens.monkey&lt;150&gt;<br>I/[Monkey](24895): /root/Dropbox/Monkey/bananas/mak/bouncyaliens/bouncyaliens.monkey&lt;150&gt;<br>I/[Monkey](24895): /root/Dropbox/Monkey/modules/mojo/app.monkey&lt;113&gt;<br>E/SensorManager(24895): Exception dispatching input event.<br> <br></div> <br><br></td></tr></table><br>
<a name="2097963"></a>

<a name="2098084"></a>

<a name="2098085"></a>

<a name="2098086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This sounds familiar - app restarts instead of resuming after suspend.<br><br>I believe this is what the android:launchmode="singleTop" entry in the manifest was supposed to fix. But apparently not in your case...<br><br>Googling 'android app restarting after suspend' gives some interesting results, including:<br><br><a href="http://stackoverflow.com/questions/6114480/how-to-resume-android-app-where-it-was-suspended-app-not-activity" target="_blank">http://stackoverflow.com/questions/6114480/how-to-resume-android-app-where-it-was-suspended-app-not-activity</a><br><br>which suggests using:<br><br>android:alwaysRetainTaskState="true"<br><br>and/or...<br><br>android:launchMode="singleInstance"  //also try: "singleTask", "standard", "singleTop".<br><br>Can you try some of these?<br><br>I can't reproduce the problem myself and I suspect it's highly device suspect so I doubt even installing kitkat on my nexus 7 would help - Monkey  worked fine on Kitkat for me before I upgraded to lollipop.<br><br>What device are you using? <br><br></td></tr></table><br>
<a name="2098113"></a>

<a name="2098114"></a>

<a name="2098115"></a>

<a name="2098116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im using a pretty cheap generic tablet called 'dopo' <br>I tried altering the manifest file but when I compile the monkey program the manifest file gets overwritten.<br><br>I compiled it with the command line and tried all those options, the same crashes happened unfortunately.<br><br>I also tried:<br>	android:launchMode="singleInstance"<br>			android:clearTaskOnLaunch="false"<br>			android:alwaysRetainTaskState="true"<br>			android:finishOnTaskLaunch="false"<br><br>It does seem to restart the app every time it is brought back to the screen so you are right about the reason it is happening. <br><br></td></tr></table><br>
<a name="2098153"></a>

<a name="2098165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; I tried altering the manifest file but when I compile the monkey program the manifest file gets overwritten.<br><br>You need to edit the manifest file in 'templates', not the one in the root build dir. <br><br></td></tr></table><br>
<a name="2098174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> ohh ok thanks<br><br>When compiled in Release mode it doesnt crash, it just restarts, so I just saved what screen the player was on and restored it in OnCreate it seems to be a good enough solution for this game. <br><br></td></tr></table><br>
<a name="2098191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ugh, I'd rather fix this properly!<br><br>Did you try messing with the templates/AndroidManifest.xml file? <br><br></td></tr></table><br>
<a name="2101754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes sorry for taking a long time to reply.<br><br>I managed to figure out why it was happening.<br><br>In the options it had an option to kill the app whenever it is minimized.<br><br>This was enabled so disabling it made the games work again. <br><br></td></tr></table><br>
<a name="2101765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply!<br><br>What 'options'?<br><br>Is there something I need to fix for monkey? <br><br></td></tr></table><br>
<a name="2101838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the general android settings menu there is an option to make apps terminate when they are minimized.<br><br>I dont think there is a need to fix the issue, if you want to have a go, just enable the option<br><br>Actually when a monkeygame is compiled in release mode the game doesnt crash at all. So there is no need to fix anything <br><br></td></tr></table><br>
<a name="2101845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Slenkar - are you talking about the "Developer Option" - "Don't keep activities"? <br><br></td></tr></table><br>
<a name="2101916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep that's the one <br><br></td></tr></table><br>
<a name="2101936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; In the general android settings menu<br><br>Still a bit confused - I can't find a 'general android settings menu' in Ted! <br><br></td></tr></table><br>
<a name="2101944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's within the "Developer Options" on the actual Android device...<br><br><img src="http://media02.hongkiat.com/android-developer-options-hidden-features/dont-keep-activities.jpg"> <br><br></td></tr></table><br>
<a name="2101968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; It's within the "Developer Options" on the actual Android device...<br><br>Aha, but is that a realistic solution? Does the user have to tweak developer options? Or does this developer option override manifest? <br><br></td></tr></table><br>
<a name="2101990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I cant remember if I set that option myself. I might have.<br>It doesnt seem likely they would have that enabled on new devices.<br><br>There is probably nothing to be done here :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
