<!DOCTYPE html><html lang="en" ><head ><title >Html5 Audio issue with Chrome.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Html5 Audio issue with Chrome.</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=501" >Monkey Bug Reports</a>/<a href="#bottom" >Html5 Audio issue with Chrome.</a><br><br>
<a name="2076141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I initially thought this might be an issue with Diddy but now I think it might be a bug with monkey, I know html5 has patchy results with playing sound so I tested with all three formats and the results the same.<br><br>This code builds and runs fine in flash, and probably all the other targets providing you un-comment the right media file format for compatibility.<br><br>However when building to html5, chrome will not play the music, IE and FireFox will play the music..<br><br><br><pre class=code>
Import mojo

Class Bug Extends App
	

	Method OnCreate:Int()
		SetUpdateRate(60)
		Return 0
	End
	
	Method OnUpdate:Int()
		If Not MusicState() Then PlayMusic("music/somber.mp3",1) 'fails in chrome
		'If Not MusicState() Then PlayMusic("music/somber.wav",1) 'fails in chrome
		'If Not MusicState() Then PlayMusic("music/somber.ogg",1) 'fails in chrome
		Return 0
	End
	
	Method OnRender:Int()
		Cls()

		Return 0
	End
	
End

Function Main:Int()
	New Bug()
	Return 0
End
</pre> <br><br></td></tr></table><br>
<a name="2076140"></a>

<a name="2076139"></a>

<a name="2076143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would have a look at what audio formats are supported by each of those browsers. Not all browsers support all audio formats due to license issues. <br><br></td></tr></table><br>
<a name="2076150"></a>

<a name="2076151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That was the first thing I did, also why the above test has three audio formats in it, chrome supports mp3,ogg and wav..<br><br><b>Audio Formats and Browser Support</b><br><pre class=code>
Browser				MP3	Wav	Ogg
Internet Explorer		YES	NO	NO
Chrome				YES	YES	YES
Firefox				YES	YES	YES
Safari				YES	YES	NO
Opera				NO	YES	YES
</pre> <br><br></td></tr></table><br>
<a name="2076148"></a>

<a name="2076149"></a>

<a name="2076145"></a>

<a name="2076146"></a>

<a name="2076156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here Chrome plays mp3 fine - with Monkey v77b - I'm not using Diddy. Are you sure music is being copied to &lt;app&gt;/data/music folder?<br><br>Maybe you could try without MusicState? I don't use it, maybe that's the problem?<br>Edit: Nope, I ran your sample program above and it worked for me, right of the bat - tested with mp3, chrome version 26.0.1410.64 m. <br><br></td></tr></table><br>
<a name="2076154"></a>

<a name="2076155"></a>

<a name="2076157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah Ted 1.19 and Monkey 77b here as well.<br><br>I might try it on chrome on another PC and see if its possibly my Chrome, if it turns out to be Chrome (mine) tho it is wierd that flash plays fine. in the same browser. <br><br></td></tr></table><br>
<a name="2076163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK...<br><br>I think, still not 100% sure, but I think its AdBlock a plugin for Chrome thats getting in the way, now I have adblock disabled, and the song wont play the first time but if I hit refresh it then plays, which is odd because nothing changes between the refresh, I have tested on another computer and it works 100% of the time.<br><br>So not exactly sure what adBlock is actually doing but its doing something even when its not supposed to be active. so if your having bother with music and html5 and you have adblock then it could be that causing the problem.<br> <br>Thanks Slotman once I knew it was playing on other PC's with Chrome and the same monkey version I knew it had to be something outside of monkey... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
