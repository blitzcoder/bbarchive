<!DOCTYPE html><html lang="en" ><head ><title >Basics to use custom type</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Basics to use custom type</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=88" >Blitz3D Tutorials</a>/<a href="#bottom" >Basics to use custom type</a><br><br>
<a name="1262178"></a>

<a name="1262179"></a>

<a name="1262180"></a>

<a name="1262181"></a>

<a name="1262182"></a>

<a name="1262183"></a>

<a name="1262184"></a>

<a name="1262185"></a>

<a name="1262262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe this will help somebody to better understand how to use custom "type" :<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D(800,600,32,2)

;describe the properties of the type "Player"
Type Player
 Field Root
 Field Name$
 Field Health#
 Field Money%
End Type

DebugLog("------------------------------")
;to create a new instance of the type "Player" :
i.Player = New Player
 i\Root = CreatePivot()
 i\Name = "Ashley"
 i\Health = 90.0
 i\Money = 1000

i.Player = New Player
 i\Root = CreatePivot()
 i\Name = "Callo"
 i\Health = 85.0
 i\Money = 2000

i.Player = New Player
 i\Root = CreatePivot()
 i\Name = "Romeo"
 i\Health = 80.0
 i\Money = 3000

i.Player = New Player
 i\Root = CreatePivot()
 i\Name = "Pamela"
 i\Health = 75.0
 i\Money = 4000

For i.Player = Each Player
 DebugLog(i\Name)
 DebugLog(i\Health)
 DebugLog(i\Money)
Next

DebugLog("------------------------------")
;to modify an instance of the type "Player" :
For i.Player = Each Player
 If( i\Name = "Callo" )
  i\Health = i\Health+1
  DebugLog(i\Name)
  DebugLog(i\Health)
  DebugLog(i\Money)
 EndIf
Next

DebugLog("------------------------------")
;to get and store the handle of an instance of the type "Player" in a variable :
For i.Player = Each Player
 If( i\Name = "Romeo" )
  RomeoH% = Handle(i)
 EndIf
Next

DebugLog("------------------------------")
;to use the handle of an instance to directly access an instance of the type "Player" :
i.Player = Object.Player(RomeoH)
 DebugLog(i\Name)
 DebugLog(i\Health)
 DebugLog(i\Money) 

DebugLog("------------------------------")
;to get and store the handle of an instance of the type "Player" in the name of the entity :
For i.Player = Each Player
 NameEntity(i\Root,Handle(i))
Next

DebugLog("------------------------------")
;to get the handle of an instance stored in the name of the entity and use this handle to directly access an instance of the type "Player" :
;let's assume that we have retrieved the reference of an entity after a collision (with CollisionEntity()) or after a linepick (with PickedEntity())
;InstanceH% = EntityName(CollidedEnt) ;or EntityName(PickedEnt)
;i.Player = Object.Player(InstanceH)
 ;DebugLog(i\Name)
 ;DebugLog(i\Health)
 ;DebugLog(i\Money)

DebugLog("------------------------------")
;to delete an instance of the type "Player" :
For i.Player = Each Player
 If( i\Name = "Pamela" )
  FreeEntity(i\Root)
  Delete(i)
 EndIf
Next

For i.Player = Each Player
 DebugLog(i\Name)
 DebugLog(i\Health)
 DebugLog(i\Money)
Next

WaitKey()

End()
</textarea> <br><br></td></tr></table><br>
<a name="1262245"></a>

<a name="1262246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShadowTurtle</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> can you post that into the codearchive (if not did alarydy?)) might be a usefull ressource.... <br><br></td></tr></table><br>
<a name="1278796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This actually makes it more clear than ever seen in an explanation. Thanks. <br><br></td></tr></table><br>
<a name="1278820"></a>

<a name="1278821"></a>

<a name="1278822"></a>

<a name="1278886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad this can help.<br><br>There is some thing missing : how to use nameentity() to store the typename and the instancehandle in the entity name, then after a collision or a linepick, how to retrieve the entity name with entityname(), then how to extract the typename and the instancehandle from the entity name, then know in which list (custom type list) to search to find the wanted instance. ( with Object.TypeName(InstanceHandle) )<br>See : <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=3095" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=3095</a> <br><br></td></tr></table><br>
<a name="1279368"></a>

<a name="1279369"></a>

<a name="1279371"></a>

<a name="1279372"></a>

<a name="1279420"></a>

<a name="1279421"></a>

<a name="1279422"></a>

<a name="1279423"></a>

<a name="1279424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Checked a couple of other simple examples of the very poorly documented commands 'Handle' and 'Object' to fully get my head wrapped around the complete Type usage. Now I don't have an issue with the 'Handle' command, it's the 'Object' one that is a bit fuzzy to me:<br><br><b>Example#1:</b><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Type weapon
	Field name$
End Type

w.weapon = New weapon
w\name$ = "1st weapon - gun"

w.weapon = New weapon
w\name$ = "2nd weapon - gun"

w.weapon = New weapon
w\name$ = "3rd weapon - gun"


w.weapon = New weapon
w\name$ = "4th weapon - gun"
w_handle = Handle w.weapon   ;&lt;&lt;&lt;&lt;&lt; 
; put the handle/adress pointer of the current w.weapon into variable 
; w_handle(it actually stores the address in it).


w.weapon = New weapon
w\name$ = "5th weapon - gun"

w.weapon = New weapon
w\name$ = "6th weapon - gun"


w.weapon  = Object weapon(w_handle) ;&lt;&lt;&lt;&lt;&lt;  
; Retrieve the address to a type w.weapon that was stored in w_handle,
; so that it now points to the stored w.weapon in w_handle.
; We can now retrieve the name$ that belongs to this one directly 
; without going through the for..next loop to get To the desired 
; w.weapon. And then for instance, print it.

Print w\name$

WaitKey()
</textarea><br>That all makes perfect sense just as a line like this:<br><div class="quote"> <br>e.entity = Object entity(EntityName(PickedEntity)) 		   	<br> <br></div><br>But also seen it as in a format as such:<br><b>Example#2:</b><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Type MY_TYPE 
   Field whatever
End Type

Global a_custom_type.MY_TYPE = New MY_TYPE ; This could also be a local type pointer.

integer_variable% = Handle( a_custom_type.MY_TYPE )
Print integer_variable%

a_custom_type.MY_TYPE = Object.MY_TYPE( integer_variable% )
Print a_custom_type.MY_TYPE\whatever

WaitKey()
End
</textarea><br><br>What is now having me puzzled/confused is the diference in usage in above  examples like:<br><div class="quote"> <br>w.weapon  = <b>Object</b> weapon(w_handle)<br>a_custom_type.MY_TYPE = <b>Object.MY_TYPE</b>( integer_variable% )<br> <br></div><br>The later format 'Object.typename' I also found in the un-official version of the "b3ddocspatch199 help"(quoted below):<br><div class="quote"> <br>Object.typename(objecthandle)<br>Parameters<br>typename - the custom type the Object function should return <br>objecthandle - an integer handle produced by the Handle function  <br><br>Description<br>The Object function takes the integer handle of an object and if it exists returns an actual reference to the object given it is of the Type specified. <br><br>See also: Type, Handle.  <br><br>Example<br>; Object <br><br>Type MYTYPE <br>  Field myint <br>End Type <br><br>Dim HandleArray(4) <br><br>For count=1 To 3 <br>  temp.MYTYPE=New MYTYPE <br>  HandleArray(count)=Handle(temp) <br>  Print "HandleArray("+count+")="+HandleArray(count) <br>Next <br><br>Delete Object.MYTYPE(HandleArray(2)) <br>Print "Deleted 2nd MYTYPE" <br>temp.MYTYPE=New MYTYPE <br>HandleArray(4)=Handle(temp) <br><br>For count=1 To 4 <br>  temp.MYTYPE=Object.MYTYPE(HandleArray(count)) <br>  Print "temp="+Handle(temp) <br>Next <br><br>WaitKey() <br>End  <br><br>Index<br><br>Click here to view the latest version of this page online &lt;&lt; Of course doesn't exist :-(<br> <br></div><br><br><b>Call me silly(I am suffering from a burnout so please bare with me), but why does the 'Object' command appear to exist in 2 formats?</b><br>1) Object<br>2) Object.Type <br><br></td></tr></table><br>
<a name="1282570"></a>

<a name="1282572"></a>

<a name="1322187"></a>

<a name="1325810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Rick&gt;&gt;Sorry i haven't seen your post until now...<br><br>Handle(instance) is to retrieve the handle/id of the instance but what is confusing is that the handle/id corresponds to a count cumulating the number of created instances of all custom types (of all different lists) so if you use different custom types (different lists), you can't be sure what will be the value of the handle/id of the next instance (you could but it is useless, you don't need to know that).<br><br>Object.TypeName(InstanceHandle) is to go directly to the instance having this handle/id. Especially useful after a collision/linepick when you want to update the collidable/pickable.<br><br><br>I don't really understand the usefulness to store the instance of a custom type in an array, if you can waste memory, use several arrays to store the values/references of your things.<br>If you can't waste memory, use a custom type to store the values/references of your things. <br>The advantage of a custom type list is that you can have a list of a variable size and that you don't have to reorder the list... That's how i see it... <br><br></td></tr></table><br>
<a name="1282732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for getting back at this. I'll look into this further(when up to it). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
