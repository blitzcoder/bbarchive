<!DOCTYPE html><html lang="en" ><head ><title >Prevent Mipmapping Artefacts with masked Textures</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Prevent Mipmapping Artefacts with masked Textures</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=88" >Blitz3D Tutorials</a>/<a href="#bottom" >Prevent Mipmapping Artefacts with masked Textures</a><br><br>
<a name="703231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a certain sort of masked texture that frequently makes troubles when displayed with full mipmapping/high speed settings, especially on Radeon chipsets. These are fences, gatters etc., finely structured masked things with a pattern character.<br><br>Let us assume we have a fence, textured with a masked wire fence texture. Let us assume the fence is rotated about 60°, relative to the camera, so it's a steep angle to the camera. It may happen that the more distant parts of the fence will become invisible. In the worst case this is a transparent fence that will pop up when the player gets closer, due to mipmaping artefacts.<br><br>There's a trick to prevent this:<br><br>The optimal number of the non-transparent pixels is 51 percent of the whole texture. It may be close to 51 percent, but it should under no circumstances be less than 50%.<br><br>You may use a simple blitz program to count the non-transparent texels:<br><pre class=code>
graphics3d 640,480,32,2
tex=loadtexture("test.bmp",4)
setbuffer texturebuffer(tex)
lockbuffer()
w=texturewidth(tex)
h=textureheight(tex)
c#=0
for y=0 to h-1
 for x=0 to w-1
  rgb=readpixelfast(x,y) and $ffffff
  if rgb&lt;&gt;0 then
   c=c+1
  endif
 next
next
unlockbuffer()
setbuffer backbuffer()
print "non-transparent texels:"+((c/(w*h))*100)+" percent"
waitkey()
</pre><br><br>You may use the selection expand/contract functions of your graphics app to rise/lower the number of non-transparent texels on such pattern-like masked textures.<br><br>Thought I should let you know. Took me quiet a while until I figured out the 51% thing.<br><br>BTW: you may also reduce or fix this problem by loading the texture without mipmaping. But I think this has a lot of cons, so I prefere the 51% way. <br><br></td></tr></table><br>
<a name="715273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Additional Note:<br><br>Since Blitz3D Version 1.98 we can use DDS. I would STRONGLY reccommend to save your masked textures as DDS in DXT3 or DXT5 mode, with alpha information. The Alpha should be defined by nonpainted pixels , not in a fourth channel.<br>Unlike normally loaded masked BMP etc., with the DDS textures the transparent pixels don't have to be black, but transparent (not painted) instead. This will also prevent the dark border artefact as seen with masked textures other than DDS.<br><br>Where masked BMP etc. textures may have blocky edges , strictly following the texels zigzag contoures, DDS will use some kind of vector drawing , so the outlines will me smooth and rounded, no matter how close the camera is.<br><br>There's a plugin for Photoshop:<br><a href="http://developer.nvidia.com/object/nv_texture_tools.html" target="_blank">http://developer.nvidia.com/object/nv_texture_tools.html</a><br>And for The Gimp:<br><a href="http://nifelheim.dyndns.org/%7Ecocidius/dds/" target="_blank">http://nifelheim.dyndns.org/%7Ecocidius/dds/</a><br>There's even a standalone tool written in Bitz:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=63126" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=63126</a><br><br>I'd suggest to select the transparent parts, then make a border selection of about 4 pixels, then blur this border (more). This will also blur the alpha, so Directx will be able to interpolate the outline much smoother (IMHO).<br><br>Although the pros of masked DXT3 or 5 textures are immense, they still don't fix the problem of vanishing texels as a result of mipmapping (as discussed in the first post). They are however the best choice for masked textures. In fact they're giving Blitz3D yet another afterburner boost. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
