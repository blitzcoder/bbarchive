<!DOCTYPE html><html lang="en" ><head ><title >Mojo2 for NG</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Mojo2 for NG</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=126" >BlitzMax NG</a>/<a href="#bottom" >Mojo2 for NG</a><br><br>
<a name="1281072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> With everyone wetting their pants over Monkey's Mojo2 "engine", I thought it only fair we weren't left out of the fun too :<br><br><a href="https://github.com/bmx-ng/mky.mod" target="_blank">https://github.com/bmx-ng/mky.mod</a><br><br><br>It's a port of Monkey2's mojo2 implementation, which is open source.<br>It only works with NG, as it duplicates some of the Interfaces (as opposed to Types) that are used on Monkey.<br>There's a bunch of examples (rather than bananas :-p ) that are straight ports from Monkey, but in the style your used to in BlitzMax. And they all "just work".<br><br>The lighting demos are quite pretty, if you like that kind of thing.<br><br>You'll need the latest NG. <br><br></td></tr></table><br>
<a name="1281073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ohhhhh!<br>Great!<br>This weekend I want to test it (NG!) better &amp; deeper!<br><br>Thanks! <br><br></td></tr></table><br>
<a name="1281078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do not forget to rebuild all modules if you already had NG installed - the latest BCC changed some things which enforces a module rebuild.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1281085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to note: If you get a tstringmap not found, you need to nab the updated brl.map mod from Bruceys git repo.<br><br>Dabz <br><br></td></tr></table><br>
<a name="1281096"></a>

<a name="1281098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a new Windows release of BlitzMax NG at <a href="https://github.com/bmx-ng/bmx-ng/releases" target="_blank">https://github.com/bmx-ng/bmx-ng/releases</a><br>Includes TDM MinGW 5.1.0, SDL backend and (mky.)mojo2 modules. <br><br></td></tr></table><br>
<a name="1281102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yummmmmmyyyyyyyyyyy! :)<br><br>Dabz <br><br></td></tr></table><br>
<a name="1281116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Downloding now :D<br><br>(I need to update MY own MaxGUI version to use NG as soon as possible :P)<br><br>ps: just a note, I don't know if there's a way to 'link togheter' GITHUB download link for the latest version AND <a href="http://www.bmx-ng.com/main/downloads/" target="_blank">http://www.bmx-ng.com/main/downloads/</a> without a manual setup...<br>I know already the answer 'point to github'... but an indipendent website looks more 'professional' :D <br><br></td></tr></table><br>
<a name="1281118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>just tested the latest release 66.03.07 and toying with mojo2 module.<br>It seems to run everything fine, except for RenderDemo<br><br>If I try to uncomment<br><pre class=code>
'canvas.SetViewport( 0,0,GraphicsWidth(),GraphicsHeight())
'canvas.SetProjectionMatrix( Mat4Ortho( 0,640,0,480,-1,1 ) )
</pre><br>or set Graphics 640,480,0<br><br>After 2 light's loop I get 'Incomplete Framebuffer' error. <br><br></td></tr></table><br>
<a name="1281119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Via github-api you can fetch all published releases on the given github-project. Now just use the latest release as the "most current one" when linking from your project website<br><br>I do this exactly that way for <a href="http://www.tvtower.org" target="_blank">http://www.tvtower.org</a><br><br>As Brucey might add win32, mac ... releases, he should think of a consistent naming scheme - so the other websites could filter according to parts of the name ( find("mac") ).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1281190"></a>

<a name="1281207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW:<br><br><a href="https://api.github.com/repos/bmx-ng/bmx-ng/releases" target="_blank">https://api.github.com/repos/bmx-ng/bmx-ng/releases</a><br><br>this is a json response you could use to fetch your "latest releases" (filtered by OS - through naming schemes).<br><br><br>Edit: this is a stripped down variant of my info getter:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
&lt;?php
date_default_timezone_set("Europe/Berlin");

class DownloadInformation {
	function GetFileInformation($asJson=True) {
		if(function_exists('curl_version')) {
			$this-&gt;downloadData = $this-&gt;GetReleaseFilesFromGithub("bmx-ng", "bmx-ng");
			asort($this-&gt;downloadData);
		}
		
		if($asJson==True)
			return json_encode($this-&gt;downloadData);
		else
			return $this-&gt;downloadData;
	}


	function GetFromGitHub($url){
		$base = "https://api.github.com/";
		$remoteUrl = $base . $url;

		//check cache
		$key = md5($remoteUrl);
		$filePath = __DIR__.DIRECTORY_SEPARATOR.".ht_githubcache/".$key;
		$cacheTime = 600;
		$content = null;
		if(file_exists($filePath) and (time() - filemtime($filePath) &lt;= $cacheTime)) {
			$content = unserialize(file_get_contents($filePath));
		}
		//invalid cache content or unfilled?
		if(!is_array($content)) {
			$curl = curl_init();

			curl_setopt($curl, CURLOPT_HTTPHEADER, array(
				'Accept: application/vnd.github.v3+json',
				'User-Agent: apigility-org',
				//caching?
				//'If-None-Match: "7c20f15778b65ac3872f8b4144b57901"',
			));  

			curl_setopt($curl, CURLOPT_URL, $remoteUrl);
			curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($curl, CURLOPT_HEADER, 1);
			curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
			curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 1);
			list($header, $content) = explode("\r\n\r\n", curl_exec($curl), 2);
			curl_close($curl);

			$content = array("header"=&gt;$header, "response"=&gt;$content);
			if($content["response"]&lt;&gt;"") {
				//store content
				file_put_contents($filePath, serialize($content));
			}
		}
		return $content;
	}


	function GetReleaseFilesFromGithub($user, $project) {
		// Get the json from github for the releases
		$gitHubResponse = $this-&gt;GetFromGitHub("repos/$user/$project/releases");
		$releases = json_decode($gitHubResponse["response"], true);

		// Sort the array by published_at time (downwards - newer at bottom)
		function compare_published_at($a, $b){
			return strnatcmp($a['published_at'], $b['published_at']);
		}
		usort($releases, 'compare_published_at');


		$files = array();
		foreach($releases as $release) {
			//skip releases without binaries
			if(!isset($release["assets"][0]))
				continue;

			//add first binary

			$file = array();
			$file["date"] = strtotime($release["published_at"]);
			$file["fileName"] = $release["assets"][0]["name"];
			$file["fileUrl"] = $release["assets"][0]["browser_download_url"];
			$file["remote"] = "github";
			$file["count"] = $release["assets"][0]["download_count"];
			$file["first"] = date("Y-m-d H:i:s", $file["exists"]);
			$file["last"] = "0";

			$files[md5($file["fileUrl"])] = $file;
		}
			
		return $files;
	}
}


//maybe better check for a defined var from the importing script.
//run on direct call
if (__FILE__ == $_SERVER['DOCUMENT_ROOT'].$_SERVER['PHP_SELF']) {
	$DownloadInformation = new DownloadInformation();
	print $DownloadInformation-&gt;GetFileInformation(true);
}
?&gt;
</textarea><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1281233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks.<br>I looked at the official GITHUB API just yesterday, I should restart to use PHP to integrate these informations (in some ways) in my site.<br><br>With LibCurl module, MaxIDE could check if the user is running the latest version and/or download directly it (just free thinking of course :D)<br><br>I think the valid KEYs are (reading from GitHub API v3)<br>Under ASSETS<br><b>browser_download_url </b>(for the download link)<br><b>updated_at</b> (last change I suppose)<br><br>ps: I suppose there's no info in the BMX-NG package about the 'current version'... so comparing what version user is running is quite hard. <br><br></td></tr></table><br>
<a name="1281235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> You only get the file name ... so if that naming scheme is constant, you could use that.<br><br>what you could do too: use "published_at" to convert that into a timestamp which you compare to something... only useful, if binaries change between releases. - or if the ide is aware of it and stores the "latest downloaded release date" somewhere ...<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1292167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >juankprada</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> What would be needed to make it work with Blitzmax instead of NG? Is not that I dont want to use NG is just that I am not sure how mature it is and would like to use the mojo2 port you have there.<br><br>Thanks <br><br></td></tr></table><br>
<a name="1292187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vanilla BlitzMax does not support "Interfaces", which is what "mky.mod" uses.<br><br>I did not have a closer look, but as BlitzMax (vanilla) does work without interfaces, there are surely ways out there to "emulate behaviour" (extend types). So you could convert code to make it work with vanilla.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1292189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sure it's possible to back-port it. <br><br></td></tr></table><br>
<a name="1292213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >juankprada</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will probably do it, thanks for the info. <br><br></td></tr></table><br>
<a name="1292219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Might be enough to convert these "byteptr - int"-conversions + the interfaces with simple types.<br><br>Ahh and in maps.c you should replace the link to tree.h with "brl.mod/map.mod/tree/tree.h" (in NG this is placed in brl.mod/blitz.mod/tree/tree.h).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1292223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >juankprada</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will try to modifiy it so that it works in both vanilla and NG.<br><br>Will post later this week with what I have done.<br><br> Thanks for the tips <br><br></td></tr></table><br>
<a name="1292245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've back-ported most of it to run under the legacy compiler.<br><br>The only thing I don't have working is the rendererdemo, as it implements some of the interfaces.<br>Otherwise, the examples appear to be working. <br><br></td></tr></table><br>
<a name="1292249"></a>

<a name="1292252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your commit made it indeed running here on Linux Mint.<br><br>Interesting bit:<br><pre class=code>
?bmxng
		For Local char:Int=EachIn Text
?Not bmxng
		For Local i:Int=0 Until Text.length
			Local char:Int = Text[i]
?
[...]
		Next
</pre><br><br>Good job.<br><br><br>Edit:<br>samples not working (or needing adjustment): <br><br>- shadereffect (colormaterial not found)<br><br><br>- writepixels<br><pre class=code>
Local rgba:Int=a*255 Shl 24 | b*255 Shl 16 | g*255 Shl 8 | r*255
			
Local pix:Int Ptr = data.pixels
</pre><br>"Compile Error: Bitwise operators can only be used with integers" <br>"Compile Error: Unable to convert from 'Byte Ptr' to 'Int Ptr'"<br><br>change to:<br><pre class=code>
Local rgba:Int=int(a*255) Shl 24 | int(b*255) Shl 16 | int(g*255) Shl 8 | int(r*255)
			
Local pix:Int Ptr = Int Ptr(data.pixels)
</pre><br><br><br>- mojodemo (optional if you do not have the sdl.mod)<br><pre class=code>
'Import brl.GLGraphics
Import sdl.sdlgraphics
</pre><br>becomes<br><pre class=code>
Import brl.GLGraphics
'Import sdl.sdlgraphics
</pre><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1307596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe port Mike Hart's fantomX framework which uses Mojo2?<br><br><a href="https://github.com/MikeHart66/fantomX" target="_blank">https://github.com/MikeHart66/fantomX</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
