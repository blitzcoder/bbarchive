<!DOCTYPE html><html lang="en" ><head ><title >Questions and notes on the latest NG</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Questions and notes on the latest NG</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=126" >BlitzMax NG</a>/<a href="#bottom" >Questions and notes on the latest NG</a><br><br>
<a name="1308771"></a>

<a name="1308819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I built the latest the NG from github (everything) and ran into some issues and questions. Here they are in no particular order.<br><br>Building for android was tough as there is no docs or reference, only vague references in the forums. I got it working though and i must say it's pretty cool! <br><br>Here are some of the errors I ran into.<br>1) By default, any android app will immediately crash with an error about <br>"java.lang.NoSuchFieldError: no "Z" field "mSeparateMouseAndTouch""<br>I had to edit sdl mod to remove this function to get it working.<br><br>2) the AndroidManifest.xml file just gets copied over from the resources dir to the project dir without any modifications. I had to manually edit the file in 'resources' to update the 'minSdkVersion' and  'targetSdkVersion' to match what was defined in 'custom.bmk'.   Not exactly sure if this was required though.<br><br>3) the android build directory has to be manually deleted between compiles to have things updated in the new apk.<br><br>4) How to include assets?  I tried putting things in an assets folder alongside the source file, but nothing ever gets copied over.  I've seen references in the forums to "sdl::.." but with no assets to load it, who knows.. <br>I also tried using 'incbin', but that just crashes the app. So far only drawing text and primitives works.  <br><br>5) Does audio work?  I've read on the forums that soloaudio works, but I'm particularly interested in SDL audio as it has less restrictions.   <br> <br>Other things:<br>maxide won't compile properly by default because of breaking changes to Timers.<br><br>There is something off about the bbdoc for 'WaitTimer' as it crashes 'MakeDocs' preventing any syntax highlighting in maxide.<br><br>what is the language/syntax for 'pre.bmk' and 'post.bmk'? Are they lua files? Are there any examples of them being used. <br><br></td></tr></table><br>
<a name="1308772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can probably answer most of your questions there, at least what has been discussed already until Brucey, Derron and the others could explain these issues further. You have probably noticed that the most of the posts that you were talking abuot were started by me. ;-)<br><br>4) "sdl::image.png" will be placed into the assets/directory. So after the first build, copy it to the assets directory and of course directories are supported. So if you have "media/image.png" in your default game directory (root), copy the media folder to the generated "assets" folder accordingly.<br><br>"sdl::media/image.png" -&gt; assets/media/image.png<br><br>All files must be of type Stream. Incbin works, also stream and don't forget to use BRL.RamStream. Usually the Framework gl2sdlmax2d driver already includes the necessary modules but try to import SDL.SDL if it doesn't work.<br><br>5) Audio works perfectly via SoloAudio and Brucey already said that he will be dropping support for SDL AudioMixer and SoloAudio is now the goto for crossplatform sound at the moment. <br><br></td></tr></table><br>
<a name="1308783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ maxide<br>search "Import Brl.Timer" and append:<br><br>?bmxng<br>Import Brl.TimerDefault<br>?<br><br><br>@SDL AudioMixer<br>The problem there for me is: it only supports 1 (no more) audio streams (eg. ogg-files). This disables useful things like "crossfading" or "audio stream" + "voice overlay".<br><br><br>@assets<br>After doing the first build, it creates this new project-output-folder. Within that folder, there is "assets". This is the target folder for your ressources.<br><br>Maybe this should be changed to either:<br>- auto copy what is in a local "assets"-folder<br>- adjust the .bmk files to do that for you (there is "pre.bmk", "post.bmk" - or the bmk-used "make.bmk")<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1309067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> 4) How to include assets<br><br>Create a file called MyApp.bmk (where MyApp is the same name as your main .bmx file). So, for example, if your main file is called "TVTower.bmx", you create a file called "TVTower.bmk"<br>(OR, you can put it into pre.bmk, but pre.bmk would be loaded for each app in that folder - which could be a problem if you build multiple apps from in the same place).<br><br>In your file, add :<br><pre class=code>
addresourcepath "dir_full_of_stuff"
</pre><br><br>The folder "dir_full_of_stuff" will be copied into the assets folder, resulting in the following :<br><pre class=code>
assets/dir_full_of_stuff/file1.txt
assets/dir_full_of_stuff/file2.txt
etc
</pre><br><br>In your code, you could access file1.txt with "sdl::dir_full_of_stuff/file1.txt"<br><br>"addresourcepath" also works for iOS - except that the folder is copied into the resource bundle. <br><br></td></tr></table><br>
<a name="1309068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahh that sounds cool ... was on my way to suggest an "app specific"-bmk (if it did not exist already) to prepare such things like asset-copying.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1309069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Latest bmk you can also add some command-line options to custom.bmk. eg.<br><pre class=code>
addoption opt_warnover 1
</pre><br><br>The full list is (with actual command-line option/flag on the right) :<br><pre class=code>
opt_warnover            -w
opt_quickscan           -quick
opt_gdbdebug            -gdb
opt_standalone          -standalone
opt_nostrictupgrade     -nostrictupgrade
</pre><br>Acceptable values are 1 or 0<br>Details about what the options do are available from bmk (run with no args to get the help page) <br><br></td></tr></table><br>
<a name="1309076"></a>

<a name="1309077"></a>

<a name="1309078"></a>

<a name="1309080"></a>

<a name="1309081"></a>

<a name="1309090"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey, that helps a lot!<br><br>I was using  <br>addarg "-w"<br>addarg "-quick"<br>addarg "-v"<br>in my .bmk file.  Your method works better.<br>(debug builds seem to ignore these flags even with debug.bmk file)<br><br>I have a few other questions that this brought up.<br><br> <br>1)<br>Using the &lt;project&gt;.Bmk method. The "-g" option gives an error. Currently this is the only flag that's holding up using Blide as a full time ide. Is there a way to intercept the '-g' flag with any *.bmk file?<br><br>2) <br>Are there any benefits of using gdb debug for windows? Can an external profiler be used (like '<a href="http://sleepy.sourceforge.net/" target="_blank">Sleepy</a>')? <br><br>3) <br>I added this to core.bmk:<br>@define exec<br>  bmk.MultiSys(arg0)<br>@end<br>so that I could call on "adb" to uninstall and reinstall each new build on my phone automatically.  <br>ex: exec "adb uninstall net.aw.android.myapp"<br>Sometimes it works, most the time it gives an error. <br>Is there a better way?<br><br>4) <br>I was able to use soloaudio on android but only by using using the wavstream and incbin method. I tried for several hours and no other method worked for me. Is this the only method? Are soloud-Wav object types and filters planned in the future?<br><br><br>Thanks! <br><br></td></tr></table><br>
<a name="1309079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Brucey,<br><br>How do you set release build in Android? I know you can do this by using ant but is there a bmk equivalent?<br><br>@GW<br><br>Ogg files works too I have tested it. <br><br></td></tr></table><br>
<a name="1309113"></a>

<a name="1309114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @gdb<br><br>if you do a "gdb"-build, then the executable gets bigger as it includes the original "source position". so when debugging, the backtrace contains the information in which line of the original blitzmax-sourcecode that thing just happened.<br><br>-&gt; the C-file contains a line-information for each command it translated. <br><br>@ uninstall<br>"adb install -r bla.apk" does the same, if it was not installed, no "uninstall" is done.<br><br>Also I would only call this command, if the "execute"-command was used ("-x"). So a normal build does not deploy, a "build + run" should try to copy to an attached device first.<br><br><br>@ ogg<br>Will have a try once your flappy-DL works.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1312439"></a>

<a name="1312495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John G</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.  OddBall's wonderful extensions seem incompatible with BlitzMaxNG on Win32.  <br>I only use: SetScreenFocus x,y ; SetScreenRotation r ; SetZoom z<br>Is it possible someone could update OddBall's modules someday.<br>Probably forget DX7 -- only OGL and DX9.  32/64 bit ?<br><br>EDIT:  Please put OddBalls extensions on a very low priority basis.  Probably not enough users and too many forks!  DirectX 11 &amp; 12, future OGL graphics.  Maybe 3 extensions above could be added into BMXNG someday.<br><br>Also, is it possible for someone to post a snapshot of BlitzMaxNG for Win32/Win64 every few months?  Like DABZ downloads? I'm lost on GitHub. <br><br></td></tr></table><br>
<a name="1312476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can download a zip in the github website if you go to the root of a repository --<br><br>e.g.:   <a href="https://github.com/bmx-ng/brl.mod" target="_blank">https://github.com/bmx-ng/brl.mod</a><br>In the upper right corner there is a "clone or download" button, and if you click that there is a "download ZIP" option. <br><br></td></tr></table><br>
<a name="1312506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John G</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @xisior :  Thanks for the link.  I think I've stumbled there before.  I already have a DABZ 'Frisky' folder from 4/26/2016.  The new github download contains many MOD folders such as appstub.mod.  Should I copy all these MODs and drag them into my 'mod' folder from 4/26/2016?  Remember, not as quick as I used to be.  In fact, never was... <br><br></td></tr></table><br>
<a name="1312525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> appstub.mod belongs into "brl.mod".<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1312530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John G</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @xisor &amp; Derron :  Thanks to both, he says sheepishly ... <br><br></td></tr></table><br>
<a name="1315284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've added an odd.mod repo to bmx-ng : <a href="https://github.com/bmx-ng/odd.mod" target="_blank">https://github.com/bmx-ng/odd.mod</a><br><br>The GL module is only desktop compatible - i.e. not OpenGL ES. <br><br></td></tr></table><br>
<a name="1315339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John G</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Brucey -- Thanks.  Hope I figure out how to use it now!<br>You are a Scottish Prince. <br><br></td></tr></table><br>
<a name="1315971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FireballStarfish</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I decided to update my NG installation today, and as a result, it stopped working.<br>I pulled the latest version of bcc, bmk, maxgui and all the modules, and as soon I replace my older bmk with the freshly compiled one (win/release/console/non-threaded, doesnt matter if x86 or x64) I can't build anything anymore; I just get the message "ERROR<br>[string "function bmk_source_type(...)..."]:5: attempt to concatenate local 'arg0' (a userdata value)".<br>Anyone got an idea how I can fix this? <br><br></td></tr></table><br>
<a name="1315981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you copy the current *.bmk files (just the ones you already have in your /bin folder) ?<br><br>The error is coming from LUA ... which is used in these BMK files. Maybe that solves the issue already.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1315988"></a>

<a name="1315991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FireballStarfish</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I have the current core and make.bmk in there, and nothing that looks like it could be responsible for this has changed in them since the last time I updated (sometime in June/July). <br><br></td></tr></table><br>
<a name="1316053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a new Windows release on github. It appears to work okay. <br><br></td></tr></table><br>
<a name="1316060"></a>

<a name="1316061"></a>

<a name="1316062"></a>

<a name="1316063"></a>

<a name="1316064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FireballStarfish</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried downloading <a href="https://github.com/bmx-ng/bmx-ng/releases/tag/v0.81.3.16.win32" target="_blank">this</a> release (assuming that's what you mean) and using it, freshly unpacked, to compile bmk from the latest git sources. Dropping the resulting bmk.exe into the bin folder results in the same error described above. <br><br></td></tr></table><br>
<a name="1316074"></a>

<a name="1316075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does it happen too, if you compile BMK with vanilla-BMX (I compile the toolchain with vanilla rather than NG to avoid issues out of bugs) ?<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1316119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FireballStarfish</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, no it doesn't. But while I can get an up-to-date bmk like that, that means there's still some kind of issue, right?<br>Turns out this isn't actually about the *newest* bmk. <a href="https://github.com/bmx-ng/bmx-ng/releases/tag/v0.81.3.16.win32" target="_blank">This release</a> can't compile even its own bmk without the error coming up once it's swapped in. <a href="https://github.com/bmx-ng/bmx-ng/releases/tag/v0.70.3.09.win32" target="_blank">This one</a> still could. <br><br></td></tr></table><br>
<a name="1316161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it turns out 0.70x windows works really well. At least that's what got me started and having no problems at all with the upgrades. :-) <br><br></td></tr></table><br>
<a name="1316166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> The issues turn out to be a result of unfortunately implementing <a href="https://github.com/bmx-ng/brl.mod/issues/36" target="_blank">https://github.com/bmx-ng/brl.mod/issues/36</a> ...<br><br>I've patched the release. <br><br></td></tr></table><br>
<a name="1316225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FireballStarfish</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ooh, nice :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
