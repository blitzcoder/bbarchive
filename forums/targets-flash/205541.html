<!DOCTYPE html><html lang="en" ><head ><title >Flash DrawImage exended method is super-slow</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Flash DrawImage exended method is super-slow</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=503" >Flash</a>/<a href="#bottom" >Flash DrawImage exended method is super-slow</a><br><br>
<a name="2062026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya, I made a game where it draws about 500 tiles on screen.<br><br>If I draw them like this:<br><br>DrawImage(image, drawX, drawY)<br><br>it is super-fast and fine.  But if I use the extended function form that supports rotation and scaling and frame number, it goes super-slow EVEN IF I supply 0 for the rotation and 1 for the scale and frame 0:<br><br>DrawImage(image, drawX, drawY, 0, 1, 1, 0)<br><br>I'm not sure if it's the rotation or the scale slowing it down tons because I can't test them separately.<br><br>However, I've been able to optimise my code by saying if not rotation/scaled don't call the extended method and I get a MASSIVE speed gain.<br><br>So my suggestion is that for Flash (and possibly for other targets although GLFW seemed fine), that Monkey should do that kind of check internally and not set rotation or scale if it doesn't need to.<br><br>What do you think? <br><br></td></tr></table><br>
<a name="2062029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you try setting the Matrix before calling DrawImage? The overrided DrawImage (see below) is meant to be a convenient method.<br><br><div class="quote"> Function DrawImage : Int ( image:Image, x:Float, y:Float, rotation:Float, scaleX:Float, scaleY:Float, frame:Int=0 )<br>Draws an image at coordinates x, y, offset by the image's handle.<br><br>The image is drawn using the current color, alpha, blend mode and matrix, and is clipped to the current scissor rectangle.<br><br>The rotation and scaleX, scaleY parameters provide a convenient way for you to 'locally' rotate and scale the image. <br></div> <br><br></td></tr></table><br>
<a name="2062030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes that would tell me if it's the scale or rotation I guess. Run out of time tonight though. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
