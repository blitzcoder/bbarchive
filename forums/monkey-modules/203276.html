<!DOCTYPE html><html lang="en" ><head ><title >Mojo HTML5 GL</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Mojo HTML5 GL</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >Mojo HTML5 GL</a><br><br>
<a name="2091177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>This patch is deprecated!</b> <br>There wonâ€™t be no updates, no bugfixes, no compatibility with new Monkey versions.<br><br><b>How to add WebGL support for mojo now?</b><br>I made new implementation of WebGL support for mojo in my Monkey fork - <a href="http://mungo.io/" target="_blank">mungo</a>. Itâ€™s a better implementation which gives ~10 time better performance than this patch and works in IE11. Here is a <a href="http://mungo.io/demo/webgl.html" target="_blank">small demo</a>.<br><br>Now you can use these two methods to enable WebGL acceleration for your mojo projects:<br><br><b>1. Download and install mungo</b><br>The fastest way to use new WebGL implementation for mojo is to <a href="http://mungo.io/" target="_blank">download</a> and install mungo. <br><br><b>2. Create custom HTML5 target</b><br>If you donâ€™t want to use mungo you can add WebGL support for mojo by following this short manual:<br><div class="quote"> 1. Create a new HTML5 target based on the standard HTML5 monkey target.<br>2. Rename directory of the new target. For example: html5_webgl<br>3. There, replace files in modules/native folder by <a href="http://source.mungo.io/targets/html5/tree/master/modules/native" target="_blank">files</a> from mungo<br>4. Rename new target in TARGET.MONKEY file. For example: #TARGET_NAME="Html5 WebGL Game"<br>5. Copy-paste code from <a href="http://source.mungo.io/modules/mojo/blob/master/native/mojo.html5.webgl.js" target="_blank">mojo.html5.webgl.js</a> file into template/main.js file after //${TRANSCODE_END} line<br>6. Add #HTML5_WEBGL_ENABLED=True in template/CONFIG.MONKEY file <br></div><br><br>---<br><br>An experimental patch for mojo, that replaces the standard 2d-context with WebGL.<br><br><b>Features</b><br>* It does not require code changes<br>* High SetBlend performance for images<br>* High SetColor performance for images<br>* #MOJO_IMAGE_FILTERING_ENABLED support<br>* <a href="http://www.google.com/chromeframe" target="_blank">Chrome Frame</a> support<br>* It works in browsers that do not support WebGL (2d-context used)<br>* Small file size - 12KB only!<br><br><b>Usage</b><br>* Just connect <a href="https://raw.github.com/devolonter/mojo-html5-gl/master/mojo.html5.gl.min.js" target="_blank">mojo.html5.gl.min.js</a> to a page with the game.<br>* Optional. Enable Chrome Frame support in Internet Explorer. <a href="http://www.chromium.org/developers/how-tos/chrome-frame-getting-started" target="_blank">More info</a>.<br><br><b>Note</b><br>* For V65 and V66 versions use version <a href="https://raw.github.com/devolonter/mojo-html5-gl/v1.21/mojo.html5.gl.min.js" target="_blank">v1.21</a><br>* For versions V64 and below use <a href="https://raw.github.com/devolonter/mojo-html5-gl/v1.11/mojo.html5.gl.min.js" target="_blank">v1.11</a><br><br><a href="https://github.com/devolonter/mojo-html5-gl" target="_blank">Repo on GitHub</a> | <a href="http://lab.devolonter.ru/libs/mojo-html5-gl/" target="_blank">Demo</a> | <a href="https://raw.github.com/devolonter/mojo-html5-gl/master/mojo.html5.gl.min.js" target="_blank">Download</a> <br><br></td></tr></table><br>
<a name="2091176"></a>

<a name="2068415"></a>

<a name="2048980"></a>

<a name="2035620"></a>

<a name="2035289"></a>

<a name="2034561"></a>

<a name="2034562"></a>

<a name="2034280"></a>

<a name="2034281"></a>

<a name="2034282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nifty. Thanks for sharing. Are any of the issues without known solutions or is it just a matter of time/effort? <br><br></td></tr></table><br>
<a name="2034284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FelipeA</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really nice! it's very notorious the difference. I do hope the known issues get fixed as I use SetScissor a lot.<br>Thanks! <br><br></td></tr></table><br>
<a name="2034288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Nifty. Thanks for sharing. Are any of the issues without known solutions or is it just a matter of time/effort? <br></div><br>Just a matter of time. SetScissor will be fixed in the near future. DrawCircle, DrawEllipse, DrawOval and a bug in Opera 12.00 some time later. <br><br></td></tr></table><br>
<a name="2034287"></a>

<a name="2034295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> pretty cool! should be able to blend this and 3d. <br><br></td></tr></table><br>
<a name="2034305"></a>

<a name="2034306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update is available!<br><br>Support of SetScissor, DrawCircle, DrawEllipse and DrawOval methods was added.<br><br>I connected this patch to the <a href="http://lab.devolonter.ru/libs/monkey-flixel/mode/html5.html" target="_blank">Mode</a> game, you can compare the performance and appearance with the <a href="http://monkeycoder.co.nz/Community/topics.php?forum=1151&amp;app_id=151" target="_blank">old version</a> now. <br><br></td></tr></table><br>
<a name="2034313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FelipeA</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, really amazing the difference!, I will definitely be using this for my next html5 builds.<br>I also noticed it doesn't blur images like regular 2d context. That's a nice thing too for pixelated games.<br>Thanks! <br><br></td></tr></table><br>
<a name="2034311"></a>

<a name="2034374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. I think it was a mistake to place this topic in User Modules. Can someone move it in HTML5, please? <br><br></td></tr></table><br>
<a name="2034386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> holy crap.. the difference for me is crazy, is mark planning to implement this anyone know ? <br><br></td></tr></table><br>
<a name="2034392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> holy crap.. the difference for me is crazy, is mark planning to implement this anyone know ? <br></div><br>I'm not sure. But you can use it right now. Just replace the line in MonkeyGame.html:<br>[monkeycode]&lt;script language="javascript" src="main.js"&gt;Javascript not supported!&lt;/script&gt;[/monkeycode]<br>by:<br>[monkeycode]&lt;script language="javascript" src="mojo.html5.gl.min.js"&gt;Javascript not supported!&lt;/script&gt;<br>&lt;script language="javascript" src="main.js"&gt;Javascript not supported!&lt;/script&gt;[/monkeycode]<br>After that, add file <b>mojo.html5.gl.min.js</b> in .build/html5 folder and have fun! :) <br><br></td></tr></table><br>
<a name="2034391"></a>

<a name="2034393"></a>

<a name="2034394"></a>

<a name="2034395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, Mojo HTML5 GL looks cool :)<br><br>but unfortunately I have error (Monkey V60):<br>"Monkey Runtime Error : Reference Error: gxtkApp is not defined"<br><br>&gt;&gt;&gt;Ups, sorry, now it works - recompile ;) <br><br></td></tr></table><br>
<a name="2034396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br><br>What browser do you use? Did you use mserver or a real web server? Try to swap main.js and mojo.html5.gl.min.js. as follows:<br><br>[monkeycode]<br>&lt;script language="javascript" src="main.js"&gt;Javascript not supported!&lt;/script&gt;<br>&lt;script language="javascript" src="mojo.html5.gl.min.js"&gt;Javascript not supported!&lt;/script&gt;<br>[/monkeycode] <br><br></td></tr></table><br>
<a name="2034399"></a>

<a name="2034400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Browser: Chrome 20.0.1132.57 m<br><br>Compile &amp; Run with Monkey(mserver) - works ok<br><br>Run by clicking MonkeyGame.html (bananas\mak\mojotest) - <br>Monkey Runtime Error : Error: SECURITY_ERR: DOM Exception 18 <br><br></td></tr></table><br>
<a name="2034402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info. It is a strange bug, I'll try to reproduce it. If someone else faced with "Reference Error: gxtkApp is not defined" please let me know.<br><br><div class="quote"> Run by clicking MonkeyGame.html (bananas\mak\mojotest) - <br>Monkey Runtime Error : Error: SECURITY_ERR: DOM Exception 18 <br></div><br>This is normal behavior without a server. <br><br></td></tr></table><br>
<a name="2034410"></a>

<a name="2034411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> This is normal behavior without a server. <br></div><br>Ok, thanks. <br><br></td></tr></table><br>
<a name="2034518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update is available!<br><br><div class="quote"> * All known issues were resolved <br>* <a href="http://iewebgl.com/" target="_blank">IEWebGL</a> and <a href="http://www.google.com/chromeframe" target="_blank">Chrome Frame</a> support added <br>* Bug fixes <br></div><br>P.S. To use Chrome Frame in IE you have to modify MonkeyGame.html and add &lt;meta http-equiv="X-UA-Compatible" content="chrome=1"&gt; to the head block <br><br></td></tr></table><br>
<a name="2035172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fred</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a very late stupid question: How can I be sure that the prog is really using the patch ?<br>I just tried it on my wireframe engine (a lot of regulat mojo lines) and I can't see any difference ? <br>Anyway thank you for sharing, I'll give it a real try as it should well fit my needs :) <br><br></td></tr></table><br>
<a name="2035173"></a>

<a name="2035174"></a>

<a name="2035175"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! The most simple way to be sure that it works is to set #MOJO_IMAGE_FILTERING_ENABLED="false" and zoom image. If it works correctly then patch enabled. <br><br></td></tr></table><br>
<a name="2035212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fred</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, OK it works, but in my case it is very much slower ! I have 4 rendering modes for a line: regular mojo drawline, stretched and rotated 3 pixels bitmap and polygone (4 and 6 points) all of them are slower. Almost all lines are in setBlend 1, I will investigate more later...<br>tests only with Chrome yet. <br><br></td></tr></table><br>
<a name="2035216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fred</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way, if you are interested I can send you an access to it. <br><br></td></tr></table><br>
<a name="2035231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I want to have a look. Send me, please. <br><br></td></tr></table><br>
<a name="2035389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> damn i get an error when i try to run the html5 app as a metro app. <br><br>mainly its telling me that canvas object does not have getcontext() method. I'm assuming the canvas isn't being passed to that script like it would in a browser. I would love to get this to work in Metro because all the other html5 demo apps are slooooowwww when i port them into windows metro <br><br></td></tr></table><br>
<a name="2035473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cygnus</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> This works well, but it's making my app run in 1/2 resolution (but normal size.) - Odd! Any ideas? <br><br></td></tr></table><br>
<a name="2035501"></a>

<a name="2035502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Damien,<br><br>Soon will be available a new version of the script. It’s will be absolutely new and fully rewritten version. Maybe, it will be able to solve your issue. Stay tuned. <br><br></td></tr></table><br>
<a name="2035621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update is available!<br><br>List of changes:<br><div class="quote"> * Performance improvement (in some cases  five times over improvement).<br>* Rendering system was fully rewritten. Now, the script isn't based on WebGL2D and doesn’t emulate 2d context. It fully overrides all mojo graphics functions.<br>* Now, Opera 12.x uses a 3d context<br>*  Script size was reduced <br></div> <br><br></td></tr></table><br>
<a name="2035618"></a>

<a name="2035673"></a>

<a name="2035674"></a>

<a name="2035675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cygnus</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Testing now! Thanks!<br><br>[edit]<br>Nice work! Sadly it is still rendering at 1/2 resolution for me: Take a look here:<br><br><a href="http://www.sturdygames.co.uk/GravityEd/index.htm" target="_blank">http://www.sturdygames.co.uk/GravityEd/index.htm</a><br><br>Click the links at the top to select between this and normal canvas operation.<br><br>Yours is fast as hell from tests, but still my graphics are blocky.<br><br>[edit 2]<br><br>Could this be related to mipmap/anistropic texturing settings? I just tried on a few other machines and only the 2 with ATI cards have this issue. <br><br></td></tr></table><br>
<a name="2035709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cygnus, I'm using Chrome in Windows 7 and didn't notice much of a difference between the two versions. This PC has an NVIDIA GeForce 8400 GS. <br><br></td></tr></table><br>
<a name="2035721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Nice work! Sadly it is still rendering at 1/2 resolution for me: Take a look here:<br><br><a href="http://www.sturdygames.co.uk/GravityEd/index.htm" target="_blank">http://www.sturdygames.co.uk/GravityEd/index.htm</a> <br></div><br><br>ATI radeon 5450 here, works fine for both. <br><br></td></tr></table><br>
<a name="2035736"></a>

<a name="2035737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Cygnus It’s strange. I also have ATI card (ATI Radeon  HD 5670), but I can't reproduce this issue. And now I don’t understand why it's happening. Can you send me screenshot with this issue, please? I suspect this issue connected with vertex shader initialization. But I’m not sure.<br><br>Right now I'm working on preparation of the new version of Flixel for Monkey, therefore I can try to fix it only during next week. For now, I suggest to gather more information about this issue. Everyone who have similar issue, please tell me your OS and card model.<br><br>@c.k. It not always will give performance improvement. It seems that your card is working very well with  2d context.<br><br>@AdamRedwoods Thank you for information! <br><br></td></tr></table><br>
<a name="2035733"></a>

<a name="2035734"></a>

<a name="2035735"></a>

<a name="2035738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cygnus</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Howdy!<br><br>I'm running a HD4570 mobility (with catalist 12.4, newer versions are glitchy with Steam so I refuse to update.)<br><br><img src="http://www.sturdygames.co.uk/normalcanvas.PNG"> &lt;-NORMAL MODE<br><br><img src="http://www.sturdygames.co.uk/3dcanvas.PNG"> &lt;-USING YOUR LIB.<br><br>I have tried every setting with the drivers and cannot get rid of this issue.<br><br>Cheers for looking into it, no rush mind, the game runs flawlessly normally, just want to make use of any speed gains I can get :-) <br><br></td></tr></table><br>
<a name="2076397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! It seems I understand your issue. Try to do the following:<br><br>Set #MOJO_IMAGE_FILTERING_ENABLED="false" in Monkey code. <br><br>If this don't help try the next thing:<br><div class="quote"> 1. Download unminified script version <a href="https://raw.github.com/devolonter/mojo-html5-gl/master/mojo.html5.gl.js" target="_blank">here</a><br><br>2. Go to line 653 and replace gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR) by gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)<br><br>3. Go to line 656 and replace gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST_MIPMAP_NEAREST) by gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST)<br><br>4. Go to lines 654 and 657 and comment gl.generateMipmap(gl.TEXTURE_2D);<br><br>5. Replace your minified script version with modified version <br></div> <br><br></td></tr></table><br>
<a name="2035743"></a>

<a name="2035739"></a>

<a name="2035740"></a>

<a name="2035742"></a>

<a name="2035812"></a>

<a name="2035813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cygnus</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> None of that worked, but I found the issue! :-)<br><br>gl.getParameter(gl.MAX_TEXTURE_SIZE); was returning 511 instead of 512, so my textures are literally loaded as 256x256. I changed line 168 to:<br><br>gl2d.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE)+1;<br><br>and now everything works fine :-)<br><br>Glitch in my driver perhaps? <br><br></td></tr></table><br>
<a name="2035838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, that's an amazing performance increase for me :) Thank you <br><br></td></tr></table><br>
<a name="2035850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Glitch in my driver perhaps? <br></div><br>It seems to be true. Thanks for research. I've made a quick fix and update. But I think this behavior is incorrect and I'll change it.<br><br><div class="quote"> Wow, that's an amazing performance increase for me :) Thank you  <br></div><br>You are welcome! :) <br><br></td></tr></table><br>
<a name="2037145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> I finally got to testing this. I was busy looking for a way to disable the MOJO_IMAGE_FILTERING in HTML5, but turns out this is the way to do it :). Even increased the FPS a lil bit too. Exactly what we needed for Flixel :). <br><br></td></tr></table><br>
<a name="2037198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fred</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Incredible work devolonter ! it speeds up everything, and open the possibilities for the rendering I want. Thank you. <br><br></td></tr></table><br>
<a name="2038933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update is available. Added compatibility with V65's app config settings system. <br><br></td></tr></table><br>
<a name="2039303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Risc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is awesome <br><br></td></tr></table><br>
<a name="2039664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update is available. Added support of reading/writing pixels. <br><br></td></tr></table><br>
<a name="2039783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rickomax</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey man, nice work!<br><br>I guess I've just found a little bug:<br><br><pre class=code>gxtkGraphics.prototype.DrawLine = function(x1, y1, x2, y2) {
			if (mode !== MODE_NONE) renderPull();

			renderPush(gl.LINES, 2);

			if (this.tformed) {
				var tx0 = x0, tx1 = x1;
				x1 = tx0 * this.ix + y1 * this.jx + this.tx;
				y1 = tx0 * this.iy + y1 * this.jy + this.ty;
				x2 = tx1 * this.ix + y2 * this.jx + this.tx;
				y2 = tx1 * this.iy + y2 * this.jy + this.ty;
			}

			buffer.vdata[buffer.vpointer] = x1; 
			buffer.vdata[buffer.vpointer + 1] = y1;
			buffer.vdata[buffer.vpointer + 2] = 0; 
			buffer.vdata[buffer.vpointer + 3] = 0; 
			buffer.vdata[buffer.vpointer + 4] = x2; 
			buffer.vdata[buffer.vpointer + 5] = y2; 
			buffer.vdata[buffer.vpointer + 6] = 0; 
			buffer.vdata[buffer.vpointer + 7] = 0;

			mode = MODE_NONE;
		}</pre><br><br>Monkey Runtime Error : ReferenceError: x0 is not defined <br><br></td></tr></table><br>
<a name="2039800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi. Thanks for report. I've just fixed it. <br><br></td></tr></table><br>
<a name="2039797"></a>

<a name="2039805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rickomax</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks man!<br><br>I found another issue, but this is simple, just change:<br><pre class=code>					x0 = tx0 * this.ix + y0 * jx + this.tx;
					y0 = tx0 * this.iy + y0 * jy + this.ty;</pre><br><br>With:<br><pre class=code>					x0 = tx0 * this.ix + y0 * this.jx + this.tx;
					y0 = tx0 * this.iy + y0 * this.jy + this.ty;</pre> <br><br></td></tr></table><br>
<a name="2039806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice! Thank you very much! Script was updated. <br><br></td></tr></table><br>
<a name="2045079"></a>

<a name="2045080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update is available!<br><br>2x performance improvement for SetColor and SetAlpha. <br><br></td></tr></table><br>
<a name="2045330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for making this and maintaining it. We are using it now with an indev project more sensitive to speed. <br><br></td></tr></table><br>
<a name="2045757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone have graphical problems when using texture atlases? <br><br>We are using this method of texture atlases:<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=380" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=380</a> <br><br></td></tr></table><br>
<a name="2048978"></a>

<a name="2048979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update is available!<br><br><div class="quote"> * <b>Important!</b> This version is only compatible with V67<br>* Now script preloads all textures. Therefore, there might be a short pause before the game start<br>* Added full support of CreateImage and WritePixels<br>* In debug mode to the console was added notification. Now, if the script was connected successfully, it writes to the console "WebGL enabled"<br>* Shaders loading was simplified <br>* WebGL support detection was improved <br>* IEWebGL support  was disabled<br>* <a href="https://github.com/devolonter/mojo-html5-gl/tags" target="_blank">Version tags</a> were added to the repository <br>* Updated demo<br>* Fixed some bugs <br></div><br><b>Note</b><br>* For V65 and V66 versions use version <a href="https://raw.github.com/devolonter/mojo-html5-gl/v1.21/mojo.html5.gl.min.js" target="_blank">v1.21</a><br>* For versions V64 and below use <a href="https://raw.github.com/devolonter/mojo-html5-gl/v1.11/mojo.html5.gl.min.js" target="_blank">v1.11</a><br><br>Please, try new demo <a href="http://lab.devolonter.ru/libs/mojo-html5-gl/" target="_blank">here</a>! <br><br></td></tr></table><br>
<a name="2048986"></a>

<a name="2048987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, 3x speed increase for me, this is great work! :)<br><br>I wonder if Mark would consider including it in Monkey, with your permission of course. <br><br></td></tr></table><br>
<a name="2049051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! <br><br></td></tr></table><br>
<a name="2049859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update is available!<br><br><div class="quote"> * Work with resizable canvas was fixed<br>* Small improvements <br></div> <br><br></td></tr></table><br>
<a name="2054874"></a>

<a name="2054875"></a>

<a name="2054876"></a>

<a name="2054877"></a>

<a name="2054878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just tried adding this to a working project, but when I change the html to use mojo.html.gl.min.js I get this error:<br><pre class=code>Monkey Runtime Error : TypeError: Cannot call method 'IncLoading' of undefined</pre>I am using v69 of Monkey, any ideas what the problem might be? <br><br></td></tr></table><br>
<a name="2054894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you connect it like in post #10?<br><br><a href="http://www.monkeycoder.co.nz/Community/post.php?topic=3276&amp;post=34392" target="_blank">http://www.monkeycoder.co.nz/Community/post.php?topic=3276&amp;post=34392</a> <br><br></td></tr></table><br>
<a name="2054898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> I saw this a while ago, but never ended up testing it. I was missing out on a lot. This works great, and it's a lot faster when it comes to drawing a lot of images at once. Thanks for making this, Devolonter, now I don't have to rework how I render everything, just to get decent enough performance with HTML5 and JavaScript. Plus it's OpenGL, so if I want to use lower level commands, it's not as much of a pain to get things running on other platforms.<br><br>Also rIKmAN, I don't know why it isn't working for you, but I'm using V69, and I'm having no issues. I'm even able to use 'Import' via Monkey to set it up. <br><br></td></tr></table><br>
<a name="2054947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I have changed the .html file to include the new .js file as per the instructions, and it worked fine before as I posted in this thread when I tried it back then (post #48).<br><br>The project has grown since since then, though by no means is it a large project, and it compiles and runs fine in HTML5, Flash, GLFW and iOS and when using the standard Monkey generated .html file.<br><br>It looks like it is trying to load something that isn't there, but if that was the case surely I would get errors when running it in other targets?<br><br>I'm using a few modules: SpriterImporter, diddy.xml and autofit2, if that could be an issue? <br><br></td></tr></table><br>
<a name="2054946"></a>

<a name="2054945"></a>

<a name="2054944"></a>

<a name="2054943"></a>

<a name="2054948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> rIKmAN, can you send me your main.js file on email? <br><br></td></tr></table><br>
<a name="2054953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Email sent to the address on your profile devolonter. <br><br></td></tr></table><br>
<a name="2056109"></a>

<a name="2056110"></a>

<a name="2056111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update is available!<br><br><div class="quote"> <b>v1.32</b><br>* Improved texture loading<br>* Added support of Discard method<br>* Fixed possible bugs which caused crash of the application with an error: "Cannot call method 'IncLoading' of undefined"<br>* Small improvements <br></div> <br><br></td></tr></table><br>
<a name="2056117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where are the links as I would like to test this new version as I had the issues described.<br><br>The ones in the OP still say 1.11 and 1.21? <br><br></td></tr></table><br>
<a name="2056118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Versions 1.11 and 1.21 are only for using with old Monkey versions. Link to actual version will always be: <a href="https://raw.github.com/devolonter/mojo-html5-gl/master/mojo.html5.gl.min.js" target="_blank">https://raw.github.com/devolonter/mojo-html5-gl/master/mojo.html5.gl.min.js</a> <br><br></td></tr></table><br>
<a name="2056119"></a>

<a name="2056120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK thanks for the info.<br><br>Just tested it and I'm still getting the same error as before.<br>Did you test with the project I sent you via email?<br><br>EDIT: Scratch that it was me being an idiot - works fine - thank you :) <br><br></td></tr></table><br>
<a name="2056121"></a>

<a name="2056122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> works fine - thank you :) <br></div><br>Nice! Glad to hear that :) <br><br></td></tr></table><br>
<a name="2056151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> My bad, I broke WritePixels in the previous update. I’ve just released a new version that fixes it: <a href="https://github.com/devolonter/mojo-html5-gl/blob/v1.32b/mojo.html5.gl.min.js" target="_blank">v1.32b</a> <br><br></td></tr></table><br>
<a name="2062430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is brilliant!<br><br>Added it to speed up TimelineFX in html5, and the performance boost is enormous (from laggy with one effect to unbreakable) and it worked right away, smooth.<br><br>Thanks for the great work with this. <br><br></td></tr></table><br>
<a name="2064874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raph</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could this be extended to handle DrawPoly with a texture? Anyone know how? <br><br></td></tr></table><br>
<a name="2064901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Raph, try adding this to your HTML5 GL javascript file below the existing DrawPoly function. I haven't tested it much as I don't use the method at all myself, but it seems to do the job:<br><br><pre class=code>
		gxtkGraphics.prototype.DrawPoly2=function( verts,surface,srcx,srcy ){
			if (!surface.image.complete) return;
			if (mode !== MODE_TEXTURED) {
				renderPull();
				mode = MODE_TEXTURED;
			}
			var vertexCount = verts.length / 4
			if (vertexCount &lt; 3 || vertexCount &gt; MAX_VERTICES ) return;
	
			renderPush(gl.TRIANGLE_FAN, vertexCount);
			var p = buffer.vpointer;

			for (var i = 0; i &lt; vertexCount; i++) {
				var index = i*4
				var px = verts[index]
				var py = verts[index+1]
				
				if (this.tformed) {
					var ppx = px
					px = ppx * this.ix + py * this.jx + this.tx;
					py = ppx * this.iy + py * this.jy + this.ty;
				}
				buffer.vdata[p] = px
				buffer.vdata[p+1] = py
				buffer.vdata[p+2] = (srcx+verts[index+2])/surface.image.meta_width;
				buffer.vdata[p+3] = (srcy+verts[index+3])/surface.image.meta_height;
				p += 4;
			}
			
			render.last.texture = surface.image.texture;
		}
</pre> <br><br></td></tr></table><br>
<a name="2064899"></a>

<a name="2064944"></a>

<a name="2064945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strange... I thought it was added in the previous version. Well, it’ll be added in the next release.<br>Temporary you can use muddy_shoes’ solution. It should work. <br><br></td></tr></table><br>
<a name="2064952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> @devolonter<br><br>Am I missing something or should all these checks:<br><br><pre class=code>if (mode !== MODE_TEXTURED)</pre><br><br>...also include a check to see if the texture has changed? Like this:<br><br><pre class=code>if (mode !== MODE_TEXTURED || surface.image.texture !== render.last.texture)</pre> <br><br></td></tr></table><br>
<a name="2064951"></a>

<a name="2064973"></a>

<a name="2064974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raph</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> It works! It does seem to have worse issues with alpha at the edges of polys than Windows, Mac, or Android does. (The pink is the Cls color, to track down that sort of thing). Going to have to overlap my polys more? Or could it be something like float precision?<br><br><img src="http://www.raphkoster.com/images/HTML5Terrain.PNG"><br><br>Hurray, my fancy 2d terrain works in a browser :) <br><br></td></tr></table><br>
<a name="2064975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another question/suggestion. I use direct gl calls alongside mojo and the current method for overriding getcontext breaks the opengl20 stuff. Replacing it with this seems to do the trick:<br><br><pre class=code>
		canvas.getContext = (function(wgl2d) {
			return function(context) {
				if( context == "webgl" || context == "experimental-webgl"){
					return wgl2d.gl;
				}
				return wgl2d.api;
			};
		}(this));
</pre> <br><br></td></tr></table><br>
<a name="2064976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Raph, are you texturing the grid from an atlas or from individual images? Unless you're not sharing vert positions and calculating them oddly it doesn't seem likely that the gaps are polygon seams. Far more likely to be atlas picking error. <br><br></td></tr></table><br>
<a name="2064977"></a>

<a name="2064978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raph</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, it's an atlas. Bleah. I need to pad all the textures then. Hello, tedium. :) I'm using makeatlas, I don't think it does that automatically yet.<br><br>Edit: confirmed it's the atlas. <br><br></td></tr></table><br>
<a name="2065056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> @muddy_shoes texture changing check is done in draw call. You can see it in renderPull function.<br><br><div class="quote"> Replacing it with this seems to do the trick <br></div><br>Will be added in the next release. Thanks! <br><br></td></tr></table><br>
<a name="2066355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Salmakis</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow i just switched to this, and all my stuff is still working fine :) <br><br></td></tr></table><br>
<a name="2067376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did someone got it working with drawing an image during the OnLoading event?<br><br>Here it crashes. <br><br></td></tr></table><br>
<a name="2067452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> @MikeHart I'll look at it this weekend and try to make an update with all fixes. <br><br></td></tr></table><br>
<a name="2067468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> What the hell. This is the 3rd time I answer now.<br><br>Thanks! <br><br>Let's see if that disapears again, LOL. <br><br></td></tr></table><br>
<a name="2068416"></a>

<a name="2068417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for delay. I’ve just released an update. All issues should be fixed.<br><br>Changelog:<br><div class="quote"> <b>v1.35</b><br>* Added textured DrawPoly support<br>* Added support of async image loader<br>* Fixed value returned by getContext function for webgl and expreimental-webgl contexts<br>* Fixed issues with App.OnLoading event <br></div> <br><br></td></tr></table><br>
<a name="2068414"></a>

<a name="2068849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks man, just tried it and it works like a charm! <br><br></td></tr></table><br>
<a name="2068928"></a>

<a name="2068929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, thanks for the update, I just tried with the async image loader and it does not work? it stops the image from downloading, any ideas?<br>(Monkey v76a)<br><br><pre class=code>
Import mojo

Class MyApp Extends App Implements IOnLoadImageComplete

	Field image:Image

	Method OnCreate()
		LoadImageAsync( "http://www.monkeycoder.co.nz/img/logo/cute/monkey1.png",1,Image.MidHandle,Self )
		SetUpdateRate 60
	End
	
	Method OnUpdate()
		UpdateAsyncEvents
	End
	
	Method OnRender()
		Cls
		DrawText "Hello World!",0,0
		If image Then DrawImage image,DeviceWidth()/2,DeviceHeight()/2
	End
	
	Method OnLoadImageComplete:Void( image:Image,path:String,source:IAsyncEventSource )
		If image Then Print "OK!" Else Print "ERR"
		Self.image=image
	End

End

Function Main()
	New MyApp
End
</pre> <br><br></td></tr></table><br>
<a name="2068966"></a>

<a name="2068967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>@MikeHart</b> glad to hear it!<br><br><b>@CopperCircle</b> server with files must have special headers for allowing cross-domain image loading. More info: <a href="http://en.wikipedia.org/wiki/Cross-origin_resource_sharing" target="_blank">http://en.wikipedia.org/wiki/Cross-origin_resource_sharing</a> Your code will work in 2d context as well, but it won’t in webgl because it requires more rights for texture binding.<br><br>Also, script may work not properly with experimental Monkey versions, because I test code only with stable builds <br><br></td></tr></table><br>
<a name="2068991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the tip, didn't realise webgl needed more rights. <br><br></td></tr></table><br>
<a name="2073042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, can this be made to work with WebGL in IE11? <br><br></td></tr></table><br>
<a name="2073043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, WebGL support in IE is slightly incomplete, but this issue can be solved. I started to work on it, but currently it is not my priority task. Sorry. <br><br></td></tr></table><br>
<a name="2073046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info. <br><br></td></tr></table><br>
<a name="2074116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shockblast</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> I also noticed that this module does not work with IE11. I would also like it if IE is supported. In the mean time I use this to disable WebGL for IE11. It checks if the user agent does not have the word "trident" in it. "trident" is only used in the IE11 user agent string. So it is a temporary fix until IE11 is supported.<br><br><pre class=code>
	function init(id) {
		if (window.WebGLRenderingContext !== undefined) {
			if(navigator.userAgent.toLowerCase().indexOf('trident') === -1) {
				try {
					new WebGL2D(document.getElementById(id));
				} catch (e) { }
			}
		}
	}
</pre> <br><br></td></tr></table><br>
<a name="2086483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why doesn't Mark include this patch in all monkey releases again? <br><br></td></tr></table><br>
<a name="2088279"></a>

<a name="2088280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sphinx</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work!<br><br>@marksibly : Please have a look here! <br><br></td></tr></table><br>
<a name="2091178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>This patch is deprecated!</b> <br>There wonâ€™t be no updates, no bugfixes, no compatibility with new Monkey versions.<br><br><b>How to add WebGL support for mojo now?</b><br>I made new implementation of WebGL support for mojo in my Monkey fork - <a href="http://mungo.io/" target="_blank">mungo</a>. Itâ€™s a better implementation which gives ~10 time better performance than this patch and works in IE11. Here is a <a href="http://mungo.io/demo/webgl.html" target="_blank">small demo</a>.<br><br>Now you can use these two methods to enable WebGL acceleration for your mojo projects:<br><br><b>1. Download and install mungo</b><br>The fastest way to use new WebGL implementation for mojo is to <a href="http://mungo.io/" target="_blank">download</a> and install mungo.<br><br><b>2. Create custom HTML5 target</b><br>If you donâ€™t want to use mungo you can add WebGL support for mojo by following this short manual:<br><div class="quote"> 1. Create a new HTML5 target based on the standard HTML5 monkey target.<br>2. Rename directory of the new target. For example: html5_webgl<br>3. There, replace files in modules/native folder by <a href="http://source.mungo.io/targets/html5/tree/master/modules/native" target="_blank">files</a> from mungo<br>4. Rename new target in TARGET.MONKEY file. For example: #TARGET_NAME="Html5 WebGL Game"<br>5. Copy-paste code from <a href="http://source.mungo.io/modules/mojo/blob/master/native/mojo.html5.webgl.js" target="_blank">mojo.html5.webgl.js</a> file into template/main.js file after //${TRANSCODE_END} line<br>6. Add #HTML5_WEBGL_ENABLED=True in template/CONFIG.MONKEY file <br></div> <br><br></td></tr></table><br>
<a name="2091173"></a>

<a name="2091174"></a>

<a name="2091175"></a>

<a name="2091215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah excellent - I've been missing this target in newer versions as I always tested using it, and now I can again.<br><br>Thanks devolunter. <br><br></td></tr></table><br>
<a name="2092358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Whiteball</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Top stuff - Thanks. <br><br></td></tr></table><br>
<a name="2112269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Was there ever a way to implement this now in the current version of monkey-x? <br><br></td></tr></table><br>
<a name="2112274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Neuro: Not sure about this, since I think Develonter abandoned it for normal Monkey (Mungo target may still work). But, if you're interested in WebGL, <b><a href="https://github.com/Regal-Internet-Brothers/mojoinmojo2" target="_blank">this module</a></b> routes calls from Mojo 1 to Mojo 2. So, you'd get Mojo 2's OpenGL (WebGL on HTML5) code backing your game's graphics. And, you could use Mojo 2 features in your game.<br><br>It's not the most efficient, but it gets the job done. <br><br></td></tr></table><br>
<a name="2112275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Neuro: The last time I tried Mungo, I could copy its HTML target simply over to Monkey X and it worked. <br><br>Btw, I had initial success porting fE to mojo2 (aka fantomX) and the speed increase is awesome rendering wise. You will love it. At least I do! <br><br></td></tr></table><br>
<a name="2112290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> @immutable - thanks! Will have to check it out!<br><br>@mike - cool, is there a fork for it now that i try out?? <br><br></td></tr></table><br>
<a name="2112294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Neuro: Sorry, not at the moment. I still need to convert a few functionalities and all the examples. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
