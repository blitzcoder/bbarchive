<!DOCTYPE html><html lang="en" ><head ><title >Anet networking module for android</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Anet networking module for android</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >Anet networking module for android</a><br><br>
<a name="2059228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://code.google.com/p/anet-module/" target="_blank">http://code.google.com/p/anet-module/</a><br><br>Current Version: v1.40<br><br>EDIT:  Now also includes UDP!! (v1.10)<br>EDIT2: Added multithreading support for server receive methods (v1.20)<br>EDIT3: Added ReadLine and WriteLine methods (v1.30)<br>EDIT4: Fixed bugs in BindSocket, UDP server is now working! (v1.40)<br><br>Included is the following functions (a la blitzmax)<br><br>This will be familiar to some of you ;)<br><br>Network functions, also introducing WriteBytes and Readbytes<br><br><b>BindSocket:Bool(port:Int)<br>CloseSocket:Void()<br>ConnectSocket:Bool(remoteIP:String, remotePort:Int)<br>CreateTCPSocket:Bool()<br>CreateUDPSocket:Bool()<br>FlushStream:Void()<br>HostIp:String(hostname:String)<br>HostIps:String[](hostname:String)<br>HostName:String(hostIP:String)<br>SocketAccept:Bool(timeout:Int = 0)<br>SocketConnected:Bool()<br>SocketLocalIP:String()<br>SocketLocalPort:Int()<br>SocketReadAvail:Int()<br>SocketRemoteIP:String()<br>SocketRemotePort:Int()<br>ReceiveUDP:Bool()<br>ReadByte:Int()<br>ReadBytes:Int[](offset:Int, length:Int)<br>ReadInt:Int()<br>ReadLine:String()<br>ReadString:String(length:Int)<br>WriteByte:Int(outbyte:Int)<br>WriteBytes:Int(outbytes:Int[], offset:Int, length:Int)<br>WriteLine:Int(line:String)<br>WriteInt:Int(integer:Int)<br>WriteString:Int(text:String)<br>_data:Int[]<br>_offset:Int<br>_length:Int<br>_ip:String<br>_port:Int</b><br><br><br><br><b><u>Documentation:</u></b><br><br><b>BindSocket:Bool(port:Int)</b><br>  Returns true if socket binds to local port<br><br><b>Closesocket:Void()</b><br>  Close socket<br><br><b>ConnectSocket:Bool(remoteIP:String, remotePort:Int)</b><br>  Returns true if socket is connected successfully<br><br><b>CreateTCPSocket:Bool()</b><br>  Returns true if tcp socket is created successfully<br><br><b>Method FlushStream:Void()</b><br>  Writes remaining bytes (if any) from buffer to output stream<br><br><b>HostIp:String(hostname:String)</b><br>  Returns ip address as string<br><br><b>HostIps:String[](hostname:String)</b><br>  Returns ip addresses as string array<br><br><b>HostName:String(hostIP:String)</b><br>  Returns hostname as string<br><br><b>SocketAccept:Bool(timeout:Int = 0)</b><br>  Listens to socket, and returns true if a connection is accepted.<br><br><b>SocketConnected:Bool()</b><br>  Returns true if socket is connected<br><br><b>SocketLocalIP:String()</b><br>  Returns local ip address as string<br><br><b>SocketLocalPort:Int()</b><br>  Returns local port as int<br><br><b>SocketReadAvail:Int()</b><br>  Returns number of bytes which can be read from the stream without causing the socket to block, or 0 if none.<br><br><b>SocketRemoteIP:String()</b><br>  Returns remote ip address as string<br><br><b>SocketRemotePort:Int()</b><br>  Returns remote port as int<br><br><b>ReceiveUDP:Bool()</b><br>  Receive a UDP packet from the bound socket.<br>  The packet data is stored in the _data[] field<br>  The length of the data is stored in the _length field<br>  The ip address of the sender is stored in the _ip field<br>  The port of the sender is stored in the _port field<br><br><b>ReadByte:Int()</b><br>  Read a byte from stream<br><br><b>ReadBytes:Int[](offset:Int, length:Int)</b><br>  Read a byte array from stream<br>	<br><b>ReadInt:Int()</b><br>  Read a integer from stream<br><br><b>ReadLine:String()</b><br>  Read a line of text from stream<br><br><b>ReadString:String(length:Int)</b><br>  Read a string from stream<br><br><b>WriteByte:Int(outbyte:Int)</b><br>  Write a byte to stream<br><br><b>WriteBytes:Int(outbytes:Int[], offset:Int, length:Int)</b><br>  Write a byte array to stream<br><br><b>WriteInt:Int(integer:Int)</b><br>  Write a integer to stream<br><br><b>WriteLine:Int(line:String)</b><br>  Write a line of text to stream<br><br><b>WriteString:Int(text:String)</b><br>  Write a string to stream<br><br><br><i>All functions that return ints return -2 on error</i><br><br>All write methods are valid for UDP, for reading; use ReceiveUDP() instead.<br><br>All tested and working ok :) <br><br></td></tr></table><br>
<a name="2059227"></a>

<a name="2058424"></a>

<a name="2058421"></a>

<a name="2035373"></a>

<a name="2034876"></a>

<a name="2034766"></a>

<a name="2034714"></a>

<a name="2034712"></a>

<a name="2034276"></a>

<a name="2034274"></a>

<a name="2034273"></a>

<a name="2034278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, will have to try this at some point, thanks! <br><br></td></tr></table><br>
<a name="2034373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> no problem ;) <br><br></td></tr></table><br>
<a name="2034713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've added UDP support in the latest version <br><br></td></tr></table><br>
<a name="2035375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> nwe version again <br><br></td></tr></table><br>
<a name="2039545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this still being developped ? <br><br></td></tr></table><br>
<a name="2039901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not at the moment.<br><br>Do you see the need of any enhancements? <br><br></td></tr></table><br>
<a name="2039925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not at all but i was looking to see what have been done here :) from what it look what you did seem rather easy to work with. Cause i will have to look soon into networking and i dunno if i should head with pubnub or sockets.. <br><br></td></tr></table><br>
<a name="2039923"></a>

<a name="2040006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> For what's been done, check out the changelog at <a href="http://code.google.com/p/anet-module/wiki/ChangeLog" target="_blank">http://code.google.com/p/anet-module/wiki/ChangeLog</a> <br><br></td></tr></table><br>
<a name="2053172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Sub_Zero, have you ever gotten around to testing UDP servers in ANet?<br><br><div class="quote"> All tested except for server functions (My emulator wouldn't give me a local address), any feedback here is appreciated. ;) <br></div><br>I ran the UDP client example, and it works perfectly with my own socket library(For Windows). However as you said, ANet seems to have trouble getting the IP address of the tablet I'm using. The TCP examples work without an issue(Though I've only tested the TCP server with Monkey's TcpStream class), but the UDP server doesn't seem to be able to find an IP address.<br><br>So do you know what the problem is, and if so, can you fix it? If you're not sure, I may end up editing it myself, but I'd rather not mess with the 'official' version of the module. <br><br></td></tr></table><br>
<a name="2053177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can this be expanded for iOS, HTML5, and other monkey-compatible platforms? Or is similar functionality already available for those? If already available, can these mods all be combined so we have one API for all? <br><br></td></tr></table><br>
<a name="2053204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're referring to ANet, then not without rewriting it quite a bit(It's Java based). My library on the other hand is C++ based, so it could technically run on most of Monkey's platforms with the right libraries/versions of libraries, and a bit of work. However, if you want to throw a bunch of libraries/modules together, you could always implement separate modules for the different platforms, then make a few identical wrappers.<br><br>And though I haven't looked into it very much, I'm pretty sure the HTML5 target would be forced to use TCP sockets, and not be able to host servers. iOS seems more likely, but I'm not much of an Objective C guy, and I don't really have an 'i' device. I have no idea about Sub_Zero though.<br><br>So in conclusion, it is possible, but we'd need a good team for it, or someone who's really dedicated. But, if you want good enough functionality, and only TCP sockets, Ferdi ported "Push Button" to Monkey recently.<br><br>By the way, does Sub_Zero even come on these days? <br><br></td></tr></table><br>
<a name="2058412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey all<br><br>Thanks for the replies, I haven't been around here much lately, but now I'm finally here.<br><br>@Sonickidnextgen:<br>Thanks for testing. I will have a look at the ip stuff to see if i can get it sorted.<br><br>@c.k.:<br>Ofcourse it can be done on other platforms, unsure about html5 though.<br>As for iOS i have the same problem as Sonickidnextgen, i have no i-devices. <br><br></td></tr></table><br>
<a name="2058422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK....<br><br>Anet v1.40 is now up!<br><br>I've fixed the UDP server now.<br><br>The problem was that android breaks at getting the correct ip where regular java programs don't. I had to apply a fix for the problem :)<br><br>Happy coding folks :) <br><br></td></tr></table><br>
<a name="2058645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Sub_Zero, now I won't have to worry about editing it for my projects. <br><br>But after looking into it, when I use "SocketLocalIP()", it gives me the integer IP address converted into a string, but its byte order is reversed. Was this intentional, or is this a bug?<br><br>EDIT: I tested it a bit more, and it worked normally on an actual device, so I'm not sure if this is a bug or not. <br><br></td></tr></table><br>
<a name="2058558"></a>

<a name="2058559"></a>

<a name="2058561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Supertino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've no use for this yet, but good to know someone has done the hard work :) <br><br></td></tr></table><br>
<a name="2059102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Sonickidnextgen: Sounds like the emulator has a bug regarding SocketLocalIP() <br><br></td></tr></table><br>
<a name="2059245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I'm pretty sure that was the case. <br><br></td></tr></table><br>
<a name="2059202"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
