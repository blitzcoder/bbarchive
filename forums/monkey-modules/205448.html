<!DOCTYPE html><html lang="en" ><head ><title >Screen Resolution Changer Module (glfw)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Screen Resolution Changer Module (glfw)</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >Screen Resolution Changer Module (glfw)</a><br><br>
<a name="2060818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I eventually got around to revisiting my glfw code from this topic:<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=4418" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=4418</a><br><br>I have now created a module to handle screen resolution changing in glfw.<br><a href="https://github.com/skn3/screenres" target="_blank">https://github.com/skn3/screenres</a><br><br><b>Please read the installation instructions!</b><br><a href="https://github.com/skn3/screenres/wiki/Installation" target="_blank">https://github.com/skn3/screenres/wiki/Installation</a><br><br>Enjoy, for free :D<br><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&amp;business=jon%2epittock%40gmail%2ecom&amp;lc=US&amp;item_name=Skn3&amp;no_note=0&amp;currency_code=GBP&amp;bn=PP%2dDonationsBF%3abtn_donate_SM%2egif%3aNonHostedGuest" target="_blank"><img src="http://help.yahoo.com/l/us/yahoo/smallbusiness/webhosting/yss/paypal/media/images/paypal_donate_button.gif"></a><br><br><b>Please note that this module has not been extensively tested on different platforms!</b><br><br>So the module is really easy to use. You just call<br><pre class=code>ChangeScreenMode(300, 300, 32, False)</pre><br>This will change the screen resolution.<br><br>When you change screen resolution in OpenGL it will lose all images that you had previously loaded. To get around this please call<br><pre class=code>AddAutoLoadImage(image1)</pre><br>Call this for any image you want to be automatically reloaded when the resolution changes. Please remember that this will hold onto a pointer to the image. You have to remove the image when you are done with it in your game.<br><pre class=code>RemoveAutoLoadImage(image1)</pre>or<pre class=code>ClearAutoLoadImages()</pre><br>If you don't do this then the garbage collector will still see your image as alive.<br><br>When you change resolution the native code will transfer all autoload images from video memory into system memory. The glfw window is recreated and then all the texture data is transferred back to the video card. Monkey images have a separate surface object which stores the handle to the texture. This means we can simply update this surface and everything will work automatically without making changes. <br><br></td></tr></table><br>
<a name="2060816"></a>

<a name="2060809"></a>

<a name="2060808"></a>

<a name="2060807"></a>

<a name="2060805"></a>

<a name="2060806"></a>

<a name="2060804"></a>

<a name="2060802"></a>

<a name="2060803"></a>

<a name="2060813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Why0Why</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are the man!  Will be kicking something your way soon. <br><br></td></tr></table><br>
<a name="2060822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> :D<br><br>Small update<br><div class="quote"> ' - updated example<br>' - changed function name to ChangeScreenMode()<br>' - added GetAvailableScreenModes()<br>' - added ScreenModeExists() <br></div> <br><br></td></tr></table><br>
<a name="2060815"></a>

<a name="2060819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh wow, well done Skn, you're making GLFW seem like a proper desktop target now :D<br><br>With regards to AddAutoLoadImage(image1)<br><br>I have 2 main images,<br><br>GFX.spriteSheet:Image<br>GFX.worldSheet:Image<br><br>and from that I derive lots of sub images using for example<br><br>Local t:Image = GFX.spriteSheet.GrabImage(0,0,16,16,1,Image.MidHandle)<br><br>Do I have to AddAutoLoadImage for each "sub" image, or can I do it for just the upmost images?<br><br>Ta! :) <br><br></td></tr></table><br>
<a name="2060820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can do it just for the upmost images. If you look at <b>screenres.monkey</b> <i>ChangeScreenMode()</i> function, it compiles a list of unique image surfaces. So even if you did add the sub-images, the reload would only bother with the original image anyway. <br><br></td></tr></table><br>
<a name="2060821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome! I was expecting it to be each image reference, but wow :D Thanks. <br><br></td></tr></table><br>
<a name="2060856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> This looks pretty interesting, I didn't even realize you did this when I was rewriting it myself. If my code helps at all, <a href="http://monkeycoder.co.nz/Community/posts.php?topic=4418#60853" target="_blank">by all means, use it</a>. <br><br></td></tr></table><br>
<a name="2060863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jjsonick</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skn3, thanks for your work on this! Unfortunately, the resolution change isn't working on Mac for me (monkey 70g, OS 10.7.5):  Running the example, the screen and the smileys display, and in the console the available resolutions are displayed, as well as confirmation that 640x480 mode is available -- so that much is working, but when I hit space, the app disappears (crashes), and the console shows this error: 'glfwOpenWindow failed<br>TRANS FAILED: Error executing './MonkeyGame', return code=65280'.<br><br>Don't think it should be an ogl driver issue as they're built into OS X and I have other gl things that are working.  Tried altering the resolution switched to, didn't have any effect.<br><br>Here's the full monkey console from a run:<br><br><div class="quote"> Graphics Mode: 640 x 480 15bit<br>Graphics Mode: 720 x 480 15bit<br>Graphics Mode: 800 x 500 15bit<br>Graphics Mode: 800 x 600 15bit<br>Graphics Mode: 1024 x 640 15bit<br>Graphics Mode: 1024 x 768 15bit<br>Graphics Mode: 1152 x 720 15bit<br>Graphics Mode: 1280 x 800 15bit<br>Graphics Mode: 1344 x 840 15bit<br>Graphics Mode: 1440 x 900 15bit<br>Graphics Mode: 640 x 480 32bit<br>Graphics Mode: 720 x 480 32bit<br>Graphics Mode: 800 x 500 32bit<br>Graphics Mode: 800 x 600 32bit<br>Graphics Mode: 1024 x 640 32bit<br>Graphics Mode: 1024 x 768 32bit<br>Graphics Mode: 1152 x 720 32bit<br>Graphics Mode: 1280 x 800 32bit<br>Graphics Mode: 1344 x 840 32bit<br>Graphics Mode: 1440 x 900 32bit<br>SreenModeExists(640,480,32) = 1<br>glfwOpenWindow failed<br>TRANS FAILED: Error executing './MonkeyGame', return code=65280<br>Done. <br></div><br><br>Do I need to be using 71 to use the module? <br><br></td></tr></table><br>
<a name="2060875"></a>

<a name="2060876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks sonickidnextgen, glad to see you taking the initiative from your other thread :D<br><br>jjsonick, thanks I have fixed this now on mac. Check the repo.<br><br>Please update to version 71+ to be sure though. <br><br></td></tr></table><br>
<a name="2060890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jjsonick</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, it's working now!  Tested fullscreen too. <br><br>The only thing I notice now is that after doing a resolution change, the first pressing of space (to change again) is ignored - the first space key press is always ignored after a change, it always takes two (doesn't seem to be a matter of timing - happens even if I wait a while after a change).<br><br>Donated for your efforts. :) <br><br></td></tr></table><br>
<a name="2060895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Joshua,<br><br>Thanks for the donation :D<br><br>Cheers for reporting this. Check the repo it is fixed now. <br><br></td></tr></table><br>
<a name="2060896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rhodesy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're my hero :D <br><br></td></tr></table><br>
<a name="2060909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol thanks mofo :D <br><br></td></tr></table><br>
<a name="2060920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dopeyrulz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work Skn3! <br><br></td></tr></table><br>
<a name="2060998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work!<br><br>I'll have a go at making images automagically survive the mode change, and after that probably adding a 'glfw' module or something. <br><br></td></tr></table><br>
<a name="2060992"></a>

<a name="2060999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dopeyrulz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> What would be great would be the ability to set this ahla BlitzMax/Blitz3d as the way of initialising the system/screen (ie. Graphics 800,600,32).  <br><br>But I guess that would then change the standard startup functionality of Monkey. The reason I make this point is that the Monkey initialises the screen then you override it with this.  Having not (yet) played with this I'm assuming that's how it works looking at the example. <br><br></td></tr></table><br>
<a name="2061000"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; What would be great would be the ability to set this ahla BlitzMax/Blitz3d as the way of initialising the system/screen (ie. Graphics 800,600,32). <br><br>I think this should be possible - perhaps setting GLFW_WINDOW_WIDTH/HEIGHT to 0 in CONFIG.TXT could prevent creation of initial window? <br><br></td></tr></table><br>
<a name="2061053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Nice work!<br><br>I'll have a go at making images automagically survive the mode change, and after that probably adding a 'glfw' module or something. <br></div><br><br>Hurrah good to hear! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
