<!DOCTYPE html><html lang="en" ><head ><title >miniB3D: monkey 3d engine - part7</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >miniB3D: monkey 3d engine - part7</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >miniB3D: monkey 3d engine - part7</a><br><br>
<a name="2069756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://i295.photobucket.com/albums/mm144/adamredwoods/minib3d_logo.png"><br><b>minib3d+monkey</b><br>Latest update v0.41<br><br>Download:<br><a href="https://github.com/adamredwoods/minib3d-monkey" target="_blank">https://github.com/adamredwoods/minib3d-monkey</a><br><br>Win8 target:<br><a href="https://github.com/sascha-schmidt217/minib3d-monkey" target="_blank">https://github.com/sascha-schmidt217/minib3d-monkey</a><br><br>Thread continued from:<br><a href="http://monkeycoder.co.nz/Community/posts.php?topic=5016" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=5016</a><br><br><br><br><br>notes:<br>- current branch: v0.41 requires Monkey V70+<br>- tested on glfw, android, macos, ios, xna, webgl, flash<br><br>FEATURES:<br>- normals, textures, mipmaps, vertex buffers<br>- sprites and batch sprites<br>- context handling for mobile devices<br>- collisions and object/triangle picking<br>- animation, bone &amp; vertex<br>- binary load for b3d files (base64)<br>- Load B3D, OBJ, MDD, PC2<br>- animated textures<br>- XNA, Win8 target (courtesy of Rone), HTML5, Flash<br>- Shaders, extendable shaders<br>- normal mapping (opengl2.0)<br>- mojo 2D integration<br>- Ouya target<br><br>To Do:<br>- collada<br>- Flash shaders<br>- bones to quat/matrix internals<br>- vector class to use src,dst (minimize GC)<br>- fix win8<br>- glow shaders, shadows<br>- physics<br>- terrain<br>- octree scene manager<br>- mobile neon optimizations<br><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/P1040945b.jpg"><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/xna.jpg"><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/IMG_20130713_104908_zps93068e20.jpg"> <br><br></td></tr></table><br>
<a name="2066920"></a>

<a name="2066215"></a>

<a name="2066172"></a>

<a name="2064367"></a>

<a name="2064368"></a>

<a name="2064366"></a>

<a name="2064359"></a>

<a name="2064360"></a>

<a name="2064363"></a>

<a name="2064364"></a>

<a name="2064365"></a>

<a name="2064361"></a>

<a name="2064362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> nothing new yet (aside from bug fixes), the other thread was too long! <br><br></td></tr></table><br>
<a name="2064377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re: shaders<br><br><div class="quote"> .. so really a copy of your Fullshader.<br><br>I instantiate it with:<br>TShader.LoadDefaultShader( new LightShader )<br><br><br>But I just see nothing then. Using the same command with your FullShader and FastBrightShader works just fine. Do I miss something here? <br></div><br><br>So that FullShader is integrated into the render routine (it doesn't have to be and i should change that), so it does some shader matrix selecting based on what states are needed.<br><br>I suggest using the "FullBright" shader as a starting point, it shows how the shader system works. also note you can keep your shader external by loading it in the New() constructor.<br><br><pre class=code>
LoadShader( vp_filename, fp_filename )
</pre><br>it will link the shader for you, but you must request to link against the uniforms, if you want to use the built-in ones (which i suggest doing, otherwise you'd have to set it up yourself).<br><pre class=code>
LinkVariables()
</pre><br><br>if you plan to use framebuffers, you'd initialize it here, too<br><pre class=code>
'' fbo is a field to the shader
fbo = FrameBufferGL.CreateFBO(CreateTexture(256,256,3))
</pre><br><br>to render to the FBO, you first implement the IShaderProcess, which offer methods that are run before and after each camera:<br><pre class=code>
Class MyShader Extends TShaderGLSL Implements IShaderProcess
</pre><br>and then in the PreProcess Method:<br><pre class=code>
fbo.BeginFBO()
</pre><br>...and in the PostProcess Method:<br><pre class=code>
fbo.EndFBO()
'' and draw the quad if so desired:
SetShader( New FastBrightShader() ) ''we don't want to call NEW each frame, for example only
fbo.Draw(cam, 1.0) ''could even draw the quad using another shader
</pre><br><br>So you can see the flexibility here. Now, a deferred lighting shader would need to implement IShaderRender to interrupt the core TRender, set up each GBuffer and shader pass, and then call RenderCamera(cam) again. The texture would be quite large, depending on the resolution of the target (iPad3 retina = 2048x2048), unless you're ok with scaling.<br><br>also note, multiple render targets (MRTs) are not guaranteed for all devices. <br><br></td></tr></table><br>
<a name="2064375"></a>

<a name="2064374"></a>

<a name="2064373"></a>

<a name="2064372"></a>

<a name="2064370"></a>

<a name="2064371"></a>

<a name="2064376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah well, thanks for that! I'll check it out.<br><br>Is render to texture possible as well? <br><br></td></tr></table><br>
<a name="2064382"></a>

<a name="2064383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is render to texture possible as well?  <br></div><br><br>pretty much that is what the FBO is doing. since the shader is yours, you can add any extra methods you like:<br><pre class=code>
Method SetTexture(mytex:Texture)
  tex = mytex
  setflag = true
End

Method PreProcess:int(cam:TCamera)
  if (setflag) then fbo = FrameBufferGL.CreateFBO(tex); setflag = false
  fbo.BeginFBO()
End

''main init code:
myShaderInstance = New MyShader()
SetShader (myShaderInstance)
myShaderInstance.SetTexture( some_tex_i_created )
PaintEntity( cube, some_tex_i_created )

</pre><br><br>...but i think the above code is dangerous, since i'm writing to a texture being read at the same time (bad, bad, bad)! a second texture would be needed (called ping-ponging textures) <br><br></td></tr></table><br>
<a name="2064381"></a>

<a name="2064378"></a>

<a name="2064379"></a>

<a name="2064380"></a>

<a name="2064386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah well, thanks! Basically I just would like to render the entire camera to a texture to have something like a target cam. <br><br></td></tr></table><br>
<a name="2064416"></a>

<a name="2064417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> you could also create a second camera, parent it to something, and just set the viewport to a small square area. <br><br></td></tr></table><br>
<a name="2064466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah now that's a nice idea! :) <br><br></td></tr></table><br>
<a name="2064495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Adam, when I call "mesh.FreeEntity()" (after Copymesh) I get an error in the debug version in line 272 of list.monkey:<br><br><pre class=code>
If _succ._pred&lt;&gt;Self Error "Illegal operation on removed node"
</pre> <br><br></td></tr></table><br>
<a name="2064606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any news on the Linux front? :) <br><br></td></tr></table><br>
<a name="2064625"></a>

<a name="2064626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No chance dude, I've blocked him with my collision requests. ;)<br><br>Seriously, what's the point of using Linux? No kidding, I'm just curious as it's more niche than Windows Phone and that's already below everyone's radar and for desktop stuff it's still better to use BMax? ;) <br><br></td></tr></table><br>
<a name="2064629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reason for Linux is simply i can use it on me netbook which makes life easier when coding. <br><br></td></tr></table><br>
<a name="2064632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah right, got it! I used a netbook as well in the past (with an Atom CPU) and it was really a pain! <br><br></td></tr></table><br>
<a name="2064634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well its easier as i move around a lot so having a small netbook to code on makes it easier, it cant run windows 7 or 8 but runs linux perfectly. This is why i would like minib3d to work on linux so i can write android stuff on the move one thing max cant do :) <br><br></td></tr></table><br>
<a name="2064637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I know what you mean, I sold my Netbook two years ago and I'm now more than happy with a powerful MacBook Air (core i7) which is quite powerful. :) <br><br></td></tr></table><br>
<a name="2064746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah atm havent got the funds for such an item, so i use me linux netbook <br><br></td></tr></table><br>
<a name="2064860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> CameraViewPort does NOT work for Android (gles20). <br><br></td></tr></table><br>
<a name="2065237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was just wondering, has anyone used miniB3D in a commercial game yet? It looks pretty mature to me. <br><br></td></tr></table><br>
<a name="2065420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure if I am doing something wrong here. :P I would really appreciate it if somebody with miniB3D, could please confirm that the collision demo is working properly, esp. look out for the little test character sinking into the corners of the big cube?<br><br>I'm using the latest Monkey compiler.<br><br>Edit: Ignore this, it's a small buggete which Adam is working on to fix. <br><br></td></tr></table><br>
<a name="2065415"></a>

<a name="2065425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> yup, quick update, i'm working hard on fixing and improving collisions. i have multiple sphere collisions (customizable too) working now.<br><br>long term, i really need to port over a proper physics engine, but that's a year-long project. for now, i'll get these simple collisions updated soon. <br><br></td></tr></table><br>
<a name="2065435"></a>

<a name="2065439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam. Yeah a proper physics engine would be amazing long term. The miniB3D collisions library is still great though for small projects. <br><br></td></tr></table><br>
<a name="2065453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> @adam:any info on the Linux side of things I'm on Ubuntu 13.04 (32bit) with all the patches and updates :-) <br><br></td></tr></table><br>
<a name="2065474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick question,<pre class=code>Class MyGame Extends MiniB3DApp</pre><br>As I am new to miniB3D, what is the advantages to extending MiniB3DApp, as opposed to doing the slightly longer way via the usual extending of App? <br><br></td></tr></table><br>
<a name="2065476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> By extending MiniB3Dapp vs the standard App, it allows you to use the MiniB3DApp functions and access at them as if they were direct methods (because, in an OOP environment, when you extend a base class, you start off with the base class's methods, fields, etc) <br><br>Basically you are all set and ready to rock using the MiniB3DApp.<br><br>I'm by no means an expert on MiniB3D, but just explaining in an Object Oriented Programming language that this is how this works.<br><br>Hope this helps :) <br><br></td></tr></table><br>
<a name="2065477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks computercoder. One of the things I noticed with the extended demos is that they are fundamentally different in certain ways to the non-extended examples I have seen. For example, no direct calling of Init() or RenderWorld()? Also does Mojo emulation only work with the extended MiniB3DApp? <br><br></td></tr></table><br>
<a name="2065480"></a>

<a name="2065481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> what is the advantages to extending MiniB3DApp <br></div><br>extending MiniB3DApp will take care of init() and preloading properly (preload is need for html5 and flash). the problem is that i needed to remove the "On" part of "OnCreate" to get it to work (kindof a frustrating monkey thing).<br><br>use "Create" to do your preloading, and mesh loading.<br>use "Init" to create your cameras and meshes.<br>"Update" and "Render" are the same. <br><br></td></tr></table><br>
<a name="2065482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem Sammy :)<br><br>I've notice the same things as you, but I am too new to Monkey to be able to answer your question. I would think that it would not matter either way just as long as your app covers the bases of making Mojo emulation work. What that is, I don't know tho. At least not right now. <br><br></td></tr></table><br>
<a name="2065501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like to go down the recommended route if that's what the developer himself is following.<br><br>Overall though, it's a lot clearer now. :) <br><br></td></tr></table><br>
<a name="2065559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Worked fine(HTML5 can't find the GL context though?) in GLFW. I think it's now a lot cleaner looking for the end user Adam, much better IMHO, I like it. :) <br><br></td></tr></table><br>
<a name="2066029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> CameraViewPort does NOT work for Android (gles20).  <br></div><br>works on Nexus 4 here. Android 4.1.1<br>cam.CameraViewport (x,y,w,h). please send me a screenshot if it seems wrong.<br><br>also i noticed: Android OpenGL 20 seems VERY slow when the zombie example fills the screen (ie, zombies are big). I don't know why this is since it should be the opposite. I think there may be a formula in the shader that slows Android waaay down, but i need to get a PowerVR profiler running on it. that'll take some time. i COULD place an adreno work-around, but i don't know how i could set up a runtime check to enable texture int values. ugh. <br><br></td></tr></table><br>
<a name="2066061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's bad news, Android is quite an important platform for me, I hope you track it down soon.<br><br>BTW is there a problem with texture filters? They dont seem to have any affect of GLFW for me? <br><br></td></tr></table><br>
<a name="2066064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>That's bad news, Android is quite an important platform for me, I hope you track it down soon. <br></div><br>the issue is with Android+opengles20. Android+opengles11 is faster.<br><br>also note, if one sets the gles20 global shader to fastbright ( LoadDefaultShader(New FastBrightShader)) then performance should be fast, but no lighting equations will be used and limited to one texture.<br><br><div class="quote"> BTW is there a problem with texture filters? <br></div><br>Should work. I've only set it up to be used with LoadTexture() or LoadAnimTexture() ...so it won't work with Sprites or Mesh Models. This can be changed, if needed. <br><br></td></tr></table><br>
<a name="2066063"></a>

<a name="2066074"></a>

<a name="2066075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> My main problem seems to be mip-mapping(flag 8), things are getting real chunky as they go into the distance. It may be a Z buffer problem though as I am also getting flickering textures if two planes are close together too, which gets worse the further they retreat into distance. I'll take another look, I'm probably doing something wrong. <br><br></td></tr></table><br>
<a name="2066112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> My main problem seems to be mip-mapping(flag 8), things are getting real chunky as they go into the distance. <br></div><br>yes, i've noticed this but haven't spent time on it. it's a user decision how to handle. resize for mipmaps is already smoothing, i wonder if i should add a blur flag to REALLY blur those small mipmaps and remove some chunkiness.<br><br>also, each texture has a smooth command:<br>texture.Smooth()<br>this will turn on smoothing in hardware.<br><br><div class="quote"> getting flickering textures if two planes are close together too <br></div><br>may be a different problem. if the z is the same, then they will flicker. a slight offset of +0.0001 usually helps. <br><br></td></tr></table><br>
<a name="2066118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the tips Adam. <br><br>Something still not quite right though, for example, if I place two cubes directly beside each other and move a camera around them, moving in and out, every now an then a seem(small gap) appears between the cubes, even though they are perfectly aligned, I would say that this is slightly worse the further away the camera is from the cubes. I recheck my code, if I can't find it, I'll wip up an example. <br><br></td></tr></table><br>
<a name="2066122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> if I place two cubes directly beside each other and move a camera around them, moving in and out, every now an then a seem(small gap) appears between the cubes, even though they are perfectly aligned, <br></div><br>yes, this is all computer graphics that are not anti-aliased.<br><br>you either need AA or the two cubes need to be connected. sometimes, you can get the cubes to be aligned to perfection and it's not noticeable. <br><br></td></tr></table><br>
<a name="2066123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think one thing to consider is in some cases meshes at the same coordinated will get z fighting as the depth buffers cant always calculate which to draw first. As adam has suggested a small offset normally helps <br><br></td></tr></table><br>
<a name="2066131"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adding 0.0001 helps the flickering textures but the seams are still showing with the cubes. I don't really want to join the meshes as I want the ability to remove a cube when I need to. Is there possibly a way to increase the resolution of the Z buffer? <br><br></td></tr></table><br>
<a name="2066144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> They do say its to do with camera ranges, apparently if i got it right whole numbers are better than fractions door the near values of the camera <br><br></td></tr></table><br>
<a name="2066146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> cam.CameraRange(near,far) will increase depth buffer precision.<br><br><a href="http://stackoverflow.com/questions/7836208/how-to-correctly-render-coincident-polygons-in-opengl-es" target="_blank">http://stackoverflow.com/questions/7836208/how-to-correctly-render-coincident-polygons-in-opengl-es</a><br><a href="http://www.opengl.org/wiki/Depth_Buffer_Precision" target="_blank">http://www.opengl.org/wiki/Depth_Buffer_Precision</a><br><br>minib3d does not use polygon offset. <br><br></td></tr></table><br>
<a name="2066156"></a>

<a name="2066157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam: Interesting links there, thank you. It's a pity MiniB3D does not use glPolygonOffset, it looks quite handy for decals.<br><br>@ed: Changing the camera range does not seem to affect the Z buffer at all, only the clipping range, which is kinda weird TBH.<br><br>I may leave this for now and come back to it, the scene works, its a tiny bit glitchy but nothing that really too noticeable. <br><br></td></tr></table><br>
<a name="2066176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nah what i meant was near ranges less than 1 can cause glitches <br><br></td></tr></table><br>
<a name="2066161"></a>

<a name="2066170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re: z-depth buffer and camera range:<br><br>when you use CameraRange(near,far) it shortens the clipping range IN ORDER TO increase the precision of the z-depth buffer.<br><div class="quote"> 12.050 Why is my depth buffer precision so poor?<br><br>The depth buffer precision in eye coordinates is strongly affected by the ratio of zFar to zNear, the zFar clipping plane, and how far an object is from the zNear clipping plane. <br></div><br><a href="http://www.opengl.org/archives/resources/faq/technical/depthbuffer.htm" target="_blank">http://www.opengl.org/archives/resources/faq/technical/depthbuffer.htm</a> <br><br></td></tr></table><br>
<a name="2066284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> ********************<br>UPDATE V0.40<br>********************<br><br>Hi, update v0.40 for MiniB3D<br><br><br>- updated collisions: added Div Spheres for better collision shape and control<br>- collision bug fixes, accuracy<br>- collision debug tools: mesh.col_tree.DebugSphereTree(), mesh.col_tree.DebugNodeTree(node_level)<br>- added TrisRendered()<br>- Android vertex buffer optimizations for MojoEmulation<br>- some TEntity commands chainable<br><br><br><br>Basically, i've spent a lot of time perfecting collisions, although they still bounce, so I don't think they're perfect. i don't know if i can spend much more time on them, as i'd rather port a full physics engine over instead (CannonJS).<br><br>Anyhow, they seem to work except for a couple of bouncing situations.<br><br><br>*new* SphereTree (DivSpheres) usage (please ask and i'll explain more):<br><pre class=code>
ship.CreateSphereTree(5, 0.8) 
' ship.DebugSphereTree() ''optional, but important
</pre><br>what are these two line above?<br><br>1. CreateSphereTree( num of divSpheres, percentage difference from spheres)<br>this line is basically creating a Sphere field that covers every cubical area of the mesh, but using spheres. It will take the longest dimension and divide it by these number of spheres. the percentage number (1.0 being the norm) will increase or decrease the sizes of the spheres. a smaller sphere would be something like 0.7. larger would be 1.2. the nominal 1.0 is guaranteed to cover every part of the mesh.<br><br>2. DebugSphereTree( ent)<br>this will visually show the spheres created by CreateSphereTree() so we can see how the algorithm interpreted what we want.<br><br>3. SetDivSphere( sphere index number, radius, position )<br>will alter each sphere individually, rarely recommended, unless you have specific needs. <br><br></td></tr></table><br>
<a name="2066256"></a>

<a name="2066255"></a>

<a name="2066254"></a>

<a name="2066252"></a>

<a name="2066216"></a>

<a name="2066253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> ********************<br>UPDATE V0.40<br>********************<br><br>Update v0.40 for MiniB3D:<br><br>Android optimizations<br><br><br>...so i spent some time with DDMS profiling for miniB3D on android. turns out, TOO MUCH TIME was spent on DataBuffer.put(). yikes.<br><br>so i cached the MojoEmulation vertex operations and that seems to speed up rendering GUI and images considerably. <br><br></td></tr></table><br>
<a name="2066217"></a>

<a name="2066218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brilliant stuff, will look to coding on windows for now and Linux for 2d games until it gets working on nix <br><br></td></tr></table><br>
<a name="2066282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://i295.photobucket.com/albums/mm144/adamredwoods/sphere_trees_zps625bb039.jpg"><br><br>This is an example of a complex object using CreateSphereTree(). It is a careful balance of size and quantity for speed.<br><br>Why SphereTree?<br>Originally, miniB3D source objects for collisions were using only a large, single sphere. So if you object was long and thin, its collision radius would be a large sphere, resulting in poor collisions.<br>Using SphereTree, now the object's collision is more complex and tightly bound.<br><br>This isn't perfect. It is medium to VERY slow using POLYGON collisions, but faster using SPHERE or BOX. The ideal situation is a SphereTree to box collision.<br><br>-----<br><br>My other thought is to create a capsule shape for collisions, but I didn't think of this until i was almost done debugging this. so perhaps in the future (FAR future) I will make capsule collisions. there are other more important issues to handle first (collada, win8, shadows, bugs, etc) <br><br></td></tr></table><br>
<a name="2066280"></a>

<a name="2066281"></a>

<a name="2066283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank goodness you tracked down that Android problem.<br><br>There a lot of good stuff in this update, not least that you are considering a 3D physics port! :)<br><br>I'm not 100% on Div Spheres but I am sure I'll understand it better when I see the test code.<br><br>Many thanks!<br><br>Edit: the post above was just added... aaand now it sinks in! :D <br><br></td></tr></table><br>
<a name="2066285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW I just look up CannonJS, that's an amazing piece of code for Javascript! <br><br></td></tr></table><br>
<a name="2066287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://i295.photobucket.com/albums/mm144/adamredwoods/sphere_trees02_zps8448374e.jpg"><br><br>******<br>v0.40.1<br><br>I've just added a threshold value to CreateSphereTree(n,size,threshold).<br>The threshold is the minimum number of vertices it overlaps.<br><br>This seems to give much better results at higher n values. Compare this image with the same CreateSphereTree(8,1.0) from above. <br><br></td></tr></table><br>
<a name="2066301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> @adam: any success on the Linux front? <br><br></td></tr></table><br>
<a name="2066308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately the new update seems to have broken my app. The following lines create an invisible box. This box is the very base for the level props. <br><br><pre class=code>
	Local floorEnt:= CreatePivot()
	EntityBox(floorEnt, 0, -1, 0, ground.w, 1, ground.d)
	EntityType(floorEnt, scene_type)
</pre><br><br>The player camera now falls through this entity, since the new update was applied? <br><br></td></tr></table><br>
<a name="2066320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The following lines create an invisible box. <br></div><br>updated "tentity.monkey". it was pulling the initial test radius from a mesh cull_radius, which there was none. fixed, let me know if it worked. <br><br></td></tr></table><br>
<a name="2066324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @adam: any success on the Linux front?  <br></div><br>all i did was add "#define GL_GLEXT_PROTOTYPES" to this and it worked (ubuntu on vmplayer):<br><br><a href="http://www.monkeycoder.co.nz/Community/post.php?topic=5503&amp;post=61557" target="_blank">http://www.monkeycoder.co.nz/Community/post.php?topic=5503&amp;post=61557</a><br><br>don't forget, add it to your monkey/target/glfw/templates/main.h folder, then delete your old .build file and rebuild. <br><br></td></tr></table><br>
<a name="2066322"></a>

<a name="2066323"></a>

<a name="2066325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will try that weird i tried it before and it failed will have another look :) <br><br></td></tr></table><br>
<a name="2066329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ironstorm</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's the difference between FreeTexture() and FreeTexture_()?<br>I mean, of course I see the code. But for me it looks like FreeTexture() only set the flag to -255 and FreeTexture_() delete it completely. <br><br></td></tr></table><br>
<a name="2066332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strange, my character is not falling through the floor now but he cant move(or fall), it's as if he has his collision flag stuck on true. I removed the above entity but it had no affect, the character cant move now. I'll test it some more tonight and try and narrow it down a bit Adam. <br><br></td></tr></table><br>
<a name="2066338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> FreeTexture() and FreeTexture_() <br></div><br>FreeTexture() sets the flag, so that the platform-specific routine ctaches the flag and deletes the texture in hardware, then calls FreeTexture_().<br><br><div class="quote"> but he cant move(or fall) <br></div>hmmm, ok. if you can create a small example, it helps greatly. if found another collision bug, too, but seems unrelated. <br><br></td></tr></table><br>
<a name="2066339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, np, I'll have a go within the next 30 mins or so. <br><br></td></tr></table><br>
<a name="2066341"></a>

<a name="2066342"></a>

<a name="2066343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam: it compiles now but fails on 'opengles11.monkey' line 794 I dont know if its something to do with vbo's as this is a eeePC and the graphics are simple (Intel GMA900 IIRC).<br><br>Is there a define or variable I can set to true/false to disable VBO's completely? <br><br></td></tr></table><br>
<a name="2066345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some test code to show the problem that I described. I am intentionally not using the auto-scale to mesh bounds BTW, this is closer to my own code. The cube is only present to show the floor volume.<br><br>This works on the old miniB3d(0.37?) but does not work on the latest one.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Import minib3d.app
Import mojo

 
Function Main:Int()
	New MyGame()
    Return 0
End
 
Class MyGame Extends MiniB3DApp
	Field fpsRate:Int = 30
	Field mesh:TMesh
	Field cam:TCamera
	Field light:TLight
	Field playerEnt:TEntity
	
	Method Create:Int()
		SetUpdateRate(fpsRate)
		SetRender()
		Return 0
	End
	
	Method Init:Int()
		''must add this to use mojo fonts
		SetFont(LoadImage("mojo_font.png",96,Image.XPadding))
		cam = CreateCamera()
		cam.PositionEntity(5, 2, -20)
		light = CreateLight
		
		Local sphere:= CreateSphere()
	
		playerEnt = CreatePivot()
		mesh = CreateMiniB3DMonkey()
		mesh.EntityParent(playerEnt)
		TranslateEntity(playerEnt, 5, 10, -5)

		Local cube:= CreateCube()
		cube.TranslateEntity(5, -1, -5)
		cube.ScaleEntity(5, 1, 5)
		
		
		Local floorEnt:= CreatePivot()
		playerEnt.CollisionSetup(1, COLLISION_METHOD_BOX, 2)

		EntityBox(floorEnt, 0, -2, -10, 10, 2, 10)
'		floorEnt.CollisionSetup(2, COLLISION_METHOD_BOX, 0, -2, -10, 10, 2, 10)
		EntityType(floorEnt, 2)


		Collisions(1, 2, COLLISION_METHOD_BOX, COLLISION_RESPONSE_SLIDE)
			
	End
	
    
	Method Update:Int()
		
		If KeyHit(KEY_CLOSE) Or KeyHit(KEY_ESCAPE) Then Error""
		playerEnt.TranslateEntity(0, -0.1, 0)
		DebugLog "1)player XYZ = " + playerEnt.EntityX() + "," + playerEnt.EntityY() + "," + playerEnt.EntityZ()
		UpdateWorld()
		DebugLog "2)player XYZ = " + playerEnt.EntityX() + "," + playerEnt.EntityY() + "," + playerEnt.EntityZ()
		Return 0
	End

	Method Render:Int()
		SetMojoEmulation()
		FPSCounter.Update()
		FPSCounter.Draw(0,0)
		Return 0
	End
End

Class FPSCounter Abstract
	Global fpsCount:Int
	Global startTime:Int
	Global totalFPS:Int

	Function Update:Void()
		If Millisecs() - startTime &gt;= 1000
			totalFPS = fpsCount
			fpsCount = 0
			startTime = Millisecs()
		Else
			fpsCount+=1
		End
	End

	Function Draw:Void(x% = 0, y% = 0, ax# = 0, ay# = 0)
		DrawText("FPS: " + totalFPS, x, y, ax, ay)
	End
End
</textarea> <br><br></td></tr></table><br>
<a name="2066344"></a>

<a name="2066405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Some test code to show the problem that I described. <br></div><br>thanks for the example, updated github to fix that problem.<br><br><div class="quote">  I dont know if its something to do with vbo's as this is a eeePC and the graphics are simple (Intel GMA900 IIRC). <br></div><br>yup, i took out non-VBO for now. i guess i can try to put them back in. (EDIT: maybe, if i have time. how bad do you need it?) <br><br></td></tr></table><br>
<a name="2066403"></a>

<a name="2066408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well i use this laptop as my monkey platform, why take them out as its the only  way to get minib3d working on old cards or some of the current netbooks? <br><br></td></tr></table><br>
<a name="2066409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> thanks for the example, updated github to fix that problem. <br></div><br><br>Thank you for the fix Adam, I'll give it a go tonight when I get back home. :) <br><br></td></tr></table><br>
<a name="2066463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's some progress here, as I no longer fall though the floor but the collisions are all off now. The collision volumes dont seem to match their meshes. I'm only using COLLISION_METHOD_BOX and COLLISION_RESPONSE_SLIDE for all the collision on the test level but as I said, the meshes no longer match the their collision volumes? Strange thing is I tried the collisions demo that comes with minib3d and that works fine.<br><br>EDIT: From my app I narrowed it down to this line:<br><br><pre class=code>cube.CollisionSetup(scene_type, COLLISION_METHOD_BOX,10)</pre><br><br>Which works in 0.37.<br><br>But removing the "10" and allowing it to do a mesh bounds check, seems to get it working in 0.40. <br><br></td></tr></table><br>
<a name="2066452"></a>

<a name="2066467"></a>

<a name="2066468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> if using CollisionSetup(t,COLLISION_METHOD_BOX,10), then the collision box will be 10x10x10. a COLLISION_METHOD_SPHERE or POLYGON will be radius 10.<br><br>If EntityBox() or EntityRadius() are used without parameters, then the radius or dimensions is based off of the largest width/height/depth of the model. then the collision sphere/box is always centered to 0,0,0, so some models may be offset if 0,0,0 is not their center.<br><br>now, as soon as Collisions(source_type, dst_type, method) is set, then the collision volume may change. example:<br><pre class=code>
cone.CollisionSetup(2, COLLISION_METHOD_SPHERE,2 )
player.CollisionSetup(1, COLLISION_METHOD_POLYGON)
Collisions(1,2,COLLISION_METHOD_BOX,COLLISION_RESPONSE_SLIDEXZ)
</pre><br>the above code will define a sphere radius of 2 for the cone, and a player radius of mesh bounds-- but it will test for a *BOX* collision for player and cone. so the box is going to be 2x2x2. the source collision volume is ALWAYS a sphere. (this is why i created SphereTree() to allow multi-spheres in the source).<br><br>i did change some things in 0.40, but i feel this is how it *should* be for now. does that clarify or is there still a problem? <br><br></td></tr></table><br>
<a name="2066466"></a>

<a name="2066465"></a>

<a name="2066464"></a>

<a name="2066482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> I understand Adam. I did realise that the 10 was for 10x10x10 and I am only using the one collision method throughout("COLLISION_METHOD_BOX"). TBH I am unsure why the collision volume seems to be getting calculated differently in 0.40 as I am not using any bounding spheres or polygons and the old working code has not been changed in any way. <br><br>I'll re-check my code, maybe I can spot something. <br><br></td></tr></table><br>
<a name="2066480"></a>

<a name="2066481"></a>

<a name="2066497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does the collision system have rectangle as you don't always want to check for a perfect square or sphere. <br><br></td></tr></table><br>
<a name="2066508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, the single param is just an overload for a cube Ed. you can still use x,y,z,w,h,d instead of just 10 in my example(-5,-5,-5,10,10,10 I think). <br><br></td></tr></table><br>
<a name="2066509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah OK :)<br><br>Just need the non vbo version to work then its a go <br><br></td></tr></table><br>
<a name="2066716"></a>

<a name="2066717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> There seems to be a bug in AddTriangle(), probably in the creation of the VBO/Vertex Array.<br><br>To see the error, load up the animation_test.monkey file and add Wireframe(True) to the init. You will see the zombies have extra vertices connected. This is not a bug in the wireframe mode, the reason you don't see them is simply because they not make up a complete triangle.<br><br>I've seen this before while using C+OpenGL and I would hazard a rough guess that the first and last vertices in a triangle group are not being repeated for the VBO or Vertex Arrays. So there not marked(as degenerated vertices) as the end or beginning of a new triangle list when GL renders them. <br><br>This is the same if you create your own plane with only AddTriangle() too, so it's not unique to the model loader. <br><br></td></tr></table><br>
<a name="2066721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> This 'problem' was inherent to blitz3d and minib3d too iirc<br><br>if you run through the vertices and triangles of a mesh you will sometimes get some bloody weird results, like some connected to vertex 65535 when the mesh is only 100 vertices <br><br></td></tr></table><br>
<a name="2066723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm not so sure it's a bug.<br><br>"wireframe" in the version of miniB3D that i ported, is fake. it's actually lines drawn by GL_LINE_LOOP. i supply the vertex list and openGL draws them in order. since a line is two points and a triangle is three, there will be odd breaks that draw odd lines. <br><br></td></tr></table><br>
<a name="2066736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nah in not talking about odd lines in talking about how b3d files are handled, in my experience from milkshape they have irregular vertices when created. <br><br></td></tr></table><br>
<a name="2066739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm still pretty confident this may be a bug in the degenerate triangles of a mesh. You wont see this problem 99% of the time(maybe never with most meshes) but if the extra tri-line clashes(is parallel) with another tri-line the already exists on the mesh, it will cause zbuffer problems with that edge of the triangle, causing a very slight intermittent flicker of the edge(A problem I am having with my cubes). <br><br>Unfortunately without the use of glEnable(GL_LINES)(which treats degenerate triangles properly) it's pretty hard to prove. Hmmm, I'll have a think of a way to test it properly, if I prove myself wrong, all the better then there's no bug. :) <br><br></td></tr></table><br>
<a name="2066919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> minor update, but small details are important!<br><br>****************************************<br>minib3d v0.41<br><br>bug fixes:<br>- FreeEntity() now works<br>- proper ALPHA_TESTING for textures (kept retro blitz3d "masked textures" although teminology isn't correct)<br>- Flash target: alpha testing, better point and directional lights, texture bug fix (still lots to do, need better shader)<br>- XNA: multiple cameras fix <br><br></td></tr></table><br>
<a name="2066923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good stuff Adam, I've had a lot of fun with your lib over the last week, thank you! :D <br><br></td></tr></table><br>
<a name="2066924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeGit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam. Much appreciated. :) <br><br></td></tr></table><br>
<a name="2066925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good to see its being worked on :) <br><br></td></tr></table><br>
<a name="2067051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Small problem with the HTML5 target when using the "Extends MiniB3DApp" technique?<br><br><pre class=code>Monkey Runtime Error : ReferenceError: gl is not defined
C:/Coding Folder/Middleware/Monkey Pro/modules/minib3d/opengl/opengles20.monkey&lt;134&gt;
C:/Coding Folder/Middleware/Monkey Pro/modules/minib3d/opengl/opengles20.monkey&lt;916&gt;
C:/Coding Folder/Middleware/Monkey Pro/modules/minib3d/opengl/opengles20.monkey&lt;57&gt;
C:/Coding Folder/Middleware/Monkey Pro/modules/minib3d/app.monkey&lt;37&gt;
C:/Coding Folder/Middleware/Monkey Pro/modules/mojo/app.monkey&lt;49&gt;</pre><br><br>My fault? <br><br></td></tr></table><br>
<a name="2067207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, should I avoid the HTML5 for now? I don't really use it TBH, I'm using GLFW mainly for testing but it would still be nice to know if it's something I'm not doing properly at my end. <br><br></td></tr></table><br>
<a name="2067222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'll look at it, after i fix this other bug. <br><br></td></tr></table><br>
<a name="2067223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, thanks Adam. :) <br><br></td></tr></table><br>
<a name="2067225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> the first line in minib3d.app<br><pre class=code>
#OPENGL_GLES20_ENABLED=0</pre> is a pre Monkey v75 marker. it needs to be removed post v75. i'll make the change in the next update. <br><br></td></tr></table><br>
<a name="2067297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, many thanks for looking into that one for me Adam. I did try before-hand and fiddled with the GL Driver code but it kinda broke miniB3D, lol! :P Maybe I'll be more useful when I get more familiar with the code base. <br><br></td></tr></table><br>
<a name="2067369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have recently bought a Samsung Galaxy Tab 3 10.1 and when I try MiniB3D on it it fails to find my 3D .obj objects and the textures. <br><br>All I get is a white square in the middle of the screen.<br><br>The models are definitely present in the .data folder.<br><br>I'm using Monkey 75d and the latest MiniB3D. <br><br></td></tr></table><br>
<a name="2067372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> it fails to find my 3D .obj objects and the textures.  <br></div><br>happens to me often, but then i realize i need to do this at the top of my file:<br><pre class=code>
#BINARY_FILES="*.obj|*.b3d"
</pre><br>hope that fixes it. <br><br></td></tr></table><br>
<a name="2067522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sionco</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br>I think I've found a strange html5 problem (works in flash, GLFW)<br><br>The following code at the bottom of this post works.<br><br>But, if I comment out the following lines and don't texture the second entity, the game crashes in debug mode with the error codes shown below in the second code box, and in 'release' mode the first object doesn't appear at all, while the second object does:<br><br><br><pre class=code>
'if I comment this out, it produces the error
object2Tex = LoadTexture("btcc2.png")
object2.EntityTexture(object2Tex)
</pre><br><br>HTML5 debug mode error:<br><br><pre class=code>
*glerror: 1282
*glDrawElements
...(^^repeated about 50 times)
Monkey Runtime Error : Max 50 Opengl Errors
/home/sion/MonkeyPro74a/modules/minib3d/opengl/opengles20.monkey&lt;1009&gt;
/home/sion/MonkeyPro74a/modules/minib3d/opengl/opengles20.monkey&lt;882&gt;
/home/sion/MonkeyPro74a/modules/minib3d/trender.monkey&lt;424&gt;
/home/sion/MonkeyPro74a/modules/minib3d/trender.monkey&lt;264&gt;
/home/sion/MonkeyPro74a/modules/minib3d/functions.monkey&lt;1140&gt;
/media/sion/_Tron/Projects/monkey/test3d/test3d.monkey&lt;62&gt;
/home/sion/MonkeyPro74a/modules/mojo/app.monkey&lt;71&gt;


It doesn't seem to matter if
</pre><br><br><br>Full Code<br><pre class=code>
Strict
#BINARY_FILES="*.obj|*.b3d|*.mtl"
Import mojo
Import minib3d


Class Game Extends App
	
	Field Camera:TCamera
	Field Light:TLight
	Field Started:Bool
	Field object1Tex:TTexture
	Field object1:TEntity
	Field object2Tex:TTexture
	Field object2:TEntity
	Method OnCreate%()
		SetUpdateRate 30
		SetRender()		
		Return 0
	End


	Method OnUpdate%()
		If KeyHit(KEY_CLOSE) Or KeyHit(KEY_ESCAPE) Then Error ""
		If Not Started Then Return 0
		
		UpdateWorld()
		Return 0
	End

	
	Method Init:Void()		
		If Started Then Return
		If Not TPixmap.PreLoadPixmap(["silverstone2.png","btcc2.png"])
			Return
		End
		Started = True		
		Camera = CreateCamera()
		Camera.CameraClsColor(0,0,80)
		Camera.PositionEntity(0,5,-10)

		
		object1 = LoadMesh("silverstone2.b3d")
		object1Tex = LoadTexture("silverstone2.png")
		object1.EntityTexture(object1Tex)
	

		object2 = LoadMesh("btcc2.b3d")
		object2Tex = LoadTexture("btcc2.png")
		object2.EntityTexture(object2Tex)
		object2.PositionEntity 0,0,10

		Light=CreateLight(1)
		Light.MoveEntity -10,10,10
		Light.TurnEntity 35,-40,0
	End


	Method OnRender%()
		Init()
		If Not Started Then Return 0
		RenderWorld()
		Return 0
	End
End




Function Main%()
	New Game
	Return 0
End
</pre> <br><br></td></tr></table><br>
<a name="2067521"></a>

<a name="2067549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> interesting, you may need to send me some test files to awpiette at yahoo.<br>i'll if i can replicate this in the meantime. <br><br></td></tr></table><br>
<a name="2067565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sionco</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> it also happens if I just create an untextured cube instead of the first object, so I've sent an email with the second object I've been using.<br><br>Could it possibly be the moddeling software I use?<br><br>I use Wings3D &gt; Export to .3ds &gt; CharacterFX &gt; export to .b3d<br><br>thanks <br><br></td></tr></table><br>
<a name="2067668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rebelas</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a suggestion:<br>I would concentrate on shadows and physics and keep the rest as simple as possible. You spend lots of time on other things then when it comes to those two, you may shutdown the project. <br><br></td></tr></table><br>
<a name="2067679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had shadows working, but I'd rather get a collada importer working as that seems to be the biggest obstacle, getting assets into the engine. Collada static import does work, btw, but I also want animation and scenes for level creation. i imagine level creation using the blender. <br><br></td></tr></table><br>
<a name="2067706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I think I've found a strange html5 problem (works in flash, GLFW)<br> <br></div><br><br>@Sionco<br>I didn't find a problem, make sure to download the most recent version. I update things silently sometimes. <br><br></td></tr></table><br>
<a name="2067707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sionco</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> strange, never mind, thanks for looking into it.<br>I have the latest version of miniB3D and monkey installed. <br><br></td></tr></table><br>
<a name="2068211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've converted the Argyne Superemitter particle system, to miniB3D but it's still quite slow on Android. I started using sprites, then sprite batches but it's still killing the frame rate even with modest amount of particles. Has anyone got any tips on speeding particle systems up on miniB3D or batch rendering in general? <br><br></td></tr></table><br>
<a name="2068214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sammy:  Part of argyne's problem on Android has to do with objects instantiated en masse and then cleaned up by the GC thereafter.  You can see the resources being used with logcat and the profiler.  I believe that pooling the objects so that they're recycled more often and killed off less would improve performance -- I planned on doing this with the particle manager but never got around to it.  I also seem to remember something while I was last working on it that got me caught up and set the optimizations aside having to do with inheritance of interfaces in an array/stack/something.  I can't remember what it was, but it had some influence over Argyne's design that probably could've been done more optimally.<br><br>Anyway, brl.pool is probably the way to go in terms of optimizing Argyne's performance, although if I knew exactly how to go about using it to optimize the library, I would've probably started on it already.  Feel free to make a pull request if you manage to incorporate object pooling into the particle manager :) <br><br></td></tr></table><br>
<a name="2068215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the tip Nobuyuki, I'll look into brl.pool documentation. If I get it to work I'll get back to you. Not sure it would fit in with the current Argyne without getting a new branch though as its now been changed throughout, to cope with the 3rd dimension mainly. I'll be happy to send you the code if I get it working in its miniB3D form + pooling. <br><br>BTW I am pretty new to Monkey, what profiler are you using to examine the object code execution? <br><br></td></tr></table><br>
<a name="2068290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using ddms, which is depreciated, but Android Debug Monitor should be used for any new (within the last year or so) android device.  The Traceview tool can be used in combination with ddms's method profiling to produce graphs of which functions spend a lot of time executing.<br><br><a href="http://developer.android.com/tools/debugging/debugging-tracing.html" target="_blank">http://developer.android.com/tools/debugging/debugging-tracing.html</a><br><br>However... most likely the slowdown is due to the garbage collector, and can be confirmed using the Allocation Tracker tab in the main program.  Look for any names resembling Particle that are getting created and destroyed a lot.  Frequent GC runs means pooling will be a prime optimization path.<br><br>Anyway, feel free to post the 3d fork on Github, this is the first time I've known anyone to make a fork of my code, so it makes me happy to know someone got good use out of it. :) <br><br></td></tr></table><br>
<a name="2068291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Android can be slow. the biggest factor i've discovered is working with the FloatBuffer, but i've switched to a native android function that can deal with bulk sets. make sure you have the latest version.<br><br><div class="quote"> what profiler are you using to examine the object code execution <br></div><br>I use two:<br>1. HTML5, chrome and firefox have nice profilers. i use these to do very basic desktop profiling.<br>2. android "monitor" under the tools SDK. i use this only for android java. <br><br></td></tr></table><br>
<a name="2068298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, some nice tips there, thanks guys!<br><br>@Nobuyuki: No problem, I'll post it when I get it working. It's nice logical clean code BTW, which makes it much easier to hop into and modify, thank you for posting it. :) <br><br></td></tr></table><br>
<a name="2068494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam: using the latest build it compiles and runs so I can see the 3d view but in the console output I get:<br><pre class=code>
**OPENGL VERSION:1.3999999761581421
..max textures:71
..VBO Disabled
**TModelObj: Material obj file not found
**error: glCamera
</pre><br>and the **error: glCamera just keeps popping up every frame of the app, it does run though and looks brilliant the only thing is the glCamera line is slowing the app down. <br><br></td></tr></table><br>
<a name="2068504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>**TModelObj: Material obj file not found</pre><br><br>.MAT file missing or path not correct?<br><br>"glCamera" error is s little too non-specific, any ideas Adam? <br><br></td></tr></table><br>
<a name="2068508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah the material problem is mine the camera error is the one that floods the console over and over which in turn slows the app down. Once that is sorted i will look at doing star rogue using minib3d and monkey as it was intended in the first place :) <br><br></td></tr></table><br>
<a name="2068509"></a>

<a name="2068510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> @EdzUp:<br>Does the firepaint3d example work or do you still get the error? <br><br></td></tr></table><br>
<a name="2068749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> &lt;snip&gt;error dump removed <br><br></td></tr></table><br>
<a name="2068552"></a>

<a name="2068666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you get this error on your non-Intel GPUs Ed? <br><br></td></tr></table><br>
<a name="2068668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> ATM I only have Intel CPUs her two low grade laptops, ones Intel hd2000 graphics which I haven't had a chance of testing it on the other is my eeepc which is the one that errors. <br><br></td></tr></table><br>
<a name="2068748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> &lt;snip&gt; error dump removed <br><br></td></tr></table><br>
<a name="2068711"></a>

<a name="2068738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> GLError 1280 is an GL_INVALID_ENUM error. Which basically means that your GL driver does not support the enum that was passed to it. In other words  it looks like your intel drivers are  causing the problem Ed. <br><br></td></tr></table><br>
<a name="2068746"></a>

<a name="2068747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, i'd have to go through step by step and find the offender, but since i can't do this... instead we're going to absorb the error! opengl ignores 1280, so this is ok. <b>** Note for Others: This is ONLY in Linux Opengl1.3 (works great 1.5 and above)**</b><br><br>download opengles11.monkey and try again.<br>also, do me a favor and remove the two big error dumps above, that'll help people scroll through the thread. <br><br></td></tr></table><br>
<a name="2068751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> Done it :-) <br><br>Did they have OpenGL 1.5 I read somewhere they went to OpenGL 2 after that :)<br><br>Thanks for sorting the non vbo version though it has really done a lot for my coding with monkey and minib3d I should be able to make star rogue 3d now :) <br><br></td></tr></table><br>
<a name="2068750"></a>

<a name="2068756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, they did 1.5, it was the first of shader ARB coding, but was not widely supported. Older Macs, older intel (950) sometimes have software 1.5 support.<br><br>ok, good luck! <br><br></td></tr></table><br>
<a name="2068779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grant</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey guys :)<br><br>I have been messing around with minib3d and the examples run fine and dandy. After some more messing about i decided to 'try' and get a model from truespace into minib3d, this is where my nightmare began more than 48 hours ago, still no joy.<br><br>I'm literally pulling my hair out now, just about every combination of file format conversion has had some sort of problem with this file format for me. half the time I have a rogue triangle that's not present the original model. The rest of the time normals are flipped or the vertex colours are completley screwed up, or triangles are missing, depending on what the original format before conversion is, and what program does the actual conversion.<br><br>I have tried exporting from blender, DeleD and milkshape (.asc -&gt; .b3d works but can't do materials) I even tried a program written in BB3D to do the conversion, it produces the rogue triangle as well.<br><br>I am now at a complete loss as to how to get models from truespace into minib3d, any help or suggestions that don't have me learning another 3d app are welcome.<br><br>just about everything can save a .X file without problems, the .X files are fine in BB3D when output from truespace. I'd really like to see this file format included in minib3d, even if it's just for static meshes. PLEASE!<br><br>Because the conversion path is so bloody convoluted It's nigh on impossible to track down where the real problem is. I'm sure i'm not the only person having serious problems with this file format.<br><br>cheers, Grant. <br><br></td></tr></table><br>
<a name="2068786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm sure i'm not the only person having serious problems with this file format. <br></div><br>you're not.<br><br>if you have a problem with the model, you can always send the model to me (awpiette at yahoo), and i'll check it out.<br><br>also, i'm working on a collada importer. would that help you? i would be willing to do .x directx loader if that pleases other people as well, but would take a while. anyone else have thoughts?<br><br>Have you tried OBJ? <br><br></td></tr></table><br>
<a name="2068785"></a>

<a name="2068793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grant</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam,<br><br>Thanks for making me try .obj again ;)<br><br>I was getting messed up normals with .obj exported from truespace, so I thought bugger it, I'll save a .3ds object from truespace with vertex colouring and load that into blender, then save it as a .OBJ... IT BLOODY WORKED BUD! :) I could shake your hand off right now, but I won't because it might be detrimental to the awesome klickity-klack you put in on this stuff.<br><br>Cheers muchly :) now i can go ahead and actually make something with your awesomesauce module.<br><br><br>Incidently m8, what about the .mtl files? I noticed an error so added .mtl to the binary list and it was happy days. .mtl file was included in the build and the error dissapeared from Teds output thingy. <br><br></td></tr></table><br>
<a name="2068790"></a>

<a name="2068794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> glad it worked!<br>FYI-- if your normals are flipped, you have two options:<br><pre class=code>
mesh.FlipMesh() ''flips all your normals

...or...

mesh.UpdateNormals() ''re-calculates your normals
</pre> <br><br></td></tr></table><br>
<a name="2068799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've managed to convert my model into (Max to .X, then .X to B3D) B3D format and it works great but when I animate it using "baddie.Animate(1, dt.delta)" my FPS jump from 60 to 6 on my Android Tablet(Nexus 10). I would no say that it's overly complex either, approx 2.5k vertices.<br><br>I'm kinda stumped TBH.<br><br>EDIT:<br><br>Ignore that, I added...<br><br><pre class=code>
TAnimation.NormaliseWeights(baddie)
TAnimation.BoneToVertexAnim(baddie)
</pre><br><br>It's weird that sometimes just writing out the problem produces the answer?!?<br><br>And this solved the problem, doh! I assumed that it was only Base64.txt files that need this. BTW is there a way to cache the vertex animations back to disk, as for me it takes about 15 secs per boned animated model to calculate. I think it would be better if I saved this to disk and read it back in? <br><br></td></tr></table><br>
<a name="2068796"></a>

<a name="2068797"></a>

<a name="2068805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> is there a way to cache the vertex animations back to disk <br></div><br>not from miniB3D, but mb3d will load PC2 or MDD files, so you can convert your model to these forms from any animation program (blender). your rest pose should be frame 0.<br><br>yes, so bone animation is *slow*. how many baddies did you have? i think android can really have one or two boned animations. at some point i will convert bones to use quaternions. <br><br></td></tr></table><br>
<a name="2068831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> *Double Post* :( <br><br></td></tr></table><br>
<a name="2068832"></a>

<a name="2068833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hadn't heard of MDD or MD2(Edit: "PC2!", I got Quake on the brain! :P) format before Adam, I'll look into them. Thanks for the tip.<br><br><div class="quote"> how many baddies did you have? <br></div> Just the one unfortunately. Animation is becoming a real bugbear for me, if I use bones it's too slow, if I use vertex animation it's hogging a large amount if memory. <br><br></td></tr></table><br>
<a name="2068809"></a>

<a name="2068810"></a>

<a name="2068808"></a>

<a name="2068820"></a>

<a name="2068821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> if I use bones it's too slow <br></div><br>i've been thinking about writing a JNI for neon optimized bulk vertex transforms, maybe i need to look into that more.<br>the trick is to write it in c and let the compiler do the optimizing:<br><a href="http://stackoverflow.com/questions/12976539/how-can-i-optimize-a-looped-4d-matrix-vector-multiplication-with-arm-neon" target="_blank">http://stackoverflow.com/questions/12976539/how-can-i-optimize-a-looped-4d-matrix-vector-multiplication-with-arm-neon</a> <br><br></td></tr></table><br>
<a name="2068828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I agree, my small tinkering I've attempted with Neon assembly using the NDK proved to me that in this case, the compiler was far smarter at optimising C into Neon instruction than I ever could be using straight assembly! :P<br><br>If the NDK target is released for Android in general, then it would make messing about with compiler optimisation a lot more easier too IMHO.<br><br>BTW Adam, on the subject of your input format, I would take the 'easy' option and go with DirectX personally. Collada is great but it's massive scope is maybe OTT for MiniB3D in it's current state feature wise. That said, if your Collada work is further along then this point of view is mute of course. <br><br></td></tr></table><br>
<a name="2068827"></a>

<a name="2068841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> @adam: i still get a couple of the glError 1280 but after that it goes quiet and itw fine :) <br><br></td></tr></table><br>
<a name="2068873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> i still get a couple of the glError 1280 but after that it goes quiet and itw fine :)  <br></div><br>yes, i absorbed the error. 1280 won't really interfere. <br><br></td></tr></table><br>
<a name="2068877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah just wanted to point out that with the latest files ya still get a couple of the errors :) <br><br></td></tr></table><br>
<a name="2069143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a little experiment. I've added a command to MB3D, "DupeMesh:TMesh(ent:TMesh, parent:TEntity = Null)", this creates an instance of an animated mesh. <br><br>The current CopyEntity() already does this but this command creates a completely new entity, complete with it's own vertex data. Mine does not create it's own data, it reuses the source data whenever possible and drops some other data, bones for example(no need after BoneToVertexAnim() has done it's stuff).<br><br>What's the advantages? <br><br>Memory mainly, the demo here goes from 850meg to 150meg(Zoom out and up to get max zombies in frustum though), by changing CopyEntity() to DupeEntity() with 2000 animated zombies. This is VERY important for mobile platforms, mine crashes quickly when only using a few copied animated meshes currently. The more dupes you use the more the disparity(try 10000 See "ZAmount" :P).<br><br>Speed also seems to be better, I'm getting 50%-100% speed increase, which I assume is due to the GPU reusing the same vertex buffer.<br><br>This is more of a long winded example for a possible future optimisation by Adam though. If you wish to try it for yourself here are the files.<br><br>You can swap out the old CopyEntity() by removing the remark and remarking the DupeEntity() in the zombie demo.<br><br>Add this to... functions.monkey<br><br><pre class=code>Function DupeMesh:TMesh(ent:TMesh, parent:TEntity = Null)
	Return ent.DupeMesh(parent)
End</pre><br><br>Add this to... tsurface.monkey (within TSurface Class)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
						
	Method Dupe:TSurface()
	
		Local surf:TSurface=New TSurface
		
		surf.no_verts=no_verts
		surf.no_tris=no_tris
		
		surf.tris = tris
		surf.vert_data = vert_data
		
		If brush&lt;&gt;Null
			surf.brush=brush.Copy()
			brush = brush.Copy()
		Endif

		surf.vert_array_size=vert_array_size
		surf.tri_array_size=tri_array_size
		surf.vmin=vmin
		surf.vmax=vmax
		surf.surf_id = surf_id
		
		surf.reset_vbo=-1
		surf.vbo_dyn=vbo_dyn

		surf.alpha_enable=alpha_enable
		
		Return surf
	
	End </textarea><br><br>Add this to... tmesh.monkey (within TMesh Class)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Method DupeMesh:TMesh(parent_ent:TEntity = Null)

	Local mesh:TMesh = TMesh.CreateMesh(parent_ent)
	
	' add to collision entity list
	If collision.type &lt;&gt; 0 TCollisionPair.ent_lists[collision.type].AddLast(mesh)
	
	' add to pick entity list
	If pick_mode &lt;&gt; 0 mesh.pick_link = TPick.ent_list.AddLast(mesh)

	' update matrix
	If mesh.parent&lt;&gt;Null
		mesh.mat.Overwrite(mesh.parent.mat)
	Else
		mesh.mat.LoadIdentity()
	Endif
	
	' copy mesh info	
	mesh.mat.Multiply(mat)
	
	mesh.loc_mat = loc_mat
	
	mesh.px=px
	mesh.py=py
	mesh.pz=pz
	mesh.sx=sx
	mesh.sy=sy
	mesh.sz=sz
	mesh.rx=rx
	mesh.ry=ry
	mesh.rz=rz
	mesh.qw=qw
	mesh.qx=qx
	mesh.qy=qy
	mesh.qz=qz
	
	mesh.gsx = gsx
	mesh.gsy = gsy
	mesh.gsz = gsz
	
	mesh.name=name
	mesh.classname=classname
	mesh.order=order
	mesh.hide=False
	mesh.auto_fade=auto_fade
	mesh.fade_near=fade_near
	mesh.fade_far=fade_far
	
	mesh.brush=brush.Copy()
	
	mesh.anim=anim
	mesh.anim_render=anim_render
	mesh.anim_mode=anim_mode
	mesh.anim_time=anim_time
	mesh.anim_speed=anim_speed
	mesh.anim_seq=anim_seq
	mesh.anim_trans=anim_trans
	mesh.anim_dir=anim_dir
	mesh.anim_seqs_first = anim_seqs_first[ ..]
	mesh.anim_seqs_last = anim_seqs_last[ ..]
	mesh.no_seqs=no_seqs
	mesh.anim_update=anim_update

	mesh.cull_radius=cull_radius

	mesh.collision = collision.Copy()
	mesh.pick_mode = pick_mode
	mesh.obscurer=obscurer
	
	mesh.use_cam_layer = use_cam_layer
	mesh.cam_layer = cam_layer

	mesh.is_sprite = is_sprite
	mesh.wireframe = wireframe	
			
'	For Local surf:= EachIn Self.surf_list
'		mesh.surf_list.AddLast(surf)
'	Next
	mesh.surf_list = surf_list

	mesh.anim_surf = Self.DupeAnimSurfs()

	mesh.col_tree = col_tree

	mesh.reset_bounds = reset_bounds

	mesh.no_bones = 0
'	mesh.bones = bones
	
	Return mesh

End


	'' DupeAnimSurfs()
	'' -- full copy will keep new animation copies instead of pointer
	Method DupeAnimSurfs:TSurface[]( fullcopy:Int =0 ) 
	
		Local new_surf:TSurface[] = New TSurface[no_surfs] 'mesh.anim_surf[surf.surf_id]
		
		
		For Local surf:TSurface=Eachin surf_list
			
			Local id:Int = surf.surf_id
			Local anim_surf2:TSurface = anim_surf[surf.surf_id] ''original anim_surf shortcut
			If Not anim_surf2 Then Continue
			
					
			' copy vertex, full copy
			new_surf[id] = anim_surf2.Dupe()
			
			new_surf[id].no_verts=anim_surf2.no_verts
			
						
			new_surf[id].vert_array_size=anim_surf2.vert_array_size
			new_surf[id].tri_array_size=anim_surf2.tri_array_size
			new_surf[id].vmin=anim_surf2.vmin
			new_surf[id].vmax=anim_surf2.vmax
			
			new_surf[id].surf_id = anim_surf2.surf_id

			new_surf[id].vbo_dyn=anim_surf2.vbo_dyn
			new_surf[id].alpha_enable=anim_surf2.alpha_enable
			
			new_surf[id].reset_vbo=-1 ' (-1 = all)
			
			'' 1=bones, 2=vertanims
			If anim=1 And fullcopy=0
			
				'mesh.anim_surf = New TSurface[no_surfs]
				'Local new_surf:TSurface=New TSurface
				'Local new_surf:TSurface = mesh.anim_surf[surf.surf_id]
				

				'' dont need below, since Copy() method does this
				'new_surf.vert_coords = CopyFloatBuffer(anim_surf2.vert_coords, FloatBuffer.Create(anim_surf2.no_verts*3) )
	
				' pointers to arrays, don't need separate copies unles fullcopy=1
				new_surf[id].tris = anim_surf2.tris
				
				new_surf[id].vert_bone1_no=anim_surf2.vert_bone1_no
				new_surf[id].vert_bone2_no=anim_surf2.vert_bone2_no
				new_surf[id].vert_bone3_no=anim_surf2.vert_bone3_no
				new_surf[id].vert_bone4_no=anim_surf2.vert_bone4_no
				new_surf[id].vert_weight1=anim_surf2.vert_weight1
				new_surf[id].vert_weight2=anim_surf2.vert_weight2
				new_surf[id].vert_weight3=anim_surf2.vert_weight3
				new_surf[id].vert_weight4=anim_surf2.vert_weight4

			
			Elseif anim=2
				
				'mesh.anim_surf = New TSurface[no_surfs]
				'Local new_surf:TSurface=New TSurface
					
				'mesh.anim_surf[surf.surf_id] = anim_surf2.Copy()
				'Local new_surf:TSurface = mesh.anim_surf[surf.surf_id]
				
				new_surf[id].vert_anim = anim_surf2.vert_anim ''pointer to shared anim data
				
			Endif
		
		Next
		
		Return new_surf
		
	End</textarea><br><br>And finaly the modified animation_test2.monkey demo ( copy to same dir as animation_test.monkey)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Import minib3d

Const ZAmount:Int = 2000

''note: if your models look weird, config.h depth buffer bits=32
Function Main()
	New Game
End

Class Game Extends App
	
	Field cam:TCamera
	
	Field light:TLight
	Field cube:TMesh, ground:TMesh
	Field zombie:TMesh[ZAmount]
	Field txt:TText
	
	' used by fps code
	Field old_ms:Int
	Field renders:Int
	Field fps:Int
	
	Field a:Float=0, dir:Int=0, oldTouchX:Int, oldTouchY:Int, touchBegin:Int, lr#, ud#
	Field anim_time:Int
	
	Field redbrush:TBrush

	Field init_gl:Bool = False
	
	Field zombie_tex:TTexture
	
	Method OnCreate()
	
		SetRender()	
		SetUpdateRate 60
		
	End

	Method Init()
		
		If init_gl Then Return
		
		If Not TPixmap.PreLoadPixmap(["Zombie.jpg","mojo_font.png"])	
			Return
		Endif
		
		
		init_gl = True
	
		cam = CreateCamera()
		cam.CameraClsColor(0, 10, 80)
		cam.PositionEntity 0, 30, -10
			
		zombie[0] = LoadAnimMesh("zombie_b3d_base64.txt")
		TAnimation.NormaliseWeights(zombie[0])
		TAnimation.BoneToVertexAnim(zombie[0])

		Local speed:Float = 1.0
		Local m:Int = - ( (Sqrt(ZAmount) / 2) * 3), xx:Int = -50, zx:Int = m
		For Local zz:Int = 1 To ZAmount - 1

			zombie[zz] = zombie[0].DupeMesh()'Swap me with...
'			zombie[zz] = TMesh(zombie[0].CopyEntity())' ...me!

			zombie[zz].Animate(1, ( (xx - m) / 3) * 0.01)
			zombie[zz].EntityColor(Rnd(155) + 100, Rnd(155) + 100, Rnd(155) + 10)
			zombie[zz].TurnEntity(0, Rnd(360), 0)
			
			Local r:Float = Rnd(0.5); zombie[zz].ScaleEntity(0.75 + r, 0.75 + r, 0.75 + r)
			zombie[zz].PositionEntity(xx * 3, 0, zx * 3)
			xx = xx + 3; If xx &gt; 99 Then xx = m; zx += 3
		Next

		zombie[0].Animate(1, 1)
		ScaleEntity zombie[0], 2, 2, 2		
	
		anim_time = 0
			
		light = CreateLight(1)
		light.PositionEntity 0, 30, 300
		
		cube=CreateCube()
		cube.ScaleEntity(0.5,0.5,0.5)
		cube.name = "cube"
		PositionEntity cube, -2, 20, 2
				
		redbrush = New TBrush
		redbrush.BrushColor(200,20,20)	
		cube.PaintEntity( redbrush)
		
		txt = TText.CreateText2D()
		'txt.NoSmooth()
		
		ground = CreateGrid(10,10)
		ground.ScaleEntity(100, 1.0, 100)
		
		old_ms=Millisecs()
		
		'Wireframe(True)
		
		Print "main: init done"
	End
	
	Method OnUpdate()
	
		If KeyHit(KEY_CLOSE) Or KeyHit(KEY_ESCAPE) Then Error ""
		
		If Not init_gl Then Init(); Return
		
		' control camera
		Local cr:Float = KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT)
		Local cu:Float = KeyDown(KEY_DOWN)-KeyDown(KEY_UP)
		
		Local camin:Float = KeyDown(KEY_W)-KeyDown(KEY_S)
		Local camup:Float = KeyDown(KEY_D)-KeyDown(KEY_A)
		
		Local turnzx:Float = KeyDown(KEY_Z) - KeyDown(KEY_X)
		
		If KeyDown(KEY_0)
			SetAnimKey(zombie[1], 10)
			MoveEntity cube, (lr) * 0.2, 0.1, ud * 0.1
			zombie[Rnd(1000)].FreeEntity()
		EndIf
		
		If TouchDown(0) And Not TouchDown(1)
			If Not touchBegin
				oldTouchX = TouchX()
				oldTouchY = TouchY()
				touchBegin = 1
			Endif
			lr = (TouchX() - oldTouchX) * 0.5
			ud = (-TouchY() + oldTouchY) *0.5
			oldTouchX = TouchX()
			oldTouchY = TouchY()
		Elseif TouchDown(1)
			If Not touchBegin
				oldTouchX = TouchX()
				oldTouchY = TouchY()
				touchBegin = 1
			Endif
			camup = (-TouchX() + oldTouchX) * 0.1
			camin = (-TouchY() + oldTouchY) *0.1
			oldTouchX = TouchX()
			oldTouchY = TouchY()
		Else
			touchBegin = 0
		Endif
		
		TurnEntity cube,turnzx*2,0,0
		MoveEntity cube,(lr)*0.2,0,ud*0.1'camup,0,camin
		
		cam.MoveEntity camup,0,camin
		cam.TurnEntity cu,cr,0

'		For Local zz:Int = 1 To ZAmount - 1
'			zombie[zz].AlignToVector(cube.EntityX(1) - zombie[zz].EntityX(1), 0,cube.EntityZ(1) - zombie[zz].EntityZ(1), 3,0.10)
'		Next	
	
		
'		If Not zombie[0].Animating()
'			Local speed# = 1.0
'			For Local zz:Int = 0 To ZAmount - 1
'				zombie[zz].Animate(2, speed)
'				speed -= 0.0025
'			Next
'		Endif
		
		If KeyDown(187)
			anim_time += 1
		End
		If KeyDown(189)
			anim_time -= 1
		End


		txt.SetText(fps+" fps ~nhow are you")
		txt.HideEntity()
		txt.Draw(0,0)
		
		' calculate fps
		If Millisecs()-old_ms &gt;= 1000
			old_ms=Millisecs()
			fps=renders
			renders=0
		Endif
		
		UpdateWorld()
	End
	
	Method OnRender()

		RenderWorld()
		renders=renders+1
					
	End

End
</textarea> <br><br></td></tr></table><br>
<a name="2069142"></a>

<a name="2069141"></a>

<a name="2069140"></a>

<a name="2069148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The current CopyEntity() already does this but this command creates a completely new entity, complete with it's own vertex data. Mine does not create it's own data, it reuses the source data whenever possible and drops some other data, bones for example(no need after BoneToVertexAnim() has done it's stuff).<br> <br></div><br><br>Nice find!<br>Actually, CopyEntity() is *NOT* suppose to copy the mesh or vertex data. The only data it needs to duplicate is a vertex cache to hold animated data, since different meshes can be animated at different times, speeds, etc.<br><br>Cool, I'll look at this and see if CopyEntity() can incorporate this.<br><br>CopyMesh() is suppose to be the master copy-all. <br><br></td></tr></table><br>
<a name="2069151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam.<br><br>Actually, although this may be specific to my needs, I've kept the same vertex cache for all the newly duplicated entities and still been able to maintain different animation speeds etc. See, <br><pre class=code>surf.tris = tris
surf.vert_data = vert_data</pre><br>You will notice that the zombies are actually animating at different rates in this new demo.<br><br>Increasing and decreasing the animated frame is just a pointer to a specific place within the preanimated vertex animation cache of the original mesh. So all that needs to be copied is the vertex animation key frame pointer stuff.<br><br>Dumping the bone data during the duplication process also saves some memory too. <br><br></td></tr></table><br>
<a name="2069236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IceVAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam<br><br>On Android I get this error when the method onResume() is called<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
E/AndroidRuntime( 5140): FATAL EXCEPTION: main
E/AndroidRuntime( 5140): java.lang.NullPointerException
E/AndroidRuntime( 5140): 	at com.deliriumstudios.smarthphonedriver.c_TTexture.m_ReloadAllTextures(MonkeyGame.java:7250)
E/AndroidRuntime( 5140): 	at com.deliriumstudios.smarthphonedriver.bb_functions.g_ReloadAllTextures(MonkeyGame.java:16370)
E/AndroidRuntime( 5140): 	at com.deliriumstudios.smarthphonedriver.c_MiniB3DApp.p_OnUpdate(MonkeyGame.java:2962)
E/AndroidRuntime( 5140): 	at com.deliriumstudios.smarthphonedriver.c_GameDelegate.UpdateGame(MonkeyGame.java:3141)
E/AndroidRuntime( 5140): 	at com.deliriumstudios.smarthphonedriver.BBGame.UpdateGame(MonkeyGame.java:566)
E/AndroidRuntime( 5140): 	at com.deliriumstudios.smarthphonedriver.BBAndroidGame.UpdateGame(MonkeyGame.java:1268)
E/AndroidRuntime( 5140): 	at com.deliriumstudios.smarthphonedriver.BBAndroidGame$GameTimer.run(MonkeyGame.java:820)
E/AndroidRuntime( 5140): 	at android.os.Handler.handleCallback(Handler.java:730)
E/AndroidRuntime( 5140): 	at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 5140): 	at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 5140): 	at android.app.ActivityThread.main(ActivityThread.java:5103)
E/AndroidRuntime( 5140): 	at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 5140): 	at java.lang.reflect.Method.invoke(Method.java:525)
E/AndroidRuntime( 5140): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:737)
E/AndroidRuntime( 5140): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime( 5140): 	at dalvik.system.NativeStart.main(Native Method)
</textarea><br><br>in html5 working properly.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2069262"></a>

<a name="2069267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> On Android I get this error when the method onResume() is called <br></div><br>this error is tougher than i thought. may take some time to figure out as OnResume()+ReloadAllSurfaces is hard-crashing my phone. (dumps the shaders, too, in opengles20) <br><br></td></tr></table><br>
<a name="2069651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some preloader questions:<br><br>Could someone give me a quick run down of why we need to PreLoad textures, just to clarify? <br><br>Is it required for all targets?<br><br>Do I need to do this for all data files or just textures? <br><br>Also, if the textures are being preloaded then when I try to load them again(it feels like your loading them twice here :P) after the preloading are the preloaded cached textures used instead of the one on the storage device? <br><br>If I free a texture, does it affect the preloaded one? <br><br>If I decide at some point later down the game to load in a new texture, do I have to stick in an Until loop for a new preload for that texture? <br><br></td></tr></table><br>
<a name="2069650"></a>

<a name="2069667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is it required for all targets? <br></div><br>no, just html5 and flash.<br><br><div class="quote"> Do I need to do this for all data files or just textures?  <br></div><br>just textures, unless DataBuffer goes asynchronous. which could happen.<br><br><div class="quote"> the preloading are the preloaded cached textures used instead of the one on the storage device? <br></div><br>yes, it checks for the cached. it feels like it's loading twice because i wanted to keep the API simple and easily convert from the GLFW "load now/synchronously" style vs. the load asynchronously style.<br><br><div class="quote"> If I free a texture, does it affect the preloaded one?  <br></div><br>No, not yet, the next version i push will use a counter and release the pixmap when the texture is freed, if no other textures point to the pixmap.<br><br><div class="quote"> do I have to stick in an Until loop for a new preload for that texture?  <br></div><br>depends on your platform. if you are on html5, you can load asynchronously and you will need to check to see when the new set is loaded. use TPixmap.prelaoder.CheckAllLoaded() for each new PreLoad() that is used.<br>Now, for GLFW and other targets, I don't think they load asynchronously, so no Until loop is needed. this is a Monkey limitation. i had to write my own DataBuffer loader for HTML5 images, this is why. the Monkey implementation did not allow for me to resize images to power-of-two. <br><br></td></tr></table><br>
<a name="2069666"></a>

<a name="2069669"></a>

<a name="2069670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> For some reason I thought Android needed preloading too, doh! This is all handy info though.<br><br>Thanks for having the patience in answering my questions Adam. <br><br></td></tr></table><br>
<a name="2069682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any special time to use the creation commands, when using procedural generation to make star systems and calling CreateSphere I get nothing but LoadSprite works everywhere.<br><br>just wondering as I get the same result on all hardware I've tested on. <br><br></td></tr></table><br>
<a name="2069725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> I keep most of my mesh creating to within the Init() method once preloading is complete and its not caused any problems so far Ed? Could the texture be missing for the Sphere, maybe check the the TTexture is not Null once loaded? <br><br></td></tr></table><br>
<a name="2069726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will check that to see if its a problem but that would mean we can't have untextured meshes :/ <br><br></td></tr></table><br>
<a name="2069729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should be still able to have untextured meshes, just don't apply a texture to a mesh and it should still appear as blank white(IIRC) mesh by default. My own(.B3D) meshes vanish if I have an error with their texture path. This may be unrelated to your problem though.<br><br>If you have the time, maybe a small piece of code illustrating your problem? Or hang back for Adam to have his word? <br><br></td></tr></table><br>
<a name="2069741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> One more question Adam...<br><div class="quote"> no, just html5 and flash. <br></div><br>Why is it needed at all here, what prevents these targets from just loading in a texture normally? Is texture loading pushed onto another thread for example? <br><br></td></tr></table><br>
<a name="2069754"></a>

<a name="2069755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> calling CreateSphere I get nothing <br></div><br>Just make sure it's after SetRender().<br><br>this works for me in OnUpdate(). note that i'm even using a local variable, so it could be collected by the GC, but the master entity_list keeps the sphere in memory.<br><pre class=code>
If KeyHit(KEY_A)
	Local sp:=CreateSphere()
	sp.PositionEntity(Rnd(-3,3),Rnd(-3,3),Rnd(-3,3))
	sp.EntityColor(Rnd(0,255),Rnd(0,255),Rnd(0,255))
Endif
</pre><br><br><div class="quote"> Why is it needed at all here, what prevents these targets from just loading in a texture normally?  <br></div><br>HTML5 and flash will load all images asynchronously, even in Mojo. your browser controls it. while i could 'lock' the program while things load, this would make the end experience bad. in my opinion, ALL targets should load images and data asynchronously. should be default, but currently you would need to crate your own function by extending Thread. <br><br></td></tr></table><br>
<a name="2069794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#140">[#140]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah ok will give it a try was calling it in oncreate, unit and loads of other places but got nowhere. Once its working i will post a demo of it in operation once i clean it up some :) <br><br></td></tr></table><br>
<a name="2069821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#141">[#141]</a></td></tr></table></td></tr><tr ><td class="posttext"> Should work in OnCreate(), too. make sure your entity is not hidden. <br><br></td></tr></table><br>
<a name="2069828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#142">[#142]</a></td></tr></table></td></tr><tr ><td class="posttext"> all I'm calling is CreateSphere that's all no state changes etc <br><br></td></tr></table><br>
<a name="2069870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#143">[#143]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could be your intel chipset again Ed? Another option would be to use a tiny 1 pixel white texture then set the colour of the entity IF textured spheres are working? <br><br></td></tr></table><br>
<a name="2069871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#144">[#144]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe an option to instal Mes3D(http://www.mesa3d.org). This is an OpenGL driver that can go completely software driven, allowing you to test you graphics off of your graphics card hardware &amp; API for compatibility testing. So if it works in Mesa then it's your chipset. <br><br></td></tr></table><br>
<a name="2069873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#145">[#145]</a></td></tr></table></td></tr><tr ><td class="posttext"> normally I would agree but with one of me other games it works perfectly, this one calls createsphere in the oncreate method, in star rogue though I have a separate class with method that calls createsphere ( mainly for the generation system for the star systems). This is why I think its strange and why I wondered if there was something I'm doing wrong. <br><br></td></tr></table><br>
<a name="2069926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#146">[#146]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its sounds weird TBH Ed, maybe post some code as an example?<br><br>@Adam:<br><br>Getting quite a few heap errors errors with a mesh that has quite a lot of animations within it. The animations dont total a great amount(50 meg'ish after interpolated animation processing) but its too much for the puny Android heap. There is the largeheap manifest option but I am unsure if this is the best way to go? Memory problems have been my greatest bugbear with the Android target as of late.<br><br>Any suggestions on how to deal with this Adam? <br><br></td></tr></table><br>
<a name="2069930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#147">[#147]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> There is the largeheap manifest option but I am unsure if this is the best way to go? <br></div><br>use the android:largeHeap=true command for android 2.3+. i see no problem, since 3D apps take up quite a large amount of memory, and therefore should have memory priority over other apps.<br><br>another way would be to devise a fast compression/decompression algorithm for segments of the data.<br><br>is this after vertex animation conversion? i am thinking about adding optimized neon mults for bone skinning. will take time, though. <br><br></td></tr></table><br>
<a name="2069932"></a>

<a name="2069933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#148">[#148]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, vertex animation. Depending on the amount of frames I use, the following texture loading commands cause the OOM exception. I cut down the frames and resaved the model which cleared up the OOM errors. This was just to confirm where the problem lied though as I still need to get those animations back.<br><br>Thanks Adam. <br><br></td></tr></table><br>
<a name="2069935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#149">[#149]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh, textures? i was thinking about putting in rgb565 or even etc1 for android. that would help a lot if you don't mind quality loss.<br><br>let me know if you need that more, i can bump it up on the TODO. <br><br></td></tr></table><br>
<a name="2069959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#150">[#150]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that the main problem for me is the size if the data that is being produced by conversion from bone animation to vertex animation. Textures merely exasperate the problem. I've tried  without textures and still encountered problems. <br><br>That being said, smaller textures(or texture compression) would be a welcome feature. The only proviso would be if the actual format be selectable by the coder. So if the scene requires a super smooth  high colour textures you could load that image format. Or if it's not required then a lower colour res format. If it was a choice of one or the other, I'd pick the lower  colour  image formats. Also they would probably be more efficient, speed of rendering wise on the mobile platforms.<br><br>It's a pity we can't have a method to force the textures from the heap to graphics ram during the loading process. I don't know if the GL binding commands do this by default?<br><br>Btw, talking of textures, I think mipmaps are borked currently, enabling them only makes matters worse quality wise as far as I can tell. <br><br></td></tr></table><br>
<a name="2069972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#151">[#151]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah i found the problem with Star Rogue (it will require a rewrite of the system generator) it seems that porting it over from blitzmax to monkey isn't a good idea as the scales are all off. Max minib3d can handle camera ranges of 1, 70000 but monkey minib3d doesn't like it so i will have to reduce the scales and adjust everything to correct it.<br><br>this is why the spheres weren't being rendered it seems scaling was giving weird results. <br><br></td></tr></table><br>
<a name="2069988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#152">[#152]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> camera ranges of 1, 70000 but monkey minib3d doesn't like it <br></div><br>odd, should work unless the depth buffer precision is rejecting it. glfw = 32bit depth buffer, but sometimes older cards will give 16-bit instead.<br><br>i just tested this and it seemed to work at 70000, but i did get some interesting side effects and things close to 70000 would disappear occasionlly.<br><br><div class="quote"> It's a pity we can't have a method to force the textures from the heap to graphics ram during the loading process. <br></div><br>i've added pixmap.Free() to deal with this, but i'll need to place checks so it re-loads on a lost context, and to make sure it only dumps after a successful bind. i could also add a texture.FreeMemory() perhaps.<br><br><div class="quote"> I think mipmaps are borked currently, enabling them only makes matters worse quality wise as far as I can tell.  <br></div><br>it's an art. <br>you can try texture.ResizeSmooth() and texture.ResizeNoSmooth() before binding (do this right after creating or loading the texture).<br>also try texture.Smooth() and texture.NoSmooth() for different rendering approaches.<br><br>Rone pointed this out a while ago, and it may have something to do with the resizing algorithm. i almost think a soft blur would help for noisy mipmapped textures. <br><br></td></tr></table><br>
<a name="2070022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#153">[#153]</a></td></tr></table></td></tr><tr ><td class="posttext"> well I will recode the generator and sort it then I will release a new demo :) <br><br></td></tr></table><br>
<a name="2070047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#154">[#154]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I think mipmaps are borked currently, enabling them only makes matters worse quality wise as far as I can tell.  <br></div><br>whoops! turns out i wasn't turning the mipmaps ON! ugh. <br><br></td></tr></table><br>
<a name="2070157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#155">[#155]</a></td></tr></table></td></tr><tr ><td class="posttext"> LOL, NP Adam, I've had one of those days today too! ;) <br><br></td></tr></table><br>
<a name="2070082"></a>

<a name="2070077"></a>

<a name="2070192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#156">[#156]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some of my assets come with normal maps, what's the best way to get these to work with the current mesh system?<br><br>Edit: Rather than start another thread.<br><br>My GLFW &amp; Android 2D stuff were all looking a bit rough, fonts were distorted and my round buttons were a bit jaggy and distorted, it looked like bad scaling. I tracked the problem down to this line in "mojographics.monkey";-<br><br><pre class=code>	Method LoadTexture:Bool(path$, mesh:TMesh, device:MojoEmulationDevice)

		tex.ResizeNoSmooth
...</pre><br><br>which I changed to<br><pre class=code>		tex.ResizeSmooth</pre><br><br>This gave me much better 2D results. Fonts are now easier to read and my round buttons are back to being round and smooth. <br><br></td></tr></table><br>
<a name="2070191"></a>

<a name="2070155"></a>

<a name="2070196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#157">[#157]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Some of my assets come with normal maps, what's the best way to get these to work with the current mesh system?  <br></div><br>opengl2.0 targets allow normal maps in texture 0.<br>the tex flag TEXFLAG_NORMALMAP needs to be set for the texture.<br><br>i haven't tested this in a while, so not sure if it still works. if it's broken, let me know. <br><br></td></tr></table><br>
<a name="2070199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#158">[#158]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, thanks Adam, I'll have to try it tomorrow I'm afraid as I'm off to bed just now. BTW do certain targets default to OpenGLES 2.0 or do I have to specify it? <br><br></td></tr></table><br>
<a name="2070200"></a>

<a name="2070201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#159">[#159]</a></td></tr></table></td></tr><tr ><td class="posttext"> html5 defaults to opengl2.0. otherwise you must<br><pre class=code>
import minib3d.opengl.opengles20
</pre><br>for android, ios, glfw. <br><br></td></tr></table><br>
<a name="2070282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#160">[#160]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gave it a good go, I tried various textures + normal map formats but it's a no-go I am afraid. <br><br>This could very well be down to me though as its the first time I've used normal mapping in MB3D and I may be fumbling something. <br><br></td></tr></table><br>
<a name="2070281"></a>

<a name="2070379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#161">[#161]</a></td></tr></table></td></tr><tr ><td class="posttext"> First pic of star rogue over at <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=4030#70301" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=4030#70301</a> <br><br>Edit:forgot to mention its made using minib3d and its not a shameless plug to get me game noticed just a look what's possible sort of thing :) <br><br></td></tr></table><br>
<a name="2070302"></a>

<a name="2070377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#162">[#162]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bond, James Bond.<br><br>Shaders, extendable shaders. <br><br></td></tr></table><br>
<a name="2070387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#163">[#163]</a></td></tr></table></td></tr><tr ><td class="posttext"> A small edition to TBatchSprite to allow the reuse of existing textures.<textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">		Function LoadBatchTexture(tex:TTexture, id:Int = 0)

			If id &lt;= 0 Or id &gt; total_batch Then id = total_batch
			If id=0 Then id=1
			
			CreateBatchMesh(id)
	
			mainsprite[id].EntityTexture(tex)

			' additive blend if sprite doesn't have alpha or masking flags set
			If tex.flags &amp; 6 = 0
			
				mainsprite[id].EntityBlend 3
				
			Endif

		End</textarea><br><br>BTW Adam, did you manage to spot the normal map problem?<br><br>Also, is there any way to render to a texture? <br><br></td></tr></table><br>
<a name="2070393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#164">[#164]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool, i'll add it in.<br><br><div class="quote"> BTW Adam, did you manage to spot the normal map problem? <br></div><br>i did, SetRender(RENDERFLAG_PERPIXELLIGHTING) needs to be on.<br>(a side note i'll also add EntityFX FXFLAG_PERPIXEL_LIGHTING to enable in conjunction with other vertex lighting.)<br><br><div class="quote"> Also, is there any way to render to a texture?  <br></div><br>FBO's see post #5 above. opengles 20.<br>i could fix the BackBufferToTex for an alternate. not sure why i never fixed it.<br><br>on another note, i finally fixed the opengl20 context loss. now rebuilds shaders. one more bug to go and i'll push an update. <br><br></td></tr></table><br>
<a name="2070389"></a>

<a name="2070391"></a>

<a name="2070392"></a>

<a name="2070398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#165">[#165]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good stuff Adam, I'm looking forward to giving this all a go tonight! :)<br><br>Not tried the shaders as of yet. So does this mean shaders will be available for Gles 2.0?<br><br>I wanted to use the render to texture to try and fudge a simple single plane shadow for my scene(use a projected camera view rendered to texture then multitextured onto the ground plane). <br><br></td></tr></table><br>
<a name="2070485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#166">[#166]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still concentrating on normal mapping. I seem to have run into a problem. If I create a cube and load its defuse texture to layer 1, then load in the normal map texture to layer 0 of the cube(1024 flag too ;)), it works and looks great, very pleased with the effect. But if I try and follow the same procedure for an (vertex)animated (.B3D) mesh, I don't get the same results. The texture is there but there is something wrong with the normal map and it affect the lighting of the layer 1 texture, the mesh does not receive lights(only ambient light but this has no affect on the normal mapping any ways). <br><br>So the animated character is dull looking and not reacting to the directional lights or any normals information by the looks of it? <br><br></td></tr></table><br>
<a name="2070489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#167">[#167]</a></td></tr></table></td></tr><tr ><td class="posttext"> can you send a couple screenshots of the problem to awpiette at yahoo? <br><br></td></tr></table><br>
<a name="2070544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#168">[#168]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the offer of help Adam, I'll post them away just now. <br><br>Couple of minor niggles, they may or may not be related.<br><br>I would say that the lighting is a little duller in GLES 2.0 when compared to 1.1. That said, it definitely looks nicer with smoother tones I would say.<br><br>I'm getting this warning while using GLES 2.0 only.<br><br><pre class=code>Building...
g++   -I../glfw/include -I../glfw/lib -I../glfw/lib/win32 -I../openal/include -I../stb  -c -o ../main.o ../main.cpp
../main.cpp:4184:0: warning: "GL_CLAMP_TO_EDGE" redefined [enabled by default]
../main.cpp:2808:0: note: this is the location of the previous definition</pre><br><br>Not in the slightest causing me any problems though. <br><br></td></tr></table><br>
<a name="2070570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#169">[#169]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oops looks like someone is redefining a opengl define :) <br><br></td></tr></table><br>
<a name="2070629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#170">[#170]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could very well be right there Ed. I don't think its related to my normal map problems but I thought I'd mention it any ways. ;) <br><br></td></tr></table><br>
<a name="2070670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#171">[#171]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some more info on the normal mapping problem Adam.<br><br>HTML 5 works fine. The only other targets I've tried are Android and GLFW. Both display the animated mesh lighting problems.<br><br>This is the GLFW console compile output.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">miniB3D OpenglES20
Semanting...
Translating...
Building...
g++   -I../glfw/include -I../glfw/lib -I../glfw/lib/win32 -I../openal/include -I../stb  -c -o ../main.o ../main.cpp
../main.cpp:4184:0: warning: "GL_CLAMP_TO_EDGE" redefined [enabled by default]
../main.cpp:2808:0: note: this is the location of the previous definition
g++ -Wl,--subsystem,windows -L../openal/libs/Win32 -o Debug/MonkeyGame ../glfw/lib/enable.o ../glfw/lib/fullscreen.o ../glfw/lib/glext.o ../glfw/lib/image.o ../glfw/lib/init.o ../glfw/lib/input.o ../glfw/lib/joystick.o ../glfw/lib/stream.o ../glfw/lib/tga.o ../glfw/lib/thread.o ../glfw/lib/time.o ../glfw/lib/window.o ../glfw/lib/win32/win32_dllmain.o ../glfw/lib/win32/win32_enable.o ../glfw/lib/win32/win32_fullscreen.o ../glfw/lib/win32/win32_glext.o ../glfw/lib/win32/win32_init.o ../glfw/lib/win32/win32_joystick.o ../glfw/lib/win32/win32_thread.o ../glfw/lib/win32/win32_time.o ../glfw/lib/win32/win32_window.o ../stb/stb_image.o ../stb/stb_vorbis.o ../main.o -lopengl32 -lOpenAL32 -lws2_32
4.2.0
**OPENGL 4
Vertex info
-----------
0(5) : warning C7050: "nmLight" might be used before being initialized


Vertex info
-----------
0(5) : warning C7050: "nmLight" might be used before being initialized

Vertex info
-----------
0(5) : warning C7050: "nmLight" might be used before being initialized

Vertex info
-----------
0(5) : warning C7050: "nmLight" might be used before being initialized

Vertex info
-----------
0(5) : warning C7050: "nmLight" might be used before being initialized

Vertex info
-----------
0(5) : warning C7050: "nmLight" might be used before being initialized

Vertex info
-----------
0(5) : warning C7050: "nmLight" might be used before being initialized

Vertex info
-----------
0(5) : warning C7050: "nmLight" might be used before being initialized

Vertex info
-----------
0(5) : warning C7050: "nmLight" might be used before being initialized

..FullShader success     

..FastBrightShader success  </textarea> <br><br></td></tr></table><br>
<a name="2070672"></a>

<a name="2070673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#172">[#172]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> HTML 5 works fine. The only other targets I've tried are Android and GLFW. Both display the animated mesh lighting problems.<br> <br></div><br>"nmLight" is initialized, but nonetheless, i will give it a setting. you never know with these crazy shader compilers. <br><br></td></tr></table><br>
<a name="2070713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#173">[#173]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam. Do I download the latest .ZIP from the GitHub repo to try your changes?<br><br>Android has the same normal map rendering problems as GLFW but also it's pretty slow too, 60fps drops to 8fps when I add per pixel lighting. It's quite a fast tablet(a Nexus 10), so I was a little surprised that it had such an impact on the frame-rate TBH. <br><br></td></tr></table><br>
<a name="2071025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#174">[#174]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick question Adam. I have an idea for a simple LOD system. Basically, two pivots at the same position, one with some low geometry meshes the other with high geometry meshes associated with it. then simply hiding one pivot and revealing the other, depending on it's distance from the camera.<br><br>My question is this, do I need to worry about the hidden pivots with regards to any hidden child mesh(or collision zone) using up CPU time? Does the engine do anything with these extra entities that would impact on the speed of the non-hidden entities or are they completely ignored while hidden? <br><br></td></tr></table><br>
<a name="2071101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#175">[#175]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> do I need to worry about the hidden pivots with regards to any hidden child mesh(or collision zone) using up CPU time? <br></div><br>entity.HideEntity() will not send anything to the render queue, so no.<br><br>i have also been slowly thinking about a simple LOD solution, but your method would be just as acceptable. <br><br></td></tr></table><br>
<a name="2071104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#176">[#176]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK thanks Adam, that's a relief! :) <br><br></td></tr></table><br>
<a name="2071108"></a>

<a name="2071109"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#177">[#177]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Nobuyuki: Still hitting my head off of Argyne. I have given it a good couple of goes with pooling the particle system but I am not seeing any real gains(It's worse! :P). First time I've used brl.pool so it's maybe time I get to know the Android profiler to see where I am going wrong. I'll post the code when I can get some usable speed out of it. <br><br></td></tr></table><br>
<a name="2071216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#178">[#178]</a></td></tr></table></td></tr><tr ><td class="posttext"> ****<br>THREAD CONTINUED HERE:<br><a href="http://monkeycoder.co.nz/Community/posts.php?topic=6206" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=6206</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
