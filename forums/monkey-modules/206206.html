<!DOCTYPE html><html lang="en" ><head ><title >miniB3D: monkey 3D engine - part8</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >miniB3D: monkey 3D engine - part8</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >miniB3D: monkey 3D engine - part8</a><br><br>
<a name="2077259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://i295.photobucket.com/albums/mm144/adamredwoods/minib3d_logo.png"><br><br><b>minib3d+monkey</b><br>Latest update v0.42.3<br><br>Download:<br><a href="https://github.com/adamredwoods/minib3d-monkey" target="_blank">https://github.com/adamredwoods/minib3d-monkey</a><br>Wiki:<br><a href="https://github.com/adamredwoods/minib3d-monkey/wiki" target="_blank">https://github.com/adamredwoods/minib3d-monkey/wiki</a><br><br>Win8 target:<br><a href="https://github.com/sascha-schmidt217/minib3d-monkey" target="_blank">https://github.com/sascha-schmidt217/minib3d-monkey</a><br><br>Thread continued from:<br><a href="http://monkeycoder.co.nz/Community/posts.php?topic=5703" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=5703</a><br><br><br><br><br>notes:<br>- current branch: v0.42.3 requires Monkey V70+<br>- tested on glfw, android, macos, ios, xna, webgl, flash<br><br>FEATURES:<br>- normals, textures, mipmaps, vertex buffers<br>- sprites and batch sprites<br>- context handling for mobile devices<br>- collisions and object/triangle picking<br>- animation: bone &amp; vertex<br>- animated textures<br>- Load B3D (bin or base64), OBJ, MDD, PC2<br>- XNA, Win8, WinRT targets (courtesy of Rone)<br>- Shaders, extendable shaders<br>- normal mapping (opengl2.0)<br>- mojo 2D integration<br>- Ouya target compatibility<br><br>To Do:<br>- collada<br>- bones to quat/matrix internals<br>- vector class to use src,dst (minimize GC)<br>- fix win8<br>- glow shaders, shadows<br>- physics<br>- terrain<br>- octree scene manager<br>- mobile neon optimizations<br><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/P1040945b.jpg"><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/xna.jpg"><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/IMG_20130713_104908_zps93068e20.jpg"> <br><br></td></tr></table><br>
<a name="2077256"></a>

<a name="2077255"></a>

<a name="2076390"></a>

<a name="2076389"></a>

<a name="2076388"></a>

<a name="2071215"></a>

<a name="2071213"></a>

<a name="2077258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> ****************************************<br>minib3d v0.42<br><br>- context loss recovery for mobile: TShader.ResetShader(), TShader.FreeShader()<br>- bug fix with AlignToVector()<br>- TTexture.FreeTextureMemory() -- frees pixmap memory after binding<br>- TTexture pixmap reference counting for TTexture.FreeTexture()<br>- TPixmap.Free() -- mostly internal use<br>- Mipmapping on textures: now turned on (doh!)<br>- Added Sammy's TBatchSprite(texture,flags,batch_id) for existing textures<br>- EntityFX FXFLAG_PERPIXEL_LIGHTING. Only used in OpenGLES20 (so far). needed for Normal mapped textures.<br>- fixed a strange shader bug with Intel HD<br>- fixed sphere-sphere collision normal error<br>- vbo/shader last_state update errors<br>- Added Sammy's lightweight vertex animation handler. now consumes less memory. had to move anim_surf_frames to mesh instead of the anim_surface.<br>- collision setup defaults create tight EntityRadius sphere, based on mesh<br>- even more collision optimizations<br>- Added GetCulled:Bool() for testing if the mesh is seen by the camera (true).<br><br>v0.42.2 <br>- MoveEntity() and TranslateEntity() behavior changed, consistent to blitz3d<br><br>v0.42.3<br>- fixed B3D stray vertex on some loads<br><br>OTHER THOUGHTS:<br>collisions (&gt;200 entities) still seem quite slow on mobile, so i'll be looking into octree soon. that and i really want to get my collada importer done. <br><br></td></tr></table><br>
<a name="2077257"></a>

<a name="2071246"></a>

<a name="2071220"></a>

<a name="2071219"></a>

<a name="2071218"></a>

<a name="2071217"></a>

<a name="2071214"></a>

<a name="2071222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great stuff Adam! :D<br><br>There's a lot of optimisation and eye-candy added to this version, I really appreciate all the hard work you have put in on this release!<br><br>Many thanks, <br><br></td></tr></table><br>
<a name="2071221"></a>

<a name="2071282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work Adam! <br><br>Any way someone might be able to help\contribute? <br><br></td></tr></table><br>
<a name="2071295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Any way someone might be able to help\contribute?  <br></div><br>Lots of ways!<br>- The biggest way to help is to use it. Examples help finds bugs and bottlenecks. Games done in minib3d help promote it.<br>- documentation/tutorials. i'd like to get monkeydocs working with this and to get an automated program that creates it from the code. Midimaster stated some tutorials, and really helped me test out functionality.<br>- help port CannonJS. right now, i'm just figuring out what the different values are, since Javascript is not static typed, so type values are a darn mystery. once i get that done, i can use help to port code.<br>- test winrt and winphone8 on devices. i don't have these devices, so i can't test it. that said, i still need to update the win8 target with the current changes, so this is on hold for now.<br>- help write TTerrain function. i haven't touched this yet. may need a perlin noise texture gen to help test.<br><br>...and i'm open to ideas. <br><br></td></tr></table><br>
<a name="2071328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Finally managed to grab some time and start testing the new version.<br><br>I get this error on my compile console output:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">C:\Coding Folder\Middleware\Monkey Pro\bin\transcc_winnt.exe -run -config=debug -target=Html5_Game   "C:\Coding Folder\Projects\MONKEY\Dungeon\Dungeon.monkey"
TRANS monkey compiler V1.56
Parsing...
miniB3D OpenglES20
Semanting...
C:/Coding Folder/Middleware/Monkey Pro/modules/minib3d/tsprite.monkey&lt;511&gt; : Error : Overriding method does not match any overridden method.
Abnormal program termination. Exit code: -1
ATTENTION: Compilation error reported by Trans: Overriding method does not match any overridden method.
</textarea><br>Which points to this method:<br><pre class=code>		Method EntityFX(fx%)
			mainsprite[batch_id].EntityFX(fx)
		End</pre><br><br>Edit: <br><br>I got temporarily around this problem by changing "EntityFX(fx%)" to "EntityFX:TEntity(fx%)"<br><br>Also I'm loosing about 15% of my frame-rate by installing this update unfortunately, when compared to the previous update that is.  So something new may be hogging the resources a little? <br><br></td></tr></table><br>
<a name="2071320"></a>

<a name="2071319"></a>

<a name="2071330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>- help write TTerrain function. i haven't touched this yet. may need a perlin noise texture gen to help test.<br> <br></div><br><br>For perlin/heightmap generation, there's code in the archives someone could butcher:<br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1762#36624" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=1762#36624</a><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=873#7205" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=873#7205</a><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=5730#65131" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=5730#65131</a><br><br>I'm on a 64bit linux platform at the moment, so my Monkey coding is suspended due to various issues, otherwise I'd attempt a basic TTerrain class... <br><br></td></tr></table><br>
<a name="2071331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also Angros's own CPP conversion of iminiB3D is over here...<br><br><a href="http://sourceforge.net/projects/minib3d/files/" target="_blank">http://sourceforge.net/projects/minib3d/files/</a><br><br>This has a TTerrain class (and a few other nice features like DirectX import for example). <br><br></td></tr></table><br>
<a name="2071332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I got temporarily around this problem by changing "EntityFX(fx%)" to "EntityFX:TEntity(fx%)"<br> <br></div><br>thanks, fixed &amp; updated.<br><br><div class="quote"> Also I'm loosing about 15% of my frame-rate by installing this update unfortunately, when compared to the previous update that is. So something new may be hogging the resources a little? <br></div><br>if the normalmap is working, then it's the normalmap. but if everything is the same, then i'll have to profile, or wait until i get octrees in.<br><br><div class="quote"> For perlin/heightmap generation, there's code in the archives someone could butcher: <br></div><br>nice, i just may.<br><div class="quote"> This has a TTerrain class (and a few other nice features like DirectX import for example). <br> <br></div><br>yes, he's done some great work, i may have to look at it and ask permission. <br><br></td></tr></table><br>
<a name="2071334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I meant to mention Angros's terrain class also has a nice efficient ROAM feature too.<br><br><div class="quote"> if the normalmap is working, then it's the normalmap. but if everything is the same, then I'll have to profile, or wait until i get octrees in. <br></div><br><br>The normal mapping was already disabled because of the previous versions problems. Not sure how to help locate the bottleneck Adam, I do make extensive use of copyentity and copymesh. These commands are the basic building blocks of my level structure and I know you did some work on them. Can't be sure though if that's the problem though. <br><br></td></tr></table><br>
<a name="2071336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> the quick'n inaccurate way to profile code is to use html5 and use the browser's profiler. on chrome it's ctrl-shift-j, select profiles, click start. <br><br></td></tr></table><br>
<a name="2071357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the tip Adam, I'll try it tonight. <br><br></td></tr></table><br>
<a name="2071360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stuck my head in for a quick look at how things are going -- looks great! I don't think loading binary model files (woohoo!) was in the last time I gave it a pop but now it's there I have to hit you with a feature request: Any chance we can have a flag for flipping all the textures in a model? Maplet (yes Maplet, what?!) exports b3ds with all the textures upside down!<br><br>Great stuff, this -- makes me want to work on an idea I was throwing around a while back :D <br><br></td></tr></table><br>
<a name="2071365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I spent some time with the Chrome profiler and came up with these comparison tables. I hope this helps.<br><br>BTW, I can send you the full CPU profiles if needed too Adam.<br><br><pre class=code>MiniB3D 0.41

Self    Total   Source                  Function
----------------------------------------------------------------------
74.97%  74.97%                          (idle)  
5.32%   15.12%  main.js:3564            c_OpenglES20.p_Render   
1.76%   1.76%   main.js:13668           c_TCamera.p_EntityInFrustum     
1.50%   1.50%                           drawElements    
1.46%   1.46%                           (program)       
1.34%   17.81%  main.js:3315            c_TRender.p_RenderCamera        
1.10%   1.10%                           bindBuffer      
0.98%   1.68%   main.js:4435            c_MojoEmulationDevice.p_AddQuad 
0.89%   0.89%                           uniformMatrix4fv        
0.85%   0.85%                           (garbage collector)     
0.84%   0.84%                           uniform1f       
0.83%   0.83%                           uniform4fv      
0.79%   1.68%   main.js:2186            _glUniformMatrix4fv     
0.65%   0.65%   main.js:10819           c_VertexDataBuffer.p_PokeFloatArray     
0.63%   0.63%                           vertexAttribPointer     
0.54%   0.54%                           texParameteri   
0.51%   0.51%                           uniform2f       
0.36%   0.36%                           enableVertexAttribArray 
0.35%   0.69%   main.js:3197            c_TRender.m_UpdateWorld 
0.33%   1.16%   main.js:2150            _glUniform4fv   
0.23%   0.23%   main.js:5425            c_TEntity.p_Hidden      
0.22%   0.22%                           uniform2fv      
0.21%   0.21%                           bufferData      
0.20%   0.20%   main.js:19142           c_EffectState.p_Overwrite4      
0.18%   1.74%   main.js:18702           bb_graphics_DrawRect    


MiniB3D 0.42

Self    Total   Source                  Function
----------------------------------------------------------------------
63.60%  63.60%                          (idle)  
5.99%   24.99%  :52309/main.js:3328     c_TRender.p_RenderCamera        
5.26%   15.27%  :52309/main.js:3581     c_OpenglES20.p_Render   
3.20%   4.22%   :52309/main.js:13777    c_TCamera.p_EntityInFrustum     
2.22%   2.30%   :52309/main.js:4624     c_QuadCache.p_AddCache  
1.70%   1.70%                           drawElements    
1.60%   3.89%   :52309/main.js:4452     c_MojoEmulationDevice.p_AddQuad 
1.46%   1.46%                           (program)       
1.42%   1.42%                           bindBuffer      
1.20%   1.20%                           (garbage collector)     
0.89%   0.89%                           uniformMatrix4fv        
0.82%   0.82%                           uniform1f       
0.81%   0.81%                           uniform4fv      
0.65%   0.65%   :52309/main.js:6478     c_Matrix.p_TransformPoint       
0.61%   0.61%                           vertexAttribPointer     
0.61%   0.61%   :52309/main.js:12644    c_Enumerator5.p_HasNext 
0.52%   1.40%   :52309/main.js:2186     _glUniformMatrix4fv     
0.46%   0.46%                           uniform2f       
0.45%   0.45%                           enableVertexAttribArray 
0.41%   1.52%   :52309/main.js:18804    bb_functions_UpdateWorld        
0.30%   1.11%   :52309/main.js:2150     _glUniform4fv   
0.28%   27.36%  :52309/main.js:3432     c_TRender.m_RenderWorld 
0.28%   0.28%   :52309/main.js:19334    c_EffectState.p_Overwrite4      
0.26%   0.26%                           bufferData      
0.23%   1.99%   :52309/main.js:3392     c_TRender.m_RenderDrawList
</pre> <br><br></td></tr></table><br>
<a name="2071366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Any chance we can have a flag for flipping all the textures in a model? <br></div><br>texture.ScaleTexture(1.0,-1.0)<br>or<br>sprite.ScaleSprite(1.0,-1.0)<br>should do it, although i must admit i never tried it.<br><br><div class="quote"> I spent some time with the Chrome profiler and came up with these comparison tables. I hope this helps. <br></div><br>looks like my QuadCache for MojoEmulation is acting up, but nothing really changed in the code. hmmm. try a third run and see if that still pops up. you can email me profile data if you want. <br><br></td></tr></table><br>
<a name="2071367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> EntityInFrustum seems to have jumped too, maybe this could explain why the Render functions have increased?<br><br>I'll post you the profiles just now Adam. <br><br></td></tr></table><br>
<a name="2071368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> EntityInFrustum seems to have jumped too, maybe this could explain why the Render functions have increased? <br></div><br>the percentage could go up because it is slower compared to everything else, so you'd have to look at number of execution times and time per execution. <br><br></td></tr></table><br>
<a name="2072699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> It was only a whimsical request, Maplet's output being somewhat canonical and texture orientation requiring engine-level management (you'd want textures automagically flipped but not flipped back should they be shared by, say, two .b3ds). Batch-flipping them as part of the art process works fine :D <br><br></td></tr></table><br>
<a name="2072713"></a>

<a name="2072714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mip-mapping seems to be working but I'm not having any joy with normal maps(still dark with no normal mapping) on animated meshes on Windows and Android I am afraid. HTML5 works wonderfully though with no issues and looks great. <br><br></td></tr></table><br>
<a name="2072723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to stop sprites etc from not being rendered when they o off the side of the screen?<br><br>ATM my suns vanish when they go off the sides which don't happen in max's minib3d, anyone have any ideas. <br><br></td></tr></table><br>
<a name="2072725"></a>

<a name="2072726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe MeshCullBox if it has been implemented? Can't check ATM. <br><br></td></tr></table><br>
<a name="2072740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there a way to stop sprites etc from not being rendered when they o off the side of the screen? <br></div><br>sledge's answer.<br>is it turning off before the frustum edge? <br><br></td></tr></table><br>
<a name="2072755"></a>

<a name="2072756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've added a little optimisation to TCamera that ads a pre-check for a bounding box camera range to bounding box entity into EntityInFrustum(). It seemed that I was loosing a lot of CPU time doing full frustum testing for entities that were no where near the frustum, esp. if it was a mesh which added further matrix mults to an already mult heavy plane frustum checking calculation(Downcasting Entity to TMesh is slow on HTML5 too). So I added this little sub as a helper. It works best in big environments with lots(I have over 400 in mine) entities spread across it. My camera range cover 5% at most at any one time, which I think is pretty typical. Now only a few addition and subs decides whether a full frustum check is needed for most of the off camera range entities.<br><br>Change this line...<br><br>Local mRadius:Float = Abs(ent.cull_radius)<br>to<br>Local mRadius:Float = Abs(ent.cull_radius)-20<br><br>To see it do clipping just within your camera range.<br><br>The code changes...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">	'Summary: Frustum cull pre-check using bounded box entity and a bounded box 360 degree camera range 
	Method InCamBB:Bool(ent:TEntity)
		Local mRadius:Float = Abs(ent.cull_radius)
'		If ent.classname = "Mesh" Then mRadius = Abs(mRadius * Max(Max(ent.gsx, ent.gsy), ent.gsz))
		mRadius += Self.range_far
		If Self.X &gt; ent.X + mRadius or Self.X &lt; ent.X - mRadius Then Return False
		If Self.Y &gt; ent.Y + mRadius or Self.Y &lt; ent.Y - mRadius Then Return False
		If Self.Z &gt; ent.Z + mRadius or Self.Z &lt; ent.Z - mRadius Then Return False
		Return True
	End
	
	Method EntityInFrustum:Float(ent:TEntity)
	
		If Not (InCamBB(ent)) Return 0
	
		Local x#=ent.EntityX(True)
		Local y#=ent.EntityY(True)
		Local z#=ent.EntityZ(True)

		Local radius#=Abs(ent.cull_radius) ' use absolute value as cull_radius will be negative value if set by MeshCullRadius (manual cull)

		' if entity is mesh, we need to use mesh centre for culling which may be different from entity position
		Local mesh:TMesh = TMesh(ent)
		If mesh
			
			'' transform mesh centre into world space
			Local r:Float[] = ent.mat.TransformPoint(mesh.center_x,mesh.center_y,mesh.center_z)
			x=r[0]; y=r[1]; z=r[2]
			
			'' radius - apply entity scale
			
			Local gs:Float = Max(Max(ent.gsx,ent.gsy),ent.gsz)
			radius = radius*gs
			If radius&lt;0.0 Then radius=-radius
			
		Endif
	
		' is sphere in frustum

		Local d#
	
		
		d = frustum[0][0] * x + frustum[0][1] * y + frustum[0][2] * z + frustum[0][3]  ''-z opengl
		If d &lt;= -radius Then Return 0	
		d = frustum[1][0] * x + frustum[1][1] * y + frustum[1][2] * z + frustum[1][3]
		If d &lt;= -radius Then Return 0
		d = frustum[2][0] * x + frustum[2][1] * y + frustum[2][2] * z + frustum[2][3]
		If d &lt;= -radius Then Return 0
		d = frustum[3][0] * x + frustum[3][1] * y + frustum[3][2] * z + frustum[3][3]
		If d &lt;= -radius Then Return 0
		d = frustum[4][0] * x + frustum[4][1] * y + frustum[4][2] * z + frustum[4][3]
		If d &lt;= -radius Then Return 0
		d = frustum[5][0] * x + frustum[5][1] * y + frustum[5][2] * z + frustum[5][3]
		If d &lt;= -radius Then Return 0

		
		Return d + radius
	
	End
</textarea><br><br>Only lightly tested(I get 5-10% extra speed back BTW), so buyer beware! ;) <br><br></td></tr></table><br>
<a name="2072751"></a>

<a name="2072752"></a>

<a name="2072753"></a>

<a name="2072759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm not having any joy with normal maps(still dark with no normal mapping)  <br></div><br>ok i'll look into it.<br><br><div class="quote"> I've added a little optimisation to TCamera that ads a pre-check for a bounding box camera range to bounding box entity into EntityInFrustum(). <br></div><br>nice! i've been putting off on that optimization for an octree implementation. <br><br></td></tr></table><br>
<a name="2072773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam.<br><br>A couple of extra notes/question.<br><br>There is no check to see if the Entity is hidden here, I don't see the need to frustum check for entities that are not going to be rendered, would adding one mess anything up?<br><br>The frustum check uses local mesh.center_x transformed to world coordinates. I've just stuck with the meshes global world coordinate field. Do you see this as a problem? It seems to work fine in the small tests I have done so far.<br><br>The remarked line is needed for scaled meshes but I was trying to avoid using down casting every entity to a TMesh, so I just tested the .classname for "Mesh". I was kind of surprised that there was not a better way to do this. I would have assumed that entities would have a "classtype:Int" for quick class separation. Maybe something add to TEntity in the future to avoid string comparisons/downcasting altogether? <br><br></td></tr></table><br>
<a name="2072781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> There is no check to see if the Entity is hidden here, I don't see the need to frustum check for entities that are not going to be rendered <br></div><br>TRender.RenderCamera() is the main render loop which includes Hidden() check.<br><br><div class="quote">  I've just stuck with the meshes global world coordinate field. Do you see this as a problem? <br></div><br>should be fine. frustum uses world coords for the check. <br><br><div class="quote"> Maybe something add to TEntity in the future to avoid string comparisons/downcasting altogether? <br></div><br>I did start to do this for TSprite a while back (TMesh.isSprite:bool) but for most platforms it made little difference. It's a programming style that I waiver between, but (for clarity sake and to rely on the compiler) I avoid those types of micro-optimizations for now. The exception, I do try to cache the downcast if I use it at least twice. So in that routine, mesh=TMesh(ent) you can move up the downcast to save some cycles perhaps.<br><br>When i get around to octree, it will cull out most objects with very little overhead.<br><br>Also keep in mind that HTML5 is VERY slow in debug mode because of glerror() checks (if you are testing HTML5). <br><br></td></tr></table><br>
<a name="2072782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, thanks again Adam, that cleared up quite a few niggles I had. :)<br><br>Adding an octree should be great BTW, as it will exclude entities en-mass per node, a feature that should allow MB3D to use extremely large levels of entities! <br><br></td></tr></table><br>
<a name="2072791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well at the moment the sprites that go one pixel off either edge of the screen vanish, I will play with MeshCullBox and see what happens :) <br><br></td></tr></table><br>
<a name="2072813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> All I get is 'identifier "MeshCullBox" not found" so im guessing its not in there yet, on BlitzMax minib3d the sprites can go off the side and look perfect all I wanted is the same performance from monkey minib3d :) <br><br></td></tr></table><br>
<a name="2072873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well at the moment the sprites that go one pixel off either edge of the screen vanish <br></div><br>bug confirmed and fixed, thank for finding that! v0.42.1<br><br>TSprite.ScaleSprite() was not updating cull sphere. <br><br></td></tr></table><br>
<a name="2072877"></a>

<a name="2072883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah brilliant glad to help :)<br><br>Edit: is there a total cross platform way to edit textures yet all i want to do is grab a 256x256 section of the screen and use it in game? <br><br></td></tr></table><br>
<a name="2072967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Trying to pick-up shaders, so many things to learn! :P Adam, if you have some spare time, would it be possible to provide a quick and dirty, "hello world" demo for using shaders in MB3D?<br><br>Many thanks, <br><br></td></tr></table><br>
<a name="2073239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Righty when creating my Star Rogue game I was having major problems with MoveEntity, firstly when moving sprites they move perfectly but meshes moved WAAAY more than they should. As an example I move my planets between 650.0 to 12000.0 BUT the system moved them over 70000.0 which is wrong considering that the ranges were set.<br><br>To fix this on the planet system I created PlaceItem that just places ALL planets on the game with a simple Sin/Cos routine and now they are placed perfectly.<br><br>What I wanted to know is has anyone else had this problem with minib3d, all I do is simply position the entity at 0,0,0 and then move it to a range. Doing this yields different results for sprites and entities which is strange. <br><br></td></tr></table><br>
<a name="2073240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> are you scaling anything?<br>scaling an entity changes the distances it moves too<br>(in the original Blitz3D) <br><br></td></tr></table><br>
<a name="2073248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah in scaling it but surely moving something 50.0 forwards should not be effected by its scale. Otherwise something like an asteroid field with different sized asteroids couldn't be done in minib3d.<br><br>blitzmax minib3d don't have this problem nor did blitz3d, even unity doesn't either. <br><br></td></tr></table><br>
<a name="2073271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried removing the scaling commands temporarily to see if the problem persists? <br><br></td></tr></table><br>
<a name="2073272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will do some tests as to be honest scaling shouldn't affect movement after all no matter what scale something is 50.0 is 50.0 when ya want to move it 50 it should move just that. <br><br></td></tr></table><br>
<a name="2073277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree Ed.  TBH I have not come across the problem that you have but I mainly use PositionEntity and TranslateEntity for asset positioning, although I've used MoveEntity, without problems too I think. <br><br></td></tr></table><br>
<a name="2073276"></a>

<a name="2073332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> re:MoveEntity<br><br>it's a fair point.<br><br>original blitz3d docs says:<br><a href="http://www.blitzmax.com/b3ddocs/command.php?name=MoveEntity&amp;ref=3d_cat" target="_blank">http://www.blitzmax.com/b3ddocs/command.php?name=MoveEntity&amp;ref=3d_cat</a><br><div class="quote"> Moves an entity relative to its current position and orientation.<br><br>What this means is that an entity will move in whatever direction it is facing. So for example if you have an game character is upright when first loaded into Blitz3D and it remains upright (i.e. turns left or right only), then moving it by a z amount will always see it move forward or backward, moving it by a y amount will always see it move up or down, and moving it by an x amount will always see it strafe.<br> <br></div><br><br>ok, so MoveEntity would be this<br><pre class=code>
	**see github
</pre><br><br><b>Question: is MoveEntity scaled if it's parent is scaled?</b><br>i thought about this, and perhaps i'd need a "global flag" in the method parameters to remove the parent scaling. the other option is to always make this global. <br><br></td></tr></table><br>
<a name="2073300"></a>

<a name="2073294"></a>

<a name="2073292"></a>

<a name="2073293"></a>

<a name="2073304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah as long as moving it forwards x amount isn't affected by scaling at all as no scaling should be used in the calculation, if we wanted scaling we can add it in. <br><br></td></tr></table><br>
<a name="2073333"></a>

<a name="2073334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> v0.42.2 updated<br>also found a TranslateEntity() problem with parenting. <br><br></td></tr></table><br>
<a name="2073338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not at my computer just now but I think  MoveEntity with a Global/Local flag would be ideal as this fits in with the other positional methods. With the default keeping the current functionality for backwards compatibility. The main reason for scaling movement in this way, with the parent, would be for custom grouping and scaling of objects I would imagine. <br><br></td></tr></table><br>
<a name="2073347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> The MoveEntity description states that it moves in the direction the entity is facing, so therefore, it is always forced into a entity local coordinate system. although we could add a global flag, i think it would only apply to the scaling. <br><br>my thought is to keep it this way until someone shows a demonstration needing this functionality. <br><br></td></tr></table><br>
<a name="2073398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds fair to me. <br><br>BTW Adam, if I use  per pixel lighting(and possibly normal maps)  on Android my tablet now resets  when I exit my game. This has been since .41, I apologise for reporting this a bit late as I disabled both features(and promptly forgot all about it) to enable me to debug the rest if the game while you were working on the normal mapping. Anyone else have this? <br><br>Also, I just discovered that I got a very nice 10% speed boost to my rendering using the new KitKat update and MB3D! :) <br><br></td></tr></table><br>
<a name="2073396"></a>

<a name="2073397"></a>

<a name="2073400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> BTW Adam, if I use per pixel lighting(and possibly normal maps) on Android my tablet now resets when I exit my game.  <br></div><br>the whole tablet resets? thats a tough one, hard to debug, but probably driver or memory related.<br>are you reloading your shaders and textures in OnResume()? maybe try to see if one or the other is messing things up. <br><br></td></tr></table><br>
<a name="2073421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just un-remarked the offending lines, no crashing now?!?! I must have initiated the crash in some other way that I have since fixed unintentionally. Not my night! ;) <br><br></td></tr></table><br>
<a name="2073611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Disregard. <br><br></td></tr></table><br>
<a name="2073603"></a>

<a name="2073596"></a>

<a name="2073665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does the XNA version contain all of the OpenGL version features? <br><br></td></tr></table><br>
<a name="2073671"></a>

<a name="2073672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does the XNA version contain all of the OpenGL version features?  <br></div><br>XNA has two modes: profile(HD) and reach. reach is pretty limited, but works on WP7. that is the mode i have been maintaining in minib3d.<br><br>so no, XNA does not contain all the opengl features. only 1 texture, and only 1 distance light only.<br><br>the more robust XNA and Win8 stuff that Rone wrote is much more powerful. i am still working out odd bugs in migrating it into the base miniB3D. (plus, i have no Win tablets/phones to test it on, just Win8). <br><br></td></tr></table><br>
<a name="2073677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey adam,<br><br>have you already started with the windows 8.1 adjustments and integration into latest minib3d?<br>I have currently some time to make it... <br><br></td></tr></table><br>
<a name="2073802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> i wonder if that's the memory exception i'm running into? VS2012 is giving me no debug info. running monkey v76. <br><br></td></tr></table><br>
<a name="2073812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> In order to compile with the latest monkey version(v76d), I changed the following:<br><br>- replaced TARGET="win8" with TARGET="winrt"<br>- replaced Print with bbPrint<br>- replaced BBWin8Game with BBWinrtGame<br>- replaced ::Win8Game() with ::WinrtGame()<br>- replaced .ToCString&lt;wchar_t&gt; with .ToCString&lt;char&gt; in BBD3D11_INPUT_ELEMENT_DESC::Create<br><br>Then 'animation_test.monkey' compiled and started successfully...<br><br>Can you describe the exception in more detail?<br><br>Enable native code debugging:<br>MonkeyGame\Properties\Debug\Debugger type\Mixed<br><br>------------------------------------<br><br>I did describe here, how to load custom hlsl shaders <a href="https://github.com/sascha-schmidt217/minib3d-monkey/wiki/Release-Notes" target="_blank">https://github.com/sascha-schmidt217/minib3d-monkey/wiki/Release-Notes</a><br>Since win8.1 supports runtime shader compilation/reflection, this can be handled more user friendly now... <br><br></td></tr></table><br>
<a name="2073811"></a>

<a name="2074535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> One question does minib3d allow for flight controls or is it a straight port of max minib3d fps system? <br><br></td></tr></table><br>
<a name="2074576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> One question does minib3d allow for flight controls or is it a straight port of max minib3d fps system?  <br></div><br>?<br>you need to make your own controls.<br>you can make an entity move forward 0.2 units in the "local forward axis" direction with EntityMove(0,0,0.2). <br><br></td></tr></table><br>
<a name="2074589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nah ya misunderstand, what i was talking about is if you roll 45 degrees left then pitch up does it pitch up in relation to the objects orientation like a plane OR like the original minib3d where it was as if the rotation was 0 so no matter what you had fps controls this was fixed by warner later on the bb.com forums :) <br><br></td></tr></table><br>
<a name="2074612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gimbal lock? <br><br></td></tr></table><br>
<a name="2074613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nah quaternion rotation over Euler, is flight rotation over fps rotation system. <br><br></td></tr></table><br>
<a name="2074616"></a>

<a name="2074617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Nah quaternion rotation over Euler, is flight rotation over fps rotation system.  <br></div><br>Euler rotations, no quaternions. Quaternion is on my TODO but very low priority.<br>Everything internally is matrix based, so yes, you will get gimbal lock.<br>I've added the <b>entity.AlignToVector(x,y,z, axis, slerp speed)</b>, which is internally quat-&gt;matrix based so that it can potentially get rid of the gimbal lock. <br><br></td></tr></table><br>
<a name="2074658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> entity.AlignToVector(x,y,z, axis, slerp speed) <br></div> Handy! :) <br><br></td></tr></table><br>
<a name="2074695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Handy indeed, i will try to do the same thing i did with the original and see what happens from the db classic days <br><br></td></tr></table><br>
<a name="2074951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fragmotion is 70% off($15) for the Christmas period, <a href="http://www.fragmosoft.com/" target="_blank">http://www.fragmosoft.com/</a><br><br>Why mention it here? I bought this at full price(and its well worth it at that price) and have found it to be an essential tool when using miniB3D. Messing with file conversions, internal paths, bones, texture formats etc... all the things you need to get your models in your Monkey+miniB3D game. I really could not do with out it when using miniB3D now. <br><br></td></tr></table><br>
<a name="2075181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam: Are you sure CollisionNX/NY/NZ are returning values like Blitz3D? I get really confusing values, unlike Blitz3D <br><br></td></tr></table><br>
<a name="2075187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Are you sure CollisionNX/NY/NZ are returning values like Blitz3D? I get really confusing values, unlike Blitz3D  <br></div><br>no, i rewrote most of the collision stuff, and i don't have the original b3d to test this stuff against. but the normals should be accurate and normalized.<br>...do i need to flip my NZ? <br><br></td></tr></table><br>
<a name="2075188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> i think CollisionN* should return a value between -1.0 and 1.0 ... that is it what B3D do... <br><br></td></tr></table><br>
<a name="2075196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> i think CollisionN* should return a value between -1.0 and 1.0 ... that is it what B3D do...  <br></div><br>i must be missing a normalization somewhere. a quick glance-- i missed it on ray-triangle, so that would effect TPick. is that where the normal is wrong? what collision type is wrong? <br><br></td></tr></table><br>
<a name="2075195"></a>

<a name="2075197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> In B3D i can use CollisionN* to move my objects against the collided normal. With miniB3D this doesn't work <br><br></td></tr></table><br>
<a name="2075210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> try<br><pre class=code>
Local vecNorm:Vector = New Vector( obj.CollisionNX(), obj.CollisionNY(), obj.CollisionNZ() )
vecNorm = vecNorm.Normalize()
</pre><br>also see if flipping the sign "obj.CollisionNZ()" to "-obj.CollisionNZ()" works.<br><br>Also, setting the collision response to COLLISION_RESPONSE_SLIDE or COLLISION_RESPONSE_SLIDEXZ should slide objects against each other.<br><br>EDIT: fixed code above <br><br></td></tr></table><br>
<a name="2075199"></a>

<a name="2075200"></a>

<a name="2075228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vector::Normalize() doesn't work, after that the normals has the same values as before.<br><br>My setup:<br><img src="http://www.colorflow.de/monkey/pics/collision_error.jpg"><br><br>In Update():<br><pre class=code>
Local v:Vector = New Vector(b.model.CollisionNX(), b.model.CollisionNY(), b.model.CollisionNZ())			
								
Print "before: " + v.z
v = v.Normalise()
Print "after: " + v.z
</pre> <br><br></td></tr></table><br>
<a name="2075248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> i think it's a bug ... i need the normals of the table, but i get just 0, 0, 0. <br><br></td></tr></table><br>
<a name="2075283"></a>

<a name="2075284"></a>

<a name="2075285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Having a wee problem with a .b3d file exported from Maplet. Got an errant vert when loaded into MiniB3D!<br><br><img src="http://www.into-games.com/extra/temp/VertFail.jpg"><br><br>Look at it -- all high and mighty up-in-the-air as it it were better than all the other verts :D Looks fine in Maplet and in Decorator (funnily enough if you load it into Decorator then save it back out it causes a completely different tri to look wrong in MiniB3D!)<br><br>B3d file and textures here: <a href="http://www.into-games.com/extra/temp/VertFail.zip" target="_blank">http://www.into-games.com/extra/temp/VertFail.zip</a> <br><br></td></tr></table><br>
<a name="2075335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hammer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, thanks for your amazing work on creating this module for monkey. <br><br>I'm attempting to load my own bone animated b3d file but I keep running into roadblocks, When using Fragmotion as the exporter the model loads correctly but just doesn't animate. I searched the boards and saw someone else had a similar problem and supposedly there was a fix being implemented, has it not made the code yet? There was talk of a temp fix similar of "if weight=0.0 then weight=1.0" but I haven't the slightest clue where to start with this. I run into a completely different when using the b3d pipeline plugin for 3ds Max 9 the entire program stalls out and I get an "Monkey Runtime Error : Array index out of range"  error. The animations plays fine in various b3d viewers so I don't think the problem is with the animation or exporters. Any suggestions on what I may be doing wrong or what I can do to fix my issues? <br><br></td></tr></table><br>
<a name="2075336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> When using Fragmotion as the exporter the model loads correctly but just doesn't animate. <br></div><br>if you can, send the model to me. i don't need the textures. awpiette at yahoo dot com.<br><br>i'll look into these other problems as well this week. <br><br></td></tr></table><br>
<a name="2075348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> why the table doesn't response collisions?<br><pre class=code>
Strict

Import minib3d.app
Import mojo

Class Game Extends MiniB3DApp
	Field ball:TMesh, table:TMesh
	Field cam:TCamera, light:TLight
	
	Method Create:Int()
		SetUpdateRate(30)
		SetRender()
		
		PreLoad("ball01.jpg")
		PreLoad("mojo_font.png")
		
		Return 0
	End
	
	Method Init:Int()
		SetFont(LoadImage("mojo_font.png",96,Image.XPadding))
		
		ball	= LoadMesh("ball01.obj")
		table	= LoadMesh("table01.obj")
		cam		= CreateCamera()
		light	= CreateLight(2)
		
		ball.EntityTexture(LoadTexture("ball01.jpg"))
		
		cam.Position(0.0, 7.0, -2.0)
		cam.Rotate(45.0, 0.0, 0.0)
		
		light.Position(0.0, 5.0, 5.0)
		light.LightRange(50)
		
		
		ball.CollisionSetup(1, COLLISION_METHOD_BOX)
		table.CollisionSetup(1, COLLISION_METHOD_POLYGON)
		Collisions(1, 1, COLLISION_METHOD_POLYGON, COLLISION_RESPONSE_SLIDEXZ)
		
		Return 0
	End
	
	Method Update:Int()
		ball.TranslateEntity(0.2, 0.0, 0.2)
		
		Local bc:Int = ball.CountCollisions()
		Local tc:Int = table.CountCollisions()
		
		If bc &gt;= 1 Print "ball collisions: " + bc
		If tc &gt;= 1 Print "table collisions: " + tc
		
		UpdateWorld()
		
		Return 0
	End
	
	Method Render:Int()
		RenderWorld()
		
		Return 0
	End
End

Function Main:Int()
	New Game()
	Return 0
End
</pre><br><br>files for this code: <a href="http://www.colorflow.de/monkey/downloads/data.zip" target="_blank">http://www.colorflow.de/monkey/downloads/data.zip</a> <br><br></td></tr></table><br>
<a name="2075358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> omg ... i got it: the return value is just to big.<br><br><pre class=code>
Local collCount:Int = b.model.CountCollisions()
	If collCount &gt; 0
		Local nx:Float = Float(String(b.model.CollisionNX())[..4])
		Local nz:Float = Float(String(b.model.CollisionNZ())[..4])
			
		If nx &lt;&gt; 0 b.dx = nx * 0.2
		If nz &lt;= 1 And nz &gt;= -1 b.dz = nz * 0.2
		
		b.model.TranslateEntity(b.dx, 0.0, b.dz)
</pre> <br><br></td></tr></table><br>
<a name="2075366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> yet another miniB3D bug: the red marked area in the picture is the area i have to touch/click before i get picked coordinates from the rest of the screen<br><br><img src="http://www.colorflow.de/monkey/pics/picked_error.jpg"> <br><br></td></tr></table><br>
<a name="2075428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hammer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> I managed to get the model to animate, the problem was with the texture. I had multi-sub texture on a single mesh(multiple files), I just decided to merge my textures together for the time being no major biggie. Has LoadAnimSeq been implemented yet? <br><br></td></tr></table><br>
<a name="2075430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm having one weird issue... ive download experimental 77a + the latest miniB3D last week.. and start with a simple tutorial from the other post (for miniB3D + Monkey). it works like a charm until yesterday. turn off my PC and runaway, then turn on again just now and try to continue my tutorial, i'vet got and error message at Chrome print "**Shader Linking Error". my program at html 5 (using Chrome) actually running only that i can't see any mesh on the screen.. i found that 'Light' is the main issue here. it was like the scene has no light at all even i created it (this is still the first tutorial file im playing with - but yesterday everything works, even i try with changing the light to omni or spot, it works). When i et the mesh to full bright (so no light affected now) then i can see the mesh. i revert back the compiler to MonkeyProv69 + old miniB3D now also cant run the tutorial above without success (yesterday it is OK!)????<br><br>another thing is, ive tried with Monkey Pro v69 + old minib3d and it works on every examples file without any problem.. but when i try with experimental 77a + latest minib3D, i have zombie examples working without light i guess. all zombies looks shade in black.???<br><br>but every issue above, when i compile it for Desktop (glfw) it works just fine... is there any light issue before this (that cause shader linking error)? <br><br></td></tr></table><br>
<a name="2075440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I managed to get the model to animate, the problem was with the texture. I had multi-sub texture on a single mesh(multiple files), I just decided to merge my textures together for the time being no major biggie. Has LoadAnimSeq been implemented yet?  <br></div><br>cool, the number of textures depends on the shader. opengles1.1 allows 8, opengles2.0 current shader allows 4, xna allows 1. <br><br>LoadAnimSeq() code is in there, but i've never used it. if you let me know (verbosely) what it's SUPPOSE to do, i can get it running properly.<br><br><div class="quote"> but when i try with experimental 77a + latest minib3D, i have zombie examples working without light i guess. all zombies looks shade in black.??? <br></div><br>should work ok, but you never know. make sure to delete the old "zombie.build" folder to get rid of anything that may still be incompatible.<br>also make sure you're getting "..Full shader success" and "..FastBright shader success". i suspect full shader is not working for you, but fast bright is working, which is why when you disable lights you can see things again. also check to see if there's an error log in the beginning when the shaders are being compiled. <br><br>my other guess is chrome updated it's ANGLE driver when you turned it off, so that's why something is amiss when compiling (ANGLE is an opengl to directx JIT compiler). <br><br></td></tr></table><br>
<a name="2075529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam... aha! i reckon this is the one which rang me a bell.... <a href="https://chromium.googlesource.com/angle/angle..." target="_blank">https://chromium.googlesource.com/angle/angle...</a> it is updated 3 days ago... <br><br></td></tr></table><br>
<a name="2075700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now I know that minib3d has mojo emulation so we can render images onto the screen but is there emulation for using images loaded from a sheet like fonts etc?<br><br>I am loading a sheet of fonts with LoadImage( "font_16.PNG", 10, 16, 64 ) but when I render anything with this image I get nothing on screen, I have tested the same code using standard mojo and it works perfectly everytime. <br><br></td></tr></table><br>
<a name="2075729"></a>

<a name="2075730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you preloaded the "font_16.PNG"? <br><br></td></tr></table><br>
<a name="2075732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah its preloaded although Adam has said before that preloading is for html5 only and this is glfw. <br><br></td></tr></table><br>
<a name="2075883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I am loading a sheet of fonts with LoadImage( "font_16.PNG", 10, 16, 64 ) but when I render anything with this image I get nothing on screen, I have tested the same code using standard mojo and it works perfectly everytime. <br></div><br>i just did a quick test with those settings and it seems ok.<br>Notes:<br>make sure that SetRender() is set BEFORE any LoadImages.<br>make sure that SetMojoEmulation() is set in the OnRender() method and BEFORE you use any mojo drawing commands. <br><br></td></tr></table><br>
<a name="2075899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah it seems to fail here will look onto it and see what's going wrong <br><br></td></tr></table><br>
<a name="2075934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems that one of my scaling imports was corrupted I have replaced the file and it all works brilliantly now, thanks adam for ya help :D <br><br></td></tr></table><br>
<a name="2076440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Having a wee problem with a .b3d file exported from Maplet. Got an errant vert when loaded into MiniB3D! <br></div><br><b>yes, BUG!</b> <br>fixed v0.42.3 on github (bug was in monkeybuffer.monkey). <br><br></td></tr></table><br>
<a name="2076439"></a>

<a name="2076444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> re:collisions<br><div class="quote"> i think it's a bug ... i need the normals of the table, but i get just 0, 0, 0. <br></div><br>your code:<br><pre class=code>Local nx:Float = Float(String(ball.CollisionNX())[..4])
Local nz:Float = Float(String(ball.CollisionNZ())[..4])</pre><br>is dangerous because when values become 9.999988000 e-15 then your string becomes 9.9999.<br><br>this code bounced the ball around just fine:<br><pre class=code>If ball.CountCollisions()&gt;0
	Local nx:Float = ball.CollisionNX()
	Local nz:Float = ball.CollisionNZ()
	Local dp# = bx*nx+bz*nz ''dot product
	bx = bx-2*nx*dp ''ray reflection
	bz = bz-2*nz*dp
Endif
		
ball.TranslateEntity(bx, 0.0, bz)</pre> <br><br></td></tr></table><br>
<a name="2076443"></a>

<a name="2076442"></a>

<a name="2076441"></a>

<a name="2076447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> we know that b3d files is already can be loaded in minib3d - monkey along with the bones animation, just wanna know how far the compatibility compare to the old b3d format? is that multitexturing still can be loaded. since im thinking to set all my models with full bright (entityfx = 1) beacuse i already have a few models (from old time blitz3d) with ambient occlusion / lightmap ready... <br><br></td></tr></table><br>
<a name="2076448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also is there still a way to get bone positioning data for each model at all times and rotations :) <br><br></td></tr></table><br>
<a name="2076475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank you Adam! <br><br></td></tr></table><br>
<a name="2076570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> yes, BUG! <br>fixed v0.42.3 on github (bug was in monkeybuffer.monkey). <br></div><br>Ace! Downloading... <br><br></td></tr></table><br>
<a name="2076579"></a>

<a name="2076580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  is that multitexturing still can be loaded. <br></div><br>multitexturing works, but NOT in XNA (yet). also try to limit your multi textures to about 4. if you need more that 4 shaders in html5/opengl2.0, let me know i can expand the shader.<br><br><div class="quote"> is there still a way to get bone positioning data for each model at all times and rotations <br></div><br>bones are entities, should work just like any other. let me know if it doesn't.<br>now, if you want to control bones using Position,Rotate, etc, you need to use entity.ActivateBones(). <br><br></td></tr></table><br>
<a name="2076587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was wondering if the commands were the same as blitz3ds :) <br><br></td></tr></table><br>
<a name="2077674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> does multitexturing work in html5? I noticed that if my model had two textures on it only one surface of the model animates, but if i consolidate it into one texture the entire model animates. My target is OUYA but for quick testing i use html5.. i have to see if this still does the same thing on OUYA <br><br></td></tr></table><br>
<a name="2077676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm i'm gonna check my model seems like i get the same problem in GLFW, could be something on my end. <br><br></td></tr></table><br>
<a name="2077730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> I gotta say this is still the most useful and significant module for Monkey-X to date. =) <br><br></td></tr></table><br>
<a name="2077842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>LoadAnimSeq() code is in there, but i've never used it. if you let me know (verbosely) what it's SUPPOSE to do, i can get it running properly.<br> <br></div><br><br>I could really use LoadAnimSeq() as well, it basically allows you to load a b3d file and only grabs the animation data and appends the frame to an existing model and returns the track id. <br><br></td></tr></table><br>
<a name="2077872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a very sloppy band-aid fix for LoadAnimSeq but it will show you how it works.<br><br>In Tmodelb3d.monkey<br><br><pre class=code>
	Function LoadAnimSeq:Int(mesh:TMesh,f_name$)
	
		Local data:DataBuffer = DataBuffer.Load(FixDataPath(f_name))

		If DEBUGMODEL Then Print"..loading B3DBinary:"+FixDataPath(f_name)

		If Not data Or (data And data.Length() &lt;=1)
			Print "**File not found: "+f_name
			Return -1
		Endif	
	
		Return ParseB3DAnim(mesh, data)		
	
	end

	Function ParseB3DAnim:int(mesh:TMesh, data:DataBuffer, override_texflags:Int=-1)		
		' Header info
		
		Local tag:Int
		Local prev_tag:Int
		Local new_tag:Int
		Local vno:Int
		
		Local file:BufferReader = BufferReader.Create(data)
		
		''read BB3D
		
		tag=file.ReadTag()
		
		If DEBUGMODEL Then Print "TModel "+PrintTag(tag)

		vno =file.ReadInt() 'tag
		vno =file.ReadInt() 'size

		vno =file.ReadInt() 'version

		If tag&lt;&gt;BB3D Print  "Invalid b3d file"; Return -1
		If Int(vno*0.01) &gt;0 Print  "Invalid b3d file version"; Return -1
		
		' Locals
		
		Local size:Int
		Local curSize:Int
		Local node_level:Int=-1
		Local old_node_level:Int=-1
		Local node_pos:Int[100]
	
		' tex local vars
		Local tex_no:Int=0
		Local tex:TTexture[1]
		Local te_file$
		Local te_flags:Int
		Local te_blend:Int
		Local te_coords:Int
		Local te_u_pos#
		Local te_v_pos#
		Local te_u_scale#
		Local te_v_scale#
		Local te_angle#
		
		' brush local vars
		Local brush_no:Int
		Local brush:TBrush[1]
		Local b_no_texs:Int
		Local b_name$
		Local b_red#
		Local b_green#
		Local b_blue#
		Local b_alpha#
		Local b_shine#
		Local b_blend:Int
		Local b_fx:Int
		Local b_tex_id:Int
		
		' node local vars
		Local n_name$=""
		Local n_px#=0
		Local n_py#=0
		Local n_pz#=0
		Local n_sx#=0
		Local n_sy#=0
		Local n_sz#=0
		Local n_rx#=0
		Local n_ry#=0
		Local n_rz#=0
		Local n_qw#=0
		Local n_qx#=0
		Local n_qy#=0
		Local n_qz#=0
		
		' mesh local vars
		'Local mesh:TMesh
		Local m_brush_id:Int
	
		' verts local vars
		Local v_mesh:TMesh
		Local v_surf:TSurface
		Local v_flags:Int
		Local v_tc_sets:Int
		Local v_tc_size:Int
		Local v_sz
		Local v_x#
		Local v_y#
		Local v_z#
		Local v_nx#
		Local v_ny#
		Local v_nz#
		Local v_r#
		Local v_g#
		Local v_b#
		Local v_u#
		Local v_v#
		Local v_w#
		Local v_a#	
		Local v_id
		
		' tris local vars
		Local surf:TSurface
		Local tr_brush_id:Int
		Local tr_sz:Int
		Local tr_vid:Int
		Local tr_vid0:Int
		Local tr_vid1:Int
		Local tr_vid2:Int
		Local tr_x#
		Local tr_y#
		Local tr_z#
		Local tr_nx#
		Local tr_ny#
		Local tr_nz#
		Local tr_r#
		Local tr_g#
		Local tr_b#
		Local tr_u#
		Local tr_v#
		Local tr_w#
		Local tr_a#	
		Local tr_no:Int
		
		Local vert_lookup:Int[]
		Local vert_surf_lookup:Int[]
		
		' anim local vars
		Local a_flags:Int
		Local a_frames:Int
		Local a_fps:Int
					
		' bone local vars
		Local bo_bone:TBone
		Local bo_no_bones:Int
		Local bo_vert_id:Int
		Local bo_vert_w#
		
		' key local vars	
		Local k_flags:Int
		Local k_frame:Int
		Local k_px#
		Local k_py#
		Local k_pz#
		Local k_sx#
		Local k_sy#
		Local k_sz#
		Local k_qw#
		Local k_qx#
		Local k_qy#
		Local k_qz#
	
		Local parent_ent:TEntity=Null ' parent_ent - used to keep track of parent entitys within model, separate to parent_ent_ext paramater which is external to model
		Local root_ent:TEntity=Null
	
		Local last_ent:TEntity=Null ' last created entity, used for assigning parent ent in node code
	
		Local totaltris:Int=0
	
		' Begin chunk (tag) reading
	
		Repeat
	
			new_tag=file.ReadTag()
			
			If NewTag(new_tag)=True
			
				prev_tag=tag
				tag=new_tag
				
				file.ReadInt() 'tag
				size=file.ReadInt() 'size
				curSize=0
				
				' deal with nested nodes
				
				old_node_level=node_level
				If tag=NODE ' "NODE"
				
					node_level=node_level+1
			
					If node_level&gt;0
					
						Local fd=0
						Repeat
							fd=file.Position()-node_pos[node_level-1]
							If fd&gt;=8
							
								node_level=node_level-1
	
							Endif
		
						Until fd&lt;8
					
					Endif
					
					node_pos[node_level]=file.Position()+size
																																																																									
				Endif
				
				' up level
				If node_level&gt;old_node_level
				
					If node_level&gt;0
						parent_ent=last_ent
					Else
						parent_ent=Null
					Endif
					
				Endif
				
				' down level
				Local tent:TEntity
				If node_level&lt;old_node_level
				
					tent=root_ent
					
					' get parent entity of last entity of new node level
					If node_level&gt;1
					
						Local cc
						For Local levs=1 To node_level-2
							cc=tent.CountChildren()
							tent=tent.GetChild(cc)
						Next
						cc=tent.CountChildren()			
						tent=tent.GetChild(cc)
						parent_ent=tent
						
					Endif
					
					If node_level=1 Then parent_ent=root_ent
					If node_level=0 Then parent_ent=Null
					
				Endif
						
				' output debug tree
				If DEBUGMODEL
					Local tab$=""
					Local info$=""
					If tag=NODE And parent_ent&lt;&gt;Null
						info=" (parent= "+parent_ent.name+")"
					Else If tag=NODE And root_ent&lt;&gt;Null
						info=" ("+root_ent.name+")"
					Endif
					For Local i=1 To node_level
						tab=tab+"-"
					Next
					Print  tab+" "+PrintTag(tag)+" "+info
				Endif
				
			Else
			
				tag=0
				
			Endif
			
			
	
			Select tag
			
				Case TEXS '"TEXS"
				
					'Local tex_no=0 ' moved to top
					
					new_tag=file.ReadTag()
					
					While NewTag(new_tag)&lt;&gt;True And file.Eof()&lt;&gt;True
					
						te_file=B3DReadString(file)
						
						If te_file.Length &lt;=1 Then Exit
						
						te_flags=file.ReadInt()
						te_blend=file.ReadInt()
						te_u_pos=file.ReadFloat()
						te_v_pos=file.ReadFloat()
						te_u_scale=file.ReadFloat()
						te_v_scale=file.ReadFloat()
						te_angle=file.ReadFloat()

						If te_flags&amp;65536
							te_flags=te_flags-65536
							te_coords=1
						Else
							te_coords=0
						Endif
						
						If override_texflags &gt;-1 Then te_flags = override_texflags
						
						' convert tex angle from rad to deg
						te_angle=te_angle*(180.0/PI)
	
	
						new_tag=file.ReadTag()

				
					Wend
			
				Case BRUS
						
					'Local brush_no=0 ' moved to top
					
					b_no_texs=file.ReadInt()
			
					new_tag=file.ReadTag()
					
					While NewTag(new_tag)&lt;&gt;True And file.Eof()&lt;&gt;True
	
						b_name=B3DReadString(file)
						b_red=file.ReadFloat()
						b_green=file.ReadFloat()
						b_blue=file.ReadFloat()
						b_alpha=file.ReadFloat()
						b_shine=file.ReadFloat()
						b_blend=file.ReadInt()
						b_fx=file.ReadInt()

						For Local ix=0 To b_no_texs-1
						
							b_tex_id=file.ReadInt()

						Next
		
						brush_no=brush_no+1

						new_tag=file.ReadTag()
				
					Wend
					
				Case NODE
	
					new_tag=file.ReadTag()
					
					n_name=B3DReadString(file)
					n_px=file.ReadFloat()
					n_py=file.ReadFloat()
					n_pz=-file.ReadFloat() '*-1
					n_sx=file.ReadFloat()
					n_sy=file.ReadFloat()
					n_sz=file.ReadFloat()
					n_qw=file.ReadFloat()
					n_qx=file.ReadFloat()
					n_qy=file.ReadFloat()
					n_qz=file.ReadFloat()
					
					Local rot:Float[] = Quaternion.QuatToEuler(n_qx,n_qy,-n_qz,n_qw)
					Local pitch#=rot[0]
					Local yaw#=rot[1]
					Local roll#=rot[2]
					n_rx=-pitch
					n_ry=yaw
					n_rz=roll
	
					new_tag=file.ReadTag()
					
					If new_tag=NODE Or new_tag=ANIM
		
						' make 'piv' entity a mesh, not a pivot, as B3D does
						
						
						Local piv:TMesh=New TMesh
						piv.classname="Model"
			
						piv.name=n_name
						piv.px=n_px
						piv.py=n_py
						piv.pz=n_pz
						piv.sx=n_sx
						piv.sy=n_sy
						piv.sz=n_sz
						piv.rx=n_rx
						piv.ry=n_ry
						piv.rz=n_rz
						piv.qw=n_qw
						piv.qx=n_qx
						piv.qy=n_qy
						piv.qz=n_qz
								
						'piv.UpdateMat(True)
						TEntity.entity_list.EntityListAdd(piv)
						last_ent=piv
					
						' root ent?
						If root_ent=Null Then root_ent=piv
						If node_level&gt;0 Then piv.AddParent(parent_ent)

					Endif
			
				Case MESH
						
					m_brush_id=file.ReadInt()
					Local amesh:TMesh=New TMesh
					last_ent=amesh
					If root_ent=Null Then root_ent=amesh
					If node_level&gt;0 Then amesh.AddParent(parent_ent)

				Case VRTS
				

					v_flags=file.ReadInt()
					v_tc_sets=file.ReadInt()
					v_tc_size=file.ReadInt()
					v_sz=12+v_tc_sets*v_tc_size*4
					If v_flags &amp; 1 Then v_sz=v_sz+12
					If v_flags &amp; 2 Then v_sz=v_sz+16
	
					new_tag=file.ReadTag()
	
					While NewTag(new_tag)&lt;&gt;True And file.Eof()&lt;&gt;True
				
						v_x=file.ReadFloat()
						v_y=file.ReadFloat()
						v_z=file.ReadFloat()
						
						If v_flags&amp;1
							v_nx=file.ReadFloat()
							v_ny=file.ReadFloat()
							v_nz=file.ReadFloat()
						Endif
						
						If v_flags&amp;2
							v_r=file.ReadFloat()'*255.0 ' *255 as surf.VertexColor() requires 0-255 values
							v_g=file.ReadFloat()'*255.0
							v_b=file.ReadFloat()'*255.0
							v_a=file.ReadFloat()
						Endif
						

						'read tex coords...
						For Local j=0 To v_tc_sets-1 ' texture coords per vertex - 1 for simple uv, 8 max
							For Local k=1 To v_tc_size ' components per set - 2 for simple uv, 4 max
								If k=1 v_u=file.ReadFloat()
								If k=2 v_v=file.ReadFloat()
								If k=3 v_w=file.ReadFloat()
							Next
							'If j=0 Or j=1 Then v_surf.VertexTexCoords(v_id,v_u,v_v,v_w,j)
						Next
							
						new_tag=file.ReadTag()
														
					Wend
					


				Case TRIS
					
					Local vid0#, vid1#, vid2#
					
					Local e:Bool = False
					Local old_tr_brush_id:Int = tr_brush_id
					tr_brush_id=file.ReadInt()
					
			
					' don't create new surface if tris chunk has same brush as chunk immediately before it
					If (prev_tag&lt;&gt;TRIS Or tr_brush_id&lt;&gt;old_tr_brush_id) ''??? Does switching brushes cause problems ???
					

					Endif
					
					
					tr_sz=12
						
					new_tag=file.ReadTag()
					

					
					Local num_tris:Int = ((size-4)/12) ''4=brush numer (int)
					
					For Local j:Int=0 To num_tris-1
						
						If file.Eof() Then new_tag=0; Print "**Error: early EOF"; Exit
						
						tr_vid0=file.ReadInt()
						tr_vid1=file.ReadInt()
						tr_vid2=file.ReadInt()
						


						new_tag=file.ReadTag()
						
						totaltris+=1
					Next

					If new_tag&lt;&gt;TRIS
						

					Endif
					
					
				Case ANIM
				
					a_flags=file.ReadInt()
					a_frames=file.ReadInt()
					a_fps=file.ReadFloat()
					
					If a_frames&lt;0 Then a_frames = -a_frames
					
					If DEBUGMODEL Then Print "anim flags:"+a_flags+" frames:"+a_frames+" fps:"+a_fps
					
					If mesh&lt;&gt;Null And file.Eof()&lt;&gt;True
					
						mesh.anim=1

						mesh.anim_seqs_first[0]=0
						mesh.anim_seqs_last[0]=mesh.anim_seqs_last[0]+a_frames
						
					
					Endif
	
				Case BONE
				
					Local ix:Int=0
					
					new_tag=file.ReadTag()

					While NewTag(new_tag)&lt;&gt;True And file.Eof()&lt;&gt;True And size&lt;&gt;0
				
						bo_vert_id=file.ReadInt()
						bo_vert_w=file.ReadFloat()
						
						new_tag=file.ReadTag()
							
					Wend
					Print "Finding "+n_name
					bo_bone = TBone(mesh.FindChild(n_name))
					If bo_bone = Null Then Print "Null Bone"

					bo_bone.keys.oldframes = bo_bone.keys.frames
					bo_bone.keys.frames=bo_bone.keys.frames+a_frames
					bo_bone.keys.flags=bo_bone.keys.flags.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.px=bo_bone.keys.px.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.py=bo_bone.keys.py.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.pz=bo_bone.keys.pz.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.sx=bo_bone.keys.sx.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.sy=bo_bone.keys.sy.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.sz=bo_bone.keys.sz.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.qw=bo_bone.keys.qw.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.qx=bo_bone.keys.qx.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.qy=bo_bone.keys.qy.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.qz=bo_bone.keys.qz.Resize(bo_bone.keys.frames+1)
					If root_ent=Null Then root_ent=bo_bone
					If node_level&gt;0 Then bo_bone.AddParent(parent_ent)

					If new_tag&lt;&gt;KEYS

						last_ent=bo_bone

						
					Endif
					
					
						
		
					
						
		
				Case KEYS
				
					k_flags=file.ReadInt()
				
					new_tag=file.ReadTag()
	
					While NewTag(new_tag)&lt;&gt;True And file.Eof()&lt;&gt;True And curSize &lt;= size
			
						k_frame=file.ReadInt()
						k_frame = bo_bone.keys.oldframes+k_frame
						curSize+=4
						
						If(k_flags&amp;1) 'pos
							k_px=file.ReadFloat()
							k_py=file.ReadFloat()
							k_pz=-file.ReadFloat()
							curSize+=12
						Endif
						If(k_flags&amp;2) 'sca
							k_sx=file.ReadFloat()
							k_sy=file.ReadFloat()
							k_sz=file.ReadFloat()
							curSize+=12
						Endif
						If(k_flags&amp;4) 'rot
							k_qw=-file.ReadFloat()
							k_qx=file.ReadFloat()
							k_qy=file.ReadFloat()
							k_qz=-file.ReadFloat()
							curSize+=16
							
						Endif
	
						If bo_bone&lt;&gt;Null And k_frame &lt; bo_bone.keys.frames ' check if bo_bone exists - it won't for non-boned, keyframe anims
						
							bo_bone.keys.flags[k_frame]=bo_bone.keys.flags[k_frame]+k_flags
							If(k_flags&amp;1)
								bo_bone.keys.px[k_frame]=k_px
								bo_bone.keys.py[k_frame]=k_py
								bo_bone.keys.pz[k_frame]=k_pz
							Endif
							If(k_flags&amp;2)
								bo_bone.keys.sx[k_frame]=k_sx
								bo_bone.keys.sy[k_frame]=k_sy
								bo_bone.keys.sz[k_frame]=k_sz
							Endif
							If(k_flags&amp;4)
								bo_bone.keys.qw[k_frame]=k_qw
								bo_bone.keys.qx[k_frame]=k_qx
								bo_bone.keys.qy[k_frame]=k_qy
								bo_bone.keys.qz[k_frame]=k_qz
							Endif
						
						Endif
						
						new_tag=file.ReadTag()
							
					Wend
					
					If new_tag&lt;&gt;KEYS
					
						If bo_bone&lt;&gt;Null ' check if bo_bone exists - it won't for non-boned, keyframe anims
							

							last_ent=bo_bone

							
						Endif
						
					Endif
					
					
				Default
				
					file.ReadByte()
	
			End Select
		
		Until file.Eof()
		
		
		''clean up buffers
		For Local e:TEntity = Eachin root_ent.GetChildren(True)

			Local m:TMesh = TMesh(e)
			If Not m Then continue
		
			For Local surf:TSurface = Eachin m.surf_list
				surf.CropSurfaceBuffers()
				If m.anim_surf[surf.surf_id] Then m.anim_surf[surf.surf_id].CropSurfaceBuffers()
			Next

		Next
	
		
		Return 1
	
	End

</pre><br><br>And then add in Tanimation.monkey<br><br><pre class=code>
Class TAnimationKeys
	Field oldframes:int '&lt;-- this
</pre><br><br>What this does is if i load an animated model that only contains an idle anim and then pass LoadAnimSeq for run animation i can append the running animation in another file<br><br>e.g.<br><br>		mesh = LoadAnimMesh("media/maleidle.b3d")<br>		TModelB3D.LoadAnimSeq(mesh,"media/malerun.b3d")<br><br><br><br>I tested it, seems to work for me. But it needs some cleaning up. <br><br></td></tr></table><br>
<a name="2078070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> also, i have to see how the animation is handled in the back end but i think you'd want to resize the sequence array<br><br>by changing this<br><br><pre class=code>
						mesh.anim_seqs_first[0]=0
						mesh.anim_seqs_last[0]=mesh.anim_seqs_last[0]+a_frames
</pre><br><br>To this<br><br><pre class=code>
						local newlen:int = mesh.anim_seqs_first.Length()+1
						mesh.anim_seqs_first=mesh.anim_seqs_first.Resize(newlen)
						mesh.anim_seqs_last=mesh.anim_seqs_last.Resize(newlen)
						mesh.anim_seqs_first[newlen-1]=mesh.anim_seqs_last[0]
						mesh.anim_seqs_last[newlen-1]=mesh.anim_seqs_last[0]+a_frames-1
</pre><br><br>Then have some function to switch the meshes current sequence. <br><br></td></tr></table><br>
<a name="2077924"></a>

<a name="2077931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> anyone have some sample codes of 3ds character (with animation - i know it is separated limb animation not bones) loaded into the minib3d-monkey? <br><br></td></tr></table><br>
<a name="2078063"></a>

<a name="2078064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
anyone have some sample codes of 3ds character (with animation - i know it is separated limb animation not bones) loaded into the minib3d-monkey?
</pre><br><br>if i'm not mistaken i don't think minib3d loads .3ds format ..yet<br><br>Also on a side note does anyone know why in html5 if i attach a model to a bone that it seems to bobble off and on the bone when i move the mesh around? it looks like the positoning update is not in sync with the renderer.<br><br><img src="https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-ash3/t1/1451326_10152234854746350_894891668_n.jpg"> <br><br></td></tr></table><br>
<a name="2078066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm seems to sort itself out if i set the FPS lower... i guess the Renderer is going faster than the Update.. <br><br></td></tr></table><br>
<a name="2078089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was able to clean the LoadAnimSeq code up a bit more... you can literally just Copy Pasta the below code and it works<br><br>Add this field to TAnimationKeys in TAnimation.monkey<br><br><pre class=code>
Class TAnimationKeys
	Field oldframes:int

</pre><br><br><br>Paste into Tmodelb3d.monkey TModelB3D class<br><br><pre class=code>

	Function LoadAnimSeq:Int(mesh:TMesh,f_name$)
	
		Local data:DataBuffer = DataBuffer.Load(FixDataPath(f_name))

		If DEBUGMODEL Then Print"..loading B3DBinary:"+FixDataPath(f_name)

		If Not data Or (data And data.Length() &lt;=1)
			Print "**File not found: "+f_name
			Return -1
		Endif	
	
		Return ParseB3DAnim(mesh, data)		
	
	end


	Function ParseB3DAnim:int(mesh:TMesh, data:DataBuffer, override_texflags:Int=-1)		
		' Header info
		
		Local tag:Int
		Local prev_tag:Int
		Local new_tag:Int
		Local vno:Int
		
		Local file:BufferReader = BufferReader.Create(data)
		
		''read BB3D
		
		tag=file.ReadTag()
		
		If DEBUGMODEL Then Print "TModel "+PrintTag(tag)

		vno =file.ReadInt() 'tag
		vno =file.ReadInt() 'size

		vno =file.ReadInt() 'version

		If tag&lt;&gt;BB3D Print  "Invalid b3d file"; Return -1
		If Int(vno*0.01) &gt;0 Print  "Invalid b3d file version"; Return -1
		
		' Locals
		
		Local size:Int
		Local curSize:Int
		Local node_level:Int=-1
		Local old_node_level:Int=-1
		Local node_pos:Int[100]
	

		

		
		' node local vars
		Local n_name$=""
		Local n_px#=0
		Local n_py#=0
		Local n_pz#=0
		Local n_sx#=0
		Local n_sy#=0
		Local n_sz#=0
		Local n_rx#=0
		Local n_ry#=0
		Local n_rz#=0
		Local n_qw#=0
		Local n_qx#=0
		Local n_qy#=0
		Local n_qz#=0
		

		
		' anim local vars
		Local a_flags:Int
		Local a_frames:Int
		Local a_fps:Int
					
		' bone local vars
		Local bo_bone:TBone
		Local bo_no_bones:Int
		Local bo_vert_id:Int
		Local bo_vert_w#
		
		' key local vars	
		Local k_flags:Int
		Local k_frame:Int
		Local k_px#
		Local k_py#
		Local k_pz#
		Local k_sx#
		Local k_sy#
		Local k_sz#
		Local k_qw#
		Local k_qx#
		Local k_qy#
		Local k_qz#
	
		Local parent_ent:TEntity=Null ' parent_ent - used to keep track of parent entitys within model, separate to parent_ent_ext paramater which is external to model
		Local root_ent:TEntity=Null
	
		Local last_ent:TEntity=Null ' last created entity, used for assigning parent ent in node code
	
		Local totaltris:Int=0
	
		' Begin chunk (tag) reading
	
		Repeat
	
			new_tag=file.ReadTag()
		
			If NewTag(new_tag)=True
			
				prev_tag=tag
				tag=new_tag
				
				file.ReadInt() 'tag
				size=file.ReadInt() 'size
				curSize=0
			endif
	
			Select tag

				Case NODE
	
					new_tag=file.ReadTag()
					
					n_name=B3DReadString(file)
					n_px=file.ReadFloat()
					n_py=file.ReadFloat()
					n_pz=-file.ReadFloat() '*-1
					n_sx=file.ReadFloat()
					n_sy=file.ReadFloat()
					n_sz=file.ReadFloat()
					n_qw=file.ReadFloat()
					n_qx=file.ReadFloat()
					n_qy=file.ReadFloat()
					n_qz=file.ReadFloat()
					
					Local rot:Float[] = Quaternion.QuatToEuler(n_qx,n_qy,-n_qz,n_qw)
					Local pitch#=rot[0]
					Local yaw#=rot[1]
					Local roll#=rot[2]
					n_rx=-pitch
					n_ry=yaw
					n_rz=roll
	
					new_tag=file.ReadTag()

					
				Case ANIM
				
					a_flags=file.ReadInt()
					a_frames=file.ReadInt()
					a_fps=file.ReadFloat()
					
					If a_frames&lt;0 Then a_frames = -a_frames
					
					If DEBUGMODEL Then Print "anim flags:"+a_flags+" frames:"+a_frames+" fps:"+a_fps
					
					If mesh&lt;&gt;Null And file.Eof()&lt;&gt;True
					
						mesh.anim=1

						local newlen:int = mesh.anim_seqs_first.Length()+1
						mesh.anim_seqs_first = mesh.anim_seqs_first.Resize(newlen)
						mesh.anim_seqs_last = mesh.anim_seqs_last.Resize(newlen)
						mesh.anim_seqs_first[newlen-1]=mesh.anim_seqs_last[0]
						mesh.anim_seqs_last[newlen-1]=mesh.anim_seqs_last[0]+a_frames						
					
					Endif
	
				Case BONE
				
					Local ix:Int=0
					
					new_tag=file.ReadTag()

					While NewTag(new_tag)&lt;&gt;True And file.Eof()&lt;&gt;True And size&lt;&gt;0
				
						bo_vert_id=file.ReadInt()
						bo_vert_w=file.ReadFloat()
						
						new_tag=file.ReadTag()
							
					Wend
					Print "Finding "+n_name
					bo_bone = TBone(mesh.FindChild(n_name))
					If bo_bone = Null Then Print "Null Bone"

					bo_bone.keys.oldframes = bo_bone.keys.frames
					bo_bone.keys.frames=bo_bone.keys.frames+a_frames
					bo_bone.keys.flags=bo_bone.keys.flags.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.px=bo_bone.keys.px.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.py=bo_bone.keys.py.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.pz=bo_bone.keys.pz.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.sx=bo_bone.keys.sx.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.sy=bo_bone.keys.sy.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.sz=bo_bone.keys.sz.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.qw=bo_bone.keys.qw.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.qx=bo_bone.keys.qx.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.qy=bo_bone.keys.qy.Resize(bo_bone.keys.frames+1)
					bo_bone.keys.qz=bo_bone.keys.qz.Resize(bo_bone.keys.frames+1)
					If root_ent=Null Then root_ent=bo_bone
					If node_level&gt;0 Then bo_bone.AddParent(parent_ent)

					If new_tag&lt;&gt;KEYS

						last_ent=bo_bone

						
					Endif
					
					
									
		
				Case KEYS
				
					k_flags=file.ReadInt()
				
					new_tag=file.ReadTag()
	
					While NewTag(new_tag)&lt;&gt;True And file.Eof()&lt;&gt;True And curSize &lt;= size
			
						k_frame=file.ReadInt()
						k_frame = bo_bone.keys.oldframes+k_frame
						curSize+=4
						
						If(k_flags&amp;1) 'pos
							k_px=file.ReadFloat()
							k_py=file.ReadFloat()
							k_pz=-file.ReadFloat()
							curSize+=12
						Endif
						If(k_flags&amp;2) 'sca
							k_sx=file.ReadFloat()
							k_sy=file.ReadFloat()
							k_sz=file.ReadFloat()
							curSize+=12
						Endif
						If(k_flags&amp;4) 'rot
							k_qw=-file.ReadFloat()
							k_qx=file.ReadFloat()
							k_qy=file.ReadFloat()
							k_qz=-file.ReadFloat()
							curSize+=16
							
						Endif
	
						If bo_bone&lt;&gt;Null And k_frame &lt; bo_bone.keys.frames ' check if bo_bone exists - it won't for non-boned, keyframe anims
						
							bo_bone.keys.flags[k_frame]=bo_bone.keys.flags[k_frame]+k_flags
							If(k_flags&amp;1)
								bo_bone.keys.px[k_frame]=k_px
								bo_bone.keys.py[k_frame]=k_py
								bo_bone.keys.pz[k_frame]=k_pz
							Endif
							If(k_flags&amp;2)
								bo_bone.keys.sx[k_frame]=k_sx
								bo_bone.keys.sy[k_frame]=k_sy
								bo_bone.keys.sz[k_frame]=k_sz
							Endif
							If(k_flags&amp;4)
								bo_bone.keys.qw[k_frame]=k_qw
								bo_bone.keys.qx[k_frame]=k_qx
								bo_bone.keys.qy[k_frame]=k_qy
								bo_bone.keys.qz[k_frame]=k_qz
							Endif
						
						Endif
						
						new_tag=file.ReadTag()
							
					Wend
					
					If new_tag&lt;&gt;KEYS
					
						If bo_bone&lt;&gt;Null ' check if bo_bone exists - it won't for non-boned, keyframe anims
							

							last_ent=bo_bone

							
						Endif
						
					Endif
					
					
				Default
				
					file.ReadByte()
	
			End Select
		
		Until file.Eof()
		
		
		Return mesh.anim_seqs_first.Length()
	
	End
</pre><br><br><br>Now you can use the sequence variable in Animate Function e.g.<br><pre class=code>
local runloop:int = TModelB3D.LoadAnimSeq(mesh,"media/malerun.b3d")
mesh.Animate(1,1,runloop)
</pre> <br><br></td></tr></table><br>
<a name="2078108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Also on a side note does anyone know why in html5 if i attach a model to a bone that it seems to bobble off and on the bone when i move the mesh around? it looks like the positoning update is not in sync with the renderer. <br></div><br>yes, are you using entity.AddParent() or are you using global X,Y,Z positioning? Parenting should not bobble.<br><br><div class="quote"> I was able to clean the LoadAnimSeq code up a bit more...  <br></div><br>Cool! thanks for this. i'll add it in.<br><br><div class="quote"> anyone have some sample codes of 3ds character (with animation - i know it is separated limb animation not bones) loaded into the minib3d-monkey? <br></div><br>sorry, no 3DS yet, although i reached out to Warner from the blitzmax forums and he said we can use his 3DS importer code to be included. it should be mostly compatible, i'll have to review it.<br>...but with that said, i still feel my time is best spent finishing the collada importer, but i am open to suggestions. <br><br></td></tr></table><br>
<a name="2078107"></a>

<a name="2078136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>yes, are you using entity.AddParent() or are you using global X,Y,Z positioning? Parenting should not bobble<br> <br></div><br><br>I used entityparent...is addparent different?<br><br>also is there a polygon limit for box to poly collisions? I can not get my player to collide with the walls of my map for the life of me. I can send the mesh if you want to look. <br><br></td></tr></table><br>
<a name="2078166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I used entityparent...is addparent different? <br></div><br>same thing. is UpdateWorld() the last thing you call? i don't know how objects parented to bones are lagging, but i'll look into it.<br><br><div class="quote"> also is there a polygon limit for box to poly collisions? <br></div><br>yes, but i don't think there is any box-&gt;poly collisions. only sphere-&gt;poly, sphere-&gt;sphere, sphere-&gt;box, sphere-&gt;multisphere, multisphere-&gt;ETC. <br><br></td></tr></table><br>
<a name="2078173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>yes, but i don't think there is any box-&gt;poly collisions. only sphere-&gt;poly, sphere-&gt;sphere, sphere-&gt;box, sphere-&gt;multisphere, multisphere-&gt;ETC.<br> <br></div><br><br>Ok i got the collisions to work, i had a brain fart and left the box size values in the function call for POLYGON type. But i am noticing that i am bumping into invisible objects when i walk around, they don;t stop me but they alter my trajectory when i walk. I am using Sphere to Poly collision. it could be from the constant downward moveentity command for gravity. i think once the player touches the floor i should turn that off until they are no longer colliding with it. I'd have to check. <br><br>But yea i noticed that if i use bone animation on a model and then entityparent the helmet to the head bone. it bobbles as i walk until i stand still. it goes away if i set the update rate at or below the actual fps i am getting. I am using the MiniB3DApp class and my UpdateWorld() is in the Update Method... should i put it in the OnUpdate() method? <br><br></td></tr></table><br>
<a name="2078261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok i found the problem with the bobbling entities attached to a bone, it seems the update skips any children of bones in TEntity UpdateChildren Method<br><br>if you Add the below function in TEntity.UpdateChildren  after the TBone UpdateMatrix method it solves the problem.<br><pre class=code>
				TBone(ent_c).UpdateMatrix(ent_c.loc_mat)
				UpdateChildren(ent_c,type)'&lt;----- This
</pre> <br><br></td></tr></table><br>
<a name="2078268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh and i got the collision problem sorted out it was the downward force against odd polygons that were causing it.<br><br><img src="https://z-1-scontent-a.xx.fbcdn.net/hphotos-ash3/t1/1654454_10152237794746350_1624743917_n.jpg"> <br><br></td></tr></table><br>
<a name="2078276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> it seems the update skips any children of bones in TEntity UpdateChildren Method <br></div><br>cool. i'll need to look into that, it actually should catch it in the TAnimation, but i'll review this and see if i can't consolidate the Matrix chain updating.<br><br><b>nice screenshot!</b><br>also, it looks like your frame rate is a bit low, that is because i really need to put in an octree for collisions and frustum culling. coming soon! <br><br></td></tr></table><br>
<a name="2078280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh actually my SetUpdateRate is at 20 intentionally, i forgot to change it back to 30 after finding the problem with the bobbling helmet. i think i average close to 30 fps. <br><br></td></tr></table><br>
<a name="2078305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does html5 support texture blending at all? Lightmapping doesn't seem to work.<br><br>GLFW<br><img src="https://z-1-scontent-a.xx.fbcdn.net/hphotos-ash3/t1/1459712_10152238452171350_2140344643_n.jpg"><br><br>HTML5<br><img src="https://z-1-scontent-a.xx.fbcdn.net/hphotos-prn2/t1/1795632_10152238452756350_1570786029_n.jpg"> <br><br></td></tr></table><br>
<a name="2078306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh ya derp.. before i forget there was a bug in that loadanimseq code i posted.. if you didn;t notice it. This is the fixed code which needs to replace that section in ParseB3DAnim Method<br><br><pre class=code>
Case ANIM
				
					a_flags=file.ReadInt()
					a_frames=file.ReadInt()
					a_fps=file.ReadFloat()
					
					If a_frames&lt;0 Then a_frames = -a_frames
					
					Print "anim flags:"+a_flags+" frames:"+a_frames+" fps:"+a_fps
					
					If mesh&lt;&gt;Null And file.Eof()&lt;&gt;True
					
						mesh.anim=1

						local newlen:int = mesh.anim_seqs_first.Length()+1
						mesh.anim_seqs_first = mesh.anim_seqs_first.Resize(newlen)
						mesh.anim_seqs_last = mesh.anim_seqs_last.Resize(newlen)
						mesh.anim_seqs_first[newlen-1]=mesh.anim_seqs_last[newlen-2]+1
						mesh.anim_seqs_last[newlen-1]=mesh.anim_seqs_last[newlen-2]+a_frames			
</pre> <br><br></td></tr></table><br>
<a name="2078309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does html5 support texture blending at all? Lightmapping doesn't seem to work. <br></div><br>it should work. can you describe your model's texture layer sequence and texture flags?<br>note that i set a max texture limit of 4 on html5. if people need more i can set a dynamic compiler for &gt;4 textures. <br><br></td></tr></table><br>
<a name="2078358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm using gile[s] this is their texture settings, the texture blend for the lightmap is set to MultiplyX2 and the normal texture i believe is just on default blending or multiply. But the lightmapping seems to work on OUYA as well, the only target that it doesn;t work under that i can test is html5. i haven't checked flash yet.<br><br>Here is output when loading:<br><br>-Load Texture:0 oldroof.jpg blend:2 coords:0<br>-Load Texture:1 ometalwall4.jpg blend:2 coords:0<br>-Load Texture:2 windowatrans.png blend:2 coords:0<br>-Load Texture:3 ometalwall3.jpg blend:2 coords:0<br>-Load Texture:4 oldtilefloor1.jpg blend:2 coords:0<br>-Load Texture:5 ometalwall1.jpg blend:2 coords:0<br>-Load Texture:6 teleporter.jpg blend:2 coords:0<br>-Load Texture:7 ometalwall2.jpg blend:2 coords:0<br>-Load Texture:8 Magic Lightmap 0.png blend:5 coords:1<br>-Load Texture:9 Magic Lightmap 1.png blend:5 coords:1<br>-Load Texture:10 Magic Lightmap 2.png blend:5 coords:1<br>-Load Texture:11 Magic Lightmap 3.png blend:5 coords:1<br>-Load Texture:12 Magic Lightmap 4.png blend:5 coords:1<br>-Load Texture:13 Magic Lightmap 5.png blend:5 coords:1<br>-Load Texture:14 Magic Lightmap 6.png blend:5 coords:1<br>-Load Texture:15 Magic Lightmap 7.png blend:5 coords:1<br>-Load Texture:16 Magic Lightmap 8.png blend:5 coords:1<br><img src="https://z-1-scontent-b.xx.fbcdn.net/hphotos-prn1/t1/1618628_10152238936861350_284068628_n.jpg"> <br><br></td></tr></table><br>
<a name="2078355"></a>

<a name="2078356"></a>

<a name="2078441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok i sort of fixed the problem.. <br><br>the built in shader was missing an if case for blend mode 5, i copy pasta'd what you have there it works but it's way too bright.<br><br>Added this to basicshadersgl.monkey in the FRAGBLEND String before the return statement.<br><pre class=code>
"} else if(blend==5.0) {	color = (vertcolorx * texture); return finalcolor+color;"+
</pre><br><br> I'm a newb when it comes to GLSL shaders, what should i put for multiply x2?<br><br><img src="https://z-1-scontent-a-sjc.xx.fbcdn.net/hphotos-prn1/l/t1/1621875_10152240454781350_1687353589_n.jpg"> <br><br></td></tr></table><br>
<a name="2078442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, &gt;4 textures, so i'll have to allow dynamically compiling shaders for html5 (opengl2.0) <br><br></td></tr></table><br>
<a name="2078443"></a>

<a name="2078444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here we go this change makes it look almost completely correct.<br><br><pre class=code>
"} else if(blend==5.0) {	color = (vertcolorx * texture); return finalcolor*color;"+
</pre><br><br><img src="https://z-1-scontent-a.xx.fbcdn.net/hphotos-ash3/t1/1898251_10152240545361350_1574090020_n.jpg"> <br><br></td></tr></table><br>
<a name="2078777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> got this issue where if i have a texture in my map that has alpha transparency, the entire map has a weird z ordering problem where i can see through the walls. i can't seem to figure out how to fix that. <br><br></td></tr></table><br>
<a name="2078778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work Adam! <br>I've been updating minib3d for blitzmax as I've already created something with it and wanted to see how you calculated your tangents for normals mapping. I noticed you're putting these in the color vbo which coincidentally I decided to do the same.<br><br>I've added shadowmapping with PCF, SSAO, and BLOOM, which in theory should be easily integrated to monkey minib3d.<br><br>It'd be great if there was a ES 3.0 module so we could take advantage of hardware MSAA with blitframebuffer, makes a huge difference. <br><br></td></tr></table><br>
<a name="2078780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> got this issue where if i have a texture in my map that has alpha transparency, the entire map has a weird z ordering problem where i can see through the walls. i can't seem to figure out how to fix that. <br></div><br>yes, if an entity has alpha, it needs to be sorted by distance to camera, and then rendered from back to front. the distance is measured from the CENTER of the BOUNDING BOX MESH. larger objects tend to get messed with this more often.<br><br>one way to get around this is to break up the level into smaller parts, or at least those that use alpha. the other way is to have the engine sort by triangles, but i find most engines don't sort triangles (slow), so miniB3D doesn't either. <br><br></td></tr></table><br>
<a name="2078779"></a>

<a name="2078781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> what's weird is i thought for sure i exported the mesh as multiple meshes within the file, but it looks as though i'll have to export the parts with alpha as an entirely different file.<br><br>this is a big pain in the butt and your a bad person for making me do this.<br><br><br>/sarcasm <br><br></td></tr></table><br>
<a name="2078788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> this is a big pain in the butt and your a bad person for making me do this. <br></div><br>it's true, i am bad for not finishing the collada importer, which may make everyone's lives easier. :^) <br><br></td></tr></table><br>
<a name="2078811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> On a similar note...<br><br>Have you seen this Adam, I believe it converts FBX/Collada/OBJ to JSON format. Making writing an importer a lot easier.<br><br><a href="https://github.com/libgdx/fbx-conv" target="_blank">https://github.com/libgdx/fbx-conv</a> <br><br></td></tr></table><br>
<a name="2078830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I've been updating minib3d for blitzmax as I've already created something with it and wanted to see how you calculated your tangents for normals mapping. <br></div><br>i do it in the vertex shader after updating the mesh with SetNormalMapping(single_surf:TSurface=Null).<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
/*-- tangent in aColors, cross to find bitangent*/
if ((texflag &gt; 0.0) &amp;&amp; (texfxNormal[0] &gt; 0.0)) {
   vec3 tangent = normalize(mMatrix*aColors).xyz;
   vec3 bitangent = normalize( cross(  normal.xyz, tangent.xyz ));
   mat3 nmMat = mat3( tangent.x, bitangent.x, normal.x,tangent.y, bitangent.y, normal.y,tangent.z, bitangent.z, normal.z);
   nmLight = nmMat * nmLight;
}
</textarea><br><br><div class="quote"> I've added shadowmapping with PCF, SSAO, and BLOOM, which in theory should be easily integrated to monkey minib3d. <br></div><br>yes absolutely, if you're willing to zlib/mit your code. otherwise i am planning to write these shaders.<br><div class="quote"> Here we go this change makes it look almost completely correct. <br></div><br>blend mode 5 looks like it brightens/darkens on a greyscale texture, where 0.5 does nothing.<br><pre class=code>
else if(blend==5.0) {	color = (vertcolorx * 2.0*texture); return clamp(finalcolor*color,0.0,1.0);
</pre> <br><br></td></tr></table><br>
<a name="2078828"></a>

<a name="2078824"></a>

<a name="2078988"></a>

<a name="2078989"></a>

<a name="2078991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> So i'm running across this weird issue where in my editor which i created using bmax and minib3d i've assembled a level together and i save it as an xml file. Then when i load it in monkey everything is in the wrong position other than the lights and cameras.. <br><br>I think the meshes that are loaded are offset somehow but looking through the code i can;t put my finger on it. even if i reverse coordinates it's still off by half the amount. <br><br>In the screenshot below the Left view is my editor viewport with an In-Game cam view showing where the camera is positioned and pointed, the view on the right is the same scene in monkey minib3d but the camera is in a totally different spot. Even though the positions and rotations are the same, which leads me to believe the mesh is the entity that is offset somehow.<br><br><img src="https://fbcdn-sphotos-b-a.akamaihd.net/hphotos-ak-ash4/t1/1507187_209573655908349_964575121_n.png"> <br><br></td></tr></table><br>
<a name="2078995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nevermind... I uh herped so hard i derped.. i set collisions before positioning.....<br><br><img src="http://d2tq98mqfjyz2l.cloudfront.net/image_cache/132004368377838.jpg"> <br><br></td></tr></table><br>
<a name="2079166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> yes absolutely, if you're willing to zlib/mit your code. otherwise i am planning to write these shaders. <br></div><br><br>Yah, most of the code I've used is a combination of things I've found in books and online with a minor personal touch. <br><br>Does monkey miniB3D already have support for post-processing shaders? Using one FBO as an uniform for another FBO?<br><br>Also, my shadow mapping isn't omnidirectional, did you plan on have this render to a cubemap? <br><br></td></tr></table><br>
<a name="2079205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barang Greenback</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi<br>im trying to create and edit textures<br>this code works in html5<br><pre class=code>
	Local pix:TPixmap = TPixmap.CreatePixmap(64,64) ''must be powers-of-two
Local x:Int = 20, y:Int=20
Local color:Int = $ff0000ff '' ABGR
For Local x:Int=0 To 15
pix.SetPixel(x,4,Rand(0,255),Rand(0,255),Rand(0,255),255)
Next

''when done
Local tex:TTexture = TTexture.LoadTexture(pix, 1) 'flags 9=1+8=color+mipmapping
</pre><br>but Im only exporting to flash and I want my games to be held in one single file.<br>when I run it in flash, the "tpixmap_flash.monkey" file opens and I get the error "Unable to find overload for _WritePixel(FlashPixmap,Int,Int,Int)."<br>can someone point me in the right direction? <br><br></td></tr></table><br>
<a name="2079211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I get the error "Unable to find overload for _WritePixel(FlashPixmap,Int,Int,Int)." <br></div><br><b>BUG!</b><br>fixed, on github. you only need the file flash11/tpixmap_flash.monkey.<br><br><br><div class="quote"> Does monkey miniB3D already have support for post-processing shaders? Using one FBO as an uniform for another FBO?<br>Also, my shadow mapping isn't omnidirectional, did you plan on have this render to a cubemap? <br></div><br>yes, yes, no on omnidirectional. not worth the overhead and mobile isn't fast enough yet.<br><br>pre/post interface per camera:<br><pre class=code>''
'' standard pre/post per camera
''
Interface IShaderProcess
	
	Method PreProcess:Int(cam:TCamera) ''run before all rendering (ie. clear framebuffer)
	
	Method PostProcess:Int(cam:TCamera) ''run after all rendering (ie. draw framebuffer, blur, etc)
	
End</pre> <br><br></td></tr></table><br>
<a name="2079210"></a>

<a name="2079219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barang Greenback</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont get that error anymore cheers, but I still cant get it to run with"<br>pix.SetPixel(x,4,Rand(0,255),Rand(0,255),Rand(0,255)) <br>"<br>uncommented<br><br>it comes up with "<br> <br>Loading configuration file C:\flex_sdk_4.6\frameworks\flex-config.xml<br>C:\MonkeyPro75d\bananas\zzz\cb.build\flash\MonkeyGame.as(18003): col: 20 Error: Implicit coercion of a value of type void to <br><br>an unrelated type MonkeyGame.as$30:TPixmap.<br><br>		m_pixels=TPixmap.WritePixel(m_pixels,t_x,t_y,t_a&lt;&lt;24|t_r&lt;&lt;16|t_b&lt;&lt;8|t_g);<br>		                 ^<br><br>TRANS FAILED: Error executing 'mxmlc -static-link-runtime-shared-libraries=true MonkeyGame.as', return code=1<br>Done.<br><br>"<br>in the console<br><br>is this maybe because im using an incompatible version of monkey?<br>im using 75d<br>would 73b or something be better?<br>Thanks for your time <br><br></td></tr></table><br>
<a name="2079230"></a>

<a name="2079231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Error: Implicit coercion of a value of type void <br></div><br>i was being dumb, apologies. this time i fixed it AND tested it.<br>fixed on github. same file. <br><br></td></tr></table><br>
<a name="2079337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barang Greenback</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah!! it worked 1st time with 0.424b<br>its just the same as html5 now.<br>I can work on adding textures instead of vertex colors now<br>Thanks so much. <br><br></td></tr></table><br>
<a name="2079567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thehawk2323</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where can I find documentation on all functions? <br><br></td></tr></table><br>
<a name="2079569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam, <br><br>I think you tangent calculations are a little off - I think you want something more like this - it averages the normals.<br><br><pre class=code>
Local tempTangent:TVector[] = New TVector[no_verts]
		Local tempBinormal:TVector[] = New TVector[no_verts]
		
		For Local x:Int = 0 Until no_verts
			tempTangent[x] = New TVector
			tempBinormal[x] = New TVector
		Next

		For Local i:Int = 0 Until no_tris
		
			'Local tri_no:Int = (i+1)*3
			Local vid0:Int= TriangleVertex(i,0) 'tris[tri_no-1] 
			Local vid1:Int= TriangleVertex(i,1) 'tris[tri_no-2] 
			Local vid2:Int= TriangleVertex(i,2) 'tris[tri_no-3]
			
			Local v0:TVector = TVector.Create(VertexX(vid0),VertexY(vid0),VertexZ(vid0))
			Local v1:TVector = TVector.Create(VertexX(vid1),VertexY(vid1),VertexZ(vid1))
			Local v2:TVector = TVector.Create(VertexX(vid2),VertexY(vid2),VertexZ(vid2))
			
			Local q1:TVector = v1.Subtract(v0)
			Local q2:TVector = v2.Subtract(v0)
			
			Local s1:Float = VertexU(vid1) - VertexU(vid0)
			Local s2:Float = VertexU(vid2) - VertexU(vid0)
			Local t1:Float = VertexV(vid1) - VertexV(vid0)
			Local t2:Float = VertexV(vid2) - VertexV(vid0)
			
			
			Local tangent:TVector = q1.Multiply(t2).Subtract(q2.Multiply(t1))
			tangent.Normalize()
			Local binormal:TVector = q1.Multiply(-s2).Add(q2.Multiply(s1))
			binormal.Normalize()
			
	
			For Local j:Int = 0 To 2
				tempTangent[TriangleVertex(i,j)] =  tempTangent[TriangleVertex(i,j)].Add(tangent)
				tempBinormal[TriangleVertex(i,j)] = tempBinormal[TriangleVertex(i,j)].Add(binormal)
			Next
		
		Next
		
		vert_tang = New Float[vert_col.length]
		
		For Local i:Int = 0 Until no_verts
					
			Local VNormal:TVector = TVector.Create(VertexNX(i),VertexNY(i),VertexNZ(i))

			Local t:TVector = tempTangent[i]
			
			t = t.Subtract(VNormal.Multiply(t.Dot(VNormal)))
			't = t.Subtract(VNormal.Multiply(VNormal.Dot(t)))
			t.Normalize()
			vert_tang[(i*4)] 	= t.x
			vert_tang[(i*4)+1] 	= t.y
			vert_tang[(i*4)+2] 	= t.z

			
			If VNormal.Cross(t).Dot(tempBinormal[i]) &lt; 0.0
				vert_tang[(i*4)+3] = -1.0
			Else
				vert_tang[(i*4)+3] = 1.0
			EndIf
			
		Next
</pre> <br><br></td></tr></table><br>
<a name="2079568"></a>

<a name="2079607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barang Greenback</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Adam, <br>It wasnt apparent at 1st because the 1st textures i made were flesh <br>colored or grey, but when i converted textures with a blue hue they came <br>out with a green hue, the sky and lights were all green.  <br><br>I think blue and green have been swapped with a typo maybe<br><br>I changed setpixel in tpixmap_flash.monkey from <br><br><pre class=code>
Method SetPixel:Void(x:Int,y:Int,r:Int,g:Int,b:Int,a:Int=255)
  _WritePixel(pixels,x,y, (a Shl 24)|(r Shl 16)|(b Shl 8)|g )
End
</pre><br><br>to<br><pre class=code>
Method SetPixel:Void(x:Int,y:Int,r:Int,g:Int,b:Int,a:Int=255)
  _WritePixel(pixels,x,y, (a Shl 24)|(r Shl 16)|(g Shl 8)|b )
End
</pre><br><br>and now It all looks just like html5 now<br>Could you recheck it and update if ness, but i also noticed that you have <br>a comment saying "'' **FLASH BITMAPS TEXTURES ARE BGRA ?? maybe" so im not <br>sure. <br><br></td></tr></table><br>
<a name="2079612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Where can I find documentation on all functions? <br></div><br>here is the blitz3d functions, but doesn't have all the new stuff i have put in:<br><a href="http://blitzmax.com/b3ddocs/command_list_3d_cat.php" target="_blank">http://blitzmax.com/b3ddocs/command_list_3d_cat.php</a><br>Documentation is on my TODO.<br><br><div class="quote"> I think you tangent calculations are a little off - I think you want something more like this - it averages the normals. <br></div><br>probably, it also appears i left myself a note in my original function to average the norms, so i'll test this out.<br><br><div class="quote"> I think blue and green have been swapped with a typo maybe <br></div><br>ok, i'll test it out.<br><br>thanks for the updates everyone! <br><br></td></tr></table><br>
<a name="2079611"></a>

<a name="2080105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> my octree performance so far: ~25ms to parse 24000 sphere meshes out of 150000. (i5 laptop win8)<br>it gets too slow to add objects &gt;200000.<br><br>does this seem right? i thought it would be faster. <br><br></td></tr></table><br>
<a name="2080239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you compared it to a brute-force method to see how it compares? <br><br></td></tr></table><br>
<a name="2080262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#140">[#140]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very cool Adam, did you find this method on Gamasutra? <br><br></td></tr></table><br>
<a name="2080265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#141">[#141]</a></td></tr></table></td></tr><tr ><td class="posttext"> this will be faster than brute-force no matter what, as brute-force has to go through every object. a different "broadphase" would be just to create a user-defined 3d grid for storing objects in it.<br><br>i created the octree myself, although probably would be faster to copy someone else.<br>nonetheless, i found the speed problem was due to my bin capacity initial setting at "8". setting it higher speeds everything up, but still slows down when adding (but not getting) &gt;200,000 objects. i'm shooting for a cool million. hmmm... <br><br></td></tr></table><br>
<a name="2080267"></a>

<a name="2080268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#142">[#142]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was suggesting brute-force for comparison only, a starting point so-to-speak. I use the simple 3D grid in my own program, its good but becomes more inefficient the larger your cull area gets. Octrees shouldn't have this problem I assume? <br><br></td></tr></table><br>
<a name="2080621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#143">[#143]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adam: I have got to the hyperspace section of Star Rogue and I can hyperspace five times before I run out of ram on device. I am running through the entire lists for the game and using object.FreeEntity() to release the meshes and FreeTexture to free textures before creating the new star system, is there a garbage collection problem with minib3d entities or is there something else we need to do? <br><br></td></tr></table><br>
<a name="2080649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#144">[#144]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> is there a garbage collection problem with minib3d entities or is there something else we need to do? <br></div><br>could be some leaks. i know that surfaces are not released, maybe i need a reference counter on them to do a hardware release. pixmaps have a reference counter, i'd have to make sure they are releasing properly too. i'll add it to my TODO list, but for now, when you free a mesh, free the surfaces first. <br><br></td></tr></table><br>
<a name="2080675"></a>

<a name="2080676"></a>

<a name="2080677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#145">[#145]</a></td></tr></table></td></tr><tr ><td class="posttext"> Apart from the non power of 2 is there any other reason that a texture would be automatically resized Adam? I'm getting a kind of moire pattern bad rescale interference on my 1024x1024 PNG textures in-game? <br><br></td></tr></table><br>
<a name="2080674"></a>

<a name="2080692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#146">[#146]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Apart from the non power of 2 is there any other reason that a texture would be automatically resized Adam?  <br></div><br>all textures are resized for mipmapping, but yes, if they are a power-of-two then they are not resized for the first level.<br><br>there are texture functions you can use: texture.ResizeSmooth() and texture.ResizeNoSmooth() for dealing with resizing.<br>texture.Smooth() and texture.NoSmooth() controls mipmapping on/off. <br><br></td></tr></table><br>
<a name="2080719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#147">[#147]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I think it may be the mip mapping rescale, as the moire effect seems a little less pronounced the closer the texture is to the camera. I'll try the different settings. <br><br></td></tr></table><br>
<a name="2080886"></a>

<a name="2080887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#148">[#148]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick Question:<br><br>My tablet is not available to test this but I'm wondering if I export my object to .OBJ, do I need to ensure that the .OBJ file exporter converts all quads to triangles. I seem to remember that GLES 2 has no quad primitive. Does the .OBJ importer take this into account or do I need to take this into consideration while converting my meshes for MB3D importing? <br><br></td></tr></table><br>
<a name="2080898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#149">[#149]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> if I export my object to .OBJ, do I need to ensure that the .OBJ file exporter converts all quads to triangles. <br></div><br>nope, should handle all polys and auto-triangulates on import. the upcoming collada importer does this, too. <br><br></td></tr></table><br>
<a name="2080909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#150">[#150]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's good, thanks Adam. :)<br><br>One thing I noticed is that the associated .MTL file, when Tmodelobj.monkey tries to load it, has not got a path by the time it hits the ParseMTLLib() method, only a file name? So it reports that the MTL file is not found for me(my .OBJ files are within a sub folder. I realise it also adds a .txt ext. BTW ;) ). I tried adding a path to the .OBJ files "mtllib" field but to no avail here. <br><br>Thinking further ahead, will I also need to pre-parse this .MTL file for textures that need to be preloaded too? <br><br></td></tr></table><br>
<a name="2080916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#151">[#151]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So it reports that the MTL file is not found for me <br></div><br>hmmmm. it should be the same. it adds the .txt to the mtl file if it doesn't find the file.<br><b>Oh, BTW</b> i do this all the time, i forget to add "mtl" to the accepted binary files that Monkey copies over. #BINARY_FILES += "*.mtl"<br>maybe you're already doing that.<br><br><div class="quote"> will I also need to pre-parse this .MTL file for textures that need to be preloaded too? <br></div><br>OBJ loader will load textures according to what is in the MTL file. <br><br></td></tr></table><br>
<a name="2080921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#152">[#152]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks again Adam. I'm in bed now but I'll be sure to check the things you mentioned first thing tomorrow. <br><br></td></tr></table><br>
<a name="2080965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#153">[#153]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Apart from the non power of 2 is there any other reason that a texture would be automatically resized Adam? I'm getting a kind of moire pattern bad rescale interference on my 1024x1024 PNG textures in-game?<br> <br></div><br>hey,<br>can you upload the image, wherein the scaling algorithm creates the moiré pattern...? <br><br></td></tr></table><br>
<a name="2080974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#154">[#154]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well TBH, it's not easy, the scaling problem is most evident when a quad is facing the camera and you are actually moving towards it. I'll try and create a checker-board texture to see if it a bit more easy to see in a static shot.<br><br>Some other details.<br><br>I'm applying the texture myself to the mesh after loading, not using B3D or OBJ .Mat auto texture loading.<br>As such I'm applying the mip map flags ect.<br>This affects GLFW but not HTML5<br>Textures are all ^2, 24bit rgb PNGs <br><br></td></tr></table><br>
<a name="2081019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#155">[#155]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems that ONLY the .MTL filename is being passed on, not with the needed path. I added this (**) line to extract the path+filename minus the extension. Then added ".mtl" to create a new .MTL filename based on the .OBJ filename. Its a bit of a fudge but it seems to work. Not fully tested though, as another rendering error in my code is giving me problems now but it seems to find and parse the .MTL file AFAIK.<br><br>("tmodelobj.monkey")<br><pre class=code>	Function LoadMesh:TMesh(url:String, flags:Int=-1)
		
		override_texflags = flags
		
		Local mesh:TMesh = ParseObj(LoadString(url), flags, LoadString(url[ .. - 3] + "mtl")) ' ** Now includes mtllib param **
		
		If mesh = Null Then Print "**File not found " + url ElseIf DEBUG Then Print "TModelObj: " + url
		If mesh Then mesh.name = url
		
		Return mesh
		
	End</pre> <br><br></td></tr></table><br>
<a name="2081012"></a>

<a name="2081024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#156">[#156]</a></td></tr></table></td></tr><tr ><td class="posttext"> that will probably work in most situations, but OBJ files embed the mtl filename in the obj file.<br>it seems i dropped the ball and didn't move the url path to the ParseMTLLIB function, thanks for pointing that out.<br><br><b>fixed tmodelobj.monkey, up on github.</b> <br><br></td></tr></table><br>
<a name="2081023"></a>

<a name="2081025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#157">[#157]</a></td></tr></table></td></tr><tr ><td class="posttext"> NP, thanks for the quick patch. <br><br></td></tr></table><br>
<a name="2081027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#158">[#158]</a></td></tr></table></td></tr><tr ><td class="posttext"> My .OBJ files were still not working but I noticed that the .OBJ file importer was expecting a single space between the OBJ file commands. 3DSMax .OBJ exporter actually varies the amount of spaces between the OBJ file command and params. <br><br>You will notice in my 3DSMax .OBJ file export a vertex has 2 spaces between the command and its params.<br><pre class=code>v  850.205750 -70.137939 637.771790</pre><br>What ParseObj() is expecting all .OBJs to be... 1 space.<br><pre class=code>v 850.205750 -70.137939 637.771790</pre><br>.Which is not strictly part of the .OBJ file format.<br><br>I added this line...<br><pre class=code>While Line.Contains("  "); Line = Line.Replace("  ", " "); Wend ' **(Added to strip space sequences down to a space)**</pre><br><br>This strips any sequences of more than one space down to one, which is the format the importer is expecting. This works across the whole file, including normals, texture coords ect.<br><br>The full function.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">	Function ParseObj:TMesh(s:String, flags:Int=-1, mtllib_string:String = "")
		
		Local stream:TModelObj = New TModelObj
		
		stream.data = s
		stream.length = stream.data.Length()
		
		Local StreamLine:Int=0
		If stream.length =0 
			Return Null 
		Endif
		
		If DEBUG Then Print"" 
		
		Local matlibs:StringMap&lt;TObjMtl&gt; = New StringMap&lt;TObjMtl&gt;
		Local vertexP:TObjVertex[MAXVERTS]
		Local vertexN:TObjNormal[MAXVERTS]
		Local vertexT:TObjTexCoord[MAXVERTS]
		Local faces:TFaceData[MAXVERTS]
		
		Local gname:String = ""
		Local snumber:Int = -1
		Local curmtl:String = ""
		Local Readface:Bool = True
		Local vertsAdded:Bool = False
		Local hasNorms:Int = 0
	
		Local VC:Int = 0
		Local VN:Int = 0
		Local VT:Int = 0
		Local FC:Int = 0
		Local TRI:Int = 0
		Local SC:Int = 0
		
		
		Local mesh:TMesh = TMesh.CreateMesh() 
		Local surface:TSurface 
		Local surfaceCache:Int[] = New Int[255]
		Local mtlCache:String[] = New String[255]
		Local currMtl:TObjMtl
		
		'mesh.name = url
		
		While stream.pos &lt; stream.length 
		
			Local Line:String = stream.ReadLine().Trim()
			
			If Line.Length() &lt; 1 Then Continue
			
			While Line.Contains("  "); Line = Line.Replace("  ", " "); Wend ' **(Added to strip space sequences down to a space)**

			If Line[0] = "#" Then
			
				If DEBUG Then Dprint(".Obj Comment : " + Line) 
				
			Else
				
				Local tag:String = Line[0..9].ToLower()
				
				If tag[0..2]= "o " Then
					mesh.name = Line[2..]
				Endif
				
				If tag[0..2]= "v " Then
					If VC&gt;=vertexP.Length()-1 Then vertexP = vertexP.Resize(vertexP.Length()+MAXVERTS)
					
					vertexP[VC+1] = New TObjVertex
					vertexP[VC+1].GetValues(Line[2..]) 
					VC+=1
				Endif
				
				If tag[0..3] = "vn " Then
					If VN&gt;=vertexN.Length()-1 Then vertexN = vertexN.Resize(vertexN.Length()+MAXVERTS)
				
					vertexN[VN+1] = New TObjNormal
					vertexN[VN+1].GetValues(Line[3..]) 
					VN+=1
					hasNorms = 1
				Endif
				
				If tag[0..3] = "vt " Then
					If VT&gt;=vertexT.Length()-1 Then vertexT = vertexT.Resize(vertexT.Length()+MAXVERTS)
				
					vertexT[VT+1] = New TObjTexCoord
					vertexT[VT+1].GetValues(Line[3..]) 
					VT+=1
				Endif	
				
				If tag[0..2] = "g " Then
					gname = Line[2..].ToLower()

					''g = groups, not supportted currently
				Endif 
				
				If tag[0..2] = "s " Then
					Local tt:String = Line[2..].ToLower()
					If tt&lt;&gt;"off" Then snumber = Int(Line[2..])
					''s = smoothing groups, not supprted
				Endif
				
				If tag[0..7] = "mtllib " Then
				
					If DEBUG Then Print "mtllib"
					
					Local lib:TObjMtl[] = ParseMTLLib(Line[7..], mtllib_string) 
					
					For Local obj:TObjMtl = Eachin lib
						If obj Then matlibs.Set(obj.name , obj) 
					Next
					
				Endif
				
				If tag[0..7] = "usemtl " Then
				
					currMtl = matlibs.Get( Line[7..].Trim() )

					If DEBUG Then Print "--"+Line[7..]
					
					Local mmtrue:Int=0
					Local surfnum:Int=0
					
					If currMtl &lt;&gt; Null
						
						'reuse existing surfaces						
						If currMtl.meshSurface 
							If DEBUG Then  Dprint "--mtlmatch "+currMtl.name

						Else
							If DEBUG Then  Dprint "--mtlnew "

							currMtl.meshSurface = mesh.CreateSurface()
							
							currMtl.meshSurface.PaintSurface(currMtl.brush) 
							If DEBUG Then  Print "--use brush " + currMtl.name
							
							SC+=1
						Endif
						
						surface = currMtl.meshSurface
						
						If Not currMtl.cache Then currMtl.cache = New VertCache(16)
						
						While currMtl.cache.size &lt; VC+1	
							'' increase vertex index cache
							currMtl.cache = New VertCache(currMtl.cache.size+16) ''wipes out old
							
						Wend
						
					Endif
				Endif
				
				If tag[0..2] = "f " Then

					If surface = Null
						''no mtl, assume only one surface, no material lib
						surface = mesh.CreateSurface()
					Endif
					If Not currMtl Then currMtl = New TObjMtl
					currMtl.meshSurface = surface
					
					If surface
						
						''add verts
						'' avoiding index 0 as this is reserved for null						
						
						Local V:TFaceData[] = ParseFaces(Line[2..])
							
							''assume at least 3 verts for a triangle, start at 2(base0)	
							'' also do not use unused verticies
							'' also each surface starts at vert id =0									
							For Local i2:Int = 2 To V.Length() - 1
								
								Local v0:Int = V[0].vi
								Local v1:Int = V[i2-1].vi
								Local v2:Int = V[i2].vi
								Local t:Int =0
										
								t = currMtl.cache.CheckVert(v0, V[0].ti, V[0].ni)

								If t=0
								
									v0 = surface.AddVertex( vertexP[v0].x , vertexP[v0].y ,-vertexP[v0].z)
									'' v0+1 for real index, can't use 0
									currMtl.cache.SetCache( V[0].vi, v0+1, V[0].ti, V[0].ni)
									
								Elseif t=-1
								
									'' different vt and vn, if so, create new vertex, **update cache
									v0 = surface.AddVertex( vertexP[v0].x , vertexP[v0].y ,-vertexP[v0].z)
									currMtl.cache.SetCache( V[0].vi, v0+1, V[0].ti, V[0].ni)
								Else
									''offset base 0
									v0 = t-1
										
								Endif
								
								t = currMtl.cache.CheckVert(v1, V[i2-1].ti, V[i2-1].ni)
								If t=0
								
									v1 = surface.AddVertex( vertexP[v1].x , vertexP[v1].y ,-vertexP[v1].z)
									'' v0+1 for real index, can't use 0
									currMtl.cache.SetCache( V[i2-1].vi, v1+1, V[i2-1].ti, V[i2-1].ni)
									
								Elseif t=-1
								
									'' different vt and vn, if so, create new vertex, **update cache
									v1 = surface.AddVertex( vertexP[v1].x , vertexP[v1].y ,-vertexP[v1].z)
									currMtl.cache.SetCache( V[i2-1].vi, v1+1, V[i2-1].ti, V[i2-1].ni)
								Else
									''offset base 0
									v1 = t-1
										
								Endif
								
								t = currMtl.cache.CheckVert(v2, V[i2].ti, V[i2].ni)
								If t=0
								
									v2 = surface.AddVertex( vertexP[v2].x , vertexP[v2].y ,-vertexP[v2].z)
									'' v0+1 for real index, can't use 0
									currMtl.cache.SetCache( V[i2].vi, v2+1, V[i2].ti, V[i2].ni)
									
								Elseif t=-1
								
									'' different vt and vn, if so, create new vertex, **update cache
									v2 = surface.AddVertex( vertexP[v2].x , vertexP[v2].y ,-vertexP[v2].z)
									currMtl.cache.SetCache( V[i2].vi, v2+1, V[i2].ti, V[i2].ni)
								Else
									''offset base 0
									v2 = t-1
										
								Endif
						

								If vertexN[1] &lt;&gt; Null And V[0].ni &lt;&gt; 0
									surface.VertexNormal  v0 , vertexN[V[0].ni].nx , vertexN[V[0].ni].ny , vertexN[V[0].ni].nz
									surface.VertexNormal  v1 , vertexN[V[i2-1].ni].nx , vertexN[V[i2-1].ni].ny , vertexN[V[i2-1].ni].nz
									surface.VertexNormal  v2 , vertexN[V[i2].ni].nx , vertexN[V[i2].ni].ny , vertexN[V[i2].ni].nz
								Endif
								
								If vertexT[1] &lt;&gt; Null And V[0].ti &lt;&gt; 0
									surface.VertexTexCoords  v0 , vertexT[V[0].ti].u , 1-vertexT[V[0].ti].v
									surface.VertexTexCoords  v1 , vertexT[V[i2-1].ti].u , 1-vertexT[V[i2-1].ti].v
									surface.VertexTexCoords  v2 , vertexT[V[i2].ti].u , 1-vertexT[V[i2].ti].v
		 						Endif
									
								surface.AddTriangle  v0, v2, v1  
								
								TRI+=1
								
								
								
							Next
							
						FC+=1

					Endif
				Endif	
						
			Endif

		Wend
		
		If DEBUG
			Dprint  "VertexCount : " + VC
			Dprint  "NormalsCount : " + VN
			Dprint "TexCoordsCount : " + VT
			Dprint "Faces : " + FC + " Tris : "+TRI
			Dprint "Surfs : " + SC
			Dprint "Surfs real : " + CountSurfaces(mesh) 
			
			For Local V:TObjMtl = Eachin matlibs.Values()
				Dprint "Mtl names:"+ V.name
			Next
			
			For Local sf:TSurface = Eachin mesh.surf_list
				Print "real no_verts "+sf.no_verts+" :: no_tris "+sf.no_tris
			Next
			Dprint "--------------------------"
		Endif
	
		

		'FlipMesh Mesh
		
		stream.data = ""
		
		''clean up buffers
		For Local surfx:TSurface = Eachin mesh.surf_list
			surfx.CropSurfaceBuffers()
		Next
		
		If Not hasNorms
			If DEBUG Then Dprint "UpdateNormals()"
			mesh.UpdateNormals() ''create norms if none
		Endif
		
		Return mesh
		
	End 
	</textarea><br><br>This should probably be added to ParseMTLLib() too. <br><br></td></tr></table><br>
<a name="2081026"></a>

<a name="2081035"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#159">[#159]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 3DSMax .OBJ exporter actually varies the amount of spaces between the OBJ file command and params. <br></div><br>ok. sorry about that, that importer is from ancient code, i'll fix that part. most of it should work, since Trim() should remove most whitespace. <br><br></td></tr></table><br>
<a name="2081036"></a>

<a name="2081037"></a>

<a name="2081038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#160">[#160]</a></td></tr></table></td></tr><tr ><td class="posttext"> NP Adam, on a related note, how is your Collada importer shaping up?<br><br>Edit: I've just notice that by the time the filename of a material gets to the ParseMTLLIB function, "map_kd ", LoadTexture() it's lost it's path too. So it won't be read in either. <br><br></td></tr></table><br>
<a name="2081039"></a>

<a name="2081040"></a>

<a name="2081041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#161">[#161]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> NP Adam, on a related note, how is your Collada importer shaping up? <br></div><br>collada took a backseat to the octree. i finally got over a major bug with it, so frustum culling works with the octree now.<br><br><div class="quote"> LoadTexture() it's lost it's path too. <br></div><br>did you try my version? i thought i covered that, but i could be wrong.<br><a href="https://github.com/adamredwoods/minib3d-monkey/commit/9dc46db8b1d2f6d32bf94431d9ae13608d76588d" target="_blank">https://github.com/adamredwoods/minib3d-monkey/commit/9dc46db8b1d2f6d32bf94431d9ae13608d76588d</a> <br><br></td></tr></table><br>
<a name="2081043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#162">[#162]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really looking forward to trying your Octree culling Adam, so Im not complaining. ;)<br><br>Nope, I was just patching as I was going along, I grab it tomorrow. <br><br></td></tr></table><br>
<a name="2081106"></a>

<a name="2081107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#163">[#163]</a></td></tr></table></td></tr><tr ><td class="posttext"> octree visualized:<br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/octree_visualized_zpsf2f97cd7.jpg"><br>this is using octrees based on volume size (the full cull sphere of a mesh). it puts the mesh in the smallest level that matches it's size. other octrees are quantity-based, which i tried, but add/delete was very slow.<br><br>the physics module i have been porting (cannonjs) can use this as well. <br><br></td></tr></table><br>
<a name="2081386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#164">[#164]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lookin good! This could make more complex open levels much more feasible on MB3D. Cannonjs should be the icing on the cake for too! :D<br><br>I've spent tonight re-coding the OBJ file importers parsing and some debugging too. Its now a lot closer to the .OBJ file format spec, also its quite a bit more robust when reading in from various .OBJ messy exporters. There is no longer a dependency for a command to be at a certain character position within the line. A line can contain any amount of spaces and also deals with TAB characters too. The parsing is now done on a per-field basis, not character. The material texture loader was not forming the correct filename, as a material can include a separate relative path. The brush textures now load in correctly as a result. A few optimisation were made to the various .GetValues methods too. A couple of other small bugs were squished. There's too many changes to list, perhaps a DIFF comparison would help.<br><br>One problem remains though, the "usemtl" command is broken, its not applying the brush correctly? I wonder if you could have a quick look Adam?(FIXED: See not below)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Import minib3d

Alias LoadString = app.LoadString

''--NOTES:
'' - obj does not need to be triangles, can handle polys
'' large polys (&gt;4) may be triangulated poorly though...
'' - combines reused surfaces
'' - if vertexcache has different tex or norm index, then create a new vertex (ie. vertex with multiple tex or normal coords)

'' could try to use a flag materials to vertex colors


Class TModelObj

'#If MINIB3D_DEBUG_MODEL=1
	Const DEBUG:Int =1
'#else
'	Const DEBUG:Int = 0
'#Endif
	
	Const MAXVERTS:Int = 1024 ''auto-increment as needed
	
	Field pos:Int=0
	Field data:String
	Field length:Int
	Field stack:StringStack = New StringStack	
	
	Global override_texflags:Int = -1
	Global url_path$
	
	Private
		
	Method ReadLine:String()
		Local s:String=""
		
		stack.Clear()
		
		While Not (data[pos] = 10 Or data[pos] = 13) ''~n ~r
		
			If pos &lt; data.Length()
				
				If data[pos]&gt;0
					stack.Push(String.FromChar(data[pos]))
				Endif
				
				pos += 1
				
			Else
				Exit
			Endif
		Wend
		
		pos += 1 ''get past the newline
		If pos &lt; data.Length()
			''check for cr+lf
			If (data[pos] = 10 Or data[pos] = 13) Then pos +=1
		Endif
		
		Return stack.Join("")
	End
	
	
	Function GetPath$(url$)
		
		Local i:Int = url.Length()-1
		
		If i&lt;1 Then Return ""
		
		While (i&gt;-1 And (url[i] &lt;&gt; 47 And url[i]&lt;&gt;92) )
			i=i-1
		Wend

		Return url[..i+1]
		
	End
	
	
	Public
	
	
	
	
	Function LoadMesh:TMesh(url:String, flags:Int=-1)
		
		override_texflags = flags
		
		url_path = GetPath ( url )
		
		Local mesh:TMesh = ParseObj(LoadString(url), flags)
		
		If mesh = Null Then Print "**File not found "+url Elseif DEBUG Then Print"TModelObj: "+url
		If mesh Then mesh.name = url
		Return mesh
		
	End
	
	Function LoadMeshString:TMesh(data:String, mtllib:String="", flags:Int=-1)
		
		override_texflags = flags
		
		Local mesh:TMesh = ParseObj(data, flags, mtllib)
		
		If mesh = Null Then Print "**Error: bad OBJ string " Elseif DEBUG Then Print"TModelObj"
		If mesh Then mesh.name = "ModelOBJ"
		
		Return mesh
		
	End
	
	Function ParseObj:TMesh(s:String, flags:Int=-1, mtllib_string:String = "")
		
		Local stream:TModelObj = New TModelObj
		
		stream.data = s
		stream.length = stream.data.Length()
		
		Local StreamLine:Int=0
		If stream.length =0 
			Return Null 
		Endif
		
		If DEBUG Then Print"" 
		
		Local matlibs:StringMap&lt;TObjMtl&gt; = New StringMap&lt;TObjMtl&gt;
		Local vertexP:TObjVertex[MAXVERTS]
		Local vertexN:TObjNormal[MAXVERTS]
		Local vertexT:TObjTexCoord[MAXVERTS]
		Local faces:TFaceData[MAXVERTS]
		
		Local gname:String = ""
		Local snumber:Int = -1
		Local curmtl:String = ""
		Local Readface:Bool = True
		Local vertsAdded:Bool = False
		Local hasNorms:Int = 0
	
		Local VC:Int = 0
		Local VN:Int = 0
		Local VT:Int = 0
		Local FC:Int = 0
		Local TRI:Int = 0
		Local SC:Int = 0
		
		
		Local mesh:TMesh = TMesh.CreateMesh() 
		Local surface:TSurface 
		Local surfaceCache:Int[] = New Int[255]
		Local mtlCache:String[] = New String[255]
		Local currMtl:TObjMtl
		
		'mesh.name = url
		
		While stream.pos &lt; stream.length 
		
			Local Line:String = stream.ReadLine().Trim()

			Line = Line.Replace("~t", " ")
			While Line.Contains("  "); Line = Line.Replace("  ", " "); Wend
			Line = Line.Trim()

			If Not Line Continue

			Local text:= Line.Split(" ")
			
			Select text[0].ToUpper()
			
				Case "#"
					If DEBUG Then Dprint(".Obj Comment : " + Line)
				Case "O"
					mesh.name = text[1]
				
				Case "V"
					If VC&gt;=vertexP.Length()-1 Then vertexP = vertexP.Resize(vertexP.Length()+MAXVERTS)
					vertexP[VC+1] = New TObjVertex
					vertexP[VC + 1].GetValues(float(text[1]), float(text[2]), float(text[3]))
					VC+=1
				
				Case "VN"
					If VN&gt;=vertexN.Length()-1 Then vertexN = vertexN.Resize(vertexN.Length()+MAXVERTS)
					vertexN[VN+1] = New TObjNormal
					vertexN[VN + 1].GetValues(float(text[1]), float(text[2]), float(text[3]))
					VN+=1
					hasNorms = 1
				
				Case "VT"
					If VT&gt;=vertexT.Length()-1 Then vertexT = vertexT.Resize(vertexT.Length()+MAXVERTS)
					vertexT[VT+1] = New TObjTexCoord
					vertexT[VT + 1].GetValues(float(text[1]), float(text[2]))
					VT+=1
				
				Case "G"
					gname = text[1].ToLower
					''g = groups, not supportted currently
				
				Case "S"
					If text[1].ToLower &lt;&gt; "off" Then snumber = Int(text[1])
					''s = smoothing groups, not supprted
				
				Case "MTLLIB"
				
					If DEBUG Then Print "mtllib = (~q" + url_path + text[1] + "~q)"
					
					Local lib:TObjMtl[] = ParseMTLLib(url_path + text[1], mtllib_string)
					For Local obj:TObjMtl = EachIn lib
						If obj Then matlibs.Set(obj.name, obj)
					Next
				
				Case "USEMTL"
				
					currMtl = matlibs.Get(text[1])

					If DEBUG Then Print "--" + text[1]
					
					Local mmtrue:Int=0
					Local surfnum:Int=0
					
					If currMtl &lt;&gt; Null
						
						'reuse existing surfaces						
						If currMtl.meshSurface 
							If DEBUG Then  Dprint "--mtlmatch "+currMtl.name

						Else
							If DEBUG Then  Dprint "--mtlnew "

							currMtl.meshSurface = mesh.CreateSurface()
							currMtl.meshSurface.PaintSurface(currMtl.brush)
							If DEBUG Then  Print "--use brush " + currMtl.name
							
							SC+=1
						Endif
						
						surface = currMtl.meshSurface
						If Not currMtl.cache Then currMtl.cache = New VertCache(16)
						
						While currMtl.cache.size &lt; VC+1	
							'' increase vertex index cache
							currMtl.cache = New VertCache(currMtl.cache.size+16) ''wipes out old
							
						Wend
						
					Endif
				
				Case "F"

					If surface = Null
						''no mtl, assume only one surface, no material lib
						surface = mesh.CreateSurface()
					EndIf
					If Not currMtl Then currMtl = New TObjMtl
					currMtl.meshSurface = surface
					
					If surface
						
						''add verts
						'' avoiding index 0 as this is reserved for null						
						
						Local V:TFaceData[] = ParseFaces(text[1 ..])
							
							''assume at least 3 verts for a triangle, start at 2(base0)	
							'' also do not use unused verticies
							'' also each surface starts at vert id =0									
							For Local i2:Int = 2 To V.Length() - 1
								
								Local v0:Int = V[0].vi
								Local v1:Int = V[i2-1].vi
								Local v2:Int = V[i2].vi
								Local t:Int =0
										
								t = currMtl.cache.CheckVert(v0, V[0].ti, V[0].ni)

								If t=0
								
									v0 = surface.AddVertex( vertexP[v0].x , vertexP[v0].y ,-vertexP[v0].z)
									'' v0+1 for real index, can't use 0
									currMtl.cache.SetCache( V[0].vi, v0+1, V[0].ti, V[0].ni)
									
								Elseif t=-1
								
									'' different vt and vn, if so, create new vertex, **update cache
									v0 = surface.AddVertex( vertexP[v0].x , vertexP[v0].y ,-vertexP[v0].z)
									currMtl.cache.SetCache( V[0].vi, v0+1, V[0].ti, V[0].ni)
								Else
									''offset base 0
									v0 = t-1
										
								Endif
								
								t = currMtl.cache.CheckVert(v1, V[i2-1].ti, V[i2-1].ni)
								If t=0
								
									v1 = surface.AddVertex( vertexP[v1].x , vertexP[v1].y ,-vertexP[v1].z)
									'' v0+1 for real index, can't use 0
									currMtl.cache.SetCache( V[i2-1].vi, v1+1, V[i2-1].ti, V[i2-1].ni)
									
								Elseif t=-1
								
									'' different vt and vn, if so, create new vertex, **update cache
									v1 = surface.AddVertex( vertexP[v1].x , vertexP[v1].y ,-vertexP[v1].z)
									currMtl.cache.SetCache( V[i2-1].vi, v1+1, V[i2-1].ti, V[i2-1].ni)
								Else
									''offset base 0
									v1 = t-1
										
								Endif
								
								t = currMtl.cache.CheckVert(v2, V[i2].ti, V[i2].ni)
								If t=0
								
									v2 = surface.AddVertex( vertexP[v2].x , vertexP[v2].y ,-vertexP[v2].z)
									'' v0+1 for real index, can't use 0
									currMtl.cache.SetCache( V[i2].vi, v2+1, V[i2].ti, V[i2].ni)
									
								Elseif t=-1
								
									'' different vt and vn, if so, create new vertex, **update cache
									v2 = surface.AddVertex( vertexP[v2].x , vertexP[v2].y ,-vertexP[v2].z)
									currMtl.cache.SetCache( V[i2].vi, v2+1, V[i2].ti, V[i2].ni)
								Else
									''offset base 0
									v2 = t-1
										
								Endif
						

								If vertexN[1] &lt;&gt; Null And V[0].ni &lt;&gt; 0
									surface.VertexNormal  v0 , vertexN[V[0].ni].nx , vertexN[V[0].ni].ny , vertexN[V[0].ni].nz
									surface.VertexNormal  v1 , vertexN[V[i2-1].ni].nx , vertexN[V[i2-1].ni].ny , vertexN[V[i2-1].ni].nz
									surface.VertexNormal  v2 , vertexN[V[i2].ni].nx , vertexN[V[i2].ni].ny , vertexN[V[i2].ni].nz
								Endif
								
								If vertexT[1] &lt;&gt; Null And V[0].ti &lt;&gt; 0
									surface.VertexTexCoords  v0 , vertexT[V[0].ti].u , 1-vertexT[V[0].ti].v
									surface.VertexTexCoords  v1 , vertexT[V[i2-1].ti].u , 1-vertexT[V[i2-1].ti].v
									surface.VertexTexCoords  v2 , vertexT[V[i2].ti].u , 1-vertexT[V[i2].ti].v
		 						Endif
									
								surface.AddTriangle  v0, v2, v1  
								
								TRI+=1							
								
							Next
							
						FC+=1

					Endif

				End
		Wend
		
		If DEBUG
			Dprint  "VertexCount : " + VC
			Dprint  "NormalsCount : " + VN
			Dprint "TexCoordsCount : " + VT
			Dprint "Faces : " + FC + " Tris : "+TRI
			Dprint "Surfs : " + SC
			Dprint "Surfs real : " + CountSurfaces(mesh) 
			
			For Local V:TObjMtl = Eachin matlibs.Values()
				Dprint "Mtl names:"+ V.name
			Next
			
			For Local sf:TSurface = Eachin mesh.surf_list
				Print "real no_verts "+sf.no_verts+" :: no_tris "+sf.no_tris
			Next
			Dprint "--------------------------"
		Endif
	
		

		'FlipMesh Mesh
		
		stream.data = ""
		
		''clean up buffers
		For Local surfx:TSurface = Eachin mesh.surf_list
			surfx.CropSurfaceBuffers()
		Next
		
		If Not hasNorms
			If DEBUG Then Dprint "UpdateNormals()"
			mesh.UpdateNormals() ''create norms if none
		Endif
		
		Return mesh
		
	End 
	
	
	Function ParseFaces:TFaceData[] (data1:String[])
		

		Local s:Int = 0
		Local fdata:TFaceData[data1.Length() ]
		
		For Local i:Int = 0 To data1.Length() -1 's to data1
			
			If data1[i]="" Then Continue
			
			fdata[s] = New TFaceData
			Local D2:String[] = CustomSplit( data1[i], "/" ) 
			
			'If DEBUG Then Dprint " "+D2[0] +"/ "+D2[1]+"/ "+D2[2]
			
			If D2[0]&lt;&gt;"" Then fdata[s].vi = Int(D2[0])
			If D2[1]&lt;&gt;"" Then fdata[s].ti = Int(D2[1])
			If D2[2]&lt;&gt;"" Then fdata[s].ni = Int(D2[2])
	
			If fdata[s].vi &lt;0 Then  fdata[s].vi=0
			If fdata[s].ti &lt;0 Then  fdata[s].ti=0
			If fdata[s].ni &lt;0 Then  fdata[s].ni=0
			
			s+=1
			
		Next
		
		fdata = fdata.Resize(s)
		
		Return fdata
		
	End 
	
	Function CustomSplit:String[](st:String, delim:String)
	
		''handles n/n/n as 3 numbers even when n//n
		Local out:String[] = New String[3]
		
		If st.Length() &lt; 1 Then Return [""]
		
		Local n:Int=0, nn:Int=0
		Local reset:Int=1
		Local s:String
		
		For Local i:Int = 0 To st.Length() -1
			If reset
				out[n] = "0"
				reset = 0
			Endif
			If st[i] = delim[0]
				Local ii:Int = i+nn
				s = st[i..ii]
				'out[n] = s
				
				n+=1
				reset=1
				nn=0
				
			Else
				out[n] += String.FromChar(st[i])
				nn+=1
			Endif
		Next
		'Print nn
		Return out
		
	End


	Function ParseMTLLib:TObjMtl[](url:String, mtllib_string:String)
		
		Local MatLib:TObjMtl[0]
		Local stream:TModelObj = New TModelObj
		
		stream.data = LoadString(url) 
		
		''see if we have a string
		If Not stream.data And mtllib_string Then stream.data = mtllib_string
		
		If Not stream.data 
			stream.data = LoadString(url+".txt")

			If Not stream.data

				Print "**TModelObj: Material obj file not found: " + url
				Return MatLib
			Endif
		Endif
		
		stream.length = stream.data.Length()
		
		Local CMI:Int = -1
		Local is_brush:Int =0
		
		While stream.pos &lt; stream.length
		
			Local Line:String = stream.ReadLine() 

			Line = Line.Replace("~t", " ")
			While Line.Contains("  "); Line = Line.Replace("  ", " "); Wend
			Line = Line.Trim()

			If Not Line Continue

			Local text:= Line.Split(" ")
			
			Select text[0].ToUpper()
			
				'Remark
				Case "#"
				
				'Create new brush
				Case "NEWMTL"
					MatLib = MatLib.Resize(MatLib.Length() +1)
					CMI = MatLib.Length() -1
					
					MatLib[CMI] = New TObjMtl
					MatLib[CMI].name = text[1]
					MatLib[CMI].brush = CreateBrush() 
					MatLib[CMI].brush.BrushFX 0 ''default, used to be 4+16
					MatLib[CMI].brush.name = MatLib[CMI].name
					is_brush = 1
					
					If DEBUG Then Dprint("Matname : " + MatLib[CMI].name)
				
				'Colours
				Case "KD"
					If is_brush
						MatLib[CMI].brush.BrushColorFloat(float(text[1]), float(text[2]), float(text[3]))
						If DEBUG Then Dprint("MatColor : " + (float(text[1]) * 255) + "," + (float(text[2]) * 255) + "," + (float(text[3]) * 255))
					Endif
				
				Case "D"
					If is_brush
						MatLib[CMI].brush.BrushAlpha(Float(text[1]))
						If DEBUG Then Dprint("MatAlpha ~qD~q: " + Float(text[1]))
					EndIf
				
				Case "TR"
					If is_brush
						MatLib[CMI].brush.BrushAlpha(Float(text[1]))
						If DEBUG Then Dprint("MatAlpha ~qTR~q: " + Float(text[1]))
					EndIf
				
				Case "MAP_KD"
				If is_brush

' Still needed?
'					Local texfile:String[] = Line.Split("\") ''blender fix
'					If texfile.Length() &lt; 2 Then texfile = Line.Split("/") ''blender fix
'					texfile[0] = texfile[texfile.Length()-1] ''get rid of any prior folders (blender fix)

					'note: 	Map_kd files can have a full relative path, so stripping off to the filename, as above, 
					'		removes sub-folder allocation, this is why I use the full map_kd path here.  
					'		Absolute paths are not used by monkey, so the user needs
					'		to ensure any paths here are relative to url_path, a map_kd of "maps/texture.png" for example can become
					' 		"monkey://data/obj/maps/texture.png" for example(url_path was "monkey://data/obj/")

					'[7..] to include paths with spaces.
					Local mapFile:String = url_path + Line[7 ..].Replace("\", "/")
					Local flags:Int = TTexture.default_texflags
					If override_texflags &gt; - 1 Then flags = override_texflags
					
					If DEBUG Then Dprint("LOADTexture : " + mapFile)
					MatLib[CMI].texture = LoadTexture(mapFile, flags)
					
					If MatLib[CMI].texture.TextureHeight() &gt; 1
						MatLib[CMI].brush.BrushTexture(MatLib[CMI].texture)
						If DEBUG Then Dprint("MatTexture : " + mapFile)
					Else
						If DEBUG Then Print "**TModelObj: ~q" + mapFile + "~q texture file not found"
					Endif
				Endif
			End
		Wend
		
		Return MatLib
	End
	
End

	
Class TFaceData

	Field vi:Int
	Field ti:Int
	Field ni:Int
	Field its:Int
	
End 


		
	
Class TObjNormal
	Field nx# , ny# , nz#
	
	Method GetValues(f0:Float, f1:Float, f2:Float)
		nx = f0; ny = f1; nz = f2
	End Method
End 

Class TObjTexCoord
	Field u# , v#
	
	Method GetValues(f0:Float, f1:Float)
		u = f0; v = f1
	End Method
	
End

Class TObjVertex
	Field x# , y# , z#
	
	Method GetValues(f0:Float, f1:Float, f2:Float)
		x = f0; y = f1; z = f2
	End Method
End

Class TObjMtl

	Field name:String
	Field brush:TBrush
	Field texture:TTexture

	Field meshSurface:TSurface
	
	Field cache:VertCache
	
	Method New()
		cache = New VertCache(1)
	End
End
	
Class VertCache
	
	Field size:Int =1
	Field realvertindex:Int[1] ''cache vert address when created
	Field texusedindex:Int[1] ''cache vert to tex coord index
	Field normusedindex:Int[1] ''cache vert to normal index used
	
	Method New( i:Int )
		realvertindex = New Int[i]
		texusedindex = New Int[i]
		normusedindex = New Int[i]
		size = i
	End
	
	'' CheckVert(vert index, texture index, norm index)
	Method CheckVert:Int( i:Int, ti:Int, ni:Int)
		
		If i&gt;size-1 Then Return 0
		
		If Not realvertindex[i] Then Return 0

		''-- check for similar vertex, different vt and vn, if so, create new vertex

		If (texusedindex[i] &lt;&gt; ti And ti&lt;&gt;0) Return -1
		If (normusedindex[i] &lt;&gt; ni And ni&lt;&gt;0) Return -1	
		
		''else return real vertex index
		Return realvertindex[i]
		
	End
	
	Method SetCache(i:Int, reali:Int, ti:Int=0, ni:Int=0)
		''set real vert index
		
		If i&gt;size-1
			realvertindex = realvertindex.Resize(i+1)
			texusedindex = texusedindex.Resize(i+1)
			normusedindex = normusedindex.Resize(i+1)
			size = i+1
		Endif
		
		realvertindex[i] = reali
		texusedindex[i] = ti
		normusedindex[i] = ni
	End
	
End</textarea><br>Updated Comments "#" Parse<br>Fixed paths in MTL file for paths with spaces<br><br>To load a .OBJ file in you need to override the default TTexture flags, as they are set to 1+8. Basically if you dont set the texture flags to have 2(Alpha in texture) in it, you dont see any textures(like alpha is set to 0.0?) or mesh when you load in a texture to a brush with the default flags(1+8). Strangely this only happens if you try and load a .OBJ into a TMesh but if you load it into an TEntity, all is well?!?<br><br>So, setting your LoadMesh to LoadMesh("filename.obj",, 2 + 8) reads in the .OBJ file properly. It now handles a lot more .OBJ files. <br><br></td></tr></table><br>
<a name="2081385"></a>

<a name="2081377"></a>

<a name="2081373"></a>

<a name="2081129"></a>

<a name="2081127"></a>

<a name="2081118"></a>

<a name="2081117"></a>

<a name="2081340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#165">[#165]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for the late reply adam is freeing surfaces done via Object.FreeSurface( index ) or is there a free surface( Object, index ) command? <br><br></td></tr></table><br>
<a name="2081351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#166">[#166]</a></td></tr></table></td></tr><tr ><td class="posttext"> mesh.GetSurface(index).FreeSurface() <br><br></td></tr></table><br>
<a name="2081384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#167">[#167]</a></td></tr></table></td></tr><tr ><td class="posttext"> BUG: CopyMesh() does not seem to copy the surfaces of the source mesh ("mesh.surf_list = new_list", maybe "mesh.surf_list = self.surf_list"?), copy a mesh and you loose surfaces.<br><br>I found why I had trouble with textures BTW.<br><br>Can you test the .OBJ importer above Adam, I think it should handle a lot more .OBJ+.MTL files now. <br><br></td></tr></table><br>
<a name="2081382"></a>

<a name="2081383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#168">[#168]</a></td></tr></table></td></tr><tr ><td class="posttext"> I used the matrix and vector class to rotate an image in 3 dimensions. It's been very useful so thanks for the code! <br><br></td></tr></table><br>
<a name="2081408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#169">[#169]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It's been very useful so thanks for the code! <br></div><br>cool, you're welcome!<br><br><div class="quote"> Can you test the .OBJ importer above Adam, I think it should handle a lot more .OBJ+.MTL files now. <br></div><br>very nicely done! thanks. much more readable, too. i'll add it in.<br><br>one minor bug, there was an infinite lock on the first line of this section. this is what i think you meant: <b>EDIT</b>: lol, ok, backslashes don't show up in the code box. need double-backslashes<br><pre class=code>
					Local mapFile:String = url_path + Line[7 ..].Replace("\\", "/")
					Local flags:Int = TTexture.default_texflags
					If override_texflags &gt; - 1 Then flags = override_texflags
				
					If DEBUG Then Dprint("LOADTexture : " + mapFile)
</pre><br><br>..<br>re: CopyMesh()<br>the reason i did that was because CopyBaseMeshTo() overwrites the mesh.surf_list, so i had to write it back. AddMesh() creates new surfaces, so we don't want to use Self.surf_list.<br>i wonder if there's something wrong with the AddMesh().<br>my simple example worked ok here, do you have an example? <br><br></td></tr></table><br>
<a name="2081407"></a>

<a name="2081406"></a>

<a name="2081405"></a>

<a name="2081437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#170">[#170]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yikes! I'll have to remember that when posting anything a backslash in it. Thanks for that.<br><br>I used CopyMesh() to copy a static mesh, the resulting mesh had no textures. I examined the copied mesh and the surface list was Null. I temporarily added the patch that I mentioned above and the textures appeared with the same example. Since this is a full non-pointer only copy, maybe loop through the surfaces and create a new list of copied surfaces instead for CopyMesh()?<br><br>Sorry, it's difficult for me to provide an example as copying meshes, in this instance, is done via my scripting language. <br><br></td></tr></table><br>
<a name="2081487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#171">[#171]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Since this is a full non-pointer only copy, maybe loop through the surfaces and create a new list of copied surfaces instead for CopyMesh() <br></div><br>that is what AddMesh() is doing. need to find out why that isn't working for your specific instance. <br><br></td></tr></table><br>
<a name="2081498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#172">[#172]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll try and whip up a small test program with a model and post it to you Adam. This will probably be sometime tomorrow.<br><br>I'll update my install from the Git repo too, just in case. <br><br></td></tr></table><br>
<a name="2081665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#173">[#173]</a></td></tr></table></td></tr><tr ><td class="posttext"> A quick function to extract the used textures filenames for pre-loading before using an .OBJ.<br><br><pre class=code>
	Function GetTexts:String[] (filename:String)
		Local files:StringStack = New StringStack
		filename = filename.Replace("\\", "/")
		Local path:String = filename[ .. filename.FindLast("/") + 1]
		filename = filename[filename.FindLast("/") + 1 ..]
		#If DEBUG=1
			Print "GetTexts(~q" + path + filename + "~q)"
		#Endif
		For Local line:= EachIn mojo.LoadString(path + filename).Split("~n")
			'Remove Quotes &amp; Tabs &amp; Extra spaces
			line = line.Replace("~q", "").Replace("~t", " ")
			While line.Contains("  "); line = line.Replace("  ", " "); Wend
			line = line.Trim()
			'Remarks
			If Not line Or line.StartsWith("#") Continue
			Local bits:= line.Split(" ")
			Select bits[0].ToUpper()
				Case "MTLLIB"
					#If DEBUG=1
						Print " MTLLIB = ~q" + path + bits[1] + "~q"
					#Endif
					For Local lineMtl:= EachIn mojo.LoadString(path + bits[1]).Split("~n")
						'Remove Quotes &amp; Tabs &amp; Extra spaces
						lineMtl = lineMtl.Replace("~q", "").Replace("~t", " ")
						While lineMtl.Contains("  "); lineMtl = lineMtl.Replace("  ", " "); Wend
						lineMtl = lineMtl.Trim()
						'Remarks
						If Not lineMtl Or lineMtl.StartsWith("#") Continue
						Local bitsMtl:= lineMtl.Split(" ")
						Select bitsMtl[0].ToUpper()
							Case "MAP_KD"
								Local filenameMtl:= lineMtl[7 ..].Replace("\\", "/")
								#If DEBUG=1
									Print " MATERIAL =~q" + path + filenameMtl + "~q"
								#Endif
								files.Push path + filenameMtl
						End
					End
			End
		End
		Return files.ToArray
	End Function
</pre><br><br>I posted that CopyMesh() bug example to your email address BTW too Adam. <br><br></td></tr></table><br>
<a name="2081664"></a>

<a name="2081663"></a>

<a name="2081677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#174">[#174]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you count the surfaces in a mesh I have tried Entity.CountSurface() and CountSurfaces( Entity ) but I get an error saying there is no overload for that function. What is the correct way to run through the surfaces and free them. <br><br></td></tr></table><br>
<a name="2081701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >consty</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#175">[#175]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just download this project from github.<br>How can you install it as a module? <br><br></td></tr></table><br>
<a name="2081715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#176">[#176]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Ed, CountSurfaces() is only available to TMesh, you can cast your Entity to a mesh temporary with "Local SurfCnt:=CountSurfaces(TMesh(Entity))"<br>Clearing it, um, something like... "TMesh(Entity).surf_list.Clear"<br><br>I must say though, I've not used these commands or know if this is the 'official' MB3D way of doing things. :P But it may get you past your impass till Adam gets back to you.<br><br>@const:<br><br>Copy the contents of your Git archive into your installed "modules" modules folder(It's next to where Monkey.exe is located), do not extract to the GitHub folder("minib3d-master" or whatever its called, only miniB3D) name.<br><br>Mines looks like "C:\Coding Folder\Middleware\Monkey Pro\modules\minib3d\"<br>Where "C:\Coding Folder\Middleware\Monkey Pro\" is where I've installed Monkey<br> and "C:\Coding Folder\Middleware\Monkey Pro\modules\" is where I put new modules.<br>  and "C:\Coding Folder\Middleware\Monkey Pro\modules\minib3d\" is where I unpack the MiniB3D Git archive into. There should be plenty of .monkey files in here, BTW if you installed it correctly. <br><br>Add "import minib3d" to the top of your listing and your good to go.<br><br>Edit: Grrr, I had this all tabulated with spaces but the website seems to have removed this simple formatting. <br><br></td></tr></table><br>
<a name="2081714"></a>

<a name="2081713"></a>

<a name="2081712"></a>

<a name="2081711"></a>

<a name="2081721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#177">[#177]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Ed, CountSurfaces() is only available to TMesh, you can cast your Entity to a mesh temporary with "Local SurfCnt:=CountSurfaces(TMesh(Entity))" <br></div><br>yes, an Entity does not have surfaces, only meshes. So a cast would be needed TMesh(myEntity).CountSurfaces(). <br><br></td></tr></table><br>
<a name="2081732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#178">[#178]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah ok will have a look maybe adding a count surface command to entity would be in order iirc minib3d on max allowed it:) <br><br></td></tr></table><br>
<a name="2081742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#179">[#179]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, easy enough to do (slated for v0.43) TEntity.monkey:<br><pre class=code>
Method CountSurfaces:int()	
	Return 0
End 
</pre><br><br>Re:Sammy Obj texture preloader<br><div class="quote"> A quick function to extract the used textures filenames for pre-loading before using an .OBJ. <br></div><br>this is interesting, because a question would be: is it up the coder to PreLoad() all of their textures, including ones assigned to the models, or do we automatically load them? i guess we can auto-preload them since the loaders will be looking for them anyways. i should make note of this for B3D and collada. <br><br></td></tr></table><br>
<a name="2081741"></a>

<a name="2081738"></a>

<a name="2081739"></a>

<a name="2081740"></a>

<a name="2081734"></a>

<a name="2081735"></a>

<a name="2081736"></a>

<a name="2081752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#180">[#180]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adding the casting from TEntity to TMesh seems to yeild VC++ COFF program crashing here on Windows. I get a "COFF has stopped responding" error and Vista closes it down. Removing the casting (remarking the lines out) the program compiles correctly.<br><br>What im doing is:<br><pre class=code>
Function EdzUpFreeEntity( Mesh:TEntity )
	Local EFE:Int
	
	For EFE =0 To TMesh( Mesh ).CountSurfaces( )
		TMesh( Mesh ).GetSurface( EFE ).FreeSurface()
	Next
End
</pre> <br><br></td></tr></table><br>
<a name="2081757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#181">[#181]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that should be "For EFE = 0 Until TMesh("... not sure if your function above is going to cover you for child entities though Ed.<br><br>@Adam: Ideally yes, pre loading of textures should automatic, also, I'm not really happy with parsing a model file twice, once for preloading the textures, then again later for the vertices etc. I suppose the OBJ file importer could do both at once though with a little alteration that is and then call the OBJ importing before the texture preload call has been executed. Resulting in the mesh data structure and also an array of texture file names.<br><br>I will have to use the manual method for now though as I'm pushed for time on this section of my code by my GFX guy.<br><br>TBH I dislike the current preload methodology, logically it still feels like you loading a texture twice even though your not, also there is no exposed API call to check if a specific texture is actually in memory. It's wait for all or nothing AFAK. I would prefer that you are able to load a texture in from LoadTexture as normal, it is then queued asynchronously to be loaded. Each texture could have a "hasLoaded" bool which can be checked by the coder to say if it's safe to use. Having the option to wait for an essential texture before continuing would then be up to the coder. This is just a suggestion though. <br><br></td></tr></table><br>
<a name="2081756"></a>

<a name="2081754"></a>

<a name="2081755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >consty</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#182">[#182]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Sammy, it worked. :) <br><br></td></tr></table><br>
<a name="2081758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#183">[#183]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your welcome Const. :) <br><br></td></tr></table><br>
<a name="2081770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#184">[#184]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I would prefer that you are able to load a texture in from LoadTexture as normal, it is then queued asynchronously to be loaded. Each texture could have a "hasLoaded" bool which can be checked by the coder to say if it's safe to use. Having the option to wait for an essential texture before continuing would then be up to the coder. This is just a suggestion though. <br></div><br>the problem i ran into with that idea, was that on flash and html5, someone may try to modify a texture (GetPixel) before it's done loading on asynchronous targets, and i cannot lock program execution. the best i can think of right now, is to add GetTexture("filename")/GetPixmap("filename") and that would return null if not done loading or the object once loaded... perhaps this way the API may make more sense.<br><br>Another thought is that EVERY loader could be asynchronous, and throw an assertion error if data to a texture or model is accessed before it is done loading. may take more time to implement.<br><br>There is a TPixmap.IsLoaded("filename") bool. <br><br></td></tr></table><br>
<a name="2081791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#185">[#185]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Sammy will try that :)<br><br>EDIT:Well it compiles not but I still have the same memory issues that I had in the beginning. <br><br></td></tr></table><br>
<a name="2081776"></a>

<a name="2081798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#186">[#186]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Octree update:</b> This is the best I can do with 2000 objects floating around. use the WASD keys to move around, arrow keys to rotate around. press 1 and 2 to switch between rendering via list or via octree.<br>The difference is minimal, but the octree is much slower on android. Should also keep in mind for this simple example, there is no texture switching, and the vertex buffers are mostly the same. The octree could also be useful for object occlusion if I can think of a way, but for now it's used for rendering and soon collisions.<br><br><a href="http://www.twopisoftware.com/monkeycoder/octree/test.html" target="_blank">http://www.twopisoftware.com/monkeycoder/octree/test.html</a><br>(this link will be taken down after a couple weeks)<br><br>i'm using loose octrees, btw:<br><a href="http://tog.acm.org/resources/RTNews/html/rtnv14n1.html#art4" target="_blank">http://tog.acm.org/resources/RTNews/html/rtnv14n1.html#art4</a> <br><br></td></tr></table><br>
<a name="2081797"></a>

<a name="2081793"></a>

<a name="2081794"></a>

<a name="2081799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#187">[#187]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> EDIT:Well it compiles not but I still have the same memory issues that I had in the beginning. <br></div><br>are you freeing the mesh after the surfaces? <br><pre class=code>
Function EdzUpFreeEntity( Mesh:TEntity )
	Local EFE:Int
	
	For EFE =0 To TMesh( Mesh ).CountSurfaces( )
		TMesh( Mesh ).GetSurface( EFE ).FreeSurface()
	Next
	Mesh.FreeEntity()
End
</pre><br>if so, you can try to run your program on HTML5 target on chrome, and do control-shft-j and do a profile for the heap to see what's taking up all the memory. <br><br></td></tr></table><br>
<a name="2081796"></a>

<a name="2081817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#188">[#188]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think when i replaced the freeentity command i forgot to add it to my function Doh!!<br><br>my game doesn't like HTML5 though which is a shame as it would be a brilliant platform to demo on :)<br><br>for what its worth my game when coded using Unity also crashes the webplayer lol. Must be all the procedurally generated textures :) <br><br></td></tr></table><br>
<a name="2081814"></a>

<a name="2081848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#189">[#189]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right with the free entity in there I can hyperspace 7 times before it out of memory errors.<br><br>@adam: is there any of the other Free... Commands that aren't actually in there, I'm using FreeTexture etc. With commands like LoadSprite will FreeEntity kill of the loaded texture as well or does that have to be got rid of manually and if so how can we go about it? <br><br></td></tr></table><br>
<a name="2081839"></a>

<a name="2081837"></a>

<a name="2081921"></a>

<a name="2081924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#190">[#190]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam: The difference for me is minimal too (5-6ms on Octree, 6-12ms on Windows HMTL 5). I did like how the Octree seemed to have a pretty steady ms count though, as opposed to the master list that was all over the place. It should be easier to control lag spikes with the Octree in place.<br><br>Over all though very impressive Adam, well done! :)<br><br><div class="quote"> the problem i ran into with that idea, was that on flash and html5, someone may try to modify a texture (GetPixel) before it's done loading on asynchronous targets, and i cannot lock program execution. the best i can think of right now, is to add GetTexture("filename")/GetPixmap("filename") and that would return null if not done loading or the object once loaded... perhaps this way the API may make more sense.<br><br>Another thought is that EVERY loader could be asynchronous, and throw an assertion error if data to a texture or model is accessed before it is done loading. may take more time to implement.<br><br>There is a TPixmap.IsLoaded("filename") bool. <br></div><br>All of the above options give me more control Adam so I would be happy with any of these additions TBH. <br><br></td></tr></table><br>
<a name="2081979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#191">[#191]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was considering using multi-texturing for some simple level decals but I realise some platforms have problems with this but I can't find the post(the new forum search is pretty bad), what are the things I have to be aware of? Is there a better method for decals in general? <br><br></td></tr></table><br>
<a name="2081978"></a>

<a name="2082044"></a>

<a name="2082045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#192">[#192]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I was considering using multi-texturing for some simple level decals but I realise some platforms have problems <br></div><br>AFAIK, the only problem was: XNA = 1 texture, opengl2.0, flash, html5 = 4 textures. i can increase the opengl2.0 if it's needed, i could create an on-demand compilation for &gt;4 textures.<br><br>OFF-TOPIC:<br>updated a bug when using CopyEntity() for meshes with bones. (github) <br><br></td></tr></table><br>
<a name="2082031"></a>

<a name="2082029"></a>

<a name="2082030"></a>

<a name="2082113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#193">[#193]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, thanks for that Adam, that's quite surprising that XNA can only handle 1 texture. 4 should be fine for me otherwise, it's mainly for single items, like signs for example.<br><br>Also, thanks for the CopyEntity() fix, I'll take a peek after a post this thread. <br><br></td></tr></table><br>
<a name="2082207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dip</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#194">[#194]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just started playing with minib3d, coming from a blitz3d then blitzmax background. I'm excited to start putting it in my game that was previously using a software 3d renderer, but I'm running into a roadblock. I have some 2d screens (menu, help, etc) that I want to be able to display after I switch to '3d mode' and I can't seem to figure out how to make it work. I'm not talking about a 2d overlay on top of the 3d scene, as I know that could be complicated under the hood. I just want to be able to 'switch out' of 3d entirely and use regular mojo commands if the game is in certain states. <br><br>I've tried to mimic the examples but I either get a black screen for the whole game, or I get my scene bouncing back and forth between two frames (I just have a simple rotating cube on the screen for starters). I've tried SetMojoEmulation() but it doesn't seem to have any effect. Is there an example out there that can do this, or am I asking something not possible yet? <br><br>I saw this code here <a href="http://monkeycoder.co.nz/Community/posts.php?topic=4421" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=4421</a> which looks like even more than what I want right now, but the version of minib3d is 0.33.x and with the current version being 0.42.x I don't want to lose the extra functionality and bug fixes in the interim. I tried just using the util folder from 0.33 and copying it into the latest but that ran into some 'method/function not found' errors. <br><br></td></tr></table><br>
<a name="2082216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#195">[#195]</a></td></tr></table></td></tr><tr ><td class="posttext"> SetMojoEmulation() at the start of my OnRender%() works fine for me? I'm just using the normal 2D mojo commands after this point to draw 2D stuff on top of the 3D context. Can you whip up a quick example of the problems you are having? If your testing on HTML5, you may be forgetting to preload ( PreLoadPixmap() ) your 2D images as well as your 3D textures, this would give you a blank screen. <br><br></td></tr></table><br>
<a name="2082228"></a>

<a name="2082229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dip</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#196">[#196]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply. That's what it seemed to be from everything that I could find, but it just didn't work for me in practice and I'm not sure why. I'm using Gflw for now, and when I compile it shows "miniB3D opengl11" if that makes a difference. Here's a skeleton version of my game just to show the issue I'm having:<br><pre class=code>
Import mojo
Import minib3d

Global gameState
Global menuState
Global configState
Global displayState
Global maxResources
Global numResources

Const COPY_TO_PROJECT_DATA_FOLDER:Bool=True
Const STATE_LOADING = 1
Const STATE_LOADCONFIGS = 2
Const STATE_MENU = 3
Const STATE_PREGAME = 4
Const STATE_LOGIN = 5
Const STATE_PROCESSLOGIN = 6
Const STATE_PROCESSMENU = 7
Const STATE_PLAY = 8
Const STATE_NEWCHAR = 9
Const STATE_PROCESSNEW = 10
Const STATE_ENTERPASS = 11
Const STATE_PROCESSPASS = 12
Const DISPLAY_FPS = 1
Const DISPLAY_TILEPICKER = 2
Const DISPLAY_MAP = 3
Const DISPLAY_HELP = 4
Const MENU_MAIN = 1
Const MENU_CONFIG = 2

Class MyTest Extends App
	Field Camera:TCamera
	Field Light:TLight
	Field Cube:TMesh
	Field started3D:Bool
	
	 ' Stuff to do on startup...
	Method OnCreate()
		InitGame()
		SetUpdateRate 10
	End

	' Stuff to do while running...
	Method OnUpdate()
		UpdateAsyncEvents()
		If gameState = STATE_LOADING
		Else
			HandlePlayerKeys()
			If gameState = STATE_PLAY
				If displayState = DISPLAY_FPS Then Update3D()
			Endif
		Endif
	End

	Method OnLoading()
		Cls 0,0,0
		DrawText("Initializing... ",120,420)
	End

	' Drawing code...
	Method OnRender()
		If started3D Then SetMojoEmulation()
		Select gameState
			Case STATE_LOADING
				Cls 0,0,0
				DrawText("Loading... ",120,420)
			Case STATE_PLAY
				Select displayState
					Case DISPLAY_FPS		RenderFirstPerson3D()
					Case DISPLAY_HELP		RenderHelp()
				End
		End
	End

	Method InitGame()
		gameState = STATE_PLAY
		menuState = MENU_MAIN
		displayState = DISPLAY_FPS
	End

	Method HandlePlayerKeys()
		Select gameState
			Case STATE_PLAY
				If displayState = DISPLAY_HELP
					HandleHelpKeys()
				Else
					HandleFirstPersonKeys()
				Endif
		End
	End

	Method HandleFirstPersonKeys()
		If KeyHit(KEY_F1) Then displayState = DISPLAY_HELP
	End

	Method HandleHelpKeys()
		If KeyHit(KEY_ESCAPE) Then displayState = DISPLAY_FPS
	End
		
	Method Init3D()
		' Normally all game elements are invoked in the OnCreate() method, but with Minib3D you 
		' can do this only when the app call for the first time the OnRender() method.
		SetRender()
		Camera = CreateCamera()
		Camera.CameraClsColor(0,0,80)
		Light=CreateLight(1)
		Light.MoveEntity -10,10,10
		Light.TurnEntity 35,-40,0
		Cube=CreateCube()
		Cube.PositionEntity -0.5,-2.5,8
		started3D = True
	End
	
	Method Update3D()
		' do things like modify lighting and move entities to match object positions
		If started3D
			Cube.TurnEntity 0,1,0
			UpdateWorld()
		Endif
	End
		
	Method RenderFirstPerson3D()
		If Not started3D
			Init3D()
		Else
			RenderWorld()
		Endif
	End

	Method RenderHelp()
		DrawText("Help",400,20)
		DrawText("Press Esc to exit this help",400,580)
	End
End

Function Main ()
	New MyTest
End
</pre><br><br>If I run the above, I get the spinning cube on the screen. If I hit F1 to display help, I get the cube still on the screen, but toggling back and forth between two states (I assume since updateworld isn't called). <br><br></td></tr></table><br>
<a name="2082237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#197">[#197]</a></td></tr></table></td></tr><tr ><td class="posttext"> Change to this...<br><br><pre class=code>
	Method RenderHelp()
		DrawText("Help",400,20)
		DrawText("Press Esc to exit this help", 400, 180)
		RenderWorld()
	End
</pre><br><br>You need a RenderWord() to cause a page 'flip', to see your text, even when using 2D text in after a SetMojoEmulation() call. I changed the Y component of your second text line to 180, as the text was outside the bottom of the window BTW. <br><br></td></tr></table><br>
<a name="2082258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dip</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#198">[#198]</a></td></tr></table></td></tr><tr ><td class="posttext"> It was that easy, thanks. Yeah the code was a quick delete of my game code and I didn't take into consideration window size changes. I thought I tried with the RenderWorld() afterwards and it didn't work, must've been a factor of late night and trying too many different things. It's working now, thanks for the helpful and timely response! <br><br></td></tr></table><br>
<a name="2082259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#199">[#199]</a></td></tr></table></td></tr><tr ><td class="posttext"> NP ;) <br><br></td></tr></table><br>
<a name="2082664"></a>

<a name="2082665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#200">[#200]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi Adam,<br><br>i am still with the same issue last time - lighting.. thought chrome's webGL issue but it is actually not.. today i'm trying back all of the tutorial files ive made with monkey 77a (demo) + minib3d_0.42 + firefox browser and compile it for html5.. the light is not appearing, unless i set all mesh with entityfx 1, then everything is shown with full bright (light is ignored). but when i revert back to monkey77a + minib3d_0.37 + firefox, every light setup is shown correctly. so i reckon, the lighting issue is coming at latest update of minib3d.. has anyone else facing the same issue as mine?<br><br>forgot to mention that everything is working fine when i compile it to Desktop GLFW (whatever version of minib3d will work just fine in here) <br><br></td></tr></table><br>
<a name="2082705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julesd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#201">[#201]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondering, are all the commands at this post the proper command.<br>Also if they are, are all of the commands implemented, and are there other commands not listed there?<br><br><a href="http://blitzmax.com/b3ddocs/command_list_3d_cat.php" target="_blank">http://blitzmax.com/b3ddocs/command_list_3d_cat.php</a> <br><br></td></tr></table><br>
<a name="2082712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#202">[#202]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Just wondering, are all the commands at this post the proper command. <br></div><br>most of them are implemented. but in addition for miniB3D, most are object-oriented.<br>I have not implemented TTerrain yet.<br><br><div class="quote"> and are there other commands not listed there? <br></div><br>hundreds. classes like TShader and Framebuffer and LoadObjMesh, UseMojoEmulation, BoneToVertexAnim, ActivateBones, CreateGrid, CreateBatchSprite, CreateText3D, SetNormalMapping, CollisionSetup, CameraLayer, PositionToVertex, and OO shortcuts like Position, Scale, Rotate (without the Entity word).<br>Docs are coming, slowly. <br><br></td></tr></table><br>
<a name="2082711"></a>

<a name="2082710"></a>

<a name="2082715"></a>

<a name="2082718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#203">[#203]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> when i revert back to monkey77a + minib3d_0.37 + firefox, every light setup is shown correctly <br></div><br>well, the HTML5 target uses shaders, which is limited to one light at the moment. i have not created the deferred (or light-indexed) shader yet to support many lights.<br><br>the desktop target uses opengl es1.1, which supports 8 lights because of the fixed-function pipeline.<br><br>with the current shader, it would take a little work to add more lights. how badly do you need it and how many lights do you need? I think i can make an on-demand shader to allow more lights. <br><br></td></tr></table><br>
<a name="2082758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#204">[#204]</a></td></tr></table></td></tr><tr ><td class="posttext"> i see, that shed me some lights on this.. anyway, actually i just need one light (directional) is good enough. even i only setup only one light in the scene, it still not appearing anything. anyway thanks Adam, im not need it badly since my target compiled is for Android, only that i like to 'quickly see' the result in html5 first before i port to targeted device (you know how fast it compile for html5).<br><br>another question, b3d mesh cant load multitexture (multi-UV)? my diffuse is on UV1 (texture slot 1), my lightmap is on UV2 (texture slot 2).. is that possible? xtra infomation, my b3d mesh directly exported from 3dsmax 8 pipeline V0.8 (not gile[s])..<br><br>and all my b3d mesh have to load the textures manually one by one? (not automatically loaded like the way it did before?) <br><br></td></tr></table><br>
<a name="2082770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#205">[#205]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> even i only setup only one light in the scene, it still not appearing anything <br></div><br>that is strange. i wonder if the normals on the model are wrong? try using " mesh.UpdateNormals() " after loading the model.<br>another thing is check the html5 target in debug mode and see if any shader errors are appearing.<br><br><div class="quote"> b3d mesh cant load multitexture (multi-UV)? <br></div><br>it should.<br>if you enable "#MINIB3D_DEBUG_MODEL=1" at the beginning of your file, the compiler will add debug info when loading the B3D mesh, and it should output what UV coords the mesh is using.<br><br><div class="quote"> and all my b3d mesh have to load the textures manually one by one? <br></div><br>for html5 and flash, you must PreLoad() all textures, even those in model files. this is because these targets use only asynchronous loaders. you don't need to do this for desktop targets. i am thinking of how to make this easier by perhaps incorporating PreLoad for models as well.<br><br>for now, you can use arrays to make it easier:<br><pre class=code>
Field myFileArray:String[] = ["Zombie.jpg","mojo_font.png","wabbit_alpha.png"]

Method OnCreate()
   TPixmap.PreLoadPixmap(myFileArray)
End

Method OnUpdate()
   TPixmap.PreLoadPixmap() ''updates the loader
   If (TPixmap.GetNumberLoaded() = myFileArray.Length()) doneLoadingFlag = true
   If not doneLoadingFlag then return ''or show wait screen
End
</pre> <br><br></td></tr></table><br>
<a name="2082781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#206">[#206]</a></td></tr></table></td></tr><tr ><td class="posttext"> Curious if anyone is making a full game with this Monkey version yet? <br><br></td></tr></table><br>
<a name="2082779"></a>

<a name="2082780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#207">[#207]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup making Star Rogue in it but I'm working through issues with me code atm <br><br></td></tr></table><br>
<a name="2082783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#208">[#208]</a></td></tr></table></td></tr><tr ><td class="posttext"> I look forward to seeing any progress you want to share! I really want to make some simple low poly PS1 era style games. <br><br></td></tr></table><br>
<a name="2082784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#209">[#209]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a look at the project post on this forum :) <br><br></td></tr></table><br>
<a name="2082827"></a>

<a name="2082828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#210">[#210]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm making a full game with miniB3D+Monkey too. Not a great way into the project yet though.<br><br><div class="quote">     and are there other commands not listed there?<br><br>hundreds. classes like TShader and Framebuffer and LoadObjMesh, UseMojoEmulation, BoneToVertexAnim, ActivateBones, CreateGrid, CreateBatchSprite, CreateText3D, SetNormalMapping, CollisionSetup, CameraLayer, PositionToVertex, and OO shortcuts like Position, Scale, Rotate (without the Entity word).<br>Docs are coming, slowly. <br></div><br><br>Adam is there a way you could rustle up a full list of these commands? It would be handy to know what extras are available to your port. <br><br></td></tr></table><br>
<a name="2082867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#211">[#211]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam,<br><br>so weird, it wont happen that way on my system... i have to do this instead to show my texture properly diffused on my mesh<br><br><pre class=code>
Method OnCreate()
        'don't have to preload anything here, wont help anything here
End

Method OnUpdate()
   	If Not TPixmap.PreLoadPixmap(["pack_sachet_lm.png"]) Then Return
	'here also i dont have to preload anything - in fact i dont need TPixmap.PreLoadPixmap() command at all in my apps
	
        'but i have to do this instead
        Local texture:TTexture = LoadTexture("pack_sachet_lm.png")
		
        Monkey1 = LoadMesh("pack_sachet.b3d")
        'and i dont have to manually EntityTexture it. just LoadTexture command above would be sufficient
End
</pre><br>then only my textured mesh visible on the screen...<br><br>when im on debug mode (html5) + minib3d_debug_model = true, i've got this printed out:<br><br><div class="quote"> <br>WebGL 1.0<br>..WEBGL 1<br>..FullShader success     <br>..FastBrightShader success<br>..loading B3DBinary:monkey://data/pack_sachet.b3d<br>TModel <br> TEXS <br>-Load Texture:0 pack_sachet_lm.png blend:2 coords:1<br> BRUS <br>brush:0 tex:0<br>brush:0 tex:-1<br>brush:0 tex:-1<br>brush:0 tex:-1<br>brush:0 tex:-1<br>brush:0 tex:-1<br>brush:0 tex:-1<br>brush:0 tex:-1<br>brush:0 rgb:1 1 1  blend:1 fx:0 no_texs:8<br> NODE <br>- NODE  (parent= Scene Root)<br>- MESH <br>- VRTS <br>no_verts:2375<br>- TRIS <br>painting ent:-1 surf:0<br>no_tris:1665 no_verts2374<br> <br></div> <br><br></td></tr></table><br>
<a name="2082866"></a>

<a name="2082887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#212">[#212]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> b3d mesh cant load multitexture (multi-UV)? <br></div><br>possible bug. the flags may be becoming less than -255, which triggers a texture delete in the binding queue.<br>try putting this change at line 371 in the file "tmodelb3d.monkey":<br><pre class=code>
te_flags=te_flags&amp; $0ffff
</pre><br>if not, it may be a shader/render bug somewhere, that doesn't like uv-1 being the only coord set. <br><br></td></tr></table><br>
<a name="2082888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#213">[#213]</a></td></tr></table></td></tr><tr ><td class="posttext"> So what is the secret to build a project with monkey78b and the latest minib3d on HTML5? I am always getting <br><br><pre class=code>C:/MonkeyXPro78b/modules/os/os.monkey&lt;14&gt; : Error : Native OS Module not implemented</pre><br><br>when I build the examples that are shipped with minib3d. <br><br></td></tr></table><br>
<a name="2082890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#214">[#214]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So what is the secret to build a project with monkey78b and the latest minib3d on HTML5? I am always getting <br></div><br><b>Bug!</b> thanks.<br>in the file "monkeyutility.monkey" change "Import os" to:<br><pre class=code>
Import gametarget
</pre> <br><br></td></tr></table><br>
<a name="2082899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#215">[#215]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for responding quickly. <br><br></td></tr></table><br>
<a name="2082916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#216">[#216]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adam,<br><br>can you create a noise method in grid mesh... i just wondered when you allowed to create grid with some amount of segments (for whatever reason), so then with grid.Noise(height:Float) letsay, will actually noise the grid to be looks like smooth little terrain (and can be expand into animated noise height which will help in simulating a water surface effect when the terrain engine complete later) <br><br></td></tr></table><br>
<a name="2082928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#217">[#217]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> can you create a noise method in grid mesh <br></div><br><pre class=code>
Function JitterMesh:Void( mesh:TMesh, heightx:Float, heighty:Float, heightz:Float )
  local v:Vector = New Vector
  For local ss:TSurface = Eachin mesh.surf_list
    For local i%=0 to ss.no_verts-1
      local x:float = Rnd()*heightx
      local y:float = Rnd()*heighty
      local z:float = Rnd()*heightz
      ss.GetVertexCoords(i,v)
      ss.VertexCoords(i,v.x+x,v.y+y,-(v.z+z))
    Next
  Next
End
</pre><br>probably too slow for water, but if you precache the sine waves in an array, that could be used for about 1000 vertices.<br><br>EDIT:<br><div class="quote"> Adam is there a way you could rustle up a full list of these commands? It would be handy to know what extras are available to your port. <br></div><br>look at NOTES.txt, i try and list all changes per version.<br><br>EDIT:<br>Updated jitter to not flip mesh, added to v0.43. <br><br></td></tr></table><br>
<a name="2082924"></a>

<a name="2082925"></a>

<a name="2082927"></a>

<a name="2082917"></a>

<a name="2082935"></a>

<a name="2082936"></a>

<a name="2082937"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#218">[#218]</a></td></tr></table></td></tr><tr ><td class="posttext"> level-of-detail (LOD) and octree. you can see the areas of LOD changes, the second level has textures removed, the third is just sprites.<br>1000 zombies, animated. the sprites don't animate. (webgl)<br>coming soon, in v0.43<br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/lod_zombies_zps4fbd0a0a.jpg"> <br><br></td></tr></table><br>
<a name="2082948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#219">[#219]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice! :) <br><br></td></tr></table><br>
<a name="2082952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#220">[#220]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice :)<br><br>What are the commands behind it or is it automatic? <br><br></td></tr></table><br>
<a name="2083020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#221">[#221]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, could be handy for anything that requires lots of scene meshes, crowd scenes, foliage engine, asteroid fields(Ed? ;)) etc.<br><br>Preferably it should be optional though and not hardcoded into the engine by default IMHO. <br><br></td></tr></table><br>
<a name="2083021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#222">[#222]</a></td></tr></table></td></tr><tr ><td class="posttext"> Personally I think it should with a enable/disable switch and a mesh option to be ignored from the system :) <br><br></td></tr></table><br>
<a name="2083047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#223">[#223]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What are the commands behind it or is it automatic? <br></div><br>mesh.SetLOD(level:int, distance:Float, lod_mesh:TMesh)<br>level = 1-3, could be used with only 1 level<br><br>example:<br><pre class=code>
Local simplezombie2:TMesh = TMesh(zombie[0].CopyMesh())
Local zbrush:TBrush = New TBrush(55,55,55)
simplezombie2.PaintMesh(zbrush) ''get rid of texture
'simplezombie2.DisableAnim() ''optional
zombie[0].SetLOD(1, 50.0, simplezombie2)
</pre> <br><br></td></tr></table><br>
<a name="2084072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#224">[#224]</a></td></tr></table></td></tr><tr ><td class="posttext"> can we expect to see 'physics' implement in miniB3D + Monkey X later? any wrapper from b3d time can be brought in? <br><br></td></tr></table><br>
<a name="2084083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#225">[#225]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> can we expect to see 'physics' implement in miniB3D + Monkey X later? <br></div><br>yes, i have ported most of CannonJS, but have not had time to get it to work yet. <br><br></td></tr></table><br>
<a name="2084494"></a>

<a name="2084495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#226">[#226]</a></td></tr></table></td></tr><tr ><td class="posttext"> The seems to be a small bug with CopyEntity() or maybe its the way its designed? It looks as if the copied entity does not use the current copied entities transformation matrix but relies on the parent entities one only for transformations, dropping the copied entities current one before each transformation command?<br><br>So...<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#BINARY_FILES="*.bin|*.dat|*.obj|*.mtl|*.b3d"
Strict
Import minib3d

Class Game Extends App
	Field mesh:TEntity
	Field copiedMesh:TEntity
	Field cam:TCamera
	
	Method OnCreate:Int()
		SetUpdateRate 60
		SetRender()
		mesh = LoadMesh("monkey://data/Meshes/OBJ/dwarf2.obj")
		copiedMesh = CopyEntity(mesh)
		ScaleEntity(copiedMesh, 0.10, 0.10, 0.10)
		ScaleEntity(copiedMesh, 0.10, 0.10, 0.10)
		ScaleEntity(copiedMesh, 0.10, 0.10, 0.10)
		ScaleEntity(copiedMesh, 0.10, 0.10, 0.10)
		ScaleEntity(copiedMesh, 0.10, 0.10, 0.10)
		ScaleEntity(copiedMesh, 0.10, 0.10, 0.10)
		ScaleEntity(copiedMesh, 0.10, 0.10, 0.10)
		ScaleEntity(copiedMesh, 0.10, 0.10, 0.10)
		ScaleEntity(copiedMesh, 0.10, 0.10, 0.10) ' &lt; - This one only has any effect
		PositionEntity(copiedMesh, 0, 10, 0)
		PositionEntity(copiedMesh, 0, 10, 0)
		PositionEntity(copiedMesh, 0, 10, 0)
		PositionEntity(copiedMesh, 0, 10, 0)
		PositionEntity(copiedMesh, 0, 10, 0)
		PositionEntity(copiedMesh, 0, 10, 0)
		PositionEntity(copiedMesh, 0, 10, 0)
		PositionEntity(copiedMesh, 0, 10, 0)
		PositionEntity(copiedMesh, 0, 10, 0)
		PositionEntity(copiedMesh, 0, 10, 0)
		PositionEntity(copiedMesh, 0, 10, 0) ' &lt; - This one only has any effect
		RotateEntity(copiedMesh, 0, 10, 0) 
		RotateEntity(copiedMesh, 0, 10, 0)
		RotateEntity(copiedMesh, 0, 10, 0)
		RotateEntity(copiedMesh, 0, 10, 0)
		RotateEntity(copiedMesh, 0, 10, 0)
		RotateEntity(copiedMesh, 0, 10, 0)
		RotateEntity(copiedMesh, 0, 10, 0)
		RotateEntity(copiedMesh, 0, 10, 0)
		RotateEntity(copiedMesh, 0, 10, 0)
		RotateEntity(copiedMesh, 0, 10, 0)
		RotateEntity(copiedMesh, 0, 10, 0)
		RotateEntity(copiedMesh, 0, 10, 0)' &lt; - This one only has any effect
		cam = CreateCamera()
		cam.CameraClsColor(0, 111, 0)
		cam.PositionEntity(0, 0, -100)
		AmbientLight(255, 255, 255)
		Return 0
	End	
	
	Method OnUpdate:Int()
		If KeyHit(KEY_ESCAPE) OnBack()
		TurnEntity(mesh, 0, 1, 0)
		TurnEntity(copiedMesh, 0, 1, 0)
		UpdateWorld()
		Return 0
	End

	Method OnRender:Int()
		RenderWorld()
		Return 0
	End	

	Method OnBack:Int()
		EndApp()
		Return 0
	End	
End

Function Main:Int()
	New Game
	Return 0
End</textarea><br><br>All those "ScaleEntity" commands should shrink the copied mesh in to oblivion but it never gets smaller than 10%? As I've never used the original B3D, this could be part of the design but the docs don't mention it. The same thing happens when you try multiple translates and rotates too.<br><br>Unfortunately if your code has various transformation performed on a copied entity throughout your game, this means the final one wipes all the previous ones out. Logically the copied entity should act like a complete new entity IMHO, as far as having its own transformations that is. <br><br></td></tr></table><br>
<a name="2084491"></a>

<a name="2084492"></a>

<a name="2084493"></a>

<a name="2084503"></a>

<a name="2084504"></a>

<a name="2084511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#227">[#227]</a></td></tr></table></td></tr><tr ><td class="posttext"> <strike>I'm not sure what you mean.</strike> Oh, i see. FOr this to happen, the original entity's matrix would have to be applied to the vertices.<br><br>In regards to the copiedMesh, the way it currently works is that Scale, Position, and Rotation are absolute (not relative) parameters. This happens in UpdateMat() of TEntity. It starts with the identity matrix, so everything else is overwritten, except if it has a parent via EntityParent().<br><br>To add on to Scale and Rotate, you must use<br><pre class=code>
ScaleEntity(copiedEntity, copiedEntity.ScaleX()*sc, copiedEntity.ScaleY()*sc, copiedEntity.ScaleZ()*sc)
</pre><br><br>On the other hand, commands like TurnEntity and MoveEntity and TranslateEntity add on to the existing matrix, instead of overwriting it. We could add one for ScaleEntity, call it RescaleEntity? <br><br></td></tr></table><br>
<a name="2084505"></a>

<a name="2084506"></a>

<a name="2084507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#228">[#228]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you need to apply this to vertices, as long as a separate model transformation matrix is intact. This is the basis of an instanced model. I think the copied entity should initially have a copy of the original matrix but from that point on its transformation matrix should be unique to the copy. All rotations, translations, scaling should be performed on the copies unique matrix. As this is just a pointer copy, unlike CopyMesh, the vertices, normals etc. should remain pointing back to the original and act as a reverence, ala original B3D. This is already mostly in place but the current commands don't seem to realise fully that the copy should not reference the original matrix. It looks like there is an unneeded pointer back to the original matrix somewhere? <br><br></td></tr></table><br>
<a name="2084523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#229">[#229]</a></td></tr></table></td></tr><tr ><td class="posttext"> i hesitate having to maintain 3 matrices, per entity update. image if you have instanced, scaled trees on two different rotating planets, that's at least 3*36=108 multiplies per tree (parent planet mat*tree orig mat*tree instance mat). think about instanced bones. did the original B3D maintain rescaled instances?<br><br>quaternions would be a better choice here, but that's a major overhaul. compare this with using a proposed Rescale() command or a ScaleMesh() command, which would be far less changes to the engine.<br><br>i'm not against using quats for everything, i've thought about it. <br><br></td></tr></table><br>
<a name="2084596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#230">[#230]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've maybe got the wrong end of the stick here Adam but I don't see why you need any extra matrices at all. The current copied model matrices will work fine when the model vertices, normals ect. are referenced from a different mesh. The original models model matrice can easily be ignored after this point. Also shouldn't calculations like scaling and translation should be combined in the one matrice before multiplication? I am not in front of my computer just now, so maybe miniB3D needs to do it in a certain way.<br><br>I don't think quaternions are needed unless slerps are required or gimbal lock show it's ugly head of course. ;) that said quaternions would generally be desirable but your correct, matrice-quaternion back and forth can be expensive and should be avoided unless the whole system is tailored for them.<br><br>I'll have a look myself tonight to see if there's a quick way around this, although I'm still a bit wary of the complex stuff like, the miniB3D matrix/child calculations. <br><br></td></tr></table><br>
<a name="2084595"></a>

<a name="2084538"></a>

<a name="2084539"></a>

<a name="2084543"></a>

<a name="2084597"></a>

<a name="2084598"></a>

<a name="2084599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#231">[#231]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit: Sorry Adam, please ignore this for now, as I've just discovered that I changed some of the code within miniB3D last week and it may or may not be affecting this code. Argh, I need some sort of local VCS! :(<br><br>BTW, I like the idea of a relative scaling function ReScaleEntity()!<br><br>Same code as ScaleEntity except for the 1st 3 lines of the method...<br><br><pre class=code>	Method ReScaleEntity:TEntity(x#,y#,z#,glob=False)
		
		sx *= x
		sy *= y
		sz *= z</pre> <br><br></td></tr></table><br>
<a name="2085044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julesd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#232">[#232]</a></td></tr></table></td></tr><tr ><td class="posttext"> MiniB3D no longer works with beta versions of Monkey X. Using latest 78g.<br><br>Is this a dead project, or is it still being worked on? <br><br></td></tr></table><br>
<a name="2085050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#233">[#233]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you kidding? The maintainer posted only a week ago, three posts up! <br><br></td></tr></table><br>
<a name="2085058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#234">[#234]</a></td></tr></table></td></tr><tr ><td class="posttext"> 78g has only been out for less than a day. What was your error? <br><br></td></tr></table><br>
<a name="2085249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julesd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#235">[#235]</a></td></tr></table></td></tr><tr ><td class="posttext"> Had same problem with 78f as well.<br><br>line 450 in mojographics.monkey.<br><br>Method LoadSurface__UNSAFE__:surface( Surface:Surface,path$ )<br><br>Type 'surface' not found.<br><br>78g with current MinB3D, HTML5,. mojo bunnies example<br><br>I had changed one line to enable HTML5 now I get the error above.<br><br>If you try you will see what I mean. <br><br></td></tr></table><br>
<a name="2085126"></a>

<a name="2085127"></a>

<a name="2085141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#236">[#236]</a></td></tr></table></td></tr><tr ><td class="posttext"> that's not used in minib3d, so you can just comment out the whole method. <br><br></td></tr></table><br>
<a name="2085189"></a>

<a name="2085190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julesd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#237">[#237]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it working, once you comment out that method, there is another method with error. I just commented that out as well, then it worked.<br><br> Thanks <br><br></td></tr></table><br>
<a name="2085211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LeeTheGee1</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#238">[#238]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All<br>i Have been using miniB3D for some time now and... i Love it...it reminds me of the Good old Blitz3D days "Okeey Dookey"...My Problem is that is have installed it in my Newish Windows 8.1 laptop...all the B3D Examples work within Monkey....HTML5 Target but when i try and run them independently all i get is a Blank Grey Screen...i have pre-loaded all the textures and #TEXT_FILES="*.txt|*.xml|*.json|*.obj|*.fx|" etc......i have tried everything for 2 days now....normal monkey apps run independently but not miniB3D ones...<br><br>any help would be Greatly appreciated i am running out of ideas<br><br>Lee <br><br></td></tr></table><br>
<a name="2085228"></a>

<a name="2085229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#239">[#239]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam,<br><br>I get a compile error in mojographics.monkey line 592 for the desktop target:<br><pre class=code>
	'INTERNAL - subject to change etc.
	Method OnUnsafeLoadComplete:Bool()
		Return true
	End
</pre><br><br><i>Overriding method does not match any overridden method.</i><br><br>Commenting that method resolves it. <br><br></td></tr></table><br>
<a name="2085234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#240">[#240]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> HTML5 Target but when i try and run them independently all i get is a Blank Grey Screen <br></div><br>you mean the html5 target? when you run this from the local machine, it will give you cross-domain security errors. go into the browser's console (ctrl-shift-j on chrome) and you'll see the errors. to run html5 locally, i use Node-Webkit, but it should work normally from a web server.<br><br><div class="quote"> Commenting that method resolves it. <br></div><br>thanks! updated github. <br><br></td></tr></table><br>
<a name="2085235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LeeTheGee1</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#241">[#241]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow Adam yes i did mean HTML5.....i just uploaded it to my Website and it worked perfectly...My Gosh i feel such a Twit....<br><br>Thanks Soo Much Man you are ACE<br><br>Coding Coding Coding<br><br>WoooHooo <br><br></td></tr></table><br>
<a name="2085517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#242">[#242]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam,<br><br>miniB3D really rocks!.. Is that Collada(CAE) importer ready for miniB3D?<br><br>(syyhh!... if miniB3D is Collada + GLSL ready, then you can consider to start selling it.. please take my money at that time) <br><br></td></tr></table><br>
<a name="2085519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rebelas</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#243">[#243]</a></td></tr></table></td></tr><tr ><td class="posttext"> Regarding Deen's comment, the same here, though I like to have rigid body physics too. <br><br></td></tr></table><br>
<a name="2085653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#244">[#244]</a></td></tr></table></td></tr><tr ><td class="posttext"> how can i view separated limb animation *.b3d in minib3d + Monkey X??<br><br>1. how to set separated limb animation in 3dsmax before exporting out into b3d (with b3d pipeline)? view the bones mesh? create dummy mesh and apply skin and add bones to them?<br>2. how to load b3d file with animation and animate them in monkey? sample codes maybe? how to load and animated b3d with separated limb animation? is that possible? <br><br></td></tr></table><br>
<a name="2085763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#245">[#245]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. not sure what you mean. blending animation?<br>2. you can try using LoadAnimSeq(file:String) which extracts animation. i don't know how well this works, and need to investigate it more. <br><br></td></tr></table><br>
<a name="2085767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julesd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#246">[#246]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a few questions.<br><br> Does MiniB3D use webgl in Html 5?<br>What platforms does MINIB3D currently support?<br>How many lights are possible in each platform ? <br><br></td></tr></table><br>
<a name="2085771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#247">[#247]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; Does MiniB3D use webgl in Html 5?<br>yes<br>&gt; What platforms does MINIB3D currently support?<br>linux, macos, winpc, flash, html5, ios, android, xna. i haven't tested ios in a while, though.<br>&gt; How many lights are possible in each platform ?<br>linux, macos, winpc, ios, android with opengl1.1 = 8, opengl2=1, html5 = 1,  xna=1, flash = 1<br>shaders get really slow with multiple lights. i haven't implemented a deferred light shader yet. the current shader could add more lights using an on-demand shader. <br><br></td></tr></table><br>
<a name="2085857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#248">[#248]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>(syyhh!... if miniB3D is Collada + GLSL ready, then you can consider to start selling it.. please take my money at that time)<br> <br></div><br><br>lol, i feel like throwing money Adam's way right now for all the hard work he has done. But alas 404 donation url not found. You guys would be surprised what i am doing with this over at the Realmcrafter Community edition site HUEHUEHUEHUEHUEHUEHUEHUE<br><br>that is if i can pull it off. <br><br></td></tr></table><br>
<a name="2085898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julesd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#249">[#249]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondering is defered renderer being worked on? <br><br></td></tr></table><br>
<a name="2085899"></a>

<a name="2085901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#250">[#250]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Just wondering is defered renderer being worked on? <br></div><br>i wish! i am excited to work on a light-indexed forward-render shader, but i feel a collada importer (animation and scene layout) is more important. this way we can load models consistently and use blender as a level editor. a new shader will be worked on eventually. <br><br></td></tr></table><br>
<a name="2086011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rebelas</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#251">[#251]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adam, I tried minib3D, it is nice. I thought I can make myself busy by converting Blitz3D samples to minib3D, but my mind moved into spending time on physics. I want to begin a small game physics library. What do you suggest for Vector 3D and Matrix library? Which version of OpenGL Monkey is using? <br><br></td></tr></table><br>
<a name="2086014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#252">[#252]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick question from me... is there away of applying a specular map texture?<br><br>@rebelas: There are already vector libs and matrix libs in the miniB3D distro. <br><br>It's within the "maths" folder. (see "C:\..\Monkey Pro\modules\minib3d\math") <br><br></td></tr></table><br>
<a name="2086013"></a>

<a name="2086015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rebelas</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#253">[#253]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, yeah, and more. Thanks! <br><br></td></tr></table><br>
<a name="2086017"></a>

<a name="2086018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#254">[#254]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;What do you suggest for Vector 3D and Matrix library?<br>i don't like the current minib3d vec, so use something like CannonJS's Vec3 API. this reduces "new" calls which are more important on html5 and mobile targets.<br>&gt;Which version of OpenGL Monkey is using?<br>es1.1 and es2.0, depending on versions.<br>&gt;is there away of applying a specular map texture?<br>texture blend mode 3 (additive)? i don't know how spec maps are usually colored. <br><br></td></tr></table><br>
<a name="2086016"></a>

<a name="2086107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rebelas</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#255">[#255]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam, I keep in mind. <br><br></td></tr></table><br>
<a name="2086121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rebelas</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#256">[#256]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adam, I just learned about mojo3d, with that, do you still want to continue with minib3d?<br><br><a href="http://www.monkey-x.com/Community/posts.php?topic=5548&amp;page=first" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=5548&amp;page=first</a> <br><br></td></tr></table><br>
<a name="2086136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#257">[#257]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>* 'Mojo3d' - simple low level, gles2-ish 'immediate mode' 3d module for android, iOS, win8, html5 and glfw <br> <br></div><br>sounds to me like something that would not be comparable to minib3d, but like a flat gles/d3d wrapper ... if it will ever be released, which I do not think :P<br>also it does not seem to be the case that this kind of of device/platform abstraction was planned for minib3d <br><br></td></tr></table><br>
<a name="2086161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#258">[#258]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> texture blend mode 3 (additive)? i don't know how spec maps are usually colored <br></div><br><br>Specular maps are a type of per pixel lighting, they represent texels within a texture that represent reflected light, they are usually a shader AFAIK. So it looks like miniB does not yet support them, I'll hang back a bit on this feature. <br><br></td></tr></table><br>
<a name="2086212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rebelas</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#259">[#259]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rone, what you say is true, however, one still wonder what is the reason to have mojo3D, while we have minib3d as open source 3D for Monkey? <br><br></td></tr></table><br>
<a name="2086170"></a>

<a name="2086171"></a>

<a name="2086209"></a>

<a name="2086210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rebelas</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#260">[#260]</a></td></tr></table></td></tr><tr ><td class="posttext"> Even with mojo3D, and even if programmers begin making 3D libraries for it, direction might be toward scene graph or GUI Authoring tools, rather than entity system like Blitz3D. Thus, I think those who like Blitz3D, better forget Monkey, unless Adam comes with a miracle. <br><br></td></tr></table><br>
<a name="2086213"></a>

<a name="2086214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rebelas</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#261">[#261]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xors3D was a perfection for old Blitz3D, I finished a good working simulation with Xors3D. When it came to small devices, the whole project was abandoned. This goes to the mind of every engine programmer: why should I spend too much on a game engine while I can make lots of money by selling crappy $1 game for iPad, or get a job with great pay. I said somewhere else, it seems the solution is open source. When the cost of producing engine becomes more than cost of selling games, engine developers will move to selling games. <br><br></td></tr></table><br>
<a name="2086216"></a>

<a name="2086217"></a>

<a name="2086218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#262">[#262]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Thus, I think those who like Blitz3D, better forget Monkey, unless Adam comes with a miracle.<br>Xors3D was a perfection for old Blitz3D, I finished a good working simulation with Xors3D. <br> <br></div><br>not...<br><br><div class="quote"> <br>however, one still wonder what is the reason to have mojo3D<br> <br></div><br>- clean platform specific device abstraction<br>- mojo implementation using mojo3d<br>- maybe monkey to glsl/hlsl/agal  <br><br>... minib3d also would benefit from it:<br>- removes most of the target specific code<br>- clean and especially fast mojo integration<br>- platform independent Trender implementations / much less redundant code <br><br></td></tr></table><br>
<a name="2086225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rebelas</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#263">[#263]</a></td></tr></table></td></tr><tr ><td class="posttext"> That makes sense, but Adam, will you revise most of your codes to have a mojo3D based minib3D? <br><br></td></tr></table><br>
<a name="2087436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#264">[#264]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been using multi-texturing for applying some simple decals but its proving to be a real pain under certain circumstances. I was wondering, is there a better way to efficiently create a decal texture on a mesh? <br><br></td></tr></table><br>
<a name="2087442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#265">[#265]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I've been using multi-texturing for applying some simple decals but its proving to be a real pain under certain circumstances. I was wondering, is there a better way to efficiently create a decal texture on a mesh? <br></div><br>what circumstances? you man like uv unwrapping or problems with multi-texturing? <br><br></td></tr></table><br>
<a name="2087461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#266">[#266]</a></td></tr></table></td></tr><tr ><td class="posttext"> No the multi texturing is working fine Adam, the problem is when I apply a decal texture to a mesh as a 2nd texture. The underlying meshes UV coordinates mess up the decal unless there extremely simple(planar). So applying a decal to a quad is fine as 2nd texture but if it's anything more sophisticated messes up the decal. I suppose a projected texture effect would be nice, or even a way to apply a 2nd set of UVs for texture two. Things are complicated as my level mesh generation is being procedurally generated, including the placement of decals, so avoiding UV seams is getting to be a real problem. <br><br></td></tr></table><br>
<a name="2087493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#267">[#267]</a></td></tr></table></td></tr><tr ><td class="posttext"> there should be two sets of uv coords for every mesh. another trick is to duplicate the layer 0.0001 units away from the original layer, but this causes z-fighting for things far away from the camera. if this doesn't help, then i'm unsure what you're trying to do and would need some visual references for explanation. <br><br></td></tr></table><br>
<a name="2087556"></a>

<a name="2087559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#268">[#268]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't duplicate the layers unfortunately as I am hoping to keep the scene polygon count down for mobile devices.<br><br>I can see no reference to using 2 sets of UVs, how is this achieved? <br><br></td></tr></table><br>
<a name="2087528"></a>

<a name="2087554"></a>

<a name="2087555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#269">[#269]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
VertexTexCoords surface,vertex_index,u#,v#[,w#][,coord_set]
or
surface.VertexTexCoords ( vertex_index,u,v,w,coord_set )

Parameters:

surface - surface handle
index - index of vertex
u# - u# coordinate of vertex
v# - v# coordinate of vertex
w# - ignored
coord_set (optional) - co_oord set. Should be set to 0 or 1.
</pre><br><a href="http://www.blitzbasic.com/b3ddocs/command.php?name=VertexTexCoords&amp;ref=3d_cat" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=VertexTexCoords&amp;ref=3d_cat</a> <br><br></td></tr></table><br>
<a name="2087558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#270">[#270]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam, I've never used that command before, it could be exactly what I need. <br><br></td></tr></table><br>
<a name="2087698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#271">[#271]</a></td></tr></table></td></tr><tr ><td class="posttext"> @AdamRedwoods:<br><br>The "HTML5 Game target" is broken with Monkey X Pro V079B + MiniB3d V0.42.3? I get a "Native OS Module not implemented" in os.monkey...<br><br>Also, what's the preferred approach for creating MiniB3d apps? Extend the MiniB3d.app class as in the "mojo bunnies" example? Or just extend the mojo app class like in the other examples? <br><br>I have posted an updated demo here: <a href="http://www.monkey-x.com/Community/posts.php?topic=374&amp;post=87690" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=374&amp;post=87690</a> . I'd like to add a 2D overlay HUD to it. I suspect I'll need to restructure it to extend the MiniB3d.app class and make use of SetMojoEmulation(). Or is that more of an experimental thing? <br><br></td></tr></table><br>
<a name="2087708"></a>

<a name="2087709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#272">[#272]</a></td></tr></table></td></tr><tr ><td class="posttext"> When using the MiniB3DApp infrastructure, it looks like there is an issue with ClearWorld(). If called, a "memory access violation" error is generated from tpixmapgl.monkey. <br><br>To replicate the error just call ClearWorld() from an appropriate place in the minib3d_mojo_bunnies.monkey example.<br><br>EDIT: Using the "Desktop Game" target. <br><br></td></tr></table><br>
<a name="2087727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#273">[#273]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The "HTML5 Game target" is broken with Monkey X Pro V079B + MiniB3d V0.42.3? I get a "Native OS Module not implemented" in os.monkey...<br> <br></div><br>Yes, if anyone encounters this replace Import os with<br><pre class=code>
Import gametarget
</pre><br><br><div class="quote"> <br>Also, what's the preferred approach for creating MiniB3d apps? <br></div><br>If you don't extend the MiniB3DApp, then you will need to do your own init and PreLoadPixmap checking. Either way works just fine.<br>SetMojoEmulation() is not experimental, it is working. It must be called before using mojo commands in OnRender(). <br><br></td></tr></table><br>
<a name="2087738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#274">[#274]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to add, the "Import os" line is in monkeyutility.monkey in the minib3d folder. <br><br></td></tr></table><br>
<a name="2087746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#275">[#275]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. HTML5 works with that import mod... Though I'm not seeing any fog effects on that platform (Win8.1, Chrome and Firefox). Not supported?<br><br>I've modified my code to inherit from MiniB3DApp. Aside from the ClearWorld() issue, everything seems okay. Have got a little 2D HUD working now. Thanks again. <br><br></td></tr></table><br>
<a name="2087783"></a>

<a name="2087784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#276">[#276]</a></td></tr></table></td></tr><tr ><td class="posttext"> VertexTexCoords + coord_set = 1 does not work I am afraid. I've tested it in various scenarios and always the 2nd texture uses the 1st textures UV coords. I double checked that the meshes VertexDataBuffer had all the correct values poked in and everything seems fine(extra 2nd UVs at offset of 8 &amp; 12 + 48 per vert index). Nothing you do to the 2nd set of UVs + texture seems to make any difference unfortunately, they just seemed to get ignored in preference to the 2nd texture using the 1st textures UV coords.<br> <br>BTW. A quick and dirty confirmation method Adam, is simply to, VertexTexCoords('all verts',0,0,,1) for your 2nd texture which has no effect in the UV placement, when it should blank them. <br><br></td></tr></table><br>
<a name="2087928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#277">[#277]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you get a chance to look into this Adam? It's got me stumped and it looks like a feature I really need. <br><br></td></tr></table><br>
<a name="2087955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#278">[#278]</a></td></tr></table></td></tr><tr ><td class="posttext"> not yet. does it not work for all targets? <br><br></td></tr></table><br>
<a name="2088009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#279">[#279]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've only tested it properly on GLFW Adam. Unfortunately my Android tablet is on the blink. HTML5 has the same problem IIRC. <br><br></td></tr></table><br>
<a name="2088021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#280">[#280]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adam, I stuck this straight into my game as a method but I could bang out some sort of sample, say a model with 2 textures using 2 UVs sets as a small test program, if that would help? <br><br></td></tr></table><br>
<a name="2088068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#281">[#281]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, if you have a test program, send it over to my email. <br><br></td></tr></table><br>
<a name="2088095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#282">[#282]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I'll get on it tomorrow if I can or Monday at the latest Adam. <br><br></td></tr></table><br>
<a name="2088216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#283">[#283]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, posted a .RAR and some notes Adam. I am a little worried about this one, I hope its an easy fix. <br><br></td></tr></table><br>
<a name="2088269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#284">[#284]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam: what targets are supported by monkey minib3d? <br><br></td></tr></table><br>
<a name="2088285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#285">[#285]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've tried Android, Windows and HTML5, all work well for me. <br><br></td></tr></table><br>
<a name="2088287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#286">[#286]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been using linux, I want to release on android, iOS, Mac/windows/linux, and windows 8 <br><br></td></tr></table><br>
<a name="2088974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#287">[#287]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick question, is there any way I can insert my own opengl commands into a cameras render pipeline without hacking into the miniB3D source? <br><br></td></tr></table><br>
<a name="2089071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#288">[#288]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Quick question, is there any way I can insert my own opengl commands into a cameras render pipeline without hacking into the miniB3D source? <br></div><br>hmmm. not sure what you need to do, but i'm guessing you need to add it AFTER the camera calls its own driver commands.<br>if that's the case, there really isn't a good way to do that, because it wasn't really planned for that. the API has access to most camera commands.<br><br>the only way i can think of is you can add it per mesh class, by Implementing IRenderUpdate() for the mesh. This is how sprites update their camera. It is only called if the mesh is viewable (not culled) -- BUT this is probably not what you want.<br><pre class=code>
Class TSprite Extends TMesh Implements IRenderUpdate
   ...
   Method Update(cam:TCamera )
     '' called during render()
      ...
</pre> <br><br></td></tr></table><br>
<a name="2089070"></a>

<a name="2089079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#289">[#289]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have some old particle code for another language that I wrote before MonkeyX that would like to see if it could work within miniB3D. It uses some wacky GLES (eg. degenerate vertex arrays) to achieve the effects at speed. I'd probably be better off learning to do it within a shader but it's mainly for fun at the moment.<br><br>Thanks for the tips though Adam, I had a quick look at how TSprite(and TBatchSprite) does it and its certainly a novel method that should be useful. <br><br></td></tr></table><br>
<a name="2089207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#290">[#290]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get compiler errors with Monkey 79d as Mark has fixed some "public/private" related stuff:<br><br><pre class=code>MonkeyPro/modules_ext/minib3d/tmesh.monkey&lt;213&gt; : Error : Method TEntity.UpdateMat:Void(Local load_identity:Bool) is private.</pre> <br><br></td></tr></table><br>
<a name="2089353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#291">[#291]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just ran into the same problem as Xaron! <br><br></td></tr></table><br>
<a name="2089362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#292">[#292]</a></td></tr></table></td></tr><tr ><td class="posttext"> yup, in progress. testing my new solution with Matrix getters/setters because UpdateMat() is specialized for Position, Scale, etc. will try to update late tonight. <br><br></td></tr></table><br>
<a name="2089947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#293">[#293]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thinking of updating to 79, was the matrix problem sorted out for everyone? <br><br></td></tr></table><br>
<a name="2089955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#294">[#294]</a></td></tr></table></td></tr><tr ><td class="posttext"> i updated it but did not test it. <br><br></td></tr></table><br>
<a name="2090027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#295">[#295]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, cool Adam, I'll give it a go this weekend. <br><br></td></tr></table><br>
<a name="2090211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#296">[#296]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does this work with the latest monkey yet or is it still broke? <br><br></td></tr></table><br>
<a name="2090228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#297">[#297]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stuck in a hotel, waiting for car to be fixed I'm afraid. So I can't test it I'm afraid. <br><br></td></tr></table><br>
<a name="2090482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eNano</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#298">[#298]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Adam I'm new on this community and new on Monkey, I was really hoping to try minib3d but I had some troubles trying to install the module.<br>This is what I have so far:<br>- I've copied the module in modules folder and renamed to minib3d.<br>- I had the error that says "Native OS Module not implemented" so I did what you said in a post and changed the line in monkeyutility.mokey to "import gametarget" instead of "import os".<br>- I'm trying to run the example file firepaint3d.monkey but when I run it (using html5 Game - release) it jumps to mojographics.monkey and stops in " Method LoadSurface__UNSAFE__:Surface( surface:Surface,path$ ) " and gives this message: "Overriding method does not match any overridden method."<br>- I've tried with Android target and with other examples but the error is the same.<br>What could be wrong?<br>Thanks for all! <br><br></td></tr></table><br>
<a name="2090483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#299">[#299]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think i fixed some of those problems with the latest on GitHub, so you can try to download, or even copy/paste the code again.<br>Method LoadSurface__UNSAFE__ should be removed. It's not needed. <br><br></td></tr></table><br>
<a name="2090489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eNano</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#300">[#300]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool it works! thanks a lot! <br><br></td></tr></table><br>
<a name="2090622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eNano</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#301">[#301]</a></td></tr></table></td></tr><tr ><td class="posttext"> What could be the best way to do some basic UI elements with minib3d? <br>I need to draw some rectangles, frames and text over the 3d scene for context menus and stuffs like that, I've tried to play with SetMojoEmulation() but I have some bugs with DrawText()<br>Thanks! <br><br></td></tr></table><br>
<a name="2090629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#302">[#302]</a></td></tr></table></td></tr><tr ><td class="posttext"> SetMojoEmulation() triggers the Mojo-esque layer of the renderer. You can then do things as you normally do with Mojo. Then you must end with RenderWorld().<br>If there are bugs with DrawTest() point them out to me and I will have a look, but everything else should work. <br><br></td></tr></table><br>
<a name="2090630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eNano</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#303">[#303]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot, that was the problem. I was drawing a rectangle, then I called RenderWorld() and after that I used DrawText(). Another thing that I was doing wrong is call SetMojoEmulation() before the Init() method, that was giving me the message " **Image Not Preloaded: monkey://data/mojo_font.png  "<br>Thanks! <br><br></td></tr></table><br>
<a name="2090877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Deen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#304">[#304]</a></td></tr></table></td></tr><tr ><td class="posttext"> how is your COLLADA importer mate? is there any light? :) <br><br></td></tr></table><br>
<a name="2090987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#305">[#305]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still two issues:<br><br>Method New in TColTree is still private.<br><br>And... are the problems with CameraPick atm? <br><br></td></tr></table><br>
<a name="2091017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#306">[#306]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> how is your COLLADA importer mate? is there any light? :) <br></div><br>no time! still fixing octree bugs. will get to next.<br><br><div class="quote"> And... are the problems with CameraPick atm? <br></div><br>hmm. does the pick_collision example work? i thought this was only with monkey 78g. i'll see if i can install the github version and test it. <br><br></td></tr></table><br>
<a name="2091051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#307">[#307]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adam that example works great but just try this, replace the sphere with a simple cube, move the camera away a bit and try to hit the right or the lower face of the cube. It works but not that well in some areas. Don't know if this is a scale problem as a face has only 2 triangles?<br><br><pre class=code>
sphere1 = CreateCube() 'CreateSphere(20)
sphere1.ScaleEntity(10,10,10)
</pre><br><br>All in all it's only a small issue.<br><br>What really bugs me is that when I have cube 1 in front of cube 2 which is in a line with the camera I always get the last object on that line picked even though PickedXYZ returns the (correct) front object. I'll do an example... <br><br></td></tr></table><br>
<a name="2091050"></a>

<a name="2091054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#308">[#308]</a></td></tr></table></td></tr><tr ><td class="posttext"> So here's an example I get headachse:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import minib3d

Function Main()
  New Game
End

Class Game Extends App
  Field cam:TCamera
  
  Field light:TLight
  Field cube1:TMesh
  Field cube2:TMesh
  Field dot:TMesh
  
  Field init_gl:Bool = False
  
  Field cz:Float, pm:Int
  
  Method OnCreate()
    SetUpdateRate 30
    SetRender()
  End

  Method Init:int()
    If init_gl Then Return 1
    
    If Not TPixmap.PreLoadPixmap(["mojo_font.png"]) Then Return 0
    init_gl = True
    
    cam = CreateCamera()
    cam.CameraClsColor(0,0,80)
    cam.PositionEntity 0.5,1,-5
    
    light=CreateLight(1)
    light.PositionEntity 0,3,-3
    
    dot = CreateSphere(5)
    dot.ScaleEntity(0.2,0.2,0.2)
    dot.EntityColor(0,255,0)
    
    cube1 = CreateCube()
    cube1.NameEntity( "Cube 1" )
    cube1.EntityPickMode(2)
    'cube1.CollisionSetup(1, COLLISION_METHOD_POLYGON, 1.0)		
    cube1.EntityFX(2)
    cube1.RotateEntity(145,145,0)
    
    cube2 = CreateCube()
    cube2.NameEntity( "Cube 2" )
    cube2.EntityPickMode(2)
    cube2.PositionEntity(3,1,5)
    'cube2.CollisionSetup(1, COLLISION_METHOD_POLYGON, 1.0)		
    cube2.EntityFX(2)
    cube2.RotateEntity(145,145,0)
    
    Print "main: intit done"
    
    Return 1
  End
  
  Method OnUpdate()	
    If KeyHit(KEY_CLOSE) Or KeyHit(KEY_ESCAPE) Then Error ""
  
    If Not Init() Then Return
  
    If KeyDown(187)
      'anim_time += 1
      cz +=0.1
      cam.CameraZoom(cz)
    End
    If KeyDown(189)
      'anim_time -= 1
      cz -=0.1
      cam.CameraZoom(cz)
    End
    
    If TouchDown(0)
      Local e:TEntity = cam.CameraPick(TouchX(), TouchY() )
      
      Local surf:TSurface = PickedSurface()
      Local v0:Int, v1:Int, v2:Int
      
      dot.PositionEntity(PickedX(), PickedY(), PickedZ() )
      
      If surf
        v0 = surf.TriangleVertex( PickedTriangle(), 0)
        v1 = surf.TriangleVertex( PickedTriangle(), 1)
        v2 = surf.TriangleVertex( PickedTriangle(), 2)
        
        'Print "*** "+v0+" "+v1+" "+v2
        
        surf.VertexColor(v0,255,0,0)
        surf.VertexColor(v1,255,0,0)
        surf.VertexColor(v2,255,0,0)
        
        'surf.RemoveTri( PickedTriangle)
      Endif
      
      If Not e Then Print "null pick" Else Print e.classname + " " + e.EntityName()
    Endif
  End
  
  Method OnRender()
    If Not Init() Then Return
    RenderWorld()
  End
End
</textarea><br><br>Basically it's your example with two cubes. I can pick the front one easily but get no camera pick on the second one... <br><br></td></tr></table><br>
<a name="2091507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#309">[#309]</a></td></tr></table></td></tr><tr ><td class="posttext"> FYI - I've one last bug to fix with the next version, but. Sometimes one bug leads to others. Keep fingers crossed! <br><br></td></tr></table><br>
<a name="2091510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#310">[#310]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, looking forward to the release Adam. <br><br></td></tr></table><br>
<a name="2092005"></a>

<a name="2092006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#311">[#311]</a></td></tr></table></td></tr><tr ><td class="posttext"> This small routine seems to drive the 2D emulation nuts for some reason. Lots of graphical blending glitches.<br><br><pre class=code>	Function Text(text:String, x:Int, y:Int, center_x:Float = 0.0, center_y:Float = 0.0)
		Local b:Int = GetBlend
		SetBlend AdditiveBlend
		DrawText(text, x, y, center_x, center_y)
		SetBlend b	
	End Function</pre><br><br>Blending does not seem to work on text at all BTW. Repeatedly calling of Text() in the one frame, seems to drive the blending nutty in GLFW at least. SetBlend() seems to create a new blending layer if the previous layers blend is not the same as the new one, which can happen very easily. So it looks like if you call SetBlend at lot, blending gets corrupt? <br><br></td></tr></table><br>
<a name="2092008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#312">[#312]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> SetBlend() seems to create a new blending layer if the previous layers blend is not the same as the new one, which can happen very easily. <br></div><br>correct, it's the only way i could do it off the top of my head. i wonder if another way would be to associate a layer per blend value?<br>blending should work with text, though, i'll look into it. <br><br></td></tr></table><br>
<a name="2092026"></a>

<a name="2092027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nigelibrown</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#313">[#313]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is miniB3D capable of outputting to dual screens? Are there any examples of how to achieve this? I have a dual head graphics card and need to go fullscreen on both! in FULLSCREEN mode <br><br></td></tr></table><br>
<a name="2092030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#314">[#314]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> i wonder if another way would be to associate a layer per blend value? <br></div><br><br>I think that's a much better idea Adam, it should be quicker(less surfaces) and also much closer to how the original blitz basic engine operates too. <br><br></td></tr></table><br>
<a name="2092157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#315">[#315]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is miniB3D capable of outputting to dual screens? <br></div><br>i had to look this up, but it seems you would have to create two window contexts, which GLFW3 can do, but the current GLFW2.x that monkey is using is out of date:<br><a href="http://www.glfw.org/docs/3.0/monitor.html" target="_blank">http://www.glfw.org/docs/3.0/monitor.html</a><br><br>So the answer is sadly, no. i've pushing Mark to get a GLFW3 update for a long, long time. <br><br></td></tr></table><br>
<a name="2092159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#316">[#316]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't two screens just seen, virtually, as a single monitor with a combined resolution of the two monitors? Therefore you could just split that res into two different camera views? <br><br></td></tr></table><br>
<a name="2092162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#317">[#317]</a></td></tr></table></td></tr><tr ><td class="posttext"> two camera views would center the perspective point in the center of each of the two views, which isn't correct, it needs to go in the middle of the two monitors. some gfx cards will treat a full screen as one opengl view, which then miniB3D will handle that (but I think it's activated by a manual setting-- too dependent upon drivers). <br><br></td></tr></table><br>
<a name="2092165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#318">[#318]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting, I have a dual monitor setup, I'll try this today to see how MB3D handles my setup. <br><br></td></tr></table><br>
<a name="2092297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julesd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#319">[#319]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondering if this is still on going, when I go to github, the dates for the files are from a while back.<br><br>I noticed the bunny demo has 2d overlayed on top of 3D, is it posible to use this to create a GUI for miniB3D? <br><br></td></tr></table><br>
<a name="2092347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#320">[#320]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Julesd:<br><br>Feature-wise, things have slowed a little but Adam is still on top of any bugs that people come across.<br><br>The 2D functions can be used for a GUI. I rely on them for my own games 2D elements(Buttons, map, score, onscreen joypad etc) and it works very well.<br><br><br>@Adam:<br><br>I can't seem to get SetScissor() to work with the Mojo emulation, is this to be an expected limitation? <br><br></td></tr></table><br>
<a name="2092390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#321">[#321]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can't seem to get SetScissor() to work with the Mojo emulation, is this to be an expected limitation? <br></div><br>should work? does it not scissor anything?<br><div class="quote"> Just wondering if this is still on going <br></div><br>i'm still here, i'm stuck on a nasty, brain-burning bug with the octree. <br><br></td></tr></table><br>
<a name="2092437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#322">[#322]</a></td></tr></table></td></tr><tr ><td class="posttext"> Question is there some kind of LoD going on behind the scenes i can't find???. Reason for that is if i manually change the vertices of a mesh only half of them seem to actually move, but if i clear the surface and rebuild it with the new vert coords it works fine.<br><br>But that is really slow and i'd just like to push all that info into a buffer if possible, i made a working CAL3D module that can use minib3d as a renderer but when i try pushing the vertices into the model only half of them move.<br><br>Here is a demo of it working using minib3d Cal3d mesh + skeleton and animation files<br><br><a href="http://vigilsoft.net/cal3dtest/" target="_blank">http://vigilsoft.net/cal3dtest/</a><br>(Press S to back up the cam and Up to look up, i haven't centered the model yet.)<br><br>This is how it is supposed to look (but slow because of the surface clear)<br><img src="http://vigilsoft.net/cal3dtest/cleared.JPG"><br><br>This is how it looks just pushing the vert position data only<br><br><img src="http://vigilsoft.net/cal3dtest/animfucked.JPG"> <br><br></td></tr></table><br>
<a name="2092436"></a>

<a name="2092435"></a>

<a name="2092439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#323">[#323]</a></td></tr></table></td></tr><tr ><td class="posttext"> erm nvm i guess i have to clear the surface, i tried using cached tri info and the normals went crazy, even if i use the calculated normals Cal3d spits out, in the end it seems that is just how cal3d works each render it gives you a vert,tri,norm,tex coord buffer that you have to slap back on the mesh with each render. <br><br>anyways i managed to do it now without the speed hit. <br><br>i've sort of always prefered cal3d as a model/animation library over b3d but i've never managed to get them to work together until now. This actually doesn't use anything other than TMesh to render the animations and models. <br><br></td></tr></table><br>
<a name="2092456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#324">[#324]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam:<br><br>I'm away from my PC just now. It seemed to be not working at all.  I'll do some further SetScissor() tests when I get back. <br><br></td></tr></table><br>
<a name="2092521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#325">[#325]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a small test program that illustrates the SetScissor() problem.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Strict
Import minib3d

Class Game Extends App
	Field mesh1:TEntity
	Field cam:TCamera
	
	Method OnCreate:Int()
		SetRender()
		mesh1 = CreateCube(); ScaleEntity(mesh1, 0.5, 0.5, 0.5)
		cam = CreateCamera()
		cam.CameraClsColor(50, 111, 0)
		cam.MoveEntity(0, 0, -3)
		AmbientLight(255, 255, 255)
		SetUpdateRate(60)
		Return 0 
	End	
	
	Method OnUpdate:Int()
		If KeyHit(KEY_ESCAPE) OnBack()
		TurnEntity(mesh1, 0, 1, 0)
		UpdateWorld()
		Return 0
	End

	Method OnRender:Int()
		RenderWorld()
		SetMojoEmulation()
		SetScissor(200, 100, 200, 200)
		DrawText "01234567890012345678900123456789001234567890_TEST_01234567890012345678900123456789001234567890", 320, 240, 0.5,0.5
		Return 0
	End	

	Method OnBack:Int()
		EndApp()
		Return 0
	End	
End

Function Main:Int()
	New Game
	Return 0
End</textarea><br><br>I'm kinda hoping its me that's doing something wrong here as it would be functionality that would be sorely missed. <br><br></td></tr></table><br>
<a name="2092520"></a>

<a name="2092735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#326">[#326]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any luck with this Adam? I'm working around it but if I can get it working it would mean that  I could use my GUI. <br><br></td></tr></table><br>
<a name="2092734"></a>

<a name="2092764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#327">[#327]</a></td></tr></table></td></tr><tr ><td class="posttext"> RenderWorld() should go last. I'll look into this, but may not have time until Tues. <br><br></td></tr></table><br>
<a name="2092771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#328">[#328]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whoops, I'll try it with RenderWorld() in the correct position.<br><br>No problem Adam, no hurry, it's not workflow stopper just an inconvenience for now. <br><br></td></tr></table><br>
<a name="2092791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#329">[#329]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit: <br><br>Nope, the SetScissor() command only acknowledges the last call before RenderWorld(). Therefore you can't call SetScissor() more than once each render loop. Not sure if there is a way around this?<br><br><pre class=code>Strict
Import minib3d

Class Game Extends App
	Field mesh1:TEntity
	Field cam:TCamera
	
	Method OnCreate:Int()
		SetRender()
		mesh1 = CreateCube(); ScaleEntity(mesh1, 0.5, 0.5, 0.5)
		cam = CreateCamera()
		cam.CameraClsColor(50, 111, 0)
		cam.MoveEntity(0, 0, -3)
		AmbientLight(255, 255, 255)
		SetUpdateRate(60)
		Return 0
	End
	
	Method OnUpdate:Int()
		If KeyHit(KEY_ESCAPE) OnBack()
		TurnEntity(mesh1, 0, 1, 0)
		UpdateWorld()
		Return 0
	End

	Method OnRender:Int()
		SetMojoEmulation()
		SetScissor(200, 100, 200, 200)' Ignored
		DrawText "01234567890012345678900123456789001234567890_TEST_01234567890012345678900123456789001234567890", 320, 240, 0.5,0.5
		SetScissor(0, 0, DeviceWidth(), DeviceHeight())' Because of this line.
		RenderWorld()
		Return 0
	End

	Method OnBack:Int()
		EndApp()
		Return 0
	End
End

Function Main:Int()
	New Game
	Return 0
End</pre><br><br>I 'think' the problem is that the SetScissor() command is just modifying the current camera clip plane as opposed to inserting a glScissor() GL command into the rendering pipeline? <br><br></td></tr></table><br>
<a name="2092790"></a>

<a name="2092789"></a>

<a name="2092788"></a>

<a name="2092785"></a>

<a name="2092786"></a>

<a name="2092787"></a>

<a name="2093316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#330">[#330]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strange, I am not sure there is something wrong with SetBlend(), I just noticed that if I draw some blank quads after printing some text to the screen, then the quads have a garbled version of the font texture within them. It's almost as if the current surfaces brush is using the previous font texture when drawing quads in the mojo2d emulation. <br><br></td></tr></table><br>
<a name="2093356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#331">[#331]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, sorry i haven't had any time, been moving the family to a new place. but i will look at this as soon as i can! <br><br></td></tr></table><br>
<a name="2093372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#332">[#332]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem Adam, thanks for the update and good luck with the big move. <br><br></td></tr></table><br>
<a name="2093606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#333">[#333]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey i keep getting Error #3697: A texture is bound on sampler 0 but not used by the fragment program<br><br>whenever i create a flash build, it's only when i try to load a b3d file that is using lightmapping. <br><br></td></tr></table><br>
<a name="2093822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#334">[#334]</a></td></tr></table></td></tr><tr ><td class="posttext"> With the latest stable monkey I get loads of 'x is private' errors for different classes in the build<br><br>Edit: It was TColTree that was the problem 'TColTree.new() is private' going into the TColTree.monkey file and putting a Public before the Method New() allows it to compile at least :D <br><br></td></tr></table><br>
<a name="2093809"></a>

<a name="2093946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#335">[#335]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hey i keep getting Error #3697: A texture is bound on sampler 0 but not used by the fragment program<br><br>whenever i create a flash build, it's only when i try to load a b3d file that is using lightmapping. <br></div><br>i wonder if there's an empty texture somewhere. the renderer is suppose to fill in empty textures with a null texture for Flash to keep it from complaining. <br><br></td></tr></table><br>
<a name="2093947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#336">[#336]</a></td></tr></table></td></tr><tr ><td class="posttext"> yea i'm not sure what happened it was a map that had a bad material somewhere (lightmapped) i'm still looking into this myself but i got around it by being very careful with texture assignments when i exported the map and it seemed to clear itself up.<br><br>Also i just committed a fork this morning containing the changes i made that added lightmaps for html5, Loadanimseq and fixed some child entities not updating properly when the parent is a bone.<br><br>I was considering adding the TTerrain code that was created for minib3d on bmax over to monkey if you didn't mind, i know you have your hands full but i'd like to help out where i can. <br><br></td></tr></table><br>
<a name="2093990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cocopino</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#337">[#337]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, thanks for this amazing module.<br>I think I found a bug though in the CameraPick command, which would be the main way the user should interact with my game-to-be. <br><br>Illustration of the problem below:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import minib3d

Function Main()
	New Game
End

Class Game Extends App

	Field cam:TCamera
	Field cube:TMesh
	Field update:Int
	Field updateRate:Int = 30
	Field touchCount:Int = 0

	Method OnCreate()

		SetUpdateRate updateRate
		SetRender()

		cam = CreateCamera()
		CameraClsColor(cam, 100, 100, 200)
		cam.PositionEntity 0.5, 2, -5

		cube = CreateCube()
		cube.NameEntity("Cube 1")
		cube.EntityPickMode(2)

	End

	Method OnUpdate()

		If KeyHit(KEY_CLOSE) Or KeyHit(KEY_ESCAPE) Then Error ""

		If TouchHit()

			Local e:TEntity = cam.CameraPick(TouchX(), TouchY())

			If Not e Then
				Print update + " You missed!"
			Else
				touchCount += 1
				Print update + " " + e.classname + " " + e.EntityName()
			EndIf

		EndIf

		'start moving the cube around every second after 5 picks/touches
		If (touchCount &gt; 4)
			update += 1
			If (update Mod updateRate) = 0
				cube.MoveEntity(0, 0.2, 0)
			EndIf
		EndIf

		UpdateWorld()

	End
  
	Method OnRender()

		RenderWorld()

	End
End
</textarea><br><br>The first 5 touches/picks will be fine, then the cube will start moving. As soon as it has moved a little, camerapicks stop working. <br>In another thread someone mentioned "Camerapicks don't work anymore", suggesting a prior version did work correctly. Does anyone know which version he could be referring to, or even better yet, is this a known problem that is on the todo list?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2094290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#338">[#338]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm having the same CameraPick issue. I know you've quite some workload Adam, have you had a chance to look at it yet? Thanks! :) <br><br></td></tr></table><br>
<a name="2095984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#339">[#339]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this project still active? <br><br></td></tr></table><br>
<a name="2096098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#340">[#340]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd also like to know if this is still active... <br><br></td></tr></table><br>
<a name="2096193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#341">[#341]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks dead to me. <br><br></td></tr></table><br>
<a name="2096203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >adekto</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#342">[#342]</a></td></tr></table></td></tr><tr ><td class="posttext"> i got Error : Method TColTree.new() is private.<br>and Public is already befor 	Method New() no clue what to do here <br><br></td></tr></table><br>
<a name="2096215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#343">[#343]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just remove the private and it shoudl work... <br><br></td></tr></table><br>
<a name="2096263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >adekto</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#344">[#344]</a></td></tr></table></td></tr><tr ><td class="posttext"> there is no private, and it still gives the same error <br><br></td></tr></table><br>
<a name="2096267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Duke87</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#345">[#345]</a></td></tr></table></td></tr><tr ><td class="posttext"> therefor you go to<br>minib3d/tcoltree.monkey<br><br>Search for the Class TColTree<br><br>[line 42 or something] and comment out<br>	'Private<br>	<br>	Global searchNode:Node[128]<br><br>	Method New()<br>	<br>	End Method<br><br>... <br><br></td></tr></table><br>
<a name="2096752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#346">[#346]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or put 'Public:' in front of the new method <br><br></td></tr></table><br>
<a name="2096877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#347">[#347]</a></td></tr></table></td></tr><tr ><td class="posttext"> @AdamRedwoods: Check ya email :)<br><br>Update: Adam has said via email that he's still looking at octrees and locating a bug in there but its still being worked on. <br><br></td></tr></table><br>
<a name="2096777"></a>

<a name="2097009"></a>

<a name="2097010"></a>

<a name="2097022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#348">[#348]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone have code to change the viewport in game after the glfw res stuff, I change the resolution using the monkey commands and that works but the new res causes flicker like the viewport for minib3d is not updated. This is the Linux build haven't tried it on windows yet.<br><br>It appears that the res change has no effect on windows, on nix it causes the flickering only when using minib3d <br><br></td></tr></table><br>
<a name="2098176"></a>

<a name="2098177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#349">[#349]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any model format out there, which can handle animations (except b3d) and minib3d support it <br><br></td></tr></table><br>
<a name="2098188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#350">[#350]</a></td></tr></table></td></tr><tr ><td class="posttext"> [q]Is there any model format out there, which can handle animations (except b3d) and minib3d support it[/q]<br>Not currently. I do have an incomplete Collada importer, which is a part of my plan to get a Blender-&gt;MiniB3D pipeline. <br><br></td></tr></table><br>
<a name="2098190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#351">[#351]</a></td></tr></table></td></tr><tr ><td class="posttext"> @AdamRedwoods<br>thanks for you answer<br><br>me and my mate working on a basic FBX Importer (only version 2010) <br><br></td></tr></table><br>
<a name="2098198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#352">[#352]</a></td></tr></table></td></tr><tr ><td class="posttext"> i have a cal3d library that works with monkey minib3d. it also has spring systems for flowing hair and capes. i should probably put it on github or something. <br><br></td></tr></table><br>
<a name="2098222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >k.o.g.</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#353">[#353]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Landon<br>That would be great :) <br><br></td></tr></table><br>
<a name="2098273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#354">[#354]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="https://code.google.com/p/monkey-cal3d-minib3d/" target="_blank">https://code.google.com/p/monkey-cal3d-minib3d/</a><br><br>Still pretty early in development, working out the kinks and such. added the blitzmax version i made as well. <br><br></td></tr></table><br>
<a name="2098283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#355">[#355]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam is free entity in there yet? <br><br></td></tr></table><br>
<a name="2099072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#356">[#356]</a></td></tr></table></td></tr><tr ><td class="posttext"> CameraPick issue can be solved  by commenting out the "If col_obj.RaySphereTest(..." line and its EndIf (but not the code between them!) in tpick.monkey ,inside the Pick() function.It's not the best solution because there is no quicktest then.I think the col_info.ray_dir is just not the right value that we would need.I replaced RaySphereTest function with my own so now it works for me. <br><br></td></tr></table><br>
<a name="2099377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#357">[#357]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is MiniB3d using standard OpenGL stuff to render, or is shader and OpenGLES based? <br><br></td></tr></table><br>
<a name="2099684"></a>

<a name="2099685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#358">[#358]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is MiniB3d using standard OpenGL stuff to render, or is shader and OpenGLES based? <br></div><br>Both!<br>The basic import minib3d is opengl1.1es.<br><pre class=code>Import minib3d.opengl.opengles20</pre><br>is the opengl2.0 with shaders. The default shader is currently my own standard pipeline emulator.<br><br>of course, with XNA and Windows Phone, it uses something else.<br><br>In the future I hope to focus solely on shaders. <br><br></td></tr></table><br>
<a name="2099706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#359">[#359]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info. For the game I am working on with my wife, we want to go the 3D route. Will check out MiniB3D intensively when the first character models are created and animated. I already saw that MiniB3d supports the most important file formats. Which is good. <br><br></td></tr></table><br>
<a name="2099710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#360">[#360]</a></td></tr></table></td></tr><tr ><td class="posttext"> The only issue I have had is freeentity not removing the entity so its stuck in the 3d world, its very capable as a engine but there are a few niggles that once sorted would be brilliant.<br><br>Niggles I have is:<br>1)freeentity not getting rid of entity from 3d world<br>2)changing resolution in game doesn't scale the camera viewport<br><br>If those were sorted it would be solid as a engine :) <br><br></td></tr></table><br>
<a name="2099752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#361">[#361]</a></td></tr></table></td></tr><tr ><td class="posttext"> yea what i ended up having to to do in that cal3d port is clear the surfaces to remove stuff. <br><br></td></tr></table><br>
<a name="2100316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Salmakis</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#362">[#362]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, is it really working with HTML5 Target?<br>i wanted just to try some examples, but the precompiler stucks at <br><pre class=code>
#If Not BRL_OS_IMPLEMENTED
#Error "Native OS Module not implemented"
#Endif
</pre><br>in os.monkey :(<br>afaik brl.os is not aviable in the HTML5 target<br>(monkey Version: 81b) <br><br></td></tr></table><br>
<a name="2100665"></a>

<a name="2100666"></a>

<a name="2100667"></a>

<a name="2100668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#363">[#363]</a></td></tr></table></td></tr><tr ><td class="posttext"> was that the issue from monkeyutility calling import os instead of Import gametarget? <br><br></td></tr></table><br>
<a name="2101018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#364">[#364]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> was that the issue from monkeyutility calling import os instead of Import gametarget? <br></div><br>Yeah, you can just remove Import os. I don't think it needs it, it was for the LoadString which got moved.<br>I really need to update miniB3D. I wish I could sign up for a programming retreat somewhere in the mountains. <br><br></td></tr></table><br>
<a name="2101019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#365">[#365]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, I had no idea -- I thought I'd read that it worked on HTML5 but ran into the same error!<br><br>It seems to work here, has a few 'shader linking errors' but seems to run. Cool! <br><br></td></tr></table><br>
<a name="2104162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Carlo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#366">[#366]</a></td></tr></table></td></tr><tr ><td class="posttext"> i have a error<br><br>Class TMesh Extends TEntity<br><br>Field col_tree:TColTree=New TColTree<br> Error : Method TColTree.new() is private.<br><br>thanks<br><br>Carlo <br><br></td></tr></table><br>
<a name="2106253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#367">[#367]</a></td></tr></table></td></tr><tr ><td class="posttext"> then make it public like the dirty french stripper she is. <br><br></td></tr></table><br>
<a name="2111445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#368">[#368]</a></td></tr></table></td></tr><tr ><td class="posttext"> I seem to have the same problem.<br><br>Can somebody give me a line of code how to fix that private problem? <br>THX <br><br></td></tr></table><br>
<a name="2111448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#369">[#369]</a></td></tr></table></td></tr><tr ><td class="posttext"> Go into the TColTree class and put Public on a new line above the New method/function this will tell the parser its public and stop the error <br><br></td></tr></table><br>
<a name="2111449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#370">[#370]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the quick answer! Long time not seen. <br><br>Now I'm getting to a good old "Memory access violation", and a line "glBindBuffer(GL_ARRAY_BUFFER,0)" of opengles11.monkey is highlighted.<br><br>Don't know much about GL, so this seems to be a tough one. <br><br></td></tr></table><br>
<a name="2111450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#371">[#371]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is not one of the minib3d errors and relates to binding a opengl data buffer. Does the machine support vbos? <br><br></td></tr></table><br>
<a name="2111451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#372">[#372]</a></td></tr></table></td></tr><tr ><td class="posttext"> I even don't know what vbos is :-/ <br><br></td></tr></table><br>
<a name="2111453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#373">[#373]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vertex Buffer Objects some old cards don't support them, iirc minib3d was coded to allow for old cards to use it but it might be a old version of minib3d before they were added. <br><br></td></tr></table><br>
<a name="2111455"></a>

<a name="2111456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#374">[#374]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are they reqired? Or can I rem them out somehow? <br><br>I'd be glad  having some simple rendering. <br><br></td></tr></table><br>
<a name="2111459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#375">[#375]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you downloaded the latest minib3d build it should not be required, however some of the minib3d systems have serious issues with monkey.<br><br>These are:<br>1) glfw3 - z order is miffed<br>2) resolution changes - this can screw up minib3d<br>3) issues with freeing entities - creating and freeing entities can cause issues with entities remaining in the game just stationary dead ones. <br><br></td></tr></table><br>
<a name="2111458"></a>

<a name="2111460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#376">[#376]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's no biggie, as long ad I can port a simple Blitz3D Code, with a few modifications. I mean, simple in terms of 3D, but complex AI. <br><br></td></tr></table><br>
<a name="2111463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#377">[#377]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its always good to know though :) <br><br></td></tr></table><br>
<a name="2111464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#378">[#378]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah sure, Thanks again. Do you think my older laptop doesn't support the min. OGL version? <br><br></td></tr></table><br>
<a name="2111465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#379">[#379]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow I got it working. Had to rem out 4 of then glBind thingies. Cool. <br><br></td></tr></table><br>
<a name="2111466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#380">[#380]</a></td></tr></table></td></tr><tr ><td class="posttext"> It works great on glfw2 :) <br><br></td></tr></table><br>
<a name="2111467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#381">[#381]</a></td></tr></table></td></tr><tr ><td class="posttext"> the fps are fluctuating a lot, from 30 to 1, any idea what could be the cause? It seems illogical. <br><br></td></tr></table><br>
<a name="2111468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#382">[#382]</a></td></tr></table></td></tr><tr ><td class="posttext"> It really depends on ya code one thing I can recommend is dont load entities or texture s lot.<br><br>Freeing entities is also a nono <br><br></td></tr></table><br>
<a name="2111472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#383">[#383]</a></td></tr></table></td></tr><tr ><td class="posttext"> it's just the sample that comes with it, animation_test.monkey, with 4 NPCs, not animated tho. fps starts smoothly at 30 after about 5s it starts jumping between 1 and 15. Strange. Priority problem maybe. <br><br></td></tr></table><br>
<a name="2111487"></a>

<a name="2111488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#384">[#384]</a></td></tr></table></td></tr><tr ><td class="posttext"> After reming out those 4 zombie NPCs, I seem to have a steady framerate. Tho, I would expect that with 14 Triangles in the scene.<br><br>I started trying to port a 30kb Source, learning by doing. After 8 Hours of  partially very redundant editing, I am getting an opinion about MiniB3D for monkey.<br><br>I don't like the Case sensitive feature, not Recognizing eg. createcube(), but for instance the correct MilliSecs() as saved by the Blitz IDE is not recognized, but Millisecs() works, which I'd consider a bug.<br><br>Basicly there seems to be a LOT of manual converting to certain nontolerant MiniB3D standarts that are pretty far away from common Blitz code.<br><br>So I think what is really missing is a Code processor that is capable of converting most old Blitz3D code to a hybrid monkey Project sourcecode in which the 3D department is handled by MiniB3D and the rest by monkey / mojo itself, eg. file handling, 2D etc.<br><br>That being said, I am a late bird and a total beginner with monkey. Maybe I should read more in the beginners section ^^ <br><br><br><br><br><br><br><br><br><br><br><br><br>. <br><br></td></tr></table><br>
<a name="2111787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xtie</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#385">[#385]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm trying the latest MonkeyX and minib3d, desktop version builds ok but with HTML5 I get this error:<br><br><pre class=code><b>Error : Unable to find overload for glDrawElements(Int,Int,Int,DataBuffer).</b></pre><br><br>I also tried <pre class=code>import minib3d.opengl.opengles20</pre> with the guide <a href="http://www.monkey-x.com/Community/posts.php?topic=5703&amp;page=7" target="_blank">here</a> <br><br></td></tr></table><br>
<a name="2111786"></a>

<a name="2111785"></a>

<a name="2111784"></a>

<a name="2111783"></a>

<a name="2111782"></a>

<a name="2111781"></a>

<a name="2120410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#386">[#386]</a></td></tr></table></td></tr><tr ><td class="posttext"> just comment it out, it's for wireframe drawing. also comment out the one right below it under<br><br><pre class=code>

If vbo	
																																																																																																																																																																																																																																																																															
					glDrawElements(GL_TRIANGLES,surf.no_tris*3,GL_UNSIGNED_SHORT, 0)
				
				Else

					'glDrawElements(GL_TRIANGLES,surf.no_tris*3,GL_UNSIGNED_SHORT,surf.tris.buf) &lt;---- comment this guy out
					
				Endif

</pre> <br><br></td></tr></table><br>
<a name="2120409"></a>

<a name="2120411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#387">[#387]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey one little fix i recommend in tpixmaphtml5.monkey<br><br><pre class=code>

	Method PreLoadData:Void(f$, id:Int)
		''we can do this with buffers, when available
		'' then also expand this class as the Buffer Callback
		
		If id&lt;1 Then Return
		
		f = FixDataPath(f)
		If f.Find("monkey://") &gt; -1 then
			f=f.Split("//")[1] 'for the html5-- native class doesn't use monkey:// prefix
		Endif
		Local d:PreloadData = New PreloadData
		d.id = id
		d.data = LoadImageDataHTML(f, id)
		
		p_map.Set( id, d )
		
	End
</pre><br><br>swap the function out with the one above, this allows you to preload external textures from your webserver.<br><br>then when preloading you can use<br><br><pre class=code>
TPixmap.PreLoadPixmap(["http://vigilsoft.net/Zombie.jpg","mojo_font.png"])
</pre><br><br><br>then later on use something like this<br><pre class=code>
		If TPixmap.IsLoaded( "http://vigilsoft.net/Zombie.jpg" ) And hasz = False
			EntityTexture(zombie[0],TTexture.LoadTexture(TPixmap.LoadPixmap("http://vigilsoft.net/Zombie.jpg")))
			hasz = True
		Endif
</pre> <br><br></td></tr></table><br>
<a name="2127469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted May)</font>&nbsp;<a href="#388">[#388]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone have a glfw3 version of this as all the z ordering is messed up on glfw3 <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
