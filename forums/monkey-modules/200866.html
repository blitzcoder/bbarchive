<!DOCTYPE html><html lang="en" ><head ><title >Monkey Box2D Port</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Monkey Box2D Port</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >Monkey Box2D Port</a><br><br>
<a name="2007100"></a>

<a name="2007101"></a>

<a name="2008317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Box2D is a considerably more difficult porting job than Physaxe and this is still a good week or two away from being in a releasable state. However, it is to a stage where it runs and it looks viable from a performance perspective so I figured I may as well let people know that it's on the way. <br><br> There are links below to HTML5 and Flash builds. As with the initial Fling demos, I take no responsibility for your browser falling over or any other calamity that may occur. There are still some major issues, not least of which are broken collisions, a large resource leak that makes it all slow down as you swap from demo to demo and the fact that the rendering and input classes haven't been converted to mojo fully (so several demos that require moving objects with the mouse will make no sense because you can't).<br><br> Anyway, that said, here they are. Cycle through the demos with the arrow keys. I suggest that you cycle to the right.<br><br><a href="http://www.stickydesigns.com/monkeybox2d/flash/MonkeyGame.html" target="_blank">Flash</a><br><a href="http://www.stickydesigns.com/monkeybox2d/canvas/MonkeyGame.html" target="_blank">HTML5</a><br><br> I'll update as I can. Oh, and if anyone is a Box2D expert and wants to suggest where I might look for the collision problem, I'm all ears.<br><br>Edit: It's out and the project home is here: <a href="http://code.google.com/p/monkeybox2d/" target="_blank">http://code.google.com/p/monkeybox2d/</a> <br><br></td></tr></table><br>
<a name="2007104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The slowdown is fixed. <br><br></td></tr></table><br>
<a name="2007105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's awesome dude! No need for chipmunk anymore I guess. <br><br></td></tr></table><br>
<a name="2007110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> good demos, good job sir <br><br></td></tr></table><br>
<a name="2007111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent work so far!  Yea notice there's a few collision problems so far - speed is good tho <br><br></td></tr></table><br>
<a name="2007126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> No need for chipmunk anymore I guess. <br></div><br><br>I wouldn't say that necessarily. Presumably there's a reason why chipmunk exists as well as Box2D in other languages. On the other hand, I could understand feeling less interested in slogging through a port of a library that is a duplicate to some extent. <br><br></td></tr></table><br>
<a name="2007208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting, having the flash demos running in another tab really nails performance of other tabs on my machine, (even when monkey tab is not displayed).<br><br>I'm not getting it with multiple demos running of other engines: eg<br><br><a href="http://www.sideroller.com/wck/" target="_blank">http://www.sideroller.com/wck/</a> <br><br></td></tr></table><br>
<a name="2007213"></a>

<a name="2007214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, awesome work! Was hoping/praying someone would manage to convert Box2D, but had my suspicions it was too difficult (certainly I was put off after looking at the code).<br><br>I've used Box2D at work with C++ and I'm not sure I could do without it now, it's that good. Monkey and Box2D would be perfect.<br><br>Good luck with the rest of the port - fingers crossed you can get the collisions working. I'll be happy to send a donation your way should you get it fully working. <br><br></td></tr></table><br>
<a name="2007292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @simonh: I hope so too. To be honest it's a bit of a needle in a haystack hunt for what the issue is at the moment. It's much easier when things definitely don't work, but the collision detection just seems sloppy rather than completely broken.<br><br>@skid: That does seem odd. I wouldn't have thought that flash or the browser would allow a program to hog the CPU like that. <br><br></td></tr></table><br>
<a name="2007311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> im not an expert but have you tried experimenting with update rates to solve the collision issues? <br><br></td></tr></table><br>
<a name="2007313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Increasing the update rate does improve the situation but doesn't really fix the problem as the port should behave the same as the existing Box2D ports to Flash and Javascript. They both have some slack in the collision but they don't have objects passing through other object and the floor as the Monkey port currently does.<br><br>Besides that, increasing the update rate to fix the collisions results in unacceptable performance. <br><br></td></tr></table><br>
<a name="2007329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, did you try to contact any authors of ports?<br><br> maybe they had similar problems <br><br></td></tr></table><br>
<a name="2007613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've found and fixed part of the collision problems so that objects don't pass through each other. There's still some other issue that seems to cause a problem with velocity updates when some objects approach each other, which you can see as the ball drops towards the ramp in the stacks demo. The bug-hunt goes on.<br><br> I've also fixed some of the rendering and added the mouse handling stuff so you can grab things and move them around now. <br><br></td></tr></table><br>
<a name="2007636"></a>

<a name="2007637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matt</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work!<br><br>Can  you possibly post some sample monkey code for one of the examples? <br><br></td></tr></table><br>
<a name="2007674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure, but it's not very Monkey-like. When porting something like Box2D there's always a decision about whether to convert to naming conventions and idioms of the target language or stick closely to the original in order to benefit from the shared knowledge. At the moment the code reflects its origins as a Flash port of a C++ library.<br><br>Anyway, FWIW, here's the set-up for the stacks example.<br><br><pre class=code>
Class TestStack extends Test

    Method New()
	Super.New()
	'// Set Text field
	name = "Stacked Boxes"
	'// Add bodies
	Local fd :b2FixtureDef = New b2FixtureDef()
	Local sd :b2PolygonShape = New b2PolygonShape()
	Local bd :b2BodyDef = New b2BodyDef()
	bd.type = b2Body.b2_Body
	Local b :b2Body
	fd.density = 1.0
	fd.friction = 0.5
	fd.restitution = 0.1
	fd.shape = sd
	Local i :Int

	'// Create 3 stacks
	For Local i:Int = 0 Until 10 
            sd.SetAsBox((10) / m_physScale, (10) / m_physScale)
	    bd.position.Set((640/2+100) / m_physScale, (360-255+i*25) / m_physScale)
	    b = m_world.CreateBody(bd)
	    b.CreateFixture(fd)
	End 

	For Local i:Int = 0 Until 10 
            sd.SetAsBox((10) / m_physScale, (10) / m_physScale)
	    bd.position.Set((640/2-0+Rnd()*0.02 - 0.01) / m_physScale, (360-5-i*25) / m_physScale)
	    b = m_world.CreateBody(bd)
	    b.CreateFixture(fd)
	End 

	For Local i:Int = 0 Until 10 
            sd.SetAsBox((10) / m_physScale, (10) / m_physScale)
            bd.position.Set((640/2+200+Rnd()*0.02 - 0.01) / m_physScale, (360-5-i*25) / m_physScale)
            b = m_world.CreateBody(bd)
	    b.CreateFixture(fd)
        End 
	
        '// Create ball
	Local cd :b2CircleShape = New b2CircleShape()
	cd.m_radius = 40/m_physScale
	fd.density = 2
	fd.restitution = 0.2
        fd.friction = 0.5
        fd.shape = cd
        bd.type = b2Body.b2_Body
        bd.userData = New StringObject("ball")
        bd.position.Set(50/m_physScale, 100 / m_physScale)
        b = m_world.CreateBody(bd)
        b.CreateFixture(fd)
			
        '// Create ramp
        Local vxs := [New b2Vec2(0, 0),
                      New b2Vec2(0, -150 / m_physScale),
                      New b2Vec2(200 / m_physScale, 0)]
        sd.SetAsArray(vxs, vxs.Length)
        fd.density = 0
        fd.friction = 0.5
        fd.restitution = 0.1
        fd.shape = sd
        bd.type = b2Body.b2_staticBody
        bd.userData = New StringObject("ramp")
        bd.position.Set(0, 430 / m_physScale)
        b = m_world.CreateBody(bd)
        b.CreateFixture(fd)
    End
End 
	
</pre> <br><br></td></tr></table><br>
<a name="2007770"></a>

<a name="2007771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found and killed the bug with objects slowing down as they neared a collision. The only remaining obvious problem comparing to the Flash Box2D port is that the CCD demo isn't as stable.<br><br>Once that's resolved it's down to tidying up the code a bit and then it should be ready for a release.<br><br>I've noticed that the GLFW build has poor performance though, so there could be some work to do there, either in the Box2D code or perhaps in the monkey GC. <br><br></td></tr></table><br>
<a name="2007779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent news - well done <br><br></td></tr></table><br>
<a name="2008316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> And it's released:<br><br><a href="http://code.google.com/p/monkeybox2d/" target="_blank">http://code.google.com/p/monkeybox2d/</a> <br><br></td></tr></table><br>
<a name="2008320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Congrats! Im guessing you used JungleIDE when you developed this ;)<br><br>How do you run the demos? <br><br></td></tr></table><br>
<a name="2008321"></a>

<a name="2008322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> The answer is "yes and no". My comments on Jungle IDE are at the end of this thread: <a href="http://monkeycoder.co.nz/Community/posts.php?topic=949." target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=949.</a> <br><br>The Box2D demo works much like the Fling demo and there's a quick start page here: <a href="http://code.google.com/p/monkeybox2d/wiki/QuickStart" target="_blank">http://code.google.com/p/monkeybox2d/wiki/QuickStart</a> <br><br></td></tr></table><br>
<a name="2008323"></a>

<a name="2008324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for that Mr Shoes - I guessed with Jungle due to all the new lines at the end of your files :P<br><br>Wow it takes awhile Semanting... but looks great - Well done! <br><br></td></tr></table><br>
<a name="2008325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> That may be a result of the files passing through Jungle, or it could be my C# Flash-&gt;Monkey hacker or my Python tidy-up scripts.<br><br> ...or maybe they're just from me beating my forehead against the return key during the several days of staring at code looking for translation errors. <br><br></td></tr></table><br>
<a name="2008327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> It was a bug in JungleIDE (recently fixed) - every time you compiled, it would add a new line to your file...<br><br>Heres your very first issue:<br><br><a href="http://code.google.com/p/monkeybox2d/issues/detail?id=1" target="_blank">http://code.google.com/p/monkeybox2d/issues/detail?id=1</a><br><br>;) <br><br></td></tr></table><br>
<a name="2008328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh. I'll happily punt that to Mark. I can't test on any of those targets (well, there's the Android emulator, but I think I'd go mad testing on that) and have to assume that if it works on HTML5, Flash and GLFW then it should be working on the others too. <br><br></td></tr></table><br>
<a name="2008331"></a>

<a name="2008334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >invaderJim</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found the culprit for the non-compilation issue:<br><br>Line 188 in testcrankgearspulley.monkey, you're casting to the b2PulleyJoint type without assigning it to a value, which confuses the translator.<br><br>Removing the type-cast fixes the issue :)<br><br>No worky:<br><pre class=code>b2PulleyJoint(m_world.CreateJoint(pulleyDef))</pre><br><br>Worky:<br><pre class=code>m_world.CreateJoint(pulleyDef)</pre><br><br><br>Oh, and great work on porting this. Makes this monkey junkey very happy :D <br><br></td></tr></table><br>
<a name="2008332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AndyGFX</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> When i try compile it on Android target, compilation crash with:<br><br><pre class=code>
compile:
    [javac] d:\software\android-sdk-windows\tools\ant\main_rules.xml:384: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 2 source files to d:\software\Monkey\bananas\box2d\demo_start.build\android\bin\classes
    [javac] d:\software\Monkey\bananas\box2d\demo_start.build\android\src\com\monkey\MonkeyGame.java:8459: not a statement
    [javac] 		(bbt_8 instanceof bb_b2pulleyjoint_b2PulleyJoint ? (bb_b2pulleyjoint_b2PulleyJoint)bbt_8 : null);
    [javac] 		^
    [javac] 1 error
</pre> <br><br></td></tr></table><br>
<a name="2008343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just looked at the examples, well done muddy shoes :) <br><br></td></tr></table><br>
<a name="2008346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DIJ</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Love the examples :) <br><br></td></tr></table><br>
<a name="2008390"></a>

<a name="2008391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't get it. The link for the source (hg repo) gives a 404. Heeellllpp! ME WANT!!! :) <br><br></td></tr></table><br>
<a name="2008392"></a>

<a name="2008396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> @c.k.<br><br>You don't click on that link, it's for use if you're cloning via Mercurial. If you just want a download then the use the zip at: <a href="http://code.google.com/p/monkeybox2d/downloads/list" target="_blank">http://code.google.com/p/monkeybox2d/downloads/list</a> .<br><br>I'll get on to those errors later today. The sun's just coming up and it looks too nice out there to be tapping keys. I'm off to the Abel Tasman for a walk.<br><br>Edit: Bloody forum auto-linking. <br><br></td></tr></table><br>
<a name="2008393"></a>

<a name="2008394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using TortoiseHG and it reports the 404, both from the GUI as well as the commandline.<br><br>I guess everybody else is getting the ZIP file, eh?<br><br>(And careful... the link you gave me has an extra '.' at the end, which gives a 404...) :) <br><br></td></tr></table><br>
<a name="2008395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I messed up the command and removed a space. The repo is at <a href="https://monkeybox2d.googlecode.com/hg/" target="_blank">https://monkeybox2d.googlecode.com/hg/</a> <br><br></td></tr></table><br>
<a name="2008397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well done muddy shoes  shall have a good play with this later <br><br></td></tr></table><br>
<a name="2008417"></a>

<a name="2008418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Trying the new demo on my  Mac but no luck, seems to be trans throwing a wobble:<br><br><pre class=code>

TRANS monkey compiler V1.14
Parsing...
Semanting...
terminate called after throwing an instance of 'char*'

Process Complete
</pre><br><br>Oops, my bad, working now.... and collisions look awesomely fixed! <br><br></td></tr></table><br>
<a name="2008420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm seeing a few glitches. Are these something that can be fixed, or are they just part of Box2D with Monkey?<br><br>1. Stacked boxes (ball drop on ramp and knocks over blocks): when it hits the ramp, you can often see the ball go beyond the ramp's surface before coming back out and rolling down the ramp (just press 'R' and you'll see it eventually). The Box2DFlash demo doesn't show this behavior.<br><br>2. One-sided platform: the ball can be dragged through the wall in the direction that is supposed to be blocking. Drag it fast enough and it goes right through. The Box2DFlash demo shows this behavior as well.<br><br>This is a great addition to the Monkeyverse. THANK YOU! :) <br><br></td></tr></table><br>
<a name="2008422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Monkey demo is "taller" than the Flash demo and things have farther to fall and are therefore colliding at greater speeds. Box2D collisions are of the "allow overlap and then apply forces to separate" variety, as you can see most clearly with the stacks. I think of them as "squishy". Also, without CCD on, it's always going to be possible for collision tunnelling to occur (and I'm not sure that the CCD is infallible either, just better). <br><br> I'm not saying that the port is bug-free, by any means, but physics engines built to perform reasonably for game usage on moderately powerful devices generally require some compromise and you need to tweak settings and design around limitations. That said, if anyone with Box2D experience spots something that they think is definitely wrong then I'll certainly look into it. <br><br></td></tr></table><br>
<a name="2008538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a new 1.02 release. <br><br>* I believe I've found and fixed the CCD bug. It was due to me thinking that IntObject would be unboxed when performing an equality test. It isn't.<br><br>* I've altered the demo code so that the physics runs at 60fps with the rendering at 30fps. This tightens up the simulation nicely. If you're using the library in anger then you might want to spend some time experimenting with an optimal update rate for your purposes.<br><br>* I've added a domino pyramid test example, just because I like them. <br><br></td></tr></table><br>
<a name="2008541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just great, thank you! <br><br></td></tr></table><br>
<a name="2008589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looking great muddy! Thank you! <br><br></td></tr></table><br>
<a name="2008591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brilliant work, thanks. <br><br></td></tr></table><br>
<a name="2008592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just playing a little more, something seems to be up with the rendering on GLFW and XNA for me -- both flicker or show "ghost frames" and the XNA version crashes completely after a few seconds.<br><br>I had a quick look at OnRender but I don't really follow the "m_currTest.OnRender" stuff. <br><br></td></tr></table><br>
<a name="2008607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> What does "crashes completely" entail? Is it repeatable? Is there an error message?<br><br>I can only test HTML5, Flash and GLFW and they all work fine for me. Is anyone else seeing problems with the GLFW build? <br><br></td></tr></table><br>
<a name="2008624"></a>

<a name="2008625"></a>

<a name="2008627"></a>

<a name="2008630"></a>

<a name="2008631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cheese</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> @DruggedBunny<br><br>I believe I had a similar problem. (Flickering 'ghost' frames in GLFW (and extreme performance decrease), high-frequency flashing of purple in XNA, and the inability to compile for Android)<br><br>Doing the following seemed to remedy the issue for me just now:<br>- Update to the latest monkey release: v42(b)<br>- Ensure that you delete the demo's build folder after updating the module to the 1.02 release. <br><br></td></tr></table><br>
<a name="2008708"></a>

<a name="2008719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> And now 1.03, which fixes a problem I found with removing objects from the simulation.<br><br>Edit at 18:45 NZ time - I just re-uploaded after finding another issue in the same area. If you're the one person who already downloaded the zip then you should grab the new one. <br><br></td></tr></table><br>
<a name="2008733"></a>

<a name="2008736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >luggage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got the latest version of Box2D and Monkey but I get the following errors when building for XNA.<br><br>Program.cs(6605,4): error CS0201: Only assignment, call, increment, decrement, and new object expressions can be used as a statement [MonkeyGame\MonkeyGame.csproj]<br><br>I get that twice, once for the PC build and once for Xbox.<br><br>I also get the ghosting issue under GLFW. <br><br></td></tr></table><br>
<a name="2008740"></a>

<a name="2008741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>What does "crashes completely" entail? Is it repeatable? Is there an error message?<br> <br></div><br><br>Windows closes down the XNA version after a few seconds' running time. However, I think this is a problem with my setup if nobody else is running into it -- all Monkey XNA programs have started crashing (though none of them give rendering errors before they do).<br><br>GLFW seems fine for all other programs, so I'm still seeing rendering problems only in the box2d demo, on both GLFW and XNA. The XNA crashing <i>isn't</i> related to box2d.<br><br>Here are a couple of short videos of what I see (doesn't capture the ghosting effect but you can see it jumping back and forth a frame or two while running in GLFW and some horrendous purple flickering in XNA)...<br><br><a href="http://www.hi-toro.com/monkey/box2d_glfw.avi" target="_blank">http://www.hi-toro.com/monkey/box2d_glfw.avi</a><br><a href="http://www.hi-toro.com/monkey/box2d_xna.avi" target="_blank">http://www.hi-toro.com/monkey/box2d_xna.avi</a><br><br>It'd be nice to know if anyone else is getting similar results or if it's just me! <br><br></td></tr></table><br>
<a name="2008754"></a>

<a name="2008755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> @luggage:<br><br>I get the XNA compile failure too. I don't have any way to run the result so it often slips my mind to try it. The problem was me neglecting to assign an array resize back to a Field. I've fixed it and uploaded 1.04.<br><br>The problem is here:<br><br><pre class=code>
    newArr.Resize(newLength)
</pre><br><br> gets translated to:<br><br><pre class=code>
    (Object[])bb_std_lang.resize(bbt_newArr,bbt_newLength);
</pre><br><br> ...which the C# compiler gets upset about. I notice there are also a ton of warnings on the XNA build. I'll have to take a look through them to see if there's anything there pointing to an issue in the Monkey code. <br><br></td></tr></table><br>
<a name="2008758"></a>

<a name="2008759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> my bad <br><br></td></tr></table><br>
<a name="2008763"></a>

<a name="2008764"></a>

<a name="2008771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I've installed the Games for Windows Live crapola to look at the XNA build and it seems to me that it's caused by double buffering behind the scenes. The box2d demo sets the update rate to 60FPS but only renders at 30FPS. It looks like the XNA target assumes that you're going to draw a frame every update and flips the buffers. Seeing as the demo draws on alternate updates, one of the buffers is empty.<br><br>I guess this could also be why you're seeing odd frame jumping on your GLFW build and others, like me, don't see it because their OpenGL implementation is different.<br><br>I'll have to have a think about what to do about this. Not being able to have an engine update that is separate from the render rate is a real pain if that's the situation.<br><br>Edit: After brief consideration, this should be easily fixable for Box2D as I can just do double physics updates at 30FPS. I think I'd still rather have the ability to set the render rate separately in general though. <br><br></td></tr></table><br>
<a name="2008774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> And I've uploaded 1.05 with the rendering/physics update variance mechanism swapped. This fixes the XNA flickering for me. Hopefully it will resolve issues on GLFW builds too. <br><br></td></tr></table><br>
<a name="2008808"></a>

<a name="2008810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> latest upload (1.05)  fails to run using HTML5.<br><br>"Script: file:///C:/monkey/tmp/untitled1.build/html5/main.js:17436"<br><br>Using latest monkey build + IE and also tried FF4<br><br><br>Bit more testing "domino pyramid" is the part that broken.  Its not crashing its just taking an age todo anything :S<br><br>other tests work fine <br><br></td></tr></table><br>
<a name="2008838"></a>

<a name="2008839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do we attach physics to objects in our scene? Is this covered in the repository somewhere? by example maybe? <br><br></td></tr></table><br>
<a name="2008842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> www.box2d.org has documentation and there are plenty of Box2D tutorials elsewhere on the web. I haven't messed with the class or method names much so anything written about recent versions of box2d in general or the Flash port specifically should be applicable to the Monkey port. You can also look at the files in the demo and tests folders. <br><br></td></tr></table><br>
<a name="2008844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> So there's nothing Monkey-specific about applying physics to our objects? I would have thought it would require wrapper code or something. I'll study the code and figure it out... or I'll ask more questions. :)<br><br>Thanks muddy! <br><br></td></tr></table><br>
<a name="2008847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> I uploaded 1.06 during the downtime, which should resolve the issues with FF and IE declaring the demo as an unresponsive script. It's always going to be possible for that to occur if your PC is slow enough though.<br><br>A note on performance in general:<br><br>The demo is actually a fairly good showcase for how far in front of IE and FF Chrome's V8 JS engine is. I've looked at profiles on all three and it seems as if V8 does a number of basic optimisations that mean that a number of things that rank as expensive on FF/IE are negligible on Chrome. For example, there seems to be a high function call overhead on FF/IE, but not on Chrome.<br><br>Outside of JS, the nature of the port and Monkey mean that performance is compromised across the platforms. The algorithms themselves should be fine (or as fine as Box2D in general, anyway) but there's significant overhead resulting from the layers of translation.<br><br> One such expense comes from the FlashArray class, which I used to simplify the porting. This suffers from Monkey's limitation on exposing generic arrays, which means that direct indexing goes through Get and Set methods. If the target platform can optimise this out then it's not a problem. If not (like IE/FF) then, well, it is.<br><br> Another example is the trig functions. Monkey's trig functions use degrees as their angle unit while pretty much every other language uses radians as standard. Radians are also the most common unit in the maths used in  calculations for stuff like physics and Box2D is no exception. So, in the Box2D code, all the trig functions are wrapped in conversion layers that translate radians to degrees and vice versa to work with Monkey's degree based maths library. Then, Monkey does its thing and translates that code and reverses the unit conversion to call the target platform's own trig functions that are radian based.<br><br> The result is stupid code like this:<br><br><pre class=code>
float D2R=0.017453292519943295f;
float bb_flashtypes_Math::bb_Cos(float bbt_rads){
    return (float)cos((bbt_rads*57.2957764f)*D2R);
}
</pre><br><br> Which, to be frank, makes me want to punch a wall. <br><br></td></tr></table><br>
<a name="2008849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Monkey's trig functions use degrees as their angle unit while pretty much every other language uses radians as standard<br> <br></div><br><br>To be fair, I'm pretty sure Mark would much prefer things to work in radians, and it's only because of whiners like me, who can't imagine how anybody could even <i>begin</i> to visualise problems in radians, that Blitz* and Monkey use sane and rational degrees. Sorry!<br><br>Still, couldn't people over-rule that if they really wanted to, wrapping the standard cos/sin as required? <br><br></td></tr></table><br>
<a name="2008855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> radians are a bit harsh for people like me who dont even know what they are, <br><br></td></tr></table><br>
<a name="2008857"></a>

<a name="2008858"></a>

<a name="2008859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I have been meaning to add radian versions of the trig stuff for ages now but keep putting it off - will get onto it ASAP!<br><br>How do Sinr, Cosr etc sound?<br><br>Another idea would be to change Sin, Cos etc to use a global scale var (so they could work in either radians or degrees), and also add Sind, Cosd etc. <br><br></td></tr></table><br>
<a name="2008860"></a>

<a name="2008874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Still, couldn't people over-rule that if they really wanted to, wrapping the standard cos/sin as required? <br></div><br><br>That's what I'm talking about though. The Box2D port has wrappers that convert between radians and degrees. The point is that the Monkey translation is also creating a wrapper going the other way. The result is code that does nothing but burn processor time introducing inaccuracy.<br><br>Sure, I could write my own maths library with native implementations for trig operations that don't do this conversion but that would start to move the port away from being a pure Monkey implementation.<br><br>My point isn't to argue that radians are "better" than degrees. I'm just explaining that there are performance compromises involved and the trig conversions are a good example of that. <br><br></td></tr></table><br>
<a name="2008906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>My point isn't to argue that radians are "better" than degrees. I'm just explaining that there are performance compromises involved and the trig conversions are a good example of that.<br> <br></div><br>I didn't mean to sound like I was arguing, just explaining why Mark went the degrees way. Still, see his post above! <br><br></td></tr></table><br>
<a name="2008938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> @DruggedBunny<br><br>Don't worry, I didn't think you were being argumentative. I was just trying to avoid the thread becoming a home for a debate about preferred units.<br><br>@Mark<br><br>CosR, SinR etc. seem fine to me. I'm not sure what the implications of your scaling factor would be on generated code. My desire would just be to have a way to write code that converts directly to the native library calls. <br><br></td></tr></table><br>
<a name="2008939"></a>

<a name="2008952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> If anyone has a couple of minutes, could you compare the following builds of the demo:<br><br> <a href="http://www.stickydesigns.com/monkeybox2d/canvas/MonkeyGame.html" target="_blank">Standard</a><br> <a href="http://www.stickydesigns.com/monkeybox2d/canvastest/MonkeyGame.html" target="_blank">Test</a><br><br> If you could let me know what render and update rates you see on the pyramid demo, what browser you're using and some idea of your CPU, that would be great. Oh, and please give me numbers when the pyramid is actively simulated and not the rate after it dims. When it dims it means that the bodies are considered settled and they get ignored.<br><br> I'm particularly interested to hear from non-Chrome users or those with low-powered netbooks and the like. <br><br></td></tr></table><br>
<a name="2008941"></a>

<a name="2008942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Holy moly, muddy! How come those run so much faster than my local versions (which barely run if at all)?<br><br>Standard Render: 30FPS, avg 5ms, max 194FPS<br>Standard Update: 61, 4ms, 241/sec<br><br>Test Render: 30, 6ms, 180/sec<br>Test Update: 60, 9ms, 117/sec<br><br>However, these values fluctuated wildly.<br><br>Chrome 13.0.782.32 beta-m<br>Pentium(R) Dual Core E5300 @ 2.6GHz<br>4GB RAM<br>Windows 7 <br><br></td></tr></table><br>
<a name="2008943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> @c.k.<br><br>I've no idea why they run faster than your local build. There should be no difference between the Standard build above and what anyone would get locally with 1.06 of the library and V42b of Monkey. <br><br></td></tr></table><br>
<a name="2008944"></a>

<a name="2008945"></a>

<a name="2008946"></a>

<a name="2008947"></a>

<a name="2008948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know if I upgraded to 1.06 or not. I'll check on that. It will have to be tonight. I'll check it out.<br><br>Look how precarious this collapse is. It's actually at rest here. :D<br><br><img src="http://i56.tinypic.com/25kl89s.png"> <br><br></td></tr></table><br>
<a name="2008949"></a>

<a name="2008950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a fun challenge: remove the top three bricks without the pyramid collapsing. It's more difficult than you think! :)<br><br><img src="http://i51.tinypic.com/25549d0.png"> <br><br></td></tr></table><br>
<a name="2008953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've tried it on another PC:<br><br>Windows XP Professional, SP 3<br>Intel Pentium(R) 4 CPU 3.00GHz<br>1GB RAM<br>latest Chrome beta<br><br>FPS gets down to 9. updates get down to low 40s. But performance is horrible. Can barely grab a brick. Can only slowly carry it away, no throwing it. <br><br></td></tr></table><br>
<a name="2008954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, performance will be bad. I'm more interested in seeing what the difference is between the two builds when the going gets tough. Did you see any difference? <br><br></td></tr></table><br>
<a name="2008966"></a>

<a name="2008968"></a>

<a name="2008969"></a>

<a name="2008970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, my PC at home:<br><br>Actual physics updates/sec: 28, Avg update: 34ms (max. 29 updates/sec)<br>Actual drawn FPS: 2, Avg. Render time: 6ms (max. 158 frames/sec)<br><br>That's using code on my own PC, running from JungleIDE (with F5).<br><br>The links you posted above give far better performance, as follows:<br><br>Actual physics updates/sec: 60, Avg update: 7ms (max. 147 updates/sec)<br>Actual drawn FPS: 30, Avg. Render time: 3ms (max. 290 frames/sec)<br><br>Chrome (latest beta)<br>Win7 64-bit<br>8GB RAM<br><br>Unfortunately, I didn't test both links on the old PC. I'll try to do that next chance I get. :)<br><br>o.O <br><br></td></tr></table><br>
<a name="2008997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm just going to bump and repeat the request as I can see plenty of hits on the demos but people seem reticent to say anything about what they're seeing...<br><br>If anyone has a couple of minutes, could you compare the following builds of the demo:<br><br> <a href="http://www.stickydesigns.com/monkeybox2d/canvas/MonkeyGame.html" target="_blank">Standard</a><br> <a href="http://www.stickydesigns.com/monkeybox2d/canvastest/MonkeyGame.html" target="_blank">Test</a><br><br> If you could let me know what render and update rates you see on the pyramid demo, what browser you're using and some idea of your CPU, that would be great. Oh, and please give me numbers when the pyramid is actively simulated and not the rate after it dims. When it dims it means that the bodies are considered settled and they get ignored.<br><br> I'm particularly interested to hear from non-Chrome users or those with low-powered netbooks and the like. <br><br></td></tr></table><br>
<a name="2009001"></a>

<a name="2009002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Modelnavn:	Mac mini<br>  Model-id:	Macmini3,1<br>  Processornavn:	Intel Core 2 Duo<br>  Processorhastighed:	2,53 GHz<br>  Antal processorer:	1<br>  Antal kerner i alt:	2<br>  L2-buffer:	3 MB<br>  Hukommelse:	4 GB<br>  Bushastighed:	1,07 GHz<br><br> Chipset-model:	NVIDIA GeForce 9400<br>  Type:	GPU<br>  Bus:	PCI<br>  VRAM (i alt):	256 MB<br><br><br><br>Standard:<br><img src="http://whatsdabomb.com/stuff/box2d-2011-06-24-1.png"><br>Test:<br><img src="http://whatsdabomb.com/stuff/box2d-2011-06-24-2.png"><br><br>Test seems faster. :-) <br><br></td></tr></table><br>
<a name="2009010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, that provides some confirmation of my own tests. Which browser are you using? Safari? <br><br></td></tr></table><br>
<a name="2009012"></a>

<a name="2009013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Firefox 5.0 <br><br></td></tr></table><br>
<a name="2009017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> FF 4<br>dual core 2.8<br>standard     19ms max 13 and  15ms max 66  ( 2 fps)<br>test   21ms max 50    and  15ms max 66  (11 fps)<br><br>iMac + safari<br>standard   21ms max 48 and  14  max 75  (2 fps)<br>test     23ms  max 47 and 12  max 80 (12 fps)<br><br><br>Netbook + FF5  (atom 1.6)<br>standard   225mx max 6 and 94ms max 11 ( 0 fps)<br>test    250ms max 5  and 90ms  max 11 (2 fps) <br><br></td></tr></table><br>
<a name="2009019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers, Ovine. It seems fairly conclusive that the test variant produces visually better performance under stress. <br><br></td></tr></table><br>
<a name="2011345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> @muddy_shoes, I'm using your box2d module in my latest project and it's all going really well.<br><br>The only hickup I've had is this morning trying to use a weld joint. It doesn't seem to have any effect.<br><br>Have reverted to using a revolute joint to solve the problem but thought I'd mention it. <br><br></td></tr></table><br>
<a name="2011348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have an example of code that you'd expect to work that doesn't could you post it? I haven't yet used any of the joints outside of converting the examples, so it's very possible there's an issue that I haven't seen. <br><br></td></tr></table><br>
<a name="2011349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I had time I was going to scan through the examples see if I could find a revolute joint in action and replace with a weld. The manual mentions a cantilever example but I'm a bit busy today to investigate further sorry. <br><br></td></tr></table><br>
<a name="2013111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mangoo</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Firefox 4 on a virtual windows machine. <br><br>For the first demo "Test" runs acceptable ( 15fps ), the "Standard" one is very slow here (5 fps)<br><br>Same applies to the other demos, i would say that Test is ready to use :-) <br><br></td></tr></table><br>
<a name="2013124"></a>

<a name="2013125"></a>

<a name="2013126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately, the test version changes that provide the smoother visual frame-rate are actually to the mojo update loop, and not to the Box2D code. I sent the changes to Mark but received no response, so I assume he's not interested.<br><br>Edit: I did notice that the update loop had been altered a little recently, so I should probably redo the tests to see if the gap has been reduced. <br><br></td></tr></table><br>
<a name="2013968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1.0.7 is up. No functional changes, but I've done some work to remove the slow fake Flash array type which should get an extra frame or two. I've also changed the demo a bit to make it more friendly to touch-based devices. You can now change the example by tapping the top left or right corner and the escape key/stepback exits.<br><br>Download:<br><a href="http://code.google.com/p/monkeybox2d/downloads/list" target="_blank">http://code.google.com/p/monkeybox2d/downloads/list</a><br><br>Demo:<br><a href="http://www.stickydesigns.com/monkeybox2d/flash/MonkeyGame.html" target="_blank">Flash</a><br><a href="http://www.stickydesigns.com/monkeybox2d/canvas/MonkeyGame.html" target="_blank">HTML5</a><br><a href="http://www.stickydesigns.com/monkeybox2d/canvastest/MonkeyGame.html" target="_blank">HTML5 with custom mojo update loop</a> <br><br></td></tr></table><br>
<a name="2013966"></a>

<a name="2014120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just in case anyone is pulling updates directly from the googlecode repo, consider yourself warned that there are commits going in that will break client code. I'm starting to remove transient object allocations and that means changing interfaces throughout. <br><br></td></tr></table><br>
<a name="2014127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! <br><br></td></tr></table><br>
<a name="2015777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Muddy how far have you got into committing the "removal of transient object allocations" ?<br><br>We any nearer to start using your port without fear of interface changes ? :) <br><br></td></tr></table><br>
<a name="2015870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> How far? Half?<br><br>I won't delete any of the previous versions so if you're running on one of the zip downloads then you're fine. I was just warning people that the main repo was undergoing change in case anyone was directly pulling changes from trunk.<br><br>If you are pulling changes from trunk then I can't make any promises. I'm not doing anything at the moment but that's only because I'm busy with other things. When and if I get annoyed by the remaining garbage creation I'll be back in there and breaking things again. It's not too bad but there's definitely room for improvement. I see the GC kick in about every ten seconds or so for 50-100ms on my current box2d-based project on Android.<br><br>Even if you are working from the repo, if you just put a freeze on pulling changes while you finish whatever it is you're working on, you'll be fine. <br><br></td></tr></table><br>
<a name="2015779"></a>

<a name="2015780"></a>

<a name="2015869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OvineByDesign</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> many thanks :) <br><br></td></tr></table><br>
<a name="2016136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>I've just try the last 1.07 on the iOS emulator it's running fast but natively on my iPod touch 4 it's crazy slow (maybe 1FPS every 2 secs). Other than that it's working :)<br><br>I now wondering, if there is optimization to be done on the iOS platform: how do you proceed?<br>Writing some kind of native trans code in objective-C?<br><br>I ask because i'd like to understand the general work flow of Monkey.<br>Thanks <br><br></td></tr></table><br>
<a name="2016139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is most likely the debug outline graphics, once you turn that off and hook up your own image based rendering the module flies. <br><br></td></tr></table><br>
<a name="2016138"></a>

<a name="2016140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't own any iOS devices so I've never tried it. If there's a performance issue then someone need to run a profiler and see where the time is going. It could be the debug drawing but it could equally be elsewhere, such as monkey's garbage collection. <br><br></td></tr></table><br>
<a name="2016142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make sense.<br>I cannot help you yet about the profiling but as soon as I can I will give you feedback on this.<br>But I think skid is right, outlines are quite expensive. <br><br></td></tr></table><br>
<a name="2016590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is a bug in b2gravitycontroller.monkey. Will not compile<br>"Constants.F_MIN" must be replaced two times with "Constants.FMIN". <br><br></td></tr></table><br>
<a name="2018972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it just me or does the zip for v1.07 contain a corrupted maindemo.monkey file? <br><br></td></tr></table><br>
<a name="2019046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wasn't able to run the v1.07 with the last monkey (v50) too... <br><br></td></tr></table><br>
<a name="2019047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> You just need to add this to the bottom of maindemo.monkey:<br><pre class=code>Function Main()
	New MainDemo
End</pre><br><br>You possibly need an extra End before that function as well, can't remember. <br><br></td></tr></table><br>
<a name="2019116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... Oh yeah !<br>I forgot it was working this way. Sorry !<br><br>Waw, this version as all I need. I wish it exist in BlitzMax :p<br><br>What can you tell me about the state of the port ?<br>Seems to be already pretty usable in GLFW. Anything is missing ?<br>Thanks <br><br></td></tr></table><br>
<a name="2025220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> I enabled reflection and then went through cleaning up all the newly revealed compilation errors. This may well have fixed issues with previously non-working parts of the code so it's worth a release. There's a 1.0.8 zip uploaded: <a href="http://code.google.com/p/monkeybox2d/downloads/list" target="_blank">http://code.google.com/p/monkeybox2d/downloads/list</a> <br><br></td></tr></table><br>
<a name="2025219"></a>

<a name="2025229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> this is looking better and better every time I look at it, and makes me wana do something with it, after my current project is out the way. <br><br></td></tr></table><br>
<a name="2025706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did some comparison testing between the Monkey Box2D port and libGDX's JNI version today. If anyone is interested: <a href="http://pointlessdiversions.blogspot.co.nz/2012/03/monkey-vs-libgdx-box2d-performance-on.html" target="_blank">http://pointlessdiversions.blogspot.co.nz/2012/03/monkey-vs-libgdx-box2d-performance-on.html</a> <br><br></td></tr></table><br>
<a name="2025778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting read, I am happy with the performance so far, but I have not really stressed it, still cross platform is great with Monkey. <br><br></td></tr></table><br>
<a name="2026413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage1982</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to port the current version of box2d for BlitzMax.<br><br>I was wondering if you could help me for a small issue ? <a href="http://blitzmax.com/Community/posts.php?topic=97594" target="_blank">http://blitzmax.com/Community/posts.php?topic=97594</a><br><br>Thanks ! <br><br></td></tr></table><br>
<a name="2026417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I'm not a BlitzMax user so I can't offer any help. <br><br></td></tr></table><br>
<a name="2026482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1.0.9 (or 1.09, I seem to be inconsistent on the topic) zip uploaded: <a href="http://code.google.com/p/monkeybox2d/downloads/list." target="_blank">http://code.google.com/p/monkeybox2d/downloads/list.</a><br><br>* Fixed collision bug that only really shows when using large sensors.<br>* Very small optimisation to the FlashArray class.<br>* "Strictified" the module. <br><br></td></tr></table><br>
<a name="2026917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow this has improved a lot since I last tried it. Thank you for all the hard work you have put into this!<br><br>I added some extra stuff to ray casting so that I could get the point of the intersection. This is what I added:<br><br>This new callback in b2world:<br><pre class=code>
Class InnerRayCastToPointCallback Extends InnerRayCastCallback
    Field result:b2Vec2
    Method Callback : Float (fixture:b2Fixture, point:b2Vec2, normal:b2Vec2, fraction:Float)
        result = point
        Return fraction
    End
End
</pre><br>And also this new b2world method:<br><pre class=code>
    Method RayCastToPoint : b2Vec2 (point1:b2Vec2, point2:b2Vec2)
        Local callback:InnerRayCastToPointCallback = New InnerRayCastToPointCallback()
        RayCast(callback, point1, point2)
        Return callback.result
    End
</pre><br>Seems to work well. Is this the best way of doing it or is there another technique already implemented to do this?<br><br>[edit 2] Ok after some more playing around and further investigation of the source, I'm starting to understand how the ray casting is done. Is there a reason why b2RayCastOutput doesn't store the point of intersection?<br><br>[edit 3] For now I've added the point to the ray cast output. That way I can easily get the intersection point by doing fixture.RayCast( output, input ) and then using output.point instead of having to calculate the blend between p1 and p2 myself.<br><br>This in b2RayCastOutput:<br><pre class=code>
Field point:b2Vec2 = New b2Vec2()
</pre><br>This in b2polygonshape in the RayCast method just below the normal calc at the bottom.<br><pre class=code>
			output.point.x = ( input.p2.x * output.fraction ) + (( 1 - output.fraction ) * input.p1.x )
			output.point.y = ( input.p2.y * output.fraction ) + (( 1 - output.fraction ) * input.p1.y )	
</pre> <br><br></td></tr></table><br>
<a name="2026911"></a>

<a name="2026912"></a>

<a name="2026910"></a>

<a name="2026909"></a>

<a name="2026908"></a>

<a name="2026914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't say that I've used the raycasting, so I haven't looked into the ins and outs of how to do it best. This page has a decent overview (if you get past the Ron Paul sales pitch) - <a href="http://www.iforce2d.net/b2dtut/world-querying" target="_blank">http://www.iforce2d.net/b2dtut/world-querying</a> .<br><br>I wouldn't recommend adding code to the box2d library files simply because it'll be awkward to update in the future. You should be able to put your callback and the wrapper function in your own code and just call Raycast on your b2World instance.<br><br>If you want to get back all the ray intersections then take a look at RaycastAll. That returns a FlashArray* listing all the b2Fixtures that are hit. You can either use it as a template and create a new callback based on the InnerRayCastAllCallback that collects the info you want or you could just use the list it returns and b2Fixture.Raycast to get the specifics.<br><br><br>* This class is just a remnant of the porting. It may well disappear at some point and be replaced by a standard array. <br><br></td></tr></table><br>
<a name="2026913"></a>

<a name="2026916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> [edit 2] Ok after some more playing around and further investigation of the source, I'm starting to understand how the ray casting is done. Is there a reason why b2RayCastOutput doesn't store the point of intersection?  <br></div><br><br>Well it does store information that describes the intersection point given that you must know the input ray. I'd guess that it's done that way to avoid performing calculations to get a result that you may not be interested in. <br><br></td></tr></table><br>
<a name="2026915"></a>

<a name="2026922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well it does store information that describes the intersection point given that you must know the input ray. I'd guess that it's done that way to avoid performing calculations to get a result that you may not be interested in.  <br></div><br><br>Yea I noticed that after I browsed the source some more. In the end I decided to use the RayCastAll and then loop all the fixtures and call another ray cast using them. I added a b2Vec2 to store the  point of intersection and edited the raycast method in b2polygonshape to calculate this based on the input point.<br><br>Not the best because as you say because if I replace the module, the code won't work so I'll have to remember what I did.<br><br>Im having a great time playing around with this even if it is 6am! :D <br><br></td></tr></table><br>
<a name="2026918"></a>

<a name="2026919"></a>

<a name="2026920"></a>

<a name="2026921"></a>

<a name="2027554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lugato</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> Muddy, <br><br>Its possible to attach a image in the object created with the CreateBody command ? <br><br></td></tr></table><br>
<a name="2027560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure. You can store a reference to whatever you like with the SetUserData method. <br><br></td></tr></table><br>
<a name="2027568"></a>

<a name="2027569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> Continued <a href="/posts.php?topic=2721" target="_blank">here</a>... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
