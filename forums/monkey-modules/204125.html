<!DOCTYPE html><html lang="en" ><head ><title >XML</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >XML</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >XML</a><br><br>
<a name="2060425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am sure people will have some use for this. A single file xml module!<br><br>The module is pretty stable now maybe some people wouldn't mind helping to test it further?<br><br>You can find the module here:<br><a href="https://github.com/skn3/xml" target="_blank">https://github.com/skn3/xml</a><br><br>This written from scratch and doesn't relate to the "config" banana example that comes with monkey.<br><br>Enjoy, for free :D<br><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&amp;business=jon%2epittock%40gmail%2ecom&amp;lc=US&amp;item_name=Skn3&amp;no_note=0&amp;currency_code=GBP&amp;bn=PP%2dDonationsBF%3abtn_donate_SM%2egif%3aNonHostedGuest" target="_blank"><img src="http://help.yahoo.com/l/us/yahoo/smallbusiness/webhosting/yss/paypal/media/images/paypal_donate_button.gif"></a> <br><br></td></tr></table><br>
<a name="2059666"></a>

<a name="2057354"></a>

<a name="2052357"></a>

<a name="2044232"></a>

<a name="2044227"></a>

<a name="2044230"></a>

<a name="2044231"></a>

<a name="2044236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> do you think its faster?<br><br>Im using the config thingy for my serialization at the moment <br><br></td></tr></table><br>
<a name="2044237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Havnt compared but it uses far less string manipulation, next to none. It also lets you lookup children by matching attributes.. Which config didn't. <br><br></td></tr></table><br>
<a name="2044238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have data like this:<br><br><pre class=code>
&lt;roar tick="135516477893"&gt;
  &lt;user&gt;
    &lt;view status="ok"&gt;
      &lt;attribute type="special" ikey="id" value="12345678901234567890"/&gt;
      &lt;attribute type="special" ikey="xp" value="0" level_start="0" next_level="20"/&gt;
      &lt;attribute type="special" ikey="level" value="1"/&gt;
      &lt;attribute type="special" ikey="facebook_uid" value="0"/&gt;
      &lt;attribute type="special" ikey="name" value="cklester"/&gt;
      &lt;attribute ikey="circuit001" label="circuit_001" value="0" type="core"/&gt;
      &lt;attribute ikey="ct001002" label="ct_001_002" value="0" type="core"/&gt;
      &lt;attribute ikey="ct001001" label="ct_001_001" value="1809876543" type="core"/&gt;
      &lt;attribute ikey="premium_currency" label="Premium Currency" value="5" type="currency" min="0"/&gt;
    &lt;/view&gt;
  &lt;/user&gt;
&lt;/roar&gt;
</pre><br><br>Using your library, how would I get the "value" of the "attribute" with ikey="ct001001?" <br><br></td></tr></table><br>
<a name="2044307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> As long as you were sure the file would have it you could do like so:<br><pre class=code>
Local doc := ParseXML(xml_data_here)
Print doc.FindChild("user").FindChild("view").FindChild("attribute","ikey=ct001001").value
</pre> <br><br></td></tr></table><br>
<a name="2044239"></a>

<a name="2044243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> NICE! I'm gonna give it a try... :-) <br><br></td></tr></table><br>
<a name="2044244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool! Nice to see some more XML parsers out there... Samah did an excellent job on the Diddy one and the speed is super fast now!<br><br><a href="http://code.google.com/p/diddy/source/browse/trunk/src/diddy/xml.monkey" target="_blank">http://code.google.com/p/diddy/source/browse/trunk/src/diddy/xml.monkey</a> <br><br></td></tr></table><br>
<a name="2044246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe we could get some speed tests and some collaboration amongst the XML parser providers? We all want the best. <br><br></td></tr></table><br>
<a name="2044249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looking forward to trying this. The single file approach is very handy.<br>I'm sure I can put the special functions from my own xml module in some extra functions.<br><br>Suff like: GetOrCreateNode(nodename) and GetAttributeValue(name,defaulttothis) <br><br></td></tr></table><br>
<a name="2044266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> therevills, what's the diddy.xml code for the above request?<br><br><div class="quote"> <br>...how would I get the "value" of the "attribute" with ikey="ct001001?"<br> <br></div> <br><br></td></tr></table><br>
<a name="2044275"></a>

<a name="2044277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> A bit more verbose:<br><br>[monkeycode]  Local doc:XMLDocument = New XMLParser().ParseFile("test.xml")<br> Local rootElement:XMLElement = doc.Root<br><br> For Local userNode:XMLElement = Eachin rootElement.GetChildrenByName("user")<br>         For Local viewNode:XMLElement = Eachin userNode.GetChildrenByName("view")<br>                 For Local attributeNode:XMLElement = Eachin viewNode.GetChildrenByName("attribute")<br>                         If attributeNode.GetAttribute("ikey") = "ct001001" Then<br>                                 Print attributeNode.GetAttribute("value")<br>                         End If<br>                 Next<br>         Next<br> Next[/monkeycode]<br><br>Of course you (we) could just a helper function do the above. <br><br></td></tr></table><br>
<a name="2044272"></a>

<a name="2044273"></a>

<a name="2044274"></a>

<a name="2044279"></a>

<a name="2044280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice!  I like your idea of filtering by attributes, so I added it to the Diddy XML parser.  Get the latest revision from Bitbucket.<br><br>[monkeycode]Local doc:XMLDocument = New XMLParser().ParseFile("test.xml")<br>Print doc.Root.GetFirstChildByName("user").GetFirstChildByName("view")<br>    .GetFirstChildByName("attribute","ikey=ct001001").GetAttribute("value")[/monkeycode] <br><br></td></tr></table><br>
<a name="2044281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this just for reading the XML, or is it possible to update the file as well? <br><br></td></tr></table><br>
<a name="2044282"></a>

<a name="2044283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @benmc: Is this just for reading the XML, or is it possible to update the file as well? <br></div><br>Diddy's XML parser can export XML format to a string, but it's up to you to write the file (since this is not an easy thing for all targets).  I haven't looked at Skn3's version to see if it can. <br><br></td></tr></table><br>
<a name="2044284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way I could tell diddy.xml that I want "FindChild" (or better, "GetChild") to be a shortened alias for GetFirstChildByName()? :-D <br><br></td></tr></table><br>
<a name="2044285"></a>

<a name="2044286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey apologies if I am stepping on any toes by the way, was not my intention. I have used the diddy XML stuff before but i just wanted something that could just be quickly imported as a flat file into simple projects.<br><br>This module has AddChild and SetAtrribute methods so you can create XML structures from scratch. Use node.Export() to retrieve an XML string which you can write to a file if you want. <br><br></td></tr></table><br>
<a name="2044290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> c.k.: Is there a way I could tell diddy.xml that I want "FindChild" (or better, "GetChild") to be a shortened alias for GetFirstChildByName()? :-D <br></div><br>Nope.  After doing some Objective-C coding I got into the habit of verbose method names that explain exactly what they do.  If you want it to be called GetChild, feel free to fork it.  Diddy is open source, after all.<br><a href="https://bitbucket.org/swoolcock/diddy/fork" target="_blank">https://bitbucket.org/swoolcock/diddy/fork</a><br><br><div class="quote"> Skn3: Hey apologies if I am stepping on any toes by the way, <br></div><br>Of course not! ;)<br><br><div class="quote"> Skn3: ...i just wanted something that could just be quickly imported as a flat file into simple projects. <br></div><br>The main dependencies for the Diddy parser are ArrayList and the exception handling stuff.  I'll put some thought into removing dependencies but at the moment it "works". :) <br><br></td></tr></table><br>
<a name="2044287"></a>

<a name="2044288"></a>

<a name="2044289"></a>

<a name="2044308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> W00t, well glad to have encouraged some tweaks of code in diddy and all that! <br><br>I was going to code an xpath query method but well it wasn't really essential so settled for the simplified attribute query.<br><br>If anyone feels they want to contribute or have a tweak then feel free to post it or do via git and I can update the module accordingly. <br><br></td></tr></table><br>
<a name="2044319"></a>

<a name="2044320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> SKN3.XML failed the test.<br>Diddy.XML passed ok, but PLEASE return an empty Child rather than a null on nodes not found. (hard crash).<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#TEXT_FILES ="*.dae"

#USE_DIDDY = 0

Import mojo
#If USE_DIDDY = 1
Import diddy
#Else
Import skn3.xml
#Endif



Function Main()
	
	New MyGame()
	
End


Class MyGame Extends App
	
	
	Method OnCreate()
		
		SetUpdateRate 30
		Local object_id$ = ""
		Local geom_id$ = ""
		
#If USE_DIDDY = 1	
		Local doc:XMLDocument
		
		Try
			doc = New XMLParser().ParseFile("duck.dae")
		Catch ex:Throwable
			Print "** file not found"
			Print DiddyException(ex).Message()
		End
		
		If Not doc
			Print "** file not found"
		Else
			Print "..parsed"
			'Print doc.Root.GetFirstChildByName("library_visual_scenes").GetFirstChildByName("visual_scene").GetFirstChildByName("node").GetFirstChildByName("instance_geometry").GetAttribute("url")
			object_id = doc.Root.GetFirstChildByName("library_visual_scenes").GetFirstChildByName("visual_scene").GetFirstChildByName("node").GetFirstChildByName("instance_geometry").GetAttribute("url")
			
			Print ".."
			geom_id = doc.Root.GetFirstChildByName("library_geometries").GetFirstChildByName("geometry").GetAttribute("id")

		Endif
		
#Else
		Local err:XMLError = New XMLError
		Local doc:XMLDoc = ParseXML(LoadString("duck.dae"), err)
		
		If Not doc
			Print "** file not found"
			If err And err.error Then Print err.message
		Else
			Print "..parsed"
			object_id= doc.FindChild("COLLADA").FindChild("library_visual_scenes").FindChild("visual_scene").FindChild("node").FindChild("instance_geometry").GetAttribute("url")
			Print ".."
			geom_id = doc.FindChild("COLLADA").FindChild("library_geometries").FindChild("geometry").GetAttribute("id")

		
		Endif
#endif
	
		If object_id Then Print object_id
		If geom_id Then Print geom_id
		
	End
	
	Method OnRender()
	
	End
	
	Method OnUpdate()
	
	End
	
End
</textarea><br><br><br>duck.dae<br><a href="https://collada.org/owl/browse.php?sess=0&amp;parent=126&amp;expand=1&amp;order=name&amp;curview=0" target="_blank">https://collada.org/owl/browse.php?sess=0&amp;parent=126&amp;expand=1&amp;order=name&amp;curview=0</a> <br><br></td></tr></table><br>
<a name="2044317"></a>

<a name="2044318"></a>

<a name="2044316"></a>

<a name="2044331"></a>

<a name="2044332"></a>

<a name="2044333"></a>

<a name="2044334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> "PLEASE return an empty Child rather than a null on nodes not found. (hard crash)." <br></div><br><br>But if I save the XML after that call, is there then a new child in the doc?<br>I would not want a reference to a child node that was not in the XML tree.<br>Also, I would not like a parser to add nodes, unless I tell it to.<br>To me, returning null, if a node does not exist, seems like correct behavior. <br><br></td></tr></table><br>
<a name="2044335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good points-- I was thinking that the parser could return a null node or error node, which has no value, no children, no parent, etc. Just handled differently so it would not hard crash on an element not found. <br><br></td></tr></table><br>
<a name="2044338"></a>

<a name="2044340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe I could have a read only flag for nodes and then keep a readonly global null node (unattached) per doc and return that? Hows that sound? <br><br></td></tr></table><br>
<a name="2044353"></a>

<a name="2044354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have updated the module on the repo. Added lots of little bits:<br><br><div class="quote"> ' - changed Find___ functions to Get___<br>' - added GetDescendants() for getting all descendants of node<br>' - add path lookup ability see GetChildAtPath() and GetChildrenAtPath()<br>' - added default null return nodes so function chaining wont crash app<br>' - made it so node can be readonly, used for the default null node<br>' - added GetParent() for safe traversal of teh node strucutre<br>' - added special @value into query string to look for a nodes value <br></div><br><br>I also updated the example file and it shows some more use cases.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Local error:= New XMLError
Local doc:= ParseXML(LoadString("test2.xml"), error)
If doc = Null and error.error
	'error
	Print error.ToString()
Else
	'success
	'get all books
	Print "[get title of all books]"
	Local nodes:= doc.GetDescendants("title")
	For Local node:= EachIn nodes
		Print node.value
	Next
	Print ""
	
	'get all fantasy books
	Print "[get all fantasy books]"
	nodes = doc.GetDescendants("genre", "@value=Fantasy")
	For Local node:= EachIn nodes
		Print node.GetParent().GetChild("title").value
	Next
	Print ""
	
	'get null book
	Print "[get null attribute from null node]"
	Print doc.GetChild("this_doesnt_exist").GetAttribute("some_value", "default_value")
	Print ""
	
	'print node paths for all books by Corets, Eva
	Print "[get paths to all books by Corets, Eva]"
	nodes = doc.GetDescendants("author", "@value=Corets, Eva")
	For Local node:= EachIn nodes
		Print node.GetParent().GetChild("title").value + " at '" + node.GetParent().path + "'"
	Next
	Print ""
	
	'get node at path
	Print "[get description of first book at path book/description]"
	Print doc.GetChildAtPath("book/description").value
	Print ""
	
	'get node at path with attributes
	Print "[get title of first book at path book/genre where genre value is Fantasy]"
	Print doc.GetChildAtPath("book/genre", "@value=Fantasy").GetParent().GetChild("title").value
	Print ""
EndIf</textarea> <br><br></td></tr></table><br>
<a name="2044355"></a>

<a name="2044356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> AdamRedwoods, Re failed test:<br>I made it so the module treats doc also as the root node so you dont need to do doc.FindChild("COLLADA") as doc will infact be the COLLADA node. <br><br></td></tr></table><br>
<a name="2044359"></a>

<a name="2044360"></a>

<a name="2044361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok updated again, probably last one now apart from bug fixes.<br><br>I switched the parsing of opening tags from raw.Find("&lt;?xml",offset) to HasStringAtOffset("&lt;?xml",raw,offset) and the parsing is speedy fast now.<br><br>I tested a 100k file purely for parsing and here are the results:<br>diddy - 33ms<br>xml - 36ms<br>config - 100ms<br><br>So diddy is the fastest but this xml module is doing a bit more under the hood so that is to be expected. <br><br></td></tr></table><br>
<a name="2044390"></a>

<a name="2044391"></a>

<a name="2044392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @AdamRedwoods: Good points-- I was thinking that the parser could return a null node or error node, which has no value, no children, no parent, etc. Just handled differently so it would not hard crash on an element not found. <br></div><br>I might do something like this.  To be honest I'd rather it throw an exception to be caught.  Null return seems to be a better option.<br><br>Edit:<br><div class="quote"> @Skn3: ...but this xml module is doing a bit more under the hood so that is to be expected. <br></div><br>What else is it doing? <br><br></td></tr></table><br>
<a name="2044424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just updated with a small tweak. instead of classing a node as 'readonly' when its null.. i switched it over to 'valid' as this makes more sense in practice.<br><br>So for example to test a node exists you would do:<br><pre class=code>If doc.GetChild("node").valid = False Print "node doesn't exist!"</pre><br><br><div class="quote"> What else is it doing? <br></div><br>Not much more but little things like its tracking line/column numbers, it builds lists of nodes at certain paths as it parses and from what I can see has slightly more error checking/reporting of the xml.<br><br>Only very minor differences hence the slight increase of ms. <br><br></td></tr></table><br>
<a name="2044474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Skn3: ...tracking line/column numbers... <br></div><br>I actually have a local version of the Diddy parser that does just that, for things like "missing bracket at line 3, column 7".  I wrote it ages ago but I never committed it because it's not quite complete and I had more interesting things to do (like the storyboard module). <br><br></td></tr></table><br>
<a name="2044740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should upload it, it helps avoid some of those long bug hunts further down the line.<br><br>Just a small update on my module. I have added GetNextSibling() and GetPreviousSibling methods so a node can search for next/prev siblings that match tagname or attributes.<br><br>Example usage:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">'load xml
Local error:XMLError
Local xml:= ParseXML(path, error)
If xml = Null Return Null

'parse xml
Local filter:String = "genre=action"
Local item:XMLNode = xml.GetChild("item",filter)
While item
	item = item.GetNextSibling("item",filter)
Wend</textarea> <br><br></td></tr></table><br>
<a name="2044879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
&lt;roar tick="0"&gt;
  &lt;leaderboards&gt;
    &lt;list status="ok"&gt;
      &lt;board board_id="3012" ikey="circuit001" resource_id="3012" label=""/&gt;
      &lt;board board_id="3676" ikey="ct001002" resource_id="3676" label=""/&gt;
      &lt;board board_id="3888" ikey="ct001001" resource_id="3888" label=""/&gt;
    &lt;/list&gt;
  &lt;/leaderboards&gt;
&lt;/roar&gt;
</pre><br><br>I need a list of ikeys and resource_ids from the above XML. How do I extract it, and what's the best way to store it? String[]? ArrayList&lt;Leaderboard&gt;? <br><br></td></tr></table><br>
<a name="2044893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could do:<br><pre class=code>Local xml := ParseXML(xml_data)
Local board := xml.GetChildAtPath("leaderboards/list/board")
While board.valid
    'Get data here
    Print board.GetAttribute("ikey")
    Print board.GetAttribute("resource_id")

    'Next board 
    board = board.GetNextSibling("board")
Wend</pre><br><br>If you do it this way it won't create any garbage objects for iterating and you won't have to create a temporary list object (more garbage) which you would have if you called GetChildren("board").<br><br>I'd probably store each record as a custom class stored in an array as I imagine new items won't be added? <br><br></td></tr></table><br>
<a name="2044891"></a>

<a name="2044892"></a>

<a name="2044890"></a>

<a name="2044897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >c.k.</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice! Thank you.<br><br>Yes, I think I'm going with the custom class stored in an array. <br><br></td></tr></table><br>
<a name="2045308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bug:<br>If element name has upper-case characters ParseXML fails with error: "mismatched end tag".<br><br>Cause:<br>As nodes are created from element names, the names are converted to lower-case, but when checking a newly parsed closing-tag-name against its' parents' name, the closing-tag-name is not first converted to lower case, leading to the error.<br><br>Fix:<br>Call 'ToLower()' when retrieving closing-tag-name (~line 1635):<br><pre class=code>
'this is a closing tag
tagName = attributeBuffer.value.ToLower() ' &lt;-- FIX: Added 'ToLower()'

'check for mismatch
If parent = Null or tagName &lt;&gt; parent.name
	'error
	If error error.Set("mismatched end tag", rawLine, rawColumn, rawIndex)
	Return Null
EndIf
</pre> <br><br></td></tr></table><br>
<a name="2045306"></a>

<a name="2045307"></a>

<a name="2045394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, will fix this when I get back home after crimbo holidays :) <br><br></td></tr></table><br>
<a name="2045829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> This fix has now finally been added! thanks David. <br><br></td></tr></table><br>
<a name="2045969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another little update today:<br><br>' - added GetChild() (with no name or attributes) this will allow to get first child of a node<br><br>' - added SetAttribute() and GetAttribute() overloads for bool,int,float, string and no value so don't have to do value conversion in user code! <br><br></td></tr></table><br>
<a name="2050300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exactly what i needed. Will have a look! <br><br></td></tr></table><br>
<a name="2052202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried to parse a (official) music notation xml file with your XML module, but I already get massiv erros:<br><br><br><pre class=code>took 10
XMLError: illegal character [line:2 column:2 offset:42]</pre><br><br><br><pre class=code>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE score-partwise PUBLIC "-//Recordare//DTD MusicXML 1.1 Partwise//EN" "http://www.musicxml.org/dtds/partwise.dtd"&gt;
&lt;score-partwise&gt;
  &lt;part-list&gt;
    &lt;score-part id="P1"&gt;
      &lt;part-name&gt;part-1&lt;/part-name&gt;
    &lt;/score-part&gt;
  &lt;/part-list&gt;
&lt;/score-partwise&gt;
</pre><br><br>...and again in line 3 with the "-" sign! What can I do? <br><br></td></tr></table><br>
<a name="2052358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey there midimaster,<br><br>I updated the module to support '-' in tags and attribute ids. Let me know how you get on please :)<br><br>[edit]<br>just realised that it was still pointing to github repo, please note I have moved to bitbucket. <br><br></td></tr></table><br>
<a name="2052344"></a>

<a name="2054791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added new method to node:<br><br>node.CountChildren()<br>node.CountChildren("tag_name")<br>node.CountChildren("tag_name","attributes=1")<br><br>This will count children of the node which match the given params. <br><br></td></tr></table><br>
<a name="2055970"></a>

<a name="2055971"></a>

<a name="2055972"></a>

<a name="2055973"></a>

<a name="2055975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skn3, where's the latest XML?  I tried the link from your site and it doesn't work.  And I just did a very simple .xml file as below.<br><br><pre class=code>
&lt;book&gt;
   &lt;title&gt;Haberdash&lt;/title&gt;
&lt;/book&gt;
</pre><br><br>Then I did this:<br><pre class=code>
Local error:= New XMLError
Local ms:Int = Millisecs()
Local doc:= ParseXML(LoadString("test.xml"), error)
Print "took " + (Millisecs() -ms)
If doc = Null And error.error
   'error
   Print error.ToString()
Else
   Print "Get title of the book"
   Print doc.GetChildAtPath("book/title").value
Endif
</pre><br><br>Doesn't work for me.  And also says that Error is not found perhaps you meant "error".  The work Error is automatically changing to uppercase now so apparently it's a keyword. <br><br></td></tr></table><br>
<a name="2055976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah this is definitely broken... :( <br><br></td></tr></table><br>
<a name="2055979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah Error is a Monkey keyword, try changing your variable to something else (although I think its a Monkey bug and that you should be able to use "error"). <br><br></td></tr></table><br>
<a name="2056040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm how about in my signature? I will check what's happened when I get back to a pc. <br><br></td></tr></table><br>
<a name="2056094"></a>

<a name="2056096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep that's the link where I got it from.  I did change error to err and it still wouldn't work btw. <br><br></td></tr></table><br>
<a name="2056129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works here Chroma... maybe tell us what error you are getting...<br><br>test/test.build/test.xml<br><pre class=code>&lt;book&gt;
   &lt;title&gt;Haberdash&lt;/title&gt;
&lt;/book&gt;</pre><br>test/test.monkey<br><pre class=code>Import mojo
Import skn3.xml

Function Main:Int()
	Local error:= New XMLError
	Local ms:Int = Millisecs()
	Local doc:= ParseXML(LoadString("test.xml"), error)
	Print "Time Taken " + (Millisecs() - ms)
	If doc = Null And error.error
		Print error.ToString()
	Else
		Local nodes:= doc.GetDescendants("title")
		For Local node:= Eachin nodes
			Print node.value
		Next
		Print "Get title of the first book"
		Print doc.GetChildAtPath("title").value
	Endif

	Return 1
End</pre><br>Console output:<br><pre class=code>TRANS monkey compiler V1.46
Parsing...
Semanting...
Translating...
Building...
Done.</pre><br>HTML5 Output:<br><pre class=code>Time Taken 22
Haberdash
Get title of the first book
Haberdash</pre> <br><br></td></tr></table><br>
<a name="2056142"></a>

<a name="2056143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skn3,  I have data between two tags ie &lt;body&gt;          There is an indent here.&lt;/body&gt;.  But the 5 space indent is disappearing when I load it.  I set the whitespace Constant to 0 and it's still stripping it away.  Any ideas? <br><br></td></tr></table><br>
<a name="2056140"></a>

<a name="2056141"></a>

<a name="2056276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Chroma,<br><br>Before I start on this.. could you explain if and how you are getting any errors still, and how I can reproduce it? Once I get that reply, I'll sit down and fix the bug + fix the white space trim bug.<br><br>Cheers. <br><br></td></tr></table><br>
<a name="2056399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Come to find out it was how a string loaded with LoadString works.  Now AFAIK, everything in the XML module works fine. <br><br></td></tr></table><br>
<a name="2056494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> W00t less work for me :)) <br><br></td></tr></table><br>
<a name="2056524"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> So basically this module can help export xml too? <br><br></td></tr></table><br>
<a name="2056528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> It certainly can, just use the AddChild() and SetAttribute() methods.<br><br>To get the xml data as a string you would use the Export() method. <br><br></td></tr></table><br>
<a name="2056529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice then. I will consider using this module to handle my map format and then to make my generic world builder mixed with my Challenger GUI implementation.<br><br>Thanks for making this! <br><br></td></tr></table><br>
<a name="2056683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why is this failing with a  "Null object access" ?<br><br>I'm expecting it to return nullnode with .valid = False<br><br><pre class=code>
Local doc:= New XMLDoc("test")	
Local nod:=doc.GetChild("nonodesyet")
</pre> <br><br></td></tr></table><br>
<a name="2056687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Inserting : doc = Self in XMLDoc New() fixes it, but I no idea if I'm breaking anything .... ?<br><pre class=code>
Class XMLDoc Extends XMLNode
      ....
 
	Method New(name:String, version:String = "", encoding:String = "")
	    .....
	     doc = Self
</pre> <br><br></td></tr></table><br>
<a name="2056688"></a>

<a name="2056689"></a>

<a name="2056691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah good catch, thanks. Repo has been updated.<br><br>The doc was not storing a pointer to itself in the base class XmlNode.<br><br>[edit] Seems I should have waited for the fix to be done for me hah :D ... cheers <br><br></td></tr></table><br>
<a name="2056693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. :-)<br><br>This is actually why I'm swithing from my own XML module to yours.<br>I'm thinking more people will give a common module a good thrashing, thusly finding more glitches/bugs. <br><br></td></tr></table><br>
<a name="2056695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like standalone modules like this one <br><br></td></tr></table><br>
<a name="2056787"></a>

<a name="2056788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sk3n: Would have been nice to have a simple little example on how to use AddChild, etc. to create an XML because so far i get problems.<br><br>It crash here.. child.pathList = doc.paths.Get(child.path)<br><br>Memory Exception.. probably due to pathlist to be null or child path<br><br>EDIT: Nevermind got it to work. But i think AddChild second parameter (attributes) doesn't work well. When i use the query such test=aaa&amp;test2=bbb it crash. <br><br></td></tr></table><br>
<a name="2056789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sk3n: Would have been nice to have a simple little example on how to use AddChild, etc. to create an XML because so far i get problems.<br><br>It crash here.. child.pathList = doc.paths.Get(child.path)<br><br>Memory Exception.. probably due to pathlist to be null or child path<br><br>EDIT: Nevermind got it to work. But i think AddChild second parameter (attributes) doesn't work well. When i use the query such test=aaa&amp;test2=bbb it crash. <br><br></td></tr></table><br>
<a name="2056790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ops.. sorry for double post.. seem like a forum bug <br><br></td></tr></table><br>
<a name="2056807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey if you post an example of how to reproduce it I can test and fix it next time at a pc. <br><br></td></tr></table><br>
<a name="2056808"></a>

<a name="2056809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or maybe its me that doesn't know how it work.. What is the purpose of attributes as a string in AddChild second parameter ? <br><br></td></tr></table><br>
<a name="2056829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, it should let you set attributes with a query string. E.g. .AddChild("setting","id=setting1&amp;value=123")<br><br>It's basically a shortcut so you don't have to call lots of set attribute calls upon node creation.<br><br>Just had a look at source on bit bucket (still not at pc) and can't see any bugs although there could well be something.<br><br>If you post a way in which it crashes I can reproduce and fix. <br><br></td></tr></table><br>
<a name="2056846"></a>

<a name="2056847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> As i though, well i just used it the way you did and it crashed i didn't do anything fancy.. strange. <br><br></td></tr></table><br>
<a name="2057024"></a>

<a name="2057025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update!<br><br>Fixed your bug Rushino thanks. I was referencing the array of query items directly when I should have been reference something else.<br><br>Also added two new export flags:<br>XML_STRIP_NEWLINE export flag which will add line feeds to exported data.<br><br>XML_STRIP_CLOSING_TAGS export flag so that xml nodes with no children would get exported as &lt;tag /&gt; instead of &lt;tag&gt;&lt;/tag&gt;<br><br><br>And finally I added a second example that demonstrates how to create an XML doc. <br><br></td></tr></table><br>
<a name="2057023"></a>

<a name="2057172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks to you :) <br><br></td></tr></table><br>
<a name="2057181"></a>

<a name="2057182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> fyi - i've been using this for collada files and it's held up nicely, but when i start hitting 3MB-16MB massive collada files, i hit the memory violation wall. mostly parsing vertex data in XMLStringData in the Add method<br><pre class=code>If count = data.Length data = data.Resize(data.Length + chunk)</pre><br>this line crashes out.<br><br>If i change these lines in ParseXML to increase the chunks, it works better.<br><pre class=code>
	Local whitespaceBuffer:= New XMLStringBuffer(1024)
	Local attributeBuffer:= New XMLStringBuffer(1024)
</pre><br><br>and i'm able to load this file in minib3d:<br><a href="http://sketchup.google.com/3dwarehouse/details?mid=cf5e13277f3612f739e220ac20393eb5&amp;prevstart=0" target="_blank">http://sketchup.google.com/3dwarehouse/details?mid=cf5e13277f3612f739e220ac20393eb5&amp;prevstart=0</a><br><br>...and even this model at 16MB!<br><a href="http://sketchup.google.com/3dwarehouse/details?mid=eb36760849ae2e371b3ba5fca0675bd0&amp;prevstart=0" target="_blank">http://sketchup.google.com/3dwarehouse/details?mid=eb36760849ae2e371b3ba5fca0675bd0&amp;prevstart=0</a><br><br>pretty cool. <br><br></td></tr></table><br>
<a name="2057198"></a>

<a name="2057199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> w00t I'm glad it is performing well with large files!<br><br>I have added your tweak to the repo, thanks :D <br><br></td></tr></table><br>
<a name="2057358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updated repo, anyone following this please update your link. <br><br></td></tr></table><br>
<a name="2057394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just an update for tidyness.<br><br>Please could anyone using the lib change their import location to "import xml" and move it into the modules root.<br><br>So it will now become "Import xml" <br><br></td></tr></table><br>
<a name="2057404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >devolonter</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> [edit]Oops! Wrong thread. Sorry![/edit] <br><br></td></tr></table><br>
<a name="2057401"></a>

<a name="2057395"></a>

<a name="2057411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bram</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really neat module, thanks for sharing! <br><br></td></tr></table><br>
<a name="2059681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Why0Why</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it was a combination of problems.  I guess the updated XML and the XML has to be in the data folder.  Got it going. <br><br></td></tr></table><br>
<a name="2064037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm having issues with this module on iOS, but it works perfectly in Flash<br><br>When I go to test my iOS version, it eventually crashes (if not right away) and points to a line with m_firstChild with the error "EXC_BAD_ACCESS" (It's inside the GetChild function).<br><br>From my understanding, this error is thrown when an object that has already been released was trying to be accessed. I'm not very familiar with XCode and ObjectiveC, so I'm having a really hard time tracking this down. Any help would be greatly appreciated. <br><br></td></tr></table><br>
<a name="2064041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you have some test code? <br><br></td></tr></table><br>
<a name="2064055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's the class that handles loading XML levels with the XML module:<br><pre class=code>
Strict
Import monkeypunk.world
Import monkeypunk.xml.xml
Import monkeypunk.mp

Import src.props.rock
Import src.props.coin
Import src.props.ringbasic
Import src.props.ringmove
Import src.props.balloon
Import src.props.balloonmine

Class ChunkManager

Private
	Global _chunkData:XMLDoc
	Global _chunks:StringMap&lt;Stack&lt;XMLNode&gt;&gt;
	Global _lastChunk:Int = 0
	Global _chunksSinceLastCoin:Int = 0
	
Public
	Global lastChunkName:String = ""
	
	Function Init:Void (xmlPath:String)
		_chunkData = ParseXML(LoadString(xmlPath))
		_chunks = New StringMap&lt;Stack&lt;XMLNode&gt;&gt;
		
		For Local chunk:XMLNode = Eachin _chunkData.children
			' push chunk on stack
			If (chunk.GetAttribute("isCoinChunk") = "True")
				' if stack does not already exist, create one
				If (Not _chunks.Contains(chunk.GetAttribute("difficulty") + "_coin"))
					_chunks.Set(chunk.GetAttribute("difficulty") + "_coin", New Stack&lt;XMLNode&gt;())
				Endif
			
				' if has coins, put in coin stack
				_chunks.Get(chunk.GetAttribute("difficulty") + "_coin").Push(chunk)
			Else
				' if stack does not already exist, create one
				If (Not _chunks.Contains(chunk.GetAttribute("difficulty")))
					_chunks.Set(chunk.GetAttribute("difficulty"), New Stack&lt;XMLNode&gt;())
				Endif
			
				' otherwise put in normal stack
				_chunks.Get(chunk.GetAttribute("difficulty")).Push(chunk)
			Endif
		End For
	End
	
	Function LoadChunk:Void (difficulty:String)
		Local index:Int
		Local chunk:XMLNode
		If (_chunksSinceLastCoin &gt; GC.CHUNK_COIN_INTERVAL And MP.RandomFloat() &lt;= GC.CHUNK_COIN_CHANCE)
			' pick a random coin chunk
			index = MP.RandomInt(_chunks.Get(difficulty + "_coin").Length())
			_chunksSinceLastCoin = 1
			
			' get chunk
			chunk = _chunks.Get(difficulty + "_coin").Get(index)
		Else
			' pick a random chunk
			index = MP.RandomInt(_chunks.Get(difficulty).Length())
			_chunksSinceLastCoin += 1
			
			' if chose last chunk, choose again
			While (index = _lastChunk)
				index = MP.RandomInt(_chunks.Get(difficulty).Length())
			Wend
			_lastChunk = index
			
			' get chunk
			chunk = _chunks.Get(difficulty).Get(index)
		Endif
		
		lastChunkName = chunk.GetAttribute("file")
		
		' load props
		Local world:World = MP.GetWorld()
		Local props:List&lt;XMLNode&gt; = chunk.GetChild("props").children
		Local x:Int, y:Int
	    For Local prop:XMLNode = Eachin props
	    	x = Int(prop.GetAttribute("x")) + MP.width
	    	y = Int(prop.GetAttribute("y"))
	    	
	    	' NOTE: XML plugin lowercases all node names
	 		Select (prop.name)
	 			Case "ringbasic"
	 				world.Add(RingBasic.Create().Init(x, y))
	 			Case "ringmove"
	 				Local nodes:Stack&lt;Point&gt; = New Stack&lt;Point&gt;()
	 				nodes.Push(New Point(x - MP.width, y))
	 				For Local n:XMLNode = Eachin prop.children
	 					nodes.Push(New Point(Int(n.GetAttribute("x")), Int(n.GetAttribute("y"))))
	 				End For
	 				
	 				world.Add(RingMove.Create().Init(x, y, Int(prop.GetAttribute("speed")), nodes))
	 			Case "coin"
	 				world.Add(Coin.Create().Init(x, y))
	 			Case "balloon"
	 				world.Add(Balloon.Create().Init(x, y))
	 			Case "balloonmine"
	 				world.Add(BalloonMine.Create().Init(x, y))
	 			Case "rock_a"
	 				world.Add(Rock.Create().Init(x, y, prop.name))
	 			Case "rock_b"
		 			world.Add(Rock.Create().Init(x, y, prop.name))
	 			Case "rock_c"
	 				world.Add(Rock.Create().Init(x, y, prop.name))
	 			Case "rock_d"
	 				world.Add(Rock.Create().Init(x, y, prop.name))
	 		End Select
	 		
	    End For
	End
	
End Class
</pre><br><br>Our XML file is quite large, so here's a small snippet of it:<br><pre class=code>
&lt;chunkDB&gt;
	&lt;chunk file="easyChunk01.oel" width="2048" height="1536" difficulty="EASY" isCoinChunk="False"&gt;
	  	&lt;props&gt;
	    	&lt;ringBasic id="4" x="912" y="736" /&gt;
	    	&lt;rock_a id="0" x="112" y="976" /&gt;
	    	&lt;rock_c id="1" x="1264" y="832" /&gt;
	  	&lt;/props&gt;
	  	&lt;background&gt;
	    	&lt;background id="0" x="0" y="0" /&gt;
	  	&lt;/background&gt;
	&lt;/chunk&gt;
	&lt;chunk file="easyChunk02.oel" width="2048" height="1536" difficulty="EASY" isCoinChunk="False"&gt;
	  	&lt;props&gt;
	    	&lt;ringBasic id="2" x="944" y="224" /&gt;
	    	&lt;rock_b id="0" x="784" y="976" /&gt;
	  	&lt;/props&gt;
	  	&lt;background&gt;
	    	&lt;background id="0" x="0" y="0" /&gt;
	  	&lt;/background&gt;
	&lt;/chunk&gt;
	&lt;chunk file="easyChunk03.oel" width="2048" height="1536" difficulty="EASY" isCoinChunk="True"&gt;
	  	&lt;props&gt;
	    	&lt;balloon id="7" x="528" y="384" /&gt;
	    	&lt;balloon id="31" x="1264" y="384" /&gt;
	    	&lt;coin id="0" x="944" y="1008" /&gt;
	    	&lt;coin id="1" x="1024" y="1008" /&gt;
	    	&lt;coin id="2" x="1104" y="992" /&gt;
	    	&lt;coin id="3" x="864" y="992" /&gt;
	    	&lt;coin id="4" x="784" y="976" /&gt;
	    	&lt;coin id="5" x="1184" y="976" /&gt;
	    	&lt;coin id="6" x="1264" y="960" /&gt;
	    	&lt;coin id="8" x="704" y="960" /&gt;
	    	&lt;coin id="9" x="1344" y="928" /&gt;
	    	&lt;coin id="10" x="624" y="928" /&gt;
	    	&lt;coin id="21" x="944" y="928" /&gt;
	    	&lt;coin id="22" x="1024" y="928" /&gt;
	    	&lt;coin id="23" x="1104" y="912" /&gt;
	    	&lt;coin id="24" x="864" y="912" /&gt;
	    	&lt;coin id="25" x="784" y="896" /&gt;
	    	&lt;coin id="26" x="1184" y="896" /&gt;
	    	&lt;coin id="27" x="1264" y="880" /&gt;
	    	&lt;coin id="28" x="704" y="880" /&gt;
	    	&lt;coin id="29" x="1344" y="848" /&gt;
	    	&lt;coin id="30" x="624" y="848" /&gt;
	  	&lt;/props&gt;
	  	&lt;background&gt;
	    	&lt;background id="0" x="0" y="0" /&gt;
	  	&lt;/background&gt;
	&lt;/chunk&gt;
...
&lt;/chunkDB&gt;
</pre> <br><br></td></tr></table><br>
<a name="2064103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm well I had a look over the code and over teh XML module and at first glance I can't see anything that might cause it.<br><br>I do notice you are holding onto the XMLNode in your init function. Just as an experiment, what if you create a duplicate of the XMLNode retrieved from the document and store that instead? I can't really see why this would be an issue though as in the code you are not freeing the XML document.<br><br>Do you have an example code that I can run and test it on my machine?<br><br>Also do you have the full details of where it is crashing? What monkey line?<br><br>Try enabling this in xcode:<br><a href="http://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode" target="_blank">http://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode</a><br>You may have to hunt around for the setting a bit depending on your xcode version. It will give you a bit more info on the exc_bad. <br><br></td></tr></table><br>
<a name="2064102"></a>

<a name="2064106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh also noticed something in your code.<br><br>You are accessing the xml nodes without checking they actually exists. There is a mechnaism in place to prevent this being an issue, but as a rule you should either change your loop mechanism to use the built in previous/next pointers or make sure you always check <b>If myNode.valid</b> before doing anything to myNode.<br><br>This is the alternative looping method:<br><pre class=code>prop = chunk.GetChild("prop")
While prop.valid
	'next
	prop = prop.GetNextSibling("prop")
Wend</pre> <br><br></td></tr></table><br>
<a name="2064105"></a>

<a name="2064225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hm, my problem is that I can't get the nodes under "props" with the get child method which is why I was looping through the children. So your alternative looping method actually breaks the game, since it isn't loading the individual props.<br><br>I'm currently not on the Mac, but here's the section of your module where it breaks:<br><pre class=code>
Method GetChild:XMLNode()
		' --- gets the first child ---
		'skip
		If firstChild = Null Return doc.nullNode // breaks here
		
		'return
		Return firstChild
	End
</pre> <br><br></td></tr></table><br>
<a name="2064236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I think perhaps there is an issue somewhere else as nullnode will always exist. Are you sure your not freeing the doc somewhere else? <br><br></td></tr></table><br>
<a name="2064238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not to my knowledge...this is the only class that uses your XML module. <br><br></td></tr></table><br>
<a name="2064254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't really do much as I am away from pc for the next week. One suggestion, try disabling the garbage collection in monkey? What happens then? <br><br></td></tr></table><br>
<a name="2064346"></a>

<a name="2064347"></a>

<a name="2064348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> How would I go about turning off the garbage collector?<br><br>EDIT:<br>Here are some screenshots of the errors...however it seems to be breaking on a different line today. <br><br><a href="https://dl.dropboxusercontent.com/u/5434183/Screen%20Shot%202013-08-05%20at%208.04.12%20PM.png" target="_blank">Screenshot 1</a><br><br><a href="https://dl.dropboxusercontent.com/u/5434183/Screen%20Shot%202013-08-05%20at%208.08.06%20PM.png" target="_blank">Screenshot 2</a> <br><br></td></tr></table><br>
<a name="2064344"></a>

<a name="2064470"></a>

<a name="2064471"></a>

<a name="2064472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> So after thinking about the issue and doing some tests, I've been able to make some progress.<br><br>I was able to figure out how to get the loop you suggested with the following code:<br><br><pre class=code>
Local prop:XMLNode = _chunk.GetChild("props").GetChild()
While (prop.valid)
    // ... logic here ...
    prop = prop.GetNextSibling()
Wend
</pre><br><br>I'm still getting the same error and the line it breaks on still isn't consistent - sometimes it will break right away while other times it takes a few moments. <br><br>The common thing I've noticed between the lines it breaks on is that its trying to access a member of the current "chunk" XML node. As I mentioned earlier, from what I've read the error (which is always "EXC_BAD_ACCESS") is caused when object is null when its trying to be accessed.<br><br>This leads me to believe it might <b>indeed</b> be Monkey's GC clearing the node reference. So my question is now, how do I debug this? Is there a way to disable the garbage collector?<br><br>EDIT: okay this might actually be an issue in the version of monkey that I am using (v70g) as I downloaded the newest version (v72b) and the error <b>seems</b> to be gone. However now I'm getting the error "signal SIGABRT" at:<br><br><pre class=code>
int main( int argc,char *argv[]){
NSAutoreleasePool *pool=[NSAutoreleasePool alloc] init];
UIApplicationMain(argc,argv,nil,nil); // break here
[pool release];
return 0;
</pre><br><br>When I disable the chunk loading (which uses the XML module) the game runs error free. <br><br></td></tr></table><br>
<a name="2064467"></a>

<a name="2064512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SHiLLSiT</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Problem solved!<br><br>Turns out the random number generator I wrote was occasionally returning negative values, which were being used to get an index in the stack, hence the null objects.<br><br>My apologies for blaming the module. <br><br></td></tr></table><br>
<a name="2064585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wewt! Well that's good you fixed it. Always good to iron out any bugs if they are there in the XML module. <br><br></td></tr></table><br>
<a name="2064941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey there,<br><br>I have an issue here. It works perfectly on Android, but on Glfw and iOS I receive:<br><br>XMLError: unexpected end of xml [line:1  column:1  offset:0]<br><br>and this is the XML file:<br><pre class=code>
 &lt;thelist&gt;
	&lt;Session&gt;
		&lt;Title&gt;Antrenament 1&lt;/Title&gt;
		&lt;Picture&gt;0&lt;/Picture&gt;
		&lt;Description&gt;Acesta este cel mai utli antrenament ever.&lt;/Description&gt;
		&lt;Duration&gt;70&lt;/Duration&gt;
		&lt;NumberOfPictures&gt;67&lt;/NumberOfPictures&gt;		
	&lt;/Session&gt;
	&lt;Session&gt;
		&lt;Title&gt;Antrenament 2&lt;/Title&gt;
		&lt;Picture&gt;1&lt;/Picture&gt;
		&lt;Description&gt;Acesta este un antrenament care trebuie cumparat.&lt;/Description&gt;
		&lt;Duration&gt;90&lt;/Duration&gt;
		&lt;NumberOfPictures&gt;67&lt;/NumberOfPictures&gt;
	&lt;/Session&gt;
 &lt;/thelist&gt;
</pre> <br><br></td></tr></table><br>
<a name="2065012"></a>

<a name="2065014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Raul,<br><br>Just looked at this. Check the repo for example4. This works perfectly for me on glfw? <br><br>I updated the module with a very basic error check if the xml data is zero length.<br><br>Are you sure you something else is not going on in your code such as a typo in filename or empty file? Maybe the file is not copying across? Do you have weird characters in your filename?<br><br>Can you verify that the data you are sending to ParseXML is there? Try printing it out before ParseXML is called? <br><br></td></tr></table><br>
<a name="2065139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> hello Skn3,<br><br>it is working fine on both OS. retested with the previous version of XML module.<br><br>thanks anyway for diving into this. <br><br></td></tr></table><br>
<a name="2065228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hurrah no problem :) <br><br></td></tr></table><br>
<a name="2066832"></a>

<a name="2066833"></a>

<a name="2066834"></a>

<a name="2066835"></a>

<a name="2066836"></a>

<a name="2066839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updated repo:<br><div class="quote"> 'version 18<br>' - added GetAttributeOrAttribute() to XMLNode. This allows you to get attribute by id. If that attribute doesnt exist it looks for second id. If neither exist, default value is returned.<br>' - fixed null node returns in Get Previous/Next sibling methods <br></div><br><br>This allows you to do something like<br><br><pre class=code>Local padding:String = node.GetAttributeOrAttribute("padding_left","padding","&lt;null&gt;")</pre><br>In this line it would first try to get the attribute "padding_left". If that was not defined in your xml it would then try to get "padding". Finally if neither are defined, a default value of "&lt;null&gt;" is returned. <br><br></td></tr></table><br>
<a name="2066830"></a>

<a name="2067081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> SKN3:<br><br>I created an overload called "GetChildren:List&lt;XMLNode&gt;()" that may be useful to others for grabbing ALL children of a node.<br><br>In the "XMLNode" class:<br><pre class=code>
	Method GetChildren:List&lt;XMLNode&gt;()
		' --- get all children ---
		Local result:= New List&lt;XMLNode&gt;
		
		'skip
		If firstChild = Null Return result
		
		'scan children
		If firstChild &lt;&gt; Null
			Local child:= firstChild
			While child
				'Add child
				result.AddLast(child)
				
				'next child
				child = child.nextSibling
			Wend
		Endif
		
		'return the result
		Return result
	End
</pre><br><br>I needed this so I could iterate all of the children for a generic way to read what is in a given node. Someone else may find it useful as well :) <br><br></td></tr></table><br>
<a name="2066945"></a>

<a name="2066946"></a>

<a name="2067023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> SKN3:<br><br>I was working with the XML writer portion of this and found an issue with the internal Export method of XMLNode. <br><br>If I have the XML_STRIP_CLOSING_TAGS option on AND there are no children nodes AND I have a value for the node, the current code fails to write the value to the buffer.<br><br>Use this example to test against the current code:<br><pre class=code>
Import mojo
Import xml

'--- test program---
Class TestApp Extends App
	Method OnCreate:Int()
		Local error:= New XMLError
		
		'create a doc
		Local doc:= New XMLDoc("Test","1.0","UTF-8")
		
		'create a group
		Local group:= doc.AddChild("MyChild")
		group.value = "I have a value!"
		
		'print then resulting XML
		Print doc.Export(XML_STRIP_CLOSING_TAGS)
		
		'quit the app
		Error ""
		Return True
	End
End

Function Main:Int()
	New TestApp
	Return True
End
</pre><br>It would look like this:<br><pre class=code>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;test&gt;
	&lt;mychild /&gt;
&lt;/test&gt;
</pre><br>Notice its missing the value "I have a value!" in the "data" tag. It truncates the value AND shortens the tag!<br><br>I corrected this issue with the following code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

	'internal
	Private
	Method Export:Void(options:Int, buffer:XMLStringBuffer, depth:Int)
		' --- convert the node to a string ---
		'make sure there is a buffer to work with
		If buffer = Null buffer = New XMLStringBuffer(1024)
		
		Local index:Int
		
		'add opening tag
		'ident
		If options &amp; XML_STRIP_WHITESPACE = False
			For index = 0 Until depth
				buffer.Add(9)
			Next
		EndIf
		
		buffer.Add(60)
		buffer.Add(name)
		
		'add attributes
		For Local id:= EachIn attributes.Keys()
			buffer.Add(32)
			buffer.Add(id)
			buffer.Add(61)
			buffer.Add(34)
			buffer.Add(attributes.Get(id).value)
			buffer.Add(34)
		Next
		
		'check for short tag
		If children.IsEmpty() And options &amp; XML_STRIP_CLOSING_TAGS And Not value.Length
			'no children so short tag
			'finish opening tag
			buffer.Add(32)
			buffer.Add(47)
			buffer.Add(62)
			
			'add new line
			If options &amp; XML_STRIP_NEWLINE = False buffer.Add(10)

		Else
			'has children need to do opening tag only
			'finish opening tag
			buffer.Add(62)
			
			'add new line
			If options &amp; XML_STRIP_NEWLINE = False buffer.Add(10)
			
			'add children
			If children.IsEmpty() = False
				For Local child:= Eachin children
					child.Export(options, buffer, depth + 1)
				Next
			Endif
			
			'add value
			If value.Length 
				buffer.Add(value)
				If options &amp; XML_STRIP_NEWLINE = False buffer.Add(10)
			Endif
			
			'add closing tag
			'ident
			If options &amp; XML_STRIP_WHITESPACE = False
				For index = 0 Until depth
					buffer.Add(9)
				Next
			Endif
			
			'tag
			buffer.Add(60)
			buffer.Add(47)
			buffer.Add(name)
			buffer.Add(62)
			
			'add new line
			If options &amp; XML_STRIP_NEWLINE = False buffer.Add(10)
		Endif
	End
</textarea><br>After the changes above and retrying with the example code I provided, the result will now look like this:<br><pre class=code>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;test&gt;
	&lt;mychild&gt;
I have a value!
	&lt;/mychild&gt;
&lt;/test&gt;
</pre><br>I also went ahead and had it check the options for the XML_STRIP_NEWLINE so that it played nicely there too :) <br><br></td></tr></table><br>
<a name="2067029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks computercoder! Thats very helpful, all I have to do is copy and paste :D<br><br>Much appreciation. I also added a few tweaks.<br><br><div class="quote"> 'version 19<br>' - added GetChildren() override to get ALL children (thanks computercoder)<br>' - added fixes to Export method, thanks computercoder<br>' - added GetDescendants) override to get all<br>' - added result param to all GetChildren/GetDescendants methods. This lets you pass in the list that results will be populated in <br></div> <br><br></td></tr></table><br>
<a name="2067040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad I could help you :) <br><br>Thanks for modifying your source with these changes, they will definitely come in handy! <br><br></td></tr></table><br>
<a name="2075469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> SKN3:<br><br>Something I just noticed that was introduced this update in the XMLNode class:<br><pre class=code>
	'internal
	Private
	
	
	'internal
	Private
	Method Export:Void(options:Int, buffer:XMLStringBuffer, depth:Int)
</pre><br><br>It may not make any difference to the operation on the code, but the next time you update the source, you may want to exclude that :) <br><br></td></tr></table><br>
<a name="2067046"></a>

<a name="2067087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks, fixed .. no new version number though <br><br></td></tr></table><br>
<a name="2074753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi.<br><br>i'm having a problem with the input parsing something like this:<br><pre class=code>
&lt;?xml version="1.0"?&gt;
&lt;COLLADA version="1.4.0" xmlns="http://www.collada.org/2005/11/COLLADASchema"&gt;
&lt;asset&gt;
&lt;contributor&gt;
&lt;author&gt;Wings3D Collada Exporter&lt;/author&gt;
&lt;authoring_tool&gt;Wings3D 1.5.2 Collada Exporter&lt;/authoring_tool&gt;
&lt;comments/&gt;
&lt;copyright/&gt;
&lt;source_data/&gt;
&lt;/contributor&gt;
&lt;created&gt;2013-12-28T09:08:16&lt;/created&gt;
&lt;modified&gt;2013-12-28T09:08:16&lt;/modified&gt;
&lt;unit meter="0.01" name="centimeter"/&gt;
&lt;up_axis&gt;Y_UP&lt;/up_axis&gt;
&lt;/asset&gt;
</pre><br>it's incomplete, i can send the full file if you need it.<br>it seems to be dying right at "&lt;comments/&gt;". <br><br></td></tr></table><br>
<a name="2074736"></a>

<a name="2075406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ooo XML BUG!<br><br>Have you got latest version?<br><br>Out if interest what happens if you put a space? (E.g &lt;comments /&gt;)<br><br>A runnable example would be good yeah please. <br><br></td></tr></table><br>
<a name="2075429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> I took a quick look at the code, and using the XML AS-IS, the &lt;comments/&gt; doesn't parse. BUT, if you try &lt;comments /&gt; it handles the code correctly (assuming you do the same with each null terminated line like it in the XML).<br><br>Here is my test code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#TEXT_FILES="*.xml"

Import mojo
Import monkey
Import xml

Function Main()

	New testXml
	
End

Class testXml Extends App
	
	Field XmlLoaded:Bool = False
	
	Method OnCreate()
		
		SetUpdateRate 30

	End
	
	Method OnClose()
		EndApp
	End
	
	Method OnUpdate()

	End
	
	Method OnRender()
		
		Cls
		
		If XmlLoaded = False
			ReadXml()
			XmlLoaded = True
		Endif
		
	End

	Method ReadXml()
	
		Local XmlError:XMLError   = New XMLError
		Local RootXmlNode:XMLDoc  = ParseXML(LoadString("test.xml"), XmlError)
		Local XmlNode:XMLNode     = Null
	
		If XmlError.error = False
			Local NodeList:List&lt;XMLNode&gt; = RootXmlNode.GetChildren()
			For XmlNode = Eachin NodeList
				Print XmlNode.name
			Next

		Else
			Print XmlError.ToString()
			
		Endif
	End

End
</textarea><br><br>Here is the "test.xml" file modified from AdamRedwoods' file:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;collada version="1.4.0" xmlns="http://www.collada.org/2005/11/COLLADASchema"&gt;
	&lt;asset&gt;
		&lt;contributor&gt;
			&lt;author&gt;Wings3D Collada Exporter&lt;/author&gt;
			&lt;authoring_tool&gt;Wings3D 1.5.2 Collada Exporter&lt;/authoring_tool&gt;
			&lt;comments /&gt;
			&lt;copyright /&gt;
			&lt;source_data /&gt;
		&lt;/contributor&gt; 
		&lt;created&gt;2013-12-28T09:08:16&lt;/created&gt;
		&lt;modified&gt;2013-12-28T09:08:16&lt;/modified&gt;
		&lt;unit meter="0.01" name="centimeter"/&gt;
		&lt;up_axis&gt;Y_UP&lt;/up_axis&gt;
	&lt;/asset&gt;
&lt;/collada&gt;
</textarea> <br><br></td></tr></table><br>
<a name="2075426"></a>

<a name="2075435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> @SKN3:<br><br>I found and fixed the issue, if you want the behavior I made it use. <br>Basically, the current code requires a space between the name tag and the "/". My code allows the "/" to be right beside it in the case Adam presented.<br><br>Here's what I fixed to ParseXML:<br><br>1) Added variable declaration<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
	Local prevRawAsc:Int = 0
</textarea><br><br>2) Added code just below the For rawIndex = 0 Until raw.Length:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
		If rawIndex &gt; 0 prevRawAsc = rawAsc
</textarea><br><br>3) Added to the code in the If inQuote = False , where you start seeing what is there to parse and need to be selective on what you parse. It is under "Case 47 '/"<br><br>Changed this:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
          If hasTagName
</textarea><br><br>To this:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
         If hasTagName Or (prevRawAsc &gt;= 65 And prevRawAsc &lt;= 90) Or (prevRawAsc &gt;= 97 And prevRawAsc &lt;= 122)
</textarea><br><br>This fix may need additional characters to check for. The idea was to make sure there was an alpha character, but you may also check numbers or special characters too.<br><br>4) Finally, I wrapped the check with the error for "mismatched end tag" as follows:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
     If isCloseSelf = False
        If parent = Null or tagName &lt;&gt; parent.name
           'error
           If error error.Set("mismatched end tag", rawLine, rawColumn, rawIndex)
           Return Null
       EndIf
     EndIf
</textarea><br><br>Executing this code ran Adam's XML (after I added the closing &lt;/COLLADA&gt; tag) without errors :) <br><br></td></tr></table><br>
<a name="2075434"></a>

<a name="2075436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice, thanks! <br><br></td></tr></table><br>
<a name="2075449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> update:<br><div class="quote"> 'version 22<br>' - fixed self closing tags where no space is provided e.g. &lt;tag/&gt; - thanks AdamRedwoods and ComputerCoder<br>' - moved into jungle solution<br>' - added test example 5 for testing self closing tags without space <br></div><br><br>Cheers Adam and ComputerCoder for the bug report. Much thanks for the fix but it was basically a logic error instead of character lookup proposed. The fix was to make sure the correct flags were set on and off at the right time. <br><br></td></tr></table><br>
<a name="2075459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I saw there was a logical error of sort. I was just trying to get something out there that would work. I knew that it needed the flags set right to make it behave correctly, I just wasn't fully sure on how everything was operating (and I was in the middle of sorting out some other issues in my GUI logic as well) so out this came! :) At least it worked! =D However, my code provided has a technical flaw and limitation of the possibility of missing non-alpha characters. Unless its verbose enough to handle ALL of them, it will still have its times at allowing specific instances to pass when they should otherwise be caught.<br><br> I'll have a look at how you implemented the fix :) <br><br></td></tr></table><br>
<a name="2075460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah it took me a while to get my head around it, been a while since I had to look at the actual parser. Basically I added some conditions when it sees a / to see if the name has already been processed. Then a step near the end to turn on a flag inbetween processing the string buffer and processing the tag.<br><br>Because the processing of the tag only happens when non alphanumeric character is matched, it meant that it was hitting / and attempting to close the tag that had not been opened yet. Chicken say hello to egg! <br><br></td></tr></table><br>
<a name="2075477"></a>

<a name="2075478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was almost there! I had the flag needs setting part and I knew it had the tag name, but I kept thinking "how do I tell the code it has it? And how are these flags being set? guess I'll step through it all.." <br><div class="quote"> <br>Then a step near the end to turn on a flag inbetween processing the string buffer and processing the tag.<br> <br></div><br>I saw it, but the processing tag part completely flew by me... Early morning (between 2 and 3 AM) coding does this I guess? :P<br><br>I also took a look at how you implemented it - and as soon as I saw the processing tag part, it was so obvious. I chuckled at my fix =8D <br><br></td></tr></table><br>
<a name="2075553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> I might have to do a bit more detailed flow of code commenting in the future. Just so its easier to come back to :D <br><br></td></tr></table><br>
<a name="2075843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 'version 23<br>' - added tweak/fix to parser to ignore doctype tag (later on can add support) (cheers copper circle)<br>' - added tweak/fix to parser to allow : in tag/attribute names (later can add support for contexts) (cheers copper circle) <br></div> <br><br></td></tr></table><br>
<a name="2075857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the updates :) <br><br></td></tr></table><br>
<a name="2077461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maltic</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just thought I should let you know I am finding this very useful for parsing Tiled maps and serialized data for my game. Thanks! <br><br></td></tr></table><br>
<a name="2077960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> @maltic<br><br>I use this code to parse the XML files created by Tiled. Skn3 did a GREAT job building this module! So whenever I find something that could benefit it, I'm more than happy to pitch in and give up ideas and/or code to him. It's the least I can do for his generosity and time :) <br><br></td></tr></table><br>
<a name="2078479"></a>

<a name="2078480"></a>

<a name="2078481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> :D shucks!<br><br>Also thank the army of bug reporters who bug tested my bug riddled code ;) <br><br></td></tr></table><br>
<a name="2080383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 'version 23<br>' - added tweak/fix to parser to ignore doctype tag (later on can add support) (cheers copper circle)<br> <br></div><br><br>I'm still getting errors on the doctype tag, but only on OS X, for example on this one: <br><br><a href="https://github.com/Difference/Monkey-SVG/blob/master/svg.data/tiger.svg" target="_blank">https://github.com/Difference/Monkey-SVG/blob/master/svg.data/tiger.svg</a> <br><br></td></tr></table><br>
<a name="2080304"></a>

<a name="2080382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> Putting a space between the doctype tag and the first svg tag fixes it ... <br><br></td></tr></table><br>
<a name="2080399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, will take a look this afternoon and fix it :D <br><br></td></tr></table><br>
<a name="2080476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe it's just me, but this seems to be outputting something quite unexpected.<br><br><pre class=code>Function Main:Int()
	Local text:String = "&lt;root&gt;&lt;text&gt;Hello &lt;i&gt;W&lt;b&gt;orld&lt;/b&gt;!&lt;/i&gt;&lt;/text&gt;&lt;/root&gt;"
	Local xmlErr:XMLError
	Local xml:XMLDoc = ParseXML(text, xmlErr)
	If xml = Null Error(xmlErr)
	
	Local node:XMLNode
	For node = EachIn xml.children
		DisplayNodes(node)
	Next
End

Function DisplayNodes:Void( node:XMLNode, depth:Int = 0 )
	Print node.name + " = " + node.value
	depth += 1
	For node = EachIn node.children
		DisplayNodes(node, depth)
	Next
End</pre><br><br>Output<br><pre class=code>text = Hello
i = W!
b = orld</pre><br><br>I thought it would take and parse the two sides as separate nodes. It surprised me when it put them together. I was hoping to use your XML parser as a text builder for a text system I was building, but it looks like I'll just manually make something for now. <br><br></td></tr></table><br>
<a name="2081576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Skn3:  When you're in there, you should probably rip out that Print raw[rawIndex..] at line 1845 that keeps spitting out xml in my debug window :-) <br><br></td></tr></table><br>
<a name="2086378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >V. Lehtinen</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! I made a TileD tilemap importer with this great XML module!<br>It so far only loads all possible data that those tilemaps have - at least I think it does.<br>Also supports external tilesets (*.tsx).<br><br>But please note:<br> - Code doesn't support zlib/gzip compressed tile data<br> - Code doesn't support Base64 encoded tile data<br> - These classes are only data collections so far<br><br>If someone still finds this code useful or potential, please feel free to continue or use it. :)<br><br>Cheers!<br><br><br>Usage:<br><pre class=code>Function Main:Int()
    Local tmap:= New TiledMap("path_to_tilemap.tmx")
End</pre><br><br>tiledmap.monkey<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Strict

Import mojo
Import skn3.xml
Import os

Alias LoadString = mojo.app.LoadString

Class Tilemap 'A base class in my game engine, kinda useless here...
    Field width:Int, height:Int
    Field tileWidth:Int, tileHeight:Int
End

Class TiledMap Extends Tilemap
  Private
    Field realPath:String
    Field doc:XMLDoc, error:XMLError
  Public
    Field tilesets:= New StringMap&lt;TiledTileset&gt;
    Field layers:= New StringMap&lt;TiledLayer&gt;
    Field objectGroups:= New StringMap&lt;TiledObjectGroup&gt;
    
    
    Method New(path:String)
        realPath = ExtractDir(RealPath(path))
        Self.LoadXML(LoadString(path))
    End
    
  Private '// PRIVATE //
  
    Method LoadXML:Void(xml:String)
        If xml.Length = 0 Then Return 'note: Proper error
    
        Self.error = New XMLError
        Self.doc = ParseXML(xml, Self.error)
        
        If error.error or doc = Null Then Print(error.ToString())
        If doc.children = Null Then Error("Unable to load tilemap; no data.")
        
        Local map:XMLNode = doc.GetChild().GetParent()
                
        Local tiledVersion:String = map.GetAttribute("version") ' Not used
        Local orientation:String = map.GetAttribute("orientation") ' Not used
        
        width = Int(map.GetAttribute("width"))
        height = Int(map.GetAttribute("height"))
        tileWidth = Int(map.GetAttribute("tilewidth"))
        tileHeight = Int(map.GetAttribute("tileheight"))
        
        Local tileset:TiledTileset, layer:TiledLayer, objGroup:TiledObjectGroup
        
        For Local node:XMLNode = EachIn map.children
            Select node.name
                Case "tileset"
                    tileset = LoadTileset(node)
                    If tileset &lt;&gt; Null Then
                        tilesets.Set(tileset.name, tileset)
                    End
                    
                Case "layer"
                    layer = LoadLayer(node)
                    If layer &lt;&gt; Null Then
                        layers.Set(layer.name, layer)
                    End
                    
                Case "objectgroup"
                    objGroup = LoadObjectGroup(node)
                    If objGroup &lt;&gt; Null Then
                        objectGroups.Set(objGroup.name, objGroup)
                    End
                    
            End
            
            'Debugging, data-structure-printing
            'PrintXMLNode(node)
        Next
        
    End
    
    Method LoadTileset:TiledTileset(node:XMLNode)
        If node = Null Then Return Null
        If node.name &lt;&gt; "tileset" Then Return Null
        
        Local tileset:= New TiledTileset()
        

        ' Get tileset properties
        Local props:XMLNode = node.GetChild("properties")
        If props &lt;&gt; Null Then
            tileset.properties.Extend(props)
        End
        
        tileset.firstGID = Int(node.GetAttribute("firstgid", "1"))
        
        If node.HasAttribute("name") 'Load tileset
            LoadTilesetData(node, tileset)
            
        Else If node.HasAttribute("source") 'Load external tileset
            Local extTileset:XMLDoc = ParseXML(LoadString(node.GetAttribute("source")), error)
            If error.error or extTileset = Null Then Error("File '" + node.GetAttribute("source") + "' " + error.ToString())
            
            LoadTilesetData(extTileset.GetChild().GetParent(), tileset)
        End
        
        Return tileset
    End
    
    Method LoadTilesetData:Void(node:XMLNode, tileset:TiledTileset)
        If node = Null or tileset = Null Then Return

        tileset.name = node.GetAttribute("name")
        tileset.tileWidth = Int(node.GetAttribute("tilewidth"))
        tileset.tileHeight = Int(node.GetAttribute("tileheight"))
        
        Local imgNode:XMLNode = node.GetChild("image")
        If imgNode = Null Then Error("Tileset '" + node.GetAttribute("name") + "' has no image?")
        
        ' Get properties for individual tiles
        Local tileNode:XMLNode, prop:TiledPropertySet, tempProps:XMLNode
        For tileNode = EachIn node.children
            Select tileNode.name
                Case "tile"
                    tempProps = tileNode.GetChild("properties")
                    prop = New TiledPropertySet()
                    prop.Extend(tempProps)
                    
                    Local id:Int = Int(tileNode.GetAttribute("id"))
                    tileset.tileProperties.Set(id, prop)
            End
        Next
    End
    
    Method LoadLayer:TiledLayer(node:XMLNode)
        If node = Null Then Return Null
        If node.name &lt;&gt; "layer" Then Return Null
        
        Local layer:= New TiledLayer()
        
        layer.name = node.GetAttribute("name")
        layer.width = Int(node.GetAttribute("width"))
        layer.height = Int(node.GetAttribute("height"))
        
        ' Get layer properties
        Local props:XMLNode = node.GetChild("properties")
        If props &lt;&gt; Null Then
            layer.properties.Extend(props)
        End
        
        LoadLayerData(node, layer)
        
        Return layer
    End
    
    Method LoadLayerData:Void(node:XMLNode, layer:TiledLayer)
        Local data:XMLNode = node.GetChild("data")
        If data = Null Then Print("WARNING: Layer '" + layer.name + "' has no data!")
        
        Local tileNode:XMLNode, x:Int = 0, y:Int = 0
        For tileNode = EachIn data.children
            If x &gt;= width Then
                y += 1
                x = 0
            End
        
            If tileNode.name = "tile" And tileNode.HasAttribute("gid") Then
                layer.SetTileID(x, y, Int(tileNode.GetAttribute("gid")))
            End
            
            x += 1
        Next
    End
    
    
    Method LoadObjectGroup:TiledObjectGroup(node:XMLNode)
        If node = Null Then Return Null
        If node.name &lt;&gt; "objectgroup" Then Return Null
        
        Local objGroup:= New TiledObjectGroup()
        
        objGroup.name = node.GetAttribute("name")
        objGroup.width = Int(node.GetAttribute("width"))
        objGroup.height = Int(node.GetAttribute("height"))
        
        ' Get group properties
        Local props:XMLNode = node.GetChild("properties")
        If props &lt;&gt; Null Then
            objGroup.properties.Extend(props)
        End
        
        ' Load objects from group
        Local child:XMLNode, obj:TiledObject
        For child = EachIn node.children
            If node.name = "object" Then
                obj = LoadObject(child)
                If obj &lt;&gt; Null Then objGroup.objects.AddLast(obj)
            End
        Next
        
        Return objGroup
        
    End
    
    Method LoadObject:TiledObject(node:XMLNode)
        If node = Null Then Return Null
        
        Local obj:= New TiledObject
        
        obj.name = node.GetAttribute("name")
        obj.type = node.GetAttribute("type")
        obj.x = Int(node.GetAttribute("x"))
        obj.y = Int(node.GetAttribute("y"))
        obj.width = Int(node.GetAttribute("width", "0"))
        obj.height = Int(node.GetAttribute("height", "0"))
        
        ' Get object properties
        Local props:XMLNode = node.GetChild("properties")
        If props &lt;&gt; Null Then
            obj.properties.Extend(props)
        End
        
        Return obj
    End
    
  Public '// PUBLIC //
  
  
End

Class TiledTileset
    Field name:String
    Field image:Image
    Field width:Int, height:Int
    Field widthInTiles:Int, heightInTiles:Int
    Field tileWidth:Int, tileHeight:Int
    Field firstGID:Int = 1
    Field properties:= New TiledPropertySet
    Field tileProperties:= New IntMap&lt;TiledPropertySet&gt;
    
End

Class TiledLayer
    Field name:String
    Field width:Int, height:Int
    Field properties:= New TiledPropertySet
    Field tiles:= New IntMap&lt;Int&gt;
    
    Method SetTileID:Void(x:Int, y:Int, id:Int)
        If width = 0 Then Return
        tiles.Set(y * width + x, id)
    End
    
    Method GetTileID:Int(x:Int, y:Int)
        If width = 0 Then Return - 1
        tiles.Get(y * width + x)
    End
    
End

Class TiledObjectGroup
    Field name:String
    Field width:Int, height:Int
    Field properties:= New TiledPropertySet
    Field objects:= New List&lt;TiledObject&gt;
    
End

Class TiledObject
    Field name:String, type:String
    Field x:Float, y:Float, width:Int, height:Int
    Field properties:= New TiledPropertySet
    
End

Class TiledPropertySet

	Method Get:String(name:String)
		Return keys.Get(name)
    End
    
    Method Get:Int(name:String)
        Return Int(keys.Get(name))
    End
    
    Method Get:Float(name:String)
        Return Float(keys.Get(name))
    End
    
    Method Get:Bool(name:String)
        If keys.Get(name).ToLower() = "true" or keys.Get(name) = "1"
            Return True
        Else If keys.Get(name).ToLower() = "false" or keys.Get(name) = "0"
            Return False
        End
    End

	Method Contains:Bool(name:String)
	    Return keys.Contains(name)
	End

	Method Extend:Void(node:XMLNode)
        If node.name &lt;&gt; "properties" Return
        
		For Local child:XMLNode = EachIn node.children
			keys.Set(child.GetAttribute("name"), child.GetAttribute("value"))
		Next
	End
    
    Private
        Field keys:= New StringMap&lt;String&gt;
End

Function PrintXMLNode:Void(node:XMLNode, depth:Int = 0)
    If node = Null Then Return
    If node.name = "tile" Then Return

    Print RSet(node.name + " {", depth)
    For Local s:String = EachIn node.attributes.Keys()
        Print RSet(s + ": " + node.GetAttribute(s), depth + 1)
    Next
    
    If node.HasChildren() Then
        For Local nod:XMLNode = EachIn node.children
            PrintXMLNode(nod, depth + 1)
        Next
    End
    
    Print RSet("}", depth)
End

Function RSet:String(in:String, depth:Int)
    Local spaces:String = ""
    
    For Local i:Int = 0 To depth - 1
        spaces += "  "
    Next
    
    Return spaces + in
End</textarea> <br><br></td></tr></table><br>
<a name="2087995"></a>

<a name="2087996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> First, this is an excellent module.<br><br>How can I add a newline character in my xml, so that in monkey there is ~n character in the string.<br>I have already tried ~n, \n and used a newline in my file (by pressing enter ^^).<br><br>PS: Basically I have a description which is multiple lines long. <br><br></td></tr></table><br>
<a name="2087997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just use * for newlines, and substitute it after loading. <br><br></td></tr></table><br>
<a name="2088003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Difference, I will go with that workaround for now.<br>I am still interested if this i built in, as I would expect. <br><br></td></tr></table><br>
<a name="2089584"></a>

<a name="2089585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> As it is XML it doesn't have built in newline escaping. That is upto the client/app to implement. But, you can just hit "enter" in your XML file to start a new line and that *should* appear in your resulting value as a newline.<br><br>Otherwise you would need to write something that parses the \n from your text values. <br><br></td></tr></table><br>
<a name="2089591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Skn3 :-) Did you get a chance to look at the doctype bug ? <br><br></td></tr></table><br>
<a name="2089631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hullo,<br><br>I thought id ressolve some of teh outstanding issues/bugs.<br><br><div class="quote"> 'version 24<br>' - fixed doctype bug (thanks difference, sorry the delay ;)<br>' - removed left in print satement (thanks difference, sorry the delay ;)<br>' - added support for text/whitespace characters (the value of a node) to be split into child nodes. This should be transparently working and you can still use node.value<br>' - added node.text bool to indicate if the node is a text node<br>' - added text boolean flag to many of the methods. This allows text nodes to be scanned/returned. The text boolean defaults to false, which will ignore text nodes. For example GetChild(true) would return the first child node, GetChild(false) would find the first NON-text node.<br>' - added AddText() method this will either add a child node or append to teh nodes value (depending on the parse mode used)<br>' - added example7.monkey demonstrating text nodes <br></div><br><br>This is a fairly "big" update and includes functionality Goodlookinguy was requesting a while back.<br><br>The following xml file:<br><pre class=code>&lt;root&gt;
	text in root
	&lt;div&gt;Hello 
		&lt;i&gt;
			W
			&lt;b&gt;orld&lt;/b&gt;
			!
		&lt;/i&gt;
	&lt;/div&gt;
	!!! :D
&lt;/root&gt;</pre><br><br>Produces the following output:<br><pre class=code>without text nodes:
 (node) root (value=text in root!!! :D)
- (node) div (value=Hello)
-- (node) i (value=W!)
--- (node) b (value=orld)


with text nodes:
 (node) root (value=text in root!!! :D)
- (text) text in root
- (node) div (value=Hello)
-- (text) Hello
-- (node) i (value=W!)
--- (text) W
--- (node) b (value=orld)
---- (text) orld
--- (text) !
- (text) !!! :D</pre> <br><br></td></tr></table><br>
<a name="2089633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another quick update:<br><div class="quote"> 'version 25<br>' - added so newlines in XML will be included in xml text/values<br>' - added so XML_STRIP_NEWLINE can now be used in ParseXML to strip any newlines within text/value <br></div> <br><br></td></tr></table><br>
<a name="2090349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kaltern</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm trying to parse a fontMetrics XML, but I just can't seem to figure out how to get the values for each character.<br><br>The XML basically looks like this: <br><br><pre class=code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;fontMetrics file="SmallRedDigi.png"&gt;
  &lt;character key="32"&gt;
    &lt;x&gt;8&lt;/x&gt;
    &lt;y&gt;8&lt;/y&gt;
    &lt;width&gt;36&lt;/width&gt;
    &lt;height&gt;60&lt;/height&gt;
  &lt;/character&gt;
  &lt;character key="33"&gt;
    &lt;x&gt;52&lt;/x&gt;
    &lt;y&gt;8&lt;/y&gt;
    &lt;width&gt;30&lt;/width&gt;
    &lt;height&gt;60&lt;/height&gt;
  &lt;/character&gt;
</pre><br><br>I can't seem to get more than the 'key' value returned tho - how can I get each character returned please? <br><br></td></tr></table><br>
<a name="2090364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> Post your code here that you have now and I can show you what to do from there. <br><br></td></tr></table><br>
<a name="2090787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 'version 26<br>' - fixed typo in missing variable <br></div> <br><br></td></tr></table><br>
<a name="2097539"></a>

<a name="2097540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 'version 27<br>' - small mem ref error when removing path list node<br>'version 28<br>' - small tweak so that if a node has no children but a value e.g. &lt;value&gt;SomeText&lt;/value&gt; it will be formatted onto a single line. <br></div> <br><br></td></tr></table><br>
<a name="2097542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 'version 29<br>' - xml nodes now keep their original casing, this has changed the behaviour of node.name, it will return the unmodified name <br></div> <br><br></td></tr></table><br>
<a name="2097543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> Flurry of XML updates, I am utilising xml doc creation properly for the first time so a few issues are popping up.<br><br><div class="quote"> 'version 31<br>' - casing now remains in provided format for node attributes<br>'version 30<br>' - fixed long standing (but apparently no one caught??) errors with setting/getting value of xml node <br></div> <br><br></td></tr></table><br>
<a name="2097544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 'version 32<br>' - improved performance by storing list node pointers when adding/removing xml nodes<br>' - made it so node.value and node.value = works for text type nodes. Will rebuild parent text value if needed<br>' - fixed ClearText as it was not properly updating the node pointers so text remained <br></div> <br><br></td></tr></table><br>
<a name="2097551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for keeping this essential module alive. <br><br></td></tr></table><br>
<a name="2097574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem, glad people get some usage out of it! Just doing my bit to try and make Monkey more attractive to newcomers!<br><br><div class="quote"> 'version 33<br>' - recent changes had broken self contained tags on export <br></div> <br><br></td></tr></table><br>
<a name="2097584"></a>

<a name="2097585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> moooooaarrrr<br><div class="quote"> 'version 34<br>' - reworked internal node code so node.Free() will fully remove self from parent<br>' - added Remove() so a node can be removed but not freed! <br></div> <br><br></td></tr></table><br>
<a name="2101736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> small update<br><br><div class="quote"> 'version 35<br>' - added .AddChild(node) method to allow copying a node object into a parent. <br></div> <br><br></td></tr></table><br>
<a name="2101738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 'version 36<br>' - AddChild(node) now has second param (defaults to true) to handle recursing into child nodes <br></div> <br><br></td></tr></table><br>
<a name="2107402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 'version 37<br>' - added node.MergeAttributes(node) to let us merge attributes from anotehr node<br>' - added node.GetAttributes() to fetch all attributes in a stringmap<br> <br></div> <br><br></td></tr></table><br>
<a name="2107401"></a>

<a name="2107743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bob</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#140">[#140]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great module! Does it have the ability to actually write the data to an XML file? I'm able to read from my XML file using Local doc:= ParseXML(LoadString("data.xml")). I can then change the data I want and if I call print doc.Export(XML_STRIP_CLOSING_TAGS) (Like in example2.monkey) I can see the the values have been updated. I then use the same Export command (minus "print" of course), but when I open the XML file again, the values are what they were originally. Does Export() not write back to the file or am I using it incorrectly? <br><br></td></tr></table><br>
<a name="2107755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#141">[#141]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should use monkey's file routines to save it out. Export only provides a string as return. <br><br></td></tr></table><br>
<a name="2108573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#142">[#142]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 'version 38<br>' - fixed bug in parsing attributes without quotes, preceeding &gt; caused xml error <br></div> <br><br></td></tr></table><br>
<a name="2108576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#143">[#143]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a note that the latest version of the Diddy Tile engine supports Skn3's XML module as well as the Diddy one. <br><br></td></tr></table><br>
<a name="2108653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#144">[#144]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool, thanks for the support samah :D <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
