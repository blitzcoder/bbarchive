<!DOCTYPE html><html lang="en" ><head ><title >SQLite</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >SQLite</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >SQLite</a><br><br>
<a name="2107506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I decided to make an incredibly simple wrapper on SQLite.<br>At the moment it only supports Windows C++ targets, and I've only tested it with cpptool using MinGW.<br><br>Here's what I want to know:<br>1) Which targets you would like to see it on? Suggest some and I'll give you an estimate on how much work is required, if it's possible or feasible to do.<br>2) What features would you like to see wrapped?  At the moment it lets you open a database, execute statements, and loop through result sets.<br><br>Enjoy.<br><br><a href="https://github.com/swoolcock/monkeysqlite" target="_blank">https://github.com/swoolcock/monkeysqlite</a> <br><br></td></tr></table><br>
<a name="2107550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome! <br><br></td></tr></table><br>
<a name="2107652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome! - I'd love to see this on iOS!<br><br>I'm not sure what you mean by 'features', but would being able to order the results count? <br><br></td></tr></table><br>
<a name="2107653"></a>

<a name="2107654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @rIKmAN: I'm not sure what you mean by 'features', but would being able to order the results count? <br></div><br><pre class=code>SELECT Foo FROM Test ORDER BY Foo</pre><br><br>Note that the design is currently very volatile.  I essentially wrapped the official structs and functions and made them a bit cleaner to use.  Other targets may have a slightly different implementation, and I'll have to hack them to work the current way.<br>I may end up designing it from a usability perspective, then implement each target whichever way it needs to.  I was considering having a common "sql" interface so that there's the possibility of plugging in other drivers later, but I don't see any reason why you would need to support Oracle or MSSQL... maybe someone can enlighten me on why a game would need something that complicated. <br><br></td></tr></table><br>
<a name="2108625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah that's exactly the syntax I meant Samah, and I know it wasn't really a feature but I wasn't sure what you meant by that.<br>What other features were you thinking of?<br><br>Oracle / MSSQL would be overkill for games imo, SQLite is perfect - quick, light and simple.<br><br>If you need any to help test when you get round to working on it for iOS let me know, I'd be happy to help :) <br><br></td></tr></table><br>
<a name="2108632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bitJericho</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is totally killer. Can't wait to see it hit other platforms if it gets to that point. In another language I wrote the beginnings of a GUI library that made extensive use of in-memory sqlite to hold the data rather than lists and classes. It would be cool to continue that work in monkey. <br><br></td></tr></table><br>
<a name="2108637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is cool. Do you ever stop and not code? Your worse than Brucey you are Mr Samah. :)<br><br>If Android is supported then I'm good to go. <br><br>Thank you for this. <br><br></td></tr></table><br>
<a name="2111896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for being inactive with this, I've got a million projects on my plate and a new job coming up soon (Objective-C and Swift).  iOS and Android will probably be my next target.<br>Question: Would you guys prefer that this just be a SQLite wrapper with 99% mapped functions, or do you think it would be good to make it less DB specific?  I can't see the point for having drivers for other databases since this is client-side and not server-side.  The catch with the current implementation is that the developer needs to actually know all the raw calls to SQLite.<br>I might see how hard it is to actually include the source directly into the generated file, like Mark's GLFW configuration.<br><br>Continued from: <a href="http://www.monkey-x.com/Community/posts.php?topic=10165&amp;post=111879" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=10165&amp;post=111879</a><br><div class="quote"> @Raz: ...does that include GLFW? <br></div><br>Yes.<br><div class="quote"> @Raz: I'm currently getting... <br></div><br>Looks like you haven't added sqlite to the libraries, so the linker can't find it.  Did you do steps 2 and 5 in the configuration?<br><a href="https://github.com/swoolcock/monkeysqlite/blob/master/src/sqlite/sqlite.monkey" target="_blank">https://github.com/swoolcock/monkeysqlite/blob/master/src/sqlite/sqlite.monkey</a><br><pre class=code>2) Copy "libsqlite3.a" to MinGW/lib
5) Add to CONFIG.MONKEY in the build directory: #CC_LIBS="-lsqlite3"</pre> <br><br></td></tr></table><br>
<a name="2111895"></a>

<a name="2111894"></a>

<a name="2111893"></a>

<a name="2111891"></a>

<a name="2111907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Samah, yup I believe I've completed all of those steps.<br><br>With regards to copying the dll, I put this in the same directory as CONFIG.MONKEY, is that correct?<br><br>Ta!<br>-Chris <br><br></td></tr></table><br>
<a name="2111930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right, I've managed to static link sqlite3 directly into MonkeyGame.exe.  It just requires some hacking to the GLFW3 target.  (static linking means you don't need the DLL any more)<br>No need to mess around with your MinGW installation either. :D<br><br>You'll want the first zip file, "sqlite-amalgamation-3090000.zip"<br><a href="http://sqlite.org/download.html" target="_blank">http://sqlite.org/download.html</a><br><br>1) Create a new directory in MonkeyXPro/targets/glfw3/template called "sqlite3"<br>2) Copy "sqlite3.c" and "sqlite3.h" into that directory<br>3) In the gcc_winnt directory, open Makefile in a decent text editor (not notepad)<br>4) In the CPPFLAGS section, change the last line to (note the ending backslash):<br><pre class=code>-I../lpng1610 \
-I../sqlite3</pre><br>5) Before the line "vpath %.cpp ..", add the following:<br><pre class=code>vpath %.c ../sqlite3</pre><br>6) In the OBJS0 section, before context.o, add (note the ending backslash):<br><pre class=code>sqlite3.o \</pre><br><br>It would be nice if there was a way to set all this stuff in the Monkey source, but we're limited as to what we can configure without modifying the template.<br><br>If you want to cheat:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
CC=gcc
CFLAGS=

CXX=g++
CXXFLAGS=

CPPFLAGS=$(CCOPTS) \
-Wno-free-nonheap-object \
-I../glfw3/include \
-I../glfw3/src \
-I../openal/include \
-I../stb \
-I../zlib-1.2.8 \
-I../lpng1610 \
-I../sqlite3

LD=g++
LDFLAGS=-Wl,--subsystem,windows -L../openal/libs/Win32 -L../openal/libs/Win64
LDLIBS=-lcomdlg32 -lgdi32 -lopengl32 -lOpenAL32 -lws2_32

vpath %.c ../glfw3/src
vpath %.c ../stb
vpath %.c ../sqlite3
vpath %.cpp ..

OBJS0=\
sqlite3.o \
context.o \
init.o \
input.o \
monitor.o \
wgl_context.o \
win32_init.o \
win32_monitor.o \
win32_time.o \
win32_tls.o \
win32_window.o \
window.o \
winmm_joystick.o \
stb_vorbis.o \
stb_image.o \
main.o

TMP=build/$(dir $(OUT))

OBJS=$(patsubst %.o,$(TMP)%.o,$(OBJS0))

all : $(OUT)

$(OUT) : $(OBJS)
	$(LD) $(LDFLAGS) -o $@ $(OBJS) $(LDLIBS)

$(TMP)%.o : %.c
	$(CC) $(CFLAGS) $(CPPFLAGS) -c -o $@ $&lt;

$(TMP)%.o : %.cpp
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c -o $@ $&lt;</textarea> <br><br></td></tr></table><br>
<a name="2111929"></a>

<a name="2111928"></a>

<a name="2111959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woop, just managed to give it a proper try and it works a treat :D <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
