<!DOCTYPE html><html lang="en" ><head ><title >miniB3D</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >miniB3D</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >miniB3D</a><br><br>
<a name="2027893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> minib3d+monkey<br><a href="https://github.com/adamredwoods/minib3d-monkey" target="_blank">https://github.com/adamredwoods/minib3d-monkey</a><br><br>big note:<br>- turn on config.h depth_buffer_bits = 32<br>- tested on glfw, android, macos, ios<br><br>Works!<br>- normals work<br>- textures, mipmaps work<br>- android, works<br>- vbos and non-vbo fallback works<br>- sprites<br>- batch sprites<br>- context handling for mobile devices<br>- pick (optimized)<br>- collisions<br>- binary load for b3d files (base64)<br>- animation, bone &amp; vertex<br>- Load OBJ<br>- animated textures<br><br>to do:<br>- fix bugs<br>- MDD, 3DS<br>- thardware<br>- loading progress bar (?)<br><br>post-release:<br>- opengl2.0 for webGL target<br>- TShader, TShaderBrush<br>- LOD<br>- terrain<br>- object occlusion<br><br>Most documentation can be found here:<br><a href="http://blitzmax.com/b3ddocs/command_list_3d_cat.php" target="_blank">http://blitzmax.com/b3ddocs/command_list_3d_cat.php</a><br><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/minib3d_example.jpg"> <br><br></td></tr></table><br>
<a name="2026342"></a>

<a name="2026351"></a>

<a name="2026178"></a>

<a name="2026097"></a>

<a name="2026098"></a>

<a name="2026023"></a>

<a name="2026024"></a>

<a name="2026005"></a>

<a name="2025893"></a>

<a name="2025179"></a>

<a name="2024578"></a>

<a name="2024576"></a>

<a name="2024577"></a>

<a name="2024574"></a>

<a name="2024227"></a>

<a name="2024175"></a>

<a name="2022422"></a>

<a name="2021701"></a>

<a name="2021470"></a>

<a name="2021471"></a>

<a name="2021477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wohoo! Great! <br><br></td></tr></table><br>
<a name="2021480"></a>

<a name="2021481"></a>

<a name="2021482"></a>

<a name="2021483"></a>

<a name="2021484"></a>

<a name="2021485"></a>

<a name="2021486"></a>

<a name="2021487"></a>

<a name="2021488"></a>

<a name="2021489"></a>

<a name="2021490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great !<br><br><div class="quote"> - binary load for b3d files (will require a hack) <br></div><br><br>Maybe  the b3d xml translation I wrote many moons ago could be of use: <br><br><a href="http://blitzmax.com/codearcs/codearcs.php?code=665" target="_blank">http://blitzmax.com/codearcs/codearcs.php?code=665</a><br><br>It  could be ported or rewritten to BlitzMax (or GLFW?)  to create a standalone converter. <br>iMonkeyMiniB3d could read the b3d xml it produces.<br><br>There is a description of the format here: <a href="http://www.blitzbasic.com/Community/posts.php?topic=20674#215167" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=20674#215167</a> <br><br></td></tr></table><br>
<a name="2021491"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeGit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent!!!!! <br><br></td></tr></table><br>
<a name="2021492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice, saves me a job! <br><br></td></tr></table><br>
<a name="2021494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's awesome! Any sources available? <br><br></td></tr></table><br>
<a name="2021523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whoah! How did I miss this thread?!?! <br><br></td></tr></table><br>
<a name="2021581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Pearmain</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cant wait to use this,  Currently using iMiniB3D (iOS/C++) but would love to use MiniB3D in Monkey <br><br></td></tr></table><br>
<a name="2021702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> firepaint from the minib3d demos! almost a straight port.<br>sprites work:<br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/minib3d_example_firepaint.jpg"><br><br>...but it's slow on android:<br>- i'm manually creating mipmaps, may have to send it to hardware.<br>- particles are slow. I even tried an array version versus New Object creation, no speed improvement. :\<br>- need a routine to reload textures when device is paused/resumed (from a call or something).<br><br><br>I'll do Pick, Collision and then upload the source. <br><br></td></tr></table><br>
<a name="2021699"></a>

<a name="2021700"></a>

<a name="2021745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice. <br><br></td></tr></table><br>
<a name="2021749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >charlie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sprites/particles were pretty slow in MiniB3D anyway. I think iminib3d had a batched version which was quicker.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="2021845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did some texture state optimizing and it now runs faster on Android.<br>On to TText-- I don't have a way to DrawText(), couldn't get it to switch back to Mojo for some reason. This will test my cameraProject and unProject since I had to rewrite these anyways. <br><br></td></tr></table><br>
<a name="2021846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matty</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you going to add "md2" animation - I'd imagine it would be worth it for mobile platforms, though I'm speaking from no experience with 3d on mobile platforms... <br><br></td></tr></table><br>
<a name="2021851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll probably leave other extensions to the community, as it should be possible to port these over from blitzmax. That said, I'll make sure the obj and b3d loaders work. <br><br></td></tr></table><br>
<a name="2021852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Pearmain</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any chance of a demo?  How is it progressing, will happily assist with testing <br><br></td></tr></table><br>
<a name="2022319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, just spent a lot of time on making TBatchSprite class, and no difference of speed on Android (200 sprite particles at 6-7 fps)... blah... this can be improved with opengl 2.0.<br><br>It did improve particle speed on the PC side though. My guess is all the float multiplies slow things down since static meshes are still relatively fast. <br><br></td></tr></table><br>
<a name="2022324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >charlie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you intending to do this with GLES 2? That would be much more interesting...<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="2022339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, but the community may need to help out. I want to get the GL20 framing in for minib3d+monkey and then pass it off, as it may be too time consuming for just me at that point. <br><br></td></tr></table><br>
<a name="2022346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Keep up the good work , sounding real cool. <br><br></td></tr></table><br>
<a name="2022427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note on minib3d:<br><br>Binary files don't load natively in Javascript.<br>And I think it may be too much work for me to port Difference's b3d-&gt;xml converter for blitzmax, and then back again as a loader in monkey.<br><br>My other thought is B3D-&gt;Base64 ascii files, then back to binary.<br>The zombie.b3d file is about 59k and in base64 is 80k. There are online Base64 encoders.<br><br><br>....thoughts? <br><br></td></tr></table><br>
<a name="2022428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JIM</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Definitely base64. xml is slow to parse and it's large. The only advantage is human readability, which is not really important unless people actually model using Notepad.<br><br>Right now I'm experimenting with my own format, because the compact ascii formats are either horrible or way too complex for my needs. The other ascii format (obj) is almost useless (no hierarchy, no animations, no proper materials/shaders - .mtls suck). Will see how this goes. I'm also thinking of making a binary version of my format then turn it to base64. <br><br></td></tr></table><br>
<a name="2023817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cheese</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very cool.<br><br>I'm looking forward to testing this port extensively with Android! <br><br></td></tr></table><br>
<a name="2024173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> miniUpdate:<br><br>TPick works, including triangle on a surface pick. Pretty nice. This took forever.<br><br>TText works, so now I have 3d text.<br>TBatchSprites works, increasing performance of sprites significantly (with matrix optimizations).<br><br>What next?<br>- TCollisions, which I will NOT optimize since the code is a mess. I will only get it to a working condition.<br>- TAnimation, reading B3D files from base64. Should be fun.<br>- then I'll release it on github <br><br></td></tr></table><br>
<a name="2024178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good work. I don't envy the task of converting all the collision, er...stuff to Monkey. It was bad enough getting it working in BlitzMax! <br><br></td></tr></table><br>
<a name="2024180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matty</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is the lowest version of Monkey this will work on?<br>Lowest version of Android it will work on too? <br><br></td></tr></table><br>
<a name="2024181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not using relfections so around monkey52e-53.<br>Android 2.2, using only opengl es 1.1 at the moment. i may plug opengl2.0 later but will always be backward compatible. <br><br></td></tr></table><br>
<a name="2024225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Collisions and collision response works.<br>It's very slow on android, so i will look into optimizations after the initial release. <br><br></td></tr></table><br>
<a name="2024293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds great!<br><br>I still like the xml idea, so maybe I can work on that when your source goes online. <br><br></td></tr></table><br>
<a name="2024573"></a>

<a name="2024575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> A familiar face...<br><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/minib3d_example_zombie1.jpg"><br><br>This means my Base64 loader works for B3D binary files. Animation works, too. Verrrry nice.<br>(in theory you could encapsulate all your files into ONE Base64 file and parse it. Good for HTML5-- when we get to that point)<br><br>XML would be good too, but I worry about speed. My experiences with XML is that it is slow to parse a hundred-thousand vertices and this would be slow on Android/Java.<br><br><br>So i'm almost done. I found a few deep errors, and will need to fix those up.<br>I'm thinking about an MD2 loader (or should I go .X?) to use vertex animation rather than boned animation. This would help on mobile targets. <br><br></td></tr></table><br>
<a name="2024572"></a>

<a name="2024571"></a>

<a name="2024570"></a>

<a name="2024569"></a>

<a name="2024579"></a>

<a name="2024580"></a>

<a name="2024581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Pearmain</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cannot wait to start using this Adam, thanks for all your hard work<br><br>Is it on GITHUB yet, guess not <br><br></td></tr></table><br>
<a name="2024583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work, the HTML5 version in the future will be awesome... <br><br></td></tr></table><br>
<a name="2024589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow, excellent, great job. I totally stopped on my own engine because I knew this would knock it out the water. Looking forward to messing about with it. <br><br>What 2D support is there? Have you managed to get Mojo working?<br><br>What has more support for users to create models with .x or md2? I have never attempted to make an md2 mesh so I would vote for .x but that could be an ill informed choice. <br><br></td></tr></table><br>
<a name="2024588"></a>

<a name="2024613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What 2D support is there? Have you managed to get Mojo working? <br></div><br>no, but I'm sure Mark will point some things out once miniB3D is released.<br><br>in the meantime, I set up a switch (EntityFX (n=64) ) that will enable sprites to render without depth testing, which is just as effective. Plus, CameraUnProject works fine (screen -&gt; world), and I've set up a CameraLayer system to render only certain object with certain cameras... this allows for many possibilities, and I put this in to prepare for a shader or fx system to be easily added. <br><br></td></tr></table><br>
<a name="2024619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah nice! That all sounds very useful! Great job. <br><br></td></tr></table><br>
<a name="2025022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent stuff :D <br><br></td></tr></table><br>
<a name="2027242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> 10 zombies at 3fps, Android + vertex animation..... NOT GOOD ENOUGH!<br><br><strike>One more trick i'll try,</strike> but otherwise will have to wait until gl20+monkey+minib3d to speed this up.<br><br>on GLFW, 100 zombies + vertex animation at about <strike>9-10fps:</strike> <strike>18fps:</strike> v0.12 = 30fps easy<br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/minib3d_example_zombie100.jpg"> <br><br></td></tr></table><br>
<a name="2025186"></a>

<a name="2025180"></a>

<a name="2025112"></a>

<a name="2025107"></a>

<a name="2025108"></a>

<a name="2025187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> 10 animated zombies at 30fps on Android! ( I actually manged 20+ at 30fps)<br><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/P1040945b.jpg"><br><br>Get your beta-testing hats on, I'm gonna release this beast hopefully within the week. EXCITING!!!! <br><br></td></tr></table><br>
<a name="2025184"></a>

<a name="2025185"></a>

<a name="2025177"></a>

<a name="2025225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looking forward to trying it out! <br><br></td></tr></table><br>
<a name="2025226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah same, can't wait! <br><br></td></tr></table><br>
<a name="2025227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chrisc2977</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> This will be completly awsum :) <br><br></td></tr></table><br>
<a name="2025243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks great. Really looking forward to 3d in html5 when that gets added. <br><br></td></tr></table><br>
<a name="2025249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woo! <br><br></td></tr></table><br>
<a name="2025250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you think it would be easy to do a software renderer?<br><br>There are a few engines available:<br><a href="http://www.kevs3d.co.uk/dev/canvask3d/k3d_test.html" target="_blank">http://www.kevs3d.co.uk/dev/canvask3d/k3d_test.html</a><br><a href="http://code.google.com/p/mea3d" target="_blank">http://code.google.com/p/mea3d</a> <br><br></td></tr></table><br>
<a name="2025270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Do you think it would be easy to do a software renderer? <br></div><br><br>One of my goals that I wanted (but haven't sufficiently had time) is to pull the render hardware layer into it's own class (TRender) without performance penalties and keep backward compatibility with miniB3D. I got to a point, then realized textures were well entwined. This will have to be revisited, especially for Flash11 and XNA.<br><br>That said, it wouldn't be hard to replace TTexture with a custom TTexture build using ?target or #config flags.<br><br>With the TRender class, you should be able to TSoftwareRender extends TRender relatively easily (knock on wood) since no new hardware commands would be needed. This is my preparation for OpenGL20/WebGL. There will be holes, but we'll fill them when we get there. <br><br></td></tr></table><br>
<a name="2025266"></a>

<a name="2025267"></a>

<a name="2025268"></a>

<a name="2025269"></a>

<a name="2025417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shinkiro1</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't wait for this. <br><br></td></tr></table><br>
<a name="2025430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Pearmain</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> BETA TESTER Standing By ;-)<br><br>Can't wait too <br><br></td></tr></table><br>
<a name="2025879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Pearmain</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bump <br><br></td></tr></table><br>
<a name="2025885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cheese</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ack! That bump got me excited; I've been waiting so patiently for this and I thought just for a moment there that the first release must have been posted. &gt;.&lt; <br><br></td></tr></table><br>
<a name="2025963"></a>

<a name="2025964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> two more bugs need to be squished! hopefully tomorrow, sorry for the delay.<br><br>UPDATE (march 31):<br>found the bugs! wow, nasty vbo problem i made. but solved and working great.<br>will upload soon.<br><br>victory song:<br><a href="http://www.youtube.com/watch?v=AZKpByV5764" target="_blank">http://www.youtube.com/watch?v=AZKpByV5764</a> <br><br></td></tr></table><br>
<a name="2025892"></a>

<a name="2025970"></a>

<a name="2025971"></a>

<a name="2025972"></a>

<a name="2025973"></a>

<a name="2025975"></a>

<a name="2025976"></a>

<a name="2025977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> minib3d+monkey<br><a href="https://github.com/adamredwoods/minib3d-monkey" target="_blank">https://github.com/adamredwoods/minib3d-monkey</a><br><br>big note:<br>- turn on config.h depth_buffer_bits = 32<br>- test on glfw, android, should work on macos, ios ( i can test it tomorrow)<br><br>3 examples included:<br>- animation test: 4 zombies, converted from bone animation to vertex animation running at different speeds while aligned to a red cube. you can turn it back to bone animation if you want. zombies in a array so you can go to 999 (slow). on mobile, use two fingers to zoom in/out. try flicking cube.<br>- firepaint 3d: sparks using TBatchSprite, 3d text floating. should reload surfaces on mobile or tablet pause.<br>- pick collision test: paints a sphere red by clicking on its triangles<br><br><br>enjoy. i'll list documentation and to dos later. there's a lot in there (like TText, CameraLayers, TPixmap). TRender is now separate so in theory you can create your own software renderer.<br>victory song:<br><a href="http://www.youtube.com/watch?v=AZKpByV5764" target="_blank">http://www.youtube.com/watch?v=AZKpByV5764</a> <br><br></td></tr></table><br>
<a name="2025989"></a>

<a name="2025990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank you and good job! I'll test this today :)<br><br>firepaint needs the first line in the OnCreate method to be changed to this to run:<br><pre class=code>SetRender(New OpenglES11)</pre> <br><br></td></tr></table><br>
<a name="2025995"></a>

<a name="2025996"></a>

<a name="2025997"></a>

<a name="2025998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> YOU GOT THE TOUCH<br><br>BTW how do you turn on the config.h buffer thingy<br><br>In GLFW the examples  crash on:<br>glGenBuffers(6,surf.vbo_id) <br>in TRender.monkey<br><br>does that mean my hardware isnt good enough? <br><br></td></tr></table><br>
<a name="2026003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> firepaint needs the first line in the OnCreate method to be changed to this to run <br></div>Thanks, fixed.<br><br><div class="quote"> <br>does that mean my hardware isnt good enough?  <br></div><br>under the file minib3d.monkey, turn off VBOs: "USE_VBO=false"<br>i haven't finished the THardwareinfo which would be needed to check opengl abilities. <br><br></td></tr></table><br>
<a name="2026004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is good stuff dude! :) <br><br></td></tr></table><br>
<a name="2026009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brilliant! Just tried all the examples on GLFW (worked fine) and my Android phone (Orange San Francisco aka. ZTE Blade).<br><br>Quick phone tests...<br><br>Firepaint gets crippled by new object allocation here, but it seems to animate the sprites just fine when I stop firing, and the 'world' turns smoothly if I disable firing, so I think it should be possible to get it working better with pre-allocated objects.<br><br>The pick demo is very slow indeed on my phone, but I haven't looked into it much so far.<br><br>The animation test was a surprise as that keeps near-enough a constant 30 FPS! However, I made it crash with an array index error while trying to pinch-zoom, then it crashed right away when I tried to re-run (same problem), then it crashed after displaying a frame or so... will have to investigate.<br><br>Still, it really is great to have a new Blitz3D for Monkey, and I look forward to seeing what I can get away with on my phone.<br><br>Many thanks for all your hard work on this! <br><br></td></tr></table><br>
<a name="2026015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> so I think it should be possible to get it working better with pre-allocated objects. <br></div> also try to use just 'tsprite' and 'tmesh' instead of tbatchsprite. i don't know if that would make a difference.<br><div class="quote"> The pick demo is very slow indeed on my phone <br></div>collisions and pick are VERY SLOW. this is a future 'to do' to optimize it. (tech info: i believe this is because Java's JIT does not inline).<br><br>Also-- be aware that android 2.1 will be slow since it does not have android 2.2 JIT compiler, which improves overall speed.<br><br><div class="quote"> I made it crash with an array index error while trying to pinch-zoom, then it crashed right away when I tried to re-run (same problem) <br></div><br>i will look into this too. bugs bugs bugs bugs <br><br></td></tr></table><br>
<a name="2026018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Been playing since... excuse my 'personal preference' tweaks, but I've butchered your demos to create a bare-bones template to work from, plus a really simple demo...<br><br>Template:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import minib3d

Function Main ()
	New Game
End

Class Game Extends App

	Global Resumed:Bool = False
	
	Method OnCreate ()
		SetRender (New OpenglES11)
		SetUpdateRate 30
	End

	Method OnResume ()
		Resumed = True
	End
	
	Method OnUpdate ()

		If Resumed
			Graphics3DInit ()
			ReloadAllSurfaces ()
			ReloadAllTextures ()
			Resumed = False
		Endif

		' UpdateWorld ' Enable if collisions are used...

	End
	
	Method OnRender ()
		RenderWorld
	End
	
End
</textarea><br><br>Simple demo...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import minib3d

Function Main ()
	New Game
End

Class Game Extends App
	
	Global Resumed:Bool = False
	
	Field cam:TCamera
	Field light:TLight
	Field cube:TEntity
	
	Method OnCreate ()

		SetRender (New OpenglES11)

		cam = CreateCamera ()
		
		light = CreateLight ()
		MoveEntity light, -10, 2, -25

		cube = CreateCube ()
		EntityColor cube, 255, 0, 0
		MoveEntity cube, 0, 0, 10

		PointEntity light, cube
		
		SetUpdateRate 30

	End

	Method OnResume ()
		Resumed = True
	End
	
	Method OnUpdate ()

		If Resumed
			Graphics3DInit ()
			ReloadAllSurfaces ()
			ReloadAllTextures ()
			Resumed = False
		Endif

		If TouchDown ()
			
			' Convert touch y-position to a range of -"half-height" to +"half-height"...
			
			Local offset:Float = (DeviceHeight () - TouchY ()) - (DeviceHeight () * 0.5)

			' ... and we scale that range down...
			
			MoveEntity cam, 0, 0, offset * 0.001

		Endif
		
		TurnEntity cube, 0.5, 1.0, 2.0
		
		' UpdateWorld ' Enable if collisions are used...
		
	End
	
	Method OnRender ()
		RenderWorld		
	End
	
End
</textarea><br><br>Fun, though... feels just like the old days of Blitz3D! <br><br></td></tr></table><br>
<a name="2026019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ooh, above demo with update rate set to 60 is silky smooth on my phone... not that it's doing much, but it's very nice! <br><br></td></tr></table><br>
<a name="2026036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> all samples run nice and smooth at 30fps on my Motorola Milestone 2<br><br>*awesome* <br><br></td></tr></table><br>
<a name="2026055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cheese</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes! All of the included examples run on my Droid X without crashing, though the touch controls seem to be sporadic and unpredictable and the zombie example takes approximately 40 seconds to finish initializing.<br><br>No matter, now's my chance to experiment..<br><br>So I refactored DruggedBunny's example to try and switch between MiniB3D/Mojo's graphics using Diddy.. it's a pretty bad hack.<br><br>It seems to run perfectly fine when using GLFW as a target, but the same isn't true for Android; it crashes without a stack trace!<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Import diddy
Import minib3d

Const FADE_TIME = 50.0

Global GameHandle:Game

Function Main:Int()
	GameHandle = New Game()
	game = GameHandle
	
	Return 0
End

Class Game Extends DiddyApp
Public
	Field resuming:Bool
	
	Field titleScreen:TitleScreen
	Field gameScreen:GameScreen
	
Private	
	Method OnCreate:Int()
		Super.OnCreate()
		
		resuming = False
		
		titleScreen = New TitleScreen()
		gameScreen = New GameScreen()
		titleScreen.PreStart()
		
		Return 0
	End
	
	Method OnResume()
		resuming = True
	End
End

' Mojo scene
Class TitleScreen Extends Screen
Private
	Field startTime:Int
	
	Method Start:Void()
		game.screenFade.Start(FADE_TIME, False)
		
		game.nextScreen = GameHandle.gameScreen
		
		startTime = RealMillisecs()
	End
	
	Method Update:Void()
		If RealMillisecs() - startTime &gt;= 5000
			game.screenFade.Start(FADE_TIME, True)
		End
	End
	
	Method Render:Void()
		Cls(255.0, 255.0, 255.0)
		
		For Local i:Int = 0 To SCREEN_WIDTH2/8
			Local intensity:Float = Abs(Sin(i*16))
			SetColor(255 - 75*intensity, 255 - 105*intensity, 255 - 105*intensity)
			DrawCircle(SCREEN_WIDTH2, SCREEN_HEIGHT2, SCREEN_WIDTH2 - i*8)
		End
		
		SetColor(230.0, 230.0, 230.0)
		DrawText("Mojo + Diddy + MiniB3D", SCREEN_WIDTH2, SCREEN_HEIGHT2, 0.5, 0.5)
	End
End

' MiniB3D scene
Class GameScreen Extends Screen3D
Private
	Field light:TLight
	Field cube:TEntity
	
	Method Start:Void()
		Super.Start()
		
		gl = New OpenglES11()
		SetRender(gl)
		
		light = CreateLight(1, cam)
		MoveEntity(light, -10.0, 2.0, -25.0)
		
		cube = CreateCube()
		EntityColor(cube, 30.0, 30.0, 50.0)
		MoveEntity(cube, 0.0, 0.0, 10)
		
		PointEntity(light, cube)
		
		game.screenFade.Start(FADE_TIME, False)
	End
	
	Method Update:Void()
		Super.Update()
		
		If TouchDown()
			Local midY:Float = (SCREEN_HEIGHT - TouchY()) - SCREEN_HEIGHT2
			MoveEntity(cam, 0.0, 0.0, midY*0.001)
		End
		
		TurnEntity(cube, 0.5, 1.0, 2.0)
		
		If KeyHit(KEY_ESCAPE)
			game.nextScreen = game.exitScreen
			game.screenFade.Start(FADE_TIME, True)
		End
	End
End

Class Screen3D Extends Screen
Private
	Field gl:OpenglES11
	
Public
	Field cam:TCamera
	
Private
	Field fade:TEntity
	
	Method Start:Void()
		gl = New OpenglES11()
		SetRender(gl)
		
		cam = CreateCamera()
		
		fade = CreateCube(cam)
		EntityColor(fade, 0.0, 0.0, 0.0)
		MoveEntity(fade, 0.0, 0.0, 2.0)
	End
	
	Method Update:Void()
		If GameHandle.resuming
			GameHandle.resuming = False
			Graphics3DInit()
			ReloadAllSurfaces()
			ReloadAllTextures()
		End
		
		UpdateWorld()
		
		EntityAlpha(fade, 1.0 - game.screenFade.ratio)
	End
	
	Method Render:Void()
		RenderWorld()
	End
End</textarea><br><br>I'd love to use Diddy and MiniB3D together! <br><br></td></tr></table><br>
<a name="2026042"></a>

<a name="2026043"></a>

<a name="2026064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> some issues:<br><br>1. i can not use *.b3d, i've exported a *.x out of Blender (2.62) and convert it with DeleD to *.b3d. Then i create a Base64 file with this encoder: <a href="http://www.opinionatedgeek.com/dotnet/tools/base64encode/" target="_blank">http://www.opinionatedgeek.com/dotnet/tools/base64encode/</a><br><br>2. 2000 vertices per mesh is'nt enough, i've set it to 4000<br><br>3. *.obj exported from Blender is'nt textured correctly. No idea why, i've checked many configurations at export but nothing will. I know that it is just a 8 vertices cube, but Blender can show it correctly, also Blitz3D if i export it as *.x<br><br><br>hope this will help.... <br><br></td></tr></table><br>
<a name="2026066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Pearmain</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome work Adam.<br><br>The animation demo works fine in the iOS emulator, with the others it hangs on:<br><br>UIApplicationMain( argc,argv,nil,nil );<br><br>Giving a SIGABIT error.<br><br>I think it might be my environment, but will persevere<br><br>Excellent <br><br></td></tr></table><br>
<a name="2026071"></a>

<a name="2026072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok I turned off VBO's <br>the zombies work great except their right arm is drawn so that it overlaps the torso, like the drawing order is wrong or something<br><br>firepaint crashes on SetBlend for some reason (from TText.monkey)<br><br>Picking demo worked fine (if Im sposed to be seeing a white sphere) <br><br></td></tr></table><br>
<a name="2026073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>1. i can not use *.b3d, i've exported a *.x out of Blender (2.62) and convert it with DeleD to *.b3d.<br><br>..<br><br>3. *.obj exported from Blender is'nt textured correctly. No idea why, i've checked many configurations at export but nothing will. I know that it is just a 8 vertices cube, but Blender can show it correctly, also Blitz3D if i export it as *.x <br></div><br>if you have examples of files that are not working and can send me the file, send to awpiette AT yahoo DOT com. i want compatibility to be priority. <br><br></td></tr></table><br>
<a name="2026075"></a>

<a name="2026076"></a>

<a name="2026078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> the zombies work great except their right arm is drawn so that it overlaps the torso, like the drawing order is wrong or something <br></div><br>turn depth buffer on, in your local .build folder (glfw):<br>config.h: #define depth_buffer_bits = 32<br><br><div class="quote"> firepaint crashes on SetBlend for some reason (from TText.monkey) <br></div> ---- edit: thank you! that is a bug. should be:<br>tex.TextureBlend(2)<br><br>i will update github<br><div class="quote"> Picking demo worked fine <br></div><br>click the sphere, should turn triangles red. <br><br></td></tr></table><br>
<a name="2026081"></a>

<a name="2026082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> On a Mac you will need to change the config.txt in the GLFW build folder. The line that needs altering is:<br><pre class=code>OPENGL_DEPTH_BUFFER_ENABLED=true</pre><br>Must say it is very fun playing around with this! <br><br></td></tr></table><br>
<a name="2026088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updated on GitHub:<br>-- (TModelObj) blender texture fix from OBJ file LoadMesh(). should load texture files now <br><br></td></tr></table><br>
<a name="2026083"></a>

<a name="2026084"></a>

<a name="2026090"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep all the demos work now.<br> thanks! <br><br></td></tr></table><br>
<a name="2026099"></a>

<a name="2026100"></a>

<a name="2026101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br><br>The animation demo works fine in the iOS emulator, with the others it hangs on:<br><br>UIApplicationMain( argc,argv,nil,nil );<br><br>Giving a SIGABIT error.<br><br>I think it might be my environment, but will persevere<br> <br></div><br><br>Everything worked here on MacOS, iOS iphone simulator (latest files, monkey 56b). let me know if you still have problems. <br><br></td></tr></table><br>
<a name="2026230"></a>

<a name="2026231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br>this generally looks very well, great job :), but I have a problem: models still looks weird. I have Monkey56b but there is no config.h file to set the #define depth_buffer_bits = 32. I turned in config.txt: OPENGL_DEPTH_BUFFER_ENABLED = true, but it still does not work. <br><br></td></tr></table><br>
<a name="2026232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> OPENGL_DEPTH_BUFFER_ENABLED = true<br>worked for me, <br><br></td></tr></table><br>
<a name="2026241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> but I have a problem: models still looks weird. <br></div><br>which models? do the examples work? how do they look weird, like the zombie arms are on the wrong side (which means depth buffer disabled)? <br><br>if you're loading your own models, there is still a problem with OBJs, and B3Ds from blender-&gt;deled3d-&gt;B3D which i'm working on. (please share any models you can giving problems) <br><br></td></tr></table><br>
<a name="2026252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br>yes, exactly the zombie arms are on the wrong side. Unfortunately OPENGL_DEPTH_BUFFER_ENABLED = true does not work for me (GLFW). My graphics is a GF7300 GT, OpenGL 2.0 <br><br></td></tr></table><br>
<a name="2026268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you're working on the animation_test.monkey example, make sure to change the <b>animation_test.build/glfw/CONFIG.txt</b> file.<br><br>you can also brute-force it in the main.cpp file and compile using the xcode.project.<br><br>or you can find the monkey/targets/glfw/main.cpp file and make sure it has the !glfwWindow(w,h,0,0,0,0, CFG_DEPTH_BUFFER_DEPTH ? 32 ...etc...) in it. try brute forcing that file, too, if you have to (may slow down 2d mojo so not a good idea to hardwire it for everything). <br><br></td></tr></table><br>
<a name="2026547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work!<br><br>Animation_test gives this error on  my 4'th gen iPod Touch  running iOS 4.3.5<br><br>Both examples runs fine on iOS 5.1 simulator.<br><br>(http://) whatsdabomb.com/stuff/xc2012-04-06.png <br><br></td></tr></table><br>
<a name="2026299"></a>

<a name="2026334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cheese</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Be sure to check and report on the GitHub issues section:<br><a href="https://github.com/adamredwoods/minib3d-monkey/issues?sort=created&amp;direction=desc&amp;state=open" target="_blank">https://github.com/adamredwoods/minib3d-monkey/issues?sort=created&amp;direction=desc&amp;state=open</a><br><br>I submitted an issue yesterday:<br>"TRender.ClearWorld() and TTexture.FreeTexture() contain erroneous code." <br><br></td></tr></table><br>
<a name="2026335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> my guess is memory alignment issues.<br><a href="https://brewx.qualcomm.com/bws/content/gi/common/appseng/en/knowledgebase/docs/kb95.html" target="_blank">https://brewx.qualcomm.com/bws/content/gi/common/appseng/en/knowledgebase/docs/kb95.html</a><br><br>I wonder if I should just unpack Base64 with INTs to keep the 4byte alignment? This might be a good initial test to see if its the problem.<br>Mark or anyone have recommendations? <br><br></td></tr></table><br>
<a name="2026337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I submitted an issue yesterday:<br>"TRender.ClearWorld() and TTexture.FreeTexture() contain erroneous code."  <br></div><br>yes, I have that fixed, just trying to finish up one more bug then I'll make a git push. <br><br></td></tr></table><br>
<a name="2026341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Difference, could you try replacing this Base64 class in moneyutilities.monkey and testing on iOS (not simulator)?<br>Many thanks.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
''
'' base64 functions
''
'' -- using little-endian, ieee 32 bit single-precision float
''

Class Base64

	Global MIME$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
	Global Dime:Int[]
	
	Field data:DataBuffer
	Field pos:Int ''seek position
	Field size:Int=0
	Global realsize:Int=0
	
	Global i2f:DataBuffer
	
	Method New()
		
		i2f = DataBuffer.Create(4)
		
	End
	
	Method Free()
	
		data = Null
		pos = 0
		
	End
	
	Function Load:Base64(file$)
		
		Local bsf:Base64 = New Base64
			
		bsf.data = Decode(LoadString(file))
		bsf.pos = 0
		bsf.size = realsize-1
		
		Return bsf
		
	End
	
	''
	'' Encode() from skid
	'' -- doesn't work for databuffers *to do*
	''
	Function Encode$(bytes:Int[])
		Local n=bytes.Length	
		Local buffer$
		Local blank:String = ""
	
		For Local i=0 Until n Step 3	
			Local b0,b1,b2,b24
			Local pad$
			b0=bytes[i]
			If i+1&lt;n
				b1=bytes[i+1]
				If i+2&lt;n
					b2=bytes[i+2]
				Else
					pad="="
				Endif
			Else
				pad="=="
			Endif		
			b24=(b0 Shl 16) | (b1 Shl 8) | (b2)
			buffer.Join(String.FromChar( MIME[(b24 Shr 18)&amp;63] ) ,blank )
			buffer.Join(String.FromChar( MIME[(b24 Shr 12)&amp;63] ) ,blank  )
			buffer.Join(String.FromChar( MIME[(b24 Shr 6)&amp;63] ) ,blank  )
			buffer.Join(String.FromChar( MIME[(b24)&amp;63] ) ,blank  )
			If pad Then buffer.Join(pad, blank )	
		Next	
	
		Return buffer
	End
	
	''
	'' Decode() from skid
	''
	Function Decode:DataBuffer(mime$)
	
		If Not Dime
		
			Dime=New Int[256]
			For Local i=0 To 63
				Dime[MIME[i]]=i
			Next
			
		Endif
		
		'Local bytes:Int[]
		Local m_length=mime.Length
		Local pad, length
		Local i,p,i4
		
		realsize =0 
		
		
		If m_length=0 Then Return DataBuffer.Create(0)
		
		If mime[m_length-1]="="[0] 
			pad=1
			If mime[m_length-2]="="[0]
				pad=2
				If mime[m_length-3]="="[0]
					pad=3
				Endif
			Endif
		Endif	
		
		length=Int((m_length-pad)/4+0.5)*3 ''round up
		'bytes=New Int[length]
		Local buf:DataBuffer = DataBuffer.Create(length)
		Local bb:Int[4]
		
		While p&lt;m_length
		
			For Local j:Int=0 To 3
				
				''handle text breakups
				
				bb[j] = mime[p+j]
				While (bb[j]&lt;33)
					If p&lt; m_length Then p+=1 Else Exit
					bb[j] = mime[p+j]
				Wend
				If bb[j] &gt; 255 Then bb[j] =0 ''handle odd memory errors
				bb[j]=Dime[ bb[j] ]
	
			Next

			Local b24=(bb[0] Shl 18)|(bb[1] Shl 12)|(bb[2] Shl 6)|bb[3]		

			buf.PokeByte( i+0, (b24 Shr 16)&amp;255)
			buf.PokeByte( i+1, (b24 Shr 8)&amp;255)
			buf.PokeByte( i+2, (b24 )&amp;255)
			p+=4
			i+=3
			
			realsize +=3 'bytes
		Wend	
		'If pad
			'bytes=bytes.Resize(length-pad)
		'Endif	
		
		Return buf
	End

	Method Size:Int()
		Return size
	End
	
	Method ReadByte:Int()
		pos += 1
		Return data.PeekByte(pos-1)
	End
	
	Method ReadInt:Int()
		pos += 4
		i2f.PokeByte(0,data.PeekByte(pos-4))
		i2f.PokeByte(1,data.PeekByte(pos-3))
		i2f.PokeByte(2,data.PeekByte(pos-2))
		i2f.PokeByte(3,data.PeekByte(pos-1))
		Return i2f.PeekInt(0)
		'Return data.PeekInt(pos-4)
	End
	
	Method ReadFloat:Float()
		pos += 4
		i2f.PokeByte(0,data.PeekByte(pos-4))
		i2f.PokeByte(1,data.PeekByte(pos-3))
		i2f.PokeByte(2,data.PeekByte(pos-2))
		i2f.PokeByte(3,data.PeekByte(pos-1))
		Return i2f.PeekFloat(0)
		'Return data.PeekFloat(pos-4)
	End
	
	Method ReadTag:String()
		''readtag does not increment position
		If pos&gt;size Then Return ""
		
		i2f.PokeByte(0,data.PeekByte(pos))
		i2f.PokeByte(1,data.PeekByte(pos+1))
		i2f.PokeByte(2,data.PeekByte(pos+2))
		i2f.PokeByte(3,data.PeekByte(pos+3))
		Local d:Int = i2f.PeekInt(0)
		'Local d:Int = data.PeekInt(pos)

		Return (String.FromChar((d  ) &amp; $00ff)+String.FromChar((d Shr 8 )&amp; $00ff)+
			String.FromChar((d Shr 16 )&amp; $00ff)+String.FromChar((d Shr 24)&amp; $00ff) )

	End
	
	Method Position:Int()
		Return pos
	End
	
	Method SetPosition(p:Int)
		pos = p
	End

	
	Method Eof:Bool()
		If pos &gt;= size Then Return True Else Return False
	End
	

End

</textarea> <br><br></td></tr></table><br>
<a name="2026345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam: Success- Deleting the build directory and replacing Base64 class with the one above makes animation_test run on the iPod. :-) <br><br></td></tr></table><br>
<a name="2026350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Difference - thank you!<br><br>*************<br>Updated v0.11<br><br>- faster TPick (much faster on android now)<br>- ClearWorld() fix<br>- LoadMesh() for OBJ fixed-- works now with one vertex with multiple tex coords or multiple normals<br>- TText() has a ALIGN_CENTER flag now<br>- Base64 alignment fixed-- works on iPhone, iPad now with ARM alignment issues <br><br></td></tr></table><br>
<a name="2026352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NoOdle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice good job! :) <br><br></td></tr></table><br>
<a name="2026511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cheese</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to update; it appears as though ClearWorld() is working perfectly fine now!<br><br>Here's a little example of Minib3d managed by Diddy screens (DiddyApp3D/Screen3D):<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Import diddy
Import minib3d

Const FADE_TIME = 50.0

Const APP_SCREEN_TITLE = 0
Const APP_SCREEN_MENU = 1
Const APP_SCREEN_GAME = 2

Global gameHandle:DiddyApp3D

Function Main:Int()
	gameHandle = New Game()
	game = gameHandle
	
	Return 0
End

Class Game Extends DiddyApp3D
Private
	Method OnCreate:Int()
		Super.OnCreate()
		
		screens = [Screen3D(New TitleScreen()),
				   Screen3D(New MenuScreen()),
				   Screen3D(New GameScreen())]
		screens[0].PreStart()
		
		' Load game-wide resources
	End
End

Class DiddyApp3D Extends DiddyApp
Private
	Field gl:OpenglES11
	
	Field resuming:Bool
	Field screens:Screen3D[]
	
Public
	Method GetScreen:Screen3D(screen:Int) Property
		If screen &gt;= 0 And screen &lt; screens.Length()
			Return Self.screens[screen]
		End
		
		Return NULL
	End
	
	Method GotoScreen:Bool(screen:Int)
		Local error:Bool = False
		If screen &gt;= -1 And screen &lt; screens.Length()
			If screen = -1
				nextScreen = Screen(exitScreen)	
			Else
				nextScreen = Screen(screens[screen])
			End
			screenFade.Start(FADE_TIME, True, True, True)
			
			error = True
		End
		
		Return error
	End
	
Private
	Method OnCreate:Int()
		Super.OnCreate()
		
		gl = New OpenglES11()
		SetRender(gl)
		
		resuming = False
		
		Return 0
	End
	
	Method UpdateOverride()
		If resuming
			resuming = False
			Graphics3DInit()
			ReloadAllSurfaces()
			ReloadAllTextures()
		End
	End
	
	Method OnResume()
		resuming = True
	End
End

Class TitleScreen Extends Screen3D
Private
	Method Start:Void()
		Super.Start()
		
		CameraClsColor(camera, 255.0, 255.0, 255.0)
	End
	
	Method Update:Void()
		Super.Update()
		
		If Millisecs() - startTime &gt;= 5000
			gameHandle.GotoScreen(APP_SCREEN_GAME)
		End
	End
End

Class MenuScreen Extends Screen3D
Private
	Method Start:Void()
		Super.Start()
	End
	
	Method Update:Void()
		Super.Update()
	End
End

Class GameScreen Extends Screen3D
Private
	Field light:TLight
	Field cube:TEntity
	
	Method Start:Void()
		Super.Start()
		
		light = CreateLight(1, camera)
		MoveEntity(light, -10.0, 2.0, -25.0)
		
		cube = CreateCube()
		EntityColor(cube, 30.0, 30.0, 50.0)
		MoveEntity(cube, 0.0, 0.0, 10)
		
		PointEntity(light, cube)
	End
	
	Method Update:Void()
		Super.Update()
		
		If TouchDown()
			Local midY:Float = (SCREEN_HEIGHT - TouchY()) - SCREEN_HEIGHT2
			MoveEntity(camera, 0.0, 0.0, midY*0.001)
		End
		
		TurnEntity(cube, 0.5, 1.0, 2.0)
		
		If KeyHit(KEY_ESCAPE)
			gameHandle.GotoScreen(-1)
		End
	End
End

Class Screen3D Extends Screen
Public
	Field startTime:Int
	
	Field camera:TCamera
	
Private
	Field fadeSprite:TSprite
	
	Method Start:Void()
		ClearWorld()
		
		startTime = Millisecs()
		
		camera = CreateCamera()
		
		fadeSprite = CreateSprite(camera)
		EntityColor(fadeSprite, 0.0, 0.0, 0.0)
		MoveEntity(fadeSprite, 0.0, 0.0, 1.0)
		
		gameHandle.screenFade.Start(FADE_TIME, False, True, True)
	End
	
	Method Update:Void()
		EntityAlpha(fadeSprite, 1.0 - gameHandle.screenFade.ratio)
		UpdateWorld()
	End
	
	Method Render:Void()
		RenderWorld()
	End
End</textarea> <br><br></td></tr></table><br>
<a name="2026512"></a>

<a name="2026513"></a>

<a name="2026514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cheese</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, so perhaps my Diddy example above doesn't quite work right.. if you hold down the mouse on transition: memory access violation. No idea why; trying to figure it out..<br><br>Also, I figured that the parent parameter determined which entity a newly created object would always be rendered relative to, but the results seem contradictory to this; The 'fadeSprite' doesn't change position when the camera does. <br><br></td></tr></table><br>
<a name="2026515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cheese</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, a quick glimpse at the module reveals evidence that a child's position should update when a parent moves.. This doesn't appear to be happening with sprites.. I'll test this out. <br><br></td></tr></table><br>
<a name="2026516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Actually, a quick glimpse at the module reveals evidence that a child's position should update when a parent moves.. This doesn't appear to be happening with sprites.<br> <br></div><br>Should be. simple tests work here. I'll try your example after "Game Of Thrones" is over. <br><br></td></tr></table><br>
<a name="2026521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cheese</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> After some testing it does appear to work! The problem was a bit different than I initially thought.<br><br>To emulate Diddy's transition fade, I threw a sprite directly in front of the camera (Z: 1.0) which is a child of the camera. When moving the camera back and forth, it was flickering unpredictably. Changing the Z distance from 1.0 to 1.00001 seems to completely fix the problem:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Import diddy
Import minib3d

Const FADE_TIME = 50.0

Const APP_SCREEN_END = -1
Const APP_SCREEN_TITLE = 0
Const APP_SCREEN_MENU = 1
Const APP_SCREEN_GAME = 2

Global gameHandle:DiddyApp3D

Function Main:Int()
	gameHandle = New Game()
	game = gameHandle
	
	Return 0
End

Class Game Extends DiddyApp3D
Private
	Method OnCreate:Int()
		Super.OnCreate()
		
		screens = [Screen3D(New TitleScreen()),
				   Screen3D(New MenuScreen()),
				   Screen3D(New GameScreen())]
		screens[0].PreStart()
		
		' Load game-wide resources
	End
End

Class DiddyApp3D Extends DiddyApp
Private
	Field gl:OpenglES11
	
	Field resuming:Bool
	Field screens:Screen3D[]
	
Public
	Method GetScreen:Screen3D(screen:Int) Property
		If screen &gt;= 0 And screen &lt; screens.Length()
			Return Self.screens[screen]
		End
		
		Return NULL
	End
	
	Method GotoScreen:Bool(screen:Int)
		Local error:Bool = False
		If screen &gt;= -1 And screen &lt; screens.Length()
			If screen = -1
				nextScreen = Screen(exitScreen)	
			Else
				nextScreen = Screen(screens[screen])
			End
			screenFade.Start(FADE_TIME, True, True, True)
			
			error = True
		End
		
		Return error
	End
	
Private
	Method OnCreate:Int()
		Super.OnCreate()
		
		gl = New OpenglES11()
		SetRender(gl)
		
		resuming = False
		
		Return 0
	End
	
	Method UpdateOverride()
		If resuming
			resuming = False
			Graphics3DInit()
			ReloadAllSurfaces()
			ReloadAllTextures()
		End
	End
	
	Method OnResume()
		resuming = True
	End
End

Class TitleScreen Extends Screen3D
Private
	Method Start:Void()
		Super.Start()
		
		CameraClsColor(camera, 255.0, 255.0, 255.0)
	End
	
	Method Update:Void()
		Super.Update()
		
		If Millisecs() - startTime &gt;= 5000
			gameHandle.GotoScreen(APP_SCREEN_GAME)
		End
	End
End

Class MenuScreen Extends Screen3D
Private
	Method Start:Void()
		Super.Start()
	End
	
	Method Update:Void()
		Super.Update()
	End
End

Class GameScreen Extends Screen3D
Private
	Field light:TLight
	Field cube:TEntity
	
	Method Start:Void()
		Super.Start()
		
		light = CreateLight(1)
		MoveEntity(light, -10.0, 2.0, -25.0)
		
		cube = CreateCube()
		EntityColor(cube, 30.0, 30.0, 50.0)
		MoveEntity(cube, 0.0, 0.0, 10)
		
		
		PointEntity(light, cube)
	End
	
	Method Update:Void()
		Super.Update()
		
		If TouchDown()
			Local midY:Float = (SCREEN_HEIGHT - TouchY()) - SCREEN_HEIGHT2
			MoveEntity(camera, 0.0, 0.0, midY*0.001)
		End
		
		TurnEntity(cube, 0.5, 1.0, 2.0)
		
		If KeyHit(KEY_ESCAPE)
			gameHandle.GotoScreen(APP_SCREEN_END)
		End
	End
End

Class Screen3D Extends Screen
Public
	Field startTime:Int
	Field loaded:Bool
	
	Field camera:TCamera
	
Private
	Field fadeSprite:TSprite 
	
	Method Start:Void()
		startTime = Millisecs()
		loaded = False
		
		ClearWorld()
		
		camera = CreateCamera()
		
		fadeSprite = CreateSprite(camera)
		fadeSprite.EntityColor(0.0, 0.0, 0.0)
		fadeSprite.MoveEntity(0.0, 0.0, 1.00001)
		
		gameHandle.screenFade.Start(FADE_TIME, False, True, True)
	End
	
	Method Update:Void()	
		EntityAlpha(fadeSprite, 1.0 - gameHandle.screenFade.ratio)
		
		UpdateWorld()
	End
	
	Method Render:Void()
		If Not loaded
			loaded = True
			gameHandle.screenFade.ratio = 0.0
			Print("Screen loaded in " + (Millisecs() - startTime) + "ms.")
		End
		
		RenderWorld()
	End
End</textarea><br><br>Also, I think the unpredictable crash on transition while the mouse is held down may be a problem with Diddy (though I haven't been able to replicate the issue on another project yet). Will test further. <br><br></td></tr></table><br>
<a name="2026520"></a>

<a name="2026522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Changing the Z distance from 1.0 to 1.00001 seems to completely fix the problem <br></div><br>The default camera depth is set to 1.0 to 1000.0, so i can see how 1.0 would cause z-fighting. also try changing the depeth if needed:<br>camera.CameraRange(near,far) <br><br></td></tr></table><br>
<a name="2026617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, this is really, really cool stuff! Thanks for that! <br><br></td></tr></table><br>
<a name="2026930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Amazing! Thank you very much! OpenGL is probably the best thing that has happened to Monkey since its release. <br><br></td></tr></table><br>
<a name="2027050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks for the update Adam!<br><br>Wavefront Obj now works with GLFW, but not on Android. B3D works nowhere. I've tried the Base64-Encoder from <a href="http://www.motobit.com/util/base64-decoder-encoder.asp" target="_blank">http://www.motobit.com/util/base64-decoder-encoder.asp</a><br><br>Here is the model as *.obj, *.b3d and base64 in a zip: <a href="http://www.sedm.de/monkey/bnb/table.zip" target="_blank">http://www.sedm.de/monkey/bnb/table.zip</a><br><br>and here the source:<br><br><pre class=code>
Strict

#TEXT_FILES="*.txt|*.xml|*.json|*.obj|*.mtl"

Import mojo
Import minib3d

Class Game extends App
	Field cam:TCamera
	Field light01:TLight
	Field table01:TMesh

	Method OnCreate:Int()
		SetRender(New OpenglES11)
		
		Self.cam		= CreateCamera()
		Self.light01	= CreateLight(1)
		Self.table01	= LoadMesh("table01.base64.b3d.txt")
		
		cam.PositionEntity(0.0, 6.0, -6.0)
		cam.RotateEntity(45.0, 0.0, 0.0)
		
		light01.PositionEntity(0.0, 6.0, -6.0)
		light01.PointEntity(table01)
				
		AmbientLight(30, 20, 0)
		
		SetUpdateRate(60)
		Return 0
	End
	
	Method OnUpdate:Int()
		Return 0
	End
	
	Method OnRender:Int()
		RenderWorld()
		
		Return 0
	End
End

Function Main:Int()
	New Game()
	Return 0
End
</pre> <br><br></td></tr></table><br>
<a name="2027183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i've tried this with several objects. The Object Loader doesn't work on Android <br><br></td></tr></table><br>
<a name="2027184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok updated the OBJ loader for android, but i'm still working on the B3D loader error and a couple other problems. <br><br></td></tr></table><br>
<a name="2027194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> woohoo! Thank you! <br><br></td></tr></table><br>
<a name="2027241"></a>

<a name="2027243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> the LoadB3D bug was nasty, but it's squished. B3D files should work now, tested on glfw, android.<br>I'm getting my OSX Lion upgrade in the next week so will be able to test iPad soon, but should work regardless.<br><br>UPDATE: the bug was nasty, so it may help fix other crash issues. <br><br></td></tr></table><br>
<a name="2027237"></a>

<a name="2027355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> currently i write a Blender 2.6.x export plugin for *b3d files with the option for an export as a Base64 encoded text file ... wish me luck ;) <br><br></td></tr></table><br>
<a name="2027378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fsoft</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> bruZard, GOOD LUCK!<br><br>I am really looking forward for this kind of export plugin ;-) <br><br></td></tr></table><br>
<a name="2027859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >visionastral</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> @AdamRedwoods:<br><br>Thank you for doing this module!<br>As an early Blitz3D user I can't be more happy now! :D <br><br></td></tr></table><br>
<a name="2027892"></a>

<a name="2027894"></a>

<a name="2027896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> @visionastral<br>You're welcome, glad you're interested!<br><br><br>UPDATE v0.14:<br>Animated textures, a few texture fixes.<br>Added: TBrush.LoadAnimBrush(file,flags,frame width,frame height)<br>Added: TEntity.AnimateTexture(frame:int,loop:bool,index:int=0)<br><br><pre class=code>
''example
''OnCreate
bru_explo:TBrush = LoadAnimBrush("explosion_rgb_sheet.png",9+2,100,100)
sprite_explo:TSprite = CreateSprite() 'could also use TBatchSprite
sprite_explo.PaintEntity(bru_explo)

''OnUpdate
frame += 0.5
sprite_explo.AnimateTexture(frame,True)
</pre><br><br>I also modified TTexture frames so they would not create new textures but rather animate using texture position and scale. This is handled automatically, just a behind the scenes change.<br>AnimateTexture() is a shortcut to animate the current brush texture if frames are present. Option for looping.<br><br><br>I also added uv alteration info to brushes, which deprecates uv alteration in TTexture (but it still can be done), so that EACH brush/surface/entity will have independent animation for textures. THIS IS DIFFERENT from the Blitzmax version, but in my opinion makes Brushes more powerful. I added a command "PaintEntityGlobal(bru:TBrush)" just in case someone needed to animate or change textures on a global brush level.<br><br><br>ALSO:<br>Added TRender.GetVersion(). Returns Float value for render (opengl) version checking.<br><br>Tested on PC, Android, will make sure Mac, iOS work later.<br>I'm sure these changes will cause new bugs, let me know when you encounter them. Also, if you think these changes are too extreme, please let me know for discussion. <br><br></td></tr></table><br>
<a name="2027891"></a>

<a name="2027895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> THANK YOU!!! <br><br></td></tr></table><br>
<a name="2027989"></a>

<a name="2027990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >visionastral</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm glad to see this project is up and alive! OpenGL is not the kind of language fitted to everyday programming!<br>I was asking myself if the blitz 2D functions could be ported too, since opengl allows us to access custom buffers and I suppose we have full access to opengl buffers, doesn't it?<br>however I don't know how fast would it be...<br>What do you think? is it realistic?<br>Making a full blitz3D port to monkey would be amazing! :) <br><br></td></tr></table><br>
<a name="2028008"></a>

<a name="2028009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What do you think? is it realistic? <br></div><br>You are welcome to add to this module, but for me I'd rather get mojo working on top of miniB3D for 2D needs, since remaking blitz2d would take me forever. <br><br></td></tr></table><br>
<a name="2028014"></a>

<a name="2028016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >visionastral</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mojo is ok for me, but since miniB3D is using OpenGL I thought it was problematic to use mojo at the same time. I don't really have tried much, but when I did (a few days ago), using mojo and opengl together would make each other frame buffers to be deleted and ultimately causing crashes. (that was my experience, perhaps I wasn't doing things correctly?)<br><br>That's why I thought about making a B2D extension, in order to make it work nicely with opengl mode. But if I can make mojo work well along with opengl, then this is the best way to go, of course.<br><br>-edit-<br><br>BTW, is the monkey miniB3D fully compatible with the BlitzMax version?<br>I would be interested in making my level editor in bmx but since the engine would be made in monkey, it would be nice if I just could copy-paste the engine's code from monkey to bmx (as the code is very very close from monkey to bmx as long as you don't use functions not present in bmx) <br><br></td></tr></table><br>
<a name="2028049"></a>

<a name="2028050"></a>

<a name="2028051"></a>

<a name="2028053"></a>

<a name="2028054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mojo &amp; miniB3D:<br><br>my hack "RestoreMojo2D()" works for glfw, but not for android so far.<br><br>example:<br><pre class=code>
'' in OnRender()
glBindBuffer(GL_ARRAY_BUFFER,0) ' this helps reduce crashes
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,0)
RestoreMojo2D()
		
glDisable(GL_DEPTH_TEST)
glDisable(GL_LIGHTING)

SetColor 255,0,0
DrawOval( 100, 100, 200, 200 )

SetColor 255,255,255
glEnable(GL_DEPTH_TEST)
glEnable(GL_LIGHTING)
</pre><br><br><div class="quote"> BTW, is the monkey miniB3D fully compatible with the BlitzMax version? <br></div><br>no. i've deviated from minib3d, but they are compatible with a couple of minor adjustments. since minib3d+monkey had to be multi-platform, this brought up a whole slew of restrictions. <br><br></td></tr></table><br>
<a name="2028079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >visionastral</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> works for glfw, but not for android so far. <br></div><br><br>At least I can use the ChallengerGUI with OpenGL on windows, mac and linux with your hack. Thanks!<br><br>By the way, why is this happening anyway?<br>I mean, mojo is using opengl too (except in flash and xna) so why is this happening? <br><br></td></tr></table><br>
<a name="2028074"></a>

<a name="2028448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam for your continuous work! :) Having the mojo 2d set would be great! <br><br></td></tr></table><br>
<a name="2028452"></a>

<a name="2028453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >visionastral</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> I noticed something weird:<br>In your examples, this line is making the app crash 50% of the time:<br><br><pre class=code>txt.SetText(fps+" fps ~nhow are you",0,0)</pre><br><br>I have noticed it's because of the "~n" new line character. If I delete it, then it never crashes.<br>That's very weird, specially because it doesn't crash every time, but only 50% of the times or so...<br>Perhaps it has something to do with the fps counter, I don't know.<br><br>- edit: By the way, I'm compiling for GLFW when this happens - <br><br></td></tr></table><br>
<a name="2028462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's that time again...<br><br>Continued <a href="/posts.php?topic=2798" target="_blank">here</a>! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
