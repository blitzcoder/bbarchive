<!DOCTYPE html><html lang="en" ><head ><title >miniB3D: monkey 3d engine - part6</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >miniB3D: monkey 3d engine - part6</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >miniB3D: monkey 3d engine - part6</a><br><br>
<a name="2064369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://i295.photobucket.com/albums/mm144/adamredwoods/minib3d_logo.png"><br><b>minib3d+monkey</b><br>Latest update v0.39<br><br>Download:<br><a href="https://github.com/adamredwoods/minib3d-monkey" target="_blank">https://github.com/adamredwoods/minib3d-monkey</a><br><br>Win8 target:<br><a href="https://github.com/sascha-schmidt217/minib3d-monkey" target="_blank">https://github.com/sascha-schmidt217/minib3d-monkey</a><br><br>**THREAD CONTINUES HERE: <a href="http://monkeycoder.co.nz/Community/posts.php?topic=5703" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=5703</a><br><br>Thread continued from:<br><a href="http://monkeycoder.co.nz/Community/posts.php?topic=4396" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=4396</a><br><br><br><br><br>notes:<br>- current branch: v0.39 requires Monkey V68+<br>- tested on glfw, android, macos, ios, xna, webgl, flash<br><br>Works:<br>- normals<br>- textures, mipmaps<br>- vertex buffers <br>- sprites<br>- batch sprites<br>- context handling for mobile devices<br>- pick<br>- collisions<br>- binary load for b3d files (base64)<br>- animation, bone &amp; vertex<br>- Load OBJ<br>- animated textures<br>- XNA, Win8 target (courtesy of Rone)<br>- HTML5 (webGL)<br>- Shaders<br>- normal mapping (opengl2.0)<br>- MDD/PC2 animation loaders<br>- Ouya target<br><br>To Do:<br>- collada<br>- Flash<br>- bones to quat/matrix internals<br>- glow shaders, shadows<br>- physics<br>- terrain<br><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/P1040945b.jpg"><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/xna.jpg"><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/IMG_20130713_104908_zps93068e20.jpg"> <br><br></td></tr></table><br>
<a name="2063347"></a>

<a name="2063348"></a>

<a name="2063346"></a>

<a name="2061281"></a>

<a name="2058773"></a>

<a name="2058772"></a>

<a name="2058771"></a>

<a name="2057807"></a>

<a name="2057808"></a>

<a name="2055016"></a>

<a name="2055012"></a>

<a name="2055013"></a>

<a name="2055015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> ****************************************<br>minib3d v0.35<br><br>- Added: CameraScissor(x,y,w,h) -- allows clipping region for cameras<br>- Added: SetMojoEmulation() -- Allows mojo 2D commands in OnRender<br>  notes:<br>-xna Cls() function clears whole screen (may need better way?)<br>   - mojo readpixel/writepixel won't work (but minib3d read/write pixels for tpixmap works ok)<br>   - not all blend modes work<br>   - see bunnies demo for use (must preload images as tpixmap for html5)<br>   <br>- bug fixes: objloader, fog, entityorder depth, more <br><br></td></tr></table><br>
<a name="2055014"></a>

<a name="2055029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greeeeat stuff! :) Thanks Adam! <br><br></td></tr></table><br>
<a name="2055030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice<br>did not know that this works<br><pre class=code>
Extern
Class MojoEmulationDevice Extends GraphicsDevice
</pre> <br><br></td></tr></table><br>
<a name="2055032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now with the fix I get this<br><pre class=code>
BUILD SUCCESSFUL
Total time: 1 minute 1 second
Starting: Intent { cmp=com.monkey/.MonkeyGame }
--------- beginning of /dev/log/main
--------- beginning of /dev/log/system
I/[Monkey](20969): **OPENGL VERSION:1.1
I/[Monkey](20969): ..max textures:11
I/[Monkey](20969): Monkey Runtime Error : length=0; index=0
I/[Monkey](20969): /Volumes/8GIG/Linux/MonkeyPro69/modules/minib3d/tmodelobj.monkey&lt;138&gt;
I/[Monkey](20969): /Volumes/8GIG/Linux/MonkeyPro69/modules/minib3d/tmodelobj.monkey&lt;68&gt;
I/[Monkey](20969): /Volumes/8GIG/Linux/MonkeyPro69/modules/minib3d/tmesh.monkey&lt;238&gt;
I/[Monkey](20969): /Volumes/8GIG/Linux/MonkeyPro69/modules/minib3d/tmesh.monkey&lt;209&gt;
I/[Monkey](20969): /Volumes/8GIG/Linux/MonkeyPro69/modules/minib3d/functions.monkey&lt;921&gt;
I/[Monkey](20969): /Volumes/8GIG/A.I/AI.monkey&lt;53&gt;
I/[Monkey](20969): /Volumes/8GIG/A.I/AI.monkey&lt;76&gt;
I/[Monkey](20969): /Volumes/8GIG/Linux/MonkeyPro69/modules/mojo/app.monkey&lt;60&gt;
E/AndroidRuntime(20969): FATAL EXCEPTION: main
E/AndroidRuntime(20969): java.lang.StringIndexOutOfBoundsException: length=0; index=0
E/AndroidRuntime(20969): 	at com.monkey.c_TModelObj.m_ParseObj(MonkeyGame.java:12745)
E/AndroidRuntime(20969): 	at com.monkey.c_TModelObj.m_LoadMesh(MonkeyGame.java:13012)
E/AndroidRuntime(20969): 	at com.monkey.c_TMesh.m_LoadAnimMesh(MonkeyGame.java:9154)
E/AndroidRuntime(20969): 	at com.monkey.c_TMesh.m_LoadMesh(MonkeyGame.java:9427)
E/AndroidRuntime(20969): 	at com.monkey.bb_functions2.g_LoadMesh(MonkeyGame.java:17635)
E/AndroidRuntime(20969): 	at com.monkey.c_AIApp.p_Init(MonkeyGame.java:2775)
E/AndroidRuntime(20969): 	at com.monkey.c_AIApp.p_OnUpdate(MonkeyGame.java:2802)
E/AndroidRuntime(20969): 	at com.monkey.c_GameDelegate.UpdateGame(MonkeyGame.java:2953)
E/AndroidRuntime(20969): 	at com.monkey.BBGame.UpdateGame(MonkeyGame.java:559)
E/AndroidRuntime(20969): 	at com.monkey.BBAndroidGame.UpdateGame(MonkeyGame.java:1205)
E/AndroidRuntime(20969): 	at com.monkey.BBAndroidGame$GameTimer.run(MonkeyGame.java:791)
E/AndroidRuntime(20969): 	at android.os.Handler.handleCallback(Handler.java:725)
E/AndroidRuntime(20969): 	at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(20969): 	at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(20969): 	at android.app.ActivityThread.main(ActivityThread.java:5041)
E/AndroidRuntime(20969): 	at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(20969): 	at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(20969): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime(20969): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime(20969): 	at dalvik.system.NativeStart.main(Native Method)
E/InputDispatcher(  479): channel '41861690 com.monkey/com.monkey.MonkeyGame (server)' ~ Channel is unrecoverably broken and will be disposed!
</pre><br><br>I cant tell if we are getting closer or what :D <br><br></td></tr></table><br>
<a name="2055037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> great work ... i love MojoEmulation!!! <br><br></td></tr></table><br>
<a name="2055038"></a>

<a name="2055039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im trying it in linux,  I get some opengl errors<br><br><br>../main.cpp:3892:47: error: â&amp;#128;&amp;#152;glDeleteBuffersâ&amp;#128;&amp;#153; was not declared in this scope<br><br>for every opengl command <br><br></td></tr></table><br>
<a name="2055044"></a>

<a name="2055045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://cdn.memegenerator.net/instances/400x/26586411.jpg"> <br><br></td></tr></table><br>
<a name="2055043"></a>

<a name="2055042"></a>

<a name="2055049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Now with the fix I get this <br></div><br><br>fixed. updated tmodelobj.monkey on GitHub.<br><br><div class="quote"> Im trying it in linux, I get some opengl errors <br></div><br>Sorry, i don't have linux installed anywhere here (on my todo list), but sounds like its not importing the gl ext headers. i look in Monkey/modules/opengl/native/gles11.glfw.cpp and sure enough it only hooks the standard calls for win32. at the top of that file, i'd try:<br><pre class=code>#ifdef __linux__
#include &lt;GL/glext.h&gt;
#endif</pre><br>but that's all i can offer for now. <br><br></td></tr></table><br>
<a name="2055052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> didnt work unfortunately, but thanks for tryin <br><br></td></tr></table><br>
<a name="2055132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I try to CreatePlane() it tells me that I can't create it on a TMesh variable, it requires an INT variable for some unknown to me reason )<br>I guess it's a bug I've been whitnessing for 3-5 patches ^_^ <br><br></td></tr></table><br>
<a name="2055145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess PreLoad() function is not available if your app is not extending MiniB3Dapp - no integration with 3rd party frameworks? ( <br><br></td></tr></table><br>
<a name="2055163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I guess PreLoad() function is not available if your app is not extending MiniB3Dapp - no integration with 3rd party frameworks? <br></div><br>TPixmap.PreLoad(file)<br>I think the FirePaint3D example does not extend minib3dapp.<br><br>RE: CreatePlane()<br>i don't think CreatePlane works, do you mean CreateGrid(x,y)?<br>i should remove CreatePlane, because even if i implemented it the vertex lighting on it will look like junk. Use CreateGrid and scale it. <br><br></td></tr></table><br>
<a name="2055164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> TPixmap.PreLoad() doesn't work for images (MojoEmulation) outside the main class<br><br><div class="quote"> <br>Image not found<br> <br></div> <br><br></td></tr></table><br>
<a name="2055172"></a>

<a name="2055174"></a>

<a name="2055175"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way TPixmap.PreLoadPixmap() works is that it needs to be called continuously. I've thought about using an Async event instead, but haven't thought there'd be a need.<br><br><b>This is the example if you do NOT extend MiniB3DApp.</b><br><br>skeleton example:<br><pre class=code>

Function Main()
	New Game
End

Class Game Extends App

	Field init_gl:Bool = False
	
	Method OnCreate()
		
		SetRender()	
		SetUpdateRate 30
		
	End

	Method Init()
		
		If init_gl Or Not TPixmap.PreLoadPixmap(["Zombie.jpg","mojo_font.png"]) Then Return
		init_gl = True
		
		Print "main: init done"
	End
	
	Method OnUpdate()
		
		If Not init_gl Then Return
		Print "Main Update Routine"		
	End
	
	Method OnRender()
		Init()
		If Not init_gl Then Return
		Print "RenderWorld and Mojo"
	End

End
</pre><br><br><b>Why do it this way?</b><br>I tried to create a solution to allow flexibility to those who want to take it a step further and TPixmap.PreLoadPixmap() a font or splash screen and then start another TPixmap.PreLoadPixmap() for more image and texture files.<br><br><b>If you extend MiniB3DApp</b><br>if you use "Import minib3d.app", you only use PreLoad() in Method OnCreate(). Splash screens currently don't really work with this, I've still been working on a solution.<br><br>This is all a work in progress. <br><br></td></tr></table><br>
<a name="2055179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> the problem is: i can't load all assets on application init ... i must load assets at runtime. <br><br></td></tr></table><br>
<a name="2055180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't you create the variables for the assets then load them at runtime, this works for images I haven't tried it for textures. <br><br></td></tr></table><br>
<a name="2055183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use states and every state use his own data which will load when the state is initiated<br><br><pre class=code>
Strict

Import minib3d
Import mojo

Class Test Extends App
	Method OnCreate:Int()
		SetUpdateRate(30)
		SetRender()
		
		Self.e = New Ext()
		Self.state = 1
		
		Return 0
	End
	
	Method OnUpdate:Int()
		Select Self.state
			Case 1
				Self.e.Update()
		End
		Return 0
	End
	
	Method OnRender:Int()
		Select Self.state
			Case 1
				Self.e.Render()
		End
		Return 0
	End
		
	Field state:Int
	Field e:Ext
End

Class Ext
	Method New()
		Self.ready = False
	End
	
	Method Init:Int()
		If Self.ready Or Not TPixmap.PreLoadPixmap(["image.jpg"]) Then Return 0
		Self.ready = True
		Self.myImg = LoadImage("image.jpg")
		Return 0
	End
	
	Method Update:Int()
		If Not Self.ready Return 0
		Return 0
	End
	
	Method Render:Int()
		Self.Init()
		If Not Self.ready Return 0
		
		SetMojoEmulation()
		DrawImage(Self.myImg, 0, 0)
		
		Return 0
	End
	
	Field ready:Bool
	Field myImg:Image
End

Function Main:Int()
	New Test()
	Return 0
End
</pre><br><br>this will not work <br><br></td></tr></table><br>
<a name="2055277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Firstly move the PreLoadPixmap into the Oncreate function then you should thoretically be able to load the textures when required and release them when they arent. The PreLoadPixmap command loads it all in so things like HTML5 can see it IIRC, by calling it when your state is created its not going to find it as it wasnt loaded at startup. <br><br></td></tr></table><br>
<a name="2055279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats terrible ... you say i have to preload 50MB gfx in OnCreate() ? I think that cannot be the way. <br><br></td></tr></table><br>
<a name="2055310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IceVAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam<br><br>Good work!<br><br>EntityOrder now work ok, but... need a little fix<br><br>In entity order function :<br><br>This replace all FX flags!<br><pre class=code>
if order&lt;&gt;0
   EntityFX 64
end
</pre><br><br>fixed code ;)<br><pre class=code>
if order&lt;&gt;0
  brush.fx = brush.fx|64
end
</pre><br><br><br>Bye! <br><br></td></tr></table><br>
<a name="2055317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok ... it works :-D ... you just need an RenderWorld() in OnRender() ... *phew*<br><br>1. Mainfile<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import minib3d
Import mojo
Import includes.intro

Const STATE_INTRO:Int		= 1


Class BNB Extends App
	Public
	Method OnCreate:Int()
		SetRender()
		SetUpdateRate(30)
		
		Self.state	= STATE_INTRO
		Self.intro	= New Intro()
				
		Return 0
	End
	
	Method OnUpdate:Int()
		Select Self.state
			Case STATE_INTRO
				Self.intro.Update()
		End
		Return 0
	End
	
	Method OnRender:Int()			
		Select Self.state
			Case STATE_INTRO
				Self.intro.Render()
		End
		
		RenderWorld()
		
		Return 0
	End
	
	Private
	Field intro:Intro
	Field state:Int
End

Function Main:Int()
	New BNB()
	Return 0
End
</textarea><br><br>2. the state <br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import minib3d
Import mojo

Class Intro
	Public
	Method New()
		Self.ready	= False
	End
	
	Method Init:Int()
		If Self.ready Or Not TPixmap.PreLoadPixmap(["gfx/sedm.jpg"]) Return 0
		Self.ready	= True
		Self.sedm	= LoadImage("gfx/sedm.jpg")
		
		Return 0
	End
		
	Method Update:Int()
		If Not Self.ready 
			Self.Init()
			Return 0
		EndIf
		
		Self.ratio	= Float(DeviceWidth()) / 1080.0
		
		Return 0
	End
	
	Method Render:Int()
		If Not Self.ready Return 0
		SetMojoEmulation()
		
		DrawImage(Self.sedm, 0, 0, 0.0, Self.ratio, Self.ratio)
		
		Return 0
	End
	
	Private
	Field sedm:Image
	Field ratio:Float
	Field ready:Bool
End
</textarea><br><br>Live:<br><a href="http://www.sedm.de/test" target="_blank">http://www.sedm.de/test</a> <br><br></td></tr></table><br>
<a name="2055319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IceVAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strange error in html5?!<br><br>If I run my program from monkey. all is well.<br>but if I open the. html gives this error ...<br><br><pre class=code>
WebGL 1.0 (OpenGL ES 2.0 Chromium)
**WEBGL 1

..FullShader success     
Monkey Runtime Error : Error: SecurityError: DOM Exception 18
C:/MonkeyPro70/modules/minib3d/opengl/opengles20.monkey&lt;1333&gt;
C:/MonkeyPro70/modules/minib3d/trender.monkey&lt;490&gt;
C:/MonkeyPro70/modules/minib3d/opengl/opengles20.monkey&lt;1366&gt;
C:/MonkeyPro70/modules/minib3d/trender.monkey&lt;234&gt;
C:/MonkeyPro70/modules/minib3d/functions.monkey&lt;1136&gt;
C:/MonkeyPro70/modules/minib3d/app.monkey&lt;91&gt;
C:/MonkeyPro70/modules/mojo/app.monkey&lt;71&gt;
</pre><br><br>Uncaught Error: SecurityError: DOM Exception 18 &lt;-- in Chrome Console <br><br></td></tr></table><br>
<a name="2055320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> @IceVan: it's normal ... read this: <a href="http://stackoverflow.com/questions/2704929/uncaught-error-security-err-dom-exception-18-when-i-try-to-set-a-cookie" target="_blank">http://stackoverflow.com/questions/2704929/uncaught-error-security-err-dom-exception-18-when-i-try-to-set-a-cookie</a> <br><br></td></tr></table><br>
<a name="2055324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IceVAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> @bruZard: ummm... Outch!  I'm obfuscated XDD.<br>Thanks! <br><br></td></tr></table><br>
<a name="2055325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Uncaught Error: SecurityError: DOM Exception 18 &lt;-- in Chrome Console  <br></div><br>yes, that's why Monkey includes MServer. <br><br></td></tr></table><br>
<a name="2055326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> In entity order function :<br><br>This replace all FX flags! <br></div><br>thanks for finding that, i seem to always be doing that. <br><br></td></tr></table><br>
<a name="2055327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Next issue: my mesh works fine with Blitz3D, but i get an "glerror 1282" in miniB3D<br><br><a href="http://www.sedm.de/test/mesh.zip" target="_blank">http://www.sedm.de/test/mesh.zip</a> <br><br></td></tr></table><br>
<a name="2055329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok ... i was too euphoric ... all action in one class works, but loading at runtime doesn't. Loading images at runtime for DrawImage() works ... but only for HTML5, on Android i get an "out of memory". It's really frustrating ... <br><br></td></tr></table><br>
<a name="2055363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Next issue: my mesh works fine with Blitz3D, but i get an "glerror 1282" in miniB3D <br></div><br>if i change testtex from a jpg to png, preload it, it works. <br><br></td></tr></table><br>
<a name="2055581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rex Rhino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried the latest version with Bunnies demo - The image transparency isn't working on XNA. <br><br></td></tr></table><br>
<a name="2055597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Tried the latest version with Bunnies demo - The image transparency isn't working on XNA.  <br></div><br>So true! Fixed xna files on GitHub. Thanks! <br><br></td></tr></table><br>
<a name="2055663"></a>

<a name="2055664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> how do we use mojo with minib3d I put the DrawImage after the renderworld but nothing happened, is there a certain way of doing things?<br><br>EDIT: it now works perfectly with android :) looks brilliant on me Nexus 7 :) I still cant get mojo to work with it though any help on that score would be appreciated :) <br><br></td></tr></table><br>
<a name="2055656"></a>

<a name="2055657"></a>

<a name="2055660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> AntiAlias() doesn't work. <br><br></td></tr></table><br>
<a name="2055698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Q: how do we use mojo with minib3d?<br><pre class=code>Method OnRender()
   SetMojoEmulation()
   DrawImage(my_image, x, y)
   RenderWorld()
ENd</pre><br><br>Q: AntiAlias() doesn't work.<br><br>no, not at this time since opengles1.1 does not allow it. <br><br></td></tr></table><br>
<a name="2055688"></a>

<a name="2055687"></a>

<a name="2055696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rex Rhino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Adam,<br><br>Thanks for fixing that XNA bug! Awesome work! <br><br></td></tr></table><br>
<a name="2055703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rex Rhino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, just wondering if anyone can help with a little problem I am having:<br><br>I just incorporated minib3d into my code (it is a big project, too big to post all the source code unfortunately).<br><br>I have it rendering the 3D OK, and the drawing commands are working (so I can draw lines, pixels, etc., on top of the 3D).<br><br>But images are not being drawn. No error message or anything, they just aren't there. I have tried using the bunny image from the demo (to make sure it wasn't a problem with my images), I have use the following command to preload the image:<br><pre class=code>PreLoad("graphics/bunny.png")</pre><br><br>Here is my render loop:<br><pre class=code>
    SetMojoEmulation()
    SetColor 255, 255, 255
    g.backgroundSpace.render(g)
    SetAlpha 1.0
    SetBlend(AlphaBlend)
    DrawImage(g.images.Get("bunny"), 100, 100)
    DrawText("test",100, 100)
    RenderWorld()
</pre><br><br>I have also called "SetRender()" in OnCreate.<br><br>Obviously I am missing something, because the bunny demo works perfectly for me now... I am probably forgetting something obvious, but I just can figure it out.<br><br>Does anyone have any suggestions or insight on what might be the problem? <br><br></td></tr></table><br>
<a name="2055707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> test to make sure your resource manager is getting the image, by using Width()<br><pre class=code>
Print g.images.Get("bunny").Width()
</pre><br>If width is 0 then the resource mapping isn't finding it.<br><br>Plus, it could be a problem with the extra folder, if your resource manager needs it Get("graphics/bunny") versus just Get("bunny"). <br><br></td></tr></table><br>
<a name="2055721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam: Thanks for that will give it a go :) <br><br></td></tr></table><br>
<a name="2055773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm rendering to a HTML5 canvas, and resizing the canvas, how can I make minib3d render to the size of the new canvas?<br><br>Or how can I set the graphic width and height of minib3d? <br><br></td></tr></table><br>
<a name="2055774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nvm, Got it! <br><br></td></tr></table><br>
<a name="2055777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Checked out this latest update.<br><br>you sir are a boss! <br><br></td></tr></table><br>
<a name="2055779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> I downloaded the zip file of midb3d and tested the examples on HTML5 target.<br><br>When executing "minib3d_collision_test.monkey", this error message appeared:<br><br><div class="quote"> Image Not Found: monkey://data/mojo_font.png<br>Font file not found. <br></div><br><br>When executing "pick_collision_test.monkey", this error message appeared:<br><br><br><div class="quote"> Image Not Found: monkey://data/mojo_font.png     <br>Font file not found.<br>Monkey Runtime Error : TypeError: dbg_array(...)[dbg_index] is null<br>C:/MonkeyPro69/modules/minib3d/ttext.monkey&lt;280&gt;<br>C:/MonkeyPro69/modules/minib3d/examples/pick_collision_test.monkey&lt;67&gt;<br>C:/MonkeyPro69/modules/minib3d/examples/pick_collision_test.monkey&lt;98&gt;<br>C:/MonkeyPro69/modules/mojo/app.monkey&lt;60&gt; <br></div> <br><br></td></tr></table><br>
<a name="2055786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> When executing "pick_collision_test.monkey", this error message appeared <br></div><br>Yeah, i haven't updated that with the font preloader yet... <br><br></td></tr></table><br>
<a name="2055792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rex Rhino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>test to make sure your resource manager is getting the image, by using Width()<br>Print g.images.Get("bunny").Width()<br><br>If width is 0 then the resource mapping isn't finding it.<br><br>Plus, it could be a problem with the extra folder, if your resource manager needs it Get("graphics/bunny") versus just Get("bunny"). <br> <br></div><br><br>The width being returned is definitely correct... The image has been properly loaded and referenced. It just isn't being drawn to the screen.<br><br>Also, the default font for DrawText is not working... That font image is loaded automatically correct?<br><br>So something is going on that it will draw shapes like lines, circles, etc., but not bitmaps.<br><br>UPDATED INFO:<br><br>Aha! If you call any drawing commands BEFORE you call SetRender(), drawing commands no longer work (even after you call SetRender()).<br><br>I had a preloader with splash screen that was drawing to the screen before the 3D section, which then messed up subsequent drawing functionality. <br><br></td></tr></table><br>
<a name="2055789"></a>

<a name="2055788"></a>

<a name="2055793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rex Rhino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to be bombarding the forum with all these questions...<br><br>Now that I have 2D and 3D working together wonderingly, I experimented with taking out the PreLoad() on my images, and everything still seemed to work just fine.<br><br>What exactly is PreLoad() needed for? I thought it was needed for all 2D graphics, but apparently I am wrong. <br><br></td></tr></table><br>
<a name="2055794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rex Rhino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I think I discovered a bug.<br><br>Before using just just 2D, my translate statement was this:<br><br><pre class=code>
Translate(0, ScreenOffset)
</pre><br><br>In order to get it working like before, I have to change it to this:<br><br><pre class=code>
Translate(0, -ScreenOffset)
</pre><br><br>I think there is a bug in your code that reverse the y axis for translate. <br><br></td></tr></table><br>
<a name="2055805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What exactly is PreLoad() needed for? <br></div><br>HTML5 target only. If I can get Flash11 target working, you would need it for that.<br><br>The other reason you may want to preload, is if you are loading a lot of assets. PreLoad() loads TPixmaps into memory. LoadTexture() and LoadImage() load into video memory.<br><br><br><div class="quote"> I think there is a bug in your code that reverse the y axis for translate.  <br></div><br>probably, i'll double-check. thanks for finding this. <br><br></td></tr></table><br>
<a name="2055851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> How can i free a sprite (or something) from video mem? After FreeEntity() my sprite is still visible.... <br><br></td></tr></table><br>
<a name="2055852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> How can i free a sprite (or something) from video mem? After FreeEntity() my sprite is still visible....  <br></div><br>Does the entity disappear? it should.<br>To remove the sprite from video memory, you'll need to FreeTexture(). This is because if you free one sprite that is using an image from an atlas, you don't want to free the texture if other sprites are still using it. <br><br></td></tr></table><br>
<a name="2055854"></a>

<a name="2055855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> The sprite doesn't disappear after FreeEntity().<br>how can i get the texture of the sprite to free them? <br><br></td></tr></table><br>
<a name="2055856"></a>

<a name="2055857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> how can i get the texture of the sprite to free them?  <br></div><br>texture = mysprite.GetSurface(1).Texture()<br><br>the above only works with surfaces that have one texture <br><br></td></tr></table><br>
<a name="2055858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> doesn't work<br><br><pre class=code>
Local tex:TTexture = Self.bg.GetSurface(1).Texture()
If tex &lt;&gt; Null FreeTexture(tex)
</pre><br><br>"tex" is Null <br><br></td></tr></table><br>
<a name="2055859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> my fail .... without a following RenderWorld() you think FreeEntity() doesn't work ;) <br><br></td></tr></table><br>
<a name="2055860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> doesn't work <br></div><br>I'l be darned, i forgot to add in a GetTexture() for TMesh....<br><br>for now just use<br>texture = mysprite.brush.GetTexture()<br><br>and note that field "brush" is not guaranteed to all meshes, so for now, keep it with sprites. i'll add a GetTexture(tex_num:Int=0) command for TMesh to solve this. <br><br></td></tr></table><br>
<a name="2055861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, thank you! <br><br></td></tr></table><br>
<a name="2055862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure but it seems images made via GrabImage do not render. <br><br></td></tr></table><br>
<a name="2055933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this a bug or a new feature?<br><br>The behavior of childrens in Blitz3D and Monkey MiniB3D is different. When I try to fire a shot from camera in Blitz3D the child "shot" has always the same direction like the camera:<br><br>Fire a shot with &lt;1&gt; then turn the camera to ~45° with &lt;2&gt; and fire another shot.<br><br><br><br><pre class=code>Graphics3D 800,600
light=CreateLight(1)

cam=CreateCamera()
MoveEntity cam,0,0,-5
Repeat
	If KeyHit(2)
		shot=CreateSphere(8,cam)
		fire=1
	EndIf
	If KeyHit(3)
		TurnEntity cam,0,1,0
	EndIf
	If fire=1
		MoveEntity shot,0,0,1
	EndIf
	RenderWorld()
	DebugLog EntityYaw(cam)
	Flip 0
Until KeyHit(1)
</pre> <br><br>The same in Monkey produces strange effects. The shot's start direction depends on the camera Yaw position:<br><br>Fire a shot with &lt;1&gt; then turn the camera to ~45° with &lt;2&gt;  to the right side and fire another shot.<br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Strict
Import mojo
Import minib3d


Class Game Extends App
	
	Field Camera:TCamera
	Field Light:TLight
	Field Shot:TMesh
	Field Started:Bool, Fire%=0

	Method OnCreate%()
		SetUpdateRate 30
		Return 0
	End


	Method OnUpdate%()
		If KeyHit(KEY_CLOSE) Or KeyHit(KEY_ESCAPE) Then Error ""
		If Not Started Then Return 0

		If TouchX()&lt;100
			Camera.TurnEntity 0,1,0
		Elseif TouchX()&gt;500
			Camera.TurnEntity 0,-1,0
		Endif
		
		
		If TouchHit(0) And Fire=0
			Fire=Millisecs()+2000
			Shot=CreateSphere(8,Camera)
		Endif 
		If Fire &gt;Millisecs()
				Shot.MoveEntity 0,0,2
		Elseif Fire&gt;0
				Shot.HideEntity()
				Fire=0
		Endif
		Print Camera.EntityYaw()
		Return 0
	End

	
	Method Init:Void()		
		If Started Then Return
		Started = True		
		SetRender()		
		Camera = CreateCamera()
		Camera.CameraClsColor(180,210,220)


		Light=CreateLight(1)
		Light.TurnEntity 35,-40,0
		Light.LightColor 222,222,111
		Light.AmbientLight 111,99,111
	End


	Method OnRender%()
		Init()
		RenderWorld()
		Return 0
	End
End




Function Main%()
	New Game
	Return 0
End
</textarea> <br><br></td></tr></table><br>
<a name="2055948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The same in Monkey produces strange effects. The shot's start direction depends on the camera Yaw position: <br></div><br><br>oh my oh my. ok, that's a bad bug, thanks for finding this, will update asap. BTW, MoveEntity can be replaced with just this, and it'll work:<br><br>EDIT:<br>Scratch that...<br>The bug was that i was compounding the matrix back into the children. <br><br></td></tr></table><br>
<a name="2055942"></a>

<a name="2055943"></a>

<a name="2055949"></a>

<a name="2055950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, fixed the MoveEntity bug on GitHub.<br><br>Sorry about that bug, TranslateEntity() may be borked, too, i'll look into when I get 10 minutes free... which is never... <br><br></td></tr></table><br>
<a name="2055952"></a>

<a name="2055953"></a>

<a name="2055954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> At the moment I start wrinting a beginner tutorial for monkey minib3d. Did you notice it? If I detect more bugs during this process I will report to you, ok?<br><br>By the way... this is also "closed" to a bug:<br><div class="quote"> My Tutorial Chapter 1:<br><br>...and extract it to your Monkey Module folder...<br>C:\MonkeyPro69\modules\<br>After this the minib3d folder will have the wrong name:<br>C:\MonkeyPro69\modules\minib3d-monkey-master\<br>Rename it to "minib3d"...<br>C:\MonkeyPro69\modules\minib3d\ <br></div><br>Is there any reason for using this folder name?<br><br><br><br>And this behavior was also strange:<br><br>The "0" in ScaleEntity() causes the grid's color not to be displayed green but black. But I'm not sure, whether this is a feature. With a "0.1" it workes perfect.<br><pre class=code>		Floor=CreateGrid(15,15)
		Floor.ScaleEntity 10,0,10 
		Floor.EntityColor 11,99,11
</pre> <br><br></td></tr></table><br>
<a name="2055960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there any reason for using this folder name? <br></div><br>that's GitHub. If i make a miniB3D-Haxe in the future, i'd want to separate it.<br><br><div class="quote"> The "0" in ScaleEntity() causes the grid's color not to be displayed green but black. <br></div><br>weird, it should disappear. i'll check it out but if a height is 0.0 it does make sense to get weird.<br><br><div class="quote"> Did you notice it? <br></div><br>yes! keep going. i don't have time. first, i want to make a demo game, but i want to get collada animation going first. <br><br></td></tr></table><br>
<a name="2055961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> images made via GrabImage do not render.  <br></div><br>i played with this and couldn't find a problem... any examples? <br><br></td></tr></table><br>
<a name="2055965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> "0" problem:<br>It did not disappear, but was filled with black color.<br>I can live with a feature, that an object with height=0 disappears. But I think in Blitz3D the plane had a height of 0.<br><br>I see: You have not much time. So, if you want you can check the code of my tutorial demos and add the samples in your package as yours.<br><br>You should also search for some guys willing to write the documentation for you for free. 10 friend and everybody write one command a week... they will finish in a year. Perhaps Mark has an automatism for his documentation? <br><br></td></tr></table><br>
<a name="2055978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I guess I forgot to delete build folder or something ( It works, which is awesome ^_^ <br><br></td></tr></table><br>
<a name="2056173"></a>

<a name="2056174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rex Rhino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is EntityColor working in the latest version?<br><br>UPDATE:<br><br>I see that EntityColor is working for CreateCube(), but not CreateSphere()...  I think that would be a bug in EntityColor or CreateSphere, but I have no idea which. <br><br></td></tr></table><br>
<a name="2056303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> CreateCube(), but not CreateSphere() <br></div><br>are you sure? they are treated identically, so i don't see why they'd be different. check the entityblend() values, i have recently changed that in xna. <br><br></td></tr></table><br>
<a name="2056315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rex Rhino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>are you sure? they are treated identically, so i don't see why they'd be different. check the entityblend() values, i have recently changed that in xna.<br> <br></div><br><br>You are right! There was a bug in my code that was create duplicate versions of a sphere, one with EntityColor applied, and one without EntityColor applied. <br><br>Sorry about that... Next time I will create a code demo if I think I found a bug! <br><br></td></tr></table><br>
<a name="2056401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blabz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does SetMojoEmulation() render mojo's 2d graphic commands in OpenGL?<br><br>Would I be able to use FBO's on Mojo's 2d graphics? <br><br></td></tr></table><br>
<a name="2056410"></a>

<a name="2056411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Would I be able to use FBO's on Mojo's 2d graphics?  <br></div><br>I have not tested it, but mojo emulation goes through the same renderer as everything else, the only difference is the camera. So in theory, yes. and if you get a working example before i do, please share. <br><br></td></tr></table><br>
<a name="2056548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> some questions related to my last chapter of the tutorial:<br><br>What is this type good for?<br><pre class=code>Const COLLISION_METHOD_AABB:Int=4</pre><br><br><br>What is this type? Do I have to define more in this case?<br><pre class=code>Const COLLISION_METHOD_POLYGON:Int=2</pre><br><br><br>Why are there again collision type definitions in the Collision() command? parameter method_nr%? What are they good for?<br><pre class=code>Function Collisions:Void(src_no:Int, dest_no:Int, method_no:Int, response_no:Int=0)</pre><br><br><br>Why does the bowl stopps to soon in my sample?<br><br><br><br>Why does the bowl slide and finally continue, when i use this:<br><pre class=code>Collisions MovingObjects,MovingObjects, COLLISION_METHOD_BOX, COLLISION_RESPONSE_STOP
</pre> <br><br></td></tr></table><br>
<a name="2056571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What is this type good for? <br></div><br>collision AABB is not implemented yet. i was trying to find a very cheap, fast collision. sphere collision is pretty fast.<br><br><div class="quote"> What is this type? Do I have to define more in this case? <br></div><br>collision polygon is a source sphere to destination polygon collision. it also handles polygon picks (see pick example).<br><br><div class="quote"> Why are there again collision type definitions in the Collision() command? parameter method_nr%? What are they good for? <br></div><br><br>src_no = the source collision type (type = group number in this case)<br>dst_no = the destination collision type (type = group number in this case)<br>method_no = COLLISION_METHOD_XXXXX (XXXXX = SPHERE, BOX, POLYGON)<br><br>so Collisions() command "turns on" that collision for that src/dst group.<br>this enables you to create different groups, so you do not waste time testing against EVERYTHING. collisions are very expensive computationally.<br><br>Example:<br><pre class=code>
Collisions(Player%, floor%, POLYGON, SLIDE) ''expensive, but need accuracy
Collisions(Player, wall, BOX, SLIDEXZ) ''medium, need angles for walls
Collisions(Player, zombie, SPHERE, SLIDEXZ) ''cheap, only need to check sphere area, can be multiple spheres
</pre><br><br><div class="quote"> <br>Why does the bowl stopps to soon in my sample? <br></div><br>the default EntityBox() setting is too big. probably a bug.<br>you can do this to define the exact width, height, depth:<br>Bowl.CollisionSetup MovingObjects,COLLISION_METHOD_BOX, 1.0, 1.0, 1.0<br>or<br>Bowl.CollisionSetup MovingObjects,COLLISION_METHOD_BOX, Bowl.EntityScaleX(), Bowl.EntityScaleY(), Bowl.EntityScaleZ()<br><br>you can see the collision shapes in your sample here:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict
Import mojo
Import minib3d


Class Game Extends App
	
	Field Camera:TCamera
	Field Light:TLight
	Field Cube:TMesh, Bowl:TMesh
	Field colmesh:TMesh, colmesh2:TMesh
	Field Started:Bool

	Method OnCreate%()
		SetUpdateRate 30
		Return 0
	End


	Method OnUpdate%()
		If KeyHit(KEY_CLOSE) Or KeyHit(KEY_ESCAPE) Then Error ""
		If Not Started Then Return 0
		Cube.TurnEntity 0,1,0
		Bowl.MoveEntity 0,-0.1,0
		Print Bowl.CountCollisions()
		UpdateWorld()
		Return 0
	End

	
	Method Init:Void()		
		If Started Then Return
		Started = True		
		SetRender()		
		Camera = CreateCamera()
		Camera.CameraClsColor(0,0,80)
		Camera.PositionEntity(0,-0.3,0)
		
		Local MovingObjects%=1

		Cube= CreateCube()
		Cube.PositionEntity -0.5,-2.5,8
		Cube.CollisionSetup MovingObjects,COLLISION_METHOD_SPHERE

		Bowl= CreateSphere()
		Bowl.PositionEntity 0,5,8
		Bowl.EntityColor 255,0,0
		Bowl.CollisionSetup MovingObjects,COLLISION_METHOD_BOX

		colmesh = CreateSphere()
		colmesh.EntityAlpha(0.2)
		colmesh.EntityParent(Cube, False)
		colmesh.ScaleEntity(Cube.collision.radius_x,Cube.collision.radius_x,Cube.collision.radius_x)
		
		colmesh2 = CreateSphere()
		colmesh2.EntityAlpha(0.2)
		colmesh2.EntityParent(Bowl, False)
		colmesh2.ScaleEntity(Bowl.collision.radius_x,Bowl.collision.radius_x,Bowl.collision.radius_x)

		Collisions MovingObjects,MovingObjects, COLLISION_METHOD_SPHERE, COLLISION_RESPONSE_STOP

		Light=CreateLight(1)
		Light.MoveEntity -10,10,10
		Light.TurnEntity 35,-40,0
	End


	Method OnRender%()
		Init()
		RenderWorld()
		Return 0
	End
End




Function Main%()
	New Game
	Return 0
End
</textarea><br><br><div class="quote"> Why does the bowl slide and finally continue, when i use this: <br></div><br>bug.<br><br>Please note that recently there were a few bugs found that I am working on. <br><br></td></tr></table><br>
<a name="2056569"></a>

<a name="2056573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IceVAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam,<br><br>¿v0.35 works on Android?<br><br>minib3d_mojo_bunnies compile but app crash and close<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
BUILD SUCCESSFUL
Total time: 17 seconds
Starting: Intent { cmp=com.monkey/.MonkeyGame }
--------- beginning of /dev/log/main
--------- beginning of /dev/log/system
E/dalvikvm( 3666): Could not find class 'com.monkey.c_myApp', referenced from method com.monkey.bb_.bbMain
E/AndroidRuntime( 3666): FATAL EXCEPTION: main
E/AndroidRuntime( 3666): java.lang.NoClassDefFoundError: com.monkey.c_MiniB3DApp
E/AndroidRuntime( 3666): 	at com.monkey.bb_.bbInit(MonkeyGame.java:12678)
E/AndroidRuntime( 3666): 	at com.monkey.MonkeyGame.onCreate(MonkeyGame.java:1378)
E/AndroidRuntime( 3666): 	at android.app.Activity.performCreate(Activity.java:5104)
E/AndroidRuntime( 3666): 	at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
E/AndroidRuntime( 3666): 	at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
E/AndroidRuntime( 3666): 	at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
E/AndroidRuntime( 3666): 	at android.app.ActivityThread.access$600(ActivityThread.jE/DictionaryBackupAgent( 2741): Couldn't read from the cursor
ava:141)
E/AndroidRuntime( 3666): 	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
E/AndroidRuntime( 3666): 	at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 3666): 	at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 3666): 	at android.app.ActivityThread.main(ActivityThread.java:5041)
E/AndroidRuntime( 3666): 	at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 3666): 	at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 3666): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime( 3666): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime( 3666): 	at dalvik.system.NativeStart.main(Native Method)
</textarea> <br><br></td></tr></table><br>
<a name="2056597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hope you still keep on smiling about my posts... I told you I will find a bunch of bugs during this tutorial... <br><br><i>....Why are there again collision type definitions in the Collision() command? parameter method_nr%? What are they good for?...</i><br>Your answer did not answer my question. I understand the need of this function call. But what I did not understand is: Why is there again a definiton of collision radius types?.<br><br>If the Bowl is already defined as collision type "Sphere" and the Cube is already defined as collision type "Box". What would bring to define now a collision type in the Collision() command? I'm only talking about the third parameter in this command!<br><br>What wouldbe the effect, when this is given...<br><pre class=code>Bowl.CollisionSetup 1, COLLISION_METHOD_SPHERE
Cube.CollisionSetup 1, COLLISION_METHOD_BOX</pre><br><br>and now I use here... <br><pre class=code>Collisions MovingObjects,MovingObjects, COLLISION_METHOD_SPHERE, COLLISION_RESPONSE_STOP</pre><br>or<br><pre class=code>Collisions MovingObjects,MovingObjects, COLLISION_METHOD_BOX, COLLISION_RESPONSE_STOP</pre><br>or<br><pre class=code>Collisions MovingObjects,MovingObjects, COLLISION_METHOD_POLYGON, COLLISION_RESPONSE_STOP</pre><br><br><br>Your possibility of visualizing the shapes of the collision rooms would be a very helpful tool during development, when this is added to the engine as a feature. The game author could see, whether the collision shape really fits to the actors shape. As long as the game author has to define those shapes by himself he propably could make mistakes and never can 100% sure, that the shape corresponds with the current collision room.<br><br><br>If I now play around with the visible shapes I can see, that the collision radius defined by the default values of the command CollisionSetup() is also to big at the bowl. My bowl is created as CreateSphere() without any scaling. So this should create a Sphere with radius=1 or diameter=2. Shouldn't the CollisionSetup() by default set the collision radius to the same value? But the painted shape of the collision room seems to be double size... <br><br></td></tr></table><br>
<a name="2056594"></a>

<a name="2056600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ¿v0.35 works on Android?<br>minib3d_mojo_bunnies compile but app crash and close <br></div><br>that error says it cannot find class myApp.<br>yup, tested v0.35 out on a nexus4.<br><div class="quote"> If the Bowl is already defined as collision type "Sphere" and the Cube is already defined as collision type "Box". What would bring to define now a collision type in the Collision() command? <br></div><br>oh, ok, thats a good point. you're probably right, one of those is not really needed, but in the CollisionSetup() function it calculates the collision primitive size ahead of time. I guess the third parameter in Collisions() should be optional... i'll have to think about it.<br><br>CollisionSetup() also is important if you use a CreatePivot() for a trigger point or something that uses a sphere or box collision, there is no way collisions can tell the size. It is also needed for CameraPick(), since we do not define the collision method.<br><br><div class="quote"> I told you I will find a bunch of bugs during this tutorial...  <br></div><br>good! <br><br></td></tr></table><br>
<a name="2056636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IceVAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>that error says it cannot find class myApp.<br>yup, tested v0.35 out on a nexus4.<br> <br></div><br><br>I change this<br><br><pre class=code>Class myApp Extends Minib3dApp</pre><br><br>for this one<br><br><pre class=code>Class myApp Extends MiniB3DApp</pre><br><br>and works! But I don't understand, <b>Class myApp Extends Minib3dApp</b> works fine before and works ok on html5 and glfw ??!??!<br><br>Several hours to find the error. I believed I was going crazy XD <br><br></td></tr></table><br>
<a name="2056703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Several hours to find the error. I believed I was going crazy  <br></div><br>sorry about that, that change was me to be more consistent in my labeling.<br><br>But i dug into this problem and it's more to do with Android JDK not extracting the classes correctly for the Class Loader because they are named the same and in the same file.<br><br>And its a shame that<br><pre class=code>Alias Minib3dApp = minib3d.app.MiniB3DApp</pre><br>does not work when the class is in the same file. That's a monkey problem.<br><br>Anyways, I've changed it so the correct labeling uses caps "MiniB3DApp". My apologies. <br><br></td></tr></table><br>
<a name="2056796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working on the next chapter of the tutorial about textures. But I need your help to clarify:<br><br>1.<br>In your first samples you called SetRender() once in the OnRender()-Init(). In the firepaint demo you called it in OnCreate() and it seem important that it is now there, because otherwise the TPixmap.PreLoadPixmap([""...]) seems to throw a bug.<br><br>Can we say, that SetRender() now can always be called in OnCreate()? Then I would change the old chapters of the tutorial...<br><br><br>2.<br>I always get this error message. Is it normal?<br><pre class=code>WebGL 1.0
**WEBGL 1
(357,14): warning X3206: implicit truncation of vector type
</pre><br><br><br>3.<br>What do I exactly see, when using Wireframe True? When I use this on a CreateGrid(2,1) it looks like there are too many triangles? 4 small ones as I expected but also 2 big ones? If I CreateGrid(3,3) now it looks really confusing... <br><br></td></tr></table><br>
<a name="2056795"></a>

<a name="2056764"></a>

<a name="2056821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. SetRender() must be set first. Do it before any minib3d commands. OnCreate() is best.<br><br>2. it is normal. <br><br>3. wireframe connects everything in the buffer, so it's not entirely accurate. a render shader would improve this.<br><br><br>hopefully collision bugs will be done soon. just a little popping to smooth out. <br><br></td></tr></table><br>
<a name="2056901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> are shaders already to use? particulary normal maps? <br><br></td></tr></table><br>
<a name="2056934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm preparing the next chapter "Sprites" of minib3d tutorial and I'm not sure, whether I found the next bug:<br><br>I have a "tree.png"...<br><br><img src="http://www.blitzforum.de/upload/file.php?id=12431"><br>... and I want to use it as a sprite. But it seems, that it's color is influenced by the CameraClsColor. The tree look "blue":<br><br><pre class=code>	Method Init:Void()		
		If Started Then Return
		If Not TPixmap.PreLoadPixmap(["Tree.png"])	
			Return
		Endif
		Started = True		
		Camera = CreateCamera()
		Camera.CameraClsColor(0,0,111)
		Camera.MoveEntity 0,0,-2
		
		Cube= CreateCube()
		Cube.PositionEntity -0.5,-2.5,8

		Tree = LoadSprite("Tree.png",FXFLAG_FULLBRIGHT)
		Tree.PositionEntity 3,0,4
		Tree.SpriteViewMode 2

		Light=CreateLight(1)
		Light.MoveEntity -10,10,10
		Light.TurnEntity 35,-40,0
	End</pre><br><br><br>The second question is about those "TBatchSprites". When do I use them and why. And... is there any reason for using "old fashioned" sprites? <br><br></td></tr></table><br>
<a name="2056944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> are shaders already to use? particulary normal maps?  <br></div><br>yes, you can extend TShaderGLSL and create your own, then either SetDefaultShader(shader) or PaintEntity(shader).<br><br>normal maps should work (EntityFX 1024) but I haven't really tested it enough.<br><br><div class="quote"> But it seems, that it's color is influenced by the CameraClsColor. The tree look "blue" <br></div><br>change sprite blend to 0. i think it's "add" blend by default.<br><br><div class="quote"> The second question is about those "TBatchSprites". When do I use them and why. <br></div><br>Batch SPrites are great when you have a lot of sprites that are the same image. very fast. explosions, fire and such.<br><br>you'd use the regular tsprite for larger stuff that doesn't get drawn as much. "god ray" effects, etc. <br><br></td></tr></table><br>
<a name="2056945"></a>

<a name="2056946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> ****************************************<br>minib3d v0.35.1<br><br>- collision bug fixes<br>- added: New Brush(r,g,b)<br><br><br>So, i've sent some time on fixing collisions. thanks to everyone who sent in examples, i think collisions feel much better now. let me know otherwise. <br><br></td></tr></table><br>
<a name="2056952"></a>

<a name="2056953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> this seems not to be the solution... now the alpha channel is like "mask"<br><br>left side MiniB3D, right side png on blue background:<br><img src="http://www.blitzforum.de/upload/file.php?id=12432"> <br><br></td></tr></table><br>
<a name="2056954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> is that html5? i think i had a premultiplying alpha problem. <br><br></td></tr></table><br>
<a name="2056969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes html5, the tutorial target is always html5. "premultiplying alpha problem"???<br><br>"I had a..." or "It had a ..."?<br><br> <br><br>On android it looks ok, when I use:<br><pre class=code>		Tree = LoadSprite("tree.png",2)
		Tree.EntityBlend 0
</pre><br><br><br>During this test, I recognized that your TPixmap.PreLoadPixmap(["tree.png"]) in combination with Android (tested on 2.3) has a problem with case sensitive file names. The corrrect file name was "tree.png", but I asked for <br><br><pre class=code>TPixmap.PreLoadPixmap(["Tree.png"])</pre><br><br>and got this error:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
BUILD SUCCESSFUL
Total time: 24 seconds
--------- beginning of /dev/log/main
E/AndroidRuntime( 8852): feature code ==&gt; cannot open file
E/SensorManager( 8860): registerListener :: handle = 0  name= K2DM delay= 20000 Listener= com.monkey.BBMonkeyGame@40524e28
E/SensorManager( 8860): =======&gt;&gt;&gt;Sensor Thread RUNNING &lt;&lt;&lt;========
E/SensorManager( 8860): reg :: handle = 0
E/        ( 8860): Creating OpenGL 1.1 Session
I/[Monkey]( 8860): **OPENGL VERSION:1.1
I/[Monkey]( 8860): ..max textures:31
I/[Monkey]( 8860): Monkey Runtime Error : java.lang.NullPointerException
I/[Monkey]( 8860): C:/MonkeyPro69/modules/opengl/gles11.monkey&lt;706&gt;
I/[Monkey]( 8860): C:/MonkeyPro69/modules/minib3d/opengl/tpixmapgl.monkey&lt;333&gt;
I/[Monkey]( 8860): C:/MonkeyPro69/modules/minib3d/tpixmap.monkey&lt;198&gt;
I/[Monkey]( 8860): C:/MonkeyPro69/modules/minib3d/tpixmap.monkey&lt;46&gt;
I/[Monkey]( 8860): C:/Monkey/Test3D/Sprites.monkey&lt;32&gt;
I/[Monkey]( 8860): C:/Monkey/Test3D/Sprites.monkey&lt;52&gt;
I/[Monkey]( 8860): C:/MonkeyPro69/modules/mojo/app.monkey&lt;67&gt;
E/EGL_SERVER( 8860): pid mem_get_free_space before =  5fffa0
E/EGL_SERVER( 8860): pid mem_get_free_space =  5fffa0
--------- beginning of /dev/log/system
E/AndroidRuntime( 8860): FATAL EXCEPTION: GLThread 11
E/AndroidRuntime( 8860): java.lang.NullPointerException
E/AndroidRuntime( 8860): 	at com.monkey.BBAndroidGame.LoadBitmap(MonkeyGame.java:1137)
E/AndroidRuntime( 8860): 	at com.monkey.bb_opengl_gles11.LoadImageData(MonkeyGame.java:2577)
E/AndroidRuntime( 8860): 	at com.monkey.bb_gles11.g_LoadImageData(MonkeyGame.java:16386)
E/AndroidRuntime( 8860): 	at com.monkey.c_PreloadManager.p_PreLoadData(MonkeyGame.java:15470)
E/AndroidRuntime( 8860): 	at com.monkey.c_TPixmapPreloader.p_PreLoad(MonkeyGame.java:13439)
E/AndroidRuntime( 8860): 	at com.monkey.c_TPixmap.m_PreLoadPixmap(MonkeyGame.java:13313)
E/AndroidRuntime( 8860): 	at com.monkey.c_Game.p_Init(MonkeyGame.java:2755)
E/AndroidRuntime( 8860): 	at com.monkey.c_Game.p_OnRender(MonkeyGame.java:2782)
E/AndroidRuntime( 8860): 	at com.monkey.c_GameDelegate.RenderGame(MonkeyGame.java:2867)
E/AndroidRuntime( 8860): 	at com.monkey.BBGame.RenderGame(MonkeyGame.java:566)
E/AndroidRuntime( 8860): 	at com.monkey.BBAndroidGame.onDrawFrame(MonkeyGame.java:1246)
E/AndroidRuntime( 8860): 	at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1388)
E/AndroidRuntime( 8860): 	at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1138)
E/liblog  ( 1472): failed to call dumpstate
E/        ( 1472): Dumpstate &gt; /data/log/dumpstate_app_com_monkey_error
E/Launcher( 8570): setWindowOpaque()
E/AudioPolicyManager( 1345): Speaker Volume = 0.133352 , device = 2, stream = 1, index = 2
E/InputDispatcher( 1472): Received spurious receive callback for unknown input channel.  fd=259, events=0x1
E/Launcher( 8570): setWindowOpaque()
E/StatusBarPolicy( 1547): ecio: 41
E/StatusBarPolicy( 1547): iconLevel: 4
E/StatusBarPolicy( 1547): ecio: 41
E/StatusBarPolicy( 1547): iconLevel: 4
E/StatusBarPolicy( 1547): ecio: 41
E/StatusBarPolicy( 1547): iconLevel: 4</textarea><br><br>It was not necessary to LoadSprite() the image. Already the TPixmap.PreLoadPixmap[] was sufficent to get the error. <br><br></td></tr></table><br>
<a name="2057021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IceVAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam,<br><br>I still have problems with normals and flat shading.<br>You told me that I had to use the function unweldtriangles() but the normals ligthting keep failing.  Is as if the light "turning" with the object.<br><br><a href="http://www.monkeycoder.co.nz/Community/post.php?topic=4396&amp;post=51460" target="_blank">http://www.monkeycoder.co.nz/Community/post.php?topic=4396&amp;post=51460</a><br><br>I have made this function, and it works.<br><br><pre class=code>

Function NormalizeMesh(m:TMesh)

	' to fix float precision with small numbers
	ScaleMesh(m,10.0,10.0,10.0)

	For Local ns:Int = 1 To CountSurfaces(m)
		Local s:TSurface = GetSurface(m,ns)
		For Local t=1 To CountTriangles(s)

			Local v0:Int = TriangleVertex ( s,t,0 )
			Local v1:Int = TriangleVertex ( s,t,1 )
			Local v2:Int = TriangleVertex ( s,t,2 )
			
			Local xu:Float = VertexX(s,v1) - VertexX(s,v0)
			Local yu:Float = VertexY(s,v1) - VertexY(s,v0)
			Local zu:Float = VertexZ(s,v1) - VertexZ(s,v0)

			Local xv:Float = VertexX(s,v2) - VertexX(s,v0)
			Local yv:Float = VertexY(s,v2) - VertexY(s,v0)
			Local zv:Float = VertexZ(s,v2) - VertexZ(s,v0)

			Local xn:Float = (yu * zv) - (zu * yv)
			Local yn:Float = (zu * xv) - (xu * zv)
			Local zn:Float = (xu * yv) - (yu * xv)
			
			Local v:Float = 1.0 / Sqrt((xn * xn) + (yn * yn) + (zn * zn))
			
			Local xw:Float = v * xn
			Local yw:Float = v * yn
			Local zw:Float = v * zn
		
			VertexNormal(s, v0, xw,yw,zw)
			VertexNormal(s, v1, xw,yw,zw)
			VertexNormal(s, v2, xw,yw,zw)
			
		Next
	Next
	
	' back to original size
	ScaleMesh(m,0.1,0.1,0.1)
End

</pre> <br><br></td></tr></table><br>
<a name="2057028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> in Blender3D you can use the modifier "Edge Split" for hard edges. <br><br></td></tr></table><br>
<a name="2057046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> have i to do something to update the normals at runtime or does that the engine automatically? <br><br></td></tr></table><br>
<a name="2057080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> re: case sensitive filenames<br>yes, is an error too much? i can have it return an empty 1x1 texture.<br><br>re: premultiply html5<br>yes, it's the shader. i can try to get rid of the white fringe, i am just being slow because i'm working on win8 and flash11 simultaneously.<br><br>re:normals and flat shading<br>ok, i'll look into it. does UpdateNormals() not work? i'll have to check.<br><br>re: normals at runtime<br>No, if you LoadMesh() or CreateXXX() it should take care of normals for you... UNLESS your 3d app creates normals and exports them. then either B3D, OBJ, (or Collada) will pick this up and NOT create normals, otherwise create new normals.<br><br>See, it's difficult programatically to determine what people want with normals, so it's best to leave it up to you, but you should have the tools easily available. So I can make tools, but nothing should be "automatic". <br><br></td></tr></table><br>
<a name="2057085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> white fringe:<br><br>the white fringe is a general problem on the html5 target. if I create a texture of the tree and add it to a cube, it is the same problem. It is always a 1pix white border where the color changes to transparent. A workaround for the tutorial will now be to offer a "compact" tree with the shortest borderline...<br><br>Also it help, when the texture is bigger. A 512x512 texture has nearly no problems.<br><br>It sound like you don't have this problem on the other targets? So, there is no need to hurry with update because of me... Always I only want to inform you about bugs I recognized.<br><br><br><br><br>filenames:<br><br>So we can say, that it is important in MiniB3D to care about the case sensitivity of filenames? OK, then it is not a bug, but a feature. <br><br></td></tr></table><br>
<a name="2057082"></a>

<a name="2057092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> i mean the normal maps, not the polygon normals.<br><br>i try to get normal mapping:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import minib3d

Class Test Extends App
	Field normals:TTexture
	Field diffuse:TTexture
	Field obj:TMesh
	Field resReady:Bool
	Field cam:TCamera
	Field light:TLight
	
	Method Init:Int()
		If Self.resReady Return 0
		
		If Not TPixmap.PreLoadPixmap(["normals.png", "diffuse.png"]) Return 0
		
		Self.resReady	= True
		Self.obj		= LoadMesh("test.b3d")
		Self.cam		= CreateCamera()
		Self.light		= CreateLight(2)
		Self.normals	= LoadTexture("normals.png")
		Self.diffuse	= LoadTexture("diffuse.png")
		
		LightRange(Self.light, 20)
		EntityFX(obj, 1024)
		
		TextureBlend(Self.normals, 4)
		TextureBlend(Self.diffuse, 2)
		
		EntityTexture(Self.obj, Self.normals)
		EntityTexture(Self.obj, Self.diffuse, 0, 1)
		
		PositionEntity(cam, 0, 8, -8)
		PositionEntity(light, 0, 5, -5)
		
		PointEntity(cam, obj)
		
		
		Return 0
	End
	
	Method OnCreate:Int()
		Self.resReady	= False
		
		SetUpdateRate(30)
		SetRender()
		Return 0
	End
	
	Method OnUpdate:Int()
		If Not Self.resReady
			Self.Init()
			Return 0
		EndIf
		
		If KeyDown(KEY_W) TranslateEntity(light, 0, 0, 0.1)
		If KeyDown(KEY_S) TranslateEntity(light, 0, 0, -0.1)
		
		Return 0
	End
	
	Method OnRender:Int()
		RenderWorld()
		Return 0
	End
End

Function Main:Int()
	New Test()
	Return 0
End
</textarea> <br><br></td></tr></table><br>
<a name="2057099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IceVAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam<br>re:normals and flat shading<br>ok, i'll look into it. does UpdateNormals() not work? i'll have to check<br><br>Yes UpdateNormals() work but that smooth the mesh also in unweld models.<br>I made unweld in my 3D software to obtain independet triangles and then independent 3 vertex for each triangle. <br><br></td></tr></table><br>
<a name="2057112"></a>

<a name="2057113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>re: premultiply html5<br>yes, it's the shader. i can try to get rid of the white fringe, i am just being slow because i'm working on win8 and flash11 simultaneously.<br> <br></div><br><br>I think it's not the shader. I used the same texture blending equation in d3d11...<br>alpha is automatically pre-multiplied in webgl(like in xna). Therefore, blending needs to be adjusted as follows:<br><br><pre class=code>
' blend modes
Select blend
Case 0,1

#If TARGET&lt;&gt;"html5"
   glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA)
#else
   glEnable(GL_BLEND)
   glBlendFunc(GL_ONE,GL_ONE_MINUS_SRC_ALPHA) 
   glBlendFuncSeparate(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA, GL_ONE, GL_ONE_MINUS_SRC_ALPHA)
#End 
...
</pre><br><img src="http://s14.directupload.net/images/130508/akm9lsdh.jpg"><br><br><br>I guess glfw and xna are still not quite right. Since alpha fringes should be visible, at least in glfw ... and both look comparatively bad ... <br><br></td></tr></table><br>
<a name="2057100"></a>

<a name="2057102"></a>

<a name="2057103"></a>

<a name="2057104"></a>

<a name="2057105"></a>

<a name="2057106"></a>

<a name="2057107"></a>

<a name="2057108"></a>

<a name="2057109"></a>

<a name="2057119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow! perfect! I changed your workaround in "opengles20.monkey" and it looks perfect. I'm impressed! <br><br></td></tr></table><br>
<a name="2057120"></a>

<a name="2057121"></a>

<a name="2057125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.khronos.org/registry/webgl/specs/latest/#WEBGLCONTEXTATTRIBUTES" target="_blank">http://www.khronos.org/registry/webgl/specs/latest/#WEBGLCONTEXTATTRIBUTES</a><br><br>Yup, thanks for finding that Rone!<br>So I wonder if we should have a pre-multiplied alpha blend mode? I think XNA is using premultiply.<br><br><div class="quote"> and both look comparatively bad ...  <br></div><br>yes, it seems my resizing algorithm (bilinear) is terrible. if we change this one line to detect an enlarge for any direction, then it improves somewhat.<br>in opengles11/tpixmapgl.monkey (and xna/xna_pixmap.monkey)<br><pre class=code>
If ratiow&lt;1.0 or ratioh&lt;1.0 Then enlarge = 1</pre><br><br>ALL textures are resized to the nearest powers-of-two, unless its already the correct size or uses the texture flag TEXFLAG_PRESERVE_SIZE. <br><br></td></tr></table><br>
<a name="2057129"></a>

<a name="2057132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> p.s. i think we will see this premultiply problem arise for non-html5 if i use a gbuffer FBO or shadows (transparent sprite casting shadow). <br><br></td></tr></table><br>
<a name="2057159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>So I wonder if we should have a pre-multiplied alpha blend mode?<br> <br></div><br>I think that makes sense. <br>Sprites can enable it automatically<br><br><pre class=code>
If tex.flags&amp;2=0 And tex.flags&amp;4=0
	sprite.EntityBlend 3
ElseIf tex_flags&amp;2
        sprite.EntityBlend(BLEND_PREMULTIPLIED)
End 
</pre><br><br><div class="quote"> <br>yes, it seems my resizing algorithm (bilinear) is terrible.<br> <br></div><br>This also explains the blurry textures with mipmaps ... I have not looked at your scaling algorithm, but this here draws less soft and also produces fewer artifacts...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Method PixelR(rgba:Int)
		Return rgba &amp; $000000ff
	End 
	
	Method PixelG(rgba:Int)
		Return (rgba &amp; $0000ff00 ) Shr 8
	End 
	
	Method PixelB(rgba:Int)
		Return (rgba &amp; $00ff0000) Shr 16
	End 
	
	Method PixelA(rgba:Int)
		Return (rgba &amp; $ff000000) Shr 24
	End 
	
	
	Method ResizePixmap:TPixmap(neww:Int, newh:Int)
	
		''simple average 4pixel
		''softer
		Local enlarge:Int=0
		
		If width =0 Or height =0 Or neww=0 Or newh=0 Then Return CreatePixmap(0,0)
		
		Local ratiow:Float = width/Float(neww)
		Local ratioh:Float = height/Float(newh)
		
		If ratiow&lt;1.0 Or ratioh&lt;1.0 Then enlarge = 1
		Local newpix:TPixmapXNA = TPixmapXNA(CreatePixmap(neww, newh))
		
		Local rgb:Int[5]
		For Local iy = 0 Until newh
			For Local ix = 0 Until neww
			
				Local fx# = Float(ix) * ratiow
				Local fy# = Float(iy) * ratioh
				
				Local x = Int(fx)
				Local y = Int(fy)
				
				''ints faster than bytes
				rgb[0] = GetPixel(x,y) 
				rgb[1] = GetPixel(x+1,y)
				rgb[2] = GetPixel(x,y+1)
				rgb[3] = GetPixel(x+1,y+1)
				
				local dx = int((fx - x) * 16.0)
				local dy = Int((fy - y) * 16.0)
				
				
				Local y1 = PixelR(rgb[0]) + int(dx * (PixelR(rgb[1]) - PixelR(rgb[0]))) / 16;
				Local y2 = PixelR(rgb[2]) + int(dx * (PixelR(rgb[3]) - PixelR(rgb[2]))) / 16;
				Local r = y1 + Int(dy * (y2 - y1)) / 16;
				
				y1 = PixelG(rgb[0]) + int(dx * (PixelG(rgb[1]) - PixelG(rgb[0]))) / 16;
				y2 = PixelG(rgb[2]) + int(dx * (PixelG(rgb[3]) - PixelG(rgb[2]))) / 16;
				Local g = y1 + Int(dy * (y2 - y1)) / 16;
				
				y1 = PixelB(rgb[0]) + int(dx * (PixelB(rgb[1]) - PixelB(rgb[0]))) / 16;
				y2 = PixelB(rgb[2]) + int(dx * (PixelB(rgb[3]) - PixelB(rgb[2]))) / 16;
				Local b = y1 + Int(dy * (y2 - y1)) / 16;
				
				y1 = PixelA(rgb[0]) + int(dx * (PixelA(rgb[1]) - PixelA(rgb[0]))) / 16;
				y2 = PixelA(rgb[2]) + int(dx * (PixelA(rgb[3]) - PixelA(rgb[2]))) / 16;
				Local a = y1 + Int(dy * (y2 - y1)) / 16;
		
				newpix.SetPixel(ix,iy,r,g,b,a)
				
			Next 
		Next 
		
		Return newpix
	End
</textarea><br><br>I did not check the borders, but it seems to provide acceptable results.<br>'PixelX(..)' &amp; '.SetPixel' should be in-lined...apart from that it's pretty optimized(using fixed point math)<br><br>Here is also the sharpening filter I used for sharpening smaller mip levels... makes everything much crisper(anisotropic filtering is disabled by default)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Global mask:Int[] = [-1,-1,-1,
					-1,17,-1,
					-1,-1,-1]	
				
Function Clip%(val%)
	If val &gt; 255 Then 
		val = 255
	Else If val &lt; 0 Then 
		val = 0
	End 
	Return val
Function 	

Function UnsharpMask(src:TPixmap, dst:TPixmap)

	Local width:= src.width
	Local height:= src.height
	Local stride:= src.pitch*4
	
	Local srcPixels:= src.pixels
	
	For Local y = 0 Until height 
	
		For Local x = 0 Until width
		
			Local src_rgb:= src.GetPixel(x, y)
			Local src_red 	= (src_rgb &amp; $000000ff )
			Local src_green = (src_rgb &amp; $0000ff00 ) Shr 8
			Local src_blue 	= (src_rgb &amp; $00ff0000 ) Shr 16
			Local src_alpha = (src_rgb &amp; $ff000000 ) Shr 24
			Local src_mono = 0.299*src_red + 0.587*src_green + 0.114*src_blue
				
			If x &lt; 2 Or y &lt; 2 Or x &gt;= width -2 Or y &gt;= height -2

				dst.SetPixel(x,y, src_red,src_green, src_blue, src_alpha)
			
			Else
			
				Local r = 0, g = 0, b = 0

				For Local iy = -1 To 1
					For Local ix = -1 To 1
						Local rgb:= src.GetPixel(ix+x, iy+y)
						Local red 	= (rgb &amp; $000000ff )
						Local green = (rgb &amp; $0000ff00 ) Shr 8
						Local blue 	= (rgb &amp; $00ff0000 ) Shr 16
						b += (mask[(iy + 1) * 3 + ix + 1] * blue);
	                    g += (mask[(iy + 1) * 3 + ix + 1] * green);
	                    r += (mask[(iy + 1) * 3 + ix + 1] * red);
					End 
				End 

				r = Clip(r/9)
				g = Clip(g/9)
				b = Clip(b/9)

				If Abs((0.299*r + 0.587*g + 0.114*b) - src_mono) &lt; 4 Then 
					dst.SetPixel(x,y, src_red,src_green, src_blue, src_alpha)
				else 
					dst.SetPixel(x,y,r,g,b,src_alpha)
				End 
				
			End
			
		End
	End 
	
	Return dst
End 
</textarea> <br><br></td></tr></table><br>
<a name="2057155"></a>

<a name="2057154"></a>

<a name="2057152"></a>

<a name="2057151"></a>

<a name="2057150"></a>

<a name="2057148"></a>

<a name="2057149"></a>

<a name="2057161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks good, i think that's a nearest neighbor algorithm. After I weighted my bilinear, it started to look the same.<br><br>Here's a bit-math optimized:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Local dx% = Int(Int(fx - x) Shl 16)
				Local dy% = Int(Int(fy - y) Shl 16)
				
				
				Local y1 = (rgb[0]&amp; $000000ff) + Int(dx * ((rgb[1]&amp; $000000ff) - (rgb[0]&amp; $000000ff))) Shr 4;
				Local y2 = (rgb[2]&amp; $000000ff) + Int(dx * ((rgb[3]&amp; $000000ff) - (rgb[2]&amp; $000000ff))) Shr 4;
				Local r = y1 + Int(dy * (y2 - y1)) Shr 4;
				
				y1 = ((rgb[0] &amp; $0000ff00)Shr 8) + Int(dx * (((rgb[1] &amp; $0000ff00)Shr 8) - (rgb[0] &amp; $0000ff00)Shr 8))  Shr 4;
				y2 = ((rgb[2] &amp; $0000ff00)Shr 8) + Int(dx * (((rgb[3] &amp; $0000ff00)Shr 8) - (rgb[2] &amp; $0000ff00)Shr 8))  Shr 4;
				Local g = y1 + Int(dy * (y2 - y1)) Shr 4;
				
				y1 = ((rgb[0] &amp; $00ff0000)Shr 16) + Int(dx * (((rgb[1] &amp; $00ff0000)Shr 16) - (rgb[0] &amp; $00ff0000)Shr 16))  Shr 4;
				y2 = ((rgb[2] &amp; $00ff0000)Shr 16) + Int(dx * (((rgb[3] &amp; $00ff0000)Shr 16) - (rgb[2] &amp; $00ff0000)Shr 16))  Shr 4;
				Local b = y1 + Int(dy * (y2 - y1)) Shr 4;
				
				y1 = ((rgb[0] &amp; $ff000000)Shr 24) + Int(dx * (((rgb[1] &amp; $ff000000)Shr 24) - (rgb[0] &amp; $ff000000)Shr 24)) Shr 4;
				y2 = ((rgb[2] &amp; $ff000000)Shr 24) + Int(dx * (((rgb[3] &amp; $ff000000)Shr 24) - (rgb[2] &amp; $ff000000)Shr 24)) Shr 4;
				Local a = y1 + Int(dy * (y2 - y1)) Shr 4;
		
				'newpix.SetPixel(ix,iy,r,g,b,a)
				newpix.pixels.PokeInt( (ix Shl 2)+iy*(neww Shl 2), r|g Shl 8|b Shl 16|a Shl 24 )</textarea><br>I'll probably put this in after I test it on Android. <br><br></td></tr></table><br>
<a name="2057163"></a>

<a name="2057164"></a>

<a name="2057165"></a>

<a name="2057166"></a>

<a name="2057167"></a>

<a name="2057169"></a>

<a name="2057170"></a>

<a name="2057171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool!<br>It's also bilinear.<br><br>Edit:<br><pre class=code>
Local dx% = Int(Int(fx - x) Shl 4)
Local dy% = Int(Int(fy - y) Shl 4)
</pre><br>btw: <br>I think every compiler will do this shifting automatically if necessary. So it's just obfuscating, using a division will make the code clearer <br><br></td></tr></table><br>
<a name="2057179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I think every compiler will do this shifting automatically if necessary. <br></div><br>i've always wondered about this and i know its a bad habit of mine, but with android being so slow i get worried about basic math functions on pre-Android 3.0. you're probably right that basic integer math will have no effect. i'll profile it anyways. <br><br></td></tr></table><br>
<a name="2057275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'fx - x' needs to be multiplied with 16.0, instead of dividing<br>also first multiply, then cast...<br><pre class=code>
Local dx = Int((fx - x) * 16.0)
Local dy = Int((fy - y) * 16.0)
</pre><br><br>just for completeness, here is my original Y800 c++ implementation.<br><br><pre class=code>
// this could be unrolled
/*
for (int r = 0; r &lt; 2; r++)
{
	for (int c = 0; c &lt; 2; c++)
	{
		int index = (y + r ) * imgWidth + (x + c );
		FilterdData[r * 2 + c] = *(pIn + index);
	}
}
*/

int index = (y) * imgWidth + (x);
FilterdData[0] = *(pIn + index);
FilterdData[1] = *(pIn + index+1);
index = (y + 1) * imgWidth + (x);
FilterdData[2] = *(pIn + index);
FilterdData[3] = *(pIn + index+1);


int dx = (int)((fx - x) * 16.0f);
int dy = (int)((fy - y) * 16.0f);

int y1 = FilterdData[0] + (int)(dx * (FilterdData[1] - FilterdData[0])) / 16;
int y2 = FilterdData[2] + (int)(dx * (FilterdData[3] - FilterdData[2])) / 16;

int filteredPixel = y1 + (int)(dy * (y2 - y1)) / 16;

//float dx = (fx - x);
//float dy = (fy - y);

//int y1 = FilterdData[0] + (int)(dx * (FilterdData[1] - FilterdData[0]));
//int y2 = FilterdData[2] + (int)(dx * (FilterdData[3] - FilterdData[2]));

//int filteredPixel = y1 + (int)(dy * (y2 - y1));
</pre> <br><br></td></tr></table><br>
<a name="2057274"></a>

<a name="2057273"></a>

<a name="2057272"></a>

<a name="2057271"></a>

<a name="2057270"></a>

<a name="2057268"></a>

<a name="2057269"></a>

<a name="2057264"></a>

<a name="2057265"></a>

<a name="2057266"></a>

<a name="2057267"></a>

<a name="2057307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikele</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ouch!<br>Yesterday I updated Monkey to ver. 0.70e and miniB3D to the latest ver from GitHub and I can't compile firepaint and animation demos (GFLW)<br><br>This is a log (some messages are in Polish - sorry for this):<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
"E:/Programs/MonkeyPro/bin/transcc_winnt" -target=Glfw_Game -config=Debug -run "E:/Programs/MonkeyPro/modules/minib3d/examples/firepaint3d.monkey"
TRANS monkey compiler V1.47
Parsing...
miniB3D opengl11
Semanting...
Translating...
Building...
Microsoft (R) Build Engine w wersji 4.0.30319.17929
[Microsoft .NET Framework w wersji 4.0.30319.18033]
Copyright (C) Microsoft Corporation. Wszelkie prawa zastrze&amp;#190;one.

Projekty w tym rozwi&amp;#165;zaniu s&amp;#165; tworzone po kolei. Abu umo&amp;#190;liwi tworzenie r&amp;#162;wnolege, dodaj prze&amp;#165;cznik "/m".
Kompilacja rozpocz&amp;#169;a si&amp;#169; 2013-05-12 09:37:43.
Projekt "E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.sln" w w&amp;#169;&amp;#171;le 1 (domylne elementy docelowe).
ValidateSolutionConfiguration:
  Tworzenie konfiguracji rozwi&amp;#165;zania "Debug|Win32".
Projekt "E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.sln" (1) kompiluje "E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj" (2) w w&amp;#169;&amp;#171;le 1 (domylne elementy docelowe).
InitializeBuildStatus:
  Modyfikowanie "E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\build\Debug\MonkeyGame.unsuccessfulbuild".
ClCompile:
  Wszystkie dane wyjciowe s&amp;#165; aktualne.
  C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\CL.exe /c /I"../bdwgc/libatomic_ops-1.2/src" /I../bdwgc/include /I../stb /I../openal/include /I../glfw/include /I../glfw/lib /I../glfw/lib/win32 /Zi /nologo /W0 /WX- /Od /Oy- /D WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /Gm /EHa /MTd /GS /Gy- /fp:precise /Zc:wchar_t /Zc:forScope /Fo"E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\build\Debug\\" /Fd"E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\build\Debug\vc100.pdb" /Gd /TP /analyze- /errorReport:queue ..\main.cpp /bigobj 
  main.cpp
..\main.cpp(1644): error C3861: 'time': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(1649): error C3861: 'localtime_s': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22580): error C2084: function 'const char *readTag(FILE *)' already has a body [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          ..\main.cpp(1917) : see previous definition of 'readTag'
..\main.cpp(22587): error C2084: function 'int readInt(FILE *)' already has a body [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          ..\main.cpp(1924) : see previous definition of 'readInt'
..\main.cpp(22593): error C2084: function 'int readShort(FILE *)' already has a body [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          ..\main.cpp(1930) : see previous definition of 'readShort'
..\main.cpp(22599): error C2084: function 'void skipBytes(int,FILE *)' already has a body [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          ..\main.cpp(1936) : see previous definition of 'skipBytes'
..\main.cpp(22608): error C3861: 'readTag': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22609): error C2296: '-' : illegal, left operand has type 'int (__cdecl *)(FILE *)' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22609): error C3861: 'readInt': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22610): error C3861: 'readTag': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22611): error C3861: 'readTag': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22612): error C3861: 'readInt': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22612): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          There is no context in which this conversion is possible
..\main.cpp(22613): error C3861: 'readShort': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22613): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          There is no context in which this conversion is possible
..\main.cpp(22615): error C3861: 'readShort': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22615): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          There is no context in which this conversion is possible
..\main.cpp(22616): error C3861: 'readInt': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22616): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          There is no context in which this conversion is possible
..\main.cpp(22617): error C3861: 'readInt': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22617): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          There is no context in which this conversion is possible
..\main.cpp(22618): error C3861: 'readShort': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22618): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          There is no context in which this conversion is possible
..\main.cpp(22619): error C3861: 'readShort': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22619): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          There is no context in which this conversion is possible
..\main.cpp(22621): error C3861: 'skipBytes': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22623): error C3861: 'readTag': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22623): error C2440: 'initializing' : cannot convert from 'const char *(__cdecl *)(FILE *)' to 'const char *' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          There is no context in which this conversion is possible
..\main.cpp(22625): error C3861: 'readInt': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
..\main.cpp(22625): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
          There is no context in which this conversion is possible
..\main.cpp(22627): error C3861: 'skipBytes': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
Kompilowanie projektu "E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj" wykonane (domylne elementy docelowe) - NIEPOWODZENIE.
Kompilowanie projektu "E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.sln" wykonane (domylne elementy docelowe) - NIEPOWODZENIE.

Kompilacja NIE POWIODA SI¨.

"E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.sln" (domylny element docelowy) (1)-&gt;
"E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj" (domylny element docelowy) (2)-&gt;
(element docelowy ClCompile) -&gt; 
  ..\main.cpp(1644): error C3861: 'time': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(1649): error C3861: 'localtime_s': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22580): error C2084: function 'const char *readTag(FILE *)' already has a body [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22587): error C2084: function 'int readInt(FILE *)' already has a body [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22593): error C2084: function 'int readShort(FILE *)' already has a body [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22599): error C2084: function 'void skipBytes(int,FILE *)' already has a body [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22608): error C3861: 'readTag': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22609): error C2296: '-' : illegal, left operand has type 'int (__cdecl *)(FILE *)' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22609): error C3861: 'readInt': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22610): error C3861: 'readTag': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22611): error C3861: 'readTag': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22612): error C3861: 'readInt': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22612): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22613): error C3861: 'readShort': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22613): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22615): error C3861: 'readShort': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22615): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22616): error C3861: 'readInt': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22616): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22617): error C3861: 'readInt': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22617): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22618): error C3861: 'readShort': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22618): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22619): error C3861: 'readShort': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22619): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22621): error C3861: 'skipBytes': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22623): error C3861: 'readTag': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22623): error C2440: 'initializing' : cannot convert from 'const char *(__cdecl *)(FILE *)' to 'const char *' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22625): error C3861: 'readInt': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22625): error C2440: 'initializing' : cannot convert from 'int (__cdecl *)(FILE *)' to 'int' [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]
  ..\main.cpp(22627): error C3861: 'skipBytes': identifier not found [E:\Programs\MonkeyPro\modules\minib3d\examples\firepaint3d.build\glfw\vc2010\MonkeyGame.vcxproj]

    Ostrze&amp;#190;enia: 0
    Liczba b&amp;#169;d&amp;#162;w: 31

Czas, kt&amp;#162;ry upyn&amp;#165;: 00:00:01.41
TRANS FAILED: Error executing 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe /p:Configuration=Debug /p:Platform=Win32 MonkeyGame.sln', return code=1
Done.
</textarea><br><br> - when I try to compile to HTML target I have  a message:<br><div class="quote"> <br>Monkey Runtime Error : TypeError: Cannot call method 'SetDelegate' of undefinedE:/Programs/MonkeyPro/modules/mojo/app.monkey&lt;113&gt;E:/Programs/MonkeyPro/modules/minib3d/examples/animation_test.monkey&lt;11&gt;E:/Programs/MonkeyPro/modules/minib3d/examples/animation_test.monkey&lt;8&gt;<br> <br></div><br><br>Should I update some tools or set some their properties? I reverted Monkey to v0.69 but still have the same problem. Any suggestion? <br><br></td></tr></table><br>
<a name="2057308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> did you delete the previous ".build" folder? <br><br></td></tr></table><br>
<a name="2057314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikele</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah ok!  I've forgot about that. Mea culpa!<br>Yes. Now it seems to be ok.<br>Thank you! <br><br></td></tr></table><br>
<a name="2057319"></a>

<a name="2057320"></a>

<a name="2057322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> did a little bit of google research and got it to compile on linux<br><br>go into:<br><br>Monkey/targets/glfw/template/<br><br><br>make sure the line in the makefile looks like this<br><br><br>LDLIBS=-lGL -lopenal -lX11 -lpthread -lrt<br><br>and at the top of main.cpp add this:<br>#define GL_GLEXT_PROTOTYPES<br><br>tested firepaint and it works! <br><br></td></tr></table><br>
<a name="2057324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> LDLIBS=-lGL -lopenal -lX11 -lpthread -lrt<br><br>and at the top of main.cpp add this:<br>#define GL_GLEXT_PROTOTYPES <br></div><br>great! perhaps we should try to get this in monkey proper. <br><br></td></tr></table><br>
<a name="2057412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Z-Order</b><br><br><br>For the next chapter of the tutorial I'm testing "TBatchSprites" against normal sprites. With this code I recognized that there is a Z-Order problem if I use the BatchSprites:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Strict
Import mojo
Import minib3d

Class TreePos
	Global Liste:List&lt;TreePos&gt; = New List&lt;TreePos&gt;
	Field X#,Y# 
	
	
	
	Function AddOne%(X#,Y#)
		Local dist#
		Local loc:TreePos=New TreePos
		For Local All:TreePos =Eachin Liste
			dist=(X-All.X)*(X-All.X)+(Y-All.Y)*(Y-All.Y)
			If dist&lt;.75 Return False
		Next
		loc.X=X
		loc.Y=Y
		Liste.AddLast loc 
		Return TRUE
	End
End

Class Game Extends App
	
	Field Camera:TCamera
	Field Light:TLight
	Field Cube:TMesh, Floor:TMesh
	Field Tree:TSprite
	Field Started:Bool,	Third#


	Method OnCreate%()
		SetUpdateRate 15
		SetRender()		
		Third=DeviceWidth()/3
		Return 0
	End


	Method OnUpdate%()
		If KeyHit(KEY_CLOSE) Or KeyHit(KEY_ESCAPE) Then Error ""
		If Not Started Then Return 0
		Cube.TurnEntity 0,1,0
		MovingCamera
		
		UpdateWorld()
		Return 0
	End

	
	Method Init:Void()		
		If Started Then Return
		If Not TPixmap.PreLoadPixmap(["tree.png"])	
			Return
		Endif
		Started = True		
		Camera = CreateCamera()
		Camera.CameraClsColor 235,235,255
		Camera.CameraFogRange 5,50
		Camera.CameraFogMode 1
		Camera.CameraFogColor 235,235,255
		Camera.MoveEntity 0,10,-0
		

		Floor=CreateGrid(15,15)
		Floor.ScaleEntity 10,1,10 
		Floor.PositionEntity -2,0,8
		Floor.EntityColor 55,195,55

		Cube= CreateCube()
		Cube.PositionEntity -0.5,-2.5,4
		
		TBatchSprite.LoadBatchTexture("tree.png",2)

		'Tree = LoadSprite("tree.png",2)
		'Tree.PositionEntity 0,0,-10
		'Tree.EntityBlend 1
		
		For Local i%=0 To 600

			Local locTree:TEntity = TBatchSprite.CreateSprite( )
			locTree.EntityBlend 1
			ShowEntity locTree

			'Local locTree:TEntity = CopyEntity(Tree)
			Local YScale#=Rnd(.3,1.5)
			Local x#,y#
			Repeat
				x=Rnd(30)
				y=Rnd(30)
			Until TreePos.AddOne(x,y)=True
			locTree.PositionEntity x,YScale,y
			locTree.ScaleEntity Rnd(0.3,1),YScale,1
			locTree.EntityColor Rnd(0,255),Rnd(230,255),Rnd(150,205)
		Next
		
		Light=CreateLight(1)
		Light.MoveEntity -10,10,10
		Light.TurnEntity 35,-40,0
	End


	Method OnRender%()
		Local Zeit%=Millisecs()
		Init()
		If Not Started Then Return 0
		RenderWorld()
		Print  -Zeit+Millisecs()
		Return 0
	End
	
	
	Method MovingCamera:Void()
		Local X#=TouchX(), Y#=TouchY()
		If X=0 Then X=DeviceWidth()/2
		If Y=0 Then Y=DeviceHeight()/2
		Third=DeviceWidth()/3
		Camera.MoveEntity 0,0,.06
		Local f#=Third
		If X&lt;Third
			f=2*(f-X)/f
			Camera.TurnEntity 0,f,0
		Elseif X&gt;2*Third
			f=2*(2*f-X)/f
			Camera.TurnEntity 0,f,0
		Endif
			
		Third=DeviceHeight()/3
		f=Third
		If Y&lt;Third
			f=(f-Y)/f
			Camera.TurnEntity -f,0,0
		Elseif X&gt;2*Third
			f=(2*f-Y)/f
			Camera.TurnEntity -f,0,0
		Endif	
	End
End



Function Main%()
	New Game
	Return 0
End</textarea> <br><br>If you fly a circle closed over the tree tops, you can see that smalls trees far away are drawn at last. The "tree"-texture is the same like in post #81<br><br><br><b>Second problem:</b><br><br>Your sample firepaint3d" now seems to show black rectangles around the firework circles. I don't know whether is began only now after this bugfix:<br><pre class=code>   glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA)
</pre><br><br><br><br><b>Bug or Feature?</b><br><br>If you call EntityYaw(Camera) and you turn and turn and turn you will get values &gt;360° and also &lt;-360°. Shouldn't the function return values between -180° to +180° like in B3D? <br><br></td></tr></table><br>
<a name="2057388"></a>

<a name="2057387"></a>

<a name="2057385"></a>

<a name="2057429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re: Z-ORDER<br><br>i realized that this may be a problem way back. because the GPU draws quads for sprites, it is a challenge to deal with them. two choices:<br>1. sort the TBatchSprite<br>-- this is too computationally heavily, IMO.<br>2. use GL_ALPHA_TEST<br>-- makes sprites look "chunky" because it is a all-or-nothing check for alpha. this can be "sortof" fixed by using two passes. it will still look chunky.<br>-- i haven't implemented this in the OpenGLES2 shader yet, so probably should up the priority of this.<br><br>Unity explains this z-ordering challenge here:<br><a href="http://docs.unity3d.com/Documentation/Components/SL-AlphaTest.html" target="_blank">http://docs.unity3d.com/Documentation/Components/SL-AlphaTest.html</a> <br><br></td></tr></table><br>
<a name="2057434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Your sample "firepaint3d" now seems to show black rectangles around the firework circles <br></div><br><strike>yes, this is caused by the new EntityBlend 0, which is default premultiply. use EntityBlend 1 to fix.<br>I think i need to add "spark.BatchSpriteEntity().EntityBlend(1)"</strike><br>no, let me think about that.<br><br><div class="quote"> If you call EntityYaw(Camera) and you turn and turn and turn you will get values &gt;360° and also &lt;-360°. Shouldn't the function return values between -180° to +180° like in B3D?  <br></div><br>huh, i never knew. i guess it's a vote. i can adjust the values internally or it can be done manually if it's not really needed. <br><br></td></tr></table><br>
<a name="2057430"></a>

<a name="2057431"></a>

<a name="2057432"></a>

<a name="2057469"></a>

<a name="2057470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bram</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> On my MacBook Pro, running 10.6.8, HTML5+Chrome, I get the following error:<br>*glerror: 1286<br>*glDrawElements<br>When running a Flash export, the screen remains blue, except for the 'firepaint' demo which gives this error: flash11.monkey&lt;60&gt; : Error : Can't create instance of class FlashMiniB3D due to abstract method Method TRender.UpdateVBO:Int(Local surface:TSurface).<br>Any ideas what it could be? <br><br></td></tr></table><br>
<a name="2057478"></a>

<a name="2057479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> On my MacBook Pro, running 10.6.8, HTML5+Chrome, I get the following error <br></div><br>is this on a specific example? may not be preloading the texture.<br><br><div class="quote"> When running a Flash export <br></div><br>Flash isn't entirely there yet, i'm still writing the AGAL shaders. <br><br></td></tr></table><br>
<a name="2057595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> v0.36<br>- alpha testing for opengles2.0<br>- blending bug fixes<br>- BrushColor(r,g,b,a), New Brush(r,g,b,a);  alpha is now optional<br><br>todo: add alpha testing for xna <br><br></td></tr></table><br>
<a name="2057598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> so, the "flying through trees" TBatchSprite should work when the LoadTexture() of the trees is loaded with "flags|4". <br><br></td></tr></table><br>
<a name="2057596"></a>

<a name="2057597"></a>

<a name="2057806"></a>

<a name="2057809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> ****************************************<br>minib3d v0.36.1<br>- some bug fixes, alpha testing all targets<br><br><br><br>Some familiar faces... not on this update, but showing progress:<br><a href="http://www.twopisoftware.com/monkeycoder/zombies/flash/MonkeyGame.html" target="_blank">http://www.twopisoftware.com/monkeycoder/zombies/flash/MonkeyGame.html</a><br>(runs on IE w/flash11) <br><br></td></tr></table><br>
<a name="2057817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> wewt <br><br></td></tr></table><br>
<a name="2058430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> ****************************************<br>minib3d v0.37<br><br>- unified EffectState: internal change that simplifies the current render state for all targets<br><br>this fixes some bugs, but overall should not effect any external code.<br>...and updated Flash target to an alpha stage, if anyone wants to play with it. only one point light and no multi-textures. <br><br></td></tr></table><br>
<a name="2058475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! This is becoming very powerful, thanks to you! :) <br><br></td></tr></table><br>
<a name="2058684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone tried async loading for meshes and textures yet? And if so, how is it done? I know the loaders for sound and images already... <br><br></td></tr></table><br>
<a name="2058698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> flash target works, awesome! <br><br></td></tr></table><br>
<a name="2058774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Has anyone tried async loading for meshes and textures yet? And if so, how is it done? <br></div><br>well, textures would be the same for images, using the TPixmap.PreLoadPixmap routines.<br><br>for meshes and text files, you'd have to use base64 (for binary) and use a custom loader. i think i've enabled all loaders to use existing strings/buffers in memory using ParseB3D, ParseObj, ParseMDD. <br><br></td></tr></table><br>
<a name="2059753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> To learn how to use "MiniB3D for Monkey" I want to continue writing my tutorial: Load a *.b3d file with LoadMesh() and display it.<br><br>At first I build a sample code in old Blitz3D and it worked perfect. Now I converted this to monkey, but it does not work.<br><br>Do I have to prepare some additional changes? <br><br>I recognized, that I have to change the config.monkey to get also the *.b3d file copied to the data folder.<br><br>Now I can already see the 3D model, but the surface is black. The textures are there and preloaded...<br><br>The model is a landscape made by ALE with 6 textures as '.jpg  and a lightmap as *.png<br><br>What do I do wrong? <br><br></td></tr></table><br>
<a name="2059752"></a>

<a name="2059750"></a>

<a name="2059780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sionco</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi. I've just started to play with this, and I'm having fun, thanks for your work!<br><br>I have a problem and also a question:<br><br>1. I have a problem with sprites, when I use the following code in the init method as suggested, and press compile for flash everything works fine.<br><pre class=code>
If Not TPixmap.PreLoadPixmap(["target.png"])
Return
End
</pre><br>However, when I try and open the MonkeyGame.html or MonkeyGame.swf externally through the file browser or using the web browser the 3D doesn't start, I just get a white screen.<br><br>I know there's something definitely wrong with this (or my code), as when I remove the code and try to open the game again externally from monkey, the game runs ok, even though it doesn't load image and displays a black image in it's place as expected.  <br><br>2. I've tried using miniB3D on Android and everything works, has anyone made any games with Monkey and miniB3D? is it ready?<br><br><br>Ps<br>@Midimaster,<br>Love the tutorials, very helpful! I can't wait for more. <br><br></td></tr></table><br>
<a name="2059809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re:<div class="quote"> The model is a landscape made by ALE with 6 textures as '.jpg and a lightmap as *.png <br></div><br>i think i allow max 4 textures for the HTML5 shader, although it shouldn't be black. check the output to see if there are "file not found" errors.<br>you can debug for textures in a surface by:<br><pre class=code>
For local i:int=0 to myMesh.CountSurfaces()-1
  For local j:int = 0 to 7
    local tex:TTexture= myMesh.GetSurface(i).Brush().GetTexture(j)
    if (tex) Print tex.file
  Next
Next
</pre><br><br><br>Re:<br><div class="quote"> However, when I try and open the MonkeyGame.html or MonkeyGame.swf externally through the file browser or using the web browser the 3D doesn't start, I just get a white screen. <br></div><br>yes, this is because in flash or html5 you can only allow remote files to be loaded. this is a common security model for the internet.<br><br>to get SWF to run locally, you need to add a different flag either in the code or in the html code that calls the &lt;object&gt;:<br><pre class=code>&lt;cross-domain-policy&gt; 
&lt;allow-access-from domain="*" /&gt; 
&lt;/cross-domain-policy&gt;
</pre><br>i forget if this works or you need to add it in the code as well. if so, you can do that by using an Extern in monkey. <br><br></td></tr></table><br>
<a name="2059812"></a>

<a name="2059813"></a>

<a name="2059814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, I add your code and additional I added a sprite to display one of the textures.<br><br>There are no "file not found messages" nor other messages. The texture is pre-loaded, because I can see it on the sprite<br><br>But if I use your check code the app crashs:<br><br><pre class=code>Method OnUpdate%()
	If KeyHit(KEY_CLOSE) Or KeyHit(KEY_ESCAPE) Then Error ""
	If Not Started Then Return 0
	Cube.TurnEntity 0,1,0
		
	If KeyHit(KEY_1)
		Print "Textures"
		For local i:int=0 to Cube.CountSurfaces()-1
			Print "Surface " + i
			For local j:int = 0 to 7
				Print "Texture " + j
		    		Local tex:TTexture= Cube.GetSurface(i).Brush().GetTexture(j)
				Print "check " + j
			    	If (tex) Print tex.file
			Next
		Print "----------"
		Next
	Endif
		
	UpdateWorld()
	Return 0
End</pre><br><br>it crashs on the line <br><br><pre class=code>Local tex:TTexture= Cube.GetSurface(i).Brush().GetTexture(j)</pre><br>without any error message.<br><br>Here are the last printout lines:<br><pre class=code>...
Textures
Surface 0
Texture 0
</pre><br><br>it does not reach the "check" line. <br><br></td></tr></table><br>
<a name="2059862"></a>

<a name="2059884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, so the surfaces don't have brushes.<br>use<br><pre class=code>
Local tex:TTexture= Cube.Brush().GetTexture(j)
</pre><br>instead.<br>Another trick is to use is this, which shows the file structure of the model load.<br><pre class=code>
#MINIB3D_DEBUG_MODEL=1
</pre><br>p.s. if you get really stuck you can send me the file awpiette at yahoo. <br><br></td></tr></table><br>
<a name="2059916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> with... #MINIB3D_DEBUG_MODEL=1 ...I get this result:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">WebGL 1.0
**WEBGL 1
..FullShader success     
test
test
test
test
test
test
test
test
Startet
TModel 
 TEXS 
-Load Texture:1.jpg
-Load Texture:2.jpg
-Load Texture:3.jpg
-Load Texture:4.jpg
-Load Texture:5.jpg
-Load Texture:6.jpg
-Load Texture:lm.png
 BRUS 
 NODE 
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:1104
- TRIS 
no_tris:1119 no_verts706
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:1143
- TRIS 
no_tris:2262 no_verts755
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:1467
- TRIS 
no_tris:4060 no_verts1139
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:1801
- TRIS 
no_tris:6592 no_verts1549
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:2719
- TRIS 
no_tris:11077 no_verts2596
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:4225
- TRIS 
no_tris:19269 no_verts4225
..FastBrightShader success     
</textarea><br><br>with... Local tex:TTexture= Cube.Brush().GetTexture(j) ...I get the error message:<br><br>"Identiefier 'Brush' not found"<br><br>Here is a ZIP with all files:<br><br><a href="https://www.dropbox.com/s/m5pehupdkm2qhob/bug.zip" target="_blank">https://www.dropbox.com/s/m5pehupdkm2qhob/bug.zip</a> <br><br></td></tr></table><br>
<a name="2060170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Adam!<br><br>I think there is a bug in your mojo emulation regarding DrawImage when I rotate an image.<br><br>I've loaded an image using the Flag Image.MidHandle<br><br>Using DrawImage( img, x, y, angle, 1, 1 ) does NOT rotate the image around its center now!<br><br>Could you please take a look?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2060209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Now I can already see the 3D model, but the surface is black. The textures are there and preloaded...<br><br>The model is a landscape made by ALE with 6 textures as '.jpg and a lightmap as *.png<br> <br></div><br>@Midimaster<br>so, i did manage to find one bug, but the reason your B3D model is black, is because the surfaces are using a brush blend of "0" (overwrite) combined with using a vertex color map entityfx "2" (or 34=32+2).<br>if the vertex colors are 0,0,0 then we will see black.<br><br>i dont know why it is visible in glfw opengl1 vs opengl2 other than there may be a difference in my shader.<br><br>this can be corrected by assign the surface blend<br><pre class=code>
Cube.GetSurface(1).Brush().blend = 2
Cube.GetSurface(2).Brush().blend = 2
Cube.GetSurface(3).Brush().blend = 2
Cube.GetSurface(4).Brush().blend = 2
Cube.GetSurface(5).Brush().blend = 2
Cube.GetSurface(6).Brush().blend = 2
</pre><br>i don't know if that is what result you're trying to get. if not, i'll need a screenshot.<br><br><br>I will check Xaron's bug next. <br><br></td></tr></table><br>
<a name="2060221"></a>

<a name="2060222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> In this moment I downloaded the new minib3d version as ZIP, deleted the build folder and corrected the config.monkey. I use monkey V69.  Then I test the code on target Firefox HTML5.<br><br>But it does not start anymore!<br><br>Here is the debug log:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">test
Startet
..loading B3DBinary:monkey://data/terra.b3d
TModel 
 TEXS 
-Load Texture:1.jpg
-Load Texture:2.jpg
-Load Texture:3.jpg
-Load Texture:4.jpg
-Load Texture:5.jpg
-Load Texture:6.jpg
-Load Texture:lm.png
 BRUS 
brush rgb:1 1 1  blend:0 fx:2 no_texs:2
brush rgb:1 1 1  blend:0 fx:34 no_texs:2
brush rgb:1 1 1  blend:0 fx:34 no_texs:2
brush rgb:1 1 1  blend:0 fx:34 no_texs:2
brush rgb:1 1 1  blend:0 fx:34 no_texs:2
brush rgb:1 1 1  blend:0 fx:34 no_texs:2
 NODE 
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:1104
- TRIS 
no_tris:1119 no_verts706
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:1143
- TRIS 
no_tris:2262 no_verts755
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:1467
- TRIS 
no_tris:4060 no_verts1139
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:1801
- TRIS 
no_tris:6592 no_verts1549
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:2719
- TRIS 
no_tris:11077 no_verts2596
- NODE  (parent= Scene Root)
- MESH 
- VRTS 
no_verts:4225
- TRIS 
no_tris:19269 no_verts4225
Monkey Runtime Error : ** out of texture memory ** 1281
C:/MonkeyPro69/modules/minib3d/opengl/opengles20.monkey&lt;1169&gt;
C:/MonkeyPro69/modules/minib3d/trender.monkey&lt;498&gt;
C:/MonkeyPro69/modules/minib3d/opengl/opengles20.monkey&lt;1197&gt;
C:/MonkeyPro69/modules/minib3d/trender.monkey&lt;242&gt;
C:/MonkeyPro69/modules/minib3d/functions.monkey&lt;1136&gt;
C:/Monkey/Test3D/testTerrain.monkey&lt;74&gt;
C:/MonkeyPro69/modules/mojo/app.monkey&lt;67&gt;
</textarea><br><br>Is this a hmtl5 target problem or a bug?<br><br><br><br>And how can the surfaces use "overwrite", when all "building" information comes from a b3d file? Can I not trust in the b3d-file on monkey Minib3D? The old Blitz3D builds a correct landscape without any additinal changes in code:<br><br>Screenshot of Blitz3D:<br><br><img src="http://www.midimaster.de/temp/landscape.jpg"><br><br><br><br>Blitz3D-Code:<br><pre class=code>Graphics3D 640,480,0,2
SetBuffer BackBuffer()

camera=CreateCamera()
CameraClsColor Camera,111,161,181
MoveEntity Camera, 0,15,140

light=CreateLight()
RotateEntity light,90,0,0

Global land=LoadMesh("terra.b3d")
EntityPickMode land,2
PositionEntity land,0,0,MeshDepth(land)*2


While Not KeyDown( 1 )
	RenderWorld
	Pick= LinePick(EntityX(Camera),EntityY(Camera),EntityZ(Camera),0,-9,0,.1)
	PositionEntity Camera ,EntityX(Camera),PickedY()+1,EntityZ(Camera)	
	Flip 0
Wend
</pre><br><br>The result, what I'm trying to get is a visible 3D model of the landscape. Finally I want to continue the 3D tutorial and test your module in usability. At the end the user should get an overview, what is able to do with the module and what not.<br><br>Do you think the model has a problem? You can check it in old Blitz3D...<br><br><br>I hope you are still interested in my bug reports... <br><br></td></tr></table><br>
<a name="2060225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does this work out of the box yet ? or do we still need to hack trans, or some other files.<br><br>just looking for a quick progress update if possible. <br><br></td></tr></table><br>
<a name="2060252"></a>

<a name="2060253"></a>

<a name="2060255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, looks like i need to roll up my sleeves.<br>the screenshot helps!<br><br><div class="quote"> Does this work out of the box yet ? or do we still need to hack trans, or some other files. <br></div><br>this should work out of the box, no hacks needed.<br>the examples still work, but it seems some recent changes have caused some incompatibility to complex b3d files. i'm going to try and fix the bugs. <br><br></td></tr></table><br>
<a name="2060263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> SHWEETTTT :)<br><br>Downloading and adding to my modules folder right now. <br><br></td></tr></table><br>
<a name="2060330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is this a hmtl5 target problem or a bug? <br></div><br>man, that was a tough bug. debugging went something like this:<br><a href="https://www.youtube.com/watch?v=7XkBxCEOGjQ" target="_blank">https://www.youtube.com/watch?v=7XkBxCEOGjQ</a><br><br>i'll update in a couple hours. <br><br></td></tr></table><br>
<a name="2060346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick question, is 3d mesh instancing in MiniB3D? <br><br></td></tr></table><br>
<a name="2060357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Quick question, is 3d mesh instancing in MiniB3D?  <br></div><br>You mean using glVertexAttribDivisor? no, that opengl3 which isn't readily available on all platforms. i do, however, limit state switches of repeating mesh draws. Entity.Copy() naturally reuses mesh data.<br><br><div class="quote"> Using DrawImage( img, x, y, angle, 1, 1 ) does NOT rotate the image around its center now! <br></div><br>i wasn't able to figure this out yet.<br><br>midimaster's problem is fixed and up on github.<br>you will need to flip the surface stack of the B3D model by using Cube.FlipSurfaceOrder(), or by offsetting each layer in the y direction by a small amount. i added that command as a helper.<br><br>Edit: I've also changed out the PreLoaderPixmap() to use stacks, so should be more flexible to preload images. <br><br></td></tr></table><br>
<a name="2060354"></a>

<a name="2060355"></a>

<a name="2060353"></a>

<a name="2060352"></a>

<a name="2060351"></a>

<a name="2060376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> shall this FlipSurfaceOrder() be a temporary workaround? Or is it only necessary on models made by ALE?<br><br>Can you tell me more about it. When I write the tutorial I want to know what I have to communicate about that to other users. Or should I tell, that ALE models in general have problems?<br><br>What about the max 4 layer limitation? What about this base64? Is it relevant for a tutorial?<br><br>How many model source did you already test? Blender? <br><br></td></tr></table><br>
<a name="2060377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> i wasn't able to figure this out yet. <br></div><br><br>Does that mean you can't reproduce it or just don't know why it happens atm? :) <br><br></td></tr></table><br>
<a name="2060495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> don't know why it happens atm? <br></div><br>atm.<br><br><div class="quote"> necessary on models made by ALE <br></div><br>necessary. what is happening is that the layers (i'm guessing) are all in the same position (0,0,0). so the renderer does not know which to render first. so it renders each and the layers overwrite each other, until the last is drawn. so to reverse this, we use FlipSurfaceOrder(). it seems only with ale, but i would have to see other examples if the original B3D layers it's files differently. most 3d programs shouldn't allow this since it causes z-order fighting. we could also offset the y axis by a very small amount and it would work the same.<br><br><div class="quote"> What about the max 4 layer limitation? <br></div><br>max 4 textures? it's for the current shader. i'm planning on expanding the shader.<br><div class="quote"> What about this base64? <br></div><br>guess its not needed as much. need to see how other browsers/flash deal with it.<br><div class="quote"> How many model source did you already test? Blender?  <br></div><br>as many as i can get. i find most b3d exporters to be buggy. this is why i'm working hard on a collada importer. currently works, trying to get animation working. <br><br></td></tr></table><br>
<a name="2060519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#140">[#140]</a></td></tr></table></td></tr><tr ><td class="posttext"> just to give a short progression report...<br><br>the 3D landscape is now visible on HTML5 target. I downloaded MiniB3D V38 and builded the sample code on Monkey V69.<br><br>I added this line:<br><br><pre class=code>Cube =LoadMesh("terra.b3d")
Cube.FlipSurfaceOrder()
</pre><br><br>this lines (an old proposal from you) are not longer necessary<br><pre class=code>'Cube.GetSurface(1).Brush().blend = 2</pre><br><br>I will continue testing and report the next bug. But perhaps we are very closed to the nect chapter of the tutorial... <br><br></td></tr></table><br>
<a name="2060621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#141">[#141]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adam, is there anything I could help with? I mean that (for me) annoying bug with the rotation of 2d images (which I use quite frequently for HUDs). Is there something to start with? I mean I just see this MojoEmulation stuff but are the original commands used after that?<br><br>Looks like the origin is at 0,0 instead of the center of the image, for whatever reasons... <br><br></td></tr></table><br>
<a name="2060754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#142">[#142]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Using DrawImage( img, x, y, angle, 1, 1 ) does NOT rotate the image around its center now!  <br></div><br>fixed, updated v0.38.1 (mojographics.monkey) <br><br></td></tr></table><br>
<a name="2060756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#143">[#143]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are my hero! Wohoo! Thanks again for your great work you do here! :) <br><br></td></tr></table><br>
<a name="2060760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#144">[#144]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks like there is a new problem with the width and height of textures now:<br><br><pre class=code>
  Method loadParticleTexture:Void( texFile:String, texFrames:Int )
    If( _particleTexture ) FreeTexture( _particleTexture )
    _particleTexture = LoadTexture( texFile, 2+16+32 )
    If( Not _particleTexture ) Error "COULD NOT LOAD PARTICLE TEXTURE: " + texFile
    _textureFrames = texFrames
    _textureFrameSize = TextureWidth( _particleTexture ) / _textureFrames
    _textureNumFrames = TextureWidth( _particleTexture ) / _textureFrameSize
    _uvUnit = 1.0 / Float( _textureNumFrames )
    EntityTexture( _mesh[0], _particleTexture )
    EntityTexture( _mesh[1], _particleTexture )
  End Method
</pre><br><br>The function TextureWidth returns 0 now even though the texture has been loaded correctly... <br><br></td></tr></table><br>
<a name="2060825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#145">[#145]</a></td></tr></table></td></tr><tr ><td class="posttext"> @AdamRedwoods:<br><br>Do you follow also the minib3d tutorial thread? A user tells about problems on his Samsung tablet (GT-N8013) with Android 4.1.1:<br><br>When he runs the "Sprite.monkey" code he gets a white floor instead of a green one:<br><br><pre class=code>Floor=CreateGrid(15,15)
Floor.ScaleEntity 10,1,10 
Floor.PositionEntity -2,0,8
Floor.EntityColor 55,195,55
</pre> <br><br>On HTML5 or my Samsung GT-S53000 Android 2.3 it works perfect.<br><br><br>The second behavior he noticed, is that sprites in a distance of 1.10 to the camera will not be drawn. On HTML5 or on my Android 2.3 I can near them until 1.01<br><br><pre class=code>Button=LoadSprite("text.png",2,Camera)
Button.ScaleEntity 1.01 , 0.1 , 0.01
Button.MoveEntity 0 , -0.7 , 1.01
</pre> <br><br></td></tr></table><br>
<a name="2060926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#146">[#146]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The function TextureWidth returns 0 now even though the texture has been loaded correctly... <br> <br></div><br>i now allow an empty texture to be returned if the file isn't loaded. not sure if this is bad practice or not, but it keeps everything from crashing.<br>i have a TPixmap.IsLoaded() that I check, perhaps i need to put it into texture and sprites loads as well.<br><br><div class="quote"> The second behavior he noticed, is that sprites in a distance of 1.10 to the camera will not be drawn. <br></div><br>i'll have to look into this. i use android 4.1.1 and 2.2.1 for testing. <br><br></td></tr></table><br>
<a name="2060928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#147">[#147]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam, so what would be best practice then to avoid that? Preload everything like it's necessary for HTML5? I loaded the texture before I did this call... <br><br></td></tr></table><br>
<a name="2060937"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#148">[#148]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Midimaster:<br><br>Same issues with camera and floor texture I found here:<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=5070" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=5070</a> <br><br></td></tr></table><br>
<a name="2060945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#149">[#149]</a></td></tr></table></td></tr><tr ><td class="posttext"> @raul<br>yes.. I informed Adam about your problem. You are the "user" I'm talking about... in #145 <br><br></td></tr></table><br>
<a name="2060959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#150">[#150]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Midimaster: oh, i didn't notice that. just wanted to confirm it. Thanks, <br><br></td></tr></table><br>
<a name="2061484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#151">[#151]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone have any idea why this happens on Linux?<br><br>I can compile BlitzMax code on the machine just monkey throws a wobbler<br><br>Heres the error log:<br><pre class=code>
"/media/edzup/8GIG/BRL/MonkeyPro72a/bin/transcc_linux" -target=Glfw_Game -config=Debug -run "/media/edzup/8GIG/BRL/Projects/MeshEdit/MeshEdit.monkey"
TRANS monkey compiler V1.49
Parsing...
miniB3D opengl11
Semanting...
Translating...
Building...
g++   -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../main.o ../main.cpp
../main.cpp: In function void _glGenBuffers(int, Array&lt;int&gt;, int):
../main.cpp:4094:44: error: glGenBuffers was not declared in this scope
../main.cpp: In function void _glDeleteBuffers(int, Array&lt;int&gt;, int):
../main.cpp:4098:47: error: glDeleteBuffers was not declared in this scope
../main.cpp: In function void _glGetBufferParameteriv(int, int, Array&lt;int&gt;, int):
../main.cpp:4238:55: error: glGetBufferParameteriv was not declared in this scope
../main.cpp: In function void _glBufferData(int, int, BBDataBuffer*, int):
../main.cpp:4242:54: error: glBufferData was not declared in this scope
../main.cpp: In function void _glBufferSubData(int, int, int, BBDataBuffer*):
../main.cpp:4246:58: error: glBufferSubData was not declared in this scope
../main.cpp: In member function virtual int c_OpenglES11::p_UpdateVBO(c_TSurface*):
../main.cpp:7978:45: error: glBindBuffer was not declared in this scope
../main.cpp:7995:46: error: glBindBuffer was not declared in this scope
../main.cpp:8009:46: error: glBindBuffer was not declared in this scope
../main.cpp:8019:44: error: glBindBuffer was not declared in this scope
../main.cpp: In member function virtual void c_OpenglES11::p_Render(c_TEntity*, c_TCamera*):
../main.cpp:8356:47: error: glBindBuffer was not declared in this scope
../main.cpp:8386:53: error: glBindBuffer was not declared in this scope
../main.cpp:8397:54: error: glBindBuffer was not declared in this scope
../main.cpp:8408:49: error: glBindBuffer was not declared in this scope
../main.cpp:8690:49: error: glBindBuffer was not declared in this scope
../main.cpp:8696:49: error: glBindBuffer was not declared in this scope
make: *** [../main.o] Error 1
TRANS FAILED: Error executing 'make CCOPTS="" OUT="Debug/MonkeyGame"', return code=512
Done.
</pre><br><br>and the source:<br><pre class=code>
'
'	MeshEdit.monkey - Copyright (C)EdzUp
'	Programmed by Ed 'EdzUp' Upton
'

Import minib3d
Import mojo

Function Main:Int()
	New MainClass
	
	Return( 0 )
End

Global Camera:TCamera
Global MoveForward:Int
Global MoveRotate:Int

Class MainClass Extends App
	Global ReloadAll:Bool = False
	Global InitGlobal:Int

	Method OnResume()
		ReloadAll = True
	End
	
	Method Init:Int()
		If InitGlobal Then Return 1
		
		'preload textures
'		If Not TPixmap.PreLoadPixmap(["blue_square.png", "blue_triangle.png", "sky.png", "monkey.png", "tabletJoystick.png", "tabletJoystickStick.png" ])	
'			Return 0
'		Endif
		
		InitGlobal =1
		
		AmbientLight 255, 255, 255
		Camera = CreateCamera()		
	End
	
	Method OnCreate()
		SetRender()
		SetUpdateRate( 60 )
	End
	
	Method OnUpdate()
		If Not Init() Then Return			'make sure its all loaded

		If ReloadAll
			Graphics3DInit()
			ReloadAllSurfaces()
			ReloadAllTextures()
			Print "....reload complete...."
			ReloadAll = False
		Endif
		
		If KeyDown(KEY_ESCAPE) Then Error ""
		
		MoveForward = 0
		MoveRotate = 0
		
		If KeyDown( KEY_LEFT )=1 Then MoveRotate = -1
		If KeyDown( KEY_RIGHT )=1 Then MoveRotate =1
		If KeyDown( KEY_UP )=1 Then MoveForward = 1
		If KeyDown( KEY_DOWN )=1 Then MoveForward = -1
		
		Select MoveForward
		Case -1
			Camera.MoveEntity( 0, 0, -.3 )
		Case 1
			Camera.MoveEntity( 0, 0, .3 )
		Default
		End
		
		Select MoveRotate
		Case -1
			Camera.TurnEntity( 0, 1, 0 )
		Case 1
			Camera.TurnEntity( 0, -1, 0 )
		Default
		End		
	End
	
	Method OnRender()
		If Not Init() Then Return
		SetMojoEmulation()
		'mojo drawing goes in here
		RenderWorld()
	End
End
</pre> <br><br></td></tr></table><br>
<a name="2061501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#152">[#152]</a></td></tr></table></td></tr><tr ><td class="posttext"> slenkar posted this to get it to work on Linux:<br><br><pre class=code>
did a little bit of google research and got it to compile on linux

go into:
Monkey/targets/glfw/template/


make sure the line in the makefile looks like this


LDLIBS=-lGL -lopenal -lX11 -lpthread -lrt

and at the top of main.cpp add this:
#define GL_GLEXT_PROTOTYPES
</pre><br><br>seems like some of that is in the latest monkey, except for the define part. i would put the define part under this part of main.h instead:<br><pre class=code>#elif __linux
#define GL_GLEXT_PROTOTYPES
#include &lt;unistd.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;dirent.h&gt;
#include &lt;pthread.h&gt;
#endif
</pre><br>i don't have linux so let me know if this works. <br><br></td></tr></table><br>
<a name="2061500"></a>

<a name="2061499"></a>

<a name="2061502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sionco</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#153">[#153]</a></td></tr></table></td></tr><tr ><td class="posttext"> @AdamRedwoods<br>Thanks, that worked (I had the same problem)<br><br>I put <br>LDLIBS=-lGL -lopenal -lX11 -lpthread -lrt in the makefile<br>and followed your suggestion of putting #define GL_GLEXT_PROTOTYPES in the main.h file <br><br></td></tr></table><br>
<a name="2061582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#154">[#154]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's been a bit since I messed with monkey and the fix will work, but I get warnings about pointer size being different as I'm on a 64bit OS.<br><br>@AdamRedWoods: The main.h file didn't need to be modified passing a such thing can be achieved by the make file.<br>Adding -DGL_GLEXT_PROTOTYPES to the end of CPPFLAGS=$(CCOPTS) would do just as well. I have to do a few of these thing to get any thing monkey glfw related to build on my system. And I'm sure -lrt isn't needed any more as I'm possitive that it's been added as a filter with libc. You would only add that for backward compatibility with an older OS.<br><br>A few more directives of interest which you would find in the glfw/lib/x11/platform.h<br><br>-D_GLFW_HAS_GLXGETPROCADDRESS<br>-D_GLFW_USE_LINUX_JOYSTICKS<br>-D_GLFW_HAS_XF86VIDMODE<br>-D_GLFW_HAS_SCHED_YIELD<br>-D_GLFW_HAS_SYSCONF<br>-pthread<br><br>It would be nice if Mark add an easy way so you can pass such things in monkey code as if things keep getting added to the make file it will get to be too big to manage in the end. <br><br></td></tr></table><br>
<a name="2061595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#155">[#155]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Adam:will test it when I get back :-) <br><br>Having minib3d on there would be a godsend :-) <br><br></td></tr></table><br>
<a name="2062685"></a>

<a name="2062688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#156">[#156]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adam, I still have this problem here: <a href="http://monkeycoder.co.nz/Community/post.php?topic=5016&amp;post=60760" target="_blank">http://monkeycoder.co.nz/Community/post.php?topic=5016&amp;post=60760</a><br><br>I even preloaded the texture but it still don't work...<br><br>Edit: Here's a demo example using my particle candy module:<br><a href="http://www.leidel.net/dl/monkey/pdemo.zip" target="_blank">http://www.leidel.net/dl/monkey/pdemo.zip</a><br><br>Compile this to GLFW and it will crash because of that texture thing. Maybe you could be so kind to tell me how I can prevent this? Thanks! <br><br></td></tr></table><br>
<a name="2062756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#157">[#157]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok thanks for the example, updated github (tpixmap and mojographics).<br>works now, all targets.<br>v0.38.2 <br><br></td></tr></table><br>
<a name="2062773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#158">[#158]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam, works now! :) <br><br></td></tr></table><br>
<a name="2062883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#159">[#159]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, how's the state with OpenGL ES 2.0 for Android/iOS? At the moment I get compiler errors.<br><br>The problem with OGL 1.1 is that there are tons of problems with the Adreno 225 GPU which is used by the Samsung S3 for instance. I have missing textures there.<br><br>The problem is described here:<br><a href="http://www.shivaengine.com/developer/forum/viewtopic.php?p=60882" target="_blank">http://www.shivaengine.com/developer/forum/viewtopic.php?p=60882</a><br><br>Solution is to use OGL 2.0 or to apply this:<br><i>"During the IwGL startup, glGetString(GL_VERSION) is called, among other purposes, to check for the CommonLite profile in order to switch to fixed point texture matrix arithmetic. It does it by looking for the "CL" substring in the returned string.<br><br>The cause of the problem is that the Motorola Razr M (and probably more Adreno 225 devices) returns "OpenGL ES-CM 1.1 V@... AU@ (CL@2726865)&amp;#34;, which contains that "CL" substring but not meaning "CommonLite". Therefore, Marmalade enables fixed point texture matrices when it shouldn't.<br><br>By enabling detailed GL trace, you can see that under this scenearios IwGx is calling the fixed-point version of the relevant function (glLoadMatrixx()) instead of the floating-point one (glLoadMatrixf()), which is the one called usually."</i> <br><br></td></tr></table><br>
<a name="2062909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#160">[#160]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow that's a mean thing for Adreno engineers to do.<br><br>anyways, opengles2.0 works, the shaders are a little slow (need to write a complex shader matrix to choose per-pixel lighting on/off).<br><br>but it seems Monkey has a bug in the gles20 android module. I'll report it.<br><a href="http://monkeycoder.co.nz/Community/posts.php?topic=5589" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=5589</a> <br><br></td></tr></table><br>
<a name="2062906"></a>

<a name="2062908"></a>

<a name="2062917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#161">[#161]</a></td></tr></table></td></tr><tr ><td class="posttext"> EDIT:<br>v0.39<br>ok, i think i have a bit of a texture matrix going to opengles20. still only one light available, but will have to do for now until i can get a better shader matrix in. nice speed improvements for opengles20, though.<br><br>so it defaults to vertex lighting, to get per pixel lighting (which is slower) use:<br><pre class=code>
SetRender(RENDERFLAG_PERPIXELLIGHTING)
</pre> <br><br></td></tr></table><br>
<a name="2062916"></a>

<a name="2062915"></a>

<a name="2062920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#162">[#162]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit: Nevermind, that's exactly what you've described. Oh well, have to drink my coffee...<br><br>Thanks but no, Android does not compile with gles20:<br><br><pre class=code>
-compile:
    [javac] Compiling 4 source files to D:\Leidel\Projekte\SilentDepth\SilentDepth.build\android\bin\classes
    [javac] D:\Leidel\Projekte\SilentDepth\SilentDepth.build\android\src\com\codeknitters\silentdepth\MonkeyGame.java:17715: error: cannot find symbol
    [javac] 		if((bb_opengl_gles20.LoadImageData((t_buf),t_path,t_info))!=null){
    [javac] 		                    ^
    [javac]   symbol:   method LoadImageData(c_DataBuffer,String,int[])
    [javac]   location: class bb_opengl_gles20
    [javac] Note: D:\Leidel\Projekte\SilentDepth\SilentDepth.build\android\src\com\codeknitters\silentdepth\MonkeyGame.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] 1 error
</pre> <br><br></td></tr></table><br>
<a name="2062919"></a>

<a name="2062921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#163">[#163]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, works with Android now, pretty slow but it works. GLFW doesn't show anything. <br><br></td></tr></table><br>
<a name="2063384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#164">[#164]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Adam, thanks for the last fixes! I some questions regarding collisions:<br><br>1) CollisionSetup<br><br>I see I can give some more parameters there like x,y,z and width,height,depth. Is that the same as I set with EntityBox for instance? Do I have to set these values or to rephrase: How does the collision setup method get the size of the object?<br><br>2) Collision types<br><br>I see I can set a type in CollisionSetup and in the Collisions command itself. What's the difference there? Are Polygon-to-Polygon collisions possible?<br><br>3) Response types<br><br>What's the difference between COLLISION_RESPONSE_SLIDE and COLLISION_RESPONSE_SLIDEXZ?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2063432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#165">[#165]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. CollisionSetup will automatically grab the bounding sphere size or bounding box of the object if no values are set. Pick TYPE determines the initial shape. setting these values will manually set the size of the box or sphere, <strike>which is centered at the mesh's center</strike> which is centered for a sphere, but a box is offset at the corner (ie a cube would be EntityBox(cube, -0.5,-0.5,-0.5,1.0,1.0,1.0)).<br><br>2. CollisionSetup, the TYPE parameter is to define the pick mode, not object-to-object collisions. Using Collisions() sets the object-to-object collision type, which includes source-sphere to destination-polygon. there is no polygon-to-polygon as that is very expensive (but theoretically could be done, check both objects as sources). I recommend using multiple source spheres for specific collision points.<br><br>3. COLLISION_RESPONSE_SLIDE will slide the source object around the destination object according to the collision normal and source movement. COLLISION_RESPONSE_SLIDEXZ limits this to just the XZ plane (no Y sliding) which is good for walking around and such, but cannot go up ramps or walls. <br><br></td></tr></table><br>
<a name="2063431"></a>

<a name="2063390"></a>

<a name="2063391"></a>

<a name="2063389"></a>

<a name="2063392"></a>

<a name="2063393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#166">[#166]</a></td></tr></table></td></tr><tr ><td class="posttext"> So let's take an example. E.g. we have two ships (meshes) which can collide.<br><br>I thought about to just setup it that way:<br><br>CollisionSetup( submarineMesh, COL_SUBMARINE, COLLISION_METHOD_BOX, 0, 0, 0, MeshWidth( submarineMesh ), MeshDepth( submarineMesh ), MeshHeight( submarineMesh ) )<br>CollisionSetup( shipMesh, COL_SHIP, COLLISION_METHOD_BOX, 0, 0, 0, MeshWidth( shipMesh ), MeshDepth( shipMesh ), MeshHeight( shipMesh ) )<br>Collisions( COL_SUBMARINE, COL_SHIP, COLLISION_METHOD_BOX, COLLISION_RESPONSE_SLIDE )<br><br>Even though that somehow works the collision boxes just don't fit (both meshes are centered correctly). So how am I supposed to setup this stuff correctly with two meshes? Collision boxes would be enough for me! <br><br></td></tr></table><br>
<a name="2063394"></a>

<a name="2063395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#167">[#167]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just saw you answered it a bit. I scratch my head about this collision stuff since the good old Blitzbasic days. lol<br><br>So using multiple spheres would be another good way, indeed? Could you please share a small example with me? Thanks so much! <br><br></td></tr></table><br>
<a name="2063407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#168">[#168]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I got it mostly. What I still don't completely understand is the size of a collision box/sphere.<br><br>I set these values with EntityBox and EntityRadius, right? So when I set EntityBox( ent, x, y, z, w, h, d ) does that mean using w,h,d of 1,1,1 it's the same size as a cube (CreateCube) with standard scaling (1,1,1)? x,y,z of the EntityBox are the center of that cube?<br><br>Thanks again for answering such a possibly stupid question! <br><br></td></tr></table><br>
<a name="2063430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#169">[#169]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i was wrong. you can ONLY use one sphere/box for the collision response (but you can use multiple for collision triggers).<br><br>and for EntityBox(ent, x,y,z,w,h,d) the x,y,z is NOT the center but the corner. so a cube of 1,1,1 would be EntityBox(cube, -0.5,-0.5,-0.5, 1.0,1.0,1.0).<br>Confusing, which is why it messes me up, too! <br><br></td></tr></table><br>
<a name="2063436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#170">[#170]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm a bit foggy here, is this how the original iMiniB3D operated collisions(non-centred)? <br><br></td></tr></table><br>
<a name="2063438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#171">[#171]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam! How about EntityRadius with both parameters? I guess this would fit nearly perfect for ships when I use a "stretched" sphere... <br><br></td></tr></table><br>
<a name="2063454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#172">[#172]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Adam, I think I've discovered a bug? Using your minib3d_collision_test.monkey example:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

''Collision example
Import mojo
Import minib3d

Function Main()
	New Game
End

Class Game Extends App

	Field width:Int=640,height:Int=480,depth:Int=0,mode:Int=2
	
	Field cam:TCamera , cam2:TCamera
	
	Field light:TLight
	Field cube:TMesh
	Field sphere1:TMesh, sphere2:TMesh, cylinder:TMesh 
	Field cone:TMesh 
	Field dot:TMesh, monkey:TMesh, dot3:TMesh
	Field testmesh:TMesh
	
	Field txt:TText
	
	' used by fps code
	Field old_ms:Int
	Field renders:Int
	Field fps:Int
	
	Field a:Float=0, dir:Int=0, oldTouchX:Int, oldTouchY:Int, touchBegin:Int

	Field dotx:Float, dotdir:Float=0.5
	
	Field whitebrush:TBrush
	Field redbrush:TBrush, greenbrush:TBrush

	Field tex1:TTexture

	Field init_gl:Bool = False
	
	Method OnCreate()
		SetUpdateRate 30
	End

	Method Init()
		
		If init_gl Then Return
		init_gl = True
		
		SetRender()
		
		cam = CreateCamera()
		cam.CameraClsColor(0,0,80)
		
		dot = CreateSphere()
		dot.ScaleEntity (0.1,0.1,0.1)
		dot.EntityColor(255,0,0)
		dot.PositionEntity(0.0,1.1,0.0)
		
		monkey = CreateCube()
		'monkey = CreateMiniB3DMonkey()
		
		'monkey.EntityColor(200,200,255)
		'monkey.ScaleEntity(0.2,0.2,0.2)
		monkey.ScaleEntity(0.2,0.2,0.2)
		'monkey.PositionEntity(0.5,-0.5,0.0)
        monkey.PositionEntity(-0.39,-0.5,-1.2)

		
		dot3 = CreateSphere()
		dot3.ScaleEntity (0.1,0.1,0.1)
		dot3.EntityColor(0,200,0)
		
		light=CreateLight(1)
		
		'sphere1 = CreateSphere()
		sphere1 = CreateCube()
		'sphere1 = LoadMesh("zombie_b3d_base64.txt")
		'sphere1=CreateMesh()
		
		cylinder = CreateCylinder()
		cone = CreateCone()
	
		txt = CreateText2D()
		txt.HideEntity()
		
		light.PositionEntity 0,3,-3
		cam.PositionEntity 0.5,1,-5
		
		'PositionEntity cube,-2,0,0
		PositionEntity sphere1,-1,-0.5,0
		'sphere1.RotateEntity(145,145,0)
		ScaleEntity sphere1,0.7,0.7,0.7
		PositionEntity cylinder,2,0,5
		PositionEntity cone,4,0,0
		RotateEntity cone,-90,0,0
		
		cylinder.EntityParent(cone, True)

		
		whitebrush = New TBrush
		whitebrush.BrushColor(200,200,200)
		
		redbrush = New TBrush
		redbrush.BrushColor(200,20,20)
		
		greenbrush = New TBrush
		greenbrush.BrushColor(20,200,20)

		sphere1.PaintEntity( whitebrush)
		cylinder.PaintEntity(greenbrush)
		cylinder.EntityAlpha(0.7)

		
		'' new method CollisionSetup(group_id, collision method, size of sphere or box)
		
		cone.CollisionSetup(1, COLLISION_METHOD_POLYGON, 1.0)
		sphere1.CollisionSetup(1, COLLISION_METHOD_BOX, 1.0)
		monkey.CollisionSetup(1, COLLISION_METHOD_POLYGON)

		cylinder.CollisionSetup(1, COLLISION_METHOD_POLYGON, 2.0) '-1.0,-1.0,-1.0,2.0,2.0,2.0)
		cylinder.RotateEntity(0,0,45)
		
		Collisions(1,1,COLLISION_METHOD_POLYGON,COLLISION_RESPONSE_SLIDEXZ)
		
		sphere1.EntityFX(2)
		cone.EntityFX(2)
		
		old_ms=Millisecs()
	
		
		'Wireframe(True)
		
		Print "main: intit done"
	End
	
	Method OnUpdate()
	
		If KeyHit(KEY_CLOSE) Or KeyHit(KEY_ESCAPE) Then Error ""
			
		If Not init_gl Then Return
		
		' control camera
		Local lr:Float = KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT)
		Local ud:Float = KeyDown(KEY_DOWN)-KeyDown(KEY_UP)
		
		Local lr2:Float = KeyDown(KEY_H)-KeyDown(KEY_F)
		Local ud2:Float = KeyDown(KEY_T)-KeyDown(KEY_G)
		
		Local camin:Float = KeyDown(KEY_W)-KeyDown(KEY_S)
		Local camup:Float = KeyDown(KEY_D)-KeyDown(KEY_A)
		
		If TouchDown(0) And Not TouchDown(1)
			If Not touchBegin
				oldTouchX = TouchX()
				oldTouchY = TouchY()
				touchBegin = 1
			Endif
			lr = (TouchX() - oldTouchX) * 0.5
			ud = (-TouchY() + oldTouchY) *0.5
			oldTouchX = TouchX()
			oldTouchY = TouchY()
		Elseif TouchDown(1)
			If Not touchBegin
				oldTouchX = TouchX()
				oldTouchY = TouchY()
				touchBegin = 1
			Endif
			camup = (-TouchX() + oldTouchX) * 0.1
			camin = (-TouchY() + oldTouchY) *0.1
			oldTouchX = TouchX()
			oldTouchY = TouchY()
		Else
			touchBegin = 0
		Endif
	
		MoveEntity cam,lr2,0,ud2
		cam.TurnEntity ud,lr,0

		
		
		If TouchDown(0)
			Local e:TEntity = cam.CameraPick(TouchX(), TouchY() )
			
			Local surf:TSurface = PickedSurface()
			Local v0:Int, v1:Int, v2:Int
			
			'Print CollisionTriangle(sphere1,1)
			'Print "pt: "+PickedTriangle()
			
			If surf
				v0 = surf.TriangleVertex( PickedTriangle(), 0)
				v1 = surf.TriangleVertex( PickedTriangle(), 1)
				v2 = surf.TriangleVertex( PickedTriangle(), 2)
				
				'Print v0+" "+v1+" "+v2
				
				surf.VertexColor(v0,255,0,0)
				surf.VertexColor(v1,255,0,0)
				surf.VertexColor(v2,255,0,0)
				
				'surf.RemoveTri( PickedTriangle)
			Endif
			
			dot.PositionEntity(PickedX(),PickedY(),PickedZ())
			
			If Not e Then Print "null pick" Else Print e.classname
		Endif

		
		monkey.MoveEntity(camup*0.1,0,camin*0.1)

		'dot.PositionEntity(CollisionInfo.testx,CollisionInfo.testy,CollisionInfo.testz)
		If monkey.collision.impact Then dot.PositionEntity( monkey.CollisionX(), monkey.CollisionY(), monkey.CollisionZ())
		
Print "mx: " + EntityX( monkey ) + " my: " + EntityY( monkey ) + " mz: " + EntityZ( monkey )

		'txt.SetMode2D()	
		txt.SetText(fps+" fps ~nhow are you")
		txt.Draw(0,0)
		
		
		' calculate fps
		If Millisecs()-old_ms &gt;= 1000
			old_ms=Millisecs()
			fps=renders
			renders=0
		Endif
		
		UpdateWorld()

		
	End
	
	Method OnRender()
		Init()

		RenderWorld()

		renders=renders+1
				
		
	End

End
</textarea><br><br>In line 60 use a cube instead of the monkey<br>monkey = CreateCube()<br><br>In line 66 set the following position:<br>monkey.PositionEntity(-0.39,-0.5,-1.2)<br><br>Now start it and just press "W". You can see how the cube clearly intersects with the bigger cube behind... <br><br></td></tr></table><br>
<a name="2063480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#173">[#173]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well that looks like an issue with larger objects. When I scale down everything it works fine. But using a size of 1,1,1 isn't that large, isn't it?<br><br>Edit: Further investigation shows that collisions don't work at all if you use two cubes of exact the same size. <br><br></td></tr></table><br>
<a name="2063477"></a>

<a name="2063538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#174">[#174]</a></td></tr></table></td></tr><tr ><td class="posttext"> so it works if you leave the 1.0 off, which then sets it automatically.<br><br>i guess the default size of a cube is w=2,h=2,d=2 . does that sound right?<br>then if the scale is 0.7, then the cube is still larger than 1.0, so it works...<br><br>ok problem #2:<br>if the cubes are the same size it doesn't work. that is true. i'll look into that. <br><br></td></tr></table><br>
<a name="2063552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#175">[#175]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam, I've sent you a more detailed example. ;) <br><br></td></tr></table><br>
<a name="2063865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#176">[#176]</a></td></tr></table></td></tr><tr ><td class="posttext"> on linux its throwing the not declared in this scope stuff again on 73a <br><br></td></tr></table><br>
<a name="2063881"></a>

<a name="2063882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#177">[#177]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to speed up the mojo emulation stuff. It becomes pretty slow on Android (gles 20) using some (below 10) images on screen. <br><br></td></tr></table><br>
<a name="2063908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#178">[#178]</a></td></tr></table></td></tr><tr ><td class="posttext"> v0.39.1 - mojographics.monkey<br>i've added a small speedup. try that, let me know if it breaks anything.<br><br>re:linux<br>i'll need to install linux at some point to test it. if it's the same error, try the prior fix, and if that works add an entry into the bugs forum. <br><br></td></tr></table><br>
<a name="2063909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#179">[#179]</a></td></tr></table></td></tr><tr ><td class="posttext"> It dont work here with the prior fix which is a pain :/ <br><br></td></tr></table><br>
<a name="2063910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#180">[#180]</a></td></tr></table></td></tr><tr ><td class="posttext"> did you just download it? try again, i forgot to remove something. if it doesn't work, then post the error. <br><br></td></tr></table><br>
<a name="2063916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#181">[#181]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Adam, no that did not change anything but as I can see you removed some local unused variables which the compiler does anyway? ;)<br><br>What I noticed is that gles11 is about 50% faster than gles20 on Android. <br><br></td></tr></table><br>
<a name="2063977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#182">[#182]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  I can see you removed some local unused variables <br></div><br>no, in mojographics, i changed it so it won't remake the buffers every frame.<br><br>i don't suppose you can profile it using DDMS? <br><br></td></tr></table><br>
<a name="2063996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#183">[#183]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will download it and try again :) <br><br></td></tr></table><br>
<a name="2063999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#184">[#184]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam, I'll test it with DDMS. Let's see where the bottle necks are! <br><br></td></tr></table><br>
<a name="2064270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#185">[#185]</a></td></tr></table></td></tr><tr ><td class="posttext"> righty using the latest monkey (experimental 73b) and downloading the latest minib3d build I get:<br><br><pre class=code>
"/media/edzup/8GIG/BRL/MonkeyPro73b/bin/transcc_linux" -target=Glfw_Game -config=Debug "/media/edzup/8GIG/BRL/Projects/A.I/AI.monkey"
TRANS monkey compiler V1.51
Parsing...
miniB3D opengl11
Semanting...
Translating...
Building...
g++   -I../glfw/include -I../glfw/lib -I../glfw/lib/x11 -I../openal/include -I../stb -D_GLFW_HAS_GLXGETPROCADDRESS -D_GLFW_USE_LINUX_JOYSTICKS -pthread  -c -o ../main.o ../main.cpp
../main.cpp: In function void _glGenBuffers(int, Array&lt;int&gt;, int):
../main.cpp:4127:44: error: glGenBuffers was not declared in this scope
../main.cpp: In function void _glDeleteBuffers(int, Array&lt;int&gt;, int):
../main.cpp:4131:47: error: glDeleteBuffers was not declared in this scope
../main.cpp: In function void _glGetBufferParameteriv(int, int, Array&lt;int&gt;, int):
../main.cpp:4271:55: error: glGetBufferParameteriv was not declared in this scope
../main.cpp: In function void _glBufferData(int, int, BBDataBuffer*, int):
../main.cpp:4275:54: error: glBufferData was not declared in this scope
../main.cpp: In function void _glBufferSubData(int, int, int, BBDataBuffer*):
../main.cpp:4279:58: error: glBufferSubData was not declared in this scope
../main.cpp: In member function virtual int c_OpenglES11::p_UpdateVBO(c_TSurface*):
../main.cpp:8894:45: error: glBindBuffer was not declared in this scope
../main.cpp:8911:46: error: glBindBuffer was not declared in this scope
../main.cpp:8925:46: error: glBindBuffer was not declared in this scope
../main.cpp:8935:44: error: glBindBuffer was not declared in this scope
../main.cpp: In member function virtual void c_OpenglES11::p_Render(c_TEntity*, c_TCamera*):
../main.cpp:9274:47: error: glBindBuffer was not declared in this scope
../main.cpp:9304:53: error: glBindBuffer was not declared in this scope
../main.cpp:9315:54: error: glBindBuffer was not declared in this scope
../main.cpp:9326:49: error: glBindBuffer was not declared in this scope
../main.cpp:9608:49: error: glBindBuffer was not declared in this scope
../main.cpp:9614:49: error: glBindBuffer was not declared in this scope
TRANS FAILED: Error executing 'make CCOPTS="" OUT="Debug/MonkeyGame"', return code=512
make: *** [../main.o] Error 1
Done.
</pre><br><br>Ive done the thing in post 152 to no avail is there anything im missing?<br><br>will keep playing and see if there is something else. <br><br></td></tr></table><br>
<a name="2064264"></a>

<a name="2064287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#186">[#186]</a></td></tr></table></td></tr><tr ><td class="posttext"> those errors are from the opengl EXT during compiling, so i suspect<br>"#define GL_GLEXT_PROTOTYPES" is missing from the targets/glfw/templates/main.h for the #elif __linux section? if that doesn't work, i wonder if we need a glext header file somewhere else, too. <br><br></td></tr></table><br>
<a name="2064289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#187">[#187]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well i added the #define like it said to the if block but still get errors ao i think theres a missing header somewhere <br><br></td></tr></table><br>
<a name="2064292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#188">[#188]</a></td></tr></table></td></tr><tr ><td class="posttext"> Part 7? This thread has become long. ;)<br><br>Adam, I just tried to create my own shader, which is just a copy of your Fullshader (GLES20).<br><br>It looks like:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import opengl.gles20
Import minib3d.opengl.tshaderglsl

Class LightShader Extends TShaderGLSL

	Global init_id:Int=0		
	Global global_uniforms:ShaderUniforms
	Global shader:TShaderGLSL[10]

  Method New()

    MAX_TEXTURES = 4
    MAX_LIGHTS = 1

    name = "LightShader"

    If( init_id = 0 And shader_id = 0 )
      shader[0] = New MultiShader(0,1,0)
      shader[1] = New MultiShader(1,1,0)
      shader[2] = New MultiShader(0,1,1)
      shader[3] = New MultiShader(1,1,1)
      shader[4] = New MultiShader(0,1,2)
      shader[5] = New MultiShader(1,1,2)
      shader[6] = New MultiShader(0,1,3)
      shader[7] = New MultiShader(1,1,3)
      shader[8] = New MultiShader(0,1,4)
      shader[9] = New MultiShader(1,1,4)

      init_id = shader[0].shader_id
      shader_id = shader[0].shader_id

      If shader[0].active Then Dprint "..LightShader success"
      active = shader[0].active

    Else If init_id
      shader_id = init_id ''use same shader
      u = global_uniforms ''use same uniforms
      active = 1
    End If
  End Method

  Function GetShader:TShaderGLSL(ppl:Int=0, num_lights:Int=1, num_texs:Int=0)
    Return shader[2*num_texs+ppl]
  End
End Class
</textarea><br><br>... so really a copy of your Fullshader.<br><br>I instantiate it with:<br><pre class=code>
TShader.LoadDefaultShader( new LightShader )
</pre><br><br>But I just see nothing then. Using the same command with your FullShader and FastBrightShader works just fine. Do I miss something here?<br><br>Cheers! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
