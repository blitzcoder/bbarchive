<!DOCTYPE html><html lang="en" ><head ><title >Congo - game framework</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Congo - game framework</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >Congo - game framework</a><br><br>
<a name="2076363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bazmonkey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi fellow Monkey fans -<br><br>I've been developing a small Monkey framework called Congo. Source code (MIT license) and further information is available via the Module page, or at <a href="http://code.google.com/p/congo-monkey/" target="_blank">http://code.google.com/p/congo-monkey/</a> .  I use it for most of my recent 1-Game-A-Month and Mochi projects, see <a href="http://www.onegameamonth.com/GoodReactions" target="_blank">http://www.onegameamonth.com/GoodReactions</a> .<br><br>I'm trying to keep it *lean*, i.e. a fairly thin layer on top of Monkey, so you don't lose sight of the underlying Monkey/mojo awesomeness :) Anyone coming from Cocos2d or Flash will recognise my way of doing things (parent/child, displayitems, actions etc). <br><br>A range of example projects are included, including a full game. It is documented and commented throughout (via monkeydoc). My focus is primarily on Flash, html5, iOS, and Android, though I do test the desktop GLFW targets when I can. I have not tested c#/xna. <br><br>If you fancy adding a feature (or fixing something!), let me know, you will be fully acknowledged. Its a work-in-progress. I'm on twitter @goodreactions.<br><br>baz. <br><br></td></tr></table><br>
<a name="2076361"></a>

<a name="2076362"></a>

<a name="2076359"></a>

<a name="2076360"></a>

<a name="2076582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >monkeyteets</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems cool, just a heads up - I had trouble building for desktop because of networkutils.<br><br>I looked at it and saw it's deprecated anyway and the rest of the framework doesn't seem to use it?<br>So looked safe to delete and removing the import and it builds fine.<br><br>The only other case I could see is using the new OpenURL in one of the examples directly. <br><br></td></tr></table><br>
<a name="2076627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bazmonkey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers. That sounds familiar, maybe I didn't check a file in...<br>The platform specific stuff tends to be the trickiest -- and require most testing, of course.<br><br>[EDIT- fixed] <br><br></td></tr></table><br>
<a name="2076594"></a>

<a name="2076607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snader</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work Baz, thank you for sharing this! <br><br></td></tr></table><br>
<a name="2076911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >monkeyteets</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Baz - <br><br>In softtarget example I notice you have multiple backgrounds of essentially the same thing (bg.png, bgipad.png, bgiphone5w.png), but for example on a Galaxy S4 the 16:9 (bgiphone5w.png) background isn't used and you get black borders, I was wondering if theres a reason you went with checking resolution vs the aspect ratio?<br><br>I found this article <a href="http://v-play.net/doc/vplay-different-screen-sizes/" target="_blank">http://v-play.net/doc/vplay-different-screen-sizes/</a> you might like which talks about making a single background that handles different aspect ratios <br><br></td></tr></table><br>
<a name="2076920"></a>

<a name="2076921"></a>

<a name="2076922"></a>

<a name="2076923"></a>

<a name="2076925"></a>

<a name="2076926"></a>

<a name="2076927"></a>

<a name="2076928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bazmonkey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi-<br><br>Yes, I see what you mean, its a bit iOS-centric, your S4 wont check for a double-res wide image (+ I didnt put one in the folder). I could check aspect ratios there. I'm releasing android stuff very soon, so its a timely question... :)<br><br>Good article. The 'letterbox' section is basically what autofit is doing here, and by disabling the clipping border (CONGO_AUTOFIT_NOBORDERS) you let a larger background image fill the screen. Using those larger 'catch-all' background sizes listed in the article is a good (easy) way to do it, and doesn't require any extra resolution checks.  I think its a good compromise - you still work in fixed (autofit) coordinates but fill the background. <br><br>Possibly I'd need to recalc the clipping area -- rather than just disable it -- to be 100% safe, in case the bg doesnt fill the screen. <br><br>I guess the only other downside is loading oversized npot textures (e.g. &gt;512, &gt;1024) on devices that aren't actually using them -- this was often discussed in the past but perhaps its just not relevant these days, even on low-end devices.<br><br>baz <br><br></td></tr></table><br>
<a name="2076994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gianmichele</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi baz,<br><br>I'm creating my own framework as well (it's a good programming exercise) and I'm getting inspired by Congo quite a lot.<br><br>You might be interested in this article. <br><br><a href="https://github.com/MattRix/Futile/wiki/In-depth-explanation-of-ResolutionLevels" target="_blank">https://github.com/MattRix/Futile/wiki/In-depth-explanation-of-ResolutionLevels</a><br><br>I'm going to implement this method so that the hires assets are going to be used in all targets, not just iOS.<br><br>Thanks again for the hard work :)<br><br>Gian <br><br></td></tr></table><br>
<a name="2076999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bazmonkey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aha, Matt Rix knows his stuff -- I used his tips for cocos2d scaling ages ago, but not really followed his Futile work. It is a good exercise, especially when you add retina and autofit into the mix :/  I hope I got everything working correctly, but I'd consider my code to be 'alpha' for a while yet.<br><br>His method looks like a good generalisation of the idea. I think its essentially the same thing (a more generalised version of what cocos2d did) : ie have a threshold display size at which each resource set is used. Unless I misunderstand, he appears to use a maxLength threshold, then scale down; whereas I went for the cautious choice, use a lower res threshold and scale up (?). Maybe it ends up being the same, my brain cant quite work it out!<br><br>I do regret using the hardcoded HD/SD/XHD setup; its on my todo list to change to a more general api where you can just add any res levels and namesâ€¦<br><br>(btw, the iOS issue mentioned above is kind of a different thing - in one of the examples I hard-coded extra backgrounds for specific sizes, overriding my sd/hd/xhd resources, as a way to avoid black bars caused by autofit. It should still pick up the xhd resourses for any display as long as its larger than the threshold size set).<br><br>Edit - if anyone finds good articles about how res scaling is generally done on *desktop* targets, let me know!<br><br>baz <br><br></td></tr></table><br>
<a name="2076998"></a>

<a name="2076997"></a>

<a name="2076996"></a>

<a name="2077747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >monkeyteets</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Baz, I'm using the same pause screen code from the softtarget example, however I'm not showing borders with virtual display - I was wondering whats the best way to draw over the entire screen in congo framework? (escaping the virtual display somehow?) <br><br></td></tr></table><br>
<a name="2077770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bazmonkey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, that is indeed a bit awkward! I've enabled some coordinate transforms in the autofit code. Basically, you're asking for the device limits but from within the virtual coordinate space:<br><br><pre class=code>
 DrawRect( ToVirtualPosX(0), ToVirtualPosY(0), 
 	ToVirtualPosX(DeviceWidth() ) - ToVirtualPosX(0),
 	ToVirtualPosY(DeviceHeight() ) - ToVirtualPosY(0)  )
</pre><br><br>ie it should result in negative coordinates, outside the usual virtual display area.<br>I guess if you decide to position anything around the edges of the display (outside the virtual display area), you'd need to do lots of this - unless its just a centered background.<br><br>Alternatively, you could override CongoApp OnRender and draw things before UpdateVirtualDisplay() is called, but that trick will only work there, not within Draw code for layers etc. <br><br></td></tr></table><br>
<a name="2077752"></a>

<a name="2077753"></a>

<a name="2077755"></a>

<a name="2077756"></a>

<a name="2077757"></a>

<a name="2077758"></a>

<a name="2077759"></a>

<a name="2077760"></a>

<a name="2077761"></a>

<a name="2077762"></a>

<a name="2077763"></a>

<a name="2077764"></a>

<a name="2077766"></a>

<a name="2077863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >monkeyteets</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hurr, I should have see that function, that worked a charm, thanks!<br><br>For me the virtualpos y functions were commented but I saw you updated them in source. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
