<!DOCTYPE html><html lang="en" ><head ><title >miniB3D - part 3</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >miniB3D - part 3</h1><a href="forums.php" >Monkey Forums</a>/<a href="topics.php?forum=524" >User Modules</a>/<a href="#bottom" >miniB3D - part 3</a><br><br>
<a name="2041579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>minib3d+monkey</b><br>Download:<br><a href="https://github.com/adamredwoods/minib3d-monkey" target="_blank">https://github.com/adamredwoods/minib3d-monkey</a><br><br>Thread continued from:<br><a href="http://monkeycoder.co.nz/Community/posts.php?topic=2798" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=2798</a><br><br>Latest update (v0.31):<br><a href="http://monkeycoder.co.nz/Community/post.php?topic=3211&amp;post=41264" target="_blank">http://monkeycoder.co.nz/Community/post.php?topic=3211&amp;post=41264</a><br><br><br>notes:<br>- current branch: v0.31 requires Monkey V66<br>- tested on glfw, android, macos, ios, xna<br><br>Works!<br>- normals work<br>- textures, mipmaps work<br>- android, works<br>- vbos and non-vbo fallback works<br>- sprites<br>- batch sprites<br>- context handling for mobile devices<br>- pick (optimized)<br>- collisions<br>- binary load for b3d files (base64)<br>- animation, bone &amp; vertex<br>- Load OBJ<br>- animated textures<br>- XNA target (courtesy of Rone)<br>- HTML5 (webGL)<br>- Shaders<br>- normal mapping (opengl2.0)<br><br><br>To Do:<br>- move to quat/matrix internals<br>- glow shaders, shadows, fast vertex shaders<br>- MDD/3DS loaders<br>- terrain<br><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/P1040945b.jpg"><br><img src="http://i295.photobucket.com/albums/mm144/adamredwoods/xna.jpg"> <br><br></td></tr></table><br>
<a name="2041265"></a>

<a name="2041236"></a>

<a name="2037563"></a>

<a name="2034440"></a>

<a name="2034439"></a>

<a name="2033258"></a>

<a name="2033257"></a>

<a name="2033256"></a>

<a name="2033255"></a>

<a name="2033252"></a>

<a name="2033254"></a>

<a name="2033289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>First of all, my English sucks...so if anything is unclear ask, please!<br><br>I would like to have a discussion about shader management eg the explosion of permutations...[Vertex lighting alone introduces over a million permutations]<br><br>In the case of monkey + minib3d, the integration of X targets and their various interfaces must also be managed: opengl-&gt; glsl, xna/metro -&gt; hlsl and pss -&gt; cg...<br><br>With the current interface architecture, you can indeed quickly and easily add new targets, although it is virtually impossible to add new 'features', without any hack to all targets + the minib3d core.<br><br>'-----------------------------------------<br><br>The first step is an common graphics interface. It could be used to add new effects or enhancing minib3d without having to write target specific MONKEY code.<br><pre class=code>
local effect:= XEffect.Load("water")' loads accordant shader for the target
'...
device.SetClipPlane(..)
'...
</pre><br>I will implement my xna interface using opengl, for testing purpose...I think that should not be expensive ..<br><br>'-----------------------------------------<br><br>If an common interface exists, you can add shader, without having to write target-specific monkey code for example, but on real projects its still far too big and hard to handle, because all the permutations of new and existing 'features' must be considered...impossible!<br><br>An common solution is  a single shader that implements all desired features, and let the application disable the not required features. This can be achieved in various ways:<br><br>1. simply ignoring unwantet calculations using shader constants.<br>  <br>2. switching shader features using static flow control.<br><br>3. doin it in a preprocess,  using #ifndef blocks to enable and disable various parts of the      code<br><br>Cons:<br> - all shaders in one big monolithic program<br> - wastes GPU horsepower<br> - you will pretty quickly reach the limits. maximum arithmetic calculation, etc..<br> - difficult to maintain<br> - error-prone<br><br>bad coding practice in the conclusion!<br><br>Btw. Thats the way I did it, and Im pretty sure Adam did it the same in glsl.<br><br>'-----------------------------------------<br><br>An alternative approach is to write many small fragments of shader code, and then concatenate these into various combinations. (needs to be done at compile time since xbox360 and the xna redistrubutable do not contain effect- processors/compilers).<br><br>So, I experimented with shader fragments a little and came up with this... specified one fragment per file...for example:<br>- base.frag<br>- vertexcolor.frag<br>- materialcolor.frag<br>- lighting.frag<br>- textures.frag<br>- fog.frag<br>- ...<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
&lt;fragment name="texture$"&gt;
	&lt;params&gt;
	     texture texture$;
	     sampler textureSampler$ = sampler_state { Texture = &lt;texture0&gt;;AddressU = Wrap; AddressV = Wrap; };
	&lt;/params&gt;
	&lt;vs_in&gt;
	   float4 TexCoord0;
	   float4 TexCoord1;
	&lt;/vs_in&gt;
	&lt;ps&gt;
		float2 coords = textureStages$.coords == 0 ? input.TextureCoordinate0 : input.TextureCoordinate1;
		Color *= tex2D(textureSampler$, coords * textureStages$.scale + textureStages$.offset);
	&lt;/ps&gt;
	&lt;vs&gt;
		output.TextureCoordinate0 = input.TextureCoordinate0;
		output.TextureCoordinate1 = input.TextureCoordinate1;
	&lt;/vs&gt;
&lt;/fragment&gt;

&lt;fragment name="vertexColor"&gt; 
	
		&lt;vs_in&gt;
		   float4 Color;
		&lt;/vs_in&gt;
		  
		&lt;vs_out&gt;
		   float4 Color;
		&lt;/vs_out&gt;
		
		&lt;vs&gt;
			void _main_(_INPUT_ input, inout _OUTPUT_ output)
			{
				output.Color = input.Color;
			}
		&lt;/vs&gt;
		
	&lt;/fragment&gt;
</textarea><br>An generated fragment, which can be included by the accordant shader permutation, looks as follows:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
struct base_INPUT
{
	 float4 Position;
	 float4 Normal;
	 float4 Color;
	 float4 TexCoord0;
	 float4 TexCoord1;
}

struct base_OUTPUT
{
	 float4 Position;
	 float4 WorldPos;
}

void base_ps(base_OUTPUT input, inout OUTPUT output) 
{
 export(float4, Shading, AmbientColor);
 }

void base_vs(base_INPUT input, inout base_OUTPUT output) 
{
 float4 worldPosition = mul(input.Position, world);
 float4 viewPosition = mul(worldPosition, view);
 output.Position = mul(viewPosition, projection);
 output.WorldPos = mul( input.Position, world);
 }
</textarea><br><br>Shader capatibilities are simple defined by a string for example: "base,lighting,fog", and naturally all needed combinations can be easily pregenerated. <br><br>Pros:<br>- clean code organization<br>- easy and fast to extend(even if you implement an deferred renderer, the fragments need NO change)<br>- pretty fast and compact shader code<br>- new features can be easily added by creating an new fragment ...'refraction.frag', for example. <br><br>Cons:<br>- need to describe a precise interface to each fragment, which makes it hard to plug in 3rd party shader code. In practice it rarely takes more than a few minutes to add the required annotations...*<br><br>For me personally, is another relevant point that such a system can be easily extended in order to be truly platform independent:<br><br><pre class=code>
&lt;fragment name="pointlight"&gt;
	&lt;shader version="3"&gt;
		&lt;ps&gt;
		&lt;dot name="NL" a="WoldNormal,LightDir"/&gt;
		&lt;clamp name="lambertTerm" in="NL,0,1" /&gt;
		&lt;cmp_greater in="lambertTerm,0"&gt;
			&lt;mul name="shade" in="lambertTerm,LightAttentuationColor"
			&lt;Shading in="shade" /&gt;
		&lt;/cmp_greater&gt;
		&lt;/ps&gt;
	&lt;/shader&gt;
&lt;/fragment&gt;
</pre><br><br>Here' a detailed description of the concept by Shawn Hargreaves:<br>* <a href="http://www.shawnhargreaves.com/hlsl_fragments/hlsl_fragments.html" target="_blank">http://www.shawnhargreaves.com/hlsl_fragments/hlsl_fragments.html</a><br><br>and some other links:<br><a href="http://blogs.msdn.com/b/shawnhar/archive/2009/08/17/combining-shaders.aspx" target="_blank">http://blogs.msdn.com/b/shawnhar/archive/2009/08/17/combining-shaders.aspx</a><br><a href="http://preview.library.microsoft.com/en-us/library/ee416565(v=vs.85).aspx" target="_blank">http://preview.library.microsoft.com/en-us/library/ee416565(v=vs.85).aspx</a><br><br>What do you think? <br><br></td></tr></table><br>
<a name="2033288"></a>

<a name="2033287"></a>

<a name="2033286"></a>

<a name="2033285"></a>

<a name="2033284"></a>

<a name="2033282"></a>

<a name="2033294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here' the update<br><a href="http://www.load.to/EfTIkw63Da/minib3d_0.2.65.zip" target="_blank">http://www.load.to/EfTIkw63Da/minib3d_0.2.65.zip</a><br><br>Includes the full featured xna windows/xbox360 sm3 driver<br><br>@Rex Rhino:<br>Maybe you can test it on xbox360? <br><br></td></tr></table><br>
<a name="2033324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What do you think?  <br></div><br>I agree. Thoughts:<br><br>-- how do the end-users (game coders) implement the shader frags? not ideal to compile all variations<br>-- a common shader language would not be optimized (mobile gfx are not so great at optimization)<br>-- hardware inconsistencies (Intel IGP/WebGL/Android are picky). this is a trial and error thing<br><br>I like shader fragments, this is a good idea and I had thought about this. Right now my shader is one big mess, and terrible on Android. (but i wrote a few others for speed)<br><br>A common graphics interface:<br>Perhaps look at Ogre and Unity to see how they did theirs? I would be open to copying one so we can use their existing shaders. Unity uses a HLSL base and has a translator to convert to GLSL. May be too much for our purposes, and I do like the XML over Cg/script. <br><br></td></tr></table><br>
<a name="2033386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>-- how do the end-users (game coders) implement the shader frags? not ideal to compile all variations<br> <br></div><br>If the end user wants to add parallax mapping functionality,for example...the pipeline could looks as follows:<br><br>1. Create a new fragment named parralax.frag and save it to /driver/fragments<br><pre class=code>
&lt;interface name="ParralaxMapping"&gt;
	&lt;params&gt;
		&lt;param Type="texture" name"NormalMapTex" /&gt;
	&lt;/params&gt;
	&lt;ps version="3"&gt;
		void _main_(_INPUT_ Input, inout _OUTPUT_ output)
		{
			//...
		}
	&lt;ps&gt;
&lt;/interface&gt;
</pre><br>2. Rebuild the fragments.(custom build steps would be great / Of course, only new or modified fragments needs to be build, as well as new permutations needs to be added)<br><br>3. Using the parralax functionality with minib3d:<br><pre class=code>
Local brush:= CreateBrush()
Local itf:= brush.Interfaces.Find("ParralaxMapping")
If itf Then 
	Local p:= itf.Parameters.Find("NormalMapTex")
	p.SetValue(my_normalmap_tex)
End 
' of course, the default TBrush funktionality still works
brush.BrushColor(255,200,100)
</pre><br>It is even possible to extend the existing brush, for a simplified interface which takes care for mandatory initialization or updates, for example:<br><pre class=code>
Type TBumpMapBrush Extends TBrush

	Field _normalMapTexParam:TBrushParameter
	
	Method New()
		Local itf:= Interfaces.Find("ParralaxMapping")
		If Not itf Then 
			Print "error: ParralaxMapping interface Not available. Need to rebuild fragments?"
			End 
		EndIf 
		_normalMapTexParam= itf.Parameters.Find("NormalMapTex")
	EndIf 
	
	Method SetNormalMapTexture(texture:TTexture)
		_normalMapTexParam.SetValue(texture)
	End 
	
EndType 
</pre><br><br><div class="quote"> <br>a common shader language would not be optimized (mobile gfx are not so great at optimization)<br> <br></div><br>yes. Using a hlsl base and translate it to glsl/cg might be better, as you suggested. <br><br></td></tr></table><br>
<a name="2033367"></a>

<a name="2033366"></a>

<a name="2033365"></a>

<a name="2033361"></a>

<a name="2033358"></a>

<a name="2033357"></a>

<a name="2033356"></a>

<a name="2033355"></a>

<a name="2033562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good news everyone!<br><br>I have the normal mapping working, so this means I'll polish up everything and get ready for the next release. WHEW! I'M TIRED. <br><br></td></tr></table><br>
<a name="2033583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, looking forward to it. <br><br></td></tr></table><br>
<a name="2033709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well done Adam! :) <br><br></td></tr></table><br>
<a name="2033926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi :)<br>How can I use collisions? I tried but it does not work:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Strict
Import mojo
Import minib3d
#If TARGET = "glfw" Or TARGET = "xna"
	Import os
#End

Global physicstype%=2	'collsion type of physics objects
Global colType%=3	'collision type of static objects

Class CTable
	Field pivot:TPivot
	Field mesh:TMesh
	
	Method New(cam:TCamera, r#, g#, b#, sx#=5.0, sy#=0.2, sz#=5.0)
		pivot = CreatePivot()
		cam.EntityParent(pivot)
		mesh = CreateCube()
		mesh.EntityColor(r, g, b)
		mesh.ScaleEntity(sx, sy, sz)
	End
	
	Method Update:void()
		pivot.TurnEntity(KeyDown(KEY_UP)-KeyDown(KEY_DOWN), KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT), 0.0)
		'pivot.MoveEntity(0.0, KeyDown(KEY_W)-KeyDown(KEY_S)/2.0, 0.0)
	End
End

Class MyApp Extends App
	Field stol:CTable
	Field cam:TCamera
	Field light:TLight
	Field ball:TMesh
	
	Method OnCreate:int()
		Graphics3DInit()
		SetUpdateRate 60
		
		cam = CreateCamera()
		cam.CameraClsColor(50.0, 150.0, 250.0)
		light = CreateLight(1, cam)
		'light.RotateEntity(90,0,0)	
		stol = New CTable(cam, 250.0, 150.0, 50.0)
		stol.mesh.EntityType(colType)
		cam.PositionEntity(0, 0, -15, True)
		ball = CreateSphere()
		ball.PositionEntity(0.0, 10.0, 0.0)
		ball.EntityColor(255.0, 0.0, 0.0)
		ball.EntityType(physicstype)
		Collisions(physicstype, colType, 2, 2)
		Return(0)
	End
	
	Method OnUpdate:Int()
		If KeyHit(KEY_ESCAPE)
			#If TARGET = "glfw" Or TARGET = "xna"
				ExitApp(0)
			#end
		Endif
		ball.TranslateEntity(0.0, -0.1, 0.0)
		stol.Update()
		UpdateWorld(0)
		Return(0)
	End
	
	Method OnRender:int()
	
		RenderWorld()
		Return(0)
	End
End

Function Main:Int()
	New MyApp
	Return(0)
End</textarea> <br><br></td></tr></table><br>
<a name="2033976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> How can I use collisions? I tried but it does not work: <br></div><br><br>OnUpdate()<br><pre class=code>
If ball.EntityCollided(colType) Then move_y=0; Print "hit"
'' or
If ball.CollisionY() Then Print "hit"
</pre> <br><br></td></tr></table><br>
<a name="2033979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks :) <br>This means that collisions are different than in blitz3d. sphere does not stop itself when it detects a collision, I have to use something like: If ball.EntityCollided (colType) = 0 Then move_y <br><br></td></tr></table><br>
<a name="2034050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> This means that collisions are different than in blitz3d. <br></div><br><br>No. You found a bug! Congratulations!<br><br>Line 298 in functions.monkey<br><pre class=code>
Function Collisions(src_no,dest_no,method_no,response_no:Int=0)
	TCollisionPair.Collisions(src_no,dest_no,method_no,response_no)
End 
</pre> <br><br></td></tr></table><br>
<a name="2034055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks, great work :) <br><br></td></tr></table><br>
<a name="2034131"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, unfortunately, something is wrong here, BlitzMax's + minib3d collisions are different.<br><br><b>BlitzMax + minib3d:</b><br>[bbcode]Import sidesign.minib3d<br>Graphics3D 640, 480<br><br><br>Type TTable <br>	Field pivot%<br>	Field mesh%<br><br>	Function Create:TTable(cam:TCamera, r#, g#, b#, sx#=5.0, sy#=0.2, sz#=5.0)<br>		Local t:TTable = New TTable<br>		t.pivot = CreatePivot()<br>		EntityParent(cam, t.pivot)<br>		t.mesh = CreateCube()<br>		EntityColor(t.mesh, r, g, b)<br>		ScaleEntity(t.mesh, sx, sy, sz)<br>		Return t<br>	End function<br><br>	Method Update()<br>		TurnEntity(pivot, KeyDown(KEY_UP)-KeyDown(KEY_DOWN), KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT), 0.0)<br>	End Method<br>EndType	<br>	 <br>Const physicstype%=2	'B3D Collsion Type of physics objects<br>Const colType%=3<br><br>Global cam% = CreateCamera()<br>CameraClsColor(cam, 50.0, 150.0, 250.0)<br>Global stol:TTable = TTable.Create(cam, 250.0, 150.0, 50.0)<br>Global light% = CreateLight(1, cam)<br>EntityType(stol.mesh,colType)<br>PositionEntity(cam, 0, 0, -15, True)<br><br>Global ball% = CreateSphere()<br>PositionEntity(ball, 0.0, 10.0, 0.0)<br>EntityColor(ball, 255.0, 0.0, 0.0)<br>EntityType(ball, physicstype)<br><br>Collisions(physicstype, colType, 2, 2)<br><br>While Not KeyHit(KEY_ESCAPE)<br>	Cls()<br>	TranslateEntity(ball, 0.0, -0.1, 0.0)<br>	stol.Update()<br>	UpdateWorld()<br>	RenderWorld()<br>	Flip()<br>Wend	<br>End[/bbcode]<br>result:<br><img src="http://img228.imageshack.us/img228/7194/colblitzmaxgood.png"><br><br><b>Monkey + minib3d:</b><br>[monkeycode]Strict<br>Import mojo<br>Import minib3d<br>#If TARGET = "glfw" Or TARGET = "xna"<br>	Import os<br>#End<br><br>Const physicstype%=2	' B3D Collsion Type of physics objects<br>const colType%=3		' collision type of static objects<br><br>Class CTable<br>	Field pivot:TPivot<br>	Field mesh:TMesh<br>	<br>	Method New(cam:TCamera, r#, g#, b#, sx#=5.0, sy#=0.2, sz#=5.0)<br>		pivot = CreatePivot()<br>		cam.EntityParent(pivot)<br>		mesh = CreateCube()<br>		mesh.EntityColor(r, g, b)<br>		mesh.ScaleEntity(sx, sy, sz)<br>	End<br>	<br>	Method Update:void()<br>		pivot.TurnEntity(KeyDown(KEY_UP)-KeyDown(KEY_DOWN), KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT), 0.0)<br>	End<br>End<br><br>Class MyApp Extends App<br>	Field stol:CTable<br>	Field cam:TCamera<br>	Field light:TLight<br>	Field ball:TMesh<br>	<br>	Method OnCreate:int()<br>		Graphics3DInit()<br>		SetUpdateRate 60<br>		<br>		Collisions(physicstype, colType, 2, 2)<br>		cam = CreateCamera()<br>		cam.CameraClsColor(50.0, 150.0, 250.0)<br>		light = CreateLight(1, cam)<br>		stol = New CTable(cam, 250.0, 150.0, 50.0)<br>		stol.mesh.EntityType(colType)<br>		cam.PositionEntity(0, 0, -15, True)<br>		ball = CreateSphere()<br>		ball.PositionEntity(0.0, 10.0, 0.0)<br>		ball.EntityColor(255.0, 0.0, 0.0)<br>		ball.EntityType(physicstype)<br>		<br>		Return(0)<br>	End<br>	<br>	Method OnUpdate:Int()<br>		If KeyHit(KEY_ESCAPE)<br>			#If TARGET = "glfw" Or TARGET = "xna"<br>				ExitApp(0)<br>			#end<br>		Endif<br>		ball.TranslateEntity(0.0, -0.1, 0.0)<br>		stol.Update()<br>		UpdateWorld(0)<br>		Return(0)<br>	End<br>	<br>	Method OnRender:int()<br>		RenderWorld()<br>		Return(0)<br>	End<br>End<br><br>Function Main:Int()<br>	New MyApp<br>	Return(0)<br>End[/monkeycode]<br>result:<br><img src="http://img40.imageshack.us/img40/2091/colmonkeywrong.png"> <br><br></td></tr></table><br>
<a name="2034142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hi, unfortunately, something is wrong here <br></div><br>yes, in my quest to accelerate collisions (mainly to be usable on android) some things got broken. TPick works, and I thought collisions worked except for sliding, but it appears that it is still wrong.<br><br>i've done a little digging and my collision normals in the ray-to-triangle method are coming out wrong, but when i fix them, then tpick ceases to work.<br><br>this is a lot of math work to figure out, so unfortunately, it may take me a while. <br><br></td></tr></table><br>
<a name="2034146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thank you and good luck :) This is a great minib3d port, better than in my dreams. <br><br></td></tr></table><br>
<a name="2034231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br>collisions works when I use ScaleMesh(), RotateMesh() instead of ScaleEntity(), RotateEntity() etc.<br><br>[monkeycode]Strict<br>Import mojo<br>Import minib3d<br>#If TARGET = "glfw" Or TARGET = "xna"<br>        Import os<br>#End<br><br>Const physicstype%=2    ' B3D Collsion Type of physics objects<br>const colType%=3                ' collision type of static objects<br><br>Class CTable<br>        Field pivot:TPivot<br>        Field mesh:TMesh<br>        <br>        Method New(cam:TCamera, r#, g#, b#, sx#=5.0, sy#=0.2, sz#=5.0)<br>                pivot = CreatePivot()<br>                cam.EntityParent(pivot)<br>                mesh = CreateCube()<br>                mesh.EntityColor(r, g, b)<br>                mesh.ScaleMesh(sx, sy, sz)  '&lt;-----HERE<br>                mesh.RotateMesh(10, 10, 10) '&lt;----- added to see effects<br>        End<br>        <br>        Method Update:void()<br>                pivot.TurnEntity(KeyDown(KEY_UP)-KeyDown(KEY_DOWN), KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT), 0.0)<br>        End<br>End<br><br>Class MyApp Extends App<br>        Field stol:CTable<br>        Field cam:TCamera<br>        Field light:TLight<br>        Field ball:TMesh<br>        <br>        Method OnCreate:int()<br>                Graphics3DInit()<br>                SetUpdateRate 60<br>                <br>                Collisions(physicstype, colType, 2, 2)<br>                cam = CreateCamera()<br>                cam.CameraClsColor(50.0, 150.0, 250.0)<br>                light = CreateLight(1, cam)<br>                stol = New CTable(cam, 250.0, 150.0, 50.0)<br>                stol.mesh.EntityType(colType)<br>                cam.PositionEntity(0, 0, -15, True)<br>                ball = CreateSphere()<br>                ball.PositionEntity(0.0, 10.0, 0.0)<br>                ball.EntityColor(255.0, 0.0, 0.0)<br>                ball.EntityType(physicstype)<br>                <br>                Return(0)<br>        End<br>        <br>        Method OnUpdate:Int()<br>                If KeyHit(KEY_ESCAPE)<br>                        #If TARGET = "glfw" Or TARGET = "xna"<br>                                ExitApp(0)<br>                        #end<br>                Endif<br>                ball.TranslateEntity(0.0, -0.1, 0.0)<br>                stol.Update()<br>                UpdateWorld(0)<br>                Return(0)<br>        End<br>        <br>        Method OnRender:int()<br>                RenderWorld()<br>                Return(0)<br>        End<br>End<br><br>Function Main:Int()<br>        New MyApp<br>        Return(0)<br>End[/monkeycode] <br><br></td></tr></table><br>
<a name="2034264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm getting an error during startup of my game. This is what it shows.<br><br><img src="http://www.amon.co/storage/heap_error.jpg"><br><br>Any ideas as to what is causing it? I can click Abort and continue with my game but after a while it crashes.<br><br>[edit]Turns out it was an error with the base64 encoding of the 3d model I'm using. I tried another site <a href="http://www.motobit.com/util/base64-decoder-encoder.asp" target="_blank">http://www.motobit.com/util/base64-decoder-encoder.asp</a> and it works now. :) <br><br></td></tr></table><br>
<a name="2034253"></a>

<a name="2034277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rex Rhino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Rone,<br><br>Sorry for replying so late... I haven't had time to check out the website in a while. I will test on the Xbox360 later today! <br><br></td></tr></table><br>
<a name="2034297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> collisions works when I use ScaleMesh(), RotateMesh() <br></div><br>Great for finding this! I think I may know what the problem is then.<br><br>...<br><div class="quote"> Turns out it was an error with the base64 encoding of the 3d model I'm using. <br></div><br>Interesting. I hope the next release will fix some odd problems.<br><br>I'm hoping to release it tonight. <br><br></td></tr></table><br>
<a name="2034444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> !!!!!!!<br><br>I've updated minib3d+monkey master on github.<br><a href="https://github.com/adamredwoods/minib3d-monkey" target="_blank">https://github.com/adamredwoods/minib3d-monkey</a><br><br>It is now the latest version that I've been working on. There is still work to be done on it.<br><br>New features:<br>- HTML5<br>- Xna reach profile<br>- Opengl 2.0 shaders<br><br>Notes:<br>- for a more robust XNA, you may want to look at Rone's XNA version.<br>- Shaders are not where I want them to be, but they are functional. I'll have to provide heavy documentation at some point.<br>- to get Opengl2.0, change the import to read:<br><pre class=code>Import minib3d.opengl.opengl20</pre><br>- all other targets will auto-import based on target specified.<br>- see notes v0.30 file<br>- to use shaders, TShaderGLSL.LoadDefaultShader(vp file, fp file) to change the main shader<br>- to use a default shader or your own shader, just add TShaderGLSL.LoadDefaultShader(New FastBrightShader)<br>- the full shader includes Normal Mapping on texture0 (and TextureFX bit 1024)<br>- writing shaders is not easy business, each target is particular<br><br>Notes HTML5 (webGL):<br>- use TPixmap.PreLoadPixmap([file array]) to preload your textures.<br><br>I've been too absorbed with this project, so I'll need to sit back and just do a bug-maintenance mode. I'll try to fix collisions when I have time, but for now I need to refocus on other exciting projects. <br><br></td></tr></table><br>
<a name="2034443"></a>

<a name="2034442"></a>

<a name="2034441"></a>

<a name="2034438"></a>

<a name="2034437"></a>

<a name="2034454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> gl.clearDeptf() is not a function? ;) HTML5 will not work. <br><br></td></tr></table><br>
<a name="2034475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got the pick collision example to work with HTML5 by commenting out the txt commands, the other examples wont load the models or sprites.  Tried to load a test level using GLFW and it seems that parts of the models get scrambled also no textures if I try GLES20.<br><br>Thanks for the hard work its getting there. <br><br></td></tr></table><br>
<a name="2034480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good work! <br><br>I will merge this with my latest implementation...It would be great if we can synchronize our work somehow, because otherwise there its a pretty time consuming task...<br><br><div class="quote"> <br>I've noticed odd slowing factors at around 100 zombies (1 fps)  compared to 80 (30 fps) . very strange. <br> <br></div><br>I'm pretty sure that this is caused by the c# DataBuffer implementation used in VertexDataBuffer. Because of the lack of unsafe code support on windows phone, I used System.BitConverter, what seems to be very slow...<br><br>When implementing VertexDataBuffer extern using float[] or VERTEX[] it will run at full speed, and also a little faster than the openGL implementation on windows, at least...<br><br><div class="quote"> <br>+vertex animation copies the buffer, this can be slow, but it may not always be the slowness factor.<br> <br></div><br>Also avoidable, when implementing VertexDataBuffer extern. <br><br></td></tr></table><br>
<a name="2034487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, after update to Monkey V60 i get this error:<br><div class="quote"> <br>Monkey Runtime Error : [Exception... "Not enough arguments"  nsresult: "0x80570001 (NS_ERROR_XPC_NOT_ENOUGH_ARGS)"  location: "JS frame :: http://localhost:65282/main.js :: _glTexImage2D2 :: line 1752"  data: no]<br><br>C:/Dev/MonkeyPro/modules/minib3d/opengl/opengles20.monkey&lt;1218&gt;<br>C:/Dev/MonkeyPro/modules/minib3d/ttexture.monkey&lt;123&gt;<br>C:/Dev/MonkeyPro/modules/minib3d/ttext.monkey&lt;76&gt;<br>C:/Dev/MonkeyPro/modules/minib3d/examples/pick_collision_test.monkey&lt;65&gt;<br>C:/Dev/MonkeyPro/modules/minib3d/examples/pick_collision_test.monkey&lt;93&gt;<br>C:/Dev/MonkeyPro/modules/mojo/app.monkey&lt;57&gt;<br> <br></div> <br><br></td></tr></table><br>
<a name="2034569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have Html5 problems, make sure you preload textures or else it won't find the images. I use a different method than Monkey does Since I make sure the pixmap is a power of two and modify it if it isn't.<br><br>I'll try to test this version on a fresh install and see of I can't isolate some bugs.<br><br>Thanks for testing everyone, it'll get there eventually.<br><br><br>@Rone<br>Yeah, I notice you use external VertexDataBuffer and was trying to think of a clean way to allow differentiations for this class. I would like to keep implementations in monkey code but perhaps all targets should be extern? I may need to ask Mark for ideas on how monkey can do this without excessive #IF TARGET commands (and same target could have multiple definitions). <br><br></td></tr></table><br>
<a name="2034659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rex Rhino</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am having trouble getting it to run with XNA. I remember there was some instructions for modifying the Monkey source code to get it running... Are those up to date? <br><br></td></tr></table><br>
<a name="2034687"></a>

<a name="2034688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> If u are talking about my latest hiDef implementation, I have only tested with v58. Reach is running without changes. <br><br>Its not possible to plug in the latest xna driver into the latest miniB3d Version.<br><br><br>src\trans\target.monkey<br><pre class=code>
        Field FX_FILES$
        '...
        FX_FILES=Env.Get( "FX_FILES" )
        '...
        If FX_FILES    DATA_FILES+="|"+FX_FILES
</pre><br><br>src\trans\targets\xna.monkey<br><pre class=code>
                If MatchPath( r,FX_FILES )
                                        cont.Push "  &lt;ItemGroup&gt;"
                                        cont.Push "    &lt;Compile Include=~q"+t+"~q&gt;"
                                        cont.Push "      &lt;Name&gt;"+f+"&lt;/Name&gt;"
                                        cont.Push "      &lt;CopyToOutputDirectory&gt;Always&lt;/CopyToOutputDirectory&gt;"
                                        cont.Push "              &lt;Importer&gt;EffectImporter&lt;/Importer&gt;"
                                        cont.Push "              &lt;Processor&gt;EffectProcessor&lt;/Processor&gt;"
                                        cont.Push "    &lt;/Compile&gt;"
                                       cont.Push "  &lt;/ItemGroup&gt;"

</pre><br>targets\xna\CONFIG<br><pre class=code>
        - FX_FILES=*.fx
</pre><br>Then build and run \src\rebuildall.bmx. <br><br></td></tr></table><br>
<a name="2034685"></a>

<a name="2034684"></a>

<a name="2034683"></a>

<a name="2034682"></a>

<a name="2035161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> updated, fixed HTML5 problem.<br><br>Remember, HTML5 must have textures preloaded (using the included PreloadPixmap command) or it will fail. See FirePaint3d example:<br><pre class=code>
TPixmap.PreLoadPixmap(["blitzlogo.png","stars.png","bluspark.png"])
</pre><br>will return 1 when finished, so you can create a loop and display an animated loading symbol.<br><br><br>Tested GLFW windows7, works ok.<br>Opengl11 works on OSX, but gles20 and on iOS simulator, I am having strange install issues, so that will have to wait (can't find OpenGL headers).<br><br><div class="quote"> <br>Tried to load a test level using GLFW and it seems that parts of the models get scrambled also no textures if I try GLES20. <br></div><br>i may need a test file. is this win or osx? <br><br></td></tr></table><br>
<a name="2035160"></a>

<a name="2036311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, can You try my code? It's works in GLFW and Android, but html5 gave me black screen and: <br><b>*glerror: 1282<br>*tex</b><br>I'm using Chrome 21.0.1180.75, Monkey v61b, minib3d v30<br><br>[monkeycode]Strict<br>Import minib3d<br><br>Class MyApp Extends App<br>	Field skybox:TMesh<br>	Field cam:TCamera<br>	Field light:TLight<br>	<br>	Method OnCreate:Int()<br>		SetRender()	<br>		SetUpdateRate(30)<br>		TPixmap.PreLoadPixmap(["niebo.jpg", "niebo_gora.jpg", "niebo_dol.jpg"])<br>		cam = CreateCamera()<br>		cam.PositionEntity(0, 0, -10)<br>		light = CreateLight(1, cam)<br>		#If TARGET="html5"<br>			light.RotateEntity(-180, 0, 0)<br>		#end<br>		skybox = LoadSkyBox()<br>		Return 0<br>	End<br>	<br>	Method OnUpdate:Int()<br>		skybox.TurnEntity(1.0, 1.0, 1.0)<br>		UpdateWorld()<br>		Return 0<br>	End<br>	<br>	Method OnRender:Int()<br>		RenderWorld()<br>		Return 0<br>	End<br>End<br><br>Function LoadSkyBox:TMesh()<br>	Local m:TMesh = CreateMesh(), s:TSurface, b:TBrush<br>	'front face<br>	b = LoadBrush("niebo.jpg", 49)<br>			s = CreateSurface(m, b)<br>			AddVertex(s, -1, +1, -1, 0, 0)<br>			AddVertex(s, +1, +1, -1, 1, 0)<br>			AddVertex(s, +1, -1, -1, 1, 1)<br>			AddVertex(s, -1, -1, -1, 0, 1)<br>			AddTriangle(s, 0, 1, 2)<br>			AddTriangle(s, 0, 2, 3)<br>			FreeBrush(b)<br>	'Right face<br>	b = LoadBrush("niebo.jpg", 49)<br>			s = CreateSurface(m, b)<br>			AddVertex(s, +1, +1, -1, 0, 0)<br>			AddVertex(s, +1, +1, +1, 1, 0)<br>			AddVertex(s, +1, -1, +1, 1, 1)<br>			AddVertex(s, +1, -1, -1, 0, 1)<br>			AddTriangle(s, 0, 1, 2)<br>			AddTriangle(s, 0, 2, 3)<br>			FreeBrush(b)<br>	'back face<br>	b = LoadBrush("niebo.jpg", 49)<br>			s = CreateSurface(m, b)<br>			AddVertex(s, +1, +1, +1, 0, 0)<br>			AddVertex(s, -1, +1, +1, 1, 0)<br>			AddVertex(s, -1, -1, +1, 1, 1)<br>			AddVertex(s, +1, -1, +1, 0, 1)<br>			AddTriangle(s, 0, 1, 2)<br>			AddTriangle(s, 0, 2, 3 )<br>			FreeBrush(b)<br>	'Left face<br>	b = LoadBrush("niebo.jpg", 49)<br>			s = CreateSurface(m, b)<br>			AddVertex(s, -1, +1, +1, 0, 0)<br>			AddVertex(s, -1, +1, -1, 1, 0)<br>			AddVertex(s, -1, -1, -1, 1, 1)<br>			AddVertex(s, -1, -1, +1, 0, 1)<br>			AddTriangle(s, 0, 1, 2)<br>			AddTriangle(s, 0, 2, 3) <br>			FreeBrush(b)<br>	'top face<br>	b = LoadBrush("niebo_gora.jpg", 49)<br>			s = CreateSurface(m, b)<br>			AddVertex(s, -1, +1, +1, 0, 1)<br>			AddVertex(s, +1, +1, +1, 0, 0)<br>			AddVertex(s, +1, +1, -1, 1, 0)<br>			AddVertex(s, -1, +1, -1, 1, 1)<br>			AddTriangle(s, 0, 1, 2)<br>			AddTriangle(s, 0, 2, 3)<br>			FreeBrush(b)<br>	'bottom face	<br>	b = LoadBrush("niebo_dol.jpg", 49)<br>			s = CreateSurface(m, b)<br>			AddVertex(s, -1, -1, -1, 1, 0)<br>			AddVertex(s, +1, -1, -1, 1, 1)<br>			AddVertex(s, +1, -1, +1, 0, 1)<br>			AddVertex(s, -1, -1, +1, 0, 0)<br>			AddTriangle(s, 0, 1, 2)<br>			AddTriangle(s, 0, 2, 3)<br>			FreeBrush(b)<br>			<br>	ScaleMesh(m, 40, 40, 40)<br>	FlipMesh(m)<br>	EntityFX(m, 1)<br>	Return m<br>End<br><br>Function Main:Int()<br>	New MyApp<br>	Return 0<br>End[/monkeycode]<br><a href="https://dl.dropbox.com/u/19717737/skybox.zip" target="_blank">Download</a> <br><br></td></tr></table><br>
<a name="2036062"></a>

<a name="2036206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hi, can You try my code? It's works in GLFW and Android, but html5 gave me black screen <br></div><br><br>Ok, thanks for this, and I found a few bugs! I will be updating this soon. <br><br></td></tr></table><br>
<a name="2036210"></a>

<a name="2036211"></a>

<a name="2036212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Landon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> not sure what i am doing wrong i can't get minib3d to run in html5 for the life of me(with preloading textures). do i have the wrong versions?<br><br>keep getting glerror 1282<br><br>edit:<br><br>oh derp you found bugs and are updating.. <br><br></td></tr></table><br>
<a name="2036268"></a>

<a name="2036269"></a>

<a name="2036272"></a>

<a name="2036273"></a>

<a name="2036275"></a>

<a name="2036276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Pearmain</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am using an Mac.<br><br>When I run the  "zombie" example iOS, it works fine in the emulator<br><br>When I run in HTML5 (Safari) I get<br><br>Monkey Runtime Error : TypeError "Null" is not an object, detail here:<br><br><pre class=code>
Monkey Runtime Error : TypeError: 'null' is not an object

/Users/rob/Downloads/MonkeyPro62/modules/minib3d/opengl/opengles20.monkey&lt;94&gt;
/Users/rob/Downloads/MonkeyPro62/modules/minib3d/opengl/opengles20.monkey&lt;904&gt;
/Users/rob/Downloads/MonkeyPro62/modules/minib3d/opengl/opengles20.monkey&lt;50&gt;
/Users/rob/Downloads/MonkeyPro62/modules/minib3d/examples/animation_test.monkey&lt;35&gt;
/Users/rob/Downloads/MonkeyPro62/modules/mojo/app.monkey&lt;53&gt;
</pre><br><br>Looking through the Javasctipt it seems to be related to<br><br><pre class=code>
bb_functions_TurnEntity((this.f_cube),t_turnzx*2.0,0.0,0.0,0);
</pre><br><br>Firefox gives more details<br><pre class=code>
Monkey Runtime Error : TypeError: t_ent is null

/Users/rob/Downloads/MonkeyPro62/modules/minib3d/functions.monkey&lt;1330&gt;
/Users/rob/Downloads/MonkeyPro62/modules/minib3d/examples/animation_test.monkey&lt;127&gt;
/Users/rob/Downloads/MonkeyPro62/modules/mojo/app.monkey&lt;57&gt;
</pre><br><br>Looking through the code, and adding alerts, it seems m_Init is never called (Or is called after render which gives this error)<br><br>I am using:<br><br>iMac<br>MonkeyPro62<br>MiniB3D 0.30<br><br>Any ideas? <br><br></td></tr></table><br>
<a name="2036289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Any ideas? <br> <br></div><br><br>For the zombie example, the Init() call is in the wrong place. it should be moved from OnRender() to OnUpdate().<br><br>Yeah, overall, I rushed to get this update out so there are some things I broke in HTML5. The PreLoadTexture() doesn't work correctly, but is a relatively easy fix for me..... but I'm noticing some drawing problems in the HTML5 pipeline that isn't showing up in other places, so I need to find what is going on. <br><br></td></tr></table><br>
<a name="2036296"></a>

<a name="2036307"></a>

<a name="2036308"></a>

<a name="2036309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Pearmain</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> The work you are doing is awesome Adam, much appreciated.<br><br>I made that change, but now seem to get an error on this line<br><br><pre class=code>
bb_opengles20_OpenglES20.prototype.m_GetVersion=function(){
.
.
.	err_info="/Users/rob/Downloads/MonkeyPro62/modules/minib3d/opengl/opengles20.monkey&lt;94&gt;";
	var t_s=_glGetString(7938);
.
.
.
</pre><br><br>UPDATE: Works on Firefox, not on Chrome or Safari.<br><br>Can you post an example of how I would use "TPixmap.PreLoadPixmap" with the Zombie example <br><br></td></tr></table><br>
<a name="2037564"></a>

<a name="2037565"></a>

<a name="2037566"></a>

<a name="2037567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to not reply right away. Here is a short example of preloading, and I've updated the github examples to reflect this as well.<br><br>**the key, as I recently found out, is to remember to load the mojo_font.png if I use it when drawing text, as in most of the examples.<br><br>Here's a live example. Even works on Safari on an old MacMini (w/o opengl2.0! but only at 3fps)<br><a href="http://twopisoftware.com/zombietest" target="_blank">http://twopisoftware.com/zombietest</a><br><br>[monkeycode]<br>Class Game Extends App<br>	Field init_gl:Bool = False<br><br>	Method OnCreate()<br>		SetRender()	<br>		SetUpdateRate 30	<br>	End<br><br>	Method Init()<br>		<br>		If Not TPixmap.PreLoadPixmap(["Zombie.jpg","mojo_font.png"])	<br>			Return<br>		Endif<br>		<br>		If init_gl Then Return<br>		init_gl = True<br>		<br>		cam = CreateCamera()<br><br>		zombie[0]=LoadAnimMesh("zombie_b3d_base64.txt")<br>''.....etc.......<br>	End<br><br>	Method OnUpdate()<br>		<br>		If Not init_gl Then Init(); Return<br><br>		zombie[0].Animate(1,speed)<br>''.....etc......<br>	End<br><br>	Method OnRender()<br>		RenderWorld()			<br>	End<br>End<br>[/monkeycode] <br><br></td></tr></table><br>
<a name="2037575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> There was a small problem with sliding collisions, have had a chance to look at that Adam? <br><br></td></tr></table><br>
<a name="2037719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> not yet <br><br></td></tr></table><br>
<a name="2037773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, no problem then, I wish I had a better understanding of matrix maths to chip in a little.<br><br>OT: I look above and Adams reply says "Posted 21 hours ago", while my question says "Posted 1 hour ago". Small forum problem? <br><br></td></tr></table><br>
<a name="2037995"></a>

<a name="2037996"></a>

<a name="2037997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> On my mac mini(NVIDIA GeForce 9400), in Chrome and Safari, when trying <a href="http://twopisoftware.com/zombietest" target="_blank">http://twopisoftware.com/zombietest</a><br><br>I get an alert with : <br><br>Monkey Runtime Error : TypeError: Cannot call method 'getParameter' of null<br><br>C:/Monkey/modules/minib3d/opengl/opengles20.monkey&lt;96&gt;<br>C:/Monkey/modules/minib3d/opengl/opengles20.monkey&lt;906&gt;<br>C:/Monkey/modules/minib3d/opengl/opengles20.monkey&lt;50&gt;<br>H:/_work/software_dev/_monkey/minib3d_examples/animation_test.monkey&lt;41&gt;<br>C:/Monkey/modules/mojo/app.monkey&lt;53&gt;<br><br>I think I have WebGL enabled in chrome<br><br>I get the same error when trying to run it locally.<br><br>[EDIT]: It works in Firefox :-) <br><br></td></tr></table><br>
<a name="2038023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> On my mac mini(NVIDIA GeForce 9400), in Chrome and Safari <br></div><br>Make sure to get the latest and greatest versions of the browser. I think you need OSX10.6 minimum for Safari 5.1+. Also, make sure WebGL is turned on (Preferences-&gt;Advanced-&gt;Turn on Develop Toolbar-&gt;Enable WebGL).<br><br>Should work in Chrome 19 on OSX.<br><br>The error above (getParameter of null) means the GL context didn't initialize, so no WebGL. At some point I may try to add in a better detector. <br><br></td></tr></table><br>
<a name="2038022"></a>

<a name="2038371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks.  It's working in all my browsers now:-:) <br><br>In Safari I did what you wrote above.<br>In Chrome I had to "Deactivate" a flag that "Deactivates WebGL"<br><br>For anyone else running into this: Write chrome://flags/ in Chrome's addressbar to get a list of settings and flags to change. <br><br>Thanks for a great module! <br><br></td></tr></table><br>
<a name="2038370"></a>

<a name="2038377"></a>

<a name="2038378"></a>

<a name="2038379"></a>

<a name="2038380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Pearmain</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam,<br><br>Thanks for all your hard work.<br><br>I can confirm (As has "Difference") that it is working on all 3 browsers on my mac (Safari, Firefox and Chrome), and textures are loading fine.<br><br>Absolutely excellent<br><br>Out of interest, how would I implement Cel Shading like in this example:<br><br><a href="http://www.ro.me/tech/cel-shader" target="_blank">Cel Shader</a><br><br>Oh, and you really need to be in the Module Registry as miniB3d is awesome <br><br></td></tr></table><br>
<a name="2038578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Somehow minib3d examples or just my code don't run on my android device. As I start it on the android device it closes with an error "Attempt to access null object"<br><br>Do I have to do something before compiling minib3d code? Because html5 runs perfectly.<br><br>Android device has 1GHz core, 512RAM, Malli 400 as graphics <br><br></td></tr></table><br>
<a name="2038669"></a>

<a name="2038670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm getting problems on a few targets, i'll have to check into this. (V62)<br>you can try to remove the preloader, and just call init() from onCreate(). <br><br></td></tr></table><br>
<a name="2038671"></a>

<a name="2038673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will this help with 2D mojo commands too? Because I can't seem to DrawImage on render if there is RenderWorld() command. It says that you can only use render operation inside OnRender, but I am doing it :) <br><br></td></tr></table><br>
<a name="2038703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Will this help with 2D mojo commands too? <br></div><br>For now, no, but a couple targets can. If you need to draw images, load a texture onto a plane. You can use CreateGrid() of 1 and use a second ortho camera using CameraLayer().<br><br>In the future I'd like to get mojo working, but also be aware mojo does not work on OpenGL 2.0 so I'd have to wait for that compatibility first. <br><br></td></tr></table><br>
<a name="2038704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Will this help with 2D mojo commands too? <br></div><br>For now, no, but a couple targets can. If you need to draw images, load a texture onto a plane. You can use CreateGrid() of 1 and use a second ortho camera using CameraLayer().<br><br>In the future I'd like to get mojo working, but also be aware mojo does not work on OpenGL 2.0 so I'd have to wait for that compatibility first. <br><br></td></tr></table><br>
<a name="2038810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> With the animation example and on my HTC Desire (Android 2.3.3) I get a blue screen, white on white text and a red cube that I can move aroudn somehow with my fingers. The same app shows the zombie in my browser. What did I do wrong? <br><br></td></tr></table><br>
<a name="2038838"></a>

<a name="2038843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I've been slacking a little. I think the problem is with the preloader.<br><br>EDIT: yes, if I take out the Init() preloader stuff, android seems to work fine. <br><br></td></tr></table><br>
<a name="2038932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Identifier 'MINIB3D_DRIVER' not found. <br></div><br>How can i fix that? <br><br></td></tr></table><br>
<a name="2038974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> shouldnt happen, since it is only really used to check between opengl1 and opengl2. what target does it happen on? <br><br></td></tr></table><br>
<a name="2038975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get it also on html5.<br><br><pre class=code>
C:/Apps/Coding/MonkeyPro65/modules/minib3d/minib3d.monkey&lt;29&gt; : Error : Identifier 'MINIB3D_DRIVER' not found.
Abnormal program termination. Exit code: -1
</pre> <br><br></td></tr></table><br>
<a name="2039016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> this error exists since V65. <br><br>so:<br><pre class=code>
#rem
#MINIB3D_DRIVER=""

''to choose opengles20, must specify it
#If MINIB3D_DRIVER=""
	#if TARGET="glfw" Or TARGET="ios" Or TARGET="android" Or TARGET="mingw"
		Import minib3d.opengl.opengles11
	#Elseif TARGET="html5"
		Import minib3d.opengl.opengles20
	#Elseif TARGET="xna"
		Import minib3d.xna
	#endif
#endif
#end
</pre><br><br>and so...<br><pre class=code>Import minib3d.opengl.opengles20</pre><br>...animation_test.monkey will compile until <br><div class="quote"> <br>Error : Duplicate identifier 'DataBuffer' found in module 'databuffer' and module 'databuffer'.<br>Abnormal program termination. Exit code: -1<br> <br></div> <br><br></td></tr></table><br>
<a name="2039033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I think I have minib3d mostly going now, on glfw anyway.<br><br>I'll release a 65b soon, but you can get some of it going by deleting the 'import brl.databuffer' from the top of 'modules/brl/asyncevent.monkey'.<br><br>Also, filenames need to have 'monkey://data/' prefixed to them - this is to let monkey know that the file is a 'data/' file, as opposed to a file in the current dir.<br><br>The '#If MINIB3D_DRIVER' issue will need a compiler change though, so you'll need to work around that for now. In general, the compiler shouldn't let you reassign config vars like this, but I'm gonna let it slide in the case of vars with 'null' values like this as I can see it's quite useful. I'd prefer to see another way of doing this though... <br><br></td></tr></table><br>
<a name="2039349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's me again, sorry. <br>How do you guys make those base64.txt files? I could use that since I can't load any *obj file. Instead of OBJ appears just some cube :( <br><br></td></tr></table><br>
<a name="2039404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Base64 Encoder: <a href="http://www.opinionatedgeek.com/dotnet/tools/base64encode/" target="_blank">http://www.opinionatedgeek.com/dotnet/tools/base64encode/</a> <br><br></td></tr></table><br>
<a name="2039407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shagwana</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Download the above package and tried it in v66, the samples do not seem to be working.<br><br>Any idea what needs fixoring to get this working? <br><br></td></tr></table><br>
<a name="2039617"></a>

<a name="2039618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm so afraid about Minib3d, it's an incredibly awesome module for monkey and it's sad it is in a such condition :(<br><br>Currently it returns...<br>"Monkey Runtime Error : TypeError: gl is null"<br>...on html5 target on v66 of Monkey. <br><br></td></tr></table><br>
<a name="2039635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm swamped this week, but I plan on updating miniB3D. read the above posts, a little tinkering and it will work.<br><div class="quote"> "Monkey Runtime Error : TypeError: gl is null" <br></div><br>gl is null means that gl did not initialize. this is not a problem of minib3d, it means the browser does not like the graphics card or the browser does not support webgl. on some browsers (chrome) you need to turn on webgl support. (post #41) <br><br></td></tr></table><br>
<a name="2039634"></a>

<a name="2039759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does 2d mojo stuff already work together with minib3d? :) <br><br></td></tr></table><br>
<a name="2039762"></a>

<a name="2039763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does 2d mojo stuff already work together with minib3d? :) <br></div><br>Negatory.<br><br><div class="quote"> For now, no, but a couple targets can. If you need to draw images, load a texture onto a plane. You can use CreateGrid() of 1 and use a second ortho camera using CameraLayer().<br><br>In the future I'd like to get mojo working, but also be aware mojo does not work on OpenGL 2.0 so I'd have to wait for that compatibility first.  <br></div> <br><br></td></tr></table><br>
<a name="2039764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! <br><br></td></tr></table><br>
<a name="2039855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... any hints about minib3d and V66? I can't run any examples nor for GLFW neither for HTML5. WebGL runs fine in my Chrome though.<br><br>I did try some tweaks here and there but can't get it working... <br><br></td></tr></table><br>
<a name="2039920"></a>

<a name="2039921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> working on this now.<br><br>p.s. may take a bit of work <br><br></td></tr></table><br>
<a name="2039893"></a>

<a name="2039895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam, I really appreciate your great work! <br><br></td></tr></table><br>
<a name="2039986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it something complicated? What was the last monkey version minib3d did work with? I will rollback to that version. <br><br></td></tr></table><br>
<a name="2039997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried the same.<br>It seems to work on v63, maybe on v64.<br>Android (and glfw) refuses to load textures (and examples' ones) but works fine in general. Android also refuses to load any models at all, while trying to access the base64 model app crashes with error, something about INDEX and LIMIT with various numbers (though INDEX always equals LIMIT), depending on how big model is. <br><br></td></tr></table><br>
<a name="2039996"></a>

<a name="2040008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> V62 was the last version I was using for a while.<br><br>If textures are not loading in the examples, get rid of the PreLoader() function and init_gl checks.<br><br>Re: Android crash for models: I think the model is limited to 65535 vertices, since I am using short integers for vertices index (16-bit). Also keep in mind that file filters may need to be turned on for base64 files to be copied in the data folder.<br><br>But I might add I tested V62 and the examples worked in Android. If you are having specific model problems, try a different base64 encoder, or if you can, send me the base64 model and I can track down specific errors.<br><br><br>...and finally, the V66 update will require Mark to break the old databuffers (opengl modules point to old databuffers) and change a few bugs in V66, so it will most likely be V66b or V67 that miniB3D will aim for. <br><br></td></tr></table><br>
<a name="2040011"></a>

<a name="2040012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the heads up Adam. I will use V62 then. :)<br><br>...or just GLBasic... *gnaaa* <br><br></td></tr></table><br>
<a name="2040608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> For now, no, but a couple targets can. If you need to draw images, load a texture onto a plane. You can use CreateGrid() of 1 and use a second ortho camera using CameraLayer(). <br></div><br><br>Could someone post a small example how to create and use such an orthogonal camera with a CameraLayer? Wouldn't be something like to use a sprite better? <br><br></td></tr></table><br>
<a name="2040613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, i played with it for a sec but couldn't get my creategrid(1,1) example to work. ugh.<br><br>but it works with a sprite, just can't scale the sprite. i'll need to investigate these things later.<br><br><pre class=code>
App Class

''...etc....
Field cam:TCamera, cam2:TCamera

OnCreate()
		spr = LoadSprite("Zombie.jpg")

		
		cam2 = CreateCamera()
		cam2.PositionEntity(0,0,-1)
		cam2.CameraProjMode(2)
		cam2.CameraLayer(spr)
		cam2.HideEntity()
		cam2.CameraClsMode(False,True)

		spr.ScaleSprite(0.2,0.2)
End

OnRender()
	RenderWorld()
	if cam2 Then TRender.render.RenderCamera(cam2)
End
</pre> <br><br></td></tr></table><br>
<a name="2040612"></a>

<a name="2040615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome, thanks Adam! :) <br><br></td></tr></table><br>
<a name="2040617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another question. I use Monkey v62 or v63 (doesn't make a difference).<br><br>But creating a simple cube let the GLFW target crash:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Import minib3d

''note: if your models look weird, config.h depth buffer bits=32

Function Main()
	New Game
End

Class Game Extends App
	
	Field cam:TCamera
	
	Field light:TLight
	Field cube:TMesh
	
	Field init_gl:Bool = False
	
	Method OnCreate()
	
		SetRender()	
		SetUpdateRate 30
		
	End

	Method Init()
		
		If init_gl Then Return
		init_gl = True

		cam = CreateCamera()
		cam.CameraClsColor(0,0,80)
		cam.PositionEntity 0,4,-10

		light=CreateLight(1)
		light.PositionEntity 0,3,-3
		
		cube=CreateCube()
		cube.ScaleEntity(0.5,0.5,0.5)
		cube.name = "cube"
		PositionEntity cube,-2,2,2
				
		Print "main: init done"
	End
	
	Method OnUpdate()
		
		If Not init_gl Then Init(); Return
		UpdateWorld()
	End
	
	Method OnRender()

		RenderWorld()
	End
End
</textarea><br><br>Any idea? :)<br><br>It crashes in line 778 of opengles11.monkey:<br><br><pre class=code>
				If vbo	
																																																																																																																																																																																																																																																																															
					glDrawElements(GL_TRIANGLES,surf.no_tris*3,GL_UNSIGNED_SHORT, 0)
				
				Else
</pre><br><br>I just guess that there's simply no surface so accessing surf.no_tris results in a MAV? <br><br></td></tr></table><br>
<a name="2040616"></a>

<a name="2040621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another question:<br><br>Using your zombie mesh, why isn't it displayed if I just do<br><br><pre class=code>
  zombie = LoadAnimMesh( "zombie_b3d_base64.txt" )
</pre><br><br>It's only displayed if I call CopyEntity...<br><br><pre class=code>
  Local tempZ:TMesh = LoadAnimMesh( "zombie_b3d_base64.txt" )
  zombie = TMesh(tempZ.CopyEntity())
</pre><br><br>Actually I don't get that... <br><br></td></tr></table><br>
<a name="2040653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It crashes in line 778 of opengles11.monkey: <br></div><br>you may need to do an init_gl check in OnRender as well.<br><br><br><div class="quote"> <br>It's only displayed if I call CopyEntity... <br></div><br>and it is a persistent field var, not local var? that's strange, it should be added to the display list. I'll need to check that, could be a couple bugs you found, which I thank you for finding. <br><br></td></tr></table><br>
<a name="2040658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're welcome. ;)<br><br>BTW:<br><div class="quote"> <br>you may need to do an init_gl check in OnRender as well. <br></div><br><br>That doesn't change anything.<br><br>And yes, it is a persistent field so "zombie" is a global variable. <br><br></td></tr></table><br>
<a name="2040660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Adam, another bug. If I want to load the following mesh I get a crash. The mesh is just a simple plane, nothing special:<br><br><a href="http://www.leidel.net/dl/monkey/waterplane.zip" target="_blank">http://www.leidel.net/dl/monkey/waterplane.zip</a><br><br>I get a memory access violation in line 118 of monkeyutility.monkey:<br><pre class=code>
Return buf.PeekFloat(vid*SIZE+POS_OFFSET + ELEMENT0 )</pre><br><br>Call stack:<br>.../modules/minib3d/monkeyutility.monkey&lt;118&gt;<br>.../modules/minib3d/tmesh.monkey&lt;1624&gt;<br>.../modules/minib3d/tmesh.monkey&lt;1582&gt;<br>.../modules/minib3d/tmesh.monkey&lt;288&gt;<br>.../modules/minib3d/functions.monkey&lt;914&gt; <br><br></td></tr></table><br>
<a name="2040659"></a>

<a name="2040662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh and be warned! Actually I use your minib3d module for my current game. There might be tons of requests coming. LOL<br><br>Anyway, let me know if I can help, maybe I can fix something here and there. You do a great job, Adam, I can't stress that enough! <br><br></td></tr></table><br>
<a name="2040667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another one: Loading OBJ files doesn't work at all. ;) <br><br></td></tr></table><br>
<a name="2040668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> And here we go. Using<br><br><pre class=code>
EntityTexture( mesh, tex, 0, 0 )
</pre><br><br>works, but applying another texture:<br><br><pre class=code>
EntityTexture( mesh, tex2, 0, 1 )
</pre><br><br>leads to a memory access violation. <br><br></td></tr></table><br>
<a name="2040685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried your examples and I have no textures on my Android phone, no matter if I use v62 or v63b.<br><br>I also tried to remove the preload stuff and init_gl check but that didn't help. <br><br></td></tr></table><br>
<a name="2040716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i'll have more time this weekend to fix problems, but i'm glad you're putting minib3d through the ringer.<br><br>questions:<br>re: obj, is the obj file being copied over to the debug folder? it may need a file filter in order for trans to copy it over. if it is, then you may be able to turn on the model debug const (in the tmodelobj file) and see where it is stopping. (i want to change those model debuggers to #preprocessor in later updates) <br><br></td></tr></table><br>
<a name="2040752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah well that might be the problem, regarding the obj file. Will check it.<br><br>But actually it's not that important, I use b3d anyway.<br><br>It's really strange that I see no textures on Android. <br><br></td></tr></table><br>
<a name="2040817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="2040760"></a>

<a name="2040765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks really good, I must get back to my minib3d zombie game at some point. <br><br></td></tr></table><br>
<a name="2040764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks really good, I must get back to my minib3d zombie game at some point. <br><br></td></tr></table><br>
<a name="2040811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks.<br><br>Good news, Minib3d works with Monkey v66 as well. Should have read more carefully what Mark wrote. Just prefix file paths with "monkey://data/" and it works for GLFW.<br><br>I still see no textures for Android though... <br><br></td></tr></table><br>
<a name="2040955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> just a quick fyi-- i have been making great progress on the updates for V66 (and some future proofing). just need to finish testing xna, ios, and fix a couple other things. <br><br></td></tr></table><br>
<a name="2040957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome Adam! :) <br><br></td></tr></table><br>
<a name="2040970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does that mean that you could reproduce these textur issues on Android? :) <br><br></td></tr></table><br>
<a name="2041010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does that mean that you could reproduce these textur issues on Android? :)  <br></div> no, but i applied the FixPath() right away in the tpixmap loading functions. I'll try to get these changes up this week (pending insane work week)... but if I dont I can just email you a hot fix.<br><br>...also your waterplane model did NOT load for me either, its an interesting end-of-file issue so i'm working on handling odd issues with files like that. <br><br></td></tr></table><br>
<a name="2041013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> So textures work for you on Android? Can you send me a working apk please? I just want to check if there's something special with my device. <br><br>Oh and please send me any stuff you want  to martin.leidel@... <br><br>Thanks so much! <br><br></td></tr></table><br>
<a name="2041022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can I be emailed the Hotfix, please? I'm eager to see the changes worked on.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2041264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i think i've merged my updates to github correctly. if not, let me know. should be the master now.<br><br><br>VERSION 0.31<br>------------<br>- updated to work with monkey V66.<br>- fixed a few bugs<br>- CameraLayers should work now.<br>- re-arranged preloading/buffer loading (future-proofing)<br>- uses #MINIB3D_DEBUG_MODEL = true to debug models instead of hardcoding<br><br>- with monkey V66, you can only load new shaders in OnCreate() or OnRender() [android]<br>- with monkey V66, SetRender() needs to be in OnCreate()<br><br><br>TODO:<br>-----<br>- fix collisions<br>- devise Blender-&gt;minib3d plugin<br><br>Also, if any OBJ models don't work (and they work elsewhere like in blender), please let me know or send them to me. <br><br></td></tr></table><br>
<a name="2041263"></a>

<a name="2041280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam, works like a charm now! <br><br></td></tr></table><br>
<a name="2041286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, thanks :) <br><br></td></tr></table><br>
<a name="2041320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lovely, Thanks! <br><br></td></tr></table><br>
<a name="2041326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just got the chance to test this and I still get " identifier 'MINIB3D_DRIVER' not found"<br><br>Any ideas? <br><br></td></tr></table><br>
<a name="2041357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Just got the chance to test this and I still get " identifier 'MINIB3D_DRIVER' not found" <br></div><br>Windows or OSX? Which target? Does this happen with one of the examples? <br><br></td></tr></table><br>
<a name="2041358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam is there a chance to get that 2d text stuff more robust? It's sometimes moving when my camera moves or just disappears. Thanks! <br><br></td></tr></table><br>
<a name="2041364"></a>

<a name="2041365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I've found a bug which was there previously as well.<br><br>If I load a mesh using LoadMesh it is displayed.<br>If I load a mesh using LoadAnimMesh it is NOT displayed until I use CopyMesh.<br><br>Looking at the source of tmesh it seems that some magic stuff is happening in LoadMesh which isn't done in LoadAnimMesh?<br><br><pre class=code>
	Function LoadMesh:TMesh(file$,parent_ent:TEntity=Null)
	
		Local xmesh:TMesh=LoadAnimMesh(file)
		Local mesh:TMesh = CreateMesh()
		''
		xmesh.HideEntity()
		mesh = xmesh.CollapseAnimMesh(mesh)
		xmesh.FreeEntity()
		
		mesh.classname="Model"

		mesh.AddParent(parent_ent)
		'mesh.entity_link = entity_list.EntityListAdd(mesh)

		' update matrix
		If mesh.parent&lt;&gt;Null
			mesh.mat.Overwrite(mesh.parent.mat)
			mesh.UpdateMat()
		Else
			mesh.UpdateMat(True)
		Endif
		
		Return TMesh(mesh)
	
	End 

	Function LoadAnimMesh:TMesh(file$,parent_ent:TEntity=Null)
	
		Local mesh:TMesh
		If file.EndsWith(".obj") Or file.EndsWith(".obj.txt")
			mesh = TModelObj.LoadMesh(file)
		Else
			mesh = TModelB3D.LoadAnimB3D(file,parent_ent)
		Endif
		
		If Not mesh Then Return TMesh.CreateCube()
		
		Return mesh

	End 
</pre> <br><br></td></tr></table><br>
<a name="2041367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> And another one:<br><br>I have a mesh with a child node which I load with AnimMeshLoad. The child can be found using FindChild (works!). But if I want to rotate that child it doesn't work. <br><br></td></tr></table><br>
<a name="2041417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh well... I worked with you branch but getting the latest "official" v31 I get the following compiler error:<br><br><pre class=code>.../modules/minib3d/opengl/opengles11.monkey&lt;754&gt; : Error : Unable to find overload for ToArray(Float[]).</pre> <br><br></td></tr></table><br>
<a name="2041419"></a>

<a name="2041420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright. Another one. Loading obj files leads to a crash. Adam, just replace the zombie base64 file with this one and try to load the obj file:<br><br><a href="http://www.leidel.net/dl/monkey/zombie_obj.zip" target="_blank">http://www.leidel.net/dl/monkey/zombie_obj.zip</a><br><br>I've used Ultimate Unwrap Pro to convert the B3D to OBJ if that makes any difference. It seems that your code expects .txt files for the material while it should load .mtl files? <br><br></td></tr></table><br>
<a name="2041425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm looking into these errors. i've fixed the "overload for ToArray()"<br><br>for .OBJ files, monkey did not seem to like <br><pre class=code>
#TEXT_FILES += "|*.obj|*.mtl"
</pre><br>so just put a ".obj.txt" and ".mtl.txt" after them. <br><br></td></tr></table><br>
<a name="2041421"></a>

<a name="2041422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great thanks! Oh do you mind if I ask what timezone you are? Must be something contrary to mine (GMT+1). LOL <br><br></td></tr></table><br>
<a name="2041423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adam, I absolutely appreciate your work on this! You will take a place in the credits of our coming 3d game using Monkey and your lib. :) <br><br></td></tr></table><br>
<a name="2041456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Oh do you mind if I ask what timezone you are? <br></div><br>GMT-7<br><br>I'm glad someone is using the minib3d library rigorously, i want it to be solid. <br><br></td></tr></table><br>
<a name="2041461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh no problem. You're doing all the hard work while I having fun with it. Well ok not all the time... <br><br>Btw, any chance to make that 2d text stuff more beautiful? <br><br></td></tr></table><br>
<a name="2041512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Adam,<br><br>this simple example crashes in GLFW (Windows 7):<br><br><pre class=code>
Import minib3d

Function Main()
  New Game
End

Class Game Extends App
	
  Field cam:TCamera
	
  Field light:TLight
  Field mesh:TMesh
	
  Field init_gl:Bool = False
	
  Method OnCreate()
	
    SetRender()	
    SetUpdateRate 30
		
  End

  Method Init()
		
    If init_gl Then Return
		
    cam = CreateCamera()
    cam.CameraClsColor(80,80,80)
    cam.PositionEntity 0,0,-5
		
    mesh = CreateCube()

    light=CreateLight()
    light.RotateEntity 90,0,0

    init_gl = True
		
    Print "main: init done"
  End
	
  Method OnUpdate()
		
    If Not init_gl Then Init(); Return
		
    UpdateWorld()

  End
	
  Method OnRender()

    If Not init_gl Then Return

    RenderWorld()
					
  End
End
</pre> <br><br></td></tr></table><br>
<a name="2041523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StoneFaceEXE</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems that blender camera has an effect on minib3d.<br>Milkshape's converted b3d to txt models without cameras are darker.<br>Blender's converted b3d to txt models (blender export to b3d and then to txt via B64 encoder) somewhy amplify CreateLight()'s. They are much brighter.<br>Everything tested on glfw<br><br><br>Also if you delete camera from the scene in blender, export it to b3d, convert to B64 and then try to import it into Minib3d project then it fails. (On GLFW at least)<br><br><br>Also:<br>PositionEntity by negative ammount (e.g. PositionEntity this,1,5,-15) also crashes GLFW target. MoveEntity works fine.<br><br>PointEntity also crashes GLFW for some reason. Maybe it's because of blender models? <br><br></td></tr></table><br>
<a name="2041522"></a>

<a name="2041521"></a>

<a name="2041520"></a>

<a name="2041519"></a>

<a name="2041518"></a>

<a name="2041581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xaron, i tried your simple example on my version (win7) and a fresh install (osx glfw) and it worked. do you have any debugging error codes with it? or is it just a mem exc error?<br><br>i'm tracking down the other errors now... <br><br></td></tr></table><br>
<a name="2041549"></a>

<a name="2041602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Xaron, i tried your simple example on my version (win7) and a fresh install (osx glfw) and it worked. do you have any debugging error codes with it? or is it just a mem exc error? <br></div><br><br>Adam, now that's interesting. It crashes on my work PC using Windows 7 and OpenGL 3.2 but it works on my home PC using Windows 7 and OpenGL4.0...<br><br>Looks like a driver issue. <br><br></td></tr></table><br>
<a name="2041622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I have a mesh with a child node which I load with AnimMeshLoad. The child can be found using FindChild (works!). But if I want to rotate that child it doesn't work.  <br></div><br><br>hi, so the reason for this is that the child is probably a bone, right?<br><br>If it's a bone, miniB3D cannot currently rotate, move, or scale bones programmatically. This is something that needs to be addressed, so I am doing this now, which means a major change to TBone class. <br><br></td></tr></table><br>
<a name="2041623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, the child is a bone. Do you have any ETA on this? :) <br><br></td></tr></table><br>
<a name="2041707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Adam,<br><br>another problem. I've made a waterplane and your zombies are up to the knees in the water. Looks good using the GLFW target but horrible on my Android phone. Sometimes I even don't see the waterplane there...<br><br>Here's the code (it's your slightly enhanced zombie example)<br><br><a href="http://www.leidel.net/dl/monkey/zombietest.zip" target="_blank">http://www.leidel.net/dl/monkey/zombietest.zip</a><br><br>THANKS!<br><br>BTW: Is there a way to get OpenGLES 2.0 working on the phone? <br><br></td></tr></table><br>
<a name="2041705"></a>

<a name="2041749"></a>

<a name="2041750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> another problem. I've made a waterplane and your zombies are up to the knees in the water. Looks good using the GLFW target but horrible on my Android phone. Sometimes I even don't see the waterplane there... <br></div><br>very strange indeed. what graphics chip is your android device? mine is doing weird things on a PowerVR530.<br><br>EDIT: same problem in opengles20 on android.<br><br>problem may be this?<br><a href="http://stackoverflow.com/questions/8787483/repeated-textures-are-severely-distorted-shaking-when-rotating-camera" target="_blank">http://stackoverflow.com/questions/8787483/repeated-textures-are-severely-distorted-shaking-when-rotating-camera</a><br><br>EDIT:<br>In unity too<br><a href="http://forum.unity3d.com/threads/22267-Jumpy-Textures" target="_blank">http://forum.unity3d.com/threads/22267-Jumpy-Textures</a><br>solution is to overlap UVs. will see if i can get CreateGrid to do this. <br><br></td></tr></table><br>
<a name="2041747"></a>

<a name="2041748"></a>

<a name="2041766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, that might be the issue. It's strange, in the emulator it looks okay not on my device. It's a Sony Xperia S with Android 4.0 ICS, so a really capable device... <br><br></td></tr></table><br>
<a name="2041768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> i did a quick fix on github for the OBJ model loading. should work now.<br>fixing these other problems this weekend. i fixed the repeating texture problem on android with a CreateGrid() function that allows for disjointed UVs, so yes, the problem is that mobile devices use poor UV precision.<br><br>Outstanding issues:<br>- programmable bone motion<br>- b3d files not loading properly<br>- more robust 2d text<br><br>anything else? <br><br></td></tr></table><br>
<a name="2041767"></a>

<a name="2041772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, yes. Actually LoadAnimMesh looks weird. If I use it to load a mesh it's not displayed until I make a copy mesh. <br><br></td></tr></table><br>
<a name="2041773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> And a MakeNextSuperGameHit function would be nice. ;-) <br><br></td></tr></table><br>
<a name="2041774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> Regarding this more robust 2d text. Can we use different fonts and some scaling then as well? Again Adam, I can't say how thankful I am!!! <br><br></td></tr></table><br>
<a name="2045243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rone</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit: wrong thread <br><br></td></tr></table><br>
<a name="2045241"></a>

<a name="2045242"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
