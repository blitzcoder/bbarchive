<!DOCTYPE html><html lang="en" ><head ><title >Possible issue with IAP?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Possible issue with IAP?</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=505" >iOS</a>/<a href="#bottom" >Possible issue with IAP?</a><br><br>
<a name="2113528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rieha</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm currently setting up IAPs on iOS and want to be sure I'm not doing any serious mistakes. I've borrowed code from the iaptest which came with Monkey and standard purchases seem to work fine.<br><br>I've also tried to simulate special cases, like this: player taps a button to make a purchase and right after goes to the home screen. Purchase continues even when the game isn't active anymore, with "purchase was successful" notice at the end. Now if I go back to the game, I'll get what I bought, but if I instead quit the game from recently used apps and then restart it, I don't get the purchased IAP.<br><br>I'm not sure if the IAP would really be charged in this case, as sandboxed IAPs don't show up in the purchase history and I don't have a published game to test this. I figure this is a very special scenario, but still possible? With nonconsumables I could probably get the IAP with restore purchases, but I currently have only consumables. <br><br></td></tr></table><br>
<a name="2113527"></a>

<a name="2113526"></a>

<a name="2113653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It may not be implemented, but I believe there is a way to check recent purchases. You can save the known purchases in your game, and if a recent one that was purchased doesn't show up you could activate it to the game. Better to do automatic things like this rather than have a popular game where you have many people angry at you and wanting customer support. <br><br></td></tr></table><br>
<a name="2113795"></a>

<a name="2113796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rieha</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> My workaround is to save the state of the purchase in monkeystore.ios.cpp to a temporary file, as monkeystores default system doesn't work after exiting the game with home button. This way I can check if the purchase was completed when restarting the game. Official fix would be nice, but this appears to work so on to the next challenge. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
