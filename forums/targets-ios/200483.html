<!DOCTYPE html><html lang="en" ><head ><title >Detect Iphone Language</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Detect Iphone Language</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=505" >iOS</a>/<a href="#bottom" >Detect Iphone Language</a><br><br>
<a name="2003688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wagenheimer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be nice to have some code to detect the actual phone language!<br><br>Or there is a better approach to make multi-language games? <br><br></td></tr></table><br>
<a name="2003695"></a>

<a name="2003696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you wanted to do it "properly" then you would need to set up localizable.strings for each supported region in the XCode project then modify the source Monkey creates so that each string referenced the correct localized entry. &gt;&gt;<a href="http://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/BPInternational.html" target="_blank">Bunch of Apple info</a>&lt;&lt;<br><br>Monkey would ideally generate and hook-in this stuff but cross-platform localization is probably quite chewy so I wouldn't bet on seeing it any time soon. I concur that, in the interim, it would be nice to have a Monkey func that could get you the host locale so we could deal with the issue in our own way at least. It'd be a kludge but more practical than having to comb the Xcode proj by hand. <br><br></td></tr></table><br>
<a name="2003700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  then modify the source Monkey creates <br></div><br>Haw... <br><br></td></tr></table><br>
<a name="2003703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It needn't be a *complete* nightmare, I guess. You could box your string definitions then they'd at least be in one place...? <br><br></td></tr></table><br>
<a name="2003707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Personally, I'd want to do it "properly", rather than some half-ass mix-and-match cross-platform thing that isn't native on all platforms.<br><br>Each to their own, of course :-) <br><br></td></tr></table><br>
<a name="2003708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well that's what I'm saying. Box them in a Monkey class then they should be easy enough to locate and NSLocalizedString-alize in the XCode project. Is AngelFont up to handling Russian and Chinese (etc) character-sets or is all of this actually academic?! :D <br><br></td></tr></table><br>
<a name="2024134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone tried this already? Multi language apps with Monkey? <br><br></td></tr></table><br>
<a name="2024196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do it this way (very loosely based on Brucey's Locale mod for Blitz!)<br><br><pre class=code>
Function GetLocaleText:String(tag:String)
	Local str:StringObject = TLocale.mapLanguages.Get(tag)
	If str Then Return str Else Return "@"+tag
End

Class TLocale
	Global mapLanguages:StringMap&lt;StringObject&gt;
	
	' Need to load in tab delimited unicode file
	Function SetUp(lang:String = "en")
		mapLanguages = New StringMap&lt;StringObject&gt;
		
		' Load continent data as a single string
		Local file:String[] = LoadString("Data/Languages.txt").Split("~n")
		
		Local index:Int = 0	
		For Local l:String = EachIn file[0].Split("~t")
			If l = lang Then Exit
			index+=1
		Next
		If index &gt;= file[0].Split("~t").Length Then index = 1
				
		' We now know which column we need to store in the map (index)
		file = file[1..]	' Skip header
		
		For Local line:String = EachIn file
			Local data:String[] = line.Split("~t")
			
			If data.Length &gt; 1 Then mapLanguages.Set(data[0], data[index])
		Next
	End
End
</pre><br><br>Then you just need all your strings stored in a UTF-8 tab delimited txt file (Monkey doesn't like csvs)...<br><br><pre class=code>
Tag	en	de	es	fr
Tag_Language	English	Deutsch	Español 	Français
Tag_NationId	0	75	175	71
Tag_Translator	Simon Read	Guillermo Wallbrecher	Chléo
Achievement	Achievement	Achievement	Logro	Succès
Add	Add	Adicionar	Agregar	Ajouter
Add Friend	Add Friend	Freund hinzufügen	Agregar Amigo	Ajouter un Ami
Advanced	Advanced	Fortgeschritten	Avanzado	Avancé

etc
</pre><br><br>Of course the user will have to choose their language at start-up but I guess if you could pull that info from the phone you could do it automatically. <br><br></td></tr></table><br>
<a name="2024195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Double post. <br><br></td></tr></table><br>
<a name="2024194"></a>

<a name="2024193"></a>

<a name="2024192"></a>

<a name="2024191"></a>

<a name="2024190"></a>

<a name="2024189"></a>

<a name="2024723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can detect the language from the user settings on Ios like this:<br><br><a href="https://github.com/JochenHeizmann/Horizon-for-Monkey/blob/master/native/locale.ios.cpp" target="_blank">https://github.com/JochenHeizmann/Horizon-for-Monkey/blob/master/native/locale.ios.cpp</a> <br><br></td></tr></table><br>
<a name="2024722"></a>

<a name="2024819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's great, thank you! <br><br></td></tr></table><br>
<a name="2075947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> sorry to awake this again. but at the moment I have to convert all my apps towards IOS and I need a couple of native functions. For language detection I found this link from maverick.<br><br>but I get an error when I try to integrate a cpp function into a monkey app<br><br><pre class=code> Strict

Import mojo


#if TARGET="ios"
        Import "Myios.cpp"
        Extern
                Class Locale="Locale"
                        Function GetLanguageID$()="Locale::GetDefaultLanguage"
                End
        Public
#end

Class Game Extends App


	Method OnCreate%()
		SetUpdateRate 10
		Return 0
	End



	Method OnUpdate%()
		If TouchHit(0) EndApp()
		Return 0
	End



	Method OnRender%()
		Scale 3,3
		DrawText "V1",10,30
	 	DrawText Millisecs(),10,10
	 	DrawText Locale.GetLanguageID(),10,50
		Return 0

	End
End




Function Main%()
	New Game
	Return 0
End</pre><br><br><br><pre class=code> class Locale : public gxtkObject
{
public:
        static String GetDefaultLanguage()
        {
                NSString * language = [[NSLocale preferredLanguages] objectAtIndex:0];
                return String(language);
        }
};</pre><br><br>As it is my first combination of cpp and monkey I do not know, if it is a bug in the code, or I missed something or ....? <br><br></td></tr></table><br>
<a name="2075946"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
