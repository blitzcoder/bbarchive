<!DOCTYPE html><html lang="en" ><head ><title >shouldAutorotate code broken on iOS 5 devices now</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >shouldAutorotate code broken on iOS 5 devices now</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=505" >iOS</a>/<a href="#bottom" >shouldAutorotate code broken on iOS 5 devices now</a><br><br>
<a name="2039956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The recent update fixed the rotation problem when building to iOS 6, but now when I run the same code and build to my iOS 5 device, it's displaying in portrait mode only.<br><br>To hack this, I had to force the shouldAutorotateToInterfaceOrientation code to return a landscape orientation only, removing any portrait references. <br><br></td></tr></table><br>
<a name="2040035"></a>

<a name="2040036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>This is working here with the 5.1 emulator (forgot to pay my Apple tax so I can't build for an actual device right now).<br><br>Have you changed 'Supported Interface Orientations' settings from xcode 'Deployment Info' page?<br><br>If I change supported orientations to/from portrait/landscape it seems to do what I'd expect...<br><br>Have you deleted .build dir? <br><br></td></tr></table><br>
<a name="2040041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I deleted the build folder when switched to v66, and that's when it built correctly to my iOS 6 device.<br><br>I plugged in an iOS 5.1 device and built to it, not changing any settings, and it flipped the orientation to portrait.<br><br>I have changed all the supported interface orientation settings I could find to only allow landscape.<br><br>I'm installing the simulator now for 5.1 to try it there. <br><br></td></tr></table><br>
<a name="2040046"></a>

<a name="2040047"></a>

<a name="2040048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> UPDATE: <br><br>My simulators create the same problem.<br><br>When the app runs, the simulator is rotated to its landscape position, BUT everything inside is rotated to Portrait.  So I really don't know what's going on.<br><br>In shouldAutorotateToInterfaceOrientation, it appears that interfaceOrientation is always UIInterfaceOrientationPortrait - even if the simulator is displaying on my screen as UIInterfaceOrientationLandscape <br><br></td></tr></table><br>
<a name="2040054"></a>

<a name="2040055"></a>

<a name="2040056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Ok, seems to work fine on an actual device here too.<br><br>Tried with a fresh download of v66, the bouncyaliens sample and a 5.1.1 iPad1.<br><br>MacOS 10.8.2<br>XCode 4.5<br>MonkeyV66<br>iPad1 5.1.1<br><br>What does bouncyaliens do on your setup by default? Can you rotate to any orientation? <br><br></td></tr></table><br>
<a name="2040067"></a>

<a name="2040068"></a>

<a name="2040069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bouncy Aliens seems to work correctly in the simulator.  I don't know, I'll try removing all my scaling and do exactly what's in bouncy alients and see if it makes a difference....<br><br>EDIT: OK, since the bouncy aliens were working and the scaling didn't seem to have anything to do with it, I found that I had to completely delete the project from the XCode Organizer, rebuild, and then it oriented correctly on iOS 5 and 6<br><br>Thanks for your help <br><br></td></tr></table><br>
<a name="2041992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't seem to figure out what to do with this.<br><br>On my iOS 6 devices, I don't have a problem, but I have to edit the orientation functions to force a landscape orientation.<br><br>However, on 5.x devices, I cannot stop it from allowing the device to rotate into a portrait view for a landscape app, and I've removed every portrait reference I can find.<br><br>Any help would be greatly appreciated. <br><br></td></tr></table><br>
<a name="2042233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I experiment hour after hour, it seems that it's important that, for iOS 5.x devices that your initial interface orientation option be added to the plist file, and that it match the top option of the supported interface orientations. <br><br></td></tr></table><br>
<a name="2042313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> FINALLY, I can give you some steps on how this bug is re-created.<br><br>If you take Bouncy Aliens, for example, build for iOS, and run in any simulator, it seems to work fine.<br><br>Now, in XCode, go to the plist file and move the Supported interface orientation options around, like put right home button above left home button, or add an Initial orientation option.<br><br>Run the app again in the iOS 5 simulator, and you'll see how it flips its orientation to portrait - even in landscape mode.<br><br>Once I make a change to the plist file, I can't seem to ever get it back to normal, I have to rebuild from scratch.<br><br>EDIT:<br><br>I've now gone through this experiment just about 50 times, and it appears that if you don't make Landscape, left home button, your initial interface orientation, it just doesn't work. <br><br></td></tr></table><br>
<a name="2042311"></a>

<a name="2054837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now this is happening to me too...ugh.  First it was landscape and the game was rotated left.  Now it's rotated right... <br><br></td></tr></table><br>
<a name="2054839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, with the latest version it's not working correctly, especially since you have to leave Portrait enabled for Game Center login to work.  I had to revert back to v67 to release my new game because of this and implement my tricks, and even then I couldn't get it not to rotate to portrait on the iPad regardless of the way I rotate the device, so I only released on iPhone. <br><br></td></tr></table><br>
<a name="2054900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your code requires Portrait enabled for Game Center login to work then you have incorrect implementation of Game Center. I just checked and in our game if shows in landscape correctly. For sure you can't use lame tricks to rotate GC view via CGRotate or whatever it is cold. You must correctly attach GC view to monkey view and it will work. I apologize for very few details, but I coded it over a year ago and haven't looked at it more. <br><br></td></tr></table><br>
<a name="2054959"></a>

<a name="2054960"></a>

<a name="2054961"></a>

<a name="2054962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are correct, it loads Leaderboards in landscape OK, it's the Game Center Login screen on iPhone (not iPad) that requires Portrait be enabled.<br><br>If you log out of Game Center, disable all portrait views in your app, then open your game on an iPhone/iPod Touch - upon trying to log you into Game Center, it will crash your game because you have to have Portrait enabled for the Game Center login page to open.<br><br>I could technically leave Portrait out, and most of the time leaderboards and such will open fine, and users will be logged into game center automatically, but if someone isn't logged into Game Center for some reason, it will crash when my app opens as it tries to log them in.<br><br>So anyone who doesn't leave Game Center on or doesn't like it, my game is going to crash unless I leave Portrait enabled.<br><br>I think one fix would be to have a compiler directive such as<br><br>#IOS_SCREEN_LANDSCAPE = True<br><br>Then the rotation code could be setup to allow Portrait only if a window such as Game Center is opened, but in ALL other cases force the game back into Landscape mode.  Right now it's still allowing Portrait to be returned as we leave it enabled in XCode for GC to work.<br><br>(Sorry for the rambling) <br><br></td></tr></table><br>
<a name="2054958"></a>

<a name="2055006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I just logged out from GC on my iPhone and run my game. Game starts in landscape and has only landscape enabled. GC login kicks in in portrait mode, but the game doesn't crash. I can login or cancel logging in and game works just fine.<br><br>Check out Runes of Avalon on your iPhone and see if it works as it should. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
