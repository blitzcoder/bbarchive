<!DOCTYPE html><html lang="en" ><head ><title >Retina display question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Retina display question</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=505" >iOS</a>/<a href="#bottom" >Retina display question</a><br><br>
<a name="2055173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello all,<br><br>I was already searched the forums but I think that might be a problem:<br><br>I made all images @2x and put them near the original one. I started the Retina Simulator but the images are not correct. I still have black portions.<br>Tomorrow I will test on a real device but I was wondering why is not correctly working on the Simulator?<br><br>R. <br><br></td></tr></table><br>
<a name="2055176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> solve that! it seems the "simulator" was not rotated. so the images are the good one. full screen, BUT there is still a problem.<br><br>I have all the coordonates hard coded. the buttons are still drawn at the old coordonates. Should I * the values with 2? <br><br></td></tr></table><br>
<a name="2055177"></a>

<a name="2055178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> See this thread: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=4517" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=4517</a><br><br>edit<br>See you solved it, with regards to the button positions etc you might want to take a look at autofit which will scale and manage your game to work on different devices/resolutions, and you can just use hardcoded values to a set virtual resolution like you have been doing - autofit will do the rest.<br><br>autofit: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1500#28006" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=1500#28006</a> <br><br></td></tr></table><br>
<a name="2055188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm, using autofit didn't resolved my issue.<br><br>it took my @2x pictures and double them again... <br><br></td></tr></table><br>
<a name="2055195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> At the point where you had it working full screen but the button co-ordinates were hard coded, all you need from there is autofit.<br><br>Say you work to a resolution of 1024x768, hard code all your buttons to the correct position for this resolution, and then when it is run on an iPad 3 autofit will scale it up to 2048x1536 and also scale the hardcoded button x/y positions with it so they will still work.<br><br>One thing to watch for is that you will need 2 sets of assets to allow full screen across (1)iPhone/iPod and (2)iPad as they are different aspect ratios.<br><br>I have just come across this problem, and now detect the device/resolution at startup and use different assets depending on the resolution/device. <br><br></td></tr></table><br>
<a name="2055200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I only programmed for iPad (1024 x 768)<br><br>I added @2x resources.<br><br>Without using autofit I have the @2x images rendered correctly but at the old coordotnates.<br><br>After integrating autofit, I have the same @2x images scaled to 200% :(<br><br>I used UpdateVirtualDisplay() at the start of the OnRender and SetVirtualDisplay 1024, 768 at the start of OnCreate() <br><br></td></tr></table><br>
<a name="2055203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you are only working on iPad then you can either:<br><br>1) Use 1024x768 as your virtual res and have autofit scale up for iPad 3/4<br>or<br>2) Use 2048x1536 as your virtual res and have autofit scale down for iPad 1<br><br>Also, have you changed any Touch commands to use VTouch? <br><br></td></tr></table><br>
<a name="2055207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> as I said earlier, I added @2x resources - it's this necessary now? using autofit?<br><br><br>"Use 1024x768 as your virtual res and have autofit scale up for iPad 3/4"<br><br>how exactly to do that?<br><br>I already tried:<br>SetVirtualDisplay 1024, 768<br><br>but it is still not working correctly..<br><br>"Also, have you changed any Touch commands to use VTouch? "<br>not yet... for now I am trying to render my menu correctly.. <br><br></td></tr></table><br>
<a name="2055211"></a>

<a name="2055212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you need the @2x images (might be wrong, but I am not using them except in xCode for loading screens, icons etc) as autofit will be doing all the scaling for you.<br><br>A more experienced person might explain better, but basically have your background image at 1024x768, set all your co-ords, buttons etc using this resolution.<br><br>Then when it is run on an iPad with double the resolution, autofit will scale the images and all your co-ordinates up as well.<br><br>Make sure you call VTouchX/Y rather than TouchX/Y so that the inputs are scaled too, if you don't use VTouch then your x/y touch co-ords will not be scaled by autofit so this could be what you are seeing.<br><br>If you want to use a 2048x1536 image then do the same as above for that resolution, and when run on an iPad 1 (1024x768) autofit will scale down your images and the VTouch commands so they work on the smaller resolution. <br><br></td></tr></table><br>
<a name="2055219"></a>

<a name="2055220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe I am crazy but this is not working fine.<br>I tried the followings:<br><br>Case 1: all resources original: 1024 x 768. Using autofit. When simulating a normal ipad (1024 x 768) everything went fine.<br><br>Case 2: when using a Retina iPad, all the images were zoomed in up to 400%<br><br>I am pretty sure I am doing something wrong but I am tired now. I will start over in a few hours!! <br><br></td></tr></table><br>
<a name="2055296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's my advice.<br><br>-=-=-<br><br><b>Warning</b><br>Taking my advice tends to cause annoying issues further down the line.  What might work today, might not work tomorrow, especially in the world of iOS<br><br>-=-=-<br><br>It's probably the @2x that's doing.<br>In "Proper" iDev, the OS loads the different images, then scales the display up, so everything fits snuggly.<br><br>In Monkey iDev, Monkey's display changes to the resolution that it's given, but iOS still loads the @2x.<br>This "should" give a nice result, but in actual fact it leads to you drawing one thing, when your code is expecting another.<br><br>I first came across this issue when the iPad was first released, but used a "None-Retina" (ie none-@2x) display.<br>I'd coded a megaload of stuff to deal with @2x when &gt;x pixels, but then the iPad turned up, and it loaded the small images, but had a big display.<br>grrr!<br>Broke all my lovely code.<br><br>It's now even more complex, now that iPad3+ does have Retina, so will load the @2x, even though the smaller big display doesn't..  What?!<br>Grr!<br><br>Back then, it was annoying and frustrating, so I switched to Cocos2D.<br>Cocos2D taught me not to use Apple's "@2x" conventions, and instead to use their "-hd" methods instead.<br>Essentially, this meant that it was their code deciding which graphics were being loaded, not iOS.<br>I've kept to this methodology, and carried it over to Monkey, and am now drawing with 3 sets of sprites.<br>normal.png for little devices, normal-hd.png for iPad and iPhone Retina, and normal-hd2.png for iPad Retina.<br><br>Since it's my code which decides which one I'm loading, it's up to me to draw it at the right scale, which means I don't have to second guess which assets the device has decided to load for me.<br>It's a LOT easier.<br><br>It'll probably bite me in the ass, later, but so far so good. <br><br></td></tr></table><br>
<a name="2055294"></a>

<a name="2055339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see..<br><br>for now I will use @2x to load images and I am going to multiply by 2 all the coords if I am on Retina.. <br><br></td></tr></table><br>
<a name="2055340"></a>

<a name="2055342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is the resolution of your @2x image, is it 2048x1536?<br><br>If so it sounds like that is the problem, as the @2x image is being loaded, and then autofit is also scaling that 2x again? <br><br></td></tr></table><br>
<a name="2055345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raul</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @rIKmAN: yes and yes.<br><br>my @2x images are for 2048x1536 (I doubled all of my originals) and yes when using autofit this doubled images are doubled again...:D <br><br></td></tr></table><br>
<a name="2055357"></a>

<a name="2055359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use the @2x image as your standard image, and let autofit scale it down for iPad 1 (1024x768), no need for you to use any @2x etc, even in the filename. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
