<!DOCTYPE html><html lang="en" ><head ><title >DeviceWidth / DeviceHeight reporting 0 on iOS</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >DeviceWidth / DeviceHeight reporting 0 on iOS</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=505" >iOS</a>/<a href="#bottom" >DeviceWidth / DeviceHeight reporting 0 on iOS</a><br><br>
<a name="2055985"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using xcode 4.5 with iOS 5.1 or 6 Monkey69 reports width=height=0. <br><br>Debugging shows that this; <br><br>	MonkeyAppDelegate *appDelegate=(MonkeyAppDelegate*)[[UIApplication sharedApplication] delegate];<br>	width=appDelegate-&gt;view-&gt;backingWidth;<br>	height=appDelegate-&gt;view-&gt;backingHeight;<br><br>always returns 0 while Monkey66 reported correct values. What am I doing wrong? <br><br></td></tr></table><br>
<a name="2055991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steven</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same issue here. v69 on a iPad1. AFAIK it's a bug in v69.<br><br>I'm trying v66 to see if its solves the problem. <br><br></td></tr></table><br>
<a name="2055992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> In v66 it works for me; it uses this; <br><br>    bool gxtkGraphics::Validate(){<br>	width=app-&gt;appDelegate-&gt;view-&gt;backingWidth;<br>	height=app-&gt;appDelegate-&gt;view-&gt;backingHeight;<br>	return width&gt;0 &amp;&amp; height&gt;0;<br>    }<br><br>to get that info; it seems app-&gt;appDelegate != (MonkeyAppDelegate*)[[UIApplication sharedApplication] delegate]<br><br>? <br><br></td></tr></table><br>
<a name="2055999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steven</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I followed the startup of the app a bit in the debugger but since i'm far from an expert in the gory details of Objective-C and iOS i was lost quickly.<br><br>Anyway, i've made a bug report.<br><br>g. <br><br></td></tr></table><br>
<a name="2056000"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where are you checking DeviceWidth / DeviceHeight in your code? Because it does seem to work once you are rendering, but not before which breaks, for instance, Diddy. <br><br></td></tr></table><br>
<a name="2056003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steven</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice!<br><br>I did set a virtual resolution in the OnCreate method of my app.<br><br>I tried to move the logic to the OnUpdate method and now it works.<br><br>Thanks for the tip! <br><br></td></tr></table><br>
<a name="2056006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem. But I do think it's a bug still that it doesn't know it's resolution OnCreate of the App :) At least now it works, so no worries. <br><br></td></tr></table><br>
<a name="2056480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see Mark fixed this, but was this just broken in V69 because I've been reading those values fine in OnCreate in previous versions. <br><br></td></tr></table><br>
<a name="2056502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steven</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you test it on an iPad1 with iOS 5.1.1? <br><br></td></tr></table><br>
<a name="2057439"></a>

<a name="2057440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It still seems to be broken (from v69 and up) on iPad1 with OS 5 (don't know the exact version at the moment). It was working before that because my app broke which is actually in the Appstore and tested on the same iPad1. After updating Monkey it stopped working.<br><br>Another interesting side effect seems to be that on the same iPad1 the screen remains black until I execute SetGraphics manually, like so <br><br>		If Not inited And DeviceWidth &gt; 0<br>			SetGraphics DeviceWidth, DeviceHeight<br>			inited = True<br>		End<br><br>In the update method. Otherwise apparently it runs on resolution 0,0, which is rather small :) <br><br></td></tr></table><br>
<a name="2057438"></a>

<a name="2057437"></a>

<a name="2062403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nigelibrown</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using an iPhone4s and DeviceWidth() reports as 480 DeviceHeight() reports 320?<br><br>MonkeyPro69 <br><br></td></tr></table><br>
<a name="2062408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might have to use a launch image to set the correct values. At least this is necessary for the newer iPhone5. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
