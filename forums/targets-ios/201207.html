<!DOCTYPE html><html lang="en" ><head ><title >Lock MonkeyView while another view is open</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Lock MonkeyView while another view is open</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=505" >iOS</a>/<a href="#bottom" >Lock MonkeyView while another view is open</a><br><br>
<a name="2010671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >York</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey guys,<br><br>first I hope you will understand me. It´s not easy to explain my problem in english ^^<br><br>So, I just want to add GameCenter Support to my game. In this case I need to display the Leaderboard in another view. (GKLeaderboardViewController)<br><br>Now I added the two Methods to the MonkeyViewController: ( like the methods in the gamekit programming guide on apple developer... )<br><br>-(void) ShowLeaderboard<br>-(void) leaderboardViewControllerDidFinish...<br><br>Ok, now I can display the Leaderboard and quit them, but my problem is that the MainView -&gt; "MonkeyView" isn´t locked and so the user can controll the menu without seeing it. :(<br><br>So my question is, how could I lock the mainView? Does somebody just tried to display another view?<br><br>I think that I should check if the MainWindow is appear or disappear and so i change the superview, but I dont know how...<br><br>I would be happy if somebody could help me =)<br>Thanks <br><br></td></tr></table><br>
<a name="2010706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't you just test if GameCenter is open and return immediately from OnRender and OnUpdate? <br><br></td></tr></table><br>
<a name="2010729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >York</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm sometimes I think to complicated .. Oo <br>I just added a variable which save if the mainview opens or closed and so I can block the Input. Lol <br><br>Thanks.. ^^ <br><br></td></tr></table><br>
<a name="2010827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you could share your Game Center module with us? <br><br></td></tr></table><br>
<a name="2010835"></a>

<a name="2010836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >York</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey,<br><br>sorry that i answer so late. <br><br>I have no Monkeymodule for that. I only add code to the XCode Project.<br>But my problem is still the same. I can lock the input for the leaderboard view, but if I want to register a new GameCenter Account within the app, the same problem come back..<br><br>Here is the Code( second try ):<br><br>The "GameCenter.h": <br><a href="http://www.pucupo-games.com/h_GameCenter.txt" target="_blank">http://www.pucupo-games.com/h_GameCenter.txt</a><br><br>and the code within the "main.mm":<br><a href="http://www.pucupo-games.com/mm_GameCenter.txt" target="_blank">http://www.pucupo-games.com/mm_GameCenter.txt</a><br><br>My second try is just a edited copy from here:<br><a href="http://www.garagegames.com/community/forums/viewthread/122529/" target="_blank">http://www.garagegames.com/community/forums/viewthread/122529/</a> <br><br></td></tr></table><br>
<a name="2010984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your code looks pretty clean and it looks like it can be easily turned into module. This could solve your problem. Maybe I'll look into this on Monday. <br><br></td></tr></table><br>
<a name="2011025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >York</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> So now my app runs with GameCenter and the Input-problem is fixed. My app is still in review and we will see if apple approves the version.<br><br>I will tell you what I did to finish them on the afternoon. <br><br></td></tr></table><br>
<a name="2011030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great!<br><br>LOL  "...what I did to finish THEM...", sounds like you are finishing Apple.<br><br>Anyway, could you please add info about which frameworks you had to add to the XCode project for GameCenter? <br><br></td></tr></table><br>
<a name="2011061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >York</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey,<br><br>so I have put it in a little Monkey Module, which you can download here:<br><br><a href="http://www.pucupo-games.com/GameCenter.zip" target="_blank">http://www.pucupo-games.com/GameCenter.zip</a><br><br>At this time it only support Leaderboards, but if this works , it wouldn´t no problem to get the archievement run, too.<br><br>Here are all Monkey-Functions of the module....<br><br><br>Before using this module you need to configure your App on ItunesConnect...<br><br><pre class=code>
Function IsGameCenterAvailable:Bool()
Function InitializeGameCenter:Void()   
Function ReInitGameCenter:Void()
Function IsPlayerAvailable:Bool()
Function SendScore:Void(scScore%, scCategory$)
Function OpenLeaderBoard:Void()
Function DeInitGameCenter:Void()
</pre><br><br><br><pre class=code>
Function InitializeGameCenter:Void()   
</pre><br><br>This function check if the GameCenter and a player is available...<br>You need to put it on your „OnCreate()“ method...<br><br><pre class=code>
Function ReInitGameCenter:Void()
</pre><br><br>This function checks if the player had changed. Call it in your OnResume() method...<br><br><pre class=code>
Function SendScore:Void(scScore%, scCategory$)
</pre><br>Send the score to GameCenter. The string: scCategory is how you called your Leaderboard in your Itunes Connect Account, for example: „leaderboard_easy“<br><br><pre class=code>
Function OpenLeaderBoard:Void()
</pre><br><br>Open the Leaderboard in a new view...<br><br><pre class=code>
Function DeInitGameCenter:Void()
</pre><br><br>This function deinit your GameCenter class, but I don´t know if there is a OnQuit() Method??? <br><br>Otherwise you have to edit the main.mm to release it.. Or how could I get this on the AutoRelease pool?<br><br><br>What is needed in Xcode?<br><br>1.)<br>First you need to import the GameCenter.h file to your Xcode project. ( You can find it in the rar-archive )<br><br>2.)<br>Include the „GameKit-Framework“ to your Xcode project...<br><br>Targetsettings -&gt; Build Phases -&gt; Link Binary with Libraries <br>It is important to set it to „optional“ ( weak link ), because older devices haven´t the GameKit included and it would crash...<br><br>3.)<br><br>In this function in your „main.mm“ file, I had to make two changes, cause of some trouble with the input...<br><br><pre class=code>
void gxtkInput::OnEvent( UIEvent *event ){
</pre><br><br><br>Change 1:<br><br><pre class=code>
	UIView *view=app-&gt;appDelegate-&gt;view;

	change to:

	UIView *view=app-&gt;appDelegate.viewController.view;
</pre><br><br><br>Change 2:<br><br><pre class=code>
	for( UITouch *touch in [event allTouches] ){

	change to:

	for( UITouch *touch in [event touchesForView:view] ){
</pre><br><br>In my project I did it without any Monkey module and it works. <br>I hope you could help me to finish this module...<br><br>How you can see, my english isn´t very well. So I hope someone could translate this, if we can finish it, to a readable english =) <br><br></td></tr></table><br>
<a name="2011060"></a>

<a name="2011149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I spent some time with your module and simplified few things. Now you don't need to change main.mm code if you can control your GUI through function isGameCenterVisible() (if yes then don't check controls). <br><br>The mod has one missing feature at the moment (beside achievements):<br>- it always shows in portrait mode<br><br>I am still looking for solution to adjust GC to your current device orientation.<br><br>You can download updated mod from here:<br><br><a href="http://innotech.pl/anawiki/4people/iosGameCenter.zip" target="_blank">http://innotech.pl/anawiki/4people/iosGameCenter.zip</a><br><br>It also doesn't need GameCenter.h from previous version of module (included in ios.cpp).<br><br>New function:<br><br>IsGameCenterVisible() - returns true if leader board view is opened (at the moment it's the only view in this mode).<br><br>I'll look into achievements tomorrow.<br><br>If you spot any bugs please update and let us all know :) <br><br></td></tr></table><br>
<a name="2011158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >York</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> And did you have no trouble with the Gamecenter-Registerview? That´s why I changed the code in the main.mm ...<br><br>So I mean, if there is no player loged in, GameCenter will ask you if you want to register a new player. If you tap on "register new player", a view opens where I got this trouble... ?? <br><br></td></tr></table><br>
<a name="2011171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... I don't know. I just logged in to existing account. I'll test it tomorrow and let you know. <br><br></td></tr></table><br>
<a name="2011174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> What kind of problems do you experience? I created the account, but on the last step I either swiped the GameCenter window down or it moved down by itself and I lost ability to click on my GUI... not sure if it's because my GUI wasn't locked for the time and I messed up some things in my game or Monkey lost some view control. <br><br></td></tr></table><br>
<a name="2011196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >York</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> My experience in this case is that my Gui isn´t locked during this view is open. If the view lost controll after closing I don´t know. <br><br>But it could be. I had another problem where the view lost controll. The problem appeared after I opened an Url within my App and resuming to game. <br><br>I found a part in monkey which is commented, but I don´t know why? Perhaps you know why.. hmm<br><br><pre class=code>
@implementation MonkeyWindow
/*
-(void)sendEvent:(UIEvent*)event{
   [super sendEvent:event];
   MonkeyAppDelegate *delegate=(MonkeyAppDelegate*)[[UIApplication sharedApplication] delegate];
   [delegate onEvent:event];
}


-(void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event{
   MonkeyAppDelegate *delegate=(MonkeyAppDelegate*)[[UIApplication sharedApplication] delegate];
   [delegate onEvent:event];
}

-(void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event{
   MonkeyAppDelegate *delegate=(MonkeyAppDelegate*)[[UIApplication sharedApplication] delegate];
   [delegate onEvent:event];
}

-(void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event{
   MonkeyAppDelegate *delegate=(MonkeyAppDelegate*)[[UIApplication sharedApplication] delegate];
   [delegate onEvent:event];
}

-(void)touchesCancelled:(NSSet*)touches withEvent:(UIEvent*)event{
   MonkeyAppDelegate *delegate=(MonkeyAppDelegate*)[[UIApplication sharedApplication] delegate];
   [delegate onEvent:event];
}
*/</pre><br><br>After I delete the comment-chars , there aren´t any problems with losing view controll.. ? <br><br></td></tr></table><br>
<a name="2011195"></a>

<a name="2011194"></a>

<a name="2011374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >York</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, Apple has the version approved and it runs :D<br><br>If you have an IPhone/Ipod you can get it here:<br><a href="http://itunes.apple.com/app/cubeclacker/id446474539" target="_blank">http://itunes.apple.com/app/cubeclacker/id446474539</a> <br><br></td></tr></table><br>
<a name="2017097"></a>

<a name="2017108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alex</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey guys!<br>Thank you all for great mod!<br><br>GameCenter features are very useful. I wonder why there's no such standard mod in monkey!<br><br>Just added function that sends Achievements. But it only works if Game Center is available. =(<br>Still working on it.<br><br><a href="http://www.white-zebra.com/upload/iosGameCenter.zip" target="_blank">http://www.white-zebra.com/upload/iosGameCenter.zip</a><br><br>Good luck! <br><br></td></tr></table><br>
<a name="2017155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have some more functions added and "no internet support" too. Will upload later. <br><br></td></tr></table><br>
<a name="2017224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alex</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I emailed you. If you want I can put your mod on my site!<br>My email:<br>alex()white-zebra.com<br><br>Thanks in advance.<br><br>OpenLeaderBoard() not seem to work in my app... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
