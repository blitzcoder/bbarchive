<!DOCTYPE html><html lang="en" ><head ><title >Program received signal:  “0”.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Program received signal:  “0”.</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=505" >iOS</a>/<a href="#bottom" >Program received signal:  “0”.</a><br><br>
<a name="2006816"></a>

<a name="2006817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Finally got Pirates running on the iPod... (after fighting with Apple to get the dev program, installing certificates and finding out how to change the architecture to arm6 etc)<br><br>But after playing the game for a few minutes it crashes (works fine in the simulator)... found the debug console (why gdb??) and it out puts the following:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Running…
[Switching to thread 11523]
[Switching to thread 11523]
continue
warning: Unable to read symbols for /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.2.1 (8C148)/Symbols/usr/lib/info/dns.so (file not found).
AudioStreamBasicDescription:  2 ch,  44100 Hz, 'lpcm' (0x00000C2C) 8.24-bit little-endian signed integer, deinterleaved
2011-05-23 17:38:41.143 MonkeyGame[244:307] Received memory warning. Level=1
Program received signal:  “0”.
Data Formatters temporarily unavailable, will re-try after a 'continue'. (Unknown error loading shared library "/Developer/usr/lib/libXcodeDebuggerSupport.dylib")
</textarea><br><br>Any ideas?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2006828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something wrong with sound?<br><br>Anyway, congrats on getting through the pain of setting up certificates :) I'm still not done with that... <br><br></td></tr></table><br>
<a name="2006867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xzess</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah finally me got it running also.<br>I have a memory warning also, is there a possibility to free memory? <br><br></td></tr></table><br>
<a name="2006873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Are you loading images while the app runs, or preloading all images at startup? <br><br></td></tr></table><br>
<a name="2006875"></a>

<a name="2006876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Most are preloaded at the start (along with all the sounds, apart from Music), the backgrounds are loaded per level... one level contains 10 rounds and it only loads the background on round one.<br><br>Ive seen the crash happen when just playing the cards (nothing special happening) and when the next round starts. <br><br></td></tr></table><br>
<a name="2006877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>How about music? How many songs are there?<br><br>The current version does have issues with auto-releasing images though.<br><br>I'm gonna add a Discard() method to Image and Sound, but you should still be able to rely on GC (once I fix it!). <br><br></td></tr></table><br>
<a name="2006878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The music is played via the PlayMusic command at the start of each level. I think there are 8 tracks (1 for the intro, 1 for the title and 6 for the main game).<br><br><div class="quote"> <br>The current version does have issues with auto-releasing images though.<br> <br></div><br><br>Cool Ill hold off releasing anything on the iOS for now... any eta? <br><br></td></tr></table><br>
<a name="2006930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xzess</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks mark, this sounds great!<br>Best wishes <br><br></td></tr></table><br>
<a name="2007011"></a>

<a name="2007012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xzess</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im really hot on that Discard() method, hopefully you can add it in the next version because my workaround isn't really nice and i want to release it in appstore when you add the Discard() method (if it don't take to long)<br><br>Mark, could you give a date over thumb?<br><br>Unfortunately i have the same problems like therevills :/ <br><br></td></tr></table><br>
<a name="2007149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tested v40... still getting this error.<br><br>Ive removed the PlayMusic command and it does play better... for a while, then I get the error again... <br><br></td></tr></table><br>
<a name="2007151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Can you email me the project? <br><br></td></tr></table><br>
<a name="2007154"></a>

<a name="2007156"></a>

<a name="2007157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will do... its around 25MB though.<br><br>Been testing some more... Ive removed the PlaySounds now, but it still crashes. If I leave the game alone (on the game screen) it sometimes crashes as well.<br><br>BTW Im using XCode 3.2.6 if it makes a difference. <br><br></td></tr></table><br>
<a name="2007491"></a>

<a name="2007492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> We're getting that error too :(<br><br>Maybe it's because we try to play another song? On the title screen the music plays well, but when we move to the game it should play different song and so it crashes.<br><br>If we remove music from the game it works like a charm. <br><br></td></tr></table><br>
<a name="2007509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried removing the music too and it latest longer, but still got the error later on.<br><br>I've been emailing Mark about this issue:<br><br><div class="quote"> <br>Well, I don't think it's a memory leak - I just ran it through a leak<br>detector thing in xcode which only came up with one leak in mac audio<br>(per run) which is apparently known about:<br><br><a href="http://stackoverflow.com/questions/3837294/iphone-openal-audiotoolbox-leak" target="_blank">http://stackoverflow.com/questions/3837294/iphone-openal-audiotoolbox-leak</a><br><br>If you want to test for leaks yourself, run<br>'/Developer/Applications/instruments', choose 'leaks' at startup, then<br>'MoneyGame' from the 'Choose Target' combo and the 'record' button to<br>start recording. Game already needs to be uploaded to device.<br><br>I added a little 'max mem usage' monitor to the built-in Monkey GC,<br>and it never even reaches 1Meg so it doesn't appear to be anything<br>language related.<br><br>But in the instruments tool, it says the app is consistently using<br>30M, and occasionally spikes at 50M. This is non-Monkey overhead, and<br>I'm not sure why it's so big but I'm guessing it's graphics related.<br><br>Okay...it does appear to be graphics related - GLES texture memory is<br>at about 30M according to the 'Graphics' instrument.<br><br>I think what you'll need to do is:<br><br>* Remove alpha from any images that don't require it - had a quick<br>look and all your images appear to include alpha.<br><br>* Aggressively use Discard() to discard images when they're not needed.<br><br>* Use the attached mojo.ios.cpp - doesn't seem to make a difference<br>here, but it does contain one 'recommended' tweak that pertains to<br>memory management.<br> <br></div><br><br><div class="quote"> <br>In mojo.ios.cpp, change this...<br><br>       UIImage *uiimage=[ UIImage imageNamed:nspath ];<br><br>...to this...<br><br>       UIImage *uiimage=[UIImage imageWithContentsOfFile:nspath];<br> <br></div><br><br><div class="quote"> <br>Oops, use this instead:<br><br>       UIImage *uiimage=[UIImage imageWithContentsOfFile:[[NSBundle<br>mainBundle] pathForResource:nspath ofType:nil inDirectory:@""] ];<br><br>I reckon try that + discards - it might be enough!<br><br> <br></div><br><br>Also did you see what Skid wrote in the rendering performance thread about Cls?<br><br><a href="http://www.monkeycoder.co.nz/Community/post.php?topic=869&amp;post=7399" target="_blank">http://www.monkeycoder.co.nz/Community/post.php?topic=869&amp;post=7399</a><br><br>I havent used Cls in PS as I thought it would be slower and not needed, but going on the doco about Erase the Renderbuffers it might help with the Program received signal: “0” crash.<br><br>I havent had time to test these, hopefully on the weekend... <br><br></td></tr></table><br>
<a name="2007592"></a>

<a name="2007594"></a>

<a name="2007595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried the "fix" to mojo.ios.cpp, and it didnt work... now if I turn off music and sound it seems pretty stable...<br><br>@anawiki - what sound format are you using?<br><br>[Edit]<br>Just swapped my sounds from WAVs to MP3s and it looks stable with sounds on and music off... (also looks like V40 has fixed the popping sound with mp3s)<br>[/Edit] <br><br></td></tr></table><br>
<a name="2007596"></a>

<a name="2007597"></a>

<a name="2007601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> More testing...<br><br>Ive got 6 music files which I play during the main game with the PlayMusic command, for iOS they are MP3s.<br><br><pre class=code>
Track | Memory Warning | Crash | Size
------+----------------+-------+--------
   0  |     YES        | YES   | 1.1 MB
   1  |     NO         | YES   | 1.4 MB
   2  |     NO         | YES   | 1.5 MB
   3  |     YES        | YES   | 1.0 MB
   4  |     NO         | NO    | 709 KB
   5  |     NO         | YES   | 1.7 MB
</pre><br><br>This is with the "fix". So looking at these results it looks like anything over 1MB crashes the game... BTW the game plays an intro with music of 250KB, then displays the title with music of 1.2MB.<br><br>Im going to compress the music under 1MB to see if this helps...<br><br>[Edit]<br><pre class=code>
Track | Memory Warning | Crash | Size
------+----------------+-------+--------
   0  |     YES        | NO    | 803 MB
   1  |     NO         | YES   | 1 MB
   2  |     NO         | YES   | 1.1 MB
   3  |     NO         | NO    | 774 MB
   4  |     YES        | NO    | 532 KB
   5  |     NO         | YES   | 1.3 MB
</pre> <br><br></td></tr></table><br>
<a name="2007598"></a>

<a name="2007599"></a>

<a name="2007600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am using m4a format. Don't remember the size of files at the moment, but I believe that the title song is bigger than 1mb and it plays fine. The game crashes later when we try to play another song. I am using v40. <br><br></td></tr></table><br>
<a name="2007602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> So you are purely using m4a for all files (music and sounds)? <br><br></td></tr></table><br>
<a name="2007603"></a>

<a name="2007604"></a>

<a name="2007605"></a>

<a name="2007606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Compressed the tracks to 24000Hz, 24kbps, mono<br><br><pre class=code>
Track | Memory Warning | Crash | Size
------+----------------+-------+--------
   0  |     N          | N     | 406 KB
   1  |     N          | N     | 520 KB
   2  |     N          | N     | 553 KB
   3  |     N          | N     | 389 KB
   4  |     N          | N     | 270 KB
   5  |     Y          | N     | 635 KB
</pre><br><br>I've emailed Mark my results and this is his reply:<br><div class="quote"> <br>Hi,<br><br>The music in the iOS version isn't streaming yet, so it will consume a<br>lot of memory - any idea how long the music is uncompressed?<br><br>Will have a look into streaming music for iOS early next week.<br><br>Bye!<br>Mark<br> <br></div><br><br>[edit]<br>Just played an entire level (10 hands) of Pirates Solitaire with the above music files on the iPod, which took over tens minutes - it didnt crash and started the next level fine :) <br><br></td></tr></table><br>
<a name="2007611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >anawiki</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using w4a for almost all music and sounds, except one sound effect that after converting to m4a made the game crash (so I keep it in wav).<br><br>My music is 1.2MB size in w4a and 12MB uncompressed and plays fine. The one that fails is 2.2MB size in w4a and 19MB uncompressed. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
