<!DOCTYPE html><html lang="en" ><head ><title >Vertex program / shaders</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Vertex program / shaders</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=103" >OpenGL Module</a>/<a href="#bottom" >Vertex program / shaders</a><br><br>
<a name="486338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone had any success using vertex programs/shaders???<br><br>Regards <br><br></td></tr></table><br>
<a name="486348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup<br><br><img src="http://www.tomspeed.com/toon.jpg"><br><br><img src="http://www.tomspeed.com/p1.jpg"><br><br><img src="http://www.tomspeed.com/p2.jpg"><br><br>The parallax one is gorgous to look at, but pounds my GF FX5600s frame rate (something like 40 - 50fps) at the scale shown, though Noel Cowers spangly XT800 got about 600fps I think<br><br>Not all shaders are slow, the toon one is quite fast, alone and full screen I get abotu 1100 fps, the lattice (cage looking) one is slow. Fill rate is a big factor on performance, the more the geometry fills the screen, the slower it gets.<br><br>Shaders can be loaded &amp; used with about 4 function calls in my (bunch of functions &amp; types I call an 'engine' :) ), and you can turn them on/off per entity surface.<br><br>I've currently got a few problems that aint been answered yet though :S Maybe if MArk reads this thread he'll have an idea what's going on here?<br><br>http://www.opengl.org/discussion_boards/cgi_directory/ultimatebb.cgi?ubb=get_topic;f=11;t=000613<br><br>Cya!<br>Tom <br><br></td></tr></table><br>
<a name="486352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks amazing, and thats done in BMAX?<br>Is it difficult to code? <br><br></td></tr></table><br>
<a name="486362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> All in max yeah.<br><br>Difficult?....<br><br>Implementing a Shader system wasn't too hard, the actual shader language is another matter, GL Shader Language (GLSL) specs &amp; manual are here: <a href="http://www.opengl.org/documentation/oglsl.html" target="_blank">http://www.opengl.org/documentation/oglsl.html</a><br><br>You can use programs like www.typhoonlabs.com Shader Designer or ATIs RenderMonkey <a href="http://www.ati.com/developer/rendermonkey/index.html" target="_blank">http://www.ati.com/developer/rendermonkey/index.html</a> to aid in designing Shaders (both currently free programs!) <br><br></td></tr></table><br>
<a name="486364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see, so you have to code the shaders seperatly in other languages, not as easy as doing it all in BMAX.<br><br>Thanks for the info mate, and Welldone to you Tom, it's an excellent achievement. <br><br></td></tr></table><br>
<a name="486365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your reply.<br><br>I've now got em working with vertex arrays and vertex indices.<br><br>But I just learned the VERY hard that the shader file is case sensitive. tut tut. Just wasted about 4 hours before I just realised I have a temp and was accessing it as Temp !!!! I was getting an error after the 'glProgramStringARB............' command! Although the error didn't stop the program, OPenGl just generated the error internally ( retrieved by glGetError() ) and just ignored the command, hence i got a blank screen! A lesson learned here is always do ERROR CHECKING.<br><br>What a nightmare! At least I know now, and I won't make that mistake again!<br><br>Keep a look out for some spankingly cool demos effects! :)<br><br>@Tom: You dont have to program the shader in another app (although the apps do offer immediate visuals as to what you will get!).  The shader program is just a normal ascii file. Then you load that file into your program and store it in a string, then load the string up to your graphics card! You can infact ( and I did ) just have a text string in your bmax program that contains all the right shader commands! then upload that to the graphics card. Cool stuff with unbelievable possibilties! :D<br><br>Thanks again <br><br></td></tr></table><br>
<a name="486382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, Anyone know if theres a way to load of convert D3D .FX files in GL? most 3D apps support .FX as do most shader tools, and 3dsmax even lets you create shaders from within the standard 3dsmax material editor. so you can model with bump, specular and masked materials etc, see it in realtime in your viewports and save out he .FX material.<br><br>2.4mb WMV file<br><br><a href="http://mtlstream02.discreet.com/streaming/ms/showdx_200k.wmv" target="_blank">http://mtlstream02.discreet.com/streaming/ms/showdx_200k.wmv</a> <br><br><br>2.4mb QUICKTIME file<br><br><a href="http://mtlstream02.discreet.com/streaming/qt/showdx_300k.mov" target="_blank">http://mtlstream02.discreet.com/streaming/qt/showdx_300k.mov</a><br><br><br><br><br>Just need to find a uility that can load or convert the FX files. <br><br></td></tr></table><br>
<a name="486492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yippee! :)<br><br>Could someone please do a tutorial on this please?<br>As it sounds so unbelievable. And would love to be able to do it!!! :)<br><br>Thanks,<br>THUMBZ <br><br></td></tr></table><br>
<a name="486569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Loonie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> For those fortunate souls that are on OSX, there's a shader creation utility in the dev tools folder.....it's pretty neat. <br><br></td></tr></table><br>
<a name="487645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please please do a tutorial, as I really want to understand BMAX and all things OPENGL. <br><br></td></tr></table><br>
<a name="488002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd love to. Damn I gotta get me self some webspace!! <br><br></td></tr></table><br>
<a name="488225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Tom.<br>Could you kind enough to show me a little bit of shader initialisation code please. The only bits I'm interested in are:<br><br>glShaderSourceARB( vertexshader,1,Varptr vertexShaderStrings,Null)<br>glCompileShaderARB(vertexShader)<br><br>and how you have setup the 'vertexshader' variable and 'vertexshaderstrings' variable. I'm having a spot of trouble getting the pointers right and although my code will run it generates an internal GL_ERROR and the shader won't do its thing.<br><br>Many thanks <br><br></td></tr></table><br>
<a name="488304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Sure thing....<br><br>Important: BACKUP YOUR WORK BEFORE USING OTHER PEOPLES CODE!!<br><br>Note: I use 2 space TAB size when coding (just warning you! :)<br><br>Here's my 'ongoing' GLSL Module.<br><a href="http://www.tomspeed.com/glsl.bmx" target="_blank">http://www.tomspeed.com/glsl.bmx</a><br><br>GLSL Shaders come in 2 flavours, Low level &amp; High Level. Low level shader source kinda looks like ASM, where as High level looks more like C (more readable!). My GLSL system relies on shaders being High level and won't (untested but pretty sure) work if you give it Low level shader source, because the 2 are applied differently in GL.<br><br><br>Here's a brief explanation on how I implement it<br><br><pre class=code>
'Each surface in my Mesh entitys
'can have their own 'tShaderObject'
'i.e: myMesh.surfShader


'cubeSurf is a surface on a mesh (a cluster of Tris)

cubeSurf.surfShader = tProgramObject.Create()

Local vertShader:tShaderObject = CreateVertShader("Lattice.vert")
Local fragShader:tShaderObject = CreateFragShader("Lattice.frag")

cubeSurf.surfShader.AttachVertShader(vertShader)
cubeSurf.surfShader.AttachFragShader(fragShader)

'Yes, we want to use the shader when rendering
cubeSurf.useShader = True



cubeSurf.setShaderVars = ToonShaderVars

'^^
'A cool feature in blitzmax, setShaderVars is a Function Pointer
'In this case, I use them to point the surface shader to a user
'defined 'callback' Function to change variable settings within
'the shader!
'
'example, in my surface process I do something like this
'
'			If surf.useShader 'use the shader?
'				surf.EnableShader() ' enable this surfaces shader
'				surf.setShaderVars(surf.surfShader) ' set the shader Variables (call LatticeShaderVars())
'			End If
'
'     DrawSurfaceGeometry()
'
'     disable shader e.t.c
'
'So the function below would be called automaticaly, and the user
'can tweak shader variables easily this way!


Function LatticeShaderVars(s:tProgramObject)
	'Here's how you tweak shader variables!
	s.SetUF3("LightPosition",1.0,4.0,3.0)
	s.SetUF3("LightColor",1.0,0.8,0.9)	
	
	s.SetUF3("EyePosition",myCam.GetX(3), myCam.GetY(3), myCam.GetZ(3))

	s.SetUF3("AmbientColor",0.2,0.2,0.2)		
	s.SetUF3("Specular",0.2,0.2,0.2)
	s.SetUF1("Kd",0.8)	

	s.SetUF2("Scale",10.0,10.0)	
	s.SetUF2("Threshold",0.13, 0.13)
	s.SetUF3("SurfaceColor",1.0,0.0,1.0)
End Function</pre><br><br>Any Q's ? :)<br>Tom <br><br></td></tr></table><br>
<a name="488332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your help Tom. I really appreciate it. <br><br></td></tr></table><br>
<a name="488386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem I had was I was loading the shader file as text, where as it should have been loading it in as bytes.<br><br>Thanks again for your help.<br>Nice module btw :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
