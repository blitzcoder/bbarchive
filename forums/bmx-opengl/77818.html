<!DOCTYPE html><html lang="en" ><head ><title >How easy would it be to implement OGL 3.0 in BMAX</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How easy would it be to implement OGL 3.0 in BMAX</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=103" >OpenGL Module</a>/<a href="#bottom" >How easy would it be to implement OGL 3.0 in BMAX</a><br><br>
<a name="871457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >monotonic</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm seriously thinking about buying BMAX but, from what I have read BMAX only supports v1.1 of OGL. Now my question is how easy would it be to implement OGL v3.0 when it is released?<br><br>Thanks in advance. <br><br></td></tr></table><br>
<a name="871526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very easy.<br><br>However, I think OpenGL 3.0 maybe have been cancelled.  They were supposed to have it out 6 months ago, and no one is saying anything, which indicates to me they are having legel/IP problems.  Software patents in action.<br><br>OpenGL 3 is really just an API cleanup and removal of a lot of obsolete functions.  OpenGL 2.1 can do everything DirectX 10 can right now. <br><br></td></tr></table><br>
<a name="871537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> From 1.1 you can use GLEW to access any other extensions that you need, which will include all functionality in the official 2.1 or whatever. <br><br></td></tr></table><br>
<a name="871543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >monotonic</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh ok, so I take it this is already built into BMax?<br><br>Thanks guys, that clears things up.<br><br><br>@Leadwerks<br><br>I will be using your engine with BMax anyway, I just wanted to play around with the OpenGL stuff until I build a good enough machine to run LWE. <br><br></td></tr></table><br>
<a name="871666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah you initialize Glew and then you can get access to extensions. All the extensions together would officially make up the equivalent of GL 2.0 or whatever. I think they change some of the extension names or whatever, but hey. And you have to test to make sure the extensions you want to use are supported on the computer you are running on. <br><br></td></tr></table><br>
<a name="879275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> So it's already GL 2.1? Or do you have to add the extensions manualy? Curious. <br><br></td></tr></table><br>
<a name="879465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might have to update GLEW yourself. I think someone mentioned that it is a little outdated and "only" on OpenGL 2.0 (which already is more than your hardware supports of the leadwerks engine does not work on it) <br><br></td></tr></table><br>
<a name="929315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am curious about this need to update Glew. I did see online somewhere that the glew library itself had to go through updates in order to support newer gl commands. So does that mean that if I want to use an OpenGL 3 feature I will have to somehow implement a more recent version of glew in order to make the functions available? <br><br></td></tr></table><br>
<a name="930238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone? <br><br></td></tr></table><br>
<a name="930269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
If GL_VERSION_1_1
	If GL_VERSION_1_2
		If GL_VERSION_1_3
			If GL_VERSION_1_4
				If GL_VERSION_1_5
					If GL_VERSION_2_0
						Print "GL 2.0"
					Else
						Print "GL 1.5"
					EndIf
				Else
					Print "GL 1.4"
				EndIf
			Else
				Print "GL 1.3"
			EndIf
		Else
			Print "GL 1.2"
		EndIf
	Else
		Print "GL 1.1"
	EndIf
Else
	Print "GL ?.?"
EndIf
</pre><br>The constant for GL_VERSION_2_1 is missing, so I think 2.1 is not supported. <br><br></td></tr></table><br>
<a name="930345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh. So the default version of glew that BlitzMax has, supports GL up to 2.0, and anything above that is going to need a new version of the glew library wrapped, right? <br><br></td></tr></table><br>
<a name="930502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="https://sourceforge.net/project/downloading.php?group_id=67586&amp;filename=glew-1.5.1-src.zip" target="_blank">https://sourceforge.net/project/downloading.php?group_id=67586&amp;filename=glew-1.5.1-src.zip</a><br>You can find glew.c, glew.h, glxew.h and wglew.h from that zip file, then open glew2bmx.bmx and read instructions. I think that is all that is needed for GL 3.0, I don't have access to BMX currently so I can't try. <br><br></td></tr></table><br>
<a name="930523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, I will try it and see how it goes.<br><br>Question - if I update glew like this, does it cause BlitzMax apps to `require` OpenGL 3, or will it still work when there is only GL1.1 available?<br><br>Question - The glew2bmx program outputs all the constants and stuch, but instead of outputting functions it outputs Global, then the function with params, and then often ="__glewsomething". I don't see those kind of function equators in the opengl.bmx file - so do they belong there? Do I need to edit it a bit? <br><br></td></tr></table><br>
<a name="930577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, can't help you there buddy. <br><br></td></tr></table><br>
<a name="930602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Example:<br><pre class=code>
Global glCopyTexSubImage3D(target_:Int,level_:Int,xoffset_:Int,yoffset_:Int,zoffset_:Int,x_:Int,y_:Int,width_:Int,height_:Int)="__glewCopyTexSubImage3D"
</pre><br>becomes...<br><pre class=code>
Function glCopyTexSubImage3D(target_:Int,level_:Int,xoffset_:Int,yoffset_:Int,zoffset_:Int,x_:Int,y_:Int,width_:Int,height_:Int)
</pre><br>????<br>I don't see ANY extensions being defined in opengl.bmx, just the standard gl1.1 stuff. And yet BMax lets you use extensions from 1.1, so this stuff must be defined somewhere else in blitzmax?<br><br>e.g. if I call glCopyTexSubImage3D(), which is a GL 1.2 command, blitz recognizes the command and tells me I am missing some parameters. So that's obviously defined somewhere and used by blitzmax, but not in the opengl.bmx file. Perhaps it's in the glew.bmx file in the glew module? (i'll check there) <br><br></td></tr></table><br>
<a name="930604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay now I'm getting somewhere.<br><br>In the pub.glew.mod module, ie glew.bmx, you see the same kind of code which is output from the glew2bmx.bmx program - but not all of it. As per the instructions in that program, it starts after the glViewport definition from gl1.1:<br><pre class=code>Function glViewport(x_:Int,y_:Int,width_:Int,height_:Int) 'does not appear

Global GL_VERSION_1_1:Byte="__GLEW_VERSION_1_1" 'appears as the first line
</pre><br>So it appears that you run glew2bmx.bmx, then cut and paste the output window's text from just after the glViewport function, down to the bottom (not including program finished messages), and paste it into/replace the definitions in glew.bmx <br><br></td></tr></table><br>
<a name="930607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, so Mark knows this already, and some other people probably do too, but here's my description of how this works for anyone who doesn't know... (correct me if I'm mistaken)...<br><br>BlitzMax starts its OpenGL support at version 1.1<br><br>In order to make it easier to update BlitzMax with a newer version of glew, to support newer versions of OpenGL and new extensions, Mark (or someone) wrote a conversion program, glew2bmx.bmx, which is in the mod/pub.mod/glew.mod/ folder.<br><br>This program takes a glew.h header file (which is part of the standard glew distribution package, and which is kept in mod/pub.mod/glew.mod/GL/), parses it and converts it to the appropriate BlitzMax calls. The calls it generates sets up constants, and function references to external C functions. The C functions are stored in glew.c which is also part of the glew distribution package. <br><br>Glew.c does the hard work of the actual glew system, while mod/pub.mod/glew.mod/glew.bmx and mod/pub.mod/opengl.mod/opengl.bmx contain the blitz-converted version of glew.h<br><br>When you compile and run glew2bmx.bmx, it does not write any files. It simply print output text to the output console of the BlitzMax IDE. The text generated after the `executing [programname]` line, starting with `Const GL_ACCUM=$0100`, down to `Function glViewport(x_:Int,y_:Int,width_:Int,height_:Int)` define OpenGL 1.1 commands and constants. If GL1.1 was ever updated (which it won't be), you'd copy all lines from the Const GL_ACCUM line down to the glViewport line (inclusive) should be copied and pasted into the mod/pub.mod/opengl.mod/opengl.bmx file. You should already have this file and all of the GL1.1 stuff defined as a standard Blitzmax module file. It has a few other things in it besides just the copied text - e.g. it also imports glu.bmx (which does not need updating).<br><br>The rest of the text in the output window (from running glew2bmx.bmx), from `Global GL_VERSION_1_1:Byte="__GLEW_VERSION_1_1"` down to the line before `Process complete` needs to be copied and pasted into the mod/pub.mod/glew.mod/glew.bmx file. This is also a standard blitzmax module file with a few other things in it, including the undocumented glewinit() function.<br><br>Currently BlitzMax has code output from glew 1.3.4, which supports OpenGL 2.0 plus some additional extensions added in that version of glew, but it does not support OpenGL 2.1 or higher (unless via existing extensions). To support OpenGL 3 official commands, or additional recently added extensions, you need to download the latest glew package,  copying the output (GL1.2 onwards) into glew.bmx - and glew.c needs to be in the glew.mod folder. The GL/ subfolder needs to contain glew.h, glxew.h and wglew.h. See <a href="http://glew.sourceforge.net/" target="_blank">http://glew.sourceforge.net/</a><br><br>Once you've downloaded the latest version and put the files in the appropriate folders, you can run glu2bmx.bmx and copy the partial output to glew.bmx<br><br>Now, the way I understand it, glew.bmx contains function definitions for all versions of GL (up to whatever glew supports) and all known extensions in that version of glew. It is not necessary for the computer that blitz runs on to support all of these commands. For example, I know that OpenGL on my ibook does not support GL2, it's more like 1.4 or something, and yet BlitzMax's glew.bmx has gl2.0 commands in it.<br><br>To use OpenGL 1.1 commands you do not need to do anything for them to be available in your programs (unless you're using Import, then you have to import the OpenGL.mod). The target machine doesn't even need to have ANY opengl driver for blitzmax to work, but if you try to call an opengl command it probably won't do anything (?! or bomb out?).<br><br>If you want to use GL 1.2 or above, or any extensions, then you have to call glewInit() first from your program. This will (I am guessing) go look at the GL driver and find out what features are supported, what extensions are available, what GL version, etc. It would then `map` the Blitz functions to glew's version of those functions (in C), and would presumably map to Null() if the feature is not available (?). Since glew defines commands which may not be supported on the target machine, you can conceivably call them, but if you don't check for their availability first then will get some undefined result? Or no result? Or a crash?<br><br>This is where using stuff like glGetString comes in handy for getting a list of what version of opengl is supported and what extensions are supported. You would have to sort of `manually` make sure that you don't call a function that GL says is part of a version or extension that isn't supported on the target machine. So an essential part of using GL 1.2 or higher or extensions, is to first test GL to see what the driver supports and then call your code to use functions conditionally, based on availability. I almost think I read somewhere that if a function is not supported it will simply return Null or do nothing?<br><br>The nice thing is that once you define your glew.bmx file with all the latest commands/extensions/constants, and you update your C files of course, you at least get a nice list of all the available functions and constants (which comes in handy for me in my project). Even if the target machine doesn't support everything, you at least know what they are, so you can write your code and still be using legal function names.<br><br>I always did wonder how Blitz was auto-defining Gl/extension functions - they're already defined! :-)<br><br>One thing I also learnt while figuring this out is the way you set up references to external functions and constants in C files - might come in handy for future modules. The ="something" after the function name is basically the name of the function in the C file, and it can be different than what you're calling it in BlitzMax.<br><br>Cool beans. Let me know if anything I've said is not correct, and perhaps we can clarify about whether unsupported functions return Null or call Null(). <br><br></td></tr></table><br>
<a name="972667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for this last post, ImaginaryHuman. Just helped me out alot understanding how the max glew implementation works. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
