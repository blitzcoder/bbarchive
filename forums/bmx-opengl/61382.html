<!DOCTYPE html><html lang="en" ><head ><title >Loading a texture?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Loading a texture?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=103" >OpenGL Module</a>/<a href="#bottom" >Loading a texture?</a><br><br>
<a name="685651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Will</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you guys load textures?  I'm having a problem using GLTexFromPixmap as it crashes trying to resize the pixmap (width and heights variables get changed when they are passed to another function - weird) anyway, are there other routes to loading textures I could take? <br><br></td></tr></table><br>
<a name="685654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had this problem some time ago.. I can't recall what exactly solved the problem though..<br>Try resizing the texture to a ^2 size.. <br><br></td></tr></table><br>
<a name="685657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Will</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Texture is 512x512, and in the debugger it registers as such right until it is passed :( <br><br></td></tr></table><br>
<a name="685687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah.. that sounds familiar.. but could you try to resize to, say 256x256? just to try..<br>I'm not 100% sure what it was the last time, 'coz I tried all sorts of things.. but it's still worth a shot.. <br><br></td></tr></table><br>
<a name="685693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> hang on.. try this:<pre class=code>
	Method LoadTexture(file:String)
		Local tex:TPixmap = LoadPixmap(file)	
		If tex
			self.texture = GLTexFromPixmap(tex)
			glBindTexture(GL_TEXTURE_2D, texture)
			self.CalcNormals()
		Else
			DebugLog "texture: " + file + " load fail!"
		EndIf
	EndMethod</pre><br>never mind the calcnormals thingy.. (unless you have a function doing that) <br><br></td></tr></table><br>
<a name="685739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Will</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Lars, unfortunately it still crashes on the same place: inside GLTexFromPixmap.<br><br>The hard part is the crash is happening deep inside BRL's code, not in mine - so I'm having trouble figuring out how I'm causing it.  What happens is GLTexFromPixmap gets the pixmap, and its width and height, correctly.  It passes the width and height to GLAdjustTexSize(width Var, height Var)  GLTexFromPixmap passes the correct values for width and height to GLAdjustTexSize, however GLAdjustTexSize receives 0 for both variables!  I can't figure out how this could be caused by something in my code, since it is working for other people.  (I am syncmods'd with the newest.) <br><br></td></tr></table><br>
<a name="685868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah... that sounds very familiar..<br>I'll check to see if I've got another complete texture test when I get home again..; if so, I'll post it here..<br><br>(what really drives me crazy, is that I remember it was something quite trivial, but I can't for the life of me remember what it was..) <br><br></td></tr></table><br>
<a name="686058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've seen this happen when I messed up which framework and imports to use, it will compile and not run, with the problem in GLTexFromPixmap<br><br>Double check you have a valid context, can you use gldrawtext and flip? <br><br></td></tr></table><br>
<a name="686679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Will</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Haha, I didn't have a valid context :p!  Thanks Chris C! <br><br></td></tr></table><br>
<a name="686813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its a *real* pain that one caught me out a number of times, glad I could help... <br><br></td></tr></table><br>
<a name="686908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I usually skip GlTexFromPixmap() and write my own direct OpenGL code to set up and upload texture date. You have more control of it that way. But if you just want it `as is` and don't care about the texture size or format etc then the helper function is ok. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
