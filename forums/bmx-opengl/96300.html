<!DOCTYPE html><html lang="en" ><head ><title >Creating a cube from triangles</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Creating a cube from triangles</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=103" >OpenGL Module</a>/<a href="#bottom" >Creating a cube from triangles</a><br><br>
<a name="1114077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to create a cube using triangles.<br><br>1: I created a front and back face but they seem to connect to eachoter creating another triangle?<br><br>2: For a cube with one texture, is 8 vertexes enough?<br><br>3: For a cube with a different texture for each face, i need 4 vertexes for each face?<br><br>4: How many vertexes do i need for a cube with correct lightning? <br><br></td></tr></table><br>
<a name="1114126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm surprised no one has answered already :P maybe the GL pros are away for the weekend :D<br><br>I'm more of a DirectX guy instead of GL but here are some things I'd look for :-<br><br>1: How are you drawing the triangles? each triangle separate with individual vertex data? index and vertex data? How are rendering - GL_TRIANGLES or GL_TRIANGLE_STRIP or other?<br>2: Kind of, but you may find some faces may be upside down, or reversed left to right<br>3: Yes, if using indices, otherwise 6 to define 2 Tris. Also you'll need UV data for each vertex.<br>4: The same as for 3, depending if you're using just vertex data or vertex and index data. Either way you'll need more information for each vertex - Normal Vector. <br><br></td></tr></table><br>
<a name="1114217"></a>

<a name="1114218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are many different ways to draw a cube in openGL.<br><br>- if using the immediate state glBegin()/glEnd(), you can use quads, triangles, triangle strips (beginners start here, i'm assuming you are starting here)<br>- if using the buffer method (vbo), then sending an array of vertices to the glDrawElements()<br><br>My advice would be to first create a Function() that creates a square or "quad", then rotate that quad in your app. Then you can see how a basic "quad" is built and how it works, how it lights, and how it is textured. Then you can use that function to accept x,y,z for positioning, size, and order (order is important for determining face direction) and you'll see how to create your own cube from that.<br>Once you do that it should answer all your questions, since a cube is just six squares pointing in different directions.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1114236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was drawing all triangles at once, drawing each one seperate seems to work. <br>But now i need 36 vertexes for a cube, wich seems allot.<br>I'm using GL_TRIANGLES.<br><br>I dont know what you mean with indices, index and vertex data.<br><br>What i do is create a mesh type with a list of surfaces, each surface has a vertex and a triangle list.<br>A vertex type stores position,color,uv and normals.<br>A triangle type points to 3 vertexes.<br>I draw the 3 vertexes for each triangle. <br><br></td></tr></table><br>
<a name="1114243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> As it seems that you're a beginner, I'd advise you to go all through the Nehe Tutorials over at gamedev.net :P<br><br>They are on the right hand side of this page ( under Legacy Tutorials ) :-<br><a href="http://nehe.gamedev.net/" target="_blank">http://nehe.gamedev.net/</a> <br><br></td></tr></table><br>
<a name="1114246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That obvious :p<br><br>I'm reading the red book and started playing to soon.<br><br>Is the red book a good start for a beginner or should i look at the Nehe Tutorials first? <br><br></td></tr></table><br>
<a name="1114286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Both are good but I found Nehe to be more complete. The red book is good but I found it better for reference.<br><br>36 vertices is correct-- remember, if you are drawing PER TRIANGLE and not by an indices list, then you will be repeating vertices. 6 quads * 2 triangles per quad * 3 vertices per triangle = 36. <br><br>If you're creating classes and trying to create an engine, I'd advise learning about glDrawElements:<br><a href="http://www.songho.ca/opengl/gl_vertexarray.html" target="_blank">http://www.songho.ca/opengl/gl_vertexarray.html</a> <br><br></td></tr></table><br>
<a name="1114309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I read about gl arays last night, if i understand correctly vertices can be shared.<br><br>Had a quick look at the link, verry interesting, especialy using buffers to speed things up.<br><br>Going to play with those arays first and learn about buffers and display lists.<br><br>Thx for the advise! <br><br></td></tr></table><br>
<a name="1114325"></a>

<a name="1114344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got glArrayElement() working but can't get glDrawElements() to work.<br>Here is a test app to show what i'm doing.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Strict
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
GLGraphics(800,600,0,60,GRAPHICS_BACKBUFFER | GRAPHICS_DEPTHBUFFER)			
'glClearColor(0.5,0.5,0.5,0.0)
'glColor4f(1.0,1.0,1.0,0.0)		
glClearDepth(1.0)
'glEnable(GL_CULL_FACE)
glEnable(GL_DEPTH_TEST)
glDepthFunc(GL_LEQUAL)
glShadeModel(GL_SMOOTH)
glHint(GL_PERSPECTIVE_CORRECTION_HINT,GL_NICEST)
glMatrixMode(GL_PROJECTION)
glLoadIdentity()		
gluPerspective(45.0,Float(800)/Float(600),1.0,1000.0)
glMatrixMode(GL_MODELVIEW)
glLoadIdentity()
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
Global vertices:Float[] = [-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5]
Global colors:Float[] = [1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0]
Global indices:Int[] = [0,1,2]

glEnableClientState(GL_COLOR_ARRAY)
glEnableClientState(GL_VERTEX_ARRAY)

glColorPointer(3, GL_FLOAT, 0, colors)
glVertexPointer(3, GL_FLOAT, 0, vertices)

glTranslatef(0.0,0.0,-10.0)
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
While Not KeyHit(KEY_ESCAPE)
	glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)
	
	glbegin(GL_TRIANGLES)
		glDrawElements(GL_TRIANGLES, 3, GL_INT, indices)
		
		'glArrayElement(0)
		'glArrayElement(1)
		'glArrayElement(2)
		
		'glVertex3f(-0.5,0.5,0.5)
		'glVertex3f(-0.5,-0.5,0.5)
		'glVertex3f(0.5,-0.5,0.5)
	glend()
	
	Flip()
Wend
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''</textarea><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1114348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I had problems with glDrawElements using GL_INT, too.<br><br>Try using GL_UNSIGNED_SHORT, and remember you will have to cast your array differently (Global indices:Short[]).<br><br><br>OH! NOTE: I see you've place glbegin() glend()-- you DO NOT use these when using glDrawElements. glDrawElements is your drawing command. <br><br></td></tr></table><br>
<a name="1114392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It works now :), thx.<br>Also added added normal and texture coords arrays. <br><br></td></tr></table><br>
<a name="1142402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> A bit late for the party, but I wrote this a good few years ago:-<br><br>[bbcode]<br>Type vector<br>  Field x:Float<br>  Field y:Float<br>  Field z:Float<br>	Field xp:Float<br>	Field yp:Float<br>End Type<br><br>Type Triangle<br>  Field p1:Long<br>  Field p2:Long<br>  Field p3:Long<br>  Field dotProduct:Float<br>End Type<br><br>Global P:vector[9]   'We need eight vectors and 12 triangles, but adding <br>Global T:Triangle[13]	'But I'm adding one more so we can index them them <br>						'from 1, instead of 0... Just to ease readibility.<br>For loop = 0 To 12<br>	If loop&lt; 9<br>		P[loop] = New vector<br>	End If<br>	T[loop] = New Triangle<br>Next<br><br>Const CULL_BACK_FACES = True     <br>Const PERSPECTIVE_MODE = True <br><br><br>Global Offset:Float = 300<br>Global turnRate:Float = 1<br>Global pointOfView:Float<br>Init(200)<br><br>Graphics 800,600<br><br>Repeat<br>Cls<br><br>If KeyDown(KEY_LEFT)<br>	RotateCubeZ(-turnRate)<br>End If<br><br>If KeyDown(KEY_RIGHT)<br>	RotateCubeZ(turnRate)<br>End If <br><br>If KeyDown(KEY_UP)<br>	RotateCubeX(-turnRate)<br>End If<br><br>If KeyDown(KEY_DOWN)<br>	RotateCubeX(turnRate)<br>End If <br><br>If KeyDown(KEY_S)<br>	RotateCubeY(-turnRate)<br>End If<br><br>If KeyDown(KEY_A)<br>	RotateCubeY(turnRate)<br>End If <br><br>If CULL_BACK_FACES = True<br>	CullBackFaces() <br>End If<br><br>If PERSPECTIVE_MODE = True <br>	CalculatevectorProjections()<br>End If <br><br><br><br>DrawCube()<br>Flip(1) <br>Until KeyDown(KEY_ESCAPE)<br><br>Function CullBackFaces()<br>Local loop:Int<br>For loop = 1 To 12<br>	CalculateCrossProduct(loop)<br>	T[loop].dotProduct = CalculateDotProduct()<br>Next<br>End Function<br><br>Function CalculatevectorProjections()<br>	Local loop:Int<br>	For loop = 1 To 8<br>		P[loop].xp = P[loop].X * pointOfView / (pointOfView + P[loop].Z) + Offset<br>    P[loop].yp = P[loop].Y * pointOfView / (pointOfView + P[loop].Z) + Offset<br>	Next<br>End Function<br><br>Function CalculateCrossProduct(triangleIndex:Long)<br>  Local x1:Float, y1:Float, z1:Float, x2:Float, y2:Float, z2:Float<br>  x1 = P[T[triangleIndex].p2].X - P[T[triangleIndex].p1].X<br>  y1 = P[T[triangleIndex].p2].Y - P[T[triangleIndex].p1].Y<br>  z1 = P[T[triangleIndex].p2].Z - P[T[triangleIndex].p1].Z<br>  <br>  x2 = P[T[triangleIndex].p3].X - P[T[triangleIndex].p1].X<br>  y2 = P[T[triangleIndex].p3].Y - P[T[triangleIndex].p1].Y<br>  z2 = P[T[triangleIndex].p3].Z - P[T[triangleIndex].p1].Z<br>  <br>  P[0].X = y1 * z2 - y2 * z1<br>  P[0].Y = x2 * z1 - x1 * z2<br>  P[0].Z = x1 * y2 - x2 * y1<br>End Function <br><br>Function CalculateDotProduct:Float()<br>  Return(0 * P(0).X + 0 * P(0).Y + (pointOfView * P(0).Z))<br>End Function<br><br>Function RotateCubeX(angle:Float)<br>  Local NewY:Float, NewZ:Float,loop:Int <br>  For loop = 1 To 8<br>    NewY = P[loop].Y * Cos(angle) - P[loop].Z * Sin(angle)<br>    NewZ = P[loop].Y * Sin(angle) + P[loop].Z * Cos(angle)<br>    P[loop].Y = NewY<br>    P[loop].Z = NewZ<br>  Next <br>End Function <br><br>Function RotateCubeZ(angle:Float)<br>Local newX:Float,newY:Float,loop:Int<br>For loop = 1 To 8<br>	NewX = P[loop].X * Cos(angle) - P[loop].Y * Sin(angle)<br>  NewY = P[loop].X * Sin(angle) + P[loop].Y * Cos(angle)<br>	P[loop].X = NewX<br>  P[loop].Y = NewY<br>Next<br>End Function<br><br>Function RotateCubeY(angle:Float)<br>  Local loop:Int,NewX:Float, NewZ:Float <br>    For loop = 1 To 8<br>      NewX = P[loop].Z * Sin(angle) + P[loop].X * Cos(angle)<br>      NewZ = P[loop].Z * Cos(angle) - P[loop].X * Sin(angle)<br>      P[loop].X = NewX<br>      P[loop].Z = NewZ<br>    Next <br>End Function <br><br>Function DrawCube() 	<br>Local loop:Int, draw:Byte<br><br>If CULL_BACK_FACES = True Then draw = True <br><br>For loop = 1 To 12<br>	If (draw = True And T[loop].dotProduct &gt; 0.5) Or draw = False <br>	DrawColouredLine(T(loop).p1,T(loop).p2)<br>	DrawColouredLine(T(loop).p2,T(loop).p3)<br>	DrawColouredLine(T(loop).p3,T(loop).p1)<br>	End If <br>Next<br>End Function<br><br>Function Init(size:Float)<br>	If CULL_BACK_FACES = False <br>  	pointOfView = 1000<br>	Else<br>		pointOfView = 5000<br>	End If<br>	<br>	P[1].x = -size; P[1].y = -size; P[1].z = -size<br>  P[2].x = -size; P[2].y = size; P[2].z = -size<br>  P[3].x = size; P[3].y = size; P[3].z = -size<br>  P[4].x = size; P[4].y = -size; P[4].z = -size<br>  P[5].x = -size; P[5].y = -size; P[5].z = size<br>  P[6].x = -size; P[6].y = size; P[6].z = size<br>  P[7].x = size; P[7].y = size; P[7].z = size<br>  P[8].x = size; P[8].y = -size; P[8].z = size<br> <br>  T[1].p1 = 1; T[1].p2 = 4; T[1].p3 = 3<br>  T[2].p1 = 1; T[2].p2 = 3; T[2].p3 = 2<br>  T[3].p1 = 5; T[3].p2 = 1; T[3].p3 = 2<br>  T[4].p1 = 5; T[4].p2 = 2; T[4].p3 = 6<br>  T[5].p1 = 8; T[5].p2 = 5; T[5].p3 = 6<br>  T[6].p1 = 8; T[6].p2 = 6; T[6].p3 = 7<br>  T[7].p1 = 4; T[7].p2 = 8; T[7].p3 = 7<br>  T[8].p1 = 4; T[8].p2 = 7; T[8].p3 = 3<br>  T[9].p1 = 3; T[9].p2 = 7; T[9].p3 = 6<br>  T[10].p1 = 3; T[10].p2 = 6; T[10].p3 = 2<br>  T[11].p1 = 4; T[11].p2 = 1; T[11].p3 = 5<br>  T[12].p1 = 4; T[12].p2 = 5; T[12].p3 = 8 <br>End Function <br><br>Function DrawColouredLine(p1:Long,p2:Long,r:Byte =255,g:Byte = 255,b:Byte = 255)<br>Local x1:Float, y1:Float,x2:Float,y2:Float<br><br>If PERSPECTIVE_MODE = True<br>	x1 = P[p1].X * pointOfView / (pointOfView + P[p1].Z) + Offset<br>  y1 = P[p1].Y * pointOfView / (pointOfView + P[p1].Z) + Offset<br>  x2 = P[p2].X * pointOfView / (pointOfView + P[p2].Z) + Offset<br>  y2 = P[p2].Y * pointOfView / (pointOfView + P[p2].Z) + Offset	<br>Else<br>	x1 = P(p1).x + offset<br>	y1 = P(p1).y + offset<br>	x2 = P(p2).x + offset<br>	y2 = P(p2).y + offset<br>End If<br>SetColor r,g,b<br>DrawLine x1,y1,x2,y2<br>SetColor 255,255,255<br>End Function<br>[/bbcode]<br><br>Just for anyone who's passing and might be interested, back fall culling is a bit 'meh', but overall, it looks nice! :D<br><br>Check code for controls.<br><br>Dabz <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
