<!DOCTYPE html><html lang="en" ><head ><title >glOrtho</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >glOrtho</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=103" >OpenGL Module</a>/<a href="#bottom" >glOrtho</a><br><br>
<a name="669839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> lo peeps. im using opengl to do some 2D stuff.<br>The thing thats been keeping me busy all day is the way to properly map the screen x,y coordinates to the sprites displayed onscreen.<br><br>Everytime I thought I got it right, the whole viewport seemed to be offset by 5-10 pixels in some direction, making the positioning of sprites a pain in the ass.<br><br>I just figured out that passing that offset to the glOrtho command 'fixes' the problem.<br><br><pre class=code>Function ehResizeWindow( obj:Stage )
	If( obj.Height = 0 ) Then obj.Height = 1;
	glViewport(0, 0, obj.Width, obj.Height );
	glMatrixMode( GL_PROJECTION );
	glLoadIdentity();
	glOrtho( 5, obj.StageWidth + 5, obj.StageHeight - 5, -5, 0 ,10 );
	glMatrixMode( GL_MODELVIEW );
	glLoadIdentity();
End Function</pre><br><br>just using: glOrtho( 0, obj.StageWidth, obj.StageHeight, 0, 0 ,10 ); causes all the sprites I try to place, to be offset by 5 pixels on both x and y axis.<br><br>Note that in my test runs, the resolution used was the same for glViewport, glOrtho and the OpenGL window itself. Allways 800,600. Yet the weird offset seems to be there all the time, enless I enter the offset as shown in the function above.<br><br>that code means that the display itself is offset 5 pixels to the right and 5 pixels to the top, compared to the window itself, yet everything displays correctly now.<br><br>Any idea why this happens? <br><br></td></tr></table><br>
<a name="669848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another thing. When using the above, if I position a sprite on a fixed position from the beginning, it's all OK, but when i start positioning it - by having it move along with my mousepointer for instance - I have to offset it's x and y position by +5 and -2.5 respectively, to actually have it at the exact right spot.<br><br>Could all this stuff have anything to do with floating point issues during the calculations with Integer screen coordinates and float vertex coordinates? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
