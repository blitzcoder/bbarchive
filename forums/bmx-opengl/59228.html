<!DOCTYPE html><html lang="en" ><head ><title >Spotlight - inner cone angle</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Spotlight - inner cone angle</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=103" >OpenGL Module</a>/<a href="#bottom" >Spotlight - inner cone angle</a><br><br>
<a name="659660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone know how to convert the GL_SPOT_EXPONENT value in OpenGL to B3D's inner cone angle?<br><br>I have managed to convert B3D's light range (I think!), by setting the GL_LINEAR_ATTENUATION value to 1.0/light_range, and the other attenuation values to 0. This has got point lights working correctly, now I just need to get spotlights working too. <br><br></td></tr></table><br>
<a name="659781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I don't think you can. GL_SPOT_EXPONENT looks like it controls the 'falloff rate' of the spotlight, whereas inner cone angle is more a binary thing - ie: everything inside the inner cone angle is 'fullbright'. <br><br></td></tr></table><br>
<a name="659882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, OK. I assumed that OpenGL would have something to match DirectX's inner cone value, seems not though. <br><br></td></tr></table><br>
<a name="659891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> For those that might be interested, A GL_SPOT_EXPONENT value of 10.0 seems to produce something that vaguely resembles B3D's spotlights when inner cone angle = 0. <br><br></td></tr></table><br>
<a name="659937"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info.  I will use this.<br><br>Because hardware lights are more or less infinite, and do not have a linear range, I recommend setting the attenuation to 0 (no attenutation) and multiplying the light color by a falloff value based on entity distance.  For example, if the light's range is 100, the light color is 255,255,255, and a mesh is 75 units of distance away from the light, set the light color to 64,64,64 and render with no attentuation.<br><br>Before rendering each mesh, you have to enable and set up lights that are to effect that mesh.  This also lets you check the line of sight, to test whether the light should effect the mesh or not.  In my own engine, I only test the line of sight with brushes (which is fast), and don't worry about whether a mesh occludes another mesh. <br><br></td></tr></table><br>
<a name="661107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, reading "halo's" post - is lighting not much better than in B3D? <br><br></td></tr></table><br>
<a name="661170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you care? Your the least prolific coder in the whole world. <br><br></td></tr></table><br>
<a name="661177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like to proceed at a leisurely pace.  Like a tortoise circumnavigating the world. <br><br></td></tr></table><br>
<a name="661409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Puki has a spotlight shining down onto his head, and it has a volumetric 'D' in the middle :P <br><br></td></tr></table><br>
<a name="662734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you need to tweak these parameters:<br>							gllightfv GL_LIGHT0+n,GL_SPOT_DIRECTION,[0.0,-1.0,0.0,0.0]<br>							gllightf GL_LIGHT0+n,GL_SPOT_CUTOFF,45.0<br><br><div class="quote"> Um, reading "halo's" post - is lighting not much better than in B3D? <br></div><br>If you mean the lighting system I set up, try out the demos on my forums.  The lighting is definitely more advanced than b3d. <br><br></td></tr></table><br>
<a name="662739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah cutoff is the outer cone angle (/2), direction is always kept the same. <br><br></td></tr></table><br>
<a name="662740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Then there is a SPOT_LIGHT_EXPONENT parameter, which I am guessing creates a gradient from the center out. <br><br></td></tr></table><br>
<a name="662744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep as Mark said it controls the falloff rate. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
