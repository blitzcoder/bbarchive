<!DOCTYPE html><html lang="en" ><head ><title >Passes, Material Swap, and Attaching Shaders</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Passes, Material Swap, and Attaching Shaders</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=103" >OpenGL Module</a>/<a href="#bottom" >Passes, Material Swap, and Attaching Shaders</a><br><br>
<a name="675180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been using shader designer to write some lighting.  My 6600gt only has 4 texture slots.  With a Colormap, normal, and  LightAttribute maps(shine, emission, glow).  I only have one more maybe to add a detail map..which might have all those properties as well.  So then..i go "i need to run another pass..ewww".  <br><br>From what i understand, you have to send the geometry through the pipeline again.  Im thinking this means i need to make another call to gldrawelements.  Meaning a 1000 polygon model is really using 2000 to render now...is there any type of opmitization to cut this effect down?<br><br>Second, i'm going to have my engine organize by surfaces to avoid texture swap.  Now i'm going to impliment shaders.  I'm curious on if the cost to attach and detach shaders is smaller than swapping textures.  I'm thinking it is..since you're only sending operations.<br><br>Right now the organization is by surfaces.<br>Any advice on sorting the most time costly to the least for iterations? <br><br></td></tr></table><br>
<a name="675366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look up Vertex Buffer Objects. With a few simple function calls you can have GL store your Vertex Arrays (be it position/color/UVs e.t.c) in video memory on the GFX card rather than system memory.<br><br>This obviously saves you having to transfer the arrays every time you want to draw geometry.<br><br>Each time you do wish to draw, you simply bind the buffer (tell GL you'll be using the data stored on the GFX card) and call your draw functions as normal but you send it a NULL pointer instead of your vertex array pointer.<br><br>This is ideal for any static data, although there are functions for changing data in the 'VBO'.<br><br>Also look up setting a priority for your textures, you can give them a value indicating how important it is for GL to keep them in GFX card memory (based on how often they're used)<br><br>I can't see there being an issue with shaders unless you're compiling them constantly, highly unlikely. <br><br></td></tr></table><br>
<a name="675423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, i'm using VBOs on non-animated objects.  More or less this game is the core gaming audience and i'm not worried about older machines running the game.  It'll be free too so i'm not beening over backwards for scalablity.  I'm going to target the x300/n6100 and higher cards.  I think they all have at least 4 slots.  The 4th texture will be a combination of color,normal,spec by having the images in different corners.  Cutting down multipassing a bit.<br><br>Thanks. <br><br></td></tr></table><br>
<a name="675429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you attempted skinned animation yet? <br><br></td></tr></table><br>
<a name="675479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not yet, soon though.  why? <br><br></td></tr></table><br>
<a name="675498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just bought the Orange Book.  I'm going to use vertex shaders for it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
