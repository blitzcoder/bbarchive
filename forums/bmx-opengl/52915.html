<!DOCTYPE html><html lang="en" ><head ><title >Grayscale Effect</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Grayscale Effect</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=103" >OpenGL Module</a>/<a href="#bottom" >Grayscale Effect</a><br><br>
<a name="591250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferminho</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd like to draw part of the graphics in grayscale, without having to change them by hand (realtime or preprocessing). What I want to do is 'turn' grey some graphics when being drawn, something like a setblend (grayblend)<br><br>I think it can't be achieved with blend transformation... I've been looking and trying with glTexImage2D and GL_LUMINANCE but still cannot figure out how to do it, I got strange results (probably messed up the format?) Anyone can lend a hand? <br><br></td></tr></table><br>
<a name="591266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/opengl/glfunc03_8m7n.asp" target="_blank">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/opengl/glfunc03_8m7n.asp</a><br><br>But I don't think this helps you much if you don't to do any preprocessing, at least as long as you don't want to draw it pixel by pixel.<br><br><br>You could do it using a fragment program or fragment shader thought, which just sums up the actual fragment color components, devides it by 3 and saves the result back to all 3 components. <br><br></td></tr></table><br>
<a name="591280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You could do it using a fragment program or fragment shader thought, which just sums up the actual fragment color components, devides it by 3 and saves the result back to all 3 components.  <br></div><br><br>Except true greyscale isn't just adding up R+G+B and dividing by three -- there is a different formula that takes the luminosity (?) of each of the channels into consideration: greyscale = (red * 0.299) + (green * 0.587) + (blue * 0.114)<br><br>Simply adding and dividing by three will yield very unrealistic results.<br><br>...That said, I would be <i>very</i> interested in a greyscale blendmode as well (DirectX + openGL)<br><br>Anyway, in the mean time you can also check out this entry I put in the codearchives a long time ago:  <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1282" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1282</a><br>It can fade a color screen to black-and-white... But speed is somewhat limited since it has to do it pixel-by-pixel. <br><br></td></tr></table><br>
<a name="591290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferminho</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the replies guys :)<br><br>@Dreamora : maybe I could do glreadpixels with GL_LUMINANCE and then gldrawpixels with the same format? would be like a grabpixmap+drawpixmap but faster, maybe? I'm not very much into opengl and so I'm not quite sure how it works<br>About the fragment shader... too hard for me and would raise the requirements too much, I think :(<br><br>@xlsior : thanks for your code, I had a look, and I did something like that before trying it through opengl; but it's too slow I'm afraid. I'm thinking about doing it 1/2 or 1/4 the size of the screen and rescaling... as I'd use this effect for some kind of 'flashback' distortion I could easily 'disguise' the low detail results... dunno, have to try<br><br>Ah, thanks for the formula too! I'll be using that one from now on :) <br><br></td></tr></table><br>
<a name="654135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use the GL_BIAS and GL_SCALE (i think) to automatically shrink the values to the correct amounts on a per component basis. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
