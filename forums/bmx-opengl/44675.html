<!DOCTYPE html><html lang="en" ><head ><title >More OpenGL with MAX2D</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >More OpenGL with MAX2D</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=103" >OpenGL Module</a>/<a href="#bottom" >More OpenGL with MAX2D</a><br><br>
<a name="497313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you access the extra OpenGl buffers such as stencil etc when using the Graphics command?<br>If I run Nehe27 I get a nice display of shadows.<br>If I change the blcreatecontext to a graphics command the shadows don't appear. <br><br></td></tr></table><br>
<a name="497627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried doing the same sort of thing here, where I exchanged the Graphics for the bglCreateContext and got a blank screen. <br><br>The Graphics command sets up a number of things - does several other OpenGL calls to initialize some things and get things into the right mode, setting up a viewport and so on.<br><br>bglCreateContext doesn't do that, it just creates a graphics context but doesn't set up any of the OpenGL machine. You have to explicitly define your own viewport, Ortho2D orthagonal projection matrix, and any other settings you need, etc.<br><br>I found that in general, trying to use Max2D at the same time as interspersing your own OpenGL calls isn't very reliable. Max2D is trying to keep track of a number of states and conditions and any extra calls you add in are likely to interfere with that. With OpenGl direct, you're stepping in through the back door and fiddling under the hood of Max2D. If you don't know exactly what states Max2D has set up and how to preserve them, you will mess things up and get unexpected results.<br><br>What I decided to do was to just ditch most of Max2D and do everything with custom OpenGL calls. About the only part of Max2D I use is to load pixmaps and get the location of the pixmap data, along with the pitch etc. I do all my texture uploading and world setting-up myself. You have more control that way too.<br><br>I don't think you can just exchange Graphics for bglCreateContext and expect them to be the same, Graphics does a number of other things that the create context doesn't do. <br><br></td></tr></table><br>
<a name="497966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I might've read your question right. I don't think you can use a stencil buffer with the Graphics mode, because you have to define what buffers you want when you define the context. "Graphics" defines a context already and I'm fairly sure it doesn't include a stencil buffer. You will have to use bglCreateContext. <br><br></td></tr></table><br>
<a name="497989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, I'm guessing that as well. It's a bit of a shame. Unless I'm missing something there's all the power of raw OGL, all the benefits of BMax modules but no way to use all of both together. <br><br></td></tr></table><br>
<a name="497992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, the stencil buffer's always there, you don't need to specify it when you create your context. The problem's probably the orthographic mode or something. Does anything  draw at all? <br><br></td></tr></table><br>
<a name="498244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, only the shadows are missing (9800pro Winxp sp2) <br><br></td></tr></table><br>
<a name="502106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just worked out why, and it's pretty obvious. Graphics doesn't set up a depth buffer :) <br><br></td></tr></table><br>
<a name="502144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's right. The question was, really, how do you get an OpenGl context with all the buffers available while using the Graphics command. <br><br></td></tr></table><br>
<a name="502157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The answer is, you can't - you have to use bglCreateContext. Unfortunately this also means that you can't use some of the Max features mechanism.<br><br>Actually, what you could do (and this would be an almighty hacky way of doing things) is something like:<br><pre class=code>
Graphics width, height, depth, hertz
' Grab the actual width, height, depth and screen hertz Graphics has generated
bglDeleteContext
bglCreateContext width, height, depth, hertz, flags
' Set the viewport etc.
</pre><br>That way you might be able to hang on to Max2D while being able to use the depth buffer. But as I said, it's one hell of a hack if it even works. <br><br></td></tr></table><br>
<a name="502172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or you could chop out the code for Graphics and modify it? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
