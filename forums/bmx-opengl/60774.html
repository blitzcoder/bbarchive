<!DOCTYPE html><html lang="en" ><head ><title >Clicking into a 3D world</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Clicking into a 3D world</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=103" >OpenGL Module</a>/<a href="#bottom" >Clicking into a 3D world</a><br><br>
<a name="678198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >-wyvern</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need to know if there are any helper functions built into opengl which will give me the 3D location of my cursor (which obviously moves over the 'surface' of the 2D screen), so it is possible to interact with models using the mouse? I understand that I will be given a 3D vector, which I can use to figure out my result.<br><br>Failing that, how exactly do you untangle openGL's projection system so that I can find this vector through hard math? Any tutorials would be most welcome.<br><br>Thanks. <br><br></td></tr></table><br>
<a name="678205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> GL has a `select` feature where you can get feedback about what is at a given location.<br><br>Also you might look into first rendering a color-coded flat-shaded view of the scene, using it to pick the pixel color beneath the mouse, and then this ties in exactly with which polygon you clicked on ... then render the scene properly. You give a unique color to each polygon and then you can tell exactly which polygon you're clicking on. <br><br></td></tr></table><br>
<a name="678206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or you can use gluUnproject, which is explained here: <a href="http://nehe.gamedev.net/data/articles/article.asp?article=13" target="_blank">http://nehe.gamedev.net/data/articles/article.asp?article=13</a> <br><br></td></tr></table><br>
<a name="678400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >-wyvern</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent, thankyou both. <br><br></td></tr></table><br>
<a name="718304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pgames</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's the gluUnProject code translated into BlitzMax:<br><br>*****<br><br>	Method selectPiece(x, y)<br>		Print "selectPiece(" + x + "," + y + ")"<br><br>		Local viewport:Int[4]<br>		Local modelview:Double[16]<br>		Local projection:Double[16]<br>		Local winX:Float, winY:Float, winZ:Float<br>		Local posX:Double, posY:Double, posZ:Double<br><br>		glGetDoublev( GL_MODELVIEW_MATRIX, modelview )<br>		glGetDoublev( GL_PROJECTION_MATRIX, projection )<br>		glGetIntegerv( GL_VIEWPORT, viewport )<br>		<br>		winX = Float( MouseX() )<br>		winY = Float( viewport[3] - MouseY() )<br>		<br>		glReadPixels( x, Int(winY), 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, Varptr winZ )<br>		<br>		gluUnProject( winX, winY, winZ, modelview, projection, viewport, Varptr posX, Varptr posY, Varptr posZ )<br>		<br>		Print "You clicked on " + posX +","+ posY +","+ posZ<br><br>End Method<br><br>*****<br><br><br><br>I think I like the Selection Mode method better, though.  This method requires you to figure out what model is located at that 3D point, while using Selection Mode can tell you what model (or group of polys, or whatever) was rendered at the location the user clicked on. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
