<!DOCTYPE html><html lang="en" ><head ><title >TexturePacker</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TexturePacker</h1><a href="forums.php" >Monkey Archive Forums</a>/<a href="topics.php?forum=509" >Digital Discussion</a>/<a href="#bottom" >TexturePacker</a><br><br>
<a name="2047679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it worth it? <br><br></td></tr></table><br>
<a name="2047685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tri|Ga|De</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes! <br><br></td></tr></table><br>
<a name="2047691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> thnx! <br><br></td></tr></table><br>
<a name="2047694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's free isn't it, or do you mean time and effort?<br><br>Next time post less info, that took ages to read. :P <br><br></td></tr></table><br>
<a name="2047734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The pro version isn't free but it is worth every cent! Imho it is the best tool on the market for creating spritesheets. <br><br></td></tr></table><br>
<a name="2047737"></a>

<a name="2047738"></a>

<a name="2047739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is great!<br><br>Before I copied images manually to my monkey/graphics/ dir and did an optimized export to png before, cropped the image. Had to do this with every slight change made to an image.<br><br>Now I have a /Art/Game Projects/SuperCoolGame/ folder. In here I have all my images as fireworks layered pngs &amp; psd files. I have added that folder to texture packer. After changing the "heavy" image I open texturepacker, click publish and the new texture (all textures!) is in game, optimized, trimmed edges (yet I still know the actual w/h).<br><br>What you get is:<br><br>1. Easier workflow<br>2. Game Loads faster<br>3. Reduce Render Calls (you still have to think about it, but it often makes it simple!)<br><br>I only wish I had been recommended it sooner. A must for all projects I do these day, even use it for projects in Flash Air. <br><br></td></tr></table><br>
<a name="2047755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The only thing that worries me a bit is if there's any good loader for Monkey (I don't mind writing my own). I mean a loader that does not rely on a XML parser that creates garbage when it parses the document. Maybe a simple cvs file could do it?<br>I'll be purchasing it anyway, as it is damn cheap for the work it does. <br><br></td></tr></table><br>
<a name="2047756"></a>

<a name="2047757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a couple of loaders on here, including Diddy. Also the XML parsers don't really create garbage the Diddy one and Skn ones at least don't, which you can tell by the speed the parsing talked place. <br><br></td></tr></table><br>
<a name="2047768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ignition has also basic support for TexturePacker. <br><br></td></tr></table><br>
<a name="2047769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tri|Ga|De</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use fantomEngine but if you look at this you can se my own <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=3457" target="_blank">code.</a> <br><br></td></tr></table><br>
<a name="2047770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The only thing that worries me a bit is if there's any good loader for Monkey (I don't mind writing my own). I mean a loader that does not rely on a XML parser that creates garbage when it parses the document. Maybe a simple cvs file could do it?<br>I'll be purchasing it anyway, as it is damn cheap for the work it does.  <br></div><br><br>yeah therevills is right, the diddy and my xml module wont spam the gc. The only garbage created is with the disposable xml node structure. It would be pretty easy to make them keep a pool of reusable xml nodes. Probably not worth the optimization as you don't tend to constantly reload xml files during runtime. <br><br></td></tr></table><br>
<a name="2047939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rushino</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting. I should have a look to this before my images getting too big. <br><br></td></tr></table><br>
<a name="2047972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks to all of you! I'll be packaing my game into textures very soon. <br><br></td></tr></table><br>
<a name="2048440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't find a working TexturePacker loader. The one based on skn config.monkey xml loader seems to not be working becouse of the &lt;? and ?&gt; xml header. Before I spend some hours fixing it, does anybody have a working current-version texturepacker loader that works with some of the available texturepacker exports and is working with latest monkey version? <br><br></td></tr></table><br>
<a name="2048452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can strip the xml header (first line) and it should work fine. <br><br></td></tr></table><br>
<a name="2048464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know that, but it was also refusing to load. Not sure what's wrong yet. ?? Maybe something in my code. <br><br></td></tr></table><br>
<a name="2048502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Standalone loader, from someone here in the community, not me.<br><br>textureLoader.monkey<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Import mojo.app
Import mojo.graphics
Import monkey

'' libgdx sprite sheet loader
'' 
''this is best used in loading all textures, don't create during the game time, as it would create lag

Function LoadAtlas:TextureLoader(fn:String)
	Local atlas:TextureLoader = New TextureLoader
	If Not atlas.LoadTex(fn) Then Return Null
	Return atlas
End'CTextureAtlas

Class TextureLoader

Private

	Field tmap:StringMap&lt;CSubTextureAtlas&gt; = New StringMap&lt;CSubTextureAtlas&gt;
	Field texture:Image
	Field total:Int =0
	Field subimage:CSubTextureAtlas[]

	Method LoadTex:Int(fn:String)
		'Print "******BEGIN"
			If Not fn Return 0
		Local txtfile:String = fn[..(fn.FindLast("."))]+".txt"
		Local str:String=LoadString(txtfile)
			If Not str Then Return 0
		
		Local all:String[] = str.Split("~n")
			texture = LoadImage(all[0].Trim() ,1)
		If Not texture Then Return
		
		''count total
		For Local i:Int = 0 To all.Length()-1
			If all[i].Contains("xy:") Then total += 1
		Next
		
		''create sub images
		subimage = New CSubTextureAtlas[total+1]
		Local si:Int = 0
		Local nextimage:Int=0
		Local xy:String[] =["",""] '= New String[10]
		Local row:String = ""
		
		For Local i:Int = 4 To all.Length()-1
			
			row = all[i].Trim()

			If row.Contains(":")
			
				If row.Contains("xy")
					xy = row[ (row.FindLast(":")+1)..].Split(",")
					
					subimage[si].x = Int(xy[0].Trim())
					subimage[si].y = Int(xy[1].Trim())
					'Print xy[0]+":"+xy[1]
				Elseif row.Contains("size")
					xy = row[ (row.FindLast(":")+1)..].Split(",")
					subimage[si].w = Int(xy[0].Trim())
					subimage[si].h = Int(xy[1].Trim())
					'Print xy[0]+":"+xy[1]
				Elseif row.Contains("offset")
					xy = row[ (row.FindLast(":")+1)..].Split(",")
					subimage[si].offsetx = Int(xy[0].Trim())
					subimage[si].offsety = Int(xy[1].Trim())
					'Print xy[0]+":"+xy[1]
				Elseif row.Contains("index")
					Local ind:String = row[ (row.FindLast(":")+1)..]
					subimage[si].index = Int(ind.Trim() )
					

				Endif
				
			Else
				
				If row = "" Then Continue
				'' nextimage=0 is used for first time through
				If nextimage
					If subimage[si].index &gt;-1 Then subimage[si].file = subimage[si].file+"_"+String(subimage[si].index)
					tmap.Set((subimage[si].file), subimage[si])
					si += 1
				Endif

				''start new image
				subimage[si] = New CSubTextureAtlas
				subimage[si].file = row
				
				nextimage = 1
				
			Endif
		Next
	
		If si&gt;0 Or total &lt;=1
			''add last image
			If subimage[si].index &gt;-1 Then subimage[si].file = subimage[si].file+"_"+String(subimage[si].index)
					'Print subimage[si].file
			tmap.Set((subimage[si].file), subimage[si])
		Endif
		
		total = si
		'Print total
		
		Return 1
	End
	
	Method GetSubTexture:CSubTextureAtlas(fn:String, index:Int=0)
		Local noindexfn:String
		
		''drop any .png ext
		If fn.Contains(".") Then fn = fn[..(fn.FindLast(".")) ]
		noindexfn = fn.Trim()
		If index&gt;0 Then fn=fn+"_"+String(index)

		Local subimage:CSubTextureAtlas = tmap.Get(fn)
		If Not subimage
			''try without index
			subimage = tmap.Get(noindexfn)
			If Not subimage
				Print "**atlas not found:"+fn
				Return Null
			Endif
		Endif

		Return subimage
	End
	
	Method Grab:Image(fn:String, index:Int=0, flags:Int=Image.DefaultFlags)
	
		Local subimage:CSubTextureAtlas = GetSubTexture(fn,index)
		
		Return texture.GrabImage(subimage.x,subimage.y,subimage.w, subimage.h, 1, flags)
	End
	
	Method GrabSet:Image[](fn:String, w:Int, h:Int, frames:Int=0, flags:Int=Image.DefaultFlags, index:Int=0)
		Local imgs:Image[frames+1]
		imgs[0] = Null
		
		Local subimage:CSubTextureAtlas = GetSubTexture(fn,index)

		Local newx:Int =0 , newy:Int=0
		For Local i:=0 To frames-1
			imgs[i] = texture.GrabImage(subimage.x+newx,subimage.y+newy,w, h, 1, flags)
			newx += w+1
			If newx &gt;= subimage.w-2
				newx=0
				newy += h+1
				If newy&gt;subimage.h
					Exit
				Endif
			Endif
			
		Next
		Return imgs
	End

End

Class CSubTextureAtlas
	Field file:String = ""
	Field x:Int, y:Int, offsetx:Int, offsety:Int
	Field w:Int, h:Int
	Field index:Int
	Field totalframes:Int
End
</textarea><br><br>Use like this:<br>[monkeycode]<br>Import textureLoader<br><br>Local ImageBank:TextureLoader = LoadAtlas("imageAtlas.png")<br>Local Player:Image = ImageBank.Grab("marine_shotgun", 0, Image.MidHandle)<br>[/monkeycode] <br><br></td></tr></table><br>
<a name="2048501"></a>

<a name="2048500"></a>

<a name="2048499"></a>

<a name="2048514"></a>

<a name="2048515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Tibit!<br>While I was fighting how to use it I came up with this:<br><pre class=code>Import mojo
Import xmlloader

Class TexturePackerLoader
	Field images:StringMap&lt;Image&gt;

	Method New(path:String, filename:String)

		Local error:= New XMLError
		path = path.Replace("\", "/")
		If path.EndsWith("/") = False Then path += "/"

		Local buffer:String = LoadString(path + filename)
		Local doc:= ParseXML(buffer, error)
		If error.error = True Then Error Error(error.ToString)
		
		texture = LoadImage(path + doc.GetAttribute("imagePath"))
		If images = Null Then
			images = New StringMap&lt;Image&gt;
		Else
			images.Clear()
		EndIf
		For Local child:XMLNode = EachIn doc.GetChildren("subtexture")
			Local posX:Int = Int(child.attributes.ValueForKey("x").value)
			Local posY:Int = Int(child.attributes.ValueForKey("y").value)
			Local height:Int = Int(child.attributes.ValueForKey("height").value)
			Local width:Int = Int(child.attributes.ValueForKey("width").value)
			Local name:String = child.attributes.ValueForKey("name").value
			Local image:Image = texture.GrabImage(posX, posY, width, height)
			images.Add(name, image)
		Next		
	End
	
	Field texture:Image
	
End</pre><br>And the xmlload import is just skn3 single-file xml parser that seems to work pretty well. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
