<!DOCTYPE html><html lang="en" ><head ><title >Sandboxing Apps?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sandboxing Apps?</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=107" >MacOS X Discussion</a>/<a href="#bottom" >Sandboxing Apps?</a><br><br>
<a name="1112720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just received this from Apple:<br><br><div class="quote"> <br>Sandboxing your app is a great way to protect systems and users by limiting the resources apps can access and making it more difficult for malicious software to compromise users' systems.<br><br>As of March 1, 2012 all apps submitted to the Mac App Store must implement sandboxing. Enabling the default sandbox environment is as simple as checking the Enable Entitlements checkbox in Xcode target settings, allowing you to begin sandboxing your app.<br> <br></div><br><br>Exactly how can I do this on Max? <br><br>I have no clue, but I also don't want to loose the games I have on the mac app store... and I didn't even upgrade to Lion :( <br><br></td></tr></table><br>
<a name="1113058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Spot-Nothing</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's something I'd be very interested to know more about in combination with BlitzMax, too. Just to be prepared for upcoming submissions. <br><br></td></tr></table><br>
<a name="1113540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't gotten into this yet, but it's definitely on my radar. It *should* be as simple as creating an entitlements file and including it in the signing process (see <a href="http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/codesign.1.html" target="_blank">http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/codesign.1.html</a> and search for the "--entitlements" arg). Beyond that you just have to make sure that you're following the sandboxing restrictions, such as accessing your prefs file in the right location (if you're using a module to find OS default locations and it actually does *find* the locations, rather than just use an internal record of the path, or if it's internal path is sandbox compliant (I think...)) then it should be OK...<br><br>My process to approach this when I have the time will be:<br>a) go over my source and see what paths I access and how. Dig into any modules I may be using to confirm that they're using sandbox approved methods for getting paths.<br>b) sort out the entitlements issue. Should be easy for me, I don't think I require any entitlements. I use the internet a little but it's easier to just cut that bit of code out since it's for app updates and the App Store does that for me so I'll put in a conditional compile for app store builds.<br>c) Go over the sandboxing documentation and see if there's anything specific I may have missed, such as you're no longer allowed to do ??? and even though I didn't think I was a module may be doing that in the background...<br>d) Check logs. If something is sandboxed and you do something it's not allowed to it's supposed to log it on the console...<br>e) Submit to apple and see what happens... if they reject it they should give a ballpark reason, such as my entitlements are FUBAR, etc.<br>f) cross fingers I didn't miss something... I would assume apple will notify violators that their apps are going to get punted prior to the sandbox becoming mandatory, but we'll see. <br><br></td></tr></table><br>
<a name="1113895"></a>

<a name="1113897"></a>

<a name="1113898"></a>

<a name="1113899"></a>

<a name="1113900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found some more info in here: <a href="http://forums.realsoftware.com/viewtopic.php?f=7&amp;t=39840" target="_blank">http://forums.realsoftware.com/viewtopic.php?f=7&amp;t=39840</a><br><br>Better yet: <a href="http://forums.realsoftware.com/viewtopic.php?f=7&amp;t=40861" target="_blank">http://forums.realsoftware.com/viewtopic.php?f=7&amp;t=40861</a><br><br>Also, all possible keys to an Entitlements file: <a href="http://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/EnablingAppSandbox/EnablingAppSandbox.html#//apple_ref/doc/uid/TP40011195-CH4-SW1" target="_blank">http://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/EnablingAppSandbox/EnablingAppSandbox.html#//apple_ref/doc/uid/TP40011195-CH4-SW1</a><br><br>Still not very clear on how to create the entitlements file... I made one just like on the first link, but the thing is that I save data into "˜/Application Support/Icon Games/&lt;Game Name&gt;" and I have no clue if everything will keep working with that entitlements thing :/<br><br><br>Edit: This might be of some use too... <a href="http://forums.realsoftware.com/viewtopic.php?p=227121#p227121" target="_blank">http://forums.realsoftware.com/viewtopic.php?p=227121#p227121</a><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1113919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> To my understanding sandboxing will limit the application to it's own bundle, including dynamic data such as you may be sticking an application's support folder. Check the official apple docs regarding sandboxing and what is allowed and changed for clarification. <br><br></td></tr></table><br>
<a name="1114158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> apparently Apple are having problems with the sandboxing, something about calling launchd which can then call parts of OSX that are 'outside' the sandbox allowing access to everything. Apples response to this is quite simple, not much but they havent fixed it. They havent replied favourably it even though its been proven so the sandboxing idea isnt 100% secure. <br><br></td></tr></table><br>
<a name="1114188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> apparently Apple are having problems with the sandboxing, something about calling launchd which can then call parts of OSX that are 'outside' the sandbox allowing access to everything.  <br></div><br>I can't find that article for the hell of it at the moment, but one savvy developer described that there seem to be still quite a few changes in Mac OS X necessary until sandboxing is really as secure as Apple wants it to be. iOS has been developed with the idea of sandboxing from the ground up. Mac OS X - not so much...<br><br>That's the reason why the original deadline for the requirement of sandboxing apps for the MAS has been pushed back from November 1, 2011 to March 1, 2012. I wouldn't be surprised if they push back that deadline even further or even drop the requirement completely until OS X 10.8 or whatever with full sandboxing support is out. <br><br></td></tr></table><br>
<a name="1114203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see 2 problems. 1 Is that sandboxing currently isn't as secure as it needs to be to make sense. And the other is that we have to comply with the rules by a deadline. They can make us comply without closing the holes, and they can close the holes without making us comply... I'm not expecting to see the sandboxing requirement get shifted, though I would REALLY like it to get dropped. I think they could easily just show some sort of a warning saying "This app is not protected, are you sure you would like to purchase it?" when buying non-sandboxed apps off the store without it being too detrimental with their goal of making app purchasing smooth and easy for everyone. That way power apps could still exist there, but people would be wary of downloading them. Most people would sandbox because it would mean people would be more likely to buy, but apps that can't be sandboxed, or if the dev just doesn't have the time, could still be sold with the known risk passed to the user... The flip side I suppose is that sandboxing does far less to protect the system until every app is compliant...<br><br>In the end we have to just go for their goals and deadlines. Doesn't mean we have to like it, but if we want juicy app store sales we have to play by the rules... there's always more traditional distribution methods if you prefer... <br><br></td></tr></table><br>
<a name="1114211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> have a look at:<br><a href="http://arstechnica.com/apple/news/2011/11/researchers-discover-mac-os-x-has-its-own-sandbox-security-hole.ars" target="_blank">http://arstechnica.com/apple/news/2011/11/researchers-discover-mac-os-x-has-its-own-sandbox-security-hole.ars</a> <br><br></td></tr></table><br>
<a name="1114212"></a>

<a name="1114319"></a>

<a name="1114320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I don't care if it has 'security holes' or not - It will be mandatory for any app in the Mac App Store in March 2012 :/<br><br>Thing is, I just submitted an App to the Store, and it got rejected exactly due to a wrong entitlements file. Apparently it didn't like this:<br><br><pre class=code>
com.apple.security.documents.user-selected.read-write
</pre><br><br>So later I'm going to remove this and try submitting the binary again... :(<br><br>Edit: apparently it went through... but no guarantees it will work :P~<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1114293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> have a look at:<br><a href="http://arstechnica.com/apple/news/2011/11/researchers-discover-mac-os-x-has-its-own-sandbox-security-hole.ars" target="_blank">http://arstechnica.com/apple/news/2011/11/researchers-discover-mac-os-x-has-its-own-sandbox-security-hole.ars</a>  <br></div><br>That's exactly what I'm talking about. <br><br></td></tr></table><br>
<a name="1115477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just noticed that there is an app on the MAS called <a href="http://itunes.apple.com/app/rb-package-maker/id466281145?mt=12" target="_blank">RB Package Maker</a> for handling sandboxing and code signing. It touts to be for RealBasic apps but from the description I see no reason why it should only work for those (it apparently uses the already compiled binaries).<br><br>I can't test this for myself, since I have not access to XCode 4 (which is required), but I just wanted to point that out. <br><br></td></tr></table><br>
<a name="1115513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very interesting... there's no technical reason why it shouldn't work for max, or any app for that matter... it anyone bites the bullet and tries it please report back here. $13 is worth it to me if it works even though I was already working on my own :0) <br><br></td></tr></table><br>
<a name="1183271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cobra Blade</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could give AppPrep a try since they even offer a free demo on their site.<br>It's also cheaper.<br><a href="http://www.pidog.com/" target="_blank">http://www.pidog.com/</a><br><br>Haven't tried it for sandboxing yet, but I did use an earlier version to sign my BlizMax game Powerslam and it all went well. <br><br></td></tr></table><br>
<a name="1183309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Captain Wicker (crazy hillbilly)</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, CB. Apple have rejected several of my exclusive Mac Apps due to them lacking sandboxing support. AppPrep should help some of my Apps see the light of day as soon as I renew my Developer membership! lol <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
