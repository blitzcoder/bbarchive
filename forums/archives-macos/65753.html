<!DOCTYPE html><html lang="en" ><head ><title >Universal binaries and incbin - little problem!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Universal binaries and incbin - little problem!</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=107" >MacOS X Discussion</a>/<a href="#bottom" >Universal binaries and incbin - little problem!</a><br><br>
<a name="734614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks to the recent purchase of an Intel Mac, I am now able to produce universal binaries, which I figured out pretty quickly thanks to Nigel Brown's little tut.<br><br>However, there is one slight problem if you include media and other files in your game by usig Incbin ... you end up with the media/files being included TWICE!  This obviously means that you end up with a file that is roughly twice the size of a binary meant for just a single platform.  This means that currently, I am offering three downloads from my site, giving a user the choice between PPC only, Intel only, or a universal - depending on their needs.<br><br>Now the obvious solution to this would be to not use Incbin and have all your media stored in a separate folder alongside your app.  This is not only messy, as your media/files are clearly visible, but also allows for unscrupulous types to nick your media, easily.<br><br>Now I don't know how this old universal binary stuff works, but is it possible to compile a single universal binary that accesses the one set of media/files?  I know this isn't possible within BlitzMax at the moment, but it would be nice if this were possible when Mark decides to add it.  Mark, you did mention you may look into this when 10.5 is out ;o)  Any thoughts?<br><br>In the mean time, the second solution would be to include the media as part of the application bundle itself.  This question was asked before, by Indiepath, who also found a solution, but then didn't reveal how it was done to the rest of us.  Come on, Indie, do tell ;o)<br><br>Anyone else noticed this problem and if so, what did you do about it?  Or are you just living with it for the time being? <br><br></td></tr></table><br>
<a name="783165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know this is an old post but since becoming part of the intel mac crowd I thought I'd give my ideas... <br><br>What if you have just one large `data` file which contains all your media in some kind of format that would be similar to incbin, ie generate it by loading in all your media stuff and outputting all of it to a single binary file, keeping track of the offsets of each file (as if you had incbinptr's). Then this file is not very easily accessible or readable by most users, only shows up as a single file (not a mess), and then both of your versions of the app can open it and read it as needed. You could even encrypt it and/or compress it. I don't think you'll be seeing an official universal-include in blitzmax prior to blitzmax fully supporting generation of universal binaries all by itself. <br><br></td></tr></table><br>
<a name="783297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it is one solution, but a bit of a pain to code and put into practice.  As such, it would be something that you would do at the end of a project, i.e. when all media has been finalised, otherwise you'll find yourself having to to re-do the binary file every time you make a change to just one of the media files.  A solution, nonetheless.<br><br>What I plan to do, and it appears to be something done by most developers, is to include the media in the Resources folder of the application bundle itself.  It's still easy to get at, but it's not as messy as a separate folder outside of the bundle.  The final version of the game would then only be a couple of meg bigger than a single PPC or Intel version, as it's the media that takes up most of the space.<br><br>Apparently, although I've yet to implement this into my current project (which is still in development), the folders within the application bundle can be accessed just like normal folders.  However, it is highly recommended that you don't write anything there during execution (use the relevant user folders instead). <br><br></td></tr></table><br>
<a name="785980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've not needed to do this with BlitzMax yet, but I did a similar thing in Blitz3D.<br><br>I loaded a media file by calling my own loading function ie:<br><br>_LoadImage("gfx/background.jpg")<br><br>my _loadimage function then checked if gfx/background.jpg was inside my binary data file, and if it was, extracted the file, loaded it, and deleted the extracted file.<br><br>If it wasnt in the binary file, it was compressed and added to the binary system.<br><br>Then, as I was developing, the binary file just made itself :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
