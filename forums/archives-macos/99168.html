<!DOCTYPE html><html lang="en" ><head ><title >How to close the game window</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to close the game window</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=107" >MacOS X Discussion</a>/<a href="#bottom" >How to close the game window</a><br><br>
<a name="1162841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello guys,<br><br>it is my first project on mac and the publisher (BFG) have this req:<br><br>Quitting: Game saves progress when exited through keyboard shortcuts (CMD + Q, CMD + Option + Esc)<br><br>and also when in window mode if the users presses the "x" button<br><br>I made a quick test and I observed that in window mode the app is not even closed when I press the window "X" button.<br><br>how should i handle all these? <br><br></td></tr></table><br>
<a name="1162868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> for CMD + Q, I made a simple check in my code, so that was easy. But still I have no idea how to make the app close when the user is pressing the X button.<br><br>Please help :) <br><br></td></tr></table><br>
<a name="1162940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d-bug</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> AppTerminate() is your friend. <br><br></td></tr></table><br>
<a name="1162941"></a>

<a name="1162942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I'm doing (also for BFG) is capturing the AppTerminate() event and displaying an "are you sure?" dialog.  Already have two games on BFG that use that method.<br><br>[edit] Your game looks great, by the way.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1162943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Gfk:<br>Thanks,<br><br>I just made a quick test and works fine. Also, how did you solve the COMMAND + TAB issue from full screen?<br><br>Thank you for the good words regarding my game :P I hope I will be  able to release a Mac version, too and maybe an iPhone one. <br><br></td></tr></table><br>
<a name="1162944"></a>

<a name="1162945"></a>

<a name="1162946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I just made a quick test and works fine. Also, how did you solve the COMMAND + TAB issue from full screen? <br></div>I didn't. :/ Their specifications say that it's only necessary if the game engine supports it, which Blitzmax doesn't seem to.  It does work fine in windowed mode though and that's the only thing they're strict on, really.  So hopefully it'll go through OK.<br><br>There is an issue in Blitzmax under Mountain Lion that you might or might not be aware of: <a href="http://www.blitzbasic.com/Community/posts.php?topic=99166" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=99166</a><br><br>I'm hoping my work-around (detailed in that thread) is acceptable.<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1162947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm. thanks. I did not encounter that issue from your link until now. Tested on several real machines and in my virtual machine.. <br><br></td></tr></table><br>
<a name="1163933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Quitting: Game saves progress when exited through keyboard shortcuts (CMD + Q, <b>CMD + Option + Esc</b>) <br></div><br>I doubt that's even possible: cmd+opt+esc is supposed to kill every running application instantly. <br><br></td></tr></table><br>
<a name="1163935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I doubt that's even possible: cmd+opt+esc is supposed to kill every running application instantly.  <br></div>It probably isn't possible, but your game should be saving progress at every appropriate point, so by the time the user pressed CMD+Opt+Esc, any required saving will already have been done anyway. <br><br></td></tr></table><br>
<a name="1164001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, my game saves progress every time you finish a scene. so for now I hope it's ok. I am waiting their QA feedback. <br><br></td></tr></table><br>
<a name="1164005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same.  Also save when the game options screen is exited, if the player has made any changes, or when the player switches between fullscreen/windowed.  Data gets saved when it needs saving and you can do no more than that.  I'm sure it'll be fine if you've covered all the bases.<br><br>I'm waiting on QA feedback too! <br><br></td></tr></table><br>
<a name="1164049"></a>

<a name="1164050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just FYI to clarify for anyone interested. CMD + Option + Esc on OS X raises the force quit selector, which allows the user to force terminate an application. This is roughly equivalent to the task manager in windows which allows you to terminate running processes. And in the same way as on windows a) you can't interrupt it and b) you may not receive a terminate signal when it is sent. Technically on a mac you *might* get a terminate signal prior to the app being force closed (I believe the OS sends a polite kill then waits a couple seconds before sending a hard kill) but I'm pretty sure BMax doesn't trap that signal so you won't see it.<br><br>No idea why a publisher would mention note of CMD + Option + Esc since it's purpose is to circumvent the normal task ending procedure (since it should only be used when a task is already exhibiting failure, like running wild or failing to terminate by normal means).<br><br>BMax *should* direct all "normal" terminate requests through AppTerminate(). Including but not limited to application menu quit (including keyboard shortcut, note that keyboard shortcuts only work when you're not trapping key input as you will be doing most of the time in BMax), closing the game window in non MaxGUI apps (this is not strictly an application terminate, but UI guidelines dictate that for single window apps like Games tend to be that the app should terminate at that time since there is nothing left for the user to do.), or selecting quit from the app's dock icon (right click, control click or just long click the icon to get the popup menu). All that should get funneled through AppTerminate, and as such if you implement a polite close, including confirmation dialog excepting in the case of games/apps too small in scope to warrant it, such as Reminder or Notes where date is auto saved and resuming takes no time, then you should be UI best practices compliant to a level acceptable by most users/publishers.<br><br>Optionally detecting when the app is switched to background and going into windowed mode from full screen (and preferably returning to full screen mode when the app gains focus again) is a standard a lot of games employ but is not strictly required. If you plan to distribute on the app store and you have a windowed and full screen mode, you are required to let users switch between them with CMD + Return. This can be tricky in BMax. the simple solution for the app store is just stick to one or the other depending on what's most appropriate for the game and then you don't have to implement the switch... not best for users but it is allowed and a helluva lot easier :0)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1164064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Captain Wicker (crazy hillbilly)</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
While Not AppTerminate()

Wend
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
