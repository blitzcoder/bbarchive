<!DOCTYPE html><html lang="en" ><head ><title >System Administrator Password</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >System Administrator Password</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=107" >MacOS X Discussion</a>/<a href="#bottom" >System Administrator Password</a><br><br>
<a name="720566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would like to grant root access to my application, many MacOS applications that do this pop up a dialogue for the System Administration password, has anyone figured out to do this?<br><br>I have BMax + BMaxGui<br>I use OSX 10.3 Server, OSX 10.4 Server, OSX 10.4 Tiger <br><br></td></tr></table><br>
<a name="720876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>The best lead I have found so far is this article:<br><br><a href="http://developer.apple.com/documentation/Security/Conceptual/authorization_concepts/index.html#//apple_ref/doc/uid/TP30000995" target="_blank">http://developer.apple.com/documentation/Security/Conceptual/authorization_concepts/index.html#//apple_ref/doc/uid/TP30000995</a><br><br>However, I have not yet used it and cannot tell if it is of any help. <br><br></td></tr></table><br>
<a name="721010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think i'm stuffed, the only way I can get my app to work is to run it in root user mode, but I have a user complaining that the root user doesnt have a folder in the user folder.  I instructed him on making an alias, but it is such a simple tool that it should just be able to authenticate itself.<br><br>That document refers to xcode usage, the last example seems to show the way, but I dont want to start over in xcode.  I bought BlitzMax for doing these small applications because I find Blitz easier, must I really learn Xcode :(. <br><br></td></tr></table><br>
<a name="721072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it basically comes down to this function that needs to be wrapped:<br><br><pre class=code>
#include &lt;assert.h&gt;
#include &lt;Carbon/Carbon.h&gt;
#include &lt;Security/Security.h&gt;


extern OSStatus AcquireRight(const char *rightName)
    // This routine calls Authorization Services to acquire 
    // the specified right.
{
    OSStatus                         err;
    static const AuthorizationFlags  kFlags = 
                  kAuthorizationFlagInteractionAllowed 
                | kAuthorizationFlagExtendRights;
    AuthorizationItem   kActionRight = { rightName, 0, 0, 0 };
    AuthorizationRights kRights      = { 1, &amp;kActionRight };

//    assert(gAuthorization != NULL);

    // Request the application-specific right.

    err = AuthorizationCopyRights(
        gAuthorization,         // authorization
        &amp;kRights,               // rights
        NULL,                   // environment
        kFlags,                 // flags
        NULL                    // authorizedRights
    );

    return err;
}
</pre><br><br><br>However, this needs to be linked against the security framework, and I don´t know how to explain this to the BlitzMax compiler. In Xcode, they just "add" the core frameworks and it compiles. How would you do that in Max? <br><br></td></tr></table><br>
<a name="721463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have no clue i'm sorry to say.  I'm not even remotely interested in learning xcode at the moment, if I was, i'd be using that instead.<br><br>I could really use this functionality though. <br><br></td></tr></table><br>
<a name="721528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same here - I'm working on some code that opens "privileged" ports, and on OS X, only a superuser can do that. Maybe I'll manage to dig something up on the weekend. <br><br></td></tr></table><br>
<a name="721683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're looking for a solution for yourself log in as root, i'll exaplin that in a moment for anyone reading who doesnt know.<br><br>Before I do I want to stress that this is NOT a workaround, it is unviable to get your customers to do this.<br><br>To Enable Root:  On OS X Server it is enabled by default, for home user versions of OS X you will need to turn it on first.<br><br>Goto Applications/Utilities and open NetStat.  Goto Security menu and authenticate.  The return to security menu and enable root user.<br><br>Now restart the computer and with the username "root", if you have a user selection menu you may need to select "other".  The root user password is the same as the system administration password.<br><br>You now have access everywhere.<br><br>One note, the root user home folder is not inside /users/ like other users, it is actually inside /private/var/root but /private/ is a hidden directory.  I make an alias of it by temporarily showing all files in the finder, and then dragging the alias to my /users/ folder.<br><br>I really think system administration needs to be included into BMax, otherwise we cannot even write a proper software installer.  This is quite serious. <br><br></td></tr></table><br>
<a name="721882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope, I am looking for a way to implement the default authentication dialog that "lifts" the application to a more privileged level where it can perform administrator or other functions. If I understand the C samples above correctly, it is their purpose to do exactly that.<br><br>I agree that logging in as root is not an option.<br><br>As for the installers: Have you tried Iceberg? <br><br></td></tr></table><br>
<a name="722078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;&gt;As for the installers: Have you tried Iceberg? <br>But I bought a fully featured programming language... <br><br></td></tr></table><br>
<a name="722187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeh right, it states quite clearly on the box that blitzmax offers security and authorisation services on all platforms, we only added the game development libraries as an afterthought.<br><br>Anyway that c snippet doesn't compile because the gauthorisation variable is not created, for that I would imagine you will need to establish exactly what you want to ACTUALLY do. I advise you read another 50 pages of apple documenation, then pick one of the constants at the bottom of this document:<br><br><a href="http://developer.apple.com/documentation/Security/Reference/authorization_ref/Reference/reference.html" target="_blank">http://developer.apple.com/documentation/Security/Reference/authorization_ref/Reference/reference.html</a> <br><br>and then report back here.<br><br>Or follow the very sensible advise of leveraging the abilities of your chosen installer to perform these root level operations, whatever the heck they may be - I do hope you're more exact with your customers about your intentions than you are here! <br><br></td></tr></table><br>
<a name="722311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> otherwise we cannot even write a proper software installer <br></div><br>Or you can just use Apple's own installer which does all that "I need to be admin to install something somewhere" stuff for you.<br><br>Anyway, enabling root access on OS X is seriously inadvisable.<br>That's what sudo is for.<br><br>And opening privileged ports will *still* require super-user access to do so - only you will need to prompt for that super-user password when the time comes.<br><br>Sounds like someone needs to write a Mac Security module :-) <br><br></td></tr></table><br>
<a name="722328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Yeh right, it states quite clearly on the box that blitzmax offers security and authorisation services on all platforms, we only added the game development libraries as an afterthought. <br></div><br>When there's a box i'll take a look at it...  FYI: BlitzMax has a GUI module.  I do not see any game libraries at all, you could make breakout in it, but without a 3D engine I would hardly call it a game programming language, honestly.<br><br><div class="quote"> - I do hope you're more exact with your customers about your intentions than you are here! <br></div><br>My intentions are: To fix the file permissions of files uploaded to a file server so that office based Mac users can edit each others work - according to the access permissions set on the server, and not the permissions set by each individual file.  Like BatChmod, but to write it in such a way that it does not require any user intervention and can just sit on the server. <br><br></td></tr></table><br>
<a name="722472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> but without a 3D engine I would hardly call it a game programming language <br></div><br><br>OK, obvious a generation gap or something, my bad.<br><br>So why does the server app not have permissions to chmod the files? Are we talking about write permissions for all or what exactly? If the app has read acces of the file it can make a simple copy of the file with new version configured the way you want it without requiring extra authorization?<br><br>Are you using SetFileMode, does it crash or do the permission just not change?<br><br>Or are these permissions to do with apple style internal document settings/permssions on which the documentation at apple get's really really scary really really quick. <br><br></td></tr></table><br>
<a name="722653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> OK, obvious a generation gap or something, my bad. <br></div><br>I released my first commercial game 19 years ago, i'm well aware that games can be 2D.  I'm also well are that there are not any 2D games around anymore apart from the odd indi puzzle game.<br><br>I'm using SetFileMode to change the others part of the POSIX permissions of *files* to read &amp; write, of course the document is still safe because the share point has it's own permissions.  This needs doing in many Mac firms a few dozen times a day, and is done by hand, so I made a tool to auto-repeat the process but of course it only works if logged in as root.  I would like for this not to be the case.<br><br>I dont mind if BlitzMax cannot do this, but I resent the "Blitz is for games" answer.  It undermines the product and what it can do, there's been many great utilities written in Blitz already.  If that's the label BR wants though, good luck! Itd have to be one hell of a 3D engine to prize me away from Blitz3D. <br><br></td></tr></table><br>
<a name="722969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ya know... if it's a cli app, you could always set it up as a cron-job for a super user, in which case it always starts with the require rights... <br><br></td></tr></table><br>
<a name="723841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do I do that please Brucey?  I'm not knowledgeable enough :/ <br><br></td></tr></table><br>
<a name="739510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oops... sorry for missing this...<br><br>Cron jobs... allow you to run a command at a given time or interval.<br><br>To edit the cron table (crontab) for root user you would type something like:<br><pre class=code>sudo crontab -u root -e</pre><br>..enter password when prompted.<br>You should now be presented with everyones favourite vi editor. (if you aren't vi-savvy, ask google for help)<br><br>A crontab entry has six fields. The first 5 determine *when* your command is to run. The 6th, is the command.<br><br>Example:<br><pre class=code>0 0 * * * /usr/bin/myarchivescript.sh</pre><br>...which says, run "myarchivescript.sh" at midnight every day.<br><br>The five fields are represented as follows:<br><pre class=code>
minute (0-59)
hour (0-23)
day of the month (1-31)
month of the year (1-12)
day of the week (0-6 with 0=Sunday)
</pre><br>An asterisk (*) means - any, or all.<br>For example, if you specify * for the first (minute) field in the above example, it will attempt to run the script once *every* minute while the hour is still 0.<br><br>You can also have the following types of values for the number fields:<br><pre class=code>
*/15       Is treated as ever 15 minutes, hours, days, or months.
           Replacing the 15 with another numerical value will change this option.
2,4,6     Treated as an OR, so if placed in the hours, this could mean at 2, 4, or 6 o-clock. 
9-17      Treats for any value between 9 and 17. So if placed in day of month this would be days 9 through 17.
          Or if put in hours it would be between 9 and 5.
</pre><br><br>You can *look* at what cron-jobs are set up for root by issuing the following command:<br><pre class=code>sudo crontab -u root -l</pre><br>And if you want to run a cron-job for your current user, you use commands such as:<br><pre class=code>
crontab -e
crontab -l
</pre><br><br>HTH<br><br>:o) <br><br></td></tr></table><br>
<a name="771279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem with doing it as a crontab is it would require an end user to edit the cron table, the whole point of owning a Mac is that you shouldn't have to learn Unix to use it - if it where, then computing just went back in time 2 decades :).<br><br>Anyway i've learned a little of this BSD-Unix thingamy since this post was live, i'm still no expert, but importantly i've learned how to use sudo to open a BMax application with root privaleges which solves my problem.<br><br>However, I am still left with the question of how to make this simpler for end users, I can make a 'loader' program which calls the sudo command...<br><br>'gui bit to get password, followed by...<br>system_ "sudo myApp.app/Contents/MacOS/myApp &lt;password&gt;"<br><br>However as we know the system_ command waits for the remote application to finish, thus the loader app would stay live.<br><br>I tried the CreateProcess() command in the PUB.FreeProcess module, but other than returning a valid TProcess() type it doesnt actually do anything.<br><br>ie:<br><br><pre class=code>
Local proc:TProcess=TProcess.Create("sudo '/Applications/myApp.app/Contents/MacOS/myApp' &lt;password&gt;",0)
Delay 2000
If proc=Null
	Print "LAUNCH FAILED"
Else
	Print "DONE"
EndIf
</pre><br>It always returns DONE, but never actually launches the application. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
