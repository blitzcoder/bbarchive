<!DOCTYPE html><html lang="en" ><head ><title >productbuild chaning permissions on resources prob</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >productbuild chaning permissions on resources prob</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=107" >MacOS X Discussion</a>/<a href="#bottom" >productbuild chaning permissions on resources prob</a><br><br>
<a name="1075844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, i'm having an annoying problem with productbuild (command line tool for making app store installer packages). Basically, i'm keeping my game assets (sounds, images, meshes etc.) in the resources folder of the app bundle, and productbuild is changing permissions on this folder and all files and folders contained within such that after the pkg file is installed the game is not able to load it's resources, and crashes.<br><br>I'm using Minib3d, which may or may not be a cause. I can't seem to incbin stuff with that.<br><br>Any clues?<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1075865"></a>

<a name="1075866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> MiniB3D 'mini fixes' version? That one has a fix I made that enables using streams on everything, even on incbin.<br><br>I have a game (Fruzzle) being ported, and it can load textures and models from inside a zip file, inside the app bundle. <br><br>I didn't sign up with Apple yet, so I can't comment on productbuild, I just hope it doesn't break stuff for me too :(<br><br>But... it is changing file permissions to what? Read-only?<br>If that's the case, check if any OpenFile/OpenStream are set to read only - trying to opening the file to read and write, or just write may indeed break things.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1075868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, so i can incbin meshes+separate textures with the small fixes version then? I'll have to take a look. How does loading a .b3d mesh with a separate texture file work in this case?<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1075869"></a>

<a name="1075870"></a>

<a name="1075873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It all works normally. Just think as the zip as being a folder :)<br><br>I wouldn't recommend to incbin stuff - as it would consume 2x the same ammount of RAM (first inside the EXE loaded into RAM, second when MiniB3D loads it), but it will work the same way as being a 'normal file'. <br><br>If you incbin both mesh and texture, loading the mesh *will* load also the texture.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1075871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, i'll give it a whirl in the morning. Hopefully it'll fix things...<br><br>Also, i've discovered that if i copy the app from where the installer puts it into a different folder, the permissions error disappears and the game runs as normal. I'm guessing this is probably a bug with the product build tool.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1075877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah cracked it! One for the small fixes version i reckon...<br><br>On line 9 of TModel.bmx, change <pre class=code> file=OpenStream("littleendian::"+f_name$e) </pre><br><br>to <br><br><pre class=code> file=OpenStream("littleendian::"+f_name$,True,False) </pre><br><br>and suddenly things seem to be loading! woohoo!<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1075892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> great find! please post for the small fixes version, nice to have all the little gotchas swept up together, hopefully simon will have time to make them all official before too long, in the mean time, a more complete small fixes does the trick (thank god for it's implementation, has saved me having to re-implement my own fixes that I've forgotten about multiple times already when I jump between machines :0) <br><br></td></tr></table><br>
<a name="1075977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, this works for me as i only need to read the meshes/textures etc. Are there any circumstances where you would want to load a model with write permissions? Because this would obviously cause problems for that purpose.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1076028"></a>

<a name="1076032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's currently no way to modify an existing model in place, so no, there's no reason to write back to the file. If you had to make changes you'd have to overwrite it with a new model anyway. Further more you're not allowed to change files inside an application bundle (per apple documentation, and the reason that stuff get's readonly locked) so you wouldn't be allowed to even if you wanted to (in this circumstance).<br><br>Theoretically you could load a model, tracking it's points in the file so when you make a change you could modify the file, but <br>a) this is a huge amount of work<br>b) why not just overwrite? all the model data is in memory at once so there's no problems with overhead and throughput<br>c) how often do you make permanent changes to a mesh anyway?<br><br>I could only see it being worth considering if you had an autosave system in a mesh editor and were working on VERY large meshes that take a while to re-save. In which case you'd probably write a bespoke loader/saver anyway...<br><br>So IMO, go for it, lock it down!<br><br>Afterthought: one tiny possibility would be changes to the header space (embeded copywrite etc.)... if it has one... and it's designed to be editable post creation (i.e. has extra room to pad things out). But again, I don't think it has this so pointless. <br><br>Most importantly, as you've see, elevated permissions only cause problems. It's best to only ask for what you need so that this kinda thing doesn't happen (what about loading off a CD... locked app bundles on mac are one things, but read only media will have a place in distribution cycles for all platforms for quite some time...)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh, I've done that a long time ago in my build... thought it was also on minifixes, but glad you found it out :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
