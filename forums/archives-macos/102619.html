<!DOCTYPE html><html lang="en" ><head ><title >Building a dylib?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Building a dylib?</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=107" >MacOS X Discussion</a>/<a href="#bottom" >Building a dylib?</a><br><br>
<a name="1228077"></a>

<a name="1228078"></a>

<a name="1228079"></a>

<a name="1228617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to build a dylib on Mac 10.6 for Openb3d and have managed to get it to load in Max by specifying 32bit compilation flags, either -m32 or -arch i386 will work. Max wouldn't load the 64bit lib at all. I still have problems though, it seems some things aren't working like half lit objects and no shadows but I can't think of anything else to try now, so I thought I'd ask. Does anyone know what you need to do to get a library built on Mac that works with Max? Maybe it needs some other compiler arguments or maybe another framework? <br><br></td></tr></table><br>
<a name="1228081"></a>

<a name="1228082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I've narrowed it down a bit. I built it on Windows and it has the same half lit objects with no shadows as well, but the same code on ubuntu is fine so it's something to do with GLee as the linux version doesn't use GLee. <br><br>It looks like it's not using GLee at all, so maybe my code in the makefile for building GLee is wrong. It doesn't seem to be the -m32 option as I just removed that and it was still the same, so the only other thing is the way I'm including GLee. It works when I link to GLee (like #include &lt;gl\GLee.h&gt;) but not when I add it to the makefile (like #include "GLee.h"). <br><br></td></tr></table><br>
<a name="1228135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well now it looks like GLee won't work unless it's linked to as a shared library but I don't know how to go about that on Mac as there's no instructions. Can you just put it in OpenGL.framework? I tried but it didn't work. Do I need to build GLee.lib for Mac? <br><br></td></tr></table><br>
<a name="1228150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm afraid I can't answer most of your questions... :-p<br><br><div class="quote"> Does anyone know what you need to do to get a library built on Mac that works with Max? <br></div><br>-shared and -arch i386 should generally be enough, used in both the compilation and linking.<br>You'd call it something like libminib3d.dylib<br>and link to it in BlitzMax with something like -lminib3d <br><br></td></tr></table><br>
<a name="1228156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks that's very helpful.<br><br>I thought on Mac you couldn't use -lminib3d and had to use -framework something. Is there a general shared include and lib folder on Mac? <br><br></td></tr></table><br>
<a name="1228187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I thought on Mac you couldn't use -lminib3d <br></div><br>You'll find -l used on a lot of my modules which have 3rd-party shared objects (bass, fmod and irrlicht are three examples).<br><br>-framework is used for actual frameworks, which are something else.<br><br><div class="quote"> Is there a general shared include and lib folder on Mac?  <br></div><br>Yes, they are much in the same places as on Linux, but you don't need to use them for 3rd-party libs you want to ship with your app, as you can store everything in the app bundle. (assuming it's a GUI app you are making, of course). <br><br></td></tr></table><br>
<a name="1228321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, that helps a lot. <br><br></td></tr></table><br>
<a name="1228471"></a>

<a name="1228472"></a>

<a name="1228473"></a>

<a name="1228528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> More dumb questions! :P<br><br>Is it possible to create a glee.a file with BlitzMax that is just code from a glee.c file (and glee.h)? So I could link to it from the makefile. I tried using import "GLee.c" but it builds it all into the app.<br><br>I am thinking maybe there's some compiler flags Max uses that would make GLee (or Openb3d) work properly. Since the source wrapper works fine.<br><br>I see there is a GLee.a file in ofx.mod <a href="http://code.google.com/p/ofxmax/source/browse/trunk/ofx.mod/core.mod/libs/GLee/lib/mac/GLee.a?spec=svn4&amp;r=3" target="_blank">here</a>.<br><br>Edit: well I tried that and it's version 5.21 and it wouldn't compile. <br><br></td></tr></table><br>
<a name="1228615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I got it working. I did a stupid thing. I remove the stencilbuffer and alphabuffer flags from graphics3d and managed to not realize shadows won't work without the stencil buffer. Doh! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
