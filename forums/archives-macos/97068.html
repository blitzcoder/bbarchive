<!DOCTYPE html><html lang="en" ><head ><title >App sandboxing in BM, any news?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >App sandboxing in BM, any news?</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=107" >MacOS X Discussion</a>/<a href="#bottom" >App sandboxing in BM, any news?</a><br><br>
<a name="1125477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OscarBraindeaD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br>Is there any news about mac store app sandboxing and how done it in BlitzMax? <br><br>Best regards. <br><br></td></tr></table><br>
<a name="1125840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> check<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=96219" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=96219</a><br><br>I still haven't gotten to it myself, but time is getting short... if anyone has any helpful tips or best yet a basic step by step for bundling with sandboxing it would be much appreciated :0) <br><br></td></tr></table><br>
<a name="1126077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OscarBraindeaD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Ima747,<br>thanks for the link. The RB package maker can be a fast solution... but I'll wait to see if anybody tells how to make an entitlements file by hand to include in the app.<br><br>Regards <br><br></td></tr></table><br>
<a name="1126771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just come across this whole Sandboxing thing and didn't even know what it was!  Anyway, I've done some reading up and alarm bells are a-ringing!<br><br>I currently store my game levels (which include high scores), player profiles and the config files in the /Library/Application Support folder, which was fine pre-Lion.  I've just installed Lion and tested my game and I'm no longer allowed to write any files there (I've mentioned this problem on another thread).<br><br>So now I've come across Sandboxing and it looks like that if I were to sort out the above issue I should no longer be writing there anyway.  I know that when an app is Sandboxed that a Container folder is created per user, which is all well and good, but the main question is where am I now supposed to be saving shared files?  I've read some of the docs, but can't find any mention of it. <br><br></td></tr></table><br>
<a name="1126807"></a>

<a name="1126808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I understood, at the same place as before. It will just be sandboxed.<br><br>Anyway, I didn't hardcode "~/Library/Application Support", I used an API to get the correct place...<br><br><pre class=code>
FSFindFolder( kUserDomain, kApplicationSupportFolderType, False, ref)
</pre><br><br>I haven't update my 'old' games with sandbox - nor do I intend to if I'm not forced (people with save games suddenly will lost them, if I understand it correctly, unless I make a very complicated process to import the old save games into the sandbox app) - but my 'poker' game - which *is* sandboxed - is going strong, and everything seems to be fine.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1126816"></a>

<a name="1126817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OscarBraindeaD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br>I use the same API that you, SLotman. I figure that you're using this method to your poker sandboxed game? So... no entitlements file is needed?  Just use  the user's folder to write? Maybe only apps that write out of this folder needs the entitlements file? Hmmm... too simple to Apple... :)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1126829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use the same API call too (via bah.volumes.mod), which returns /Library/Application Support for non-Sandboxed apps.  Problem is, that location is now read-only by default under Lion.  I can manually create the folders and set the permissions and my game will work.<br><br>I'm guessing that a Sandboxed app will return a folder within the Container folder instead, which is per user.  If there is no need to share data between different user accounts, then there is no issue - which is why I presume SLotman has not heard of any issues, or no-one uses multiple accounts, or simply no-one has noticed.<br><br>As far as the Entitlement File goes, there doesn't appear to be a key for using an external folder, only folders such as Documents or Pictures, for example.  So, unless I've missed it somewhere, there doesn't appear to be a solution here either. <br><br></td></tr></table><br>
<a name="1133376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> grain of salt warning: I have not implemented sandboxing yet, this is based on my research...<br><br>If you using a *sandbox compatible* API call (I have no idea if FSFindFolder qualifies...) in a sandboxed app it will return an appropriate sandboxed location (which generally will be inside the app's contents folder itself to my understanding... though it depends on what you're asking for and possibly your entitlements).<br><br>Just compiling an app doesn't put it in the sandbox. It has to be signed *with and entitlements file*. You can sign apps from the command line (see my guide in the tutorials section regarding submitting bmax apps to the app store). When signing an app from the command line you can optionally include an entitlements file which is factored into the signing and then included in the app. I have yet to personally do this so I could be wrong but I do recall something regarding entitlements in the command line arg list when I was getting all the signing stuff set the first time... <br><br></td></tr></table><br>
<a name="1151894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to ressurect this topic...<br><br> I'm now having problems on Lion: game runs fine when running from Blitzmax, but if I codesign with an entitlements file, the game just refuses to run, crashing with "bus error 10" (which I have no idea what it means)<br><br>If I codesign the game back again, without the entitlements file, the game runs fine...! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
