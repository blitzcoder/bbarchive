<!DOCTYPE html><html lang="en" ><head ><title >Starting a program on Mac OS</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Starting a program on Mac OS</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=107" >MacOS X Discussion</a>/<a href="#bottom" >Starting a program on Mac OS</a><br><br>
<a name="885721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm having a hard time getting applications to start using either OpenURL or CreateProcess. I am passing in the actual binary path but not getting any success:<br><br>OpenURL("~/dllp.app/Contents/MacOS/xulrunner")<br>CreateProcess("~/dllp.app/Contents/MacOS/xulrunner")<br><br>Neither of these work, although system_() seems to work. I would really like to have CreateProcess working as I have a library of functions that rely on TProcess objects to do stuff like wait for a process to close, etc. Does that class work at all on Mac OS? <br><br></td></tr></table><br>
<a name="885722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> And dllp.app is in the user's home directory (because that's what the ~ stands for)? <br><br></td></tr></table><br>
<a name="885725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Let's just say it is, in my real app I have the full directory taken from AppDir. I guess my examples should just have that spelled out, this is closer to what I'm actually doing:<br><br><br><b>start.bmx</b><br><pre class=code>
Local P:TProcess = CreateProcess(AppDir + "/dllp.app/Contents/MacOS/xulrunner")
</pre><br><br>dllp.app is a xulrunner based application in the same directory as "start.app" (when this is compiled). I've also tested to make sure that AppDir only returns the application directory - not the Contents/MacOS dir (which you can get by calling StripDir() on AppFile).<br><br>I did see this comment in FreeProcess.bmx:<br><br><pre class=code>
1.01 Release
Inserts /Contents/MacOS/ into process path for Apple app packages
</pre><br><br>I can't find any evidence of this in the BMX or C code. If it <b>does</b> do that, I wonder how and if it is in a way that interferes with how I'm using it (by providing that path myself). <br><br></td></tr></table><br>
<a name="885729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> See line 144 of <i>freeprocess.bmx</i>. It is blindly attempting to find the executable assuming that it will have the same name as the Application Folder (which won't always be the case). Perhaps, instead, it should read the executable name from <i>info.plist</i>, only resorting to using the previous fail-safe method if no definition is found. However, as you can see from the code, it is only doing this if the path supplied is a directory, which I assume is not the case in your example.<br><br><pre class=code>?MacOS
		If FileType(name)=2
			Local a$=StripExt(StripDir(name))
			name:+"/Contents/MacOS/"+a$
		EndIf
?</pre> <br><br></td></tr></table><br>
<a name="886083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't know how I missed that, but good to rule it out as the cause of my problem. Well this is weird, this works fine:<br><br><pre class=code>Local P:TProcess = CreateProcess("/Applications/Utilities/Terminal.app/Contents/MacOS/Terminal")

DebugStop
</pre><br><br>P seems to be completely populated. So then it would seem that either I have a typo which no one can help me with, or xulrunner doesn't like something about the way it's getting started. Thing is, I don't see what could be wrong with the execv() it uses to start the application. Maybe I should try calling that directly and see what happens... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
