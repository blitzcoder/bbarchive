<!DOCTYPE html><html lang="en" ><head ><title >decorator problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >decorator problem</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=83" >Developer Stations</a>/<a href="#bottom" >decorator problem</a><br><br>
<a name="608560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a problem with decorator 1.8<br><br>The map is a outdoor scene with a lot of grass between the buildings etc. There's also something like a street, that is a slightly elevated platform over the grass level. I think the Y offset is the second smallest unit that can be scaled in Maplet (zoom grid thing). Now when I want to texture the street platform with decorator, a lot of weird things happen. First of all, I cannot assign a texture to SOME triangles. Sometimes when I tried to assign a texture, there is no visible success, then I save the mesh, restart Decorator and there it is, assigned, with some missing Triangles. Then in rare cases it works nonetheless. Now after some fiddling I finally achieved a finished map and then I wanted to save the map optimized. But when I load the result in Blitz3D the couple of bad Triangles are back untextured. But they don't use the texture that was set before, but a texture that was used long time ago, but was retextured several times since then.<br><br>Then there's this very strange behaviour when I walk on this Tris: Framerate drops down to something like 4 fps. As soon as the triangle is out of the view (eg. looking up to the sky) the rate is normal again.<br><br>This is all real weird and frustrating, especially because the artefacts appear in the final app, the game engine.<br><br>Here's an image:<br><br><img src="http://www.melog.ch/screens/decorator_prob.jpg"><br><br>This slowdown thing suggests Decorator is creating multiple Triangles at the same position for some reason.<br><br>I will now try to import it in giles, convert to 3ds, optimize in 3dsmax, then convert back to b3d and reasign the lightmap in decorator, but honestly, I'm afraid this won't work.<br><br>Get this right, I love Decorator. It's only these little things that are capable of driving me crazy.<br><br>If somebody has a solution for it, please let me know!<br><br>EDIT now it seems there are in fact multiple triangles  on the same place. Using decorators DEL+LMB function to delete Tris permanently allows me to reduce the polycount repeatedly on the same triangle, while the texture scaling differs after every deletion. Unfortunately it MAVs after some Deletions, probably because it tries to remove something that isn't there anymore.<br><br>EDIT 2<br>Ok, this is my current workaround:<br>-save the map as optimized mesh in decorator<br>-restart decorator then load the optimized mesh<br>-use DEL+LMB to delete the disobedient triangles<br>-use my Level Editor to put some scaled simple Quads onto the resulting holes<br><br>looks ok, speed is normal again.<br><br>But there's definitively something wrong in decorator. Must have something to do with the scanning steps. Maybe adjustable scanning steps would be a solution, dunno since I don't know the internals. However. neverteless I'd like to thank Lee one more time for this fantastic freeware tool. <br><br></td></tr></table><br>
<a name="608573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Happy Sammy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi jfk,<br><br>With my little knowlege, how about you subdivide mesh or draw some rectanges or whatever at the place, so that default missing triangles could be created in Decorator?<br>(as we put texture on the mesh, we could not see the subdivision.)<br><br>Sammy<br>:) <br><br></td></tr></table><br>
<a name="608577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Sammy, that's exactly what I did. A qick'n dirty solution :) Well it's a sunny locaton wihtout shadows, so it doesn't matter that the quad isn't lightmapped. In future I'd like to prevent to get in troubles like this in the first place. A solution would be to scale things bigger in Maplet (not to use small zoom grids), but already now my map is using the max size of Maplet. Maybe I'd have to work with multiple files then. <br><br></td></tr></table><br>
<a name="608583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is interesting - noticed some speed loss on a simple map of my own recently and stuck it on the things-to-investigate pile. Is your map broken on loading or only after optimisation? <br><br></td></tr></table><br>
<a name="608765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi jfk EO-11110,<br><br>Could you send me the map and textures so I can have a go at finding out what's going on. Decorator has been around a long time, so there must be something new going on somewhere. <br><br></td></tr></table><br>
<a name="608794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Lee. Thanks a lot for your attention. I think I have isolated the problem, see this thread:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=54572" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=54572</a><br><br>There are some double tris, in a 20k Triangles Mesh about 3500 where clones, unneeded Tris with some diffrent textures. When you render this (bysides the general slowdown of the known "identical tris problem" for Graphic Cards), its only karma if you see Tris 1 or 2... It  has probably also something to do with the way, surfaces are not loaded in the same order every time. I'll also post my test code in the linked thread. <br><br></td></tr></table><br>
<a name="608862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now I have to remember how it works. :)<br><br>So, are you saving out and reloading an 'Optimised' mesh?<br><br>As I recall, So that each triangle is independantly paintable, Decorator unwelds the level at loading time. It will then save the level unwelded when you save normally. <br><br>I recommended that people should only export an 'Optimised mesh' (a rewelded one) when they've finished a level or a copy to test in a game etc.<br><br>So the duplicates are coming in when saving out a rewelded 'Optimised Level'?<br><br>Is decorator making the extra tris or is it just getting confused over existing duplicates?<br><br>[note] After looking through the Decorator source, it seems a little hacked together in places. :/ <br><br></td></tr></table><br>
<a name="608877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's making the extra tris. The original Maplet Export has exactly the same number as the one with removed duplicates. The number of tris increases repeatedly, the more you are painting, saving and restarting decorator. It seems this happens only on areas where small zoom grids where used in maplet. so I guess it must be some kind of 3D scanning step problem.<br><br>Unwelding the mesh should not alter the number of triangles, only the Vertices. Maybe you should take care of the AddTriangle Command. I don't know how Decorator works internally, but I guess when I paint a triangl with a diffrent brush, you will recreate the surface with this new Triangle. Maybe it didn't remove the old Triangle correctly somehow?<br><br>I have made this exporter now, but it's driving me crazy. Thought I have a solution, but the fact that the surfaces are loaded in random order makes it difficult to decide if I should use the original or the clones of the duplicate tris.<br><br>Well since it's a emergency tool, I probably add a constant that can be edited on the fly, IF CLONESAVE=1 THEN etc. <br><br></td></tr></table><br>
<a name="608884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll have a scan though the source over the weekend to see if I can see the problem. <br><br></td></tr></table><br>
<a name="608901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uh, don't worry too much, it's christmas a good time to join the family party. It would be nice if you try to fix it the sooner or the later. Meanwhile, I'm gonna use the optimizer tool I just posted in the other thread. <br><br></td></tr></table><br>
<a name="609016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It seems this happens only on areas where small zoom grids where used in maplet. so I guess it must be some kind of 3D scanning step problem. <br></div><br><br>I've never used maplet. Could you send me a small map that exhibits the problem so I can test with it? <br><br></td></tr></table><br>
<a name="609106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, gimme some time to zip it and move it to this webconnected terminal.<br><br>EDIT ok sent. <br><br></td></tr></table><br>
<a name="609336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br> Maybe it didn't remove the old Triangle correctly somehow?<br> <br></div><br>Maybe a "for i=1 to" vs "for i=0 to" problem. <br><br></td></tr></table><br>
<a name="609356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been painting and repainting the level with each of the painting modes, saving [F9] them in sucessive generations and reloading them to continue the painting.<br><br>It kept: 7629 Vertices and 2543 triangles in each generation every time. Byte for byte the files remained the same size. :/<br><br>What version of Decorator are you using? (1.8 is the current version). [edit] I see you have 1.8... hmmm.<br><br>Are you doing anything to the levels between reloading them in Decorator? <br><br></td></tr></table><br>
<a name="609358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hold on... Hmmm. Keeping going in the generations.. something looks fishy... O.o <br><br>[EDIT]<br><br>No. False alarm... Still the same number of tris and verts. <br><br></td></tr></table><br>
<a name="609360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> HOLD THE PHONE...<br><br>Now it is a different story with the already damaged level you sent along with the original.<br><br>When you try to paint a surface, you get a constant stream of extra triangles and vertices.<br><br>This is because the triangle that is being displayed on the screen is different from the one that is being picked by the CameraPick. <br><br>The CameraPick sees one triangle and the Blitz3D render engine displays another (camera range doesn't seem to make a difference). <br><br>Decorator then takes the picked triangle and tries to move it to another surface. But the one it picked is not the one you see. So it picks the same one and moves it again and so on. <br><br></td></tr></table><br>
<a name="609364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still looking into it. I'll get back when I've got some progress to report O.o <br><br></td></tr></table><br>
<a name="609387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>This is because the triangle that is being displayed on the screen is different from the one that is being picked by the CameraPick. <br><br>The CameraPick sees one triangle and the Blitz3D render engine displays another (camera range doesn't seem to make a difference). <br><br>Decorator then takes the picked triangle and tries to move it to another surface. But the one it picked is not the one you see. So it picks the same one and moves it again and so on.<br> <br></div><br><br>Yes, that's exactly what happens. It seems you cannot paint a triangle, instead it paints a triangle that is hidden behind it's clone.<br>I don't use any other tools, the extra tris where generated by Decorator somehow. Probably it happens in some rare exceptional case only, but if there's once a clone, they "multiply" quickly. <br><br></td></tr></table><br>
<a name="609553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok. I've been testing with a new version (1.81 - Attack on the Clones) which should cure the odd clone triangle turning up.<br><br>It should also provide a bit of a speed up when dealing with bigger geometry.<br><br>Looking through the code is like looking though a time warp, as I've changed my coding style a lot in the last few years. <br><br>I've also updated the version of BlitzSys, so it may solve the 'BlitzSys crashing' that was reported elsewhere.<br><br>You can download 1.81 <a href="http://www.terabit.nildram.co.uk/decorator18.zip" target="_blank"> here </a><br><br>I hope that sorts it. It still blows if you try to paint a level with the clones already in, but it should no longer create them.<br><br>Let me know how you get on. <br><br></td></tr></table><br>
<a name="609620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackJumper</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks Lee. Can I suggest that you update the link in the Toolbox section (if you are able to.)<br><br>... if not, could BRL do this. While we are at it, there was a recent thread about your TSConvert tool where the version linked to in Specs &amp; Utils seems to be an older one than the one I have available... you might want to rename the download on your website to point at the latest version.<br><br>I plan to use the new Decorator with a games development club I am starting in the school where I teach... The kids will enjoy blasting textures onto levels much more than working with 'proper' tools. <br><br></td></tr></table><br>
<a name="609625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot Lee! Tho I have finished the Map works for this WIP level right now but I'll do some tests anyway. The consistency of your support is amazing. To me Decorator is much more a proper tool than many other tools with a pro looking surface and little artistic productivity.<br><br>I take it the path is the same as the one of version 1.8, so all links may remain unchanched?<br><br>Huts off and many thanks! <br><br></td></tr></table><br>
<a name="609659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it was only a minor version update so the link is the same. <br><br>I'll look into the Convertor link being old.. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
