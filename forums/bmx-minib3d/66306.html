<!DOCTYPE html><html lang="en" ><head ><title >Some advice on a miniB3D particle system</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Some advice on a miniB3D particle system</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >Some advice on a miniB3D particle system</a><br><br>
<a name="740926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >The r0nin</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been working with volumetric smoke (which I have been simulating with meshes, etc.) as opposed to sprite-based smoke.  MiniB3D has been a dream, but too many smoke trails quickly bring my system to a crawl (and I have a Core Duo system with a decent Vcard).  I implemented an array to recycle particle declarations/memory, and got a little bit of a boost.  I quickly decided that a much better method of creating meshed smoke would be, instead of creating 150 different copies of the same mesh (which is what I was doing before with lists of meshes), I should load the mesh only once, and then draw it to the backbuffer at multiple places.  That way I would only need to store one mesh and then use an array, map, etc. to store positions and orientations where that image would be copied.  Unfortunately, miniB3D does not directly allow this kind of operation.<br><br>Based on my reading of the miniB3D code, the TCamera.Update method clears the backbuffer for the next draw.  So any attempt to draw a single mesh multiple times from outside code would be lost as soon as Renderworld is called.  The best option that I can see at this point would be to modify miniB3D itself and create a new function to read and render my smoke (but I'm not sure how to handle z-buffer sorting, if OGL doesn't do so automatically) that I include after cam.Update in Renderworld.<br><br>Is there an easier way to do this (I have the sneaking suspicion that I'm missing something fairly obvious)?  I know there are particle systems already out there, but I'm interested in this as a learning experience as much as a practical solution.  Anyone have any suggestions how to draw a single mesh multiple times at different places in one frame... or even a better way to do this? <br><br></td></tr></table><br>
<a name="740933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> First you should know that MiniB3D doesn't have a proper detection if something is in view or not (in fact this has to be set by using MeshCullradius(mesh,1) ) . Also you may read some tutorials about singlesurface rendering. <br><br>Its late overhere ;) , so i will post tomorrow a bit more. <br><br></td></tr></table><br>
<a name="740986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Drawing the same mesh multiple times would not give you a speed boost. In fact it would be the same as creating one mesh, then using copyentity on in it many times.<br><br>The best way to get a speed boost is to limit the no. of times that OpenGL draws something - so instead of making it draw a mesh 150 times, if you can try and group some of the meshes together somehow, and get it to draw less times you will get a speed boost.<br><br>Meshes for smoke sounds excessive though, I don't think you even get that in AAA games! My advice for a super-fast particle system would be to look into using a single-surface sprite system, there is quite a bit of discussion about these for Blitz3D. <br><br></td></tr></table><br>
<a name="741282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check this out. some good info on squeezing better performance out of openGL:<br><br><a href="http://developer.apple.com/graphicsimaging/opengl/optimizingdata.html" target="_blank">http://developer.apple.com/graphicsimaging/opengl/optimizingdata.html</a> <br><br></td></tr></table><br>
<a name="741421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >The r0nin</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys!  I've done some searches on this site and on the web, and while there's a lot of discussion <i>about</i> SSS, I haven't found anything that explains how to <i>do</i> it...<br><br>BTW, since miniB3D TSprites are children of TMesh, it doesn't do me much good to use them instead, correct?  Same amount of overhead?<br><br>I'm still looking for single surface tuts, as well as other options.  My main focus is on smoke trails... <br><br></td></tr></table><br>
<a name="741507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this: <a href="http://www.dc.chat-blitz.de/devilengines/Tutorials/Particles.html" target="_blank">http://www.dc.chat-blitz.de/devilengines/Tutorials/Particles.html</a> <br><br></td></tr></table><br>
<a name="741759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >The r0nin</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome!  Thanks klepto2! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
