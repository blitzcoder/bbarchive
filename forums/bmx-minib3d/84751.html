<!DOCTYPE html><html lang="en" ><head ><title >3D Sound</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >3D Sound</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >3D Sound</a><br><br>
<a name="957811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FreetimeCoder</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br><br>I want to implement 3D sound like in Blitz3D into my game, but there is one problem: simonh MiniB3d has no 3D sound. Then I discovered the sound module in klepto's Minib3d ext. Tried to implement it but it does not play 3d sound, just mono sound and I have no way to set the soundrange or a dopplereffect. <br><br>Then I found this <a href="/posts.php?topic=68669" target="_blank">topic</a>.<br><br>The Module itself seems to be exactly what I need. But: I copied the code, compiled it and used the module in my Code -&gt; no sound at all. <br><pre class=code>
Local emitter:TEntity = CreateSphere()
Init3DSound(Camera, 1, - 1)
Local onesound:TSound = LoadSound("Data/SFX/mysound.ogg")
Start3DSound(onesound, emitter, 1, 1)

[...]

Update3DSounds()
</pre><br><br>So I tried to download the new version (at the end of the topic there is a link) but the whole page seems dead. <br><br>Is there someone who succesfuly implemented 3D sound, yet? who can help me?<br><br>greetings <br><br></td></tr></table><br>
<a name="957871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://toscaledesign.com/minib3d/minib3dSoundv1.2.zip" target="_blank">http://toscaledesign.com/minib3d/minib3dSoundv1.2.zip</a><br><br>my old server died and I forgot where the links came from, hope that helps.<br><br>It's much easier to implement it as a module, but with a bit of poking you can probably make it includable if you prefer.<br><br>It works with the blitz max sound system, not an external library, so if you can't get sounds playing try playing some old fashioned 2d sounds in blitz and if that doesn't work it's probably your sound card. If the 2d stuff works but you can't get the 3d working make sure your distances and ranges are set and make sense.<br><br>good luck. <br><br></td></tr></table><br>
<a name="957885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FreetimeCoder</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I guess it was the old version that made the problems. The samples included in your new version are working perfectly! <br>Big Thanks man, made my day :D<br><br>greetings <br><br></td></tr></table><br>
<a name="957929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FreetimeCoder</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hm very often at <b>Start3DSound(mysound, myEntity)</b> I get this error:<br>Unhandled Exception:Unhandled Memory Exception Error<br><br>It does not matter, how many sounds I use, how long the sound is or how loud the sound plays. :? any Clues on solving this? Sometimes it works but more often it crashes.<br><br>greetings <br><br></td></tr></table><br>
<a name="958008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> can you post a sample? are you sure myEntity hasn't been freed? have you called the Init3DSound() function with a listener prior to trying to start playback? <br><br></td></tr></table><br>
<a name="958257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FreetimeCoder</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>SuperStrict

Import sidesign.minib3d
Import ima.minib3dsound

Global mySound:TSound = LoadSound("../Data/SFX/sound.ogg", SOUND_LOOP)

Type myObject
	Field myMesh:TEntity = CreateSphere()
	Function init:myObject(X:Int, Y:Int, Z:Int)
		Local tmp:myObject = New myObject
		tmp.myMesh.PositionEntity(X, Y, Z)
		Start3DSound(mySound, tmp.myMesh, 0.5, 1)
		Return tmp
	End Function
End Type

Graphics3D(640, 480, 0, 2)

Local camera:TCamera = CreateCamera()
Init3DSound(Camera, 100)

Local Objectlist:TList = CreateList()
For Local i:Int = 0 To 20
	Objectlist.AddLast(myObject.init(Rnd(- 100, 100), Rnd(- 10, 10), Rnd(- 100, 100)))
Next

While Not KeyHit(KEY_ESCAPE)
	Cls
	Camera.TurnEntity(0, KeyDown(KEY_LEFT) - KeyDown(KEY_RIGHT), 0)
	Camera.MoveEntity(0, 0, KeyDown(KEY_UP) - KeyDown(KEY_DOWN))
	Update3DSounds()
	UpdateWorld()
	RenderWorld()
	Flip()
Wend
ClearWorld()
End
</pre><br><br>However, when starting the Sounds after all Objects are added to the list, there is no error. <br><br>greetings <br><br></td></tr></table><br>
<a name="958278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting, I'm a little rusty at blitz at the moment but that looks like it should work. my assumption on why it doesn't is there's something getting juggled regarding the pointer of the mesh when the list is modified.<br><br>I don't have blitz installed on the computer I'm on, but here's a couple things you could try<br><br>see if breaking the create out of the list add makes any difference i.e.<br><pre class=code>
For Local i:Int = 0 To 20
	Local tempObject:myObject = new myObject.init(Rnd(- 100, 100), Rnd(- 10, 10), Rnd(- 100, 100));
	Objectlist.AddLast(tempObject)
Next
</pre><br><br>if that doesn't work then start it playing after the list add (remove the play from the init)<br><pre class=code>
For Local i:Int = 0 To 20
	Local tempObject:myObject = new myObject.init(Rnd(- 100, 100), Rnd(- 10, 10), Rnd(- 100, 100));
	Objectlist.AddLast(tempObject)
	Start3DSound(mySound, tempObject.myMesh, 0.5, 1)
Next
</pre><br><br>if that doesn't work then add a start sound loop after the create loop that starts everything, in the end you're likely to be doing this anyway if you're creating a bunch of objects at once since the sounds would start to play before anything started happening on screen.<br><br>You could also look into Que3DSound and EntityResume3DSound as that should allow you to prep the sounds when you make the objects and then start them playing later (i.e. after all the objects have been made so the sound is in sync with the screen) <br><br></td></tr></table><br>
<a name="961284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FreetimeCoder</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah that worked. Thanks <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
