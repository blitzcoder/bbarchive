<!DOCTYPE html><html lang="en" ><head ><title >Making a surface that uses Byte instead of float</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Making a surface that uses Byte instead of float</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >Making a surface that uses Byte instead of float</a><br><br>
<a name="1054342"></a>

<a name="1054344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AnniXa</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, i think about making a new specified Tsurface type that uses :byte for the vert_coords values, because my surfaces are not so big, verticles never got negative coords and i dont need so exacly vertexPositions. <br>Also i would like to remove alot stuff from the surf that i dont need, (bones thingys and some other stuff) because i have very big meshes for a scenery thing, and the Memory usage only for surfaces can raise up to &gt; 600MB while my framerate is sticky on 60 and fine, i think its because of the mass float´s.<br><br>so before i maybe start wasting my time with this i just wanted to ask if you maybe know some stuff about that, would it be possible to make a new tsurface like that?<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1054360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> should be possible for memory conservation however you might get a significant performance hit as the bytes will likely have to be converted to floats on the fly to work with everything else... you might be able to counteract that a bit by using ints instead of bytes since they're the fastest primitive in bmax due to it's 32 bit nature, however there will still be conversion and it wouldn't save as much space...<br><br>to reduce the performance impact you may need to create a whole new rendering path around bytes, i.e. modify TMesh and TCamera into byte based variants as well so you could create a ByteMesh which contains ByteSurface's and is rendered through a ByteCamera... but you still may be affected because of the object layouts from the world root for creating the render queue for each camera...<br><br>if your usage is rising that high you're probably better off looking into some way to segment and manage the meshes/surfaces etc. It's likely to both improve memory usage as well as frame rates (can never be too high...) and you might find your solution ends up being applicable to other things as well for more performance etc. <br><br></td></tr></table><br>
<a name="1054372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Won't make a difference AFAIK - every card internally store vertex and tex coordinates as floats - so even if you manage to make everything as bytes in miniB3D or even on plain OpenGL. it will have an overhead to convert it to float.<br><br>But... how are you measuring this surface memory usage? A float is 4 bytes, * 9 (x,y,z,u,v,w,nx,ny,nz) = 36 bytes per vertex. If you're using more than 600mb on just surfaces, this means you have more than 17 million vertex loaded? <br><br></td></tr></table><br>
<a name="1054395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AnniXa</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> well thank you for that hinds,<br><br>i just made a countvertex function that cycles through all relevant surfs and geht te vertcount.<br>when the ram usage is on ~600MB the vertx Count is on aprox 700000 connected with 300000 tris.<br>when i turn off the creation for the surfaces the memory usage is on ~100mb just for other stuff.<br>so around 500mb just for the surfaces :( <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
