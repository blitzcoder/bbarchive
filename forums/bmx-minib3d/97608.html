<!DOCTYPE html><html lang="en" ><head ><title >imimib3d0.5 - Errors on iOS5.1 with Mesh* array</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >imimib3d0.5 - Errors on iOS5.1 with Mesh* array</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >imimib3d0.5 - Errors on iOS5.1 with Mesh* array</a><br><br>
<a name="1135174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thefoxsoft</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi i need to load about 30 b3d anim files.<br>I have started modifying the zombie example, but i get some random errors on runtime.<br>The model loading is made with the following instructions<br><br>for (int i=0; i&lt;30; i++)<br>mymodel[i] = Mesh::LoadAnimMesh("zombie.b3d", light);<br><br>mymodel is definied in game.h as<br>Mesh* mymodel[30];<br><br>can you help me?<br>many thanks in advance <br><br></td></tr></table><br>
<a name="1135195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not up to date on my iMiniB3D versions so this may have been fixed, but it sounds something like the issue described here: <a href="http://www.blitzbasic.com/Community/posts.php?topic=96640" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=96640</a><br><br>The suggested fix in that instance was to try using LoadAnimB3DFile instead. <br><br></td></tr></table><br>
<a name="1135203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thefoxsoft</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the quick reply.<br>Unfortunately i have tried using LoadAnimB3DFile but the problem is still present.<br>I just want to highlight that this issue cames only when i load more than 20 b3d files in a Mesh* array.<br>I can provide the source code if necessary. <br><br></td></tr></table><br>
<a name="1135204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What error are you getting and where? Is the error in the loading, or when you try to use one of the &gt;20 meshes? Have you modified iMiniB3D at all (unlinked the texture list for example...). Is it an access exec or something else. Does it crash to a specific point, and if so what's the execution tree?<br><br>First thing that would come to mind would be memory constraints... what device or the simulator are you testing on? Have you leak checked your project? <br><br></td></tr></table><br>
<a name="1135246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thefoxsoft</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is that the error changes every time on runtime, sometimes it got me an assembler error, sometimes it happens on Texture::FilterFlags() function, sometimes on Entity::FreeEntity() function and sometimes it works!<br>The app occupy 41MB of RAM.<br><br>To try the bug just open the zombie example and add these instructions in the Game::Init:<br>    for (int i=0; i&lt;30; i++)<br>        mymodel[i] = zombie-&gt;CopyMesh();<br><br>of course you have to defining Mesh* my model[30] on game.h<br>Since i'm developing a soccer game, i must load at least 22 b3d files, so i desperately need it !<br><br>thank you really much for your kindly attention. <br><br></td></tr></table><br>
<a name="1135247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thefoxsoft</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm developing on both iPhone simulator 5.1 and real iPhone 4S iOS 5.1, and i get the same errors <br><br></td></tr></table><br>
<a name="1135260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you don't put the Mesh* mymodel[]; in the header it doesn't crash... if you put it right before the zombie copy loop, or even just skip assigning the copy results to anything (they're stored internally in iMiniB3D for the render lists, etc.) it works (copying 100 now, slow but works). Making the array a static at the top of game.mm also works. Something about putting it in the header = bad news beyond a size of about 5. Interestingly if you make it about 5 and load 5 it works, but if you make it 30 but still only load 5 it has issues... <br><br></td></tr></table><br>
<a name="1135269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thefoxsoft</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I followed the workaround you have suggested (making the array as global) and now it works.<br>Anyway I hope this bug will be sorted.<br><br>Thanks <br><br></td></tr></table><br>
<a name="1143366"></a>

<a name="1143468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thefoxsoft</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found another bug. It happens randomly when i display a lot of sprite.<br>I got EXC_BAD_ACCESS here:<br>glBindTexture(GL_TEXTURE_2D,texture-&gt;texture.name);<br><br>I'm desperate, i cannot go on with development. Please help me because the game is going great so far! :-)<br><br><br>PS: the app occupyies 200 mb of RAM. The problem happens on both simulator and real device<br><br>Thank you very much in advance!<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1143404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> crikey thats a lot of ram usage, what ipod/iphone is this aimed at <br><br></td></tr></table><br>
<a name="1143420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> that much memory usage is pretty drastic for iOS, sounds like something is getting forced out due to low memory... <br><br></td></tr></table><br>
<a name="1143455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thefoxsoft</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I feel stupid, i cannot believe i could not spot it before.<br>There was a bug in my code that caused the problem<br><br><div class="quote"> <br>    titleTexture-&gt;CreateTextTexture("hello", 256,32,0,"arial",24,1+2);<br> <br></div><br><br>instead of <br><div class="quote"> <br>    titleTexture = titleTexture-&gt;CreateTextTexture("hello", 256,32,0,"arial",24,1+2);<br> <br></div><br><br>Thanks a lot guys, I'm really sorry you have lost your time. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
