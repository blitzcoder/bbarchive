<!DOCTYPE html><html lang="en" ><head ><title >Point entity gimbal lock...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Point entity gimbal lock...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >Point entity gimbal lock...</a><br><br>
<a name="1082183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using Warners matrix-ified version of miniB3d, which seems better when it comes to rotating things, but it seems as if pointentity is still suffering from gimbal lock. Is there any way to fix this? Turnentity seems fine, so i'm guessing it's possible, right?<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1082203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you can replace it with AlignToVector?<br><pre class=code>
function pointentity2(source:Tentity, target:TEntity)
 dx = entityx(target,1)- entityx(source,1)
 dy = entityy(target,1)- entityy(source,1)
 dz = entityz(target,1)- entityz(source,1)
 aligntovector2 target, dx, dy, dz, 3, 1.0
end function
</pre> <br><br></td></tr></table><br>
<a name="1082249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fantastic! Thanks Warner, i'd not thought of doing that :)<br><br>Also, it's worth noting that because i'm trying to point the camera at the object, i had to use negative dx,dy and dz otherwise the camera would face outwards!<br><br>Now to work out how to make the players movements relate to the orientation of the camera...<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1082294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Normally, using:<br>TFormVector 0, 0, 1, Null, camera<br>TranslateEntity obj, Tformedx(), Tformedy(), Tformedz()<br>should do that. However, it also seems to be inverted.<br>Unf., I have no time to look into the problem. Could be due to that fact that camera's use an inverted matrix? <br><br></td></tr></table><br>
<a name="1082298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> In OpenGL the Z axis is flipped. <br><br></td></tr></table><br>
<a name="1082302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll post my code later. I got camera relative controls in already :) Tformvector is pretty cool!<br><br>I'm still having a little trouble getting my model to rotate to the direction i'm pressing on the keyboard/joystick. I'm guessing i need to work out how to rotate around a normal?!<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1082303"></a>

<a name="1082304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, well in the modded version, there is a function called MQ_Turn. It takes an axis and a degree. It is a method of TEntity.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1082310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, i'll take a look at MQ_Turn :)<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1082313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, i think MQ_Turn is exactly what i need! I hadn't noticed it before, i needed to refresh Blide's module database for the function to show in autocomplete. <br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
