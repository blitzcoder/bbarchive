<!DOCTYPE html><html lang="en" ><head ><title >Tilemap to mesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tilemap to mesh</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >Tilemap to mesh</a><br><br>
<a name="800820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br>I'm loading a simple 2D tilemap and uses different meshes as tiles, combining them into one big mesh using the addmesh command. Works just great!<br><br>The problem I have is that the map is really large. 256x88 tiles. Some optimizations have been made (don't place a tile in the middle of a group of similar tiles, unless it's a part of the ground) but everything is just too slow.<br>I tried to add a call to createoctree (going to need collision detection later anyway) but it never returns. When I say never I mean that I leave it running for a couple of minutes and then kills the app. I used 200,5 as the values but have also tried other bigger and smaller values with the same result (nothing happens at all).<br><br>So, what do I do now? Is there a bug in createoctree? Am I feeding it with a mesh that is too big? Have I misunderstood the concept of an octree? Should I leave createoctree running for 5-10 minutes? (Can I even require future players to accept a loading time that long?)<br><br>Thankful for any help! <br><br></td></tr></table><br>
<a name="800836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Octree creation should only take a few secs. Try 0,3. Does that work? Might be a bug.<br><br>As for your tile map, it sounds like you might have too many textures/surfaces. Try and pack your tile images into as few textures as possible (you will need to offset your tile mesh UVs as a result), then your mesh will only needs a few surfaces at most. <br><br></td></tr></table><br>
<a name="800858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> 0,3 did work, if I left it running for 5 minutes (debug build)<br><br>I think I might have an enormous amount of surfaces, if a surface is another word for triangle. <br>CountSurfaces() tells me that the map is made out of 9 surfaces, but I know it contains 22528 tiles and a total of about 200-270000 triangles. <br><br>If addmesh() reuses textures, or how things now work deep down in the source, I should only have about 10 or so. The textures all got a size between 32 and 128 in width and height. <br><br>Hmm. Surface = Texture? <br><br></td></tr></table><br>
<a name="800917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is the debug build. It will significantly slow down loops.<br><br>Try to define the functions that you know that work and that have loops as "function bla(...) nodebug" to prevent them from beeing killed by the debugger. <br><br></td></tr></table><br>
<a name="800946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The non-debug build was only a couple of seconds faster, createoctree still takes about 5 minutes to run. <br><br></td></tr></table><br>
<a name="801066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. Today the non-debug build creates an octree in 76 seconds. Odd, but I don't complain! :)<br><br>A one minute loading time is tolerable, I think. <br><br></td></tr></table><br>
<a name="801100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What are you using the octree for? Octrees (in MiniB3D) are only useful for collisions and picking.<br><br>9 surfaces are OK. AddMesh will combine surfaces (which share the same texture) when it can. It's a lot of tris though, which explains the CreateOctree time. <br><br></td></tr></table><br>
<a name="801149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm no expert at octrees, but I have a faint memory they was also used to speed up rendering. :)<br><br>If that turns out to be false, I will need to check for collisions later so it should still come in handy. <br><br></td></tr></table><br>
<a name="801158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you misunderstand the term Octree.<br>A Octree could be used for different things. It is nothing more than a tree with 8 nodes. You could use it for scenemanagement like it is done in my next release or you could speedup collisions like simon did. It always depends in what search criterias you have and what kind of input . Also at least and most important what you want to achieve.<br><br>In fact most time an octree is named by the context of speeding up rendering. But only because thats what most people want to know. Instead Octrees are used much more in 3D Engines than most people think.<br><br>I hope and think you will see the difference with my next release (hopefully) next week. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
