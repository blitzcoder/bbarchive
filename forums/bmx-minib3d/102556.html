<!DOCTYPE html><html lang="en" ><head ><title >Openb3d wrapper</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Openb3d wrapper</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >Openb3d wrapper</a><br><br>
<a name="1226948"></a>

<a name="1226949"></a>

<a name="1226951"></a>

<a name="1226952"></a>

<a name="1226953"></a>

<a name="1226954"></a>

<a name="1226957"></a>

<a name="1226958"></a>

<a name="1226959"></a>

<a name="1226960"></a>

<a name="1226962"></a>

<a name="1227112"></a>

<a name="1227113"></a>

<a name="1227114"></a>

<a name="1227115"></a>

<a name="1227265"></a>

<a name="1227266"></a>

<a name="1227267"></a>

<a name="1227268"></a>

<a name="1227269"></a>

<a name="1227398"></a>

<a name="1227609"></a>

<a name="1227610"></a>

<a name="1227615"></a>

<a name="1228612"></a>

<a name="1228613"></a>

<a name="1228614"></a>

<a name="1228622"></a>

<a name="1228623"></a>

<a name="1228624"></a>

<a name="1228625"></a>

<a name="1229350"></a>

<a name="1229356"></a>

<a name="1229363"></a>

<a name="1229364"></a>

<a name="1229365"></a>

<a name="1229635"></a>

<a name="1230287"></a>

<a name="1230288"></a>

<a name="1230683"></a>

<a name="1233322"></a>

<a name="1234035"></a>

<a name="1234043"></a>

<a name="1234044"></a>

<a name="1234045"></a>

<a name="1234046"></a>

<a name="1234047"></a>

<a name="1234048"></a>

<a name="1237364"></a>

<a name="1240232"></a>

<a name="1241325"></a>

<a name="1241513"></a>

<a name="1241579"></a>

<a name="1241580"></a>

<a name="1241734"></a>

<a name="1241735"></a>

<a name="1241736"></a>

<a name="1242147"></a>

<a name="1243030"></a>

<a name="1243561"></a>

<a name="1243570"></a>

<a name="1243571"></a>

<a name="1244012"></a>

<a name="1244013"></a>

<a name="1244014"></a>

<a name="1244805"></a>

<a name="1247188"></a>

<a name="1247283"></a>

<a name="1247538"></a>

<a name="1247555"></a>

<a name="1247556"></a>

<a name="1248377"></a>

<a name="1248378"></a>

<a name="1248379"></a>

<a name="1248380"></a>

<a name="1248381"></a>

<a name="1248383"></a>

<a name="1248714"></a>

<a name="1248715"></a>

<a name="1250608"></a>

<a name="1269919"></a>

<a name="1269920"></a>

<a name="1275238"></a>

<a name="1276583"></a>

<a name="1285935"></a>

<a name="1285936"></a>

<a name="1285937"></a>

<a name="1285939"></a>

<a name="1285941"></a>

<a name="1285942"></a>

<a name="1285944"></a>

<a name="1302236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This started off as a source wrapper for Openb3d. I posted it to the code archives but then moved it here because it was not PD code, Openb3d is LGPLv2 which forces you to LGPL your own code if importing the source (ie. static linking). To get around this restriction I made a library wrapper which loads functions from a dynamic library. EDIT: Now the license has been given a static linking exception so the source wrapper is back.<br><br>Download: the latest version of the wrapper with examples and my small fixes to the C++ source is available <a href="https://github.com/markcwm/openb3d.mod" target="_blank">HERE</a> courtesy of GitHub.<br>You can find the official Openb3d libraries and source <a href="http://sourceforge.net/projects/minib3d/files/" target="_blank">HERE</a>.<br><br>To install MinGW follow <a href="/posts.php?topic=105834" target="_blank">this guide</a>.<br><br>The original thread about Openb3d is <a href="/posts.php?topic=92800" target="_blank">here</a> and the Freebasic thread is <a href="http://www.freebasic.net/forum/viewtopic.php?t=15409" target="_blank">here</a>.<br>Other Openb3d wrapper threads: <a href="/posts.php?topic=103682" target="_blank">2nd</a>, <a href="/posts.php?topic=105082" target="_blank">3rd</a>.<br><br>C++ source: If you want to build the official source yourself on Windows you need GLee from here <a href="http://www.elf-stone.com/downloads/GLee/" target="_blank">http://www.elf-stone.com/downloads/GLee/</a> (I recommend 5.4 or 5.5). You'll need GLee.h in MinGW/include/GL and GLee.lib in MinGW/lib. If you're building my version of the source I already have a copy of GLee.h and GLee.c 5.4 in the src folder, so all you need to do is type "make" or "mingw32-make" in cmd. EDIT: the wrapper now imports from source and uses Glew, so this is not necessary.<br><br><div class="quote"> Updates:<br>- Converted source wrapper into library wrapper<br>- MacOS X supported<br>- 2d in 3d working with Max2d<br>- Resizeable canvas with Maxgui<br>- Docs made, online Blitz3d doc links<br>- Loading textures from models in subfolders<br>- Rendering 2d or 3d to texture<br>- Accessing bones or child entities<br>- Shader examples<br>- OOP variables for function types so syntax is like miniB3D<br>- Maps instead of linked lists for fast library object lookup<br>- Source wrapper version (since static linking exception)<br>- Using Glew instead of Glee <br></div> <br><br></td></tr></table><br>
<a name="1226950"></a>

<a name="1226961"></a>

<a name="1227611"></a>

<a name="1229366"></a>

<a name="1229367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is some shadow test code. <br><pre class=code>' stencil_shadows.bmx
' code by KronosUK

Import "openb3dlib.bmx"

Graphics3D 800,600,0,2

Local light = CreateLight(2)
RotateEntity light,45,0,0
PositionEntity light,0,25,0

Local camera = CreateCamera()
PositionEntity camera,-20,10,0

Local plane = CreatePlane(16)
TranslateEntity plane,0,-1,0
PointEntity camera,plane

For i = 1 To 100
	Local cube = CreateCube()
	
	PositionEntity cube,Rnd(100),0,Rnd(100)
	Local shadow = CreateShadow(cube)
	
	Local cylinder = CreateCylinder()
	
	PositionEntity cylinder,Rnd(100),0,Rnd(100)
	Local shadow1 = CreateShadow(cylinder)
Next

wiretoggle=-1
While Not KeyHit(key_escape) And Not AppTerminate()
	
	If KeyHit(key_space) Then wiretoggle=-wiretoggle
	
	If KeyDown(KEY_UP) Then MoveEntity camera,0,0,1
	If KeyDown(KEY_DOWN) Then MoveEntity camera,0,0,-1
	If KeyDown(KEY_LEFT) Then MoveEntity camera,-1,0,0
	If KeyDown(KEY_RIGHT) Then MoveEntity camera,1,0,0
	
	If wiretoggle=1 Then Wireframe True Else Wireframe False
	
	UpdateWorld()
	RenderWorld()
	Flip()
Wend
</pre> <br><br></td></tr></table><br>
<a name="1227111"></a>

<a name="1228616"></a>

<a name="1228626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got it building on Mac now. You have to edit the c++ source files to use GLee. I also got it to use GLee on ubuntu but it only works with GLee 5.4 or higher. <br><br>Here is how to get it working on Mac.<br><br>Open in an editor the files: mesh.cpp, shadow.cpp, stencil.cpp, surface.cpp, terrain.cpp, voxel.cpp and replace this:<br><pre class=code>#ifdef WIN32
#include &lt;gl\GLee.h&gt;
#endif</pre><br>With this:<br><pre class=code>#ifdef WIN32
#include "GLee.h"
#endif
#ifdef __APPLE__
#include "GLee.h"
#endif</pre><br>This means you don't need a copy of GLee.h in MinGW/include/GL now, just one in src along with GLee.c which is less confusing.<br><br>Then in material.cpp and texture.cpp you need the same as above but also glu.h is used and Mac stores system headers in an "OpenGL" folder, so replace this:<br><pre class=code>#ifdef linux
#define GL_GLEXT_PROTOTYPES
#include &lt;GL/gl.h&gt;
#include &lt;GL/glext.h&gt;
#endif
#ifdef WIN32
#include &lt;gl\GLee.h&gt;
#endif

#include &lt;GL/glu.h&gt;</pre><br>With this:<br><pre class=code>#ifdef linux
#define GL_GLEXT_PROTOTYPES
#include &lt;GL/gl.h&gt;
#include &lt;GL/glext.h&gt;
#include &lt;GL/glu.h&gt;
#endif
#ifdef WIN32
#include "GLee.h"
#include &lt;GL\glu.h&gt;
#endif
#ifdef __APPLE__
#include "GLee.h"
#include &lt;OpenGL/glu.h&gt;
#endif</pre><br>Finally, in project.h there's an include for gl.h, so replace this line:<br><pre class=code>#include &lt;GL/gl.h&gt;</pre><br>With this:<br><pre class=code>#ifdef linux
#include &lt;GL/gl.h&gt;
#endif
#ifdef WIN32
#include &lt;GL\gl.h&gt;
#endif
#ifdef __APPLE__
#include &lt;OpenGL/gl.h&gt;
#endif</pre><br>And it should now build on Mac. Yay! <br><br></td></tr></table><br>
<a name="1227288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks<br>When I have a little time I will download/change everything!<br>But there is a ready-to-extract mod of this? Yea... I know, I'm lazy... <br><br></td></tr></table><br>
<a name="1227323"></a>

<a name="1227399"></a>

<a name="1227614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok lazy man, or busy man? You can download the library wrapper <a href="/logs/userlog.php?user=8652&amp;log=1737" target="_blank">here</a><br><br>It doesn't have a Mac library file yet though, I have to edit the makefile. I think to avoid license issues I will need to redistribute my version of the c++ source in a separate zip to the library wrapper. I'm not zipping up the source wrapper as I don't think anyone will want that, since it's GPL'd. <br><br></td></tr></table><br>
<a name="1227337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the Mod folder Munch - there is a problem with that test file that I have had for a while and I have been unable to debug it.<br><br>When I zoom out with the camera - I get some weird shadow issues:<br><br><img src="http://i.imgur.com/pdpt0aE.png"> <br><br></td></tr></table><br>
<a name="1227338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Both... busy and when I have a little time... Too lazy!<br>Thank you very much! <br><br></td></tr></table><br>
<a name="1227369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Chapman. Yes, I've noticed that but I've no idea what's causing it. <br><br></td></tr></table><br>
<a name="1227397"></a>

<a name="1227401"></a>

<a name="1227402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found the cause. It's from CreateShadow argument 2 Static:String should be a Byte Ptr. Same with all String declarations in the wrappers, they need to be Byte Ptr.<br><br>Edit: Well, that isn't quite right. Static should be an Int. It does seem there's a bug when it's set to true.<br>See post #18 here <a href="http://www.blitzbasic.com/Community/posts.php?topic=92800" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=92800</a> <br><br></td></tr></table><br>
<a name="1227612"></a>

<a name="1227613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found that Openb3d only loads textures in the same folder as the exe but you can fix this by editing the c++ source. The problem was mentioned <a href="/posts.php?topic=92800" target="_blank">here</a> at post #12.<br><br>In material.cpp just comment out the Strip() command.<br><pre class=code>Material* Material::LoadMaterial(string filename,int flags, int frame_width,int frame_height,int first_frame,int frame_count){

	//filename=Strip(filename); // get rid of path info</pre><br>In texture.cpp<br><pre class=code>Texture* Texture::LoadTexture(string filename,int flags){
	if (flags&amp;128) {
		//filename=Strip(filename); // get rid of path info</pre><br>And again in texture.cpp<br><pre class=code>Texture* Texture::LoadAnimTexture(string filename,int flags, int frame_width,int frame_height,int first_frame,int frame_count){

	//filename=Strip(filename); // get rid of path info
</pre> <br><br></td></tr></table><br>
<a name="1227650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good work on loadtexture. That used to bug me as it interferred with  correct loading of ltextures on models. <br><br></td></tr></table><br>
<a name="1228059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just experimented with Angros OpenB3d mod (using one of Munch's link above - see the first post of this thread)<br><br>Everything seems to work (just basic example). I have not tested loaded mesh &amp; co still.<br><br>Of course there are many 'new' commands I would like to understand... but documentation is... lacking!<br><br>For example:<br>I found (on freebasic forum) some example (I converted to Bmax) about Octree... but nothing is really clear about how using it!<br>Same for Shader or Stencil.<br><br>Are somewhere tutorials or documentation about this engine (excluding of course the 'Blitz3d' basic commands)?<br><br>To be honest it seems a very completed 3d-engine (a sort of Blitz3d extended): it lights me up again on 3d programming :D <br><br></td></tr></table><br>
<a name="1228080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I would like to provide examples for the extra functions at some point. For now I'm just working on basic functionality, like building a dylib for Mac or getting 2d in 3d working. <br><br></td></tr></table><br>
<a name="1228243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> About Octrees: you create it with CreateOctree (width, height, depth), then you can add blocks to it: a "block" can be a piece of wall, a tile, a pillar...<br>You only need one mesh per type: a single mesh can be used to build many blocks; yous place them using OctreeBlock Octree, mesh, level, x,y,z.<br>Higher level means that the block will be smaller.<br><br>Think about 2d games; you can use tilemaps: you have a limited set of tiles, and place them in a grid, to build a huge world (in old computers, like commodore 64, redefined characters were used to build the game scenario); with octrees, you can do the same in 3d, and build complex worlds (expecially dungeons or buildings... as far as I remember, first Tomb Raider games used a similar approach, too, and also the web plugin 3dml did)<br><br><br>About stencils: they are used to define where the next RenderWorld will update the screen: if you define a stencil mesh, the mesh will become invisible, but when you use the stencil, the next renderworld will render an image only in place where the invisible stencil mesh was (a stencil can also have more than one meshes)... or everywhere but where the mesh was... or only in intersection between stencil mesh and other meshes (useful for portals, spot light and so on).<br><br><br>About LoadTexture: by removing the "strip" command you can load textures in other directories, but be careful: some meshes contains full path for texture names, and when you load the mesh, under windows textures are loaded, but under linux the path is incorrect since it contains "\" instead of "/".<br><br><br>About the mac port... maybe I'll include your patch in next version. I haven't a mac, so I cannot produce a compiled version for it, but if you want to publish your version I can put a link to your site, or include it on sourceforge project.<br><br>Nice work! <br><br></td></tr></table><br>
<a name="1228269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the quick explanation!<br>I will test with octree 'building' something! <br><br></td></tr></table><br>
<a name="1228320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi angros. <br><br>Yes, if/when I get the mac port done then feel free to add it to sourceforge. <br><br>Thanks for the tips. <br><br></td></tr></table><br>
<a name="1228618"></a>

<a name="1228619"></a>

<a name="1228620"></a>

<a name="1228621"></a>

<a name="1228627"></a>

<a name="1228628"></a>

<a name="1228671"></a>

<a name="1228672"></a>

<a name="1228674"></a>

<a name="1228675"></a>

<a name="1228676"></a>

<a name="1228677"></a>

<a name="1229221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, it works on Mac now. I got stuck because I removed the alpha and stencil buffer flags from graphics3d and then didn't realize there were no shadows because of that. Doh!<br><br>So I have uploaded the module with the dylib (and other 2 libraries) and the source as 0.71 (see post#1). <br><br>I updated the edits to the cpp files in post#3 of this thread and I'll now mention about the makefile.<br><br>I added a CFLAGS variable to make it easier to maintain the gcc lines and removed CCMPILER as it wasn't used. CC is still there but not really needed now. I added glee.o and removed -lGLee from the Windows linking line as there is no library built for Mac by GLee (that I could find) and it's not clear where to put shared libraries on Mac either, so the result is that GLee is now required in src on Windows and Linux. It just made it simple for me. I hope you agree. I also added a make clean. And the -m32 switch is used instead of -arch i386 as that gave an error on Windows. It's all been tested and seems to work fine. <br><br></td></tr></table><br>
<a name="1229222"></a>

<a name="1229223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I have an update coming soon, just have to get maxgui working in windows. I now have 2d in 3d with max2d working. Yay! Also now the makefile has a make glee option to speed up compile times by compiling it separately. So you just need to put GLee.h and GLee.c in src then make GLee.o and last make the lib. <br><br></td></tr></table><br>
<a name="1229227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Uncle</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent new.  Looking forward to seeing Max2D working with OpenB3D. <br><br></td></tr></table><br>
<a name="1229355"></a>

<a name="1229358"></a>

<a name="1229359"></a>

<a name="1229360"></a>

<a name="1229368"></a>

<a name="1229369"></a>

<a name="1234094"></a>

<a name="1234097"></a>

<a name="1237368"></a>

<a name="1237369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay. New zips up, see my worklog.<br><br>There was a bug with fog which appeared with max2d, the solution is to edit camera.cpp so there are no conditions for fog to switch on/off.<br><pre class=code>	if(fog_mode&gt;0){

		//if(fog!=true){
			glEnable(GL_FOG); // enable if disabled
			if(fog==-1) glFogf(GL_FOG_MODE,GL_LINEAR); // once only
			fog=true;
			Global::fog_enabled=true; // used in mesh render
		//}
	
		...
		
	}else{
		
		//if(fog!=false){
			glDisable(GL_FOG);
			fog=false;
			Global::fog_enabled=false; // used in mesh render
		//}
		
	}</pre><br><br>There was also a need to update the global width and height values when resizing a window with maxgui. I failed to load them from the library so I added to functions.cpp.<br><pre class=code>/*
*/
void GraphicsResize(int width,int height){
	Global::width=width;
	Global::height=height;
}</pre><br>And to functions.h.<br><pre class=code>/*
*/
void GraphicsResize(int width,int height);</pre><br>The makefile changes look like this. GLee.o is not cleaned to speed up compile times, so it needs to be deleted manually.<br><pre class=code>
CC = g++
CFLAGS = -Wall -O3 -m32

OBJECTS = ....

main:$(OBJECTS) 
ifeq ($(shell uname), Linux)
	$(CC) $(CFLAGS) -shared -o libOpenB3D.so $(OBJECTS)  -lGL -lGLU
endif
ifeq ($(shell uname), Darwin)
	$(CC) $(CFLAGS) -shared -o libopenb3d.dylib $(OBJECTS)  GLee.o -framework CoreFoundation -framework OpenGL
endif
ifeq "$(OS)" "Windows_NT"
	$(CC) $(CFLAGS) -shared -o openb3d.dll $(OBJECTS)  GLee.o -lopengl32 -lglu32 -lGDI32
endif


....


glee: GLee.o
	gcc $(CFLAGS) -c GLee.c -o GLee.o


clean:
ifeq "$(OS)" "Windows_NT"
	del $(OBJECTS) openb3d.dll libopenb3d.dylib libOpenB3D.so
else
	rm -rf $(OBJECTS) openb3d.dll libopenb3d.dylib libOpenB3D.so
endif
</pre><br>In Windows maxgui needs SetGraphicsDriver called before CreateCanvas or you get a blank screen. Edit: this is because the default driver in Windows in DX. I gave Graphics3D an extra argument 'usecanvas' instead of a new function as the code was nearly identical. <br><br>I also added some docs, it's just links to online Blitz3D docs or else undocumented if extra.<br><br>In Mac and Windows if using stencil shadows I needed to set the stencil buffer, on linux it seemed to work with other buffers. So I changed the flags argument in Graphics3D so that it uses everything but the accum buffer by default which is -1. I'm not sure whether I should add the accum buffer as well, I don't think it would do any harm. <br><br></td></tr></table><br>
<a name="1229435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, is this going to be faster than miniB3D? <br><br></td></tr></table><br>
<a name="1229450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know, just because it's in c++ I doubt will make much difference. <br><br></td></tr></table><br>
<a name="1229539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Brucey<br><br>Mingw C++ compiler should be faster, since it has a lot of speed optimizations (I don't know, anyway, if Blitzmax optimize the code, too); anyway, OpenB3D uses quaternion-based entities (like Blitz3D, or warner's engine), that are heavier to compute than Euler based rotations (used in MiniB3D). So, it's hard to compare speed of MiniB3D and OpenB3D: they have different features. <br><br></td></tr></table><br>
<a name="1229634"></a>

<a name="1229649"></a>

<a name="1229650"></a>

<a name="1229769"></a>

<a name="1229770"></a>

<a name="1229771"></a>

<a name="1229772"></a>

<a name="1229773"></a>

<a name="1229774"></a>

<a name="1229775"></a>

<a name="1229776"></a>

<a name="1229777"></a>

<a name="1229778"></a>

<a name="1229779"></a>

<a name="1229784"></a>

<a name="1229785"></a>

<a name="1230053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another update, new zips are up.<br><br>This is a fix for the texture loading bug in LoadMesh and LoadAnimMesh not loading textures unless they are all in the same folder as the exe. It assumes the changes in post#10 of this thread about removing Strip() from LoadTexture, etc. So the limitation is textures will load as long as they are in the same folder as the model using them. The function NewFilePath takes the path of the model and uses it for the path of it's texture files.<br><br>In texture.cpp include fstream.<br><pre class=code>#include &lt;string.h&gt;
#include &lt;fstream&gt;</pre><br>And the two new commands. <br>Edit: updated to work with 3ds files. NewFilePath() also trys to find the filename in lowercase if it doesn't work as-is. And I tried x files but I couldn't get anything to load.<br><pre class=code>// strips file info from filepath
string Texture::StripFile(string filename){
	string stripped_filename=filename;
	string::size_type idx;

	idx=filename.find('/');
	if(idx!=string::npos){
		stripped_filename=filename.substr(0,filename.rfind('/'));
	}

	idx=filename.find("\\");
	if(idx!=string::npos){
		stripped_filename=filename.substr(0,filename.rfind("\\"));
	}
	
	return stripped_filename;
}

// makes a new path for a filename from a given filepath
string Texture::NewFilePath(string filepath, string filename){
	string fpath=StripFile(filepath);	
	string fname=Strip(filename);
	ifstream ifs;
	
	ifs.open((fpath+"/"+fname).c_str());
	if(ifs.is_open()){
		ifs.close();
		return fpath+"/"+fname; // Unix
	}
	ifs.open((fpath+"\\"+fname).c_str());
	if(ifs.is_open()){
		ifs.close();
		return fpath+"\\"+fname; // Windows
	}
	
	for(int i=0; fname[i]; i++){ // try filename all lowercase
		fname[i] = tolower(fname[i]);
	}
	ifs.open((fpath+"/"+fname).c_str());
	if(ifs.is_open()){
		ifs.close();
		return fpath+"/"+fname; // unix
	}
	ifs.open((fpath+"\\"+fname).c_str());
	if(ifs.is_open()){
		ifs.close();
		return fpath+"\\"+fname; // windows
	}
	
	cout &lt;&lt; "Error: Can't Find Resource File '"+filename+"'" &lt;&lt; endl;
	return filename;
}</pre><br>And in texture.h.<br><pre class=code>	static string StripFile(string filename);
	static string NewFilePath(string filepath, string filename);</pre><br>And then implemented in model.cpp.<br><pre class=code>				te_file=Texture::NewFilePath(f_name,te_file);				
				Texture* new_tex=Texture::LoadTexture(te_file,te_flags);</pre><br>Edit: and in 3ds.cpp.<br><pre class=code>void LoadMap(string Filepath){
...
  //If Pixmap &lt;&gt; 0 Then
  Filename = Texture::NewFilePath(Filepath,Filename);
  texture = Texture::LoadTexture(Filename,4);</pre><br>And in Load3ds().<br><pre class=code>    case M3D_3DS_MAPFILENAME:
      LoadMap(URL);</pre><br>Also, I have more examples from minib3d, anim.bmx tests LoadAnimMesh and balls_collision.bmx tests LoadMesh (for b3d). Edit: and MeshesIntersect.bmx tests LoadMesh for 3ds.<br><br>The other thing I did was to invert CameraPick's y argument by default so it's the same as minib3d, see camerapick.bmx for the example.<br><pre class=code>Function CameraPick:Int( cam:Int, x:Float, y:Float )
	Return Int( CameraPick_( Byte Ptr(cam), x, GraphicsHeight()-y ) )
End Function</pre> <br><br></td></tr></table><br>
<a name="1229759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Munch, was your post (post #9) the solution to the shadow issue or should I ignore it? <br><br></td></tr></table><br>
<a name="1229764"></a>

<a name="1229765"></a>

<a name="1229766"></a>

<a name="1229767"></a>

<a name="1229768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, yes it was. You need to use CreateShadow(ent) or CreateShadow(ent,False) because the 2nd parameter is for static rendering and should only be set to True if you don't intend to move things. Static shadows are only rendered the first time RenderWorld is called.<br><br>I'm not sure what's going on with static shadows but it does look like a bug. <br><br></td></tr></table><br>
<a name="1229834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yay! I just tried it out - it's pretty awesome! <br><br></td></tr></table><br>
<a name="1229980"></a>

<a name="1230058"></a>

<a name="1230681"></a>

<a name="1231610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I've played around with fixing the static shadows bug/s and I did find a workaround but it doesn't matter because static shadows were actually no faster than realtime shadows. The real limit seems to be how many tris are being rendered by the camera. Edit: I would like to point out this is not a 'solution' as the shadows are not really static, it was just a test to see if this way was any faster.<br><br>Anyway, my workaround was just to add a line to shadow.cpp to reset the flag so I could recreate static shadows.<br><pre class=code>void ShadowObject::Init(){
	VCreated=false;</pre><br>And then I just freed/recreated the static shadows about every 200 ms to cull/clip the shadow objects. Any less than that and it was slower than realtime shadows and any more and the shadow objects might sneak into view.<br><br>If anyone wants to try the code here it is.<br><pre class=code>' static_shadows.bmx
' based on code by KronosUK

Import "../openb3dlib.bmx"

Graphics3D 800,600,0,2

Local light = CreateLight(2)
RotateEntity light,45,0,0
PositionEntity light,-50,25,-50

Local camera = CreateCamera()
PositionEntity camera,-75,45,0

Local plane = CreatePlane(16)
TranslateEntity plane,0,-1,0
PointEntity camera,plane

Global cube%[500]
Global cylinder%[500]
Global shadow%[500]
Global shadow1%[500]
Global nshadows=250
Global static=1

For i = 1 To nshadows
	cube[i] = CreateCube()
	PositionEntity cube[i],Rnd(-nshadows,nshadows),0,Rnd(-nshadows,nshadows)

	cylinder[i] = CreateCylinder()
	PositionEntity cylinder[i],Rnd(-nshadows,nshadows),0,Rnd(-nshadows,nshadows)
Next
CreateStaticShadows(static)

' used by fps code
Local old_ms=MilliSecs()
Local renders=0
Local fps=0
Local sh_ms=MilliSecs()

wiretoggle=-1
While Not KeyHit(key_escape) And Not AppTerminate()
	
	If KeyHit(key_space) Then wiretoggle=-wiretoggle
	
	If KeyDown(KEY_UP) Then MoveEntity camera,0,0,1
	If KeyDown(KEY_DOWN) Then MoveEntity camera,0,0,-1
	If KeyDown(KEY_LEFT) Then MoveEntity camera,-1,0,0
	If KeyDown(KEY_RIGHT) Then MoveEntity camera,1,0,0
	
	If wiretoggle=1 Then Wireframe True Else Wireframe False
	
	'UpdateWorld()
	RenderWorld()
	
	' calculate fps
	renders=renders+1
	If MilliSecs()-old_ms&gt;=1000
		old_ms=MilliSecs()
		fps=renders
		renders=0
	EndIf
	
	If static And MilliSecs()-sh_ms&gt;=200
		sh_ms=MilliSecs()
		FreeStaticShadows()
		CreateStaticShadows(1)
	EndIf
	
	Text 0,0,"FPS: "+fps
	Text 0,20,"x="+EntityX(camera)+"y="+EntityY(camera)+"z="+EntityZ(camera)
	
	Flip()
Wend

Function CreateStaticShadows(static)
	For Local i = 1 To nshadows
		shadow[i] = CreateShadow(cube[i],static)
		shadow1[i] = CreateShadow(cylinder[i],static)
	Next
End Function

Function FreeStaticShadows()
	For Local i = 1 To nshadows	
		FreeShadow(shadow[i])
		FreeShadow(shadow1[i])
	Next
End Function
</pre> <br><br></td></tr></table><br>
<a name="1230674"></a>

<a name="1230675"></a>

<a name="1230676"></a>

<a name="1230677"></a>

<a name="1230678"></a>

<a name="1230679"></a>

<a name="1230680"></a>

<a name="1230682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I have new examples up taken from minib3d (hope this is ok with simonh) tex_render.bmx uses CameraToTex and cubemap.bmx also uses CameraToTex. Unfortunately though, CameraToTex didn't work for me in Windows (must be a bug) and BackBufferToTex didn't work at all whatever I tried. The cubemap demo was 15fps in Linux so I added a little fudge to render once every 3 frames which put it up to 30fps. Surprisingly, on Mac it was 60fps with or without the fudge.<br><br>Then CreateTexture.bmx is a simple example of using GrabPixmap and BufferToTex to render 2d to texture.<br><br>Then bones.bmx shows how to access child entities and it uses two functions converted from minib3d, CountAllChildren and GetChildFromAll.<br><br>Then some little changes to the wrapper...<br><br>I inverted functions with pitch values so it works like minib3d. These were RotateMesh, EntityPitch, RotateEntity and TurnEntity. There may be more to do like DeltaPitch and VectorPitch.<br><br>I removed the Static:Int argument for FreeShadow, added the o:Int=1 argument to StencilMode and added the ny:Float argument to VertexNormal. Checked all arguments and they looked fine.<br><br>I changed the CreateTexture default argument to flags:Int=9. 8 is a mipmapped flag for distance rendering.<br><br>I changed UseSurface surf:Int argument and GetBrushTexture brush:Int argument to be casted to Byte Ptr. I must have missed those. <br><br></td></tr></table><br>
<a name="1230706"></a>

<a name="1230707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> By inverting the pitch OpenB3D does not work like minib3d, but more like Blitz3d. Try something like:<br><br><pre class=code>TurnEntity entity,90,0,0
TurnEntity entity,0,90,0</pre><br><br>Both in OpenB3D and minib3d... you will see the difference. Basically, in minib3d when pitch is close to 90 (or -90) yaw and roll will act in the same way (this is called gimbal lock, and may be a serious issue if you are trying to build i.e. a flight simulator); in OpenB3D yaw will still work in the right way. In fact, OpenB3D works like the fork of minib3d made by warner (http://www.blitzbasic.com/codearcs/codearcs.php?code=2498 , it use the same code), and, as far as I recall, the pitch was inverted in it.<br><br>Anyway, when porting code from minib3d, even if you invert the pitch, remember that it will work in a different way. <br><br></td></tr></table><br>
<a name="1230814"></a>

<a name="1230823"></a>

<a name="1230824"></a>

<a name="1230825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was really trying to mimic Blitz3d not Minib3d. <br><br>I just checked in Blitz3d and I do need to invert pitch in those 4 functions to exactly mimic B3d's system, which I believe uses quaternions.<br><br>Minib3d uses eulers but there is a quaternion workaround <a href="/posts.php?topic=66809" target="_blank">here</a>.<br><br>I found a DeltaYaw example <a href="/b3ddocs/command.php?name=DeltaYaw" target="_blank">here</a> and made a DeltaPitch version and found I need to invert that too. There is an issue with that example where the pointing object can spin round like crazy but it can be solved by zeroing the other axis, so you're limited to using either DeltaPitch or DeltaYaw per entity.<br><br>I also needed to invert VectorPitch. <br><br></td></tr></table><br>
<a name="1233622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well I have new examples up taken from minib3d (hope this is ok with simonh) tex_render.bmx uses CameraToTex and cubemap.bmx also uses CameraToTex. Unfortunately though, CameraToTex didn't work for me in Windows (must be a bug) and BackBufferToTex didn't work at all whatever I tried. <br></div><br>BackBufferToTex() is working but the CameraViewport x,y counts from the bottom-left corner of the screen.(Freebasic+Openb3d) <br><br></td></tr></table><br>
<a name="1233796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks so much petimat! I was really stumped on that one.<br><br>I have tested and BackBufferToTex works on Windows too. Yay! It was also nearly twice as fast as CameraToTex in Ubuntu (15 v 25 fps in cubemap.bmx) and that's as fast as Minib3d.<br><br>I have a new zip up which just replaces CameraToTex with BackBufferToTex in tex_render.bmx and cubemap.bmx. <br><br></td></tr></table><br>
<a name="1233823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> CameraToTex works also but only when the  flag is set to 128 (Cubic environment map) in CreateTexture.It doesn't work in any other case. <br><br></td></tr></table><br>
<a name="1233925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> In Windows 7 CameraToTex didn't work even with the 128 cubemap flag in CreateTexture. I get a black teapot in cubemap.bmx. CameraToTex uses some kind of framebuffer object implementation, so at a guess that may not work on some gfx cards or drivers (I have Intel GM965 Express). <br><br></td></tr></table><br>
<a name="1233955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Munch!<br>I  wander if you built your own library.<br>Why don't you just use the one that angros47 builds for freebasic?<br>He makes some progress on it so you just need to wrap his new functions then.<br><br>Anyway,there are functions like BufferToTex and TexToBuffer.Don't you know if we can get the pointer to any buffer somehow?(what these function needs as an argument) <br><br></td></tr></table><br>
<a name="1233958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a shader example for your collection:<br>Use any diffuse and normal texture.(I used <a href="http://www.rendertextures.com/pavers-22/" target="_blank">these</a>)<br>The bump.vert and bump.frag shader comes from Klepto2's minib3d extension.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Import "../openb3dlib.bmx"

Strict

Graphics3D 800,600,0,2


Local camera = CreateCamera()
CameraClsColor (camera,70,180,235)

Local light=CreateLight()

Local cube=CreateCube()
PositionEntity (cube,0,0,3)
EntityShininess (cube , 10) 

Local shad=LoadShader("","media/shaders/bump.vert","media/shaders/bump.frag")

shadertexture (shad, LoadTexture("media/shaders/09_DIFFUSE.jpg"), "colorMap",0)
shadertexture (shad, LoadTexture("media/shaders/09_NORMAL.jpg"), "normalMap",1)

SetInteger (shad,"colorMap",0)
SetInteger (shad,"normalMap",1)
SetFloat3 (shad,"vTangent",1.0,0.0,0.0)
SetFloat (shad,"invRadius",0.001)

ShadeEntity (cube,shad)


While Not KeyDown(KEY_ESCAPE)		

	RotateMesh (cube,0,.5,-.1)

	RenderWorld

	Flip

Wend
End</textarea> <br><br></td></tr></table><br>
<a name="1234017"></a>

<a name="1234018"></a>

<a name="1234099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I have several small changes to the c++ source which are not in the official version, so I need to reapply those to the 0.8 source soon. They should all be posted in this thread.<br><br>I tried the 0.8 dll in Windows and cubemapping still doesn't work (if that's what you meant).<br><br>If you look at my example CreateTexture.bmx it shows you how to use BufferToTex with GrabPixmap, etc. I haven't an example of TexToBuffer as I don't think it has much use.<br><br>Thanks for the really nice shader example. I wasn't sure how to do shaders in openb3d as the commands in klepto's minib3d are quite different. So this helps me a lot. :) <br><br></td></tr></table><br>
<a name="1234039"></a>

<a name="1234041"></a>

<a name="1234042"></a>

<a name="1234049"></a>

<a name="1234098"></a>

<a name="1269796"></a>

<a name="1269798"></a>

<a name="1275246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I have updated the wrapper to the 0.8 source and the new zips are up.<br><br>Here is a summary of my edits. It just lists the first line or most significant line. This is really just a memo for me.<br><pre class=code>camera.cpp - fog with max2d
 //if(fog!=false){
material.cpp - GLee on Mac
 #ifdef WIN32
mesh.cpp - GLee on Mac
 #ifdef WIN32
project.h - GLee on Mac
 #ifdef linux
shadow.cpp - GLee on Mac
 #ifdef WIN32
stencil.cpp - GLee on Mac
 #ifdef WIN32
surface.cpp - GLee on Mac
 #ifdef WIN32
terrain.cpp - GLee on Mac
 #ifdef WIN32
texture.cpp - GLee on Mac
 #ifdef WIN32
voxel.cpp - GLee on Mac
 #ifdef WIN32
geosphere.cpp - GLee on Mac
 #ifdef WIN32
isosurface.cpp - GLee on Mac
#ifdef linux
particle.cpp - GLee on Mac
#ifdef linux
voxterrain.cpp - GLee on Mac
#ifdef linux</pre><br>I also needed to add the includes for GLee in geosphere.cpp to get it to build on Mac.<br><pre class=code>#ifdef WIN32
#include "GLee.h"
#endif
#ifdef __APPLE__
#include "GLee.h"
#endif</pre> <br><br></td></tr></table><br>
<a name="1234155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Keep up the good work munch (and Angros47 too),'cause I want to use openB3D with Blitzmax later on :) .(as soon as I can purchase BlitzMax full). As an indie game developer (what I am not but it sounds soo goood :D ) all I need is a 'Blitz3D' with some shadows an simple shaders.<br>About BufferToTex and TexToBuffer,I'm not sure but I think that would be the key to the post process effects via shaders.We just need the pointers to the backbuffer (framebuffer?),stencilbuffer,depthbuffer.With stencil buffer one could even use blurred shadows.(whee!).But these things are up on Angros47. <br><br></td></tr></table><br>
<a name="1234159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's a bit more complex: buffers are stored in video memory, not in the RAM, so you can't access them by a simple pointer. That's why there aren't commands like SetBuffer, TextureBuffer and so on: transferring data between video memory and ram can be time-consuming. A texture can be copied from ram to video memory and vice-versa (it's slow, but usually you need to do that only once, so who cares?), and commands like CameraToTex transfer data from a portion of video memory to another, so are fast enough, but messing with buffers is not recommended.<br><br>To gain the effects you want, maybe using accumulation buffer could do the trick : currently it's not implemented in OpenB3D, and in MiniB3D it' just used as an antialias, but it should be easy to use (the command is glAccum): I didn't even tried to include something in OpenB3D, because it would have ended in just "wrapping" it with an alias command. <br><br></td></tr></table><br>
<a name="1234447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> angros47:<br>Thanks,that shad some light on the thing.So it should be implemented in the camera.render() function of the source code somehow.That would be a nifty improvement.Anyway I'm happy with this command set openb3d's already got,although I haven't tested all the commands yet. CameraToTex doesn't fully work for me :( .<br>It's good to see you here answering my stupid questions. <br><br></td></tr></table><br>
<a name="1234482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a demo of blurred shadows in FreeBasic:<br><br><a href="http://freebasic.net/forum/viewtopic.php?f=7&amp;t=22745" target="_blank">http://freebasic.net/forum/viewtopic.php?f=7&amp;t=22745</a><br><br>There is no need to implement it in camera.render(), you can build your own function: if you move entities, instead of lights, you can get a motion blur effect; instead, if you move the camera (but you keep it pointed to the same object by using PointEntity), you should be able to achieve a depth-of-field effect (the camera will have a "focus range": objects too close, or too distant, will be blurred) <br><br></td></tr></table><br>
<a name="1234533"></a>

<a name="1234534"></a>

<a name="1234535"></a>

<a name="1234536"></a>

<a name="1234537"></a>

<a name="1234538"></a>

<a name="1234539"></a>

<a name="1234540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> I converted the blur shadow demo to Max. You also need to set the accum flag in openb3dlib.bmx as I haven't set it to be enabled by default but I'll change that.<br><br>So in openb3dlib.bmx add "|GRAPHICS_ACCUMBUFFER".<br><pre class=code>Function Graphics3D( width%, height%, depth%=0, mode%=0, rate%=60, flags%=-1, usecanvas%=False )

	OpenLibrary()
	
	Select flags ' buffer values: back=2, alpha=4, depth=8, stencil=16, accum=32
		Case -1 flags=GRAPHICS_BACKBUFFER|GRAPHICS_ALPHABUFFER|GRAPHICS_DEPTHBUFFER|GRAPHICS_STENCILBUFFER|GRAPHICS_ACCUMBUFFER</pre><br>And the demo.<br><pre class=code>' blur_shadow.bmx
' code by angros47

Import "../openb3dlib.bmx"

Strict
 
Graphics3D 640,480,0,2


Local camera=CreateCamera(0)
Local cube=CreateCube()
EntityFX cube,1

MoveEntity cube,0,0,5

Local plane=CreatePlane()
'Local plane=CreateCube() ; ScaleEntity plane, 100,.1,100
MoveEntity plane,0,-1.4,15

Local light=CreateLight()
PositionEntity light,5,5,5
PointEntity light,cube
MoveEntity camera,0,0,-5

CreateShadow cube


Repeat

	If KeyDown(key_up) Then TurnEntity cube,1,0,0,0
	If KeyDown(key_down) Then TurnEntity cube,-1,0,0,0
	If KeyDown(key_left) Then TurnEntity cube,0,-1,0,0
	If KeyDown(key_right) Then TurnEntity cube,0,1,0,0
	
	UpdateWorld 1

	glClear(GL_ACCUM_BUFFER_BIT)

	For Local i:Int=1 To 20
		PositionEntity light,5+Rnd()*1-.5,5+Rnd()*1-.5,5+Rnd()*1-.5
		RenderWorld
		glAccum(GL_ACCUM, .05)
	Next

	glAccum(GL_RETURN, 1.0)
	Flip
	
Until KeyDown(key_escape)
</pre><br>Of course it's far to slow for realtime use but it might be useful to use them with static shadows if they worked properly. <br><br></td></tr></table><br>
<a name="1234553"></a>

<a name="1234554"></a>

<a name="1234556"></a>

<a name="1234639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> I converted the geosphere demo. You need the heightmap as "srtm_ramp2.world.5400x2700.jpg" and texture as "MapOfEarth.jpg" found <a href="http://www.freebasic.net/forum/viewtopic.php?f=14&amp;t=15409&amp;sid=acfbbece18dd086cfeb57238be5bd57d&amp;start=705" target="_blank">here</a>. And note that it takes a while to load.<br><br>I added collisions but the camera sometimes flies through the geosphere and I couldn't seem to fix it. Also it would be nice to remove the ugly seam created by the edge of the texture. Any ideas?<br><pre class=code>' geosphere.bmx
' code by angros47

Import "../openb3dlib.bmx"

Strict

Graphics3D 800,600,0,2


Local camera=CreateCamera()
CameraRange camera,.00001,100

Local x=LoadGeosphere("srtm_ramp2.world.5400x2700.jpg")'
'Local x=CreateGeosphere(2700)

Local light=CreateLight()
MoveEntity light,10,10,10
PointEntity light,x

MoveEntity camera,0,0,-45
ScaleEntity x,.01,.01,.01

Local tex=LoadTexture("MapOfEarth.jpg")
ScaleTexture tex,2700,2700
EntityTexture x,tex

Local wiretoggle=-1

EntityPickMode x,2
Local sphere=CreateSphere()
ScaleEntity sphere,.1,.1,.1
EntityColor sphere,255,0,0

EntityType camera,1 ' camera entity type
EntityRadius camera,.03 ' camera radius
EntityType x,2 ' mesh entity type
Collisions 1,2,2,2 ' collisons for entity type 1 and 2, with elipsoid-polygon method and full-slide reponse


Repeat

	CameraPick (camera,MouseX(),MouseY())
	PositionEntity sphere,PickedX(),PickedY(),PickedZ()

	If KeyDown(key_a) Then MoveEntity camera,0,0,.08
	If KeyDown(key_z) Then MoveEntity camera,0,0,-.08
	If KeyDown(key_up) Then TurnEntity camera,-.5,0,0,0
	If KeyDown(key_down) Then TurnEntity camera,.5,0,0,0
	If KeyDown(key_left) Then TurnEntity camera,0,.5,0,0
	If KeyDown(key_right) Then TurnEntity camera,0,-.5,0,0
	
	If KeyDown(key_space) Then TurnEntity x,0,.5,0
	If KeyHit(key_w) Then wiretoggle=-wiretoggle
	If wiretoggle=1 Then Wireframe True Else Wireframe False

	UpdateWorld 1
	RenderWorld

	Text 0,0,"Keys: A/Z=zoom, Arrows=move camera, Space=spin geo, W=wireframe"
	Text 0,20,"x="+EntityX(camera)+" y="+EntityY(camera)+" z="+EntityZ(camera)

	Flip

Until KeyDown(key_escape)
</pre> <br><br></td></tr></table><br>
<a name="1234624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Geosphere code is still far from perfect. The collision bug might be related to another bug that caused "cracks" on the surface (a known problem on many LOD algorithms): i fixed it in the drawing routine, but I didn't in the coltree routine (I will in the next version). <br><br></td></tr></table><br>
<a name="1234629"></a>

<a name="1234630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> I made some tests, the collision issue can be fixed (at least in FreeBasic) by using:<br><br><pre class=code>EntityRadius camera,.02</pre><br><br>In fact, a radius of 2 is too big: when you move closer to the surface, the surface changes (due to the LOD algorithm), and this might confuse the LOD algorithm (it does not happen with pick commands, since they consider only a line, not a sphere); by reducing radius, only close triangles are evaluated... and LOD algorithm don't change them anymore, so collision routine should work well. <br><br></td></tr></table><br>
<a name="1234638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks angros47. I got the point.<br>I had to make some change to your freebasic code to work for me.<br>(screen 18,  32, , &amp;h20002).<br>However it looks much better without the random lightposition.<br><pre class=code>glClear(GL_ACCUM_BUFFER_BIT)

for i as integer=1 to 9
    'positionentity light,5+rnd()*1-.5,5+rnd()*1-.5,5+rnd()*1-.5
    positionentity light,sin(i*40)+5,5,cos(i*40)+5
    renderworld
    glAccum(GL_ACCUM, .1)
next

glAccum(GL_RETURN, 1.0)</pre><br>...and for BlitzMax:<br><pre class=code>glClear(GL_ACCUM_BUFFER_BIT)

For Local i:Int=1 To 9
	'PositionEntity light,5+Rnd()*1-0.5,5+Rnd()*1-0.5,5+Rnd()*1-0.5
	'best to precalculate the values of sin and cos and put them in an array
	PositionEntity light,(Sin(i*40)*0.3)+3,5,(Cos(i*40)*0.3)+3
	RenderWorld
	glAccum(GL_ACCUM, 0.1)
Next

glAccum(GL_RETURN, 1.0)
</pre> <br><br></td></tr></table><br>
<a name="1234642"></a>

<a name="1234643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks angros. I was able to increase the entity radius to .03 before the camera started slipping through. I've updated the code snippet. <br><br></td></tr></table><br>
<a name="1234878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just thought I'd post this up now. It's the per-pixel way to edit textures. It's very simple compared to using max2d for drawing (as in CreateTexture.bmx), no Begin/EndMax2D and no need for LockImage or GrabPixmap.<br><br><pre class=code>' CreateTexture2.bmx
' per-pixel access for textures (by munch)

Import "../openb3dlib.bmx"

Graphics3D 800,600,0,2


camera=CreateCamera()
CameraClsColor camera,80,160,240

light=CreateLight()
RotateEntity light,90,0,0

cube=CreateCube()
PositionEntity cube,0,0,3

Local tex=CreateTexture(64,64)

Local map:TPixmap=CreatePixmap(64,64,PF_RGBA8888)
For Local i=0 To PixmapWidth(map)-1
	For Local j=0 To PixmapHeight(map)-1
		Local rgb=Rand(0,255)+(Rand(0,255) Shl 8)+(Rand(0,255) Shl 16)
		WritePixel map,i,j,rgb|$ff000000
	Next
Next

BufferToTex tex,Int(PixmapPixelPtr(map,0,0)) ' buffer takes a byte ptr casted to int

EntityTexture cube,tex


While Not KeyDown(key_escape)

	TurnEntity cube,0.0,0.5,-0.1
	
	RenderWorld
	
	Flip

Wend
End
</pre> <br><br></td></tr></table><br>
<a name="1235004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately it doesn't load any .b3d files exported from gile[s].(unhandled memory exception error). :( <br><br></td></tr></table><br>
<a name="1235018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try with minib3d and warner engine. <br><br></td></tr></table><br>
<a name="1235107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works fine with any other engine.It's a test scene from gile[s].(ruinb3d.b3d).Of course I tried more scene but non of them worked. <br><br></td></tr></table><br>
<a name="1235122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you put a link to download the file, so I can test it. <br><br></td></tr></table><br>
<a name="1235138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www6.zippyshare.com/v/82358803/file.html" target="_blank">Here</a> it is. <br><br></td></tr></table><br>
<a name="1235150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I found the cause of the bug: TGA textures are in a format that cannot be read by OpenB3D (if you try to use them to texture a cube, it crashes).<br><br>MiniB3D works (even if the .b3d loader is almost the same) because they use BlitzMax functions to load a texture, while OpenB3D uses stb_image.<br><br>By upgrading image loader, the issue is fix and the model can be loaded. To fix the bug, just replace the file stb_image.c with this one:<br><br><a href="https://raw.githubusercontent.com/nothings/stb/master/deprecated/stb_image.c" target="_blank">https://raw.githubusercontent.com/nothings/stb/master/deprecated/stb_image.c</a><br><br>(it's not the last version, which I haven't found on the site, but apparently it can manage TGA files used in your model). Compile again, and it should work. <br><br></td></tr></table><br>
<a name="1235198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Angros47!<br>My first thought was that probably tga is not supported but then I took a look in iminib3d and it was.I can't compile the source so I just hope it will be there in the next release :).I replaced tga files with png and now it loads the scene.Works as it should.Thanks.<br><br>Next: I can't change the texture flag with the TextureFilter command. (e.g. I can load a texture with LoadTexture + flag 4 (masked) but if I load the texture and I want to make it masked with TextureFilter it does nothing) <br><br></td></tr></table><br>
<a name="1235620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks angros47,<br><br>I like this project, I am going to try it today. <br><br></td></tr></table><br>
<a name="1235639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> All Blitzmax examples works in my system except the one for max2d.<br><br>Please add *obj loader for the next version, C++ code for it is everywhere in the internet. <br><br>It is important to have 3D library for Blitzmax, even if it is does not use shader. A simple shadow and a simple physics is enough for others to begin work.  <br><br>Hope you guys continue this project. <br><br></td></tr></table><br>
<a name="1235659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, OpenB3D can use shaders: terrains support fragment shaders only, while meshes supports both vertex and fragment shaders.<br><br>The commands are LoadShader, ShadeMesh, ShadeEntity... you just need the .vert and .frag files (in other libraries, there are some "built-in" shaders; in OpenB3D, you need to load them, as you load a texture)<br><br>Anyway, since some video cards don't support shaders (or don't have OpenGl drivers that provide shader support), I tried to avoid making the library too shader-dependent: if you have shaders, you can get the best from them, if you don't, well, you can still build a good scene, you don't need to change your video card. <br><br></td></tr></table><br>
<a name="1235667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, how about loading Wavefront obj model? <br><br></td></tr></table><br>
<a name="1235713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> With current version, it's not yet possible. I might add it in the future. <br><br></td></tr></table><br>
<a name="1235809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code> All Blitzmax examples works in my system except the one for max2d.</pre><br>Could you explain what goes wrong? Does the minib3d max2d example work? <br><br></td></tr></table><br>
<a name="1235880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> munch,<br>I see the pot, "press space to ignite fire" does not work, screen becomes frozen without touching anything, I get: "max2d.exe is not responding", also "EXCEPTION_ACCESS_VIOLATIO".<br><br>I am using Win 8.1, Nvidia GT 630 <br><br></td></tr></table><br>
<a name="1235881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> angros46,<br>*.obj loader for the next version would be great. <br><br></td></tr></table><br>
<a name="1235895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks kiami. Could you try the same max2d example from the latest version of <a href="/posts.php?topic=96521" target="_blank">original minib3d</a>?<br><br>The CreateTexture example uses max2d to draw onto a texture. Does that work ok? If so then it may be a small issue maybe try LoadImageFont("arial",24) instead of LoadImageFont("Arial.ttf",1). <br><br></td></tr></table><br>
<a name="1235902"></a>

<a name="1235907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> munch, max2d works when I use minib3d. Changing LoadImageFont does not help using openB3D. <br><br></td></tr></table><br>
<a name="1235925"></a>

<a name="1235926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok. So does CreateTexture.bmx work with openb3d? <br><br></td></tr></table><br>
<a name="1235928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> CreateTexture.bmx works fine. <br><br>Sorry I cannot help you actively or respond faster, I just can run and give you result because I have to work on another project. <br><br></td></tr></table><br>
<a name="1235929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> However, the origin of the problem is:<br><br>BeginMax2D() ' MiniB3D function<br><br>EndMax2D() ' MiniB3D function<br><br>not:<br><br>UpdateMax2D() ' your function <br><br></td></tr></table><br>
<a name="1236018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> About .obj files: I found these pieces of code:<br><br>For Blitz3D (you can port to BlitzMax, of course, if you know both languages)<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1323" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1323</a><br><br><br>For BlitzMax and MiniB3D<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2125" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2125</a><br><br>Looks like the same code has been ported to Monkey, too, to be used in MiniB3d for Monkey.<br><br>The BlitzMax code should work on OpenB3D with few changes; maybe I could port it to C++, to integrate it in the library, but actually I'm not sure if it's a good idea: OBJ is a static format, it would not add anything to the library (a mesh loaded with some LoadObj command would be exactly the same as a mesh loaded in .x, 3ds, or static b3d). Also, if we add support for .OBJ, maybe next time somebody will ask to add support to Collada, or LightWave LWO, or Blender... and soon the library would become a mess, with a lot of loaders for format that are seldom or never used. I added support for .3ds and .x because they were already supported in Blitz3D, and I wanted to help porting old program, but I'm not sure about how many format should be supported.<br><br>So, instead of trying to support too many formats, maybe would be better to use a separate loader, or to convert the file to something that is already readable: many 3d editors can already save in .3ds (Blender or Anim8or can do that, and they are free), and there are plenty of 3d file converters, for static meshes (most of them can't do animations, because some formats use skeletal, other uses vertex morphing, but since OBJ does not support animations it's not an issue); if you don't want to install a converter, you can even use an online tool, like this:<br><br><a href="http://www.greentoken.de/onlineconv/" target="_blank">http://www.greentoken.de/onlineconv/</a><br><br>So, please, try one of the above solution, then let me know if you still need .OBJ support. <br><br></td></tr></table><br>
<a name="1236029"></a>

<a name="1236030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> angros47,<br><br>Thanks for the links. <br><br>I didn't know OpenB3D has support for .x , I didn't look at "whatsnew.txt" in win32 version, I just looked at BlitzMax examples and found b3d support and thought that's all is supported. I thought if only .b3d   is supported, then as .obj is easy to implement, then having .obj is a good thing to have in addition to .b3d. I am not specially crazy about .obj loader. Yes, you are right, now with .x, I can convert models to use - I have all kinds of converters. I still do not know if BlitzMax wrapper support .x or .3ds. If it does, I will spend time to find it. And finally, yes, don't waste your time on .obj. <br><br></td></tr></table><br>
<a name="1236032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, loadMesh in FB loads .x and .3ds. Do I assume that loadMesh loads .x and .3ds in Blitzmax? <br><br>About using FB, I will try it, I am not familiar with it, I prefer Blitzmax, but I don't mind to switch. Both fit my philosophy (I am against virual machines if I can, even OOP)! But, I use java everyday!!! Have no choice. Knowing lots of languages, knowing neither one them good enough is becoming our story! <br><br></td></tr></table><br>
<a name="1236052"></a>

<a name="1236053"></a>

<a name="1236054"></a>

<a name="1236055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tested sample .x files in openb3d and it does not work - afaik it's only .3ds (static) and .b3d (animated).<br><br>Testing in original minib3d .x and .3ds do not work.<br><br>Re: max2d bug. I don't have Windows 8 so I can't debug this.<br><br>Re: loading other 3d file formats. <a href="http://assimp.sourceforge.net/" target="_blank">Assimp</a> supports .obj and many more. There is a wrapper for BMax <a href="/posts.php?topic=82586" target="_blank">here</a>. Maybe I'll try to add it. <br><br></td></tr></table><br>
<a name="1236056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks munch. I used the c++ version of Assimp when I read "OpenGL Development Cookbook". Having its BlizMax version is a gift. However, I will try Unwrap3D ( <a href="http://www.unwrap3d.com/u3d/index.aspx" target="_blank">http://www.unwrap3d.com/u3d/index.aspx</a> ) to covert my static models to .b3d. Hopefully that will solve my 3d model issue with your wrapper. I have not reached to a stage in which animated 3d is important. <br><br></td></tr></table><br>
<a name="1236057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> munch, if wrapper itself work like Blitz3D, I won't need Max2d to work, I guess. Am I right? Or, I am missing something? <br><br></td></tr></table><br>
<a name="1236153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, while .3ds is a well defined file format, .x format encompasses a variety of different (and incompatible) formats: the file can be text-based or binary, animation can be bone-based or vertex-based, version for DirectX 9 is not compatible with DirectX 7... so, many different loaders would be needed (in original Blitz3d it wasn't an issue, since it just uses the loader provided by DirectX sdk, but this is not possible under OpenGL).<br><br>In OpenB3D, only text format, and only version 3.2 of model format is supported; so, if your file is i.e. in binary format (you could check by opening it with a text editor), you won't be able to open it in OpenB3D, you need to convert it. I ported the importer from this code: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2918" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2918</a> <br><br></td></tr></table><br>
<a name="1236187"></a>

<a name="1236188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I tried but I can't get the Assimp wrapper working. The problem is that the wrapper uses a specific version of assimp which is no longer available (afaik). I tried updating it to assimp 3.0 and 3.1 but it just spits out errors like "IFCOpenings.cpp:(.text+0x30df): undefined reference to" etc, etc. So I'm giving up and going back to my shader examples. <br><br></td></tr></table><br>
<a name="1236247"></a>

<a name="1236248"></a>

<a name="1236267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kiami</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Above, I mentioned I can consider freeBasic, but, although freeBasic has a lot to offer, it lacks true GC, hence, I do not see any reason to use it instead of using C++. Thus, to use a BASIC language, I stick to Blickmax until convinced other way. <br><br></td></tr></table><br>
<a name="1237111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Munch,how is it going with the shaders? <br><br></td></tr></table><br>
<a name="1237144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I am a bit busy at the moment and it's all messy and unfinished but I hope to have some good examples that can be used directly in a game without needing to understand any glsl. I have cubemaps, toon shading, lighting, texture masking, glsl sandbox and some other basic things. I changed how I wrap UseFloat, etc. so you can just put the variable in and no need for Varptr. I also have some basic descriptions for shader functions but I'm still wondering how to use UseMatrix or LoadMaterial. <br><br></td></tr></table><br>
<a name="1237200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is OpenB3D using quaternions?<br><br>I hate gimbal lock!<br><br>I want to port a project that involves flying in space but gimbal lock is a problem for me. <br><br></td></tr></table><br>
<a name="1237209"></a>

<a name="1237210"></a>

<a name="1237211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, openb3d uses quaternions based on warner engine. Sidesign minib3d and minib3d extended use eulers. <br><br>Also note that the openb3d wrapper has inverted pitch values in turnentity/rotateentity/rotatemesh to mimic Blitz3d rotations, instead of the Opengl coordinate system. <br><br></td></tr></table><br>
<a name="1237286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Munch<br><br>LoadMaterial is used to load 3d textures: the syntax is the same of LoadAnimTexture, and you can load a strip made of many images; the difference is that images are not frames of an animations, but slices of a 3d texture; you can use them inside a shader, by using ShaderMaterial, or you can use them to create a voxel sprite.<br><br>To use a 3d texture, you need to provide 3 texture coords: first, use the command UpdateTexCoords on the surface you want to use, then you can set U,V and W texture coordinates for any vertex (use VertexTexCoords on coordinate set 3)<br><br>Note: in original Blitz3D, you could set the W coordinate, but it's ignored:<br><br>www.blitzbasic.com/b3ddocs/command.php?name=VertexTexCoords<br><br>MiniB3D copied that behaviour; in OpenB3D, instead, the W coordinate finally has meaning, even if it's not too immediate.<br><br><br><br>About UseMatrix: it's needed when you are using some vertex shaders: in fact, a vertex shader might need, as input parameters, surface data (you can send them by using UseSurface) and camera matrix data (there are two of them: camera matrix, that contains position and rotation info, and projection matrix, that contain zoom and perspective info); to send camera matrix info, you need to use UseMatrix. Unless your shader need that, you can just ignore these commands. <br><br></td></tr></table><br>
<a name="1237299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Munch, your the man!<br><br>I was using MiniB3D with Warners quaternions.<br>The project now runs on OpenB3D, it runs good and no gimbal lock :)<br><br>Thx! <br><br></td></tr></table><br>
<a name="1237365"></a>

<a name="1237366"></a>

<a name="1237367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks very much Angros, that's a big help. I will try to figure the rest out myself.<br><br>Ferret. That was quick! Glad it works for you. I'm not sure I follow you though - did you manage to fix gimbal lock in minib3d? <br><br></td></tr></table><br>
<a name="1237375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Before building his own engine, Warner had written an extension for MiniB3d that used quaternions (I'm sure about it, because I converted it to C++ and merged it with iMinib3d... that was how OpenB3D started); I guess Ferret was using it. <br><br></td></tr></table><br>
<a name="1237384"></a>

<a name="1237385"></a>

<a name="1237400"></a>

<a name="1237401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, i was using Warners extension for MiniB3D.<br><br>Porting was easyer then expected, every command i need is there and seems to work, it took me less then two hours.<br><br>I do have some minor glitches, not sure if its mi code or OpenB3D.<br><br>I have a scene with a skybox, a camera and a point light.<br>The skybox is parented to the camera, fulbright and colored using EntityColor().<br><br>The camera is positiond back a litle so the light is in front of me.<br>Now when i move the camera on the z axis past the light, the skybox color turns white. When i go far enough, the skybox gets its color back.<br><br>This only happens in one direction on the z axis.<br>Not sure if this has anything to do with the problem but i move the world, not the camera.<br><br>I don't understand why a light affects a fulbright mesh. <br><br></td></tr></table><br>
<a name="1237414"></a>

<a name="1237415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> I created a simple example.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
SuperStrict

Import angros.openb3d

Graphics3D(800,600,0,2,60,-1,False)

Global Camera:Int = CreateCamera()
CameraRange(Camera,1.0,2048)
CameraClsColor(Camera,0,0,0)

Global Light:Int = CreateLight(2)
LightRange(Light,512)

Global LightSprite:Int = CreateSprite()
EntityFX(LightSprite,1)
EntityColor(LightSprite,255,255,0)
EntityParent(LightSprite,Light)

Global Sky:Int = CreateCube()
ScaleMesh(Sky,128,128,128)
FlipMesh(Sky)
EntityFX(Sky,1)
EntityColor(Sky,100,100,255)
EntityOrder(Sky,99)
EntityParent(Sky,Camera)

PositionEntity(Camera,0,0,-128)
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
While Not KeyHit(KEY_ESCAPE)
	
	UpdateCamera()
	
	UpdateWorld()
	RenderWorld()
	Flip()
	
Wend
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
ClearWorld()
End
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
Function UpdateCamera()
	If KeyDown(KEY_UP)
		MoveEntity(Camera,0,0,1)
	ElseIf KeyDown(KEY_DOWN)
		MoveEntity(Camera,0,0,-1)
	EndIf
End Function
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''</textarea> <br><br></td></tr></table><br>
<a name="1237444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks. I will have a look around for Warner's minib3d extension.<br><br>Ferret, it looks like you made a mistake. The LightRange must not reach past the size of the skybox. <br><br></td></tr></table><br>
<a name="1237516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, it works now, thx! <br><br></td></tr></table><br>
<a name="1237524"></a>

<a name="1237525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> Shaders work :)<br><br>Now i have pixel perfect lighting and normal maps, looks nice. <br><br></td></tr></table><br>
<a name="1237606"></a>

<a name="1237607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds good Ferret. I still need to finish a per-pixel lighting shader. I have a nice one from <a href="http://oivdoc86.vsg3d.com/content/193-writing-pixel-lighting-shader" target="_blank">here</a> and the lighthouse3d one from <a href="http://www.lighthouse3d.com/tutorials/glsl-tutorial/directional-light-per-pixel/" target="_blank">here</a> but it doesn't seem to work very well. Where did you get your per-pixel lighting code from? :) <br><br></td></tr></table><br>
<a name="1237647"></a>

<a name="1237648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a working example using the Light shader.<br><a href="https://sites.google.com/site/ferret3ddesign/openb3d" target="_blank">https://sites.google.com/site/ferret3ddesign/openb3d</a><br><br>I got it from various sources and managed to create a shader that works for multiple lights (max 8) and has the effects that i want.<br><br>I had to adapt it for OpenB3D, it used gl_FrontMaterial.emission wich i replaced with a uniform variable.<br>You can find the version using gl_FrontMaterial.emission in the backup folder.<br><br>You will find more shaders in the shaders folder, i never used those shaders but they might come in handy. <br><br></td></tr></table><br>
<a name="1237736"></a>

<a name="1237737"></a>

<a name="1237738"></a>

<a name="1237739"></a>

<a name="1237740"></a>

<a name="1237750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work Ferret. Thanks! I ran the example from ubuntu and it crashed but I fixed it.<br><br>I'll just point out the errors. First two in Light.frag.<br><pre class=code>vec4 base = texture2D(textureB, vec2(texCoords)); // added vec2()

...

            totalLighting += (ambientLighting*vec3(base) + diffuseReflection*vec3(base) + specularReflection); // added vec3()
</pre><br>I also had to set the attribute tangent or it was black. I have been using 0.5 on the xyz axis to average out the light vector so it looks ok from all angles. You could calculate the correct 3d vector in realtime but it's too much maths for me.<br><pre class=code>SetFloat4 (shad,"tangent",0.5,0.5,0.5,0.5)</pre><br>Also I found a solution in the Backup/Light.frag for using gl_FrontMaterial.emission instead of the uniform variable. It looks a bit different to yours, no black bumpy shadows. Perhaps better?<br><pre class=code>            vec3 ambientLighting = vec3(gl_LightModel.ambient) * vec3(gl_FrontMaterial.diffuse); // added diffuse
</pre><br>I also found some very similar Blender code <a href="http://en.wikibooks.org/wiki/GLSL_Programming/Blender/Lighting_of_Bumpy_Surfaces" target="_blank">here</a> but it doesn't have a colormap. I actually tried that code but couldn't get it working. <br><br></td></tr></table><br>
<a name="1237749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually the change to gl_FrontMaterial.emission doesn't work as it's lost it's bumpiness. It only shows up bumpy under the light. So yours is better. I'm getting a slow fps though 24 vs 35. <br><br></td></tr></table><br>
<a name="1237879"></a>

<a name="1237881"></a>

<a name="1237882"></a>

<a name="1237883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkGiver</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've something that can interest you (^_^)<br><br><a href="http://www.darkgiver.ch/shader_test_01.zip" target="_blank">http://www.darkgiver.ch/shader_test_01.zip</a><br><br>A lovely shader, including colormap, normalmap, specularmap, and multiple light support, including attenuation. <br><br><img src="http://www.darkgiver.ch/shader_test_01.jpg"><br><br>The main problem was the tangent calculation, and it is now calculated internally in the .frag<br><br>Change the variables in shaders file to change the number of lights.<br><br>Variable you must set :<br><br>texturescale = texture scale factor<br>lightradius = to calculate the attenuation<br>vambient = ambient light<br><br>It took me a lot of time, but it works fine ! that's why i want to share.<br><br>Enjoy !!!<br><br>Now i hope a new version of openb3d will be out soon.. especially for a better terrain and shadow support. <br><br></td></tr></table><br>
<a name="1237918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Munch, thx for the fixes!<br><br>I noticed the framerate drops in the example.<br>Mi project seems to run fine with multiple planets and a ship using the shader.<br><br>DarkGiver saves the day with maths for the tangent :)<br><br><br>@DarkGiver, thx for sharing, looks verry nice! <br><br></td></tr></table><br>
<a name="1237928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> About Assimp, D.J.Peters has made a wrapper for Freebasic, and it can be used with OpenB3D:<br><br><a href="http://freebasic.net/forum/viewtopic.php?f=14&amp;t=22798" target="_blank">http://freebasic.net/forum/viewtopic.php?f=14&amp;t=22798</a> <br><br></td></tr></table><br>
<a name="1238077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can i load media in a different thread or stream it using Assimp?<br>Or is there another way to do this in OpenB3D?<br><br>I'm loading all media at startup, this works but wastes allot of memory and the more media to load the longer it takes.<br>It currently loads in under 30 seconds but this will go up when i add more media. <br><br></td></tr></table><br>
<a name="1238079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> I never tried using OpenB3D with threads... anyway, Assimp is an indipendent library, so you can use it to load data in another thread with no issues: when you have loaded data, and you start using them to create your mesh (with CreateMesh, AddVertex, AddTriangle and so on), maybe you should use HideEntity on the mesh, and show it only when finished, to prevent that a RenderWorld call from another thread try to access data from an incomplete mesh.<br>OpenB3D is not thread-safe, so you have to be careful. <br><br></td></tr></table><br>
<a name="1238241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> DarkGiver, thank you! That's very nice code. It was exactly what I was looking for. I have it working in my own demo now and it looks awesome.<br><br>The bump code from minib3dextended only works for one light and also doesn't compute a tangent. I actually came up with a solution for the tangent which worked, sort of. It was xaxis=xdiff*ydiff*zdiff where diff is the light-camera position but it looked wrong when crossing the zero as the light flicked around so fast, so I decided I was out of my depth and went back to setting tangent to 0.1. :)<br><br>I had to edit your code to make it work on my old pc which only support glsl 1.2 so in case you're interested here are my changes. To both.<br><pre class=code>varying vec2 Vertex_UV;
varying vec3 Vertex_Normal;
varying vec3 Vertex_LightDir[MAX_LIGHTS];
varying vec4 Vertex_EyeVec;</pre><br>To the vert.<br><pre class=code>		Vertex_LightDir[i] = gl_LightSource[i].position.xyz - view_vertex.xyz; //added xyz</pre><br>And to the frag.<br><pre class=code>//precision highp float;
...
	vec3 map = texture2D(normalMap, texcoord ).xyz; //added 2D
...
void main()
{
...
	vec4 Out_Color; //was uniform
...
	vec4 tex01_color = texture2D(colorMap, uv); //added 2D, was rgba
...
	gl_FragColor = Out_Color;</pre> <br><br></td></tr></table><br>
<a name="1238258"></a>

<a name="1238259"></a>

<a name="1238260"></a>

<a name="1238261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkGiver</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> ha thank you ! i fixed the files with your changes :) more compatible now i guess. <br><br>And i improved the shader a bit too... fixed a few bugs with attenuation: Now works correctly with more than 1 light, including the ambient value.<br><br>I added the possibility to change the lightradius value for others lightsources, and if not specified the value used by default is the first one. Array is more elegant but i didn't found a way to pass array from maincode to shader... :P<br><br>Can you check if it works fine with your computer ?<br><br>Thank you !<br><br><a href="http://www.darkgiver.ch/shaders_01.09.2014.zip" target="_blank">http://www.darkgiver.ch/shaders_01.09.2014.zip</a><br><br><img src="http://www.darkgiver.ch/dungeon_age_01.09.jpg"> <br><br></td></tr></table><br>
<a name="1238271"></a>

<a name="1238272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks DarkGiver. The code needed 2 changes to work here. The precision codeword is not supported in 1.2 and the screen was all pink dots until I set final_color to an init value. It also runs a little slower, 24 vs 28.<br><pre class=code>//precision highp float; //removed
...
vec4 final_color = vec4(0.0); //added vec4</pre><br><br>You can't pass whole arrays I don't think but you can link (or bind) separate values. One thing I noticed was arrays of floats were not supported (at least not in 1.2) but I found a workaround by defining a float in a struct. Not sure if it's any use to you but here is a demo anyway. It just verifies you can set the 2nd element of an array, which I represent as a green teapot. :) The commented out bits in the frag are to test if float array works.<br><pre class=code>' sl_floatarrays.bmx
' using arrays of floats

Import "../openb3dlib.bmx"

Strict

Graphics3D 800,600,0,2


Local camera=CreateCamera()
CameraClsColor camera,70,180,235

Local light=CreateLight()

Local teapot=LoadMesh ("media/teapot.b3d")
PositionEntity (teapot,0,0,3)

Local shad=LoadShader ("","shaders/floatarray.vert.glsl","shaders/floatarray.frag.glsl")

SetFloat (shad,"myColor[0].Float",0.1)
SetFloat (shad,"myColor[1].Float",0.7) ' green
SetFloat (shad,"myColor[2].Float",0.1)

ShadeEntity (teapot,shad)


While Not KeyDown(KEY_ESCAPE)

	TurnEntity (teapot,0,.5,-.1)
	
	RenderWorld
	
	Flip

Wend
End
</pre><br>floatarray.frag.glsl<br><pre class=code>
struct FloatArray{
    float Float;
};

uniform FloatArray myColor[4];
//uniform float myColor[4];

void main()
{
	vec4 aColor = vec4(myColor[0].Float, myColor[1].Float, myColor[2].Float, 1.0);
	//vec4 aColor = vec4(myColor[0], myColor[1], myColor[2], 1.0);
	
	gl_FragColor = aColor;
}
</pre><br>floatarray.vert.glsl<br><pre class=code>
void main()
{
	gl_Position = ftransform();
}
</pre> <br><br></td></tr></table><br>
<a name="1239964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> A little new: I managed to replace that ugly glBegin... glEnd inside terrains. I hope to get rid of them at all; I can't see any speed improvement, but at least OpenB3D should become more GLES compliant, and porting it should be easier. <br><br></td></tr></table><br>
<a name="1239975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> A mobile'ish version (even GLES 1.1) would be great. I ported OpenB3D version, many moons ago to, inline C + GLBasic. It worked well but had to stop short at the mobile platforms due to some legacy OpenGL only code(including unsupported GL extensions). <br><br></td></tr></table><br>
<a name="1240233"></a>

<a name="1240234"></a>

<a name="1240235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I have a new version up. This has lots of shader examples and adds the tga tweak by angros to the openb3d source. I have also split the wrapper into 2 files for my convenience. The shader examples are a work-in-progress but I thought I should share them now for anyone who may be waiting.<br><br>Credits! Ferret's code is bumpmap 2 and DarkGiver's code is bumpmap 3. Thanks for the help. <br><br></td></tr></table><br>
<a name="1240279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great!<br>Thanks for the shaders and the TGA support munch.<br><br>(There is a typo in functions.bmx:<br>Return Int( CreateStencil_() )<br>The underscore is missing...) <br><br></td></tr></table><br>
<a name="1240306"></a>

<a name="1240307"></a>

<a name="1240308"></a>

<a name="1240309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice find petimat! Thanks. I've added that to the latest zip. <br><br></td></tr></table><br>
<a name="1240321"></a>

<a name="1240325"></a>

<a name="1240326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just tested the "angros.openb3d-0.8.zip" (folder date 06/12/2014 02:37am).<br><br>I have the same problem here in Win7x64 with the Max2D example, it just freezes without any error message even in debug mode (0 fps and the teapot doesn't turn). When I uncomment the BeginMax2D and EndMax2D commands the teapot turns (but the firework doesn't work). I guess it could be the EndMax2D command, when I only uncomment the Beginmax2D command only it stops, too.<br><br>And it looks like the examples have serious problem when I switch to Superstrict mode and cast all variables and objects. For example the camerapick test I'm getting a "Compile Error: Identifier 'TCamera' not found".<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">' camerapick.bmx
' from minib3d examples

Import "../openb3dlib.bmx"

SuperStrict

Local width:Int = 800, Height:Int = 600, depth:Int = 0, mode:Int = 2

Graphics3D width, Height, depth, mode

Local cam:TCamera = CreateCamera()
PositionEntity cam,0,0,-15

Local Light:TLight = CreateLight()
RotateEntity Light, 45, 0, 0

Local marker:TMesh = CreateSphere()
ScaleEntity marker,0.2,0.2,0.2
EntityColor marker,255,0,0

Local sphere:TMesh = CreateSphere()
EntityRadius sphere,1
EntityPickMode sphere,1
PositionEntity sphere,-10,0,0

Local mesh:TMesh = LoadMesh("media/teapot.b3d")
EntityPickMode mesh,2
ScaleEntity mesh,4,4,4

Local box:TMesh = CreateCube()
FitMesh box,-2,-1,-1,4,2,2
EntityBox box,-2,-1,-1,4,2,2
EntityPickMode box,3
PositionEntity box,10,0,0

' used by fps code
Local old_ms:Int = MilliSecs()
Local renders:Int
Local FPS:Int


While Not KeyDown(KEY_ESCAPE)		

	If KeyHit(KEY_ENTER) Then DebugStop

	' control camera
	MoveEntity cam,KeyDown(KEY_D)-KeyDown(KEY_A),0,KeyDown(KEY_W)-KeyDown(KEY_S)
	TurnEntity cam,KeyDown(KEY_DOWN)-KeyDown(KEY_UP),KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT),0
	
	TurnEntity mesh,0,1,0

	' if mousedown then perform camerapick
	Local myPick:Int
	If MouseDown(1)
	
		' reset entity colors
		EntityColor sphere,255,255,255
		EntityColor mesh,255,255,255
		EntityColor box,255,255,255

		myPick=CameraPick(cam,MouseX(),MouseY())
		
		If myPick&lt;&gt;0
			EntityColor myPick,255,255,0
			PositionEntity marker,PickedX(),PickedY(),PickedZ()
		EndIf
	
	EndIf

	RenderWorld
	renders=renders+1

	' calculate fps
	If MilliSecs()-old_ms&gt;=1000
		old_ms=MilliSecs()
		fps=renders
		renders=0
	EndIf
	
	Text 0,0,"FPS: "+fps
	
	If myPick&lt;&gt;0
		Text 0,20,"Picked!"
	Else
		Text 0,20,"Not Picked"
	EndIf

	Flip

Wend
End</textarea><br><br>Beside that - uh very nice framework, which commands are missing? I'm thinking of moving my projects to this once it has the same functionality as vanilla minib3d. <br><br></td></tr></table><br>
<a name="1240365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> I allready moved to this :)<br><br>All OpenB3D types return Int, as in Blitz3D, so there is no TCamera. <br><br></td></tr></table><br>
<a name="1240392"></a>

<a name="1240488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah ok. In my projects I really love to use variable casting in Superstrict mode to find bugs easier. So it looks like I must stay with minib3d then. <br><br></td></tr></table><br>
<a name="1240671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bummer, i would love to see a Krischan project using OpendB3D.<br>But i understand and your code still rocks! <br><br></td></tr></table><br>
<a name="1240877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> OctreeBlock makes the cube disappear.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Global Cube:Int = CreateCube()
PositionEntity(Cube,8,8,16)

Global Octree:Int = CreateOcTree(1024,1024,1024,Null)
OctreeBlock(Octree,Cube,1,8,8,16,0,1000)</textarea> <br><br></td></tr></table><br>
<a name="1240968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> The cube does not disappear, it just become a "tile" of the octree.<br><br>With octreeblock, the same mesh can be used in many places of the octree (a block, like a piece of wall, is meant to be reusable): it is automatically moved (so positionentity is not needed) and scaled to the proper level.<br><br>By using level 1 (the third parameter of OctreeBlock) you subdivide the octree only once, so every block will be of a size of 512(half of 1024)... Too big to fit in the viewport. Try setting a level of 9-10. <br><br></td></tr></table><br>
<a name="1241018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is a SetShadowColor method of the ShadowObject class in the source code.It would be nice if we could set these parameters too. :)<br>(...to set as the object default,not for every instance.) <br><br></td></tr></table><br>
<a name="1241324"></a>

<a name="1241328"></a>

<a name="1241329"></a>

<a name="1241330"></a>

<a name="1241342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, new update to the wrapper. This implements an OOP style like in minib3d following a post by Brucey. <br><br>Sorry if this makes life difficult for anyone but it is for 64bit compatibility and OOP is a major feature of BlitzMax. It also makes openb3d fairly compatible with minib3d projects although the types are really only pointer holders. If you get confused you can hit F1 and the variable names show the types you need for that command. <br><br>It's not finished yet but most commands should be working, some probably aren't yet so if you find a command that doesn't seem to work please report it so I can fix it. One problem is that many commands can't accept null objects and this generally will cause a crash.<br><br>There is still a final copy of the wrapper using Ints but I won't be updating it any more. <br><br></td></tr></table><br>
<a name="1241450"></a>

<a name="1241451"></a>

<a name="1241452"></a>

<a name="1241453"></a>

<a name="1241454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm delighted to say I have a working copy of Peter Scheutz's awesome Assimp module now. And because the wrapper is now OOP I was able to instantly switch from minib3d to openb3d. Yay!<br><br>I made it a library wrapper since I couldn't get the original source wrapper to build as it's pretty complex. I used the library built by DJ Peters from the Freebasic site so thanks for the link Angros.<br><br>Also, in the wrapper I had to change the TForm... commands to accept null objects. <br><br></td></tr></table><br>
<a name="1241582"></a>

<a name="1241583"></a>

<a name="1241584"></a>

<a name="1241585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> I now have a static archive wrapper version (openb3darc.bmx) for embedding the library in executables, thanks to BlitzSupport. <br><br>One problem on Mac though, I had to copy libopenb3d.dylib to /usr/local/lib to resolve a linking problem. I also had to sudo rm lib as it said it was not a directory and then sudo mkdir lib and cp libopenb3d.dylib /usr/local/lib. <br><br></td></tr></table><br>
<a name="1241617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your definition of UseFloat4_() is incorrect, I think.<br>You probably meant to define the v args as Float ptr :-) <br><br></td></tr></table><br>
<a name="1241626"></a>

<a name="1241628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I've been playing (on OS X so far) with the various sources (openb3d and the wrapper that munch's versions), and have some working modules (with everything compiled and linked together in the usual (static) way).<br><br>I had to make some changes to x.cpp to compile it on OS X (mavericks), and I also ripped out GLee and used glew instead (which is already a part of BlitzMax).<br><br>I also abstracted out the graphics driver so that I could choose between BRL and SDL for context creation and input handling. So for example, you might choose between:<br><pre class=code>
Framework b3d.b3dglsdlgraphics

or 

Framework b3d.b3dglgraphics
</pre><br>The few examples I've tried seem to work as expected. (except for the "Text" function, which doesn't appear to exist anywhere)<br><br>Haven't tried a 64-bit build yet.<br><br>And I can't release anything for testing until the license is changed - since everything is statically built-in here, and I don't want to release my stuff in any GPL flavoured license.<br><br>Fun fun :-) <br><br></td></tr></table><br>
<a name="1241738"></a>

<a name="1241740"></a>

<a name="1242148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey. I have updated the library source and wrapper with proper static library support. I updated the makefile so there's a new command "make archive" to build a static library.<br><br>Edit: to choose to use either dynamic or static library edit the Import line in openb3d.bmx.<br><br>One little issue on Mac is the names of the Mac and Linux .a files are the same except for case and Mac seems to overwrite one. so if it's not working it could be the Linux file, the Mac one is lowercase.<br><br>Also, I think maybe my implementation in Graphics3D isn't quite right and might be the cause of the Max2D bug on Windows. So I have tried something a bit different and hopefully someone with the bug will test it for me. <br><br></td></tr></table><br>
<a name="1241863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here are some examples of Openb3d using an SDL backend, glew, and compiled for 64-bit on Windows :<br><br><b><a href="http://brucey.net/programming/blitz/bmx_ng/demos/b3d_sdl_win_x64.7z" target="_blank">b3d_sdl_win_x64.7z</a></b> (4.7 meg)<br><br>Built and tested on my Win7 Pro VM. <br><br></td></tr></table><br>
<a name="1241929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you need to do any change to be able to compile OpenB3D for 64 bit?<br><br>Because on FreeBasic forum there were some users interested in a 64 bit version, and I never tried compiling OpenB3D to 64 bit yet. <br><br></td></tr></table><br>
<a name="1241938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't make any specific changes for 64-bit. <br><br></td></tr></table><br>
<a name="1241971"></a>

<a name="1241972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BLaBZ</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, I, Love, you.<br><br>This is phenomenal news. <br><br></td></tr></table><br>
<a name="1241974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LT</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is great news, but when I try to run any of the executables, I get this error:<br><br>The program can't start because libstdc++_64-6.dll is missing from your computer.  Try reinstalling the program to fix this problem.<br><br>I am running Windows 8.1 and copied the whole directory to Programs/ - am I doing something wrong? <br><br></td></tr></table><br>
<a name="1241976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  The program can't start because libstdc++_64-6.dll is missing from your computer <br></div><br>Oh, that's interesting. I thought it was meant to statically link that into the binary. Maybe my compiler options are wrong. <br><br></td></tr></table><br>
<a name="1242007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fixed, and re-uploaded : <b><a href="http://brucey.net/programming/blitz/bmx_ng/demos/b3d_sdl_win_x64.7z" target="_blank">b3d_sdl_win_x64.7z</a></b> (4.9 meg)<br><br>That'll teach me to believe everything I read in the documentation :<br><div class="quote"> <br>* TDM-GCC doesn't link your programs with the libgcc or libstdc++ runtime DLLs by default.<br> <br></div> <br><br></td></tr></table><br>
<a name="1242012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LT</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> It works now.  Yay! :) <br><br></td></tr></table><br>
<a name="1242013"></a>

<a name="1242014"></a>

<a name="1242015"></a>

<a name="1242021"></a>

<a name="1242022"></a>

<a name="1242023"></a>

<a name="1242024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is an -m64 option for gcc. I can remember on Mac I had to use -m32 in the makefile as it defaulted to 64bit. Mac automatically chooses the cpu architecture when you install the os. On Windows 64bit I think MinGW is 32bit only so it doesn't matter. There's an error saying -m64 is unimplemented.<br><br>Works fine here. I assume you're importing the source then Brucey. <br><br></td></tr></table><br>
<a name="1242046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I assume you're importing the source then Brucey. <br></div><br>As much as I ever am. All modules get compiled into static libraries, and then linked into the final app binary.<br><br><div class="quote"> On Windows 64bit I think MinGW is 32bit only so it doesn't matter. <br></div><br>The 64-bit TDM MinGW compiles 64-bit by default, and you need to use -m32 to compile 32-bit - so it does both architectures with one package. <br><br></td></tr></table><br>
<a name="1242874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shaggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi munch,<br>with the new version i get an error....<br><br>Local temp:TMesh = CreateQuad()<br>Local surface1:TSurface = GetSurface(temp, 1)<br><br>GetSurface return a (Null Object). <br><br></td></tr></table><br>
<a name="1242887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Shaggy, I have a new version up now which should fix this. It was null because surfaces don't exist for the wrapper until you start accessing them and I hadn't the right code for GetSurface to account for this.<br><br>I am using linked lists but am going to change that to maps to speed it up for large projects. <br><br></td></tr></table><br>
<a name="1243029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> New version is up using maps instead of linked lists for integrating with the library object instances. Also I added THardwareInfo by klepto2. Also an update to the docs, all types are now listed and highlighted in the code. No update to the examples or library. <br><br></td></tr></table><br>
<a name="1243041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, bug report. I noticed in sl_sandbox64 that the timer seems to be about 5 times slower than it should be running at. It works fine in 32bit win7. <br><br></td></tr></table><br>
<a name="1243162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I noticed in sl_sandbox64 that the timer seems to be about 5 times slower than it should be running at. <br></div><br>Heh... so it is. Seems my "translation" for the SDL timer was slightly off...<br><br>Max:<br><div class="quote"> CreateTimer creates a timer object that 'ticks' hertz times per second.  <br></div><br>SDL:<br><div class="quote">  SDL_AddTimer: interval -  the timer delay (ms)  <br></div><br><br>which is not quite the same ;-)<br><br>Next time I shall read the small-print! <br><br></td></tr></table><br>
<a name="1243356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shaggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi munch, <br>thanks for the quick fix. But I have another problem with my ati card R9 270x. <br>When I use the Source with glee and glfw (window) in c++ then I cannot<br>use a Cubemap. With a Cubemap i become an error: atiglpxx.dll<br>In BlitzMax with your wrapper there are no problems with cubemaps.<br><br>Have you an Idea where are the problem?<br><br>Thanks <br><br></td></tr></table><br>
<a name="1243375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know about using glfw. I would guess you've got a mistake somewhere in your code related to cubemaps if everything else works. <br><br></td></tr></table><br>
<a name="1243563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#140">[#140]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update. I forgot to import brl.map as it was working when I just imported the file but not when doing a makemods. Also, I have remove the static library wrapper until angros updates his license. <br><br></td></tr></table><br>
<a name="1244016"></a>

<a name="1244018"></a>

<a name="1244112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#141">[#141]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yet another update. I added a nice example for THardwareInfo and I renamed a few files, openb3dlib.bmx is now dynamic.bmx so I've changed the examples to import the compiled module. Also a small change to types.bmx. And the libraries are now in a separate zip. Everything is now on GitHub thanks to this super easy <a href="http://readwrite.com/2013/09/30/understanding-github-a-journey-for-beginners-part-1" target="_blank">tutorial</a>. Yay! <br><br></td></tr></table><br>
<a name="1244744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#142">[#142]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work Munch! <br><br></td></tr></table><br>
<a name="1245742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#143">[#143]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a problem with a couple of .b3d files,they are loaded without textures.(e.g. dwarf.b3d from warner's samples).It's loaded properly in minib3d but not in openb3d.Could anybody confirm that? <br><br></td></tr></table><br>
<a name="1245777"></a>

<a name="1245778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#144">[#144]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope, dwarf.b3d works ok here. No idea what could be wrong. <br><br></td></tr></table><br>
<a name="1245847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#145">[#145]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know either but there must be something wrong with the JPG loader stuff because as soon as I converted the texture to TGA (or any other image format) the problem has solved. <br><br></td></tr></table><br>
<a name="1245853"></a>

<a name="1245854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#146">[#146]</a></td></tr></table></td></tr><tr ><td class="posttext"> The image loader Openb3d uses only takes the "standard" type of jpg compression. Maybe this is the problem? <br><br></td></tr></table><br>
<a name="1245931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#147">[#147]</a></td></tr></table></td></tr><tr ><td class="posttext"> Probebly, because as I 'resaved' the .jpg image as .jpg (with my image viewer) it worked. <br><br></td></tr></table><br>
<a name="1245934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#148">[#148]</a></td></tr></table></td></tr><tr ><td class="posttext"> MiniB3D probably uses libjpeg, OpenB3D uses stb_image, and I expect Blitz3D uses FreeImage? <br><br></td></tr></table><br>
<a name="1245937"></a>

<a name="1245938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#149">[#149]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I think that's right Brucey.<br><br>There is two main types of jpg compression used, "standard" is lossy and then "progressive" is interlaced, which depends on whether you need high quality detail or not. <br><br></td></tr></table><br>
<a name="1245939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#150">[#150]</a></td></tr></table></td></tr><tr ><td class="posttext"> jpeg is in both modes "lossy". Progressive just adds a map of image data at the front of the file ... so that map contains (simplyfied said) some pixel data to display until the image data was fetched more and more - which then replaces the "unsharp" data.<br><br><br>so the problem is that the image library does not play well with that additional data.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1246372"></a>

<a name="1246373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#151">[#151]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um this will sound stupid: how do I install it? It's been a while since I used bmax. I've extracted angros.mod into the mods folder and the same with openb3d-library so the folder-tree looks like this -&gt; blitzmax/mods/angro.mod/openb3d.mod/examples/. And I get a "can't find interface for module 'angros.openb3d" on compiling so something's obviously wrong :P Do I need to compile the libraries myself or...? <br><br></td></tr></table><br>
<a name="1246413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#152">[#152]</a></td></tr></table></td></tr><tr ><td class="posttext"> No ,you just have to build the modul first.It builds without the libraries ,you only need them in the same folder where your codes are when you run your "game.bmx" or build your exe. (correct me if I'm wrong) <br><br></td></tr></table><br>
<a name="1246414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#153">[#153]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a note about Animate()command :<br>Neither openb3d nor minib3d plays the animation backwards if negative speed is used... while blitz3d does. <br><br></td></tr></table><br>
<a name="1246430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#154">[#154]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks good, runs in Superstrict mode now, too :-D But I still can't run the Max2D sample, it crashes (Exception at Renderworld). And which commands are still missing right now? What does it take to achieve version 1.0? <br><br></td></tr></table><br>
<a name="1246439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Happy Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#155">[#155]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>Where could we download gile[s] nowadays?<br><br>Thanks in advance <br><br></td></tr></table><br>
<a name="1246440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#156">[#156]</a></td></tr></table></td></tr><tr ><td class="posttext"> I couldn't find the 2.0 free version either.(I use to have that on my old hdd that broke) It would be nice if someone could upload a copy. <br><br></td></tr></table><br>
<a name="1246441"></a>

<a name="1246455"></a>

<a name="1246456"></a>

<a name="1246457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#157">[#157]</a></td></tr></table></td></tr><tr ><td class="posttext"> @petimat:<br><br>Thanks, I got it working :)<br><br>In case anyone else wonders you need to use bmk to build the module, like so:<br><br>run cmd<br><br>go to the blitzmax/bin folder<br><br>type in "bmk makemods angros.openb3d" to build it<br><br>done<br><br><br><div class="quote"> Next: I can't change the texture flag with the TextureFilter command. (e.g. I can load a texture with LoadTexture + flag 4 (masked) but if I load the texture and I want to make it masked with TextureFilter it does nothing) <br></div><br>I got this as well but for me setting flags with LoadTexture doesn't do anything either. I always get a mipmapped texture no matter what. I'll try some different file formats. Only tested with .bmp so far. <br><br></td></tr></table><br>
<a name="1246458"></a>

<a name="1246459"></a>

<a name="1246460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#158">[#158]</a></td></tr></table></td></tr><tr ><td class="posttext"> I finally got around to trying this, and the demos are really cool!<br><br>One thing I really used to like with Max3D was playing around with the depth and colour buffers (textures?), where you could read the z-values from the depth buffer as RGB, then write out modified values to the colour buffer for effects like DOF.<br><br>However, I was never quite sure how it worked, as special texture handles (underlined below) were provided by Max3D for you to use in your shaders:<br><br><pre class=code>
//@mode postprocess 

//@vertex 

void main ()
{ 
        gl_Position=bb_Vertex; 
} 

//@fragment

uniform float bright = 1.0;

void main ()
{ 

	vec4 pixel = texture2DRect (<u>bb_ColorBuffer</u>, gl_FragCoord.xy);

	float fragz = texture2DRect (<u>bb_DepthBuffer</u>, gl_FragCoord.xy).r;

	fragz = bb_zNear * bb_zFar / (fragz * (bb_zNear - bb_zFar) + bb_zFar);

	pixel.r = clamp ((1.0 / fragz) * bright, 0.0, 1.0);
	pixel.g = clamp ((1.0 / fragz) * bright, 0.0, 1.0);
	pixel.b = clamp ((1.0 / fragz) * bright, 0.0, 1.0);

	gl_FragColor = pixel;

}
</pre><br><br>(Note also bb_zNear and bb_zFar, also provided by Max3D.)<br><br>Is it possible to do something similar with OpenB3D? <br><br></td></tr></table><br>
<a name="1246519"></a>

<a name="1246520"></a>

<a name="1246521"></a>

<a name="1246522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#159">[#159]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Krischan, I have updated the wrapper with another fix attempt for the max2d bug. This uses exactly the same gfx init code as minib3d. So give it a try.<br><br>Happy Sammy, try this https://web.archive.org/web/20131213164018/http://www.frecle.net/update/download.php [giles_2_beta_4.zip].<br><br>BlitzSupport, I have no idea how you would do that. <br><br></td></tr></table><br>
<a name="1246524"></a>

<a name="1246527"></a>

<a name="1246528"></a>

<a name="1246530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Happy Sammy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#160">[#160]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot, munch!!!!!<br>With the help of the above link, we can get back gile[s] and tree[d] and forum posts relating to gile[s].<br>https://web.archive.org/web/20110116171149/http://www.frecle.net/index.php?show=projects <br><br></td></tr></table><br>
<a name="1246529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#161">[#161]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzSupport, the problem is getting the depth buffer data. Angros had a method to access it here. <a href="http://www.freebasic.net/forum/viewtopic.php?f=14&amp;t=15409&amp;start=690" target="_blank">http://www.freebasic.net/forum/viewtopic.php?f=14&amp;t=15409&amp;start=690</a> <br><br></td></tr></table><br>
<a name="1246535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#162">[#162]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for the link ,munch! <br><br></td></tr></table><br>
<a name="1246541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#163">[#163]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem Happy Sammy and petimat. Just lucky fredborg never did robots.txt. :)<br><br>BlitzSupport, I tried adding DepthBufferToTex to the library and it seemed to work in Linux (I got like a greyscale render) but it MAV'd in Windows (at RenderWorld) so I have rem'd it out for now. <br><br></td></tr></table><br>
<a name="1246548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#164">[#164]</a></td></tr></table></td></tr><tr ><td class="posttext"> Munch, it still crashes. But the CreateTexture.bmx example works. So I compared the two examples and uncommented some lines and it looks like it has to do with the teapot model - replacing this with another model from the media folder still crashes the program. Replacing the model with a simple CreateCube function crashes, too.<br><br>The only difference is that BeginMax2D/EndMax2D in CreateTexture.bmx is called once, while in the Max2D.bmx example it is called within the main loop. Adding these two commands to the CreateTexture.bmx Main Loop crashes there, too. So it seems to be that it doesn't like multiple calls of it.<br><br>You should investigate this further.<br><br>Runs:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">' max2d.bmx
' from minib3d examples

Import Angros.Openb3d

Strict

Global width%=800,height%=600,depth%=0,mode%=2

Graphics3D width,height,depth,mode


' Initialise MiniB3D program (spheremap)
' --------------------------------------

Local cam:TCamera=CreateCamera()
PositionEntity cam,0,0,-3

Local light:TLight=CreateLight()
RotateEntity light,90,0,0

' load object we will apply spheremap to - the classic teapot
'Local teapot:TMesh=LoadMesh("media/teapot.b3d")

' load texture with color + spherical environment map
'Local tex:TTexture=LoadTexture("media/spheremap.bmp",1+64)

' apply spherical environment map to teapot
'EntityTexture teapot,tex


' Initialise Max2D program
' ------------------------

' Create a spark type
Type spark
	Field x#,y#,z#,vy#,xd#,yd#,zd#,r#,g#,b#,alpha#
End Type

' Load spark image
Global sparki:TImage=LoadImage("media/spark.png")

' Set no. of sparks to be created per firework
Global no_sparks%=500

' Create spark list
Global spark_list:TList=New TList

' Load and set font
Global font:TImageFont=LoadImageFont("Arial.ttf",1)
SetImageFont font


' Main loop
' ---------

' used by fps code
Local old_ms%=MilliSecs()
Local renders%, fps%

While Not KeyDown(KEY_ESCAPE)

	' control camera
	MoveEntity cam,KeyDown(KEY_D)-KeyDown(KEY_A),0,KeyDown(KEY_W)-KeyDown(KEY_S)
	TurnEntity cam,KeyDown(KEY_DOWN)-KeyDown(KEY_UP),KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT),0
	
	'TurnEntity teapot,0,1,0

	RenderWorld
	renders=renders+1
		
	' calculate fps
	If MilliSecs()-old_ms&gt;=1000
		old_ms=MilliSecs()
		fps=renders
		renders=0
	EndIf
	
	Text 0,0,"FPS: "+fps

	BeginMax2D() ' MiniB3D function
	UpdateMax2D() ' your function
	EndMax2D() ' MiniB3D function

	Flip
	Cls

Wend
End


Function UpdateMax2D()

	' If space key pressed then create new set of sparks (new firework)

	If KeyHit(KEY_SPACE)

		Local x#=Rand(-100,100)
		Local y#=Rand(-100,100)
		Local z#=200

		Local r#=Rand(255)
		Local g#=Rand(255)
		Local b#=Rand(255)

		For Local i%=1 To no_sparks

			Local speed#=0.1

			Local ang1#=Rnd!(360)
			Local ang2#=Rnd!(360)

			Local sp:spark=New Spark
			spark_list.AddLast sp

			sp.x=x#
			sp.y=y#
			sp.z=z#

			sp.xd=Cos(ang1#)*Cos(ang2#)*speed#
			sp.yd=Cos(ang1#)*Sin(ang2#)*speed#
			sp.zd=Sin(ang1#)*speed#
	
			sp.r=r
			sp.g=g
			sp.b=b
			sp.alpha=1
	
		Next

	EndIf

	' Draw all sparks

	For Local sp:spark=EachIn spark_list

		' If spark alpha is above 0 then draw it...

		If sp.alpha&gt;0

			sp.x=sp.x+sp.xd*10.0
			sp.y=sp.y+sp.yd*10.0
			sp.z=sp.z+sp.zd*10.0
			sp.y=sp.y+sp.vy#
			sp.vy=sp.vy+0.02

			' Calculate x and y draw values based on x,y,z co-ordinates
			Local x#=(width/2.0)+((sp.x/sp.z)*500)
			Local y#=(height/2.0)+((sp.y/sp.z)*500)

			sp.alpha=sp.alpha-0.01

			SetColor sp.r#,sp.g#,sp.b#
			SetBlend LIGHTBLEND
			SetAlpha sp.alpha
			SetScale 20/sp.z,20/sp.z
			DrawImage sparki,x#,y#

		'...else remove spark from spark list

		Else

			spark_list.Remove sp

		EndIf

	Next

	SetBlend SOLIDBLEND
	SetScale 1,1
	SetColor 255,255,255
	DrawText "Press space to ignite firework",0,20
	
End Function</textarea><br><br>Crashes:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">' max2d.bmx
' from minib3d examples

Import Angros.Openb3d

Strict

Global width%=800,height%=600,depth%=0,mode%=2

Graphics3D width,height,depth,mode


' Initialise MiniB3D program (spheremap)
' --------------------------------------

Local cam:TCamera=CreateCamera()
PositionEntity cam,0,0,-3

Local light:TLight=CreateLight()
RotateEntity light, 90, 0, 0

Local teapot:TMesh = CreateCube()

' load object we will apply spheremap to - the classic teapot
'Local teapot:TMesh=LoadMesh("media/teapot.b3d")

' load texture with color + spherical environment map
'Local tex:TTexture=LoadTexture("media/spheremap.bmp",1+64)

' apply spherical environment map to teapot
'EntityTexture teapot,tex


' Initialise Max2D program
' ------------------------

' Create a spark type
Type spark
	Field x#,y#,z#,vy#,xd#,yd#,zd#,r#,g#,b#,alpha#
End Type

' Load spark image
Global sparki:TImage=LoadImage("media/spark.png")

' Set no. of sparks to be created per firework
Global no_sparks%=500

' Create spark list
Global spark_list:TList=New TList

' Load and set font
Global font:TImageFont=LoadImageFont("Arial.ttf",1)
SetImageFont font


' Main loop
' ---------

' used by fps code
Local old_ms%=MilliSecs()
Local renders%, fps%

While Not KeyDown(KEY_ESCAPE)

	' control camera
	MoveEntity cam,KeyDown(KEY_D)-KeyDown(KEY_A),0,KeyDown(KEY_W)-KeyDown(KEY_S)
	TurnEntity cam,KeyDown(KEY_DOWN)-KeyDown(KEY_UP),KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT),0
	
	'TurnEntity teapot,0,1,0

	RenderWorld
	renders=renders+1
		
	' calculate fps
	If MilliSecs()-old_ms&gt;=1000
		old_ms=MilliSecs()
		fps=renders
		renders=0
	EndIf
	
	Text 0,0,"FPS: "+fps

	BeginMax2D() ' MiniB3D function
	UpdateMax2D() ' your function
	EndMax2D() ' MiniB3D function

	Flip
	Cls

Wend
End


Function UpdateMax2D()

	' If space key pressed then create new set of sparks (new firework)

	If KeyHit(KEY_SPACE)

		Local x#=Rand(-100,100)
		Local y#=Rand(-100,100)
		Local z#=200

		Local r#=Rand(255)
		Local g#=Rand(255)
		Local b#=Rand(255)

		For Local i%=1 To no_sparks

			Local speed#=0.1

			Local ang1#=Rnd!(360)
			Local ang2#=Rnd!(360)

			Local sp:spark=New Spark
			spark_list.AddLast sp

			sp.x=x#
			sp.y=y#
			sp.z=z#

			sp.xd=Cos(ang1#)*Cos(ang2#)*speed#
			sp.yd=Cos(ang1#)*Sin(ang2#)*speed#
			sp.zd=Sin(ang1#)*speed#
	
			sp.r=r
			sp.g=g
			sp.b=b
			sp.alpha=1
	
		Next

	EndIf

	' Draw all sparks

	For Local sp:spark=EachIn spark_list

		' If spark alpha is above 0 then draw it...

		If sp.alpha&gt;0

			sp.x=sp.x+sp.xd*10.0
			sp.y=sp.y+sp.yd*10.0
			sp.z=sp.z+sp.zd*10.0
			sp.y=sp.y+sp.vy#
			sp.vy=sp.vy+0.02

			' Calculate x and y draw values based on x,y,z co-ordinates
			Local x#=(width/2.0)+((sp.x/sp.z)*500)
			Local y#=(height/2.0)+((sp.y/sp.z)*500)

			sp.alpha=sp.alpha-0.01

			SetColor sp.r#,sp.g#,sp.b#
			SetBlend LIGHTBLEND
			SetAlpha sp.alpha
			SetScale 20/sp.z,20/sp.z
			DrawImage sparki,x#,y#

		'...else remove spark from spark list

		Else

			spark_list.Remove sp

		EndIf

	Next

	SetBlend SOLIDBLEND
	SetScale 1,1
	SetColor 255,255,255
	DrawText "Press space to ignite firework",0,20
	
End Function</textarea> <br><br></td></tr></table><br>
<a name="1246871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#165">[#165]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for having a look, anyway, munch! Interesting that it seems to work on Linux but not Windows... it sounds like your greyscale render was doing the right thing at least.<br><br>Are you able to post an example of using DepthBufferToTex so I can mess about with it? Not that I expect to be able to resolve it, but would be interested in taking a look! <br><br></td></tr></table><br>
<a name="1246876"></a>

<a name="1246877"></a>

<a name="1246878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#166">[#166]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, there's an example there sl_dof.bmx (which is just tex_render modified) but you need to find the commented out blocks in the wrapper (dynamic and functions bmx files) then the library (functions and texture cpp&amp;h files) and make the library to test the example.<br><br>Also, I regressed your shader code to 110 as my pc only does 120. So it uses texture2d (as texture2drect is 140) which I believe is limited to power of 2 sizes.<br><br>I think something is wrong with the DepthBufferToTex code but I couldn't find much about it so gave up. The glTexParameteri line crashes it in Win and GL_DEPTH_COMPONENT may need to have code to use the right bit depth. <br><br></td></tr></table><br>
<a name="1247001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#167">[#167]</a></td></tr></table></td></tr><tr ><td class="posttext"> Version 0.9 is online.<br><br>As promised, I updated the license to allow static linking, and I removed the glBegin occurrences.<br><br>Also, I added support for md2 files, and I introduced a couple of features "borrowed" from minib3d for Monkey: animation mode 4 for manual bone movement, and animation pre-rendering for instanced meshes.<br><br>But the main new feature is metaballs support: you can use it to create blobs, and organic-like forms: the algorithm used is called "marching cubes", and maybe in future versions could be used to add even more features (like caverns, a new kind of terrains... but also more "abstract" ones, like generic isosurfaces)<br><br> <a href="http://sourceforge.net/projects/minib3d/files/" target="_blank">http://sourceforge.net/projects/minib3d/files/</a> <br><br></td></tr></table><br>
<a name="1247004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#168">[#168]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent !!<br><br>Now we can look forward to perhaps supporting OpenGL ES 2 (Pi, Android, iOS, etc) :-) <br><br></td></tr></table><br>
<a name="1247048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#169">[#169]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, munch/angros, will take a look in the next couple of days! <br><br></td></tr></table><br>
<a name="1247051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#170">[#170]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Version 0.9 is online. <br></div><br>Things aren't rendering so well here - on OS X. Most things appear as pure white - for example, the building in the ball collisions demo, but the balls themselves look okay.<br>Haven't tried it yet on the other platforms. <br><br></td></tr></table><br>
<a name="1247093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#171">[#171]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you post a screenshot? <br><br>With 0.8 version did you get a different result? <br><br></td></tr></table><br>
<a name="1247107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#172">[#172]</a></td></tr></table></td></tr><tr ><td class="posttext"> With version 8 everything was working fine on all 3 platforms.<br><br>It's almost as if there aren't any images being displayed on the objects.<br><br><div class="quote"> Could you post a screenshot? <br></div><br>I can do so later. But for now, just imagine certain objects being rendered in white :-) <br><br></td></tr></table><br>
<a name="1247110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#173">[#173]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, models are textured.<br><br>Do you use "vanilla" 0.8, or a modified one? Because, if you modified the version 0.8 you have to do the same change in version 0.9 (remember that "vanilla" OpenB3D strips path data from texture name.<br><br>Also, there is a small change in the texture blending mode: in old version, mode 0 and mode 1 were identical (GL_REPLACE), while in 0.9 mode 0 uses GL_REPLACE, mode 1 uses GL_DECAL; try changing texture blending mode with TextureBlend.<br><br>Another change is that I replaced the image loader (that was stb 1.31) with a newer version (1.35), but, unless there is some serious bug in it, the new version should be able to load every file supported by the older version. <br><br></td></tr></table><br>
<a name="1247124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >feeble1</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#174">[#174]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try throwing all the texture files in the main folder.  I believe Munch altered the texture handling. <br><br></td></tr></table><br>
<a name="1247157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#175">[#175]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's sorted it, thanks folks! :-) <br><br></td></tr></table><br>
<a name="1247174"></a>

<a name="1247175"></a>

<a name="1247176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#176">[#176]</a></td></tr></table></td></tr><tr ><td class="posttext"> @munch: I followed your rebuild instructions (very easy to follow) and... DepthBufferToTex seems to work for me here on Windows 7!<br><br><a href="http://www.hi-toro.com/blitz/images/depthtotex.png" target="_blank">Click!</a><br><br>Will have to experiment, but that certainly looks like it's working.<br><br>I noticed your comment about shader code versions -- I have no idea what version I was using, but maybe it's related to your own Windows OpenGL drivers if it works here (and on your Linux side)... ? <br><br></td></tr></table><br>
<a name="1247187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#177">[#177]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where can I find those 'rebuild instructions' ? <br><br></td></tr></table><br>
<a name="1247189"></a>

<a name="1247190"></a>

<a name="1247191"></a>

<a name="1247192"></a>

<a name="1247193"></a>

<a name="1247327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#178">[#178]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have updated the wrapper and library and source to 0.9. There are 3 new functions wrapped: CreateBlob, CreateFluid and SpriteRenderMode but no example yet. The static wrapper is in along with the new license file. <br><br>DepthBufferToTex is back (thanks for the test BlitzSupport!). I tried to update my OpenGL driver but it just said they were already up-to-date. Even though I was trying to install a newer version. :P Btw, I have GL 2.0 in Windows and in Linux it's 2.1 so it may be something to do with that. I updated the sl_dof.bmx example so the texture is rendered to the screen.<br><br>petimat, using my version of the source you just "cd" to the src folder then "make glee" and "make". Also, you don't need to make glee on Linux. <br><br></td></tr></table><br>
<a name="1247257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#179">[#179]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried the new version. Awesome job! <br><br>btw: the max2d example locks up when it hits 'BeginMax2D'. <br><br></td></tr></table><br>
<a name="1247268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#180">[#180]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here I posted an example (in FreeBasic) of the use of metaballs:<br><br><a href="http://freebasic.net/forum/viewtopic.php?p=202675#p202675" target="_blank">http://freebasic.net/forum/viewtopic.php?p=202675#p202675</a><br><br><img src="http://s9.postimg.org/tgfg4m7e7/Schermata_del_2014_11_14_21_18_19.png"> <br><br></td></tr></table><br>
<a name="1247286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >feeble1</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#181">[#181]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good luck with your marching cubes terrain.   I had trouble with extracting iso surfaces from my maps.  I am pretty sure that you are smart enough though! <br><br></td></tr></table><br>
<a name="1247304"></a>

<a name="1247305"></a>

<a name="1247306"></a>

<a name="1247307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#182">[#182]</a></td></tr></table></td></tr><tr ><td class="posttext"> Been playing with 0.9 and cross-referencing to Mark's old Max3D (since that's my only reference for playing with GLSL so far!)...<br><br>Decided to strip things down, ending up with this (I've set the textures to the screen size, as that's what Max3D did... confirmed after much searching through its source). As it stands, it sets up the shader but doesn't yet use it:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import Angros.Openb3d

Strict

Local width:Int = 1024, height:Int = 768

Graphics3D width, height, 0, 2

ClearTextureFilters

Local colorbuf:TTexture = CreateTexture (GraphicsWidth (), GraphicsHeight ())
Local depthbuf:TTexture = CreateTexture (GraphicsWidth (), GraphicsHeight ())

Local shader:TShader = LoadShader ("", "shaders/dof.vert.glsl", "shaders/dof.frag2.glsl")

ShaderTexture (shader, colorbuf, "bb_ColorBuffer", 0)
ShaderTexture (shader, depthbuf, "bb_DepthBuffer", 1)

SetFloat shader,	"bright",		1.0
SetFloat shader,	"bb_zNear",		1.0
SetFloat shader,	"bb_zFar",		1000.0
SetFloat2 shader,	"resolution",	GraphicsWidth (), GraphicsHeight ()
SetFloat shader,	"yoffset",		(GraphicsWidth () - GraphicsHeight ()) / 2 - 5

Local cam:TCamera	= CreateCamera ()
Local cube:TMesh	= CreateCube ()
Local light:TLight	= CreateLight ()

CameraClsColor cam, 64, 64, 128
EntityColor cube, 255, 0, 0

MoveEntity cam, 0, 0, -10
MoveEntity light, -5, 7, -2

PointEntity light, cube

While Not KeyHit (KEY_ESCAPE)

	If KeyDown (KEY_A) MoveEntity cam, 0, 0, 1
	If KeyDown (KEY_Z) MoveEntity cam, 0, 0, -1
	
	If KeyDown (KEY_LEFT) TurnEntity cam, 0, -1, 0
	If KeyDown (KEY_RIGHT) TurnEntity cam, 0, 1, 0
	
	TurnEntity cube, 0.2, 0.4, 0.8
	
	BackBufferToTex colorbuf
	DepthBufferToTex depthbuf

	RenderWorld
	
	Flip
	
Wend
</textarea><br><br>... but it seems like Max3D automatically updated the display if your pixel/fragment shader wrote to the colour buffer (there was no grabbing of the backbuffer/depthbuffer, or re-rendering, so it looks like it must have all been handled during the rendering process).<br><br>In OpenB3D, it seems like the only way I'll get my modified "colorbuf" texture to show using the above code is to create/hide a fullscreen quad (and associated camera), apply colorbuf to the quad, set the shader to apply to it, then:<br><br><pre class=code>
Repeat

	show main camera
	hide fullscreen quad/camera
	grab colour/depth buffers
	RenderWorld

	[shader modifies colour buffer here?]

	hide main camera
	show fullscreen camera/quad with modified colour buffer as texture
	RenderWorld

Forever
</pre><br><br>Does this sound like the right way to handle this? (The point being to use the depth buffer values to modify the colour buffer values taken from the full-screen display -- eg. apply a blur based on depth value of each pixel -- then display the full-screen result.) <br><br></td></tr></table><br>
<a name="1247328"></a>

<a name="1247329"></a>

<a name="1247330"></a>

<a name="1247331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#183">[#183]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just added the metaballs sample to the wrapper. Cool stuff Angros! Thanks.<br><br>Btw, I made a mistake in wrapping CreateBlob so fixed that too. I notice the blobs have a lod and they get blocky very quickly when you move away. So I wonder if it would be possible to set the level of detail higher?<br><br>Also I added an example load_md2.bmx but it seems to not load any textures and there is random crashing for no reason.<br><br>Krischan, thanks for looking into the Max2D bug. Unfortunately, I don't have any more ideas but maybe I will think of one.<br><br>BlitzSupport, I don't know any better way than that, but it will be probably be very slow (being software-based). <br><br></td></tr></table><br>
<a name="1247345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#184">[#184]</a></td></tr></table></td></tr><tr ><td class="posttext"> Damn I can't get it running again with the update. What do I do wrong here?<br><br><div class="quote"> Warning: resolving _glewInit by linking to _glewInit@0<br>Use --disable-stdcall-fixup to disable these fixups<br>C:/Apps/BlitzMax/mod/angros.mod/openb3d.mod/libopenb3d-win.a(functions.o):functions.cpp:(.text+0x9a0): undefined reference to `_Unwind_Resume'<br>C:/Apps/BlitzMax/mod/angros.mod/openb3d.mod/libopenb3d-win.a(functions.o):functions.cpp:(.text+0xbf0): undefined reference to `_Unwind_Resume'<br>C:/Apps/BlitzMax/mod/angros.mod/openb3d.mod/libopenb3d-win.a(functions.o):functions.cpp:(.text+0xcb4): undefined reference to `_Unwind_Resume' <br></div> <br><br></td></tr></table><br>
<a name="1247362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#185">[#185]</a></td></tr></table></td></tr><tr ><td class="posttext"> @munch<br>For md2 files, you need to load and set texture by hand using LoadTexture and EntityTexture: that's not a big issue, since a md2 model can have only one texture, that usually has the same name of the model.<br><br>I could not include the texture loading in md2 loader, because it'd try to load a texture in PCX format, that is not supported (you need to convert it to jpg or png, so you have to change name)<br><br>About metaball lod: to use higher resolution just change camera range; you could modify lod levels in file metaball.cpp by changing all occurrences of "if (rc*.1&gt;3*l)", but you shouldn't: in fact, metaball surfaces is calculated by computing a scalar field for EVERY node in the camera view: if there are many metaballs this can be really computationally expensive, hence the need of using a lod solution.<br><br>Classic 3d metaball demos (there is one in Blitz3d, too) used a smaller grid (i.e. 30 * 30 * 30), computed the scalar field for every node (27000 of them), then built the surfaces: it produced nice results, but metaballs were confined in a "cage" made by the grid. <br><br>My solution allows to place metaballs almost everyware, but this would require an almost infinite grid: so, it's impossible to compute it: only the part of it that is in view need to be computed, and the lod allows to have a limited number of nodes <br><br></td></tr></table><br>
<a name="1247378"></a>

<a name="1247380"></a>

<a name="1247381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#186">[#186]</a></td></tr></table></td></tr><tr ><td class="posttext"> Krischan, my bad. I didn't test Windows yet. That'll teach me.<br><br>It looks like a problem static linking to Glee. <br><br></td></tr></table><br>
<a name="1247411"></a>

<a name="1247412"></a>

<a name="1247413"></a>

<a name="1247414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#187">[#187]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok! The problem was that the archive file needs to be built with the same version of mingw or you get these "undefined reference" errors. I had the same errors as Krischan because I was using tdm 4.7 for Max builds and nuwen 4.6 to make the library (I found out that you have to type "mingw32-make" in tdm instead of just "make"). <br><br>So I'm thinking I really should do the source wrapper instead of the static library wrapper since it avoids this trouble. <br><br></td></tr></table><br>
<a name="1247510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#188">[#188]</a></td></tr></table></td></tr><tr ><td class="posttext"> @angros47<br><br>Thanks for the new version.<br>That metaball thing is fun.The animation mod 4 must be good for changeing "animation to ragdoll" and back (I think.Somehing new to play with).However I couldn't make the .md2 file animate.Animate command has no effect on the model,the SetAnimTime causes an unhandled memory exception error in BliztMax (I didn't plan to use .md2 anyway)<br><br>@munch<br><br>Thanks for the wrapper,the dynamic linked version works for me.<br>...and thanks for the build instructions...I managed to extend the library with the SetShadowColor function.(YAY!!) <br><br></td></tr></table><br>
<a name="1247511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#189">[#189]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you post a link to your md2 model, I'll have a look. <br><br></td></tr></table><br>
<a name="1247518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >petimat</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#190">[#190]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's the one that comes with munch's examples...but I tried zumlin.md2 also (you can find one<a href="http://au3irrlicht2.googlecode.com/svn/trunk/media/" target="_blank"> here!</a>) <br><br></td></tr></table><br>
<a name="1247520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#191">[#191]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried with zumlin.md2, it works here (both linux and win32 version).  I can't reproduce your problem. <br><br></td></tr></table><br>
<a name="1247521"></a>

<a name="1247522"></a>

<a name="1247533"></a>

<a name="1247534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#192">[#192]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://i.imgur.com/5sI98b0.png"><br><br>It's beautiful! (and x64)<br><br>Edit:  When I used Brucey's SDL module, I got about 4500 average FPS instead of 3800 <br><br></td></tr></table><br>
<a name="1247531"></a>

<a name="1247532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#193">[#193]</a></td></tr></table></td></tr><tr ><td class="posttext"> SDL:<br><br><img src="http://i.imgur.com/0V7sH0V.png"><br><br>Keep up the good work guys! <br><br></td></tr></table><br>
<a name="1247548"></a>

<a name="1247557"></a>

<a name="1247558"></a>

<a name="1247559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#194">[#194]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've included a source wrapper version which I assume is ok now license-wise. It's now the default option in openb3d.bmx. <br><br>I deleted the static libraries from github so you have to build your own ("make glee" then "make archive") to avoid the static linking errors if gcc versions are different.<br><br>Angros, thanks. I updated load_md2.bmx with loadtexture but strangely on Windows it MAV's on SetAnimTime every time, on Linux it MAV's some times randomly for the same reason. I used the tris.md2 from klepto's demos.<br><br>I tried setting different CameraRange values for the metaballs but it doesn't seem to affect them. If I zoom out about 100m they turn into little diamonds. It would be nice if they had a minimum lod so they would always stay blobs.<br><br>Chapman7, looks good. I'm a little jealous. :) <br><br></td></tr></table><br>
<a name="1247573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#195">[#195]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm I don't get it running. I've copied the contents of angros.openb3d-master.zip, openb3d-library-master.zip and openb3d-source-master.zip to the mod folder and the recompile with "bmk makemods -a angros.openb3d" took more time but has been finished without any errors.<br><br>I get the error<br><br><div class="quote"> Warning: resolving _glewInit by linking to _glewInit@0<br>Use --disable-stdcall-fixup to disable these fixups<br>C:/Apps/BlitzMax/mod/angros.mod/openb3d.mod/openb3d.release.win32.x86.a(global.cpp.release.win32.x86.o):global.cpp:(.text+0x2c6): undefined reference to `std::_List_node_base::_M_hook(std::_List_node_base*)'<br>C:/Apps/BlitzMax/mod/angros.mod/openb3d.mod/openb3d.release.win32.x86.a(global.cpp.release.win32.x86.o):global.cpp:(.text$_ZNSt4listIP6CameraSaIS1_EE5mergeIPFbP6EntityS6_EEEvRS3_T_[__ZNSt4listIP6CameraSaIS1_EE5mergeIPFbP6EntityS6_EEEvRS3_T_]+0x60): <br></div><br><br>My angros.mod folder currently looks like this: <a href="http://www.christianhart.de/bmax/angros.mod.zip" target="_blank">angros.mod.zip</a><br><br>What else need I do here? I don't have a "make" command, can you describe step by step please? <br><br></td></tr></table><br>
<a name="1247579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#196">[#196]</a></td></tr></table></td></tr><tr ><td class="posttext"> About metaball lod: a single metaball does not have any surface: the fluid entity has a single surface that is computed every frame (in fact, you set color for fluid, not for blobs, if you look at the demo).<br><br>So, determining the lod is not like on a terrain or a geosphere (on a geosphere, the program always know when a geosphere is): a fluid is a huge entity, that is always in view, and always need to be computed. Of course, only the portion inside the view frustum is reconstructed, and the resolution decrease when you get far from the camera. By setting a minimum lod, you'd have a grid that will include a number of node proportional to the squared distance, so either you truncate it somewhere (i.e. by using camerarange), or you'll need too much time to render the scene... even if there is no metaball at that distance!<br><br>A workaround, if you don't like the diamond shape, is to add a sphere a bit smaller than the metaball, inside it (of course, it works only if there are no metaballs with negative charge, and the su race is not transparent): when the lod is too low, you will still see the sphere mesh. <br><br></td></tr></table><br>
<a name="1247580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#197">[#197]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What else need I do here? I don't have a "make" command, can you describe step by step please? <br></div><br>Munch's process is rather complex. Make this, make that, etc.<br>I prefer simply to have everything built as part of a module - otherwise one should provide all the parts you will need, pre-built, assuming you would be using a compatible compiler. (Which can work well if you specify all the requirements beforehand)<br><br>Not sure why an SDL created context would be so much faster. Cool though :-) <br><br></td></tr></table><br>
<a name="1247636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sashkakuhta</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#198">[#198]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to texture the fluid somehow? BTW attempting to texture it leads to messing up the fonts... <br><br></td></tr></table><br>
<a name="1247658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#199">[#199]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, you can texture the fluid, but you cannot set UV coordinates (they are automatically set by the renderer), since the surface is dynamic.<br><br>You can also use a cubemap texture. <br><br></td></tr></table><br>
<a name="1247661"></a>

<a name="1247662"></a>

<a name="1247663"></a>

<a name="1247664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#200">[#200]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I thought I'd just simplified everything with the source wrapper. <br><br>Krischan, do you have the src folder in the openb3d.mod folder? Oh you do. I'll have a look at your zip but I have tested it in Windows and it worked fine.<br><br>Okay, Krischan I just rebuilt the module from your zip and it works here. So I have to assume you have a problem in your MinGW install. <br><br></td></tr></table><br>
<a name="1247776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#201">[#201]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; Okay, Krischan I just rebuilt the module from your zip and it works here. So I have to assume you have a problem in your MinGW install. <br><br>Hmm, it compiled here without errors, too. However, I've upgrade my MinGW to the newest version but it still doesn't work. But why did it compile in 0.8 and worked, even with the older MinGW installation? I'd really test your library but I can't :-( You should upload a precompiled, running angros.mod distribution for Windows like Brucey suggests or add detailed step by step install instruction how to build it and what prerequisites are needed currently. I'm very confused reading the whole thread again.<br><br>Here is the logfile of my compile attempt:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">c:\Apps\BlitzMax\bin&gt;bmk makemods -a angros.openb3d
Compiling:3ds.cpp
Compiling:animation.cpp
Compiling:animation_keys.cpp
Compiling:bank.cpp
Compiling:bone.cpp
Compiling:brush.cpp
Compiling:camera.cpp
Compiling:collision.cpp
Compiling:collision2.cpp
Compiling:csg.cpp
Compiling:entity.cpp
Compiling:file.cpp
Compiling:functions.cpp
Compiling:geom.cpp
Compiling:geosphere.cpp
Compiling:global.cpp
Compiling:light.cpp
Compiling:material.cpp
Compiling:maths_helper.cpp
Compiling:matrix.cpp
Compiling:md2.cpp
Compiling:mesh.cpp
Compiling:metaball.cpp
Compiling:model.cpp
Compiling:octree.cpp
Compiling:particle.cpp
Compiling:pick.cpp
Compiling:pivot.cpp
Compiling:project.cpp
Compiling:quaternion.cpp
Compiling:shadow.cpp
Compiling:sprite.cpp
Compiling:sprite_batch.cpp
Compiling:stencil.cpp
Compiling:string_helper.cpp
Compiling:surface.cpp
Compiling:terrain.cpp
Compiling:texture.cpp
Compiling:texture_filter.cpp
Compiling:tilt.cpp
Compiling:touch.cpp
Compiling:tree.cpp
Compiling:voxel.cpp
Compiling:x.cpp
Compiling:collidetri.c
Compiling:stb_image.c
Compiling:GLee.c
Compiling:source.bmx
flat assembler  version 1.70.03  (1048575 kilobytes memory)
4 passes, 198033 bytes.
Compiling:openb3d.bmx
flat assembler  version 1.70.03  (1048575 kilobytes memory)
3 passes, 686 bytes.
Archiving:openb3d.debug.win32.x86.a
ar: creating c:/Apps/BlitzMax/mod/angros.mod/openb3d.mod/openb3d.debug.win32.x86.a
Compiling:3ds.cpp
Compiling:animation.cpp
Compiling:animation_keys.cpp
Compiling:bank.cpp
Compiling:bone.cpp
Compiling:brush.cpp
Compiling:camera.cpp
Compiling:collision.cpp
Compiling:collision2.cpp
Compiling:csg.cpp
Compiling:entity.cpp
Compiling:file.cpp
Compiling:functions.cpp
Compiling:geom.cpp
Compiling:geosphere.cpp
Compiling:global.cpp
Compiling:light.cpp
Compiling:material.cpp
Compiling:maths_helper.cpp
Compiling:matrix.cpp
Compiling:md2.cpp
Compiling:mesh.cpp
Compiling:metaball.cpp
Compiling:model.cpp
Compiling:octree.cpp
Compiling:particle.cpp
Compiling:pick.cpp
Compiling:pivot.cpp
Compiling:project.cpp
Compiling:quaternion.cpp
Compiling:shadow.cpp
Compiling:sprite.cpp
Compiling:sprite_batch.cpp
Compiling:stencil.cpp
Compiling:string_helper.cpp
Compiling:surface.cpp
Compiling:terrain.cpp
Compiling:texture.cpp
Compiling:texture_filter.cpp
Compiling:tilt.cpp
Compiling:touch.cpp
Compiling:tree.cpp
Compiling:voxel.cpp
Compiling:x.cpp
Compiling:collidetri.c
Compiling:stb_image.c
Compiling:GLee.c
Compiling:source.bmx
flat assembler  version 1.70.03  (1048575 kilobytes memory)
3 passes, 72877 bytes.
Compiling:openb3d.bmx
flat assembler  version 1.70.03  (1048575 kilobytes memory)
3 passes, 351 bytes.
Archiving:openb3d.release.win32.x86.a
ar: creating c:/Apps/BlitzMax/mod/angros.mod/openb3d.mod/openb3d.release.win32.x86.a</textarea> <br><br></td></tr></table><br>
<a name="1247785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#202">[#202]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem with providing precompiled binaries is that there can still be compiler conflicts if the user has a different compiler version. This didn't happen before because you don't get this type of conflict with dynamic libraries, only static libraries (which is also what the source wrapper is and all bmx modules). If you edit openb3d.bmx to use dynamic.bmx and then do a makemods it should work fine if the dll is in examples folder. <br><br>If you want to use source.bmx to have it all built into the exe then you should make sure you installed MinGW correctly. The best guide for installing MinGW is <a href="/posts.php?topic=95220" target="_blank">here</a>. There is an extra step in Windows that isn't in the other MinGW guide which involves copying the libraries from MinGW to BlitzMax/lib. This is probably what is causing your errors. You need to copy that code, give it a .bat extension, edit the 3 variables at the top, then run it in cmd. Then rebuild all modules. If you have done this step then I don't know what else to suggest. <br><br></td></tr></table><br>
<a name="1247787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#203">[#203]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  There is an extra step in Windows that isn't in the other MinGW guide which involves copying the libraries from MinGW to BlitzMax/lib. <br></div><br>It's always been a bit of a pain that. Which is why, with the latest bmk for the new compiler, you can now create a folder called MinGW32 in your BlitzMax folder and drop the contents of the standard MinGW install into it, and it will all just work - i.e. you don't need any files in lib, nor ar.exe and ld.exe in bin. That is definitely the way forward, if you ask me. The less stuff to do the better - and the less mistakes to be made!<br><br>Also for the new compiler I re-engineered your OpenB3D modules : <a href="https://github.com/bmx-ng/b3d.mod" target="_blank">https://github.com/bmx-ng/b3d.mod</a><br>Which is what Chapman7 used. I split things up because I needed to be able to have SDL as a backend also, and I decided to use Glew instead of GLee, since Glew is already part of BlitzMax.<br>Also looking at replacing the Map stuff (String(Long(ptr))) with a new TPtrMap, which is about 2-3x faster. But I'm still testing that. <br><br></td></tr></table><br>
<a name="1247862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#204">[#204]</a></td></tr></table></td></tr><tr ><td class="posttext"> That looks great Brucey. I like the way you reorganized the wrapper. I think I will copy your layout for my version actually, since it makes installing easier and we might as well use Glew if it's a source wrapper. And yes, TPtrMap would certainly be nice to have. <br><br></td></tr></table><br>
<a name="1247876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#205">[#205]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey - where do I get the SDL stuff?<br><br>&gt; Compile Error: Can't find interface for module 'sdl.glsdlmax2d' <br><br></td></tr></table><br>
<a name="1247881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#206">[#206]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="https://github.com/bmx-ng/" target="_blank">https://github.com/bmx-ng/</a> <br><br></td></tr></table><br>
<a name="1247891"></a>

<a name="1247893"></a>

<a name="1247895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#207">[#207]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doesn't work, i'm getting errors on compiling sdl.mod<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">&amp;#9658;sdl.sdl was scheduled to next iteration
In file included from C:/Apps/BlitzMax/mod/brl.mod/blitz.mod/blitz.h:21:0,
                 from C:/Apps/BlitzMax/mod/sdl.mod/sdl.mod/glue.c:26:
C:/Apps/BlitzMax/mod/sdl.mod/sdl.mod/glue.c: In function 'bmx_SDL_FreeRW_stream':
C:/Apps/BlitzMax/mod/brl.mod/blitz.mod/blitz_gc.h:57:33: error: request for member 'refs' in something not a structure or union
 #define BBRELEASE(X) {if( !--(X)-&gt;refs ) bbGCFree(X);}
                                 ^
C:/Apps/BlitzMax/mod/sdl.mod/sdl.mod/glue.c:80:3: note: in expansion of macro 'BBRELEASE'
   BBRELEASE(ops-&gt;hidden.unknown.data1);
   ^
Build Error: failed to compile C:/Apps/BlitzMax/mod/sdl.mod/sdl.mod/glue.c
&amp;#9658;&amp;#9658;&amp;#9658;&amp;#9658;sdl.sdl was not built. See error information on latest attempt.</textarea><br><br>Ok guys you've won, I must stay with vanilla minib3d and OpenGL 1.0 until I die. This still works even if my whole Blitzmax installation is screwed up now :-( It would have been too nice, now I'm depressed. <br><br></td></tr></table><br>
<a name="1247907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#208">[#208]</a></td></tr></table></td></tr><tr ><td class="posttext"> Krischan are you using Brucey's BMK-NG and BCC?  Because I think the SDL and OpenB3D modules are needing to be used in conjunction with his modified BRL and Pub modules.  and I think his modified modules can only be compiled with his modified BMK and BCC<br><br>Someone correct me if I am wrong <br><br></td></tr></table><br>
<a name="1247908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#209">[#209]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are right - because Brucey has split certain things in brl.system because they contained dependencies (x11 etc.).<br><br>So if something needs "sdl.mod", it needs brl-ng and pub-ng - and of course bmx-ng and bcc-ng.<br><br>If you are able to get rid of "sdl", you should be able to run it in vanilla bmx too.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1247916"></a>

<a name="1247917"></a>

<a name="1247918"></a>

<a name="1247920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#210">[#210]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is a paper chase, right? Ok, I've downloaded all of Bruceys BMK-NG modules now, created the bcc.exe and bmk.exe with BLIde first in Release/Non-GUI Mode and copied the two new executables and the core.bmk and make.bmk to the bin folder. I've deleted the brl.mod, pub.mod and maxgui.mod folders and copied the sources there. After that I've recompiled all modules in BLIde manually which took some time. Is this some kind of initiation ceremony to get so far?<br><br>Versions:<br>bcc[ng] Release Version 0.26<br>bmk 2.22 win32-x86 / gcc 040801 (cpu x8)<br><br>Now, Bruceys b3d.mod examples work (except the Max2D example which still crashes) but I can't compile some 3rd party modules anymore, for example sidesign.minib3d or my own module or some from the bah.mod folder. The BRL-NG MaxGUI doesn't compile, too.<br><br>Guys, this is getting more and more complex, how about a simple solution for dummies like the minib3d module in a box? I just want to code cool stuff and don't waste my time with compiler errors. Again, a lost evening. <br><br></td></tr></table><br>
<a name="1247928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#211">[#211]</a></td></tr></table></td></tr><tr ><td class="posttext"> Krischan the BMX-NG stuff is still being developed.  There isn't going to be a "solution for dummies" for a little while.  You got it working for the most part, but as you said, there are errors and some things don't compile.<br><br>Just stick with Munch's wrapper <br><br></td></tr></table><br>
<a name="1247930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#212">[#212]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh ok. I thought and it looked like it is some kind of final version. Ok, then I have to wait - I can only experiment in this stage with OpenB3D though it looks very promising. <br><br></td></tr></table><br>
<a name="1247942"></a>

<a name="1247943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#213">[#213]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I must stay with vanilla minib3d and OpenGL 1.0 until I die. <br></div><br>Krischan, you have OpenGL 1.0!? Do you have a very old pc? It may be this is why Max2d crashes on you. <br><br></td></tr></table><br>
<a name="1247960"></a>

<a name="1247962"></a>

<a name="1247965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#214">[#214]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; Krischan, you have OpenGL 1.0!? Do you have a very old pc? It may be this is why Max2d crashes on you.<br><br>Hmm, I really should think about a replacement of my old Late 2013 iMac, the nVidia GTX 780M is *very* outdated now ;-) Just kidding. To be more precise - as far as I know, miniB3D uses only OpenGL 1.x commands, please correct me if I am wrong.<br><br>According to the <a href="http://www.realtech-vr.com/glview/download.php" target="_blank">OpenGL Extensions Viewer</a> it should be much more than sufficient (OpenGL 4.4 and all Core features up to 4.4 are at 100%) - so I doubt that the problem lies within my system. And I'm running Windows native here on this iMac using Bootcamp, no virtualisation:<br><br><img src="http://www.christianhart.de/bmax/OpenGL1.png"><br><img src="http://www.christianhart.de/bmax/OpenGL2.png"> <br><br></td></tr></table><br>
<a name="1248003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#215">[#215]</a></td></tr></table></td></tr><tr ><td class="posttext"> You created an "BlitzMaxNG"-package.<br><br>Now you are able to reinstall BlitzMax to another directory - so everything works like before - but now you are able to fetch new updates of bcc/bmk/brl/pub/openb3d for "NG".<br><br>@Modules which do not compile<br>Some of them just need small fixes (eg. you extend from a type having "method my:int()" while yours is "method my()" - just use the same method/function/... definition -&gt; SuperStrict will help).<br><br>I assume that YOUR modules wont have really hard problems ... if things wont compile, it might be a bug in BCC (NG) and reporting them to Brucey could help getting rid of them.<br><br>Feel free to create issues on github - or create a "Bugs in BCC"-Thread in the "Brucey section" of the board.<br><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1248010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#216">[#216]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ... the BMX-NG stuff is still being developed.  <br></div><br>Indeed. I only mentioned the B3D build for the purpose of Munch being aware of it.<br><br>At the moment, on Windows at least, it's something that requires you to get your hands dirty, and is a bit fiddly to set up if you aren't used to messing around with modules and whatnot.<br><br>Other talk of it here is somewhat Off-topic, sorry.<br><br>Back to OpenB3D discussions! :-) <br><br></td></tr></table><br>
<a name="1248073"></a>

<a name="1248074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#217">[#217]</a></td></tr></table></td></tr><tr ><td class="posttext"> (This is using Brucey's OpenB3D wrapper)<br><br>The Max2D example does not work.  It draws the TeaCup and text (from DrawText in the UpdateMax2D() function) but it just freezes after the first flip.<br><br>I had to scrap most of the UpdateMax2D() function because the NG compiler was having an issue with TList.  So I just left DrawText in it so I could know when it works.<br><br>I narrowed down the app freezing to one command in the wrapper's EndMax2D function:<br><pre class=code>
glEnableClientState(GL_COLOR_ARRAY)
</pre><br>When I comment it out, I can see the DrawText, the TeaCup rotates, and the app doesn't crash.  Obviously though, the color/brightness is messed up.  And while the DrawText works, DrawImage gives an "EXCEPTION_ACCESS_VIOLATION" error<br><br>I don't know what to try from here.  Any ideas? <br><br></td></tr></table><br>
<a name="1248075"></a>

<a name="1248076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#218">[#218]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that could be the problem Chapman. Thanks. It seems glEnableClientState is <a href="http://stackoverflow.com/questions/11806823/glenableclientstate-deprecated" target="_blank">deprecated</a> in modern OpenGL versions. You could try commenting out those 3 lines in EnableStates. Strange how minib3d works though.<br><br>I tested Openb3d on my old pc with OpenGL 1.2 and max2d.bmx worked but cubemap.bmx didn't (cubemaps were introduced in 1.3) and shaders didn't (glsl 110 was introduced in 2.0). <br><br></td></tr></table><br>
<a name="1248084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#219">[#219]</a></td></tr></table></td></tr><tr ><td class="posttext"> Didn't work.  glEnableClientState worked for the other two... it's only GL_COLOR_ARRAY that gave me the problem <br><br></td></tr></table><br>
<a name="1248087"></a>

<a name="1248088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#220">[#220]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well thanks for trying. I'll have to admit this is really beyond my abilities to solve. I'm not a 'GL guy' and I'd need to buy a new pc to test and I don't think that's going to happen soon. It would be a good idea to look elsewhere if you really need 2d in 3d, like BLaBZ engine. <br><br></td></tr></table><br>
<a name="1248164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#221">[#221]</a></td></tr></table></td></tr><tr ><td class="posttext"> OpenB3D expects the GL_COLOR_ARRAY state not changing between one call to RenderWorld and the next one. The status is stored in the internal variable Global::fx2 . So, if you used glEnableClientState(GL_COLOR_ARRAY) , you should either set the flag to 1, or use glDisableClientState(GL_COLOR_ARRAY) before calling RenderWorld.<br><br>Otherwise, the command glDrawElements (internally used by OpenB3D) will try to use color data, although they are not binded (unless the mesh fx is set appropriately), and this will result in an error. <br><br></td></tr></table><br>
<a name="1248168"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#222">[#222]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you use NG + pub.mod-NG your image loaders will possibly be broken. It works if you use "framework", but as soon as another fileformat-loader is trying to load your image (eg. brl.TGALoader before brl.PNGLoader) you will have "LoadImage" return null - even if the image exists.<br><br>I made a fix for this but brucey annotated that it still misses some thing (but at least I was able to run digesteroids with "NG" again).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1248170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#223">[#223]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok good news - I got it running finally using <a href="/posts.php?topic=95220" target="_blank">Bruceys MinGW installation guide</a>. But there was one problem - I still got errors and so I studied the script and copied all files from the MinGW\lib\gcc\mingw32\4.7.1\ folder manually to the Blitzmax\lib folder and overwrote all of them - and then it worked! Seems like the script has missed some files. Strange.<br><br>Now only the Max2D problem is open. Angros47 solution works, just add the glDisableClientState(GL_COLOR_ARRAY) command before calling RenderWorld:<br><br><img src="http://www.christianhart.de/bmax/Max2D.jpg"><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">' max2d.bmx
' from minib3d examples

Import Angros.Openb3d

Strict

Global width%=800,height%=600,depth%=0,mode%=2

Graphics3D width,height,depth,mode


' Initialise MiniB3D program (spheremap)
' --------------------------------------

Local cam:TCamera=CreateCamera()
PositionEntity cam,0,0,-3

Local light:TLight=CreateLight()
RotateEntity light,90,0,0

' load object we will apply spheremap to - the classic teapot
Local teapot:TMesh=LoadMesh("media/teapot.b3d")

' load texture with color + spherical environment map
Local tex:TTexture=LoadTexture("media/spheremap.bmp",1+64)

' apply spherical environment map to teapot
EntityTexture teapot,tex


' Initialise Max2D program
' ------------------------

' Create a spark type
Type spark
	Field x#,y#,z#,vy#,xd#,yd#,zd#,r#,g#,b#,alpha#
End Type

' Load spark image
Global sparki:TImage=LoadImage("media/spark.png")

' Set no. of sparks to be created per firework
Global no_sparks%=500

' Create spark list
Global spark_list:TList=New TList

' Load and set font
Global font:TImageFont=LoadImageFont("Arial.ttf",1)
SetImageFont font


' Main loop
' ---------

' used by fps code
Local old_ms%=MilliSecs()
Local renders%, fps%

While Not KeyDown(KEY_ESCAPE)

	' control camera
	MoveEntity cam,KeyDown(KEY_D)-KeyDown(KEY_A),0,KeyDown(KEY_W)-KeyDown(KEY_S)
	TurnEntity cam,KeyDown(KEY_DOWN)-KeyDown(KEY_UP),KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT),0
	
	TurnEntity teapot,0,1,0

	glDisableClientState(GL_COLOR_ARRAY)
	RenderWorld
	renders=renders+1
		
	' calculate fps
	If MilliSecs()-old_ms&gt;=1000
		old_ms=MilliSecs()
		fps=renders
		renders=0
	EndIf
	
	Text 0,0,"FPS: "+fps

	BeginMax2D() ' MiniB3D function
	UpdateMax2D() ' your function
	EndMax2D() ' MiniB3D function

	Flip
	Cls

Wend
End


Function UpdateMax2D()

	' If space key pressed then create new set of sparks (new firework)

	If KeyHit(KEY_SPACE)

		Local x#=Rand(-100,100)
		Local y#=Rand(-100,100)
		Local z#=200

		Local r#=Rand(255)
		Local g#=Rand(255)
		Local b#=Rand(255)

		For Local i%=1 To no_sparks

			Local speed#=0.1

			Local ang1#=Rnd!(360)
			Local ang2#=Rnd!(360)

			Local sp:spark=New Spark
			spark_list.AddLast sp

			sp.x=x#
			sp.y=y#
			sp.z=z#

			sp.xd=Cos(ang1#)*Cos(ang2#)*speed#
			sp.yd=Cos(ang1#)*Sin(ang2#)*speed#
			sp.zd=Sin(ang1#)*speed#
	
			sp.r=r
			sp.g=g
			sp.b=b
			sp.alpha=1
	
		Next

	EndIf

	' Draw all sparks

	For Local sp:spark=EachIn spark_list

		' If spark alpha is above 0 then draw it...

		If sp.alpha&gt;0

			sp.x=sp.x+sp.xd*10.0
			sp.y=sp.y+sp.yd*10.0
			sp.z=sp.z+sp.zd*10.0
			sp.y=sp.y+sp.vy#
			sp.vy=sp.vy+0.02

			' Calculate x and y draw values based on x,y,z co-ordinates
			Local x#=(width/2.0)+((sp.x/sp.z)*500)
			Local y#=(height/2.0)+((sp.y/sp.z)*500)

			sp.alpha=sp.alpha-0.01

			SetColor sp.r#,sp.g#,sp.b#
			SetBlend LIGHTBLEND
			SetAlpha sp.alpha
			SetScale 20/sp.z,20/sp.z
			DrawImage sparki,x#,y#

		'...else remove spark from spark list

		Else

			spark_list.Remove sp

		EndIf

	Next

	SetBlend SOLIDBLEND
	SetScale 1,1
	SetColor 255,255,255
	DrawText "Press space to ignite firework",0,20
	
End Function</textarea> <br><br></td></tr></table><br>
<a name="1248200"></a>

<a name="1248333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#224">[#224]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you use NG + pub.mod-NG your image loaders will possibly be broken. <br></div><br>I don't think anyone had a problem with it in this thread...<br><br><div class="quote">  Angros47 solution works, just add the glDisableClientState(GL_COLOR_ARRAY) <br></div><br>Great! So the wrapper probably needs to work off that flag instead. <br><br></td></tr></table><br>
<a name="1248205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#225">[#225]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just assumed as people tried it with "NG" and chapman wrote this (which is the same error people had with digesteroids and NG):<br><br><div class="quote">  And while the DrawText works, DrawImage gives an "EXCEPTION_ACCESS_VIOLATION" error <br></div><br><br>So sorry if I brought up confusion.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1248281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#226">[#226]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was indeed talking about Brucey's wrapper + NG.  I was messing a little with the modules though - so i'll have to make a clean install and see if I get the same issues <br><br></td></tr></table><br>
<a name="1248342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >feeble1</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#227">[#227]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a question: is there any particular reason why Newton was removed from MiniB3D Ext when it was turned into I MINIB3D? <br>I was just thinking that it should be terribly easy to plug it into OpenB3D. <br><br></td></tr></table><br>
<a name="1248348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chapman7</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#228">[#228]</a></td></tr></table></td></tr><tr ><td class="posttext"> Follow up question to feeble1's question.  Why did Max3D choose ODE over other physics engines? <br><br></td></tr></table><br>
<a name="1248352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >feeble1</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#229">[#229]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pulled Newton out of Ext to run in vanilla MiniB3D.  It was way easier than I thought.<br>Have a play with it Chapman7  <a href="http://tempsend.com/7C14BEFFDA" target="_blank">Newton for MiniB3D</a><br><br>It would take a bit more tinkering to get it into OpenB3D.  The TVector type, handling of Quaternions, and a couple of other bits. <br><br></td></tr></table><br>
<a name="1248375"></a>

<a name="1248376"></a>

<a name="1248386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#230">[#230]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I have updated my repos with the Max2d fix by Angros, thanks*10 to him. Thanks also to Krischan and Chapman7 for their help, I'm REALLY glad that bug is fixed! lol. I have done the flag fix as Brucey suggested adding the function SetColorState so it just needs a final test. Thanks.<br><br>Angros, do you know why GL_NORMAL_ARRAY does not crash? Should I not set that flag too?<br><br>Brucey, I copied your b3d.mod as much as I could, but I left out the sdl module and kept the option for loading a dll and I am still using GLee because I couldn't get Glew working in Windows. I get undefined reference errors for glew functions. :( I can't understand how you can use #include "glew.h" in .cpp without needing the glew files in the same folder. I'm also wondering why you Import "*h" in .bmx as it builds fine without them.<br><br>I also inverted CameraViewport's y argument so it has the same syntax as minib3d. This can be tested in cubemap.bmx, maxgui.bmx and tex_render.bmx.<br><br>Oh, and I removed the "make glee" thing from the makefile, so it's just "make" or "mingw32-make" now. <br><br></td></tr></table><br>
<a name="1248407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#231">[#231]</a></td></tr></table></td></tr><tr ><td class="posttext"> GL_NORMAL_ARRAY is usually enabled (unless you set EntityFx mesh,1), so normals data are loaded; if you mess with glEnableClientState and you don't correct the flag, maybe some entities will be rendered without using normals, but it won't crash.<br><br>A crash might occur if the first and the last entity rendered have the fx flag set to flat shading (the last rendered entity leave normals disabled, the first rendered entity in the next RenderWorld expects to have it still disabled and don't load normals data)<br><br>So, it's a good idea to set fx1 flag, too. <br><br></td></tr></table><br>
<a name="1248453"></a>

<a name="1248454"></a>

<a name="1248455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#232">[#232]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great! Works 99% like a charm. You could mention that the built order is:<br><br>bmk makemods -a angros.openb3dlib<br>bmk makemods -a angros.openb3d<br>bmk makemods -a angros.b3dglgraphics<br><br>There is one thing: the load_md2 example crashes. Uncommenting this line shows the model loaded, so the function has an issue:<br><b>SetAnimTime(ent,anim_time#)</b><br><br>Another issue (if it is one) is in the stencil_shadows example. When I increase the number of cylinders and scale them to height, there are some strange shadow artefacts in the screen/camera center, they stay there independent from the camera moves.<br><br><img src="http://www.christianhart.de/bmax/openb3d/Stencil.png"><br><br>Example:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">' stencil_shadows.bmx
' code by KronosUK

Strict

Framework angros.b3dglgraphics
Import Brl.Random

Graphics3D 800,600,0,2


Local camera:TCamera=CreateCamera()
PositionEntity camera,-20,10,0

Local light:TLight=CreateLight(2)
RotateEntity light,45,0,0
PositionEntity light,0,25,0

Local plane:TMesh=CreatePlane(16)
TranslateEntity plane,0,-1,0
PointEntity camera,plane

Local static%=0
Local num:Int = 200
Local size%=100
Local cube:TMesh[num]
Local cylinder:TMesh[num]
Local shadow:TShadowObject[num]
Local shadow1:TShadowObject[num]

For Local i%=0 To num-1
	cube[i]=CreateCube()
	PositionEntity cube[i],Rnd(size),0,Rnd(size)
	shadow[i]=CreateShadow(cube[i],static)
	
	cylinder[i]=CreateCylinder()
	PositionEntity cylinder[i],Rnd(size),0,Rnd(size)
	shadow1[i] = CreateShadow(cylinder[i], static)
	ScaleEntity cylinder[i], 1, 5, 1
Next

Local wiretoggle%=-1


While Not KeyHit(KEY_ESCAPE) And Not AppTerminate()
	
	If KeyHit(KEY_SPACE) Then wiretoggle=-wiretoggle
	
	If KeyDown(KEY_UP) Then MoveEntity camera,0,0,1
	If KeyDown(KEY_DOWN) Then MoveEntity camera,0,0,-1
	If KeyDown(KEY_LEFT) Then MoveEntity camera,-1,0,0
	If KeyDown(KEY_RIGHT) Then MoveEntity camera,1,0,0
	
	If wiretoggle=1 Then Wireframe True Else Wireframe False
	
	UpdateWorld()
	RenderWorld()
	
	Flip()
Wend</textarea><br><br>All other examples work perfect from my point of view. What else is left to advance to version 1.0 now? <br><br></td></tr></table><br>
<a name="1248526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#233">[#233]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can't understand how you can use #include "glew.h" in .cpp without needing the glew files in the same folder. I'm also wondering why you Import "*h" in .bmx as it builds fine without them. <br></div><br>That's what the *.h does - it tells BlitzMax the directories where header files are. These are then added to the compiler command-line. That's how glew.h works from a different location. <br><br></td></tr></table><br>
<a name="1248579"></a>

<a name="1248580"></a>

<a name="1248702"></a>

<a name="1248704"></a>

<a name="1248706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#234">[#234]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, I'm still stuck on glew. I got the glew version to build on Mac/Linux but not Windows. <br><br>I was using tdm 4.7 but found it doesn't have glew in it so I thought maybe a lib is missing. So I went to nuwen 4.6, did the .bat file thing and also copied libglew32.a to BlitzMax/lib and rebuilt all modules still errors.<br><br>Before that I tried throwing the glew source into openb3d/src with the same results.<br><br>I am suspecting this is a bug with bmx. I had a similar problem before in Windows where I couldn't put .a libraries in a subfolder (ie. Import "lib/libopenb3d.a") and it only worked from the same folder - but on Linux it worked.<br><br>Here are the errors, they've been the same each time. <br><pre class=code>Building balls_collision
Compiling:balls_collision.bmx
flat assembler  version 1.69.14  (1615296 kilobytes memory)
4 passes, 15665 bytes.
Linking:balls_collision.debug.exe
C:/BlitzMax/mod/angros.mod/openb3dlib.mod/openb3dlib.debug.win32.x86.a(texture.cpp.debug.win32.x86.o):texture.cpp:(.text+0x1a53): 
undefined reference to `_imp____glewGenFramebuffers'
...</pre><br>Edit: fixed! I had to add #define GLEW_STATIC on Windows in every c/cpp file including glew.h. Edit: now improved by adding this to openb3dlib.mod.<br><pre class=code>?Win32
ModuleInfo "CC_OPTS: -DGLEW_STATIC"
?</pre> <br><br></td></tr></table><br>
<a name="1248676"></a>

<a name="1248677"></a>

<a name="1248678"></a>

<a name="1248696"></a>

<a name="1248698"></a>

<a name="1248701"></a>

<a name="1248705"></a>

<a name="1248710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#235">[#235]</a></td></tr></table></td></tr><tr ><td class="posttext"> Angros, thanks again. I changed SetColorState to a general SetRenderState and added an extra argument (capability) so I can set fx1 and fx2 and any more I find later.<br><br>Krischan, did you have trouble using "bmk makemods -a angros"? It seems to work for me on Windows. You're right about the order though. <br><br>I also get the md2 SetAnimTime crash. It seems to happen when SetAnimTime is zero. Try setting Local anim_time#=0 in to 0.1. Edit: this works but in Windows it still crashes randomly, if it gets loaded then it animates fine. Edit: now the random crashes are gone in Windows when using glew instead of glee. Strange.<br><br>The stencil shadow casters are hidden inside the object, so using RotateMesh exposes the caster but using TurnEntity hides it, perhaps because the shadow isn't able to update in time. I couldn't fix the ScaleEntity issue but you can add FitMesh cylinder[i],-1,-1,-1,2,5,2 before CreateShadow and it will work fine.<br><br>Edit: updated angros.mod with these changes. <br><br></td></tr></table><br>
<a name="1249208"></a>

<a name="1249209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#236">[#236]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've spent some time with openB3D and found that the 2D mode still has a problem, I've made a lighting/shader example for it, once with miniB3D and once with openB3D:<br><br><a href="http://www.christianhart.de/bmax/openb3d/OpenB3D_Milkyway.zip" target="_blank">OpenB3D_Milkyway.zip</a> (1.5MB)<br><br>The variable "test" ist set to 1 in the miniB3D example and 0 in the openB3D example, it just shows or hides the 2D mode. When you press SPACE the value gets switched. miniB3D works but openB3D crashes here. The source is nearly identical, with openB3D using a shader for the lighting of the moon as a difference. <br><br></td></tr></table><br>
<a name="1249263"></a>

<a name="1249264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#237">[#237]</a></td></tr></table></td></tr><tr ><td class="posttext"> Krischan, thanks for the demo. Very nice! <br><br>I have updated the wrapper to account for all occurrences of passing null objects to functions which was causing crashes for me. I had only done this for some functions but now I realize it's an issue the wrapper needs to fix - passing null objects is okay but not fields of null objects so a check is needed (now renamed from EntityExists to IsObject).<br><br>Second, your frag shader wouldn't work on glsl 120 here. Just 3 changes were needed.<br><pre class=code>varying vec3 normal,vert; // rem in

varying vec2 texCoords;
uniform sampler2D tex0;
uniform float intensity;

void main(void)
{

	vec3 lp=gl_LightSource[0].position.xyz;
	vec3 ld=normalize(lp-vert);
	vec3 ed=normalize(-vert);
	vec3 r=normalize(-reflect(ld,normal));
	
	vec4 la=gl_FrontLightProduct[0].ambient;
	vec4 lf=gl_FrontLightProduct[0].diffuse*max(dot(normal,ld),0.0);
	vec4 ls=gl_FrontLightProduct[0].specular*pow(max(dot(r,ed),0.0),gl_FrontMaterial.shininess);
	
	vec4 pixel = texture2D(tex0, texCoords);
	vec4 light = gl_FrontLightModelProduct.sceneColor+pow(la+lf+ls,vec4(0.75)); // add vec4

	gl_FragColor=mix(vec4(0),light*intensity,pixel*intensity); // add vec4
	//gl_FragColor=light;
	
}</pre><br>Third, there seems to be a bug with Openb3d when EntityFX is set to 1. So it crashes until you edit in TMilkyway.bmx the line "EntityFX Starbox, 1" to any value not including 1. This seems to only happen sometimes but I was able to reproduce it.<br><br>Fourth, when I press space max2d seems to disable the alpha blending for the stars, etc. I am not sure what is causing this. I'll try making a simplified example. <br><br></td></tr></table><br>
<a name="1249293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#238">[#238]</a></td></tr></table></td></tr><tr ><td class="posttext"> When EntityFX is set to 1, normal data are not binded to the mesh, but the shader included in the example seems to require normal data (it uses gl_Normal); could it be the cause of the crash?<br><br>About alpha blending: max2d includes the command "glDisable(GL_BLEND)"; you should inform OpenB3D, by setting the variable "Global::alpha_enable=false;" <br><br></td></tr></table><br>
<a name="1249354"></a>

<a name="1249355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#239">[#239]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks angros! I have fixed these bugs now I hope. New version is up.<br><br>The EntityFX 1 bug wasn't to do with the shader but it was because the normal data was not binded. When fx1 was 1 and Max2d was used then it crashed. So I just set fx1 to 0 in EndMax2d.<br><br>The alpha blending issue was solved by setting alpha_enable to 0 in EndMax2d.<br><br>The fog bug was where you couldn't have Max2d and fog together. I had to edit camera.cpp in Camera::Update to move the fog commands outside the conditional statements.<br><br>The other thing I did was to add setting vbo_enabled at GraphicsInit from THardwareInfo. <br><br></td></tr></table><br>
<a name="1249366"></a>

<a name="1249367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#240">[#240]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So I just set fx1 to 0 in EndMax2d. ... setting alpha_enable to 0 in EndMax2d. <br></div><br>Wouldn't it be better to record what the values are *before* Max2D, and then re/setting them *after* Max2D, rather than always setting them to some constant value?<br><br>I just assume it would be nice to leave things in the same state that they were previously? <br><br></td></tr></table><br>
<a name="1249468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#241">[#241]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm I'm getting a compiler error with the current snapshot (my previous version still compiles):<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">c:\Apps\BlitzMax\bin&gt;bmk makemods -a angros.openb3dlib
Compiling:3ds.cpp
Compiling:animation.cpp
Compiling:animation_keys.cpp
Compiling:bank.cpp
Compiling:bone.cpp
Compiling:brush.cpp
Compiling:camera.cpp
Compiling:collision.cpp
Compiling:collision2.cpp
Compiling:csg.cpp
Compiling:entity.cpp
Compiling:file.cpp
Compiling:functions.cpp
c:/Apps/BlitzMax/mod/angros.mod/openb3dlib.mod/openb3d/src/functions.cpp: In fun
ction 'void SetRenderState(int, int)':
c:/Apps/BlitzMax/mod/angros.mod/openb3dlib.mod/openb3d/src/functions.cpp:57:7: e
rror: 'GL_ARRAY_BUFFER' was not declared in this scope
Build Error: failed to compile c:/Apps/BlitzMax/mod/angros.mod/openb3dlib.mod/op
enb3d/src/functions.cpp
c:\Apps\BlitzMax\bin&gt;bmk makemods -a angros.openb3d
Compiling:openb3dlib.bmx
Compile Error: Can't find interface for module 'angros.openb3dlib'
[c:/Apps/BlitzMax/mod/angros.mod/openb3d.mod/openb3dlib.bmx;27;1]
Build Error: failed to compile c:/Apps/BlitzMax/mod/angros.mod/openb3d.mod/openb
3dlib.bmx
c:\Apps\BlitzMax\bin&gt;bmk makemods -a angros.b3dglgraphics
Compiling:b3dglgraphics.bmx
Compile Error: Can't find interface for module 'angros.openb3d'
[c:/Apps/BlitzMax/mod/angros.mod/b3dglgraphics.mod/b3dglgraphics.bmx;36;1]
Build Error: failed to compile c:/Apps/BlitzMax/mod/angros.mod/b3dglgraphics.mod
/b3dglgraphics.bmx</textarea> <br><br></td></tr></table><br>
<a name="1249505"></a>

<a name="1249506"></a>

<a name="1249507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#242">[#242]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have the same compile error as Krischan. Also, LoadAnimSeq seems to be missing? I get 'Identifier 'LoadAnimSeq' not found' when I try to use it.<br><br>In any case, very cool project :) <br><br></td></tr></table><br>
<a name="1249554"></a>

<a name="1249555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#243">[#243]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, I wasn't sure about your question so I added GetRenderState to test and while I got it working it just made the code confusing. Then I realized you can use constant values as Max2d has a constant effect on the states - it always disables the 3d buffers and states, like blending.<br><br>Krischan, sorry about that. I was using gl constants in SetRenderState and GL_ARRAY_BUFFER is an extension in glew which is not included in functions.cpp so I dropped the gl constants and used my own enums. Strange how it compiled for me.<br><br>ErikT, yes it isn't there. If you look at the bottom of functions.cpp it shows a list of todo functions which includes LoadAnimSeq. <br><br></td></tr></table><br>
<a name="1249727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#244">[#244]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Angros<br><br>Having a look at the source, I'm not sure why your MQ functions are using the heap so much for (temporary) Matrix instances.<br>There's more overhead to creating and deleting variables on the heap, than just using one on the stack. That and you need to ensure you are deleting the pointers at some later stage, something that is not an issue with scoped variables. <br><br></td></tr></table><br>
<a name="1249735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#245">[#245]</a></td></tr></table></td></tr><tr ><td class="posttext"> I ported MQ functions from warner version of MiniB3D: in the original version (written in BlitzMax) variables weren't even deleted (it was not needed, since BlitzMax has auto garbage collection). I ported the functions to C++, so I had to add the delete instructions; I also tried replacing them with variables allocated on the stack, but as far as I can recall (I did that port in 2010) when I compiled using all the optimizations the library was a bit smaller, and execution was slightly faster, using the current form. Why? I'm not sure: perhaps the code that allocates variables on the heap is easier to optimize (in-lining is simpler and so on); I don't know exactly how GCC optimization works, and what is the difference on assembly level.<br><br>I only know that, in current form, those functions work, so I don't want to touch them if I don't have to: of course, it's possible to change them to allocate variables on the stack (you only need to remove the "delete" and "new" instructions, and replace pointers with real variables), and it might even work better if compiled with no optimizations, but I doubt it will improve in any way the final result. <br><br></td></tr></table><br>
<a name="1249813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#246">[#246]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found a strange behaviour in my Blitzmax/MinGW installation. Remember: to make the OpenB3D mod work I copied all files from the MinGW\lib\gcc\mingw32\4.5.0\ folder manually to the Blitzmax\lib folder and overwrote all of them. Without that it crashed with these cryptic error messages. After that I recompiled all modules again.<br><br>Now, all my executables don't run without these two DLLs in the path or the same folder like the executable:<br><br>libstdc++-6.dll<br>libgcc_s_dw2-1.dll<br><br>And the executable is a little bit smaller than before (about 200K)<br><br>So I reverted everything back to my initial Blitzmax 1.50 + MinGW 4.5.0 installation. The compiled executable is now again slightly bigger and works without these DLLs (I renamed the MinGW folder before the start so that no DLL is found anymore).<br><br>It looks like these two DLLs or parts of them are not compiled into the executable when I copy the files to the Blitzmax lib folder - which seems to be necessary to get OpenB3D running, argh. Well, that's not acceptable, the executables should run without external DLLs. So what is wrong here? I tried different MinGW versions and it is always the same situation.<br><br>My AR/LD Versions are both 2.20.51.20100613, FASM is 1.70.03. <br><br></td></tr></table><br>
<a name="1249865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#247">[#247]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have to copy AR/LD from MinGW to BlitzMax/bin too.<br><br>Each time you change MinGW:<br>- copy MinGW libs which exist in the BlitzMax libs folder<br>- copy MinGW ld.exe/ar.exe to the BlitzMax bin folder  <br>- recompile all modules<br><br>Maybe you missed one of the steps<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1249867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#248">[#248]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's nothing to do with AR/LD.<br><br>Assuming your MinGW is meant to compile in static versions of these libraries, you may want to look in the lib directories for two .a files which have a name like libstdc++-6.dll.a (or something similar with the text "dll" and a ".a" suffix), and either rename them to something completely different, or remove them completely.<br>Then rebuild everything.<br><br>I've noticed that, for some reason, the correct static library is not always being picked up at build time, so instead it uses the "dll" version of the library, causing the executable to require the dll to be supplied.<br><br>Which doesn't make too much sense, because the build might say something like "-lstdc++-6" which should load "libstdc++-6.a" but it's actually loading "libstdc++-6.dll.a".<br><br><br>Unfortunately, it makes setting up MinGW, again, more hassle than it should be.<br>The setup scripts should probably now try to take this into account, and just remove those pesky files, allowing the problem to disappear.<br><br>meh... <br><br></td></tr></table><br>
<a name="1249938"></a>

<a name="1249939"></a>

<a name="1249940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#249">[#249]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, following exactly your MinGW installation <a href="/posts.php?topic=95220" target="_blank">instructions</a> the problem still exists. And when I rename or delete these two .a files and rebuild all modules I'm getting compile errors even in vanilla miniB3D. Thats frustrating. <br><br></td></tr></table><br>
<a name="1249977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#250">[#250]</a></td></tr></table></td></tr><tr ><td class="posttext"> Krischan, all I can suggest is make sure the environment variables MINGW and PATH are correct and any other MinGW paths are removed so your not using the wrong version. The MaxIDE about window should tell what it's using. Also, please post the errors you get. <br><br></td></tr></table><br>
<a name="1250019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#251">[#251]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok its working now. One shouldn't install it over an existing Blitzmax installation :-D Using a clean Blitzmax 1.50 setup it worked, looks like there were some remnants in the Blitzmax lib folder which leaded to the missing DLL result.<br><br>However there is a different problem I found in my small demo. When you move and point the camera in a certain direction the complete alpha information is lost (press SPACE for some action and move with WASD):<br><br>See yourself: <a href="http://www.christianhart.de/bmax/openb3d/OpenB3D_Milkyway2.zip" target="_blank">OpenB3D_Milkyway2.zip</a><br><br>Here you see the same direction and with a very slight move to the right the alpha information is suddenly lost until you turn back, what could be the reason?<br><br><img src="http://www.christianhart.de/bmax/openb3d/OpenB3D_Alpha1.jpg"><br><br><img src="http://www.christianhart.de/bmax/openb3d/OpenB3D_Alpha2.jpg"> <br><br></td></tr></table><br>
<a name="1250083"></a>

<a name="1250086"></a>

<a name="1250089"></a>

<a name="1250091"></a>

<a name="1250092"></a>

<a name="1250093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#252">[#252]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm it has something to do with the BeginMax2D/EndMax2D part, uncommenting it only lets the skycube with the background stars switch brightness. And this brightness switching disappears when I comment the shadow part.<br><br>And in all cases this only happens when the sun/earth/moon objects are not in the camera frustum anymore. Very strange, is it a bug? or two?<br><br>So this code works now, without Max2D and shadows:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

Framework angros.b3dglgraphics
Import brl.random
Import brl.timer

Graphics3D 1024, 600, 0, 2

THardwareInfo.GetInfo
THardwareInfo.DisplayInfo 0

Graphics3D THardwareInfo.ScreenWidth, THardwareInfo.ScreenHeight, 0, 1, 60

Const QuatToEulerAccuracy:Double = 1.0 / 2 ^ 512

Include "inc/TCam.bmx"
Include "inc/TMatrix.bmx"
Include "inc/TQuad.bmx"
Include "inc/TQuaternion.bmx"
Include "inc/TQuat.bmx"
Include "inc/TMouse.bmx"
Include "inc/TMilkyway.bmx"

' Globals
Global CAMERA:TCam
Global MILKYWAY:TMilkyway

' Camera
CAMERA:TCam = New TCam
CAMERA.Add()
CAMERA.X = 0
CAMERA.Y = 10
CAMERA.Z = -15
CAMERA.Roll = 0
CAMERA.RangeMin = 0.1
CAMERA.RangeMax = 10000
CAMERA.CLScolor = [0, 4, 8]
CAMERA.Update()

' Milkyway prerequisites
Local StarTexture:TTexture = LoadTexture("textures/milkyway/star.png", 2)
Local StarsTexture:TTexture = LoadTexture("textures/milkyway/stars.png", 2)
Local PanoramaTexture:TTexture = LoadTexture("textures/milkyway/milkyway.jpg", 1 + 16 + 32)
Local NebulaTexture:TTexture = LoadTexture("textures/milkyway/nebula.png", 2 + 16 + 32)
TextureBlend PanoramaTexture, 2
TextureBlend NebulaTexture, 2
ScaleTexture StarsTexture, 0.5 * (THardwareInfo.ScreenWidth / 2560), 0.5 * (THardwareInfo.ScreenWidth / 2560)

' Milkyway Setup
MILKYWAY:TMilkyway = New TMilkyway
MILKYWAY.StarTexture = StarTexture
MILKYWAY.StarsTexture = StarsTexture
MILKYWAY.PanoramaTexture = PanoramaTexture
MILKYWAY.NebulaTexture = NebulaTexture
MILKYWAY.Stars = 2500
MILKYWAY.MaxAngle = 60
MILKYWAY.NebulaAmount = 50
MILKYWAY.StarScale = 1.5 * (THardwareInfo.ScreenWidth / 2560)
MILKYWAY.Init

' Light
Local lighttype:Int = 2
Local light:TLight=CreateLight(lighttype)
RotateEntity light, 0, 0, 0
PositionEntity light, 0, 0, 0
LightRange light, 1000
AmbientLight 0, 0, 0

' Sun
Local sun:TSprite = CreateSprite(light)
Local suntex:TTexture = LoadTexture("textures/Sun.png", 2)
ScaleSprite sun, 5, 5
EntityTexture sun, suntex

' Pivots
Local earthpivot:TPivot = CreatePivot()
Local moonpivot:TPivot = CreatePivot()
EntityParent moonpivot, earthpivot

' Earth
Local earth:TMesh = CreateSphere(32)
Local colormap:TTexture = LoadTexture("textures/Earth.jpg", 1 + 16 + 32)
EntityParent earth, earthpivot
PositionEntity earth, 0, 0, 10
PositionEntity moonpivot, 0, 0, 10

' Moon
Local moon:TMesh = CreateSphere(32)
Local moonmap:TTexture = LoadTexture("textures/Moon.jpg", 1 + 16 + 32)
EntityParent moon, moonpivot
PositionEntity moon, 0, 0, -3
ScaleEntity moon, 0.25, 0.25, 0.25

' Earth Shader
Local shaderearth:TShader = LoadShader("", "shaders/test.vert.glsl", "shaders/test.frag.glsl")
ShaderTexture(shaderearth, colormap, "tex0", 0)
SetInteger(shaderearth, "lighttype", lighttype)
ShadeEntity(earth, shaderearth)

' Moon Shader
Local shadermoon:TShader = LoadShader("", "shaders/test.vert.glsl", "shaders/test.frag.glsl")
ShaderTexture(shadermoon, moonmap, "tex0", 0)
SetInteger(shadermoon, "lighttype", lighttype)
ShadeEntity(moon, shadermoon)

' Shadows
'Local ShadowMoon:TShadowObject
'Local ShadowEarth:TShadowObject
'ShadowMoon = CreateShadow(moon, 0)
'ShadowEarth = CreateShadow(earth, 0)

PointEntity CAMERA.cam, sun
CenterMouse()

Local intensity:Float = 1.5
Local moving:Int = 0

While Not KeyDown(KEY_ESCAPE)

	If KeyHit(KEY_SPACE) Then moving = 1 - moving

	If moving Then
	
		TurnEntity earth, 0, 0.5, 0
		TurnEntity earthpivot, 0, 0.5, 0
		TurnEntity moonpivot, 0, 2, 0
		
	EndIf

	' Light intensity
	intensity:+((KeyDown(KEY_E) - KeyDown(KEY_Q)) / 100.0)
	SetFloat(shaderearth, "intensity", intensity)
	SetFloat(shadermoon, "intensity", intensity)
	
	Movement(CAMERA.cam, 0.05 * (1 + (KeyDown(KEY_LSHIFT) * 10)), 1.5, 8)
	
	MILKYWAY.KeepPosition(CAMERA.cam)
	
	RenderWorld
	
	'BeginMax2D()
	
	'	DrawText "Intensity: " + intensity, 0, 0
	
	'EndMax2D()
			
	Flip

Wend
End

Function Normalize:Float(value:Float = 128.0, value_min:Float = 0.0, value_max:Float = 255.0, norm_min:Float = 0.0, norm_max:Float = 1.0)
	
	Return ((value-value_min)/(value_max-value_min))*(norm_max-norm_min)+norm_min
	
End Function</textarea><br><br>EDIT: oh, and I found a third bug - it looks the moon is very shy in OpenB3D - when I'm very close to it, it completely disappears suddenly - but the earth stays at very close distance. Changing the camerarange does not help. Scaling the moon to earth's size (1.0) helps.<br><br>Very, very strange. <br><br></td></tr></table><br>
<a name="1250169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#253">[#253]</a></td></tr></table></td></tr><tr ><td class="posttext"> Krischan, glad you got MinGW working! Did you copy all the libs across manually again?<br><br>I couldn't really see this brightness switching of the stars. I actually seemed to have no stars but it was due to "ScaleTexture StarsTexture" having subzero values which was shrinking them down.<br><br>I did find what was causing the alpha bug though. When I put "glBlendFunc(GL_SRC_ALPHA,GL_ONE)" (which is the Add blend mode) before RenderWorld it fixed it. So I now have a working fix to mesh.cpp where calling glBlendFunc happens all the time instead of only when the blend statement is true.<br><br>I can't reproduce the sun disappearing except when I'm as close as I can get to it and I pass through it. <br><br></td></tr></table><br>
<a name="1250212"></a>

<a name="1250213"></a>

<a name="1250214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#254">[#254]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I didn't copy them manually. In my Blitzmax folder, I've deleted the lib folder and installed 1.50 over everything again. Then I installed MinGW (tdm-gcc-4.7.1-2.exe), then I ran Bruceys script. And then it worked.<br><br>Your OpenGL command before Renderworld worked here too, I'm glad you could fix that. What's the reason of the Scaletexture issue? In miniB3D I could scale textures below 1.0? Well, that's not really a problem as I'm planning to create the background stars in a different way than with a cube right now but it should be investigated.<br><br>And it's not the sun which disappears, it's the moon, see yourself: these two screenshots are made from nearly the same position - I've just moved a bit away forward, and I'm far enough away that no clipping should occur but it does. The only difference is that the moon is 0.25 size while the earth is 1.0. In tests I found out that if the distance between camera and moon is below 0.66666666 - the moon vanishes. And that's a strange value.<br><br><img src="http://www.christianhart.de/bmax/openb3d/OpenB3D_Moon1.jpg"><br><img src="http://www.christianhart.de/bmax/openb3d/OpenB3D_Moon2.jpg"> <br><br></td></tr></table><br>
<a name="1250326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#255">[#255]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re: ScaleTexture, the problem is my screen is quite small (laptop) and your scaling code only works well for a large screen width ie. 0.5 * (ScreenWidth / 2560). So the stars vanish.<br><br>Yes, I can see the moon disappearing before it should. It doesn't happen in minib3d. It seems the camera still thinks the moon is it's original size. I tried MeshCullRadius, ScaleMesh, FitMesh and CopyMesh and it still happens. <br><br></td></tr></table><br>
<a name="1250459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#256">[#256]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Brucey<br><br>I've just tried changing allocation of matrices: the executable is a few bytes bigger, but much faster; likely, last time my mistake was to return a matrix from GetMatrix and GetInvMatrix (it had to be copied, slowing down everything). <br><br></td></tr></table><br>
<a name="1250460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#257">[#257]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ...a few bytes bigger, but much faster... <br></div><br>That's great! :-) <br><br></td></tr></table><br>
<a name="1250557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#258">[#258]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... talking of OpenGL ES (in)compatibility... ;-)<br><br>Here's a small list of some of the things that are not available under OpenGL ES 2.0 :<br><br>GL_PROJECTION_MATRIX<br>GL_MODELVIEW_MATRIX<br>glFogf<br>GL_FOG<br>GL_FOG_MODE<br>GL_FOG_START<br>glFrustum<br>glLoadIdentity<br>glOrtho<br><br>I would be really nice to see this library running on all those many other platforms one day :o) <br><br></td></tr></table><br>
<a name="1250575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#259">[#259]</a></td></tr></table></td></tr><tr ><td class="posttext"> Without glLoadIdentity, the only way to load a matrix (that is needed to move/scale/rotate everything) is to use shaders. But shaders are not supported in GLES 1.0, so a version of OpenB3D based only on shader would not be compatible with Gles 1, and with opengl on older/poorly supported video cards.<br><br>So, I see only two alternatives: building two version (I don't like that idea: Minib3d is already too fragmented, I don't want the same to happen to OpenB3D), or adding a module to implement missing commands on GLES 2.0, too. <br><br></td></tr></table><br>
<a name="1250596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#260">[#260]</a></td></tr></table></td></tr><tr ><td class="posttext"> As you could do<br>?android<br>Bla<br>?not android<br>blubb<br>?<br><br>And it just skips the ?android-part on vanilla-blitzmax...couldnt you wrap the parts using "non-egl"-code into functions...and then use conditionals to use either the new or the old approach?<br><br>Or even better: provide both ways of doing things (like a renderpath). Then just setup overrideable defaults regardingly (like dx on windows and gl on other OS).<br>...maybe this is similar to what you suggested in option two...and I just did not get it.<br><br>Bye<br>Ron <br><br></td></tr></table><br>
<a name="1250602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#261">[#261]</a></td></tr></table></td></tr><tr ><td class="posttext"> Krischan, I found a workaround for the moon disappearing which gets it working as well as minib3d. This seems to happen to objects smaller than 1 meter. To fix it use:<br>ScaleMesh moon, 0.25, 0.25, 0.25<br>MeshCullRadius moon, 1.0<br><br>Note that ScaleEntity does not work and MeshCullRadius must be 1 or more. Then to get as close as possible I ended up with camera near as:<br>CameraRange cam, 0.001, 10000.0 <br><br></td></tr></table><br>
<a name="1265144"></a>

<a name="1265145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#262">[#262]</a></td></tr></table></td></tr><tr ><td class="posttext"> If i filled a octree with blocks using the same mesh, can i interact with a single block?<br>I want to remove or color a single block, is this posible? <br><br></td></tr></table><br>
<a name="1265227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#263">[#263]</a></td></tr></table></td></tr><tr ><td class="posttext"> To remove a single block, just use OctreeBlock with the same coordinates and level, putting 0 instead of the mesh handler.<br><br>Or you can provide the handler of another mesh, to replace a block with another. <br><br></td></tr></table><br>
<a name="1265786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >feeble1</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#264">[#264]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to select which light is causing the shadows? <br><br></td></tr></table><br>
<a name="1265820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#265">[#265]</a></td></tr></table></td></tr><tr ><td class="posttext"> All lights cause a shadow. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
