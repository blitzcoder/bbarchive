<!DOCTYPE html><html lang="en" ><head ><title >vertex/face orientation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >vertex/face orientation</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >vertex/face orientation</a><br><br>
<a name="1031355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need to put a sprite in a position dictated by a loaded mesh (either at a vertex, or in the center of a face, either will work) and then rotate the sprite to the same orientation as the face (or figure out what is "out" according to the vertex... if that makes sense).<br><br>I'm not working with textures or UV coords etc. etc. I need to actually position an entity at a point dictated by a mesh (easy for vertexes, just get the XYZ of the vertex) and rotate it so it's facing out from the mesh (this is not away from the center, as that would only work for a sphere).<br><br>I have no clue how to go about finding an appropriate orientation. I assume I should do something along the lines of calculate the average position between the 3 points that make up a face to find it's center, then try to calculate the face normal and somehow I should be able to extrapolate the orientation from that... but it feels like there should be an easier way. or at least one I might understand... <br><br></td></tr></table><br>
<a name="1031371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aren't there commands already in place for getting the normal of a face? <br><br></td></tr></table><br>
<a name="1031415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's vertex normal but It doesn't seem to do what I need... <br><br></td></tr></table><br>
<a name="1031418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The vertex normal might  do what I need but the values I get are pretty strange... they're not degrees and they don't seem to be radians... VertexNY() seems to yield the pitch if multiplied by 90... but NX and NZ don't give seem to give me the yaw and extend beyond 1 quite often so ... I'm quite confused. <br><br></td></tr></table><br>
<a name="1031428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's probably returning a unit vector:<br><a href="http://en.wikipedia.org/wiki/Unit_vector" target="_blank">http://en.wikipedia.org/wiki/Unit_vector</a><br><br>Long story short, that's a vector 1 unit long where one end is (0, 0, 0) and the numbers returned are the coordinates of the other end. <br><br></td></tr></table><br>
<a name="1031430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmm, would make sense for the values I see from the raw mesh. When I run UpdateNormals() on the mesh however some of the values go over 1 (or under -1)... perhaps update normals is just weird... I can't find any examples of how to extract the pitch/yaw from the (probable) vector, so I'm going to try some hackey methods as a work around... <br><br></td></tr></table><br>
<a name="1031477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I made an insect "game" demo in code archives for blitz3D somewhere, where a swarm of insects run around the room over any surface.<br><br>From memory I believe I used line picks and go the normal and used tformangle or such to orient it away. I really cant remember much but go and check it out if you like. <br><br></td></tr></table><br>
<a name="1031493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks I'll take a look.<br><br>Currently I position the element at the coords of the normals and then point it at 0,0,0 to get the angle and then move it to the position of the vertex. Works well but the move and point step could be done away with if I could find the math to calculate the pitch and yaw from the normal... but it's fast enough as is for me for now. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
