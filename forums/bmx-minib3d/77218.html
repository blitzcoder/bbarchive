<!DOCTYPE html><html lang="en" ><head ><title >CreateCube with 6 surfaces</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >CreateCube with 6 surfaces</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >CreateCube with 6 surfaces</a><br><br>
<a name="863854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, I'm having a hard time with surfaces on a simple box. -_-<br>I'm still really new to 3D and creating a cube seems really messy (Looking at MiniB3D code), I need some help with my own "CreateCube" function, I want one that creates a cube but with 6 surfaces instead of just one.<br>Any code or just simple tips would be really great, thanks! <br><br></td></tr></table><br>
<a name="863867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you have B3D installed ? Because in the "castle" demo, there is a function that does that. Otherwise, you might want to search for the function on this site. It is called "LoadSkyBox". <br><br></td></tr></table><br>
<a name="864043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah cheers mate, the BirdDemo had the skybox function.<br>Only one problem... the textures are rotate the wrong way.<br><br>Here's my code:<br><pre class=code>
Function defaultTile:TMesh(Top:Int=Null,Down:Int=Null,Left:Int=Null,Right:Int=Null)
		
	Local m:TMesh=createMesh()
	Local s:TSurface
	
	s=CreateSurface( m )
	If Top Then
		addVertex s,+1,+1,+1,0,0;addVertex s,-1,+1,+1,1,0
		AddVertex s,-1,-1,+1,1,1;AddVertex s,+1,-1,+1,0,1
		AddTriangle s,0,1,2;AddTriangle s,0,2,3
	EndIf
	
	s=CreateSurface( m )
	If Down Then
		addVertex s,-1,+1,+1,0,1;addVertex s,+1,+1,+1,0,0
		AddVertex s,+1,+1,-1,1,0;AddVertex s,-1,+1,-1,1,1
		AddTriangle s,0,1,2;AddTriangle s,0,2,3
	EndIf
	
	s=CreateSurface( m )
	If Left Then
		addVertex s,-1,+1,+1,0,0;addVertex s,-1,+1,-1,1,0
		AddVertex s,-1,-1,-1,1,1;AddVertex s,-1,-1,+1,0,1
		AddTriangle s,0,1,2;AddTriangle s,0,2,3
	EndIf
		
	s=CreateSurface( m )
	If Right Then
		addVertex s,+1,+1,-1,0,0;addVertex s,+1,+1,+1,1,0
		AddVertex s,+1,-1,+1,1,1;AddVertex s,+1,-1,-1,0,1
		AddTriangle s,0,1,2;AddTriangle s,0,2,3
	EndIf
	
	Return m
End Function
</pre> <br><br></td></tr></table><br>
<a name="864055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps it has something to do with uv positions?<br><br>note: [code ][/code ] (remove spaces) for code. <br><br></td></tr></table><br>
<a name="864056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh thanks...<br>Yeah the UVs were messed up, after randomly trying I got the textures right. <br><br></td></tr></table><br>
<a name="864081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uh oh... still a problem...<br>Seems like the textures don't blend correctly on my box, the shades are visible without any texture but as soon as I apply a texture the shades disappear.<br>The weird thing is that if I use the same texture on a box created using the CreateBox function, the shades works perfectly fine. <br><br></td></tr></table><br>
<a name="864091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried calling UpdateNormals() ? <br><br></td></tr></table><br>
<a name="864102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, the shading DOES work...<br><img src="http://img409.imageshack.us/img409/2417/notexsoh1.jpg"><br><br>But with textures applied they aren't visible :S<br><img src="http://img409.imageshack.us/img409/4606/withtexsmz3.jpg"><br><br>And the weird part is that if I use the CreateCube function and apply the same grass texture, it works perfectly fine!<br><img src="http://img505.imageshack.us/img505/6040/withcubesfm2.jpg"><br><br>The reason I'm not using the CreateCube function is because I need to be able to paint each face a different texture.<br>So how can I can get shades working with textures on my cube? <br><br></td></tr></table><br>
<a name="864131"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe the difference is, that the corners of the cube contain only one vertex, but the cubes generated with defaulttile function have 3 vertices on each corner ? You could then average the normals of each vertex that shares the same corner. <br><br></td></tr></table><br>
<a name="864147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah that is most likely it...<br>Could you help me out with the code though?<br>I think it's really really confusing placing all the vertex and junk. -_-<br>The DefaultTile function is in my second post. <br><br></td></tr></table><br>
<a name="864150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It could be better to find the CreateCube function from minib3d. Do you have minib3d installed ? If you go to c:\program files\blitzmax\mod, and then to sidesign.mod, minib3d.mod, then to "inc", there is a file called TMesh.bmx<br>In this file, there is a function called CreateCube() <br><br></td></tr></table><br>
<a name="864155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah as I said, I can't use that function because I need separate faces. <br><br></td></tr></table><br>
<a name="864160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, you can copy it into your own program, and then build in the surfaces. The normals are defined in the function itself. <br><br></td></tr></table><br>
<a name="864161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> How would I "build in the surfaces" then? <br><br></td></tr></table><br>
<a name="864170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> In this function, all vertices/normals/texcoords/triangles are grouped. Each group has 4 lines, except for the "addtriangle" lines, they have 2 lines each. <br>You'll need to re-arrange the groups, so that 1 group of "addvertex" is followed by 1 group of "vertexnormal", 1 group of "vertextexcoords" and 1 group of "addtriangle". This will represent one surface. In total there will be 6 surfaces, each with 3x4 lines (verts) and 1x2 lines (tris).<br>Each surface group should be preceeded with this line:<br>surf:TSurface=mesh.CreateSurface()<br>It will create a new surface before adding vertices to it.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
	Function CreateCube:TMesh(parent_ent:TEntity=Null)
	
		Local mesh:TMesh=TMesh.CreateMesh(parent_ent)
	
		Local surf:TSurface=mesh.CreateSurface()
			
		surf.AddVertex(-1.0,-1.0,-1.0)
		surf.AddVertex(-1.0, 1.0,-1.0)
		surf.AddVertex( 1.0, 1.0,-1.0)
		surf.AddVertex( 1.0,-1.0,-1.0)
		
		surf.AddVertex(-1.0,-1.0, 1.0)
		surf.AddVertex(-1.0, 1.0, 1.0)
		surf.AddVertex( 1.0, 1.0, 1.0)
		surf.AddVertex( 1.0,-1.0, 1.0)
			
		surf.AddVertex(-1.0,-1.0, 1.0)
		surf.AddVertex(-1.0, 1.0, 1.0)
		surf.AddVertex( 1.0, 1.0, 1.0)
		surf.AddVertex( 1.0,-1.0, 1.0)
		
		surf.AddVertex(-1.0,-1.0,-1.0)
		surf.AddVertex(-1.0, 1.0,-1.0)
		surf.AddVertex( 1.0, 1.0,-1.0)
		surf.AddVertex( 1.0,-1.0,-1.0)

		surf.AddVertex(-1.0,-1.0, 1.0)
		surf.AddVertex(-1.0, 1.0, 1.0)
		surf.AddVertex( 1.0, 1.0, 1.0)
		surf.AddVertex( 1.0,-1.0, 1.0)
		
		surf.AddVertex(-1.0,-1.0,-1.0)
		surf.AddVertex(-1.0, 1.0,-1.0)
		surf.AddVertex( 1.0, 1.0,-1.0)
		surf.AddVertex( 1.0,-1.0,-1.0)

		surf.VertexNormal(0,0.0,0.0,-1.0)
		surf.VertexNormal(1,0.0,0.0,-1.0)
		surf.VertexNormal(2,0.0,0.0,-1.0)
		surf.VertexNormal(3,0.0,0.0,-1.0)
	
		surf.VertexNormal(4,0.0,0.0,1.0)
		surf.VertexNormal(5,0.0,0.0,1.0)
		surf.VertexNormal(6,0.0,0.0,1.0)
		surf.VertexNormal(7,0.0,0.0,1.0)
		
		surf.VertexNormal(8,0.0,-1.0,0.0)
		surf.VertexNormal(9,0.0,1.0,0.0)
		surf.VertexNormal(10,0.0,1.0,0.0)
		surf.VertexNormal(11,0.0,-1.0,0.0)
				
		surf.VertexNormal(12,0.0,-1.0,0.0)
		surf.VertexNormal(13,0.0,1.0,0.0)
		surf.VertexNormal(14,0.0,1.0,0.0)
		surf.VertexNormal(15,0.0,-1.0,0.0)
	
		surf.VertexNormal(16,-1.0,0.0,0.0)
		surf.VertexNormal(17,-1.0,0.0,0.0)
		surf.VertexNormal(18,1.0,0.0,0.0)
		surf.VertexNormal(19,1.0,0.0,0.0)
				
		surf.VertexNormal(20,-1.0,0.0,0.0)
		surf.VertexNormal(21,-1.0,0.0,0.0)
		surf.VertexNormal(22,1.0,0.0,0.0)
		surf.VertexNormal(23,1.0,0.0,0.0)

		surf.VertexTexCoords(0,0.0,1.0)
		surf.VertexTexCoords(1,0.0,0.0)
		surf.VertexTexCoords(2,1.0,0.0)
		surf.VertexTexCoords(3,1.0,1.0)
		
		surf.VertexTexCoords(4,1.0,1.0)
		surf.VertexTexCoords(5,1.0,0.0)
		surf.VertexTexCoords(6,0.0,0.0)
		surf.VertexTexCoords(7,0.0,1.0)
		
		surf.VertexTexCoords(8,0.0,1.0)
		surf.VertexTexCoords(9,0.0,0.0)
		surf.VertexTexCoords(10,1.0,0.0)
		surf.VertexTexCoords(11,1.0,1.0)
			
		surf.VertexTexCoords(12,0.0,0.0)
		surf.VertexTexCoords(13,0.0,1.0)
		surf.VertexTexCoords(14,1.0,1.0)
		surf.VertexTexCoords(15,1.0,0.0)
	
		surf.VertexTexCoords(16,0.0,1.0)
		surf.VertexTexCoords(17,0.0,0.0)
		surf.VertexTexCoords(18,1.0,0.0)
		surf.VertexTexCoords(19,1.0,1.0)
				
		surf.VertexTexCoords(20,1.0,1.0)
		surf.VertexTexCoords(21,1.0,0.0)
		surf.VertexTexCoords(22,0.0,0.0)
		surf.VertexTexCoords(23,0.0,1.0)

		surf.VertexTexCoords(0,0.0,1.0,0.0,1)
		surf.VertexTexCoords(1,0.0,0.0,0.0,1)
		surf.VertexTexCoords(2,1.0,0.0,0.0,1)
		surf.VertexTexCoords(3,1.0,1.0,0.0,1)
		
		surf.VertexTexCoords(4,1.0,1.0,0.0,1)
		surf.VertexTexCoords(5,1.0,0.0,0.0,1)
		surf.VertexTexCoords(6,0.0,0.0,0.0,1)
		surf.VertexTexCoords(7,0.0,1.0,0.0,1)
		
		surf.VertexTexCoords(8,0.0,1.0,0.0,1)
		surf.VertexTexCoords(9,0.0,0.0,0.0,1)
		surf.VertexTexCoords(10,1.0,0.0,0.0,1)
		surf.VertexTexCoords(11,1.0,1.0,0.0,1)
			
		surf.VertexTexCoords(12,0.0,0.0,0.0,1)
		surf.VertexTexCoords(13,0.0,1.0,0.0,1)
		surf.VertexTexCoords(14,1.0,1.0,0.0,1)
		surf.VertexTexCoords(15,1.0,0.0,0.0,1)
	
		surf.VertexTexCoords(16,0.0,1.0,0.0,1)
		surf.VertexTexCoords(17,0.0,0.0,0.0,1)
		surf.VertexTexCoords(18,1.0,0.0,0.0,1)
		surf.VertexTexCoords(19,1.0,1.0,0.0,1)
				
		surf.VertexTexCoords(20,1.0,1.0,0.0,1)
		surf.VertexTexCoords(21,1.0,0.0,0.0,1)
		surf.VertexTexCoords(22,0.0,0.0,0.0,1)
		surf.VertexTexCoords(23,0.0,1.0,0.0,1)
				
		surf.AddTriangle(0,1,2) ' front
		surf.AddTriangle(0,2,3)
		surf.AddTriangle(6,5,4) ' back
		surf.AddTriangle(7,6,4)
		surf.AddTriangle(6+8,5+8,1+8) ' top
		surf.AddTriangle(2+8,6+8,1+8)
		surf.AddTriangle(0+8,4+8,7+8) ' bottom
		surf.AddTriangle(0+8,7+8,3+8)
		surf.AddTriangle(6+16,2+16,3+16) ' right
		surf.AddTriangle(7+16,6+16,3+16)
		surf.AddTriangle(0+16,1+16,5+16) ' left
		surf.AddTriangle(0+16,5+16,4+16)

		Return mesh
	
	End Function
</textarea> <br><br></td></tr></table><br>
<a name="864172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> But isn't that kind what my DefaultTile function is doing? <br><br></td></tr></table><br>
<a name="864190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exactly like in your own function, yes. The main difference would be offcourse, having the same normals and mesh buildup that CreateCube() gives. And it has 6 sides as well. <br><br></td></tr></table><br>
<a name="864244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe I miss something, but this is not exactly what you do in your tile function if it is still the one from above. <br><br>In your function you calculate no normals at all. You have to call m.UpdateNormals() at the end of your function. I know this was said already before, but it seems noone has recognised. <br><br></td></tr></table><br>
<a name="864292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did try putting UpdateNormals() at then end of my function but it didn't seem to do anything at all.<br>I merge the cubes/boxes into my "WorldModel" and the WorldModel does UpdateNormals(), that's why (I think) I don't need the UpdateNormals() in my DefaultTile function. <br><br></td></tr></table><br>
<a name="864340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> That makes sense then. That final UpdateNormals will overrule any existing normals. The following function will scan through all surfaces. If vertices share the same position, their normals will be averaged. It doesn't generate normals itself. However, with the optional flag, you can first perform UpdateNormals on the mesh. You could probably replace the UpdateNormals call from the WorldModel with this function.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
	'example

	Import sidesign.minib3d
	
	Graphics3D 800, 600
	
	CreateLight()
	
	cam = CreateCamera()
	MoveEntity cam, 0, 0, -10
	
	cube = defaulttile()'CreateCube()
	SmoothNormals cube, True
	
	Repeat

		TurnEntity cube, 1, 2, 3
		RenderWorld()
		Flip
		
	Until KeyHit(key_escape)
	
	End


'function starts here
Type tempV
	Field x#, y#, z#
	Field nx#, ny#, nz#
	Field count#
End Type

Function SmoothNormals(mesh, generatenormals = False)

	If generatenormals Then UpdateNormals mesh

	vlist:TList = CreateList()

	For s = 1 To CountSurfaces(mesh)
	
		surf = GetSurface(mesh, s)
		
		For v = 0 To CountVertices(surf) - 1

			x# = VertexX(surf, v)		
			y# = VertexY(surf, v)
			z# = VertexZ(surf, v)
			nx# = VertexNX(surf, v)		
			ny# = VertexNY(surf, v)
			nz# = VertexNZ(surf, v)
					
			test = False
			For tv:tempV = EachIn vlist
				If (tv.x = x) And (tv.y = y) And (tv.z= z) Then
					tv.nx# = tv.nx# + nx#
					tv.ny# = tv.ny# + ny#
					tv.nz# = tv.nz# + nz#
					tv.count = tv.count + 1
					test = True
				End If
			Next
			If Not(test) Then
				tv:tempV = New tempV
				tv.x = x
				tv.y = y
				tv.z = z
				tv.nx = nx
				tv.ny = ny
				tv.nz = nz
				tv.count = 1
				ListAddLast vlist, tv
			End If
			
		Next
		
	Next

	For tv:tempV = EachIn vlist
		Print "count = " + tv.count
		Print tv.nx / tv.count
		Print tv.ny / tv.count
		Print tv.nz / tv.count
	Next

	For s = 1 To CountSurfaces(mesh)
	
		surf = GetSurface(mesh, s)
		
		For v = 0 To CountVertices(surf) - 1

			x# = VertexX(surf, v)		
			y# = VertexY(surf, v)
			z# = VertexZ(surf, v)
			
			test = False
			For tv:tempV = EachIn vlist
				If (tv.x = x) And (tv.y = y) And (tv.z= z) Then
					nx# = tv.nx#
					ny# = tv.ny#
					nz# = tv.nz#
					count# = tv.count#
					VertexNormal surf, v, nx/count, ny/count, nz/count
					test = True
				End If
			Next
			
		Next
		
	Next
	
	vlist.Clear()
		
End Function			
'ends here

Function defaultTile:TMesh(iTop=1,iDown=1,iLeft=1,iRight=1)
		
	Local m:TMesh=CreateMesh()
	Local s:TSurface
	
	s=CreateSurface( m )
	If iTop Then
		AddVertex s,+1,+1,+1,0,0;AddVertex s,-1,+1,+1,1,0
		AddVertex s,-1,-1,+1,1,1;AddVertex s,+1,-1,+1,0,1
		AddTriangle s,0,1,2;AddTriangle s,0,2,3
	EndIf
	
	s=CreateSurface( m )
	If iDown Then
		AddVertex s,-1,+1,+1,0,1;AddVertex s,+1,+1,+1,0,0
		AddVertex s,+1,+1,-1,1,0;AddVertex s,-1,+1,-1,1,1
		AddTriangle s,0,1,2;AddTriangle s,0,2,3
	EndIf
	
	s=CreateSurface( m )
	If iLeft Then
		AddVertex s,-1,+1,+1,0,0;AddVertex s,-1,+1,-1,1,0
		AddVertex s,-1,-1,-1,1,1;AddVertex s,-1,-1,+1,0,1
		AddTriangle s,0,1,2;AddTriangle s,0,2,3
	EndIf
		
	s=CreateSurface( m )
	If iRight Then
		AddVertex s,+1,+1,-1,0,0;AddVertex s,+1,+1,+1,1,0
		AddVertex s,+1,-1,+1,1,1;AddVertex s,+1,-1,-1,0,1
		AddTriangle s,0,1,2;AddTriangle s,0,2,3
	EndIf
	
	Return m
End Function
</textarea> <br><br></td></tr></table><br>
<a name="864356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah cheers Warner!!<br>That really worked, still some minor problems but I'll fix it sooner or later. :P<br>Thanks to everyone for helping me! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
