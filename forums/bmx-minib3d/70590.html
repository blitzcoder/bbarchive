<!DOCTYPE html><html lang="en" ><head ><title >LoadAnimB3D and Molebox (Warning: Bizarre)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >LoadAnimB3D and Molebox (Warning: Bizarre)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >LoadAnimB3D and Molebox (Warning: Bizarre)</a><br><br>
<a name="789225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll try to describe this quirk as briefly as possible -- it's kicking my ass at the moment.<br><br>I have a 'maps' directory in my current project that contains level maps in .b3d format along with their textures. What I 'm finding is that, when I Molebox the project, the geometry will load fine but the textures won't UNLESS I store the maps and textures in the main directory instead (which is obviously a bit impractical).<br><br>I have narrowed things down a little in that, when employing a 'maps' directory, sticking the original (unpacked) directory in with the packed exe means the textures load again. So even though LoadAnimB3D is getting the geometry from the packed file it is deciding to search outside of the pack for the textures. What's really odd is that using Readdir() on the packaged 'maps' directory reveals that Max can find everything that should be there - not just the .b3d but the textures too!<br><br>I've been tracing back through the MiniB3D source and trying to work out why Readdir() can find things that LoadAnimB3D can't and I've got as far as FileFind and its by-reference arguments, which are new to me, so while I go and read up on that and try to work out what it's doing I thought I'd post. Any suggestions welcome* -- I'm fairly perplexed.<br><br>  <br><br>*I should point out that I've stripped out the hard-coded texture paths that Maplet puts in .b3d exports, so that's not the problem (in the unpackaged project the textures really do get loaded from whichever sub-directory the .b3d files are located in). <br><br></td></tr></table><br>
<a name="789447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, MoleBox doesn't support directory seeking/reading, personally I load texture and apply to my model when I'm still using B3D, dunno if MiniB3D has similar method to work out. <br><br></td></tr></table><br>
<a name="789539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> directory seeking/reading <br></div><br>I assume that 'directory seeking' is a specialised sub-process that the mesh loader attempts? (EDIT: Oooh, is this a Filetype() issue I wonder...) I can manually load textures from the packed directory so it should be theoretically possible to 'fix' the mesh loader to do likewise.<br><br>Loading and applying the lightmap manually is fine (as there is only a single texture for the entire texture index) but I have no idea how to do the same for the material textures as they need to be mapped correctly about the mesh. <br><br></td></tr></table><br>
<a name="792652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have happened across a solution to this problem which is just as bizarre: If I include an empty 'maps' folder in the exe's folder then all the contents of 'maps' within the pack can be found by the b3d loader! That'll do me! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
