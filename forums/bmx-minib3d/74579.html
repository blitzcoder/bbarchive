<!DOCTYPE html><html lang="en" ><head ><title >CopyMesh and Copying Animation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >CopyMesh and Copying Animation</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >CopyMesh and Copying Animation</a><br><br>
<a name="833304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I posted this in the Blitz3D forum because sometimes I don't know whether to post queries there or in here. I've tried code in both B3D and MiniB3D without success...<br><br>Basically, I don't want to LoadAnimMesh for 22 models as loading takes too long.<br><br>If I load the master mesh and use CopyEntity I am unable to change the surface colours or textures for each individual entity which is essential.<br><br>If I use CopyMesh I can change the colours/textures of the individual models but it doesn't copy the animation. I tried using LoadAnimSeq(player1, "originalmesh.b3d") but this gives the error "Entity has no animation" in B3D. It compiles ok in miniB3D but still doesn't animate.<br><br>What's the solution? <br><br></td></tr></table><br>
<a name="833357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The solution is to wait until I'm coming home ;)<br>To be serious, with standard b3d or minib3d it doesn't seem to be possible. But I have worked out a 'copyanimmesh' function which will copy the animations also. I only have to get it working with the new bone system. I will post it as soon as possible. <br><br></td></tr></table><br>
<a name="833362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Although I already answered your question over there I will do it here as well: Mesh data is attached to an entity, as well as is animation data. The animation data is NOT part of the mesh.<br><br>So if you call CopyMesh, you only have the mesh data, which normally means Frame 0 of the animation.<br><br>The solution is simple: load the different "distinct" master models (if all 22 are the same it shouldn't be an issue if you have 2 versions of the model: 1 that is textured, one that is not. only load the textured one on the first step, get its brush, load the other 21 master meshes and apply the brush) <br><br></td></tr></table><br>
<a name="833366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Dreamora. I was afraid that this is the case.<br><br>Here's hoping Klepto can come to the rescue. :) <br><br></td></tr></table><br>
<a name="833500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ideally with animated meshes you will have just one surface, with a single texture for each mesh. This will improve speed greatly, and you would be able to use CopyEntity and EntityTexture to quickly and efficiently create lots of different textured entities. <br><br>This could be done for a football game, too - you would just need a single texture (512x256) with distinct skin and kit areas (left and right side of texture), then to change the skin or kit, dynamically copy from two textures (256x256 for skin, 256x256 for kit) to the left or right side of the single texture. <br><br></td></tr></table><br>
<a name="833591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simon, this methods works perfectly. Thanks. :) <br><br></td></tr></table><br>
<a name="833654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >z4g0</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Other problem: Loading some AnimatedMesh I get "Array out of bounds" in this row:<br><br><pre class=code>bo_bone.keys.flags[k_frame]=bo_bone.keys.flags[k_frame]+k_flags</pre><br>on TModel.LoadAnimB3D() function.<br><br>the same models in blitz3D works good! <br><br></td></tr></table><br>
<a name="833802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you send me the file please z4g0? <br><br></td></tr></table><br>
<a name="834106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thinking about it, does the file contain a non-boned anim? If so, MiniB3D doesn't support these yet. <br><br></td></tr></table><br>
<a name="1099325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jtfrench</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anybody know if this issue (animating a CopyMesh'd entity) was ever addressed in regular MiniB3D? It sounds like there may be a patch in the MiniB3D extended from Klepto. Just curious if there was ever an accepted "best practice" for resolving this issue.<br><br>Thanks <br><br></td></tr></table><br>
<a name="1099329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know the answer to your question, but if I had to solve this issue myself I would study CopyMesh() and CopyEntity() to see how they worked and come up with a new DuplicateEntity() function.<br><br>This function would take in optional boolean arguments as to which elements of the original entity to <b>duplicate</b> (True) and which elements to <b>share</b> (False) with the original. If every argument is kept as 'False' it should probably work as a CopyEntity().<br>It should take care of matrices, meshes, surfaces and anim_surfaces, brushes, textures and recursively duplicate the child hierarchy (such as child entities and bones). <br><br></td></tr></table><br>
<a name="1099641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> CopyEntity() should work. I see the animation info in the code.<br><br>Also, other issues may be fixed in the small fixes version:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=94221" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=94221</a> <br><br></td></tr></table><br>
<a name="1108529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jtfrench</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> We got it working I think by using CopyMesh() and then individually copying over the boneslist or something like that. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
