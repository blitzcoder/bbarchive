<!DOCTYPE html><html lang="en" ><head ><title >Removing Triangles from surface</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Removing Triangles from surface</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >Removing Triangles from surface</a><br><br>
<a name="1199988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a Surface which contains quads.  Each quad is made up of 4 vertices and 2 triangles.  I want to remove one of the quads from the surface.  I've looked in the B3D docs and I cant find a RemoveTriangle or FreeTrianlge function.  I did find a ClearSurface function, but that would eliminate all triangles and vertices which require an entire rebuild of the surface.  Is this the only way or am I missing something? <br><br></td></tr></table><br>
<a name="1199989"></a>

<a name="1199990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sadly, rebuilding is the only way.<br>Even if there was Remove/Free triangle function, it would end up rebuilding mesh. <br><br></td></tr></table><br>
<a name="1199998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> As polan said, rebuilding is the only way. You can't remove vertices or triangles directly.<br>It should be possible to create a DeleteVert and DeleteTri methods as the data is just stored in arrays if I'm not mistaken... but it's not built in and you would need to figure out what other modifications would be needed afterwards (rebuilding normals or whatever else to push the updated data through).<br>Personally what I do with meshes that I'm working on on that level is try to re-use the data. Stash the verts somewhere or find a way to disable the tri. Consider putting things that will be modified into their own surfaces so you can trash the surface (sometimes this can even give you performance improvements since you can handle the surface differently, sometimes the oposite of course, depends on what you're doing). Determine what the issue is:<br>1) Display: If it's just visual you can cheat by hiding the verts somewhere where you won't see, or reducing the tri to a single point etc.<br>2) Memory: Consider using more surfaces so you can actually kill things off entirely when needed.<br>3) Modify mesh performance: You're probably best off going with surfaces since you shouldn't need to recalc the whole mesh when deleting them (if I remember correctly, which I probably don't...). Or consider caching the points so you can just move them into position as needed.<br>4) Drawing performance: If every vert counts, and adding more surfaces would cause slowdown then you need to look into your own direct data access (delete the points yourself and figure out how to make that work), or i you're adding AND deleting then consider cacheing the points again to minimize the amount of things that need actual modification (arrays can take a while to rebuild so adding a new point is a lot slower than moving an old one, you need to update either way but when moving you don't need to rebuild the array). <br><br></td></tr></table><br>
<a name="1200040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can also <i>pool</i> those quads. <br>If you don't need one now, you disable it by moving all its vertices to the exact same location - the hardware figures this and doesn't render it.<br><br>But this keeps it "available": whenever you need a new quad again, you can recycle it as one of the inactive quads (change vertex colors, UVs etc. to what this new quad needs).<br>So when you need a new quad and have quads inactive, you can recycle. When you need a new quad and have no quads to recycle, you can create a new one. <br><br></td></tr></table><br>
<a name="1200069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm thinking that recycling the vertices are the best way to go.  Shouldn't create any major performance issues since this is for a level editor and there will probably be more quads added than will be taken away as the level gets more complex.  And if performance ever gets to the point of being intolerable, I could just add an option to completely rebuild the level and get rid of all the unused quads.<br><br>Just one question, If I set all the vertices to the same coordinates, would it affect collisions if an entity bumps into it?  Thinking it might be better to set the vertices to some huge coordinates where my level will never reach. <br><br></td></tr></table><br>
<a name="1200074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Recycling vertices will cause you problems with most of models. It's common for triangle to share vertex with another triangle.<br>Unless you are building mesh yourself, and you are sure there are no shared vertices. <br><br></td></tr></table><br>
<a name="1200159"></a>

<a name="1200160"></a>

<a name="1200161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Considering that a degenerate triangle (with collapsed vertices) has no area and no normal, I don't think it will influence collisions. But I speculate.<br>It <i>will</i> influence the mesh's bounding box (as the calculation for that simply checks the most distant vertices, it doesn't regard triangles). Though if you clean the inactive quads when you're exporting the level, this shouldn't happen in the actual game. You're more concerned now with the flexibility of editing rather than the performance.<br><br><div class="quote"> Thinking it might be better to set the vertices to some huge coordinates where my level will never reach. <br></div><br>That is a good idea. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
