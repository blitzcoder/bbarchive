<!DOCTYPE html><html lang="en" ><head ><title >How to keep acceptable performance without LOD?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to keep acceptable performance without LOD?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >How to keep acceptable performance without LOD?</a><br><br>
<a name="1009943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Happy Sammy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>It is said that LOD is not implemented in minib3d.<br>1. How could we keep acceptable performance, when the no. of animated characters is large(say 50) and quality of 3d models is necessary ?<br><br>2. Are there any way to use LOD in minib3d?<br><br>Thanks in advance <br><br></td></tr></table><br>
<a name="1010001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can do LOD manually by swapping models depending on distance from the camera, but there's no automatic LOD where you simply tell the engine "these are the various levels of detail, now GO!" <br><br></td></tr></table><br>
<a name="1010027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's no LOD, but theres HideEntity and ShowEntity, just like in Blitz3D - so, just get the distance from the model to the player, and if it isn't close enough (on the same area, same sector, or whatever) just hide it.<br><br>And of course, LOD is pretty easy to implement, take a look at the code archives: there's a LOD example there on Blitz3D that should be fairly easy to port to miniB3D. <br><br></td></tr></table><br>
<a name="1010356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Taking from some Blitz3D Tips thread in the Blitz3D Tutorials section, it appears that even hidden meshes still have a small impact on the CPU, because of the vertex manipulation involved with animations. <br><br>So it's alleged that you should free whatever mesh you would be hiding, and whenever you need it back, you copy it from a hidden, master one.<br><br><div class="quote"> <br>Originally posted by Matty:<br><br>Use a pivot for each 3d character model with a collision type as appropriate (ellipsoid to polygon).<br>If a 3d animated entity has been 'not seen' for more than a few seconds then rather than hide it (which blitz3d does automatically when not in camera view), free it (ie freeentity) but keep the pivot. Then when the entity comes into view again copyentity the character model from a 'master' mesh that is simply used as a reference to copy entities from. <br><br>I have found that while Blitz3D culls entities not in view they still have a decent performance hit on older PCs even when hidden, particularly if animated and so it is better to just remove the entity entirely and keep a pivot behind to 'act' while the entity is not in view.<br> <br></div><br>I haven't tested this, though. You'd need to know the cost of copying the meshes from the 'master' ones in real-time, to see if it's worth the implementation. <br><br></td></tr></table><br>
<a name="1010394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would think that means simply stop the animation when hiding the model. <br><br></td></tr></table><br>
<a name="1010653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know much about animated meshes so bear that in mind with my post.<br><br>Hiding an entity is better than just putting it off screen. The render loop checks if something is hidden, or alpha = 0, then it checks the frustrum. So you can save the frustrum check if you hide it.<br><br>If you don't stop the animation it should still animate weather hidden or off screen, so jhocking should be spot on with that, as updating the animation will take time. the post you reference by matty effectively stops the animation by deleting the mesh, however this is going to have overhead to delete, cleanup the memory, and then copy and re-allocate the memory (allbeit quite small) every time you go through the process. However since the entity is being removed entirely it doesn't have an entry in the render list to check at all, thus saving an infinitely tiny amount of time...<br><br>If you have the time to do the coding one possibly overly sophisticated method would be to use a bunch of methods. I would set up an object to control each one of your animated meshes and their LOD. copy the appropriate mesh (high/low/whatever) for it's current distance. if it goes off screen hide and stop it. if it gets too far or too close then copy the new mesh and hide/stop the old one. if a mesh is hidden for a certain amount of time you could consider freeing it.<br><br>That's probably overkill though, you likely have the memory to handle pre-copying all the levels and then just hide/stop everything you're not using, and start/show as needed to switch LoD.<br><br>All depends on how often you think you'll be switching lod, how many levels you'll have, and most importantly how many characters you need to do this on... and also how many do you expect to have on screen at one time... basically how much time can you afford for management (both processor and programming) vs. is it just better to let the system handle more of the work on it's own.<br><br>Just some thoughts, hope they help, gluck! <br><br></td></tr></table><br>
<a name="1010683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, about the stopping of animation, I just thought of something.<br><br>Say if the character is throwing a punch and then gets off-screen. His animation would be stopped.<br>Now let's say he stays outside the view for an entire minute - whenever he gets back, he'll quickly finish that animation which he should have finished while outside the screen (since we stopped it when he got away).<br><br>With that in mind, I think we should always keep manually counting the frames (just a matter of counting an integer or float, if you will), and then use the SetAnimTime only when that mesh is inside the view frustrum. Problem is, you are actually going to have to rewrite a bit of the animation interface, since you'd need to check whether the frames have reached the end, if it's a ping-pong mode, etc (so your counter acts accordingly). It's not that difficult, at least.<br>That way, characters can finish animations off-screen while sucking the least performance possible. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
