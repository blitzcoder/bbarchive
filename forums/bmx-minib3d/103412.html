<!DOCTYPE html><html lang="en" ><head ><title >Assimp wrapper update</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Assimp wrapper update</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >Assimp wrapper update</a><br><br>
<a name="1244864"></a>

<a name="1244865"></a>

<a name="1244867"></a>

<a name="1244868"></a>

<a name="1244869"></a>

<a name="1246518"></a>

<a name="1248384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have updated Peter Scheutz's Assimp wrapper to use version 3.1.1 and changed it from a source to a dynamic library wrapper because the source was broken and I haven't been able to fix it yet. <br><br>Apart from that it is basically the same code reorganized a bit. Now you can import Scheutz.aiMinib3d instead of needing to include the aiLoadMesh function in your projects. It also includes some docs and a module for Openb3d.<br><br>You can get the wrapper and examples <a href="https://github.com/markcwm/scheutz.mod" target="_blank">here</a> and the library binaries <a href="https://github.com/markcwm/assimp-bin" target="_blank">here</a>. Courtesy of GitHub. You will also need the Assimp <a href="https://github.com/assimp/assimp" target="_blank">source</a> to run the examples.<br><br>The original Assimp wrapper thread is <a href="/posts.php?topic=82586" target="_blank">here</a>. <br><br>Animations are not supported and meshes have no children. <br><br></td></tr></table><br>
<a name="1251200"></a>

<a name="1251201"></a>

<a name="1251203"></a>

<a name="1251204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, so I'm trying to get the assimp source wrapper working but I can't understand these errors as I have included all the header directories and cc files so it really should be happy.<br><br>The module builds but when I run an example I get just these poly2tri errors:<br><pre class=code>/home/mark/BlitzMax/mod/scheutz.mod/assimp.mod/assimp.debug.linux.x86.a(IFCOpenings.cpp.debug.linux.x86.o): In function 
`Assimp::IFC::TryAddOpenings_Poly2Tri(std::vector&lt;Assimp::IFC::TempOpening, std::allocator&lt;Assimp::IFC::TempOpening&gt; &gt; const&amp;, 
std::vector&lt;aiVector3t&lt;double&gt;, std::allocator&lt;aiVector3t&lt;double&gt; &gt; &gt; const&amp;, Assimp::IFC::TempMesh&amp;)':
IFCOpenings.cpp:(.text+0xb912): undefined reference to `p2t::CDT::CDT(std::vector&lt;p2t::Point*, std::allocator&lt;p2t::Point*&gt; &gt;)'
IFCOpenings.cpp:(.text+0xbe14): undefined reference to `p2t::CDT::AddHole(std::vector&lt;p2t::Point*, std::allocator&lt;p2t::Point*&gt; &gt;)'
IFCOpenings.cpp:(.text+0xbeb0): undefined reference to `p2t::CDT::Triangulate()'
IFCOpenings.cpp:(.text+0xbec8): undefined reference to `p2t::CDT::GetTriangles()'
/home/mark/BlitzMax/mod/scheutz.mod/assimp.mod/assimp.debug.linux.x86.a(BlenderTessellator.cpp.debug.linux.x86.o): In function 
`Assimp::BlenderTessellatorP2T::Tessellate(Assimp::Blender::MLoop const*, int, 
std::vector&lt;Assimp::Blender::MVert, std::allocator&lt;Assimp::Blender::MVert&gt; &gt; const&amp;)':
BlenderTessellator.cpp:(.text+0x120): undefined reference to `p2t::CDT::CDT(std::vector&lt;p2t::Point*, std::allocator&lt;p2t::Point*&gt; &gt;)'
BlenderTessellator.cpp:(.text+0x139): undefined reference to `p2t::CDT::Triangulate()'
BlenderTessellator.cpp:(.text+0x14e): undefined reference to `p2t::CDT::GetTriangles()'
BlenderTessellator.cpp:(.text+0x17c): undefined reference to `p2t::CDT::~CDT()'
BlenderTessellator.cpp:(.text+0x1b9): undefined reference to `p2t::CDT::~CDT()'
BlenderTessellator.cpp:(.text+0x1da): undefined reference to `p2t::CDT::~CDT()'</pre><br>I resolved all the other errors by importing the c/cpp files but this one won't go away. They are the only .cc files in the library, could this be the problem?<br><br>Edit: looking around in maxmods it seems I may need a glue.cpp for cc files because it's 'c with classes'. <br><br></td></tr></table><br>
<a name="1269065"></a>

<a name="1269066"></a>

<a name="1269067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know the limitations to Assimp, but no animations or bones are loaded.<br>And it seems like the shading on Assimp loaded models is much harder than on models loaded normally.<br>Other than that, it seems to work great and loads my DAE files perfectly! (Tested with both Openb3d and Minib3d) <br><br></td></tr></table><br>
<a name="1269102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The wrapper is incomplete, Peter Scheutz never got round to it, so no animations. I just took his code and made it compile.<br>I hadn't noticed that about the shading, it maybe something that can be changed. <br><br></td></tr></table><br>
<a name="1270050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've had a play, and have a built-as-module version of assimp on OS X 32-bit.<br>Unfortunately, I think the types.bmx stuff will need a rewrite as it doesn't look like it will be x64 compatible.<br>I'm coming at this from my "usual" direction, which tends to involve glue code rather than trying to do everything in .bmx (this tends to make things much cleaner on the bmx side, with less caveats and possible issues).<br><br>Anyway, just playing at the moment.. <br><br></td></tr></table><br>
<a name="1270057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Brucey: Even just to get this built as a module is awesome! I've really stalled on this as I have no idea how to write glue code and that seemed to be what this needed. So feel free to take over this project as there's not much I can do with it. <br><br></td></tr></table><br>
<a name="1270326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it just me or is z "inverted" on loading .b3d with assimp? i.e. the back is at the front, and the front is at the back.<br><br>I see in the examples, that the entity gets a 180 degree rotation. Which is fine, but if you look at the zombie, his stubby arm is on a different side than when you use the standard LoadMesh.<br><br>I see where the anim issues have come from, since the bone stuff isn't exposed anywhere. It will all need to be applied at a low level... <br><br></td></tr></table><br>
<a name="1270329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it does invert at least one of the model axis.<br><br>I wasn't aware that there was any animation code in the wrapper. <br><br></td></tr></table><br>
<a name="1270336"></a>

<a name="1270337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The ImportFile function has flags for different options, <a href="http://assimp.sourceforge.net/lib_html/postprocess_8h.html" target="_blank">docs here</a>.<br><br>The aiProcess_ConvertToLeftHanded flag assigns the DX coordinate space (solving the z inverting issue), aiProcess_GenSmoothNormals generate smooth normals (solving the hard shading issue), aiProcess_GenNormals generates the flat normals, aiProcess_FlipWindingOrder flips all the mesh triangles.<br><br>I changed the flags found in the LoadMesh functions in aiminib3d.mod/types.bmx and aiopenb3d/types.bmx. Those files are identical btw. <br><br></td></tr></table><br>
<a name="1270338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, I just discovered those too :-)<br><br>So, after the rewrapping I have models loading but without textures for whatever reason - all the code looks correct as far as I can tell, but no textures.<br>Not to worry... I'm trying to find a way to crowbar in the animation/bone data at the moment... <br><br></td></tr></table><br>
<a name="1270358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like you know what you're doing there! Is it x64 compatible now too? <br><br></td></tr></table><br>
<a name="1270360"></a>

<a name="1270361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Is it x64 compatible now too? <br></div><br>I expect so, but I haven't tried it yet.<br><br>[edit] Yes. <br><br></td></tr></table><br>
<a name="1270386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great! <br><br>A little update: I removed aiminib3d.mod and aiopenb3d.mod in favour of using Include "TaiModel.bmx" as I thought it was a little confusing. The drawback is needing to copy the file to the app folder but I now think this is the better option. I added to dynamic.bmx Import "-ldl" needed on Linux. I also put a license.txt in there. <br><br></td></tr></table><br>
<a name="1270387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I removed aiminib3d.mod and aiopenb3d.mod... <br></div><br>That's interesting.<br>I've modified everything to use a factory-style mesh loader (much in the same way as pixmap loading works). Each "loader" knows what file format it can load, so the factory just looks up the extension and gets the correct loader. That way you just call LoadMesh(), and depending on what modules you have imported, it will load using an appropriate loader (or not, if the extension isn't supported by any of the current loaders). <br><br></td></tr></table><br>
<a name="1270398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> That sounds like a clever solution to the problem (using abstract methods/types), but I don't see how it solves use of the minib3d functions in TaiModel.bmx (i.e. CreateBrush, BrushShininess, LoadTexture, BrushTexture, CreateMesh, CreateSurface, AddVertex, VertexX, VertexNormal, VertexNX, VertexTexCoords, VertexU, TriangleVertex, AddTriangle, etc). Surely you're forced to import sidesign.minib3d for this? <br><br></td></tr></table><br>
<a name="1303727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm interested to know where I can find the updated repo for blitz-assimp. I can only see the google code page. <br><br></td></tr></table><br>
<a name="1303763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I closed my repo for this as it didn't do animations and it was just a bit too bloated, the library file was pretty big 50 MB or something. <br><br></td></tr></table><br>
<a name="1303766"></a>

<a name="1303769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok understood and I kinda figured when I saw that dreaded boost libs again. I was trying to stay away from that monster hehehe. XD<br><br>thanks munch. <br><br></td></tr></table><br>
<a name="1312816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LT</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, did you ever post your version of the AssImp module?  I can't see it anywhere... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
