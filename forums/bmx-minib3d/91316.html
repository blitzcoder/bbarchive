<!DOCTYPE html><html lang="en" ><head ><title >What's going on here? PNG alpha.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What's going on here? PNG alpha.</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >What's going on here? PNG alpha.</a><br><br>
<a name="1039169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using B3d with 32 bit png textures is giving inconsistent results. A tester for my game is using a Sony Via with a ATI HD 4650 graphics card and cannot see any 3d meshes properly if they are textured with an alpha channelled PNG. <br><br>The only meshes that show up are the left\right toggles in the 4th(problem) image below - these are 64x64pixels. I tried making all the other textures square also but that makes no difference either...texture sizes are 256x64 and 1024x512.<br><br>Does anybody have any ideas what's going wrong? Spent 2 days now trying all sorts but to no avail.<br><br>Below are images of how the screens should look and how they are showing up on the notebook. Note how the 3d tileset is showing up normally as it does not use any PNGs with alpha channel.<br><br><img src="http://www.gnarlysoft.co.uk/stuff/1.jpg"><br><img src="http://www.gnarlysoft.co.uk/stuff/1a.jpg"><br><img src="http://www.gnarlysoft.co.uk/stuff/2.jpg"><br><img src="http://www.gnarlysoft.co.uk/stuff/2a.jpg"><br><img src="http://www.gnarlysoft.co.uk/stuff/3.jpg"><br><img src="http://www.gnarlysoft.co.uk/stuff/3a.jpg"> <br><br></td></tr></table><br>
<a name="1039181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> First question, what's up with the direct x option in the config view? minib3d is opengl only. Just curious...<br><br>textures with an alpha are handled the same way as entities with less than solid opacity. Try changing the opacity of some of your other objects to see what happens, wether it's a rendering issue, or more likely hardware.<br><br>How are you rounding the corners of your tiles?<br><br>you said you tried making the problem textures square, were they power of 2 square or just square? shouldn't really matter since minib3d does a pow2 on textures but just curious again.<br><br>What happens if you put one of the working textures in place of a non working one? Does it show up, or is it broken.<br><br>Is there anything different about the creation path for the PNGs? Were some exported from photoshop for device and some just saved and PNG or anything?<br><br>Does it only happen on that one tester's system?<br><br>Can you put up an example program for others to try on their cards? <br><br></td></tr></table><br>
<a name="1039206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make them 0.99 alpha, I seem to recall hearing of some glitch that way. <br><br></td></tr></table><br>
<a name="1039232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are times when the alpha doesn't properly register (doesn't usually look like that for me...) so the .99 alpha forces minib3d to draw them with alpha so that could also help. <br><br></td></tr></table><br>
<a name="1039249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the replies.<br><br>Ima747 - the game is a mockup and these are not the final gfx, also the options screen is a framework that is not necessarily for MiniB3D.<br><br>The tiles are 3d objects with slightly curved corners - no alpha going on there.<br><br>Textures are all power of two and art path is the same for absolutely everything!<br><br>I'll try that 0.99 alpha trick and see if that sorts it out. You never know.<br><br>Where in the MiniB3D code does it handle the alpha tranparencies of textures\meshes? It might be worth sniffing around there. I bet for certain this is a silly little bug.<br><br>I'll report back, if the first fix doesn't work I'll try swapping a texture with no transparency to see if it is indeed the issue. It does seem to be a case of MiniB3D handling only one transparency at a time...as only one entity ever shows up correctly - maybe this is the clue? Some variable is not being reset in MiniB3D source code? <br><br></td></tr></table><br>
<a name="1039296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alpha textures are not so much handled by minib3d as by openGL. If minib3d detects that something should be drawn with alpha (either because the texture has alpha, or the object has alpha) it then goes through a process of sending it to the openGL render que in reverse depth order from the camera (just like you draw 2D stuff from back to front so the overlaps are correct) Without alpha opengl renders things fine so it doesn't bother sorting things by depth.<br><br>Was there any difference in the way the PNGs were made between ones that work/don't work?<br><br>If you think it's just the first one that works, what happens if you remove the first one (or alter it to be a solid so it's not alpha)? Does the second one then work instead or is it still just as broken? <br><br></td></tr></table><br>
<a name="1039350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> No all PNGs are exactly the same and exported straight from Photoshop...I'm actually waiting to hear back from the tester to see if the 0.99 alpha setting worked or not. Blinkin' hope so ;) <br><br></td></tr></table><br>
<a name="1039364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It could be a bug in the ATI drivers though...<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1039409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> indeed. long story short is if it's just him ask him to update his drivers. ATI especially in my experience has had some real sketch opengl support... or who knows he might even be running generics or something... <br><br></td></tr></table><br>
<a name="1040022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note: I gave up on this - new drivers did nothing :(<br><br>Thanks for the suggestions and help. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
