<!DOCTYPE html><html lang="en" ><head ><title >Openb3d wrapper (Part 4)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Openb3d wrapper (Part 4)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >Openb3d wrapper (Part 4)</a><br><br>
<a name="1302570"></a>

<a name="1302571"></a>

<a name="1302572"></a>

<a name="1302573"></a>

<a name="1302574"></a>

<a name="1312773"></a>

<a name="1340860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since the <a href="/posts.php?topic=105082" target="_blank">3nd thread</a> has exceeded 250 posts I started a new thread. As usual please post new issues with the wrapper here. Thanks.<br><br>Download: You can download the latest version of the wrapper with examples and my small fixes to the C++ source <a href="https://github.com/markcwm/openb3d.mod" target="_blank">HERE</a>. Now available courtesy of GitHub.<br>You can find the official Openb3d libraries and source <a href="http://sourceforge.net/projects/minib3d/files/" target="_blank">HERE</a>.<br><br>To install MinGW follow <a href="/posts.php?topic=105834" target="_blank">this guide</a>.<br><br>The original thread about Openb3d is <a href="/posts.php?topic=92800" target="_blank">here</a> and the Freebasic thread is <a href="http://www.freebasic.net/forum/viewtopic.php?t=15409" target="_blank">here</a>.<br>Other Openb3d wrapper threads: <a href="/posts.php?topic=102556" target="_blank">1st</a>, <a href="/posts.php?topic=103682" target="_blank">2nd</a>, <a href="/posts.php?topic=105082" target="_blank">3rd</a>. <br><br></td></tr></table><br>
<a name="1302577"></a>

<a name="1302659"></a>

<a name="1303440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Recent issues posted in separate threads.<br><br><a href="/posts.php?topic=106060" target="_blank">Hardware Multisampling (MSAA) with OpenB3D/OpenGL</a> [solved]<br><a href="/posts.php?topic=106080" target="_blank">Shadows and PerPixel Lighting with Alpha Textures</a> [solved]<br><a href="/posts.php?topic=106070" target="_blank">Smoothing or Managing Terrain LOD/Quality</a><br><a href="/posts.php?topic=106063" target="_blank">OpenB3D Bump Mapping Issue</a> <br><br></td></tr></table><br>
<a name="1302610"></a>

<a name="1302611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe you can mark the MSAA issue solved for now. The postfx camera method seems to be stable enough and now with multipass ( thanks to you! :D ) to eventually write shaders that deal with AA. Maybe on future updates you can find some way to get this hardware multisampling enabled again like in minib3d but that will be just icing on the cake! ;-)<br><br>Great stuff. <br><br></td></tr></table><br>
<a name="1302657"></a>

<a name="1302665"></a>

<a name="1302669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, I need to read the MSAA thread yet.<br><br>Angros. I edited texture.cpp to remove all Global::height-height as y parameters in depth/backbuffertotex. This was so I don't have to invert y in CameraViewport which uses GraphicsHeight and would break if anything else is wanted.<br>I also noticed the CameraToTex declaration is missing in functions.h.<br><br>And I've removed inverting v texture coords in the postfx shader and now use ScaleTexture tex,1,-1 before LoadShader. This is a fix specifically for glMatrixMode(GL_TEXTURE) and glScalef. ScaleTexture isn't needed for a 2 pass shader as it seems to re-invert the texture. <br><br>While I was there I added the ability to view the depth texture in sl_depthfield.bmx.<br><br>I also added ima747's great 3d sound mod, see examples/sound for demos. Could do with better sounds. <br><br></td></tr></table><br>
<a name="1302758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd like to see some texture filter options if possible. :) <br><br></td></tr></table><br>
<a name="1302848"></a>

<a name="1302849"></a>

<a name="1302850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hezkore wrote:<br><div class="quote"> I'm wondering if there's any way to remove the filtering on textures?<br>I'd like small textures to be big pixels instead of smoothed.<br>ClearTextureFilters() doesn't help.  <br></div><br>I wrote:<br><div class="quote"> I'm sure this is the tex.flag set in LoadTexture (which doesn't seem to be working when I set it which may be a problem with pointers in the wrapper) this sets glTexParameter GL_LINEAR which should disable mipmaps but it doesn't seem to work.  <br></div><br>I was wrong, flags in LoadTexture work, the problem was that Openb3d and Minib3d use Linear filtering (by glTexParameter) but this is smooth and looks the same as mipmaps. I changed the render code in mesh.cpp and material.cpp to use Nearest and now you see sharp pixels (fix is from NeHe lesson 7). Look in examples/texturefilter.bmx as I added a handy command TextureFlags which sets tex.flags.<br><br>I also found out the brush.tex[] array needs to be updated on commands like EntityTexture and PaintMesh as it's a list of objects that changes after init, it was crashing on Null objects when I tried to access ent.brush.tex[0]. <br><br></td></tr></table><br>
<a name="1302855"></a>

<a name="1302856"></a>

<a name="1302857"></a>

<a name="1302858"></a>

<a name="1302859"></a>

<a name="1302860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'd like small textures to be big pixels instead of smoothed. <br></div><br><br>I think you can you do this by applying a material shader filter effect like some sort of <a href="http://www.pixelgraft.co.uk/wp-content/uploads/2007/08/pixelate.jpg" target="_blank">pixelate</a>. <br><br>@munch<br><br>The 3d sound support added is awesome munch! I was curious about the new depth/backbuffertotex updates as I have made some adjustment on some simple and current shaders, will that be affected as well? I have not made the update yet but planning to do so when I get something done with my stuff later on.<br><br>Thanks <br><br></td></tr></table><br>
<a name="1302888"></a>

<a name="1302889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RustyKristi<br>What I'm doing atm. is just rendering everything to a very small image and stretching it out, that gives me some big nice pixels.<br>But you can still very much see the bilinear filtering on textures and sprites, especially up close.<br><br>New version fixes that though.<br><br>@munch<br>MaxGUI example uses an older version of my function.<br>Here's what it should be using:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Function UpdateCanvas(can:TGadget, cam:TCamera)
	SetGraphics(CanvasGraphics(can))
	If TGlobal.width[0] &lt;&gt; ClientWidth(can) Or TGlobal.height[0] &lt;&gt; ClientHeight(can)
		BeginMax2D()
		SetGraphics(CanvasGraphics(can))
		SetViewport(0, 0, ClientWidth(can), ClientHeight(can))
		EndMax2D()
		
		CameraViewport(cam, 0, 0, ClientWidth(can), ClientHeight(can))
		TGlobal.width[0] = ClientWidth(can) ' values used in texture rendering
		TGlobal.height[0] = ClientHeight(can)
	EndIf
EndFunction</textarea> <br><br></td></tr></table><br>
<a name="1302899"></a>

<a name="1302900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I was curious about the new depth/backbuffertotex updates as I have made some adjustment on some simple and current shaders, will that be affected as well? <br></div><br>The backbuffertotex update removed inverting the y in the cpp and removed reinverting in cameraviewport in the wrapper but it won't make any difference to existing code.<br><br>Shaders are also changed to use nearest/sharp instead of linear/smooth and I'll add an example to show this. <br><br></td></tr></table><br>
<a name="1302916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I added the fix to UpdateCanvas, although it seemed to work fine without the extra SetGraphics.<br><br>I discovered what's going on with ScaleTexture in a 2 pass shader. ScaleTexture won't invert unless you pass the uv coords which is done in the vert by multiplying by gl_TextureMatrix[n]:<br><pre class=code>texCoord0/gl_TexCoord[0] = gl_TextureMatrix[0] * gl_MultiTexCoord0;</pre><br>I added a 2 pass gaussian blur example which also lets you view the horizontal or vertical blur on Space key.<br><br>I fixed a bug created by my update brush.tex fix in EntityTexture and other commands, when brush didn't exist it was crashing on Null, it was happening on sprites.<br><br>Hezkore, I tested retro dungeon crawler with FreeEntity on ubuntu and it didn't crash after I broke all the blocks. Nice gfx btw. :) <br><br></td></tr></table><br>
<a name="1302921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The backbuffertotex update removed inverting the y in the cpp and removed reinverting in cameraviewport in the wrapper but it won't make any difference to existing code.<br><br>Shaders are also changed to use nearest/sharp instead of linear/smooth and I'll add an example to show this.  <br></div><br><br>Awesome, good to know munch! <br><br></td></tr></table><br>
<a name="1302927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @munch<br>The newer versions seems to be a bit more stable somehow?<br>I haven't had a single FreeEntity crash yet!<br><br>And thanks!<br>I'm working on a new fully 3D retro dungon crawler atm., just got clouds and norther lights done. :)<br><br><iframe width="560" height="345" src="http://www.youtube.com/embed/YdwoJYWhCHE" frameborder="0" allowfullscreen></iframe> <br><br></td></tr></table><br>
<a name="1302959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Holy moly, how on earth did you do that? Very professional!<br><br>Good to hear it's stable now, I didn't change FreeEntity the major bug fix was updating brush.textures with EntityTexture, etc. but that always gives a Null object error when I try to access them. <br><br></td></tr></table><br>
<a name="1302960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you munch!<br>Just using layered textures and alphas. (I can't write shaders heh)<br>It kinda works as the water example I showed you in that other forum post. :)<br><br>I'll report back if I get any crashes! <br><br></td></tr></table><br>
<a name="1302976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got loads of crashes again.<br>I've made an extreme test and after about 5 seconds or so this causes the FreeVBO crash.<br><br>(Source &amp; Compiled for Windows)<br><a href="https://dl.dropboxusercontent.com/u/2842751/freevbo_crash.zip" target="_blank">https://dl.dropboxusercontent.com/u/2842751/freevbo_crash.zip</a> <br><br></td></tr></table><br>
<a name="1302988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> By debugging it kinda stops at CreateMesh function in your LoadObj. I haven't had any luck with any other 3d format loader either but it somehow works with older X format. <br><br>I'm sure there are other obj loaders you can try. I wonder if the BlitzAssimp works with OpenB3D.. <br><br></td></tr></table><br>
<a name="1302989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Obj loader is fine, I've used it for a long time with a lot of other projects but always with an older build of OpenB3D.<br>The newer builds of OpenB3D sometimes crashes at TSurface.bmx &gt; FreeVBO() <br><br></td></tr></table><br>
<a name="1302990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah ok. thanks for the heads up <br><br></td></tr></table><br>
<a name="1302995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Hezkore, but I can't reproduce the crash. <br><br></td></tr></table><br>
<a name="1302996"></a>

<a name="1302997"></a>

<a name="1302998"></a>

<a name="1302999"></a>

<a name="1303000"></a>

<a name="1303001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've updated it.<br>Same link: <a href="https://dl.dropboxusercontent.com/u/2842751/freevbo_crash.zip" target="_blank">https://dl.dropboxusercontent.com/u/2842751/freevbo_crash.zip</a><br>This instantly crashes on my machine, complaining about FreeVBO.<br>Make sure you actually unpack the zip before you run it, so that the ship mesh gets loaded.<br>And try to compile it in debug mode, it crashes more often with that.<br><br>Here's where it points me in debug mode <a href="https://github.com/markcwm/openb3d.mod/blob/master/openb3d.mod/inc/TSurface.bmx#L365" target="_blank">https://github.com/markcwm/openb3d.mod/blob/master/openb3d.mod/inc/TSurface.bmx#L365</a><br>I've tried changing the code to make sure that GetInstance(Self) isn't null before FreeVBO gets called, but that doesn't seem to be the issue.<br>Here's a debug log if that helps - <a href="https://www.irccloud.com/pastebin/c4D27EzM/" target="_blank">https://www.irccloud.com/pastebin/c4D27EzM/</a> <br><br></td></tr></table><br>
<a name="1303002"></a>

<a name="1303005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually that update worked for me Hezkore, using debug and release. I'm seeing now the ship spinning without any crash so far.<br><br>I also used your crash.debug.exe if that makes any difference. <br><br></td></tr></table><br>
<a name="1303008"></a>

<a name="1303009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I'm not sure if it's somehow FPS related or something?<br>My slower computers all run this fine, but the faster ones all crash after a while.<br>If I create a bunch of meshes, lowering my FPS, I don't get crashes as often. <br><br></td></tr></table><br>
<a name="1303010"></a>

<a name="1303013"></a>

<a name="1303016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure, maybe it's graphic card related with OpenGL. OpenB3D is using OpenGL 1.2 right? <br><br>btw, I'm using a fast pc (i7) with gtx card and it's been running now for around 10mins and going :-)<br><br>PS: I have not upgraded yet to munch's latest openb3d updates since the depthbuffer stuff, but I am running your exe build for comparison. <br><br></td></tr></table><br>
<a name="1303011"></a>

<a name="1303012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe it's an ATi thing?<br>Or Window 10? <br><br></td></tr></table><br>
<a name="1303014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> That could possible with the ATi issue, it's a common thing if we're talking about graphic stuff. Windows 10 or platform wise, I'm not sure and it's unlikely. I have not used windows 10 yet and still on win7. <br><br></td></tr></table><br>
<a name="1303015"></a>

<a name="1303017"></a>

<a name="1303018"></a>

<a name="1303020"></a>

<a name="1303028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> The issue still exists on nVidia though.<br>I've got this project I'm working on and almost everyone get the FreeVBO crash.<br><br>I guess I could share the executables here (Windows only)<br>If you try to walk outside of the cave and back in a few times (so that the crashed ship gets loaded and unloaded) the game will sometimes crash.<br>(Walk with Arrow keys or WASD, strafe with Q and E. No mouse needed)<br><br>*link removed, problem fixed*<br>Project is still very much in concept demo stage, so art is place holder stuff. <br><br></td></tr></table><br>
<a name="1303019"></a>

<a name="1303021"></a>

<a name="1303022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks great! and yea, no crashes yet so far. I've been in and out of the cave around 10 times already lol. I also minimized it so I can fast reply here hehe<br><br>It could be a driver issue but I'm not sure, what's your full spec? <br><br>At least it's not a definite crash issue as it could be just some hard/software incompatibility problem as far as this benchmark thing is going. ;-) <br><br></td></tr></table><br>
<a name="1303023"></a>

<a name="1303024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Btw Hezkore, do you have the full objloader with texture, normals and everything? or is the demo sample already complete?<br><br>I need some kind of 3d format alternative besides b3d just for test reasons, thanks. <br><br></td></tr></table><br>
<a name="1303025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I think the problem is in TSurface.bmx Delete method I call FreeVBO when I shouldn't as that's handled by the library. So uncomment that and rebuild. <br><br></td></tr></table><br>
<a name="1303026"></a>

<a name="1303027"></a>

<a name="1303029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is the full Obj loader, I've commented out the last part where it loads textures though.<br>See the "rem" at the end.<br><br>As for my specs.<br>Currently using AMD Radeon R9 390 8GB with the Crimson Edition 16.4.1 drivers.<br>Not that my CPU probably matters, but AMD FX 9590 (4.7GHz 8 Cores)<br><br>@munch<br>That... seems to fix it! :o<br>Weird though seeing as deleting the same buffer address multiple times is valid in OpenGL. <br><br></td></tr></table><br>
<a name="1303030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice great to hear! and awesome fix munch!<br><br>Btw, does it work also with loading multiple textures? <br><br></td></tr></table><br>
<a name="1303066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> According to <a href="http://forum.jogamp.org/Should-I-call-glDeleteBuffers-to-destroy-VBOs-td3771162.html" target="_blank">this</a> the crash happens when you don't remove the reference to the buffer after you delete it, which I think is what I was doing.<br><br>I've updated the repo with this fix now. <br><br></td></tr></table><br>
<a name="1303069"></a>

<a name="1303070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey munch, I have a quick question. I'm trying to implement my own simple particle system together with the postfx, but when I hooked the camera to my functions and initialize before the main loop, I can only see sort of the depthbuffer being rendered but my system works ok. <br><br>My functions uses CameraProject and takes the camera entity as parameter when initialized. Do you have any ideas on how I can resolve this?<br><br>Thanks. <br><br></td></tr></table><br>
<a name="1303077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe an extra camera for postfx stuff so you know what to expect in the main camera. <br><br></td></tr></table><br>
<a name="1303078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, can you give me an example on how to go about this? I only know multi-cameras when using viewports like rear view or minimap. <br><br></td></tr></table><br>
<a name="1303089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> RustyKristi, I updated the post process examples. I'm not sure this will help you but it did boost fps a little (from 9 to 13 on 2 pass). <br><br>I was also calling RenderWorld too many times, Camera/DepthBufferToTex have their own Render in them, so if you're doing a 2 pass you should only need 3 render functions. <br><br>Also for the 2 pass, it wasn't working until I put ShowCamera before the 2nd CameraToTex so the 2nd pass uses the main camera. It may be possible to do it with the 2nd camera but I don't know.<br><br>Also I notice often, randomly there's mesh vertex data corrupted in those examples, not sure what's causing it. <br><br></td></tr></table><br>
<a name="1303104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks munch, I just upgraded my copy of openb3d with your latest commit. I thought I would test all the demos again first before anything else, particularly the new examples so I can give you some quick feedback. That was really an awesome update with the 3D sound and the demos wow! :D Depthbuffer adjustment looks great. I definitely have not made any single changes on my code including some simple custom shaders. <br><br>* Pixellight2 example has some Z-Order fighting isses, but alpha textures works great. Btw, since you already put a demo out there in GitHub with the tree exampl and stuff, please do go ahead and include the tree model and textures. It's a royalty free asset that I got somewhere and I made sure it has no problems with it in terms of licensing.<br><br>* With my previous openb3d version, I have also noticed that the stencil shadows is somehow always on top and fully dark when I render my camera projected particle system. My particle obviously uses some alpha textures so I don't know if this has some effect on it. I'm only using the default openb3d commands and not sure how it is causing that weird layer ordering issue.<br><br>Lastly, I thought the latest technique with 2pass and blurpass is really awesome. Thanks for the tip and I still have to do some thorough testing my custom particle system with your update and example later on so I got my fingers crossed.. ;-) <br><br></td></tr></table><br>
<a name="1303235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey munch, so after some rigorous testing the issue is now fixed either with the main camera or postfx_camera when using shaders and my projected particle system.<br><br>The only problem that I'm seeing now is the stencil shadow seems to be way darker.<br><br><a href="http://postimg.org/image/hyhgyfu0d" target="_blank"><img src="http://s22.postimg.org/hyhgyfu0d/sl_2pass_A_2016_04_16_10_27_52_341.jpg"></a><br><br>If I remove my particle system stuff, it looks ok and back to normal.<br><br><a href="http://postimg.org/image/y3cew26rv/" target="_blank"><img src="http://s9.postimg.org/y3cew26rv/sl_2pass_A_2016_04_16_11_06_55_905.jpg"></a><br><br>Thanks again. <br><br></td></tr></table><br>
<a name="1303330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try using SetShadowColor(r,g,b,a) as int 0..255. <br><br></td></tr></table><br>
<a name="1303335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried it but same thing if I activate my custom particle, it does that. I even copied the array format with one of your examples to set the color just be sure I'm doing it right. <br><br></td></tr></table><br>
<a name="1303348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well it looks like the particle code is affecting the alpha of shadows. I have no ideas what to do. <br><br></td></tr></table><br>
<a name="1303350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks munch, I could post the init code that seems to be creating the issue if you would like to check them out. It's kinda weird because I'm just using standard OpenB3D commands inside a Type Method for the particle stuff. Do you think it has a similar problem with the depth buffer before? <br><br></td></tr></table><br>
<a name="1303368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I can have a look. Send me a mail with your code if you prefer.<br><br>I've split up openb3d.mod into openb3dex.mod just so that blitz3d functions have their own docs page to extended functions.<br><br>I also added the per pixel fog shader so see <a href="/posts.php?topic=106123" target="_blank">here</a> for more.<br><br>I included the pixellight2 example media as well, so thanks RustyKristi. <br><br></td></tr></table><br>
<a name="1303395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, thanks I'll send them after I sorted some stuff out because I'm just starting to piece this and it's kind of a mess. <br><br>Awesome new examples, that solved it and with the addition of openb3dex! :D <br><br></td></tr></table><br>
<a name="1303442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Pixellight2 example has some Z-Order fighting isses, but alpha textures works great.  <br></div><br>I did get that as I was working on the example (some branches disappearing/reappearing at random) but I fixed it by removing color.a (light color) from the gl_FragColor result. <br><br></td></tr></table><br>
<a name="1303525"></a>

<a name="1303526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, thanks! But I'm not that familiar to do those changes, can you update the example shader? :) <br><br></td></tr></table><br>
<a name="1303527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, I think I found the part of my code that is messing up the stencil shadows, I also got a partial fix after some hours playing around with it. This example is how I initialize my particle stuff and I really have no idea how this affects the stencil shadow. So for the actual test, try adding these lines anywhere in stencil_shadows2.bmx or any simple scene with shadows.<br><br><pre class=code>
Local mesh1:TMesh , mesh2:TMesh
Local surface1:TSurface , surface2:TSurface
mesh1    = CreateMesh()
surface1 = CreateSurface( mesh1 )
mesh2    = CreateMesh()
surface2 = CreateSurface( mesh2 )
EntityBlend( mesh1, 1 )
EntityBlend( mesh2, 3 )
EntityFX   ( mesh1, 1+8+16+32 )
EntityFX   ( mesh2, 1+8+16+32 )
</pre><br><br>Setting the EntityFX flags on the last line triggers the darkening issue. For me, I tested it with flags 2 and 8 (use vertex colors and disable fog). How I got it fixed is by adding another mesh with surface and just setting EntityBlend with flag total 3.<br><br>I don't know how that really works with the stencil shadows, but I'm glad I don't have to worry about this for now and thanks again for all the help. :) <br><br></td></tr></table><br>
<a name="1303614"></a>

<a name="1303615"></a>

<a name="1303616"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks RustyKristi, I would suspect EntityBlend mode 3 (add) is the problem, when it's the last entity rendered it could affect shadow alpha values. <br><br></td></tr></table><br>
<a name="1303631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, thanks munch. So, I would assume this is a normal thing, right? <br><br></td></tr></table><br>
<a name="1303951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Btw munch, can you update the PixelLight example in the repo with the corrected alpha/z order fighting issue? thanks <br><br></td></tr></table><br>
<a name="1304070"></a>

<a name="1304071"></a>

<a name="1304072"></a>

<a name="1304073"></a>

<a name="1304074"></a>

<a name="1304075"></a>

<a name="1304082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wasn't able to reproduce this darkened shadows issue but I've only tested on Linux yet. Edit: tested in Win and couldn't reproduce it either.<br><br>I've just found a bug too, this only happens in Win in the stensilshadows2 example, when I do the multipass render it crashes randomly but consistently at renderworld, the problem stops when I comment the createshadow out so I suspect it is in the shadow update code. I was thinking it is where cameraclsmode is used but the previous values are not restored. <br><br></td></tr></table><br>
<a name="1304105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok got it. I will just send the exact code and a screen later today. thanks <br><br></td></tr></table><br>
<a name="1304140"></a>

<a name="1304141"></a>

<a name="1304142"></a>

<a name="1304143"></a>

<a name="1304144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here you go munch, I placed it right before the main loop. I also added my temp fix and uncomment it for your own testing.<br><br><a href="http://pastebin.com/wySTa7Km" target="_blank">http://pastebin.com/wySTa7Km</a><br><br>screen with altered stencil shadows<br><br><img src="http://i.imgur.com/wHgHPNtm.jpg"> <br><br></td></tr></table><br>
<a name="1304514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am a former Blitz3D User and i stumbled across Blitzmax and Openb3D. I'd love to start coding again, but i cannot get Openb3D to install correctly in Blitzmax. Is there any link to a guide/how to? I tried OpenB3D 1.12 with latest BlitzMax IDE... any help appreciated! <br><br></td></tr></table><br>
<a name="1304523"></a>

<a name="1304524"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi t3K, what version of GCC do you have? You might have better luck using OS Bmx, see <a href="/posts.php?topic=105834" target="_blank">here</a> for guide, it's aimed at Windows but all you have to do on Mac is run install.bat.<br><br>Currently I don't have a Mac which will run Openb3d and haven't for several months so I've no idea if it works there Atm. It needs a minimum of GL 2.0 (so it won't run on older Macbooks that have GL 1.4) and if you have GL 3.0 the shaders won't work. I am planning on getting a GL 3.0 Mac some time soon but I've no idea how that will go. It is at least working fine on my Win7 and Ubuntu systems. <br><br></td></tr></table><br>
<a name="1304640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> GCC? None.. i just downloaded Blitzmax and the OpenB3D Files... i have a late 2012 macmini, but i would like to code on both systems (windows 7 &amp; macos). i found the thread, but what is minGW? All i want is to use blitz3d'ish commands in bmax.<br><br>i will re-read the thread to understand what to install. maybe it helps ;) <br><br></td></tr></table><br>
<a name="1304656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> MinGW is GCC in Windows (Minimal GNU for Windows) and GCC is the compiler (GNU Compiler Collection) which you need to build module (archive .a) files. The guide I wrote <a href="/posts.php?topic=105834" target="_blank">here</a> should be enough to get TDM MinGW installed in Win7.<br><br>Openb3d requires that you build it as a module using GCC ("./bmk makemods -a openb3d" from bin folder) and doesn't supply any pre-built archives as that would be too much trouble (Minib3d also needs to be built with GCC). You get conflicts when you try to build modules with different compiler versions. This is okay for DLLs but not archives, as they are static (built into the exe) so need to be the same version.<br><br>For Mac you get GCC bundled with the XCode tools from Apple's developer site <a href="https://developer.apple.com/downloads/" target="_blank">here</a>. From a search it seems Mountain Lion needs xcode 5.11 and Yosemite needs xcode 6.4, those are the highest versions compatible. For Snow Leopard I've used xcode 3.22 which was the highest free version until 7.<br><br>I recommend using <a href="https://www.macports.org/index.php" target="_blank">MacPorts</a> a commandline package manager for free open source software (mainly Unix) which has things like Git. Here is their xcode advice (it seems GCC is a separate download above xcode 4).<br><br><div class="quote"> Apple's Xcode Developer Tools (version 7.0 or later for El Capitan, 6.1 or later for Yosemite, 5.0.1 or later for Mavericks, 4.4 or later for Mountain Lion, 4.1 or later for Lion, 3.2 or later for Snow Leopard, or 3.1 or later for Leopard), found at the Apple Developer site, on your Mac OS X installation CDs/DVD, or in the Mac App Store. Using the latest available version that will run on your OS is highly recommended.<br><br>Apple's Command Line Developer Tools are found at the Apple Developer site, or they can be installed from within Xcode 4. Users of Xcode 3 or earlier can install this by ensuring that the appropriate option(s) are selected at the time of Xcode's install ("UNIX Development", "System Tools", "Command Line Tools", or "Command Line Support"). <br></div> <br><br></td></tr></table><br>
<a name="1304667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Setting the EntityFX flags on the last line triggers the darkening issue. For me, I tested it with flags 2 and 8 (use vertex colors and disable fog). How I got it fixed is by adding another mesh with surface and just setting EntityBlend with flag total 3. <br></div><br>Thanks for the sample RustyKristi (http://pastebin.com/wySTa7Km). I can see the problem now but couldn't work out a fix, so the workaround is as you posted making the last mesh rendered to have alpha enabled either by using EntityBlend 2 or 3, EntityFX 32 or EntityAlpha &lt;1.0. <br><br></td></tr></table><br>
<a name="1304673"></a>

<a name="1304674"></a>

<a name="1304675"></a>

<a name="1304676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a small update, mainly to add LoadTextureAlpha which allows you to choose a rgb channel to use as alpha, this is a workaround for the lack of texture blending with alpha in Openb3d/Minib3d. It works like LoadTexture but has an alphamask parameter which should be $FF for red, $FF00 for green, etc. It's also used by LoadTexture to replace the STB image loader for jpeg so the progressive format can be loaded. See the alphamap example. To load alpha from another image you would have to write a custom function.<br><br>There is also an example of how to use EmitterParticleFunction to set up a "callback function" for particles. This is called particle_smoke and shows how to change alpha, scaling and add randomness. It can be used as a base for more complex things. It's not a single surface though and I don't think the callback supports that.<br><br>I added a fix for Text when texture blending is on and the text background fills in.<br><br>And I moved all examples to sub-folders just to tidy things up a bit more, so most things are now in examples/openb3d. <br><br></td></tr></table><br>
<a name="1304722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> So munch, i managed to get gcc working and i compiled all the mods - but now i got a "module does not match commandline module" error when trying to compile some examples ??? <br><br></td></tr></table><br>
<a name="1304723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've found a problem with Terrains and EntityOrder.<br>I'm trying to place a box behind a terrain, but the EntityOrder function doesn't seem to work combined with a Terrain mesh.<br><br>Here's an <a href="https://dl.dropboxusercontent.com/u/2842751/terrain_zorder.zip" target="_blank">example.</a> <br><br></td></tr></table><br>
<a name="1304726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> module does not match commandline module <br></div><br>I think this means you haven't compiled the module, check the openb3d.mod/openb3d.mod folder has .a and .i files. Try compiling Minib3d and running its examples with "import sidesign.minib3d". <br><br></td></tr></table><br>
<a name="1304730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> EntityOrder does not affect terrains, only meshes and sprites. Terrains and planets are rendered immediately, since they are usually the background, then meshes are added. The same issue affected warner's engine, too. The issue should occur only in case of transparent terrains, by the way. <br><br></td></tr></table><br>
<a name="1304731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hezkore, yeah you're right currently EntityOrder only works on meshes. I'm not sure why you want to do this as not setting any entity order draws it where it should be, unless you want to draw it as a background object. You can render background objects before foreground ones by disabling the camera color buffer.<br><pre class=code>	HideEntity terrain
	ShowEntity cube
	CameraClsMode camera,0,1 ' don't clear color buffer so we can draw over rest of scene
	RenderWorld
	
	HideEntity cube
	ShowEntity terrain
	RenderWorld
	
	Flip(1)</pre> <br><br></td></tr></table><br>
<a name="1304740"></a>

<a name="1304741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been trying to fix the crash with stencil shadows and multipass renders but was only able to narrow it down to this: if you call HideEntity on the shadow caster then it crashes at RenderWorld but this is random and happens about 1/10 times and seems only to happen in Windows. I tried hacking around in ShadowObject::RenderVolume or ShadowObject::Update but nothing really to report.<br><br>Edit: one thing it might be is an issue with GL 2.0 (or drivers) which would explain why it works in 2.1 in which case there's no fix. <br><br></td></tr></table><br>
<a name="1304768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well normally when you do something like a sky box or sky dome you want to have it rendered behind the terrain.<br>And it's a bit of a pain to hide every single object in the world (especially if you've got a big world) just to draw the sky, then show every object again and render again.<br>I'm not actually using a terrain, I just found the issue randomly.<br>And the issue is still there without transparent terrains. <br><br></td></tr></table><br>
<a name="1304788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks munch. The workaround that I discovered kind of worked somehow, so that should be fine for now. Maybe this can be solved later on and now with the <a href="/posts.php?topic=106178" target="_blank">new 2.0</a> changes coming. :-) <br><br></td></tr></table><br>
<a name="1304789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Hezkore<br><br>First of all, if the terrain is not alpha blended entity order should not be an issue, since depth testing will prevail over entity order. Entity order is useful only when an entity is transparent, because it does not set the depth buffer.<br>So, unless you use a transparent terrain (to create a sea, maybe? Well, an isosurface would be more suitable for that), no problem should occur. With a terrain that is not transparent, maybe you forgot to create a depth buffer when setting opengl?<br><br>Anyway, to perform two passes rendering, there is another solution, if you don't want to hide/unhide all objects at each frame: just use two cameras, one in the world, the other inside the sky map; you will only need to hide the first camera and unhide the second, to render all the objects <br><br></td></tr></table><br>
<a name="1304919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Angros, I just discovered an issue with alpha, alpha only works when there is a non-alpha mesh being rendered with it. <br><br>In the example the cubes have alpha set but the sphere is solid, the cube in the middle only renders as alpha when the sphere is visible. It works fine in Minib3d.<br><pre class=code>' alpha.bmx

Strict

Framework Openb3d.B3dglgraphics

Graphics3D 800,600,0,2
ClearTextureFilters

Local camera:TCamera=CreateCamera()
CameraClsColor camera,80,160,240

Local light:TLight=CreateLight()

Local tex:TTexture=LoadTexture("../media/Smoke.png",1)
'Local tex:TTexture=LoadTextureAlpha("../media/Smoke.png",1,$FF00)
Local sprite:TMesh=CreateCube()
'Local sprite:TSprite=CreateSprite()
PositionEntity sprite,0.1,0.1,0.1
EntityAlpha sprite,0.5
'EntityFX sprite,1+32
EntityTexture sprite,tex
'EntityBlend sprite,3

Local cube:TMesh=CreateCube()
PositionEntity cube,1,1,10
EntityAlpha cube,0.5
'EntityFX cube,1+32
EntityTexture cube,tex

Local sphere:TMesh=CreateSphere()
PositionEntity sphere,1,1,-10
'EntityFX sphere,32

Local frame%

' fps code
Local old_ms%=MilliSecs()
Local renders%, fps%

While Not KeyHit(KEY_ESCAPE)

	frame :+ 10
	PositionEntity camera, Cos(frame * 0.1) * 8, 3, Sin(frame * 0.1) * 8
	PointEntity camera, sprite
	
	'UpdateWorld
	RenderWorld
	
	' calculate fps
	renders=renders+1
	If MilliSecs()-old_ms&gt;=1000
		old_ms=MilliSecs()
		fps=renders
		renders=0
	EndIf
	
	Text 0,0,"FPS: "+fps
	
	Flip
		
Wend
End
</pre> <br><br></td></tr></table><br>
<a name="1305131"></a>

<a name="1305132"></a>

<a name="1305133"></a>

<a name="1305134"></a>

<a name="1305135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just another small update. This fixes a FreeShadow memory leak which I traced back to ShadowVolume TSurface so I removed that for now. ShaderTexture now returns the texture the shader has been passed, it required a few changes to the library not sure how it works with multiple textures yet, see sl_texturefilter.bmx. FreeStencil is added from Spinduluz's version, see stencil.bmx. Fix for TSprite InitFields wasn't calling it's super method. Also, stencil_shadows2 has a workaround for a 2 pass render with shadows in GL 2.0 as it MAVs when a shadow caster is hidden. <br><br></td></tr></table><br>
<a name="1305197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Angros, trying to write a FreeShader function but am confused about how to access DeleteVertShader, am I doing this wrong (in material.cpp). Thanks.<br><pre class=code>void Shader::FreeShader(){
	if(!arb_program) return;
	arb_program.DeActivate(); // Ensure the shader is not used
	
	list&lt;ShaderObject*&gt;::iterator it;
	for(it=arb_program.vList.begin();it!=arb_program.vList.end();it++){
		ShaderObject* obj=*it;
		obj-&gt;DeleteVertShader(obj);
	}
	for(it=arb_program.fList.begin();it!=arb_program.fList.end();it++){
		ShaderObject* obj=*it;
		obj-&gt;DeleteFragShader(obj);
	}
	
	glDeleteProgram(arb_program);
	arb_program=0;
	delete this;
}</pre> <br><br></td></tr></table><br>
<a name="1305390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> You used "." instead of "-&gt;" in some places<br><br><pre class=code>void Shader::FreeShader(){
	if(!arb_program) return;
	arb_program-&gt;DeActivate(); // Ensure the shader is not used
	
	list&lt;ShaderObject*&gt;::iterator it;
	for(it=arb_program-&gt;vList.begin();it!=arb_program-&gt;vList.end();it++){
		ShaderObject* obj=*it;
		obj-&gt;DeleteVertShader(obj);
	}
	for(it=arb_program-&gt;fList.begin();it!=arb_program-&gt;fList.end();it++){
		ShaderObject* obj=*it;
		obj-&gt;DeleteFragShader(obj);
	}
	
	glDeleteProgram(arb_program-&gt;Program);
	//arb_program=0;
	delete this;
}</pre> <br><br></td></tr></table><br>
<a name="1305405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, thanks Angros.<br><br>I got the code from Spinduluz's fork in programobject.cpp so as you see the first line should be "if (!arb_program-&gt;Program) return".<br><pre class=code>ProgramObject::~ProgramObject(){
	if(!program) return;
	glUseProgram(0); // Ensure the shader is not used
	for(ShaderObject *shader : shaderobjects){
		shader-&gt;attached.remove(this);
		shader-&gt;DestroyRef();
	}
	shaderobjects.clear();
	glDeleteProgram(program);
#if defined(BLITZMAX_DEBUG)
	DebugLog("Deleted ProgramObject %s",name.c_str());
#endif
	program=0;
}</pre> <br><br></td></tr></table><br>
<a name="1305430"></a>

<a name="1305431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey munch, I'm getting this on the latest build when I tried to compile the example with sounds:<br><br><img src="http://i.imgur.com/1Ft0mjB.png"> <br><br></td></tr></table><br>
<a name="1305434"></a>

<a name="1305435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks RustyKristi, I was importing Openb3d instead of Openb3dex in B3dsound.<br><br>I've added FreeShader now but I have to report there was a crash until I removed "vList.remove(vShader);" in DetachVertShader and the same in the frag function. The suggestion was remove/clear list only crash if there is a corruption somewhere. And DetachFragShader had a typo as "for(it=fList.begin();it!=vList.end();it++)".<br><br>I also turned openb3d.openb3d into a dummy just for the Blitz3d docs since it's not being used. <br><br></td></tr></table><br>
<a name="1305453"></a>

<a name="1305454"></a>

<a name="1305455"></a>

<a name="1305498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm glad to report this and it works great now! thanks :D I'm still doing some test just in case.<br><br>I still have some freeshadows issue, I'm not sure if I'm doing it right.<br><br>Most of the time, the shadows are left in the ground/terrain or sticking to other ai mobs. <br><br></td></tr></table><br>
<a name="1305822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey munch, one more thing. Since I got back on tinkering with NG again. I tried OpenB3D with NG and it works great except for the 3DSound module which keeps throwing an undefined "HearingPoint" type.<br><br>thanks <br><br></td></tr></table><br>
<a name="1309279"></a>

<a name="1309280"></a>

<a name="1309282"></a>

<a name="1309285"></a>

<a name="1309286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> I finally had a look at my Shader Camera module and made it compatible with the newer OpenB3D versions.<br>It comes with a greyscale, blur and shimmer example.<br>You can invert the height/y of the screen easily and also set a "virtual resolution" for the screen.<br>Setting screen size to 25% combined with ClearTextureFilters() makes everything look "retro".<br>I find it a lot easier to use than the screen sprite examples.<br><br><a href="https://bitbucket.org/Hezkore/shader-camera" target="_blank">https://bitbucket.org/Hezkore/shader-camera</a> <br><br></td></tr></table><br>
<a name="1310583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cocopino</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br><br>I'm in the process of creating procedural worlds/levels using OpenB3d, and would like to export those to b3d files.<br>My code crashes using OpenB3d, but does not when using Minib3d. The crash involves "GetSurfaceBrush".<br><br>Example:<br>(TExportMesh.bmx can be found here: <a href="http://www.blitzmax.com/codearcs/codearcs.php?code=3278)" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=3278)</a><br><br><pre class=code>
SuperStrict

'Import sidesign.minib3d
Import openb3d.b3dglgraphics

Include "TExportMesh.bmx"

Graphics3D 1024, 768

Local mesh:TMesh = CreateMesh()
Local brush:TBrush

For Local i:Int = 0 To 9

	Local cube:TMesh = CreateCube()

	brush = LoadBrush("texture_" + (i Mod 3) + ".jpg")
	PaintMesh(cube, brush)
	PositionMesh(cube, i * 3, 0, 0)
	AddMesh (cube, mesh)
	HideEntity(cube)
	FreeEntity(cube)

Next

Local camera:TCamera = CreateCamera()
camera.PositionEntity(0, 0, -15)
camera.PointEntity(mesh)

Local export:TExportMesh = New TExportMesh
export.mesh = mesh
export.SaveMesh("tester.b3d")
</pre> <br><br></td></tr></table><br>
<a name="1316301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>I'm looking for ways to speed up rendering allot of cube meshes.<br><br>The cubes are already optimized, only visible quads are build and rendered using single surface techniques.<br><br>What should i look into for speeding up the rendering?<br>Can i use display lists, shaders or anything else to speed up rendering? <br><br></td></tr></table><br>
<a name="1316306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should look up if OpenB3D supports hardware instancing. I have not confirmed this yet only with bOGL but it uses similar OpenGL 2 so you have something to look into there. <br><br></td></tr></table><br>
<a name="1316327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the cubes are static, you can combine them into a single mesh using MeshCGS.<br><br>A similar trick is used in games like MineCraft <br><br></td></tr></table><br>
<a name="1317105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Compiling:openb3dsdl.bmx
Compile Error: Can't find interface for module 'pub.opengles'
[D:/BlitzMax/mod/openb3d.mod/openb3dsdl.mod/openb3dsdl.bmx;38;1]
Build Error: failed to compile D:/BlitzMax/mod/openb3d.mod/openb3dsdl.mod/openb3dsdl.bmx</pre><br><br>After updating i got this error. <br><br></td></tr></table><br>
<a name="1317107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rollback to your previous one, anything related to opengles is broken atm. <br><br></td></tr></table><br>
<a name="1317113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thx. <br><br></td></tr></table><br>
<a name="1317871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need spheres with LOD for planets, i don't know how to write this myself.<br>A geosphere has LOD but there is a texture problem, is there a way to fix this? <br><br></td></tr></table><br>
<a name="1317934"></a>

<a name="1317935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Instead of Sphere -&gt; LOD Sphere for your planets, why not Sphere -&gt; Impostor sprite?<br><a href="http://blog.wolfire.com/2010/10/Imposters" target="_blank">http://blog.wolfire.com/2010/10/Imposters</a><br><br>There's a range of distance between the camera and the object where you softly transition between the 3D mesh and the prerendered sprite (using transparency), until only one of either is shown (mesh if you're close, sprite if you're far).<br><br>A prerendered sprite should look better than a low level-of-detail mesh.<br>Also, I think user Krischan has done some star system demos with MiniB3D: <a href="http://www.blitzbasic.com/Community/posts.php?topic=97336#1132526" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=97336#1132526</a> <br><br></td></tr></table><br>
<a name="1318287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RustyKristi<br>I don't know much about hardware instancing, need to do some research, but thx for the tip.<br><br>@angros47<br>They are not static so MeshCGS is to slow, what i was doing is faster.<br>I droped the idea of a complete voxel world, destroyable voxel objects will do.<br><br>@Kryzon<br>I always use a sprite as the lowest LOD, but going straight from mesh to sprite is new to me, a good idea.<br>I know who Krischan is, i'm a fan since Blitz Tiles :) <br><br></td></tr></table><br>
<a name="1318314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can either use an isosurface, or an octree, then.<br><br>An octree can combine many cube mesh, and also allows LOD. <br><br></td></tr></table><br>
<a name="1322090"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a quick update: at the moment, I am working on an Emscripten port of Open3D. Some simple demos already work. <br><br></td></tr></table><br>
<a name="1332877"></a>

<a name="1332938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >icebeararmy</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>Is there a problem with CameraPick and shaded entities? I can't pick them when I do a "ShadeEntity" on them. Without the shader, it works fine.<br><br>EDIT: Same goes for collisions. <br><br></td></tr></table><br>
<a name="1333024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> That could be the camera sprite which handles the postfx shaders that is blocking your input. It was discussed how it works on munch's recent post here if you do some search.<br><br>Maybe you can do some toggling or pick intervals between shader sprite hide and show. There are examples in recent working versions where it shows 2 postfx executed in a queue. You can then get some idea on how you can work that with your picking routine. <br><br></td></tr></table><br>
<a name="1333120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >icebeararmy</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the problem still exists even without the postfx sprite.<br><br>I can pick entities and Collisions work fine with every entity, that's not shaded, with or without camera sprite. <br><br></td></tr></table><br>
<a name="1333137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can pick entities and Collisions work fine with every entity, that's not shaded, with or without camera sprite.  <br></div><br><br>Sorry but I have never used ShadeEntity because OpenB3D's normal mapping is kinda weak. It does not support directional light properly (It does, but does not look right)<br><br>With that, I don't really know or confirm if this is really an issue. I stopped with OpenB3D because I'm done with my personal projects. <br><br></td></tr></table><br>
<a name="1333143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >icebeararmy</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Sorry but I have never used ShadeEntity because OpenB3D's normal mapping is kinda weak. <br></div><br>I am not using OpenB3D's normal mapping. You can use ShadeEntity with your own OpenGL-Shaders. ;) <br><br></td></tr></table><br>
<a name="1333147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes I know that, but never dug deep with shaders and openb3d. I know openb3d shaders is very much like common OpenGL shaders, with just some small adjustments.<br><br>Anyway moving to your topic, if you can't use shadeentity and camera picking then just dig into the source and check what seems to be the problem or if this is directly related to the source so you could also get some help from angros47, as this is his original project, the wrapper is a separate thing with diff author (munch). <br><br></td></tr></table><br>
<a name="1333910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> Both collisions, and picking, are managed by a part of the library that is independent from the shader management. <br><br>Likely, the vertex shader has some error that makes the mesh be drawn in a different place than where it is supposed to be. Since shaders don't affect the internal way of storing geometry for collision detecting, OpenB3D would not be able to detect the displaced mesh <br><br></td></tr></table><br>
<a name="1333922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >icebeararmy</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, vertex-shader seems to be okay:<br><pre class=code>void main() {
	V = vec3(gl_ModelViewMatrix * gl_Vertex);
	VInverse = gl_ModelViewMatrixInverse * gl_Vertex;
	N = normalize(gl_NormalMatrix * gl_Normal);
	
	vLightdir = normalize(gl_LightSource[0].position.xyz);
	
	vLightpos = (gl_ModelViewMatrix * vec4(gl_LightSource[0].position.xyz,1.0)).xyz;
	
	vHalfvector = gl_LightSource[0].halfVector.xyz;
	
	vView = -gl_ModelViewMatrix[3].xyz;
	
	gl_TexCoord[0] = gl_MultiTexCoord0;
	
	refView = gl_ModelViewProjectionMatrix * gl_Vertex - vView;
	vReflection = reflect(refView, gl_Normal);
	
	gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
}
</pre> <br><br></td></tr></table><br>
<a name="1333952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angros47</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just tried camera picking on a mesh using a custom shader, in FreeBasic, and it works fine. So, I can't reproduce your issue <br><br></td></tr></table><br>
<a name="1333999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >icebeararmy</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm weird. Then the issue has to be in my code. Thanks anyway :) <br><br></td></tr></table><br>
<a name="1335571"></a>

<a name="1336049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >icebeararmy</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another problem, but this time without shaders. :)<br><br>The DepthBuffer seems to be glitched for me, since it's only plain white, when rendered to a texture. In my code I am placing some cubes in random distances (up to 200 units away from the camera):<br><pre class=code>For i =0 To 14
	cube[i]=CreateCube
	PositionEntity cube[i],Rnd(-50,50),Rnd(-20,20),Rnd(5,200)
Next

depth_tex=CreateTexture(800,600,1+256)
ScaleTexture depth_tex,1.0,-1.0
DepthBufferToTex depth_tex,Camera
	
fx_sprite=CreateSprite()
ScaleSprite fx_sprite,1.0,0.75
EntityOrder fx_sprite,0
EntityParent fx_sprite,camera
MoveEntity fx_sprite,0,0,1.0 
EntityTexture fx_sprite,depth_tex


### LOOP ###


        updateworld
        HideEntity Camera
        ShowEntity fx_cam

        DepthBufferToTex depth_tex,fx_cam
        EntityTexture fx_sprite,depth_tex

        HideEntity fx_cam
        ShowEntity Camera
        renderworld</pre><br>But the cubes don't show up in the depthbuffer-texture.<br><br>For the moment, I am using a grayscale texture from CameraToTex, but I would prefer the actual depthbuffer. <br><br></td></tr></table><br>
<a name="1340670"></a>

<a name="1340671"></a>

<a name="1340674"></a>

<a name="1340675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted May)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been experimenting with OpenB3D again and was successful to combine it with my map BSP loader. It works so far with simple shader support but there are still a few problems / questions left:<br><br>- EntityFX doesn't seem to have an effect beside that shaders don't work the right way?<br>- Vertex Colors don't work?<br>- I don't know how to add the included lightmap as a basic level lighting here?<br>- my Alpha door textures are not transparent anymore? FX32 doesn't help?<br><br>Perhaps you could take a look at my demo and give some hints how to fix this? :-) WASD=Move, RMB=Torchlight on/off and the shaders are applied to the surfaces in the inc/q3bsp.bmx file.<br><br><a href="http://www.christianhart.de/bmax/openb3d/Bumptest2.zip" target="_blank">http://www.christianhart.de/bmax/openb3d/Bumptest2.zip</a><br><br><img src="http://www.christianhart.de/bmax/openb3d/LOF1.jpg"><br><img src="http://www.christianhart.de/bmax/openb3d/LOF2.jpg"><br><br>Edit: added a minib3D version for comparison.<br><br><img src="http://www.christianhart.de/bmax/openb3d/LOF3.jpg"> <br><br></td></tr></table><br>
<a name="1340780"></a>

<a name="1340781"></a>

<a name="1340782"></a>

<a name="1340783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted May)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK I think I've managed it myself. The solution lies in the shaders and how they must be applied to my BSP loading constructor. First I had to distinguish between Alpha and Solids with two different shaders. The Alphamap for the doors was simple but the lightmap was a hard one. But finally I understood how to load and mix it with the shaders and how to use the second UV set there. The torchlight is actually a spotlight as this looks cooler when you look around with the mouse to see the shader bump effect in darker areas. I couldn't implement shadows yet but my first experiments were really disillusioning, either the level is already too complex or I did it completely wrong.<br><br>But wow, IMHO the result is still stunning at this stage of development. If I don't find any serious bugs in OpenB3D I think I can create the whole project with OpenB3D and shaders, goodbye MiniB3D :-D But see yourself, no - walk yourself :-D WASD=Move and RMB=Torchlight including source, candy and whatever (only a part of the level has been constructed for tests):<br><br><a href="http://www.christianhart.de/bmax/openb3d/Bumptest3.zip" target="_blank">http://www.christianhart.de/bmax/openb3d/Bumptest3.zip</a><br><br><a href="http://www.christianhart.de/bmax/openb3d/LOF1a.jpg" target="_blank"><img src="http://www.christianhart.de/bmax/openb3d/LOF1a_t.jpg"></a><br><br><a href="http://www.christianhart.de/bmax/openb3d/LOF2a.jpg" target="_blank"><img src="http://www.christianhart.de/bmax/openb3d/LOF2a_t.jpg"></a><br><br><a href="http://www.christianhart.de/bmax/openb3d/LOF3a.jpg" target="_blank"><img src="http://www.christianhart.de/bmax/openb3d/LOF3a_t.jpg"></a> <br><br></td></tr></table><br>
<a name="1340825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp MkII</td><td align="right"><font class=tiny>(Posted May)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> looking good :)<br><br>Is there a OpenGL 1.x version of this or is it 2.x only? <br><br></td></tr></table><br>
<a name="1340850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted May)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure as I'm not very familar with the differences yet. But I guess most of the graphic cards should be able to handle at least 2.0 today? <br><br></td></tr></table><br>
<a name="1340856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp MkII</td><td align="right"><font class=tiny>(Posted May)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> I only ask as I have a old netbook which is 1.4 and minib3d is 1.4 but apparently openb3d is 2.x <br><br></td></tr></table><br>
<a name="1340859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted May)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, Openb3d does not work in GL1, it's really a GL2 engine as shaders changed for GL3 in a non-backwards compatible way and like Krischan says, GL1 is so old as to not be worth supporting (shaders in 1.4 needed every extension checked). There are no GL3 samples as I never had GL3 but maybe that could happen now as I feel like reviving the wrapper, although I can't do the mobile stuff but it would be nice to tidy up what's been contributed at least. <br><br></td></tr></table><br>
<a name="1340889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp MkII</td><td align="right"><font class=tiny>(Posted May)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good to know :) <br><br></td></tr></table><br>
<a name="1340961"></a>

<a name="1340962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted May)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Krischan&gt;&gt;looks good, i suggest you take a look at the game "shadow tower" (ps1) and "king's field" (ps1/ps2), the graphics style / ambiance is similar and may give you some ideas... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
