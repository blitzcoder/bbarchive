<!DOCTYPE html><html lang="en" ><head ><title >MiniB3D meets Max2D</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MiniB3D meets Max2D</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >MiniB3D meets Max2D</a><br><br>
<a name="736190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, again something new from side. Because of some questions about using Max2D with miniB3D in the german community I hopefully have found the solution. <br>Could all windows user please test this:<br><br><a href="http://klepto2.kl.funpic.de/DL/minib3dmeets2d.rar" target="_blank">http://klepto2.kl.funpic.de/DL/minib3dmeets2d.rar</a><br><br>IF you have problems running the above sample then please try this one:<br><br><a href="http://klepto2.kl.funpic.de/DL/meets2d(original).rar" target="_blank">http://klepto2.kl.funpic.de/DL/meets2d(original).rar</a><br><br>this one uses the original V0.30 modified for Max2D use. hopefully this will work.<br><br>And post the result (working/not working)<br><br>thx <br><br></td></tr></table><br>
<a name="736193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brilliant, works well. Win XP Pro SP2 , Radeon 9600XT <br><br></td></tr></table><br>
<a name="736214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does not work at all here on my fathers computer. A black windows pops up and then dissapears. No errormessage or anything.<br><br>Win XP SP2 integrated intel graphics. <br><br></td></tr></table><br>
<a name="736217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> does the original version of minib3d work with your PC?<br>Unfortunatly it seems to rely on the integrated intel chip :(<br>And maybe it doesn't support some extensions used by my mod. <br><br></td></tr></table><br>
<a name="736218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kev</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> works here. <br><br></td></tr></table><br>
<a name="736223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FOODy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same as with deps.<br>The Window pop-up and disappear.<br><br>But MiniB3D works fine. <br><br></td></tr></table><br>
<a name="736227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> sounds very good :)<br><br>btw: for all of you (and all the others) here is the new RenderWorld Function from TGlobal : <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function RenderWorld()
		glMatrixMode GL_PROJECTION
		glLoadMatrixd TGLobal.ortho_pj
		glMatrixMode GL_MODELVIEW
		glLoadMatrixd TGLobal.ortho_mv
			
		TGLobal.EnableStates()	
			
		glPopAttrib
		
		SetBlend SolidBlend
		
		
		For Local cam:TCamera=EachIn TCamera.cam_list

			If cam.EntityHidden()=True Then Continue

			RenderCamera(cam)
			
		Next
		
		Local x,y,w,h
		GetViewport(x,y,w,h)
		
		glDisable(GL_LIGHTING)
		glDisable(GL_DEPTH_TEST)
		glDisable(GL_SCISSOR_TEST)
		glDisable(GL_FOG)
		glDisable(GL_CULL_FACE)

		glMatrixMode GL_TEXTURE
		glLoadIdentity
		
		glMatrixMode GL_PROJECTION
		glLoadIdentity
		glOrtho 0,GraphicsWidth(),GraphicsHeight(),0,-1,1
		
		glMatrixMode GL_MODELVIEW
		glLoadIdentity
		
		SetViewport x,y,w,h
		
		For Local Layer = 0 Until THardwareInfo.MaxTextures
			glActiveTexture(GL_TEXTURE0+Layer)
				
			glDisable(GL_TEXTURE_CUBE_MAP)
			glDisable(GL_TEXTURE_GEN_S)
			glDisable(GL_TEXTURE_GEN_T)
			glDisable(GL_TEXTURE_GEN_R)

			glDisable(GL_TEXTURE_2D)
		Next
		
		glActiveTexture(GL_TEXTURE0)
		
		DrawRect -10,-10,5,5
		
	End Function
</textarea><br><br>The functions were already posted in a previous thread, but they seemd to produce some errors. This is solved by just resetting the SetBlend to SolidBlend before rendering the 3D part.<br><br>[Edit]<br>A new Version is online (using the original V0.30) see first post.<br>[/Edit] <br><br></td></tr></table><br>
<a name="736234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FOODy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The new Version works fine :D<br>Good job! <br><br></td></tr></table><br>
<a name="736253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> works great on my laptop.. <br><br></td></tr></table><br>
<a name="736255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The second link does not work either.<br>Seems like MiniB3D does not like integrated intel graphics. <br><br></td></tr></table><br>
<a name="736270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's likely; What I've seen of the older Integrated Intel Graphics tells me that they hate Open GL :(<br>(Which is definietly not a good thing, since loads of casual gamers have integrated graphics!) <br><br></td></tr></table><br>
<a name="736287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robb</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works fine here. <br>Intel P4 3,2Ghz | Radeon mobility 9100 128mb | 512mb Ram<br><br>Being able to use Max2d for a GUI or HUD would possibly be the best thing ever! <br><br></td></tr></table><br>
<a name="736292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> older integrated Intel had no 3D acceleration, which is most likely why they do not like OpenGL or better: They at best support 1.1 / 1.2 but no extension as they use fallbacks to the OS drivers (they are not much better on D3D7 after all. their performance and stability differs massively from version to version of the drivers. Older intel work best on DX8 / 9 ... Only Intel Extreme series are 3D chipsets. And just to mention that: S3 and SiS are no 3D chipsets as well)<br><br><br>Works here on both machines (P-M 1.5Ghz, Radeon 9700 Mobile | Core Duo T2500, GF 7600 Go) <br><br></td></tr></table><br>
<a name="736325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JonasL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The functions were already posted in a previous thread, but they seemd to produce some errors. This is solved by just resetting the SetBlend to SolidBlend before rendering the 3D part. <br></div><br><br>Nice work! Really need 2D. What do I do? Do I just pop the above function into MiniB3D or do I need the functions already posted in a previous thread as well? How do I use Max2D with MiniB3D?<br><br>Hopefully simonh will integrate this in 0.40. <br><br></td></tr></table><br>
<a name="736337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sveinung</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem running the demo<br><br>Sveinung <br><br></td></tr></table><br>
<a name="736349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> You just have to insert the following things for the original<br>minib3d:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Global ortho_mv![16],ortho_pj![16]

Function RenderWorld()
		glMatrixMode GL_PROJECTION
		glLoadMatrixd TGLobal.ortho_pj
		glMatrixMode GL_MODELVIEW
		glLoadMatrixd TGLobal.ortho_mv
			
		TGLobal.EnableStates()	
			
		glPopAttrib
		
		SetBlend SolidBlend
		
		
		For Local cam:TCamera=EachIn TCamera.cam_list

			If cam.EntityHidden()=True Then Continue

			RenderCamera(cam)
			
		Next
		
		Local x,y,w,h
		GetViewport(x,y,w,h)
		
		glDisable(GL_LIGHTING)
		glDisable(GL_DEPTH_TEST)
		glDisable(GL_SCISSOR_TEST)
		glDisable(GL_FOG)
		glDisable(GL_CULL_FACE)

		glMatrixMode GL_TEXTURE
		glLoadIdentity
		
		glMatrixMode GL_PROJECTION
		glLoadIdentity
		glOrtho 0,GraphicsWidth(),GraphicsHeight(),0,-1,1
		
		glMatrixMode GL_MODELVIEW
		glLoadIdentity
		
		SetViewport x,y,w,h
		
		Local MaxTex:Int 
		glGetIntegerv(GL_MAX_TEXTURE_UNITS, Varptr(MaxTex))

		
		For Local Layer = 0 Until MaxTex
			glActiveTexture(GL_TEXTURE0+Layer)
				
			glDisable(GL_TEXTURE_CUBE_MAP)
			glDisable(GL_TEXTURE_GEN_S)
			glDisable(GL_TEXTURE_GEN_T)
			glDisable(GL_TEXTURE_GEN_R)

			glDisable(GL_TEXTURE_2D)
		Next
		
		glActiveTexture(GL_TEXTURE0)
		
		DrawRect -10,-10,5,5
		
	End Function
</textarea><br>simply add the globals to TGlobal and replace renderworld()<br><br>for my modified version you have to add the globals and replace renderworld by the code of the first post. <br><br></td></tr></table><br>
<a name="736393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jason W.</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Neither one works in Vista 32bit.   A screen opens then flashes.  I even tried the compatibility options, and still does not work.<br><br>Pent4 3ghz, 2 gig ram, ATI 850XT w/ 256mb ram<br><br>Jason <br><br></td></tr></table><br>
<a name="736395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bregors</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="736399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Working beautifully on Radeon 9600 Pro with an Athlon 2500+ (1.8 gHz).<br>60 FPS for the whole thing. <br><br></td></tr></table><br>
<a name="736446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Working fine on an Nvidia GeForce 4 MX 440, Win XP Pro SP2<br>ca 60 FPS<br><br>Well done ! <br><br></td></tr></table><br>
<a name="736457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikele</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works fine on my desktop (Nvidia GF6600) + notebook (ATI X700). <br><br></td></tr></table><br>
<a name="736472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Jason W. : <br>I really don't know much about Vista, but I think it crashes because the test app will run in window mode and as far as I know Vist just emulates OpenGL in Window mode. Just a guess. <br><br></td></tr></table><br>
<a name="736530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jan_</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works fine<br>FSC PC with SIS graphicscard<br>and<br>on XP sp2 with GF6800 <br><br></td></tr></table><br>
<a name="736697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >insomnia</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also works fine here!<br>AGP GeForce 4TI-4200 on XP SP1 <br><br></td></tr></table><br>
<a name="736771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nennig</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works here for both versions.<br><br>Win XP SP 2, ATI X600, Centrino 1.6 GHZ, 1024 RAM <br><br></td></tr></table><br>
<a name="736829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> works   <br>60 fps<br><br>xp sp2  6200 gf <br><br></td></tr></table><br>
<a name="737061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JonasL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You just have to insert the following things for the original<br>minib3d: [...] simply add the globals to TGlobal and replace renderworld() <br></div><br><br>I added the above to MiniB3D v 0.30. Crashes on MacOS X (10.4.8, G4 PPC, GeForce4 MX) as soon as I add the new RenderWorld() function. <br><br></td></tr></table><br>
<a name="737069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JonasL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I should have debugged it first and then posted! Here is the problem and the solution. The glActiveTexture() crashes so you have to replace them with glActiveTextureARB(). That is all. It now works on Mac as well. Getting a good 60+ FPS. Great work. Thanks klepto2!<br><br><pre class=code>
	For Local Layer = 0 Until MaxTex
		glActiveTextureARB(GL_TEXTURE0+Layer)
				
		glDisable(GL_TEXTURE_CUBE_MAP)
		glDisable(GL_TEXTURE_GEN_S)
		glDisable(GL_TEXTURE_GEN_T)
		glDisable(GL_TEXTURE_GEN_R)

		glDisable(GL_TEXTURE_2D)
	Next
		
	glActiveTextureARB(GL_TEXTURE0)
</pre> <br><br></td></tr></table><br>
<a name="738673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >The r0nin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is great!  Makes my programming much easier.  Thanks!<br><br>I do have a question, though.  I saw on another thread that you had implemented basic shaders for MiniB3D.  Was that shader code generic (i.e. could be used to load any frag and vert text files for programmable shaders), or did it just implement the shaders you were using at the time.  I think my next project would really benefit from toon shading, and though the shaders themselves seem somewhat easy to understand (with pretty good examples on the net of toon shading), implementing it in MiniB3D is a little beyond me...<br><br>A few of my favorite resources (to show what kind of shader I'm talking about):<br><br><a href="http://www.clockworkcoders.com/oglsl/tutorial10.htm" target="_blank">http://www.clockworkcoders.com/oglsl/tutorial10.htm</a><br><a href="http://www.lighthouse3d.com/opengl/glsl/index.php?toon" target="_blank">http://www.lighthouse3d.com/opengl/glsl/index.php?toon</a><br><br>And one link to an older non-shader version (that I can't even begin to understand how to do):<br><br><a href="http://www.gamedev.net/reference/articles/article1438.asp" target="_blank">http://www.gamedev.net/reference/articles/article1438.asp</a><br><br>Any pointers in the right direction or links to other info to help get me started?  Thanks for your continued work (the Blitz community is the best; you, simonh, gman, and lots of others!) <br><br></td></tr></table><br>
<a name="738708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Basically you could use every glsl shader with my implemtation. I'm currently working on different things (also some shader samples for the next release). My first shaders where also from lighthouse3d. But a small hint: try to program the shaders as strict as possible, because the compiler on Ati and nvidia will handle the source different (ati is more strict than nvidia). So stay strict and you will be fine. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
