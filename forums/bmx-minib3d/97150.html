<!DOCTYPE html><html lang="en" ><head ><title >MiniB3D and SetVirtualResolution</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MiniB3D and SetVirtualResolution</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >MiniB3D and SetVirtualResolution</a><br><br>
<a name="1126648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AvestheFox</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd like to be able to set the virtual resolution and for it to effect both the Max2D and Minib3d graphics output...<br><br>I've tried using grabimage to grab the 3d rendering and then drawing the image that was grabbed to the max2d field, but as we all know, grabimage reeks of snails when being used in a loop...<br><br>Help please! <br><br></td></tr></table><br>
<a name="1126735"></a>

<a name="1126736"></a>

<a name="1126840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi. We've worked this out in Blitz3D before: <a href="http://blitzbasic.com/Community/posts.php?topic=95702#1104692" target="_blank">http://blitzbasic.com/Community/posts.php?topic=95702#1104692</a><br><br>The steps are:<br>• Create a graphics screen with any common resolution you want, like 800x600, 1920x1080 etc.<br>• Create a camera with a small viewport that has the same ratio as your game screen (this is your virtual resolution), and create another camera but don't change its viewport (so it'll be the same size of your screen).<br>• Render the scene with the small viewport camera, and use MiniB3D's BackBufferToTex() function (instead of GrabImage) to copy the contents of the small viewport to a certain texture to hold it.<br>• Use this texture on a specially mapped fullscreen quad like in the above example. You need to build the quad with the same UV values as the link I pointed you to, so the quad doesn't grab any empty texture space.<br>• After the quad is setup, render the scene with the normal game camera, start Max2D mode and draw your overlayed Max2D stuff.<br><br>• Optionally, go to TMesh.BMX Update() function and change the following:<br><pre class=code>
' mipmapping texture flag
If tex_flags&amp;8&lt;&gt;0
	glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR)
	glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR_MIPMAP_LINEAR)
Else
	glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR)
	glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR)
EndIf
</pre>To this...<br><pre class=code>' mipmapping texture flag
If tex_flags&amp;8&lt;&gt;0
	glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR)
	glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR_MIPMAP_LINEAR)
Else
	glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST) 'Changed to "LINEAR".
	glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST) 'Changed.
EndIf
</pre>...and rebuild your mB3D module. <br>Every texture now that doesn't use MipMapping will use Nearest-Neighbour filtering, which gives textures a pixelized, jagged look kinda like PSOne games or MineCraft. <br>If your virtual resolution texture (the one rendered by the small-viewport camera) uses this 'nearest' filtering it'll look much, much better.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1126737"></a>

<a name="1126738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't used VirtualResolution() but looking quickly at the code for SetResolution in openGL my guess is that you need to SetResolution() first, then call GraphicsInit(), because that will save the state for you when you call BeginMax2D().<br><br><strike>Is that what you are looking for?</strike><br><br>EDIT: ah, thankfully someone who knows what you're talking about has stepped in.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1126783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AvestheFox</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Kryzon I've already set the mipmap settings to "NEAREST" a while back (because I want my games to have that old school jagged effect) so I'm good to go on that bit!<br><br>I'll try the other part of your suggestion later on today when I get around to my project. Thanks! :D<br><br>@AdamRedWoods thanks for the effort regardless :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
