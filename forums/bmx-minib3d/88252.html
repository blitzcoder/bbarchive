<!DOCTYPE html><html lang="en" ><head ><title >minib3D "small fixes" version up</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >minib3D "small fixes" version up</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=119" >MiniB3D Module</a>/<a href="#bottom" >minib3D "small fixes" version up</a><br><br>
<a name="1001939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've put up a version of minib3d that contains a plain source, with small fixes to let it run under my version of parallels 3.<br><br>The tweaks will probably help on older GFX cards too.<br>any changes to the current minib3d can be found by searching the source for  "PSEDIT"<br><br>You can get it here <br><br><a href="http://code.google.com/p/blitzmax-assimp/source/browse/#svn/trunk/examples/minib3dsf" target="_blank">http://code.google.com/p/blitzmax-assimp/source/browse/#svn/trunk/examples/minib3dsf</a><br><br>I'll be happy to but in any (semi sane) fixes/tweaks that anyboby has. <br><br></td></tr></table><br>
<a name="1001955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> out of curiosity, what are the fixes? <br><br></td></tr></table><br>
<a name="1001974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check it out: <a href="http://blitzmax-assimp.googlecode.com/files/minib3d0531-sf01.zip" target="_blank">http://blitzmax-assimp.googlecode.com/files/minib3d0531-sf01.zip</a> tell me if it runs for you.<br><br>any changes to the current minib3d can be found by searching the source for "PSEDIT" <br><br></td></tr></table><br>
<a name="1002231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't you just post what the fixes are(at least what they supposed to fix)? I tried the first link, searched the trunk for PSEDIT, and it found no match on any document.<br><br>And if you want more fixes, on my "miniB3D" I implemented the following changes:<br><br>	- converted miniB3D to SuperStrict<br>	- FreeTexture fix from <a href="http://www.blitzbasic.com/Community/posts.php?topic=88263" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=88263</a><br>	- CreateSurface &amp; BrushFX/EntityFX fix from <a href="http://www.blitzbasic.com/Community/posts.php?topic=88060" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=88060</a><br>	- Pivot pick bug fix from <a href="http://www.blitzbasic.com/Community/posts.php?topic=78749" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=78749</a><br>	- Texture blend compatibility fix from <a href="http://www.blitzbasic.com/Community/posts.php?topic=88039" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=88039</a><br>	- Texture fix from <a href="http://www.blitzmax.com/Community/posts.php?topic=87020" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=87020</a><br>	- Collision fix from <a href="http://www.blitzmax.com/Community/posts.php?topic=87446" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=87446</a><br>	- Collision fix from <a href="http://www.blitzbasic.com/Community/posts.php?topic=87551" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=87551</a><br>	- Applied small changes from <a href="http://www.blitzbasic.com/Community/posts.php?topic=79409" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=79409</a> <br><br></td></tr></table><br>
<a name="1002371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks SLotman, thats great!  I'll try and put those fixes in too and report back.<br><br>I'll make a list and post it. <br><br></td></tr></table><br>
<a name="1002373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  converted miniB3D to SuperStrict <br></div><br>Yay ! :-) <br><br></td></tr></table><br>
<a name="1002408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here a list.<br>I mailed SLotman asking for his version, as it seems further ahead, If I get it I'll put everything in one version.<br><br>I've altered the changetag to "SMALLFIXES" and made a little program to search for them and list them<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
functions.bmx: 
Line: 795
Function Graphics3D(width,height,depth=0,mode=0,rate=60,flags=-1) 'SMALLFIXES added flags

TBlitz2D.bmx: 
Line: 5
If THardwareInfo.VBOSupport 'SMALLFIXES hack to keep non vbo GFX from crashing

TGlobal.bmx: 
Line: 13
Function Graphics3D(w,h,d=0,m=0,r=60,flags=-1)	' SMALLFIXES added flags so that the ACCUMBUFFER can be left out (crashes parallels)

THardwareInfo.bmx: 
Line: 50
If Not THardwareInfo.TexBlendSupport 'SMALLFIXES use the ARB version that works the same

TMesh.bmx: 
Line: 1706
If THardwareInfo.VBOSupport 'SMALLFIXES this if statement is a hack to prevent crash when vbo is not supported by GFX

TMesh.bmx: 
Line: 1777
If THardwareInfo.VBOSupport 'SMALLFIXES this if statement is a hack to prevent crash when vbo is not supported by GFX

TMesh.bmx: 
Line: 1973
'//SMALLFIXES NOTFIXED 'DebugStop IRRmesh+others sometimes crash here under parallels

TMesh.bmx: 
Line: 1981
If THardwareInfo.VBOSupport 'SMALLFIXES this if statement is a hack to prevent crash when vbo is not supported by GFX

TPick.bmx: 
Line: 204
'SMALLFIXES to avoid crashes, skip pivots with pickmode 2

TTexture.bmx: 
Line: 38
Method FreeTexture() 'SMALLFIXES New function from <a href="/posts.php?topic=88263#1002039" target="_blank">/Community/posts.php?topic=88263#1002039</a>
</textarea> <br><br></td></tr></table><br>
<a name="1002562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fixlist now part of the repository : <a href="http://code.google.com/p/blitzmax-assimp/source/browse/trunk/examples/minib3dsf/smallfixes.txt" target="_blank">http://code.google.com/p/blitzmax-assimp/source/browse/trunk/examples/minib3dsf/smallfixes.txt</a><br><br>I mainly wanted SLotmans for superstrict, but that can come later.<br>I'm putting in his changes now<br><br>I'll put in any sensible small fixes additions that anybody has, so feel free to post them here <br><br></td></tr></table><br>
<a name="1002569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> SLotman changes except superstrict and ziggys cleanup is in. <br><br></td></tr></table><br>
<a name="1004205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm going to move the racer over to MiniB3D I think, since it's extensible, but I could REALLY do with the superstrict version.<br><br>how much work was it to do that? (I'm at work so can't look for myself...)<br>I know it's not hard per say, but time consuming. I can not work without superstrict :-) <br><br></td></tr></table><br>
<a name="1004273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not much - took me a couple of hours to do it - it's most just declaring int's since the rest is already declared. <br><br></td></tr></table><br>
<a name="1004553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> When is SimonH gonna release the next version with these fixes implemented? <br><br></td></tr></table><br>
<a name="1004575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> with warners code for rotation as it seems to fix the problems with eulers. <br><br></td></tr></table><br>
<a name="1005494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, SimonH?? When? When!!?!? <br><br></td></tr></table><br>
<a name="1005914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since I haven't heard from SLotman, I've started adding superstrict.<br><br>I'll post back when it's done. <br><br></td></tr></table><br>
<a name="1005988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Superstrict added added to SVN.<br>I'll make a zip too<br><br>[EDIT] : Zip is here: <a href="http://code.google.com/p/blitzmax-assimp/downloads/list" target="_blank">http://code.google.com/p/blitzmax-assimp/downloads/list</a><br><br><br>I'm planning to change the # float markers to :Float and $ to :String in the forseeable future. <br><br></td></tr></table><br>
<a name="1009504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added <a href="http://blitzmax.com/Community/posts.php?topic=88901#1009408" target="_blank">http://blitzmax.com/Community/posts.php?topic=88901#1009408</a> SLotmans incbin, zipstream fix for textures to SVN.<br><br>(Not in downloadable zip yet)<br><br>view all changes in <a href="http://code.google.com/p/blitzmax-assimp/source/browse/trunk/examples/minib3dsf/smallfixes.txt" target="_blank">http://code.google.com/p/blitzmax-assimp/source/browse/trunk/examples/minib3dsf/smallfixes.txt</a> <br><br></td></tr></table><br>
<a name="1009593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good work Peter, I'll make sure these fixes get added to the next release from me. <br><br></td></tr></table><br>
<a name="1010528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> When will the incbin fix be in the zip release ?? <br><br></td></tr></table><br>
<a name="1010544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now: .-)<br><br><a href="http://code.google.com/p/blitzmax-assimp/downloads/list" target="_blank">http://code.google.com/p/blitzmax-assimp/downloads/list</a> <br><br></td></tr></table><br>
<a name="1010640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> excellent :D <br><br></td></tr></table><br>
<a name="1010648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd just like to thank you Peter for this project. Saves me a lot of time since I bounce from computer to computer a lot, I don't have to remember to bring a copy of my working minib3d with me when I move around (specifically my own texture release patch you integrated is critical for my current project). Great stopgap between official updates from Simon. <br><br></td></tr></table><br>
<a name="1010706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shagwana</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just want to say that this little project is wonderfull, keep up the great work!. <br><br></td></tr></table><br>
<a name="1010770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks all. I'll keep updating, so please feel free to post relevant fixes.<br><br>I still think the best solution would be a common repository.. :-) <br><br></td></tr></table><br>
<a name="1015247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nrasool</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there,<br><br>Just out of interest, does this small fix build have the following implemented, if it doesn't, I can add it <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2498" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2498</a> <br><br></td></tr></table><br>
<a name="1015250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> It doesn't, I won't put them in, as it would move the module too far away from the "small fixes" concept.<br><br>I'd still really like to see them go in to the main branch, but you'll have to poke simonh to make that happen :-)<br><br>Did someone report some performance (speed) problems with Warners code or did I dream that? <br><br></td></tr></table><br>
<a name="1015290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't tested it myself, but others allege so: <a href="http://blitzbasic.com/Community/posts.php?topic=88851#1009397" target="_blank">http://blitzbasic.com/Community/posts.php?topic=88851#1009397</a> <br><br></td></tr></table><br>
<a name="1015344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should be heavier (the math is beefier) which in extreme circumstances could result in slower movement etc. Additionally, it's off the main branch so could alter some people's code (stuff that trys to hack workarounds for gimbal lock in their application for example). Additionally I've yet to get it to work right for me, I have lots of parent/child links in my current project and everything just goes whacky and out of control when I try to implement that. Which makes me sad since I could REALLY use better rotations, but I'm just going to wait until simon takes a poke at it, or klepto updates his extended version with it. Would really love to see the main branch, or a spin off use better math, but until it's supported throughout the engine it's a bit more than a "small fix" imo :0)<br><br>P.S. small fixes version is still going great for me, thanks yet again for all the work! <br><br></td></tr></table><br>
<a name="1015433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> What would it take to add non-boned animation support? The sort of thing you would use to animate a robot or something. I know it's not really a 'small' fix but it does feel like something that's missing from MiniB3D. <br><br></td></tr></table><br>
<a name="1015626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doesn't it already have keyframe animation support through LoadAnimMesh() and Animate()? <br><br></td></tr></table><br>
<a name="1042738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> you have to put this line in :<br><pre class=code>
If TcollisionPair.ent_lists[type_no]&lt;&gt;Null
</pre><br><br>to make entitycollided look like this:<br><pre class=code>
		' if self is source entity and type_no is dest entity
		For Local i:Int=1 To CountCollisions()
			If CollisionEntity(i).collision_type=type_no Then Return CollisionEntity(i)
		Next

		' if self is dest entity and type_no is src entity
		If TcollisionPair.ent_lists[type_no]&lt;&gt;Null
		For Local ent:TEntity=EachIn TCollisionPair.ent_lists[type_no]
		
			For Local i:Int=1 To ent.CountCollisions()
				If CollisionEntity(i)=Self Then Return ent		
			Next
		Next
		EndIf
		Return Null
</pre> <br><br></td></tr></table><br>
<a name="1049982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AnniXa</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> ty for that fixes! <br><br></td></tr></table><br>
<a name="1078563"></a>

<a name="1078564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> I propose this fix:<br><i>Flickering Entities and Alpha Values</i><br><br>explained here:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=94108" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=94108</a><br><br>Please test, to see if it is compatible. I've done my own tests and it seems proper. (tested on an IntelG41)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1078762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys.<br><br><br>I'll put the above two in soon, so please test AdamRedwoods code proposed fix and report any issues. <br><br></td></tr></table><br>
<a name="1078772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> And thank you Difference for maintaining this. Really saves me SO much time not having to track the patches down, or alternatively maintain a pristine copy myself. <br><br></td></tr></table><br>
<a name="1080010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another bug found when passing animated texture frame values to brushes:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=94221" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=94221</a> <br><br></td></tr></table><br>
<a name="1080311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Adam, I'll put it in. <br><br></td></tr></table><br>
<a name="1082201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found the same above bug with PaintEntity (not passing texture frame)<br><br>under TEntity.bmx:<br><pre class=code>
	Method PaintEntity(bru:TBrush)
	
		brush.no_texs=bru.no_texs
		brush.name$=bru.name$
		brush.red#=bru.red#
		brush.green#=bru.green#
		brush.blue#=bru.blue#
		brush.alpha#=bru.alpha#
		brush.shine#=bru.shine#
		brush.blend=bru.blend
		brush.fx=bru.fx
		brush.tex_frame = bru.tex_frame ''copy tex frame over
		For Local i=0 To 7
			brush.tex[i]=bru.tex[i]
		Next
	
	End Method
</pre> <br><br></td></tr></table><br>
<a name="1082822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updating now, but<br><br>@AdamRedwoods: <br>regarding Flickering Entities and Alpha Values<br>What exactly should I put in tmesh?<br><br>Yours : <br><a href="http://blitzmax.com/Community/posts.php?topic=94108#1078568" target="_blank">http://blitzmax.com/Community/posts.php?topic=94108#1078568</a> <br>or<br><a href="http://blitzmax.com/Community/posts.php?topic=94108#1080776" target="_blank">http://blitzmax.com/Community/posts.php?topic=94108#1080776</a><br><br>and exactly what must it replace, this?<br><br><pre class=code>' take into account auto fade alpha
	alpha#=alpha#-fade_alpha#

	' if surface contains alpha info, enable blending
	If surf.alpha_enable=True
		glEnable(GL_BLEND)
		glDepthMask(GL_FALSE)
	Else
		glDisable(GL_BLEND)
		glDepthMask(GL_TRUE)
	EndIf
</pre> <br><br></td></tr></table><br>
<a name="1083216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sent an email. Use my version.<br><br>The fix would be to TMesh.bmx<br><pre class=code>
            ' take into account auto fade alpha
            alpha#=alpha#-fade_alpha#

            ' if surface contains alpha info, enable blending
            ' If surf.alpha_enable=True ''this is the old way
            '' ----------- begin new code

            If alpha_order&lt;&gt;0.0
                If brush.alpha#&lt;1.0
                    ''the entire entity
                    glEnable(GL_BLEND)
                    glDepthMask(GL_FALSE)
                ElseIf surf.alpha_enable=True
                    ''just one surface
                    glEnable(GL_BLEND)
                    glDepthMask(GL_FALSE)
                Else
                    ''entity flagged for alpha, but not this surface
                    glDisable(GL_BLEND)
                    glDepthMask(GL_TRUE)
                EndIf
            Else
                glDisable(GL_BLEND)
                glDepthMask(GL_TRUE)
            EndIf

           ''--------------end new code
            ' blend modes
            Select blend
                Case 0
                    glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA) ' alpha
                Case 1
                    glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA) ' alpha
                Case 2
                    glBlendFunc(GL_DST_COLOR,GL_ZERO) ' multiply
                Case 3
                    glBlendFunc(GL_SRC_ALPHA,GL_ONE) ' additive and alpha
            End Select

</pre> <br><br></td></tr></table><br>
<a name="1083239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks adam, I'll use that. (PS: didn't get your mail ) <br><br></td></tr></table><br>
<a name="1083246"></a>

<a name="1083249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FBEpyon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adams doesn't fix the Alpha Z-Ordering, Mine does... and also fixes the flickering, I tested Adams, and it did nothing to mine MiniB3d, so I researched the Z-Ordering in OpenGl and this is what I came up with, trust me try it out with vertex set to alpha.. his with not fix any of the Z-Ordering mine will.. Z-Ordering has to do with the DepthMask, and way his is setup will not fix the Z-Ordering.  Try using a mesh with vertex alpha with multiple layers, it should blend perfect, but it could just be his video card vs mine..<br><br><pre class=code>
			alpha#=alpha#-fade_alpha#

			If surf.alpha_enable=True
				glEnable(GL_BLEND)
				glDepthMask(GL_FALSE)
			Else
				glDisable(GL_BLEND)
			EndIf

			' blend modes
			Select blend
				Case 0
					glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA) ' alpha
				Case 1
					glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA) ' alpha
				Case 2
					glBlendFunc(GL_DST_COLOR,GL_ZERO) ' multiply
				Case 3
					glBlendFunc(GL_SRC_ALPHA,GL_ONE) ' additive and alpha
			End Select
			
			glDepthMask(GL_TRUE)
</pre><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1083260"></a>

<a name="1083261"></a>

<a name="1083262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you have a simple example of the Z-ordering problem? That would help, because I haven't seen that specific problem yet.<br><br>I have a simple example of the "flickering problem". Your version above does not solve the flickering problem. We may have to combine the two solutions as they seem to be separate problems.<br><br>Flickering problem example, when changing alpha values for instanced entities:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
''Flickering example
Import "../minib3d.bmx"

SuperStrict

Local width#=640,height#=480,depth#=0,mode#=2

Graphics3D width,height,depth,mode

Local cam:TCamera=CreateCamera()
PositionEntity cam,0,0,-5

Local light:TLight=CreateLight(1)


Local cube:TMesh=CreateCube()
Local sphere:TMesh=CreateSphere()
Local cylinder:TMesh=CreateCylinder()
Local cone:TMesh=CreateCone() 

PositionEntity cube,-3,0,0
PositionEntity sphere,-1,0,0
PositionEntity cylinder,1,0,0
PositionEntity cone,3,0,0

Local sphere2:TEntity = CopyEntity(sphere)
Local sphere3:TEntity = CopyEntity(sphere)
PositionEntity sphere2,-1,2,0
PositionEntity sphere3,-1,-2,0


Local a#=0, dir%=0

While Not KeyDown(KEY_ESCAPE)	 And Not AppTerminate()	

	If KeyHit(KEY_ENTER) Then DebugStop

	' control camera
	MoveEntity cam,KeyDown(KEY_D)-KeyDown(KEY_A),0,KeyDown(KEY_W)-KeyDown(KEY_S)
	TurnEntity cam,KeyDown(KEY_DOWN)-KeyDown(KEY_UP),KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT),0
		

	TurnEntity cube,0,1,0

	
	If dir=0 Then a:+0.05 Else a:-0.05
	If a&gt;1.0 Then a=1.0; dir=-1
	If a&lt;0.0 Then a=0.0; dir=0

	EntityAlpha sphere,a

	RenderWorld
	renders=renders+1

	Flip

Wend
End
</textarea><br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1083268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I thought about FBEpyon's problem:<br><br>If a vertex is set with an alpha value, then yes, you will have some strange Z-order problems. This is because when miniB3D does it's "alpha" sorting with the TMesh.Alpha() method, it does not check for vertex alpha, only surface alpha (in brushes).<br><br>In PBEpyon's fix, we are ALWAYS turning on glDepthMask(GL_TRUE) for every render. I'm not sure if we want to do this. This causes some problems with my game, especially with all transparent cylinders.<br><br>A possible workaround would be to turn on the surface's force alpha flag if we set a vertex to alpha. This can be done using :<br><pre class=code>
surface.brushFX(32)
</pre><br><br>FBEpyon, does this fix work for you without always setting glDepthMask(GL_TRUE)? <br><br></td></tr></table><br>
<a name="1117443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because the official version is now on github, smallfixes version is now officially retired.<br><br>You can read about the GitHub version here : <a href="http://blitzmax.com/Community/posts.php?topic=96520#1117278" target="_blank">http://blitzmax.com/Community/posts.php?topic=96520#1117278</a><br><br>or go straight to <a href="https://github.com/si-design/minib3d" target="_blank">https://github.com/si-design/minib3d</a><br><br>Please keep submitting your fixes to the official version and resubmit any I didn't get in! <br><br></td></tr></table><br>
<a name="1117484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did the flickering fix get in there? Could someone test that above code I posted (post #43 above)? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
