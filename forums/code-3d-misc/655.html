<!DOCTYPE html><html lang="en" ><head ><title >.b3d and with Skeletal Animation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='Take a .b3d animated file, and play built in animations and skeletal deformations at the same time, language=bb, category=3D Graphics - Misc'><meta name='author' content='AmazingJas'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 ><a href=codearcs.php>Code archives</a>/<a href=codearcs.php?cat=2>3D Graphics - Misc</a>/.b3d and with Skeletal Animation</h1><div class="quote">This code has been declared by its author to be Public Domain code.</div><br><a href="655.bb">Download source code</a><br><br><table width="100%" cellspacing="0" cellpadding="0"><tr ><td width="100%"><table width=100% cellspacing=0 cellpadding=0><tr ><td class=headleft></td><td class=head><table width=100% cellspacing=0 cellpadding=0><tr ><td >.b3d and with Skeletal Animation by AmazingJas</td><td align="right">2003 </td></tr></table></td><td class=headright></td></tr></table></td></tr><tr ><td class="cell"> Take a .b3d animated file, and play built in animations and skeletal deformations at the same time.<br><br>A game example might be that the .b3d animation might be set to running, and you can use the skeletal animation to make the character look to the left or right, without interupting the .b3d animation.  I used the zombie .b3d from <a href="http://xu1productions.com/3dstudio/models/zmodels.html" target="_blank">http://xu1productions.com/3dstudio/models/zmodels.html</a> </td></tr><tr ><td class="cell"><pre class="code">Graphics3D 800,600
SetBuffer BackBuffer()
camera=CreateCamera()
CameraViewport camera,0,0,GraphicsWidth(),GraphicsHeight()

;load in a .b3d and give it a handle
Global zombie=LoadAnimMesh("zombie.b3d")

;locate the bone in the model and give it a handle
Global waist=FindChild(zombie,"Joint8")

;a variable to keep track of the waistbones rotation
Global rotation

;position the model and start it running it's inbuild animation
MoveEntity zombie,0,0,5
ScaleEntity zombie, 0.5,0.5,0.5
Animate zombie,1,0.1,0,0

;mainloop
While Not KeyHit(1)

;move zombie toward or away from the camera for easy viewing
If KeyDown(31) Then MoveEntity zombie,0,0,1
If KeyDown(17) Then MoveEntity zombie,0,0,-1

;use a and d keys to keep track of the waist bone rotation
If KeyDown(30) Then rotation=rotation+1
If KeyDown(32) Then rotation=rotation-1

;updateworld
UpdateWorld

;turn the waistbone, this must be done AFTER UpdateWorld
TurnEntity waist,0,0,rotation

;Render/Flip/display the screen
RenderWorld
Flip

;and loop....
Wend</pre></td></tr></table><br><a name="comments">Comments</a><br><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Psionic</td><td align="right"><font class=tiny>2005</font></td></tr></table></td></tr><tr ><td class="posttext"> You can find the zombie model here now, as I closed that old site a long time ago ;-)<br><br><a href="http://www.psionic3d.co.uk/cgi-bin/imageFolio.cgi?direct=Free%20Stuff/3D%20Models" target="_blank">http://www.psionic3d.co.uk/cgi-bin/imageFolio.cgi?direct=Free%20Stuff/3D%20Models</a> <br><br></td></tr></table><br><a href="codearcs.php" >Code Archives Forum</a><table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
