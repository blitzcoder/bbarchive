<!DOCTYPE html><html lang="en" ><head ><title >limited Math in Blitz3d/2d</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >limited Math in Blitz3d/2d</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=50" >Blitz3D Bug Reports</a>/<a href="#bottom" >limited Math in Blitz3d/2d</a><br><br>
<a name="654751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kepu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! This might sound stupid but,<br>Is it  possible to get  to next Blitz3d version more accurate  float numbers  (more digits) <br>(short float) max 32767.1  is way too limited  (both ends ;))<br><br><br>This because I want use only one basic  for my  needs,<br>Now I have to use  two different.<br>What I need, min  7 digits to' integer' part and  4 to 'decimal ' part<br> I have tried to find  .dll for that,  but no luck ,<br>yours<br>KK <br><br></td></tr></table><br>
<a name="654767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This has been requested by many people, including me, over the past few years. But double precision floats were never added to the language. My guess is they never will.<br><br>The reality is that single precision is good enough for almost everything in game development. Adding double precision would increase the complexity with very little gain in functionality. <br><br></td></tr></table><br>
<a name="654892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Find &amp; Replace" the B3D source code.<br><br>Find "FLOAT:" replace "DOUBLE:" or whatever the terms are :p<br><br>It's worth a shot, hahaha. (probrably cock some 3d up somewhere...) <br><br></td></tr></table><br>
<a name="655365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kepu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzBasic is excellent programming language, it migth be greated mostly for games, but also it  would be an excellent tool.<br><br>For me it would be excellent tool for calculating  measurements of different shapes and forms and also I want to visualize those in 3d, but it needs double floats to succeed.<br>( Blitz printer dll  filled already one missing part.)<br><br>I am  hoping that  someone (Mark ?)  can give a hint  if we are getting  double float  soon or if there is some other option<br> I am willing to give few dollars for that extension if needed <br>Please, .........<br>  :) <br><br></td></tr></table><br>
<a name="661112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> not a bug, but I would like to have double precision too.<br><br>That said, in games design I never really missed it. <br><br></td></tr></table><br>
<a name="745701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abram</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have made a dll that is able to calculate double precision in Blitz 3D, just let me know if you would like to have it. <br><br></td></tr></table><br>
<a name="745861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, i would be interested Abram.<br><br>Also, source code would be cool. <br><br></td></tr></table><br>
<a name="745957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abram</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure, not a problem. You have an email to where I can send it or how should we do it? You probably want to add some operations anyway, so the source code is ofcourse included :)<br><br>I created a new item in the code archieves that includes the source code and some examples, see under<br><a href="http://www.blitzbasic.co.nz/codearcs/codearcs.php?code=1905#comments" target="_blank">http://www.blitzbasic.co.nz/codearcs/codearcs.php?code=1905#comments</a> <br><br></td></tr></table><br>
<a name="746201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >humanspacecraft</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Abram, i´am very interested in this library. I would put it on my website for download until i get traffic problems ;) My email is included in my profile. <br><br>Beste Grüße <br><br></td></tr></table><br>
<a name="746264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abram</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Hannes,<br>the code has been sent! Wish you alot of fun with it.<br>If you then add a link to your page that others can find it as well it would be good.<br><br>Best Regards <br>Abram <br><br></td></tr></table><br>
<a name="746283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >humanspacecraft</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Astonishingly this was exactly what i was looking for at the moment! Thanks for helping and sharing, Abram!<br><br>It can be downloaded from here:<br><br><a href="http://www.electricdesire.com/blitz/blitzdouble.rar" target="_blank">http://www.electricdesire.com/blitz/blitzdouble.rar</a> <br><br></td></tr></table><br>
<a name="746293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abram</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just happy that I could help somebody, wish you the best of luck adding whatever functionality you need for your own purposes! <br><br></td></tr></table><br>
<a name="746320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it! Thanks very much Abram, and thanks for hosting humanspacecraft. This is cool to have for Blitz. <br><br>I will try using this some time with some fractal code I have to get more zooming power. <br><br></td></tr></table><br>
<a name="747646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kepu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks very much  Abram and also humanspacecraft.  Vow, this is something. (I didn't believe my eyes , thus I was begging those 9 months ago) <br><br></td></tr></table><br>
<a name="749589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abram</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, it is kind of your own fault as well you know ;)<br>I thought that anyone that wanted a double dll would write to the topic I created 12 months ago :)<br>Look at <a href="http://www.blitzbasic.com/Community/posts.php?topic=49299#548162." target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=49299#548162.</a><br><br>But at least now you have it.. better late than never... <br><br></td></tr></table><br>
<a name="759555"></a>

<a name="1134256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> .<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1134257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> .<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="759758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm pretty sure Direct3D changes the FPU to single precision mode.<br><br>In order to use doubles in a Blitz3D program the DLL would have to allow mode changes. You would switch to double precision mode, do your calculations and then switch back to single precision. <br><br></td></tr></table><br>
<a name="759835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abram</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Both of you are right of course, thank you for noticing me about the problem. Got blind when I saw the result just got more decimals. Not a problem to update the dll though to now REALLY handle double and thanks to you Floyd for telling me how I should do it ;).<br>With the updated dll the results are:<br>Multiply: 174164204.05492455<br>Divide; 7.5814668775156253<br>Which I believe matches your expected results exactly RaGR.<br>Sorry for the confusion, but I hope there are no more bugs... unfortunately it is a lot slower now, but at least correct.<br>Updated code has been mailed to humanspacecraft and I hope he will update the code.<br><br>/Abram <br><br></td></tr></table><br>
<a name="759849"></a>

<a name="1134240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> .<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="759851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >humanspacecraft</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> It´s updated!<br><br>donwload: www.electricdesire.com/blitz/blitzdouble.rar <br><br></td></tr></table><br>
<a name="759887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ... unfortunately it is a lot slower now <br></div><br><br>I should have been more clear about the mode changes, which are very slow. If they are done at every call to a DLL function then performance will suffer.<br><br>What I meant is that the DLL must provide a way for the programmer to change the mode within Blitz3D.<br>The proper usage in a Blitz program would then be:<br><br>Set double precision mode.<br>Do many calculations in double precision ( no mode changes here ).<br>Set single precision mode.<br>Continue with ordinary Blitz code.<br><br>The idea is to group the double precision calculations and change modes as infrequently as possible. <br><br></td></tr></table><br>
<a name="759899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abram</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thought of that as well, was not sure what would happen if somebody would use the dll and then forget to set the mode back to single mode after the calculations have been done. I dont want to be responsible for crashing someones computer . However I have tried it at my computer and it does not seem to crash anything if I let it stay in double mode even with the normal Blitz functions.... but I wanted to test it more before I released it....<br><br>Updated once again, got a request for a lot of functions that I had not included in the dll. Functions to compare doubles and some more maths functions. Also made an option to set the FPU to double mode only in the start of the program, which increases the speed of the dll a lot... Just remember to set it to single mode after the calculations are done, otherwise I have no idea if there will be secondary effects in other parts of your programs..<br>Or you can use compile with the ALWAYS_SET_DOUBLEPRECISION set to 1 and this will not be a problem.<br>Hope this will be the last update for a long while :)<br>(Code once again mailed to humanspacecraft, thanks a lot for hosting) <br><br></td></tr></table><br>
<a name="759936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Leaving the FPU in double precision mode should be harmless, but will be slower than single precision.<br><br>All the values used by the 3D engine are single precision. So having the FPU calculate in higher precision is a waste of time.<br><br>As far as I know this is the only reason Direct3D uses single precision mode. <br><br></td></tr></table><br>
<a name="760088"></a>

<a name="1134241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> .<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="760127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abram</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure,  code has been sent! And regarding leaving the FPU in double precision mode I guess you are right Floyd.. seems to be really harmless. Did some speed measurements also, and it seems to be slower, but not extremly slower to leave it in double mode. No crashes until now anyway because of this :) <br><br></td></tr></table><br>
<a name="760486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >humanspacecraft</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also the newest version:<br><a href="http://www.electricdesire.com/blitz/blitzdoubleXL.rar" target="_blank">http://www.electricdesire.com/blitz/blitzdoubleXL.rar</a> <br><br></td></tr></table><br>
<a name="760492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> [offtopic @ humanspacecraft: Did you knew that sys 64739 (note 9! not 8!) would destroy the computer after several hours! Seriously! It would skip the CLI statement to clear interupts, thus reset in a continues loop, eventually overheating the kernal after a couple hours! Tested it on several occasions at department stores - ahh good old days ;)] <br><br></td></tr></table><br>
<a name="962405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >humanspacecraft</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> [offtopic @Danny]<br>thausend years later<br>no i did´nt knew this.<br>I´ve been a fair kid,but i would assume that if i had known this back then, i had been too keen to try this one and of course a department store would be the choice. <br><br></td></tr></table><br>
<a name="967114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sake906</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> My main problem with the floats is... while Abram's DLL gives you doubles, it still does not fix the problem existing in the 3D space of the API. Objects for example are still being positioned on it using the limited floats, simply because their coordinates are not casted as doubles but as floats when you use "PositionEntity(X,Y,Z)" and the like. Me and my programming partner believe that these need to be changed (and a lot of other internal world-positioning routines) so the XYZ parameters are casted into doubles within Blitz3D instead of Floats.<br><br>Use Abram's doubles in commands such as "PositionEntity()"; you will always have them turning into the limited floats... I really hope Mark does something about this because right now it is one of the main limitations we are having in our project and we are so far in development that implementing a world "grid" workaround for it is out of the question. <br><br></td></tr></table><br>
<a name="988896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have a huge world you get problems not only with the z-buffer. The best solution would be to have the camera always at 0,0,0 and move (and scale) the world around. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
