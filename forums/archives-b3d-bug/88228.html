<!DOCTYPE html><html lang="en" ><head ><title >Possible Bug - Buffers not working correctly?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Possible Bug - Buffers not working correctly?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Possible Bug - Buffers not working correctly?</a><br><br>
<a name="1001630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Serpent</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br>Basically, it seems that whenever I try to draw graphics or text to the BackBuffer, it draws it to the front buffer instead.<br><br>Running a simple snippet of code as a test, my suspicions seem to be confirmed.<br><br><pre class=code>Graphics 800,600,32,2

SetBuffer FrontBuffer()
Print "Front"

SetBuffer BackBuffer()
Print "Back"

While Not KeyHit(1)
	WaitKey
	Flip
Wend
End</pre><br><br><br>This should theoretically display 'front' when one buffer is displayed, and 'back' when the other is brought to the front.  Every time you press a key, it should swap between displaying 'Front' and 'Back'.<br><br>When I run this, both 'Front' and 'Back' appear at the same time (as if both times the text was drawn to the front...), and when I press a key (calling the flip command) nothing happens.<br><br><br>Please let me know if I've got something mixed up or don't understand how buffering works correctly, but it appears that, no matter what I try, graphics and text are drawn to the Front Buffer. <br><br></td></tr></table><br>
<a name="1001633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Serpent</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looking further into this, I wondered if perhaps it took a while to switch buffers.  I tried inserting long delays in various locations in the following example:<br><br><pre class=code>Graphics 800,600,32,2
SetBuffer FrontBuffer()
Text 0,0, "Front"
SetBuffer BackBuffer()
Delay 100
Text 0,20,"Back"
While Not KeyHit(1)
WaitKey
Flip
Wend
End</pre><br><br>However, the only one that had an effect was the one after changing the buffer to the backbuffer.  Then, the text 'Back' is not displayed at the start.  However, the flip command still does nothing whatsoever here.<br><br>Tweaking the length of the delay, it seems that the minimum amount of time that can be used to have the text 'Back' not drawn to the Front Buffer is around 60 milliseconds, and sometimes it works whereas other times it doesn't (indicating that changing to a different buffer is done asynchronously or something)<br><br><br>Should have put this info in my last post:<br>B3D Version:    1.103<br>OS:                   Windows Vista Home Premium (32-bit) SP2<br>Graphics Card:  nVidia GeForce 9600 GS<br>nVidia Driver Version:  195.55 <br><br></td></tr></table><br>
<a name="1001638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are at least three things to consider.<br><br>Print always draws to the front (visible) buffer. You should use Text, which is a graphics command.<br><br>Another problem is that there really is no back buffer in windowed mode. In fullscreen you have a true back buffer in addition to the front buffer. Flip just changes which of these is used for the screen display. That is impossible in windowed mode because your program is not in charge of the entire screen. Instead, Blitz tries to fake this functionality. It maintains a buffer for its own use, drawing to this rather than a real back buffer. The Flip command then copies from this buffer to the on-screen window.<br><br>Finally, keep in mind that immediately after a Flip the contents of the back buffer, which used to be the front buffer, are undefined. They may be the old front content, undisturbed. Or the memory might get cleared. Or it might be corrupted in some way, perhaps being used as some kind "scratchpad" memory. This is determined by the graphics card and driver. If you draw to both buffers and simply flip between them you get unpredictable results. What works for you may be quite different on another computer. <br><br></td></tr></table><br>
<a name="1001755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Serpent</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for this.  Everyone does work perfectly in fullscreen mode.  Can someone please remove this thread? <br><br></td></tr></table><br>
<a name="1001761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's enough information here that it is worth keeping. I have moved it from the Bug Reports. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
