<!DOCTYPE html><html lang="en" ><head ><title >Timer Memory access violation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Timer Memory access violation</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=50" >Blitz3D Bug Reports</a>/<a href="#bottom" >Timer Memory access violation</a><br><br>
<a name="1256686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >linkjay1</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been looking all over and i can't find a solution so maybe this will help:<br><br>The problem is that when i run the code i get a memory access violation<br><br>CODE:<br><br>Graphics3D 800,600,0,2<br>SetBuffer BackBuffer()<br><br>timer = (30)<br><br>font=LoadFont("Arial",15)<br>SetFont font<br><br><br>Type bullet<br>	Field x<br>	Field y<br>End Type<br><br><br>Type bomb<br>	Field x<br>	Field y<br>End Type<br><br><br>Type alien<br>	Field x<br>	Field y<br>End Type<br><br><br>While result=0<br>    result=MainMenu()<br>    ;put these options inside the menu loop, as these<br>    ;return 0 - continuing the mainmenu loop.<br>    If result=2 Then result=Options()<br>    If result=3 Then result=Credits()<br>    Wend<br>If result=1 Then StartGame()<br>;if the result isn't 1, then it must be 4 - hence QUIT<br>End<br><br>Function MainMenu()<br>    Cls<br>    Text 400,50,"Start Menu",1,1<br>    Rect 300,100,200,50,0<br>    Text 400,125,"Start Game",1,1<br>    Rect 300,200,200,50,0<br>    Text 400,225,"Options",1,1<br>    Rect 300,300,200,50,0<br>    Text 400,325,"Credits",1,1<br>    Rect 300,400,200,50,0<br>    Text 400,425,"Quit",1,1<br>    Flip<br>    result=0<br>    While result=0<br>        mx=MouseX():my=MouseY()<br>        If MouseHit(1) Then<br>            If RectsOverlap(300,100,200,50,mx,my,1,1) Then result = 1<br>            If RectsOverlap(300,200,200,50,mx,my,1,1) Then result = 2<br>            If RectsOverlap(300,300,200,50,mx,my,1,1) Then result = 3<br>            If RectsOverlap(300,400,200,40,mx,my,1,1) Then result = 4<br>            End If<br>        Wend<br>    Return result<br>    End Function<br><br>Function Options()<br>    Cls<br>    Text 400,300,"Options Screen! Any key to return to main menu",1,1<br>    Flip<br>    WaitKey()<br>    Return 0<br>    End Function<br><br>Function Credits()<br>    Cls<br>    Text 400,300,"Credits!!",1,1<br>    Text 400,330,"Intro Made by: BlackD",1,1<br>   Text 400,350,"Everything Else: linkjay1", 1, 1	<br>    Text 400,400,"Any key to return",1,1<br>    Flip<br>    WaitKey()<br>    Return 0<br>    End Function<br><br>Function StartGame()<br><br>    Cls<br><br><br>AutoMidHandle True<br>img_ship = LoadImage("ship.png")<br>img_bullet = LoadImage("bullet.png")<br>img_alien = LoadImage("alien.png")<br><br>wav_music = LoadSound("music.wav")<br>wav_explode = LoadSound("explode.wav")<br>wav_shoot = LoadSound("shoot.wav")<br>wav_shiphit = LoadSound("shiphit.wav")<br>wav_alienshoot = LoadSound("alienshoot.wav")<br><br>x = 320<br>y = 400<br><br><br>lives = 3<br><br>score = 0<br><br>aspeed = 2<br>amx = aspeed<br>chdir = False<br><br>SetBuffer BackBuffer()<br> <br><br><br>For z = 1 To 7<br>	For w = 1 To 2<br>		a.alien = New alien<br>		a\x = 100 + 50*z<br>		a\y = 150 + 50*w<br>	Next<br>Next<br><br><br><br>While Not KeyDown(1)<br><br><br>	Cls<br>	<br>	<br><br>	DrawImage img_ship,x,y<br>	<br>	If KeyDown(30) Then x = x - 3<br>	If KeyDown(32) Then x = x + 3<br><br>	If KeyHit(57) Then<br>		PlaySound(wav_shoot)<br>		b.bullet = New bullet<br>		b\x = x<br>		b\y = y - 5<br>	EndIf<br><br>	For b.bullet = Each bullet<br>		b\y = b\y - 5<br>		DrawImage img_bullet,b\x,b\y<br>		If b\y &lt; 0 Then Delete b<br>	Next<br>	<br>	If chdir = True Then<br>		amx = -amx<br>	EndIf<br>	chdir = False<br>	<br>	For a.alien = Each alien<br>		a\x = a\x + amx<br>		If a\x &gt; 620 Then chdir = True<br>		If a\x &lt; 20 Then chdir = True<br>	<br>	If Rand(500) = 25 Then<br>			PlaySound(wav_alienshoot)<br>			bombs.bomb = New bomb<br>			bombs\x = a\x<br>			bombs\y = a\y<br>		EndIf<br>		DrawImage img_alien,a\x,a\y<br>		For b.bullet = Each bullet<br>			If ImagesCollide(img_bullet,b\x,b\y,0,img_alien,a\x,a\y,0) Then<br>				PlaySound(wav_explode)<br>				Delete b<br>				Delete a<br>				score = score + 10<br>				Exit<br>			EndIf<br>		Next<br>	Next <br>	<br>	For bombs.bomb = Each bomb<br>		bombs\y = bombs\y + 4<br>		DrawImage img_bullet,bombs\x,bombs\y<br><br>		If ImagesCollide(img_bullet,bombs\x,bombs\y,0,img_ship,x,y,0) Then<br>			PlaySound(wav_shiphit)<br>			lives = lives - 1<br>			Delete bombs<br>		ElseIf bombs\y &gt; 500 Then <br>			Delete bombs<br>		EndIf<br>	<br>	Next<br>	<br>	Text 50,420,"Lives: " + lives<br>	<br>	Text 530, 420, "SCORE: " + score<br>	<br>	If score = 140 Then<br>		Text 320, 100, "YOU WIN!!!", 1, 1<br>		Flip<br>		Delay 3000<br>		End<br>	EndIf	<br>	<br>	If lives = 0 Then<br>		Text 320, 100, "GAME OVER", 1, 1<br>		Flip<br>		Delay 3000<br>		End<br>	EndIf<br>	<br>	<br>		Flip<br>		<br>		WaitTimer(timer)<br><br><br>Wend<br><br>End<br><br>    End Function <br><br></td></tr></table><br>
<a name="1256718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Timer Memory access violation <br></div><br>How to use a timer:<br><pre class=code>myTimer = CreateTimer( 4 ) ; four times per second

While Not KeyHit( 1 )
	Cls
	WaitTimer( myTimer )
	ticks = ticks + 1
	Text 60, 120, "ESCAPE quits, timer ticks = " + ticks
	Flip
Wend</pre> <br><br></td></tr></table><br>
<a name="1260133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is not a Blitz bug, just an error in your coding.<br><br>There are two main problems:<br><br>1:<br>You are declaring timer in your 'main program' scope <br><pre class=code>
timer=(30)
</pre><br>but referencing it inside the StartGame Function<br><pre class=code>
WaitTimer(timer)
</pre><br>The scope of this function assumes 'timer' to be a local variable, which by default is undeclared and therefore = 0 <br><br>Your error occurs because you try to call WaitTimer on a null timer handle.<br><br>-<br><br>2:<br>Your declaration:<br><pre class=code>
tiemr=(30)
</pre><br>Is incorrect syntax for declaring a timer handle.<br>What you are actually doing is simply defining a local integer variable called "timer" with a value of 30<br><br>_______________________________________<br><br><br>Making the following alteration will solve the problem completely:<br><br>Change<br><pre class=code>
timer = (30)
</pre><br>Into<br><pre class=code>
Global timer = CreateTimer(30)
</pre><br><br>Firstly, it now actual defines "timer" as a Timer handle with a parameter of 30 hz, rather than just a numeric variable with an arbitrary value of 30.<br>Also ensures that scope is global so 'timer' used anywhere will refer to this actual timer handle.<br><br>Read up on the differences between Handles and Variables, also how Scope affects references to these values inside functions and outside of them. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
