<!DOCTYPE html><html lang="en" ><head ><title >PlayMusic needs a FreeMusic</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >PlayMusic needs a FreeMusic</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=50" >Blitz3D Bug Reports</a>/<a href="#bottom" >PlayMusic needs a FreeMusic</a><br><br>
<a name="701565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tranz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> PlayMusic needs a FreeMusic so it doesn't leave the music in the openfile list, which seems to be limited at 512 files, or FreeSound fixing to allow it to free music as well. <br><br></td></tr></table><br>
<a name="701781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Channel=PlayMusic(...)

StopChannel(Channel)
</pre><br><br><br><br>:-) <br><br></td></tr></table><br>
<a name="701842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tranz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> StopChannel just STOPS the track, it doesn't free it.<br><br>It's still effectively an open file as far as blitz is concerned. <br><br></td></tr></table><br>
<a name="703062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> actually i think that playmusic handles its own memory management, which means we don't need to worry about it. it would be nice if it said that in the manual though. <br><br></td></tr></table><br>
<a name="703442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tranz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> While PlayMusic may handle its own Memory Management, it does not handle blitz' openfile list, to which the loaded track is added, but never removed, till the app closes, this causes blitz to stop opening any file once it hits its 512 openfiles limit. Which only has unique music added, ie if it's already on the list, it don't get added again. not sure if this unique additions applies to open/read/writefile calls as well but it does apply to tracks loaded with PlayMusic, hence my need for a FreeMusic command so I can "Play" more than the 510 track limit, limit is lower if other files are open ofc. <br><br></td></tr></table><br>
<a name="705636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> So basicly you say you cannot start more than 512 songs in one  session? Did you really try that? something like<br><br>for i=0 to 511<br> l=playmusic("test.it)<br> delay 100<br> stopchannel l<br>next<br><br>what's gonna happen, a MAV? <br><br></td></tr></table><br>
<a name="706234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tranz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, no, you misunderstand. Your example will play and stop one song over and over, which should work fine, except for 'tracker' music.<br><br>The problem is the openfile limit and no way to remove songs from the list. Music gets added to the openfile list and stays there until the app closes. <br><br></td></tr></table><br>
<a name="706353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, my mistake, if it's always the same file, then of course there's only one open file. But what I mean, if I open/play say test0.it to test512.it, will it crash? <br><br></td></tr></table><br>
<a name="706382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tranz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes it will crash, but not for the same reason, it will crash when the 1st instance tries to loop, but if you try it on 512+ mp3 files, it will not start to play any tunes after it hits the openfile limit, and crash if you try to do any new file operations (OpenFile etc), PlayMusic does not check to see if it's actually loaded anything. <br><br></td></tr></table><br>
<a name="716831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Litobyte</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> weirdo, it seems yes a fileallocation problem, because playmusic is streaming, and the file is not put in memory.<br><br>This tells me that FreeMusic should be: FreeFileAllocation<br><br>I never tried that much (512! is much!).<br><br>I guess your problem is that you want to code a mp3 player with blitz3d ? <br><br></td></tr></table><br>
<a name="725749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fernhout</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am not sure but is it not possible if you start the music and later stop the music and then use <br><pre class=code>
freebank name_of_the_music
</pre>because its the same pointer in memory as create memory. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
