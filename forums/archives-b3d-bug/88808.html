<!DOCTYPE html><html lang="en" ><head ><title >MAV caused by "Line" ,,,?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MAV caused by "Line" ,,,?</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=50" >Blitz3D Bug Reports</a>/<a href="#bottom" >MAV caused by "Line" ,,,?</a><br><br>
<a name="1008329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> (oops, ignore the rogue commas in the topic title!)<br><br>I've dusted off an old B3D project, and been working on it on my laptop. Then, I came upstairs to this computer, and suddenly it's all MAVs.<br><br>Oddly enough, this line is causing the problem, according to the debugger:<br><br><pre class=code>Line ((Float(sofar#/max#)*Float(xres%-4))-xx)+1,0,((Float(sofar#/max#)*Float(xres%-4))-xx)+1,7</pre><br><br>Okay, maybe I just made a dumb error in all that, so I changed the line to:<br><br><pre class=code>Line 0,1,2,3</pre><br><br>And it still MAVs on it.<br><br>So, I made a test program that set the 3d graphics mode, and just used the simple Line command above. That worked fine.<br><br>Ordinarily, I'd assume I did something wrong, but since the program ran okay on my laptop, it looks like Blitz is having a problem with my computer. Clearly, there's something in my program which is triggering it, because the command on it's own works.<br><br>Even more confusingly, a Rect command a couple of lines above works perfectly fine. If I remove the Line command altogether, the program carries on what it's doing, (which is transitioning from the menu of my game into the game itself... the "Line" is part of the progress bar), it stumbles with another MAV on a Renderworld this time.<br><br>And yet, the menu uses 3d elements with Renderworld just fine.<br><br>The computer with the problem is running Vista 32bit. The graphics card is an nVidia 8600 GT.<br><br>I had fastext installed, but this game doesn't use it, so none of the fastext stuff should be involved. I removed the decls file just to be sure.<br><br>I know Renderworld can stumble on very large vert counts, but if my rubbish laptop can manage to draw things okay, this machine should be able to as well. And the vert count should be low, same as it was when I wrote this thing in 2004.<br><br>I have multiple monitors, but have done for years, never been a problem with Blitz before. I disabled monitor 2, and the problem still occurred.<br><br>I'm sorta stumped on this one. Has anyone come across anything like this?<br><br>If I can reproduce this in a simple program, I'll post one. <br><br></td></tr></table><br>
<a name="1008335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> SOLVED IT. Not sure if this is stricly a bug, I'll leave that to BRL to decide:<br><br>There was a copyrect in there, I was copying the front buffer to the back buffer, and my dumb younger self was copying an area 1 pixel larger in width and height than the screen (ie 0,0,xres%,yres% which is 0,0,800,600 in this case). While that apparently has been okay all these years, it seems to now have some kind of knock-on effect, and by the time the Line command came up, it triggered the MAV. <br><br></td></tr></table><br>
<a name="1008356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The various buffers ( front, back, image etc. ) may have the amount allocated memory that you expect. But they may have more, and this extra amount depend on the graphics card and/or driver.<br><br>I recently checked and found that my current card always pads the width to a multiple of 16. I've seen other numbers in the past on different hardware.<br><br>Anyway, I guess in one case your error is harmless due to padding. But in the other you are trying to access unallocated memory. <br><br></td></tr></table><br>
<a name="1008384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That sounds right. Still, seems like the error could have been a bit more specific, rather than subsequent calls crashing it. Then again, I guess it's like trying to access a missing texture or entity: you don't know it's missing until Blitz crashes telling you it isn't there. The difference is, the error gives you a clue in those cases. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
