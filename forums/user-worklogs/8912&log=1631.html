<!DOCTYPE >
<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252"><title>The Official Blitz Website</title><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"></head><body> 
 
<table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tbody><tr><td>&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="../../news.html" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="../../index.html" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="../../codearcs.html" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="../../user-worklogs.html" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="../../gallery.html" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="../../sdkspecs.html" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="../../search.html" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></tbody></table></td><td class="menubarright"></td></tr></tbody></table><div class="main"><h1>Worklog for DavidSimon</h1><h1>A.B.E ( Alpha.Beta.Engine )</h1><a href="../../user-worklogs.html">Return to Worklogs</a><br><br><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td class="posthead"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td>Day One</td><td align="right"><font class="tiny">(Posted 2008-09-16)</font></td></tr></tbody></table></td></tr><tr><td class="posttext">
 With news that BlitzMax finally has the most wonderful of wonderful 
things, Threading support, I begun work on my first BlitzMax Project in a
 while(I had moved onto to C#/XNA years ago, dabbling with max here and 
there)<br><br>That project is, (Drumroll) A.B.E - My attempt at a multi-threaded, dare I say it, advanced, software 3D Engine.<br><br>What is a software 3D Engine?<br><br>Answer:It's
 like a hardware 3D Engine, only it performs all rendering calculations 
on the cpu, meaning even it's most beautiful of beautiful fx, will work 
on even the lowest of low gpus.<br><br><br>Why for blitz? Why now?<br><br>Why not?<br><br>---<br><br>Just
 to give a taste of it, here is a code excerpt from today's coding. it's
 very early in so i'm not giving anything away. anyone could do this in a
 couple of hours, but you can at least see where it is heading. not all 
code is included. <br><br>[code]<br><br>[/code'<br>'--[ Alpha.Beta.Engine ]--(or ABE for short.)<br>'<br>'(c)TechniColor DreamCode 2008<br>'<br>'<br>'<br><br>SuperStrict <br><br>Framework Brl.glmax2d<br>Import brl.max2d<br>Import brl.polledinput<br>Import pub.freejoy<br>Import brl.random<br>Import brl.audio<br>Import brl.glmax2d<br>Import brl.retro<br>Import pub.opengl<br>Import pub.threads<br>Import "aMaths.bmx"<br>Include "aThreading.bmx"<br><br><br><br><br>Type Vertex<br>	<br>	Field Pos:Vector3<br>	Field Normal:Vector3<br>	Field Tangent:Vector3<br>	Field BiNormal:Vector3<br>	Field TexCoord0:Vector3<br>	Field TexCoord1:Vector3<br>	Field Color:Vector4	<br>	Function CreateCoord:Vertex(x:Float,y:Float,z:Float,u:Float,v:Float,w:Float = 0)<br>	<br>		Local r:Vertex = New Vertex<br>			<br>			r.Pos = Vector3.Create(x,y,z)<br>			r.TexCoord0 = Vector3.Create(u,v,w)<br>			r.TexCoord1 = Vector3.Zero<br>			r.BiNormal = Vector3.Zero<br>			r.Tangent = Vector3.Zero<br>			r.Normal = Vector3.Zero<br>			r.Color = Vector4.One<br>			<br>		Return r<br>		<br>	<br>	End Function<br>	<br>		<br>End Type<br><br><br>Type Triangle<br>	<br>	Field v0:Int,v1:Int,v2:Int<br>	<br>	Function Create:Triangle(v0%,v1%,v2%)<br>	<br>		Local r:Triangle = New Triangle<br>		<br>		r.v0 = v0;r.v1 = v1;r.v2 = v2<br>		<br>		Return r<br>	<br>	End Function<br>		<br>End Type<br><br><br>Type ModelSurface<br><br>	Field mVertices:TList = CreateList()<br>	Field mIndices:TList = CreateList()<br>	Field mLock:AMutex = New AMutex<br><br>	Method AddVertex:Int(v:Vertex)<br>	<br>		mVertices.AddLast(v)<br>		Return mVertices.Count()-1<br>	<br>	End Method<br>	<br>	Method AddTriangle(t:Triangle)<br>	<br>		mIndices.addLast( t )<br>		<br>	<br>	End Method<br>	<br>	<br><br>End Type<br><br>Type Model Extends Entity<br><br>	Field mSurfaces:TList = CreateList()<br>	<br>	<br><br>End Type<br><br>Type Entity<br><br><br><br>End Type<br><br><br>Type ModelFactory<br><br>	Function Quad:Model(w:Float,h:Float)<br>	<br>		Local m:Model = New Model<br>		Local s:ModelSurface = New ModelSurface<br>		m.mSurfaces.AddLast( s )<br>	<br>		Local v0:Vertex,v1:Vertex,v2:Vertex,v3:Vertex<br>		<br>		v0 = Vertex.CreateCoord( -w,-h,0,0,0)<br>		v1 = Vertex.CreateCoord( w,-h,0,1,0)<br>		v2 = Vertex.CreateCoord( w,h,0,1,1)<br>		v3 = Vertex.CreateCoord( -w,h,0,0,1 )<br>		<br>		s.AddVertex( v0 )<br>		s.AddVertex( v1 )<br>		s.AddVertex( v2 )<br>		s.AddVertex( v3 )<br>		<br>		s.AddTriangle( Triangle.Create(0,1,2) )<br>		s.AddTriangle( Triangle.Create(2,3,0) )<br>		<br>		Return m<br>		<br>	End Function<br>	<br><br>	<br>End Type<br><br>Type Viewport<br><br>	Field X:Float<br>	Field Y:Float<br>	Field Width:Float<br>	Field Height:Float<br>	Field Near:Float,Far:Float<br>	Field Aspect#<br>	<br>	Function Create:Viewport(x:Float,y:Float,w:Float,h:Float,far:Float = 1000)<br>		<br>		Local r:Viewport = New Viewport<br>		r.Init(x,y,w,h,1,far)<br>		Return r<br>	<br>	End Function<br>	<br>	Method Init(xv#,yv#,wv#,hv#,nearv#,farv#)<br>	<br>		x = xv;y=yv<br><br>		width=wv;height=hv;<br>		aspect = width/height<br>		near = nearv;far = farv<br>	<br>	End Method<br>	<br>	<br>	Field ProjX#<br>	Field ProjY#<br>		<br>	Method Project(xv#,yv#,zv#)<br>	<br>		ProjX = xv*Far/zv;<br>		ProjY = y*Far/zv;<br><br>		ProjX = ProjX + width/2.0;<br>		ProjY = ProjY*aspect + height/2.0;<br>	<br>	<br>	End Method<br>	<br>	<br><br>End Type<br><br>Type DataBufferObject<br><br>	Field mBytes:Byte Ptr<br>	Field mSize:Int <br>	<br>	Method Delete()<br>	<br>		MemFree mbytes	<br>		<br>	End Method<br>	<br>	<br>	Method CreateBuffer(bytes:Int)<br>	<br>		mBytes = MemAlloc(bytes)<br>		mSize = bytes<br>		<br>	End Method<br>	<br>	Method FillBuffer( dat:Byte Ptr,size:Int )<br>	<br>		Local index:Int = 0<br>	<br>		Local findex:Int = 0<br>	<br>		While index&lt;mSize<br>		<br>			mBytes[index]=dat[findex]<br>			<br>			findex:+1<br>			<br>			If findex=size<br>			<br>				findex=0<br>			<br>			EndIf<br>			<br>			index:+1<br><br>		<br>		Wend<br>	<br>	End Method<br>	<br><br>End Type<br>Type Color<br><br>	Field r%,g%,b%,a%<br>	Function Create:Color(r%,g%,b%,a%)<br>	<br>		Local ret:Color = New color<br>		ret.r = r<br>		ret.g = g<br>		ret.b = b<br>		ret.a = a<br>		Return ret		<br>		<br>	End Function<br>	<br>	<br>End Type<br><br><br><br>Type DepthBuffer Extends DataBufferObject<br><br>	Function Create:DepthBuffer(w%,h%)<br>	<br>		Local r:DepthBuffer = New DepthBuffer<br>		<br>		r.CreateBuffer(w*h)<br>		<br>		Return r<br>	<br>	End Function<br>	<br><br>End Type<br><br>Type GraphicsBuffer Extends DataBufferObject<br><br>	Field mHasAlpha:Int = False<br><br>	Field mDepthMap:DepthBuffer = Null<br><br>	Function Create:GraphicsBuffer(w%,h%,alpha:Int=True,isPrimary:Int=False)<br>	<br>		Local r:GraphicsBuffer = New GraphicsBuffer<br>		<br>		If alpha<br>			<br>			r.CreateBuffer(w*h*4)<br>		<br>			r.mHasAlpha = True<br>			<br>		Else<br>			<br>			r.createBuffer(w*h*3)<br>		<br>		EndIf<br>	<br>		If isPrimary<br>		<br>			r.mDepthMap = DepthBuffer.Create(w,h)<br>		<br>		End If<br>		<br>		Return r	<br>		<br>	End Function<br>	<br>	Method Clear(ClrCol:Color,clearDepth:Int = True)<br>	<br>		Local buf:Byte Ptr = MemAlloc(4)<br>		<br>		buf[0] = clrcol.r<br>		buf[1] = clrcol.g<br>		buf[2] = clrcol.b<br>		buf[3] = clrcol.a<br>	<br>		FillBuffer( buf,4 )<br><br>	<br>	End Method<br>	<br><br>End Type<br><br><br>Type GraphicDevice<br><br>	Function Create:GraphicDevice(w:Int,h:Int,full:Int=False)<br>	<br>		Local r:GraphicDevice = New Graphicdevice<br>		<br>		SetGraphicsDriver GLMax2DDriver()<br>		Graphics(w,h,0)		<br>		<br>		Return r<br>	<br>	End Function<br>	<br>	<br>	<br><br>End Type<br><br><br><br>Local device:GraphicDevice = GraphicDevice.Create(512,512,False)<br><br><br>While Not KeyDown(Key_Escape)<br><br>Wend <br><br>  </td></tr></tbody></table><br></div><table width="100%"><tbody><tr><td></td></tr></tbody></table></body></html>