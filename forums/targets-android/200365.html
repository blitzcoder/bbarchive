<!DOCTYPE html><html lang="en" ><head ><title >Audio Problem (OnCreate)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Audio Problem (OnCreate)</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=502" >Android</a>/<a href="#bottom" >Audio Problem (OnCreate)</a><br><br>
<a name="2002593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeaBoy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm having problems with PlaySound, I have put the function within the OnCreate method to loop, but sadly it doesn't play, anyone else having problems? <br><br></td></tr></table><br>
<a name="2002599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What format is your sound in?<br><br>Check the Audiotest sample:<br><br><pre class=code>
#if TARGET="flash"
		shoot=LoadSound( "shoot.mp3" )
		tinkle=LoadSound( "tinkle.mp3" )
#else If TARGET="android"
		shoot=LoadSound( "shoot.ogg" )
		tinkle=LoadSound( "tinkle.ogg" )
#else
		shoot=LoadSound( "shoot.wav" )
		tinkle=LoadSound( "tinkle.wav" )
#endif
</pre><br><br>Notice the pre-complier for Android. <br><br></td></tr></table><br>
<a name="2002609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeaBoy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The format is ogg, although the app works fine in HTML5, but sadly the sound doesnt play on Android.<br><br>Audiotest sample, works fine on Android.<br><br>very strange! <br><br></td></tr></table><br>
<a name="2002637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Virtech</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im able to play only short ogg files on android. Longer samples just mute. <br><br></td></tr></table><br>
<a name="2002650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wagenheimer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have problems with audio playing on the OnCreate event also, but in the Iphone!<br><br>I have added a timer, and played the audio when the timer=1 and it worked! So it's a problem on the Android/IphonePort. Html5 works fine! <br><br></td></tr></table><br>
<a name="2002659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I can reproduce this on android but not iOS.<br><br>The problem seems to be that android loads sounds asynchronously (on another thread - completely undocced?), and if a sound hasn't fully loaded it will fail to play. Therefore LoadSound followed by PlaySound isn't giving the sound a chance to load.<br><br>I've been able to wangle a solution with a nasty 'play/sleep/repeat' loop if play fails, but it ain't pretty and I think in general it's best to treat sounds a bit like images - you can only safely play them in the next  OnUpdate or OnRender. Mojo only calls OnUpdate and OnRender when everything is fully loaded, so doing it this way means you don't have to worry about whether a sound has finished loading yet, regardless of target platform.<br><br>I also plan to add an IsLoading method to Image/Sound, which will always return true in OnUpdate/OnRender, but will return false in OnLoading if the resource hasn't loaded yet. <br><br></td></tr></table><br>
<a name="2002721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DGuy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad someone else it tackling all these Android quirks! ... ;) <br><br></td></tr></table><br>
<a name="2003407"></a>

<a name="2003408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, so is the solution to this to basically make sure there is quite a delay between loading a sound and playing it?<br><br>Edit : Actually I am really struggling to play long sound files even with a 60 frame delay between loading and playing. This even happens in an Android app that does absolutely nothing else. <br><br></td></tr></table><br>
<a name="2003406"></a>

<a name="2003412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Soap</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the solution was to create a bool field for the the sound you want to play. Set it to false in OnCreate() and then in OnUpdate() play the sound if it's false, and then set it to true. Because OnUpdate() only gets called after loading is complete. <br><br></td></tr></table><br>
<a name="2003415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Soap, yeah that is basically what I am doing (but with a counter that kicks in at 0 and starts at 60 <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
