<!DOCTYPE html><html lang="en" ><head ><title >Change canvas size</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Change canvas size</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=502" >Android</a>/<a href="#bottom" >Change canvas size</a><br><br>
<a name="2004130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Virtech</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> To change the size of the display...<br><br>In .build\android\templates\res\layout\main.xml, change this<br><pre class=code>
android:layout_width="fill_parent"
android:layout_height="fill_parent"
</pre><br><br>Into this (set your size+px)<br><pre class=code>
android:layout_width="320px"
android:layout_height="240px" 
</pre><br><br>Then save. (Delete any .bak files, as this might cause a compile error) <br><br></td></tr></table><br>
<a name="2004124"></a>

<a name="2004262"></a>

<a name="2004263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The whole point of using fill_parent is so that the canvas matches your screen.  As soon as you put a hardcoded size on the canvas, you're developing for a specific group of handsets and excluding users with different screen sizes.<br><br>If you're going to be developing for a platform that has multiple screen sizes, you should be running in native res and scale your UI to match. <br><br></td></tr></table><br>
<a name="2004270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Virtech</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I realize this. But at the same time I would also prefer to use the native resolution of the device. My phone is capable of an native resolution of 800x480. But monkey initializes automatically a canvas resolution of only 533x320. <br><br>I have no problem with "fill_parent", but imo there should be an option to set the canvas size equal to the native resolution the device offers.<br><br>The reason I want to use native resolution is the clear and crisp graphics/text rendering.<br><br>I realize this is not what my code offers above. It acts more like a viewport size. So if someone knows how to set the native resolution, please share! :) <br><br></td></tr></table><br>
<a name="2004272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Supertino</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Add this to your manifest;<br><br><pre class=code>
&lt;supports-screens android:resizeable="false"
                  android:smallScreens="true"
                  android:normalScreens="true"
                  android:largeScreens="true"
                  android:anyDensity="true" /&gt;	
</pre> <br><br></td></tr></table><br>
<a name="2004283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Virtech</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah thanks! But it didnt do much.<br>Care to give a brief description on what that snippet is supposed to do? <br><br></td></tr></table><br>
<a name="2004395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Supertino</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hum works for me and my 480x800 HTC Desire.<br><br>Here is my whole manifest;<br><br>And just to be sure make sure your editing the template/manifest.xml<br><br><pre class=code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
	package="${APP_PACKAGE}"
	android:versionCode="1"
	android:versionName="1.0"&gt;
	&lt;supports-screens android:resizeable="false"
                  android:smallScreens="true"
                  android:normalScreens="true"
                  android:largeScreens="true"
                  android:anyDensity="true" /&gt;	
	&lt;application android:label="${APP_LABEL}" android:icon="@drawable/icon"&gt;
		&lt;activity 
			android:name="MonkeyGame" 
			android:label="${APP_LABEL}"
			android:screenOrientation="${SCREEN_ORIENTATION}"
			android:configChanges="keyboardHidden|orientation"
			android:theme=\"@...;
			&lt;intent-filter&gt;
				&lt;action android:name="android.intent.action.MAIN" /&gt;
				&lt;category android:name="android.intent.category.LAUNCHER" /&gt;
			&lt;/intent-filter&gt;
		&lt;/activity&gt;
	&lt;/application&gt;
&lt;/manifest&gt; 
</pre> <br><br></td></tr></table><br>
<a name="2004332"></a>

<a name="2004334"></a>

<a name="2004335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Virtech</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks supertino! It works! :) <br><br></td></tr></table><br>
<a name="2004392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Loofadawg</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hope I am not being daft, but where is the template/manifest.xml located?<br>Under my android build (using the clock demo by difference)I see<br><br>MonkeyPro/bananas/difference/clock/clockandy.build/android/templates/AndroidManifest.xml<br><br>and alternatively I see<br><br>MonkeyPro/targets/android/templates/AndroidManifest.xml<br><br><br>Search as I may, no template/manifest.xml <br><br>I have successfully compiled and put the clock demo on my Captivate.  The screen display is sized wrong compared to the HTML version.  Hoping  Supertino's manifest would fix that, but I am lost at this point.  My first hurdle. <br><br></td></tr></table><br>
<a name="2004396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Supertino</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Loofadawg it is found in the first place you mention. For example.<br><br><pre class=code>
Import mojo.app
Import mojo.graphics

Function Main()
       New HelloWorld
End

Class HelloWorld Extends App

       Method OnRender()

              Cls

              DrawText "Hello World",10,10

       End Method
End
</pre><br><br>Save the above source code in a folder called "hello" and call the file "helloworld.monkey".<br><br>Run it as HTML5 (to check it works).<br><br>Now run it as Android.<br><br>You'll now see additional folders in your /hello folder, go to the /android folder, There are two files that can be edited;<br>   /templates/AndroidManifest.xml<br>   /CONFIG.TXT<br><br>Hope this helps. <br><br></td></tr></table><br>
<a name="2004399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Loofadawg</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you Supertino for helping.  I did what you said and I can clearly see which files to edit.  <br><br>Hurdle #2<br><br>I went back to the clock demo and started a fresh build for Android and named it clock2.monkey.<br><br>Tested it on my device and it runs fine except that the app's  shows only the left hand portion of the clock and in landscape mode shows the top portion.<br><br>I replaced the AndroidManifest.xml with yours and now it won't compile.  <br><br><pre class=code>
Translating clock2
C:/Users/Frank/Desktop/Monkey/MonkeyPro/bin/trans_winnt -config=release -target=android C:/Users/Frank/Desktop/Monkey/MonkeyPro/bananas/difference/clock/clock2.monkey

TRANS monkey compiler V1.04
Parsing...
Semanting...
Translating...
Building...
Buildfile: C:\Users\Frank\Desktop\Monkey\MonkeyPro\bananas\difference\clock\clock2.build\android\build.xml
    [setup] Android SDK Tools Revision 10
    [setup] Project Target: Android 2.1-update1
    [setup] API level: 7
    [setup] 
    [setup] ------------------
    [setup] Resolving library dependencies:
    [setup] No library dependencies.
    [setup] 
    [setup] ------------------
    [setup] 
    [setup] [Fatal Error] :17:18: Open quote is expected for attribute "{1}" associated with an  element type  "android:theme".
BUILD FAILED
C:\Users\Frank\Desktop\Monkey\MonkeyPro\bananas\difference\clock\clock2.build\android\build.xml:65: org.xml.sax.SAXParseException: Open quote is expected for attribute "{1}" associated with an  element type  "android:theme".
	at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:249)
	at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
	at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(XPathImpl.java:468)
	at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(XPathImpl.java:515)
	at com.android.ant.SetupTask.checkManifest(SetupTask.java:307)
	at com.android.ant.SetupTask.execute(SetupTask.java:193)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.Target.execute(Target.java:390)
	at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:180)
	at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.java:82)
	at org.apache.tools.ant.Main.runBuild(Main.java:793)
	at org.apache.tools.ant.Main.startAnt(Main.java:217)
	at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
	at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
--------------- linked to ------------------
javax.xml.xpath.XPathExpressionException
	at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(XPathImpl.java:473)
	at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(XPathImpl.java:515)
	at com.android.ant.SetupTask.checkManifest(SetupTask.java:307)
	at com.android.ant.SetupTask.execute(SetupTask.java:193)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.Target.execute(Target.java:390)
	at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:180)
	at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.java:82)
	at org.apache.tools.ant.Main.runBuild(Main.java:793)
	at org.apache.tools.ant.Main.startAnt(Main.java:217)
	at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
	at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: org.xml.sax.SAXParseException: Open quote is expected for attribute "{1}" associated with an  element type  "android:theme".
	at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:249)
	at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
	at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(XPathImpl.java:468)
	... 17 more
Total time: 0 seconds
* server not running *
Android build failed.

Process Complete
</pre> <br><br></td></tr></table><br>
<a name="2004400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Loofadawg</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I deleted the / after android:theme and tried to compile again and i get this:<br><br><pre class=code>
 [setup] [Fatal Error] :2:6: The processing instruction target matching "[xX][mM][lL]" is not allowed.
</pre><br><br><br>Care to do a build of the clock demo for android, zip it in an archive build folder et al?  I am stumped.  Blitz and Blitz3D I can do, but this? I feel green again. <br><br></td></tr></table><br>
<a name="2004403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Loofadawg</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay,  I think I see the problem... it is with all the sections that include ${blah-blah}.<br><br>I need a tutorial on this.  :^P <br><br></td></tr></table><br>
<a name="2004405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Loofadawg</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Success!!<br><br>So, my new manifest looks like this:<br><br><pre class=code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
	package="com.monkey"
	android:versionCode="1"
	android:versionName="1.0"&gt;
	&lt;supports-screens android:resizeable="false"
                  android:smallScreens="true"
                  android:normalScreens="true"
                  android:largeScreens="true"
                  android:anyDensity="true" /&gt;	
	&lt;application android:label="Monkey Game" android:icon="@drawable/icon"&gt;
		&lt;activity 
			android:name="MonkeyGame" 
			android:label="Monkey Game"
			android:screenOrientation="landscape"
			android:configChanges="keyboardHidden|orientation"
			android:theme=\"@...;;
			&lt;intent-filter&gt;
				&lt;action android:name="android.intent.action.MAIN" /&gt;
				&lt;category android:name="android.intent.category.LAUNCHER" /&gt;
			&lt;/intent-filter&gt;
		&lt;/activity&gt;
	&lt;/application&gt;
&lt;/manifest&gt; 
</pre><br><br>The clock fits the screen...  I feel so empowered now.  <br><br>Big thanks.  Now to try a little coding to get my feet wet.  So excited!! <br><br></td></tr></table><br>
<a name="2005206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> How can I stretch the content to the full screen? I develop for a resolution of 480x320 (standard iPhone 3 resolution 3:2) which doesn't fit completely into my 800x480 desire screen size (which is a strange 5:3 format). There is a black gap on the right side in landscape mode. I guess it's because the screen is resized proportional. That's ok but is there a way to center this at least? <br><br></td></tr></table><br>
<a name="2005403"></a>

<a name="2005404"></a>

<a name="2005405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>How can I stretch the content to the full screen? I develop for a resolution of 480x320 (standard iPhone 3 resolution 3:2) which doesn't fit completely into my 800x480 desire screen size (which is a strange 5:3 format). There is a black gap on the right side in landscape mode. I guess it's because the screen is resized proportional. That's ok but is there a way to center this at least?<br> <br></div><br><br>Yeah, be big, scale down.... I've learnt iOS iOS3 sizes are pretty poor, go for their big 4.x res and work down over, this should ensure you can fit your guff on Android!<br><br>Or, try changing this: android:anyDensity="true"<br><br>to android:anyDensity="false"<br><br>Might work, dunno?<br><br>Dabz <br><br></td></tr></table><br>
<a name="2005470"></a>

<a name="2005471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Dabz, unfortunately that didn't change anything.<br><br><img src="http://www.machgames.de/dl/wh/screenshots/wh_104e_desirehd.jpg"><br><br>I'd be glad to have it centered instead of having that black border on the right site. Is that possible?<br><br>edit: Here a screeny from a Wildfire:<br><br><img src="http://www.machgames.de/dl/wh/screenshots/wh_104e_wildfire.jpg"><br><br>Same problem but now the menu on the right site is missing.<br><br>Uh oh these aspect ratios are driving me crazy!<br><br>So my Desire HD has 800x480 which is a ratio of 1.667<br>The Wildfire has 320x240 which is a ratio of 1.333<br><br>And then we have the iPhone which has 480x320 (or double) which is a ratio of 1.500 <br><br></td></tr></table><br>
<a name="2005472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wouldnt worry too much about the Wildfire and phones with the 320x240 resolution. <br><br></td></tr></table><br>
<a name="2005473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're probably right, yes. I even didn't know that there are Androids with 320x240 resolution until I saw the one my colleague has.<br><br>But after all it would be nice to have it at least centered if possible. <br><br></td></tr></table><br>
<a name="2005474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> How are you scaling the display?<br><br>Im doing the following:<br><br><pre class=code>
Const WIDTH# = 480
Const HEIGHT# = 320
Global SCALE_RATIO_X#
Global SCALE_RATIO_Y#
...

Method OnCreate()
  SCALE_RATIO_X = DeviceWidth()/WIDTH
  SCALE_RATIO_Y = DeviceHeight()/HEIGHT
End

Method OnRender()
  PushMatrix
    Scale SCALE_RATIO_X, SCALE_RATIO_Y
  PopMatrix
End
</pre> <br><br></td></tr></table><br>
<a name="2005475"></a>

<a name="2005476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah thanks for that. At the moment I don't scale anything just let the device doing this. Will try it!<br><br>edit: Yay! That works. Thanks! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
