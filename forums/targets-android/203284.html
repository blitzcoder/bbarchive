<!DOCTYPE html><html lang="en" ><head ><title >Virtual keyboard problem - Spanish characters</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Virtual keyboard problem - Spanish characters</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=502" >Android</a>/<a href="#bottom" >Virtual keyboard problem - Spanish characters</a><br><br>
<a name="2034364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amnesia</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The current implementation in mojo of the virtual keyboard has a problem   when dealing with spanish and other non-english characters. In order to write one of this characters (á, é, ö, ñ, for instance) you need to long press the corresponding key. This wasn't working and i started looking for the problem. Digging in mojo.android.java i found SetKeyboardEnabled method. This is ok, and i didn't found any issues related to my original problem. The problem is in the method BeginUpdate:<br><pre class=code>
void BeginUpdate(){
	//
	//Ok, this isn't very polite - if keyboard enabled, we just thrash showSoftInput.
	//
	//But showSoftInput doesn't seem to be too reliable - esp. after onResume - and I haven't found a way to
	//determine if keyboard is showing, so what can yer do...
	//
	if( keyboardEnabled ){
		InputMethodManager mgr=(InputMethodManager)MonkeyGame.activity.getSystemService( Context.INPUT_METHOD_SERVICE );
		mgr.showSoftInput( MonkeyGame.view,0 );//InputMethodManager.SHOW_IMPLICIT );
	}
}
</pre><br>Basically what this does, is to show the keyboard on every update. This is the problem, calling this method on every frame, makes it impossible to long press any key. As a test i commented every line in this method and it worked. The problem, and the original reason that this hack existed, is that when you suspend the app while showing the virtual keyboard, when you resume the app the keyboard remains hidden. So i tried different solutions to address this problem. I tried calling EnableKeyboard in the OnResume method and then i tried calling it on the first frame after resuming, but none of these methods worked. For an extrange reason, showSoftInput didn't worked when resuming the app (i debugged it to verify that showSoftInput was called)<br>What i finnally did, and what i think is the simplest solution that will work on most of the cases, is just to leave it hidden. In my case, i have a form and the keyboard pops up when the user press an input box. If the app is suspended, i just cancel the current input state and when the app resume i just show the form, leaving it to the user to press the input box to show the keyboard. In the end, worst case scenario, he will lose what he wrote in one input box, not too bad, if the alternative is not being able to write año, or mötorhead :P<br>In any case, i think the BeginUpdate method should not call showSoftInput in every frame, so it'd be nice if this feature is added in the next update, maybe as an optional parameter to the EnableKeyboard method.<br>If anyone has found an alternative solution to this problem please share! :)<br><br>www.AmnesiaGames.cl <br><br></td></tr></table><br>
<a name="2038453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have the same problem with german umlauts ÄÖÜ. But I do not understand how to use this solution. I'm not firm with Java.<br><br>I found the code above in my build folder in .... <br>"C:\Monkey\MyGame\MyGame.build\android\src\com\midimaster\vote"<br><br>..but now how to continue? <br><br>Could somebody please describe me, how to change Java source codes, so that I can use them as default for the future and not to loose with the next monkey update?<br><br>Perhaps the support of the whole keyboard (with special characters) is so important, that we should offer it as a regular monkey feature?<br><br>Is there any (beginner) tutorial about combining java (as extern) and monkey code? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
