<!DOCTYPE html><html lang="en" ><head ><title >Unable to compile for Android with Yosemite</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Unable to compile for Android with Yosemite</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=502" >Android</a>/<a href="#bottom" >Unable to compile for Android with Yosemite</a><br><br>
<a name="2101553"></a>

<a name="2101554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm pretty new to Mac OS, and it seems I have joined the Mac world at a weird time as Yosemite has a lot of issues with paths and such.<br>But I've managed to get most things working, except for Android building with Monkey!<br>No matter what I install or how much I add to PATH, I just can't get any Android target working.<br>I've even tried Sub_Zero's <a href="http://www.monkey-x.com/Community/posts.php?topic=8519&amp;page=first" target="_blank">Fully automatic target installer</a> with no luck.<br><br>I'm on Monkey X Pro v83c<br><br>Here's my config.macos.txt:<pre class=code>
'--------------------
'Monkey modules path
MODPATH="${MONKEYDIR}/modules;${MONKEYDIR}/modules_ext"
'--------------------

'--------------------
'HTML player path.
HTML_PLAYER=open -n "${MONKEYDIR}/bin/mserver_macos.app" --args
'--------------------

'--------------------
'Ant build tool path
ANT_PATH=“/opt/local/share/java/apache-ant“
'--------------------

'--------------------
'Flex SDK and flash player path.
'
'Must be set for FLASH target support.
'
FLEX_PATH="${HOME}/flex_sdk_4.9.1"
FLEX_PATH="${HOME}/flex_sdk_4.9"
FLEX_PATH="${HOME}/flex_sdk_4.6"
'
'for opening .swf files...monkey will use HTML_PLAYER if this is not set.
'FLASH_PLAYER="...?..."
'--------------------

'--------------------
'Android SDK and tool paths.
ANDROID_PATH=“/opt/local/share/java/android-sdk-macosx"
'--------------------

'--------------------
'Android NDK
ANDROID_NDK_PATH=“/opt/local/share/java/android-ndk-macosx“
'--------------------</pre><br><br>Here's my PATH:<pre class=code>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Volumes/Stuff/Applications/BlitzMax/bin:/opt/local/share/java/apache-ant/bin:/opt/local/share/java/apache-ant:/opt/local/share/java/android-sdk-macosx:/opt/local/share/java/android-sdk-macosx/platform-tools:/Volumes/Stuff/Applications/Monkey/bin</pre><br><br>Here's what happens when I type "ant" in the Terminal:<pre class=code>Hezkore$ ant
Buildfile: build.xml does not exist!
Build failed
</pre><br><br>And here's what happens when I type "adb version" in the Terminal:<pre class=code>Hezkore$ adb version
Android Debug Bridge version 1.0.32</pre><br><br>Everything seems to be in order?<br>Yet TED doesn't show Android as a target. <br><br></td></tr></table><br>
<a name="2101552"></a>

<a name="2101551"></a>

<a name="2101720"></a>

<a name="2101721"></a>

<a name="2101722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have to set up Monkey on three laptops, setup would be greatly simplified if wildcard characters where used in the config file because the version numbers keep updating.<br><br>No doubt all the version numbers are different to the ones you installed, unfortunately the folder path contains a version number so its not a static path, each update changes the path. <br><br></td></tr></table><br>
<a name="2101729"></a>

<a name="2101730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> you have to use the cd command to get to the right folder<br>it says build.xml doesnt exist in the current directory (cd)<br><br>so you would do something like this<br><br>cd /monkeygames/mygame/mygame.build/<br>ant<br><br><br>im using linux which uses the same command line commands<br>I usually navigate to the right folder using the gui and then press a button to bring up a terminal which has its current directory in that folder <br><br></td></tr></table><br>
<a name="2101731"></a>

<a name="2101732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well the path isn't really an issue.<br>I was just typing "ant" to show that ant was installed and had its system PATH correctly set.<br>TED would take care of the actual paths, but Android doesn't even show up in TED. <br><br></td></tr></table><br>
<a name="2101744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh ok sorry i misunderstood <br><br></td></tr></table><br>
<a name="2101805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Better late than never.<br>To actually get ant to work do this<br>Open a terminal<br>Run<br>nano .profile<br>pasted the code below, but change the path to the location of where ANT is installed<br><pre class=code>export ANT_HOME="$HOME/sdks/apache-ant-1.9.4"
export PATH="$ANT_HOME:$PATH"</pre><br>to save use Ctr+O, press Enter<br>to exit nano Ctrl+X<br>log out and log back in.<br>The snippet does two things<br>Sets the ANT_HOME and adds it to the system path system variable. It also makes them persistent for the current user.<br>If you need to do it on a system wide bias, I would suggest that you look up on how to add paths and system variable to make OS X. <br><br></td></tr></table><br>
<a name="2101807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @dawlane I have set ANT_HOME already.<br><pre class=code>Hezkore$ echo $ANT_HOME
/opt/local/share/java/apache-ant</pre><br>Ant is working and is correctly installed.<br><br>Either way, I don't think you need to set ANT_HOME for TED to actually show Android as a target, as TED never looks at ANT_HOME (Only Ant itself does).<br>TED just doesn't seem to want to acknowledge that I've installed everything already. <br><br></td></tr></table><br>
<a name="2101812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danilo</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Hezkore:<br>Your config.macos.txt is missing JDK_PATH. <br><br></td></tr></table><br>
<a name="2101823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I have spent the last 3 hours digging around and discovered that the child process bug in Yosemite is still present; according to the bug reports it's been fixed. This is a bug where a child process isn't inheriting it's parents PATH and system variables when launch via clicking the app bundle. If you invoke Ted directly, then the PATHS are set, but for some reason tcc.ANDROID_PATH is still empty thus causing android not to be registered, I will have to see whats going on there. Forcing it will still cause problems with trying to use ant and android sdk that is installed with macports. Manually installing ant and the sdks into the home directory will work as long as you export the ant path in the local user profile. <br><br></td></tr></table><br>
<a name="2101837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dawlane</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK found a work around using macports which I assume Hezkore is using.<br>Clean install of Yosemite.<br>Make sure that you install the latest Oracle JDK from the dmg image file.<br>Install xcode and then the command line tools.<br>Install macports and then use macports to install apache-ant, android and android-ndk<br>Run the android sdks manager as sudo and install API 19, and/or API 13 (need to check the obsolete check box to see that one)<br><br>Now as systems variables are not being inherited when executables using the command shell are invoked from a GUI application; plus the command shell is ignoring profile in most cases, but not bash_profile. You have two choices, either create a bash_profile in /etc or create .bash_profile on in your home directory.<br>You then have to set the variables required by MonkeyX into the bash_profile<br><pre class=code>export PATH="/opt/local/bin:/opt/local/sbin:$PATH”
export ANT_PATH="/opt/local/share/java/apache-ant"
export ANDROID_PATH="/opt/local/share/java/android-sdk-macosx"
export ANDROID_NDK_PATH="/opt/local/share/java/android-ndk-macosx"
export PATH="$ANDROID_NDK_PATH:$ANDROID_PATH:$ANT_HOME:$PATH”</pre><br><br>MonkeyX will also need ANDROID_PATH, ANDROID_NDK_PATH and ANT_PATH setting exactly to the same paths.<br>Reboot if you added bash_profile to /etc or log out if it’s in the user home directory. <br><br></td></tr></table><br>
<a name="2101835"></a>

<a name="2101836"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
