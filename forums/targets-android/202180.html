<!DOCTYPE html><html lang="en" ><head ><title >Crashes on Android 4.02</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Crashes on Android 4.02</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=502" >Android</a>/<a href="#bottom" >Crashes on Android 4.02</a><br><br>
<a name="2021123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> A friend of mine just tested my 3 Apps on a Google Nexus.<br>All of them crash. One directly after start, another<br>when swiching back to menu from game.<br>They all work on 2.1, 2.3, Flash, HTML5 and Windows Phone.<br>I couldn't do further tests until now.<br>Has anyone tested his Monkey Apps on similar systems and hab<br>problems? <br><br></td></tr></table><br>
<a name="2021217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >secondgear</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have an ICS device yet, but my game consistently crashes in 4.03 simulator. The same game works well on 2.3 (both simulator and Nexus One), old iPod Touch, Windows Phone 7 simulator, Flash and HTML5. <br><br></td></tr></table><br>
<a name="2021242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep same here. Crashes on 4.x for emulator and real devices. <br><br></td></tr></table><br>
<a name="2021255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had the chance for some tests. Using Monkey V44.<br><br>App1 (I'm not sure if it's a clean build, maybe I tried<br>a higher Version of Monkey and forgot to delete build dir):<br><br>01-19 14:45:30.215: E/InputDispatcher(196): channel '41d52f90 PairsAdvanced.monkey/PairsAdvanced.monkey.MonkeyGame (server)' ~ Channel is unrecoverably broken and will be disposed!<br>01-19 14:46:57.293: A/libc(2427): @@@ ABORTING: INVALID HEAP ADDRESS IN dlfree<br>01-19 14:46:57.293: A/libc(2427): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)<br>01-19 14:47:11.520: A/libc(2472): Fatal signal 11 (SIGSEGV) at 0x0000000c (code=1)<br><br>App2 (clean build):<br>01-19 14:58:08.707: E/dalvikvm-heap(2630): Out of memory on a 262160-byte allocation.<br>01-19 14:58:08.887: E/dalvikvm-heap(2630): Out of memory on a 279056-byte allocation. <br><br></td></tr></table><br>
<a name="2021264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Uncle</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>We've had similar reports of crashing on Android 4.  Seemed to run if all other apps were killed so it does look like a memory issue.<br><br>Cheers,<br><br><br>Andrew <br><br></td></tr></table><br>
<a name="2021286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are there any special requirements needed to cause a crash? I can only use the simulator for ICS, but my mojo test worked fine with this setup:<br><br><img src="http://www.hi-toro.com/monkey/ad4.png"><br><br>I'd read some posts elsewhere about portrait vs landscape orientation, but changing orientation to 'sensor' (ie. switching on-the-fly) made no difference. (My demo uses <a href="/posts.php?topic=1500" target="_blank">autofit</a> to adapt regardless.)<br><br>Anyone have some reasonably simple code that demonstrates it? (Do any of the Monkey 'bananas' demos cause it?) <br><br></td></tr></table><br>
<a name="2021291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will see if i can make my 4.01 tablet play this weekend...... <br><br></td></tr></table><br>
<a name="2021317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> My project Blotty Pots crashes after loading the game. So the menu will pop up but after discarding all images and load the new ones for the game it crashes after the load is finished.<br><br>Will see if I can create a more simple example. <br><br></td></tr></table><br>
<a name="2021320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, here's a logcat output:<br><br>The crash seems to happen here:<br><pre class=code>
E/WVMExtractor( 37): Failed to open libwvm.so
F/libc ( 1568): Fatal signal 11 (SIGSEGV) at 0x0000000c (code=1)
</pre><br><br><div class="quote"> <br><br>I/ActivityManager(   78): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.cobblecrowd.blottypots/.MonkeyGame} from pid 518<br>W/WindowManager(   78): Failure taking screenshot for (180x300) to layer 21010<br>D/dalvikvm(  518): GC_CONCURRENT freed 333K, 27% free 19853K/26951K, paused 5ms+20ms<br>D/dalvikvm( 1568): Not late-enabling CheckJNI (already on)<br>I/ActivityManager(   78): Start proc com.cobblecrowd.blottypots for activity com.cobblecrowd.blottypots/.MonkeyGame: pid=1568 uid=10040 gids={}<br>I/dalvikvm( 1568): Turning on JNI app bug workarounds for target SDK version 7...<br>W/NetworkManagementSocketTagger(   78): setKernelCountSet(10040, 1) failed with errno -2<br>W/ActivityThread( 1568): Application com.cobblecrowd.blottypots can be debugged on port 8100...<br>D/libEGL  ( 1568): Emulator without GPU support detected. Fallback to software renderer.<br>D/libEGL  ( 1568): loaded /system/lib/egl/libGLES_android.so<br>D/gralloc_goldfish( 1568): Emulator without GPU emulation detected.<br>I/ActivityManager(   78): Displayed com.cobblecrowd.blottypots/.MonkeyGame: +1s387ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 95K, 3% free 9335K/9543K, paused 49ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 1K, 3% free 9590K/9863K, paused 49ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed &lt;1K, 4% free 9847K/10183K, paused 44ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 9.935MB for 262160-byte allocation<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed &lt;1K, 4% free 10103K/10503K, paused 54ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 786K, 12% free 9346K/10503K, paused 33ms<br>W/InputManagerService(   78): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@41b6c548 (uid=10009 pid=518)<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed &lt;1K, 9% free 9602K/10503K, paused 52ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed &lt;1K, 7% free 9858K/10503K, paused 41ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 787K, 11% free 9350K/10503K, paused 33ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed &lt;1K, 9% free 9606K/10503K, paused 38ms<br>W/NetworkManagementSocketTagger(   78): setKernelCountSet(10009, 0) failed with errno -2<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed &lt;1K, 7% free 9862K/10503K, paused 53ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 837K, 11% free 9388K/10503K, paused 32ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 10.703MB for 1536016-byte allocation<br>D/dalvikvm( 1568): GC_CONCURRENT freed &lt;1K, 10% free 10888K/12039K, paused 5ms+4ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed &lt;1K, 10% free 10888K/12039K, paused 34ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 11.801MB for 1152016-byte allocation<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 0K, 9% free 12013K/13191K, paused 35ms<br>I/ARMAssembler( 1568): generated scanline__00000177:03010144_00009003_00000000 [ 66 ipp] (109 ins) at [0x4a55e1e8:0x4a55e39c] in 1233979 ns<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 2770K, 30% free 18948K/26951K, paused 142ms<br>E/WVMExtractor(   37): Failed to open libwvm.so<br>E/WVMExtractor(   37): Failed to open libwvm.so<br>E/WVMExtractor(   37): Failed to open libwvm.so<br>I/ARMAssembler( 1568): generated scanline__00000177:03515144_00009003_00000000 [105 ipp] (159 ins) at [0x4a55e3a0:0x4a55e61c] in 1593526 ns<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 2642K, 29% free 9442K/13191K, paused 37ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 10.754MB for 1536016-byte allocation<br>D/dalvikvm( 1568): GC_CONCURRENT freed 1K, 18% free 10940K/13191K, paused 6ms+5ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 0K, 18% free 10940K/13191K, paused 37ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 11.851MB for 1152016-byte allocation<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 2625K, 29% free 9440K/13191K, paused 35ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 1K, 29% free 9452K/13191K, paused 35ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 10.764MB for 1536016-byte allocation<br>D/dalvikvm( 1568): GC_CONCURRENT freed &lt;1K, 17% free 10952K/13191K, paused 5ms+5ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 0K, 17% free 10952K/13191K, paused 36ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 11.863MB for 1152016-byte allocation<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed &lt;1K, 9% free 12077K/13191K, paused 35ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 0K, 9% free 12077K/13191K, paused 39ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 13.328MB for 1536016-byte allocation<br>D/dalvikvm( 1568): GC_CONCURRENT freed 1500K, 18% free 12077K/14727K, paused 5ms+4ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 0K, 18% free 12077K/14727K, paused 39ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 12.961MB for 1152016-byte allocation<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 3750K, 36% free 9452K/14727K, paused 35ms<br>I/ARMAssembler( 1568): generated scanline__00000177:03515144_00009001_00000000 [166 ipp] (222 ins) at [0x4a55e620:0x4a55e998] in 1717797 ns<br>D/dalvikvm(   78): GC_EXPLICIT freed 213K, 42% free 11244K/19335K, paused 5ms+9ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 112K, 36% free 9473K/14727K, paused 38ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 10.785MB for 1536016-byte allocation<br>D/dalvikvm( 1568): GC_CONCURRENT freed 0K, 26% free 10973K/14727K, paused 4ms+5ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 0K, 26% free 10973K/14727K, paused 37ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 11.883MB for 1152016-byte allocation<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed &lt;1K, 18% free 12098K/14727K, paused 38ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 0K, 18% free 12098K/14727K, paused 40ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 13.348MB for 1536016-byte allocation<br>D/dalvikvm( 1568): GC_CONCURRENT freed 1500K, 26% free 12098K/16263K, paused 6ms+5ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 0K, 26% free 12098K/16263K, paused 40ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 12.982MB for 1152016-byte allocation<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 3750K, 42% free 9473K/16263K, paused 40ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 5K, 42% free 9493K/16263K, paused 72ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 10.804MB for 1536016-byte allocation<br>D/dalvikvm( 1568): GC_CONCURRENT freed 0K, 33% free 10993K/16263K, paused 4ms+4ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 0K, 33% free 10993K/16263K, paused 48ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 11.903MB for 1152016-byte allocation<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 2625K, 42% free 9493K/16263K, paused 37ms<br>D/dalvikvm( 1568): GC_CONCURRENT freed 210K, 41% free 9684K/16263K, paused 5ms+4ms<br><br>E/WVMExtractor(   37): Failed to open libwvm.so<br>F/libc    ( 1568): Fatal signal 11 (SIGSEGV) at 0x0000000c (code=1)<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 393K, 42% free 9575K/16263K, paused 52ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 10.884MB for 1536016-byte allocation<br>E/WVMExtractor(   37): Failed to open libwvm.so<br>D/dalvikvm( 1568): GC_CONCURRENT freed 2K, 32% free 11072K/16263K, paused 9ms+5ms<br>D/dalvikvm( 1568): GC_FOR_ALLOC freed 0K, 32% free 11072K/16263K, paused 43ms<br>I/dalvikvm-heap( 1568): Grow heap (frag case) to 11.980MB for 1152016-byte allocation<br>I/DEBUG   (   33): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***<br>I/DEBUG   (   33): Build fingerprint: 'generic/sdk/generic:4.0.3/MR1/237985:eng/test-keys'<br>I/DEBUG   (   33): pid: 1568, tid: 1577  &gt;&gt;&gt; com.cobblecrowd.blottypots &lt;&lt;&lt;<br>I/DEBUG   (   33): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0000000c<br>I/DEBUG   (   33):  r0 002675b0  r1 00000000  r2 00000031  r3 4004c474<br>I/DEBUG   (   33):  r4 001e4ec8  r5 001e4f68  r6 000000d0  r7 001dd778<br>I/DEBUG   (   33):  r8 00000000  r9 00000006  10 00000000  fp 490d4c04<br>I/DEBUG   (   33):  ip 00000000  sp 490d4b98  lr 40016230  pc 4001972a  cpsr 80000030<br>I/DEBUG   (   33):  d0  42c8000042c137e1  d1  3ff00000008d1c08<br>I/DEBUG   (   33):  d2  437e8000000000fe  d3  000000003f000000<br>I/DEBUG   (   33):  d4  000001fd00000000  d5  3fe999999999999a<br>I/DEBUG   (   33):  d6  00920ff000000000  d7  000000604e5c7bcc<br>I/DEBUG   (   33):  d8  0000000000000000  d9  0000000000000000<br>I/DEBUG   (   33):  d10 0000000000000000  d11 0000000000000000<br>I/DEBUG   (   33):  d12 0000000000000000  d13 0000000000000000<br>I/DEBUG   (   33):  d14 0000000000000000  d15 0000000000000000<br>I/DEBUG   (   33):  scr 80000012<br>I/DEBUG   (   33): <br>I/DEBUG   (   33):          #00  pc 0001572a  /system/lib/libc.so (dlfree)<br>I/DEBUG   (   33):          #01  pc 000160bc  /system/lib/libc.so (free)<br>I/DEBUG   (   33):          #02  pc 000009ac  /system/lib/libstdc++.so (_ZdlPvRKSt9nothrow_t)<br>I/DEBUG   (   33):          #03  pc 00013f04  /system/lib/libutils.so<br>I/DEBUG   (   33):          #04  pc 00014354  /system/lib/libutils.so (_ZN7android10_FileAsset5closeEv)<br>I/DEBUG   (   33):          #05  pc 00014532  /system/lib/libutils.so (_ZN7android10_FileAssetD1Ev)<br>I/DEBUG   (   33):          #06  pc 0001454c  /system/lib/libutils.so (_ZN7android10_FileAssetD0Ev)<br>I/DEBUG   (   33):          #07  pc 0005dc64  /system/lib/libandroid_runtime.so<br>I/DEBUG   (   33):          #08  pc 0001ebf0  /system/lib/libdvm.so (dvmPlatformInvoke)<br>I/DEBUG   (   33):          #09  pc 0005908e  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread)<br>I/DEBUG   (   33):          #10  pc 0004cba8  /system/lib/libdvm.so (_Z21dvmCheckCallJNIMethodPKjP6JValuePK6MethodP6Thread)<br>I/DEBUG   (   33):          #11  pc 00030a0c  /system/lib/libdvm.so<br>I/DEBUG   (   33):          #12  pc 000341bc  /system/lib/libdvm.so (_Z12dvmInterpretP6ThreadPK6MethodP6JValue)<br>I/DEBUG   (   33):          #13  pc 0006ca4e  /system/lib/libdvm.so (_Z14dvmCallMethodVP6ThreadPK6MethodP6ObjectbP6JValueSt9__va_list)<br>I/DEBUG   (   33):          #14  pc 0006ca70  /system/lib/libdvm.so (_Z13dvmCallMethodP6ThreadPK6MethodP6ObjectP6JValuez)<br>I/DEBUG   (   33):          #15  pc 0005fb90  /system/lib/libdvm.so<br>I/DEBUG   (   33):          #16  pc 00012e08  /system/lib/libc.so (__thread_entry)<br>I/DEBUG   (   33):          #17  pc 00012958  /system/lib/libc.so (pthread_create)<br>I/DEBUG   (   33): <br>I/DEBUG   (   33): code around pc:<br>I/DEBUG   (   33): 40019708 f046609e 51a60301 e1996063 0903f022  .`F....Qc`.."...<br>I/DEBUG   (   33): 40019718 ea4f444e f1b909d9 d83c0f1f 8008f8d5  NDO.......&lt;.....<br>I/DEBUG   (   33): 40019728 f8d868ef 42aa200c 68b9d102 d00542a9  .h... .B...h.B..<br>I/DEBUG   (   33): 40019738 49e948e8 44794478 ffb6f7fd d10c45b8  .H.IxDyD.....E..<br>I/DEBUG   (   33): 40019748 c398f8df 44fc2201 f909fa02 3000f8dc  .....".D.......0<br>I/DEBUG   (   33): <br>I/DEBUG   (   33): code around lr:<br>I/DEBUG   (   33): 40016210 e2166903 1a000017 e5945000 e1a02004  .i.......P... ..<br>I/DEBUG   (   33): 40016220 e2055a02 e1a00005 e3851001 ebffecc6  .Z..............<br>I/DEBUG   (   33): 40016230 e3500000 13856002 1a000001 ea000009  ..P..`..........<br>I/DEBUG   (   33): 40016240 ebfffe8e e1a01004 e1a00006 ebffecc6  ................<br>I/DEBUG   (   33): 40016250 e1a01005 e1a02006 e3a03000 e1550000  ..... ...0....U.<br>I/DEBUG   (   33): <br>I/DEBUG   (   33): stack:<br>I/DEBUG   (   33):     490d4b58  001ad8b0  [heap]<br>I/DEBUG   (   33):     490d4b5c  470d4f48  <br>I/DEBUG   (   33):     490d4b60  00000008  <br>I/DEBUG   (   33):     490d4b64  40019a5d  /system/lib/libc.so<br>I/DEBUG   (   33):     490d4b68  001ad8b0  [heap]<br>I/DEBUG   (   33):     490d4b6c  406dddec  /system/lib/libskia.so<br>I/DEBUG   (   33):     490d4b70  00140c90  [heap]<br>I/DEBUG   (   33):     490d4b74  4004c4d0  <br>I/DEBUG   (   33):     490d4b78  001e4f48  [heap]<br>I/DEBUG   (   33):     490d4b7c  001aef68  [heap]<br>I/DEBUG   (   33):     490d4b80  00000000  <br>I/DEBUG   (   33):     490d4b84  470d4f30  <br>I/DEBUG   (   33):     490d4b88  001e4f48  [heap]<br>I/DEBUG   (   33):     490d4b8c  470d4f28  <br>I/DEBUG   (   33):     490d4b90  df0027ad  <br>I/DEBUG   (   33):     490d4b94  00000000  <br>I/DEBUG   (   33): #00 490d4b98  001e4f48  [heap]<br>I/DEBUG   (   33):     490d4b9c  001aef68  [heap]<br>I/DEBUG   (   33):     490d4ba0  00000000  <br>I/DEBUG   (   33):     490d4ba4  470d4f30  <br>I/DEBUG   (   33):     490d4ba8  490d4bf0  <br>I/DEBUG   (   33):     490d4bac  470d4f28  <br>I/DEBUG   (   33):     490d4bb0  00000000  <br>I/DEBUG   (   33):     490d4bb4  4001a0bf  /system/lib/libc.so<br>I/DEBUG   (   33): #01 490d4bb8  001e4f48  [heap]<br>I/DEBUG   (   33):     490d4bbc  4005c9af  /system/lib/libstdc++.so<br>D/Zygote  (   36): Process 1568 terminated by signal (11)<br>I/ActivityManager(   78): Process com.cobblecrowd.blottypots (pid 1568) has died.<br>W/ActivityManager(   78): Force removing ActivityRecord{41551c50 com.cobblecrowd.blottypots/.MonkeyGame}: app died, no saved state<br>W/NetworkManagementSocketTagger(   78): setKernelCountSet(10040, 0) failed with errno -2<br>I/WindowManager(   78): WIN DEATH: Window{414cb628 com.cobblecrowd.blottypots/com.cobblecrowd.blottypots.MonkeyGame paused=false}<br>W/WindowManager(   78): Force-removing child win Window{41704df8 SurfaceView paused=false} from container Window{414cb628 com.cobblecrowd.blottypots/com.cobblecrowd.blottypots.MonkeyGame paused=false}<br>W/WindowManager(   78): Failed looking up window<br>W/WindowManager(   78): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@41b5e6a8 does not exist<br>W/WindowManager(   78):         at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7156)<br>W/WindowManager(   78):         at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7147)<br>W/WindowManager(   78):         at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1529)<br>W/WindowManager(   78):         at android.os.BinderProxy.sendDeathNotice(Binder.java:417)<br>W/WindowManager(   78):         at dalvik.system.NativeStart.run(Native Method)<br>I/WindowManager(   78): WIN DEATH: null<br>W/NetworkManagementSocketTagger(   78): setKernelCountSet(10009, 1) failed with errno -2<br>W/InputManagerService(   78): Got RemoteException sending setActive(false) notification to pid 1568 uid 10040<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 2607K, 35% free 17587K/26951K, paused 100ms<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 1162K, 35% free 17688K/26951K, paused 188ms<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 1396K, 35% free 17633K/26951K, paused 118ms<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 1108K, 33% free 18063K/26951K, paused 154ms<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 1135K, 33% free 18184K/26951K, paused 110ms<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 1179K, 31% free 18635K/26951K, paused 190ms<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 1669K, 31% free 18618K/26951K, paused 142ms<br>D/dalvikvm(  518): GC_CONCURRENT freed 1470K, 29% free 19195K/26951K, paused 5ms+81ms<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 2910K, 35% free 17681K/26951K, paused 120ms<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 1208K, 35% free 17735K/26951K, paused 135ms<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 1588K, 35% free 17680K/26951K, paused 118ms<br>D/dalvikvm(  518): GC_FOR_ALLOC freed 1290K, 35% free 17652K/26951K, paused 119ms<br> <br></div> <br><br></td></tr></table><br>
<a name="2021319"></a>

<a name="2021409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I have an example here which runs fine on Android &lt;4.0 (in the emulator AND device) but crashes on Android 4.0.x.<br><br>code including graphics: <a href="http://www.xaron.net/dl/monkey/android_crash_v4.zip" target="_blank">http://www.xaron.net/dl/monkey/android_crash_v4.zip</a><br><br>What does it do?<br><br>It just shows a Loading screen, loads some graphics and cache it (from my game in the menu), then switches to a second load state where it discards all menu graphics and load the game graphics while showing the loading screen again and after finishing that it crashes.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo
Global testApp:Test

Global gImages:IntMap&lt; Image &gt;
Global gLoadScreen:Image

Const STATE_LOAD_1:Int = 1
Const STATE_PAINT_1:Int = 2
Const STATE_FREE_1:Int = 3
Const STATE_LOAD_2:Int = 4
Const STATE_PAINT_2:Int = 5
Const STATE_FREE_2:Int = 6

Global gState:Int = STATE_LOAD_1

Const GFX_BACKGROUND:Int = 1
Const GFX_PAIL_EMPTY:Int = 2
Const GFX_PAIL_LOW:Int = 3
Const GFX_PAIL_MEDIUM:Int = 4
Const GFX_PAIL_FULL:Int = 5
Const GFX_PAIL_BOTTOM:Int = 6
Const GFX_PAIL_SELECT:Int = 7
Const GFX_PAIL_DROP_ANIM:Int = 8
Const GFX_PAIL_OVERFLOW:Int = 9
Const GFX_PAIL_ILLEGAL_MOVE:Int = 10
Const MAIN_BUTTON_SINGLE_PLAYER_P:Int = 501
Const MAIN_BUTTON_TWO_PLAYER_P:Int = 502
Const MAIN_BUTTON_STATISTICS_P:Int = 503
Const MAIN_BUTTON_ABOUT_P:Int = 504
Const MAIN_BUTTON_SOUND_ON_P:Int = 505
Const MAIN_BUTTON_SOUND_OFF:Int = 506
Const MAIN_BUTTON_SOUND_OFF_P:Int = 507
Const MENU_MAIN:Int = 513
Const MENU_ONE_PLAYER:Int = 514
Const MENU_TWO_PLAYER:Int = 515
Const MENU_ABOUT:Int = 516
Const MENU_STATISTICS:Int = 517
Const MENU_CROSS:Int = 520
Const GAME_BUTTON_MENU_P:Int = 521
Const GAME_BUTTON_RESTART_P:Int = 522
Const GAME_BUTTON_HOWTO_P:Int = 523
Const GAME_BUTTON_SOUND_ON_P:Int = 524
Const GAME_BUTTON_SOUND_OFF:Int = 525
Const GAME_BUTTON_SOUND_OFF_P:Int = 526
Const GAME_HOWTO:Int = 527
Const GAME_WON:Int = 528
Const GAME_WON_NEW_HIGHSCORE:Int = 529
Const GAME_LOST:Int = 530
Const GAME_WONLOST_MENU_P:Int = 531
Const GAME_WONLOST_RESTART_P:Int = 532
Const GAME_RESTART:Int = 533
Const GAME_RESTART_YES_P:Int = 534
Const GAME_RESTART_NO_P:Int = 535
Const MAIN_BUTTON_SINGLE_PLAYER_START_P:Int = 536
Const MAIN_BUTTON_TWO_PLAYER_START_P:Int = 537
Const GAME_PLAYER1_WON:Int = 538
Const GAME_PLAYER2_WON:Int = 539

Const GFX_NEUTRAL:Int = 0
Const GFX_PLAYER1:Int = 1000
Const GFX_PLAYER2:Int = 2000

Function Main:Int()
  testApp = New Test()
  Return 0
End Function

Class Test Extends App
  Method OnCreate:Int()
    gImages = New IntMap&lt; Image &gt;
    gLoadScreen = LoadImage( "loading.png" )
    SetUpdateRate(30)
    Return 0
  End Method

  Method OnUpdate:Int()
    Return 0
  End Method
  
  Method OnSuspend:Int()
    Return 0
  End Method
  
  Method OnResume:Int()
    Return 0
  End Method

  Method OnRender:Int()
    PushMatrix()
    Cls()

    Select gState
      Case STATE_LOAD_1
        LoadMenuImages()
        DrawImage( gLoadScreen, 0, 0 )
        CacheResources()
        gState = STATE_PAINT_1
        Return 0
      Case STATE_PAINT_1
        DrawImage( gImages.Get( MENU_MAIN ), 0, 0 )
        gState = STATE_FREE_1
        Return 0
      Case STATE_FREE_1
        DrawImage( gLoadScreen, 0, 0 )
        CleanUpResources()
        gState = STATE_LOAD_2
        Return 0
      Case STATE_LOAD_2
        LoadGameImages()
        CacheResources()
        gState = STATE_PAINT_2
        Return 0
      Case STATE_PAINT_2
        DrawImage( gImages.Get( GFX_BACKGROUND ), 0, 0 )
        gState = STATE_FREE_2
        Return 0
      Case STATE_FREE_2
        CleanUpResources()
        DrawImage( gLoadScreen, 0, 0 )
        gState = STATE_LOAD_1
        Return 0
    End Select

    PopMatrix()
    Return 0
  End Method

End Class

Function LoadMenuImages:Void()
  gImages.Set( MENU_MAIN                        , LoadImage( "menu/menu_main.png" ) )
  gImages.Set( MENU_ONE_PLAYER                  , LoadImage( "menu/menu_oneplayer.png" ) )
  gImages.Set( MENU_TWO_PLAYER                  , LoadImage( "menu/menu_twoplayer.png" ) )
  gImages.Set( MENU_ABOUT                       , LoadImage( "menu/menu_about.png" ) )
  gImages.Set( MENU_STATISTICS                  , LoadImage( "menu/menu_statistics.png" ) )
  gImages.Set( MAIN_BUTTON_SINGLE_PLAYER_P      , LoadImage( "menu/button_oneplayer_p.png" ) )
  gImages.Set( MAIN_BUTTON_SINGLE_PLAYER_START_P, LoadImage( "menu/button_oneplayer_start_p.png" ) )
  gImages.Set( MAIN_BUTTON_TWO_PLAYER_P         , LoadImage( "menu/button_twoplayer_p.png" ) )
  gImages.Set( MAIN_BUTTON_TWO_PLAYER_START_P   , LoadImage( "menu/button_twoplayer_start_p.png" ) )
  gImages.Set( MAIN_BUTTON_STATISTICS_P         , LoadImage( "menu/button_statistics_p.png" ) )
  gImages.Set( MAIN_BUTTON_ABOUT_P              , LoadImage( "menu/button_about_p.png" ) )
  gImages.Set( MAIN_BUTTON_SOUND_ON_P           , LoadImage( "menu/button_sound_on_p.png" ) )
  gImages.Set( MAIN_BUTTON_SOUND_OFF            , LoadImage( "menu/button_sound_off.png" ) )
  gImages.Set( MAIN_BUTTON_SOUND_OFF_P          , LoadImage( "menu/button_sound_off_p.png" ) )
  gImages.Set( MENU_CROSS                       , LoadImage( "menu/cross.png", 64, 53, 4 ) )
End Function

Function LoadGameImages:Void()
  gImages.Set( GFX_PAIL_BOTTOM                        , LoadImage( "bottom.png" ) )
  gImages.Set( GFX_BACKGROUND                         , LoadImage( "4x4_back.png" ) )
  gImages.Set( GFX_PAIL_ILLEGAL_MOVE                  , LoadImage( "4x4_illegal_move.png" ) )
  gImages.Set( GFX_PAIL_EMPTY                         , LoadImage( "4x4_neutral_empty.png" ) )
  gImages.Set( GFX_PAIL_LOW                           , LoadImage( "4x4_neutral_low.png" ) )
  gImages.Set( GFX_PAIL_MEDIUM                        , LoadImage( "4x4_neutral_medium.png" ) )
  gImages.Set( GFX_PAIL_FULL                          , LoadImage( "4x4_neutral_full.png" ) )
  gImages.Set( GFX_PAIL_EMPTY            + GFX_PLAYER1, LoadImage( "4x4_p1_empty.png" ) )
  gImages.Set( GFX_PAIL_LOW              + GFX_PLAYER1, LoadImage( "4x4_p1_low.png", 110, 110, 10 ) )
  gImages.Set( GFX_PAIL_MEDIUM           + GFX_PLAYER1, LoadImage( "4x4_p1_medium.png", 110, 110, 10 ) )
  gImages.Set( GFX_PAIL_FULL             + GFX_PLAYER1, LoadImage( "4x4_p1_full.png", 110, 110, 10 ) )
  gImages.Set( GFX_PAIL_SELECT           + GFX_PLAYER1, LoadImage( "4x4_p1_select.png" ) )
  gImages.Set( GFX_PAIL_OVERFLOW         + GFX_PLAYER1, LoadImage( "4x4_p1_overflow.png", 294, 285, 5, Image.MidHandle ) )

  gImages.Set( GFX_PAIL_EMPTY            + GFX_PLAYER2, LoadImage( "4x4_p2_empty.png" ) )
  gImages.Set( GFX_PAIL_LOW              + GFX_PLAYER2, LoadImage( "4x4_p2_low.png", 110, 110, 10 ) )
  gImages.Set( GFX_PAIL_MEDIUM           + GFX_PLAYER2, LoadImage( "4x4_p2_medium.png", 110, 110, 10 ) )
  gImages.Set( GFX_PAIL_FULL             + GFX_PLAYER2, LoadImage( "4x4_p2_full.png", 110, 110, 10 ) )
  gImages.Set( GFX_PAIL_SELECT           + GFX_PLAYER2, LoadImage( "4x4_p2_select.png" ) )
  gImages.Set( GFX_PAIL_OVERFLOW         + GFX_PLAYER2, LoadImage( "4x4_p2_overflow.png", 294, 285, 5, Image.MidHandle ) )

  gImages.Set( GAME_BUTTON_MENU_P                     , LoadImage( "button_menu_p.png" ) )
  gImages.Set( GAME_BUTTON_RESTART_P                  , LoadImage( "button_menu_restart_p.png" ) )
  gImages.Set( GAME_BUTTON_HOWTO_P                    , LoadImage( "button_menu_howto_p.png" ) )
  gImages.Set( GAME_BUTTON_SOUND_ON_P                 , LoadImage( "button_menu_sound_on_p.png" ) )
  gImages.Set( GAME_BUTTON_SOUND_OFF                  , LoadImage( "button_menu_sound_off.png" ) )
  gImages.Set( GAME_BUTTON_SOUND_OFF_P                , LoadImage( "button_menu_sound_off_p.png" ) )
  gImages.Set( GAME_HOWTO                             , LoadImage( "howto.png", 1, Image.MidHandle ) )
  gImages.Set( GAME_WON                               , LoadImage( "won.png", 1, Image.MidHandle ) )
  gImages.Set( GAME_WON_NEW_HIGHSCORE                 , LoadImage( "won_highscore.png", 1, Image.MidHandle ) )
  gImages.Set( GAME_LOST                              , LoadImage( "lost.png", 1, Image.MidHandle ) )
  gImages.Set( GAME_WONLOST_MENU_P                    , LoadImage( "button_wonlost_menu_p.png" ) )
  gImages.Set( GAME_WONLOST_RESTART_P                 , LoadImage( "button_wonlost_restart_p.png" ) )
  gImages.Set( GAME_RESTART                           , LoadImage( "restart.png", 1, Image.MidHandle ) )
  gImages.Set( GAME_RESTART_YES_P                     , LoadImage( "button_restart_yes_p.png" ) )
  gImages.Set( GAME_RESTART_NO_P                      , LoadImage( "button_restart_no_p.png" ) )
  gImages.Set( GAME_PLAYER1_WON                       , LoadImage( "player1_won.png", 1, Image.MidHandle ) )
  gImages.Set( GAME_PLAYER2_WON                       , LoadImage( "player2_won.png", 1, Image.MidHandle ) )
End Function

Function CacheResources:Void()
  'Fuer Android muessen wir alle Bilder einmal zeichnen, damit sie gecached sind und es
  'keine Verzoegerungen beim ersten Paint gibt
  For Local i:Image = Eachin gImages.Values()
    DrawImage( i, -2000, -2000 )
  Next
End Function

Function CleanUpResources:Void()
  For Local img:Image = Eachin gImages.Values()
    img.Discard()
  Next
  gImages.Clear()
End Function
</textarea> <br><br></td></tr></table><br>
<a name="2021412"></a>

<a name="2021413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Xaron,<br><br>good to see you can reproduce the error. I wasn't able to do this<br>in one of my Apps, spending sunday afternoon on trying.<br>I've stripped your code.<br>As soons as ONE image is loaded (see first line in  LoadMenuImages())<br>the App will crash in emulator 4.03.<br><br>Tested on Android 2.2, works:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import mojo
Global testApp:Test

Global gImages:IntMap&lt; Image &gt;
Global gLoadScreen:Image

Const STATE_LOAD_1:Int = 1
Const STATE_PAINT_1:Int = 2
Const STATE_FREE_1:Int = 3
Const STATE_LOAD_2:Int = 4
Const STATE_PAINT_2:Int = 5
Const STATE_FREE_2:Int = 6

Global gState:Int = STATE_LOAD_1

Const GFX_BACKGROUND:Int = 1
Const GFX_PAIL_EMPTY:Int = 2
Const GFX_PAIL_LOW:Int = 3
Const GFX_PAIL_MEDIUM:Int = 4
Const GFX_PAIL_FULL:Int = 5
Const GFX_PAIL_BOTTOM:Int = 6
Const GFX_PAIL_SELECT:Int = 7
Const GFX_PAIL_DROP_ANIM:Int = 8
Const GFX_PAIL_OVERFLOW:Int = 9
Const GFX_PAIL_ILLEGAL_MOVE:Int = 10
Const MAIN_BUTTON_SINGLE_PLAYER_P:Int = 501
Const MAIN_BUTTON_TWO_PLAYER_P:Int = 502
Const MAIN_BUTTON_STATISTICS_P:Int = 503
Const MAIN_BUTTON_ABOUT_P:Int = 504
Const MAIN_BUTTON_SOUND_ON_P:Int = 505
Const MAIN_BUTTON_SOUND_OFF:Int = 506
Const MAIN_BUTTON_SOUND_OFF_P:Int = 507
Const MENU_MAIN:Int = 513
Const MENU_ONE_PLAYER:Int = 514
Const MENU_TWO_PLAYER:Int = 515
Const MENU_ABOUT:Int = 516
Const MENU_STATISTICS:Int = 517
Const MENU_CROSS:Int = 520
Const GAME_BUTTON_MENU_P:Int = 521
Const GAME_BUTTON_RESTART_P:Int = 522
Const GAME_BUTTON_HOWTO_P:Int = 523
Const GAME_BUTTON_SOUND_ON_P:Int = 524
Const GAME_BUTTON_SOUND_OFF:Int = 525
Const GAME_BUTTON_SOUND_OFF_P:Int = 526
Const GAME_HOWTO:Int = 527
Const GAME_WON:Int = 528
Const GAME_WON_NEW_HIGHSCORE:Int = 529
Const GAME_LOST:Int = 530
Const GAME_WONLOST_MENU_P:Int = 531
Const GAME_WONLOST_RESTART_P:Int = 532
Const GAME_RESTART:Int = 533
Const GAME_RESTART_YES_P:Int = 534
Const GAME_RESTART_NO_P:Int = 535
Const MAIN_BUTTON_SINGLE_PLAYER_START_P:Int = 536
Const MAIN_BUTTON_TWO_PLAYER_START_P:Int = 537
Const GAME_PLAYER1_WON:Int = 538
Const GAME_PLAYER2_WON:Int = 539

Const GFX_NEUTRAL:Int = 0
Const GFX_PLAYER1:Int = 1000
Const GFX_PLAYER2:Int = 2000

Function Main:Int()
  testApp = New Test()
  Return 0
End Function

Class Test Extends App
  Method OnCreate:Int()
    gImages = New IntMap&lt; Image &gt;
    gLoadScreen = LoadImage( "loading.png" )
    SetUpdateRate(30)
    Return 0
  End Method

  Method OnUpdate:Int()
    Return 0
  End Method
  
  Method OnSuspend:Int()
    Return 0
  End Method
  
  Method OnResume:Int()
    Return 0
  End Method

  Method OnRender:Int()
    PushMatrix()
    Cls()

    Select gState
      Case STATE_LOAD_1
        LoadMenuImages()
'        DrawImage( gLoadScreen, 0, 0 )
		 DrawText("gstate:"+gState,10,10)
        CacheResources()
        gState = STATE_PAINT_1
        Return 0
      Case STATE_PAINT_1
'        DrawImage( gImages.Get( MENU_MAIN ), 0, 0 )
		 DrawText("gstate:"+gState,10,10)
        gState = STATE_FREE_1
        Return 0
      Case STATE_FREE_1
'        DrawImage( gLoadScreen, 0, 0 )
		DrawText("gstate:"+gState,10,10)
        CleanUpResources()
        gState = STATE_LOAD_2
        Return 0
      Case STATE_LOAD_2
        LoadGameImages()
        CacheResources()
        gState = STATE_PAINT_2
        Return 0
      Case STATE_PAINT_2
'        DrawImage( gImages.Get( GFX_BACKGROUND ), 0, 0 )
		 DrawText("gstate:"+gState,10,10)
        gState = STATE_FREE_2
        Return 0
      Case STATE_FREE_2
        CleanUpResources()
'        DrawImage( gLoadScreen, 0, 0 )
		DrawText("gstate:"+gState,10,10)
        gState = STATE_LOAD_1
        Return 0
    End Select

    PopMatrix()
    Return 0
  End Method

End Class

Function LoadMenuImages:Void()
  gImages.Set( MENU_MAIN                        , LoadImage( "menu/menu_main.png" ) ) 'comment this out and app works
'  gImages.Set( MENU_ONE_PLAYER                  , LoadImage( "menu/menu_oneplayer.png" ) )
'  gImages.Set( MENU_TWO_PLAYER                  , LoadImage( "menu/menu_twoplayer.png" ) )
'  gImages.Set( MENU_ABOUT                       , LoadImage( "menu/menu_about.png" ) )
'  gImages.Set( MENU_STATISTICS                  , LoadImage( "menu/menu_statistics.png" ) )
'  gImages.Set( MAIN_BUTTON_SINGLE_PLAYER_P      , LoadImage( "menu/button_oneplayer_p.png" ) )
  
  '
'  gImages.Set( MAIN_BUTTON_SINGLE_PLAYER_START_P, LoadImage( "menu/button_oneplayer_start_p.png" ) )
'  gImages.Set( MAIN_BUTTON_TWO_PLAYER_P         , LoadImage( "menu/button_twoplayer_p.png" ) )
'  gImages.Set( MAIN_BUTTON_TWO_PLAYER_START_P   , LoadImage( "menu/button_twoplayer_start_p.png" ) )
'  gImages.Set( MAIN_BUTTON_STATISTICS_P         , LoadImage( "menu/button_statistics_p.png" ) )
'  gImages.Set( MAIN_BUTTON_ABOUT_P              , LoadImage( "menu/button_about_p.png" ) )
'  gImages.Set( MAIN_BUTTON_SOUND_ON_P           , LoadImage( "menu/button_sound_on_p.png" ) )
'  gImages.Set( MAIN_BUTTON_SOUND_OFF            , LoadImage( "menu/button_sound_off.png" ) )
'  gImages.Set( MAIN_BUTTON_SOUND_OFF_P          , LoadImage( "menu/button_sound_off_p.png" ) )
'  gImages.Set( MENU_CROSS                       , LoadImage( "menu/cross.png", 64, 53, 4 ) )
End Function

Function LoadGameImages:Void()
'  gImages.Set( GFX_PAIL_BOTTOM                        , LoadImage( "bottom.png" ) )
'  gImages.Set( GFX_BACKGROUND                         , LoadImage( "4x4_back.png" ) )
'  gImages.Set( GFX_PAIL_ILLEGAL_MOVE                  , LoadImage( "4x4_illegal_move.png" ) )
'  gImages.Set( GFX_PAIL_EMPTY                         , LoadImage( "4x4_neutral_empty.png" ) )
'  gImages.Set( GFX_PAIL_LOW                           , LoadImage( "4x4_neutral_low.png" ) )
'  gImages.Set( GFX_PAIL_MEDIUM                        , LoadImage( "4x4_neutral_medium.png" ) )
'  gImages.Set( GFX_PAIL_FULL                          , LoadImage( "4x4_neutral_full.png" ) )
'  gImages.Set( GFX_PAIL_EMPTY            + GFX_PLAYER1, LoadImage( "4x4_p1_empty.png" ) )
'  gImages.Set( GFX_PAIL_LOW              + GFX_PLAYER1, LoadImage( "4x4_p1_low.png", 110, 110, 10 ) )
'  gImages.Set( GFX_PAIL_MEDIUM           + GFX_PLAYER1, LoadImage( "4x4_p1_medium.png", 110, 110, 10 ) )
'  gImages.Set( GFX_PAIL_FULL             + GFX_PLAYER1, LoadImage( "4x4_p1_full.png", 110, 110, 10 ) )
'  gImages.Set( GFX_PAIL_SELECT           + GFX_PLAYER1, LoadImage( "4x4_p1_select.png" ) )
'  gImages.Set( GFX_PAIL_OVERFLOW         + GFX_PLAYER1, LoadImage( "4x4_p1_overflow.png", 294, 285, 5, Image.MidHandle ) )
'
'  gImages.Set( GFX_PAIL_EMPTY            + GFX_PLAYER2, LoadImage( "4x4_p2_empty.png" ) )
'  gImages.Set( GFX_PAIL_LOW              + GFX_PLAYER2, LoadImage( "4x4_p2_low.png", 110, 110, 10 ) )
'  gImages.Set( GFX_PAIL_MEDIUM           + GFX_PLAYER2, LoadImage( "4x4_p2_medium.png", 110, 110, 10 ) )
'  gImages.Set( GFX_PAIL_FULL             + GFX_PLAYER2, LoadImage( "4x4_p2_full.png", 110, 110, 10 ) )
'  gImages.Set( GFX_PAIL_SELECT           + GFX_PLAYER2, LoadImage( "4x4_p2_select.png" ) )
'  gImages.Set( GFX_PAIL_OVERFLOW         + GFX_PLAYER2, LoadImage( "4x4_p2_overflow.png", 294, 285, 5, Image.MidHandle ) )
'
'  gImages.Set( GAME_BUTTON_MENU_P                     , LoadImage( "button_menu_p.png" ) )
'  gImages.Set( GAME_BUTTON_RESTART_P                  , LoadImage( "button_menu_restart_p.png" ) )
'  gImages.Set( GAME_BUTTON_HOWTO_P                    , LoadImage( "button_menu_howto_p.png" ) )
'  gImages.Set( GAME_BUTTON_SOUND_ON_P                 , LoadImage( "button_menu_sound_on_p.png" ) )
'  gImages.Set( GAME_BUTTON_SOUND_OFF                  , LoadImage( "button_menu_sound_off.png" ) )
'  gImages.Set( GAME_BUTTON_SOUND_OFF_P                , LoadImage( "button_menu_sound_off_p.png" ) )
'  gImages.Set( GAME_HOWTO                             , LoadImage( "howto.png", 1, Image.MidHandle ) )
'  gImages.Set( GAME_WON                               , LoadImage( "won.png", 1, Image.MidHandle ) )
'  gImages.Set( GAME_WON_NEW_HIGHSCORE                 , LoadImage( "won_highscore.png", 1, Image.MidHandle ) )
'  gImages.Set( GAME_LOST                              , LoadImage( "lost.png", 1, Image.MidHandle ) )
'  gImages.Set( GAME_WONLOST_MENU_P                    , LoadImage( "button_wonlost_menu_p.png" ) )
'  gImages.Set( GAME_WONLOST_RESTART_P                 , LoadImage( "button_wonlost_restart_p.png" ) )
'  gImages.Set( GAME_RESTART                           , LoadImage( "restart.png", 1, Image.MidHandle ) )
'  gImages.Set( GAME_RESTART_YES_P                     , LoadImage( "button_restart_yes_p.png" ) )
'  gImages.Set( GAME_RESTART_NO_P                      , LoadImage( "button_restart_no_p.png" ) )
'  gImages.Set( GAME_PLAYER1_WON                       , LoadImage( "player1_won.png", 1, Image.MidHandle ) )
'  gImages.Set( GAME_PLAYER2_WON                       , LoadImage( "player2_won.png", 1, Image.MidHandle ) )
End Function

Function CacheResources:Void()
  'Fuer Android muessen wir alle Bilder einmal zeichnen, damit sie gecached sind und es
  'keine Verzoegerungen beim ersten Paint gibt
'  For Local i:Image = Eachin gImages.Values()
'    DrawImage( i, -2000, -2000 )
'  Next
End Function

Function CleanUpResources:Void()
'  For Local img:Image = Eachin gImages.Values()
'    img.Discard()
'  Next
'  gImages.Clear()
End Function

</textarea> <br><br></td></tr></table><br>
<a name="2021415"></a>

<a name="2021416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well done, Xaron -- I can confirm that runs without crashing on my Android 2.2 phone (along with HTML5, Flash, GLFW and XNA), but it <i>does</i> crash on the Android 4 emulator for me.<br><br>(I notice it's also extremely slow on both the Android emulator and the real device, where it's really quick on everything else; don't know if that's relevant.) <br><br></td></tr></table><br>
<a name="2021417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Volker's example ran for about 30 seconds before it crashed here. <br><br></td></tr></table><br>
<a name="2021419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for confirming this! :) It looks like a memory issue. I don't know if this is related to Monkey at all or more a GC Java issue. <br><br></td></tr></table><br>
<a name="2021422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I was wondering (after posting in other thread) if the Android 4 memory management works differently, perhaps lazier and not GC'ing as much as earlier versions. Don't really know what I'm talking about here though... <br><br></td></tr></table><br>
<a name="2021478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Solved. See here:<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=2205" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=2205</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
