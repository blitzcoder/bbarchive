<!DOCTYPE html><html lang="en" ><head ><title >Debugging?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Debugging?</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=502" >Android</a>/<a href="#bottom" >Debugging?</a><br><br>
<a name="2112878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >silentshark</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Our latest creation is progressing nicely, but we are suffering from the dreaded "occasional" crash. Things are fine normally, but sometimes we get a "Unfortunately [app] has stopped responding".<br><br>The app is compiled with the debug option in Monkey (85e), but unfortunately we don't get any debug info when the crash occurs. like we do in HTML5 builds. Due to the virtual joystick control mechanisms, it's not easy to reproduce the crash in another environment.<br><br>Any tips on the best way to figure what is happening? We have quite a lot of &lt;Stack&gt; objects, my bet is there's a gremlin in our code around removing things from the stack.<br><br>Any thoughts or pointers appreciated! <br><br></td></tr></table><br>
<a name="2112879"></a>

<a name="2112880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> When a debug Monkey build for Android crashes, it <b>should</b> have debug info output to <a href="http://developer.android.com/tools/help/adb.html" target="_blank">ADB</a>, which should then be routed to your console in Ted, Jungle, or any other IDE using standard I/O. You can't debug using 'DebugStop', but you can tell where it's called, from the ADB output, and you can tell where an exception (Any kind) is thrown (And not caught). Android debugging's pretty lack-luster, though. <i>Basically the last line</i> executed will be output at the top regardless, which is enough to understand where the crash happened. Unless of course, it's a native-code issue, at which point, you'd be debugging a translation, or a separate module/file. Either way, if something happens, you'll get the last known line of your Monkey source at the top of the console-output. Just make sure to make a "Debug" build. Printing (Standard output) will always be routed to ADB, and ideally, your console-window.<br><br>As far as stacks go, as long as you aren't doing anything too crazy, like adding several thousand references to one 'Stack', I doubt that's what's making it crash. That being said, I should also bring up that 'RemoveEach' on a 'Stack' is a bit slow (Though overall, it's not bad), but that's because it shifts the contents. So, if you constantly remove elements like that, it shouldn't cause any major memory gimps. If Dalvik runs out of memory, it'll at least garbage collect before crashing. In other words, running out of memory's only an issue if you keep the objects referenced somewhere. Or, you know, you're taking excessive amounts of it. But, most Monkey objects are around one to two cache-lines long, depending on the chip, so other than grouping, they're pretty small to begin with. <br><br></td></tr></table><br>
<a name="2112892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >silentshark</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for this info - I must be missing a trick in terms of getting my APK file onto my Android tablet and having that connected up to a console. Right now, I just grab the .apk created by Monkey, and install on my tablet (via Dropbox).<br><br>I guess what you are portraying would require me to connect my tablet to my PC via USB and for Monkey to push the compiled app onto my tablet? I've never tried that, and will give it a whirl.<br><br>Re: stack. I have some code which is processing two stacks (looking for collisions via a for..next loop nested in another for.. next loop). When a collision happens, I remove elements on the stacks, and I may have got some logic wrong here.. will check. <br><br></td></tr></table><br>
<a name="2112897"></a>

<a name="2112898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @silentshark: For most devices you just need to install the Google USB Driver(s): <a href="http://developer.android.com/tools/extras/oem-usb.html" target="_blank">http://developer.android.com/tools/extras/oem-usb.html</a> - This page may also help: <a href="http://developer.android.com/tools/device.html" target="_blank">http://developer.android.com/tools/device.html</a><br><br>As long as you have the device plugged in, and you install the correct driver (Found in the Android SDK Manager), you should get a notification on the device. It should prompt you about something like USB debugging, charging, or file transfer/sync, just hit it, and you'll be able to enable to set USB debugging. If that doesn't work, there may be other settings you need to change. There's also a chance the generic Google drivers won't work. At that point, you need to look up drivers for your device, or check Google's documentation; as linked above.<br><br>Once that's settled, just build and run from Monkey, and it'll connect to ADB automatically. ADB will upload and connect to your device over USB. <b>The alternative</b> is to use the Android Emulator that comes with the SDK. This is a pretty good option, but only if you're running basic stuff, or you have a CPU with Intel's virtualization technology, or AMD's technology (Linux only from what I understand). ADB will also work with the emulator, but it may take a while to upload or detect the device. <br><br></td></tr></table><br>
<a name="2112930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >silentshark</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, I will try and install a better USB driver. The current one works, in terms of allowing data transfer, but doesn't seem to allow debugging.<br><br>Thanks for all you advice. <br><br></td></tr></table><br>
<a name="2113509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >silentshark</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The other thing I found useful was running the Bluestacks emulator on my PC, and connecting adb up to it, to see the debug logs.<br><br>Following compilation for Android with the debug option, and install onto Bluestacks, the magic commands were:<br><br><pre class=code>
adb connect 127.0.0.1:5555
adb logcat
</pre><br><br>Hope this helps someone, sometime! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
