<!DOCTYPE html><html lang="en" ><head ><title >Android not working - apk crash on start</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Android not working - apk crash on start</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=502" >Android</a>/<a href="#bottom" >Android not working - apk crash on start</a><br><br>
<a name="2059949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get it to work with a plain simple monkey demos, but anything bigger fails.<br><br>It seems the App crash on start. Same in simulator as on my Nexus 10.<br><br>Someone mentioned this could do with sound?<br><br>The game are fairly small but still have some art - they are not using texture atlases? Can this be it?<br><br>Any thing you can suggest I should try to disable or enable to debug this? <br><br></td></tr></table><br>
<a name="2059950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> are you getting a crash report in debug mode? copy a few lines of that and post in in a codebox. <br><br></td></tr></table><br>
<a name="2059951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It will crash with sound if volume gets higher than 1, also there was a limit on pitch (rate) not sure if anything else. <br><br></td></tr></table><br>
<a name="2059953"></a>

<a name="2059955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Crashes on iOS also, for all three games.<br><br>Btw - Using version v71b!<br><br>This error on iOS: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=5381" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=5381</a> <br><br></td></tr></table><br>
<a name="2059958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> my guess is it's running out of image memory.<br>...but also make sure to delete the .build folder (if you haven't modified it).<br><br>also, is this only in release mode? any error dumps when using debug mode? <br><br></td></tr></table><br>
<a name="2059966"></a>

<a name="2059967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems monkey don't like my nexus 10, so it won't auto copy at run &amp; debug. However what I do is that I build and go into the android/bin/ folder and find the apk file and transfer it to my nexus 10 and install the game.<br><br>If it is image mem (worthwhile to test). How can I calculate image memory and make sure I'm below?<br><br>However launching the app installed from the APK file (called monkey game) I only get a popup when I click the icon that says "Unfortunately, Monkey Game has stopped." OK. <br><br></td></tr></table><br>
<a name="2060036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get this error too sometimes and nearly each and every time it was because it couldn't find a certain image in the image bank. Make sure there is no typo etc.. <br><br></td></tr></table><br>
<a name="2060043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> My app, working fine on V66, crashes on V71b with an out of memory error<br>under android. HTML5 works fine.<br>I guess it has to do with MonkeyV71.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
E/dalvikvm-heap(31032): Out of memory on a 4194320-byte allocation.

E/AndroidRuntime(31032): FATAL EXCEPTION: main

E/AndroidRuntime(31032): java.lang.OutOfMemoryError

E/AndroidRuntime(31032): 	at com.monkey.c_GameImage.p_Load(MonkeyGame.java:5478)

E/AndroidRuntime(31032): 	at com.monkey.c_GameImage.p_LoadTileset(MonkeyGame.java:5512)

E/AndroidRuntime(31032): 	at com.monkey.c_ImageBank.p_LoadTileset2(MonkeyGame.java:5962)

E/AndroidRuntime(31032): 	at com.monkey.c_TileMap.p_PostLoad(MonkeyGame.java:49841)

E/AndroidRuntime(31032): 	at com.monkey.c_TiledTileMapReader.p_DoPostLoad(MonkeyGame.java:49023)

E/AndroidRuntime(31032): 	at com.monkey.c_TiledTileMapReader.p_ReadMap(MonkeyGame.java:49458)

E/AndroidRuntime(31032): 	at com.monkey.c_TiledTileMapReader.p_LoadMap(MonkeyGame.java:49484)

E/AndroidRuntime(31032): 	at com.monkey.c_Tilemanager.m_Tilemanager_new(MonkeyGame.java:48884)

E/AndroidRuntime(31032): 	at com.monkey.c_Gamescreen.p_CreateLevel(MonkeyGame.java:28266)

E/AndroidRuntime(31032): 	at com.monkey.c_Gamescreen.p_Start(MonkeyGame.java:28309)

E/AndroidRuntime(31032): 	at com.monkey.c_Screen.p_PreStart(MonkeyGame.java:5159)

E/AndroidRuntime(31032): 	at com.monkey.c_Screen.p_PostFadeOut(MonkeyGame.java:5167)

E/AndroidRuntime(31032): 	at com.monkey.c_ScreenFade.p_Update2(MonkeyGame.java:5341)

E/AndroidRuntime(31032): 	at com.monkey.c_DiddyApp.p_Update(MonkeyGame.java:4673)

E/AndroidRuntime(31032): 	at com.monkey.c_DiddyApp.p_OnUpdate(MonkeyGame.java:4727)

E/AndroidRuntime(31032): 	at com.monkey.c_GameDelegate.UpdateGame(MonkeyGame.java:4893)

E/AndroidRuntime(31032): 	at com.monkey.BBGame.UpdateGame(MonkeyGame.java:562)

E/AndroidRuntime(31032): 	at com.monkey.BBAndroidGame.UpdateGame(MonkeyGame.java:1223)

E/AndroidRuntime(31032): 	at com.monkey.BBAndroidGame$GameTimer.run(MonkeyGame.java:794)

E/AndroidRuntime(31032): 	at android.os.Handler.handleCallback(Handler.java:615)

E/AndroidRuntime(31032): 	at android.os.Handler.dispatchMessage(Handler.java:92)

E/AndroidRuntime(31032): 	at android.os.Looper.loop(Looper.java:137)

E/AndroidRuntime(31032): 	at android.app.ActivityThread.main(ActivityThread.java:4921)

E/AndroidRuntime(31032): 	at java.lang.reflect.Method.invokeNative(Native Method)

E/AndroidRuntime(31032): 	at java.lang.reflect.Method.invoke(Method.java:511)

E/AndroidRuntime(31032): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)

E/AndroidRuntime(31032): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)

E/AndroidRuntime(31032): 	at dalvik.system.NativeStart.main(Native Method)

E/android.os.Debug( 2144): !@Dumpstate &gt; dumpstate -k -t -z -d -o /data/log/dumpstate_app_error

E/Launcher( 2690): Error finding setting, default accessibility to not found: accessibility_enabled
</textarea> <br><br></td></tr></table><br>
<a name="2060050"></a>

<a name="2060051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> E/AndroidRuntime(31032): 	at com.monkey.c_GameImage.p_Load(MonkeyGame.java:5478)<br><br>E/AndroidRuntime(31032): 	at com.monkey.c_GameImage.p_LoadTileset(MonkeyGame.java:5512) <br></div><br>that looks like the heap hitting its limit from an image that's too big. <br><br></td></tr></table><br>
<a name="2060107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes it works better on an older version.<br><br>Not I have managed to get it to run --&gt; I changed to version 70f, but now when I start the App I instead only see a black screen :(  <br><br>I'm not sure my game even runs in v66, but I'll test that! <br><br></td></tr></table><br>
<a name="2060109"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; that looks like the heap hitting its limit from an image that's too big. <br><br>Is there anything I can do about that?<br><br>I added Texture Packer and now everything is in one texture instead of many small. I hope that did not make it worse? <br><br></td></tr></table><br>
<a name="2060108"></a>

<a name="2060111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> v66 won't even build. Get's lots of errors.<br><br>v68c does build, however I have the same "Black screen" problem. <br><br></td></tr></table><br>
<a name="2060133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here I uploaded the full source code /w art and sound, feel free to test on your android/ios system and please let me know if you can make it work, or find the debug output. <br><br></td></tr></table><br>
<a name="2060114"></a>

<a name="2060113"></a>

<a name="2060121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ironstorm</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got it working here on my HTC One X with Monkey V69 so far.<br><br>There seems to be a problem with Chartboost. I had to comment out all chartboost related lines and now it's working. <br><br></td></tr></table><br>
<a name="2060129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh that is awesome!<br><br>I'll do that and take it from there, many thanks! :)<br><br>btw how did you arrive at that? did you get any specific android debug output? Just want to make sure I learn this to next time :) <br><br></td></tr></table><br>
<a name="2060128"></a>

<a name="2060126"></a>

<a name="2060132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes disabling chartboost got it working for me too. Phew! :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
