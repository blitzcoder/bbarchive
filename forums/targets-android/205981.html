<!DOCTYPE html><html lang="en" ><head ><title >Amazon Payment not working with MonkeyV69 or newer</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Amazon Payment not working with MonkeyV69 or newer</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=502" >Android</a>/<a href="#bottom" >Amazon Payment not working with MonkeyV69 or newer</a><br><br>
<a name="2068329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Has somebody ported your apps for the Amazon app store and is using the amazon in app purchases.<br><br>I've ported some on my apps (I'm using this code for the purchases: <a href="https://bitbucket.org/joemanaco/fairlight/src/91e39be6b9b32fc3590ecb3f8e6e7843de07f0dc/vendor/amazon/native/payment.amazon.java?at=master" target="_blank">https://bitbucket.org/joemanaco/fairlight/src/91e39be6b9b32fc3590ecb3f8e6e7843de07f0dc/vendor/amazon/native/payment.amazon.java?at=master</a> )<br><br>The thing is - when I'm using the Amazon Sandbox everythings fine: I can test and purchase the products.  When I submit the app to amazon everything is fin with Monkey V68 or older, but when I'm using Monkey V69 or newer the app gots rejected saying that in app purchases aren't working. MichaelContento has the same problem with his apps he told me.<br><br>I talked to amazon quite a lot, and they send me log files and everything but we cannot identify the problem and it must have something to do with the changes from Mmonkeyv68 to v69 - but I had a look into these changes and have no idea what change could be causing this problem.<br><br>Has somebody here on the forum a working app with amazon in app purchases build with Monkey 69 or newer? Or probably some idea, what change can cause such effect? <br><br></td></tr></table><br>
<a name="2068344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are using a 3rd party solution but not the official MonkeyStore module, right? <br><br></td></tr></table><br>
<a name="2068346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as I know MonkeyStore only supports GooglePlay and iTunes right now?!? Or is there already support for other stores? <br><br></td></tr></table><br>
<a name="2068360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think only these two. <br><br></td></tr></table><br>
<a name="2068370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mouser</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same problem here. Amazon IAP just don't work in v69 and higher. <br><br></td></tr></table><br>
<a name="2068423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >michaelcontento</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, same problem here :/ <br><br></td></tr></table><br>
<a name="2076824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >monkeyteets</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> did anyone get this resolved? <br><br></td></tr></table><br>
<a name="2078560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll do a module for that, having the same interface as Mark's IAP Monkeystore. <br><br></td></tr></table><br>
<a name="2086093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dragon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> xaron, any progress? <br><br></td></tr></table><br>
<a name="2086128"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aye just had no time but started it, yes. Will take another look, sorry for the delay! <br><br></td></tr></table><br>
<a name="2086130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >erebel55</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm also looking forward to this :) <br><br></td></tr></table><br>
<a name="2086507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would be great if you solve this issue. At the moment I'm using a custom Monkey-version based on v69 and than patched/merged with some of the newer features. It's very hacky, and a clean solution would be awesome. But remember that you have to test it live because with the Amazon sandbox everything works fine (which is the main problem I cannot fix the bug as I cannot reproduce it in my development environment). <br><br></td></tr></table><br>
<a name="2086505"></a>

<a name="2086506"></a>

<a name="2086529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see! As I have a Kindle Fire HDX this should be doable. :) I want to achieve the usage of the same interface as the other store implementations from Mark, <br><br></td></tr></table><br>
<a name="2097653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >secondgear</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any new developments regarding Amazon IAP? I switched from heavily customized ver.66b to almost original ver.82b and ran into the same problem: IAPs work when testing offline, but there is a problem when running in live testing (and the app is rejected by Amazon's testers). I wrote some glue code modeled after brl.monkeystore. When I test against the live server, the app receives user id, receives items, and receives purchase updates without any problems. However, when it tries to initiate a purchase, Amazon's purchase dialog is never displayed. <br><br></td></tr></table><br>
<a name="2097869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I still have the same problem... :( <br><br></td></tr></table><br>
<a name="2097888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> @secondgear Have you tried the IAP v.2.0 API already from Amazon. Probably it will work better with the new version?!? <br><br></td></tr></table><br>
<a name="2097889"></a>

<a name="2097890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >secondgear</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried 2.0.1 and 1.0.7 and 1.0.3 with the same result. In fact, I also tried different versions of Monkey as well. It didn't work in 82b and it DIDN'T work in 67f, but it worked in 66b. I talked to Amazon, they had the same problem with my apk. Now the issue is redirected to the "appropriate technical team", and I'm still waiting for the answer.<br><br>You said you had it working in ver. 68? Could please you tell me which Monkey versions did you try and what was the result? <br><br></td></tr></table><br>
<a name="2097891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, was a typo: I also use an own custom patched version based on 66b.<br><br>I didn't know which version exactly I've tested but 66b was the last monkey version that worked for me as far as I remember. <br><br></td></tr></table><br>
<a name="2099842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >secondgear</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Amazon has offered a solution:<br><br><b>Solution:</b><br><i>AndroidGame</i> should be a public class for their in-app to work. I modified the Eclipse project by cutting out the <i>AndroidGame</i> class and pasting it into a new separate .java file. Then I added <b>public</b> in front of <b>class AndroidGame</b>, and the game worked fine in both offline and live testing. I haven't tried submitting it to Amazon for review yet, so if anybody does the same thing with their game, and it fails, please let me know. <br><br></td></tr></table><br>
<a name="2099841"></a>

<a name="2099871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great tipp. Will try that.<br><br>Will there be a chance to change the default android targets of Monkey to work with Amazon? <br><br></td></tr></table><br>
<a name="2101925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sygem</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can confirm that moving the AndroidGame class to a separate file works - I was going crazy with Amazon's testers, convinced that they were using an old version or something! Only when I tried using their live testing feature could I reproduce the problem. I think a new Amazon target would be a great idea - it's a real pain having to maintain an Eclipse project for this...<br><br>And if you would like to try it out (and give a nice 5-star rating please :-)), here it is! <a href="http://www.amazon.com/gp/product/B00UXHXHR8" target="_blank">Real Roulette, Monkey-X style!</a> <br><br></td></tr></table><br>
<a name="2102027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br> I think a new Amazon target would be a great idea - it's a real pain having to maintain an Eclipse project for this...<br> <br></div><br><br>VOTE!!! THUMBS UP!!! ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
