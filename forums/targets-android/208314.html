<!DOCTYPE html><html lang="en" ><head ><title >The big Android noob thread inc. Optimising + more</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >The big Android noob thread inc. Optimising + more</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=502" >Android</a>/<a href="#bottom" >The big Android noob thread inc. Optimising + more</a><br><br>
<a name="2084355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey all, I've been researching possible Android game dev pitfalls by trawling through these forums (went over a year into the past) and so far I've come up with this list but can you suggest anything more and is any of this stuff out of date? Thanks for your help!<br><br>ALSO is there some kind of "how to setup Monkey X to compile fpr Android and run on an Android device etc." reference you can point me too? Thanks!<br><br>Optimisations:<br><br>1) Use object pooling (e.g. particles, bullets, sprite etc) so that you aren't allocating memory a lot in the main game loop. Or is this more just for older devices?<br>2) Use Sprite atlases to avoid texture swapping as much as possible.<br>3) Avoid changing alpha and colour as much as possible (what about scale?) Also not changing blending mode a lot (e.g. from normal alpha to Additive)<br>4) Precache images as you load them (to avoid stutter on first upload to VRAM/CPU) <br>5) Manually cull off-screen objects when rendering (is this really necessary? Someone suggested there may be better optimisations.)<br>6) Additive blending is slow (is that only true for old devices?). I was going to use this for particle effects. Perhaps I could only show particles on more modern OSes if I can detect that?<br><br>Some general questions:<br><br>1) What is the minimum version of Android OS I should target for decent performance and to avoid hassle? I don't mind excluding some old users if I don't have to code as many workarounds and I can ship a better game and not get bad reviews from people with crappy phones/tablets.<br>2) I read that early Android had problems with textures over 1024x1024. But is it safe to use 2048x2048 if I filter out older devices?<br>3) What sound format to use? I read ogg is best for music, but is wav OK for sound effects? (I heard that oggs may have a lag on some systems)<br>4) Do APK files still need to be &lt;50Mb?<br>5) Do I need this Angelfont fix for plain fonts or is it just for older OSes with bad GC: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=4964" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=4964</a><br>6) Do I need to do anything in the manifest to be able to save/load data or do I just use brl.datastream for LoadString?<br>7) How can I find out more about the manifest file and signing apks? I've heard this mentioned but I really know nothing about it.<br>8) A year or two ago some Android devs were going on about there being 3 different texture types in use or something, and making sure your app supported them all so it ran on all devices. Is that true or does Monkey X handle it?<br><br>Super-thanks in advance for any help you can offer. <br><br></td></tr></table><br>
<a name="2084354"></a>

<a name="2084380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, lots of questions!! <br><br><div class="quote"> ALSO is there some kind of "how to setup Monkey X to compile fpr Android and run on an Android device etc." reference you can point me too?  <br></div><br>Here's one I did ages ago: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1014&amp;post=8800" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=1014&amp;post=8800</a><br><br>These days you can skip steps 5, 6, 7, 8f and 8g by adding the following to your source code:<br><pre class=code>#ANDROID_APP_LABEL="Flying Flappy Monkey"
#ANDROID_APP_PACKAGE="com.therevillsgames.flyingflappymonkey"
#ANDROID_SCREEN_ORIENTATION="portrait"              'one of: user, portrait, landscape
#ANDROID_VERSION_CODE="1"
#ANDROID_VERSION_NAME="1.00"
#ANDROID_KEY_STORE="../../yourProject.keystore"
#ANDROID_KEY_ALIAS="yourProject.keystore"
#ANDROID_KEY_STORE_PASSWORD="123456"
#ANDROID_KEY_ALIAS_PASSWORD="123456"
#ANDROID_SIGN_APP=True

Strict

Import diddy

Function Main:Int()</pre><br>And then just compile your game in release mode (for more performance).<br>Or a pure Android one can be found here: <a href="http://docs.apportable.com/publishing.html" target="_blank">http://docs.apportable.com/publishing.html</a><br><br><div class="quote"> 1) Use object pooling (e.g. particles, bullets, sprite etc) so that you aren't allocating memory a lot in the main game loop. Or is this more just for older devices? <br></div><br>I would suggest using it, its best practice but yes it is more for older devices (&lt;2.3).<br><div class="quote"> 2) Use Sprite atlases to avoid texture swapping as much as possible. <br></div><br>Correct - create your atlases with a maximum of 1024x1024 for best compatibility, I recommend TexturePacker Pro.<br><div class="quote"> 3) Avoid changing alpha and colour as much as possible (what about scale?) Also not changing blending mode a lot <br></div><br>I haven't found this to be too much of an issue myself.<br><div class="quote"> 4) Precache images as you load them (to avoid stutter on first upload to VRAM/CPU)  <br></div><br>Yep, but if you are going to use atlases, you will only need to draw one sprite from that atlas and the entire atlas is cached.<br><div class="quote"> 5) Manually cull off-screen objects when rendering <br></div><br>Yep, it doesn't take much to do and it does help performance - I've tested this on a few devices myself.<br><div class="quote"> 6) Additive blending is slow (is that only true for old devices?). I was going to use this for particle effects. Perhaps I could only show particles on more modern OSes if I can detect that? <br></div><br>It all depends on what devices you are targeting. The more you add the slower it will be. Yes you can detect what OS they are running but its the hardware which will push them around.<br><br><div class="quote"> 1) What is the minimum version of Android OS I should target for decent performance and to avoid hassle? <br></div><br>Android 2.3 came with a better GC which helps when creating new objects at runtime - but I would still be careful of this.<br><div class="quote"> 2) I read that early Android had problems with textures over 1024x1024. But is it safe to use 2048x2048 if I filter out older devices? <br></div><br>OpenGL ES1 has the limitation of 1024x1024, so any device which is still running that will still have the limitation. Again I would create them as 1024x1024 to be safe.<br><div class="quote"> 3) What sound format to use? I read ogg is best for music, but is wav OK for sound effects? (I heard that oggs may have a lag on some systems) <br></div><br>Android has a really bad latency for sounds in general - I use OGGs and its fine and saves space.<br><div class="quote"> 4) Do APK files still need to be &lt;50Mb? <br></div><br>You can spilt them up and use expansion files.<br><div class="quote"> 5) Do I need this Angelfont fix for plain fonts or is it just for older OSes with bad GC <br></div><br>There are a few of us working on modules to "fix" fonts in Monkey:<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=8190" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=8190</a><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=8262" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=8262</a><br>Currently I am using my own and/or Ziggy's FontMachine.<br><div class="quote"> 6) Do I need to do anything in the manifest to be able to save/load data or do I just use brl.datastream for LoadString? <br></div><br>For the Mojo LoadString you don't need anything, and I believe the default manifest is already set up to read internal files.<br><div class="quote"> 7) How can I find out more about the manifest file and signing apks? <br></div><br>See above answers.<br><div class="quote"> 8) A year or two ago some Android devs were going on about there being 3 different texture types in use or something, and making sure your app supported them all so it ran on all devices. Is that true or does Monkey X handle it? <br></div><br>Not quite sure what you mean here. MonkeyX will load in pngs and its fine for all the devices I've tested on... or you could mean loading different resources depending on the DPI of the device - if so you need to code this yourself: If DPI &gt; 500 Then texture = LoadImage("BigTexture.png") else LoadImage("SmallTexture.png"). <br><br></td></tr></table><br>
<a name="2084373"></a>

<a name="2084372"></a>

<a name="2084371"></a>

<a name="2084378"></a>

<a name="2084379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to hijack this, but I have an Android question to add, so it seems better to add it here than another thread.<br><br>9) <br>On iOS there are basically only 3/4 resolutions to work to, so it's easy enough to create a few different sets of assets, load them at runtime and then let autofit scale them if needed.<br><br>With so much fragmentation in the Android market, what is the suggested Monkey approach for dealing with all the different for Android resolutions without having way too many sets of assets? <br><br></td></tr></table><br>
<a name="2084383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> With so much fragmentation in the Android market, what is the suggested Monkey approach for dealing with all the different for Android resolutions without having way too many sets of assets? <br></div><br>We went thru a lot of options the other day regarding resolutions here:<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=8229&amp;post=83146" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=8229&amp;post=83146</a><br><br>With assets, currently I am only using one set of assets and a set resolution - but I think the best solution is to target two resolution HD and SD (with the same aspect ratio), then create assets just for those resolutions and you should cover a wide range of devices. <br><br></td></tr></table><br>
<a name="2084381"></a>

<a name="2084387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 3) What sound format to use? I read ogg is best for music, but is wav OK for sound effects? (I heard that oggs may have a lag on some systems) <br></div><br><br>Might as well use OGG.  The penalty is only for when first loading them into a SoundPool, not during playback.  Unfortunately, SoundPool has a limit of 1mb raw, and mojo only allocates one of these for the entire audio system, so try to keep your sounds as short and simple as possible when loading them into memory, or else some sounds will silently fail to load (no pun intended).  There really should be a fix for this, but since heap limits are already ridiculously low on some devices, I don't see it happening, unless it's given to us via precompiler directive.<br><br><div class="quote"> 5) Do I need this Angelfont fix for plain fonts or is it just for older OSes with bad GC <br></div><br><br>With <a href="https://github.com/nobuyukinyuu/angelfont-tryouts" target="_blank">angelfont-tryouts</a>, you can load with XML again and it should be faster than the previous iterations of AngelFont.  The GC remains the same no matter what OS unless you change the target API in the application's manifest, AFAIK.  This means that sweeps can still eat up a lot of your frame time, and if too large, will cause visible hiccups.  I forget what the minimum API level to set was to basically force the new GC into use, but there was a thread on it somewhere.  LoadPlain() is still useful if you prefer its format for readability better.<br><br><div class="quote"> 8) A year or two ago some Android devs were going on about there being 3 different texture types in use or something, and making sure your app supported them all so it ran on all devices. Is that true or does Monkey X handle it? <br></div><br><br>Hardware texture compression is one of the most badly-fragmented parts of the Android ecosystem, and I wouldn't even mess with it.  The advantages to your game wouldn't be that great vs. the other optimizations, anyway, considering how much work it would be to support all of the systems.  It's easier just to load lower resolution textures on crappier devices. <br><br></td></tr></table><br>
<a name="2084420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow GREAT answers thanks @therevills and @Nobuyuki<br><br>Ok it sounds like I'm on the right track. To clarify a couple of things<br><br>@therevills my question 8) was about texture compression (but I wasn't clear) which @Nobuyuki has answered now, so that's cool.<br><br>@Nobuyuki One of the threads I found mentioned lag when loading oggs into the soundpool (even small ones) and something about stopping the soundpool from flushing itself by leaving a silent looping sound playing. Pretty weird stuff.  Anyway, so are you saying that no (raw) sounds should be over 1MB or that ALL sounds need to fit within 1MB because that's a crazy crap limitation.  To check raw size I should just turn into a wav right?<br><br>@Nobuyuki When you say it's easy to load lower res textures on crappy devices, how could I determine that it's a crapper device in code to make that decision?<br><br> @rIKmAN I'm using the autofit module and currently have one set of assets.  However, I'm checking the device DPI and screen resolution so that I can figure out if the device is approximately a phone or tablet size (in the real world), and then I slightly alter the control set (make buttons bigger on phones for example).  I guess the same approach could be used to change assets too, or just check DPI and decide if it's HD or SD and change assets for that. <br><br></td></tr></table><br>
<a name="2084419"></a>

<a name="2084422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Nobuyuki Also I found some threads that mention which SDK verison to use to cut out crappy GC:<br><br><div class="quote"> <br>Go to /targets/android/template/templates and open the AndroidManifest.xml<br><br>Look for:<br><br>&lt;uses-sdk android:minSdkVersion="3" android:targetSdkVersion="7" /&gt;<br><br>And change it to anything you want.<br><br>The new GC is integrated since Android 2.3. Using android:minSdkVersion=9<br>Kicks around 15% of the user but avoids the stuttering because of the old not concurrent garbage collector.<br> <br></div> <br><br></td></tr></table><br>
<a name="2084424"></a>

<a name="2084426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way I was considering limiting to v 4.0 of the OS because I read some current Google stats that showed it would only cut out 19% of users.  I don't think that's too bad especially considering that I'd have to do lots of optimisations for older crapper devices and also people with a new OS are more likely to spend money on games.<br><br>Still I guess it's possible to have an underpowered phone still running 4.0 or higher right? <br><br></td></tr></table><br>
<a name="2084425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> One more thing how much VRAM should I expect on modern devices (as a minimum)? I ask because if I precache TOO much stuff then it could push out textures that were cached first.  Really I should only precache what I actually plan to use on the current screen (and not like options screen stuff if that is not showing for example) <br><br></td></tr></table><br>
<a name="2084475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> By the way I was considering limiting to v 4.0 of the OS because I read some current Google stats that showed it would only cut out 19% of users. <br></div><br>That is still a large chunk of the market.<br><br>Here are my Pirate Solitaire current stats:<br><img src="https://dl.dropboxusercontent.com/u/35103024/ScreenShots/pirate_android_stats.png"><br><br>And heres the total installs:<br><img src="https://dl.dropboxusercontent.com/u/35103024/ScreenShots/pirate_android_stats_total.png"><br><br><div class="quote"> Still I guess it's possible to have an underpowered phone still running 4.0 or higher right? <br></div><br>Yep, but I believe that Android 4+ requires an ARMv7 processor. <br><br></td></tr></table><br>
<a name="2084498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nobuyuki</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> One more thing how much VRAM should I expect on modern devices (as a minimum)? I ask because if I precache TOO much stuff then it could push out textures that were cached first. Really I should only precache what I actually plan to use on the current screen (and not like options screen stuff if that is not showing for example) <br></div><br><br>Don't worry about it.  Focus on organizing atlases closer to each other in the draw order so there's less texture thrash instead, I'd say.  I don't remember if ARM has a separate VRAM/RAM architecture, or if you're dipping from the same resource pool.  Your app though in standard RAM has a heap limit which you shouldn't expect to be larger than 24mb on a phone approximately 2 years old.  You'll know when you hit it, because your app will crash and you'll be able to see the error in logcat. <br><br></td></tr></table><br>
<a name="2084509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Therevills thanks for sharing. Looks like a lot have 2.3.3 then.  Any idea what "others" is?<br><br>@Nobuyuki so is the heap just for allocating memory to new objects or does it include all assets loaded (gfx, sfx, data)? <br><br></td></tr></table><br>
<a name="2084525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Any idea what "others" is? <br></div><br>The "Others" would be Android versions 1.5 thru to 2.0 - due to the age of the game (it was released in 2011) there were a lot of users at the time with those versions - that's why its so large for "Total Installs" and pretty small for "Current Installs".<br><br>Here's a link to the developer's guide for memory management on Android:<br><a href="http://developer.android.com/training/articles/memory.html" target="_blank">http://developer.android.com/training/articles/memory.html</a> <br><br></td></tr></table><br>
<a name="2084550"></a>

<a name="2084551"></a>

<a name="2084553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah I see thanks. So it looks like limiting to 4.0 would cut out 28% based on your stats. That is quite a lot.  Thx for link too.<br><br>OK I read the link. Have you ever used Monkey commands to call getMemoryClass() and see how much heap the app has? Also are there other related commands to see how much of that has actually been used? Or should this be done through some kind of debugger (I use Instruments on iOS to check the mem use)? (I found this page: <a href="http://developer.android.com/tools/debugging/debugging-memory.html)" target="_blank">http://developer.android.com/tools/debugging/debugging-memory.html)</a><br><br>Also does Monkey automatically call zipalign or is that a manual task? "Note: Google Play Store does not accept APK files that are not zipaligned." <br><br></td></tr></table><br>
<a name="2084548"></a>

<a name="2084582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Also does Monkey automatically call zipalign or is that a manual task? "Note: Google Play Store does not accept APK files that are not zipaligned." <br></div><br>Yes. ANT will auto-zip align. You can see it in the console output.<br>Keep in mind, you will need to apply your own developers key to the ANT process before delivering to Android stores.<br><br><div class="quote"> is the heap just for allocating memory to new objects or does it include all assets loaded (gfx, sfx, data)? <br></div><br>all assets. <br><br></td></tr></table><br>
<a name="2084600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good info in this thread, thanks to all posters. <br><br>Just a couple more of my own...<br>What are the most common screen resolutions / aspect ratios on Android (ie iOS is 960x640, 1136x640, 1024x768, 2048x1536)<br>Does it even work like this on Android or do we have to use the DPI stuff?<br>Can two matching resolution screens can have differing DPI? <br><br></td></tr></table><br>
<a name="2084618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Supertino</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Q: What are the most common screen resolutions / aspect ratios on Android (ie iOS is 960x640, 1136x640, 1024x768, 2048x1536)?<br>A: Resolutions can be all over the shop, aspects are most commonly 16:9 or 16:10 with some 5:3 mixed in to keep things interesting.<br><br>Q: Does it even work like this on Android or do we have to use the DPI stuff?<br>A: Best to pick an aspect and/or resolution and use Autofit or Autoscale to scale your game to the devices display.<br><br>Q: Can two matching resolution screens can have differing DPI?<br>A: Yes if their physical size is different such as a 7" tablet running a 720p screen and a  5.5" phone running a 720p screen.<br><br><b>Also be careful with DPI checking on Android;</b><br><br>It's tempting to use ...<br><pre class=code>
displayMetrics.xdpi
displayMetrics.ydpi
</pre> <br>... but are not reliable for returning true values, these are entered 90% of the time incorrectly by the manufacture of the device.<br><br>Instead ...<br><pre class=code>
displayMetrics.density 
</pre><br>... should be used to return a bucket value; ldpi 120 (0.75), mdpi 160 (1.0), hdpi 240 (1.5) etc.  It's not precise and some devices could be off by as much at 20% if their DPI does not fall bang on one of the bucket values but it's reliable to a point.  I use this to load different media based on device DPI and to size UI elements. <br><br></td></tr></table><br>
<a name="2084617"></a>

<a name="2084616"></a>

<a name="2084615"></a>

<a name="2084642"></a>

<a name="2084644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bazmonkey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm still fairly new to android dev. The Monkey CONFIG settings are very handy and do most of the signing steps for you (though I worked it out in Eclipse too).<br><br>I use Logcat/Monitor to check for basic memory leaks/usage. Not all the emulators start-up on my mac mini, particularly the high dpi ones, due to ram I guess. <br><br>The issue with max texture size is the most confusing one for me.  I found that my (crappy) 4.0 tablet can sometimes load 2048x textures, and sometimes not -- the allocated heap size seems to vary. The general advice I see is to stick with 1024x to be safe. (At what point could you use 2048x?). <br><br>My old phone running 2.3 has much better performance than my 4.0 tablet, so OS version is not a great guide either :/ <br><br>The other thing I have yet to fully sort out is that Android has many 'inbetween' resolutions like 450x800, which don't really match the iOS sizes that I am used to. So I either scale up, scale down (via autofit), or add more asset sets (something between retina and regular iOS). I havent really attempted a proper solution based on dpi yet.<br><br>As for manifest permissions:<br>I added a 'supports-screens' section, ie <a href="http://developer.android.com/guide/topics/manifest/supports-screens-element.html." target="_blank">http://developer.android.com/guide/topics/manifest/supports-screens-element.html.</a> Not sure if vital or not.<br>Another thing I spotted - the manifest in the Monkey template has com.android.vending.BILLING enabled. In the Google Play store, apps with this permission are labelled as 'offering IAP', even if they do not, so I remove this one. <br><br></td></tr></table><br>
<a name="2084641"></a>

<a name="2084622"></a>

<a name="2084621"></a>

<a name="2084639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rIKmAN</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Supertino and baz, again good info.<br><br>I just remembered why I decided to do iOS first before porting to Android - this screen stuff seems overly complicated for no reason.<br><br>Seems I have a lot of testing to do but without a device it will have to be all through Bluestacks, will this mess up DPI/resolution testing? <br><br></td></tr></table><br>
<a name="2084658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> @AdamRedwoods OK thanks for clarification on zipalign and heap<br><br>@bazmonkey great tips, thanks! Also that's a good one about removing com.android.vending.BILLING so that some customers don't get scared about IAP.<br><br>@rIKmAN This is the DPI thread I was looking at (and there's a link to another thread at the top). It also mentions to test on actual device not emulator.  I wonder what DPI it'll return in emulator?: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=5415#84657" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=5415#84657</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
