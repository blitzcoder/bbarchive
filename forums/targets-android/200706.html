<!DOCTYPE html><html lang="en" ><head ><title >Android Failing to Compile</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Android Failing to Compile</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=502" >Android</a>/<a href="#bottom" >Android Failing to Compile</a><br><br>
<a name="2005624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Acissathar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>I set up my Android target for Monkey last night, and since then I've had a problem getting the android target to run.<br><br>My error is:<br><br>ERROR:<br>BUILD FAILED<br>C:\Program Files (x86)\Android\android-sdk\tools\ant\main_rules.xml:472: The following error occurred while executing this line:<br>C:\Program Files (x86)\Android\android-sdk\tools\ant\main_rules.xml:203: apply returned: 255<br><br><br>I have tried deleting the .build folder along with restarting both my IDE and my computer.<br><br>Thank you for all the help! <br><br></td></tr></table><br>
<a name="2005625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> To really help you we need either the source code or the entire compile log or both.<br><br>But Ill take a wild guess and say that one of your source code folders has a space in their name somewhere... <br><br></td></tr></table><br>
<a name="2005646"></a>

<a name="2005647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Acissathar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is the full compile log:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Welcome to Jungle Ide 11.04.18-A
Ready!
[ANMB.monkey] has been saved to disk
Compiling: C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.monkey
[ANMB.monkey] has been saved to disk
trans_winnt.exe -run -config=debug -target=android "C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.monkey"
TRANS monkey compiler V1.09
Parsing...
Semanting...
Translating...
Building...
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
Buildfile: C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.build\android\build.xml
    [setup] Android SDK Tools Revision 10
    [setup] Project Target: Android 2.1-update1
    [setup] API level: 7
    [setup] 
    [setup] ------------------
    [setup] Resolving library dependencies:
    [setup] No library dependencies.
    [setup] 
    [setup] ------------------
    [setup] 
    [setup] WARNING: No minSdkVersion value set. Application will install on all Android versions.
    [setup] 
    [setup] Importing rules file: tools\ant\main_rules.xml

clean:
   [delete] Deleting directory C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.build\android\bin
   [delete] Deleting directory C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.build\android\gen

BUILD SUCCESSFUL
Total time: 1 second
Buildfile: C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.build\android\build.xml
    [setup] Android SDK Tools Revision 10
    [setup] Project Target: Android 2.1-update1
    [setup] API level: 7
    [setup] 
    [setup] ------------------
    [setup] Resolving library dependencies:
    [setup] No library dependencies.
    [setup] 
    [setup] ------------------
    [setup] 
    [setup] WARNING: No minSdkVersion value set. Application will install on all Android versions.
    [setup] 
    [setup] Importing rules file: tools\ant\main_rules.xml

-debug-obfuscation-check:

-set-debug-mode:

-compile-tested-if-test:

-pre-build:

-dirs:
     [echo] Creating output directories if needed...
    [mkdir] Created dir: C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.build\android\bin
    [mkdir] Created dir: C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.build\android\gen
    [mkdir] Created dir: C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.build\android\bin\classes

-aidl:
     [echo] Compiling aidl files into Java classes...

-renderscript:
     [echo] Compiling RenderScript files into Java classes and RenderScript bytecode...

-resource-src:
     [echo] Generating R.java / Manifest.java from the resources...

-pre-compile:

compile:
    [javac] C:\Program Files (x86)\Android\android-sdk\tools\ant\main_rules.xml:384: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 2 source files to C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.build\android\bin\classes
    [javac] Note: C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.build\android\src\com\monkey\MonkeyGame.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

-post-compile:

-obfuscate:

-dex:
     [echo] Converting compiled files and external libraries into C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.build\android\bin\classes.dex...
    [apply] =C:\Users\Acissathar\Desktop\Spray was unexpected at this time.
ERROR:
BUILD FAILED
C:\Program Files (x86)\Android\android-sdk\tools\ant\main_rules.xml:472: The following error occurred while executing this line:
C:\Program Files (x86)\Android\android-sdk\tools\ant\main_rules.xml:203: apply returned: 255

Total time: 4 secondsERROR:
Android build failed.
Error in compilation!

</textarea><br><br>Here is my source code:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import mojo
Import diddy

'"""""""""""""""""""""""""""""""""""
'""""""""""" VARIABLES """""""""""""
'"""""""""""""""""""""""""""""""""""

'" Variables for the Screens
Global logoScreen:LogoScreen
Global titleScreen:TitleScreen

'"Device Scale Variables
Global SCREEN_WIDTH:Int
Global SCREEN_HEIGHT:Int
Const LOGO_WIDTH:Float = 800
Const LOGO_HEIGHT:Float = 480

'"Clock Variables
Global clock:GameClock

'" Image variables
Global Logo:Image

'"""""""""""""""""""""""""""""""""""
'""""""""""  FUNCTIONS """""""""""""
'"""""""""""""""""""""""""""""""""""

Function Main:Int()
        game = New MyGame()
        Return 0
End

Function ImageLoader:Image ()
	
	Logo = LoadImage("LogoScreen.png")

End

Function ScreenLoader:Int()
	
	logoScreen = New LogoScreen
	logoScreen.PreStart()
	titleScreen = New TitleScreen
	Return 0
End

'"""""""""""""""""""""""""""""""""""
'"""""""""""  MYGAME """"""""""""""
'"""""""""""""""""""""""""""""""""""

Class MyGame Extends DiddyApp
        Method OnCreate:Int()
                Super.OnCreate()
				SCREEN_WIDTH = DeviceWidth()
				SCREEN_HEIGHT = DeviceHeight()
				
				ImageLoader
				ScreenLoader
				
				clock = New GameClock
				clock.Start
								
                Return 0
        End
		
		
			
End


'"""""""""""""""""""""""""""""""""""""""
'""""""""" SCREEN CLASSES """"""""""""""
'"""""""""""""""""""""""""""""""""""""""

Class LogoScreen Extends Screen

Field LogoFade:Float

        Method New()
                name = "Logo"
        End
        
        Method Start:Void()
                game.screenFade.Start(70, false)
        End
        
        Method Render:Void()
                Cls
				PushMatrix 
					Scale SCREEN_WIDTH/LOGO_WIDTH, SCREEN_HEIGHT/LOGO_HEIGHT
					DrawImage Logo, 0,0
				PopMatrix
            
        End
        
        Method Update:Void()
		
		LogoFade += clock.Delta
		
                If LogoFade &gt; 3
                        game.screenFade.Start(50, true)
                        game.nextScreen = titleScreen
                End
        End
End

Class TitleScreen Extends Screen
        Method New()
                name = "Title"
        End
        
        Method Start:Void()
                
        End
        
        Method Render:Void()
                Cls
                DrawText "TITLE SCREEN!", SCREEN_WIDTH2, SCREEN_HEIGHT2, 0.5, 0.5
                DrawText "Click to Play!", SCREEN_WIDTH2, SCREEN_HEIGHT2 + 20, 0.5, 0.5
                DrawText "Escape to Quit!", SCREEN_WIDTH2, SCREEN_HEIGHT2 + 40, 0.5, 0.5
        End
        
        Method Update:Void()
                If KeyHit(KEY_ESCAPE)
                        game.screenFade.Start(50, true)
                        game.nextScreen = game.exitScreen
                End
        End
End

Class GameClock
	
Private 
	
	Field secondsSinceStart:Float	
	Field millisecsSinceStart:Int
	Field fps:Int = 60
	Field delta:Float = 1.0 / 60.0
	Field clockOffset:Int
	Field MsSinceLastFrame:Int
	Field TimestampLastFrame:Int
	Field FpsTimer:Float
	Field FpsCounter:Int
	
Public 
	
	Method New()
		Start()
	End Method
	
	Method Start:Void() 
		clockOffset = Millisecs()	
	End Method
	
	Method SecondsSinceStart:Float() Property
		Return secondsSinceStart
	End Method
	
	Method MillisecsSinceStart:Float() Property
		Return millisecsSinceStart
	End Method	
	
	Method FPS:Int() Property
		Return fps
	End	
	
	Method Delta:Float() Property
		Return delta
	End Method

	Method TimeSince:Int(timestamp:Int)
		millisecsSinceStart = TimeSinceStarted()
		Return millisecsSinceStart - timestamp
	End Method
	
	Method TimeStamp:Int() 
		millisecsSinceStart = TimeSinceStarted()
		Return millisecsSinceStart
	End Method
	
	Method TimeSinceStarted:Int()
		Return  Millisecs() - clockOffset
	End Method
	
	Method Update:Void()
		millisecsSinceStart = TimeSinceStarted()
		MsSinceLastFrame = millisecsSinceStart - TimestampLastFrame
		TimestampLastFrame = millisecsSinceStart
		delta = MsSinceLastFrame * 0.001
		
		If delta &lt; 0 Then Print "error: Delta &lt; 0 "
		secondsSinceStart+= Self.Delta
		
		FpsTimer+= Self.Delta
		FpsCounter+=1
		If (FpsTimer &gt; 1)
		    fps = FpsCounter
			FpsTimer = 0
			FpsCounter = 0
		Endif
	End Method
	
	' Should maybe be located in another class
	Method DebugDraw:Void(x:Int = 20, y:Int = 20)
	 	Local row:Int = 0
		DrawText( "Delta: " + Delta, x, y + row * 20  )
		row+=1
		DrawText "clockOffset: " + clockOffset, x, y + row * 20
		row+=1
		DrawText "MillisecsSinceStart: " + MillisecsSinceStart, x, y + row * 20 
		row+=1
		DrawText "MsSinceLastFrame: " + MsSinceLastFrame, x, y + row * 20
		row+=1
		DrawText "FPS Count: " + FPS, x, y + row * 20
		row+=1
		DrawText "SecondsSinceStart: " + SecondsSinceStart, x, y + row * 20
		row+=1
	End Method
	
End Class

</textarea><br><br><br>Is this an Android specific issue about spaces in folder names, because all the other targets work just fine. (minus flash because I don't have it set up yet.) <br><br></td></tr></table><br>
<a name="2005648"></a>

<a name="2005649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ive only seen the issue with Android, but it is good practice to have no spaces in file names and folder names.<br><br>So your current path is:<br><pre class=code>
C:\Users\Acissathar\Desktop\Spray and Pray Ent\Mobile Games\Aliens and Meatbags\Aliens And Meatbags\ANMB.monkey
</pre><br><br>Should be:<br><pre class=code>
C:\Users\Acissathar\Desktop\SprayAndPrayEnt\MobileGames\AliensAndMeatbags\AliensAndMeatbags\ANMB.monkey
</pre><br><br>Oh BTW with Diddy, you dont need to create your own SCREEN_WIDTH/SCREEN_HEIGHT variables, as they are already defined in the framework. <br><br></td></tr></table><br>
<a name="2005650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Acissathar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That was the issue. Thank you very much.<br><br>Thank you also for the Diddy framework, and the info about the screen variables. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
