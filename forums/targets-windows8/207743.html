<!DOCTYPE html><html lang="en" ><head ><title >KeyHit in WinRT topic</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >KeyHit in WinRT topic</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=525" >Windows 8</a>/<a href="#bottom" >KeyHit in WinRT topic</a><br><br>
<a name="2075374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >The KiwiGeek</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi everyone,<br><br>I must be missing something obvious.  No matter what I do, I can't get KeyHit to register in a WinRT/Win8 target.  For instance:<br><br>Import mojo<br><br>Class MyApp Extends App<br>	Method OnCreate()<br>		SetUpdateRate(60)<br>	End<br>	<br>	Method OnUpdate()<br>		If KeyHit(KEY_ENTER) Then EndApp<br>	End<br>	<br>	Method OnRender()<br>		Cls<br>		SetColor(255,255,255)<br>		DrawText("Waiting...", 320, 240, 0)<br>	End<br>End<br><br>Function Main()<br>	New MyApp<br>End<br><br>While that works fine (just waiting for a keypress) with HTML5 and Desktop, on the Windows 8 target it never registers the keypress to quit.  I'm using Visual Studio 2013 to open the solution after building in monkey, to then debug against my local machine. <br><br></td></tr></table><br>
<a name="2075386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leginus</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check that it is definitely not the keypress that isn't working by changing your "Then EndApp"  to something else e.g. changing a flag in your code and printing drawing some text to screen, as I am not sure that you can actually end a winrt app (or shouldn't) as this is system controlled.....I could be wrong (and frequently am). <br><br></td></tr></table><br>
<a name="2075389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dopeyrulz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can't end a WinRT 'metro' app. So your key is being processed most likely.  As per iOS/WP8 the apps go to 'sleep' (in the background when you move to another app) and will be killed off by the system as required. You can kill the app dragging down to the bottom.<br><br>Hope that helps. <br><br></td></tr></table><br>
<a name="2075388"></a>

<a name="2075387"></a>

<a name="2075390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >The KiwiGeek</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys - I guess I chose a really bad example to show it wasn't working - I was just trying to do something simple :)<br><br>The problem exists for me across multiple projects - if I take that code from above, and add a flag indicating hit count, I still don't get any change (in count) on WinRT when I hit enter vs it working as I would expect on Desktop:<br><br>Import mojo<br><br>Class MyApp Extends App<br><br>	Field HitCount:Int = 0<br>	<br>	Method OnCreate()<br>		SetUpdateRate(60)<br>	End<br>	<br>	Method OnUpdate()<br>		If KeyHit(KEY_ENTER) Then HitCount += 1<br>	End<br>	<br>	Method OnRender()<br>		Cls<br>		SetColor(255,255,255)<br>		DrawText("Hit " + HitCount + " times", 320, 240, 0)<br>	End<br>End<br><br>Function Main()<br>	New MyApp<br>End<br><br>I just don't get it.  Hopefully I'm missing something mindbogglingly obvious about WinRT targets. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
