<!DOCTYPE html><html lang="en" ><head ><title >Viewports ignore Y in all images</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Viewports ignore Y in all images</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >Viewports ignore Y in all images</a><br><br>
<a name="989028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MoriartyL</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> A program I was working on was messing up the viewports, and I couldn't figure out what the cause was. So I made a much simpler program, and discovered that the glitch was with BlitzMax rather than my code. Here's the program I made to test it.<br><pre class=code>Graphics 800,600, 32,0
Local img:TImage=LoadImage("background.jpg")
Local y

While Not KeyHit(Key_Escape)
Cls

If KeyDown(Key_Down) Then y:+10
If KeyDown(Key_Up) Then y:-10
SetViewport 50,y,400,25
DrawImage img,0,0
DrawOval 0,0,800,600

SetViewport 0,0,800,600
Flip
Wend</pre><br><br>Background.jpg can be any 800x600 image. When I run this code, the oval is cropped properly but the image is not. The image is only cropped on the X axis, but moving y up and down doesn't effect its appearance at all.<br><br>I'm using BlitzMax 1.34 on Windows XP. I would appreciate a quick response, because I can't continue working on my program until this is resolved. <br><br></td></tr></table><br>
<a name="989030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> View Ports do not work for all video cards.  They are not reliable.  Do not use them.  One person said the bug was a DirectX only problem and they work fine in OpenGL.  I do not know this for sure. <br><br></td></tr></table><br>
<a name="989032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MoriartyL</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's the alternative to using viewports? They're extremely useful. <br><br></td></tr></table><br>
<a name="989036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MoriartyL</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You were right; I tried it on a different computer, and there was no problem.<br><br>If viewports are known to be unreliable, then I've got to rewrite my entire code to not use them. What else can I use that does the same thing? <br><br></td></tr></table><br>
<a name="989037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> DrawImageArea? <a href="http://www.blitzmax.com/Community/posts.php?topic=85478#969578" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=85478#969578</a> <br><br></td></tr></table><br>
<a name="989043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MoriartyL</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, thanks. I'll see what I can do with this. <br><br></td></tr></table><br>
<a name="989334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MoriartyL</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using DrawImageArea is going to be complicated, if I can ever get it to work at all. Are you sure there's no way to get viewports to work?! <br><br></td></tr></table><br>
<a name="989353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I started work on a mod that uses the DrawImageArea and replaces setviewport.  I have it working to some degree in my ifsoGUI mod.  But, it only includes the basics that are needed by ifsoGUI.  It is not feature complete to replace SetViuewPort yet.  I will get back to it, but currently I am battling a bunch of real life issues that are keeping me from getting a lot of programming done.  The only thing I am working on now is ifsoGUI itself. <br><br></td></tr></table><br>
<a name="990785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MoriartyL</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wrote a function to mimic SetViewport with DrawImageArea. It sort of works, in the sense that you can look at the results and say, "Yeah, that kind of resembles what it looked like with viewports", but it looks broken. All the images are being drawn in very imprecise places; I don't know whether that's because of DrawImageArea itself or because of the function I've made, but this isn't working. I've given it my best shot, and it's simply inadequate.<br><br>So I have to go back to my original question: how can I get viewports to work on all graphics cards? <br><br></td></tr></table><br>
<a name="990838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use OpenGL only...<br><br>Supposedly OpenGL doesn't suffer from the problem. <br><br></td></tr></table><br>
<a name="991776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MoriartyL</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're right. I tried using OpenGL and the problems went away. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
