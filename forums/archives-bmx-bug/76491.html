<!DOCTYPE html><html lang="en" ><head ><title >Graphics commands without Graphics errors</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Graphics commands without Graphics errors</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >Graphics commands without Graphics errors</a><br><br>
<a name="855396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Before anyone says I know this is common sense:<br><br>Using Setcolor or any 2d graphics command before using the graphics commands kills Blitz I get the compiling and executing then I get 'unhandled memory exception error' in the output window (with debug off) with it on it tells me 'attempt to access field or method of null object'.<br><br>Surely it would be more 'user' friendly if it said 'Error graphics mode not set'. <br><br>It seems the null object error is a catch all for all errors where there is no error message. <br><br></td></tr></table><br>
<a name="855578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> No it is actually exactly that.<br><br>it tries to access the global TGraphics object to operate on it. As graphics is not called it is null -&gt; null object access violation.<br><br>You can easily use Try - Catch - EndTry and creategraphics within to check if a given graphics mode was "setable" and react to the creation error yourself instead of assuming it works and assume that BM plays nicely if your app doesn't do its homework and error handling :D <br><br></td></tr></table><br>
<a name="855592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The graphics commands should throw their own exceptions. <br><br></td></tr></table><br>
<a name="855645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> it should have its own error message IMHO <br><br></td></tr></table><br>
<a name="855647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ???<br>Graphics if failed throws an exception. Catch it and handle it in your own way.<br>Thats why Try - Catch - EndTry exists after all!<br><br>Any 2D operation that is performed on a null object must logically result in a null object access violation (and doing 2D without prior graphics IS accessing null object as explained above) <br><br></td></tr></table><br>
<a name="855650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with Edzup and Azathoth. <br>It would be nice for the error messages to relay the error AND the likely cause. I doubt it will happen though.<br><br>@Dreamora, using try/catch/endtry on all possible errors that might be output from Bmax is madness. <br><br></td></tr></table><br>
<a name="855659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> No thats called: professional error handling<br>Or do you believe that all the nice error messages you see in other apps are C++ error messages?<br><br>Try - Catch - EndTry is the only way to get a usefull error handling.<br>BM can not know that you killed a graphics command because the error won't be raised until function xy tries to access the _graphics:TGraphics which is null and that basically can be about anything. graphic command but potentially anything else you added to the module like SetCanvasGraphics etc.<br><br>Giving BM the possibility to find the source of the error means that it is slower during the times it does not error ...<br>Quite a great thing just to satisfy users that don't get the basics of common error handling practices.<br><br>If you are too lazy for it, invest in Grey Aliens Framework. It will handle this kind of stuff for you without any extra work for you. <br><br></td></tr></table><br>
<a name="855670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I disagree.<br>If the graphics object/command is not set then it is professional error handling for the application being used to try/catch/whatever or emit a *meaningful* error message.<br><div class="quote"> giving BM the possibility to find the source of the error means that it is slower during the times it does not error ... <br></div><br>I thought that was what debug mode and compiler directives was for... no? <br><br></td></tr></table><br>
<a name="855674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora: Basically your saying that I should 'adjust' all the drawing commands to add the try...whatever to catch errors. Surely it would be simpler to add one boolean variable to the system and when the graphics mode is set make it True, when the graphics commands are called simply check it and if its false just whack out a 'graphics mode not set' error message. <br><br></td></tr></table><br>
<a name="855680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The error mode is kinda correct, imho.<br><br>When you use the Graphics() command, all you're doing is creating a graphics Object to draw images etc onto.  If that object doesn't exist (because you haven't created a Graphics object yet), "attempt to access field or method of null object" is a perfectly acceptable and accurate error message.<br><br>A quick look in the debugger should help you to identify what the problem is.  You're dealing with two objects, for example, a TImage and a TGraphics object.  If you have a Null object error, and you know one object (the image) definitely exists, then the other object is logically where the problem is. <br><br></td></tr></table><br>
<a name="855683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm saying it would make more sense if something like a TNullGraphicsException was thrown. <br><br></td></tr></table><br>
<a name="855693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it returned the object that was null it would be enough for me.  Having said that it wasn't a big deal until the suggestion of 'Professional Error Handling' was raised. <br><br></td></tr></table><br>
<a name="855695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> EdzUp: no I'm saying that you should check if the Graphics() call succeeded and if not, handle the error!<br>As the code order is "predefined" at code time, you surely should be able to do guarantee before calling any drawing command, shouldn't you?<br>Otherwise you have a serious problem with your code, normally called Spaghetti Code<br><br>Azathoth: Bad idea. That would mean that EVERY drawing command would need to check if _graphics &lt;&gt; null.<br>bye performance!<br><br>Whats the problem to just do:<br><pre class=code>
Try
  Graphics(width,height,depth)
Catch(e:object)
  runtimeerror("Error found: " + e.toString() )
endtry

' all drawing commands after this point!
</pre><br>The idea is to check if the graphics creation fails, not to check on every draw if the programmer was just to stupid to put a Graphics before calling it.<br>Thats pure nonsense as the function call order will not change during compilation so you can guarantee that if graphics initialization succeeded -&gt; it will remain working so continue and draw stuff.<br>If it didn't succeed -&gt; you must handle the error and do not draw anything.<br>you do not need any further try - catch - endtry for the graphics post that point! Either the graphics context is created or not, point.<br><br>I think you all totally missunderstood what I pointed out.<br>The drawing stuff does not check for consistency &lt;&gt; null anymore, it would be a total performance overkill to do so. <br><br></td></tr></table><br>
<a name="855700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... but then either<br>a)  the user hasn't forgotten the graphics command<br>or<br>b) the user has already tried a Max2D command before the try/catch<br>Obviously the user could load a dummy image and draw it with Try/Catch but, again, it would be enough for them to remember the graphics command. <br>.<br>As Edzup states <div class="quote"> Before anyone says I know this is common sense: <br></div> and it doesn't take long to either not make the mistake or know what to look for.<br>However, there are enough posts to suggest a few make this mistake probably early on. <br><br></td></tr></table><br>
<a name="855706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Azathoth: Bad idea. That would mean that EVERY drawing command would need to check if _graphics &lt;&gt; null.<br>bye performance! <br></div>Only if its thrown in debug mode. <br><br></td></tr></table><br>
<a name="855707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora: I do agree with you in priciple but im just saying that to people coming to BlitzMax from the other blitz languages the error isnt that explanatory.<br><br>Basically its always thrown as soon as setcolor or any of the drawing commands are called and unlike Blitz3d there is no canvas setup to draw to as default.<br><br>The main thing here I think it would be good in the debugger to whack out a 'Graphics mode not set' error or something like that. This may throw performance down a bit in the debugger but as soon as its compiled properly there wouldnt be a problem. <br><br></td></tr></table><br>
<a name="855708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well then you definitely need to read the documentations now on Try, Catch, Throw!<br><br>Throw is mainly for release mode.<br>Debug mode error prevention can be enforced through assert, as they are simply ignored in release, while Throw -&gt; Try - Catch - EndTry are the release time error handling mechanisms that work independently of the scope depth to allow the programmer to handle errors at all, as you otherwise will only get the well known Memory access violation errors of Blitz3D / BlitzPlus.<br><br><br>tonyg:<br>Users don't move anything. Users get compiled applications. Its the programmer that is in charge to use think about how to handle errors.<br><br>a) if he hasn't forgotten it, then it failed -&gt; will be cought by try catch<br>b) there is no before, its within the try catch and it is the only thing within the try catch. if the generation fails the user will get a usefull error message (if the programmer added one logically)<br><br><br>As mentioned, just copy paste above code and replace your graphics with it. You won't run into the null object error anymore unless you are not even capable of first initializing objects you are working on (thats programmers basics, so I assume that shouldn't be a problem if you post bug reports) <br><br></td></tr></table><br>
<a name="855715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well then you definitely need to read the documentations now on Try, Catch, Throw!<br><br>Throw is mainly for release mode.<br>Debug mode error prevention can be enforced through assert, as they are simply ignored in release, while Throw -&gt; Try - Catch - EndTry are the release time error handling mechanisms that work independently of the scope depth to allow the programmer to handle errors at all, as you otherwise will only get the well known Memory access violation errors of Blitz3D / BlitzPlus. <br></div>BRL seems to disagree as TNullObjectException and TArrayBoundsException only gets thrown in debug mode. It would appear you need to read the documentation yourself. <br><br></td></tr></table><br>
<a name="855716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> TArrayBoundsException is only thrown in debug because the module part that throws it isn't even compiled into in release mode. Arrays would be worthless slow if it was compiled into.<br><br>Don't know about the nullObjectException, as I don't know what would be throwing it, but I would guess its a pure debug level module part as well.<br><br>And I didn't say that try catch can not be used in debug mode. But its main purpose is the release mode usage where you have want to have high performance but still be able to handle errors and try catch throw is the most efficient way to do that (all others enforce polling) <br><br></td></tr></table><br>
<a name="855723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dreamora, You mentioned GA Framework which catches and handles errors on behalf of the user/customer/programmer. It would be nice if Bmax did the same in this case. <br>I have never had a graphics command fail on me so the try/catch around it is redundant imo. <br>I can issue a loadimage/drawimage before the graphics command or within a graphics mode change to cause the problem which the try/catch won't detect.<br>And, of course, I might not put a graphics command in by mistake. <br>Still, I won't fall for it, I doubt BRL will act on it and I really don't understand your  "professional like me" attitude so I'll get my coat. <br><br></td></tr></table><br>
<a name="855728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well it will fail if DX7 can not init a 3d window for example (old graphic cards with no 3D windowed hardware acceleration). The other possibilities are when you start out with OpenGL and need to fallback to DX.<br><br>and no you can not do it within a graphics mode change.<br>BM is not parallel so until the mode change has finished, you can not execute anything else. Nor is DX7 multithreaded so while the context is created, DX won't do anything side a side to it.<br><br><br>My main point was / is that people recently start to flood the bug board with things that are no bugs but lazyness on their end as programmers. BM is a full fledged programming language and "handling" that you want to happen is up to you to do. Originally Graphics didn't even throw an exception, that was introduced to allow you to handle the graphics creation error at all. Most just don't do it and run into the problem of null object errors due to their code errors. BM is a programming language that offers a 2D programming framework, not a "I'll do anything for you" 2D engine, in that case TGB / TXB would be the right choice for you most likely.<br><br>but yeah, I'm off topic as well.<br>Made clear what I meant and will leave this thread on its own as it isn't a bug at all. <br><br></td></tr></table><br>
<a name="855781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just intended to draw BRL's attention to the fact, I believe that this sort of thing should be added to the transition page for Blitz3d&gt;&gt;Max or something like that as people coming from Blitz3d may be thrown by the errors that Max comes out with.<br><br>This is my last post on the subject but I do believe that this does need some work somewhere. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
