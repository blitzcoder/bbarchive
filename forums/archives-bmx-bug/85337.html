<!DOCTYPE html><html lang="en" ><head ><title >What you call END, what does BlitzMax do?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What you call END, what does BlitzMax do?</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >What you call END, what does BlitzMax do?</a><br><br>
<a name="965135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Internally I mean.  <br><br>Because I still get delays in my game when toggling between fullscreen and windowed mode the first time, and when exiting the game.  <br><br>I can minimize the window, and then end the game, and that gets the user back to the desktop quickly, but it still takes a few seconds for the application to actually shut down.<br><br>I'm thinking the two delays are related.  <br><br>And before you ask, no I cannot reproduce this.  I've tried.  But my app is very large and complex, and I have no idea what aspect of it might be causing the issue.  It could be anything from drawing 50 images when loading them without doing a flip to buffer them in video ram, to adding and removing hundreds of items in a linked list causing some kind of internal pointer wonkiness.  Without knowing what sort of cleanup END is doing internally, I can't even begin to guess at what the problem could be, and how to work around it.<br><br>All I do know is it can't be a bug in my code, because the game is running fine right up until I call end, at which point my code is no longer running, and could not be causing the delay.<br><br>[edit]<br><br>I thought of something else I do in my code which could potentially cause some kind of problem.  My code does a lot of recursion.  Specifically, my sprite system has a parent/child system, and the code which calculates the various transformations from one space to another makes use of recursion to do those calculations.  Perhaps this mucks with the memory cleanup module in some way? <br><br></td></tr></table><br>
<a name="965206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This "problem" is usually fixed for me when I free everything myself. <br><br></td></tr></table><br>
<a name="965223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could it be the garbage collector catching up prior to exit then? <br><br></td></tr></table><br>
<a name="965253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Probably.  If you got rid of that delay at the end by forcing everything to be freed yourself as you go, you'd probably just end up spreading that 2 second delay across the whole app.<br><br>Probably fairly easy to check I guess - can you do something at the end of your app just before End to ensure all /most references are freed, force the GC to free, then throw up a Notify, just to check? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
