<!DOCTYPE html><html lang="en" ><head ><title >[OS X] OpenUrl() Broken (with fix)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >[OS X] OpenUrl() Broken (with fix)</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >[OS X] OpenUrl() Broken (with fix)</a><br><br>
<a name="1030233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>OpenURL()</b> doesn't work when specified a folder (visible from MaxIDE, when you right click a project node folder and choose 'Explore').  I think we may be overcomplicating this - the 'open' command that ships on all Macs sorts out all of the hard work for us.  You pass it a string, and it opens the folder in finder if its a directory, opens the URL in the default browser if its a link, or open the file (as if double clicking it) if its a file path.<br><br><i>brl.mod/system.mod/system.macos.bmx</i>'s <b>TMacOSSystemDriver.OpenUrl()</b> can simply be:<br><br><pre class=code>	Method OpenURL( url$ )
		Return system_( "open "" + url.Replace("~q","") + "~q" )
	End Method</pre>Don't forget to add an <b>Import Pub.StdC</b> to the top so that it will compile.  This also makes <b>bbOpenUrl()</b> in <i>system.macos.m</i> redundant, so could be removed if so desired.<br><br>If this could be implemented in the next release, it would make the Mac implementation as flexible as the Windows implementation (hopefully :P).<br><br>Cheers! <br><br></td></tr></table><br>
<a name="1030746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Doesn't compile as is - I assume it's supposed to be:<br><br>		Return system_( "open ~q" + url.Replace("~q","") + "~q" )<br><br>Also, what about URL's with quotes in them? I thought quote was a valid URL character.<br><br>Also, what about the 'stringByAddingPercentEscapesUsingEncoding' call currently in bbOpenURL? Seems like it might be important... <br><br></td></tr></table><br>
<a name="1030749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Doesn't compile as is - I assume it's supposed to be:<br><br>Return system_( "open ~q" + url.Replace("~q","") + "~q" ) <br></div><br>Yep, that's the one.  I swapped from single quotes to double quotes after posting, as it makes a lot more sense.  Sorry... :-)<br><br><div class="quote"> Also, what about URLs with quotes in them? I thought quote was a valid URL character. <br></div><br>Quotes should be encoded using "%blah", as far as I understand it.<br><br>See the RFC pointed to <a href="http://www.blooberry.com/indexdot/html/topics/urlencoding.htm" target="_blank">here</a>.<br><br><div class="quote"> Also, what about the 'stringByAddingPercentEscapesUsingEncoding' call currently in bbOpenURL? Seems like it might be important.. <br></div><br>I figured this was to correct broken URLs that were passed in and not properly encoded.  In my opinion, apps should know to encode their URLs properly.  AFAIK, Windows' <b>ShellExecute</b> doesn't check URLs for valid characters, and it could be argued that Mac's implementation shouldn't either.  Maybe if <b>OpenUrl()</b> was designed specifically for URLs, then it might be a nice thing to add, but as it's a multi-function for also opening documents and executables too, I would argue its expecting a bit too much from this multi-purpose command. <br><br></td></tr></table><br>
<a name="1030753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>So stringByAddingPercentEscapesUsingEncoding should take care of the quote issue?<br><br>I vaguely remember adding it due to a user request in the first place - removing it to accomodate a different user's request (ie: yours!) feels a bit self-defeating.<br><br>Will have a go at whipping up our own version of the above anyway... <br><br></td></tr></table><br>
<a name="1030757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Actually, it sort of IS working with folders.<br><br>All is fine on 10.4 anyway, but on 10.5 the finder window needs to have been open or you have to manually click on finder yourself.<br><br>Investigating further... <br><br></td></tr></table><br>
<a name="1030758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Ok, that's wrong.<br><br>Works OK on 10.4, definitely borked on 10.6... <br><br></td></tr></table><br>
<a name="1030926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ha,<br><br>This is fun:<br><br>'system open' works with URL dir's (eg: file:/users/blah) only on 10.6<br><br>'workspace.openUrl' works with URL dir's only on 10.4! <br><br></td></tr></table><br>
<a name="1030951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Typical :-/ . Gotta love OS X's point release differences...<br><br>Have you experimented with the "Show In Finder" flag (check the man page for 'open')? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
