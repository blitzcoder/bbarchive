<!DOCTYPE html><html lang="en" ><head ><title >Potential Disaster Using Desktop As Default Res!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Potential Disaster Using Desktop As Default Res!</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >Potential Disaster Using Desktop As Default Res!</a><br><br>
<a name="901464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Disaster because it appears we can't trap for the error!<br><br>When creating a graphics resolution that is too large to create surface areas in VRAM, Blitzmax just exists. No trapping, or nothing. When working in the IDE with the console window up, the console window displays this message (in Dx mode):<br><br>DXERROR err=UNKNOWN:-2005531925 747<br><br>To replicate this error all you have to do is create a full screen resolution too high for your GPU to create vram surfaces. This means your monitor has to support it for normal desktop use, but when a game uses it for page flipping, etc, there's not enough vram available. Happens in both OpenGL and DirectX modes.<br><br>My desktop runs 1680x1050 no problem, but of course in a game situation, this requires a ton of Vram space which my crappy card does not have, that's how I found this bug.<br><br>Would be nice if we would trap for this, because alot of programmers are using desktop resolutions for their default game resolution and if desktop res requires too much vram, it will trigger this bug and the program will just exit. No bombs, no crashes, just stops running.<br><br>Can others please try to replicate the problem?<br><br><pre class=code>
SetGraphicsDriver D3D7Max2DDriver()
'SetGraphicsDriver GLMax2DDriver()
Global Ok:Int
'
ok = GraphicsModeExists(1680,1050,32,0)
'
If ok
 If Graphics(1680,1050,32,0) = Null
  Print "Error creating Graphics Screen!" ' &lt;&lt;&lt; never gets trapped!
  End
 EndIf
Else
 Print "Mode Not Available"
EndIf
</pre> <br><br></td></tr></table><br>
<a name="901813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is a VERY serious bug. Can someone from the official BMax team please reply? <br><br></td></tr></table><br>
<a name="901952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You didn't even bother to list your hardware specs. <br><br></td></tr></table><br>
<a name="902178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hardware specs are irrelevant in this case. However, I found the bug while developing on:<br><br>Ram: 512mb<br>CPU: Intel Celeron 2.93 ghz<br>GPU: Intel 82845G/GL/GE/PE/GV Graphics Controller<br><br>Again, those defaulting to desktop resolution for their games are the ones this could affect. Granted, it might be rare, but the potential for problems exist. <br><br></td></tr></table><br>
<a name="902180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works fine on my computer, no crashes or errors. It runs through without printing anything either.<br><br>I noticed you call graphics with the last parameter as -1, but check for it with the last parameter as 0, are they related? <br><br></td></tr></table><br>
<a name="902300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Plash - I've updated the example source to be 0 in both sections for the hz parameter. This just causes the device to use a default setting.<br><br>The bug only shows up if you try to create a graphics screen larger than your VRAM will allow. <br><br></td></tr></table><br>
<a name="902471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bumpty bump bump.... <br><br></td></tr></table><br>
<a name="902517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't hassle them, I don't think they like it ;-)  Stay on their good side... <br><br></td></tr></table><br>
<a name="902548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok..thanks. <br><br></td></tr></table><br>
<a name="903027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone have any ideas how to trap for this? <br><br></td></tr></table><br>
<a name="903100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried Try Catch round it?  I suppose that doesn't work too? <br><br></td></tr></table><br>
<a name="904056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> This error happened again, this time on a Win 98 box. The game defaulted to desktop res, 1024x768x32 and there was not enough vram and the error occured. Still no way to trap the error. <br><br></td></tr></table><br>
<a name="904072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does the desktop window still exist when an app is running fullscreen?<br><br>Didn't think it did as you can see it redrawing after closing a fullscreen app on cruddy old systems.<br><br>I think you need to provide more information: Operating system, type of graphics hardware, vRam, DirectX version, and the like.  Ultimately its probably nothing to do with Blitzmax, specifically.<br><br>One more thing; Try using CreateGraphics() instead of just Graphics(). <br><br></td></tr></table><br>
<a name="904150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you read how much VRAM the system has? <br><br>If so, you can pre-calc how much width x height x bpp will use, double it (for page flipping) and if the video card can't cope with it, then reduce the resolution to something acceptable. <br><br></td></tr></table><br>
<a name="904152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can you read how much VRAM the system has?  <br></div>I had a function to do that but it turned out to return junk half the time. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
