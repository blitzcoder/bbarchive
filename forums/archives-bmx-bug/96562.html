<!DOCTYPE html><html lang="en" ><head ><title >bmk is broken for XCode 4.2 on Lion</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >bmk is broken for XCode 4.2 on Lion</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >bmk is broken for XCode 4.2 on Lion</a><br><br>
<a name="1117829"></a>

<a name="1117831"></a>

<a name="1117832"></a>

<a name="1117833"></a>

<a name="1117834"></a>

<a name="1117835"></a>

<a name="1117838"></a>

<a name="1117839"></a>

<a name="1117840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Continuing on from this thread ( <a href="http://www.blitzbasic.com/Community/posts.php?topic=96152" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=96152</a> ) because I'm not sure my issue is the same as the original poster's issue, plus a lot of experimentation has gone on with help from other forum members before I came to the conclusion below.<br><br>Basically I installed BlitzMax 1.44 on my new Macbook Air with Lion on it a few months back and everything was fine.  Then recently I upgraded to XCode 4.2 (from 4.0 or 4.1) and suddenly Blitzmax won't build modules with errors like the one below for one of my framework modules. Note that I now have 10.6 and 10.7 SDKs installed as a result of upgrading xcode.  I haven't done anything else fancy to my system at all.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Building HolidayBonus
Compiling:GAGMacLib.m
In file included from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:12,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:6,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/AppKit.framework/Headers/AppKit.h:10,
                 from /Users/jake/Desktop/Source/New Source/include/GAGMacLib.m:1:
/Developer/SDKs/MacOSX10.6.sdk/usr/include/stdarg.h:4:25: error: stdarg.h: No such file or directory
In file included from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:16,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:6,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/AppKit.framework/Headers/AppKit.h:10,
                 from /Users/jake/Desktop/Source/New Source/include/GAGMacLib.m:1:
/Developer/SDKs/MacOSX10.6.sdk/usr/include/float.h:8:24: error: float.h: No such file or directory
In file included from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/DriverServices.h:32,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/CarbonCore.h:125,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/AE.framework/Headers/AE.h:20,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:21,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/Foundation.framework/Headers/NSURLError.h:17,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:81,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/AppKit.framework/Headers/AppKit.h:10,
                 from /Users/jake/Desktop/Source/New Source/include/GAGMacLib.m:1:
/Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MachineExceptions.h:29:23: error: xmmintrin.h: No such file or directory
In file included from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/DriverServices.h:32,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/CarbonCore.h:125,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/AE.framework/Headers/AE.h:20,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:21,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/Foundation.framework/Headers/NSURLError.h:17,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:81,
                 from /Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/AppKit.framework/Headers/AppKit.h:10,
                 from /Users/jake/Desktop/Source/New Source/include/GAGMacLib.m:1:
/Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MachineExceptions.h:216: error: expected specifier-qualifier-list before '__m128'
Build Error: failed to compile /Users/jake/Desktop/Source/New Source/include/GAGMacLib.m
Process complete
</textarea><br><br>The problem appears to be Lion fix that was added in BlitzMax 1.43 to bmk_util.bmx in the src/bmk folder.  It contains a reference to the isysroot and the 10.6 sdk in two places like this:<br><br><pre class=code>" -isysroot /Developer/SDKs/MacOSX10.6.sdk"</pre><br><br>This seems to be making the gcc and g++ look in the wrong places.  I've changed $PATH to try out many things, but none seem to work.  I tried altering bmk_util.bmk but of course I can't compile it into bin/bmk because I can't compile modules.<br><br>This led me to try an experiment where I copied bin/bmk from BlitzMax 1.42 over my copy.  Now the module compiles!  Problem is that full-screen doesn't work in my game because I believe that was a known issue that was fixed with BlitzMax 1.43 by the isysroot code above.  Mark's comment in versions.txt says:<br><br><pre class=code>"* Fullscreen mode doesn't seem to work on Lion with 10.7 SDK, but does with 10.6 so kludged BMK to use 10.6 when building on Lion.
Not at all pretty, but will have to do for now as I really have no idea what is going on with this one."
</pre><br><br>It sounds like the "proper" solution would be to get full screen working on the 10.7 SDK rather than trying some path magic that seems to be failing on updated systems.<br>   <br>Summary:<br><br>Basically the 1.44 bmk file is not compatible with a updated Mac using Lion and Xcode 4.2 and results in the failure of module building.  More and more people will upgrade XCode soon and Blitmax will also break for them, so it would be great if this can be given high priority as a fix.  Thanks in advance!<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1117857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just out of curiosity, does it work if you use Brucey's BMK_NG? <br><br></td></tr></table><br>
<a name="1117859"></a>

<a name="1117860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Fullscreen mode doesn't seem to work on Lion with 10.7 SDK<br> <br></div><br>I noticed that -- pretty weird. I did find this, which supposedly explains how to add full-screen support from the editor. No idea how that would be done programmatically, but maybe it'll point in the right direction...<br><br><a href="http://vinceyuan.blogspot.com/2011/07/making-your-mac-app-support-full-screen.html" target="_blank">http://vinceyuan.blogspot.com/2011/07/making-your-mac-app-support-full-screen.html</a><br><br>And another way, which sounds pretty awkward...<br><br><a href="http://itracki.com/dev/mac-tutorials/mac-tutorial-os-lion-app-fullscreen/" target="_blank">http://itracki.com/dev/mac-tutorials/mac-tutorial-os-lion-app-fullscreen/</a><br><br>How on earth did Apple manage to stuff this up, or did they have a wise explanation for it?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1117893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @xlsior: Do you have a link?  I searched with no success.<br><br>@BlitzSupport: Thanks, yeah sounds a bit awkward to say the least.  It's crazy Apple have altered this.  I guess they have some masterplan. <br><br></td></tr></table><br>
<a name="1117904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://code.google.com/p/bmkng/downloads/list" target="_blank">http://code.google.com/p/bmkng/downloads/list</a><br><br>Catch-22: It's source code, so you'd need to compile it before you can use it.<br>But it has some major advantages over the standard BMK, including being multi-threaded so it can recompile many modules significantly faster. <br><br></td></tr></table><br>
<a name="1118362"></a>

<a name="1118363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Couple links on Lion full-screen:<br><a href="http://www.cocoabob.net/?p=789" target="_blank">http://www.cocoabob.net/?p=789</a><br><br><a href="http://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html" target="_blank">http://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html</a><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1123931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, this appears to be fine now on 1.45 but I don't know why. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
