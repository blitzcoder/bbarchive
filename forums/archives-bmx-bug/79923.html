<!DOCTYPE html><html lang="en" ><head ><title >MouseX() and MouseY() don't update</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MouseX() and MouseY() don't update</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >MouseX() and MouseY() don't update</a><br><br>
<a name="897776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Spent ages this morning trying to figure out why my map screen automatically scrolled itself to the top left hand corner sometimes at startup.  Turns out there's a problem with Blitzmax.<br><br><pre class=code>Graphics 800,600

While Not KeyDown(KEY_ESCAPE)
	Cls
	DrawText "MouseX:" + MouseX(),10,10
	DrawText "MouseY:" + MouseY(),10,30
	Flip
Wend</pre><br><br>Run code, move the mouse so that when the window opens, it'll be somewhere in the 800x600 window.  Then leave it still until the program starts to run.<br><br>Both MouseX() and MouseY() report 0 until you move the mouse again.  It *should* start off at the actual mouse coordinates, not 0,0. <br><br></td></tr></table><br>
<a name="897793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same here. If you add a movemouse command it helps. The mouselocation array, which mousex() and mousey() interrogates, is only updated by the EVENT_MOUSEMOVE. <br><br></td></tr></table><br>
<a name="897797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It works fine here, although there does seem to be some delay before the value gets updated?<br><br>Does sticking a pollsystem immediately before or after the Graphics command make any difference?<br><br>Has this been reported before, it seems familiar?<br><br>[edit]<br>A quick kludge shows the delay to be consistently around 100-&gt;120ms.<br><br>If that help any. ;o)<br>[/edit] <br><br></td></tr></table><br>
<a name="897805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pollsystem doesn't help and there's no change in the values even after leaving it for minutes. <br><br></td></tr></table><br>
<a name="897814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What tonyg said.<br><br>I'm currently using MoveMouse as a temporary 'fix' but I don't necessarily want the mouse to move to a specific location at startup so this isn't ideal.<br><br>I thought I had reported this before but a quick search turned up nothing... unless its gone into the bug bin, but it shouldn't have considering its still a problem.<br><br>[edit] Just looked, nothing there except somebody ages ago reporting a similar problem on Mac. <br><br></td></tr></table><br>
<a name="897839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrTAToad</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> On the Mac here, the initial values are 0,0 - but as soon as the mouse is moved, the positions are updated straight away. <br><br></td></tr></table><br>
<a name="897903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> On the Mac here, the initial values are 0,0 - but as soon as the mouse is moved, the positions are updated straight away.  <br></div>That's exactly what the PC version is doing.  But I want the initial values to be relevant to wherever the mouse is. <br><br></td></tr></table><br>
<a name="897908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh. I thought that was a feature....  it's always done that :-p <br><br></td></tr></table><br>
<a name="897909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Under what circumstances would you want to know where the mouse *isn't*? ;) <br><br></td></tr></table><br>
<a name="897912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's BlitzMax... I'm never surprised when it tells you stuff you don't want to know. <br><br></td></tr></table><br>
<a name="897923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrTAToad</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But I want the initial values to be relevant to wherever the mouse is <br></div><br>It certainly should to start with... <br><br></td></tr></table><br>
<a name="897931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is a slightly better workaround :<br><pre class=code>
Local MouseEvent:TEvent=CreateEvent(EVENT_MOUSEMOVE)
EmitEvent(MouseEvent)
'Delay 100
Graphics 800,600
While Not KeyDown(KEY_ESCAPE)
	Cls
	DrawText "MouseX:" + MouseX(),10,10
	DrawText "MouseY:" + MouseY(),10,30
	Flip
Wend
</pre> <br><br></td></tr></table><br>
<a name="898268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @gfk - Hmm, perhaps I'm thinking of the Mac report then.<br><br>This is weird. Am I the only person this works for?<br><br>Could one of you fellas humour me and try this with a standalone exe? <br><br></td></tr></table><br>
<a name="898335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gfk, can't you get the mouse co-ords from windows, and set them to that? I understand it is a bug of some sort though. <br><br></td></tr></table><br>
<a name="898890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just tested this and it runs as expected. If the mouse is out of the window at program start up, mouse is 0,0. If the mouse is already inside the window at program start up, mouse x,y is reported and accurate. I'm not seeing a problem. <br><br></td></tr></table><br>
<a name="898902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm not seeing a problem. <br></div><br>What are your specs? <br><br></td></tr></table><br>
<a name="898993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/posts.php?topic=69395#776371" target="_blank"> Blimey, the things you find while looking for something else </a> <br><br></td></tr></table><br>
<a name="899372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Windows XP, Intel Integrated, 512mb, Intel Celeron <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
