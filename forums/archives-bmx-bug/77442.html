<!DOCTYPE html><html lang="en" ><head ><title >BlitzMax with two graphics cards on OS X Leopard</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BlitzMax with two graphics cards on OS X Leopard</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >BlitzMax with two graphics cards on OS X Leopard</a><br><br>
<a name="866574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> All full screen samples fire a compile error "invalid share context" on Leopard when two graphics cards (nVidia 7300GT) are installed. Windowed samples still work fine. <br><br></td></tr></table><br>
<a name="866856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way, Eschalon: Book I also crashes when it tries to initialize full screen mode; windowed mode is fine.<br><br>On further note, I have three displays connected to those two cards, which probably influences the behavior.<br><br>I could really use working multi-monitor support. ;-) <br><br></td></tr></table><br>
<a name="869209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> A small update: This problem does not occur with BlitzMax on Vista on the same hardware. I haven't tried GNU/Linux, maybe somebody else wants to do that. <br><br></td></tr></table><br>
<a name="869340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> well maybe apple just has no SLI capable drivers but two single GPU and in that case you can not have it on both. <br><br></td></tr></table><br>
<a name="869400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Those cards don't run in SLI mode on Vista either, so the problem is probably somewhere else, presumably in the OS X-specific code where BlitzMax initializes the fullscreen mode. Since non-BlitzMax apps don't have a problem with doing that on OS X on that machine, it seems the bug is in BlitzMax.<br><br>For now, it would be ok to just see a fullscreen app work on the primary display. Of course, on the long run, proper multi-display support - as e.g. pyglet offers it - would be even nicer. <br><br></td></tr></table><br>
<a name="869449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you test it on Windows in OpenGL or DX?<br>DX allows quite a lot of stuff as it handles many things internally. Stuff that OpenGL will not allow just like that, stuff for which you would have to write handling code in your application.<br><br>I think thats exactly what happens here as BM will choose 1 single gpu as its primary device and just use that. But Vista / DX seem to share it depending on the position.<br><br>On OpenGL (at least on OSX) you have to do that yourself if you want 3D accelration or create it on all which BM does not do. It uses the primary as any game, thats it. (with sli or virtual sli both together could form a single device)<br><br>The problem is not multi monitor support here but that you try to handle 2 distinct GPUs instead of a single one.<br><br>But some way to define the "fullscreen" on a multi screen system would be nice and definitely needed for a 2008 pure game oriented language. <br><br></td></tr></table><br>
<a name="869478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is that BlitzMax apps simply crash on OS X when you have two graphics cards and go full screen with your app. And by full screen I simply mean what the Digesteroids sample game does, for example; so I'm not talking about anything fancy.<br><br>This one liner is all the code that you need to reproduce the problem and run into the 'invalid shared context' error:<br><br><pre class=code>
Graphics 1024,768,32,60
</pre><br><br><br>The OpenGL driver on Windows works properly on my setup - the screen that I assigned as primary device in Windows' Display Control Panel goes fullscreen, the two others go dark, as it should be. On OS X, the program simply crashes instead.<br><br>So what I think what happens is that BlitzMax's OS X drivers don't properly recognize a two cards setup and try to initialize them as one card, which leads to the shared context crash. <br><br>My reference to pyglet was only a wishful-thinking feature-request, by the way. From what I've seen so far, it looks as if they've covered this entire multi-screen/multi-graphics card thing quite nicely with their feature set. <br><br></td></tr></table><br>
<a name="869500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well BMs driver on any OS only takes the primary graphics card (you can choose yourself which you want there are functions for that).<br><br>Its the OS responsobility to handle multiple cards -&gt; unified screen situations correctly without crashing the application not the app as this is definitely a driver and OS level context handling thing. Something you definitely should not have to touch in your application.<br><br>But simplest way around it on OSX would be borderless windowed fullscreen instead of real fullscreen. <br><br></td></tr></table><br>
<a name="869529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The funny thing is that only Blitzmax apps have that problem; Doom 3, UT2004 or whatever else run nicely in fullscreen. Eschalon: Book I goes to Nirvana like all samples. So I still think that there is something wrong in the Blitzmax code.<br><br>Anyway, using windowed mode as you suggest is a good workaround. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
