<!DOCTYPE html><html lang="en" ><head ><title >png loader error</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >png loader error</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >png loader error</a><br><br>
<a name="1092361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >freedo</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> the png loader example routine in the help section will not run...<br><br>have tried saving it to the same directory in case of a path conflict...but get same error..<br><br>I get compiler error... module does not match command line module..<br><br><br>anyone..? <br><br></td></tr></table><br>
<a name="1092365"></a>

<a name="1092372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Almost certainly not a bug as I use PNG format almost exclusively for years in Blitzmax and never had this.<br><br>Unless you're running on Linux of course, in which case, could be anything.<br><br>[edit] missed 'exclusively' out :D<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1092366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> try rebuilding the modules and be sure you are using the latest version of BMax? <br><br></td></tr></table><br>
<a name="1092385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >freedo</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont run linux.......running win 7<br><br>Rebuild module's.....are they not built already....?<br><br>how do I rebuild them..? <br><br></td></tr></table><br>
<a name="1092388"></a>

<a name="1092389"></a>

<a name="1092390"></a>

<a name="1092391"></a>

<a name="1092392"></a>

<a name="1092393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What png loader example?<br><br>The user command is LoadImage (which... has no example).<br><br>BTW, I think your modules are fine.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1092395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >freedo</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the graaphics section of the modules...<br><br>The example "loadpixmapPNG" <br><br></td></tr></table><br>
<a name="1092398"></a>

<a name="1092400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> if it has this at the top<br><br><pre class=code>

Strict

Rem
bbdoc: Graphics/PNG loader
about:
The PNG loader module provides the ability to load PNG format #pixmaps.
End Rem
Module BRL.PNGLoader
</pre><br><br>It is module source not an example you can run.<br><br>If you are after some tutorials to load images and so forth, you may be best off looking at <a href="/posts.php?topic=42519" target="_blank">some tutorials</a> in the tutorials section of this forum.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1092417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >freedo</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok.. cant see any tutorial's on this....<br><br>So can this (Blitzmax) load &amp; save png file's or not ..?<br><br>If so...How..? <br><br></td></tr></table><br>
<a name="1092422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >freedo</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> also...<br><br>type in the editor..... loadpixmapPNG <br><br>you will see its a command....press f1 to get an explanation....<br><br>click source to get an example.......<br><br>the same way you find out about any blitz command..<br><br>But this example does not run....and Ive pasted it as the following..<br><br><br><br><br>Strict<br><br>Rem<br>bbdoc: Graphics/PNG loader<br>about:<br>The PNG loader module provides the ability to load PNG format #pixmaps.<br>End Rem<br>Module BRL.PNGLoader<br><br>ModuleInfo "Version: 1.04"<br>ModuleInfo "Author: Mark Sibly"<br>ModuleInfo "License: Blitz Shared Source Code"<br>ModuleInfo "Copyright: Blitz Research Ltd"<br>ModuleInfo "Modserver: BRL"<br><br>ModuleInfo "History: 1.04"<br>ModuleInfo "History: libpng update to 1.2.12."<br>ModuleInfo "History: Extra load error handling."<br>ModuleInfo "History: 1.03 Release"<br>ModuleInfo "History: Added Gray/Alpha support"<br>ModuleInfo "History: 1.02 Release"<br>ModuleInfo "History: Fixed palettized/grayscale support"<br><br>Import BRL.Pixmap<br>Import Pub.LibPNG<br><br>Private<br><br>Global png_stream:TStream<br><br>Function png_read_fn( png_ptr,buf:Byte Ptr,size )<br>	Return png_stream.ReadBytes( buf,size )<br>End Function<br><br>Function png_write_fn( png_ptr,buf:Byte Ptr,size )<br>	Return png_stream.WriteBytes( buf,size )<br>End Function<br><br>Function png_flush_fn( png_ptr )<br>	png_stream.Flush<br>End Function<br><br>Public<br><br>Rem<br>bbdoc: Load a Pixmap in PNG format<br>about:<br>#LoadPixmapPNG loads a pixmap from @url in PNG format.<br><br>If the pixmap cannot be loaded, Null is returned.<br>End Rem<br>Function LoadPixmapPNG:TPixmap( url:Object )<br><br>	png_stream=ReadStream( url )<br>	If Not png_stream Return<br><br>	Local buf:Byte[8]<br>	<br>	If png_stream.ReadBytes( buf,8 )&lt;&gt;8 Or png_sig_cmp( buf,0,8 )&lt;&gt;0<br>		png_stream.Close<br>		png_stream=Null<br>		Return<br>	EndIf<br>		<br>	Local png_ptr=png_create_read_struct( "1.2.12",Null,Null,Null )<br>	<br>	' check for valid png_ptr<br>	If Not png_ptr Then<br>		png_stream.Close<br>		png_stream=Null<br>		Return<br>	End If<br>	<br>	Local info_ptr=png_create_info_struct( png_ptr )<br>	<br>	' check for valid info_ptr<br>	If Not info_ptr Then<br>		png_stream.Close<br>		png_stream=Null<br>		png_destroy_read_struct Varptr png_ptr,Null,Null<br>		Return<br>	End If<br>	<br>	png_set_sig_bytes png_ptr,8<br><br>	png_set_read_fn png_ptr,Null,png_read_fn<br>		<br>	png_read_png png_ptr,info_ptr,PNG_TRANSFORM_EXPAND|PNG_TRANSFORM_STRIP_16,0<br><br>	Local width,height,bit_depth,color_type,interlace_type,compression_type,filter_method<br>	png_get_IHDR png_ptr,info_ptr,width,height,bit_depth,color_type,interlace_type,compression_type,filter_method<br>				<br>	Local pixmap:TPixmap<br>			<br>	If bit_depth=8<br>		Local pf<br>		Select color_type<br>		Case PNG_COLOR_TYPE_GRAY<br>			pf=PF_I8<br>		Case PNG_COLOR_TYPE_RGB<br>			pf=PF_RGB888<br>		Case PNG_COLOR_TYPE_RGBA<br>			pf=PF_RGBA8888<br>		Case PNG_COLOR_TYPE_GRAY_ALPHA<br>			pixmap=CreatePixmap( width,height,PF_RGBA8888 )<br>			Local rows:Byte Ptr Ptr=png_get_rows( png_ptr,info_ptr )<br>			For Local y=0 Until height<br>				Local src:Byte Ptr=rows[y]<br>				Local dst:Byte Ptr=pixmap.PixelPtr(0,y)<br>				For Local x=0 Until width<br>					Local a=src[0]<br>					Local i=src[1]<br>					dst[0]=i<br>					dst[1]=i<br>					dst[2]=i<br>					dst[3]=a<br>					src:+2<br>					dst:+4<br>				Next<br>			Next<br>		End Select<br>		If pf<br>			pixmap=CreatePixmap( width,height,pf )<br>			Local rows:Byte Ptr Ptr=png_get_rows( png_ptr,info_ptr )<br>			For Local y=0 Until height<br>				CopyPixels rows[y],pixmap.PixelPtr(0,y),pf,width<br>			Next<br>		EndIf<br>	EndIf<br>		<br>	png_destroy_read_struct Varptr png_ptr,Varptr info_ptr,Null<br><br>	png_stream.Close<br>	png_stream=Null<br>	Return pixmap<br><br>End Function<br><br>Rem<br>bbdoc: Save a Pixmap in PNG format<br>about:<br>#SavePixmapPNG saves @pixmap to @url in PNG format. If successful, #SavePixmapPNG returns<br>True, otherwise False.<br><br>The optional @compression parameter should be in the range 0 to 9, where<br>0 indicates no compression (fastest) and 9 indicates full compression (slowest).<br>End Rem<br>Function SavePixmapPNG( pixmap:TPixmap,url:Object,compression=5 )<br><br>	compression=Min( Max( compression,0 ),9 )<br><br>	png_stream:TStream=WriteStream( url )<br>	If Not png_stream Return<br><br>	Local png_ptr=png_create_write_struct( "1.2.12",Null,Null,Null )<br>	Local info_ptr=png_create_info_struct( png_ptr )<br><br>	png_set_write_fn png_ptr,Null,png_write_fn,png_flush_fn<br><br>	Local bitdepth,colortype,transform<br>	<br>	Select pixmap.format<br>	Case PF_I8<br>		colortype=PNG_COLOR_TYPE_GRAY<br>	Case PF_RGB888<br>		colortype=PNG_COLOR_TYPE_RGB<br>	Case PF_BGR888<br>		colortype=PNG_COLOR_TYPE_RGB<br>		transform=PNG_TRANSFORM_BGR<br>	Case PF_RGBA8888<br>		colortype=PNG_COLOR_TYPE_RGBA<br>	Case PF_BGRA8888<br>		colortype=PNG_COLOR_TYPE_RGBA<br>		transform=PNG_TRANSFORM_BGR<br>	Default<br>		colortype=PNG_COLOR_TYPE_RGBA<br>		pixmap=pixmap.Convert( PF_RGBA8888 )<br>	End Select<br><br>	png_set_compression_level png_ptr,compression<br><br>	png_set_IHDR png_ptr,info_ptr,pixmap.width,pixmap.height,8,colortype,PNG_INTERLACE_NONE,PNG_COMPRESSION_TYPE_DEFAULT,PNG_FILTER_TYPE_DEFAULT<br>	<br>	Local rows:Byte Ptr[pixmap.height]<br>	For Local i=0 Until pixmap.height<br>		rows[i]=pixmap.PixelPtr( 0,i )<br>	Next<br>	<br>	png_set_rows png_ptr,info_ptr,rows<br><br>	png_write_png png_ptr,info_ptr,transform,Null<br><br>	png_destroy_write_struct Varptr png_ptr,Varptr info_ptr,Null<br>	<br>	png_stream.Close<br>	png_stream=Null<br>	<br>	Return True<br>	<br>End Function<br><br>Private<br><br>Type TPixmapLoaderPNG Extends TPixmapLoader<br><br>	Method LoadPixmap:TPixmap( stream:TStream )<br>	<br>		Return LoadPixmapPNG( stream )<br>	<br>	End Method<br>	<br>End Type<br><br>New TPixmapLoaderPNG <br><br></td></tr></table><br>
<a name="1092441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> click source to get an example <br></div><br>That is not an example. It is the source code for this command.<br>Example:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics 800, 600

pngtest = LoadImage("C:\Users\Bram\Desktop\Engine2.0\warner\samples\media\checker.png")

Repeat

	Cls
	DrawImage pngtest, MouseX(), MouseY()
	Flip

Until KeyHit(27) Or AppTerminate()

End
</textarea> <br><br></td></tr></table><br>
<a name="1092509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, you're trying to compile and run the PNG Loader module.<br><br><br><br><br>:D<br><br>Use LoadImage("myimage.png") to load a PNG image. <br><br></td></tr></table><br>
<a name="1092530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >freedo</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didnt realize I was compiling a module...?<br><br>I got it now...<br><br>Thank's for your help guy's... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
