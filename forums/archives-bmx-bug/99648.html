<!DOCTYPE html><html lang="en" ><head ><title >Debug behaviour with global array init</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Debug behaviour with global array init</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >Debug behaviour with global array init</a><br><br>
<a name="1170836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure if this is a bug, just noting as I ran into it.<br><br>If you run this in Debug mode, it errors out with a complaint about indexing beyond the end of the array, which I assume is something to do with the global array <i>dtable</i> not having been initialised before it's accessed.<br><br>However, the weird thing is that it runs and works perfectly in Release mode!<br><br><pre class=code>
' From code by Nilium...

InitBase64

Const etable$ = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
Global dtable@[256]

Function InitBase64 ()
	For Local __di:Int = 0 To etable.Length-1
	    dtable[etable[__di]] = __di
		Print dtable[etable[__di]]
	Next
End Function
</pre><br><br>No big deal, just shifted the Global to the top, but wondered if Debug mode should be flagging it since it's clearly initialised in Release mode. <br><br></td></tr></table><br>
<a name="1170839"></a>

<a name="1170840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's not an error, it's just due to the release mode that process declarations while "exporting" to exe, so the global array is created before all function calls as it's in the "main"<br><br>It's probably an effect of the smart declaration of blitzmax, that in opposite to C/C++ does not ask us to declare a function before to call it<br>for eg: in C, you would not have call your function without running an error, as the function does not exist at the moment of the call (that's the most important reason we use headers)<br><br>In debug mode, it might have a deal with the ability to run a kind of "line by line analysis"<br><br>Then, As you declared the global array after initializing the Base64, so the array is Null at the moment of the function call<br><br><br>ps : and for sure, if there were a bug here, it would probably be in the release mode that allow this (IMHO, it should run an exception, 'cause of the messy declaration)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
