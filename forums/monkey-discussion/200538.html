<!DOCTYPE html><html lang="en" ><head ><title >game.data Suggestions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >game.data Suggestions</h1><a href="forums.php" >Monkey Archive Forums</a>/<a href="topics.php?forum=510" >Monkey Discussion</a>/<a href="#bottom" >game.data Suggestions</a><br><br>
<a name="2004156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wagenheimer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suggest game.data subfolders which is specific to platforms!<br><br>I have .wav (Iphone), .ogg (Android) and .mp3 (Flash) sound files in my game.data folders. I have multiples #if in my code to load the correspondent files.<br><br>But no matter what Plataform I build, it puts all the files on it.<br><br>I suggest somethis like this:<br>all game.data files is used in all plataforms, and there is custom subfolders for files specific to custom plataforms.<br><br>game.data\ios<br>game.data\flash<br>game.data\android<br><br>Is is possible? <br><br></td></tr></table><br>
<a name="2004150"></a>

<a name="2004153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This would be nice or something like it.<br><br>Currently for Flash Monkey now embeds all the data files into the swf, also the Android APK does something similar... with HTML5 you could just delete the unneeded files from the build folder. <br><br></td></tr></table><br>
<a name="2004180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pudsy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good suggestion.<br><br>One possible extension of that per-target data folders idea...<br><br>Perhaps allow any files that exist in the custom data folders to override &amp; replace the corresponding file in the "default/generic target" data folder if the path/filename matches?<br><br>Might be useful for different size images etc.<br><br>For now, unless anyone has any better ideas, selective loading via preprocessor #if statements is all I can come up with too. Maybe an auto-conversion is possible at compile time? But I guess you'd want some control over compression/quality. <br><br></td></tr></table><br>
<a name="2004583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm voting for it ;-) <br><br></td></tr></table><br>
<a name="2004646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hima</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Totally agreed with this. It's a very good suggestion and I'd love to see it gets implemented <br><br></td></tr></table><br>
<a name="2008898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any updates on this? I'm just starting up my first Monkey project and I'm immediately struck by the necessity to have different resolutions of art for e.g Windows/iOS/Android due to different aspect ratios. The "game.data/platform" solution would be excellent. <br><br></td></tr></table><br>
<a name="2008932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >luggage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same here really.  There's no way I can use the same assets for an XNA 1280x720 and an Android game.  <br><br>Going with game.data/platform would work fine, especially with Pudsy's suggestion of having a "default" folder to load from that it falls back to if the item isn't in the platform specific one.  <br><br>It's mainly the packaging reasons really, it's easy enough to wrap the load function to append a platform but you don't want all of the hires Xbox assets built into an Android distribution. <br><br></td></tr></table><br>
<a name="2009096"></a>

<a name="2009146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess one would have to modify the "target.monkey" file to acheive this.<br><br>	Method CreateDataDir( dir$,embedTextFiles?=True )<br>		dir=RealPath( dir )<br>		<br>		DeleteDir dir,True<br>		CreateDir dir<br>		If FileType( dataPath )=FILETYPE_DIR<br>			CopyDir dataPath,dir,False<br>		Endif<br><br>...Add something like this after that code:<br><br>		If FileType( dataPath + "/" + ENV_TARGET )=FILETYPE_DIR<br>			CopyDir dataPath,dir,False<br>		Endif<br><br>I assume that would overwrite the copied files from the standard "dataPath" dir with any existing files from "dataPath.target". Depending on how CopyDir works, of course. But it should be simple enough to figure out. Unfortunately it'd require rebuilding trans at every new release. <br><br></td></tr></table><br>
<a name="2009158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...Aaand it seems that there's a simpler solution. Import can be used to import graphics files. I assume everyone already knew this except for me, but this is the basic idea in case someone else needs a solution:<br><br>#If TARGET = "flash"<br>Import "flash/screen.jpg"<br>#ElseIf TARGET = "html5"<br>Import "html5/screen.jpg"<br>#EndIf <br><br></td></tr></table><br>
<a name="2009166"></a>

<a name="2009167"></a>

<a name="2009168"></a>

<a name="2009169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xzess</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> its really really simple to work around.<br>im doing it in a similar way karja suggested in the last post.<br><br>global ressourcefolder:string<br>global soundex:String<br><br>#If TARGET = "flash"<br>ressourcefolder = "flash"<br>soundex = "mp3"<br>#ElseIf TARGET = "html5"<br>ressourcefolder = "html5"<br>soundex = "mp3"<br>#ElseIF TARGET = "ios"<br>ressourcefolder = "ios"<br>soundex = "mp3"<br>#ElseIF TARGET = "android"<br>ressourcefolder = "android"<br>soundex = "ogg"<br>#EndIf <br><br>'Load Ressources<br>Image1 = LoadImage(ressourcefolder+"/images/screen.jpg")<br>Image2 = LoadImage(ressourcefolder+"/images/screen2.jpg")<br>Sound1 = LoadSound (ressourcefolder+"/sounds/sound."+soundex)<br><br>This way you write it portable for all platforms and for the market deploy, you just delete the unnecessary other ressourcefolders for other platforms<br><br>i guess there are much more important things to do. <br>maybe its not always the best to say +1 each feature which would make programming just simpler but isn't really neccessary for the creative mind<br><br>greetz <br><br></td></tr></table><br>
<a name="2009177"></a>

<a name="2009178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, if I understand Monkey correct (having written a dozen lines of code so far), that solution doesn't really solve the main issue: all of the files in the app.data directory are included into the .swf/.apk/.etc archive. That means that if you have two different PNGs for Flash and Android, both are included in each build. Completely unacceptable for a reasonably large game, and a really important feature to get right.<br><br>The trick isn't really to make LoadImage and LoadSound load from a different directory, but to ensure that only the relevant files are copied to the data dir when building the archive.<br><br>That's why I used the Import inside the #If statements. You select which file to actually copy, and then you simply use LoadImage with the same filename each time. E.g:<br><br><br>Import mojo.app<br>Import mojo.graphics<br>Import mojo.input<br><br>#If TARGET = "flash"<br>Import "flash/screen.jpg"<br>#ElseIf TARGET = "html5"<br>Import "html5/screen.jpg"<br>#EndIf<br><br>Class Game Extends App<br>	Field image:Image<br><br>	Method OnCreate()<br>		image = LoadImage( "screen.jpg" )<br>		SetUpdateRate 60<br>	End<br><br>	Method OnRender()<br>		DrawImage( image, 0, 0 )<br>	End<br>End<br><br>Function Main()<br>	New Game<br>End <br><br></td></tr></table><br>
<a name="2009180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> using import prevents all the files being copied to .data? <br><br></td></tr></table><br>
<a name="2009182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The normal situation would be:<br><br>/projectdir/app.data/screen.jpg<br>/projectdir/app.data/common.png<br><br>But in the example above you place the files like this:<br><br>/projectdir/flash/screen.jpg<br>/projectdir/html5/screen.jpg<br>/projectdir/app.data/common.png <br><br></td></tr></table><br>
<a name="2011717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amnesia</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I actually like the idea of subfolders for target-specific assets. <br>It could also be extended to support Android's dpi-based selection of resources (like having a .data/android/ldpi folder for ldpi, one for mdpi, and so on), I don't know, I think it would be a good feature to have at least the per-target folders.<br><br>Any chance of seeing this officially implemented on Monkey? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
