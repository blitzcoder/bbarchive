<!DOCTYPE html><html lang="en" ><head ><title >Some thoughts about future Monkey</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Some thoughts about future Monkey</h1><a href="forums.php" >Monkey Archive Forums</a>/<a href="topics.php?forum=510" >Monkey Discussion</a>/<a href="#bottom" >Some thoughts about future Monkey</a><br><br>
<a name="2056964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here are some of my random thoughts about Monkey:<br><br>1. I may try to create a shared lib target for desktop. this will lead to....<br>2. better custom target support. if i can create a shared lib target using Monkey, this will allow us to make shared library targets that will require NO RECOMPILATION for every monkey update (MonkeyMax). easier maintenance of custom targets. this will lead to...<br>3. wxMonkey. i want this to to be a replacement for MaxGUI. or should i just port the darn MaxGUI thing?<br>4. Android NDK target<br>5. targets that do incremental compilations. which leads to....<br>6. live coding via Javascript target. hot hot hot<br>7. glfw3 = 64 bit. someone's working on this, how's it going?<br>8. multithreaded GC = multithreading desktop targets. need a better way to hook in a new GC to Monkey.<br><br><br>Any other ideas, please share them. <br><br></td></tr></table><br>
<a name="2056966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; 4. Android NDK target<br><br>Is suspect that this would be less useful than you might imagine unless the GC is improved. While native code might beat out the VM in processing grunt, the VM's GC is far better than the native Monkey one (in all but ancient Android versions). <br><br></td></tr></table><br>
<a name="2056967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;3. ...the darn MaxGUI thing...<br><br>I started a cocoamaxgui based macos target. Will post more if anything comes of it.<br><br>For win32 desktop apps I think I prefer .net implementation of a MaxGUI style API this time around. <br><br></td></tr></table><br>
<a name="2056973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be helpful to support the native GUIs. Then our apps would have the same look the users are used on each target. <br><br></td></tr></table><br>
<a name="2056979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> wxMonkey: Any way to get an usable GC on Monkey C++ targets? AFAIK, current implementation requires Mojo, which is not nice! I remember someone (maybe you?) using a timer to call the collector on events, but this is not very realiable if you ask me. <br><br></td></tr></table><br>
<a name="2057031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> wxMonkey: Any way to get an usable GC on Monkey C++ targets? <br></div><br>it works on wxMonkey. i can call the GC after a wxIDLE event to the main window. not the best solution, but usable.<br><br>i looked into other GC's, but we need a way to overwrite the current Object class implementation. <br><br></td></tr></table><br>
<a name="2057032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> i can call the GC after a wxIDLE event to the main window. <br></div>How do you handle the scenario where too much memory pressure is added in a single pass between wxIDLE events? I've managed to add too much mem pressure to .Net on complex situations (like loading a complete Jungle IDE project + then modules database etc.) I'm saying this just to point out that it can work wonderfully well for small apps, but come back later as a problem when too much mem allocation is done on large irresponsive processes with lots of object creation.<br>I would really love to have better GC on C++ on Monkey, but maybe that's just me being too much a control freak <br><br></td></tr></table><br>
<a name="2057034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I would really love to have better GC on C++ on Monkey <br></div><br>you are correct for these reasons, which is why i tried to implement a different GC, but the GC is embedded into arrays, so it makes any other GC difficult at this point. <br><br></td></tr></table><br>
<a name="2057063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AndroidAndy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 5. targets that do incremental compilations. which leads to....<br>6. live coding via Javascript target. hot hot hot <br></div><br>How about:<br><br>1. Monkey interpreter. Which leads to...<br>2. live coding via native Monkey code. and...<br>3. Native Monkey debugger.<br><br>A Monkey "player" would be a given, but I would only expect one for the main dev. environment, for debugging, live coding, etc... not for deployment on general targets. <br><br></td></tr></table><br>
<a name="2057184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 1. Monkey interpreter. <br></div><br>while i would love a monkey interpreter, just looking at ParrotVM and NekoVM make my eyes water... and Monkey would have to compile to bytecode anyways, so javascript still seems like a better, quicker path. <br><br></td></tr></table><br>
<a name="2057187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EdzUp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> All i would like to see at this point in time is easy to use system which has the same functionality as blitzmax. At the moment its not because:<br>1) full screen osx displays are miffed (already a bug report posted)<br>2) no inbuilt way to change res and switch from windows to fullscreen within a game<br>3) no server system<br>4) networking isnt as complete as blitzmax or even blitz3d<br>5) would be nice to specify the name of the game for all targets<br>6) incbin of media for all targets<br>7) loading from arrays or datablocks so we could do our own compression stuff (not have to write it out to disk then load)<br><br>All these things can be done with blitzmax very easily and if monkey is to 'replace' blitzmax it also will need to push into these areas as not everyone is writing small apps and coffee break games. <br><br></td></tr></table><br>
<a name="2058024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >frank</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @AdamRedwoods: Live coding via the JS platform is possible already but then you need to do it in JS using different method names than you would use in Monkey. I believe that to resolve the issue, you do need a MonkeyLanguage interpreter (which could backend only to JS and could be written in JS , but if you are making one anyway, why not write one in Monkey?). Which allows you to write 'most of' your code and compile it, but has something like MonkeyInterpret("mydynamicstuff.monkey") which executes, at that point, that file dynamically. Then, with some tinkering (I know how to do that in JS with Node.js as server), you can turn that into live coding where even the mydynamicstuff.monkey file is updated and you can copy/paste, when you are happy, the code from there into your compile regions to make it optimal. Which gives you the best of both worlds. In any case, you really need a Monkey interpreter or a very optimized and more flexible version of the current translator (aka, one who takes into account the current reflection environment and does not go over all the libraries but just translates the code you have. <br><br>I think the current parser/semanting things are way too slow for that, they are set up for a different reason, but they can be adapted i'm sure.  Anyone any ideas about that? It seems that if you can include the current translation environment (which you can) flexibly (which you can't; it's very restrictive in what it does and how it works and you need to really change quite a bit), you can experiment with this. Of course in the end it's only (easily) viable for the HTML5 version, but Java/C# have on the fly in-process compilation and code swapping, so who knows. <br><br>So needing this: <br><br>- Parser which can just do standalone Monkey files; if you check/try the public methods you see you need to pass the 'world', so i'm wondering if it's possible to serialize the 'current compiled world' which you then can unserialize at program start and pass to Parser every time you need to recompile a bit. It should however not (try to) recompile any of the modules it already has (they are compiled anyway), only newly introduced, which seems something you might want to prevent in our 'poor-mans-interpreter'<br><br>- Allow a subset of Trans to work from any target; this is an issue as it currently breaks any attempt to undertake this kind of thing; it works only with C++ Tool because of the file actions. There should be a version which only inputs and outputs Strings (and possibly forbids use of Import). Input valid Monkey code, run Trans:String(code:String, lang=$LANG, target=$TARGET) and receives a String with the result. <br><br>I would really like this to work... Anyone thought about it? <br><br>If you 'just' want some REPL/livecoding but don't care if it's Monkey or whatever, you can embed JS in Monkey or Lua (as has been done with the iOS version) in Monkey or use the interpreter someone here wrote in Monkey; this should be possible for almost anything, especially with JS. I don't like this solution as, to get the full performance, you have to rewrite it. That's not a lot of work, but it's annoying (as I would have to change quite a bit in the Trans code) while I think (for someone like Mark) the above Trans features are not exactly rocket science.<br><br>Now that Monkey is on github, does Mark accept Pull requests? Because then it might actually be doable for someone (me for instance) here while not losing all the work come the next Monkey iteration.<br><br>(Haxe has hscript <a href="https://code.google.com/p/hscript/" target="_blank">https://code.google.com/p/hscript/</a> for this which enabled interpretation, repl, live coding and embedding in the same (subset of) language; this is a complete interpreter, not what I suggest above. In Haxe this is the only way as Haxe is not written in Haxe but in Ocaml; in Monkey the above would work I believe.) <br><br></td></tr></table><br>
<a name="2058017"></a>

<a name="2058016"></a>

<a name="2058091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AndroidAndy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @frank - Excellent observations, I think you touched on some viable options and approaches.  When I mentioned "Monkey Interpreter" it does not imply that it is built entirely in Monkey, in fact the nature of Monkey lends itself to leveraging any one of the supported targets to piggyback off already existing and battle-tested tooling.<br><br>The reality is with limited resources developing a fully featured Monkey interpreter with the tooling around it is probably unrealistic.  As Adam mentioned JS would be quicker to actually deliver something.<br><br>The nice thing about JS is that you could tap into the existing opensource tooling around it. For example you could create a Monkey debugger by a custom tool that talks to Firebug via crossfire:<br><br><a href="https://github.com/mrennie/crossfire/wiki/Crossfire%20Protocol%20Reference" target="_blank">https://github.com/mrennie/crossfire/wiki/Crossfire%20Protocol%20Reference</a><br><br>I use IntelliJ IDEA and it connects to Firebug in this way and allows you to debug directly in the IDE and not have to switch out to the Firebug plugin in the browser.  But I also think they developed some additional small support plugin that may give them more options.<br><br>So I could imagine a Monkey debugger that allows you to set break points, watch variables, and step through Monkey code, but it would really be talking to something like Firebug via crossfire.  The tricky part would be the TRANS-lation between the Monkey code and the TRANS-lated JS running in the JS debugger.<br><br>In this scenario I think the ability to debug Monkey code is a first class citizen, the interpreter and live coding would end up being side effects. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
