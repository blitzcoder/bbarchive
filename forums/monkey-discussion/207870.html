<!DOCTYPE html><html lang="en" ><head ><title >PNG quantisation and memory usage</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >PNG quantisation and memory usage</h1><a href="forums.php" >Monkey Archive Forums</a>/<a href="topics.php?forum=510" >Monkey Discussion</a>/<a href="#bottom" >PNG quantisation and memory usage</a><br><br>
<a name="2077447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do .png files, which are compressed with tools like tinypng.com<br>do use the same amount of RAM as uncompressed ones, or can I save<br>not only diskspace but although memory usage? <br><br></td></tr></table><br>
<a name="2077448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ElectricBoogaloo</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depends on the target, and how the system handles it's data, but for the most part it wouldn't matter how it's compressed.  In general when a system loads an image, it keeps it in memory as raw as it possibly can, so once loaded it'll usually just end up as a bunch of 32-bit ARGB values, no matter how it was originally compressed.<br>Compression saves on disk space, and download size, though, so is generally good practice.  Just don't go crazy with the pics :D <br><br></td></tr></table><br>
<a name="2077485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, was thinking about Android as target. I'm fighting against an out of memory error. <br><br></td></tr></table><br>
<a name="2077498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thanks, was thinking about Android as target. I'm fighting against an out of memory error. <br></div><br>you can use RGB565, which will save some memory but there is no alpha channel. <br>otherwise, depending on the android version, you can try to use largeHeap in the manifest file, although it should be a last resort. <br><br></td></tr></table><br>
<a name="2077506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's the DDS error log from the OOM error? <br><br></td></tr></table><br>
<a name="2077517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want to update a pretty old app, which is created with Monkey V44.<br>But with Monkey V74a it crashes.<br>I've increased the heap size, without success. Crashes later, but crashes.<br><br><div class="quote"> <br>02-05 00:10:01.843: E/AndroidRuntime(13749): FATAL EXCEPTION: GLThread 11<br>02-05 00:10:01.843: E/AndroidRuntime(13749): java.lang.OutOfMemoryError<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at java.nio.HeapByteBuffer.&lt;init&gt;(HeapByteBuffer.java:43)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at java.nio.ReadWriteHeapByteBuffer.&lt;init&gt;(ReadWriteHeapByteBuffer.java:47)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at java.nio.BufferFactory.newByteBuffer(BufferFactory.java:49)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at java.nio.ByteBuffer.allocate(ByteBuffer.java:49)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at com.tireless.sslander.gxtkSurface.Bind(MonkeyGame.java:2235)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at com.tireless.sslander.gxtkGraphics.Flush(MonkeyGame.java:1616)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at com.tireless.sslander.gxtkGraphics.EndRender(MonkeyGame.java:1758)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at com.tireless.sslander.c_GameDelegate.RenderGame(MonkeyGame.java:7791)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at com.tireless.sslander.BBGame.RenderGame(MonkeyGame.java:584)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at com.tireless.sslander.BBAndroidGame.onDrawFrame(MonkeyGame.java:1320)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1388)<br>02-05 00:10:01.843: E/AndroidRuntime(13749): 	at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1138)<br> <br></div> <br><br></td></tr></table><br>
<a name="2077518"></a>

<a name="2077519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Read this from post 12: <a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=2589&amp;page=1" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=2589&amp;page=1</a><br><br>Be sure to read from post 22 through to the end as the solution evolves. <br><br></td></tr></table><br>
<a name="2077527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Be sure to read from post 22 through to the end as the solution evolves. <br></div><br>Mojo is allocating an int array, and THEN allocating a byte buffer. eeek!<br>the IntBuffer wrap seems to be the way to go. <br><br></td></tr></table><br>
<a name="2077536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd have thought the GLUtils call would be best. It was certainly much faster when I tested back then. Compatibility is always the problem with Android and I don't have the experience to state anything is the one true answer. Then again NSS has probably the biggest reach of any Monkey app and Simon never came back to say it had broken other than not working for JPGs. Presumably it's still running with the mojo change from that thread. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
