<!DOCTYPE html><html lang="en" ><head ><title >Loadimage\DrawImage Bug in windows 7</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Loadimage\DrawImage Bug in windows 7</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=85" >BlitzPlus Bug Reports</a>/<a href="#bottom" >Loadimage\DrawImage Bug in windows 7</a><br><br>
<a name="1031097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DjBigWorm</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>First off I know that blitzplus is "out dated" according to some folk. I think it works very well.  I hope this bug can be looked at<br>and maybe fixed.  The problem occurs in windows 7.  Same Program works<br>just fine on windows xp. Both are 32 bit if that helps.  I have an app I made to edit sprite animations, maps, and cut scenes.  I would<br>go ahead and port it to blitzmax, but blitzmax misses some basics that blitz plus does with buffers.  So this is where the problem begins.  My app clears the background, draws the map layer, then tops it off with the gui.  The gui is a fullscreen image, masked of course. The map you edit is in the middle of the gui.  in 640x480,800x600 windowed mode the map drawn on screen right before the gui doesn't show up. Strange as that seems. When I change the resolution of the app to 1024x768 i works as expected.  In fullscreen mode in any resolution mentioned above works fine.  I thought maybe the setbuffer command was broken in windows 7 at first.  I didn't draw the gui on top of the map and i could see the map being displayed just fine.  Further looking into this I found that when I use the "LoadImage" command and set the flag to "4" scratch image.  It worked in all above resolutions in windowed mode no problem.  So my guess either the "Loadimage" or "DrawImage" commands don't like the lower window sizes in windows7. Another thing that makes the app work fine is to set the blitzplus driver to native drivers.  Goes slower than direct draw, but worked as explected. I would post some code, but it is tied into a big app.  If blitz support wants I can send the source code to them in hopes this can be fixed.  And who knows maybe it is my programming skillz!:)<br><br>Thank you Blitz Support for great apps and Thanks to the coolest community around for their help in the Past/Future! <br><br></td></tr></table><br>
<a name="1031165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Without seeing code or any potential bugs in your code...<br><br>BlitzPlus uses DirectDraw which is no longer supported by Vista/7, it runs under emulation.  Have you tried making the images you are drawing in a power of 2 to conform to the new DX requirements?<br><br>To avoid any emulation problems, I would use the OpenGL driver or the Native Driver. <br><br></td></tr></table><br>
<a name="1031295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DjBigWorm</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't realize that vista/7 didn't use directdraw and was emulated.<br><br>What do you mean power of 2 for images?<br><br>Is there a way to have blitzplus use directx 7/9 etc..? <br><br></td></tr></table><br>
<a name="1031399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What do you mean power of 2 for images? <br></div>Googled for a tutorial, perhaps this will help:<br><br><a href="http://www.katsbits.com/tutorials/textures/make-better-textures-correct-size-and-power-of-two.php" target="_blank">http://www.katsbits.com/tutorials/textures/make-better-textures-correct-size-and-power-of-two.php</a><br><br>DirectX is not backwards compatible anymore.  Backwards compatibility is now provided via emulation on Vista and 7.  If you are running the default DX driver (which uses DirectDraw) on Vista and 7, at runtime the API calls are converted to the new equivalents and you are actually using "2D in 3D" whether you want to or not.  Since you are now using 3D methods to run your game, you can (can, not always) run into issues with non-power of 2 images.<br><br>In my experience (yours may vary) OpenGL seems to be a lot more forgiving about non power of 2 images.<br><br><div class="quote"> Is there a way to have blitzplus use directx 7/9 etc..? <br></div>Not unless you use a third-party engine.  Even then, you will still be dealing with the power of 2 issue on Vista/7.  DX7 would be emulated on Vista and 7 and DirectDraw died with DX7.  DX8 introduced using 3D methods to emulate 2D, but DX8/9 remained backwards compatible so there was never an emulation issue to worry about.  Now DX is not backwards compatible on Vista/7 and all old DX stuff is emulated (sometimes problematically). <br><br></td></tr></table><br>
<a name="1031417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DjBigWorm</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> GaryV,<br><br>Thank you for the informative Insite.  The "Emulation" vista/7 seems<br>to make sence now that I know that.  My program seems to be hit and miss with the mouse wheel also.  Anyhow thank you for taking the time and sharing your knowledge with me/us.<br><br>Until next time! <br><br></td></tr></table><br>
<a name="1031468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> DjBigWorm:  You might want to look at the DX9 based 2D engine (in DLL form) that Dabhand wrote.  It works with B+ and may solve all of your problems. <br><br></td></tr></table><br>
<a name="1031579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DjBigWorm</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> GaryV,<br><br>I tried getting the dll and try it, I can't seem to get any link to work.<br>Do you have the latest version or a working link?<br><br>Thanks for the suggestion. <br><br></td></tr></table><br>
<a name="1040971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kcarlino</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It looks like these links on BlitzMonkeys have the DX9 Plus DLL but I haven't looked at the details yet myself.<br><br><a href="http://www.blitzmonkeys.com/index.php?topic=10.0" target="_blank">http://www.blitzmonkeys.com/index.php?topic=10.0</a><br><br>Ken <br><br></td></tr></table><br>
<a name="1045965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DjBigWorm</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Kcarlino<br><br>Thank You I think this will do nicely:) Thank you for the reply. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
