<!DOCTYPE html><html lang="en" ><head ><title >ReadPixels/WritePixels</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ReadPixels/WritePixels</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=201" >Monkey Talk</a>/<a href="#bottom" >ReadPixels/WritePixels</a><br><br>
<a name="1180894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Says this can only be done in the OnRender section of code...  Anyone else find that odd? <br><br></td></tr></table><br>
<a name="1180920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the reason for this is when OnRender is called certain states are there to allow rendering, in OnCreate and OnUpdate they arent. Basically OnRender is there for all drawing stuff to be called to make it compatible with all platforms. <br><br></td></tr></table><br>
<a name="1181039"></a>

<a name="1181040"></a>

<a name="1181041"></a>

<a name="1181043"></a>

<a name="1181046"></a>

<a name="1181048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reason is because of threading, Graphics are done in one thread while everything else is done on a different one. and even if the specific target does not support threading, it's done just to keep a consistency with the language. you could, if wanted to, do everything on the "OnRender"/state Thread and not use the "OnUpdate". Threading makes it obviously faster to process and makes it a faster frame rate game. <br><br></td></tr></table><br>
<a name="1181080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The reason is because of threading, Graphics are done in one thread while everything else is done on a different one.  <br></div>As far as I know, if that would be true, this will make games to be rendered wrong. I mean, if classes are being updated while the rendering is being commit, how can you handle objects positions etc on a reasonable, synced and blocking free way? <br><br></td></tr></table><br>
<a name="1181120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> whether you agree or not makes no difference, the fact is that OnRender and OnUpdate are done on separate threads and is the only reason for for the OnUpdate and OnRender requirements. <br><br></td></tr></table><br>
<a name="1181123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ehm. not. to begin, there's no threading on Javascript. to continue theere's no thread syncing on the c++ target nor in the c++ GC. also, why should be used if onupdate and onrender are obviously not executed in parallel? <br><br></td></tr></table><br>
<a name="1181131"></a>

<a name="1181132"></a>

<a name="1181133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> *** shakes head ****<br><br>you did read this from my post :<br><div class="quote"> <br>...and even if the specific target does not support threading, it's done just to keep a consistency with the language...<br><br> <br></div><br><br>but I am no expert, so what's your explanation? <br><br></td></tr></table><br>
<a name="1181134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as I know there is no threading in monkey? At least not in the versions I used (v42 and earlier)... <br><br></td></tr></table><br>
<a name="1181138"></a>

<a name="1181140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am probably mistaken as I glanced through the module. but I believe it's all in the Brl Module on the newest Monkey versions.<br><br>[edit]<br><br>I think I am confusing the ability of the game running in threads with the actual game using events.<br><br>so excuse my ignorant comments :). <br><br></td></tr></table><br>
<a name="1181154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> there is a threading module, but it will not work with the GC. not really recommended for use.<br><br>the reason the read/write is in the OnRender is because Mark dumps the image's heap memory and keeps the image in video memory. therefore, it can only be accessed during a valid context.<br><br>it doesn't HAVE to be this way. miniB3D stores textures as pixmaps, so that data can be read anytime. <br><br></td></tr></table><br>
<a name="1181191"></a>

<a name="1181197"></a>

<a name="1181215"></a>

<a name="1181216"></a>

<a name="1181217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> but I am no expert, so what's your explanation?  <br></div> It's as easy as it gets. Some platforms such as Android or XNA are designed to be event based and encapsulate the event loop, so you can't just Flip() whenever you want.<br><br>Then, another way to see this is that, if render and update were executed using threads, that would mean that they are executed at the same time. Imagine that you're rendering something, and while you call the DrawImage(miImage,X,Y), the X value changes while this variable is inside the drawing routine, becouse the update process in another thread is modifying it. Also, imagine you're in the middle of the rendering of all "Enemies" inside your enemies List, while the Update has cleared the list (in the middle of the process), etc etc... It would be VERY VERY complicated to make any simple game in monkey if updating was not executed before rendering instead of being executed while rendering. As they have to be executed sequentially, the usage of threads for this task would be an overengeniering of the engine and a waste of resources, with the only benefit of making the Mojo source codes a lot harder to maintain while you grant they woudl perform a lot worse becouse of the internal suncing and blocking operations that would be required on the garbage collection area. (compared to current basic but effective mark and swap on C++ as an example)<br><br>EDIT: That said, event-based systems on small devices are a very good way to build an efficient processing time sharing. The "pauses" when the update has been done and the render do not need to be performed yet can be used by the OS to process background tasks and daemons without requiring additional processing units. That's sort of the same approach as the IBM Time Sharing Option for mainframes, but addapted to low power and small processing systems such as phones or SOC based devices with a limited number of processing units. It's like they are attending several processes in the same way TSO system attended several user requests. I hope this is understandable... I'm a bit sparse, too much time coding and my English capabilities are not at their best <br><br></td></tr></table><br>
<a name="1181797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JeeyD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just want to add that Javascript has threading; Workers. <br><br></td></tr></table><br>
<a name="1181803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Worker's are not threads. They run on threads, but they're isolated and can't diretly share data between them unless converting to/from JSON and using the main script file as a sort of data-anchor to share the messages being sent with postMessage. This is a good approach to make javaScript safer when multithreading but it is VERY limited and definitively not used for Monkey OnUpdate, OnRender, etc. <br><br></td></tr></table><br>
<a name="1181828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JeeyD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see workers as an improvement of traditional threading forcing good practicee same with Android using their U Ithread as sort of main thread. Synchronisation are always expansive and should be minimal nonew or next to none. JSON makes up for the perfect IPC even if it might seem expansive at 1st sight. If using main thread as a data-anchor is questionable it fill certainly change in the future to become the best possible concurrency model. Graphics need of course not any thread but a steady heartbeat, I guess JS have a very special solution for just that outside of workers as it is now. <br><br></td></tr></table><br>
<a name="1181830"></a>

<a name="1181831"></a>

<a name="1181832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, well, it is at last argueable how the fact that ANY data passed to a worker needs to be comverted to a string-based format (very expensive) and copied (even more expensive) is a good way to do threading. Threading should allow data to be <b>shared</b> instead of data to be copied only once, in one direction, and forcing a conversion/unconversion to a bloated string based format that needs to be parsed back again.<br>A good threading approach would be the implementation of <a href="http://en.wikipedia.org/wiki/Actor_model" target="_blank">actors</a>, to name one.  Even a parallel loop implementation would be much better in order to add threading to the language. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
