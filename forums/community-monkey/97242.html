<!DOCTYPE html><html lang="en" ><head ><title >Loading screens.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Loading screens.</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=201" >Monkey Talk</a>/<a href="#bottom" >Loading screens.</a><br><br>
<a name="1128412"></a>

<a name="1128470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've noticed that every Monkey written Flash game I've seen lacks a loading screen or loading bar and just displays a white background while the game loads.<br><br>Is it not possible to give a Monkey written Flash game a loading screen or has everyone just been too lazy to bother?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It can be done, I've seen it (but cant remember who/what) - all it needs is a wrapper to do it. <br><br></td></tr></table><br>
<a name="1128717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been going through the monkey forums and I've found that Xaron came up with a simple solution. <br><br>He loads the loading screen image in OnCreate and all the rest of the game media in OnUpdate.<br><br>He claims it works on every platform. I presume he uses a state machine to prevent endless repeat loading.<br><br>This approach doesn't allow for an animated loading bar but at least you're not looking at a blank screen.<br><br>I'm still not sold on Monkey though. I'm going to stick with Flixel for my next game at least. <br><br></td></tr></table><br>
<a name="1128719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually a number of people have done this for flash - mostly using a thing called mochimedia...<br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=735" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=735</a><br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1110" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=1110</a> <br><br></td></tr></table><br>
<a name="1128722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use mochi in my flixel written flash games but the problem is that when you sell a site lock of your game the site may not want mochi included.<br><br>I sold a site lock to BFG and I had to strip out mochi and even playtomic.<br><br>Xaron's solution is the easy answer to this problem. <br><br></td></tr></table><br>
<a name="1128723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Monkey originally packed all the images in the flash file, which means the whole file had to loaded into browser before anything can be seen on the screen.<br><br>I believe now that resources can be accessed outside the flash file, so you can now do a loading screen within Monkey itself. <br><br></td></tr></table><br>
<a name="1128744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Single file flash games tend to go viral much more easily than multi file ones.<br><br>In fact this multi file business is one of the problems the flash developer community sees in HTML5 replacing flash.<br><br>Do you see a potential problem with Xaron's approach? <br><br></td></tr></table><br>
<a name="1128747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure how Flash is loaded in the browser if it is a single file, I thought if it was a single file the whole Flash file needs to be downloaded and that what causes the wait.<br><br>When I code Pirate Solitaire using Monkey in Flash, I displayed a splash screen then load the resources, but I still get the white wait screen of death while the Flash file is downloaded to the browser. <br><br></td></tr></table><br>
<a name="1128818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> swf files have a preloader section, like a small self contained chunk of code at the start of the file (frame 1), that can execute the moment it's loaded without having to wait for the rest of the file to download.<br><br>It doesn't make any difference if the file is a single file or multiple files it still works the same.<br><br>Typically you would just put your loading screen image and a small bit of code to update the loading bar in your preloader but I'm guessing that monkey puts everything in OnCreate into the preloader forcing you to wait for everything to load. <br><br></td></tr></table><br>
<a name="1128888"></a>

<a name="1128889"></a>

<a name="1128890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah that makes sense...<br><br>I've just looked up Flash Preloader, <strike>and it seems all the tutorials do it via the GUI - do you know how to do it in code?</strike><br><br>If so, it should be pretty easy to add to Mojo.<br><br>Just found this:<br><br><a href="http://www.republicofcode.com/tutorials/flash/as3preloader/" target="_blank">http://www.republicofcode.com/tutorials/flash/as3preloader/</a><br><br>So I think it should be pretty easy to add...<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, the tut you link to is a preloader for flash games made with the Flash authoring tool.<br><br>If you download <a href="http://www.flashdevelop.org/" target="_blank">FlashDevelop</a>, which I recommend if you want to do any AS3 coding, you'll see in the create new project dialog one of the options is 'AS3 Project with Preloader'.<br><br>This is the preloader it creates.<br><br><pre class=code>package 
{
	import flash.display.DisplayObject;
	import flash.display.MovieClip;
	import flash.events.Event;
	import flash.events.ProgressEvent;
	import flash.utils.getDefinitionByName;
	

	public class Preloader extends MovieClip 
	{
		
		public function Preloader() 
		{
			addEventListener(Event.ENTER_FRAME, checkFrame);
			loaderInfo.addEventListener(ProgressEvent.PROGRESS, progress);
			// show loader
		}
		
		private function progress(e:ProgressEvent):void 
		{
			// update loader
		}
		
		private function checkFrame(e:Event):void 
		{
			if (currentFrame == totalFrames) 
			{
				removeEventListener(Event.ENTER_FRAME, checkFrame);
				startup();
			}
		}
		
		private function startup():void 
		{
			// hide loader
			stop();
			loaderInfo.removeEventListener(ProgressEvent.PROGRESS, progress);
			var mainClass:Class = getDefinitionByName("Main") as Class;
			addChild(new mainClass() as DisplayObject);
		}
		
	}
	
}</pre><br><br>That's the basic preloader framework for any flash game written in pure code.<br><br>I've been using Flixel's preloader so I'm not quite sure how to make use of this generic one. <br><br></td></tr></table><br>
<a name="1128938"></a>

<a name="1128940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool! Thanks for that...<br><br>I've managed to hack Monkey to use a preloader:<br><br><a href="http://www.therevillsgames.com/monkey/flash/MonkeyGame.html" target="_blank">http://www.therevillsgames.com/monkey/flash/MonkeyGame.html</a><br><br>Instructions here:<br><br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=2406" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=2406</a><br><br>Hopefully Mark will add this to Monkey (or something like it).<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CGV</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good Job! As always!<br><br>Now I've run out of excuses to not buy monkey. <br><br></td></tr></table><br>
<a name="1129151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> :)<br><br>This is one of the things I like about Monkey (and BlitzMax), you can really mess with the internals of the code...<br><br>Oh and I've refined the process a tad... it now outputs to MonkeyGame.swf so you dont have to change so many things/files. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
