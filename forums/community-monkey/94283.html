<!DOCTYPE html><html lang="en" ><head ><title >Function pointers</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Function pointers</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=201" >Monkey Talk</a>/<a href="#bottom" >Function pointers</a><br><br>
<a name="1081066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> (I'm playing with the demo so can't post on the actual monkey forums yet, and the documentation is pretty sparse)<br><br>What's the format for a function pointer?  In BMax it's:<br><br><pre class=code>
Global func(x:Int,y:Int)

Function RoutineA( x:Int, y:Int )
	Print x + ", " + y
End Function 

func = RoutineA
func( 22, 33 )
</pre><br><br>Cheers <br><br></td></tr></table><br>
<a name="1081067"></a>

<a name="1081068"></a>

<a name="1081069"></a>

<a name="1081071"></a>

<a name="1081072"></a>

<a name="1081073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Monkey uses class downcasts instead of function pointers.<br>For example:<pre class=code>Local instanceA:ClassNameA=ClassNameA(instanceB)</pre>Monkey is a bit like Eiffel or Oberon-2, a very clean OOP language, but much less typing :)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know I'm going to regret asking, but in what way does downcasting a class instance replace a function pointer? <br><br></td></tr></table><br>
<a name="1081076"></a>

<a name="1081077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, you get the methods and attributes of another class to an instance which doesn't have them. I think it's useful when you have a central method or attribute accessor, which needs to run through all your different classes. So it's similar to a function pointer.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well, you get the methods and attributes of another class to an instance which doesn't have them. <br></div><br>Yep, regretting it already. In most languages, you can only access methods and attributes which an instance *does* have by downcasting. All you're doing is unhiding the methods and attributes which were hidden by passing it as a base class. Are you saying that Monkey dynamically reallocates memory to instances at runtime to add in methods and attributes which were never present? <br><br></td></tr></table><br>
<a name="1081079"></a>

<a name="1081080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it's still similar to function pointers, because there you also have a lowest common denominator, like the parameters to the function.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks.<br><br>I've found that since Monkey supports polymorphism, I don't actually need function pointers at all :) <br><br></td></tr></table><br>
<a name="1081089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know I'm going to regret asking, but what is polymorphism?  And in what way does it replace a function pointer? <br><br></td></tr></table><br>
<a name="1081094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Polymorphism means that the same class can use different types of attributes while the methods stay the same. In Monkey, this is done via the generic class (search in help -&gt; language for generic). <br><br></td></tr></table><br>
<a name="1081134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Lumooja: You are really mixing up concepts in creative - but in confusing ways :-)<br><br>It is a rather far stretch to call Function pointers and downcasting related.<br><br>Also, Polymorphism, which attempts to hide differences in implementation, and generics, which attemtps to highlight differences are not really the same thing.<br><br>Generics in Monkey can be used for very usefull things such as making a list of a certain class of objects like this:<br><pre class=code>Local dots:List&lt;Dot&gt; = New List&lt;Dot&gt;</pre><br>Here is an example of using inheritance (Keyword Extends) to create Polymorphism<br><br><a href="http://blitzmax.com/Community/posts.php?topic=78860" target="_blank">http://blitzmax.com/Community/posts.php?topic=78860</a> <br><br></td></tr></table><br>
<a name="1081204"></a>

<a name="1081205"></a>

<a name="1081206"></a>

<a name="1081207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Polymorphism basically means you can cast in and out of a derived type(s)   and use a basetype to declare instances of a parent type. You can also use the properties of said type when cast as such.. etc..<br><br>....Here is a better description :D<br><div class="quote"> In strongly typed languages, polymorphism usually means that type A somehow derives from type B, or type C implements an interface that represents type B. In weakly typed languages types are implicitly polymorphic <br></div><br><a href="http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming" target="_blank">http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming</a><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081211"></a>

<a name="1081233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...neither polymorphism nor generics have anything to do with function pointers, unless Monkey is using radically different definitions of those words from every other language.<br><br>Polymorphism is a core OO concept (i.e. if you aren't using it, you aren't writing OO code), that already existed in BlitzMax, so it's a bit disturbing to see it cause such confusion.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081348"></a>

<a name="1081350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> So example?<br><br><pre class=code>
Class A
 Function B
  Print "stiff"
 End
End
</pre><br>I want to pass A.B() by reference to another function as a callback.<br>How?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081362"></a>

<a name="1081369"></a>

<a name="1081372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't. Monkey doesn't support function pointers or first-class function values.<br><br>If you really need to do something like this, you'll have to find a way to do it with helper classes (e.g. make the "callback" a method of a class that exists solely for the purpose of passing that method around, attached to an instance).<br><br><pre class=code>
Class Callback Abstract
    Function proc() Abstract
End

Class Func1 Extends Callback
    Function proc()
        ...
    End
End

Class Func2 Extends Callback
    Function proc()
        ...
    End
End
</pre><br><br>In the above example, variables of type Callback can hold objects of type Func1 or Func2, which are invoked by calling the proc() method (if you make it an instance method you can have a clunky fake of functional programming in this way).<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah already doing it that way but since the topic appeared to be about function pointers I thought monkey might support them in some hidden way. <br><br></td></tr></table><br>
<a name="1081522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> bummer....my entire engine is based off function pointers. hmm... <br><br></td></tr></table><br>
<a name="1081689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vlad</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Function and method pointers is required to work with events, callbacks and something like. This stuff is have to be in language! <br>And if target is flash then AS3 supports function pointers with special type :Function, so this things must have to be. <br><br></td></tr></table><br>
<a name="1081692"></a>

<a name="1081696"></a>

<a name="1081698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1) ActionScript doesn't have function pointers, it has first-class functions (i.e. closures). Not the same thing at all, and will probably break your code if you try to use one as the other. (Closures are better, though.)<br><br>2) Why does their presence in ActionScript mean that they need to be available in Monkey? Monkey also has to be compatible with Java, which doesn't support either of the above concepts and works perfectly well (at least if you like Java) with events and UI code.<br><br>Quite to the contrary of the above post, Monkey <i>can't</i> support function pointers because it can't support any kind of pointer - the very-high-level targets (JavaScript and ActionScript) don't expose that level of the machine, while Java doesn't allow it and C# limits it greatly. It would immediately make for code that can't even be ported between compiler targets, let alone operating systems or other platforms, as everyone handles pointers differently. They're left out by intention, to try to make core language code compile on every target.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081709"></a>

<a name="1081710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vlad</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> OMG Yasha,<br>I'm use AS3 several years and you talking me it haven't function pointers? LOL man.<br>Read these first: <a href="http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/Function.html" target="_blank">http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/Function.html</a><br><br>Why to use pointers? Because it's convenient! Because this is nice!<br><br>BTW: C++ have method and function pointers, VB.NET n' C# have delegates, Object Pascal have method and function pointers, Javascript have these pointers, and i can continue ...<br><br>And I can emulate method pointers with pure OOP, but these use more code, than just something like <pre class=code>local pfn:int(int, string) = myObject.method</pre><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081713"></a>

<a name="1081714"></a>

<a name="1081715"></a>

<a name="1081716"></a>

<a name="1081717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> because it can't support any kind of pointer <br></div> ALL programming languages support pointers it is kind of a fundamental requirement, it just depends what kind of pointers you are talking about. Even simple array indexes and object instance identifiers are by -definition- pointers.<br><br>As for function pointers i have never really bothered with them (although probably used them without knowing it to be honest)<br>Do C# delegates fall under this? If so then yeah they are handy but I would not really miss them.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm use AS3 several years and you talking me it haven't function pointers? <br></div><br><br>Yes. Yes I am. That article that you linked to <i>does not describe</i> function pointers. It describes first-class functions. They're not the same thing and they're not compatible.<br><br><div class="quote"> ALL programming languages support pointers <br></div><br><br>Sorry. I meant explicit, C-style (and BlitzMax-style) pointers, not type-safe references to language objects which are generally quite a different thing to use. Obviously Monkey does support that kind of pointer.<br><br>The term "function pointer" is normally only used to refer to C-style pointers though, because it's extremely misleading when used in the context of function objects in a highly dynamic language (it doesn't refer to a simple section of code, it refers to an object that happens to support callable syntax). <br><br></td></tr></table><br>
<a name="1081728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> In as3 I can do this:<br><br>Public var a:Function;<br><br>a = AFunctionSomeWhere;<br><br>// Call the function<br><br>a();<br><br>How would this be done in Monkey? Thx. <br><br></td></tr></table><br>
<a name="1081740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vlad</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Yasha, OK my mistake in terminology. AS3 have function types instead of function pointers, but it works same as function pointers! In my fist post i wrote this. To call any method or function you should to have pointer to it, so function types contain pointer to method or function. So no big difference for me. <br><br></td></tr></table><br>
<a name="1081741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something like this:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Class FunctionContainer
	Method call()
		'do stuff
	End Method
End Class

'call the function
Local a := New FunctionContainer
a.call()</textarea><br><br>Yasha is correct here. <br><br></td></tr></table><br>
<a name="1081743"></a>

<a name="1081744"></a>

<a name="1081745"></a>

<a name="1081746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vlad</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Beaker, this is uncomfortable and generates a lot of redundant code.<br>Complete sample (in monkey) is:<br><pre class=code>
Class DelegatePrint
	Field _mdl:MyClass

	Method New( t:MyClass )
		_mdl = t
	End
	
	Method Call()
		Print("&gt;&gt;&gt; "+_mdl.fld)
	End
End
</pre><br>And if we need to call 10 or more methods of object? This add 6 additional strings per each call and more longest code (new DelegatePrint(m) instead of m.print)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1081976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xaron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you have to do it the Java way. Using interfaces. So yes, this is some kind of overhead. <br><br></td></tr></table><br>
<a name="1081983"></a>

<a name="1081984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> it works same as function pointers! In my fist post i wrote this. To call any method or function you should to have pointer to it, so function types contain pointer to method or function. So no big difference for me. <br></div><br><br>Actually your code in post #25 highlights precisely what the difference is:<br><pre class=code>Method New( t:MyClass )
	_mdl = t
End</pre><br>Since function pointers (as used in C, C++ and BlitzMax) point to a block of executable code, they can't store values, so a true function pointer wouldn't do what you want. "Functions" (as function objects) in more dynamic languages, like ActionScript, are objects that contain both a C-style code pointer and a data object holding scoped variables (this is a massive oversimplification), so 1) they can hold values and 2) unlike with static variables (inner globals) those values can be different between two objects that invoke the same code block. The "Java way"described above is doing something similar to a true-function in dynamic languages, but making the hidden stuff explicit.<br><br>Anyway I can think of three and a half reasons why first-class functions aren't in Monkey:<br> - not supported by C++ or Java, which only have plain function pointers/objects respectively (although tweaks to the compiler could overcome this without real difficulties)<br> - would break semantic compatibility with BlitzMax, where inner functions didn't capture state<br> - one of the Monkey goals appears to have been to make the language simpler. Adding stateful functions to a language originally designed without them would probably confuse many users<br><br>I'm sorry to ramble on... but I hope this helps clarify the differences between the two competing features, and why neither exists.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
