<!DOCTYPE html><html lang="en" ><head ><title >Obtain monitor capabilities</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Obtain monitor capabilities</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >Obtain monitor capabilities</a><br><br>
<a name="1076064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been trying to figure out how to get hardware deatils for the monitor, particularly with respect to the supported resolutions/aspect ratios.<br><br>From what I've been able to find out, GDI+ only knows the "current" resolution.<br>The video card seems to get the informatiopn from the EDID of the monitor, but Windows still gets access to this information. I'm just not sure what Windows does with it. i.e. where it might keep it.<br><br>This article seemed to be the most explanatory, as mentioned, it's only the supported resolutions I am really interested in.<br><br>However, I have no idea where I should start 'looking' for this data. If anyone can help at all, I'd be really grateful, thanks!<br><br><a href="http://en.wikipedia.org/wiki/Extended_display_identification_data" target="_blank">http://en.wikipedia.org/wiki/Extended_display_identification_data</a> <br><br></td></tr></table><br>
<a name="1076180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> the EDID information is stored in the registry -- each videocard has the EDID string of the currently connected monitor associated with it.<br><br>Few things to keep in mind:<br>1) Not all monitors report EDID correctly, some don't sent any info, or even pass on generic/incorrect information that doesn't apply to the actual screen. Some are even malformed, so keep this in mind when parsing it out, and never take the provided info for granted.<br><br>2) Slightly useful bit: EDID has a place to provide an 'overscan' size as well. LCD doesn't use overscan, CRT does... Which means that if there is an overscan specified in EDID, you know you're dealing with a CRT. If there isn't, there's a good chance it's an LCD.<br><br>When looking for EDID info myself in the past, this is what I found in the registry:<br><br>HKEY_LOCAL_MACHINE\Hardware\System\CurrentControlSet\Enum\Display\<br><br>Under there, you see the various monitors that have been connected to the computer at one point or another. Under these you'll find one long string name, under there there is 'Device  Parameters', and under there there is a registry key named 'EDID' which contained the binary EDID code that was provided by the display, which can be parsed out.<br><br>Unfortunately I do not know how to determine which of the listed monitors is active at the moment. (I personally have 4 different displays listed in the registry, while only two are currently hooked up)<br>Three of them have an EDID key, one of them a BAD_EDID instead (?)<br>I also noticed that two of them have a 'control' subfolder, while two others don't... But no idea if that signifies anything. <br><br></td></tr></table><br>
<a name="1076250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I've looked through the current controlset registry keys. I was hoping that wasn't the way to go, since I'm gonna have to enumerate the PID's and VID's etc. Since there's no way to tell (in the program) WHAT subkey to look at beforehand.<br><br>Thanks for the infformation, it's really useful, and yeah, one of my monitors lists "unsupported" for all the EDID info according to ATI's Catalyst utility.<br><br>What I'm aiming for, really, is a means to identify a 'safe' default graphics resolution.<br>In the past, 800x600 or 1024x768 has been fine, but with a trend towards widescreen formats (and a lot of netbooks having that 1024x600 thing, not allowing greater height) I needed a different approach than just picking one from the adapter's list.<br>Seems like a lotof hassle for a simple thing, if the EDID is 'that' unreliable, I would have to just "pick a value" anyway... <br><br></td></tr></table><br>
<a name="1076263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I needed a different approach than just picking one from the adapter's list. <br></div><br><br>I don't get it... why can't you just use the builtin CountGfxModes procedure? <br><br></td></tr></table><br>
<a name="1076305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi<br>CountGfxModes give us the modes of the graphic card, but some may not be correct for the monitor, isn't it?<br><br>out of topic: i had a cable to monitor converter, and when changing resolution pressing a + key on the remote controller, it enter in an out of sync for my Samsung lcd and... no image came. Unfortunately, i press not the - to go backard and... i have to change the lcd to an analog monitor that get in sync and reverse my incorrect handling. <br><br>i think that Malice need to be sure about wiht gfx mode is safely in the plugged monitor, but, at first i think that there is no secure way to know it, else than asking and reverting to the last working mode if the new fails, like windows do when changing resolution (should it be the reason of this mothod?)<br><br>Juan <br><br></td></tr></table><br>
<a name="1076320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> By default Windows hides the modes that it knows the monitor won't support (through EDID, presumably). Doesn't blitzmax use this trimmed down list already when queried? <br><br></td></tr></table><br>
<a name="1076420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>CountGfxModes give us the modes of the graphic card, but some may not be correct for the monitor, isn't it?<br> <br></div><br>Yeah, the GFX... commands only apply to the card, and especially nowadays, graphics cards support a huge variety of resolutions that trhe monitor may not be capable of displaying.<br><div class="quote"> <br>i think that Malice need to be sure about wiht gfx mode is safely in the plugged monitor, but, at first i think that there is no secure way to know it, else than asking and reverting to the last working mode if the new fails <br></div><br>That's about the size of it. But that still leaves something of an issue with the DEFAULT choice that the game will use on first ever running (before user changes any resolutions).<br><br><div class="quote"> <br> Doesn't blitzmax use this trimmed down list already when queried? <br> <br></div><br>If it does, That's nice for Blitzmax, I'm using B3D XD (sounds like another reason to upgrade!)<br>---<br><br>Another thought, which seems much more practical:<br><br><br>I can grab the current desktop resolution, which, logically MUST be supported (at least in 2D mode), by both the Adapter AND the monitor, so perhaps making a smaller "settings" app that's separate from the main program, (but writes the configuration data for the main prog to read), can always default to this mode - that would save a lot off messing about<br>:) <br><br></td></tr></table><br>
<a name="1076425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> making a smaller "settings" app <br></div><br><br>My preferred solution has always been for this initial settings app to appear in a relatively small resolution in windowed mode - seems to solve the problem adequately for my purposes, as I don't think the monitor much cares what the resolution of a window is. <br><br></td></tr></table><br>
<a name="1076601"></a>

<a name="1076602"></a>

<a name="1076603"></a>

<a name="1076604"></a>

<a name="1076605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Proper way to do it is to set the current desktop mode on first run and have a "safe mode" shortcut that does a default run at 800x600 (or 640x480) windowed as per post above - then let the user configure it themselves if needed from the native B3D enumerated list.<br><br>I use the code as per my post here:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=92282#1055609" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=92282#1055609</a><br><br>Expect other people have posted similiar versions of this code too.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1079788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Proper way to do it is to set the current desktop mode on first run and have a "safe mode" shortcut that does a default run at 800x600 (or 640x480) windowed as per post above - then let the user configure it themselves if needed from the native B3D enumerated list.<br> <br></div><br>It was the 'safe mode' default resolution that I was really concerned about, Rroff. Is 800x600 or 640x480 really viable on all systems these days?<br><br>Thanks for the input, though. <br><br></td></tr></table><br>
<a name="1079791"></a>

<a name="1079793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is 800x600 or 640x480 really viable on all systems these days? <br></div><br><br>Not in fullscreen, but windowed mode is safe in any resolution (doesn't have to be graphics-card supported) that fits on the screen (and probably that doesn't fit on the screen). So <i>windowed</i> 800x600 should always be viable.<br><br>'Course this solution may be of no use to you.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1080084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again.<br><br>I should remember to keep the options minimal. A big problem with too-small resolutions I've seen, is when the "apply" button is off-screen as well as the window handle :D <br><br></td></tr></table><br>
<a name="1080138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is to be noted that a lot of people today have moved to flat panels that are either in 16:10 or 16:9 (like me) aspect ratio.  So if you develop your game thinking that 5:4 or 4:3 is your objective aspect ratio, then a lot of the people that will try out your game or product on their shiny flat screen with native 1920x1080 will display in said 16:9 ratio and thus deform slightly the image by stretching it to fill the screen.  This of course won't happen if you're running in windowed mode.  A good thing would be to consider different aspect ratios and adapt the image output of your game depending on the aspect ratio.  In 2D platformers for example, it would be to display slightly more graphics horisontally in order to keep the aspect ratio of your graphics in proportion.<br><br>Good luck! <br><br></td></tr></table><br>
<a name="1080161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> That depends on the graphics card settings, PLUS the monitor: both have the ability to keep aspect ratio, and automatically put vertical black bars on the side. <br><br></td></tr></table><br>
<a name="1080186"></a>

<a name="1080187"></a>

<a name="1080188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> On the ATI Catalyst control center, by default, image scaling is set to off, but you can turn it on and tick the "maintain aspect ratio".  But by default it is off.  This option is what I consider an advanced user setting because most people don't bother with these options in the Catalyst.  I have no clue for Nvidia.<br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
