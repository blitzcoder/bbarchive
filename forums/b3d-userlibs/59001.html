<!DOCTYPE html><html lang="en" ><head ><title >JV-ODE Physics Thread 7</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >JV-ODE Physics Thread 7</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >JV-ODE Physics Thread 7</a><br><br>
<a name="656735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now available for <b>Blitz3D</b> &amp; <b>BlitzMax (Win32)</b><br><br>The JV-ODE Physics Wrapper is an advanced user library supporting almost all of the Open Dynamics Engine functions wrapped inside a DLL (Dynamic Link Library).<br><br>The library can be used with any programming language that supports DLL's, including Blitz3D and BlitzMax (Win32). The Euler rotation system in JV-ODE has been adapted to match the left-handed Euler rotation used in Blitz3D, however functions for accessing Quaternion and Axis Angle rotation systems are also included. The full versions contain all of the necessary files to get you started, including over 30 demos showing the various features found in ODE and a complete Function Reference document.<br><br>The BlitzMax (Win32) version also features a built-in 'bare-bones' OpenGL 3D engine module and B3D mesh loader module for demo purposes.<br><br>To view more information and screenshots <a href="http://jv-ode.devcode.co.uk/" target="_blank">click here</a>.<br><br>Options are now available to purchase the wrapper using either PayPal or Share*it.<br><br>The <b>Blitz3D</b> restricted demo version is now available for download <a href="http://jv-ode.devcode.co.uk/dload/JV-ODE-Demo-Blitz3D.zip" target="_blank">here</a> (198KB)<br><br>The <b>BlitzMax (Win32)</b> restricted demo version is now available for download <a href="http://jv-ode.devcode.co.uk/dload/JV-ODE-Demo-BlitzMax.zip" target="_blank">here</a> (268KB)<br><br>The <b>ODE For Newbies</b> tutorial from Shifty Geezer is now available for download <a href="http://www.davidcoombes.f2s.com/ode_for_newbies.pdf" target="_blank">here</a> (79KB)<br><br>Have Fun :)<br><br>Previous JV-ODE Threads: <a href="/posts.php?topic=43653" target="_blank">1</a> <a href="/posts.php?topic=45048" target="_blank">2</a> <a href="/posts.php?topic=48743" target="_blank">3</a> <a href="/posts.php?topic=52572" target="_blank">4</a> <a href="/posts.php?topic=53490" target="_blank">5</a> <a href="/posts.php?topic=56209" target="_blank">6</a><br>JV-ODE <a href="http://playerfactory.proboards25.com/" target="_blank">Player Factory</a> Forum<br><br>Useful Links: <a href="http://www.ode.org/" target="_blank">ODE.org Website</a> - <a href="http://opende.sourceforge.net/wiki/" target="_blank">ODE Wiki</a> - <a href="http://www.ode.org/ode-latest-userguide.pdf" target="_blank">ODE User Guide (PDF)</a> - <a href="http://www.ode.org/ode-latest-userguide.html" target="_blank">ODE User Guide (HTML)</a> <br><br></td></tr></table><br>
<a name="657230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Battle Tanks</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for going the extra mile and explaining it to me. :)<br><br>You are still the best! a very clever sense of hummer too. I nearly didn’t get it. :) <br><br></td></tr></table><br>
<a name="657400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unlike Easytok, ODE can implement physics into any level right? That means I can take a .b3d level and place a ragdoll in it?<br><br>Just curious. <br><br></td></tr></table><br>
<a name="657412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, you can use any mesh type with JV-ODE, including .b3d meshes. <br><br></td></tr></table><br>
<a name="657445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, then I may seriously think about buying it. Does it come with a detailed documentation? I'm afraid I might be too inexperienced to use it. <br><br></td></tr></table><br>
<a name="657468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Battle Tanks</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It comes with some real cool examples a lot more than in the Demo, which cover most things you would want to do. <br><a href="http://www.ode.org/ode-latest-userguide.pdf" target="_blank">pdf ODE manual here!</a><br>this userguide uses some C examples but I still find it very useful<br><br>There is a document that come with is it cover the differences between using JV-Ode/(Blitz3d or BlitzMax) and Ode/C<br><br>When you get stuck Vipers support comes in very handy :) best £10 I’ve spent in a long time :) <br><br></td></tr></table><br>
<a name="657475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Battle Tanks</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I  am looking for the best way to use JV-ODE for compensating for Game lag in an Internet or LAN Game.<br>This is the system I am thinking of using.<br><br>Each computer has it’s own copy of JV-ODE running. <br><br>The host Computer keeps the Master/Control  Copy of All Ai players, their projectiles and any other Physic objects in the current map. It also has the Master/Control  Copy or any human player that may be using the host computer (like on a LAN game)<br><br>All the other human players have the Master/Control  Copy of there tank and any projectiles they have fired on their computer JV-ODE simulation.<br><br>This would work Perfectly fine on it’s own if the communication between each computer was instantaneous. Back in the real world this is never going to happen. :(<br><br>So to compensate for this delay I was planning to recorded every positions, velocity ect ect of each object every step. When a update comes in from one of the other computers it is checked to see when the updated information was created then compared to it’s ghost objects positions, velocity ect data at that time. If they are out of sink with each other then Ghost object is moved to the correct positions for that time and then run thought and separate JV-ODE simulation to catch up with the object in the local simulation.<br><br>There is obviously a processing hit and inaccuracies can creep in will this method. Any other ideas, comments or suggestions? <br><br></td></tr></table><br>
<a name="657480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The JV-ODE demos don't work though. He leaves out the function in the restricted demos lol. <br><br></td></tr></table><br>
<a name="657530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Battle Tanks</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can’t blame Viper for protecting his hard work can you! Even with The demos limitations you can tell JV-ODE is the best plug-in  that you can get for Blitz. Well worth ten times the asking price.<br><br>Well I think you know that JV-ODE is the one to go for. It's fast, versatile, stable and ease to use. <br><br></td></tr></table><br>
<a name="657542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great! Well one last question...<br><br>How easy is it to take an animated .b3d model and make it ragdoll (insert joints and all)? Is this even possible? <br><br>If this is possible, I will definitely buy it :D <br><br></td></tr></table><br>
<a name="657560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Battle Tanks: I haven't done much work with networking in ODE, so it wouldn't be fair for me to advise you on it tbh. However, I know it's definitely possible with great results. Both KuRiX and Cygnus have done some excellent work with networking ODE sims, they might be able to help you if you can grab their attention. Also, check out KuRiX's free <a href="/posts.php?topic=50546" target="_blank">RakNet</a> networking library too.<br><br>@IKG: Something like this?...<br><br><img src="http://jv-ode.devcode.co.uk/shot/jv-odescr2.jpg"><br><br>I wouldn't go so far as to say it's easy, but the demo above is included in the full version. It's more or less the same as the standard RagDoll demo with some extra code to parse the bones, so that joints can be created and parented to them. <br><br></td></tr></table><br>
<a name="657571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> But how would that work with a rigid animated model exported to .b3d? Same way? <br><br>Also, if it's not particularly easy, do you still think any beginner can learn it by using the demos and documentation?<br><br>Thanks again.<br><br>Edit: I just found this quote from another physics thread:<br><br><div class="quote"> Just play with connecting rigid bodies with joints and you'll get it. I would say first start off with the framework layout of joints and geometries, then play with the joint inertia settings, and limits. <br> <br></div><br><br>Is that how it can be done? <br><br></td></tr></table><br>
<a name="657595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The zombie model you see above is an animated b3d model which is also included with the full version, you can find the model here... www.psionic3d.co.uk<br><br>I think as long as you use the demos as a guide and experiment with them for a while, you should be able to pick it up quite easily.<br><br>The quote you've posted pretty much sums it up, although most of that is already done for you. You just need to tweak the geometry dimensions and joint limits as needed. The same applies to the animated zombie version.<br><br>Have a good play around with the demo version, take your time and if you need more info then feel free to ask :) <br><br></td></tr></table><br>
<a name="657611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great :D<br><br>I'll be purchasing it tonight (or tomorrow the latest). You seem like a very helpful person; would you be able to help me out here and there if I ever got stuck?<br><br>Thanks again. <br><br></td></tr></table><br>
<a name="657692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Battle Tanks</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Viper for the RakNet tip will give that a go :)<br><br>And wellcome to the JV-ODE family IKG. I know you will enjoy using it, I do! <br><br></td></tr></table><br>
<a name="657724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just bought it. I'm really looking foward to using it :D <br><br></td></tr></table><br>
<a name="657947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>would you be able to help me out here and there if I ever got stuck?<br> <br></div><br>Sure, if you need any assistance let me know :) <br><br></td></tr></table><br>
<a name="658058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, do you have AIM or any other kind if instant messaging service? <br><br></td></tr></table><br>
<a name="658069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I don't use instant messaging.<br><br>I prefer it if people ask me questions here tbh, that way other users can benefit from the information posted. <br><br></td></tr></table><br>
<a name="658075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, well I was just embarrassed to ask such small, stupid, questions. <br><br>- Is there a tutorial or something on where to really start when adding the most basic object that needs physics, into your game? Or should I do the following:<br><br>1) Take a look at a simple demo like "Cylinders" and study the function:<br><br><pre class=code>
Function AddObject()

xp=Rand(-10,10)
zp=Rand(-10,10)
ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,30,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\geom=dCreateCylinder(Space,0.5,10)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
ScaleMesh ode\mesh,0.5,5,0.5
EntityColor ode\mesh,Rand(255),Rand(255),Rand(255)
EntityAlpha ode\mesh,1
EntityShininess ode\mesh,0.7

End Function
</pre><br><br>I see a lot of this type of code in the other demos too. Is this the basic way of setting up any kind of object?<br><br>I still love everything so far though. Glad I bought it. Now all I have to do is take it easy and try to learn :D<br><br>Edit: I played around with the demo some more, and answered my own question. Well, sort of. The code above can easily be explained, but the rest of the demo has me boggled. How can I figure out on my own, what it takes to get everything working? I ha te just copying and pasting someone elses work. Where do I begin? Oh and by the way, what does "RD" stand for? <br><br></td></tr></table><br>
<a name="658105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't be embarrassed, everyone is a noob when they start out :)<br><br>I'll break the function down for you so that you can see what's going on...<br><br>First the body is created, which is affected by forces like gravity etc. You can also attach mass to the body.<br><br>Next the geom is created to define the geometry of the object. A geom is used for collision detection. It's then attached to the body.<br><br>Lastly the mesh is created, which is the visible part of the object. The mesh is not an ODE object but a Blitz object used for drawing purposes.<br><br>An ODE object should always be created in that order. There are cases where you don't need a body, for example if you want to create a static object, like a building. In that case you can omit the body sections of code and only create the geom and mesh. You can see in the car demo that the ramp is created in this way. Because the ramp has no body, it doesn't fall to the ground or get pushed around by other objects. It does still collide, as it has geometry (geom).<br><br>I'd recommend reading through the ODE User Manual, there's links to it in the top post of this thread. Even if you don't fully understand it, it will help you get a grasp of the basics. If you find parts of it are too complicated, skip over to the next part and come back to it later on.<br><br>If you have any questions, no matter how trivial, please feel free to ask here. Also read the previous JV-ODE threads as they could really help too. <br><br></td></tr></table><br>
<a name="658113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wonderful! I suppose I'll start off small before heading to ragdolls. Do you think I'll be ready for ragdolls once I understand the entire rectangles or cylinders demo? I keep looking at the zombie demo, and there is just so much to take in. What do you recommend I read or learn that will make everything seem as easy as it is to you?<br><br>The ODE manual is way too advanced for me. <br><br></td></tr></table><br>
<a name="658127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd begin by getting used to creating different objects. Try to mimic the simple demos like the spheres demo and cubes demo. Once you've familiarised yourself with creating moving objects, try static ones. Then have a go at creating and attaching joints to two bodies.<br><br>Take it one step at a time, don't try to run before you can walk. Make sure you read through the previous JV-ODE threads as there's some good simple info in them. <br><br></td></tr></table><br>
<a name="659514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be great if you could make an actual tutorial on how to set up your own ragdoll. In fact, that would be fantastic :D <br><br></td></tr></table><br>
<a name="659592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've already covered that subject in a previous JV-ODE thread ;)<br><br>Once you've reached the stage of jointing bodies and you've experimented with the joint limits etc, a RagDoll would be no problem at all. <br><br></td></tr></table><br>
<a name="659597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a fair bit ot get your head round to understand JV-ODE, and if you don' understand you won't be able to use it. It's not like some systems where you can hack a few demo code snippets to create your wanted results.<br><br>You could try this guide for newbies to get you started.<br><a href="http://www.davidcoombes.f2s.com/ode_for_newbies.pdf" target="_blank">http://www.davidcoombes.f2s.com/ode_for_newbies.pdf</a> <br><br></td></tr></table><br>
<a name="659602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's just the kind of thing I needed, Shifty! Thanks a bunch :D <br><br></td></tr></table><br>
<a name="659661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Holy smoke Shifty, how did I forget your tute?<br><br>Is this a newer version to the one I read before? It's very well made IMO, really explains things clearly.<br><br>Is it okay to link to it in the top post? Or even to distribute it? <br><br></td></tr></table><br>
<a name="659703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >clownhunter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just bought this 10 minutes ago.  Now I need to wait the 48 hours. :/  Time to mess around in the demo some more! <br><br></td></tr></table><br>
<a name="659809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's the same tute made yonks ago. I had to go looking for the Player Factory link to find it as I forgot the link myself ;)<br><br>By all means link to it or distribute it. If it's useful it'd be worth including with the JV-ODE distro I think. Though if you want to do that I'll change it so it's not in .pdf and people can actually copy and paste the code examples! <br><br></td></tr></table><br>
<a name="660097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeh, that would be great Shifty thanks!<br><br>I'll add a link to the PDF in the top post here and include the updated version with the wrapper.<br><br>Thanks again, much appreciated :) <br><br></td></tr></table><br>
<a name="660115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >clownhunter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright, I'm messing around with the demo and I'm trying to make a simple bowling game.  So far I can move the ball side to side and when I hit space, the ball goes forward, but it doesn't knock over the pins.  My code's below:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
AppTitle "JV-ODE - BOWLING"

Include "JV-ODE.bb"

Graphics3D 800,600,0,2

Type ODEGeom
	Field body
	Field geom
	Field mesh
	Field ball
End Type

; ########################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-.98,0)
dContactSetMode(dContactBounce)
dContactSetBounce(.1)
dContactSetMu(48)

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,0,20,-50
RotateEntity Camera,30,0,0

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=LoadTexture("wood.png")
EntityTexture plane,planetexture
ScaleTexture planetexture,25,25

Global pin = LoadMesh("bowling pin.b3d")
ScaleMesh pin,.125,.125,.125
MoveEntity pin,0,5,0
HideEntity pin

Mirror=CreateMirror()

; ########################################

For i = 0 To 9:AddObject(i):Next

; Bowling Ball
xp = 0
xy = 3
zp = -40
ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
Global ball = ode\body
mass=dMassCreate()
dMassSetSphereTotal(mass,200,1.5)
dMassTranslate(mass,0,-1,0)
dBodySetMass(ode\body,mass)
dMassDestroy(mass)
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,xy,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\geom=dCreateSphere(Space,3)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateSphere()
ScaleMesh ode\mesh,3,3,3
EntityColor ode\mesh,128,128,128
EntityAlpha ode\mesh,1
EntityShininess ode\mesh,0.7
ode\ball = 1

While Not KeyHit(1)

	PTime=MilliSecs()

	If MilliSecs()-Timer&gt;700
		Timer=MilliSecs()
	End If

	UpdateGeoms()
	
	For ode.ODEGeom=Each ODEGeom
		If ode\ball = 1
			If KeyDown(203)
				MoveEntity ode\mesh,-.1,0,0
			EndIf
			If KeyDown(205)
				MoveEntity ode\mesh,.1,0,0
			EndIf
			If KeyHit(57)
				release = 1
			EndIf
			If release = 1
				MoveEntity ode\mesh,0,0,1
			EndIf
		EndIf
	Next
		
	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateWorld

	RenderWorld

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime
	Text 340,0,"Demo Time:"+dDemoTime()
	If dDemoTime()=0 Then Text 240,80,"*** TIME EXPIRED PLEASE RESTART DEMO ***"

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ########################################

Function AddObject(pinn)

If pinn = 0
	xp = 0
	zp = 0
EndIf
If pinn = 1
	xp = -5
	zp = 10
EndIf
If pinn = 2
	xp = 5
	zp = 10
EndIf
If pinn = 3
	xp = 10
	zp = 20
EndIf
If pinn = 4
	xp = 0
	zp = 20
EndIf
If pinn = 5
	xp = -10
	zp = 20
EndIf
If pinn = 6
	xp = -15
	zp = 30
EndIf
If pinn = 7
	xp = -5.5
	zp = 30
EndIf
If pinn = 8
	xp = 5.5
	zp = 30
EndIf
If pinn = 9
	xp = 15
	zp = 30
EndIf
ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
dBodySetRotation(ode\body,90,0,0)
dBodySetPosition(ode\body,xp,60,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\geom=dCreateCCylinder(Space,1,8)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CopyMesh(pin);CreateCylinder(8)
;ScaleMesh ode\mesh,1,5,1
RotateMesh ode\mesh,-90,0,0	; &lt;&lt;&lt; Mesh X-Axis must be rotated 90 degrees to fix cylinder alignment
EntityColor ode\mesh,255,255,255
EntityAlpha ode\mesh,1
EntityShininess ode\mesh,0.7

End Function

; ########################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	If dBodyIsEnabled(ode\body)
		;dBodyAddForce ode\geom,force#,0,0
		RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
		PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
	End If
Next

End Function

; ########################################
</textarea> <br><br></td></tr></table><br>
<a name="660123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >clownhunter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yay, I'm downloading the full version right now.  That didn't even take 24 hours with Pay Pal!  More like 19. <br><br></td></tr></table><br>
<a name="660125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, you're trying to force the position of the ball manually. You can't do this in ODE after you've setup and started the simulation. ODE should be left to position the objects itself, otherwise you're abusing the simulation. Hence, no collision response and the ball doesn't roll etc. You need to 'push' the ball by applying force to the ball body.<br><br>Here's a fixed version of your code...<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
AppTitle "JV-ODE - BOWLING"

Include "JV-ODE.bb"

Graphics3D 800,600,0,2

Type ODEGeom
	Field body
	Field geom
	Field mesh
	Field ball
End Type

; ########################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-.98,0)
dContactSetMode(dContactBounce)
dContactSetBounce(.1)
dContactSetMu(48)

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,0,20,-50
RotateEntity Camera,30,0,0

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

;PlaneTexture=LoadTexture("wood.png")
;EntityTexture plane,planetexture
;ScaleTexture planetexture,25,25

;Global pin = LoadMesh("bowling pin.b3d")
;ScaleMesh pin,.125,.125,.125
;MoveEntity pin,0,5,0
;HideEntity pin

Mirror=CreateMirror()

; ########################################

For i = 0 To 9:AddObject(i):Next

; Bowling Ball
xp = 0
xy = 3
zp = -40

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
Global ball = ode\body
mass=dMassCreate()
dMassSetSphereTotal(mass,10,1.5)
;dMassTranslate(mass,0,-1,0)
dBodySetMass(ode\body,mass)
dMassDestroy(mass)
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,xy,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\geom=dCreateSphere(Space,3)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateSphere()
ScaleMesh ode\mesh,3,3,3
EntityColor ode\mesh,128,128,128
EntityAlpha ode\mesh,1
EntityShininess ode\mesh,0.7
ode\ball = 1

While Not KeyHit(1)

	PTime=MilliSecs()

	If MilliSecs()-Timer&gt;700
		Timer=MilliSecs()
	End If

	UpdateGeoms()

	If KeyDown(57)
		release = 1
		dBodyEnable(ball)
		dBodyAddForce(ball,0,0,100)
		End If

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateWorld

	RenderWorld

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ########################################

Function AddObject(pinn)

If pinn = 0
	xp = 0
	zp = 0
EndIf
If pinn = 1
	xp = -5
	zp = 10
EndIf
If pinn = 2
	xp = 5
	zp = 10
EndIf
If pinn = 3
	xp = 10
	zp = 20
EndIf
If pinn = 4
	xp = 0
	zp = 20
EndIf
If pinn = 5
	xp = -10
	zp = 20
EndIf
If pinn = 6
	xp = -15
	zp = 30
EndIf
If pinn = 7
	xp = -5.5
	zp = 30
EndIf
If pinn = 8
	xp = 5.5
	zp = 30
EndIf
If pinn = 9
	xp = 15
	zp = 30
EndIf

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
dBodySetRotation(ode\body,90,0,0)
dBodySetPosition(ode\body,xp,60,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\geom=dCreateCCylinder(Space,1,8)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
ScaleMesh ode\mesh,1,5,1
RotateMesh ode\mesh,-90,0,0	; &lt;&lt;&lt; Mesh X-Axis must be rotated 90 degrees to fix cylinder alignment
EntityColor ode\mesh,255,255,255
EntityAlpha ode\mesh,1
EntityShininess ode\mesh,0.7

End Function

; ########################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	If dBodyIsEnabled(ode\body)
		RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
		PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
	End If
Next

End Function

; ########################################
</textarea><br>Also, you shouldn't translate the ball mass as it will move the center of gravity, causing an uneven roll. <br><br></td></tr></table><br>
<a name="660132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >clownhunter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awsome, it works!  Thanks a lot! <br><br></td></tr></table><br>
<a name="660592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way shifty, don't you mean:<br><br><pre class=code>
Include "JV-ODE.bb"
</pre><br><br>not<br><br><pre class=code>
Include "ode.bb"
</pre><br><br>Great tutorial though. Well, up to the part where you start adding crazy stuff in heh. That just got a little confusing. I read up to the part where you get 1 working cube. I guess from here I'll just explore the demos more. Think you would ever write a ragdoll tut, Shifty :D?<br><br>Edit: Ugh, I'm having so many problems. I've been trying to do something as simple as loading my own mesh and making the camera able to push it. I set up collisions with the camera and mesh, but how can I make it so that the camera is a "force" against the mesh? There is still so much more I have to learn. I'm so way in over my head :( <br><br></td></tr></table><br>
<a name="660650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeh, the include filename changed after Shiftys tute was made. Patience IKG, it'll come ;)<br><br>If you need any help, ask some specific questions or post a bit of code.<br><br><b>Update on cross-platform ODE module:</b><br>I've been weighing up the pros and cons of developing a fully cross-platform ODE module for BlitzMax over the last few weeks. The conclusion... it's -very- unlikely that I'll be pursuing development of a cross-platform module for various reasons, lack of the necessary hardware being one of them.<br><br>Note: The above doesn't affect JV-ODE in any way. <br><br></td></tr></table><br>
<a name="660822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know where you're coming from VIP3R. I have Mac owners asking for ports of my graphics plugins, but the cheapest macs are like £400 even on eBay and then you need development tools on top of that. Unless you can be sure of getting returns on the investment, it's not economically viable. Perhaps though you could start a wishlist and if a certain number of people put their names down, consider it worthwhile. That way anyone who wants a Mac version can register their interest and see from the list of names whether it's a fair thing to expect from you. <br><br></td></tr></table><br>
<a name="660978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> How can I setup collisions with my camera and the meshes/objects that are being created? I've tried a few ways, but none of them have worked so far. I've tried creating a type for the camera and I've also tried the old-fasioned way (B3D collisions). Any ideas?<br><br>Also, I'm starting to learn a lot more but there's still something I don't understand in the "RagDolls" code:<br><pre class=code>xp#=-8+(rd*4)
yp#=7
zp#=4</pre><br><br>It's at the beginning of the "CreateRagDoll" function, which is then seen throughout the rest of the function. <br><br></td></tr></table><br>
<a name="660982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I'd be willing to donate to a VIP3R Mac fund to get JV-ODE on the Mac :)<br><br>You can get a min-spec Mac Mini on Ebay for around £250 or so. <br><br></td></tr></table><br>
<a name="661200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers for the support Shifty :)<br><br>@IKG: The easiest thing you can do for the camera collisions is to create an ODE object for it. Create the camera object at the location where you need it (3rd person view etc), then disable the gravity effects on the camera object by using 'dBodySetGravityMode(camerabody,0)'. Now all you need to do is add an ODE joint between the camera object and the player object. Once you've done this, the camera will follow the player and collide with the scenery etc. The joint can be either fixed, or you can use hinge or ball joints. To allow the camera to move about slightly or restrict its motion, you can set the dParamLoStop and dParamHiStop parameters (the joint limits). It can be tricky, so it might be worth leaving this until you've got used to using ODE a bit more. However, if you're feeling brave then go for it and give me a yell if you need more help ;)<br><br>The code you posted is the x/y/z positions of the RagDoll and 'rd' is the RagDoll ID number. When each RagDoll is created, they're all created at the same height (yp) and distance from the camera (zp). The x position (xp) is calculated as... <i>-8 + (RagDollNumber * 4)</i>. For RagDoll(1) xp = -4 (left), for RagDoll(2) xp = 0 (center) and for RagDoll(3) xp = 4 (right). The xp/yp/zp variables are used to make it easier to change the position of the complete RagDoll, to move them you would only need to change the values in the section of code you've posted, rather than change the position of every RagDoll body, mesh and joint individually.<br><br>@simonh: Hehe, the VIP3R Mac Fund, I like the sound of that. I'm not so keen on the Mac Mini on Ebay idea though, it's probably an empty Mac Mini box and manual :P <br><br></td></tr></table><br>
<a name="661255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> I couldn't find a Mac Mini for less then about £400 when I went looking a few days back. There a few up now at nearer the £300 mark but there's still ime for bids. You might be lucky and get one for less than £300. If Mac JV-ODE goes for £10 a license, it'd need 30 purchases just to cover the cost of the hardware. Perhaps if 50 people were to commit to it, it might be something to consider, at least in having the economic restrictions solved. There's still the time and support needed, perhaps learning something of a new OS to provide support, and the question how many people are going to use BlitzMAX to write Mac games? Is it that popular that enough people will buy the product? I've no idea what the Indie/MAX situation for Mac's is like, but I can't imagine most Mac owners wanting to buy Indie games. <br><br></td></tr></table><br>
<a name="662097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got my hands on a Mac Mini recently, however it didn't boot up, or even turn on for that matter. <br><br></td></tr></table><br>
<a name="662149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I have an animated model which already has bones inside it, how would I make it ragdoll when it dies? I know the demo uses shapes in a model that isn't animated. <br><br></td></tr></table><br>
<a name="662171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OJay</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> well having the bones only, it wont work...you need some more information to turn a rigid into a ragdoll (join dimentions, -limits, -masses etc). so either you do this by using special-named pivots parented to the respective bone, which would be a pain in the ass to setup and parse...<br><br>OR<br><br>you're using a additional file to your b3d model (e.g. with the same name) and defining these informations within that file. XML would be fine. then all you have to do is to load go through all bones of your model (findchild() etc) and make a lookup into the XML-file to get the setup of that specific bone. should be pretty easy to implement...<br><br>hope this gives you an idea of how you _could_ do that :)<br><br>cheers <br><br></td></tr></table><br>
<a name="662212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> @IKG: You should create all of the ODE body/geoms in the RagDoll when it's in its default (start) position. Before you begin animating it etc, you should be able to disable the ODE bodies attached to it, so that the physics simulation doesn't influence them. When the RagDoll dies, you need to enable the ODE bodies attached to it so that the physics can take over. I would consider this is an advanced ODE subject, so it may seem a bit overwhelming to those new to ODE. Make a backup of the RagDoll Zombie demo and practice with that first. Remember that the RagDoll animated mesh and the ODE RagDoll geometry must co-exist, you just need to switch between 'Anim/No ODE' to 'No Anim/ODE Active'. <br><br></td></tr></table><br>
<a name="662417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it working! Heavily modified the "ragdolls" demo ;)<br><br>2 more questions for now Vip3r:<br><br>- When you were setting up the "ragdolls" demo (not the zombie one) how did you know where to place and position each part? Simple math/thinking?<br><br>- Joints...yeah uhh where should I start? I was going to attempt to make a simple ragdoll until remembering about the joints. I know how joints work, I just don't know how to set them up. <br><br></td></tr></table><br>
<a name="662541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> First you should comment out the dWorldQuickStep() function to 'pause' the simulation. This will allow you to set it up without the body parts moving (even with no joints). Positioning each body needs some simple math using the dimensions of each body part, for example you know the x position of the arms would be half the width of the upper body + the radius of the arm.<br><br>For the joints, you create the joint you want (hinge etc), then you attach the joint to the two bodies you want to join together. Next you specify which axis you want to allow rotation on and the position of the anchor. To enable rotation on an axis you would use 1 (or -1 to reverse) or use 0 to disable rotation. The anchor is the position of the joint axis, where the hinge joint swivels. It's easy to work out the position of the anchor, you can create an elongated Blitz sphere to use as a marker. Position the marker until it's in the correct location (elbow, knee etc), once done the markers position will be the correct coordinates for the anchor. Then you specify the joint limits using the dParamLoStop and dParamHiStop parameters. Remember these parameters use radians, not degrees.<br><br>Look at the CreateRagDoll() function for more ideas, the top of the function defines the body parts, the base of the function defines the joints. <br><br></td></tr></table><br>
<a name="662675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great :D <br><br>Another thing, what do you recommend I do to make the whole "geom ragdoll" 1 entity? I tried using all the ode\ fields as entities I could control, but it won't work.<br><br>I want to move him around while he is frozen, if that that is even possible. I know it will work once I am using an actual loaded mesh, but for now is there any way I can do this with the guy you made out of geom peices? <br><br></td></tr></table><br>
<a name="662691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> For the 'whole one entity' you can use arrays or separate types (or extend the ODEGeom type) to keep track of each individual RagDoll, the demo shows arrays being used to track the bodies and joints... RDBody(rd) and RDJoint(rd). You would get better ideas if you posted this kind of question in the 3D Programming forum tbh as it's more of a general programming subject.<br><br>Make sure you create the RagDoll in its starting position. To move it, disable and zero any forces on each body part, then reposition all of the RagDoll components. <br><br></td></tr></table><br>
<a name="673357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can someone please tell me why I am getting the message<br>"failed to open C:/Program Files/BlitzMax/Mod/devcode.mod/jvode.mod/jvode.bmx" when I build and run my program. <br><br>It compiles ok and I have followed instructions regarding copying the devcode.mode folder to mod and adding project <br><br>The demo programs run fine from their own folder but not when I move to a different folder.<br><br>Thanks<br><br>oops: never mind  jvode.dll not in folder <br><br></td></tr></table><br>
<a name="673365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll try a different question.<br><br>In the demo's I don't understand this bit<br><br><br>LoadB3DMesh("media/terrain.b3d")<br><br>Local TriMesh:Int<br><br>TriMesh=CreateTriMesh(Space,1.0,0.7,1.0)<br><br>I don't understand how LoadB3DMesh is linking to the CreateTriMesh command<br><br>I'm a blitzmax user so I don't have access to b3d meshes or anything and I am currently writing a simple trimesh loader using data from an array. <br><br></td></tr></table><br>
<a name="673387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had a question about this code but I've got it working so never mind. I'll leave it up in case other biltzmax jvoders find it useful<br><br>edit: I removed the code as it doesn't work see below for working code <br><br></td></tr></table><br>
<a name="673460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I initially kept the CreateTriMesh() function closed for the BlitzMax version to save folks getting confused about its use, as it's dependent on the JV-ODE B3D Loader Module. But, it looks like that might have been a bad idea.<br><br>Here's the CreateTriMesh() function from the BlitzMax Module for reference purposes, I'll add the following source to the next BMax update...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' ###################################################################################################

Function CreateTriMesh:Int(trispace:Int,xscale:Float=1.0,yscale:Float=1.0,zscale:Float=1.0)

Global TriBank:TBank=CreateBank(NTris*3*4)
Global VertBank:TBank=CreateBank(NVerts*4*4)

Local Offset:Int=0
Local TriOffset:Int=0

Local VertData:Vrts
Local TriData:Tris

For VertData:Vrts=EachIn B3DVrtsList
	PokeFloat(VertBank,Offset,xscale*VertData.X)
	Offset:+4
	PokeFloat(VertBank,Offset,yscale*VertData.Y)
	Offset:+4
	PokeFloat(VertBank,Offset,zscale*VertData.Z)
	Offset:+8
Next

For TriData:Tris=EachIn B3DTrisList
	PokeInt(TriBank,TriOffset,TriData.V0)
	TriOffset:+4
	PokeInt(TriBank,TriOffset,TriData.V1)
	TriOffset:+4
	PokeInt(TriBank,TriOffset,TriData.V2)
	TriOffset:+4
Next

Local TriMeshData:Int=dGeomTriMeshDataCreate()

dGeomTriMeshDataBuildSimple(TriMeshData,BankBuf(VertBank),NVerts,BankBuf(TriBank),NTris*3)

Return dCreateTriMesh(trispace,TriMeshData)

End Function

' ###################################################################################################
</textarea> <br><br></td></tr></table><br>
<a name="674101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barton</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has one a sourcecode for construction of a BlitzTerrain TriMesh ?<br>(Get data from a Blitz Terrain and create a Tri Mesh)<br><br>This would be brilliant! <br><br></td></tr></table><br>
<a name="674123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Barton,<br><br>If you're using a heightmap to create the BlitzTerrain then there's a way of doing it. You need to create a static mesh from the heightmap and create the TriMesh from the static mesh, then you use the BlitzTerrain for the visible geometry.<br><br>There are some tools here that can do the conversion, one is F.L.E. which should be in the Toolbox section. I think there is also some source code in the code archives that can create a static mesh from a heightmap too. <br><br></td></tr></table><br>
<a name="674145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any chance of a tutorial for vehicle construction ie adding wheels and joints to a body, explaining each step?. I'm following code from the demo's but getting nowhere..slowly.<br><br>I can sort of understand each step but putting it all together ends up with a vehicle with wheels spinning in all the wrong directions and no actual vehicle movement, except when it decides to shoot off at high speed to infinity!!<br><br>Also the quadratic space function, does that work on a per triangle basis or an object basis ie if I have a large terrain mesh and add it into quadratic space does ode regard it as one object or a collection of triangles.<br><br><br>I'll leave the falling thru the mesh problem for another day <br><br></td></tr></table><br>
<a name="674162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have the time to write tutorials tbh, I prefer to create demos to show the features of ODE.<br><br>It's quite easy to set up a simple car though. Firstly you need to add and position the wheels next to the car body, this is labelled 'Create car body/wheels' in the car demo. You also add mass to the car body and wheels during their creation. Next you set up the joints to attach the wheels to the car body, this is done in the SetupCar() function. The dJointSetHinge2Anchor(Joint(count),x,y,z) positions the joint anchor. The dJointSetHinge2Axis1(Joint(count),0,1,0) function defines which axis are allowed freedom, 1 = allow freedom (-1 = reversed) and 0 = no freedom (locks axis). Then you set the suspension parameters (ERP/CFM) and set the dParamLoStop/dParamHiStop parameters to define how much rotation is allowed on the free axis in radians (not degrees). That's the set up done. Now you just need to apply forces to the joints using dParamVel/dParamVel2 and dParamFMax/dParamFMax2, see the UpdateCar() function.<br><br>There's lots of info in the ODE manual covering the joint basics. There's also lots of info in the previous JV-ODE threads regarding joints so read over those too.<br><br>The quadratic space works per object not per triangle.<br><br>Falling through meshes can be caused by incorrect mass settings (like applying box mass to spheres etc) or the triangle size of the mesh maybe too large. There are other causes but those are usually the most common. Also, remember that flat ended cylinders don't collide with TriMeshes... only spheres, cubes and capped cylinders do. <br><br></td></tr></table><br>
<a name="674194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok thanks for that. I've made a little progress. It seems when I set up a vehicle at the origin it works ok but if I try and reposition the vehicle afterwards using dgeomsetposition or dbodysetposition it does the flying off to infinity thing.<br><br>It seems like ode numbers need a very light touch, one little change and it all goes drastically pearshaped. <br><br></td></tr></table><br>
<a name="674209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> once the geoms are attached to the bodies, you only to need to position one of them, not both... <br><br></td></tr></table><br>
<a name="674215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeh, as Kuri says you normally only need to reposition the body, the geom is already attached and will move with it. Make sure you cancel out the velocity (force/torque etc) when repositioning them to prevent the simulation exploding.<br><br>As you've discovered even tiny value changes can have very large effects on the simulation, so make very small adjustments. <br><br></td></tr></table><br>
<a name="674754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blackbag</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> With the same initial conditions will the simulation always reach the same solution?<br><br>I am starting on a very basic crossfire (old board game where you fire bearings at a puck and try to score in an opponents goal) game and I am trying to come up with a networking strategy before I start.  I would like to just have the programs passing the smallest ammount of information possible, the angle the gun is pointed at and if a bearing has been fired.  But this will only work if the simulations on both machines stayed in syncronisation. <br><br></td></tr></table><br>
<a name="674760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> It depends on the resolution of accuracy used. Make your simulation step size (dWorldQuickStep) as small as possible. You could also try using dWorldStep which is far more accurate but will use much more memory.<br><br>You can test how accurate it is by doing a few runs with the same angle and measure the coordinates of the bearings. If they end up at the same position you should be fine, but I would recommend performing the same tests on another machine to make sure. <br><br></td></tr></table><br>
<a name="674914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> What will happen when my ragdoll mesh has geom peices placed inside it, but needs to move around and be animated? This would be while forces are disabled, like I mentioned before. <br><br></td></tr></table><br>
<a name="674967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> What will happen? I'm not sure what you mean, you need to disable the physics while animating, then re-enable it when you're not animating. When you switch from animated to non-animated the physics will take over.<br><br>Something like this...<br><br><i>Animated - Physics disabled / Update geom positions to match RagDoll mesh positions<br><br>Non-Animated - Physics enabled / Update RagDoll mesh positions to match geom positions</i><br><br>There's more info in the previous JV-ODE threads regarding animated RagDolls IIRC, that might help point you in the right direction. <br><br></td></tr></table><br>
<a name="675182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's exactly what I mean. How would you update geoms to match an animated mesh?<br><br>Or will the geoms just follow the body through animations all on their own? <br><br></td></tr></table><br>
<a name="675309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Regarding objects and large triangles I have been playing around with one of the car demo's and it seems one can scale the trimesh up to about 32X without too many problems although some jitter is detectable.<br><br>I think there must be something wrong with the trimesh loading function which I am using, which is basically same as the one I mentioned earlier in the thread. I made a heightmap that was flat except for some tall square areas, like skyscrapers, of differing sizes. Apart from alot of terrain snagging the other curious thing is the alignment of the drawn terrain against the  invisible trimesh. Travelling the z axis + or - into a skyscraper the collision is perfect but when I do it in the x axis there vehicle stops in front of the wall by a certain amount. I initially thought that this was due some kind of terrain displacement..but this happens in either direction when travelling East or West into the side of a skyscraper which I don't understand. I've tried changing the order in which triangles are read into the trimesh etc but this doesn't seem to help.<br><br>Anybody got any thoughts on why this might be.Is there some trick to reading in the triangles that I am missing?<br><br> I am happy that my terrain drawing function works as in my un-oded version it is pixel perfect. <br><br></td></tr></table><br>
<a name="675335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> @IKG: No, the geoms will remain in their original set up positions during the animations unless you update their position/rotation. You need to track the position/rotation of each bone node and update the geom position/rotation to match them. It's basically the reverse process of the RagDoll Zombie demo, which performs the non-animated process only. It's quite tricky to do but I know it's possible as Smiff used the same procedure for the outstanding PaceMaker application. I haven't actually tried to do this personally otherwise I could've given you some code to study.<br><br>@KronosUK: ODE is picky about how a TriMesh is constructed, I would highly recommend you use the same method as the function I've posted above. Although it will draw perfectly doesn't mean that ODE will build the TriMesh with the same vert/tri ordering. I suspect that is the most likely cause of the strange behaviour. <br><br></td></tr></table><br>
<a name="675356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Man, that really sucks :(<br><br>This is a very important part to my game. I hope I find some sort of solution.<br><br>Thanks for you help though. <br><br></td></tr></table><br>
<a name="675786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you need to do this in real-time IKG? I know it would be the best technical solution, but it's far from the easiest.<br><br>Have you looked at the PaceMaker application I mentioned earlier? It might provide a simple workaround for your animation stuff, although it's difficult to say without knowing what you're trying to accomplish. Anyway, here's the link to PaceMaker, I hope it will help...<br><br>www.goddysey.com <br><br></td></tr></table><br>
<a name="675813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Finally......got heightmap loader code to work. Mesh now lines up with drawn terrain and no snaggies.<br><br><pre class=code>
Function TriMeshCreate%(mterrain:terrain,dspace:Int)
	Local tris_count% = 0
	Local vert_count% = 0
	tris_count = 2*(mterrain.mapwidth-1)*(mterrain.mapheight-1)
	vert_count = mterrain.mapwidth*mterrain.mapheight
	
	
	Global vertices_bank:Float[vert_count*4]
	Global indices_bank:Int[tris_count*6]
	Local a:Int =0
	
        For Local i% = 0 To mterrain.mapwidth - 1
	For Local j% = 0 To mterrain.mapheight- 1
	
			vertices_bank[a+0]= i*mterrain.mapscale
			vertices_bank[a+1]= mterrain.height[i,j]
			vertices_bank[a+2]= j*mterrain.mapscale
			vertices_bank[a+3] = 0
			a:+4		
		Next
		Next
		a= 0
		For i = 0 To mterrain.mapwidth-2
		For j = 0 To mterrain.mapheight-2
				'first triangle in quad
				indices_bank[a+0]= i*mterrain.mapwidth+j 
				indices_bank[a+1]= i*mterrain.mapwidth+j+mterrain.mapwidth+1
				indices_bank[a+2]= i*mterrain.mapwidth+j+mterrain.mapwidth 
				'second triangle in quad
				indices_bank[a+3]= i*mterrain.mapwidth+j 
				indices_bank[a+4]= i*mterrain.mapwidth+j+1
				indices_bank[a+5]= i*mterrain.mapwidth+j+1+mterrain.mapwidth
				a:+6
			Next
		Next
	
	
	Local t_data:Int  = dGeomTriMeshDataCreate()
	dGeomTriMeshDataBuildSimple(t_data,vertices_bank,vert_count,indices_bank, tris_count*3)
	
	Return dCreateTriMesh(dspace, t_data)
	
End Function
</pre> <br><br></td></tr></table><br>
<a name="675916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one Kronos, thanks for posting the updated function :) <br><br></td></tr></table><br>
<a name="675981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I took a look at it earlier. Still have no idea how I could update the geoms with the mesh while it's moving and animated. <br><br>Thing is, this is by far my most important goal to accomplish. I must find a way to do this.<br><br>What would happen if I tie the geoms to the body with EntityParent? What makes them stick to the body in the first place, in the demo? Is it because time is not stopped, and TransformMesh is enabled?<br><br>Thanks once again for all this help Viper. I won't forget it ;) <br><br></td></tr></table><br>
<a name="676072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> You won't need to keep moving the geoms while the RagDoll is animating as they should be disabled during the animation, but you do need to keep track of the position and rotation of the bone nodes (the bone nodes are the actual joints in the animated model). Only when you switch from animated to non-animated should you apply then new rotation and positions for each geom and re-enable them.<br><br>You're thinking along the correct lines for the EntityParent idea, but unfortunately an ODE geom cannot be assigned as a Blitz3D entity so technically it won't work. The reason the demo works in this way is because it's doing the opposite of what you need to do, so EntityParent is doing all of the complicated stuff for you.<br><br>Here's something to try...<br><br>Instead of tracking the bone nodes directly, you could try tracking the position and rotation of the visible geoms (ode\mesh in the demo) and place the ODE geoms in the exact same position/rotation as those. Remember you don't need to relocate the geoms until the switch to non-animated, once switched you should update them every loop. <br><br></td></tr></table><br>
<a name="676267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now I understand what you want me to do. Only problem is, I have no idea how to calculate something like that. The nodes/joints are placed manually in the demo since the ragdoll is in 1 position. How would I ever know where a limb or body-part is in the middle of an animation? I know you already said you don't know how, so this is pretty much pointless repeating again. Too bad EntityParent doesn't work for geoms. <br><br>And what you said about how the demo does the exact opposite of what I'm trying to do; Does that mean the demo code will not work with my idea? If that's true, then I'm wasting my time trying to figure this out if I can't even use the code given :(<br><br><br>Edit: I added the following code to the Zombie demo to test what would happen if I moved the first zombie while frozen:<br><br><pre class=code>	If KeyDown(18) Then 
	MoveEntity RDmesh(1,0),0.5,0,0.5
	MoveEntity RDmesh(1,1),0.5,0,0.5
	MoveEntity RDmesh(1,2),0.5,0,0.5
	MoveEntity RDmesh(1,3),0.5,0,0.5
	MoveEntity RDmesh(1,4),0.5,0,0.5
	MoveEntity RDmesh(1,5),0.5,0,0.5
	MoveEntity RDmesh(1,6),0.5,0,0.5
	MoveEntity RDmesh(1,7),0.5,0,0.5
	MoveEntity RDmesh(1,8),0.5,0,0.5
	MoveEntity RDmesh(1,9),0.5,0,0.5
	MoveEntity RDmesh(1,10),0.5,0,0.5
	MoveEntity RDmesh(1,11),0.5,0,0.5
	MoveEntity RDmesh(1,12),0.5,0,0.5
	MoveEntity RDmesh(1,13),0.5,0,0.5
	MoveEntity RDmesh(1,14),0.5,0,0.5
	EndIf
</pre><br><br>I held down "q" (my button that freezes everything) and then held down "e". Everything moved together while frozen. Would this not happen if the mesh was animated? Looks like it might :D<br><br>Edit 2: I just realized this works only because the geoms are what move the mesh. With an animation, the mesh would be the one moving. Maybe there's some way to switch this around? To get everything to follow the mesh while disabled, without having to calculate and replace everything when re-enabled again.<br><br>Another thing, when I try to move the entire mesh by refering to it as RagDollMesh(1), it only moves a single dot/part away which warps it. Is this why I would need to disable all the joints and geoms, not just the time? Is that why you were saying why "EntityParent" in the demo was used the wrong way? Uh oh..so that means the geoms and joints are in control, not the mesh. Ok, so my way won't work...<br><br>The long way of accomplishing this would be to configure everything manually, for each frame of animation. That way everything would be reset to the right parts of the mesh, according by what frame it is currently being animated by. But that would take far too long... <br><br></td></tr></table><br>
<a name="676297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>And what you said about how the demo does the exact opposite of what I'm trying to do; Does that mean the demo code will not work with my idea?<br> <br></div><br>No, it will work fine with your idea. Don't forget there are two stages, one for animated and another for non-animated. The demo code is the non-animated stage so you can use that as is. The part you are trying to do is the animated, where the physics are disabled.<br><br>To understand it better I would advise you add a couple of lines in the RagDoll Zombie demo immediately before the Flip in the main loop...<br><br><pre class=code>
Text 0,80,"Neck Bone - Bone(1,10):"

Text 0,130,"X Pos:"+EntityX(Bone(1,10),1)
Text 0,145,"Y Pos:"+EntityY(Bone(1,10),1)
Text 0,160,"Z Pos:"+EntityZ(Bone(1,10),1)

Text 0,180,"Pitch:"+EntityPitch(Bone(1,10),1)
Text 0,195,"Yaw:"+EntityYaw(Bone(1,10),1)
Text 0,210,"Roll:"+EntityRoll(Bone(1,10),1)

Text 0,250,"Head Mesh - RDMesh(1,0):"

Text 0,270,"X Pos:"+EntityX(RDMesh(1,0))
Text 0,285,"Y Pos:"+EntityY(RDMesh(1,0))
Text 0,300,"Z Pos:"+EntityZ(RDMesh(1,0))

Text 0,320,"Pitch:"+EntityPitch(RDMesh(1,0))
Text 0,335,"Yaw:"+EntityYaw(RDMesh(1,0))
Text 0,350,"Roll:"+EntityRoll(RDMesh(1,0))
</pre><br>The top part of the above code will track the position and rotation of the neck joint on RagDoll number one (on the left). To try different joints change the 10 for another number (use the SetupBones() function for a guide). Also note that the above function calls for the bones use the global flag (,1). The second part of the above code tracks the position and rotation of the visible Blitz mesh used for the head, again you can try different meshes by changing the 0 to another number (see the CreateRagDoll() function for a guide).<br><br>Now, you can track the position/rotation of the bone nodes then update the geoms from those, which might be more difficult to do as it will probably require some math to get the geoms into the correct positions etc. Or, like I mentioned earlier you can track the position/rotation of the Blitz meshes (the visible green/red/white body parts). With the mesh method you might be able to simply update the ODE geoms to match the position/rotation of the visible body parts (Blitz meshes).<br><br>Don't worry you should get there if you persevere, but it will take a lot of effort and trial/error before you succeed. It isn't something I would recommend to someone new to ODE/Blitz3D though, it's much too complicated tbh. <br><br></td></tr></table><br>
<a name="676321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I did it! I went back and replaced each geom positioning with the correct bone coordinates using EntityX/Y/Z() for each geom (changing the bone each time of course)<br><br>Everything runs just as smoothly as before. I'll do the same with rotation now. <br><br>So basically, instead of positioning each geom with xp,yp, and zp, I now use "each bone for each geom" coordinates. Here's an example of what I did for a random geom, commenting out the parts I replaced:<br><br><pre class=code>
; ### Create Right Leg (Lower)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
RDBody(rd,13)=ode\body
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,EntityX(Bone(1,18),1),EntityY(Bone(1,18),1),EntityZ(Bone(1,18),1)) ;xp-0.6,yp-6.25,zp+0.25)
dBodySetAutoDisableFlag(ode\body,1)
ode\geom=dCreateCylinder(Space,0.00001,0.00001)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
RDMesh(rd,13)=ode\mesh
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,LegLRad,LegLLen*0.5,LegLRad
RotateMesh ode\mesh,-8,0,-4
PositionMesh ode\mesh,0,0,0
EntityColor ode\mesh,0,125,0
EntityAlpha ode\mesh,geomalpha

TransformGeom=dCreateGeomTransform(Space)
GeomObject=dCreateCylinder(0,LegLRad,LegLLen)
dGeomSetRotation(GeomObject,-8,0,-4)
dGeomSetPosition(GeomObject,0,0,0)
dGeomTransformSetGeom(TransformGeom,GeomObject)
dGeomTransformSetCleanup(TransformGeom,1)
dGeomSetBody(TransformGeom,ode\body)
</pre><br><br><br>So I think I did it! I'll have the mesh placed first standing up so I can setup all the bones. I will then update all the geom's positions to their correct bones each loop. I'm almost sure this will work. What do you think?<br><br>Edit: Now I'm starting to wonder how this changes anything. I kind of lost track of the whole problem I was trying to solve before. If I try to animate the mesh itself, will the bones follow? It looks to me like the mesh is still not in control because of this peice of code:<br><br><pre class=code>EntityParent RagDollMesh(rd),RDMesh(rd,1)</pre><br><br>AHH! Then I haven't made any new progress! <br><br></td></tr></table><br>
<a name="676333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re-read the post above, I edited it while you posted.<br><br>Yep, the bones should change position/rotation during the animation sequence.<br><br>You must -not- call the UpdateNodes() function at all during the animated stage, only during the non-animated stage.<br><br>Keep tinkering with it ;) <br><br></td></tr></table><br>
<a name="676336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IKG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> I understand it all now! Thanks so much Vip3r. As soon as my game is finished, I'll be sure to give a donation via PayPal ;) <br><br></td></tr></table><br>
<a name="676688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> The method VIP3R describes is basically what I use in PaceMaker.<br><br>When the model is animating the physics are disabled(rag-doll destroyed).The joints are controlled by the animation.<br><br>When the animation is stopped  I build the rag-doll using a reference position and set all axis and limits. I then move/rotate the geoms to the global position of the joints as they were. From that point the geoms are updated and the joints moved/rotated to follow. <br>This way the transition is seemless and the joint limits are set correctly no matter what pose the model was in when killed ! <br><br></td></tr></table><br>
<a name="677504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> whats this like for doing 2d based physics ? <br><br></td></tr></table><br>
<a name="677563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi skn3,<br><br>It can be done quite effectively by limiting one axis (Z or Y axis for example).<br><br>Here's a 2D Spheres demo that you can try with the demo version of JV-ODE...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #									  JV-ODE - 2D Spheres Demo										#
; #									Code by Jim Williams (VIP3R)									#
; #								Devious Codeworks - Copyright © 2006								#
; ###################################################################################################

AppTitle "JV-ODE - 2D Spheres Demo"

Include "JV-ODE.bb"

Graphics 800,600,0,2

Type ODEGeom
	Field body
	Field geom
	Field r
	Field g
	Field b
End Type

; ###################################################################################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-9.8,0)
dContactSetMode(dContactBounce)
dContactSetBounce(0.8)
dContactSetMu(48)

; ### Create plane

dCreatePlane(Space,0,1,0,0)

; ### ODE STATIC BARRIER (Near)

ode.ODEGeom=New ODEGeom
ode\geom=dCreateBox(Space,1000,1000,1)
dGeomSetRotation(ode\geom,0,0,0)
dGeomSetPosition(ode\geom,0,500,-15)
; dGeomContactSetMu(ode\geom,0.0)	; ### Not Available In Demo Version

; ### ODE STATIC BARRIER (Far)

ode.ODEGeom=New ODEGeom
ode\geom=dCreateBox(Space,1000,1000,1)
dGeomSetRotation(ode\geom,0,0,0)
dGeomSetPosition(ode\geom,0,500,15)
; dGeomContactSetMu(ode\geom,0.0)	; ### Not Available In Demo Version

; ###################################################################################################

SetBuffer BackBuffer()

While Not KeyHit(1)

	Cls

	PTime=MilliSecs()

	If MilliSecs()-Timer&gt;800
		AddObject()
		Timer=MilliSecs()
		End If

	UpdateGeoms()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.05)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime
	Text 340,0,"Demo Time:"+dDemoTime()
	If dDemoTime()=0 Then Text 240,80,"*** TIME EXPIRED PLEASE RESTART DEMO ***"

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function AddObject()

xp=Rand(-80,80)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,500,0)
dBodySetAutoDisableFlag(ode\body,1)
ode\geom=dCreateSphere(Space,14)
dGeomSetBody(ode\geom,ode\body)
ode\r=Rand(255)
ode\g=Rand(255)
ode\b=Rand(255)

End Function

; ###################################################################################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	If ode\body
		Color ode\r,ode\g,ode\b
		xpos#=400+dGeomGetPositionX#(ode\geom)
		ypos#=580-dGeomGetPositionY#(ode\geom)
		Oval xpos,ypos,28,28,1

		Color 255,255,255
		angle#=-dGeomGetRoll#(ode\geom)
		px#=Cos(angle)*10+xpos
		py#=Sin(angle)*10+ypos
		Oval 10+px,10+py,8,8,1
		End If
Next

End Function

; ###################################################################################################
</textarea><br>In the demo I've restricted motion on the z-axis using two very large slim boxes (barriers). You can think of these two boxes as two sheets of glass in a double glazed window, then the spheres are dropped between them. To make sure the spheres don't snag on the insides of the two barriers, their friction has been set to zero (full version only). There is also a plane at the base to stop them falling below ground level.<br><br>Have a tinker with it and see what you think ;) <br><br></td></tr></table><br>
<a name="678382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Smiff / @IKG<br><br>Smiff, I understand what you're saying between switching between ragdoll-controlled and animation-controll models.<br>BUT when your model is in 'animation mode' will it still respond to external collisions??? I.e. WHEN do you decide to go from one to another??<br><br>I'm also trying to setup an animation system where you have a keyframed character walking around, but as soon as it get's hit by an external body, it should switch to ragdoll mode so as to 'suffer the impact' of the collision...<br><br>If possible I want to limit 'minor collisions' to certain limbs e.g. a hit on the hand will affect the arm and not make the ragdoll fall over completely. But when he get's hit on the leg, he will lose control over his walk cycle and hit the dirt face first...<br><br>hope this makes sense ;)<br>Danny <br><br></td></tr></table><br>
<a name="678388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> ODE collision response will only occur when the physics are enabled (non-animated), if you disable the physics then you'll also disable the collision response.<br><br>There's no reason why you can't use Blitz collisions for the animated stuff, then switch over to ODE collisions when you re-enable the physics. <br><br></td></tr></table><br>
<a name="678393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's exactly my point viper.<br><br>So you're saying that during animation-mode you'd use Blitz to 'detect a collision' then read that coll info (direction vector, force?); re-enable the ragdoll and feed the blitz collision info onto the relevant ODE bodies in order to get an accurate response from the ragdoll?<br>A possible theory but pretty tricky stuff...<br><br>What you'd actually want is bodies/geometry that are 'idle' (when it comes to forces and gravity) and are 'moved along' with the model's bone structure but remain sensitive to collision, and if so, re-enable their properties (weight, gravity, friction, etc) and let ODE do it's thing.....  ?!<br><br><br><br>D. <br><br></td></tr></table><br>
<a name="678412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, that would be much too complex. I would envelope the entire RagDoll inside a Blitz collision 'bubble' to detect the initial contact and enable the physics, so that by the time the colliding object is about to collide with the RagDoll itself, the physics will takeover the collision response.<br><br>You can try your second suggestion, I'm not sure how well it will work though. ODE objects can have the gravity effects disabled per body and you can cancel the forces per body. The problem is, although this method will detect collisions, it won't apply any collision response because you're cancelling them out. By the time you reactivate the collision response, the object would probably have passed right through the RagDoll. <br><br></td></tr></table><br>
<a name="678419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's a pretty cool idea with that collision-bubble!<br>Got me thinking again... cool! I should have some time this week so I defenitly are going to get deeper into this matter... "i'll be bak!" ;)<br><br>d. <br><br></td></tr></table><br>
<a name="678881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see that I can use JV-ODE to give me the contactpoint of a collision between a ray and a trimesh but can I use it to tell me what the vertices of the struck triangle are?<br><br>edit: never mind a possible answer has come to me. knowing the position of the contact point is all the info I actually need.<br><br>As my trimesh terrain is symmetrical in x and z axes all I need to know is the x and z position of the contact to ascertain the triangle thats been hit. <br><br></td></tr></table><br>
<a name="680714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do any of the current demo's use rays? If not could we have one please? <br><br></td></tr></table><br>
<a name="680719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Regarding the ragdoll stuff above:<br><br><div class="quote"> <br>A possible theory but pretty tricky stuff...<br> <br></div><br><br>You needn't do it that way, but that is how you had to do it in the old ODE wrapper. What a headache! Lucky enough there was a little demo showing how to use the collision info with ODE.<br><br>The best way would be as Viper said, put it in a blitz collision sphere and when that collides, enable physics :-) <br><br></td></tr></table><br>
<a name="680749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Cygnus, yes I'm pretty confident that i'll work.<br><br>Currently I've managed to create a routine that converts a rigged b3d character (originally from Lightwave) into a default ODE ragdoll-skeleton (rigid bodies and hinge joints). So now I'm building a quick editor to tweak &amp; change things before animating it... <br><br>l8rs,-<br>Danny <br><br></td></tr></table><br>
<a name="681033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Kronos: None of the existing demos use rays.<br><br>Here's a simple ray demo for use with the BlitzMax (Win32) version...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' ###################################################################################################
' #										 JV-ODE - Ray Demo											#
' #									Code by Jim Williams (VIP3R)									#
' #								Devious Codeworks - Copyright © 2006								#
' ###################################################################################################

SuperStrict

Framework BRL.GLMax2D
Import BRL.Random
Import DevCode.JVODE
Import DevCode.JVODEOpenGL

AppTitle:String="JV-ODE - Ray Demo"

SetGraphicsDriver GLMax2DDriver()

Graphics 800,600,0,0

Type ODEGeom
	Field body:Int
	Field geom:Int
	Field mesh:Int
	Field rgb:Int[]
	Field scale:Float[]
End Type

Global RayGeom:Int

Global ODEGeomList:TList=CreateList()

' ###################################################################################################

' ### Setup ODE

Global World:Int=dWorldCreate()
Global Space:Int=dHashSpaceCreate(0)
Global ContactGroup:Int=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)
dContactSetMode(dContactBounce)
dContactSetBounce(0.8)
dContactSetMu(48)

' ### Setup Scene

InitOpenGL(GL_SMOOTH)	' ### GL_SMOOTH - GL_FLAT

InitLight(-40,30,80)	' ### xpos - ypos - zpos

' ### Create plane

dCreatePlane(Space,0,1,0,0)

' ###################################################################################################

Local PTime:Int
Local Timer:Int
Local PhysicsTime:Float

AddObject()

While Not AppTerminate() And Not KeyDown(KEY_ESCAPE)

	ClearScene()

	UpdateCamera(0,14,-24,20,1,0,0)	' ### xpos - ypos - zpos - angle - rx - ry - rz

	UpdateGeoms()

	PTime=MilliSecs()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime=MilliSecs()-PTime

	EnableGLText(255,255,255)		' ### red - green - blue
	GLDrawText "JV-ODE Version "+FixFloat(dGetVersion()),0,0
	GLDrawText "Physics Time:"+FixFloat(PhysicsTime),0,15
	GLDrawText "Red Cylinder = Ray Geom Position",0,70

	' ### Perform Ray Collision Testing
	AddRay()
	dSpaceCollide(Space,World,ContactGroup)
	GLDrawText "Ray Collision: "+(dGeom1CountCollisions(RayGeom)+dGeom2CountCollisions(RayGeom)),0,130
	dJointGroupEmpty(ContactGroup)
	dGeomDestroy(RayGeom)

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

' ###################################################################################################

Function AddObject()

Local ode:ODEGeom

ode:ODEGeom=New ODEGeom
ode.body=dBodyCreate(World)
dBodySetAxisAngle(ode.body,0,0,0,0)
dBodySetPosition(ode.body,0,30,0)
dBodySetAutoDisableFlag(ode.body,1)
ode.geom=dCreateSphere(Space,3.0)
dGeomSetBody(ode.geom,ode.body)
ode.mesh=dSphereClass
ode.rgb=[Rand(0,255),Rand(0,255),Rand(0,255)]
ode.scale=[3.0]
ListAddLast(ODEGeomList,ode:ODEGeom)

End Function

' ###################################################################################################

Function AddRay()

RayGeom=dCreateRay(Space,7.0)
dGeomRaySet(RayGeom,0,3,-4,0,0,1)

End Function

' ###################################################################################################

Function UpdateGeoms()

Local ode:ODEGeom

' ### Update Plane
SetDrawColour(230,230,240)	' ### red - green - blue
DrawPlane()

' ### Update Ray
glPushMatrix()
glTranslatef(0,3,-4)
glRotatef(90,1,0,0)
SetDrawColour(230,0,0)		' ### red - green - blue
DrawCylinder(0.2,0.2,7.0,8,8)
glPopMatrix()

' ### Update Geoms
For ode:ODEGeom=EachIn ODEGeomList
	glPushMatrix()

	glTranslatef(dGeomGetPositionX(ode.geom),dGeomGetPositionY(ode.geom),dGeomGetPositionZ(ode.geom))
	dGeomGetAxisAngle(ode.geom)
	glRotatef(dVectorW(),dVectorX(),dVectorY(),dVectorZ())

	SetDrawColour(ode.rgb[0],ode.rgb[1],ode.rgb[2])

	' ### DrawSphere:		radius - slices - stacks
	' ### DrawCube:			xscale - yscale - zscale
	' ### DrawCylinder:		radiusb - radiust - length - slices - loops
	' ### DrawCCylinder:	radiusb - radiust - length - slices - loops
	If ode.mesh=dSphereClass Then DrawSphere(ode.scale[0],14,14)
	If ode.mesh=dBoxClass Then DrawCube(ode.scale[0],ode.scale[1],ode.scale[2])
	If ode.mesh=dCylinderClass Then DrawCylinder(ode.scale[0],ode.scale[1],ode.scale[2],8,8)
	If ode.mesh=dCCylinderClass Then DrawCCylinder(ode.scale[0],ode.scale[1],ode.scale[2],8,8)

	glPopMatrix()
Next

End Function

' ###################################################################################################
</textarea> <br><br></td></tr></table><br>
<a name="681098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks Vip3r.. dunno what i was doing wrong in my experiment but my ray wasn't registering any collisions <br><br></td></tr></table><br>
<a name="685612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Physt</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All,<br><br>I've just purchased JV-ODE for Blitz3D and have a few questions.  Please bear with me if they have been asked and answered before.  I did review the threads but didn't see an answer.<br><br>I'm working on a platform type game and would like to use ODE for all the collisions and interactions including the player.  What is the best way to use a primative to represent the player?  I was thinking that I could use a sphere and push it forward and back according to the up and down keys and rotate it using the left and right keys.<br>I have forward and back working but wasn't able to rotate it.  I did get the sphere to go left and right relative to the screen by applying forces but that's not what I want. I want the forward motion to be relative to the rotation of the sphere.  Should I not being using a sphere?  <br><br>I hope that made some kind of sense. <br>Thanks. <br><br></td></tr></table><br>
<a name="685618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Physt,<br><br>Have a look at PsychicParrots great angular velocity sphere demo. The method used in the demo would provide a decent solution for controlling the player in a platform game...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; JV-ODE - Key Controlled Sphere Demo Using Angular Velocities
; Code by Jim Williams (VIP3R)
; Arrow key control by Jeff (PsychicParrot)

AppTitle "JV-ODE - Key Controlled sphere Demo"

Include "jv-ode.bb"

Graphics3D 800,600,0,2

Type ODEGeom

	Field body
	Field geom
	Field mesh
	Field pivot ; To find direction vectors
	Field head  ; Just a stupid head to show which direction it's going in!
	Field inair ; To tell if player is on the ground or not!!
	
End Type

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetGravity(World,0,-1,0)
dContactSetMode(dContactBounce)
dContactSetBounce(0.2)
dContactSetMu(38)

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,0,20,-50
RotateEntity Camera,30,0,0

; ### Control vars

Global potato#=0 ; y rotation of thingy (rotater,rotato,potato!!)
Global spud#
Global fwd_key
Global back_key
Global left_key
Global right_key
Global jump_key

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0
EntityPickMode plane,2

Mirror=CreateMirror()

AddObject() ; Add our thingy to the world

While Not KeyHit(1)

	PTime=MilliSecs()

	; Update controls
	
	c.ODEGeom=First ODEGeom
	Getkeys(c)
	movethingy(c)
	lookforground(c)
	
	PointEntity (camera,c\mesh)
	
	UpdateGeoms()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.14)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateWorld

	RenderWorld

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

Function getkeys(c.ODEGeom)

	fwd_key=False
	back_key=False
	left_key=False
	right_key=False
	jump_key=False

	If c\inair=False Then ; Only let player control 'thrust' when on the ground
	
		If KeyDown(200) Then fwd_key=True
		If KeyDown(208) Then back_key=True

	EndIf
	
		If KeyDown(205) Then left_key=True
		If KeyDown(203) Then right_key=True
		If KeyDown(57) Then jump_key=True

	;EndIf

End Function

Function lookforground(c.ODEGeom)

	If LinePick(EntityX(c\mesh,True),EntityY(c\mesh,True)+1,EntityZ(c\mesh,True),0,-4,0)&lt;&gt;0 Then ; Check for anything 'under' player
		c\inair=False
	  Else
		c\inair=True
	EndIf

End Function

Function movethingy(c.ODEGeom)

	If fwd_key=True Then
		spud=spud+.1
	EndIf

	If back_key=True Then
		spud=spud-.1
	EndIf
	
	If left_key=True Then
		potato=potato-2
	End If
	
	If right_key=True Then
		potato=potato+2
	End If

	If jump_key=True And c\inair=False Then		
		dBodyAddForce(c\body,0,16 ,0)		
	End If

	RotateEntity c\head,0,potato#,0
	
	; Add forward force

	TFormVector 0,0,spud,c\head,0
	
	vx# = dBodyGetAngularVelX(c\body) + TFormedX()
	vy# = dBodyGetAngularVelY(c\body) + TFormedY()
	vz# = dBodyGetAngularVelZ(c\body) + TFormedZ()

	damping#=.8
	dBodySetAngularVel(c\body,vx#*damping#,vy#*damping#,vz#*damping#)

	spud=spud*.9
	
End Function

Function AddObject()

xp=Rand(-8,8)
zp=Rand(-8,8)
ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,30,zp)
dBodySetAutoDisableFlag(ode\body,0)
ode\geom=dCreateSphere(Space,3)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateSphere()
ScaleMesh ode\mesh,3,3,3
EntityColor ode\mesh,Rand(255),Rand(255),Rand(255)
EntityAlpha ode\mesh,1
EntityShininess ode\mesh,0.7
ode\head=CreateCube()

ScaleMesh ode\head,1.5,1.5,1.5

ode\pivot=CreatePivot() ; Create pivot to get direction vectors

End Function


Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	
		RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
		
		PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
		
		PositionEntity ode\head,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom)+4.5,dGeomGetPositionZ#(ode\geom)
	
Next

End Function
</textarea><br><br>Hope it helps :) <br><br></td></tr></table><br>
<a name="685634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Physt</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks!  I'll try it out as soon as I get home tonight. <br><br></td></tr></table><br>
<a name="685759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Physt</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R - Perfect.  Exactly what I was looking for. :) <br><br></td></tr></table><br>
<a name="685773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one :) <br><br></td></tr></table><br>
<a name="688976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>JV-ODE V1.17 Update Released</b><br><br>Please check your inbox :)<br><br>JV-ODE is now compiled using ODE V0.6 which was released recently. To view the changes made to ODE, please visit the following ODE Wiki link: <a href="http://opende.sourceforge.net/wiki/index.php/Changelog" target="_blank">http://opende.sourceforge.net/wiki/index.php/Changelog</a><br><br>All depreciated functions (dCreateCCylinder, GeomTransforms etc) are still supported in JV-ODE, but it's recommended to use the new equivalents (dCreateCapsule, GeomOffsets etc).<br><br>Added 40 new functions...<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
dWorldStepFast1(world,stepsize#,maxiterations)
dWorldSetAutoEnableDepthSF1(world,autoenabledepth)
dWorldGetAutoEnableDepthSF1%(world)
dWorldSetQuickStepW(world,overrelaxation#)
dWorldGetQuickStepW#(world)
dGeomSetOffsetPosition(geom,x#,y#,z#)
dGeomSetOffsetRotation(geom,pitch#,yaw#,roll#)
dGeomSetOffsetQuaternion(geom,qw#,qx#,qy#,qz#)
dGeomSetOffsetAxisAngle(geom,angle#,rx#,ry#,rz#)
dGeomSetOffsetWorldPosition(geom,x#,y#,z#)
dGeomSetOffsetWorldRotation(geom,pitch#,yaw#,roll#)
dGeomSetOffsetWorldQuaternion(geom,qw#,qx#,qy#,qz#)
dGeomSetOffsetWorldAxisAngle(geom,angle#,rx#,ry#,rz#)
dGeomClearOffset(geom)
dGeomIsOffset%(geom)
dGeomGetOffsetPosition(geom)
dGeomGetOffsetRotation(geom)
dGeomGetOffsetQuaternion(geom)
dGeomGetOffsetAxisAngle(geom)
dCreateCapsule%(space,radius#,length#)
dGeomCapsuleSetParams(capsule,radius#,length#)
dGeomCapsuleGetParams(capsule)
dGeomCapsulePointDepth#(capsule,x#,y#,z#)
dJointCreateLMotor%(world,group)
dJointSetBallAnchor2(joint,x#,y#,z#)
dJointSetHingeAnchorDelta(joint,x#,y#,z#,ax#,ay#,az#)
dJointSetSliderAxisDelta(joint,x#,y#,z#,ax#,ay#,az#)
dJointSetLMotorNumAxes(joint,num)
dJointSetLMotorAxis(joint,anum,rel,x#,y#,z#)
dJointSetLMotorParam(joint,parameter,value#)
dJointGetUniversalAngle1#(joint)
dJointGetUniversalAngle2#(joint)
dJointGetUniversalAngle1Rate#(joint)
dJointGetUniversalAngle2Rate#(joint)
dJointGetLMotorNumAxes%(joint)
dJointGetLMotorAxis(joint,anum)
dJointGetLMotorParam#(joint,parameter)
dConnectingJoint%(body1,body2)
dMassSetCapsule(mass,density#,direction,radius#,length#)
dMassSetCapsuleTotal(mass,totalmass#,direction,radius#,length#)
</textarea><br><br>As it's a major update, the JV-ODE version number has increased by two digits (there was no V1.16)...<br><br>Please let me know if you experience any problems with the new update.<br><br>:) <br><br></td></tr></table><br>
<a name="689003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wo-hoo! Thanks for the 1.17! :) <br><br></td></tr></table><br>
<a name="689009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ervin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome!<br>Thanks for your great work.<br><br>[EDIT] I'm having some problems with 1.17.<br>I have copied JV-ODE.decls and JV-ODE.dll to C:\Program Files\Blitz3D\userlibs.<br><br>Then I try to run the included CarDemo.bb.<br>But I get a "User lib not found" error.<br>In debug mode, the error seems to be coming from jv-ode.bb, on the dRegisterODE line. <br><br></td></tr></table><br>
<a name="689022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Judd</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi VIP3R,<br><br>Same problem here i'm afraid. (As Ervin above)<br><br>Looking forward to trying the capsules (so to speak !)<br><br>Mark <br><br></td></tr></table><br>
<a name="689111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same issue here.  <br><br>On a side note,  I always copy JV-ODE.dll , as well as any other support dlls that I use while programming, to my windows/system32 folder.   That way your executables will always find it. <br><br></td></tr></table><br>
<a name="689173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks for the reports, I'll look into it.<br><br>I haven't had any problems at all while developing V1.17, can you post your system specs.<br><br>Personally, I only copy the decls files into the userlibs folder and leave the DLL in the project/demos folder. Can you try that too?<br><br>Mark, does it happen with the BlitzMax version on your system?<br><br>The only possible cause I can think of is the DLL compression. Can someone try the demo versions of JV-ODE and see if they work or not? They have different compression ratios to the full version. <br><br></td></tr></table><br>
<a name="689240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ervin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi VIP3R.<br><br>My specs:<br>HP Pavilion zd8000 notebook<br>P4 3.4 Ghz<br>2GB RAM<br>Radeon x600 256MB<br>Windows XP SP2<br>Blitz3D 1.96<br><br>I tried putting only the decls into userlibs and leaving the dll in the project folder, but that didn't change anything.<br><br>I tried using the latest demo version of JV-ODE, and that gives me the same error.<br><br>I then tried using the full version of 1.15, and that worked without any problems. <br><br></td></tr></table><br>
<a name="689253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi ervin,<br><br>Thanks for the specs and info :)<br><br>I've had confirmation of the DLL working ok in BlitzMax so I suspect this is indeed a compression issue upsetting Blitz3D. Works ok here though, weird.<br><br>I'll build you a test DLL shortly and email it to over if that's ok? <br><br></td></tr></table><br>
<a name="689258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ervin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I'll build you a test DLL shortly and email it to over if that's ok?  <br></div><br><br>That'll be great! Thanks. <br><br></td></tr></table><br>
<a name="689289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I've sent the test DLL for you :) <br><br></td></tr></table><br>
<a name="689292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ervin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> The test DLL works! <br><br></td></tr></table><br>
<a name="689295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, as I suspected... I wonder why the original DLL works here, must be decompressing fast enough for B3D to detect it?<br><br>Thanks ervin :)<br><br>New update coming very soon! <br><br></td></tr></table><br>
<a name="689331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> The new JV-ODE V1.17 update has now been re-released.<br><br>Please check your inbox :) <br><br></td></tr></table><br>
<a name="689332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ervin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent - works beautifully now. <br><br></td></tr></table><br>
<a name="689336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Judd</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks VIP3R, all fixed.<br><br>Excellent support as usual.<br><br>Sorry I couldn't try the MAX version - don't have it installed at the moment.<br><br>Cheers again,<br><br>Mark <br><br></td></tr></table><br>
<a name="689579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> New one works just fine.  Thanks for the quick response. <br><br></td></tr></table><br>
<a name="689657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks all, you're welcome :) <br><br></td></tr></table><br>
<a name="692398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EmerGki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Viper, how I know when my Car are with two wheels only on the floor?<br>Or, Have some way to do the Car Run with Only Two Wheels? <br><br></td></tr></table><br>
<a name="692495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi EmerGki,<br><br>Take a look at the 'CarDemo-CCount' demo included with the wrapper, it checks for collisions on each individual wheel of the car. When there are no collision counts on a wheel, then the wheel isn't touching the floor. <br><br></td></tr></table><br>
<a name="693185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EmerGki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vip3r, I've trying to do my car run in two wheels only, but, I'm having trouble, I'm not achieving keep my car in two wheels.<br>Have some idea in how I do this? <br><br></td></tr></table><br>
<a name="693325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, that's going to be very difficult to do (same as in reality).<br><br>You could try moving the mass of the car body sideways/lower when you want it to stay on two wheels, making it very heavy on the side you want to keep on the floor. There are two ways to do this...<br><br>One way is to use the <i>'dMassTranslate(mass,x#,y#,z#)'</i> function, you can see this function being used in the car demos to lower the mass of the car body. This would be the easier option.<br><br>A better method would probably involve using geom transforms (or the new geom offsets), you can see this in the 'CarDemo-GeomTransform-Car' demo included with the wrapper. When you move the mass sideways/lower, it will act as a stabiliser making it much easier to keep the car up on two wheels.<br><br>Don't be under any illusions though, it will take a lot of tweaking to get it working well. <br><br></td></tr></table><br>
<a name="696137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angel martinez</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have purchased the JV-ODE library and it is very impressive.I would like to implement physics in a flying vehicle ( helicopter or airship ), VIP3R do you know if are there any example about it? <br><br></td></tr></table><br>
<a name="696152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>There are no helicopter/airship examples that I know of, but it's very easy to do. You need to apply a vertical force (y-axis) on the helicopter body to make it rise and then let gravity allow it to fall again. You can use dBodyAddForce(body,x,y,z)/dBodyAddRelForce(body,x,y,z) to do this, add a positive value to the y parameter. To move the helicopter while it's in the air, apply a force on the x and/or z axis. <br><br></td></tr></table><br>
<a name="702481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> does anyone know how to get a cube within a cube? and be able to move and rotate the container cube? <br><br></td></tr></table><br>
<a name="702554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you mean move and rotate it manually or let the physics move and rotate it? <br><br></td></tr></table><br>
<a name="702566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> manually.<br>Id like the container cube to not react to physics.<br>I cant remember the name for an object that doesnt react when hit, er... terrain or something.<br><br>and the inner cube to be a rigid body.<br><br>So if i manually turn the container cube the little cube will slide about inside.<br><br>Thanks for the help <br><br></td></tr></table><br>
<a name="702599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok that's what I thought you meant, unfortunately you can't move stuff manually in ODE because it abuses the physics simulation. But you might be able to do what you want using other methods, it's hard to say without knowing your exact requirements.<br><br>An object that doesn't react to physics is called a 'static geom'. Using a static cube geom won't work though as the collision detection will only prevent objects penetrating it from outside, it won't prevent objects within from escaping. Instead you could try building the container cube from 6 flat square ODE cube 'panels'. Note that you should only create the ODE geoms for the panels, don't create bodies as they need to be static objects if you move them manually. The hard part is keeping all of the six panels aligned when rotating the container cube, it will require some serious math. You could cheat though, when you create the static geom panels, you should also create their associated Blitz meshes (like ode\mesh in the examples) and parent them to each other. Then to move the container object, move the Blitz mesh entities and update the ODE geom panels to match the position/rotation of the Blitz mesh entities.<br><br>In theory it should work, but ODE really isn't designed for this kind of thing (moving objects manually) so you may find collision penetration or other issues when you try it. <br><br></td></tr></table><br>
<a name="702860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TMG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all - hope you are all having a great weekend.<br><br>I've been trying to iron out a glitch in my games testbed for a couple of weeks now but I just can't shift the bugger. I've got a static, non-animating trimesh and a sphere but the sphere is colliding irregularly with some of the edges of the trimesh polygons. It tends to happen more frequently at low speeds and acute angles but I've also seen it happen at higher speeds and larger angles.<br><br>Most of the last two weeks have been spent tweaking variables like ERP, CFM, timestep size, trimesh and sphere scale etc and this does have some effect but has never cleared the glitch completely, only lessened the frequency of it occuring. I've also tried meshes created in 3d Studio, Lightwave and Blitz but it happens on all of them.<br><br>Reading through the ODE Archives I have seen that it appears to be a relatively common problem (or at least a problem that other people have encountered) but none of the fixes mentioned on that forum, that I understand, have really helped. One theory was that the normals of the trimesh were wrong but I don't think it is that - they are reporting back correctly (the trimesh is completely flat). Another theory was that multiple contact points between the trimesh and the sphere confused the simulation but it is only reporting a maximum of one collision.<br><br>The code below demonstrates the glitch (hold SPACE to apply random force to the sphere - TAB resets the sphere - LEFT CTRL turns on the trail showing the spheres path - LEFT SHIFT toggles wireframe mode)...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Include "JV-ODE.bb"

Const gfxw = 800
Const gfxh = 600

Graphics3D gfxw,gfxh,0,2

Global wireframemode = 0

HidePointer
MoveMouse gfxw/2,gfxh/2

Type ODEGeom
	Field body
	Field geom
	Field mesh
	Field trail_mesh
	Field trail_surf
	Field trail_brush
	Field trail_vert
	Field r,g,b
End Type

; ### Setup ODE settings

Global inc# = 0.1			; increment value

Global deferp# = 0.1		; world erp
Global defcfm# = 0.0		; world cfm
Global defmu# = 32.0		; world friction
Global defbou# = 0.3		; world bounce

Global mu# = 10000.0		; ball friction
Global bou# = 0.3			; ball bounce
Global angthr# = 0.1		; ball angular threshold
Global linthr# = 0.1		; ball linear throeshold
Global den# = 100.0			; ball density
Global rad# = 1.0			; ball radius

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global TerrainSpace=dHashSpaceCreate(Space)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-980,0)
dWorldSetERP(World,deferp)

dContactSetMode(dContactBounce + dContactMu + dContactSoftERP + dContactSoftCFM)
dContactSetBounce(defbou)
dContactSetMu(defmu)
dContactSetSoftERP(deferp)
dContactSetSoftCFM(defcfm)

; ### Create some balls

SeedRnd MilliSecs()

Dim sphere(1)
Dim spherebody(1)

For spheres=1 To 1
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	spherebody(spheres) = ode\body
	dBodySetAutoDisableFlag(ode\body,1)
	dBodySetAutoDisableAngularThreshold(ode\body,angthr)
	dBodySetAutoDisableLinearThreshold(ode\body,linthr)
	dBodySetAutoDisableSteps (ode\body, 1)
	dBodySetPosition(ode\body,0,20,spheres*5)
	mass=dMassCreate()
	dMassSetSphereTotal(mass,den,rad)
	dBodySetMass(ode\body,mass)
	dMassDestroy(mass)
	ode\geom=dCreateSphere(Space,rad)
	sphere(spheres)=ode\geom
	dGeomSetBody(ode\geom,ode\body)
	dGeomContactSetMode(ode\geom,dContactBounce + dContactMu + dContactSoftERP)
	dGeomContactSetBounce(ode\geom,bou)
	dGeomContactSetMu(ode\geom,mu)
	ode\mesh=CreateSphere(16)
	ScaleEntity ode\mesh,rad,rad,rad
	ode\r = Rand(100,255)
	ode\g = Rand(100,255)
	ode\b = Rand(100,255)
	EntityColor ode\mesh,ode\r,ode\g,ode\b
	ode\trail_mesh=CreateMesh()
	ode\trail_brush=CreateBrush()
	BrushColor ode\trail_brush,ode\r,ode\g,ode\b
	BrushFX ode\trail_brush,1
	ode\trail_surf=CreateSurface( ode\trail_mesh,ode\trail_brush )
	AddVertex ode\trail_surf,0,0,0,0,0
	AddVertex ode\trail_surf,0,0,0,0,1
	AddVertex ode\trail_surf,0,0,0,0,0
	AddVertex ode\trail_surf,0,0,0,0,1
	AddTriangle ode\trail_surf,0,2,3
	AddTriangle ode\trail_surf,0,3,1
	AddTriangle ode\trail_surf,0,3,2
	AddTriangle ode\trail_surf,0,1,3
	ode\trail_vert=2
Next

; ### Create light

Global Light=CreateLight()
RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global Camera=CreateCamera()
Global CamZ#=1.0
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,0,20,-20
RotateEntity Camera,45,0,0

; ### Create Mesh (flat trimesh)

Const dimension = 16

terrain = CreateMesh()
surface = CreateSurface(terrain)

For meshcreateloopcount = 0 To dimension-1
	For meshloop2 = 0 To dimension-1
		AddVertex surface, meshloop2, 0, meshcreateloopcount
	Next
Next

For meshcreateloopcount = 0 To ((dimension*dimension)-1) Step dimension
	For meshloop2 = 0 To dimension-2
		AddTriangle surface, meshloop2+meshcreateloopcount, meshloop2+meshcreateloopcount+dimension, meshloop2+meshcreateloopcount+(dimension+1)
		AddTriangle surface, meshloop2+meshcreateloopcount, meshloop2+meshcreateloopcount+(dimension+1), meshloop2+meshcreateloopcount+1
	Next
Next

UpdateNormals terrain

scale = 5
ScaleMesh terrain,scale,scale,scale
meshw = MeshWidth(terrain)
meshd = MeshDepth(terrain)
PositionMesh terrain, -meshw/2,10,-meshd/2

trimesh = CreateTriMesh( TerrainSpace, terrain )

Global trail = 0
maxcoll = 0

; ###################################################################################################

While Not KeyHit(1)

	PTime=MilliSecs()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldStep(World,0.005)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	collcount = dGeom1CountCollisions(sphere(1))+dGeom2CountCollisions(sphere(1))
	If collcount &gt; 0 Then
		NXComp#=dGeom2CollisionNX(sphere(1),1)
		NYComp#=dGeom2CollisionNY(sphere(1),1)
		NZComp#=dGeom2CollisionNZ(sphere(1),1)
    Else
    	NXComp#=0.0
    	NYComp#=0.0
    	NZComp#=0.0
    End If
	If collcount &gt; maxcoll Then maxcoll = collcount

	LVXComp# = dBodyGetLinearVelX(spherebody(1))
	LVYComp# = dBodyGetLinearVelY(spherebody(1))
	LVZComp# = dBodyGetLinearVelZ(spherebody(1))
	
	UpdateGeoms()
	UpdateKeys()
	UpdateTrail()

	UpdateWorld

	RenderWorld

	Text 10,10,"HOLD SPACE TO ADD RANDOM FORCE"
	Text 10,25,"TAB TO RESET"
	Text 10,40,"MOVE MOUSE TO MOVE CAMERA"
	Text 10,55,"USE WHEEL TO ZOOM CAMERA"
	Text 10,70,"LEFT CTRL TO TOGGLE TRAILS"
	Text 10,85,"LEFT SHIFT TO TOGGLE WIREFRAME"
	
	Text 10,105,"WORLD ERP (1/Q): " + dWorldGetERP(World)
	Text 10,120,"WORLD CFM (2/W): " + dWorldGetCFM(World)
	Text 10,135,"WORLD BOUNCE (3/E): " + dContactGetBounce()
	Text 10,150,"WORLD FRICTION (4/R): " + dContactGetMu()
	
	Text 10,175,"BALL FRICTION (A/Z): " + mu
	Text 10,190,"BALL BOUNCE (S/X): " + bou
	Text 10,205,"BALL DENSITY (D/C): " + den
	Text 10,220,"BALL ANGULAR THR (F/V): " + angthr
	Text 10,235,"BALL LINEAR THR (G/B): " + linthr

	Text 10,260,"COLLISIONS: " + collcount
	Text 10,275,"NORMAL X: " + NXComp
	Text 10,290,"NORMAL Y: " + NYComp
	Text 10,305,"NORMAL Z: " + NZComp
	
	Text 10,320,"HIGHEST NUM COLL: " + maxcoll
	
	Text 10,345,"LINEAR VEL X: " + LVXComp + " Y: " + LVYComp + " Z: " + LVZComp

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(TerrainSpace)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function UpdateKeys()

	If KeyHit(15) Then							; TAB (reset balls)
		trail = 0
		spheres=1
		For ode.ODEGeom=Each ODEGeom
			dBodyEnable(ode\body)
			dBodySetAngularVel(ode\body,0,0,0)
			dBodySetLinearVel(ode\body,0,0,0)
			dBodySetPosition(ode\body,0,20,spheres*5)
			spheres=spheres+1
			FreeEntity ode\trail_mesh
			FreeBrush ode\trail_brush
			ode\r = Rand(100,255)
			ode\g = Rand(100,255)
			ode\b = Rand(100,255)
			EntityColor ode\mesh,ode\r,ode\g,ode\b
			ode\trail_mesh=CreateMesh()
			ode\trail_brush=CreateBrush()
			BrushColor ode\trail_brush,ode\r,ode\g,ode\b
			BrushFX ode\trail_brush,1
			ode\trail_surf=CreateSurface( ode\trail_mesh,ode\trail_brush )
			AddVertex ode\trail_surf,0,0,0,0,0
			AddVertex ode\trail_surf,0,0,0,0,1
			AddVertex ode\trail_surf,0,0,0,0,0
			AddVertex ode\trail_surf,0,0,0,0,1
			AddTriangle ode\trail_surf,0,2,3
			AddTriangle ode\trail_surf,0,3,1
			AddTriangle ode\trail_surf,0,3,2
			AddTriangle ode\trail_surf,0,1,3
			ode\trail_vert=2
		Next
	EndIf

	power#=10000.0

	If KeyDown(57) Then							; SPACE (add force to balls)
		DebugLog "SPACE pressed"
		SeedRnd MilliSecs()
		For ode.ODEGeom=Each ODEGeom
			dBodyEnable(ode\body)
			dBodyAddForce(ode\body,Rnd(-power,power),Rnd(-power,power),Rnd(-power,power))
		Next 
	EndIf

	If KeyHit(42) Then							; L SHIFT (toggle wireframe)
		wireframemode = 1 - wireframemode
		WireFrame wireframemode
	EndIf
	
	If KeyHit(29) Then trail=1-trail			; L CTRL (toggle trails)
	
	If KeyHit(2) Or KeyDown(2) Then				; 1 (world erp up)
		deferp = deferp + (inc/10)
		dWorldSetERP(World,deferp)	
	EndIf
	
	If KeyHit(16) Or KeyDown(16) Then			; Q (world erp down)
		deferp = deferp - (inc/10)
		dWorldSetERP(World,deferp)
	EndIf

	If KeyHit(3) Or KeyDown(3) Then				; 2 (world cfm up)
		defcfm = defcfm + (inc/10)
		dWorldSetCFM(World,defcfm)	
	EndIf
	
	If KeyHit(17) Or KeyDown(17) Then			; W (world cfm down)
		defcfm = defcfm - (inc/10)
		dWorldSetCFM(World,defcfm)
	EndIf

	If KeyHit(4) Or KeyDown(4) Then				; 3 (world bounce up)
		defbou = defbou + inc
		dContactSetBounce(defbou)	
	EndIf
	
	If KeyHit(18) Or KeyDown(18) Then			; E (world bounce down)
		defbou = defbou - inc
		dContactSetBounce(defbou)
	EndIf

	If KeyHit(5) Or KeyDown(5) Then				; 4 (world friction up)
		defmu = defmu + (inc*100)
		dContactSetMu(defmu)	
	EndIf
	
	If KeyHit(19) Or KeyDown(19) Then			; R (world friction down)
		defmu = defmu - (inc*100)
		dContactSetMu(defmu)
	EndIf


	If KeyHit(30) Or KeyDown(30) Then			; A (ball friction up)
		mu = mu + (inc*100)
		For ode.ODEGeom=Each ODEGeom
			dGeomContactSetMu(ode\geom,mu)
		Next	
	EndIf
	
	If KeyHit(44) Or KeyDown(44) Then			; Z (ball friction down)
		mu = mu - (inc*100)
		For ode.ODEGeom=Each ODEGeom
			dGeomContactSetMu(ode\geom,mu)
		Next
	EndIf

	If KeyHit(31) Or KeyDown(31) Then			; S (ball bounce up)
		bou = bou + inc
		For ode.ODEGeom=Each ODEGeom
			dGeomContactSetBounce(ode\geom,bou)
		Next	
	EndIf
	
	If KeyHit(45) Or KeyDown(45) Then			; X (ball bounce down)
		bou = bou - inc
		For ode.ODEGeom=Each ODEGeom
			dGeomContactSetBounce(ode\geom,bou)
		Next
	EndIf

	If KeyHit(32) Or KeyDown(32) Then			; D (ball density up)
		den = den + inc
		For ode.ODEGeom = Each ODEGeom
			mass=dMassCreate()
			dMassSetSphereTotal(mass,den,rad)
			dBodySetMass(ode\body,mass)
			dMassDestroy(mass)
		Next
	EndIf

	If KeyHit(46) Or KeyDown(46) Then			; C (ball density down)
		den = den - inc
		For ode.ODEGeom = Each ODEGeom
			mass=dMassCreate()
			dMassSetSphereTotal(mass,den,rad)
			dBodySetMass(ode\body,mass)
			dMassDestroy(mass)
		Next
	EndIf

	If KeyHit(33) Or KeyDown(33) Then			; F (ball angular threshold up)
		angthr = angthr + inc
		For ode.ODEGeom=Each ODEGeom
			dBodySetAutoDisableAngularThreshold(ode\body,angthr)
		Next
	EndIf

	If KeyHit(47) Or KeyDown(47) Then			; V (ball angular threshold down)
		angthr = angthr - inc
		For ode.ODEGeom=Each ODEGeom
			dBodySetAutoDisableAngularThreshold(ode\body,angthr)
		Next
	EndIf

	If KeyHit(34) Or KeyDown(34) Then			; G (ball linear threshold up)
		linthr = linthr + inc
		For ode.ODEGeom=Each ODEGeom
			dBodySetAutoDisableLinearThreshold(ode\body,linthr)
		Next
	EndIf

	If KeyHit(48) Or KeyDown(48) Then			; B (ball linear threshold down)
		linthr = linthr - inc
		For ode.ODEGeom=Each ODEGeom
			dBodySetAutoDisableLinearThreshold(ode\body,linthr)
		Next
	EndIf
		
	TranslateEntity Camera,MouseXSpeed()/5.0,0,-MouseYSpeed()/5.0		; move camera
	MoveMouse gfxw/2,gfxh/2
	CamZ=CamZ+(MouseZSpeed()/3.0)
	CameraZoom Camera, CamZ
	
End Function

; ###################################################################################################

Function UpdateGeoms()

	For ode.ODEGeom=Each ODEGeom
		RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
		PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
		If dBodyIsEnabled(ode\body) Then
			EntityAlpha ode\mesh,1.0
		Else
			EntityAlpha ode\mesh,0.1
		EndIf
	Next

End Function

; ###################################################################################################

Function UpdateTrail()

	For ode.ODEGeom=Each ODEGeom
		If trail
			AddVertex ode\trail_surf,EntityX(ode\mesh),EntityY(ode\mesh)+0.1,EntityZ(ode\mesh),0,0
			AddVertex ode\trail_surf,EntityX(ode\mesh),EntityY(ode\mesh)-0.1,EntityZ(ode\mesh),0,1
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+2,ode\trail_vert+3
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+3,ode\trail_vert+1
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+3,ode\trail_vert+2
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+1,ode\trail_vert+3
			ode\trail_vert=ode\trail_vert+2
		Else
			AddVertex ode\trail_surf,EntityX(ode\mesh),EntityY(ode\mesh),EntityZ(ode\mesh),0,0
			AddVertex ode\trail_surf,EntityX(ode\mesh),EntityY(ode\mesh),EntityZ(ode\mesh),0,1
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+2,ode\trail_vert+3
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+3,ode\trail_vert+1
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+3,ode\trail_vert+2
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+1,ode\trail_vert+3
			ode\trail_vert=ode\trail_vert+2
		EndIf
	Next

End Function</textarea><br><br>The values in the above code don't represent my best effort at tweaking, by the way, they are just the latest set of values I have tried.<br><br>Any advice would be very much appreciated. I'm practising my embarrased face, just in case someone is kind enough to take a look and gets this working with a tweak or two.<br><br>All the best to you all (big thanks to VIP3R for his ongoing work and support + the thread regulars for their contributions) <br><br></td></tr></table><br>
<a name="702887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks viper you helped me out a lot there <br><br></td></tr></table><br>
<a name="702917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi TMG,<br><br>Unfortunately I don't know of any complete cure for the glitch with flat mesh edges. ODE 'sees' the edges as a ridge rather than a flat surface, so the contact joint is created at an angle causing the ball to go off course. The problem only appears with a flat mesh though, so to fix it you will need to use a different approach. The best way would be to use a plane instead of a mesh, but it depends on whether that would suit your needs. Another way is to make the mesh triangles large enough so that the ball never encounters any edges, you would only need one large triangle or quad. This method may not work well though as large mesh triangles can cause penetration problems.<br><br>There are quite a few issues with the code you posted. Using high friction/gravity/mass values will give you problems, try to keep them lower if possible. Some of the other tweaks used (like Soft ERP/CFM) will probably cause more problems in this instance too. Here's a tweaked version of your code that has more stable values, I've marked the tweaks with '********' so that you can see the differences clearly...<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Include "JV-ODE.bb"

Const gfxw = 800
Const gfxh = 600

Graphics3D gfxw,gfxh,0,2

Global wireframemode = 0

HidePointer
MoveMouse gfxw/2,gfxh/2

Type ODEGeom
	Field body
	Field geom
	Field mesh
	Field trail_mesh
	Field trail_surf
	Field trail_brush
	Field trail_vert
	Field r,g,b
End Type

; ### Setup ODE settings

Global inc# = 0.1			; increment value

Global deferp# = 0.3		; world erp ; ********
Global defcfm# = 0.0		; world cfm
Global defmu# = 32.0		; world friction
Global defbou# = 0.3		; world bounce

Global mu# = 10.0			; ball friction ; ********
Global bou# = 0.3			; ball bounce
Global angthr# = 0.1		; ball angular threshold
Global linthr# = 0.1		; ball linear throeshold
Global den# = 1.0			; ball density ; ********
Global rad# = 1.0			; ball radius

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global TerrainSpace=dHashSpaceCreate(Space)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0) ; ********
dWorldSetERP(World,deferp)

dWorldSetContactSurfaceLayer(World,0.0) ; ********

dContactSetMode(dContactBounce + dContactMu) ; ********
dContactSetBounce(defbou)
dContactSetMu(defmu)
;dContactSetSoftERP(deferp) ; ********
;dContactSetSoftCFM(defcfm) ; ********

; ### Create some balls

SeedRnd MilliSecs()

Dim sphere(1)
Dim spherebody(1)

For spheres=1 To 1
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	spherebody(spheres) = ode\body
	dBodySetAutoDisableFlag(ode\body,1)
;	dBodySetAutoDisableAngularThreshold(ode\body,angthr) ; ********
;	dBodySetAutoDisableLinearThreshold(ode\body,linthr) ; ********
;	dBodySetAutoDisableSteps (ode\body, 1) ; ********
	dBodySetPosition(ode\body,0,20,spheres*5)
	mass=dMassCreate()
	dMassSetSphereTotal(mass,den,rad)
	dBodySetMass(ode\body,mass)
	dMassDestroy(mass)
	ode\geom=dCreateSphere(Space,rad)
	sphere(spheres)=ode\geom
	dGeomSetBody(ode\geom,ode\body)
	dGeomContactSetMode(ode\geom,dContactBounce + dContactMu + dContactSoftERP)
	dGeomContactSetBounce(ode\geom,bou)
	dGeomContactSetMu(ode\geom,mu)
	ode\mesh=CreateSphere(16)
	ScaleEntity ode\mesh,rad,rad,rad
	ode\r = Rand(100,255)
	ode\g = Rand(100,255)
	ode\b = Rand(100,255)
	EntityColor ode\mesh,ode\r,ode\g,ode\b
	ode\trail_mesh=CreateMesh()
	ode\trail_brush=CreateBrush()
	BrushColor ode\trail_brush,ode\r,ode\g,ode\b
	BrushFX ode\trail_brush,1
	ode\trail_surf=CreateSurface( ode\trail_mesh,ode\trail_brush )
	AddVertex ode\trail_surf,0,0,0,0,0
	AddVertex ode\trail_surf,0,0,0,0,1
	AddVertex ode\trail_surf,0,0,0,0,0
	AddVertex ode\trail_surf,0,0,0,0,1
	AddTriangle ode\trail_surf,0,2,3
	AddTriangle ode\trail_surf,0,3,1
	AddTriangle ode\trail_surf,0,3,2
	AddTriangle ode\trail_surf,0,1,3
	ode\trail_vert=2
Next

; ### Create light

Global Light=CreateLight()
RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global Camera=CreateCamera()
Global CamZ#=1.0
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,0,20,-20
RotateEntity Camera,45,0,0

; ### Create Mesh (flat trimesh)

Const dimension = 16

terrain = CreateMesh()
surface = CreateSurface(terrain)

For meshcreateloopcount = 0 To dimension-1
	For meshloop2 = 0 To dimension-1
		AddVertex surface, meshloop2, 0, meshcreateloopcount
	Next
Next

For meshcreateloopcount = 0 To ((dimension*dimension)-1) Step dimension
	For meshloop2 = 0 To dimension-2
		AddTriangle surface, meshloop2+meshcreateloopcount, meshloop2+meshcreateloopcount+dimension, meshloop2+meshcreateloopcount+(dimension+1)
		AddTriangle surface, meshloop2+meshcreateloopcount, meshloop2+meshcreateloopcount+(dimension+1), meshloop2+meshcreateloopcount+1
	Next
Next

UpdateNormals terrain

scale = 5
ScaleMesh terrain,scale,scale,scale
meshw = MeshWidth(terrain)
meshd = MeshDepth(terrain)
PositionMesh terrain, -meshw/2,10,-meshd/2

trimesh = CreateTriMesh( TerrainSpace, terrain )

Global trail = 0
maxcoll = 0

; ###################################################################################################


While Not KeyHit(1)

	PTime=MilliSecs()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1) ; ********
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	collcount = dGeom1CountCollisions(sphere(1))+dGeom2CountCollisions(sphere(1))
	If collcount &gt; 0 Then
		NXComp#=dGeom2CollisionNX(sphere(1),1)
		NYComp#=dGeom2CollisionNY(sphere(1),1)
		NZComp#=dGeom2CollisionNZ(sphere(1),1)
    Else
    	NXComp#=0.0
    	NYComp#=0.0
    	NZComp#=0.0
    End If
	If collcount &gt; maxcoll Then maxcoll = collcount

	LVXComp# = dBodyGetLinearVelX(spherebody(1))
	LVYComp# = dBodyGetLinearVelY(spherebody(1))
	LVZComp# = dBodyGetLinearVelZ(spherebody(1))
	
	UpdateGeoms()
	UpdateKeys()
	UpdateTrail()

	UpdateWorld

	RenderWorld

	Color 0,100,200 ; ********
	Text 10,10,"HOLD SPACE TO ADD RANDOM FORCE"
	Text 10,25,"TAB TO RESET"
	Text 10,40,"MOVE MOUSE TO MOVE CAMERA"
	Text 10,55,"USE WHEEL TO ZOOM CAMERA"
	Text 10,70,"LEFT CTRL TO TOGGLE TRAILS"
	Text 10,85,"LEFT SHIFT TO TOGGLE WIREFRAME"
	
	Text 10,105,"WORLD ERP (1/Q): " + dWorldGetERP(World)
	Text 10,120,"WORLD CFM (2/W): " + dWorldGetCFM(World)
	Text 10,135,"WORLD BOUNCE (3/E): " + dContactGetBounce()
	Text 10,150,"WORLD FRICTION (4/R): " + dContactGetMu()
	
	Text 10,175,"BALL FRICTION (A/Z): " + mu
	Text 10,190,"BALL BOUNCE (S/X): " + bou
	Text 10,205,"BALL DENSITY (D/C): " + den
	Text 10,220,"BALL ANGULAR THR (F/V): " + angthr
	Text 10,235,"BALL LINEAR THR (G/B): " + linthr

	Text 10,260,"COLLISIONS: " + collcount
	Text 10,275,"NORMAL X: " + NXComp
	Text 10,290,"NORMAL Y: " + NYComp
	Text 10,305,"NORMAL Z: " + NZComp
	
	Text 10,320,"HIGHEST NUM COLL: " + maxcoll
	
	Text 10,345,"LINEAR VEL X: " + LVXComp + " Y: " + LVYComp + " Z: " + LVZComp

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(TerrainSpace)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function UpdateKeys()

	If KeyHit(15) Then							; TAB (reset balls)
		trail = 0
		spheres=1
		For ode.ODEGeom=Each ODEGeom
			dBodyEnable(ode\body)
			dBodySetAngularVel(ode\body,0,0,0)
			dBodySetLinearVel(ode\body,0,0,0)
			dBodySetPosition(ode\body,0,20,spheres*5)
			spheres=spheres+1
			FreeEntity ode\trail_mesh
			FreeBrush ode\trail_brush
			ode\r = Rand(100,255)
			ode\g = Rand(100,255)
			ode\b = Rand(100,255)
			EntityColor ode\mesh,ode\r,ode\g,ode\b
			ode\trail_mesh=CreateMesh()
			ode\trail_brush=CreateBrush()
			BrushColor ode\trail_brush,ode\r,ode\g,ode\b
			BrushFX ode\trail_brush,1
			ode\trail_surf=CreateSurface( ode\trail_mesh,ode\trail_brush )
			AddVertex ode\trail_surf,0,0,0,0,0
			AddVertex ode\trail_surf,0,0,0,0,1
			AddVertex ode\trail_surf,0,0,0,0,0
			AddVertex ode\trail_surf,0,0,0,0,1
			AddTriangle ode\trail_surf,0,2,3
			AddTriangle ode\trail_surf,0,3,1
			AddTriangle ode\trail_surf,0,3,2
			AddTriangle ode\trail_surf,0,1,3
			ode\trail_vert=2
		Next
	EndIf

	power#=1.0 ; ********

	If KeyDown(57) Then							; SPACE (add force to balls)
		DebugLog "SPACE pressed"
		SeedRnd MilliSecs()
		For ode.ODEGeom=Each ODEGeom
			dBodyEnable(ode\body)
			dBodyAddForce(ode\body,Rnd(-power,power),Rnd(-power,power),Rnd(-power,power))
		Next 
	EndIf

	If KeyHit(42) Then							; L SHIFT (toggle wireframe)
		wireframemode = 1 - wireframemode
		WireFrame wireframemode
	EndIf
	
	If KeyHit(29) Then trail=1-trail			; L CTRL (toggle trails)
	
	If KeyHit(2) Or KeyDown(2) Then				; 1 (world erp up)
		deferp = deferp + (inc/10)
		dWorldSetERP(World,deferp)	
	EndIf
	
	If KeyHit(16) Or KeyDown(16) Then			; Q (world erp down)
		deferp = deferp - (inc/10)
		dWorldSetERP(World,deferp)
	EndIf

	If KeyHit(3) Or KeyDown(3) Then				; 2 (world cfm up)
		defcfm = defcfm + (inc/10)
		dWorldSetCFM(World,defcfm)	
	EndIf
	
	If KeyHit(17) Or KeyDown(17) Then			; W (world cfm down)
		defcfm = defcfm - (inc/10)
		dWorldSetCFM(World,defcfm)
	EndIf

	If KeyHit(4) Or KeyDown(4) Then				; 3 (world bounce up)
		defbou = defbou + inc
		dContactSetBounce(defbou)	
	EndIf
	
	If KeyHit(18) Or KeyDown(18) Then			; E (world bounce down)
		defbou = defbou - inc
		dContactSetBounce(defbou)
	EndIf

	If KeyHit(5) Or KeyDown(5) Then				; 4 (world friction up)
		defmu = defmu + (inc*100)
		dContactSetMu(defmu)	
	EndIf
	
	If KeyHit(19) Or KeyDown(19) Then			; R (world friction down)
		defmu = defmu - (inc*100)
		dContactSetMu(defmu)
	EndIf


	If KeyHit(30) Or KeyDown(30) Then			; A (ball friction up)
		mu = mu + (inc*100)
		For ode.ODEGeom=Each ODEGeom
			dGeomContactSetMu(ode\geom,mu)
		Next	
	EndIf
	
	If KeyHit(44) Or KeyDown(44) Then			; Z (ball friction down)
		mu = mu - (inc*100)
		For ode.ODEGeom=Each ODEGeom
			dGeomContactSetMu(ode\geom,mu)
		Next
	EndIf

	If KeyHit(31) Or KeyDown(31) Then			; S (ball bounce up)
		bou = bou + inc
		For ode.ODEGeom=Each ODEGeom
			dGeomContactSetBounce(ode\geom,bou)
		Next	
	EndIf
	
	If KeyHit(45) Or KeyDown(45) Then			; X (ball bounce down)
		bou = bou - inc
		For ode.ODEGeom=Each ODEGeom
			dGeomContactSetBounce(ode\geom,bou)
		Next
	EndIf

	If KeyHit(32) Or KeyDown(32) Then			; D (ball density up)
		den = den + inc
		For ode.ODEGeom = Each ODEGeom
			mass=dMassCreate()
			dMassSetSphereTotal(mass,den,rad)
			dBodySetMass(ode\body,mass)
			dMassDestroy(mass)
		Next
	EndIf

	If KeyHit(46) Or KeyDown(46) Then			; C (ball density down)
		den = den - inc
		For ode.ODEGeom = Each ODEGeom
			mass=dMassCreate()
			dMassSetSphereTotal(mass,den,rad)
			dBodySetMass(ode\body,mass)
			dMassDestroy(mass)
		Next
	EndIf

	If KeyHit(33) Or KeyDown(33) Then			; F (ball angular threshold up)
		angthr = angthr + inc
		For ode.ODEGeom=Each ODEGeom
			dBodySetAutoDisableAngularThreshold(ode\body,angthr)
		Next
	EndIf

	If KeyHit(47) Or KeyDown(47) Then			; V (ball angular threshold down)
		angthr = angthr - inc
		For ode.ODEGeom=Each ODEGeom
			dBodySetAutoDisableAngularThreshold(ode\body,angthr)
		Next
	EndIf

	If KeyHit(34) Or KeyDown(34) Then			; G (ball linear threshold up)
		linthr = linthr + inc
		For ode.ODEGeom=Each ODEGeom
			dBodySetAutoDisableLinearThreshold(ode\body,linthr)
		Next
	EndIf

	If KeyHit(48) Or KeyDown(48) Then			; B (ball linear threshold down)
		linthr = linthr - inc
		For ode.ODEGeom=Each ODEGeom
			dBodySetAutoDisableLinearThreshold(ode\body,linthr)
		Next
	EndIf
		
	TranslateEntity Camera,MouseXSpeed()/5.0,0,-MouseYSpeed()/5.0		; move camera
	MoveMouse gfxw/2,gfxh/2
	CamZ=CamZ+(MouseZSpeed()/3.0)
	CameraZoom Camera, CamZ
	
End Function

; ###################################################################################################

Function UpdateGeoms()

	For ode.ODEGeom=Each ODEGeom
		RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
		PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
		If dBodyIsEnabled(ode\body) Then
			EntityAlpha ode\mesh,1.0
		Else
			EntityAlpha ode\mesh,0.1
		EndIf
	Next

End Function

; ###################################################################################################

Function UpdateTrail()

	For ode.ODEGeom=Each ODEGeom
		If trail
			AddVertex ode\trail_surf,EntityX(ode\mesh),EntityY(ode\mesh)+0.1,EntityZ(ode\mesh),0,0
			AddVertex ode\trail_surf,EntityX(ode\mesh),EntityY(ode\mesh)-0.1,EntityZ(ode\mesh),0,1
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+2,ode\trail_vert+3
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+3,ode\trail_vert+1
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+3,ode\trail_vert+2
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+1,ode\trail_vert+3
			ode\trail_vert=ode\trail_vert+2
		Else
			AddVertex ode\trail_surf,EntityX(ode\mesh),EntityY(ode\mesh),EntityZ(ode\mesh),0,0
			AddVertex ode\trail_surf,EntityX(ode\mesh),EntityY(ode\mesh),EntityZ(ode\mesh),0,1
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+2,ode\trail_vert+3
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+3,ode\trail_vert+1
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+3,ode\trail_vert+2
			AddTriangle ode\trail_surf,ode\trail_vert,ode\trail_vert+1,ode\trail_vert+3
			ode\trail_vert=ode\trail_vert+2
		EndIf
	Next

End Function
</textarea><br><br>@Slunkar: You're welcome :) I forgot to mention that you may need to place the container cube panels into their own sub-space (see multiple spaces) and disable internal space collisions to prevent them colliding with each other. Check out the previous JV-ODE threads, there's lots of info about sub-spaces and disabling internal space collide modes. <br><br></td></tr></table><br>
<a name="703022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TMG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply, VIP3R - much appreciated. I'll look into ways around it, particularly re-evaluating the mesh construction as a plane won't suffice unfortunately. I am hoping to use quite detailed trimeshes in the final game and the ball trajectory has to be really quite precise to make the game workable.<br><br>Once again, thanks for your time and effort - top man! <br><br></td></tr></table><br>
<a name="703111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're welcome TMG :)<br><br>Another method you could try is to make the flat mesh using lots of smaller triangles, maybe 10x-20x the amount used in the code you posted. It may prevent the ball from snagging on the triangle edges. I'm not sure if it will help but it's worth a shot, let me know if you need more help with it or if you find a decent solution ;) <br><br></td></tr></table><br>
<a name="703614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi thanks for the help, that was the pinball table set up!<br><br>However I have been trying to create flippers for 2 days with no luck.<br><br>When I go into the rope-demo and reduce the number of balls to 1 it fails to move.<br><br>I changed the joint type to a hinge and move the joint about 10 units above the ball.<br>So theoretically the ball should move as if it is connected to 'the world' by a hinge.<br><br>Thing is when I add 9 other balls  to the first one the first ball reacts as I expected!<br><br>I dont get this at all.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #										 JV-ODE - Rope Demo											#
; #									Code by Jim Williams (VIP3R)									#
; ###################################################################################################

AppTitle "JV-ODE - Rope Demo"

Include "JV-ODE.bb"


Graphics3D 800,600,0,2
Global Camera=CreateCamera()
Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

Dim Sphere(10)
Dim Joint(10)

; ###################################################################################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)
dContactSetMode(dContactBounce)
dContactSetBounce(0.1)
dContactSetMu(48)

; ### Create Rope
;c change this to 1 to 1 to see it not working!
For count=1 To 10
;count=1
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	Sphere(count)=ode\body
	dBodySetRotation(ode\body,0,0,0)
	dBodySetPosition(ode\body,-30,600-(count*9),0)
	dBodySetAutoDisableFlag(ode\body,1)
	ode\geom=dCreatecylinder(Space,1,8)
	dGeomSetBody(ode\geom,ode\body)
	ode\mesh=CreateCylinder(8)
	ScaleMesh ode\mesh,.5,4,.5
	RotateMesh ode\mesh,0,0,0
	PositionMesh ode\mesh,0,0,0
	EntityColor ode\mesh,Rand(255),Rand(255),Rand(255)
	EntityAlpha ode\mesh,1
	EntityShininess ode\mesh,0.7
	Joint(count)=dJointCreatehinge(World,0)
	If count=1

		dJointAttach(Joint(count),0,Sphere(count))
	dJointSethingeAnchor(Joint(count),dBodyGetPositionX(Sphere(count)),dBodyGetPositionY(Sphere(count))+10,dBodyGetPositionZ(Sphere(count)))
djointsethingeaxis(joint(count),1,0,1)
		Else
	dJointAttach(Joint(count),Sphere(count),Sphere(count-1))
		;dJointAttach(Joint(count),Sphere(count-1),Sphere(count))
	dJointSethingeAnchor(Joint(count),dBodyGetPositionX(Sphere(count)),dBodyGetPositionY(Sphere(count))+10,dBodyGetPositionZ(Sphere(count)))
djointsethingeaxis(joint(count),1,0,1)
		End If


dJointSetHingeParam(Joint(count),dParamSuspensionERP,0.8)
dJointSetHingeParam(Joint(count),dParamSuspensionCFM,SuspensionHS)
dJointSetHingeParam(Joint(count),dParamLoStop,-2)
dJointSetHingeParam(Joint(count),dParamHiStop,2)
Next

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera


CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,-30,600,-80
RotateEntity Camera,30,0,0

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Mirror=CreateMirror()

; ###################################################################################################

While Not KeyHit(1)

	UpdateKeys()

	PTime=MilliSecs()

;	If MilliSecs()-Timer&gt;700
;		AddObject()
;		Timer=MilliSecs()
;		End If

	UpdateGeoms()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateWorld

	RenderWorld

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime
	Text 640,0,"Add Force To Rope"
	Text 640,15,"Using Arrow Keys"

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function AddObject()

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,30,80,0)
dBodySetAutoDisableFlag(ode\body,1)
ode\geom=dCreateBox(Space,10,5,10)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
ScaleMesh ode\mesh,5,2.5,5
EntityColor ode\mesh,Rand(255),Rand(255),Rand(255)
EntityAlpha ode\mesh,1
EntityShininess ode\mesh,0.7

End Function

; ###################################################################################################

Function UpdateKeys()

If KeyDown(203) Then dBodyAddForce(Sphere(1),-10,0,0)
If KeyDown(205) Then dBodyAddForce(Sphere(1),10,0,0)
If KeyDown(200) Then dBodyAddForce(Sphere(1),0,0,10)
If KeyDown(208) Then dBodyAddForce(Sphere(1),0,0,-10)

End Function

; ###################################################################################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	If dBodyIsEnabled(ode\body)
		RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
		PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
		End If
Next

End Function

; ###################################################################################################</textarea> <br><br></td></tr></table><br>
<a name="703722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, what's happening is that the top rope object is auto-disabling when there are no other objects attached to it. When the other rope objects are attached, they move it very slightly, enough to stop it from auto-disabling.<br><br>There are two ways to stop this behaviour:<br><br>You can either turn off the auto-disable of the rope object by changing the 1 to 0 in the following line...<br><br><i>dBodySetAutoDisableFlag(ode\body,<b>0</b>)</i><br><br>Or, the best solution is to make sure that the rope object is enabled before you move it. To do this, change each line of the UpdateKeys() function like so...<br><br><i>If KeyDown(203) Then <b>dBodyEnable(Sphere(1)) : </b>dBodyAddForce(Sphere(1),-10,0,0)</i><br><br>Note that you will need to add lo/hi stop values in the hinge parameters to limit the movement of the hinge...<br><i><br>dJointSetHingeParam(joint,dParamLoStop,-1)<br>dJointSetHingeParam(joint,dParamHiStop,1)<br></i><br>With the above settings, the hinge will move from -1 through to +1 radians, 0 will be the center of movement. You can increase or decrease the values to allow/limit whatever movement you need on the hinge joint. The lo stop value should always be lower than the hi stop value. <br><br></td></tr></table><br>
<a name="703896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've put together a quick demo to show how to create some pinball flippers which you can use as a guide...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #									JV-ODE - Pinball Flipper Demo									#
; #									Code by Jim Williams (VIP3R)									#
; #								Devious Codeworks - Copyright © 2006								#
; ###################################################################################################

AppTitle "JV-ODE - Pinball Flipper Demo"

Include "JV-ODE.bb"

Graphics3D 800,600,0,2

Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

Dim FJoint(2)
Dim Flipper(2)

; ###################################################################################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)
dContactSetMode(dContactBounce)
dContactSetBounce(0.4)
dContactSetMu(10.0)

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,0,45,-20
RotateEntity Camera,40,0,0

; ### Create plane

ODEPlane=dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.5

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Mirror=CreateMirror()

; ### Create table base

ode.ODEGeom=New ODEGeom
ode\geom=dCreateBox(Space,70,1,140)
dGeomSetRotation(ode\geom,-8,0,0)
dGeomSetPosition(ode\geom,0,10,64)
ode\mesh=CreateCube()
ScaleMesh ode\mesh,35,0.5,70
EntityColor ode\mesh,0,100,200
EntityAlpha ode\mesh,1

; ### Create left flipper

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
Flipper(1)=ode\body
dBodySetRotation(ode\body,-8,0,0)
dBodySetPosition(ode\body,-17,6,10)
dBodySetAutoDisableFlag(ode\body,0)
mass=dMassCreate()
dMassSetBoxTotal(mass,1,20,4,1.5)
dBodySetMass(ode\body,mass)
dMassDestroy(mass)
ode\geom=dCreateBox(Space,20,4,1.5)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
ScaleMesh ode\mesh,10,2,0.75
EntityColor ode\mesh,255,255,255

FJoint(1)=dJointCreateHinge(World,0)
dJointAttach(FJoint(1),Flipper(1),0)
dJointSetHingeAnchor(FJoint(1),-27,6,9.5)
dJointSetHingeAxis(FJoint(1),0,1,0)
dJointSetHingeParam(FJoint(1),dParamLoStop,-0.5)
dJointSetHingeParam(FJoint(1),dParamHiStop,0.5)

; ### Create right flipper

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
Flipper(2)=ode\body
dBodySetRotation(ode\body,-8,0,0)
dBodySetPosition(ode\body,17,6,10)
dBodySetAutoDisableFlag(ode\body,0)
mass=dMassCreate()
dMassSetBoxTotal(mass,1,20,4,1.5)
dBodySetMass(ode\body,mass)
dMassDestroy(mass)
ode\geom=dCreateBox(Space,20,4,1.5)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
ScaleMesh ode\mesh,10,2,0.75
EntityColor ode\mesh,255,255,255

FJoint(2)=dJointCreateHinge(World,0)
dJointAttach(FJoint(2),Flipper(2),0)
dJointSetHingeAnchor(FJoint(2),27,6,9.5)
dJointSetHingeAxis(FJoint(2),0,1,0)
dJointSetHingeParam(FJoint(2),dParamLoStop,-0.5)
dJointSetHingeParam(FJoint(2),dParamHiStop,0.5)

; ###################################################################################################

While Not KeyHit(1)

	UpdateKeys()

	PTime=MilliSecs()

	If MilliSecs()-Timer&gt;800
		AddObject()
		Timer=MilliSecs()
		End If

	UpdateGeoms()

	; ### Use 4 quickstep calls to improve accuracy
	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.025)
	dJointGroupEmpty(ContactGroup)

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.025)
	dJointGroupEmpty(ContactGroup)

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.025)
	dJointGroupEmpty(ContactGroup)

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.025)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateWorld

	RenderWorld

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime
	Text 110,500,"Left Arrow"
	Text 600,500,"Right Arrow"

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function AddObject()

xp=Rand(-20,20)
ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,30,100)
dBodySetAutoDisableFlag(ode\body,1)
ode\geom=dCreateSphere(Space,2)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateSphere()
ScaleMesh ode\mesh,2,2,2
EntityColor ode\mesh,Rand(255),Rand(255),Rand(255)
EntityAlpha ode\mesh,1
EntityShininess ode\mesh,0.7

End Function

; ###################################################################################################

Function UpdateKeys()

; ### Left flipper

If KeyDown(203)
	dJointSetHingeParam(FJoint(1),dParamVel,-1000)	; ### Force
	dJointSetHingeParam(FJoint(1),dParamFMax,1000)	; ### Torque
	Else
	dJointSetHingeParam(FJoint(1),dParamVel,1)		; ### Force
	dJointSetHingeParam(FJoint(1),dParamFMax,1000)	; ### Torque
	End If

; ### Right flipper

If KeyDown(205)
	dJointSetHingeParam(FJoint(2),dParamVel,1000)	; ### Force
	dJointSetHingeParam(FJoint(2),dParamFMax,1000)	; ### Torque
	Else
	dJointSetHingeParam(FJoint(2),dParamVel,-1)		; ### Force
	dJointSetHingeParam(FJoint(2),dParamFMax,1000)	; ### Torque
	End If

End Function

; ###################################################################################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
	PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
Next

End Function

; ###################################################################################################
</textarea> <br><br></td></tr></table><br>
<a name="704078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mike950</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Thanks!<br>I tried the same thing but high speed balls kept passing through the flippers. Yours works great. It looks like<br>the 4 collide - step calls in succession is what's needed.<br>Mike <br><br></td></tr></table><br>
<a name="704167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow thanks, that's a truely amazing demo<br>well done <br><br></td></tr></table><br>
<a name="704332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks both, you're welcome :) <br><br></td></tr></table><br>
<a name="704634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Viperfish</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondering if there are any completed blitz games available that use JV-ODE? <br><br></td></tr></table><br>
<a name="704874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, I don't know of all of them but here's some completed software using JV-ODE...<br><br><a href="/posts.php?topic=57315" target="_blank">Tricky Tracks</a> - Game<br><br><img src="http://www.wildebeestgames.com/TrickyTracks/shot16.jpg"><br><br><a href="http://www.goddysey.com/" target="_blank">PaceMaker</a> - Application<br><br><img src="http://webzoom.freewebs.com/smiff/screenshots/nss6.gif"> <br><br></td></tr></table><br>
<a name="708182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just bought JV-ODE physics engine, and must thank Viper for handling everything smoothly. The whole package seems great, and I've already managed to drop in some shadows and have boxes dropping around ;)<br><br>I would have a problem... I'm going to make a 3D hand (to replace mouse cursor) and I'm going to drag stuff... but I don't know (yet) how to do that. Is it possible to create dBoxes in the world, and then attach them (as joints) to 3D hand object? <br><br>Or do I have to play with applyForce thingies?<br><br>Thanks. <br><br></td></tr></table><br>
<a name="708183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OJay</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#140">[#140]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, i would destroy the ODE-object, when a box is dragged, attaching the blitz-entity to the hand and create a new ode-object and attach it to the Blitz-Entity when the box is released...<br><br>in general, its not a good idea to move a ODE-Object by hand! <br><br></td></tr></table><br>
<a name="708217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#141">[#141]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... but I would like to see the object swinging when I drag it all around... :) <br><br></td></tr></table><br>
<a name="708383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#142">[#142]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Juuso,<br><br>You can try it, but as OJay says it may cause problems because ODE doesn't like an objects position to be manually forced. The problem isn't the boxes, but the hand object which is manually positioned by the mouse. The main issue you may have is penetration of other objects, but you probably won't want the hand object to collide with other objects anyway.<br><br>If you want to try it, do the following:<br><br>First you will need to create an ODE body and position it at the location of the hand. Make sure you disable the effects of gravity on the ODE hand body with <i>dBodySetGravityMode(body,mode)</i>. You don't need to create a geom for the body, it is just used so that you can add a joint to it. Each frame you will need to position the body at the same location as the hand object.<br><br>Now, when you want to grab an object you can create a joint between the box and the ODE hand body. To release it again, just break/destroy the joint.<br><br>You may get an error in the UpdateGeoms() function because the ODE hand object has no geom, to fix this make sure a geom exists before the position/rotation of the meshes like so...<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	If ode\geom
		RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
		PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
		End If
Next

End Function

; ###################################################################################################
</textarea><br><br>See if that works ;) <br><br></td></tr></table><br>
<a name="708446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#143">[#143]</a></td></tr></table></td></tr><tr ><td class="posttext"> What IF I want the hand to collide as well? Would it make it any easier?  :)<br><br>I'll try that... <br><br></td></tr></table><br>
<a name="708477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#144">[#144]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay... looking good so far... next thing is to create the joint.... <br><br></td></tr></table><br>
<a name="708494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#145">[#145]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright... I managed to do *something*<br><a href="http://www.gameproducer.net/public/demo.zip" target="_blank">http://www.gameproducer.net/public/demo.zip</a> <br><br>The system works like this:<br>- click left mouse to attach joint to the NEWEST block<br>- click right mouse to break joint thingy<br><br>I still have couple of problems - like when you grap something, it goes fine - but then the piece starts to slowly move down... I don't understand why. It looks like my joint is very strecthy :) <br><br>Some code - create mouse ODE, joint etc:<br><pre class=code>
	Function createMouseODE()
	GFX_mouseMesh = CreateSphere()
	ScaleEntity GFX_mouseMesh, .2, .2, .2
	EntityColor GFX_mouseMesh, 200, 0, 0
	
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	
	GFX_mouseODEbody = ode\body
	DebugLog "creating mouse ODE body: "+GFX_mouseODEbody

	
	
	dBodySetRotation(ode\body,0,0,0)
	dBodySetPosition(ode\body,xp#,30,zp#)
	dBodySetAutoDisableFlag(ode\body,1)
	;ode\geom=dCreateBox(Space,1, 7, 3)
	;dGeomSetBody(ode\geom,ode\body)



	dBodySetGravityMode(ode\body, 0)

	;SetShadowMesh(ode\mesh)

	;create joint
	RDjoint = dJointCreateHinge(World,0)
	
	dJointSetHingeAxis(RDJoint,1,0,0)
	dJointSetHingeAnchor(RDJoint,xp-0.5,yp-5.5,zp)
	dJointSetHingeParam(RDJoint,dParamLoStop,-0.25)
	dJointSetHingeParam(RDJoint,dParamHiStop,0.25)
	
End Function 
</pre><br><br>attaching joint (pickODEbody is the body of latest box)<br><pre class=code>
dJointAttach(RDJoint, pickODEbody, GFX_mouseODEbody)
</pre><br><br>code - positions:<br><pre class=code>
	; position update
	PositionEntity GFX_mouseMesh, CAM_cameraPickX#, CAM_cameraPickY#, CAM_cameraPickZ#
	PositionEntity GFX_mouseMesh, CAM_cameraPickX#, 0, CAM_cameraPickZ#
	dBodySetPosition(GFX_mouseODEbody,CAM_cameraPickX#, 15, CAM_cameraPickZ#)
</pre><br><br>Questions:<br><br>1) Is there anything I could do to join the box and mouse with a less flexible joint? (to prevent box from falling down...)<br><br>2) How could I grap the box from the other end - rather than in the middle of the box?<br><br>Thanks in advance. <br><br></td></tr></table><br>
<a name="708528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#146">[#146]</a></td></tr></table></td></tr><tr ><td class="posttext"> The hinge joint probably isn't the best joint to use for this purpose, try either a ball joint or a fixed joint instead.<br><br>A joint will always attach to the center of a body. If you want to grab the box from a different end you would need to create each box using several smaller boxes (sub-boxes) and attach them all together with fixed joints, then you can grab or attach the joint to whichever sub-box is closest to the end. <br><br></td></tr></table><br>
<a name="708567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#147">[#147]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I tried RDjoint = dJointCreateBall(World,0) but it seems to do no good :)<br><br>Is the gravity code okay?<br><pre class=code>dBodySetGravityMode(ode\body, 0)</pre><br><br>Am I attaching the joint properly?<br><pre class=code>dJointAttach(RDJoint, pickODEbody, GFX_mouseODEbody)</pre><br>(previously made joint is put between picked box and mouse?)<br><br>How can I make the joint so that it isn't so flexible or anything? <br><br></td></tr></table><br>
<a name="708576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#148">[#148]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, the gravity code is ok.<br><br>Normally you can use ERP and CFM to adjust the flexibility of a joint, a high ERP (0.8) and low CFM (less than 0.001) will make it rigid. You can read more about ERP and CFM in the official ODE User Guide.<br><br>It looks like manually forcing the position of the hand ODE body is causing your problem, as previously predicted. It's considered abuse of the physics simulation as ODE is designed to handle the position and rotation of objects itself.<br><br>The only safe way to do it would be to apply forces to the hand ODE object to move it instead of manually re-positioning it. <br><br></td></tr></table><br>
<a name="708577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#149">[#149]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... but why in the rag doll demo the rag dolls always get attached nicely when you press F1 / F4? <br><br></td></tr></table><br>
<a name="708583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#150">[#150]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uh... I played with the rag doll demo... auch.<br><br>Apply forces seems to be the way to go.<br><br>Auch again. Now this gets interesting - I need to calculate mousemovement... and add force to objects depending if they are "picked".<br><br>Yaiks. Has anyone did this before? :) <br><br></td></tr></table><br>
<a name="708590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#151">[#151]</a></td></tr></table></td></tr><tr ><td class="posttext"> The RagDoll demos use static joints, they don't use manual re-positioning. Static joints are created between a body and the world (represented by a zero).<br><br>Ouch indeed, it's not going to be easy at all. I've no idea if anyone has tried it before with ODE, you could try searching through the ODE Archives located <a href="http://q12.org/pipermail/ode/" target="_blank">here</a>. <br><br></td></tr></table><br>
<a name="709134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#152">[#152]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm going to see if I can work things out... at the moment I decided to stick with destroy/create new geom/body - and it works ok.<br><br>Thanks VIP3R for patiency and help :)<br><br>One additional question: Is it possible to create a room mesh (like .3ds) and then have some sort of automatic way to make the ODE physics work? (So that when I model a door way... objects wouldn't collide there, but they would collide in ceilings and walls etc.)<br><br>Thanks in advance. <br><br></td></tr></table><br>
<a name="709150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#153">[#153]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem ;)<br><br>Yes, the ODE TriMesh which you create from your 3ds mesh will determine the collision geometry used by ODE, so objects will only collide with the visible areas of the mesh. <br><br></td></tr></table><br>
<a name="710139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#154">[#154]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ooh... TriMesh. Is that fast/slow compared to "normal collisions"? How can I make the mesh so that objects collide with it, but I won't want it to move (like if I make a room - I want the walls/floor etc stay where they are even if objects hit the walls :) <br><br></td></tr></table><br>
<a name="710367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#155">[#155]</a></td></tr></table></td></tr><tr ><td class="posttext"> They're the same speed as normal collisions. The following code (included in the JV-ODE TriMesh demos) shows how to create them...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ### Load/Scale 3DS Mesh
roommesh=LoadMesh("media\room.3ds")
ScaleMesh roommesh,1,1,1

; ### Create/Position/Rotate ODE TriMesh From 3DS Mesh
trimesh=CreateTriMesh(Space,roommesh)
dGeomSetRotation(trimesh,0,0,0)
dGeomSetPosition(trimesh,0,0.05,0)

; ### Position/Rotate 3DS Mesh
RotateEntity roommesh,0,0,0
PositionEntity roommesh,0,0.05,0
EntityColor roommesh,255,255,255
EntityAlpha roommesh,1
</textarea><br><br>Notice the Y Position of the mesh and TriMesh are set at '0.05', this is a quick way to prevent the static mesh from constantly colliding with the ground plane. The correct way to prevent this would be to use multiple spaces with internal collide mode disabled. Read through the previous JV-ODE threads as there's a lot of info which will help you with multiple spaces and other advanced subjects. <br><br></td></tr></table><br>
<a name="710514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angel martinez</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#156">[#156]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Viper, I have a question: I want to control a flying vehicle with rotations,what is the best way to turn the vehicle?.<br>Is it possible using ODE rotations(dBodySetRotation,dBodySetAngularVel etc.)?<br>Thanks. <br><br></td></tr></table><br>
<a name="710795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#157">[#157]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, you shouldn't use the 'Set' functions while your simulation is running unless you're resetting an object. If you want to move an object in ODE you should apply Force and Torque only, either to a body directly or via joints ;)<br><br>The best way to turn a flying vehicle would probably be adding relative force...<br><br>The following will rotate to the left (left wing down):<br><i>dBodyAddRelForce(ode\body,-40,0,0)</i><br><br>The following will rotate to the right (right wing down):<br><i>dBodyAddRelForce(ode\body,40,0,0)</i> <br><br></td></tr></table><br>
<a name="712460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#158">[#158]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All,<br><br>What's the way to get the 'amount of force' back when two geometries have collided?! I'm trying to decide in my code that 'minor collisions' or objects 'bumping into each other' doesn't count, but bigger collisions (higher impact/force) will result in damage...<br><br>I tried using the Collision normal (dGeom1CollisionNX/Y/Z) but that vector is normalized... dGeom1CollisionsDEPTH is not the way to go either I believe, so.... any suggestions? <br><br>Thanks,<br><br>Danny. <br><br></td></tr></table><br>
<a name="712465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#159">[#159]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did manage to come up with this one; getting the difference between the two body's velocity. I can't use their 'forces' because if a body is parented to something else, it would have a force of 0! For example: The car body when attached to some wheels..<br><br><pre class=code>
dBodyGetLinearVel(body1)
nx# = dVectorX#()
ny# = dVectorY#()
nz# = dVectorZ#()
vel1# = Sqr#( nx*nx + ny*ny + nz*nz )

dBodyGetLinearVel(body2)
nx# = dVectorX#()
ny# = dVectorY#()
nz# = dVectorZ#()
vel2# = Sqr#( nx*nx + ny*ny + nz*nz )

deltaVelocity# = Abs(vel1# - vel2#)</pre><br><br>But this contains two SQR's which I'm obviously not happy with since it will cost me serious FPS when done on a couple dozen entities per frame.. Any other ideas?<br>Being able to measure the force would also be a good way to determin the volume for a collision-soundeffect...<br><br>?!? <br><br></td></tr></table><br>
<a name="712477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#160">[#160]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>dGeom1CollisionsDEPTH is not the way to go either I believe, so.... any suggestions?<br> <br></div><br>Yep, dGeom1CollisionDepth() and dGeom2CollisionDepth()<br><br>The higher the depth, the harder the impact.<br><br>;) <br><br></td></tr></table><br>
<a name="712509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#161">[#161]</a></td></tr></table></td></tr><tr ><td class="posttext"> err....hookay... <br><br>Is this like a cheeky workaround or actually 'The Way' to do it? "inter-penetrating depth" (shutup Beavis, huh huh) is more an effect of the simulator's ""inaccuracy"", isn't it?!? Since 'theoretically' body's should NEVER penetrate - since they're 'solids'. ?! For example, should I increase the substeps of the simulator, shouldn't this inaccuracy decrease??<br>Anyway, i'll have a go at it. cheers viper! <br><br></td></tr></table><br>
<a name="712520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#162">[#162]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right, I've some some quick tests and I think I'm right in what I guessed in my previous post.. <br><br>My tests weren't very scientific - but I think it's safe to say that the value returned by CollisionDepth() also heavily depends on what type of shapes are colliding. For example: a Box colliding with a Cylinder will return a different value (at the same speed of impact) when a Box collides with another Box shape!<br>Also, the fact that dWorldSetContactSurfaceLayer() will DRAMATICALLY affect the scale of the value returned by dGeom1CollisionDepth() [by a factor 10 or 100] - leads me to believe that using that function is not a safe or reliable way to check the force of a collision. Especially to ensure the same effects on computers with different specs..<br><br>any other idea's or suggestions?!<br><br>thanks,<br>Danny <br><br></td></tr></table><br>
<a name="712576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#163">[#163]</a></td></tr></table></td></tr><tr ><td class="posttext"> This may be of some interest Danny,<br><br>Check this thread: <a href="http://www.blitzmax.com/Community/posts.php?topic=53490" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=53490</a><br><br>Breakable joints and these functions:<br><br>dJointFeedbackEnable(joint)<br>dJointFeedbackDisable(joint)<br>dJointFeedbackIsEnabled(joint)<br>dJointSetFeedback(joint,feedback)<br>dJointGetFeedbackForce1(joint)<br>dJointGetFeedbackTorque1(joint)<br>dJointGetFeedbackForce2(joint)<br>dJointGetFeedbackTorque2(joint) <br><br></td></tr></table><br>
<a name="712621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#164">[#164]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks wayne,<br>Even though me eyes are bleeding reading that thread again I did pick up a thing or two ;) But I'm looking to be able to measure/know the force of impact when two bodies collide (note both could be moving). But I think I've sort of figured it out now. Back to the old F=M*A (force equals mass times acceleration).<br><br>So; At the time of collision, I get their linearVelocity ('A') and know their Mass ('M') and thus can get the force ('F') of each body. By the subtracting them I get the difference between the two bodies - and that amount gives the 'amount' of impact of the collision. Correct no??? (I'm too old for this sort of math's ;)<br><br>The only bummer here is that to obtain both velocities I'll need to do two SQR's (cause velocity is given as a vector, and I need it's magnitude) so when 10 objects are hugging each other (...) I'm afraid it might come at a cost.... :/<br><br>d. <br><br></td></tr></table><br>
<a name="712631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#165">[#165]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know of any other way to do it on a single body, but collision depth should be plenty accurate for returning collision forces to filter out the minor 'bumps'. You just need to scale the depth values accordingly. Of course, if you're going to change the surface layer depth then the entire simulation will change too, not just depth values.<br><br>The amount objects penetrate each other is incredibly small and it's normal behaviour, it depends on the mass, speed and the properties of the body (soft/hard etc). Adjusting the time stepping will result in higher accuracy which could affect the depth results, but again you just need to scale them as required. <br><br></td></tr></table><br>
<a name="712688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#166">[#166]</a></td></tr></table></td></tr><tr ><td class="posttext"> I used somthing similar in eariler version of JV ODE.<br>Doing ten sqrt are not going to hurt at all.<br>8)<br><br>If you outline what it is your hoping to do we can help, and forgive me if I missed it in and earlier post. I only had time for the following bit.<br><br>(Hi Vip3r , great to see you).<br><br>I think your on the right track Dan.<br>Here is a code fragment that may help, or not.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; Get linear velocity vector
ax#=dBodyGetLinearVelX#(ode\body)
ay#=dBodyGetLinearVelY#(ode\body)
az#=dBodyGetLinearVelZ#(ode\body)

; Get Angular velocity vector
bx#=dBodyGetAngularVelX#(ode\body)
by#=dBodyGetAngularVelY#(ode\body)
bz#=dBodyGetAngularVelZ#(ode\body)
						
; Calculate magnitudes
ForceA#=Sqr(ax*ax+ay*ay+az*az)
ForceB#=Sqr(bx*bx+by*by+bz*bz)
						
; Check for sudden linear change in velocity.
If (LastForceA#-forceA#)&gt;limit Then
	;what ever you want here
End If

; Check for sudden Angular change in velocity.
If (LastForceB#-forceB#)&gt;limit Then
	;what ever you want here
End If

; Save this frame
LastForceA#=forceA#
LastForceA#=forceB#

</textarea> <br><br></td></tr></table><br>
<a name="712722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#167">[#167]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks wayne,<br>Yes that's what it comes down to, similar to the break joints idea.<br>10 Sqrs is no problem, but I've also got pathfinding and real-time vertexlighting and some other things going on at the same time, so I've already had to make some 'load balancing systems' on each of those things to prevent sqr's killing my game! :)<br>It's funny how that 1 single sqr function has always been a thorn in the eye for as long as I've been programming :)<br>I was hoping some internal ODE function could give me the same result and expecting since that was done in C++ it would be more effecient than using my own code...<br><br>I would like to know the impact force in order to do things like:<br>- Have a ragdoll (litterally) lose an arm when his arm gets hit with a great force &gt; x..<br>- Have a ragdoll NOT lose his arm when the force is NOT big enough, and simply get some damage..<br>- Create sound effects based on objects falling or bumping into each other..<br>- Create particle effects when certain objects collide at a certain force or more..<br>- break/explode objects if they fall or are hit with a certain force.<br><br>That sort of thing :)<br>But I think the above should work, so I'm gonna do some tests and think this will work - and stay reliable on different systems (ie. fast/faster computers)...<br><br>@Viper, you're right in what you say, but I don't know enough about the simulator and how it behaves on different computer specs in such a way that the values returns are within a constant range. For example, should I decide at some point to tweak my simulator, then ALL these 'penetration depth' values would chance as well! I need something that works on a constant scale so that a force of '5' or '25' is the same on every system in similar situations - if you know what I mean.<br><br>Thanks both! <br><br></td></tr></table><br>
<a name="712732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#168">[#168]</a></td></tr></table></td></tr><tr ><td class="posttext"> How's it going Wayne, good to see you  :)<br><br>@Danny: As long as the different spec machines can run your simulation at full design speed, there will be no differences in the physics regardless of depth values etc.<br><br>I would use Joint Feedback for the following in your list:<br><i>- Have a ragdoll lose an arm with a great force &gt; x<br>- Have a ragdoll NOT lose his arm when the force is NOT big enough<br>- break/explode objects if they fall or are hit with a certain force (when jointed)</i><br><br>You can try collision depth (or sudden velocity changes as you are now) for these:<br><i>- Create sound effects based on objects falling or bumping into each other<br>- Create particle effects when certain objects collide at a certain force or more<br>- break/explode objects if they fall or are hit with a certain force (when singular)</i><br><br>Collision depth would be much faster if it's suitable ;) <br><br></td></tr></table><br>
<a name="712870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#169">[#169]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dan, In case you missed this demo posted from and eariler thread I'll repeat it here.<br><br>Breakable joints<br><br>I cleaned up the code some, added comments.<br>Features dbodyGetForce, dbodyGetTorque, and timer based physics, mouse look, and rendering.<br><br>This should run at the same speed on most machines.<br>As always many ways to accomplish these things.<br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #									   JV-ODE - BreakMe Ragdoll Demo										#
; #									Code by Jim Williams (VIP3R)									#
; ###################################################################################################

AppTitle "JV-ODE - BreakMe Ragdoll Demo"

Include "JV-ODE.bb"

Graphics3D 800,600,0,2


Global RagDollMax=1

Dim Head(RagDollMax)
Dim BodyU(RagDollMax)
Dim BodyL(RagDollMax)
Dim LArmU(RagDollMax)
Dim LArmL(RagDollMax)
Dim RArmU(RagDollMax)
Dim RArmL(RagDollMax)
Dim LLegU(RagDollMax)
Dim LLegL(RagDollMax)
Dim RLegU(RagDollMax)
Dim RLegL(RagDollMax)
Dim LFoot(RagDollMax)
Dim RFoot(RagDollMax)

Dim RDJoint(RagDollMax,12)

Type ODEGeom
	Field body
	Field geom
	Field mesh
	Field mass
End Type

; ###################################################################################################

; ### Setup ODE


Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

Global BigG#=-0.98

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,BigG#,0)
dContactSetMode(dContactSlip1+dContactBounce)
dContactSetBounce(0.3)
dContactSetMu(48)
dWorldSetQuickStepNumIterations (World,20)	; default 20

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global Camera=CreateCamera()
CameraZoom Camera,1.0
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,20,20,-10
RotateEntity Camera,5,45,0


; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,150,80
Cls

Color 200,200,200

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Color 255,255,255

Mirror=CreateMirror()

; ###################################################################################################

CreateRagDoll(count)

block.ODEGeom=New ODEGeom
	x_pos#=-8
	y_pos#=15
	z_pos#=12
	width#=2
	length#=2
	depth#=2
	x_rot#=0
	y_rot#=0
	z_rot#=0
	weight#=100.0
	
	block\body=dBodyCreate(World)
	block\mass=dMassCreate()
	dMassSetBoxTotal(block\mass,weight, width, length, depth)
	dBodySetMass(block\body,block\mass)
	dBodySetPosition(block\body, x_pos, y_pos, z_pos)
	dBodySetRotation(block\body, x_rot, y_rot, z_rot)
	
	block\geom=dCreateBox(Space,width, length, depth)
	dGeomSetBody(block\geom,block\body)
	dGeomContactSetBounce(block\geom,0.5)
	set_object_friction(block,0.5,weight)
	dGeomContactSetMode(block\geom,dContactSlip1+dContactBounce)

	block\mesh=CreateCube()
	ScaleEntity block\mesh,width/2,length/2,depth/2
	
	seesaw.ODEGeom=New ODEGeom
	seesaw\mass=dMassCreate()
	x_pos#=-8
	y_pos#=5
	z_pos#=8
	width#=3
	length#=0.5
	depth#=15
	x_rot#=-20
	y_rot#=0
	z_rot#=0
	weight#=2.0
	
	seesaw\body=dBodyCreate(World)
	dMassSetBoxTotal(seesaw\mass,weight, width, length, depth)
	dBodySetMass(seesaw\body,seesaw\mass)
	dBodySetPosition(seesaw\body, x_pos, y_pos, z_pos)
	
	seesaw\geom=dCreateBox(Space,width, length, depth)
	dGeomSetBody(seesaw\geom,seesaw\body)
	dGeomContactSetBounce(seesaw\geom,0.5)
	set_object_friction(seesaw,0.5,weight)
	dGeomContactSetMode(seesaw\geom,dContactSlip1+dContactBounce)

	seesaw\mesh=CreateCube()
	; Blitz box lengths 2x longer than ODE box length
	ScaleEntity seesaw\mesh,width/2,length/2,depth/2
	dBodyDisable(seesaw\body)

	seesaw_joint=dJointCreateHinge(World,0)
	dJointAttach(seesaw_joint, seesaw\body, 0)
	dJointSetHingeAxis(seesaw_joint,1,0,0)
	dJointSetHingeAnchor(seesaw_joint,-8,4,8)
	dJointSetHingeParam(seesaw_joint,dParamLoStop,-dinfinity)
	dJointSetHingeParam(seesaw_joint,dParamHiStop,dinfinity)
	dBodySetRotation(seesaw\body, x_rot, y_rot, z_rot)
	

;===============================================================
; Render Loop

While Not KeyHit(1)

	; Calculate Time 
	If T=0 Then T=MilliSecs()
	T=MilliSecs() 
	
	;-----------------------------------------------------------
	; Mouse Look code
	
	; Poll Mouse Movement every 33ms ( 30/sec )
	If T &gt; Time2 + 33 Then
		Time2=T
		mxs#=mxs#+(MouseXSpeed()-mxs#)/3
		mys#=mys#+(MouseYSpeed()-mys#)/3
	
		If MouseDown(2) Then 
			MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
			p1#=p1#-mys#
			y1#=y1#-mxs#
			RotateEntity camera,-p1#,y1#,0
		EndIf
	EndIf	
	
	;----------------------------------------------------------
	; WSAD - Movement

	; W- Forward
	If KeyDown(17) Or KeyDown(200) Then
		MoveEntity camera,0,0,1
	EndIf
	; S- Reverse
	If KeyDown(31) Or KeyDown(208) Then
		MoveEntity camera,0,0,-1
	EndIf
	
	; A- Left
	If KeyDown(30) Or KeyDown(203) Then
		MoveEntity camera,-1,0,0
	EndIf
	; D- Right
	If KeyDown(32) Or KeyDown(205) Then
		MoveEntity camera,1,0,0
	EndIf
	
	
	;-----------------------------------------------
	; Physics
	;
	; Run Physics every 10ms ( 100 Times/sec )
	If T &gt; Time3 + 10 Then
		Time3=T	
		
		PTime=MilliSecs()
	
		UpdateGeoms()
	
		For x=1 To 2 ; Increase to speed up simulation
			dSpaceCollide(Space,World,ContactGroup)
				dWorldQuickStep(World,0.05)
				updatefriction()
			dJointGroupEmpty(ContactGroup)
		Next
	
		PhysicsTime#=MilliSecs()-PTime
		
	End If
    ;-----------------------------------------------
	; render world every 33ms ( 30 FPS )
	If T &gt; Time4 + 33 Then
		Time4=T
	RenderWorld
	EndIf	
	
	
	;-----------------------------------------------
	; Break joints for each body
	
	rd=0 			; Ragdoll id
	Jlimit#=250	; Joint Limit, hand tuned, larger limit resists breakage.
	JointLimits(Head(rd),Jlimit#) 
	JointLimits(BodyU(rd),Jlimit#)
	JointLimits(BodyL(rd),Jlimit#)
	JointLimits(LArmU(rd),Jlimit#)
	JointLimits(LArmL(rd),Jlimit#)
	JointLimits(RArmU(rd),Jlimit#)
	JointLimits(RArmL(rd),Jlimit#)
	JointLimits(LLegU(rd),Jlimit#)
	JointLimits(LLegL(rd),Jlimit#)
	JointLimits(RLegU(rd),Jlimit#)
	JointLimits(RLegL(rd),Jlimit#)
	JointLimits(LFoot(rd),Jlimit#)
	JointLimits(RFoot(rd),Jlimit#)
	
	Text 0,0,"Gravity="+Str(BigG#)
	Text 0,15,"Adjust Gravity - Mouse wheel"
	Text 0,30,"Reset - Space"
	Text 0,45,"Physics Time:"+PhysicsTime
		
	Flip

	; Adjust Gravity - mouse wheel
	BigG#=BigG#+(MouseZSpeed()/100.0)
	dWorldSetGravity(World,0,BigG#,0)
	
	;--------------------------------------------------------
	; Space - Resets See Saw, Jumper, block and drops it.
	If KeyHit(57)
	
		; Position See Saw
		x_pos#=-8
		y_pos#=5
		z_pos#=8
		x_rot#=-20
		y_rot#=0
		z_rot#=0
		dBodySetPosition(seesaw\body, x_pos, y_pos, z_pos)
		dBodySetRotation(seesaw\body, x_rot, y_rot, z_rot)
		dBodySetLinearVel(seesaw\body,0,0,0)
		dBodySetAngularVel(seesaw\body,0,0,0)
	 	dBodyDisable(seesaw\body)
		
		
		xp=-8
		yp=9
		zp=2
		; ### Position Head
	
		dBodySetRotation(Head(rd),0,0,0)
		dBodySetPosition(Head(rd),xp,yp,zp)
		dBodySetAutoDisableFlag(Head(rd),1)
		dBodySetLinearVel(Head(rd),0,0,0)
		dBodySetAngularVel(Head(rd),0,0,0)
		dBodySetForce(Head(rd),0,0,0)
		dBodySetTorque(Head(rd),0,0,0)
		dBodyDisable(Head(rd))
		
		; ### Position Body (Upper)
		
		dBodySetRotation(BodyU(rd),0,0,0)
		dBodySetPosition(BodyU(rd),xp,yp-1.25,zp)
		dBodySetAutoDisableFlag(BodyU(rd),1)
		dBodySetLinearVel(BodyU(rd),0,0,0)
		dBodySetAngularVel(BodyU(rd),0,0,0)
		dBodySetForce(BodyU(rd),0,0,0)
		dBodySetTorque(BodyU(rd),0,0,0)
		dBodyDisable(BodyU(rd))
		
		; ### Position Body (Lower)
		
		dBodySetRotation(BodyL(rd),0,0,0)
		dBodySetPosition(BodyL(rd),xp,yp-2.5,zp)
		dBodySetAutoDisableFlag(BodyL(rd),1)
		dBodySetLinearVel(BodyL(rd),0,0,0)
		dBodySetAngularVel(BodyL(rd),0,0,0)
		dBodySetForce(BodyL(rd),0,0,0)
		dBodySetTorque(BodyL(rd),0,0,0)
		dBodyDisable(BodyL(rd))
		
		; ### Position Left Arm (Upper)
		
		dBodySetRotation(LArmU(rd),90,0,0)
		dBodySetPosition(LArmU(rd),xp+1,yp-1.25,zp)
		dBodySetAutoDisableFlag(LArmU(rd),1)
		dBodySetLinearVel(LArmU(rd),0,0,0)
		dBodySetAngularVel(LArmU(rd),0,0,0)
		dBodySetForce(LArmU(rd),0,0,0)
		dBodySetTorque(LArmU(rd),0,0,0)
		dBodyDisable(LArmU(rd))
		
		; ### Position Left Arm (Lower)
		
		dBodySetRotation(LArmL(rd),90,0,0)
		dBodySetPosition(LArmL(rd),xp+1,yp-2.5,zp)
		dBodySetAutoDisableFlag(LArmL(rd),1)
		dBodySetLinearVel(LArmL(rd),0,0,0)
		dBodySetAngularVel(LArmL(rd),0,0,0)
		dBodySetForce(LArmL(rd),0,0,0)
		dBodySetTorque(LArmL(rd),0,0,0)
		dBodyDisable(LArmL(rd))
		
		; ### Position Right Arm (Upper)
		
		dBodySetRotation(RArmU(rd),90,0,0)
		dBodySetPosition(RArmU(rd),xp-1,yp-1.25,zp)
		dBodySetAutoDisableFlag(RArmU(rd),1)
		dBodySetLinearVel(RArmU(rd),0,0,0)
		dBodySetAngularVel(RArmU(rd),0,0,0)
		dBodySetForce(RArmU(rd),0,0,0)
		dBodySetTorque(RArmU(rd),0,0,0)
		dBodyDisable(RArmU(rd))
		
		; ### Position Right Arm (Lower)
		
		dBodySetRotation(RArmL(rd),90,0,0)
		dBodySetPosition(RArmL(rd),xp-1,yp-2.5,zp)
		dBodySetAutoDisableFlag(RArmL(rd),1)
		dBodySetLinearVel(RArmL(rd),0,0,0)
		dBodySetAngularVel(RArmL(rd),0,0,0)
		dBodySetForce(RArmL(rd),0,0,0)
		dBodySetTorque(RArmL(rd),0,0,0)
		dBodyDisable(RArmL(rd))
		
		; ### Position Left Leg (Upper)
		
		dBodySetRotation(LLegU(rd),90,0,0)
		dBodySetPosition(LLegU(rd),xp+0.5,yp-3.6,zp)
		dBodySetAutoDisableFlag(LLegU(rd),1)
		dBodySetLinearVel(LLegU(rd),0,0,0)
		dBodySetAngularVel(LLegU(rd),0,0,0)
		dBodySetForce(LLegU(rd),0,0,0)
		dBodySetTorque(LLegU(rd),0,0,0)
		dBodyDisable(LLegU(rd))
		
		; ### Position Left Leg (Lower)
		
		dBodySetRotation(LLegL(rd),90,0,0)
		dBodySetPosition(LLegL(rd),xp+0.5,yp-4.9,zp)
		dBodySetAutoDisableFlag(LLegL(rd),1)
		dBodySetLinearVel(LLegL(rd),0,0,0)
		dBodySetAngularVel(LLegL(rd),0,0,0)
		dBodySetForce(LLegL(rd),0,0,0)
		dBodySetTorque(LLegL(rd),0,0,0)
		dBodyDisable(LLegL(rd))
		
		; ### Position Right Leg (Upper)
		
		dBodySetRotation(RLegU(rd),90,0,0)
		dBodySetPosition(RLegU(rd),xp-0.5,yp-3.6,zp)
		dBodySetAutoDisableFlag(RLegU(rd),1)
		dBodySetLinearVel(RLegU(rd),0,0,0)
		dBodySetAngularVel(RLegU(rd),0,0,0)
		dBodySetForce(RLegU(rd),0,0,0)
		dBodySetTorque(RLegU(rd),0,0,0)
		dBodyDisable(RLegU(rd))
		
		; ### Position Right Leg (Lower)
		
		dBodySetRotation(RLegL(rd),90,0,0)
		dBodySetPosition(RLegL(rd),xp-0.5,yp-4.9,zp)
		dBodySetAutoDisableFlag(RLegL(rd),1)
		dBodySetLinearVel(RLegL(rd),0,0,0)
		dBodySetAngularVel(RLegL(rd),0,0,0)
		dBodySetForce(RLegL(rd),0,0,0)
		dBodySetTorque(RLegL(rd),0,0,0)
		dBodyDisable(RLegL(rd))
		
		; ### Position Left Foot
		
		dBodySetRotation(LFoot(rd),0,0,0)
		dBodySetPosition(LFoot(rd),xp+0.5,yp-5.7,zp-0.25)
		dBodySetAutoDisableFlag(LFoot(rd),1)
		dBodySetLinearVel(LFoot(rd),0,0,0)
		dBodySetAngularVel(LFoot(rd),0,0,0)
		dBodySetForce(LFoot(rd),0,0,0)
		dBodySetTorque(LFoot(rd),0,0,0)
		dBodyDisable(LFoot(rd))
		
		; ### Position Right Foot
		
		dBodySetRotation(RFoot(rd),0,0,0)
		dBodySetPosition(RFoot(rd),xp-0.5,yp-5.7,zp-0.25)
		dBodySetAutoDisableFlag(RFoot(rd),1)
		dBodySetLinearVel(RFoot(rd),0,0,0)
		dBodySetAngularVel(RFoot(rd),0,0,0)
		dBodySetForce(RFoot(rd),0,0,0)
		dBodySetTorque(RFoot(rd),0,0,0)
		dBodyDisable(RFoot(rd))
	
		x_pos#=-8
		y_pos#=15
		z_pos#=12
		x_rot#=0
		y_rot#=0
		z_rot#=0
		dBodySetPosition(block\body, x_pos, y_pos, z_pos)
		dBodySetRotation(block\body, x_rot, y_rot, z_rot)
		dBodySetLinearVel(block\body,0,0,0)
		dBodySetAngularVel(block\body,0,0,0)
	 	dBodyEnable(block\body)
	
		; Reconnect joints (in case we broke them)
		dJointAttach(RDJoint(rd,1),Head(rd),BodyU(rd))
		dJointAttach(RDJoint(rd,2),BodyU(rd),BodyL(rd))
		dJointAttach(RDJoint(rd,3),LArmU(rd),BodyU(rd))
		dJointAttach(RDJoint(rd,4),LArmL(rd),LArmU(rd))
		dJointAttach(RDJoint(rd,5),RArmU(rd),BodyU(rd))
		dJointAttach(RDJoint(rd,6),RArmL(rd),RArmU(rd))
		dJointAttach(RDJoint(rd,7),LLegU(rd),BodyL(rd))
		dJointAttach(RDJoint(rd,8),LLegL(rd),LLegU(rd))
		dJointAttach(RDJoint(rd,9),RLegU(rd),BodyL(rd))
		dJointAttach(RDJoint(rd,10),RLegL(rd),RLegU(rd))
		dJointAttach(RDJoint(rd,11),LFoot(rd),LLegL(rd))
		dJointAttach(RDJoint(rd,12),RFoot(rd),RLegL(rd))

		
	End If
Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function CreateRagDoll(rd)

xp=-8
yp=9
zp=2

; ### RagDoll Dimensions

headrad#=0.4
bodytx#=1.5
bodyty#=1.5
bodytz#=0.5
bodybx#=1.5
bodyby#=0.75
bodybz#=0.5
larmrad#=0.15
larmlen#=0.9
rarmrad#=0.15
rarmlen#=0.9
llegrad#=0.25
lleglen#=0.8
rlegrad#=0.25
rleglen#=0.8
feetx#=0.5
feety#=0.25
feetz#=1.0
weight#=1.0

; ### Create Head

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
Head(rd)=ode\body
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,yp,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateSphere(Space,headrad)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateSphere()
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,headrad,headrad,headrad
EntityColor ode\mesh,255,255,255
dBodyDisable(ode\body)


; ### Create Body (Upper)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
BodyU(rd)=ode\body
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,yp-1.25,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateBox(Space,bodytx,bodyty,bodytz)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,bodytx*0.5,bodyty*0.5,bodytz*0.5
EntityColor ode\mesh,0,200,200
dBodyDisable(ode\body)

; ### Create Body (Lower)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
BodyL(rd)=ode\body
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,yp-2.5,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateBox(Space,bodybx,bodyby,bodybz)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,bodybx*0.5,bodyby*0.5,bodybz*0.5
EntityColor ode\mesh,0,100,100
dBodyDisable(ode\body)

; ### Create Left Arm (Upper)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
LArmU(rd)=ode\body
dBodySetRotation(ode\body,90,0,0)
dBodySetPosition(ode\body,xp+1,yp-1.25,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateCCylinder(Space,larmrad,larmlen)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,larmrad,(larmlen*0.5)+larmrad,larmrad
RotateMesh ode\mesh,90,0,0
EntityColor ode\mesh,255,0,0
dBodyDisable(ode\body)

; ### Create Left Arm (Lower)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
LArmL(rd)=ode\body
dBodySetRotation(ode\body,90,0,0)
dBodySetPosition(ode\body,xp+1,yp-2.5,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateCCylinder(Space,larmrad,larmlen)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,larmrad,(larmlen*0.5)+larmrad,larmrad
RotateMesh ode\mesh,90,0,0
EntityColor ode\mesh,125,0,0
dBodyDisable(ode\body)

; ### Create Right Arm (Upper)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
RArmU(rd)=ode\body
dBodySetRotation(ode\body,90,0,0)
dBodySetPosition(ode\body,xp-1,yp-1.25,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateCCylinder(Space,rarmrad,rarmlen)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,rarmrad,(rarmlen*0.5)+rarmrad,rarmrad
RotateMesh ode\mesh,90,0,0
EntityColor ode\mesh,0,255,0
dBodyDisable(ode\body)

; ### Create Right Arm (Lower)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
RArmL(rd)=ode\body
dBodySetRotation(ode\body,90,0,0)
dBodySetPosition(ode\body,xp-1,yp-2.5,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateCCylinder(Space,rarmrad,rarmlen)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,rarmrad,(rarmlen*0.5)+rarmrad,rarmrad
RotateMesh ode\mesh,90,0,0
EntityColor ode\mesh,0,125,0
dBodyDisable(ode\body)

; ### Create Left Leg (Upper)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
LLegU(rd)=ode\body
dBodySetRotation(ode\body,90,0,0)
dBodySetPosition(ode\body,xp+0.5,yp-3.6,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateCCylinder(Space,llegrad,lleglen)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,llegrad,(lleglen*0.5)+llegrad,llegrad
RotateMesh ode\mesh,90,0,0
EntityColor ode\mesh,255,0,0
dBodyDisable(ode\body)

; ### Create Left Leg (Lower)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
LLegL(rd)=ode\body
dBodySetRotation(ode\body,90,0,0)
dBodySetPosition(ode\body,xp+0.5,yp-4.9,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateCCylinder(Space,llegrad,lleglen)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,llegrad,(lleglen*0.5)+llegrad,llegrad
RotateMesh ode\mesh,90,0,0
EntityColor ode\mesh,125,0,0
dBodyDisable(ode\body)

; ### Create Right Leg (Upper)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
RLegU(rd)=ode\body
dBodySetRotation(ode\body,90,0,0)
dBodySetPosition(ode\body,xp-0.5,yp-3.6,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateCCylinder(Space,rlegrad,rleglen)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,rlegrad,(rleglen*0.5)+rlegrad,rlegrad
RotateMesh ode\mesh,90,0,0
EntityColor ode\mesh,0,255,0
dBodyDisable(ode\body)

; ### Create Right Leg (Lower)

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
RLegL(rd)=ode\body
dBodySetRotation(ode\body,90,0,0)
dBodySetPosition(ode\body,xp-0.5,yp-4.9,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateCCylinder(Space,rlegrad,rleglen)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(8)
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,rlegrad,(rleglen*0.5)+rlegrad,rlegrad
RotateMesh ode\mesh,90,0,0
EntityColor ode\mesh,0,125,0
dBodyDisable(ode\body)

; ### Create Left Foot

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
LFoot(rd)=ode\body
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp+0.5,yp-5.7,zp-0.25)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateBox(Space,feetx,feety,feetz)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,feetx*0.5,feety*0.5,feetz*0.5
EntityColor ode\mesh,200,0,100
dBodyDisable(ode\body)

; ### Create Right Foot

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
RFoot(rd)=ode\body
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp-0.5,yp-5.7,zp-0.25)
dBodySetAutoDisableFlag(ode\body,1)
ode\mass=dMassCreate()
	dMassSetBoxTotal(ode\mass,weight, width, length, depth)
	dBodySetMass(ode\body,ode\mass)
ode\geom=dCreateBox(Space,feetx,feety,feetz)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
EntityPickMode ode\mesh,2
ScaleMesh ode\mesh,feetx*0.5,feety*0.5,feetz*0.5
EntityColor ode\mesh,100,200,0
dBodyDisable(ode\body)

; ### Static Joint To Head

;RDJoint(rd,0)=dJointCreateBall(World,0)
;dJointAttach(RDJoint(rd,0),0,Head(rd))
;dJointSetBallAnchor(RDJoint(rd,0),xp,yp,zp)

; ### Head To Body (Upper)

RDJoint(rd,1)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,1),Head(rd),BodyU(rd))
dJointSetHingeAxis(RDJoint(rd,1),1,0,0)
dJointSetHingeAnchor(RDJoint(rd,1),xp,yp-0.25,zp)
dJointSetHingeParam(RDJoint(rd,1),dParamLoStop,-0.5)
dJointSetHingeParam(RDJoint(rd,1),dParamHiStop,0.5)

; ### Body (Upper) To Body (Lower)

RDJoint(rd,2)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,2),BodyU(rd),BodyL(rd))
dJointSetHingeAxis(RDJoint(rd,2),1,0,0)
dJointSetHingeAnchor(RDJoint(rd,2),xp,yp-2,zp)
dJointSetHingeParam(RDJoint(rd,2),dParamLoStop,-0.25)
dJointSetHingeParam(RDJoint(rd,2),dParamHiStop,0.25)

; ### Left Arm (Upper) To Body (Upper)

RDJoint(rd,3)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,3),LArmU(rd),BodyU(rd))
dJointSetHingeAxis(RDJoint(rd,3),1,-1,0)
dJointSetHingeAnchor(RDJoint(rd,3),xp+1,yp-0.75,zp)
dJointSetHingeParam(RDJoint(rd,3),dParamLoStop,-2.0)
dJointSetHingeParam(RDJoint(rd,3),dParamHiStop,2.0)

; ### Left Arm (Lower) To Left Arm (Upper)

RDJoint(rd,4)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,4),LArmL(rd),LArmU(rd))
dJointSetHingeAxis(RDJoint(rd,4),1,0,0)
dJointSetHingeAnchor(RDJoint(rd,4),xp+1,yp-2,zp)
dJointSetHingeParam(RDJoint(rd,4),dParamLoStop,0.0)
dJointSetHingeParam(RDJoint(rd,4),dParamHiStop,2.0)

; ### Right Arm (Upper) To Body (Upper)

RDJoint(rd,5)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,5),RArmU(rd),BodyU(rd))
dJointSetHingeAxis(RDJoint(rd,5),1,1,0)
dJointSetHingeAnchor(RDJoint(rd,5),xp-1,yp-0.75,zp)
dJointSetHingeParam(RDJoint(rd,5),dParamLoStop,-2.0)
dJointSetHingeParam(RDJoint(rd,5),dParamHiStop,2.0)

; ### Right Arm (Lower) To Right Arm (Upper)

RDJoint(rd,6)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,6),RArmL(rd),RArmU(rd))
dJointSetHingeAxis(RDJoint(rd,6),1,0,0)
dJointSetHingeAnchor(RDJoint(rd,6),xp-1,yp-2,zp)
dJointSetHingeParam(RDJoint(rd,6),dParamLoStop,0.0)
dJointSetHingeParam(RDJoint(rd,6),dParamHiStop,2.0)

; ### Left Leg (Upper) To Body (Lower)

RDJoint(rd,7)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,7),LLegU(rd),BodyL(rd))
dJointSetHingeAxis(RDJoint(rd,7),1,0,0)
dJointSetHingeAnchor(RDJoint(rd,7),xp+1,yp-2.75,zp)
dJointSetHingeParam(RDJoint(rd,7),dParamLoStop,-1.0)
dJointSetHingeParam(RDJoint(rd,7),dParamHiStop,1.0)

; ### Left Leg (Lower) To Left Leg (Upper)

RDJoint(rd,8)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,8),LLegL(rd),LLegU(rd))
dJointSetHingeAxis(RDJoint(rd,8),1,0,0)
dJointSetHingeAnchor(RDJoint(rd,8),xp+1,yp-4.25,zp)
dJointSetHingeParam(RDJoint(rd,8),dParamLoStop,-2.0)
dJointSetHingeParam(RDJoint(rd,8),dParamHiStop,0.0)

; ### Right Leg (Upper) To Body (Lower)

RDJoint(rd,9)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,9),RLegU(rd),BodyL(rd))
dJointSetHingeAxis(RDJoint(rd,9),1,0,0)
dJointSetHingeAnchor(RDJoint(rd,9),xp-1,yp-2.75,zp)
dJointSetHingeParam(RDJoint(rd,9),dParamLoStop,-1.0)
dJointSetHingeParam(RDJoint(rd,9),dParamHiStop,1.0)

; ### Right Leg (Lower) To Right Leg (Upper)

RDJoint(rd,10)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,10),RLegL(rd),RLegU(rd))
dJointSetHingeAxis(RDJoint(rd,10),1,0,0)
dJointSetHingeAnchor(RDJoint(rd,10),xp-1,yp-4.25,zp)
dJointSetHingeParam(RDJoint(rd,10),dParamLoStop,-2.0)
dJointSetHingeParam(RDJoint(rd,10),dParamHiStop,0.0)

; ### Left Foot To Left Leg (Lower)

RDJoint(rd,11)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,11),LFoot(rd),LLegL(rd))
dJointSetHingeAxis(RDJoint(rd,11),1,0,0)
dJointSetHingeAnchor(RDJoint(rd,11),xp+1,yp-5.5,zp)
dJointSetHingeParam(RDJoint(rd,11),dParamLoStop,-0.25)
dJointSetHingeParam(RDJoint(rd,11),dParamHiStop,0.25)

; ### Right Foot To Right Leg (Lower)

RDJoint(rd,12)=dJointCreateHinge(World,0)
dJointAttach(RDJoint(rd,12),RFoot(rd),RLegL(rd))
dJointSetHingeAxis(RDJoint(rd,12),1,0,0)
dJointSetHingeAnchor(RDJoint(rd,12),xp-1,yp-5.5,zp)
dJointSetHingeParam(RDJoint(rd,12),dParamLoStop,-0.25)
dJointSetHingeParam(RDJoint(rd,12),dParamHiStop,0.25)

End Function
Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
;	If dBodyIsEnabled(ode\body)
		RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
		PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
;		End If
Next

End Function

; ###################################################################################################
Function set_object_friction(obj.ODEGeom,friction#,weight)
	friction=friction/100
	friction=friction
	friction=friction*4
	friction=4-friction
	e#=Log10(weight*10)
	e=e-friction
	e=1*(10^e)
	dGeomContactSetMu(obj\geom,e)
End Function

; ###################################################################################################
Function LinearDamp(body,damp#)
  dBodyAddForce body,dBodyGetLinearVelX(body)*-damp,dBodyGetLinearVelY(body)*-damp,dBodyGetLinearVelZ(body)*-damp
End Function
; ###################################################################################################

Function AngularDamp(body,damp#)
  dBodyAddTorque body,dBodyGetAngularVelX(body)*-damp,dBodyGetAngularVelY(body)*-damp,dBodyGetAngularVelZ(body)*-damp
End Function
; ###################################################################################################
Function JointLimits(body,limit#)

For ode.ODEGeom=Each ODEGeom
	If dGeomIsEnabled(ode\geom)
		If body=ode\body  ; specific body parts only
			numjoints=dBodyGetNumJoints(ode\body)
			If numjoints&gt;0 
				For joints=0 To numjoints-1
					joint=dBodyGetJoint(ode\body,joints)
						If joint&lt;&gt;0 ; valid joints only
							If dJointGetType(joint)&lt;&gt;dJointTypeContact
									; Get Force vector
									dBodyGetForce(joint)
								  	fx#=dVectorX()
								  	fy#=dVectorY()
								    fz#=dVectorZ()
								  	; Calculate magnitude
									ForceF#=Sqr(fx*fx+fy*fy+fz*fz)

								
									; Get Torque vector
									dBodyGetTorque(joint)
								  	fx#=dVectorX()
								  	fy#=dVectorY()
								    fz#=dVectorZ()
									; Calculate magnitude
									ForceT#=Sqr(fx*fx+fy*fy+fz*fz)

								
								; Check to see if joint limit exceeded
								If Abs(ForceF#)&gt;limit Or Abs(ForceT#)&gt;limit Then
									dJointAttach(joint,0,0)
									
									; Reduce body part energy due to break
									If ForceA&gt;.01
										LinearDamp(ode\body,.04)
									End If 
									
									If ForceB&gt;.01
										AngularDamp(ode\body,.04)
									End If
									
								End If
								
			
							End If

					End If
				Next
			End If
		End If
	End If
Next

End Function

; ###################################################################################################

Function UpdateFriction()

For ode.ODEGeom=Each ODEGeom
	; add friction force if body enabled  
	If dBodyIsEnabled(ode\body) And ode\body&lt;&gt;Car
		numjoints=dBodyGetNumJoints(ode\body)
		If numjoints&gt;0 
		;DebugLog "joints=" + Str(joints)
			For joints=0 To numjoints-1
				joint1=dBodyGetJoint(ode\body,joints)
				If dJointGetType(joint1)=dJointTypeContact
					
					; Get linear velocity vector
			  		ax#=dBodyGetLinearVelX#(ode\body)
			  		ay#=dBodyGetLinearVelY#(ode\body)
				    az#=dBodyGetLinearVelZ#(ode\body)
				
					; Get Angular velocity vector
			  		bx#=dBodyGetAngularVelX#(ode\body)
			  		by#=dBodyGetAngularVelY#(ode\body)
					bz#=dBodyGetAngularVelZ#(ode\body)
					
			  		; Calculate magnitudes
					ForceA#=Sqr(ax*ax+ay*ay+az*az)
					ForceB#=Sqr(bx*bx+by*by+bz*bz)
					
					If ForceA&gt;.01
						LinearDamp(ode\body,.04)
					End If
					
					If ForceB&gt;.01
						AngularDamp(ode\body,.04)
					End If
					
						
				End If
			Next
		End If
	End If
Next

End Function
</textarea> <br><br></td></tr></table><br>
<a name="712908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#170">[#170]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks viper, <br>I'll have a deeper look at playing with the collision depth.<br><br>@ Wayne, Yes i've played a lot (like, REALLY a LOT! :)) with those breakable joints! Simple but good fun!<br><br>d. <br><br></td></tr></table><br>
<a name="713068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#171">[#171]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi!<br><br>i just wanted to know how to weld to physic meshes...<br><br><img src="http://xware.chat-blitz.de/scripts/upload/Screen57.jpg"><br>^^ i have seen it in kODE, 4 legs added to the table. this is getting very close to polygon-to-poylgon physics.<br>but how to do that?<br>i tried to add a new geom to a body, but it didn't work :(... <br><br></td></tr></table><br>
<a name="713072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#172">[#172]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Devils Child: Not sure if I understand your question... but have you tried TriMesh?<br><br><br>QUESTION REGARDING ODE COLLISIONS:<br>I tried dGeomCollisionGeom, but there's no function for that? I also checked depth and collision position... but no luck.<br><br>Q) Is there a way to get the X/Y/Z of a collision point (so I could throw out some particles)? And how can I find out how big impact it was (so I could play sound and adjust the volume accordingly?) <br><br></td></tr></table><br>
<a name="713084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#173">[#173]</a></td></tr></table></td></tr><tr ><td class="posttext"> no, trimeshes are static!<br>i mean rigid bodies!<br><br>i tried to add two geoms to a body, but only the last one was acting like a physical mesh... <br><br></td></tr></table><br>
<a name="713106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#174">[#174]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Devils Child: You use Geom Transforms, included with JV-ODE are 3 demos showing how to use this feature.<br><br><div class="quote"> <br>I tried dGeomCollisionGeom, but there's no function for that?<br> <br></div><br>?<br><br><i>dGeom1CollisionGeom()</i> and <i>dGeom2CollisionGeom()</i><br><br>Check the 'Unique JV-ODE Functions &gt; Collision Functions' section of the JV-ODE Function Reference doc. The 'CarDemo-DetailedC' demo shows them in use.<br><br><div class="quote"> <br>Q) Is there a way to get the X/Y/Z of a collision point (so I could throw out some particles)? And how can I find out how big impact it was (so I could play sound and adjust the volume accordingly?)<br> <br></div><br>See above ^<br><br><i>dGeom1CollisionX() ..Y() ..Z()</i> and <i>dGeom2CollisionX() ..Y() ..Z()</i> <br><br></td></tr></table><br>
<a name="713122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#175">[#175]</a></td></tr></table></td></tr><tr ><td class="posttext"> sry, but i am still using the 0.5 beta because the lastest version above gets out of demo time after a minute.<br><br>i have commands like that:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">.lib "BlitzODE.dll"
ODE_dSetContactMode(mode%):"_ODE_dSetContactMode@4"
ODE_dSetMU(value#):"_ODE_dSetMU@4"
ODE_dSetMU2(value#):"_ODE_dSetMU2@4"
ODE_dSetBOUNCE(value#):"_ODE_dSetBOUNCE@4"
ODE_dSetBOUNCE_VEL(value#):"_ODE_dSetBOUNCE_VEL@4"
ODE_dSetSLIP1(value#):"_ODE_dSetSLIP1@4"
ODE_dSetSLIP2(value#):"_ODE_dSetSLIP2@4"
ODE_dSetSOFT_ERP(value#):"_ODE_dSetSOFT_ERP@4"
ODE_dSetSOFT_CFM(value#):"_ODE_dSetSOFT_CFM@4"
ODE_dSetMOTION1(value#):"_ODE_dSetMOTION1@4"
ODE_dSetMOTION2(value#):"_ODE_dSetMOTION2@4"

ODE_dBodyGetCollisionsCount%(body%):"_ODE_dBodyGetCollisionsCount@4"
ODE_dBodyGetCollisionDepth#(body%, num%):"_ODE_dBodyGetCollisionDepth@8"
ODE_dBodyGetCollisionX#(body%, num%):"_ODE_dBodyGetCollisionX@8"
ODE_dBodyGetCollisionY#(body%, num%):"_ODE_dBodyGetCollisionY@8"
ODE_dBodyGetCollisionZ#(body%, num%):"_ODE_dBodyGetCollisionZ@8"
ODE_dBodyGetCollisionNX#(body%, num%):"_ODE_dBodyGetCollisionNX@8"
ODE_dBodyGetCollisionNY#(body%, num%):"_ODE_dBodyGetCollisionNY@8"
ODE_dBodyGetCollisionNZ#(body%, num%):"_ODE_dBodyGetCollisionNZ@8"
ODE_dBodyGetCollisionBody%(body%, num%):"_ODE_dBodyGetCollisionBody@8"
ODE_dBodyGetCollisionGeom%(body%, num%):"_ODE_dBodyGetCollisionGeom@8"
ODE_dBodyGetCollisionFX#(body%, num%):"_ODE_dBodyGetCollisionFX@8"
ODE_dBodyGetCollisionFY#(body%, num%):"_ODE_dBodyGetCollisionFY@8"
ODE_dBodyGetCollisionFZ#(body%, num%):"_ODE_dBodyGetCollisionFZ@8"

ODE_dWorldCreate%(plane):"_ODE_dWorldCreate@4"
ODE_dWorldDestroy():"_ODE_dWorldDestroy@0"
ODE_dWorldSetGravity(x#, y#, z#):"_ODE_dWorldSetGravity@12"
ODE_dWorldSetERP(erp#):"_ODE_dWorldSetERP@4"
ODE_dWorldGetERP#():"_ODE_dWorldGetERP@0"
ODE_dWorldSetCFM(cfm#):"_ODE_dWorldSetCFM@4"
ODE_dWorldGetCFM#():"_ODE_dWorldGetCFM@0"
ODE_dWorldSetAutoDisableFlag(do_auto_disable%):"_ODE_dWorldSetAutoDisableFlag@4"
ODE_dWorldGetAutoDisableFlag%():"_ODE_dWorldGetAutoDisableFlag@0"
ODE_dWorldSetAutoDisableLinearThreshold(linear_threshold#):"_ODE_dWorldSetAutoDisableLinearThreshold@4"
ODE_dWorldGetAutoDisableLinearThreshold#():"_ODE_dWorldGetAutoDisableLinearThreshold@0"
ODE_dWorldSetAutoDisableAngularThreshold(linear_threshold#):"_ODE_dWorldSetAutoDisableAngularThreshold@4"
ODE_dWorldGetAutoDisableAngularThreshold#():"_ODE_dWorldGetAutoDisableAngularThreshold@0"
ODE_dWorldSetAutoDisableSteps(steps%):"_ODE_dWorldSetAutoDisableSteps@4"
ODE_dWorldGetAutoDisableSteps%():"_ODE_dWorldGetAutoDisableSteps@0"
ODE_dWorldSetAutoDisableTime(time#):"_ODE_dWorldSetAutoDisableTime@4"
ODE_dWorldGetAutoDisableTime#():"_ODE_dWorldGetAutoDisableTime@0"
ODE_dWorldImpulseToForce(stepsize#, ix#, iy#, iz#, fx#, fy#, fz#):"_ODE_dWorldImpulseToForce@28"
ODE_dCloseODE():"_ODE_dCloseODE@0"
ODE_dWorldStep(step#):"_ODE_dWorldStep@4"
ODE_dWorldQuickStep(step#):"_ODE_dWorldQuickStep@4"
ODE_dWorldSetQuickStepNumIterations(num%):"_ODE_dWorldSetQuickStepNumIterations@4"
ODE_dWorldGetQuickStepNumIterations%():"_ODE_dWorldGetQuickStepNumIterations@0"
ODE_dWorldSetContactMaxCorrectingVel(vel#):"_ODE_dWorldSetContactMaxCorrectingVel@4"
ODE_dWorldGetContactMaxCorrectingVel#():"_ODE_dWorldGetContactMaxCorrectingVel@0"
ODE_dWorldSetContactSurfaceLayer(depth#):"_ODE_dWorldSetContactSurfaceLayer@4"
ODE_dWorldGetContactSurfaceLayer#():"_ODE_dWorldGetContactSurfaceLayer@0"

ODE_dBodyCreate%():"_ODE_dBodyCreate@0"
ODE_dBodyDestroy(body%):"_ODE_dBodyDestroy@4"
ODE_dBodySetPosition(body%, x#, y#, z#):"_ODE_dBodySetPosition@16"
ODE_dBodySetRotation(body%, x#, y#, z#):"_ODE_dBodySetRotation@16"
ODE_dBodySetLinearVel(body%, x#, y#, z#):"_ODE_dBodySetLinearVel@16"
ODE_dBodySetAngularVel(body%, x#, y#, z#):"_ODE_dBodySetAngularVel@16"
ODE_dBodyGetPositionX#(body%):"_ODE_dBodyGetPositionX@4"
ODE_dBodyGetPositionY#(body%):"_ODE_dBodyGetPositionY@4"
ODE_dBodyGetPositionZ#(body%):"_ODE_dBodyGetPositionZ@4"
ODE_dBodyGetPitch#(body%):"_ODE_dBodyGetPitch@4"
ODE_dBodyGetYaw#(body%):"_ODE_dBodyGetYaw@4"
ODE_dBodyGetRoll#(body%):"_ODE_dBodyGetRoll@4"
ODE_dBodyGetLinearVelX#(body%):"_ODE_dBodyGetLinearVelX@4"
ODE_dBodyGetLinearVelY#(body%):"_ODE_dBodyGetLinearVelY@4"
ODE_dBodyGetLinearVelZ#(body%):"_ODE_dBodyGetLinearVelZ@4"
ODE_dBodyGetAngularVelX#(body%):"_ODE_dBodyGetAngularVelX@4"
ODE_dBodyGetAngularVelY#(body%):"_ODE_dBodyGetAngularVelY@4"
ODE_dBodyGetAngularVelZ#(body%):"_ODE_dBodyGetAngularVelZ@4"
ODE_dBodySetMass(body%, mass#):"_ODE_dBodySetMass@8"
ODE_dBodyTranslateMass(body%, x#, y#, z#):"_ODE_dBodyTranslateMass@16"
ODE_dBodyAddForce(body%, x#, y#, z#):"_ODE_dBodyAddForce@16"
ODE_dBodyAddTorque(body%, x#, y#, z#):"_ODE_dBodyAddTorque@16"
ODE_dBodyAddRelForce(body%, x#, y#, z#):"_ODE_dBodyAddRelForce@16"
ODE_dBodyAddRelTorque(body%, x#, y#, z#):"_ODE_dBodyAddRelTorque@16"
ODE_dBodyAddForceAtPos(body%, fx#, fy#, fz#, px#, py#, pz#):"_ODE_dBodyAddForceAtPos@28"
ODE_dBodyAddForceAtRelPos(body%, fx#, fy#, fz#, px#, py#, pz#):"_ODE_dBodyAddForceAtRelPos@28"
ODE_dBodyAddRelForceAtPos(body%, fx#, fy#, fz#, px#, py#, pz#):"_ODE_dBodyAddRelForceAtPos@28"
ODE_dBodyAddRelForceAtRelPos(body%, fx#, fy#, fz#, px#, py#, pz#):"_ODE_dBodyAddRelForceAtRelPos@28"
ODE_dBodyGetForceX#(body%):"_ODE_dBodyGetForceX@4"
ODE_dBodyGetForceY#(body%):"_ODE_dBodyGetForceY@4"
ODE_dBodyGetForceZ#(body%):"_ODE_dBodyGetForceZ@4"
ODE_dBodyGetTorqueX#(body%):"_ODE_dBodyGetTorqueX@4"
ODE_dBodyGetTorqueY#(body%):"_ODE_dBodyGetTorqueY@4"
ODE_dBodyGetTorqueZ#(body%):"_ODE_dBodyGetTorqueZ@4"
ODE_dBodySetForce(body%, x#, y#, z#):"_ODE_dBodySetForce@16"
ODE_dBodySetTorque(body%, x#, y#, z#):"_ODE_dBodySetTorque@16"
ODE_dBodyGetRelPointPosX#(body%, px#, py#, pz#):"_ODE_dBodyGetRelPointPosX@16"
ODE_dBodyGetRelPointPosY#(body%, px#, py#, pz#):"_ODE_dBodyGetRelPointPosY@16"
ODE_dBodyGetRelPointPosZ#(body%, px#, py#, pz#):"_ODE_dBodyGetRelPointPosZ@16"
ODE_dBodyGetRelPointVelX#(body%, px#, py#, pz#):"_ODE_dBodyGetRelPointVelX@16"
ODE_dBodyGetRelPointVelY#(body%, px#, py#, pz#):"_ODE_dBodyGetRelPointVelY@16"
ODE_dBodyGetRelPointVelZ#(body%, px#, py#, pz#):"_ODE_dBodyGetRelPointVelZ@16"
ODE_dBodyGetPointVelX#(body%, px#, py#, pz#):"_ODE_dBodyGetPointVelX@16"
ODE_dBodyGetPointVelY#(body%, px#, py#, pz#):"_ODE_dBodyGetPointVelY@16"
ODE_dBodyGetPointVelZ#(body%, px#, py#, pz#):"_ODE_dBodyGetPointVelZ@16"
ODE_dBodyGetPosRelPointX#(body%, px#, py#, pz#):"_ODE_dBodyGetPosRelPointX@16"
ODE_dBodyGetPosRelPointY#(body%, px#, py#, pz#):"_ODE_dBodyGetPosRelPointY@16"
ODE_dBodyGetPosRelPointZ#(body%, px#, py#, pz#):"_ODE_dBodyGetPosRelPointZ@16"
ODE_dBodyVectorToWorldX#(body%, px#, py#, pz#):"_ODE_dBodyVectorToWorldX@16"
ODE_dBodyVectorToWorldY#(body%, px#, py#, pz#):"_ODE_dBodyVectorToWorldY@16"
ODE_dBodyVectorToWorldZ#(body%, px#, py#, pz#):"_ODE_dBodyVectorToWorldZ@16"
ODE_dBodyVectorFromWorldX#(body%, px#, py#, pz#):"_ODE_dBodyVectorFromWorldX@16"
ODE_dBodyVectorFromWorldY#(body%, px#, py#, pz#):"_ODE_dBodyVectorFromWorldY@16"
ODE_dBodyVectorFromWorldZ#(body%, px#, py#, pz#):"_ODE_dBodyVectorFromWorldZ@16"
ODE_dBodyEnable(body%):"_ODE_dBodyEnable@4"
ODE_dBodyDisable(body%):"_ODE_dBodyDisable@4"
ODE_dBodyIsEnabled%(body%):"_ODE_dBodyIsEnabled@4"
ODE_dBodySetAutoDisableFlag(body%, do_auto_disable%):"_ODE_dBodySetAutoDisableFlag@8"
ODE_dBodyGetAutoDisableFlag%(body%):"_ODE_dBodyGetAutoDisableFlag@4"
ODE_dBodySetAutoDisableLinearThreshold(body%, linear_threshold#):"_ODE_dBodySetAutoDisableLinearThreshold@8"
ODE_dBodyGetAutoDisableLinearThreshold#(body%):"_ODE_dBodyGetAutoDisableLinearThreshold@4"
ODE_dBodySetAutoDisableAngularThreshold(body%, linear_threshold#):"_ODE_dBodySetAutoDisableAngularThreshold@8"
ODE_dBodyGetAutoDisableAngularThreshold#(body%):"_ODE_dBodyGetAutoDisableAngularThreshold@4"
ODE_dBodySetAutoDisableTime(body%, time#):"_ODE_dBodySetAutoDisableTime@8"
ODE_dBodyGetAutoDisableTime#(body%):"_ODE_dBodyGetAutoDisableTime@4"
ODE_dBodySetAutoDisableDefaults(body%):"_ODE_dBodySetAutoDisableDefaults@4"
ODE_dBodySetFiniteRotationMode(body%, mode%):"_ODE_dBodySetFiniteRotationMode@8"
ODE_dBodyGetFiniteRotationMode%(body%):"_ODE_dBodyGetFiniteRotationMode@4"
ODE_dBodySetFiniteRotationAxis(body%, x#, y#, z#):"_ODE_dBodySetFiniteRotationAxis@16"
ODE_dBodyGetFiniteRotationAxisX#(body%):"_ODE_dBodyGetFiniteRotationAxisX@4"
ODE_dBodyGetFiniteRotationAxisY#(body%):"_ODE_dBodyGetFiniteRotationAxisY@4"
ODE_dBodyGetFiniteRotationAxisZ#(body%):"_ODE_dBodyGetFiniteRotationAxisZ@4"
ODE_dBodyGetNumJoints%(body%):"_ODE_dBodyGetNumJoints@4"
ODE_dBodyGetJoint%(body%, index%):"_ODE_dBodyGetJoint@8"
ODE_dBodySetGravityMode(body%, mode%):"_ODE_dBodySetGravityMode@8"
ODE_dBodyGetGravityMode%(body%):"_ODE_dBodyGetGravityMode@4"

ODE_dJointCreateBall%():"_ODE_dJointCreateBall@0"
ODE_dJointCreateHinge%():"_ODE_dJointCreateHinge@0"
ODE_dJointCreateSlider%():"_ODE_dJointCreateSlider@0"
ODE_dJointCreateUniversal%():"_ODE_dJointCreateUniversal@0"
ODE_dJointCreateHinge2%():"_ODE_dJointCreateHinge2@0"
ODE_dJointCreateFixed%():"_ODE_dJointCreateFixed@0"
ODE_dJointCreateAMotor%():"_ODE_dJointCreateAMotor@0"
ODE_dJointDestroy(joint%):"_ODE_dJointDestroy@4"
ODE_dJointAttach(joint%, body1%, body2%):"_ODE_dJointAttach@12"
ODE_dJointSetData(joint%, data*):"_ODE_dJointSetData@8"
ODE_dJointGetData(joint%, data*):"_ODE_dJointGetData@8"
ODE_dJointGetType%(joint%):"_ODE_dJointGetType@4"
ODE_dJointGetBody%(joint%, index%):"_ODE_dJointGetBody@8"
ODE_dAreConnected%(body1%, body2%):"_ODE_dAreConnected@8"
ODE_dAreConnectedExcluding%(body1%, body2%, joint_type%):"_ODE_dAreConnectedExcluding@12"
ODE_dJointSetBallAnchor(joint%, x#, y#, z#):"_ODE_dJointSetBallAnchor@16"
ODE_dJointGetBallAnchorX#(joint%):"_ODE_dJointGetBallAnchorX@4"
ODE_dJointGetBallAnchorY#(joint%):"_ODE_dJointGetBallAnchorY@4"
ODE_dJointGetBallAnchorZ#(joint%):"_ODE_dJointGetBallAnchorZ@4"
ODE_dJointGetBallAnchor2X#(joint%):"_ODE_dJointGetBallAnchor2X@4"
ODE_dJointGetBallAnchor2Y#(joint%):"_ODE_dJointGetBallAnchor2Y@4"
ODE_dJointGetBallAnchor2Z#(joint%):"_ODE_dJointGetBallAnchor2Z@4"
ODE_dJointSetHingeAnchor(joint%, x#, y#, z#):"_ODE_dJointSetHingeAnchor@16"
ODE_dJointSetHingeAxis(joint%, x#, y#, z#):"_ODE_dJointSetHingeAxis@16"
ODE_dJointGetHingeAnchorX#(joint%):"_ODE_dJointGetHingeAnchorX@4"
ODE_dJointGetHingeAnchorY#(joint%):"_ODE_dJointGetHingeAnchorY@4"
ODE_dJointGetHingeAnchorZ#(joint%):"_ODE_dJointGetHingeAnchorZ@4"
ODE_dJointGetHingeAnchor2X#(joint%):"_ODE_dJointGetHingeAnchor2X@4"
ODE_dJointGetHingeAnchor2Y#(joint%):"_ODE_dJointGetHingeAnchor2Y@4"
ODE_dJointGetHingeAnchor2Z#(joint%):"_ODE_dJointGetHingeAnchor2Z@4"
ODE_dJointGetHingeAxisX#(joint%):"_ODE_dJointGetHingeAxisX@4"
ODE_dJointGetHingeAxisY#(joint%):"_ODE_dJointGetHingeAxisY@4"
ODE_dJointGetHingeAxisZ#(joint%):"_ODE_dJointGetHingeAxisZ@4"
ODE_dJointGetHingeAngle#(joint%):"_ODE_dJointGetHingeAngle@4"
ODE_dJointGetHingeAngleRate#(joint%):"_ODE_dJointGetHingeAngleRate@4"
ODE_dJointSetSliderAxis(joint%, x#, y#, z#):"_ODE_dJointSetSliderAxis@16"
ODE_dJointGetSliderAxisX#(joint%):"_ODE_dJointGetSliderAxisX@4"
ODE_dJointGetSliderAxisY#(joint%):"_ODE_dJointGetSliderAxisY@4"
ODE_dJointGetSliderAxisZ#(joint%):"_ODE_dJointGetSliderAxisZ@4"
ODE_dJointGetSliderPosition#(joint%):"_ODE_dJointGetSliderPosition@4"
ODE_dJointGetSliderPositionRate#(joint%):"_ODE_dJointGetSliderPositionRate@4"
ODE_dJointSetUniversalAnchor(joint%, x#, y#, z#):"_ODE_dJointSetUniversalAnchor@16"
ODE_dJointSetUniversalAxis1(joint%, x#, y#, z#):"_ODE_dJointSetUniversalAxis1@16"
ODE_dJointSetUniversalAxis2(joint%, x#, y#, z#):"_ODE_dJointSetUniversalAxis2@16"
ODE_dJointGetUniversalAnchorX#(joint%):"_ODE_dJointGetUniversalAnchorX@4"
ODE_dJointGetUniversalAnchorY#(joint%):"_ODE_dJointGetUniversalAnchorY@4"
ODE_dJointGetUniversalAnchorZ#(joint%):"_ODE_dJointGetUniversalAnchorZ@4"
ODE_dJointGetUniversalAnchor2X#(joint%):"_ODE_dJointGetUniversalAnchor2X@4"
ODE_dJointGetUniversalAnchor2Y#(joint%):"_ODE_dJointGetUniversalAnchor2Y@4"
ODE_dJointGetUniversalAnchor2Z#(joint%):"_ODE_dJointGetUniversalAnchor2Z@4"
ODE_dJointGetUniversalAxis1X#(joint%):"_ODE_dJointGetUniversalAxis1X@4"
ODE_dJointGetUniversalAxis1Y#(joint%):"_ODE_dJointGetUniversalAxis1Y@4"
ODE_dJointGetUniversalAxis1Z#(joint%):"_ODE_dJointGetUniversalAxis1Z@4"
ODE_dJointGetUniversalAxis2X#(joint%):"_ODE_dJointGetUniversalAxis2X@4"
ODE_dJointGetUniversalAxis2Y#(joint%):"_ODE_dJointGetUniversalAxis2Y@4"
ODE_dJointGetUniversalAxis2Z#(joint%):"_ODE_dJointGetUniversalAxis2Z@4"
ODE_dJointSetHinge2Anchor(joint%, x#, y#, z#):"_ODE_dJointSetHinge2Anchor@16"
ODE_dJointSetHinge2Axis1(joint%, x#, y#, z#):"_ODE_dJointSetHinge2Axis1@16"
ODE_dJointSetHinge2Axis2(joint%, x#, y#, z#):"_ODE_dJointSetHinge2Axis2@16"
ODE_dJointGetHinge2AnchorX#(joint%):"_ODE_dJointGetHinge2AnchorX@4"
ODE_dJointGetHinge2AnchorY#(joint%):"_ODE_dJointGetHinge2AnchorY@4"
ODE_dJointGetHinge2AnchorZ#(joint%):"_ODE_dJointGetHinge2AnchorZ@4"
ODE_dJointGetHinge2Anchor2X#(joint%):"_ODE_dJointGetHinge2Anchor2X@4"
ODE_dJointGetHinge2Anchor2Y#(joint%):"_ODE_dJointGetHinge2Anchor2Y@4"
ODE_dJointGetHinge2Anchor2Z#(joint%):"_ODE_dJointGetHinge2Anchor2Z@4"
ODE_dJointGetHinge2Axis1X#(joint%):"_ODE_dJointGetHinge2Axis1X@4"
ODE_dJointGetHinge2Axis1Y#(joint%):"_ODE_dJointGetHinge2Axis1Y@4"
ODE_dJointGetHinge2Axis1Z#(joint%):"_ODE_dJointGetHinge2Axis1Z@4"
ODE_dJointGetHinge2Axis2X#(joint%):"_ODE_dJointGetHinge2Axis2X@4"
ODE_dJointGetHinge2Axis2Y#(joint%):"_ODE_dJointGetHinge2Axis2Y@4"
ODE_dJointGetHinge2Axis2Z#(joint%):"_ODE_dJointGetHinge2Axis2Z@4"
ODE_dJointGetHinge2Angle1#(joint%):"_ODE_dJointGetHinge2Angle1@4"
ODE_dJointGetHinge2Angle1Rate#(joint%):"_ODE_dJointGetHinge2Angle1Rate@4"
ODE_dJointGetHinge2Angle2Rate#(joint%):"_ODE_dJointGetHinge2Angle2Rate@4"
ODE_dJointSetFixed(joint%):"_ODE_dJointSetFixed@4"
ODE_dJointSetAMotorMode(joint%, mode%):"_ODE_dJointSetAMotorMode@8"
ODE_dJointGetAMotorMode%(joint%):"_ODE_dJointGetAMotorMode@4"
ODE_dJointSetAMotorNumAxes(joint%, num%):"_ODE_dJointSetAMotorNumAxes@8"
ODE_dJointGetAMotorNumAxes%(joint%):"_ODE_dJointGetAMotorNumAxes@4"
ODE_dJointSetAMotorAxis(joint%, anum%, rel%, x#, y#, z#):"_ODE_dJointSetAMotorAxis@24"
ODE_dJointGetAMotorAxisX#(joint%, anum%):"_ODE_dJointGetAMotorAxisX@8"
ODE_dJointGetAMotorAxisY#(joint%, anum%):"_ODE_dJointGetAMotorAxisY@8"
ODE_dJointGetAMotorAxisZ#(joint%, anum%):"_ODE_dJointGetAMotorAxisZ@8"
ODE_dJointGetAMotorAxisRel%(joint%, anum%):"_ODE_dJointGetAMotorAxisRel@8"
ODE_dJointSetAMotorAngle(joint%, anum%, angle#):"_ODE_dJointSetAMotorAngle@12"
ODE_dJointGetAMotorAngle#(joint%, anum%):"_ODE_dJointGetAMotorAngle@8"
ODE_dJointGetAMotorAngleRate#(joint%, anum%):"_ODE_dJointGetAMotorAngleRate@8"
ODE_dJointSetHingeParam(joint%, parameter%, value#):"_ODE_dJointSetHingeParam@12"
ODE_dJointSetSliderParam(joint%, parameter%, value#):"_ODE_dJointSetSliderParam@12"
ODE_dJointSetHinge2Param(joint%, parameter%, value#):"_ODE_dJointSetHinge2Param@12"
ODE_dJointSetUniversalParam(joint%, parameter%, value#):"_ODE_dJointSetUniversalParam@12"
ODE_dJointSetAMotorParam(joint%, parameter%, value#):"_ODE_dJointSetAMotorParam@12"
ODE_dJointGetHingeParam#(joint%, parameter%):"_ODE_dJointGetHingeParam@8"
ODE_dJointGetSliderParam#(joint%, parameter%):"_ODE_dJointGetSliderParam@8"
ODE_dJointGetHinge2Param#(joint%, parameter%):"_ODE_dJointGetHinge2Param@8"
ODE_dJointGetUniversalParam#(joint%, parameter%):"_ODE_dJointGetUniversalParam@8"
ODE_dJointGetAMotorParam#(joint%, parameter%):"_ODE_dJointGetAMotorParam@8"
ODE_dJointAddHingeTorque(joint%, torque#):"_ODE_dJointAddHingeTorque@8"
ODE_dJointAddUniversalTorques(joint%, torque1#, torque2#):"_ODE_dJointAddUniversalTorques@12"
ODE_dJointAddSliderForce(joint%, force#):"_ODE_dJointAddSliderForce@8"
ODE_dJointAddHinge2Torques(joint%, torque1#, torque2#):"_ODE_dJointAddHinge2Torques@12"
ODE_dJointAddAMotorTorques(joint%, torque0#, torque1#, torque2#):"_ODE_dJointAddAMotorTorques@16"

ODE_dGeomDestroy(geom%):"_ODE_dGeomDestroy@4"
ODE_dGeomSetBody(geom%, body%):"_ODE_dGeomSetBody@8"
ODE_dGeomSetPosition(geom%, x#, y#, z#):"_ODE_dGeomSetPosition@16"
ODE_dGeomSetRotation(geom%, x#, y#, z#):"_ODE_dGeomSetRotation@16"
ODE_dGeomGetPositionX#(geom%):"_ODE_dGeomGetPositionX@4"
ODE_dGeomGetPositionY#(geom%):"_ODE_dGeomGetPositionY@4"
ODE_dGeomGetPositionZ#(geom%):"_ODE_dGeomGetPositionZ@4"
ODE_dGeomGetPitch#(geom%):"_ODE_dGeomGetPitch@4"
ODE_dGeomGetYaw#(geom%):"_ODE_dGeomGetYaw@4"
ODE_dGeomGetRoll#(geom%):"_ODE_dGeomGetRoll@4"
ODE_dHashSpaceCreate%(space%):"_ODE_dHashSpaceCreate@4"
ODE_dSimpleSpaceCreate%(space%):"_ODE_dSimpleSpaceCreate@4"
ODE_dSpaceSetCleanup(space%, mode%):"_ODE_dSpaceSetCleanup@8"
ODE_dSpaceAdd(space%, geom%):"_ODE_dSpaceAdd@8"
ODE_dSpaceRemove(space%, geom%):"_ODE_dSpaceRemove@8"
ODE_dCreateBox%(space%, width#, height#, depth#, mass#):"_ODE_dCreateBox@20"
ODE_dCreateSphere%(space%, radius#, mass#):"_ODE_dCreateSphere@12"
ODE_dCreateCCylinder%(space%, radius#, height#, mass#):"_ODE_dCreateCCylinder@16"
ODE_dGeomTriMeshDataCreate%():"_ODE_dGeomTriMeshDataCreate@0"
ODE_dGeomTriMeshDataDestroy(data%):"_ODE_dGeomTriMeshDataDestroy@4"
ODE_dGeomTriMeshDataBuildSimple(data%, Vertices*, VertexCount%, Indices*, IndexCount%):"_ODE_dGeomTriMeshDataBuildSimple@20"
ODE_dCreateTriMesh%(space%, data%):"_ODE_dCreateTriMesh@8"</textarea> <br><br></td></tr></table><br>
<a name="713153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#176">[#176]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>sry, but i am still using the 0.5 beta because the lastest version above gets out of demo time after a minute.<br> <br></div><br>If you want support for BlitzODE I would suggest you request it from the author of BlitzODE.<br><br>The JV-ODE threads are <u><b>NOT</b></u> for general ODE support for folks who have no interest in JV-ODE. <br><br></td></tr></table><br>
<a name="713160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#177">[#177]</a></td></tr></table></td></tr><tr ><td class="posttext"> but isn't there any jv-ode version which has no time limit?? <br><br></td></tr></table><br>
<a name="713162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#178">[#178]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, the full version of JV-ODE.<br><br>Check the 'Readme.txt' in the docs folder of the demo version. <br><br></td></tr></table><br>
<a name="713165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#179">[#179]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, since i am programming an open source physic engine based on blitzODE i cannot use jv-ode because it couldn't be open source any longer....<br><br>thank you anyway :)<br>bye <br><br></td></tr></table><br>
<a name="713173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#180">[#180]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>THREAD 7 IS ABOUT TO CLOSE</b><br><br>Please continue on the new thread located <a href="/posts.php?topic=63898" target="_blank">here</a><br><br>Thanks :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
