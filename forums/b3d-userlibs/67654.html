<!DOCTYPE html><html lang="en" ><head ><title >ODE Problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ODE Problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >ODE Problem</a><br><br>
<a name="755805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm just beginning with ODE, currently using DC's wrapper/samples release. In my scene there's some kind of pendulum that may be pushed. This works well so far, there's only one problem: The pendulum is swinging way too long time. What I needed was some kind of soft brake that would stop it earlier. Probably it has something to do with axial friction ?<br><br>The function is using ODE_dJointCreateBall() and ODE_dJointAttach to link the parts of the pendulum. How to make this stop swinging earlier? <br><br>Thanks. <br><br></td></tr></table><br>
<a name="755810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not familiar with "DC's wrapper", but I can imagine you can GET the current angular force on the pendulum as well as SET the angular force. With that you can add your own sort of dampening like this:<br><br> dampfactor# = 0.99   ; the lower the value, the more/quicker it will slow down<br> force# = GetangularForce#(pendulum)<br> force# = force# * dampfactor#<br> SetAngularForce pendulum, force#<br><br>if you drift my catch...<br><br>d. <br><br></td></tr></table><br>
<a name="755820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. I see there's ODE_dBodyGetForceX and ODE_dBodyGetTorqueX/y/z, probably they would work for something like what you said.<br><br>Although, I would rather like a global setting command, like<br>ODE_dSetBounce() etc. There's a group of global settings commands, I just don't know which one and what parameters. <br><br></td></tr></table><br>
<a name="755830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah.. right from the ode wiki thingy page FAQ:<br>"# 3.16 How do I stop things from rolling off into infinity, or pendulums from swinging forever?":<a href="http://opende.sourceforge.net/wiki/index.php/FAQ#How_do_I_stop_things_from_rolling_off_into_infinity.2C_or_pendulums_from_swinging_forever.3F" target="_blank"> click here </a><br><br>So it seems your suggestion is the only way to solve the problem :/ I just tried this with getForce as well as with GetTorque, but for some scary reason there's absolutely no reaction.<br><br>I am using in 2 nested FOR loops (x and y):<br><br>pm2.PhysicMesh = Object.PhysicMesh(towelSeg(x,y))<br>xforce#=-ODE_dGetBodyForceX#(pm2\body)*0.01<br>the same for y and z<br>ODE_dBodyAddForce(pm2\body, xforce, yforce, zforce)<br><br>Is there anything missing?<br><br>EDIT<br>Grrr! Wasted several hours now, trying to find out why it doesn't work. Code seems to be ok, simply no reaction.<br><br>EDIT2<br>AAH! Seems like finally it's working, kind of. But I had to use the commands:<br>ODE_dBodyGetAngularVelX/y/z and ODE_dBodySetAngularVel<br>instead. Tho, I still cannot control the swing sustaing directly, that's strange. <br><br></td></tr></table><br>
<a name="755906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes it's a bit disapointing you can't set the friction on joints. I was trying to do the exact same thing myself last week.<br><br>Also be warned that the amount of dampening you apply should also be multiplied by some delta-time factor! Else it will behave very differently on different types of systems. <br><br>Also add mass to the bodies in your chain/pendulum to give a more realistic behaviour - else it will almost look like they're floating in zero-gravity.<br><br>AND what also seriously affects it ofcourse is how (much) you update the simulator every frame. The wrong setting would make it slow and unrealistic - OR make it way too fast and start shaking..<br><br>Using the autoDisable options in ODE you can also tweak 'when' the pendulum/chain should evently 'stop' moving (dBodySetAutoDisableLinearThreshold and dBodySetAutoDisableAngularThreshold) - since you want it to come to rest nearly 'as soon as possible' but when the pendulum is coming to a stop you want to make sure it's hanging dead-straight, in stead of at a dodgy angle. <br><br>One advantage of using the Velocity functions (angular/linearVelocity) in stead of the Force functions is that the bodies keep their internal momentum. So if an external body should collide with the chain/pendulum, it will react properly...<br><br>Hope this helps,<br>Danny.<br>d. <br><br></td></tr></table><br>
<a name="755910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi. Thanks for the input. <br>Well it's about a curtain, to be exact. A grid of 10*10 Segements. For test purposes these are Cube objects, linked in ball mode. So I guess I'd rather have to use angular functions than the "linear" ones. Unfortunately this makes the whole curtain much more sluggish, heavy. Like a grid of lead bocks.<br><br>The idea is a lightweight curtain that reacts on wind.<br><br>When I set the mass to something very low, under 1.0, then there are strange errors.<br><br>EDIT<br>I think I got it. I'm using a combination of dampening of ODE_dBodySetAngularVel and ODE_dBodySetLinearVel, multiplied by 0.99 each frame. That's looking pretty good. Kind of: Angular friction plus Air resistance from the LinearVel.<br><br>Again, thank you. <br><br></td></tr></table><br>
<a name="755927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What you could try is to ONLY add mass to the BOTTOM row of 10 cubes in the curtain grid. And let them 'pull the others taunt' and eventually to a rest using the autodisable options. I use a similar trick on my ragdolls where for example only the hands have mass, whilst the upper/lower arms haven't. This gives me a nicer / more realistic effect when arms (or legs) are flapping about :)<br><br>But this way you might only have to deal with 10 objects in stead of 100 objects. If that works, perhaps you could even do 'every other' cube ie. only have to deal with 5 objects ???<br><br>Haven't done heavy cloth-like tricks like this before so I'm very curious how you get along and can get this to work nicely..<br><br>danny. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
