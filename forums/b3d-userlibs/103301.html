<!DOCTYPE html><html lang="en" ><head ><title >Blitz3D &lt;&gt; HardWired/Hybrid (DX9/11) Setup &amp; Info</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitz3D &lt;&gt; HardWired/Hybrid (DX9/11) Setup &amp; Info</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >Blitz3D &lt;&gt; HardWired/Hybrid (DX9/11) Setup &amp; Info</a><br><br>
<a name="1242484"></a>

<a name="1242486"></a>

<a name="1242488"></a>

<a name="1242489"></a>

<a name="1242497"></a>

<a name="1242499"></a>

<a name="1262194"></a>

<a name="1262196"></a>

<a name="1262198"></a>

<a name="1262199"></a>

<a name="1262200"></a>

<a name="1262201"></a>

<a name="1262203"></a>

<a name="1262204"></a>

<a name="1262205"></a>

<a name="1262206"></a>

<a name="1262208"></a>

<a name="1262209"></a>

<a name="1262210"></a>

<a name="1262211"></a>

<a name="1262212"></a>

<a name="1262213"></a>

<a name="1262217"></a>

<a name="1262218"></a>

<a name="1262219"></a>

<a name="1262220"></a>

<a name="1262221"></a>

<a name="1262222"></a>

<a name="1262223"></a>

<a name="1262224"></a>

<a name="1262225"></a>

<a name="1262226"></a>

<a name="1262228"></a>

<a name="1262230"></a>

<a name="1262231"></a>

<a name="1262232"></a>

<a name="1262234"></a>

<a name="1262236"></a>

<a name="1262238"></a>

<a name="1262240"></a>

<a name="1262241"></a>

<a name="1262247"></a>

<a name="1262249"></a>

<a name="1262264"></a>

<a name="1262265"></a>

<a name="1262276"></a>

<a name="1262277"></a>

<a name="1262278"></a>

<a name="1262279"></a>

<a name="1262280"></a>

<a name="1262281"></a>

<a name="1262301"></a>

<a name="1262305"></a>

<a name="1262348"></a>

<a name="1262349"></a>

<a name="1262350"></a>

<a name="1262351"></a>

<a name="1262352"></a>

<a name="1262353"></a>

<a name="1262354"></a>

<a name="1262355"></a>

<a name="1262356"></a>

<a name="1262357"></a>

<a name="1262358"></a>

<a name="1262359"></a>

<a name="1262360"></a>

<a name="1263264"></a>

<a name="1263265"></a>

<a name="1263266"></a>

<a name="1263267"></a>

<a name="1263268"></a>

<a name="1263269"></a>

<a name="1263271"></a>

<a name="1263272"></a>

<a name="1263274"></a>

<a name="1263276"></a>

<a name="1263277"></a>

<a name="1263279"></a>

<a name="1263282"></a>

<a name="1263283"></a>

<a name="1263284"></a>

<a name="1263366"></a>

<a name="1263368"></a>

<a name="1263369"></a>

<a name="1263370"></a>

<a name="1263371"></a>

<a name="1263372"></a>

<a name="1263375"></a>

<a name="1263376"></a>

<a name="1263377"></a>

<a name="1263378"></a>

<a name="1263379"></a>

<a name="1263380"></a>

<a name="1263381"></a>

<a name="1263382"></a>

<a name="1264459"></a>

<a name="1264460"></a>

<a name="1264461"></a>

<a name="1264462"></a>

<a name="1264464"></a>

<a name="1264466"></a>

<a name="1264467"></a>

<a name="1264468"></a>

<a name="1264469"></a>

<a name="1264471"></a>

<a name="1264472"></a>

<a name="1264473"></a>

<a name="1264475"></a>

<a name="1264476"></a>

<a name="1264477"></a>

<a name="1264478"></a>

<a name="1264479"></a>

<a name="1264481"></a>

<a name="1264483"></a>

<a name="1264484"></a>

<a name="1264485"></a>

<a name="1264486"></a>

<a name="1264488"></a>

<a name="1264490"></a>

<a name="1264491"></a>

<a name="1264493"></a>

<a name="1264494"></a>

<a name="1264496"></a>

<a name="1264497"></a>

<a name="1264498"></a>

<a name="1264499"></a>

<a name="1264501"></a>

<a name="1264506"></a>

<a name="1264508"></a>

<a name="1264509"></a>

<a name="1264510"></a>

<a name="1264561"></a>

<a name="1264562"></a>

<a name="1265159"></a>

<a name="1265160"></a>

<a name="1265164"></a>

<a name="1265165"></a>

<a name="1265168"></a>

<a name="1265291"></a>

<a name="1265292"></a>

<a name="1265293"></a>

<a name="1265294"></a>

<a name="1265295"></a>

<a name="1265296"></a>

<a name="1265297"></a>

<a name="1265298"></a>

<a name="1265299"></a>

<a name="1265300"></a>

<a name="1265301"></a>

<a name="1265302"></a>

<a name="1265303"></a>

<a name="1265304"></a>

<a name="1265305"></a>

<a name="1265306"></a>

<a name="1265307"></a>

<a name="1265308"></a>

<a name="1265309"></a>

<a name="1265310"></a>

<a name="1265311"></a>

<a name="1265312"></a>

<a name="1265313"></a>

<a name="1265314"></a>

<a name="1265315"></a>

<a name="1265316"></a>

<a name="1265317"></a>

<a name="1265318"></a>

<a name="1265319"></a>

<a name="1265320"></a>

<a name="1265321"></a>

<a name="1265322"></a>

<a name="1265323"></a>

<a name="1265324"></a>

<a name="1265325"></a>

<a name="1265326"></a>

<a name="1265445"></a>

<a name="1265462"></a>

<a name="1265463"></a>

<a name="1265464"></a>

<a name="1265465"></a>

<a name="1265513"></a>

<a name="1265514"></a>

<a name="1265515"></a>

<a name="1265516"></a>

<a name="1265517"></a>

<a name="1265539"></a>

<a name="1265540"></a>

<a name="1265541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> For the new people a small explanation/installation instruction may be in order, so..<br><pre class=code>
******************************************************************************************************************************************
*       The Un-Official:                                                                                                                 *
*                                                                                                                                        *
*       ##  ##  ###  ####   ####  ##    ## ## ####   #### ####      ## ##  ## ##  ## ####  ####   ## ####         ####  ###   ###   ###  *
*       ##  ## ## ## ## ##  ## ## ##    ## ## ## ##  ##   ## ##    ##  ##  ## ##  ## ## ## ## ##  ## ## ##        ##   ## ## ## ##  ###  *
*  ###  ##  ## ## ## ## ##  ## ## ##    ## ## ## ##  ##   ## ##   ##   ##  ## ##  ## ## ## ## ##  ## ## ##  ###   ##   ## ## ## ##       *
*  ###  ###### ##### ####   ## ## ## ## ## ## ####   #### ## ##  ##    ######  ##### ####  ####   ## ## ##  ###   #### ##### ## ##       *
*       ##  ## ## ## ## ##  ## ## ######## ## ## ##  ##   ## ## ##     ##  ##     ## ## ## ## ##  ## ## ##        ##   ## ## ## ##  ###  *
*       ##  ## ## ## ##  ## ####   ##  ##  ## ##  ## #### #### ##      ##  ##  ####  ####  ##  ## ## ####         ##   ## ##  ###   ###  *
*                                                                                                                               ##       *   
*                                                                                       © Ploppy 2014-2015                               *
******************************************************************************************************************************************
</pre> <br><br></td></tr></table><br>
<a name="1265542"></a>

<a name="1265543"></a>

<a name="1274086"></a>

<a name="1274087"></a>

<a name="1274088"></a>

<a name="1274089"></a>

<a name="1274090"></a>

<a name="1274091"></a>

<a name="1274092"></a>

<a name="1274093"></a>

<a name="1274094"></a>

<a name="1274095"></a>

<a name="1274096"></a>

<a name="1274097"></a>

<a name="1274098"></a>

<a name="1274099"></a>

<a name="1274100"></a>

<a name="1274101"></a>

<a name="1274102"></a>

<a name="1274103"></a>

<a name="1274104"></a>

<a name="1274105"></a>

<a name="1274106"></a>

<a name="1274107"></a>

<a name="1274108"></a>

<a name="1274109"></a>

<a name="1274110"></a>

<a name="1274111"></a>

<a name="1274112"></a>

<a name="1274113"></a>

<a name="1274114"></a>

<a name="1274115"></a>

<a name="1274116"></a>

<a name="1274117"></a>

<a name="1274118"></a>

<a name="1274119"></a>

<a name="1274120"></a>

<a name="1274121"></a>

<a name="1274122"></a>

<a name="1274123"></a>

<a name="1274125"></a>

<a name="1274126"></a>

<a name="1274127"></a>

<a name="1274128"></a>

<a name="1274130"></a>

<a name="1274133"></a>

<a name="1274134"></a>

<a name="1274135"></a>

<a name="1274136"></a>

<a name="1274137"></a>

<a name="1274138"></a>

<a name="1274139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b><i>1 - What is Hardwired/Hybrid?</i></b><br><br>Hardwired/Hybrid is <a href="https://www.facebook.com/BlitzHardwired" target="_blank">Ploppy's</a> hugely ambitious go at a more modern an up to date version of Blitz3D(DX7) and more. Basically it's the long awaited, wished for overhaul and extension to it, which brings in DX9, DX11 and lots of aditional stuff such as currently, PhysX. Aim is also to make Blitz more easily updatable so it retains compatibility with future versions of DX to come. Also the possibility of a 64bit version is currently being investigated/prepared.<br><br><br><b><i>2 - What is the difference between Hardwired and Hybrid / How to setup?</i></b><br><br><b>Hardwired</b> is an extension to standard Blitz3, BlitzPlus (and even BlitzMax)in the form of a DLL that needs to be put in the Blitz userlibs folder, together with the accompanying DECLS file. E.g for Windows 7 x64, the "hardwired.decls" and "hardwired.dll" files go in here: "C:\Program Files (x86)\Blitz3D\userlibs"<br>The Hardwired commands have a prefix of "dx" to distinguish between regular Blitz commands. Standard Blitz commands are still in place, along side the upgraded versions. The DLL has the advantage that it can be used by all languages that support this. There are initiatives for adding it to BlitzMax(see threads <a href="/post.php?topic=102259&amp;post=1227843" target="_blank">VI</a> and <a href="/posts.php?topic=103343" target="_blank">X</a>), but also people who have an interest for usage in Pure/Dark Basic. These spin-offs at the moment have a lower priority for Ploppy though. Once the project has been completed it's possible this will change.<br><br><b>Hybrid</b> is basically a merger of a reworked Blitz3D source, modernly recompiled overhauled, adjusted and extended with the functionality of Hardwired integrated. <br>For installation just take the "Hybrid" folder and place it where you like, such as: "C:\Program Files (x86)\Hybrid". It can live right beside the Blitz3d folder.<br><i>*)Note: it currently doesn't come with an installer yet, so if put in a system folder such as above, it could in some Windows versions(for instance Windows 7), lead to write permission issues.</i> <br>Hybrid commands do not have the "dx" prefix and programs have their own ".hb" extension. E.g: "test.hb"<br>UPDATE: A 64-bit version of Hybrid is currently in the makings(test version released). This was/is a very complex task for it requires converting the original Blitz3d x86 VS C++ code to more up to date version, recoding to x64, plus some reverse enginering of the assembly code the does the actual x86 compiling(for as far as I understood).<br><br><br><b><i>3 - Is it just another DLL extension?</i></b><br><br>It is not just a 'little addon', but rather a whole new world, which shows when you take a look at the already huge list of Hybrid commands*, which o.a. gives us:<br>-<a href="http://en.wikipedia.org/wiki/DirectX" target="_blank">DX9/DX11(possibly DX12 when released)</a>.<br>-<a href="http://en.wikipedia.org/wiki/Shader" target="_blank">Shaders</a>.<br>-Double precision calculations.<br>-NVidia's <a href="http://www.nvidia.com/object/physx-9.14.0702-driver.html" target="_blank">PhysX</a> engine.<br>-VideoPlayback via the <a href="http://www.videolan.org/vlc/libvlc.html" target="_blank">VLC dll</a>.<br>-Instancers.<br>-3D fonts.<br>-Shadows.<br>-Bones.<br>-Webcam capture.<br>-Touchscreen.<br>-Collisions.<br>-Linker directive(specify icon for final executable).  <br>-Particles.<br>-64bit variable types. Just as 32bits are defined by % for integer,# for floats and $ for ASCII strings, they are defined by: %%, ## and $$ for Unicode characters strings. See <a href="http://unicode-table.com/en/#control-character" target="_blank">Unicode character table</a>. Note: currently only in 3d mode(after a graphics3d command), the 2d commands still need conversion. <br>-Lots of additional stuff and fixes.<br>-GUI Menu commands from BlitzPlus.<br>-New text routines a la FastText.<br>-Gamepad module using XInput to use PC, Xbox controllers. For PS3 controllers see <a href="http://forums.pcsx2.net/Thread-XInput-Wrapper-for-DS3-and-Play-com-USB-Dual-DS2-Controller" target="_blank">here</a>.<br><br><br>*) List of commands and their functionality is not final and subject to change with or without notice from the author(Ploppy) as this is very much a work in progress with lots of development going on. Also the hardwired.dll contains more commands as there are a lot of reworked and upgraded standard blitz commands. Also note that some commands may be temporarily disabled for development purposes or not yet fully operational.<br><br><b>For a list of &gt;&gt;</b><a href="/logs/userlog.php?user=13255&amp;log=1897" target="_blank"><b>CURRENT COMMANDS and PLOPPY'S LATEST DOWNLOADS</b></a><b> &lt;&lt; click here.</b> <i><b> <br>Also:</b> *** If you want to support the brilliant author and can spare a dime, do not hesitate to reward him for his hard work(even small ammounts are welcome) ***<br><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&amp;business=phoebe8%40free%2efr&amp;lc=GB&amp;item_name=Blitz%20Hardwired&amp;currency_code=EUR&amp;bn=PP%2dDonationsBF%3abtn_donate_SM%2egif%3aNonHosted" target="_blank"> <img src="https://www.paypalobjects.com/en_GB/i/btn/btn_donate_SM.gif"></a> or like him on <a href="https://www.facebook.com/BlitzHardwired" target="_blank"> <img src="http://www.blitzbasic.com/img/facebook_24px.png"></a>.</i><br><br><br><b><u>System Requirements:</u></b> <br>- Window: XP, Vista, 7, Windows 8.X  (32 or 64bit)<br>- DirectX Capable GPU<br>- DirextX: <a href="http://www.microsoft.com/en-US/download/details.aspx?id=34429" target="_blank">DirectX 9.0c End-User Runtime </a> and for other versions: <a href="https://support.microsoft.com/en-us/kb/179113" target="_blank">How to install the latest version of DirectX</a><br>- For Hardwired(DLL version) <a href="/Account/produpdates.php" target="_blank">Blitz3D or BlitzPlus</a> (Hybrid is the standalone version, which doesn't need Blitz)<br>- VLC libraries(only required for video playback of all media types): <a href="http://chipmunkplayer.free.fr/libvlc.zip" target="_blank">libvlc 32bit</a><br><br><br><b><u>List of Forum Threads and Subjects:</u></b> <br><a href="/posts.php?topic=101477" target="_blank">Direct x 9 Userlib</a><br><a href="/posts.php?topic=101644" target="_blank">Blitz Hardwired - DirectX 9 Userlib (Part II)</a><br><a href="/posts.php?topic=101879" target="_blank">Blitz Hardwired - DirectX 9 Userlib (Part III)</a><br><a href="/posts.php?topic=102132" target="_blank">Blitz Hardwired - DirectX 9 Userlib (Part IV)</a><br><a href="/posts.php?topic=102148" target="_blank">Blitz Hardwired - DirectX 9 Userlib (Part V)</a><br><a href="/posts.php?topic=102259" target="_blank">Blitz Hardwired - DX9 and DX11 Userlib (Part VI)</a><br><a href="/posts.php?topic=102736" target="_blank">Blitz Hardwired - DX9 and DX11 Userlib (Part VII)</a><br><a href="/posts.php?topic=102831" target="_blank">Blitz Hardwired - DX9 and DX11 Userlib (Part VIII)</a><br><a href="/posts.php?topic=103056" target="_blank">Blitz Hardwired - DX9 and DX11 Userlib (Part IX)</a><br><a href="/posts.php?topic=103343" target="_blank">Blitz Hardwired - DX9 and DX11 Userlib (Part X)</a><br><a href="/posts.php?topic=103913" target="_blank">Blitz Hardwired - DX9 and DX11 Userlib (Part XI)</a><br><a href="/posts.php?topic=104443" target="_blank">Blitz Hardwired - DX9 and DX11 Userlib (Part XII):</a><br>- Hybrid Help and IDE.<br>- Various fixes <br>- B+ Gui command set introduction.<br>- <a href="http://www.hi-toro.com/monkey/hwmonkey.zip" target="_blank">Monkey DLL + stuff</a> by BlitzSupport.<br><a href="/posts.php?topic=104554" target="_blank">Blitz  Hardwired/Hybrid - DX9 and DX11 Userlib(Part XIII &lt;&lt;current):</a><br>- GUI Menus commands from BlitzPlus added.<br>- Work on x64 Hybrid.<br>- Adding new text routines.<br>- Added gamepad module using XInput.<br><br><br><b><u>Some more FAQ's:</b></u><br><br><b><i>4 - Is it free?</i></b><br><br>Yes. Ploppy stated it is and will be free.(Initial release at least. He's free to change is mind of course.)<br><br><br><b><i>5 - Is it open source/can I collaborate -help the author?</i></b><br><br>No and yes. Ploppy doesn't want this to be an open source collaborative project, but his own personal achievement. He has stated that if for some reason he has to give up, he will release the source to the community for someone else to pick it up. Not to worry though: Ploppy is very committed and not very likely to throw the towel into the ring. He likes feedback though from testers and is open to suggestions as long as reasonable. However please do not harass the guy with too many requests as it is a massive task already.<br><br><br><b><i>6 - How do I make use of the video playback feature?</i></b><br><br>Libvlc is a free library, available on <a href="http://www.videolan.org/" target="_blank">http://www.videolan.org/</a>, and is the core of the popular VLC Media Player. To be able to use this, you will need to <u>copy the files 'libvlc.dll' and 'libvlccore.dll' together with the whole of the plugins folder</u> (copy folder and its contents) from the installed libvlc folder <u>to your bb project folder</u>(for example where you unzipped the latest release: D:\Coding\Blitz\Release\ ) Please note that these files and folder are *not* to be copied to the userlibs folder, but to the folder where your compiled exe/blitz .bb file is located.<br><i>*)Note: I couldn't play any video until I copied the video file into the same directory as the release, but that may just be at my system.</i> <br><br>You'll have to install these files only in order to get the video functions to work. If you do not wish use these functions, the files do NOT need to be installed, and hardwired will behave as normal. If you use these funtions, and these files are not installed the video functions will not work, but should not stop your program from running otherwize.<br><br>*)Note: The 64bit version of VLC is not currently supported! To make the installation of the video capabilities of hardwired easier, Ploppy has supplied the libvlc 32-bit dll files in a separate zip file (28MB), if you wish you can download and extract the files directly to your bb app folder. This archive file includes *ONLY* the required dll files &amp; plugins folder, and not the whole VLC Media Player thing(handy if you already have the x64 version installed and don't want the 32bit also: <a href="http://chipmunkplayer.free.fr/libvlc.zip" target="_blank"> <b>Download libvlc 32bit</b></a><br><br><br><b><i>7 - Why can't I play audio in Hybrid?</i></b><br><br>The audio commands in Hybrid are not yet build in. Ploppy has to still decide on an audio library as the original build into Blitz3d requires a license, therefore he's looking for a free one. Several options are under review.<br>The Hardwired DLL, useable from Blitz3d does work with sound, for it's using the original Blitz3d routines. <br><br><br><b><i>8 - How do I use shader programming?</i></b><br><br>Shader programming is done through a specific GPU scripting language named HSL and apparently can be very powerful, but also kinda tricky.  In the examples there's a folder "release\samples\shaders" which contains examples. Here's a link that was provided by Ploppy regarding HSL:<br><a href="http://www.catalinzima.com/xna/tutorials/crash-course-in-hlsl/" target="_blank">http://www.catalinzima.com/xna/tutorials/crash-course-in-hlsl/</a><br><br><br><br>IMPORTANT: Hybrid's currently undergoing lots of changes as Ploppy is attempting to convert it to a 64-bit version, needless to say this takes quite a bit of time. Also it appears Hardwired or it's examples haven't been updated yet to the latest incarnations so a lot of examples may not run at the moment. This is a work in progress so may contain bugs and is subject to change. However the author is very committed to the task and will respond to bug reports, but please do take into account that he has a life besides Hardwired/Hybrid.<br><br><br><b><br><pre class=code>
------------------------------------------------------------------------------------------------------

 Below is my original post. Topic: Converting a 'little' :-) test program for Hardwired. 
 Updated code and including media (24.73MB) is available for <a href="https://www.mediafire.com/?7ydi3hyfbhg6qp2" target="_blank"> download here</a>, for those 
 interested in testing Hardwired/ Hybrid's compatibility with Blitz3d. Currently there 
 aren't extra Hardwired/Hybrid functionalities build into it appart from DX9/11 stuff. 
------------------------------------------------------------------------------------------------------
</pre><br></b> <br><br></td></tr></table><br>
<a name="1242491"></a>

<a name="1265538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> EDIT: The test program is now fully functional, since some updates ago. You can see the progress in development, reading the topics below.<br><br>Hi ya all(especially Ploppy),<br><br>I was perhaps a little overly enthusiastic and was trying to do a bit of code conversion from Blitz3D to HardWired.<br><br>To be specific: I wanted to convert some Planetary code of mine as a testbed for HardWired, but then I came across Krischan's excellent code(credits to him) and ditched my own as his code was far superior(of course: he's a genius). I just added and changed some minor things to it.<br><br>Now the thing is that it works just fine as Blitz3D code, but when I converted all commands needed, I'm getting a black screen and then a MAV.<br>If anybody has a clue what's wrong here I'd be happy to know, cos I tried a number of things, but no success yet.<br><br><br>Looks like this: <br><img src="http://i57.tinypic.com/f1jsdl.jpg"><br><br><br><br>2751(Interplanetary travel)9.bb (adapted)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

;
; Author: Krischan
; Date: 2010-08-08 07:08:10
; Title: Interplanetary travel
; Description: Calculates and shows interplanetary ship travel between two moving celestial bodies in 3D
;
; Adaptations: Rick Nasher  
; Date: 2014-09-10 23:11
;
; 
; 

AppTitle "Interplanetary Travel"

Graphics3D 1280,800,32,2
;Include "2622(homekeeping).bb"
;Include "include\DXIncludes.bb"
;Include "milkyway.bb"
;Global MILKYWAY%=InitMilkyway(5000  ,0.5  ,5        ,90       ,5    ,0    ,0    ,0    ,1     ,255  ,192  ,255  ,1      ,0    ,0    ,0    ,1)

; Example 1: Milkyway with 500 fixed stars, 80% up to 10° and 20% from 10° to 40°, red style, normal brightnessGlobal 
;Global MILKYWAY1=InitMilkyway(500,0.2,10,40,500,0,0,0,0,255,255,255,1,0,0,0,0)
SeedRnd MilliSecs()

.vars
; sun obstacle demo
;SeedRnd 6
Const GLSC=10, GLSCO=200 , GLSCM=1  ;Global Scale *GLSC 
Const MOONS			= 29			; number of moons to read
Const PLANETS		= 9				; number of planets to read
Const RANDOMIZE%	= True			; random positions on/off
Const DAYINC#		= 1.0/60/60		; time increment per cycle
Const YEAR#			= 365.256		; earth year in days
Const AVOIDSUNCROSS%= True			; avoid sun crossing trajectory yes/no
Const AVOIDINCDAYS% = 10			; days increment for new trajectory

Const START$		= "Moon"		; object to start at
;Const TARGET$		= "Pluto"     	; object to target
Const TARGET$		= "Jupiter"	    ; object to target
Const SHIPSPEED#	= 20*GLSC	        ; ship speed (Mio. km/Day) (normal = 20 / hispeed = 40 / c=1079.9)

Global WIDTH%=GraphicsWidth()		; screen width
Global HEIGHT%=GraphicsHeight()		; screen height
Global SPEED#=DAYINC*SHIPSPEED		; calculated ship speed
Global TIMER%=CreateTimer(60)		; timer
Global INFO%=True					; Text info flag
Global STOPPER%=False				; Ship arrival flag

Global S.System=New System

Global DAYS#,MAXDIST#,CALCTIME#,ZOOM#
Global CAM%,PLANETORBITS%,SUN%,SUN0%,SUN1%,SUN2%,SUN3%,TRACER%,SHIP%,STARTOBJECT%,TARGETOBJECT%
Global MASTERPIVOT%,SOLIDPIVOT%,WIREDPIVOT%,TARGETPIVOT%

Global REQOBJ$ ="Ship",REQSIZ#, camz2obj#=100,camy2obj#=7, CAMTARGET%, cam2ship=False, SHCAMPIV%, TEST%, Monolith%, firsttime=True


Type Moon
	Field id%,parent%,name$,radius#,period#,size#,r%,g%,b%,mnt$,rtp#,SPEED#,random%,entity%,orbit%
End Type

Type Planet
	Field id%,parent%,name$,radius#,period#,size#,r%,g%,b%,plt$,rtp#,atmosphere#,MOONS%,moon.Moon[MOONS],SPEED#,random%,entity%
End Type

Type System
	Field planet.Planet[PLANETS]
End Type

; init scene
InitScene()

; init planet and moon objects and update once
Initialize()
UpdateObjects()

; set ship start position
InitShipPosition(SHIP,AVOIDSUNCROSS,AVOIDINCDAYS)

MoveMouse WIDTH/2,HEIGHT/2

CAMTARGET=SHIP

Global slowspeed=False , highspeed=False
Local multi#=1
.main
;===========================================================================
; main loop
;===========================================================================

While Not KeyHit(1)
	
	ZOOM=1.0
	ScreenshotTaker()
	Local oldx#,oldy#,oldz#,l#=5.0 ;,multi#=1
	Local f#=Sqr(EntityDistance(CAM,MASTERPIVOT)/1000.0)
	Local d#=EntityDistance(SHIP,TARGETPIVOT)
	
	; store current ship position
	oldx=EntityX(SHIP)
	oldy=EntityY(SHIP)
	oldz=EntityZ(SHIP)
	
	; LMB = advance time
	;If MouseDown(1) And (Not STOPPER) Then
	;If (Not MouseDown(1)) Then ;And (Not STOPPER) Then


	
		DAYS=DAYS+DAYINC
		If (Not STOPPER) Then		
		
			; near target? stop it
			If d&lt;=SPEED*2 Then
				
				UpdateObjects()
				STOPPER=True
				PositionEntity SHIP,EntityX(TARGETOBJECT),EntityY(TARGETOBJECT),EntityZ(TARGETOBJECT)
				CreateLine(TRACER,oldx,oldy,oldz,EntityX(SHIP),EntityY(SHIP),EntityZ(SHIP),0,255,0,1)
			Else
				
				; move ship to target
				PointEntity SHIP,TARGETPIVOT
				MoveEntity SHIP,0,0,SPEED
				CreateLine(TRACER,oldx,oldy,oldz,EntityX(SHIP),EntityY(SHIP),EntityZ(SHIP),0,255,0,1)
			EndIf
			
		EndIf
	
		
	; LSHIFT = 10x slower, RSHIFT = 10x faster cam flight
	If KeyHit(42) Then slowspeed=1-slowspeed : highspeed=False
	
	If KeyHit(54) Then highspeed=1-highspeed: slowspeed=False
    
	
	If slowspeed=True
		multi=.05
		
	EndIf 
	If highspeed=True
		multi=5
	EndIf	
	If highspeed=False And slowspeed=False
		multi=1
	EndIf

	
	; RMB = Zoom
	If MouseDown(2) Then ZOOM=20 : l=50.0
	
	; SPACE = show/hide text info
	If KeyHit(57) Then INFO=1-INFO

	
	; camera movement
	Cam2Object()
	
	If KeyHit(31) Then ; key s
		cam2ship=1-cam2ship ;
		firsttime=True
	EndIf	
	
	If cam2ship	; follow cam,lock cam to ship
		; position object to start object position
		
		;PointEntity CAM,SHIP;,90
		;RotateEntity CAM,90,0,0

		;PositionEntity CAM,EntityX(SHCAMPIV),EntityY(SHCAMPIV),EntityZ(SHCAMPIV)-10
		;MoveEntity CAM,(KeyDown(205)-KeyDown(203))*f*multi,0,(KeyDown(200)-KeyDown(208))*f*multi
		;PointEntity CAM,SHIP;,90
		;CAMTARGET=SHCAMPIV
				
		PositionEntity CAM, EntityX(SHCAMPIV,True), EntityY(SHCAMPIV,True), EntityZ(SHCAMPIV,True) ;
	;	If firsttime
			PointEntity CAM,SHIP
	;		firsttime=False
	;	EndIf
		;RotateEntity CAM,EntityPitch(CAM)+(MouseYSpeed()/l),EntityYaw(CAM)-(MouseXSpeed()/l),0
		;MoveEntity CAM,(KeyDown(205)-KeyDown(203))*f*multi,0,(KeyDown(200)-KeyDown(208))*f*multi
		;MoveMouse WIDTH/2,HEIGHT/2
		;CameraZoom CAM,ZOOM
		CAMTARGET=SHIP
	Else
		RotateEntity CAM,EntityPitch(CAM)+(MouseYSpeed()/l),EntityYaw(CAM)-(MouseXSpeed()/l),0
		MoveEntity CAM,(KeyDown(205)-KeyDown(203))*f*multi,0,(KeyDown(200)-KeyDown(208))*f*multi
		MoveMouse WIDTH/2,HEIGHT/2
		CameraZoom CAM,ZOOM
		;If CAMTARGET=0
		
	EndIf


	
	; sun quads always point to cam
	PointEntity SUN0,CAM
	PointEntity SUN1,CAM
	PointEntity SUN2,CAM
	PointEntity SUN3,CAM
	
;localx=EntityX(player)
;localy=EntityY(player)
;localz=EntityZ(player)
;homeKeeping(SHIP,MASTERPIVOT,1000)	
	
	
	; wireframe render pass
	If INFO
		Wireframe 1
	EndIf
	ShowEntity WIREDPIVOT
	HideEntity SOLIDPIVOT

;	HideEntity MilkyWay
	HideEntity Monolith

	CameraClsMode CAM,1,1
	RenderWorld
	
	
	; solid object render pass
	WireFrame 0
	HideEntity WIREDPIVOT
	ShowEntity SOLIDPIVOT
		
;	ShowEntity MilkyWay
;	PositionEntity MilkyWay,EntityX(CAM),EntityY(CAM),EntityZ(CAM)
	
	
	ShowEntity Monolith
	TurnEntity Monolith,.1,0,0 ; rotate Monolith

	CameraClsMode CAM,0,0


	RenderWorld
	
	;update Object positions
	UpdateObjects()
	
	
	;MAXDIST2#=EntityDistance(SHIP,TARGETOBJECT)
	MAXDIST#=EntityDistance(CAM,CAMTARGET)
	; text info
	Text 0,  0,"Source &gt; Target.........: "+START+" &gt; "+TARGET
	Text 0, 15,"Distance Ship to Object.: "+Round(d)+" Mio. km [total "+Round(MAXDIST)+" Mio. km]"
	Text 0, 30,"Ship Speed..............: "+Round(SPEED/DAYINC)+" Mio. km/Day ["+Round(SPEED/DAYINC/3600*1000000)+"km/sec.]"
	Text 0, 45,"Flight time.............: "+Round(DAYS)+" Days ["+Round(CALCTIME)+" total]"
	Text 0, 60,"Cam speed...............: "+multi
	Text 0, 75,"Cam 2 Ship..............: "+cam2ship
	Text 0, 90,"Object in View..........: "+REQOBJ
	Text 340,90,"Object size.: "+REQSIZ+" KM."
	
    Text 0,120,"Distance Cam to Object..: "+MAXDIST#+" KM."
	
	
	Text 800,  0,"Spacebar(toggle)......: Trajectories &amp; Objectnames"
	Text 800, 15,"Cursor Keys &amp; Mouse...: Control Cam"
	Text 800, 30,"Left  Shift(toggle)...: Low  CamSpeed"
	Text 800, 45,"Right Shift(toggle)...: High CamSpeed"	
	Text 800, 60,"Select(toggle) object for FollowCam using:"
	Text 800, 75,"S = Ship , Planets = 1 to 0  "


	
	
	
	
	
	WaitTimer TIMER
	
	Flip 0
	
Wend

End


;===========================================================================
; init scene objects
;===========================================================================

Function InitScene()
	
	Local size#=13.92 *GLSC ,suntex%
	
	; pivots
	MASTERPIVOT=CreatePivot()
	SOLIDPIVOT=CreatePivot(MASTERPIVOT)
	WIREDPIVOT=CreatePivot(MASTERPIVOT)
	
	; cam
	CAM=CreateCamera()
	CameraRange CAM,0.1,32768*10
		
	
	; orbit wireframe
	PLANETORBITS=CreateMesh(WIREDPIVOT)
	CreateSurface(PLANETORBITS)
	EntityFX PLANETORBITS,1+2+16+32
	
	; ship tracer wireframe
	TRACER=CreateMesh()
	CreateSurface(TRACER)
	EntityFX TRACER,1+2+16+32

	
	; ship
	;SHIP=CreateCone(16,1,SOLIDPIVOT)
	;SHIP=LoadMesh("GFX\286428main_shuttle-hi-res\shutD2.b3d",SOLIDPIVOT)
	;SHIP=LoadMesh("GFX\286428main_shuttle-hi-res\shutD2B.b3d",SOLIDPIVOT)	
	SHIP=LoadMesh("GFX\286428main_shuttle-hi-res\shutD2F3.b3d",SOLIDPIVOT)
	
		
	;RotateMesh SHIP,90,0,0`
	;RotateMesh SHIP,-90,270,0

	EntityFX SHIP,1
;	EntityColor SHIP,255,0,255
	;ScaleEntity SHIP,0.2,0.2,0.2
;	ScaleEntity SHIP,0.001,0.001,0.001		
;	ScaleEntity SHIP,0.00025,0.00025,0.00025

	ScaleEntity SHIP,0.01,0.01,0.01

; 	SHCAMPIV=CreatePivot(SHIP)
;	MoveEntity SHCAMPIV,0,.5,-1670
;	MoveEntity SHCAMPIV,0,0,-10

	
;	TEST=CreateCone(14,True,SHCAMPIV)
;	EntityColor TEST,255,0,255
;	RotateMesh TEST,90,0,0
;	ScaleEntity TEST,1,1,1,1

;Create the Monolith.
Monolith=CreateCube()


	; sun
	SUN=CreateSphere(8)
	ScaleEntity SUN,size,size,size
	EntityRadius SUN,size/2.0,size/2.0
	EntityPickMode SUN,1
	EntityAlpha SUN,0
	
	; sun flares
	suntex=CreateSunTexture()
	SUN0=CreateQuad(SOLIDPIVOT,size*1.0,suntex,3,1+8,255,255,255,1.00)
	SUN1=CreateQuad(SOLIDPIVOT,size*1.5,suntex,3,1+8,255,192,128,1.00)
	SUN2=CreateQuad(SOLIDPIVOT,size*3.0,suntex,3,1+8,255,255,224,0.75)
	SUN3=CreateQuad(SOLIDPIVOT,size*6.0,suntex,3,1+8,255,255,224,0.50)
	
End Function


;===========================================================================
; calculate ship trajectory from start object to target object
;===========================================================================

Function CalculateTrajectory(add#=0.0,avoidsun%=True)
	
	Local pick%
	
	; create ship target pivot
	TARGETPIVOT=CreatePivot(MASTERPIVOT)
	
	; calculate distance and estimated time to reach target position
	MAXDIST#=EntityDistance(SHIP,TARGETOBJECT)
	CALCTIME#=(MAXDIST/SPEED*DAYINC)+add
	
	; calculate approximate future position of target object
	DAYS=DAYS+CALCTIME
	UpdateObjects()
	
	; get ship position
	Local sx#=EntityX(SHIP)
	Local sy#=EntityY(SHIP)
	Local sz#=EntityZ(SHIP)
	
	; get target position
	Local tx#=EntityX(TARGETOBJECT)
	Local ty#=EntityY(TARGETOBJECT)
	Local tz#=EntityZ(TARGETOBJECT)
	
	; place target pivot to target object position and calc distance
	PositionEntity TARGETPIVOT,tx,ty,tz
	MAXDIST#=EntityDistance(SHIP,TARGETOBJECT)
	
	; reset scene to initial position
	DAYS=DAYS-CALCTIME
	UpdateObjects()
	
	; check free path avoiding sun crossing
	If avoidsun Then
	
		; check if sun is blocking
		pick=LinePick(sx,sy,sz,tx-sx,ty-sy,tz-sz,10)
	
		; free path?
		If (Not pick) Then
		
			; create a blue line and calculate the constant ship speed (should be slower than max ship speed)
			CreateLine(TRACER,sx,sy,sz,tx,ty,tz,0,0,128,1)
			SPEED#=(EntityDistance(SHIP,TARGETPIVOT)/(CALCTIME-DAYS)*DAYINC)
		
			; position cam
			PositionEntity CAM,sx,sy+20,sz-20
			PointEntity CAM,SHIP
		
		Else
		
			; create a red line if occupied space (for debugging only)
			CreateLine(TRACER,sx,sy,sz,tx,ty,tz,255,0,0,0.2)
			
		EndIf
		
	Else
		
		; create a blue line
		CreateLine(TRACER,sx,sy,sz,tx,ty,tz,0,0,128,1)
		SPEED#=(EntityDistance(SHIP,TARGETPIVOT)/(CALCTIME-DAYS)*DAYINC)
		
		; position cam
		PositionEntity CAM,sx,sy+20,sz-20
		PointEntity CAM,SHIP
		
	EndIf
	
	Return pick
	
End Function


;===========================================================================
; set a given object to start object position
;===========================================================================

Function InitShipPosition(obj%,avoidsun%=True,avoidinc%=1,addx#=0.0,addy#=0.0,addz#=0.0)
	
	Local i%,pick%,c%,p.Planet,m.Moon
	
	; check all planets
	For p.Planet = Each Planet
		
		; start or target found? store entity information
		If p\name=START Then STARTOBJECT=p\entity
		If p\name=TARGET Then TARGETOBJECT=p\entity
		
		; check all moons
		For i=1 To p\MOONS
			
			m.Moon = MOONdata(p\id,i)
			
			; start or target found? store entity information
			If m\name=START Then STARTOBJECT=m\entity
			If m\name=TARGET Then TARGETOBJECT=m\entity
			
		Next
		
	Next
	
	;set initial position
	PositionEntity obj, 0,0,0


	;Create and position cam pivot.
	SHCAMPIV=CreatePivot(obj)
	 PositionEntity SHCAMPIV,EntityX(obj)-50,EntityY(obj)+1000,EntityZ(obj)-750;
	;PositionEntity SHCAMPIV,EntityX(obj)-500,EntityY(obj)+1000,EntityZ(obj)-2000
	PositionEntity SHCAMPIV,EntityX(obj)-00,EntityY(obj)+1000,EntityZ(obj)-2000

	;TEST=CreateCone(64,True,SHCAMPIV)     
	;EntityColor TEST,255,255,128
	;RotateMesh TEST,-90,0,0
	;ScaleEntity TEST,100,100,100;,1
	;PositionEntity TEST,EntityX(SHCAMPIV)+20,EntityY(SHCAMPIV)+1000,EntityZ(SHCAMPIV)-750
	

	; position object to start object position
	PositionEntity obj,EntityX(STARTOBJECT)+addx,EntityY(STARTOBJECT),EntityZ(STARTOBJECT)+addz
	PointEntity obj, TARGETOBJECT
		
	; calculate direct trajectory (with optional avoiding sun crossing)
	Repeat pick=CalculateTrajectory(c,avoidsun) : c=c+avoidinc : Until Not pick




;Position Monolith at jupiter
; check all planets
For p.Planet = Each Planet
	; enitity name found? store entity information
	If p\name="Jupiter" Then prnt=p\entity
Next	
	
EntityColor Monolith,0,0,0 
EntityFX Monolith,1	
PositionEntity Monolith,EntityX(prnt )+00,EntityY(prnt),EntityZ(prnt)+600
PointEntity Monolith,prnt 
ScaleEntity Monolith, 2*5,5*5,.5*5	



End Function


;===========================================================================
; read planet/moon data and create objects, fill types
;===========================================================================

Function Initialize()
	
	Local p%,m%
	Local parent%,name$,radius#,period#,size#,r%,g%,b%,plt$,mnt$,rtp#
	Local speed#,entity%,random%,orbit%,atmosphere#
	
	; read planet data
	Restore PLANETDATA
	
	For p=1 To PLANETS
		
		Read parent,name,radius,period,size,r,g,b,plt$,rtp#,atmosphere#
		
		; calc speed and initial position
		speed=YEAR/Float(period)
		If RANDOMIZE Then random=Rnd(0,2^16)
		
		; create sphere object
		;entity=CreateSphere(16,SOLIDPIVOT)
		entity=CreateSphere(64,SOLIDPIVOT)
		EntityFX entity,1
		;EntityColor entity,r,g,b
		;ScaleEntity entity,0.5*GLSC ,0.5*GLSC ,0.5*GLSC 
		ScaleEntity entity,size ,size,size
		EntityTexture entity,LoadTexture(plt$)
		
				
		; add orbit
	    ;CreateOrbit(360,PLANETORBITS,radius ,radius ,255,255,255,0.1,0,0,0)
		CreateOrbit(360*GLSC,PLANETORBITS,radius*GLSC ,radius*GLSC ,255,255,255,0.1,0,0,0)

	
		If atmosphere#&lt;&gt;0
		   atmoentity=CreateSphere(64,entity)
		   PositionEntity atmoentity,EntityX(entity),EntityY(entity),EntityZ(entity)
		   ScaleEntity atmoentity,size*atmosphere,size*atmosphere,size*atmosphere
		   EntityColor atmoentity,0,0,100
		   EntityAlpha atmoentity,0.5
		EndIf 
		
		; add planet (to solidpivot? )
		S\planet[p]=PLANETcreate(p,parent%,name$,radius#*GLSC ,period#,size#,r%,g%,b%,plt$,rtp#,atmosphere#,speed,entity,random)
	
	Next
	
	; read moon data
	Restore MOONDATA
	
	For m=1 To MOONS
			
		Read parent,name,radius,period,size,r,g,b,mnt$,rtp#

		
		; calc speed and initial position
		speed=YEAR/Float(period)
		If RANDOMIZE Then random=Rnd(0,2^16)
		
		; create sphere object
		entity=CreateSphere(64,SOLIDPIVOT)
		EntityFX entity,1
		;EntityColor entity,r,g,b
		EntityTexture entity,LoadTexture(mnt$) 
		;ScaleEntity entity,0.125*GLSC ,0.125*GLSC ,0.125*GLSC 
		ScaleEntity entity,size,size,size
		
		; add orbit
		;orbit=CreateOrbit(360*GLSC,0,radius,radius,255,255,255,0.1)
		orbit=CreateOrbit(360*GLSC,0,radius*GLSCO,radius*GLSCO,255,255,255,0.1)
		EntityFX orbit,1+16
		EntityAlpha orbit,0.1
		EntityAutoFade orbit,1,10000
		
		; increase planet's moon counter
		S\planet[parent]\MOONS=S\planet[parent]\MOONS+1
		
		; add moon
		S\planet[parent]\moon[S\planet[parent]\MOONS]=MOONcreate(S\planet[parent]\MOONS,parent%,name$,radius#*GLSCO,period#,size#,r%,g%,b%,mnt$,rtp#,speed,entity,random,orbit)
			
	Next
	
End Function


;===========================================================================
; update object positions
;===========================================================================

Function UpdateObjects()
	
	Local p.Planet,m.Moon,i%
	
	For p.Planet = Each Planet
		
		UpdatePlanet(p\id)
		
		TurnEntity p\entity,0,360/p\rtp#/24,0 ; rotate planets


		; only show text if object is in view or text flag enabled
		If EntityInView(p\entity,CAM) And INFO Then
			
			CameraProject CAM,EntityX(p\entity),EntityY(p\entity),EntityZ(p\entity)
			Text ProjectedX(),ProjectedY(),p\name,1
			
		EndIf
		
		For i=1 To p\MOONS
			
			m.Moon = MOONdata(p\id,i)
			
			If m&lt;&gt;Null Then
				
				UpdateMoon(p\id,m\id)
				
				TurnEntity m\entity,0,360/m\rtp#/24,0 ; rotate moons
				
				
				; only show text if object is in view or text flag enabled
				If EntityInView(m\entity,CAM) And INFO And EntityDistance(CAM,m\entity)&lt;100*ZOOM Then
					
					CameraProject CAM,EntityX(m\entity),EntityY(m\entity),EntityZ(m\entity)
					Text ProjectedX(),ProjectedY(),m\name,1
					
				EndIf
				
			EndIf
			
		Next
		
	Next
	
	
	
End Function


;===========================================================================
; create a planet object
;===========================================================================

Function PLANETcreate.Planet(id%,parent%,name$,radius#,period#,size#,r%,g%,b%,plt$,rtp#,atmosphere#,speed#,entity%,random%)
	
	Local p.Planet = New Planet
	
	p\id=id
	p\parent=parent
	p\name=name
	p\radius=radius
	p\period=period
	p\size=size
	p\r=r
	p\g=g
	p\b=b
	p\plt=plt
	p\SPEED=speed
	p\entity=entity
	p\random=random
	p\rtp=rtp#
	p\atmosphere=atmosphere
	Return p
	
End Function


;===========================================================================
; create a moon object
;===========================================================================

Function MOONcreate.Moon(id%,parent%,name$,radius#,period#,size#,r%,g%,b%,mnt$,rtp#,speed#,entity%,random%,orbit%)
	
	Local m.Moon = New Moon
	
	m\id=id
	m\parent=parent
	m\name=name
	m\radius=radius
	m\period=period
	m\size=size
	m\r=r
	m\g=g
	m\b=b
	m\mnt=mnt
	m\SPEED=speed
	m\entity=entity
	m\random=random
	m\orbit=orbit
	m\rtp=rtp
	
	Return m
	
End Function


;===========================================================================
; return a moon object handle
;===========================================================================

Function MOONdata.Moon(planet,moon)

	Return S\planet[planet]\moon[moon]

End Function


;===========================================================================
; return a planet object handle
;===========================================================================

Function PLANETdata.Planet(planet)
	
	Return S\planet[planet]
	
End Function


;===========================================================================
; update a single planet object position according to time
;===========================================================================

Function UpdatePlanet(id%)
	
	Local radiusx#,radiusy#
	Local xcos#=Cos(360)
	Local xsin#=Sin(360)
	Local tmpx#,tmpy#
	
	Local p.Planet= PLANETdata(id)
	
	radiusx=p\radius
	radiusy=p\radius
		
	tmpx#=(Cos((DAYS*(360.0/YEAR)*p\SPEED)+p\random)*radiusx#)
	tmpy#=(Sin((DAYS*(360.0/YEAR)*p\SPEED)+p\random)*radiusy#)
	PositionEntity p\entity,tmpx#*xcos#+tmpy*-xsin#,0,tmpx#*xsin#+tmpy*xcos#
	;use moveentity p\entity from old position to new?	
	;MoveEntity 
End Function


;===========================================================================
; update a single moon object position according to time
;===========================================================================

Function UpdateMoon(planet%,id%)
	
	Local radiusx#,radiusy#
	Local xcos#=Cos(360)
	Local xsin#=Sin(360)
	Local tmpx#,tmpy#,addx#,addy#,addz#
	
	Local p.Planet = PLANETdata(planet)
	Local m.Moon= MOONdata(planet,id)
	
	radiusx=m\radius
	radiusy=m\radius
	
	addx=EntityX(p\entity)
	addy=EntityY(p\entity)
	addz=EntityZ(p\entity)
	
	tmpx#=(Cos((DAYS*(360.0/YEAR)*m\SPEED)+m\random)*radiusx#)+addx
	tmpy#=(Sin((DAYS*(360.0/YEAR)*m\SPEED)+m\random)*radiusy#)+addz
	
	PositionEntity m\entity,tmpx#*xcos#+tmpy*-xsin#,addy,tmpx#*xsin#+tmpy*xcos#
	PositionEntity m\orbit,addx,addy,addz
	
End Function


;===========================================================================
; round cut a value for better display
;===========================================================================

Function Round$(value$,digits%=1)
	
	Local midpoint%=Instr(value,".")
	Local prefix$,suffix$,zero%,i%
	
	If midpoint Then
		
		prefix=Mid(value,1,midpoint-1)
		suffix=Mid(value,midpoint+1,Len(value))
		suffix=Mid(suffix,1,digits)
		zero=digits-Len(suffix)
		For i=1 To zero : suffix=suffix+"0" : Next
		
	Else
		
		prefix=Int(value)
		For i=1 To digits : suffix=suffix+"0" : Next
		
	EndIf
	
	Return prefix+"."+suffix
	
End Function 


;===========================================================================
; create a wireframe orbit mesh
;===========================================================================

Function CreateOrbit(segments%,mesh=0,r1#=1,r2#=1.5,r%=255,g%=255,b%=255,a#=1.0,sx#=0.0,sy#=0.0,sz#=0.0)
	
	
	Local la#,na#,i%
	
	For i = 1 To segments
		
		na=la+(360.0/segments)
		
		mesh=CreateLine(mesh,(Cos(la)*r1)+sx,sy,(Sin(la)*r2)+sz,(Cos(na)*r1)+sx,sy,(Sin(na)*r2)+sz,r,g,b,a)
		
		la=na
		
	Next
	
	Return mesh
	
End Function


;===========================================================================
; create a single wireframe line
;===========================================================================

Function CreateLine(mesh,x0#,y0#,z0#,x1#,y1#,z1#,r%=255,g%=255,b%=255,a#=1.0)
	
	Local surf%,v1%,v2%
	
	If mesh Then
		
		surf=GetSurface(mesh,1)
		
	Else
		
		mesh = CreateMesh()
		surf = CreateSurface(mesh)
		EntityFX mesh,1+2+16+32
		
	End If
	
    v1=AddVertex(surf,x1,y1,z1)
	v2=AddVertex(surf,x0,y0,z0)
	AddTriangle surf,v1,v1,v2
	
    VertexColor surf,v1,r,g,b,a
	VertexColor surf,v2,r,g,b,a
	
	Return mesh
	
End Function


;==========================================================================
; create a quad
;===========================================================================

Function CreateQuad(parent%=False,scale#=1.0,tex%=False,blend%=False,fx%=False,r%=255,g%=255,b%=255,a#=1.0)
	
	Local mesh%=CreateMesh()
	Local surf%=CreateSurface(mesh)
	
	Local v0%=AddVertex(surf, 1, 1,0,0,0)
	Local v1%=AddVertex(surf,-1, 1,0,1,0)
	Local v2%=AddVertex(surf,-1,-1,0,1,1)
	Local v3%=AddVertex(surf, 1,-1,0,0,1)
	
	AddTriangle surf,v0,v1,v2
	AddTriangle surf,v0,v2,v3
	
	If parent Then EntityParent mesh,parent
	If fx Then EntityFX mesh,fx
	If tex Then EntityTexture mesh,tex
	If blend Then EntityBlend mesh,blend
	
	EntityColor mesh,r,g,b
	EntityAlpha mesh,a
	
	VertexColor surf,v0,r,g,b,a
	VertexColor surf,v1,r,g,b,a
	VertexColor surf,v2,r,g,b,a
	VertexColor surf,v3,r,g,b,a
	
	ScaleEntity mesh,scale,scale,scale
	
	Return mesh
	
End Function


;==========================================================================
; create sun texture
;===========================================================================

Function CreateSunTexture()
	
	Local tex%=CreateTexture(512,512,3)
	Local tb%=TextureBuffer(tex)
	
	Local i#,j%,col%,rgb%
	
	SetBuffer tb
	LockBuffer tb
	
	For j=0 To 255
		
		col=255-j
		If col&gt;255 Then col=255
		rgb=col*$1000000+col*$10000+col*$100+col
		
		For i=0 To 360 Step 0.1
			
			WritePixelFast 256+(Sin(i)*j),256+(Cos(i)*j),rgb,tb
			
		Next
		
	Next
	
	UnlockBuffer tb
	SetBuffer BackBuffer()
	
	Return tex
	
End Function


.PLANETDATA

;==========================================================================                                          Rotation     Diameter    
;    Parent   Name       (orbit)Radius   Period      Size     R     G     B                                          in hrs.   (km)  
;==========================================================================
Data 0      , "Mercury"  ,   57.909 ,    87.989 ,   4.878 , 255 , 128 ,   0 , "GFX\Mercury\mercurycyl2(large).jpg"  ,  1407.6 ,0 ; ,   4880 ; ,
Data 0      , "Venus"    ,  108.160 ,   224.701 ,   5.000 , 255 , 255 ,   0 , "GFX\Venus\venuscyl2(large).jpg"      , -5832.5 ,0 ; ,  12104 ; ,
Data 0      , "Earth"    ,  149.600 ,   365.256 ,  12.756 ,   0 ,   0 , 255 , "GFX\Earth\earthcyl3.jpg"             ,    23.9 ,.08 ; ,  12742 ; ,
Data 0      , "Mars"     ,  227.990 ,   686.980 ,   6.794 , 255 ,   0 ,   0 , "GFX\Mars\marscyl1(large).jpg"        ,    24.6 ,0 ; ,   6780 ; ,
Data 0      , "Jupiter"  ,  778.360 ,  4331.936 , 142.984 , 255 , 192 ,   0 , "GFX\Jupiter\jupitercyl2(large).jpg"  ,     9.9 ,0; , 139822 ; ,
Data 0      , "Saturn"   , 1433.400 , 10759.346 , 120.536 , 255 , 224 ,   0 , "GFX\Saturn\saturncyl1.jpg"           ,    10.7 ,0 ; , 116464 ; ,
Data 0      , "Uranus"   , 2872.400 , 30685.522 ,  51.118 ,   0 , 128 , 255 , "GFX\Uranus\uranuscyl1.jpg"           ,   -17.2 ,0 ; ,  50724 ; ,
Data 0      , "Neptune"  , 4495.000 , 60190.536 ,  49.528 ,   0 , 255 , 255 , "GFX\Neptune\neptunecyl1.jpg"         ,    16.1 ,0 ; ,  49248 ; ,
Data 0      , "Pluto"    , 5906.400 , 90466.606 ,   2.390 , 255 , 255 , 255 , "GFX\Pluto\plu1rss1.jpg"              ,  -153.3 ,0 ; ,   2274 ; ,


;==========================================================================rk
;    Parent   Name           Radius      Period      Size     R     G     B
;==========================================================================

.MOONDATA
Data 3     , "Moon"      ,    1.000/2 ,     1.000 ,   3.476 *1.1 , 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               ,   655.728  ; , 3476 ; ,
Data 4     , "Phobos"    ,    1.000/2 ,     1.000 ,   0.027 *50 , 255 , 255 , 255 , "GFX\Mars\phoboscyl1(large).jpg"      ,     7.656  ; ,  560 ; ,
Data 4     , "Deimos"    ,    2.000/2 ,     2.000 ,   0.015 *50 , 255 , 255 , 255 , "GFX\Mars\deimoscyl4.jpg"             ,    30.312  ; ,    8 ; ,
Data 5     , "Amalthea"  ,    1.000 ,     1.000 ,   0.167 *1 , 255 , 255 , 255 , "GFX\Jupiter\amalthea.jpg"            ,    11.952  ; ,  262 ; ,
Data 5     , "Io"        ,    2.000 ,     2.000 ,   3.643 *1, 255 , 255 , 255 , "GFX\Jupiter\iocyl2(large).jpg"       ,    42.456  ; , 3629 ; ,
Data 5     , "Europa"    ,    3.000 ,     4.000 ,   3.122 *1, 255 , 255 , 255 , "GFX\Jupiter\europacyl2(large).jpg"   ,    85.224  ; , 3126 ; ,
Data 5     , "Ganymede"  ,    4.000 ,     8.000 ,   5.262 *1, 255 , 255 , 255 , "GFX\Jupiter\ganymedecyl2(large).jpg" ,   171.72   ; , 5276 ; ,
Data 5     , "Callisto"  ,    5.000 ,    16.000 ,   4.821 *1, 255 , 255 , 255 , "GFX\Jupiter\callistocyl2(Large).jpg" ,   400.536  ; , 4800 ; ,
Data 5     , "Leda"      ,    6.000 ,    32.000 ,   0.020 *5, 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               ,  5729.28   ; ,   10 ; ,
Data 5     , "Himalia"   ,    7.000 ,    64.000 ,   0.170 *1, 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               ,  6013.68   ; ,  170 ; ,
Data 5     , "Elara"     ,    8.000 ,   128.000 ,   0.086 *5, 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               ,  6231.6    ; ,   80 ; ,
Data 5     , "Pasiphae"  ,    9.000 ,   256.000 ,   0.056 *5, 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               , 17640.0    ; ,   36 ; ,
Data 6     , "Mimas"     ,    1.000 ,     1.000 ,   0.397 *1, 255 , 255 , 255 , "GFX\Saturn\mimascyl2(large).jpg"     ,    22.608  ; ,  398 ; ,
Data 6     , "Enceladus" ,    2.000 ,     2.000 ,   0.504 *1, 255 , 255 , 255 , "GFX\Saturn\enceladuscyl2(large0.jpg" , 32880.0    ; ,  498 ; ,
Data 6     , "Tethys"    ,    3.000 ,     4.000 ,   1.060 *1, 255 , 255 , 255 , "GFX\Saturn\tethyscyl2(large).jpg"    , 45312.0    ; , 1060 ; ,
Data 6     , "Dione"     ,    4.000 ,     8.000 ,   1.127 *1, 255 , 255 , 255 , "GFX\Saturn\dionecyl2(large).jpg"     , 65688.0    ; , 1120 ; ,
Data 6     , "Rhea"      ,    5.000 ,    16.000 ,   1.528 *1, 255 , 255 , 255 , "GFX\Saturn\rheacyl2(large).jpg"      ,108432.0    ; , 1528 ; ,
Data 6     , "Titan"     ,    6.000 ,    32.000 ,   5.150 *1, 255 , 255 , 255 , "GFX\Saturn\titancyl1.jpg"            ,   382.68   ; , 5150 ; ,
Data 6     , "Hyperion"  ,    7.000 ,    64.000 ,   0.266 *1, 255 , 255 , 255 , "GFX\Saturn\hyperion.jpg"             ,   510.648  ; ,  360 ; ,
Data 6     , "Iapetus"   ,    8.000 ,   128.000 ,   1.436 *1, 255 , 255 , 255 , "GFX\Saturn\iapetuscyl2(large).jpg"   ,  1903.716  ; , 1436 ; ,
Data 6     , "Phoebe"    ,    9.000 ,   256.000 ,   0.220 *1, 255 , 255 , 255 , "GFX\Uranus\Phoebe.jpg"               , 13211.52   ; ,  220 ; ,
Data 7     , "Miranda"   ,    1.000 ,      1.00 ,   0.472 *1, 255 , 255 , 255 , "GFX\Uranus\mirandacyl1(large).jpg"   , 33936.0    ; ,  472 ; ,
Data 7     , "Ariel"     ,    2.000 ,      2.00 ,   1.158 *1, 255 , 255 , 255 , "GFX\Uranus\arielcyl1(large).jpg"     ,    60.48   ; , 1160 ; ,
Data 7     , "Umbriel"   ,    3.000 ,      4.00 ,   1.169 *1, 255 , 255 , 255 , "GFX\Uranus\umbrielcyl1(large).jpg"   ,    99.456  ; , 1190 ; ,
Data 7     , "Titania"   ,    4.000 ,      8.00 ,   1.578 *1, 255 , 255 , 255 , "GFX\Uranus\titaniacyl1(large).jpg"   ,   208.944  ; , 1578 ; ,
Data 7     , "Oberon"    ,    5.000 ,     16.00 ,   1.523 *1, 255 , 255 , 255 , "GFX\Uranus\oberoncyl1(large).jpg"    ,   323.112  ; , 1526 ; ,
Data 8     , "Triton"    ,    1.000 ,      1.00 ,   2.707 *1, 255 , 255 , 255 , "GFX\Neptune\tritoncyl1(large).jpg"   ,   141.048  ; , 2705 ; ,
Data 8     , "Nereid"    ,    2.000 ,      2.00 ,   0.340 *1, 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               ,  8643.84   ; ,  340 ; ,
Data 9     , "Charon"    ,    1.000 ,      1.00 ,   1.212 *1, 255 , 255 , 255 , "GFX\Pluto\Charon.jpg"                ,   153.288  ; , 1207 ; ,



Function Cam2Object()

	Local i%,c%,p.Planet,m.Moon
	
	If KeyDown(2) Then ; key 1
		REQOBJ="Mercury"
		camz2obj=500 ; 25
		; check all planets
		;p.Planet = First Planet
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ$ Then 
				CAMTARGET=p\entity 
				REQSIZ#=p\size
			EndIf
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ$ Then CAMTARGET=m\entity
			Next
		Next
		PointEntity CAM, CAMTARGET; 
		PositionEntity CAM, EntityX(CAMTARGET), EntityY(CAMTARGET)+camy2obj, EntityZ(CAMTARGET)+camz2obj ;
		
	EndIf
	
	If KeyDown(3) Then ; key  2
		REQOBJ="Venus" 
		camz2obj=500;25
		; check all planets
		;p.Planet = First Planet ;reset pointer				
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ$ Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ$ Then CAMTARGET=m\entity
			Next
		Next
		PointEntity CAM, CAMTARGET; 
		PositionEntity CAM, EntityX(CAMTARGET), EntityY(CAMTARGET)+camy2obj, EntityZ(CAMTARGET)+camz2obj ;
	EndIf

	If KeyDown(4) Then ; key  3
		REQOBJ="Earth" 
		camz2obj= 500 ;50
		
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	

			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		PointEntity CAM, CAMTARGET; 
		PositionEntity CAM, EntityX(CAMTARGET), EntityY(CAMTARGET)+camy2obj, EntityZ(CAMTARGET)+camz2obj ;
	EndIf

	If KeyDown(5) Then ; key  4
		REQOBJ="Mars" 
		camz2obj=500 ;25; Mars
		
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		PointEntity CAM, CAMTARGET; 
		PositionEntity CAM, EntityX(CAMTARGET), EntityY(CAMTARGET)+camy2obj, EntityZ(CAMTARGET)+camz2obj ;

	EndIf
	
	If KeyDown(6) Then ; key  5
		REQOBJ="Jupiter" 
		camz2obj=500
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		PointEntity CAM, CAMTARGET; 
		PositionEntity CAM, EntityX(CAMTARGET), EntityY(CAMTARGET)+camy2obj*GLSC , EntityZ(CAMTARGET)+camz2obj ;
	EndIf

	If KeyDown(7) Then ; key  6
		REQOBJ="Saturn" 
		camz2obj=500
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		PointEntity CAM, CAMTARGET; 
		PositionEntity CAM, EntityX(CAMTARGET), EntityY(CAMTARGET)+camy2obj*GLSC, EntityZ(CAMTARGET)+camz2obj ;
	EndIf
	
	If KeyDown(8) Then ; key  7
		REQOBJ="Uranus" 
		camz2obj=500;400
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		PointEntity CAM, CAMTARGET; 
		PositionEntity CAM, EntityX(CAMTARGET), EntityY(CAMTARGET)+camy2obj*GLSC, EntityZ(CAMTARGET)+camz2obj ;
	EndIf

	If KeyDown(9) Then ; key  8
		REQOBJ="Neptune" 
		camz2obj=500
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		PointEntity CAM, CAMTARGET; 
		PositionEntity CAM, EntityX(CAMTARGET), EntityY(CAMTARGET)+camy2obj*GLSC, EntityZ(CAMTARGET)+camz2obj ;
	EndIf
	
	If KeyDown(10) Then ; key  9
		REQOBJ="Pluto" 
		camz2obj=500;25
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		PointEntity CAM, CAMTARGET; 
		PositionEntity CAM, EntityX(CAMTARGET), EntityY(CAMTARGET)+camy2obj, EntityZ(CAMTARGET)+camz2obj ;
	EndIf
	
	If KeyDown(11) Then ; key  0
		camz2obj=500	
		PointEntity CAM, Sun
		PositionEntity CAM, EntityX(Sun), EntityY(Sun)+camy2obj, EntityZ(Sun)+camz2obj 
		CAMTARGET=SUN
	EndIf
	
	
	
End Function



Function ScreenshotTaker()
	If KeyHit(14) = 1;Backspace
		For w = 1 To 100
			nme$ = "screenshot" + w + ".bmp"
			If FileType(nme$) = 0
				If done = 0
					SaveBuffer(FrontBuffer(), nme$)
					done = 1
				EndIf
			EndIf
		Next
	EndIf
	done = 0	
End Function
</textarea> <br><br></td></tr></table><br>
<a name="1242492"></a>

<a name="1242495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> 2751(Interplanetary travel)9HW2.bb (adapted)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; 
; Author: Krischan
; Date: 2010-08-08 07:08:10
; Title: Interplanetary travel
; Description: Calculates and shows interplanetary ship travel bef two moving celestial bodies in 3D
;
; Adaptations: Rick Nasher  
; Date: 2014-10-10 20:39   
;
; 
; 

dxApptitle "Interplanetary Travel"

dxGraphics3D 1280,800,32,2
;Include "includes\2622(homekeeping).bb"
;Include "includes\DXIncludes.bb"
;Include "includes\milkyway.bb"

;Global MILKYWAY%=InitMilkyway(5000  ,0.5  ,5        ,90       ,5    ,0    ,0    ,0    ,1     ,255  ,192  ,255  ,1      ,0    ,0    ,0    ,1)

; Example 1: Milkyway with 500 fixed stars, 80% up to 10° and 20% from 10° to 40°, red style, normal brightnessGlobal 
;Global MILKYWAY1=InitMilkyway(500,0.2,10,40,500,0,0,0,0,255,255,255,1,0,0,0,0)
dxSeedRnd MilliSecs()

.vars
; sun obstacle demo
;SeedRnd 6
Const GLSC=10, GLSCO=200 , GLSCM=1  ;Global Scale *GLSC 
Const MOONS			= 29			; number of moons to read
Const PLANETS		= 9				; number of planets to read
Const RANDOMIZE%	= True			; random positions on/off
Const DAYINC#		= 1.0/60/60		; time increment per cycle
Const YEAR#			= 365.256		; earth year in days
Const AVOIDSUNCROSS%= True			; avoid sun crossing trajectory yes/no
Const AVOIDINCDAYS% = 10			; days increment for new trajectory

Const START$		= "Moon"		; object to start at
;Const TARGET$		= "Pluto"     	; object to target
Const TARGET$		= "Jupiter"	    ; object to target
Const SHIPSPEED#	= 20*GLSC	        ; ship speed (Mio. km/Day) (normal = 20 / hispeed = 40 / c=1079.9)

Global WIDTH%=GraphicsWidth()		; screen width
Global HEIGHT%=GraphicsHeight()		; screen height
Global SPEED#=DAYINC*SHIPSPEED		; calculated ship speed
Global TIMER%=CreateTimer(60)		; timer
Global INFO%=True					; Text info flag
Global STOPPER%=False				; Ship arrival flag

Global S.System=New System

Global DAYS#,MAXDIST#,CALCTIME#,ZOOM#
Global CAM%,PLANETORBITS%,SUN%,SUN0%,SUN1%,SUN2%,SUN3%,TRACER%,SHIP%,STARTOBJECT%,TARGETOBJECT%
Global MASTERPIVOT%,SOLIDPIVOT%,WIREDPIVOT%,TARGETPIVOT%

Global REQOBJ$ ="Ship",REQSIZ#, camz2obj#=100,camy2obj#=7, CAMTARGET%, cam2ship=False, SHCAMPIV%, TEST%, Monolith%, firsttime=True


Type Moon
	Field id%,parent%,name$,radius#,period#,size#,r%,g%,b%,mnt$,rtp#,SPEED#,random%,entity%,orbit%
End Type

Type Planet
	Field id%,parent%,name$,radius#,period#,size#,r%,g%,b%,plt$,rtp#,atmosphere#,MOONS%,moon.Moon[MOONS],SPEED#,random%,entity%
End Type

Type System
	Field planet.Planet[PLANETS]
End Type

; init scene
InitScene()

; init planet and moon objects and update once
Initialize()
UpdateObjects()

; set ship start position
InitShipPosition(SHIP,AVOIDSUNCROSS,AVOIDINCDAYS)

dxMoveMouse WIDTH/2,HEIGHT/2

CAMTARGET=SHIP

Global slowspeed=False , highspeed=False
Local multi#=1
.main
;===========================================================================
; main loop
;===========================================================================

While Not dxKeyHit(1)
	
	ZOOM=1.0
	;ScreenshotTaker()
	Local oldx#,oldy#,oldz#,l#=5.0 ;,multi#=1
	Local f#=Sqr(dxEntityDistance(CAM,MASTERPIVOT)/1000.0)
	Local d#=dxEntityDistance(SHIP,TARGETPIVOT)
	
	; store current ship position
	oldx=dxEntityX(SHIP,False)
	oldy=dxEntityY(SHIP,False)
	oldz=dxEntityZ(SHIP,False)
	
	; LMB = advance time
	;If MouseDown(1) And (Not STOPPER) Then
	;If (Not MouseDown(1)) Then ;And (Not STOPPER) Then


	
		DAYS=DAYS+DAYINC
		If (Not STOPPER) Then		
		
			; near target? stop it
			If d&lt;=SPEED*2 Then
				
				UpdateObjects()
				STOPPER=True
				dxPositionEntity SHIP,dxEntityX(TARGETOBJECT,False),dxEntityY(TARGETOBJECT,False),dxEntityZ(TARGETOBJECT,False),False
				CreateLine(TRACER,oldx,oldy,oldz,dxEntityX(SHIP,False),dxEntityY(SHIP,False),dxEntityZ(SHIP,False),0,255,0,1)
			Else
				
				; move ship to target
				dxPointEntity SHIP,TARGETPIVOT,False
				dxMoveEntity SHIP,0,0,SPEED
				CreateLine(TRACER,oldx,oldy,oldz,dxEntityX(SHIP,False),dxEntityY(SHIP,False),dxEntityZ(SHIP,False),0,255,0,1)
			EndIf
			
		EndIf
	
		
	; LSHIFT = 10x slower, RSHIFT = 10x faster cam flight
	If dxKeyHit(42) Then slowspeed=1-slowspeed : highspeed=False
	
	If dxKeyHit(54) Then highspeed=1-highspeed: slowspeed=False
    
	
	If slowspeed=True
		multi=.05
		
	EndIf 
	If highspeed=True
		multi=5
	EndIf	
	If highspeed=False And slowspeed=False
		multi=1
	EndIf

	
	; RMB = Zoom
	If dxMouseDown(2) Then ZOOM=20 : l=50.0
	
	; SPACE = show/hide text info
	If dxKeyHit(57) Then INFO=1-INFO

	
	; camera movement
	Cam2Object()
	
	If dxKeyHit(31) Then ; key s
		cam2ship=1-cam2ship ;
		firsttime=True
	EndIf	
	
	If cam2ship	; follow cam,lock cam to ship
		; position object to start object position
		
		;PointEntity CAM,SHIP;,90
		;RotateEntity CAM,90,0,0

		;PositionEntity CAM,EntityX(SHCAMPIV),EntityY(SHCAMPIV),EntityZ(SHCAMPIV)-10
		;MoveEntity CAM,(KeyDown(205)-KeyDown(203))*f*multi,0,(KeyDown(200)-KeyDown(208))*f*multi
		;PointEntity CAM,SHIP;,90
		;CAMTARGET=SHCAMPIV
				
		dxPositionEntity CAM, dxEntityX(SHCAMPIV,True), dxEntityY(SHCAMPIV,True), dxEntityZ(SHCAMPIV,True),False ;
	;	If firsttime
			dxPointEntity CAM,SHIP,False
	;		firsttime=False
	;	EndIf
		;RotateEntity CAM,EntityPitch(CAM)+(MouseYSpeed()/l),EntityYaw(CAM)-(MouseXSpeed()/l),0
		;MoveEntity CAM,(KeyDown(205)-KeyDown(203))*f*multi,0,(KeyDown(200)-KeyDown(208))*f*multi
		;MoveMouse WIDTH/2,HEIGHT/2
		;CameraZoom CAM,ZOOM
		CAMTARGET=SHIP
	Else
		dxRotateEntity CAM,dxEntityPitch(CAM,False)+(dxMouseYSpeed()/l),dxEntityYaw(CAM,False)-(dxMouseXSpeed()/l),0,False
		dxMoveEntity CAM,(dxKeyDown(205)-dxKeyDown(203))*f*multi,0,(dxKeyDown(200)-dxKeyDown(208))*f*multi
		dxMoveMouse WIDTH/2,HEIGHT/2
		dxCameraZoom CAM,ZOOM
		;If CAMTARGET=0
		
	EndIf


	
	; sun quads always point to cam
	dxPointEntity SUN0,CAM,False
	dxPointEntity SUN1,CAM,False
	dxPointEntity SUN2,CAM,False
	dxPointEntity SUN3,CAM,False
	
;localx=EntityX(player)
;localy=EntityY(player)
;localz=EntityZ(player)
;homeKeeping(SHIP,MASTERPIVOT,1000)	
	
	
	; wireframe render pass
	If INFO
		dxWireframe 1
	EndIf
	dxShowEntity WIREDPIVOT
	dxHideEntity SOLIDPIVOT

;	HideEntity MilkyWay
	dxHideEntity Monolith

	dxCameraClsMode CAM,1,1
	
	

	dxRenderWorld 0
	
	
	; solid object render pass
	dxWireframe 0
	dxHideEntity WIREDPIVOT
	dxShowEntity SOLIDPIVOT
		
;	ShowEntity MilkyWay
;	PositionEntity MilkyWay,EntityX(CAM),EntityY(CAM),EntityZ(CAM)
	
	
	dxShowEntity Monolith
	dxTurnEntity Monolith,.1,0,0,False ; rotate Monolith

	dxCameraClsMode CAM,0,0


	dxRenderWorld 0
	
	;update Object positions
	UpdateObjects()
	
	
	;MAXDIST2#=EntityDistance(SHIP,TARGETOBJECT)
	MAXDIST#=dxEntityDistance(CAM,CAMTARGET)
	; text info
	dxText 0,  0,"Source &gt; Target.........: "+START+" &gt; "+TARGET,False,False
	dxText 0, 15,"Distance Ship to Object.: "+Round(d)+" Mio. km [total "+Round(MAXDIST)+" Mio. km]",False,False
	dxText 0, 30,"Ship Speed..............: "+Round(SPEED/DAYINC)+" Mio. km/Day ["+Round(SPEED/DAYINC/3600*1000000)+"km/sec.]",False,False
	dxText 0, 45,"Flight time.............: "+Round(DAYS)+" Days ["+Round(CALCTIME)+" total]",False,False
	dxText 0, 60,"Cam speed...............: "+multi,False,False
	dxText 0, 75,"Cam 2 Ship..............: "+cam2ship,False,False
	dxText 0, 90,"Object in View..........: "+REQOBJ,False,False
	dxText 340,90,"Object size.: "+REQSIZ+" KM.",False,False
	
    dxText 0,120,"Distance Cam to Object..: "+MAXDIST#+" KM.",False,False
	
	dxText 800,  0,"Spacebar(toggle)......: Trajectories &amp; Objectnames",False,False
	dxText 800, 15,"Cursor Keys &amp; Mouse...: Control Cam",False,False
	dxText 800, 30,"Left  Shift(toggle)...: Low  CamSpeed",False,False
	dxText 800, 45,"Right Shift(toggle)...: High CamSpeed",False,False
	dxText 800, 60,"Select(toggle) object for FollowCam using:",False,False
	dxText 800, 75,"S = Ship , Planets = 1 to 0  ",False,False
	
	WaitTimer TIMER
	
	dxFlip 0
	
Wend

End


;===========================================================================
; init scene objects
;===========================================================================

Function InitScene()
	
	Local size#=13.92 *GLSC ,suntex%
	
	; pivots
	;MP=dxCreateSphere(16,False)
	MASTERPIVOT=dxCreatePivot(False)
	SOLIDPIVOT=dxCreatePivot(MASTERPIVOT)
	WIREDPIVOT=dxCreatePivot(MASTERPIVOT)
	
	; cam
	CAM=dxCreateCamera(0)
	dxCameraRange CAM,0.1,32768*10
		
	
	; orbit wireframe
	PLANETORBITS=dxCreateMesh(WIREDPIVOT)
	dxCreateSurface(PLANETORBITS)
	dxEntityFX PLANETORBITS,1+2+16+32
	
	; ship tracer wireframe
	TRACER=dxCreateMesh(False)
	dxCreateSurface(TRACER)
	dxEntityFX TRACER,1+2+16+32

	
	; ship
	;SHIP=CreateCone(16,1,SOLIDPIVOT)
	;SHIP=LoadMesh("GFX\286428main_shuttle-hi-res\shutD2.b3d",SOLIDPIVOT)
	;SHIP=LoadMesh("GFX\286428main_shuttle-hi-res\shutD2B.b3d",SOLIDPIVOT)	
	SHIP=dxLoadMesh("GFX\286428main_shuttle-hi-res\shutD2F3.b3d",SOLIDPIVOT)
	
		
	;RotateMesh SHIP,90,0,0`
	;RotateMesh SHIP,-90,270,0

	dxEntityFX SHIP,1
;	EntityColor SHIP,255,0,255
	;ScaleEntity SHIP,0.2,0.2,0.2
;	ScaleEntity SHIP,0.001,0.001,0.001		
;	ScaleEntity SHIP,0.00025,0.00025,0.00025

	dxScaleEntity SHIP,0.01,0.01,0.01,False

; 	SHCAMPIV=CreatePivot(SHIP)
;	MoveEntity SHCAMPIV,0,.5,-1670
;	MoveEntity SHCAMPIV,0,0,-10

	
;	TEST=CreateCone(14,True,SHCAMPIV)
;	EntityColor TEST,255,0,255
;	RotateMesh TEST,90,0,0
;	ScaleEntity TEST,1,1,1,1

;Create the Monolith.
Monolith=dxCreateCube(False)


	; sun
	SUN=dxCreateSphere(8,False)
	dxScaleEntity SUN,size,size,size,False
	dxEntityRadius SUN,size/2.0,size/2.0
	dxEntityPickMode SUN,1,False
	dxEntityAlpha SUN,0
	
	; sun flares
	suntex=CreateSunTexture()
	SUN0=CreateQuad(SOLIDPIVOT,size*1.0,suntex,3,1+8,255,255,255,1.00)
	SUN1=CreateQuad(SOLIDPIVOT,size*1.5,suntex,3,1+8,255,192,128,1.00)
	SUN2=CreateQuad(SOLIDPIVOT,size*3.0,suntex,3,1+8,255,255,224,0.75)
	SUN3=CreateQuad(SOLIDPIVOT,size*6.0,suntex,3,1+8,255,255,224,0.50)
	
End Function


;===========================================================================
; calculate ship trajectory from start object to target object
;===========================================================================

Function CalculateTrajectory(add#=0.0,avoidsun%=True)
	
	Local pick%
	
	; create ship target pivot
	TARGETPIVOT=dxCreatePivot(MASTERPIVOT)
	
	; calculate distance and estimated time to reach target position
	MAXDIST#=dxEntityDistance(SHIP,TARGETOBJECT)
	CALCTIME#=(MAXDIST/SPEED*DAYINC)+add
	
	; calculate approximate future position of target object
	DAYS=DAYS+CALCTIME
	UpdateObjects()
	
	; get ship position
	Local sx#=dxEntityX(SHIP,False)
	Local sy#=dxEntityY(SHIP,False)
	Local sz#=dxEntityZ(SHIP,False)
	
	; get target position
	Local tx#=dxEntityX(TARGETOBJECT,False)
	Local ty#=dxEntityY(TARGETOBJECT,False)
	Local tz#=dxEntityZ(TARGETOBJECT,False)
	
	; place target pivot to target object position and calc distance
	dxPositionEntity TARGETPIVOT,tx,ty,tz,False
	MAXDIST#=dxEntityDistance(SHIP,TARGETOBJECT)
	
	; reset scene to initial position
	DAYS=DAYS-CALCTIME
	UpdateObjects()
	
	; check free path avoiding sun crossing
	If avoidsun Then
	
		; check if sun is blocking
		pick=dxLinePick(sx,sy,sz,tx-sx,ty-sy,tz-sz,10)
	
		; free path?
		If (Not pick) Then
		
			; create a blue line and calculate the constant ship speed (should be slower than max ship speed)
			CreateLine(TRACER,sx,sy,sz,tx,ty,tz,0,0,128,1)
			SPEED#=(dxEntityDistance(SHIP,TARGETPIVOT)/(CALCTIME-DAYS)*DAYINC)
		
			; position cam
			dxPositionEntity CAM,sx,sy+20,sz-20,False
			dxPointEntity CAM,SHIP,False
		
		Else
		
			; create a red line if occupied space (for debugging only)
			CreateLine(TRACER,sx,sy,sz,tx,ty,tz,255,0,0,0.2)
			
		EndIf
		
	Else
		
		; create a blue line
		CreateLine(TRACER,sx,sy,sz,tx,ty,tz,0,0,128,1)
		SPEED#=(dxEntityDistance(SHIP,TARGETPIVOT)/(CALCTIME-DAYS)*DAYINC)
		
		; position cam
		dxPositionEntity CAM,sx,sy+20,sz-20,False
		dxPointEntity CAM,SHIP,False
		
	EndIf
	
	Return pick
	
End Function


;===========================================================================
; set a given object to start object position
;===========================================================================

Function InitShipPosition(obj%,avoidsun%=True,avoidinc%=1,addx#=0.0,addy#=0.0,addz#=0.0)
	
	Local i%,pick%,c%,p.Planet,m.Moon
	
	; check all planets
	For p.Planet = Each Planet
		
		; start or target found? store entity information
		If p\name=START Then STARTOBJECT=p\entity
		If p\name=TARGET Then TARGETOBJECT=p\entity
		
		; check all moons
		For i=1 To p\MOONS
			
			m.Moon = MOONdata(p\id,i)
			
			; start or target found? store entity information
			If m\name=START Then STARTOBJECT=m\entity
			If m\name=TARGET Then TARGETOBJECT=m\entity
			
		Next
		
	Next
	
	;set initial position
	dxPositionEntity obj, 0,0,0,False


	;Create and position cam pivot.
	SHCAMPIV=dxCreatePivot(obj)
	 dxPositionEntity SHCAMPIV,dxEntityX(obj,False)-50,dxEntityY(obj,False)+1000,dxEntityZ(obj,False)-750,False;
	;PositionEntity SHCAMPIV,EntityX(obj)-500,EntityY(obj)+1000,EntityZ(obj)-2000
	dxPositionEntity SHCAMPIV,dxEntityX(obj,False)-00,dxEntityY(obj,False)+1000,dxEntityZ(obj,False)-2000,False

	;TEST=CreateCone(64,True,SHCAMPIV)     
	;EntityColor TEST,255,255,128
	;RotateMesh TEST,-90,0,0
	;ScaleEntity TEST,100,100,100;,1
	;PositionEntity TEST,EntityX(SHCAMPIV)+20,EntityY(SHCAMPIV)+1000,EntityZ(SHCAMPIV)-750
	

	; position object to start object position
	dxPositionEntity obj,dxEntityX(STARTOBJECT,False)+addx,dxEntityY(STARTOBJECT,False),dxEntityZ(STARTOBJECT,False)+addz,False
	dxPointEntity obj, TARGETOBJECT,False
		
	; calculate direct trajectory (with optional avoiding sun crossing)
	Repeat pick=CalculateTrajectory(c,avoidsun) : c=c+avoidinc : Until Not pick




;Position Monolith at jupiter
; check all planets
For p.Planet = Each Planet
	; enitity name found? store entity information
	If p\name="Jupiter" Then prnt=p\entity
Next	
	
dxEntityColor Monolith,0,0,0 
dxEntityFX Monolith,1	
dxPositionEntity Monolith,dxEntityX(prnt,False )+00,dxEntityY(prnt,False),dxEntityZ(prnt,False)+600,False
dxPointEntity Monolith,prnt,False 
dxScaleEntity Monolith, 2*5,5*5,.5*5,False	



End Function


;===========================================================================
; read planet/moon data and create objects, fill types
;===========================================================================

Function Initialize()
	
	Local p%,m%
	Local parent%,name$,radius#,period#,size#,r%,g%,b%,plt$,mnt$,rtp#
	Local speed#,entity%,random%,orbit%,atmosphere#
	
	; read planet data
	Restore PLANETDATA
	
	For p=1 To PLANETS
		
		Read parent,name,radius,period,size,r,g,b,plt$,rtp#,atmosphere#
		
		; calc speed and initial position
		speed=YEAR/Float(period)
		If RANDOMIZE Then random=Rnd(0,2^16)
		
		; create sphere object
		;entity=CreateSphere(16,SOLIDPIVOT)
		entity=dxCreateSphere(64,SOLIDPIVOT)
		dxEntityFX entity,1
		;EntityColor entity,r,g,b
		;ScaleEntity entity,0.5*GLSC ,0.5*GLSC ,0.5*GLSC 
		dxScaleEntity entity,size ,size,size,False
		dxEntityTexture entity,dxLoadTexture(plt$,False),0,0
		
				
		; add orbit
	    ;CreateOrbit(360,PLANETORBITS,radius ,radius ,255,255,255,0.1,0,0,0)
		CreateOrbit(360*GLSC,PLANETORBITS,radius*GLSC ,radius*GLSC ,255,255,255,0.1,0,0,0)

	
		If atmosphere#&lt;&gt;0
		   atmoentity=dxCreateSphere(64,entity)
		   dxPositionEntity atmoentity,dxEntityX(entity,False),dxEntityY(entity,False),dxEntityZ(entity,False),False
		   dxScaleEntity atmoentity,size*atmosphere,size*atmosphere,size*atmosphere,False
		   dxEntityColor atmoentity,0,0,100
		   dxEntityAlpha atmoentity,0.5
		EndIf 
		
		; add planet (to solidpivot? )
		S\planet[p]=PLANETcreate(p,parent%,name$,radius#*GLSC ,period#,size#,r%,g%,b%,plt$,rtp#,atmosphere#,speed,entity,random)
	
	Next
	
	; read moon data
	Restore MOONDATA
	
	For m=1 To MOONS
			
		Read parent,name,radius,period,size,r,g,b,mnt$,rtp#

		
		; calc speed and initial position
		speed=YEAR/Float(period)
		If RANDOMIZE Then random=Rnd(0,2^16)
		
		; create sphere object
		entity=dxCreateSphere(64,SOLIDPIVOT)
		dxEntityFX entity,1
		;EntityColor entity,r,g,b
		dxEntityTexture entity,dxLoadTexture(mnt$,False),False,False 
		;ScaleEntity entity,0.125*GLSC ,0.125*GLSC ,0.125*GLSC 
		dxScaleEntity entity,size,size,size,False
		
		; add orbit
		;orbit=CreateOrbit(360*GLSC,0,radius,radius,255,255,255,0.1)
		orbit=CreateOrbit(360*GLSC,0,radius*GLSCO,radius*GLSCO,255,255,255,0.1)
		dxEntityFX orbit,1+16
		dxEntityAlpha orbit,0.1
		;dxEntityAutoFade orbit,1,10000
		
		; increase planet's moon counter
		S\planet[parent]\MOONS=S\planet[parent]\MOONS+1
		
		; add moon
		S\planet[parent]\moon[S\planet[parent]\MOONS]=MOONcreate(S\planet[parent]\MOONS,parent%,name$,radius#*GLSCO,period#,size#,r%,g%,b%,mnt$,rtp#,speed,entity,random,orbit)
			
	Next
	
End Function


;===========================================================================
; update object positions
;===========================================================================

Function UpdateObjects()
	
	Local p.Planet,m.Moon,i%
	
	For p.Planet = Each Planet
		
		UpdatePlanet(p\id)
		
		dxTurnEntity p\entity,0,360/p\rtp#/24,0,False ; rotate planets


		; only show text if object is in view or text flag enabled
		If dxEntityInView(p\entity,CAM) And INFO Then
			
			dxCameraProject CAM,dxEntityX(p\entity,False),dxEntityY(p\entity,False),dxEntityZ(p\entity,False)
			dxText dxProjectedX(),dxProjectedY(),p\name,1,False
			
		EndIf
		
		For i=1 To p\MOONS
			
			m.Moon = MOONdata(p\id,i)
			
			If m&lt;&gt;Null Then
				
				UpdateMoon(p\id,m\id)
				
				dxTurnEntity m\entity,0,360/m\rtp#/24,0,False ; rotate moons
				
				
				; only show text if object is in view or text flag enabled
				If dxEntityInView(m\entity,CAM) And INFO And dxEntityDistance(CAM,m\entity)&lt;100*ZOOM Then
					
					dxCameraProject CAM,dxEntityX(m\entity,False),dxEntityY(m\entity,False),dxEntityZ(m\entity,False)
					dxText dxProjectedX(),dxProjectedY(),m\name,1,False
					
				EndIf
				
			EndIf
			
		Next
		
	Next
	
	
	
End Function


;===========================================================================
; create a planet object
;===========================================================================

Function PLANETcreate.Planet(id%,parent%,name$,radius#,period#,size#,r%,g%,b%,plt$,rtp#,atmosphere#,speed#,entity%,random%)
	
	Local p.Planet = New Planet
	
	p\id=id
	p\parent=parent
	p\name=name
	p\radius=radius
	p\period=period
	p\size=size
	p\r=r
	p\g=g
	p\b=b
	p\plt=plt
	p\SPEED=speed
	p\entity=entity
	p\random=random
	p\rtp=rtp#
	p\atmosphere=atmosphere
	Return p
	
End Function


;===========================================================================
; create a moon object
;===========================================================================

Function MOONcreate.Moon(id%,parent%,name$,radius#,period#,size#,r%,g%,b%,mnt$,rtp#,speed#,entity%,random%,orbit%)
	
	Local m.Moon = New Moon
	
	m\id=id
	m\parent=parent
	m\name=name
	m\radius=radius
	m\period=period
	m\size=size
	m\r=r
	m\g=g
	m\b=b
	m\mnt=mnt
	m\SPEED=speed
	m\entity=entity
	m\random=random
	m\orbit=orbit
	m\rtp=rtp
	
	Return m
	
End Function


;===========================================================================
; return a moon object handle
;===========================================================================

Function MOONdata.Moon(planet,moon)

	Return S\planet[planet]\moon[moon]

End Function


;===========================================================================
; return a planet object handle
;===========================================================================

Function PLANETdata.Planet(planet)
	
	Return S\planet[planet]
	
End Function


;===========================================================================
; update a single planet object position according to time
;===========================================================================

Function UpdatePlanet(id%)
	
	Local radiusx#,radiusy#
	Local xcos#=Cos(360)
	Local xsin#=Sin(360)
	Local tmpx#,tmpy#
	
	Local p.Planet= PLANETdata(id)
	
	radiusx=p\radius
	radiusy=p\radius
		
	tmpx#=(Cos((DAYS*(360.0/YEAR)*p\SPEED)+p\random)*radiusx#)
	tmpy#=(Sin((DAYS*(360.0/YEAR)*p\SPEED)+p\random)*radiusy#)
	dxPositionEntity p\entity,tmpx#*xcos#+tmpy*-xsin#,0,tmpx#*xsin#+tmpy*xcos#,False
	;use moveentity p\entity from old position to new?	
	;MoveEntity 
End Function


;===========================================================================
; update a single moon object position according to time
;===========================================================================

Function UpdateMoon(planet%,id%)
	
	Local radiusx#,radiusy#
	Local xcos#=Cos(360)
	Local xsin#=Sin(360)
	Local tmpx#,tmpy#,addx#,addy#,addz#
	
	Local p.Planet = PLANETdata(planet)
	Local m.Moon= MOONdata(planet,id)
	
	radiusx=m\radius
	radiusy=m\radius
	
	addx=dxEntityX(p\entity,False)
	addy=dxEntityY(p\entity,False)
	addz=dxEntityZ(p\entity,False)
	
	tmpx#=(Cos((DAYS*(360.0/YEAR)*m\SPEED)+m\random)*radiusx#)+addx
	tmpy#=(Sin((DAYS*(360.0/YEAR)*m\SPEED)+m\random)*radiusy#)+addz
	
	dxPositionEntity m\entity,tmpx#*xcos#+tmpy*-xsin#,addy,tmpx#*xsin#+tmpy*xcos#,False
	dxPositionEntity m\orbit,addx,addy,addz,False
	
End Function


;===========================================================================
; round cut a value for better display
;===========================================================================

Function Round$(value$,digits%=1)
	
	Local midpoint%=Instr(value,".")
	Local prefix$,suffix$,zero%,i%
	
	If midpoint Then
		
		prefix=Mid(value,1,midpoint-1)
		suffix=Mid(value,midpoint+1,Len(value))
		suffix=Mid(suffix,1,digits)
		zero=digits-Len(suffix)
		For i=1 To zero : suffix=suffix+"0" : Next
		
	Else
		
		prefix=Int(value)
		For i=1 To digits : suffix=suffix+"0" : Next
		
	EndIf
	
	Return prefix+"."+suffix
	
End Function 


;===========================================================================
; create a wireframe orbit mesh
;===========================================================================

Function CreateOrbit(segments%,mesh=0,r1#=1,r2#=1.5,r%=255,g%=255,b%=255,a#=1.0,sx#=0.0,sy#=0.0,sz#=0.0)
	
	
	Local la#,na#,i%
	
	For i = 1 To segments
		
		na=la+(360.0/segments)
		
		mesh=CreateLine(mesh,(Cos(la)*r1)+sx,sy,(Sin(la)*r2)+sz,(Cos(na)*r1)+sx,sy,(Sin(na)*r2)+sz,r,g,b,a)
		
		la=na
		
	Next
	
	Return mesh
	
End Function


;===========================================================================
; create a single wireframe line
;===========================================================================

Function CreateLine(mesh,x0#,y0#,z0#,x1#,y1#,z1#,r%=255,g%=255,b%=255,a#=1.0)
	
	Local surf%,v1%,v2%
	
	If mesh Then
		
		surf=dxGetSurface(mesh,1)
		
	Else
		
		mesh = dxCreateMesh(False)
		surf = dxCreateSurface(mesh)
		dxEntityFX mesh,1+2+16+32
		
	End If
	
    v1=dxAddVertex(surf,x1,y1,z1,False,False,False)
	v2=dxAddVertex(surf,x0,y0,z0,False,False,False)
	dxAddTriangle surf,v1,v1,v2
	
    dxVertexColor surf,v1,r,g,b,a
	dxVertexColor surf,v2,r,g,b,a
	
	Return mesh
	
End Function


;==========================================================================
; create a quad
;===========================================================================

Function CreateQuad(parent%=False,scale#=1.0,tex%=False,blend%=False,fx%=False,r%=255,g%=255,b%=255,a#=1.0)
	
	Local mesh%=dxCreateMesh(False)
	Local surf%=dxCreateSurface(mesh)
	
	Local v0%=dxAddVertex(surf, 1, 1,0,0,0,False)
	Local v1%=dxAddVertex(surf,-1, 1,0,1,0,False)
	Local v2%=dxAddVertex(surf,-1,-1,0,1,1,False)
	Local v3%=dxAddVertex(surf, 1,-1,0,0,1,False)
	
	dxAddTriangle surf,v0,v1,v2
	dxAddTriangle surf,v0,v2,v3
	
	If parent Then dxEntityParent mesh,parent
	If fx Then dxEntityFX mesh,fx
	If tex Then dxEntityTexture mesh,tex,False,False
	If blend Then dxEntityBlend mesh,blend
	
	dxEntityColor mesh,r,g,b
	dxEntityAlpha mesh,a
	
	dxVertexColor surf,v0,r,g,b,a
	dxVertexColor surf,v1,r,g,b,a
	dxVertexColor surf,v2,r,g,b,a
	dxVertexColor surf,v3,r,g,b,a
	
	dxScaleEntity mesh,scale,scale,scale,False
	
	Return mesh
	
End Function


;==========================================================================
; create sun texture
;===========================================================================

Function CreateSunTexture()
	
	Local tex%=dxCreateTexture(512,512,3,False)
	Local tb%=dxTextureBuffer(tex)
	
	Local i#,j%,col%,rgb%
	
	dxSetBuffer tb
	dxLockBuffer tb
	
	For j=0 To 255
		
		col=255-j
		If col&gt;255 Then col=255
		rgb=col*$1000000+col*$10000+col*$100+col
		
		For i=0 To 360 Step 0.1
			
			dxWritePixelFast 256+(Sin(i)*j),256+(Cos(i)*j),rgb,tb
			
		Next
		
	Next
	
	dxUnLockBuffer tb
	dxSetBuffer dxBackBuffer()
	
	Return tex
	
End Function


.PLANETDATA

;==========================================================================                                          Rotation     Diameter    
;    Parent   Name       (orbit)Radius   Period      Size     R     G     B                                          in hrs.   (km)  
;==========================================================================
Data 0      , "Mercury"  ,   57.909 ,    87.989 ,   4.878 , 255 , 128 ,   0 , "GFX\Mercury\mercurycyl2(large).jpg"  ,  1407.6 ,0 ; ,   4880 ; ,
Data 0      , "Venus"    ,  108.160 ,   224.701 ,   5.000 , 255 , 255 ,   0 , "GFX\Venus\venuscyl2(large).jpg"      , -5832.5 ,0 ; ,  12104 ; ,
Data 0      , "Earth"    ,  149.600 ,   365.256 ,  12.756 ,   0 ,   0 , 255 , "GFX\Earth\earthcyl3.jpg"             ,    23.9 ,.08 ; ,  12742 ; ,
Data 0      , "Mars"     ,  227.990 ,   686.980 ,   6.794 , 255 ,   0 ,   0 , "GFX\Mars\marscyl1(large).jpg"        ,    24.6 ,0 ; ,   6780 ; ,
Data 0      , "Jupiter"  ,  778.360 ,  4331.936 , 142.984 , 255 , 192 ,   0 , "GFX\Jupiter\jupitercyl2(large).jpg"  ,     9.9 ,0; , 139822 ; ,
Data 0      , "Saturn"   , 1433.400 , 10759.346 , 120.536 , 255 , 224 ,   0 , "GFX\Saturn\saturncyl1.jpg"           ,    10.7 ,0 ; , 116464 ; ,
Data 0      , "Uranus"   , 2872.400 , 30685.522 ,  51.118 ,   0 , 128 , 255 , "GFX\Uranus\uranuscyl1.jpg"           ,   -17.2 ,0 ; ,  50724 ; ,
Data 0      , "Neptune"  , 4495.000 , 60190.536 ,  49.528 ,   0 , 255 , 255 , "GFX\Neptune\neptunecyl1.jpg"         ,    16.1 ,0 ; ,  49248 ; ,
Data 0      , "Pluto"    , 5906.400 , 90466.606 ,   2.390 , 255 , 255 , 255 , "GFX\Pluto\plu1rss1.jpg"              ,  -153.3 ,0 ; ,   2274 ; ,


;==========================================================================rk
;    Parent   Name           Radius      Period      Size     R     G     B
;==========================================================================

.MOONDATA
Data 3     , "Moon"      ,    1.000/2 ,     1.000 ,   3.476 *1.1 , 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               ,   655.728  ; , 3476 ; ,
Data 4     , "Phobos"    ,    1.000/2 ,     1.000 ,   0.027 *50 , 255 , 255 , 255 , "GFX\Mars\phoboscyl1(large).jpg"      ,     7.656  ; ,  560 ; ,
Data 4     , "Deimos"    ,    2.000/2 ,     2.000 ,   0.015 *50 , 255 , 255 , 255 , "GFX\Mars\deimoscyl4.jpg"             ,    30.312  ; ,    8 ; ,
Data 5     , "Amalthea"  ,    1.000 ,     1.000 ,   0.167 *1 , 255 , 255 , 255 , "GFX\Jupiter\amalthea.jpg"            ,    11.952  ; ,  262 ; ,
Data 5     , "Io"        ,    2.000 ,     2.000 ,   3.643 *1, 255 , 255 , 255 , "GFX\Jupiter\iocyl2(large).jpg"       ,    42.456  ; , 3629 ; ,
Data 5     , "Europa"    ,    3.000 ,     4.000 ,   3.122 *1, 255 , 255 , 255 , "GFX\Jupiter\europacyl2(large).jpg"   ,    85.224  ; , 3126 ; ,
Data 5     , "Ganymede"  ,    4.000 ,     8.000 ,   5.262 *1, 255 , 255 , 255 , "GFX\Jupiter\ganymedecyl2(large).jpg" ,   171.72   ; , 5276 ; ,
Data 5     , "Callisto"  ,    5.000 ,    16.000 ,   4.821 *1, 255 , 255 , 255 , "GFX\Jupiter\callistocyl2(Large).jpg" ,   400.536  ; , 4800 ; ,
Data 5     , "Leda"      ,    6.000 ,    32.000 ,   0.020 *5, 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               ,  5729.28   ; ,   10 ; ,
Data 5     , "Himalia"   ,    7.000 ,    64.000 ,   0.170 *1, 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               ,  6013.68   ; ,  170 ; ,
Data 5     , "Elara"     ,    8.000 ,   128.000 ,   0.086 *5, 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               ,  6231.6    ; ,   80 ; ,
Data 5     , "Pasiphae"  ,    9.000 ,   256.000 ,   0.056 *5, 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               , 17640.0    ; ,   36 ; ,
Data 6     , "Mimas"     ,    1.000 ,     1.000 ,   0.397 *1, 255 , 255 , 255 , "GFX\Saturn\mimascyl2(large).jpg"     ,    22.608  ; ,  398 ; ,
Data 6     , "Enceladus" ,    2.000 ,     2.000 ,   0.504 *1, 255 , 255 , 255 , "GFX\Saturn\enceladuscyl2(large0.jpg" , 32880.0    ; ,  498 ; ,
Data 6     , "Tethys"    ,    3.000 ,     4.000 ,   1.060 *1, 255 , 255 , 255 , "GFX\Saturn\tethyscyl2(large).jpg"    , 45312.0    ; , 1060 ; ,
Data 6     , "Dione"     ,    4.000 ,     8.000 ,   1.127 *1, 255 , 255 , 255 , "GFX\Saturn\dionecyl2(large).jpg"     , 65688.0    ; , 1120 ; ,
Data 6     , "Rhea"      ,    5.000 ,    16.000 ,   1.528 *1, 255 , 255 , 255 , "GFX\Saturn\rheacyl2(large).jpg"      ,108432.0    ; , 1528 ; ,
Data 6     , "Titan"     ,    6.000 ,    32.000 ,   5.150 *1, 255 , 255 , 255 , "GFX\Saturn\titancyl1.jpg"            ,   382.68   ; , 5150 ; ,
Data 6     , "Hyperion"  ,    7.000 ,    64.000 ,   0.266 *1, 255 , 255 , 255 , "GFX\Saturn\hyperion.jpg"             ,   510.648  ; ,  360 ; ,
Data 6     , "Iapetus"   ,    8.000 ,   128.000 ,   1.436 *1, 255 , 255 , 255 , "GFX\Saturn\iapetuscyl2(large).jpg"   ,  1903.716  ; , 1436 ; ,
Data 6     , "Phoebe"    ,    9.000 ,   256.000 ,   0.220 *1, 255 , 255 , 255 , "GFX\Uranus\Phoebe.jpg"               , 13211.52   ; ,  220 ; ,
Data 7     , "Miranda"   ,    1.000 ,      1.00 ,   0.472 *1, 255 , 255 , 255 , "GFX\Uranus\mirandacyl1(large).jpg"   , 33936.0    ; ,  472 ; ,
Data 7     , "Ariel"     ,    2.000 ,      2.00 ,   1.158 *1, 255 , 255 , 255 , "GFX\Uranus\arielcyl1(large).jpg"     ,    60.48   ; , 1160 ; ,
Data 7     , "Umbriel"   ,    3.000 ,      4.00 ,   1.169 *1, 255 , 255 , 255 , "GFX\Uranus\umbrielcyl1(large).jpg"   ,    99.456  ; , 1190 ; ,
Data 7     , "Titania"   ,    4.000 ,      8.00 ,   1.578 *1, 255 , 255 , 255 , "GFX\Uranus\titaniacyl1(large).jpg"   ,   208.944  ; , 1578 ; ,
Data 7     , "Oberon"    ,    5.000 ,     16.00 ,   1.523 *1, 255 , 255 , 255 , "GFX\Uranus\oberoncyl1(large).jpg"    ,   323.112  ; , 1526 ; ,
Data 8     , "Triton"    ,    1.000 ,      1.00 ,   2.707 *1, 255 , 255 , 255 , "GFX\Neptune\tritoncyl1(large).jpg"   ,   141.048  ; , 2705 ; ,
Data 8     , "Nereid"    ,    2.000 ,      2.00 ,   0.340 *1, 255 , 255 , 255 , "GFX\Earth\moonmap.jpg"               ,  8643.84   ; ,  340 ; ,
Data 9     , "Charon"    ,    1.000 ,      1.00 ,   1.212 *1, 255 , 255 , 255 , "GFX\Pluto\Charon.jpg"                ,   153.288  ; , 1207 ; ,



Function Cam2Object()

	Local i%,c%,p.Planet,m.Moon
	
	If dxKeyDown(2) Then ; key 1
		REQOBJ="Mercury"
		camz2obj=500 ; 25
		; check all planets
		;p.Planet = First Planet
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ$ Then 
				CAMTARGET=p\entity 
				REQSIZ#=p\size
			EndIf
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ$ Then CAMTARGET=m\entity
			Next
		Next
		dxPointEntity CAM, CAMTARGET,False; 
		dxPositionEntity CAM, dxEntityX(CAMTARGET,False), dxEntityY(CAMTARGET,False)+camy2obj, dxEntityZ(CAMTARGET,False)+camz2obj,False ;
		
	EndIf
	
	If dxKeyDown(3) Then ; key  2
		REQOBJ="Venus" 
		camz2obj=500;25
		; check all planets
		;p.Planet = First Planet ;reset pointer				
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ$ Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ$ Then CAMTARGET=m\entity
			Next
		Next
		dxPointEntity CAM, CAMTARGET,False; 
		dxPositionEntity CAM, dxEntityX(CAMTARGET,False), dxEntityY(CAMTARGET,False)+camy2obj, dxEntityZ(CAMTARGET,False)+camz2obj,False ;
	EndIf

	If dxKeyDown(4) Then ; key  3
		REQOBJ="Earth" 
		camz2obj= 500 ;50
		
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	

			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		dxPointEntity CAM, CAMTARGET,False; 
		dxPositionEntity CAM, dxEntityX(CAMTARGET,False), dxEntityY(CAMTARGET,False)+camy2obj, dxEntityZ(CAMTARGET,False)+camz2obj,False ;
	EndIf

	If dxKeyDown(5) Then ; key  4
		REQOBJ="Mars" 
		camz2obj=500 ;25; Mars
		
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		dxPointEntity CAM, CAMTARGET,False; 
		dxPositionEntity CAM, dxEntityX(CAMTARGET,False), dxEntityY(CAMTARGET,False)+camy2obj, dxEntityZ(CAMTARGET,False)+camz2obj,False ;

	EndIf
	
	If dxKeyDown(6) Then ; key  5
		REQOBJ="Jupiter" 
		camz2obj=500
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		dxPointEntity CAM, CAMTARGET,False; 
		dxPositionEntity CAM, dxEntityX(CAMTARGET,False), dxEntityY(CAMTARGET,False)+camy2obj*GLSC , dxEntityZ(CAMTARGET,False)+camz2obj,False ;
	EndIf

	If dxKeyDown(7) Then ; key  6
		REQOBJ="Saturn" 
		camz2obj=500
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		dxPointEntity CAM, CAMTARGET,False; 
		dxPositionEntity CAM, dxEntityX(CAMTARGET,False), dxEntityY(CAMTARGET,False)+camy2obj*GLSC, dxEntityZ(CAMTARGET,False)+camz2obj,False ;
	EndIf
	
	If dxKeyDown(8) Then ; key  7
		REQOBJ="Uranus" 
		camz2obj=500;400
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		dxPointEntity CAM, CAMTARGET,False; 
		dxPositionEntity CAM, dxEntityX(CAMTARGET,False), dxEntityY(CAMTARGET,False)+camy2obj*GLSC, dxEntityZ(CAMTARGET,False)+camz2obj,False ;
	EndIf

	If dxKeyDown(9) Then ; key  8
		REQOBJ="Neptune" 
		camz2obj=500
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		dxPointEntity CAM, CAMTARGET,False; 
		dxPositionEntity CAM, dxEntityX(CAMTARGET,False), dxEntityY(CAMTARGET,False)+camy2obj*GLSC, dxEntityZ(CAMTARGET,False)+camz2obj,False ;
	EndIf
	
	If dxKeyDown(10) Then ; key  9
		REQOBJ="Pluto" 
		camz2obj=500;25
		; check all planets
		;p.Planet = First Planet ;reset pointer					
		For p.Planet = Each Planet
			; start or target found? store entity information
			If p\name=REQOBJ  Then 
				CAMTARGET=p\entity
				REQSIZ#=p\size
			EndIf	
			; check all moons
			For i=1 To p\MOONS
				m.Moon = MOONdata(p\id,i)
				; start or target found? store entity information
				If m\name=REQOBJ Then CAMTARGET=m\entity
			Next
		Next
		dxPointEntity CAM, CAMTARGET,False; 
		dxPositionEntity CAM, dxEntityX(CAMTARGET,False), dxEntityY(CAMTARGET,False)+camy2obj, dxEntityZ(CAMTARGET,False)+camz2obj,False ;
	EndIf
	
	If dxKeyDown(11) Then ; key  0
		camz2obj=500	
		dxPointEntity CAM, Sun, False
		dxPositionEntity CAM, dxEntityX(Sun,False), dxEntityY(Sun,False)+camy2obj, dxEntityZ(Sun,False)+camz2obj,False 
		CAMTARGET=SUN
	EndIf
	
	
	
End Function



Function ScreenshotTaker()
	If dxKeyHit(14) = 1;Backspace
		For w = 1 To 100
			nme$ = "screenshot" + w + ".bmp"
			If FileType(nme$) = 0
				If done = 0
					SaveBuffer(dxFrontBuffer(), nme$)
					done = 1
				EndIf
			EndIf
		Next
	EndIf
	done = 0	
End Function

</textarea> <br><br></td></tr></table><br>
<a name="1242546"></a>

<a name="1242549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Been playing around with this, and after about 2 hours, I've at least narrowed it down to the loading of the ship mesh in InitScene!<br><br>It does appear to successfully load it (SHIP has a value), and goes into the main loop, then crashes on dxRenderWorld, so I assume the HW renderer doesn't like something about the model...<br><br>If I comment out the SHIP dxLoadMesh, and the following commands operating on SHIP, it does at least go through the main loop, displaying the text overlay.<br><br>Beyond that, it's over to Ploppy! <br><br></td></tr></table><br>
<a name="1242560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Rick, I have found a little problem in my dxLoadMesh routine that I have corrected.  It seems that your b3d mesh has invalid triangles in it that make reference to vertices that have not been defined.  My routine did not error trap invalid triangles- so I have now written the code and the model correctly loads now.<br><br>I am however not yet ready to re-release new version.  I have, thanks to your code, been able to ascertain a few errors concerning rotations, so I'm going to sort that out first.  Your demo will not work well at all in HW without this correction.<br><br>@BlitzSupport - Thanks for your help on this, it was indeed the model loading that was bugging out.... <br><br></td></tr></table><br>
<a name="1242581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woo-hoo! Well done, Ploppy. <br><br></td></tr></table><br>
<a name="1242596"></a>

<a name="1242599"></a>

<a name="1242600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks BlitzSupport &amp; Ploppy. Was cracking my skull over it.<br><br>Indeed when in InitScene() I comment out:<br>;SHIP=dxLoadMesh("GFX\286428main_shuttle-hi-res\shutD2F3.b3d",SOLIDPIVOT)<br><br>and replace it by the cone  in the line above as such:<br>SHIP=dxCreateCone(16,1,SOLIDPIVOT)<br><br><br>It then it at least shows something. Even though not perfect yet, it's encouraging to know that HardWired IS able to do it:<br><br><img src="http://i61.tinypic.com/2cdakub.jpg"> <br><br></td></tr></table><br>
<a name="1243627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Rick, just to say that I'm still working on it but I have made a lot of progress.  Your source code has definately given me a challenge and helped me discover many bugs I has not yet seen.  Anyway, things are really starting to take shape.<br><br>Your b3d models bundled with your code contain references to textures that are used on the mesh.  I hadn't yet implemented that part into my b3d parser, so I'm working on that at the moment, as is the case for brushes.<br><br>Thanks for the help, please feel free to feed me more code - especially stuff that makes HW behave strangely.  It helps me pinpoint bugs.<br><br>Ploppy.. ;D <br><br></td></tr></table><br>
<a name="1243629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll see what I can do. :-) <br><br></td></tr></table><br>
<a name="1243763"></a>

<a name="1243764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Rick, I have just released a new update for Hardwired.  I decided to let you know about it on this thread as the update mainly concerns your source code.  I have been working with it the last few days, testing and testing, and I have almost corrected it all now.  Looking much better now, dxLoadMesh will now automatically load textures for b3d models just like b3d does.  Local scaling has also been corrected, and your source seems to work much better.<br><br>When you get the chance please check out yourself and let me know what'cha think.<br><br><a href="/logs/userlog.php?log=1897&amp;user=13255" target="_blank">New update</a><br><br>As always, thanks for your support. <br><br></td></tr></table><br>
<a name="1244064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Ploppy, many thanks. Sorry missed this one. Did I blink or something? Oh no, couple of days gone again lol. Was a bit preoccupied with some new additions/tweaks to the planetary system. <br><br>Tested HW just now and still sort of the same I'm afraid to say: very hard to stabilize the cam, at least when moving the mouse. Also happens when using cursor keys, but less as is more of constant input, then only noticeable by it sometimes jerking, speeding up, especially when the object nears edge of screen.<br><br>In areas where there's little gfx it's speeding up, while in places with a lot of gfx it slows down. It least that's my impression of the issue and would explain the erratic camera behavior. It seems there's no timings/correction/compensation at work, which becomes more noticeable the more gfx are in the scene(with possibly a slower CPU/GPU as mine?) in combination with nothing at all, such as in space.<br><br>I had noticed this before in for instance test7.bb when at the wall like object, the cam is moving slow, then when moving the mouse to the right the cam jumps and is very hard to get back into the previous position as it skips over it. I thought in beginning this was intended behavior you wanted to check things with or correct/make use off at a later stage, but it does defer from how Blitz3d normally behaves.<br><br>Could be I'm completely off and that there's another explanation for this, it's just what I think is going on. Hope it helps. <br><br></td></tr></table><br>
<a name="1244066"></a>

<a name="1244067"></a>

<a name="1244068"></a>

<a name="1244069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK bit of an update to this, for I might be wrong. <br><br>What appears to happen is this:<br>I start the program and after it initializes the cam goes weird and gfx fly all over the place. <br>Then if I try cursorkeys in like 5-10 seconds it starts to behave normal, even when using the mouse for control!(?)<br>This is really weird.<br>If do not manage to gain control within like 15 secs or so then its not gonna happen again until restart.<br><br>Can it be mouse is not being properly addressed?<br><br>Also I noticed the LeftShift key gave the correct slow speed value, but the RightShift key acts as if LeftShift was pressed, while should give high speed.<br>Another thing I noticed is that wiredframe shows upon the earth sphere when in close up. <br><br></td></tr></table><br>
<a name="1244071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update nr 2:<br><br>Spaceship now does show up, even though bright white untextured.<br>And I when I managed to gain control, I can also press keys 1-0 to jump to planets, but pressing S-key doesn't show cam in rear of ship as should, or perhaps it does but it doesn't show up, so followcam fails. Perhaps it's at the wrong distance related to ship cos was kinda tricky to establish in the first place in vanilla Blitz3d, probably cos of scales. <br><br></td></tr></table><br>
<a name="1244562"></a>

<a name="1244597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for detailed assessment Rick.  I will try to iron all this out.  It seems there are still some bugs in some of the more basic commands. <br><br></td></tr></table><br>
<a name="1244572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anytime. ;-) Hopefully this makes things more clear. <br><br></td></tr></table><br>
<a name="1244591"></a>

<a name="1244592"></a>

<a name="1244593"></a>

<a name="1244594"></a>

<a name="1244595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Rick/BlitzSupport,<br>I have made significant progress with my userlib and this project, so I have uploaded an update.<br><br>I have also reuploaded the hardwired version of 2751(Interplanetary travel)9HW2.bb because I think you must not have converted it correctly to hardwired the first time.  So I have re-converted it, it took the original source 2751(Interplanetary travel)9.bb and put a dx in front of any commands that require that and inserted the default parameters into the functions that expect them.  Otherwise, I have not modified it in any way - to all intents and puposes, it is the same, but using hardwired...<br><br><a href="http://chipmunkplayer.free.fr/2751(Interplanetary_travel)9HW2.bb" target="_blank">2751(Interplanetary_travel)9HW2.bb</a><br><br><a href="http://chipmunkplayer.free.fr/release.zip" target="_blank"><img src="http://chipmunkplayer.free.fr/hardwired_button.gif"></a><br><br>Hope you like the improvements - it's getting there now, I'm happy with the progress made today.  :D <br><br></td></tr></table><br>
<a name="1244648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah.. the shuttle is showing it's textures properly now, good pne. <br><br>I'm making an assumption her but could it be you have given left and right shift keys the same code? for if I press the right shift it reacts as if I pressed left, thus giving the cam speed a value of 0.05(slow) while should be 5.0(high) when pressed right.<br><br>Also when first starting, the cam or mouse spins out of control, like as if it's making circles very fast, then when I zoom out it stabilizes and I can zoom in again and all goes well.<br><br>Suffering bit less camera jerking/pauses/hick-ups when going from busy to empty area now but still noticeable.<br><br>Another thing, but less important, is that the orbit/trajectory lines appear bit thick, probably no alpha yet?<br><br><br>Overall it appears to be bit more sturdy.<br><br>Many thanks. <br><br></td></tr></table><br>
<a name="1252137"></a>

<a name="1252309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Osoko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi. <br><br>I presume this is the current post running for hardwired lib. <br><br>Hybrid.exe crash on Windows 8.1 ( Blitzcc.exe crash in fact ) \ Test1.hd<br><br>It work's well on W7. <br><br></td></tr></table><br>
<a name="1262197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> After recent updates by Ploppy, now appears to be working fine and stable. Will examine more closely and release updated version over time. <br><br></td></tr></table><br>
<a name="1262252"></a>

<a name="1262257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShadowTurtle</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> the following question is really no joke.<br>how fast is the 2d engine?<br>can i redraw 3x 1024x786 images at constant 60 fps?<br><br>btw. second question from me:<br>without reading whole topic:<br>what was the adaptions making the demo working? <br><br></td></tr></table><br>
<a name="1262266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm getting "unable to find directx 9 on the resident system..." etc.  I have win 8.1 / dx11.  The dx11 test doesn't work either.  Ideas? <br><br></td></tr></table><br>
<a name="1262267"></a>

<a name="1262268"></a>

<a name="1262272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> -2d? no clue. Correct me if I'm wrong but afaik 2D in DX is just the similar to writing on 1 side of a 3d cube.<br>Redrawing an image of that size should be feasible in my opinion but haven't tested anything like that.<br><br>-Basically adding "dx" in front of all commands and leaving out some of the more advanced stuff that wasn't necessary for testing.<br><br>I see the archive is no longer avail, so I'll re-upload, later today, otherwise no media. <br><br></td></tr></table><br>
<a name="1262269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> @stayne, I don't think your dx9 is completely up to date -it's happened to a few people already.  Just google directx and download from the microsoft site.  This will check and install the latest version. <br><br></td></tr></table><br>
<a name="1262275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> That did the trick thanks Ploppy. <br><br></td></tr></table><br>
<a name="1262408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShadowTurtle</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok <br><br></td></tr></table><br>
<a name="1262806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jimmy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work, looking forward to see more of this.<br><br>I get a "Unknown runtime exception" on some (most) examples though, using a Surface3 how to solve that? <br><br></td></tr></table><br>
<a name="1264504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> No clue, perhaps an Win8.1 issue? Tried compatibility mode(rightclick, select properties..)? <br><br></td></tr></table><br>
<a name="1264520"></a>

<a name="1264531"></a>

<a name="1264533"></a>

<a name="1264534"></a>

<a name="1264535"></a>

<a name="1264536"></a>

<a name="1264538"></a>

<a name="1264540"></a>

<a name="1264541"></a>

<a name="1264542"></a>

<a name="1264543"></a>

<a name="1264565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Ploppy:<br><b>Hmm.. Was comparing the output of the 3 versions of the test program like this:</b><br><br>A. 2751(Interplanetary travel)9HW2.bb <b>(my original conversion)</b><br>B. 2751(Interplanetary_travel)9HW2(plop).bb <b>(Ploppy's conversion)</b><br>C. 2751(Interplanetary travel)9.bb <b>(the Blitz3d version ran from Hybrid)</b><br><br>D. 2751(Interplanetary travel)9.bb <b>(the Blitz3d version ran from Blitz3d itself)</b><br><br><br><br><b><u>Outcomes:</u></b><br>I) I couldn't see differences between my Hardwired conversion(A) and Ploppy's(B), or at least for now.<br><br>II) When comparing between the two Hardwired versions(A &amp; B) and the vanilla Blitz3d version run from Hybrid(C) and Blitz3d(D) itself, I've noticed the following:<br><br>-II.1) First thing that's obvious is the difference in lighting/coloring of the sun rays gradient(which is a quad). It appears the range is less gradual, the transision less detailed than under vanilla Blitz3d. My guess is that this can be fixed by adjusting the shader stuff somewhat?<br><br>-II.2) The controls are less smooth than in Blitz3d: when moving around the solar system passing by an area with less gfx it speeds up the movement, while in an area with more gfx elements the movement slows down. This causes a stutter in the controls, making the movements less smooth. <br><br>This is something I've noticed from the start of the Hardwired project in the accompanying examples, but comparing between the same code in vanilla Blitz3d and Hardwired/Hybrid makes it more obvious. I'm guessing in vanilla Blitz3d there's a balancing system for the timing to keep updates smooth and in line with what's to be expected. Or is this also a result of shaders? Is there a way around this? <br><br></td></tr></table><br>
<a name="1264546"></a>

<a name="1264547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wanted to add that I like what you created from my interplanetary travel code, Rick :-D And I didn't knew the space shuttle could fly THAT fast ;-) <br><br></td></tr></table><br>
<a name="1264560"></a>

<a name="1264564"></a>

<a name="1264566"></a>

<a name="1264567"></a>

<a name="1264568"></a>

<a name="1264569"></a>

<a name="1264570"></a>

<a name="1264571"></a>

<a name="1264572"></a>

<a name="1264672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Krischan:<br>Well, it's not the full thingy I did within Blitz3d. I've added your Milky Way and your Saturn shaded rings, added an asteroid belt (no billboards) and more. Not perfect yet though(reverse rotations, tilted orbits,real/virtual time switch, satellites and all that and just noticed Earth's atmosphere is too thick). When I get the time I'll have another go at it. 64bit would also help for calculations to add detail to the movements(bit jerky the larger it gets).<br><br>SpaceShuttle: It's the latest secret upgraded model they don't tell us about. ;-)<br><img src="http://i58.tinypic.com/bg74w1.jpg"><br><img src="http://i62.tinypic.com/2uzzgh2.jpg"><br><img src="http://i57.tinypic.com/5nr6ew.jpg"><br><img src="http://i57.tinypic.com/rmi7ly.jpg"><br><img src="http://i57.tinypic.com/t4y73l.jpg"><br>(screenshots from the updated vanilla Blitz3d version)<br>But I'm sure you have a better version incorporating all the modules you've produced over time. I'm more than curious to see what it looks like. <br><br></td></tr></table><br>
<a name="1264598"></a>

<a name="1264604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Rick.  I too have noticed some speed anomilies within hardwired.  This is particulrly apparent in my maze demo.  Sometimes the fps really goes down when turning the camera.  I think I may have badly configured the z-buffer but I haven't pinpointed it for sure.  Funny thing is that in directx11 mode I do not get this problem.  This may be related to your jitter problem in your demo (like the asteroids, btw).<br><br>However, you may get a smoother frame rate if you set vsyn on (if it isn't already) with dxFlip true.  But I don't think that is the heart of the problem and there's something I'm missing I do have to sort out in the renderer.  I will look into but that's only one of a whole heap of problems I have to look into.<br><br>Keep those bug reports coming though when you have time.  There are undoutably some things I have not noticed and it's even better to have example bb code to help demonstrate bugs. <br><br></td></tr></table><br>
<a name="1265170"></a>

<a name="1265172"></a>

<a name="1265173"></a>

<a name="1265174"></a>

<a name="1265198"></a>

<a name="1265199"></a>

<a name="1265202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> ***************<br>* BUG REPORTS *<br>***************<br>@Ploppy: Bit of rain on the parade. Compatibility issues regarding Unicode?<br><br>Ran in Blitz3d with Hardwired dll and decls installed:<br><img src="http://i57.tinypic.com/214sfh4.jpg"><br>As you can see, things show up in Chinese. Shouldn't it be that default is ASCII to retain compatibility with earlier/vanilla Blitz code?<br><br>Ran in Hybrid also:<br><img src="http://i57.tinypic.com/2wnxph5.jpg"><br>Window title: "Output Window(Not Responding)"<br>Pop up msg: "blitzcc.exe has stopped working"<br><br>Problem details:<br><br>"Problem signature:<br>  Problem Event Name:	APPCRASH<br>  Application Name:	blitzcc.exe<br>  Application Version:	0.0.0.0<br>  Application Timestamp:	55255b7b<br>  Fault Module Name:	runtime.dll<br>  Fault Module Version:	0.0.0.0<br>  Fault Module Timestamp:	55256442<br>  Exception Code:	c0000005<br>  Exception Offset:	0006fdb3<br>  OS Version:	6.1.7601.2.1.0.256.1<br>  Locale ID:	1043<br>  Additional Information 1:	0a9e<br>  Additional Information 2:	0a9e372d3b4ad19135b953a78882e789<br>  Additional Information 3:	0a9e<br>  Additional Information 4:	0a9e372d3b4ad19135b953a78882e789"<br><br>[UPDATE after latest release]<br>Hardwired: no more Chinese.<br>Hybrid: still crashes with above error code. Is there a difference in the Hybrid version? <br><br></td></tr></table><br>
<a name="1265177"></a>

<a name="1265208"></a>

<a name="1265209"></a>

<a name="1265221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Freaky stuff, thanks for the bug report.  Check out my latest release, it may fix it - please feel free to let me know if it doesn't as I need to know these kind of things.<br><br>Cheers as always....<br><br>Edit:  Rick, can you give me/send me an example that I can test out here?  If not, try to see where it bugs out if you have time.  Either put debug mode on, it may show you before it crashes (though I don't think it will), or insert an End statement somewhere (half way is a good start) in your code and test to see if crashes.  If if doesn't crash move if further down the code and test again, if it does crash move it up in the code until it doesn't crash any more.  That way you can isolate the line of code that makes your program crash and you will be able to tell me the command that is giving you trouble.  Thanks. <br><br></td></tr></table><br>
<a name="1265269"></a>

<a name="1265270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Ploppy. I'm just using the test same code as before, nothing exotic(see post# 28 above) to test if things keep running smooth and sound. <br><br>I've tested with debug enabled and disabled, but no difference this time: in Hybrid it just crashes with error report above. The Hardwired version doesn't have the Chinese characters anymore and seems to be running OK, apart of course from the earlier mentioned pause when more complex gfx are in view and speed up when less in view.<br><br>The latter may be mouse control related, I'll check for you if also happens when just using key controls. I will also prep a test package so you(or others) can test for yourself. <br><br></td></tr></table><br>
<a name="1265271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does Hybrid crash with every program or just some on your system? <br><br></td></tr></table><br>
<a name="1265273"></a>

<a name="1265286"></a>

<a name="1265287"></a>

<a name="1265289"></a>

<a name="1265290"></a>

<a name="1265402"></a>

<a name="1265403"></a>

<a name="1265404"></a>

<a name="1265405"></a>

<a name="1265406"></a>

<a name="1265407"></a>

<a name="1265408"></a>

<a name="1265409"></a>

<a name="1265410"></a>

<a name="1265411"></a>

<a name="1265412"></a>

<a name="1265416"></a>

<a name="1265417"></a>

<a name="1265418"></a>

<a name="1265419"></a>

<a name="1265420"></a>

<a name="1265422"></a>

<a name="1265423"></a>

<a name="1265424"></a>

<a name="1265425"></a>

<a name="1265426"></a>

<a name="1265428"></a>

<a name="1265429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Ploppy: Few things..<br>- Indeed I noticed the same thing as Virtlands(Request File error) and mentioned in my latest post. <br>- I also found that AppTitle doesn't appear to work. <br>- Can't get my testapp to run in Hybrid though.<br><br>I assembled a <a href="https://www.mediafire.com/?7ydi3hyfbhg6qp2" target="_blank">downloadable test set here(incl. media 24.73MB </a>, so you can crosscheck my findings regarding the testcode I was running.  <br><br><u>This archive contains:</u><br><br>1. <b>"Interplanetary travel_2751_Original version by Krischan.bb"</b><i>- As described in title(the most bare Blitz3d version).</i><br>2. <b>"Interplanetary travel_Blitz3d version.bb"</b><i> - A modded version of above code. Can be run under original plain Blitz3d and Hybrid to test compatibility.</i><br>3. <b>"Interplanetary travel_Hardwired version.bb"</b><i> - Same  as above, but all commands converted to their Hardwired equivalent(prefix DX)</i><br>4. <b>"Interplanetary travel_Hardwired version revised by Ploppy.bb"</b><i> - The same as version above, but revised by Ploppy.</i><br>5. <b>"GFX"</b><i> - Folder holding media freely available from NASA.</i><br><br><br><b><u>Test Results so far:</u></b><br><br><b>For Hardwired:</b> <br>Thought I was going nuts, or my system was having issues, so decided to go back a few versions and put these older DLL and Decls in the Blitz3d UserLibs folder. Now by testing something became clear to me: <br>Blitz3d actually also checks and uses the hardwired.dll/decls that are in the same directory as where the file you are trying to run is located and executed from.(e.g: "maze.bb").  I didn't realise that before. Sorry I missed that one. Ahum. Perhaps better to put them in a separate folder "userlibs" to avoid confusion?<br><br>-With the new dll/decls versions that introduce the types %%,##,$$:<br>    1. "Interplanetary travel_Blitz3d version.bb" working fine(should be as is bog standard Blitz3d)<br>    2. "maze.bb" is not working "User lib function not found".Debug points to &gt;&gt; font=dxLoadFont("times",18,True,True,0) &lt;&lt; also goes for most other test examples.<br>    3. "test2_physx.bb".( conversion from .hb file, included below): all fine.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Const count=50;change number of teapots here...
Const vidcube_count=500;change number of teapots here...


dxDebugLoud;AndHarsh


dxInitPhysx
dxSetGravity 0,-2,0

Include "includes\cam_generic.bb"
Include "includes\gfx_generic.bb"

player_material=dxCreateMaterial(1,1,1)

GetBestGfxMode

dxUseDirectX11 True
;Graphics3D(800,600,32,2)


dxApptitle "Direct x 9 test window",""

dxShowMouse

cheq=dxLoadTexture("images\imgres.jpg",9)

sph=dxCreateTeapot(0)

dxHideEntity sph
For a=1 To count
sub=dxCopyEntity(sph,0)

dxShowEntity sub
r#=Rnd(1)+1

dxSetMass cs,1000*r
dxScaleEntity sub,r,r,r,0
dxDynamicActor sub,0
dxEntityTexture sub,cheq,0,0
dxSetVelocity sub,0,-Rnd(1),Rnd(10)
dxPositionEntity sub,Rnd(256),50+Rnd(10),Rnd(256),0
dxEntityFX sub,1
dxEntityColor sub,Rnd(156)+100,Rnd(156)+100,Rnd(156)+100

dxEntityTexture sub,cheq,0,0
Next

Goto toilet ;couldn't resist - please excuse my sillinesss... 
.toilet

dxAmbientLight 64,64,64
cam=dxCreateCamera(0)
dxCameraClsColor cam,127,127,127

cs=dxCreateCube(cam)
dxScaleEntity cs,2,2,2,0
dxPositionEntity cs,dxEntityX(cam,True),dxEntityY(cam,True),dxEntityZ(cam,True),True

dxSetMass cs,1000
dxDynamicActor cs,player_material

dxMoveEntity cam,0,20,-20

;terrain
terrain=dxLoadTerrain("images\height_map.bmp",0)
dxEntityShininess terrain,1
dxEntityColor  terrain,255,255,255
terrain_tex=dxLoadTexture("images\MossyGround.bmp",9)
dxEntityTexture terrain,terrain_tex,0,0
dxScaleEntity terrain,1,64,1,True
dxStaticActor terrain,0

dxPositionEntity cam,128,50,128,0


dxRenderWorld 0
diff#=0
lastmilli=MilliSecs()

Repeat
	milli=MilliSecs()
	diff=milli-lastmilli
	lastmilli=milli
	
CamMove cam,.01,diff

If dxKeyDown(57)
dxSetGravity 0,4,0
Else
dxSetGravity 0,-2,0
EndIf

If dxKeyHit(28)
dxSetVelocity cs,0,0,0
dxSetTorque cs,0,0,0
EndIf



If dxKeyHit(210)
file$=dxRequestFile$("Please select a video file to play...",CurrentDir$(),"all video files|*.divx;*.mpg;*.avi;*.mp4;*.mkv|mpg files|*.mpg|avi files|*.avi|mp4 files|*.mp4|mkv files|*.mkv|divx files|*.divx")

If (file$&lt;&gt;"")

If (vid&lt;&gt;0) dxFreeVid vid
vid=dxVidLoad(file$)
;vid=VidDownload("http://youtu.be/iNwC0sp%2DuA4")

If (vid=0) 
RuntimeError "Invalid file to play as video"
Else
vidtex=dxCreateTexture(dxVidWidth(vid),dxVidHeight(vid),9,0)
dxVidTexture vid,vidtex
sph=dxCreateCube(0)
dxHideEntity sph
For a=1 To vidcube_count
sub=dxCopyEntity(sph,0)
dxShowEntity sub
dxEntityFX sub,1
dxDynamicActor sub,0
dxPositionEntity sub,Rnd(256),50+Rnd(10),Rnd(256),0
dxEntityTexture sub,vidtex,0,0
Next
dxVidPlay vid
EndIf

EndIf
lastmilli=MilliSecs()
EndIf



dxRenderWorld 0

Text 10,10,"Hold [SPACE] to jolt gravity: FPS "+dxGetFPS()
Text 10,24,"Hit return to reset camera velocity and spin to 0"
Text 10,38,"Hit insert to create videocubes!!!"


dxPositionEntity cs,dxEntityX(cam,True),dxEntityY(cam,True),dxEntityZ(cam,True),True
dxPhysicsAdvance diff/600.0

dxUpdateWorld 0

dxFlip 0
dxPositionEntity cam,dxEntityX(cs,True),dxEntityY(cs,True),dxEntityZ(cs,True),True

Until dxKeyDown(1) Or dxMouseHit(1)
dxFreeVid vid
dxEndGraphics
End
</textarea><br>    4. "Interplanetary travel_Hardwired version.bb": all fine.<br><br><br><b>For Hybrid:</b><br>I was running Hybrid from the "C:\Program Files (x86)\Hybrid" for ease of use(windows knows to execute the Hybrid.exe once taught the .hb file type)<br>   but ditched that to have more control over which version to use.<br><br>-Older version(the latest particle version): all fine, can run all; <br>    1."Interplanetary travel_Blitz3d version.bb" (so fully compatible with blitz3d).<br>    2."maze.bb"<br>    3."test2_physx.hb".<br><br>-Newer version(the x64 type introduction): <br>    1."Interplanetary travel_Blitz3d version.bb" crashes with a gray screen and error "Blitzcc.exe has stopped working".<br>    2."maze.bb" is OK. <br>    3."test2_physx.hb" has error "Incorrect function return type" on the "RequestFile$" command. <br><br><br><br><b><u>Questions:</u></b><br>- Does Hybrid break compatibility with previous Blitz3d code due to defaulting to x64 ##?<br>- If so then better to do a separate x64 version otherwise lots of converting to be done for existing Blitzers?<br>- May I ask in what path you've installed Hybrid?<br><br>* Perhaps someone else can also try to verify if my results are replicable? <br><br></td></tr></table><br>
<a name="1265427"></a>

<a name="1265433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Rick, it is true that especially due to the introduction of the new unicode string, there are a few functions that sway away a little from the blitz standard.  The only real change is that for some bb code, small changes will have to be made in a function's return type.  For example Blitz3d's CurrentDir() function uses the standard string type '$'.  In a blitz3d program, you can use the command CurrentDir() as for any string returning function in two ways...<br><br>1&gt;  a$= CurrentDir()<br>2&gt;  a$= CurrentDir$()<br><br>I know that personally I have the habit of using the second version.  Other people than me probably do too.  I was brought up with basic, and started programming in the 80's with a ZX81, so was used to this kind of syntax with commands such as Chr$.  This way of coding hasn't left me, and is not likely to.<br><br>Both methods in B3D are acceptable, if you use the first method, the compiler will return the type that is defaultly configured for the function in question - so the result is the same.  If however you try using another type in it's place...<br><br>a$=CurrentDir%()<br><br>...you will get an error message 'Incorrect function return type'.  This is because the function is not configured to give it's return value in this format.<br><br>All of the above is also true for Hybrid.  Most of the compiler and it's solid rules have remained intact on this front.  Like I mentioned in my worklog, I have reconfigured certain basic commands to now return unicode strings rather than standard strings.  Now the default return type for CurrentDir() is $$.  So now the two methods below are now valid...<br><br>1&gt;  a$= CurrentDir()<br>2&gt;  a$= CurrentDir$$()<br><br>Any other type (including the old default return type) will now be invalid, and the compiler will indicate it so.<br><br>So, I do understand that for some programs this could be a little annoying to have these errors, but all you need to do to correct them is to change the return type of the functions in question.  Or, to maximize compatibility between both B3D and Hybrid, you can just choose method 1 of the above which work both as effectively on both compilers.  This way you have no errors and will not need to edit your code each time you change compilers.<br><br>I understand that this could be inconvinient for some, but for most people and most code, you will only need to edit a few lines eliminate these function return type errors and all is once again normal.  I still believe however that unicode is a good and more modern approach to programming, accessibility is much improved and gives so many more options - this is why I wish to adopt this standard for my functions.  If the programmer does not wish to use unicode strings of course he doesn't need to and can continue with standard strings with complete transparency apart from keeping with the return type rule.<br><br>I'll let you know about the rest tomorrow, cheers for the thorough test Rick - I really do appreciate... <br><br></td></tr></table><br>
<a name="1265434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're welcome. :-) I do get where you are coming from cos I myself started out with the ZX81(was lent to me for 2 weeks by my cousin), followed by an Aquarius(don't ask ;-), C16/C64's and Amiga500/1200's.CHR$(13)<br><br>I really see method 1 as sloppy programming and do see Unicode as a big improvement. However one of the benefits of Blitz3d is the extensive amount of code in the code archives/forums, of which quite a bit is using sloppy method 1, but also method 2, and that potentially could frustrate a lot of people. Especially beginners I fear could get confused and abandon ship. <br><br>For that reason I personally would have chosen it the other way round to retain max compatibility, so people could just keep running the old code, and when in need for Unicode, exclusively declare that by using $$.   <br><br>But I can imagine it would take ages of recoding and me, myself and I can live with it perfectly fine as is of course. <br><br></td></tr></table><br>
<a name="1265440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> If only things were that simple!  In fact, now that I know what to look for and in what parts of the code I need to configure these string related commands, converting them back to normal string return type is not a time-consuming task so no bother for me.  But this is not the problem unfortunately.<br><br>If for example you keep the CurrentDir$() as the default B3D function and you assign it to a unitype string variable...<br><br>a$$=CurrentDir$()<br><br>The variable of a$$ would contain the output of the currentdir function, which is of course of a single string type.  If the name of the current directory contained a unicode character (who is to say that some people do not name thier folders/files with thier own alphabets?), the output of the CurrentDir$ function will not contain these characters because an ascii string doesn't support any code above the 1-byte limit.  So assigning it to a unicode variable is definately possible, but it would already be too late.  Since the output already lacks the unicode characters, converting it to unicode would still only contain the ascii characters.  One could say lost in translation (boring film IMHO - watch it when drunk, goes by faster...)<br><br>If however, the CurrentDir$$() function is configured to output its result as a unicode string nothing is lost.  If you then assign it a unicode variable no change needs to be made and again nothing is lost.  If you assign it to an ascii string the unicode string will be converted - if it contains any unicode characters the variable will of course not contain them and will be converted to a question mark or a square character, which is found in the ascii set. <br><br></td></tr></table><br>
<a name="1265441"></a>

<a name="1265442"></a>

<a name="1265443"></a>

<a name="1265446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I see what you mean. Rather impossible indeed. Interesting insight.<br>BTW: nice fix for the IDE.<br><br>Ran test2_physx.hb in it: all fine, playing the audio &amp; video, but as long as the video is in same directory.<br><br>Still can't run get "Interplanetary travel_Blitz3d version.bb" yet though.<br>Using the debugger manually(inserted 'stop' command) I managed to pin point where things go wrong:<br><pre class=code>
Function Initialize()
	Local p%,m%
	Local parent%,name$,radius#,period#,size#,r%,g%,b%,plt$,mnt$,rtp#
	Local speed#,entity%,random%,orbit%,atmosphere#
	
	; read planet data
	Restore PLANETDATA
	
	For p=1 To PLANETS
		
		Read parent,name,radius,period,size,r,g,b,plt$,rtp#,atmosphere# ; &lt;&lt;&lt; in this line
</pre><br>	<br>So guess it's variable related. <br><br></td></tr></table><br>
<a name="1265444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> I may however create two versions of each function that returns a string....<br><br>CurrentDir$()<br>UniCurrentDir$$()<br><br>...for example.  This would bring compatibility back and at the same time keeping the option of being able to manipulate unicode strings.  I'll think this over... <br><br></td></tr></table><br>
<a name="1265454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Might be a good idea, if feasible. Did you see my above post? Any clue what's causing this? I've tried defining the variables, but still the same crash. <br><br></td></tr></table><br>
<a name="1265499"></a>

<a name="1265500"></a>

<a name="1265501"></a>

<a name="1265502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Ploppy&gt;&gt;If i am interested to convert some of my codes in hardwired, can i run 2 Blitz3d ide ? One with the blitz3d code, one with the hardwired code ? And will i be able to compile and to run both versions (one at a time) ?<br>If yes i will try to convert some of my codes in hardwired and maybe help you to find bugs.<br><br>Thanks, <br><br></td></tr></table><br>
<a name="1265504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi RemiD, Yes I think you should be able to run both B3D and Hybrid at the same time if that's what you mean.<br><br>@Rick, I have just uploaded another update for Hybrid and I have tested it out on your interplanetary demo - it works now. <br><br></td></tr></table><br>
<a name="1265505"></a>

<a name="1265506"></a>

<a name="1265507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Ploppy&gt;&gt;And can i run 2 blitz3d ide, one with blitz3d code (syntax and functions) and the other with hardwired code (syntax and functions) and will i be able to compile and run both (one at a time).<br>This way i can code in Blitz3d (syntax and functions) and code in Hardwired (syntax and functions) and test both codes (one after the other). <br><br></td></tr></table><br>
<a name="1265546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> @RemiD: I think should work. Did it in the past, while was converting Blitz3d code to Hardwired. <br><br></td></tr></table><br>
<a name="1265552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Rick&gt;&gt;Ok i will try, thanks. <br><br></td></tr></table><br>
<a name="1265574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> In this lib does draw image use biting like BLITZ3D or does it use hardware acceleration like Blitz max ? <br><br></td></tr></table><br>
<a name="1265585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> When not in Graphics3D mode, hardwired/hybrid will use the standard original blitz code (in other words, Blitting) - I may change this later.  However, it will use the directx surface manipulation routines in 3d mode. <br><br></td></tr></table><br>
<a name="1265603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> So ploppy if I use Graphics3D , drawimage will work like BlitzMax? where the 3D hardware handles the drawing ? <br><br></td></tr></table><br>
<a name="1265615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> To my knowledge, that's right. <br><br></td></tr></table><br>
<a name="1265667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will have to test this then. Does that mean you may be adding things like rotation, color, scale ect to drawimage ?? <br><br></td></tr></table><br>
<a name="1265672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes.  I plan to cover pretty much 99% of the original b3d command set.  The only thingd that are not likely to be covered are the bsp routines. <br><br></td></tr></table><br>
<a name="1265874"></a>

<a name="1265875"></a>

<a name="1265876"></a>

<a name="1265877"></a>

<a name="1265878"></a>

<a name="1265879"></a>

<a name="1265880"></a>

<a name="1265881"></a>

<a name="1265882"></a>

<a name="1265883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShadowTurtle</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> no support for bsp routines!? no support for fast collision system (octree-only is not acceptable!)!? :--O<br>since peoples read that, nobody is using HardWired/Hybrid anymore ;..)<br><br>Please do not missunterstand my posting. Many software are the mega-hammer products but never really used since important feature(set) are missed.<br><br>Compare the UE4 with Cryengine. Compare unity with Cryengine. Cryengine is the BEST. But it lags on -&gt;fast&lt;- team-working-features. Making the same great game with UE4 is faster than creating it with Cryengine. By the way.. the creators of the cryengine had big financial problems trough lackin features like that Oo<br><br>I can not unterstand you. HardWired/Hybrid is based on a fork of Blitz3D-Source. Why cutting bsp feature!? <br><br></td></tr></table><br>
<a name="1265884"></a>

<a name="1265888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you can convince me of its utility I'll include it.  I just had the feeling that bsp was not used any more...<br><br>Hardwired is not based on a fork of the b3d source.  I started work on it wayyyy before the blitz source was released. <br><br></td></tr></table><br>
<a name="1265885"></a>

<a name="1265893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Guys - just one little thing, please use my thread for all things Hybrid/Hardwired.  It's easier for me to follow that way, and all related discussion remains together in the same place.  This is Rick's thread, focusing mainly on the topic of testing hardwired especially with his interplanetary demo. <br><br></td></tr></table><br>
<a name="1265901"></a>

<a name="1265902"></a>

<a name="1265904"></a>

<a name="1265905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShadowTurtle</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry. I had not know that you wrote the hybrid compiler etc. too<br>By the way... please play the game "neverball" (google it). It is a modern game with realy nice graphic and is using bsp maps. <br><br></td></tr></table><br>
<a name="1265906"></a>

<a name="1265907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShadowTurtle</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> delete <br><br></td></tr></table><br>
<a name="1265908"></a>

<a name="1265909"></a>

<a name="1265910"></a>

<a name="1265911"></a>

<a name="1265912"></a>

<a name="1265913"></a>

<a name="1265914"></a>

<a name="1265915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did say that Hardwired was created before the release of the b3d, I was very clear about that.  I <b>never</b> said that Hybrid was however created before the release of said b3d source.  Hybrid is indeed based on a fork of the b3d code.  However, as the name suggests, Hybrid is an offspring of b3d and hardwired together, and Hybrid and Hardwired should not be confused as they are different entities.  Hardwired is a userlib dll and Hybrid is a combination of this userlib and a customised version of the blitz compiler.  The whole of the hardwired engine's code and all routines are kept within Hybrid.  For any 3d based command called using Hybrid, calls are made directly to the internal hardwired lib, just as you would by calling a userlib function.  These routines are independant of the blitz routines; even though they are called by them and the compiled program.  Management of all related hardwired object types is completely done by hardwired.  Since the base hw routines were programmed before the release of the b3d source combined with the fact that hw uses dx9/dx11 and not dx7, <b>all</b> of the the 3d routines from the original source are not at all compatible with any hw routine so they would have to be converted if needs be.  In hybrid, the main program, statements, string/file/bank/array handling, expressions and basic maths are indeed managed by the b3d compiler/runtime which of course came from the b3d source.<br><br>If I count on including BSP handling routines, I need to create my own routines that fit in with the rest of the hardwired architecture - I can of course take inspiration from the old b3d source; but changes/additions have to be made.  This takes time.  It doesn't bother me too much about including it but I have to judge it being worth it.  If you think it is, I'll have a look into it - I have to say that I do not know a lot about bsp trees for the moment.<br><br>Hope that's clear...<br><br>P.s.  Neverball is pretty good fun, reminds me big time of Hamsterball that I have for the ps3... <br><br></td></tr></table><br>
<a name="1265965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Krischan did a nice demo for BSP trees, which looks pretty good(as all of his stuff):<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=90144" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=90144</a><br>and here something related:<br><a href="http://www.blitzbasic.com/Community/post.php?topic=89714&amp;post=1019762" target="_blank">http://www.blitzbasic.com/Community/post.php?topic=89714&amp;post=1019762</a><br><br>Looks like a hassle to set up and all, but may well be worth it.<br>Dunno how much it´s being used in the industry though. <br><br></td></tr></table><br>
<a name="1266170"></a>

<a name="1266171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ShadowTurtle</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Krischan is using a modified version of the file format. This is a "no go".<br><br>The sources in the code-archive are not compatible with large maps (original blitz3d).<br><br>Today you can ignore bsp leafs/node management. It is sen the bunch of polygons to ya octree engine :-)<br><br>See that:<br>I have not the time writing a editor for my game.<br>I have only the time writing my game.<br><br>The question is now:<br>Wich userbase do you support with ya engine?<br>Mainly creating a game or creating editor-apps? :-) <br><br></td></tr></table><br>
<a name="1266225"></a>

<a name="1266226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi ShadowTurtle,<br><br>The user base I am aiming at is anyone that is interested.  If they are, that's great.  If not, well - it's for free, so it's not going to affect my sales ;D<br><br>As for Hardwire's nature, I intend to add as many functions so that it is able to access most kinds of hardware if possible and to make the most out of directx9/11 capabilites (depending my own capabilities of course).  So the kind of software developed using it should principally depend on the programmer's imagination -  I hope that Hybrid/Hardwired will be able to give as many if not more programming options than b3d does... <br><br></td></tr></table><br>
<a name="1267891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> .. <br><br></td></tr></table><br>
<a name="1267892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> ShadowTurtle! OMG! GO AWAY! You got our thread locked because of your stupidity! Thanks ALOT for NOTHING! <br><br></td></tr></table><br>
<a name="1267912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/posts.php?topic=104554" target="_blank">So...new thread out, n°13- hope it's luckier than n°12, see you there!</a><br><br>Hmmm... I'm not a superstitious kinda person but perhaps I should just start a thread n°14 immediately ;D <br><br></td></tr></table><br>
<a name="1267913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ploppy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Rick - I was thinking of including a text-file version of your beginners FAQ, I have noticed that still some people haven't noticed that there are two versions of my project included in the release and I'd like to make it clear the differences between HW and HY.  Is that ok with you if I include that as a file? <br><br></td></tr></table><br>
<a name="1267947"></a>

<a name="1267948"></a>

<a name="1267949"></a>

<a name="1267953"></a>

<a name="1267972"></a>

<a name="1267980"></a>

<a name="1267982"></a>

<a name="1267983"></a>

<a name="1267984"></a>

<a name="1274129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> [EDIT: updated main info text] <br><br></td></tr></table><br>
<a name="1293078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gpete</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> How does this work? I mean what do I do to use this? <br><br></td></tr></table><br>
<a name="1293130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/logs/userlog.php?user=13255&amp;log=1897" target="_blank">http://www.blitzbasic.com/logs/userlog.php?user=13255&amp;log=1897</a><br><br>The DLLs go in the same directory as your main source file. The DECLs files go inside Blitz3D\Userlibs most-likely in your Program Files (x86) folder.<br><br>Then just read the examples &amp; help documents on how to use Hardwired.<br><br>It's not that hard, pun not intended! :)<br><br>Hope this helps!<br><br>~GF <br><br></td></tr></table><br>
<a name="1293188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Scroll allll the way up and check:<br><br>2 - What is the difference between Hardwired and Hybrid /<b> How to setup?</b> <br><br></td></tr></table><br>
<a name="1311512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dna</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> What happened to the Facebook page? <br><br></td></tr></table><br>
<a name="1311713"></a>

<a name="1311730"></a>

<a name="1311732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sad news. See <a href="/posts.php?topic=106535#1311712" target="_blank">&lt;here&gt;</a> :-(<br><br>Ploppy's last postings on his work to Hardwired/Hybrid:<br><a href="/posts.php?topic=105010#1299664" target="_blank">Hardwired/Hybrid - DX9 and DX11 Userlib(Part XIV) </a> <br><br></td></tr></table><br>
<a name="1311753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nasher, can you ask his wife if it's ok to release his source as open source so people can continue on with his legacy? I'm not good at C++ but I'm sure someone else is! I want this dedicated to him!<br><br>I'm very honorable &amp; prideful when it comes to saluting someone!<br><br>Thanks alot, Rick!<br><br>Regards, <br><br>~GF <br><br></td></tr></table><br>
<a name="1311835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, yeah I indeed explained to her that he always mentioned he wanted to release the source in event of him being unable to finish his work and as you can see she replied in the register that she will have cousin look at it. Hope they will be able to do so and someone (or more in a joint collaboration) can pick up where he left off. <br><br>Keep your fingers crossed I'd say..<br><br>(you're welcome) <br><br></td></tr></table><br>
<a name="1311844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Nasher. :)<br><br>~GF <br><br></td></tr></table><br>
<a name="1315942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Rick Nasher<br><br>Is there a version or the latest where animated meshes are now working? thanks <br><br></td></tr></table><br>
<a name="1316044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not for afaik. Ploppy was redoing a lot before lightning struck. Last thing I know was his comment about it:<br><div class="quote"> <br>Anyway, I seem at the moment to be on a roll with my new skin/bone and animation routines. I have completed and testing my animation routines, comprising of complete control over separate animation sets for each mesh surface. These animation sets comprise in their turn complete management over sequences, nodes and keys.<br> <br></div><br>We all know what happened then: radio silence, followed by the dreadful news from his wife.<br><br>After her comments on the matter I haven't heard anything anymore. Hope all is fine with her and the kids. :-( <br><br></td></tr></table><br>
<a name="1316059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks and really unfortunate. On a lighter note, I hope we can get hold of the source so his legacy would continue in some form or another and not into obscurity. <br><br>Again thanks to Ploppy for this awesome work. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
