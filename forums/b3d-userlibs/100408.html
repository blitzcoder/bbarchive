<!DOCTYPE html><html lang="en" ><head ><title >SE BlitzMovie</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >SE BlitzMovie</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >SE BlitzMovie</a><br><br>
<a name="1185252"></a>

<a name="1185253"></a>

<a name="1185254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >alain</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there,<br><br>As I needed to enhance movie playing poor capacities of Blitz3D, I developed my own DLL for handling this task.<br><br>I had a hard time to find bits and pieces of information to make it working, so I think it may interest some people. <br><br>The DLL is provided with an example and the DLL source code (C++)<br><br><b>Features:</b><br><br>- Play movie directly on a 3D texture.<br>- If the movie is 25FPS, the 3D rendering is not anymore capped to 25 FPS.<br>- you can pause movie playing.<br>- you can add some filter to the movie.<br>- you can change the volume of the sound.<br>- play movie in loop.<br><br>Maybe some important features are missing, because this library has been developed for my needs for my software ( <a href="http://www.slide-effect.com" target="_blank">http://www.slide-effect.com</a> ) so if you need something else you can check the source code to add what you need. <br><br>Commands:<br><br><b>SEM_Init()</b>: to be called before using the library<br><br><b>SEM_Clear()</b>: to be called before leaving<br><br><b>SEM_OpenMovie%(filename$,bLoop%,fx%,startPaused%)</b> : to start playing a movie.<br>Returns: a handle to the movie<br>Filename: filename of the movie to be used.<br>bLoop: true if the movie will restart when ending<br>fx: a value between 0 to 14 to add special fx to the movie:<br>0: no effect<br>1: grayscale<br>2: TV scan effect<br>3: Blue filter<br>4: Green filter<br>5: Red filter<br>6: White as transparent<br>7: Black as transparent<br>8: Green as transparent<br>9: Black and white<br>10: Black and white (black as transparent)<br>11: Black and white (white as transparent)<br>12: Negative<br>13: Blur<br>14: Edge detection<br><br><b>SEM_CloseMovie(handle%):</b> close movie<br><br><b>SEM_DrawMovie(handle%,texture%,x%,y%):</b> draw the movie to the texture<br><b>SEM_MovieWidth%(handle%):</b> get the movie width<br><b>SEM_MovieHeight%(handle%):</b> get the movie width<br><b>SEM_MoviePlaying%(handle%):</b> to know if a movie is still playing<br><b>SEM_PauseMovie(handle%,bPause%):</b> to pause a movie<br><b>SEM_PauseAllMovie(bPause%):</b> to pause all movies<br><b>SEM_MovieVolume(handle%,volume%):</b> to change the volume (0-100) of a movie<br><b>SEM_MovieAllVolume(v%):</b> to change the volume (0-100) of all movies<br><br>These following are useful if you want to know the size of a movie without playing it:<br><b>SEM_InitMovieDimension(filename$):</b> call this one to read information<br><b>SEM_MovieDimensionWidth%():</b> get the width<br><b>SEM_MovieDimensionHeight%():</b> get the height<br><br>I know the source code is a bit messy, don't blame me for that :)<br><br><b>Download link for the DLL, userdecls, example and source code:</b><br><br><a href="http://www.devsoft.ch/SEBlitzmovie/SEBlitzMovie.zip" target="_blank">http://www.devsoft.ch/SEBlitzmovie/SEBlitzMovie.zip</a> <br><br></td></tr></table><br>
<a name="1185285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is very cool, thanks for sharing. <br><br></td></tr></table><br>
<a name="1187425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are the filter effects something built-in with DirectX 7 or earlier, or are they processed by DLL functions? <br><br></td></tr></table><br>
<a name="1187931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >alain</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not built-in, it is processed by the DLL.<br><br>I have to copy byte by byte the bitmap from Directshow to the texture, so filters do not cost much processing time. <br><br></td></tr></table><br>
<a name="1188777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good to know! Thanks, alain! <br><br></td></tr></table><br>
<a name="1204697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> OMG! THANK YOU! I'VE BEEN WAITING FOR THIS FOREVER! O_O<br><br>Here's a fix to get rid of that nasty black line on the video on the cube, this also adds the ability to not only pause the movie, but the rotation of the cubes as well: <br><br><pre class=code>; SE_BlitzMovie Example
; ---------------------

SEM_Init()

;set up fps counter
fps_milli=MilliSecs(): fps_counter=0: update_frequency=1000


Graphics3D 640,480,32,2
SetBuffer BackBuffer()

AmbientLight(255, 255, 255)

camera=CreateCamera()
CameraClsColor camera,102,102,255

; Create cube
cube1=CreateCube()
cube2=CreateCube()
cube3=CreateCube()


PositionEntity cube1,-3,0,5
PositionEntity cube2,0,0,5
PositionEntity cube3,3,0,5

w=512
h=512

tex1 = CreateTexture(w,h,1+16+512)
tex2 = CreateTexture(w,h,1+16+512)
tex3 = CreateTexture(w,h,1+2+16+512)

SetBuffer BackBuffer() 
hm1%=SEM_OpenMovie("example.avi",True,0,0)
hm2%=SEM_OpenMovie("example.avi",True,12,0)
hm3%=SEM_OpenMovie("example.avi",True,10,0)

EntityTexture cube1,tex1
EntityTexture cube2,tex2
EntityTexture cube3,tex3

ScaleTexture(tex1, 1.50, 1.50)
ScaleTexture(tex2, 1.50, 1.50)
ScaleTexture(tex3, 1.50, 1.50)

pause=False

While Not KeyDown( 1 )

If(KeyHit(28))

	pause=1-pause
	
	SEM_PauseAllMovie(pause)
	
EndIf

If Not pause

	RotateEntity cube1,MilliSecs()/100.0,MilliSecs()/100.0,MilliSecs()/100.0
	RotateEntity cube2,MilliSecs()/100.0,MilliSecs()/100.0,MilliSecs()/100.0
	RotateEntity cube3,MilliSecs()/100.0,MilliSecs()/100.0,MilliSecs()/100.0

EndIf

RenderWorld()

SEM_DrawMovie(hm1,tex1,0,0)
SEM_DrawMovie(hm2,tex2,0,0)
SEM_DrawMovie(hm3,tex3,0,0)

; fps counter--------------------------------
fps_counter=fps_counter+1
If fps_counter=update_frequency
     fps=1000.0/Float(((MilliSecs()-fps_milli))/Float(update_frequency))
     fps_milli=MilliSecs()
     fps_counter=0
     EndIf

Text 0,0,"FPS:"+fps
;--------------------------------------------
Text 0,20,"Press [Return] to pause movie. height:"+SEM_MovieHeight(hm)+" width:"+SEM_MovieWidth(hm)
Flip 0
Wend
SEM_CloseMovie(hm)
SEM_Clear()
End</pre> <br><br></td></tr></table><br>
<a name="1204779"></a>

<a name="1204780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >virtlands</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks to Alain, (&amp; THUNDROS too).<br>{I've never had a reason to use movies with Blitz3D; but maybe someday I can.} <br><br></td></tr></table><br>
<a name="1205378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> very nice one! <br><br></td></tr></table><br>
<a name="1205538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe, lets just say I'm working on an upgrade for my old, above code. You guys are going to LOVE this! :D <br><br></td></tr></table><br>
<a name="1205607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Thundros<br>Can't wait to see that. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
