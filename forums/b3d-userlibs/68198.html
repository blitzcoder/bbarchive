<!DOCTYPE html><html lang="en" ><head ><title >JV-ODE Physics Thread 9</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >JV-ODE Physics Thread 9</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >JV-ODE Physics Thread 9</a><br><br>
<a name="761813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now available for <b>Blitz3D</b> &amp; <b>BlitzMax (Win32)</b><br><br>The JV-ODE Physics Wrapper is an advanced user library supporting almost all of the Open Dynamics Engine functions wrapped inside a DLL (Dynamic Link Library).<br><br>The library can be used with any programming language that supports DLL's, including Blitz3D and BlitzMax (Win32). The Euler rotation system in JV-ODE has been adapted to match the left-handed Euler rotation used in Blitz3D, however functions for accessing Quaternion and Axis Angle rotation systems are also included. The full versions contain all of the necessary files to get you started, including over 30 demos showing the various features found in ODE and a complete Function Reference document.<br><br>The BlitzMax (Win32) version also features a built-in 'bare-bones' OpenGL 3D engine module and B3D mesh loader module for demo purposes.<br><br>To view more information and screenshots <a href="http://jv-ode.devcode.co.uk/" target="_blank">click here</a>.<br><br>Options are now available to purchase the wrapper using either PayPal or Share*it.<br><br>The <b>Blitz3D</b> restricted demo version is now available for download <a href="http://jv-ode.devcode.co.uk/dload/JV-ODE-Demo-Blitz3D.zip" target="_blank">here</a> (211KB)<br><br>The <b>BlitzMax (Win32)</b> restricted demo version is now available for download <a href="http://jv-ode.devcode.co.uk/dload/JV-ODE-Demo-BlitzMax.zip" target="_blank">here</a> (290KB)<br><br>Have Fun :)<br><br>Previous JV-ODE Blitz3D Threads: <a href="/posts.php?topic=43653" target="_blank">1</a> <a href="/posts.php?topic=45048" target="_blank">2</a> <a href="/posts.php?topic=48743" target="_blank">3</a> <a href="/posts.php?topic=52572" target="_blank">4</a> <a href="/posts.php?topic=53490" target="_blank">5</a> <a href="/posts.php?topic=56209" target="_blank">6</a> <a href="/posts.php?topic=59001" target="_blank">7</a> <a href="/posts.php?topic=63898" target="_blank">8</a><br><br>Useful Links: <a href="http://www.ode.org/" target="_blank">ODE.org Website</a> - <a href="http://opende.sourceforge.net/wiki/" target="_blank">ODE Wiki</a> - <a href="http://www.ode.org/ode-latest-userguide.pdf" target="_blank">ODE User Guide (PDF)</a> - <a href="http://www.ode.org/ode-latest-userguide.html" target="_blank">ODE User Guide (HTML)</a> <br><br></td></tr></table><br>
<a name="761885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >shaun freeman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Vip3r <br><br><br>my jv-ode.dll AND decls. file are both in the userlibs dir along with all of the examples and I have updated blitz3d to 1.98 runtime and IDE 1.98<br><br>file sizes: jvode.dll   230kb \<br>                decls.       26kb as expected...<br><br>...and the last line in the decls. file is dregisterODE(key1,key 2,key 3,key 4) : _dregisterode@(number)<br>..its all there! <br><br>My JV-ode.bb include has the dregisterode(4 hex? keys)<br><br>I have no other open programs and virus checker AVG is off..<br><br>I downloaded the full 1.21 blitz3d version from devcode.co.uk on Sunday 18/3/2007  at 9:51:39 GMT<br><br>also I tried putting JV-ode.dll in system32 dir to no avail<br><br>The JV-ODE.dll version comes up as 0.0.0.0?<br>Should this be right? some of the demos work if i rem out dregisterode() in the include but the dversion() comes up as 1.0??? <br><br></td></tr></table><br>
<a name="761896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any way to parent an ODE object to a regular blitz object?<br><br>I want to be able to parent my ODE object to my camera so I can drag my object around with the cameras movement and rotation. Also, I'd like it so heavy objects stop the camera from moving if you are trying to drag them...<br><br>Any chance of a quick FPS style demo? ;o) <br><br></td></tr></table><br>
<a name="761913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I decided to try the demo of BlitzMax with JV-ODE Bmax 1.21<br><br>I downloaded the BMAX demo and installed it.<br>I unzipped the JV-ODE Bmax 1.21.<br><br>Next I followed the JV ODE readme instructions:<br><br>JV-ODE Installation:<br>  Copy the 'devcode.mod' folder and its contents into the 'mod' folder of your BlitzMax (Win32) installation.<br>  Open BlitzMax.<br>  Click 'Add Project' on the Home tab and select the 'devcode.mod' folder in your BlitzMax 'mod' folder.<br><br>Next, using the BMAX IDE I opened one of the sample JVODE BMAX programs that were included, I hit build and run.<br><br>Blitzmax Application<br>Compile Error<br>Can't find interface for module 'devcode.jvode'<br><br>Lastly, I opened one of the Bmax sample programs and they ran and loaded correctly.<br><br>Whats broken ? <br><br></td></tr></table><br>
<a name="761928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >shaun freeman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> PROBLEM SOLVED!!<br><br>The version (jv-ode.dll) I downloaded from the purchase website was an old version even though it states ver 1.21!!(280kb as stated!)<br><br>I just tried out the demo version of tricky tracks and saw that the dv-ode.dll was 480kb!!!!<br><br>surely this couldnt  be ver 1.21...could it???<br><br>yes it was and it accepted my dregister() function call<br><br>I am finally sorted!<br><br>(not to mention happy!)<br><br>So if anyone is having problems like this check yer filesizes against others demos.. <br><br>I can start coding now..thanx to danny and vip3r for suggestions by the way. <br><br></td></tr></table><br>
<a name="762085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The JV-ODE.dll version comes up as 0.0.0.0?<br>Should this be right? some of the demos work if i rem out dregisterode() in the include but the dversion() comes up as 1.0???<br> <br></div><br>Yep, 0.0.0.0 is normal. The DLL uses a dedicated function to return the version info. If the version info comes up as 1.0, then it has loaded the demo version DLL, not the full version DLL. The latest versions of JV-ODE are much more optimised than the one included with Tricky Tracks, hence the size difference. The full version purchase downloads are the latest version, they get updated within hours of a new version release. You've got your demo and full version DLLs mixed up, the JV-ODE V1.21 DLL is 230KB. If you run into the same problem in future, remove all traces of the demo version of JV-ODE before installing the full version. Anyway, glad you've finally sorted it :)<br><br>@JA2: Parenting an ODE object to a Blitz object is not possible, it also defeats the purpose of the physics engine, that is to create a physics response to a collision. If you manually position/rotate it, then ODE can't do what it's supposed to do. If you want the camera to move around with the ODE object, then parent the camera to the Blitz object representing the ODE object (the visible geometry). If you want heavy objects to stop the camera object, make sure the heavy object has more mass than the camera object. There's no such thing as a 'quick' FPS demo ;)<br><br>@Wayne: Nothing's broken, you haven't updated your BlitzMax installation with the full version modules. It's looking for the <i>'DevCode.JVODE'</i> module (which is the full version), while the demo version of JV-ODE and its demos use the <i>'DevCode.JVODEDemo'</i> module. If you want to run the full version of JV-ODE in BlitzMax, you need to add the <i>'DevCode.JVODE'</i> module to your BlitzMax installation. There's another JV-ODE thread for the BlitzMax version btw, check the link in sig below. <br><br></td></tr></table><br>
<a name="762099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm confused.<br><br>I have Blitzmax demo 1.12, it's installed and works with it's included sample BMAX programs.<br><br>I also have JV-ODE-V121-BlitzMax (Full version)<br><br>I followed the  JV-ODE-V121-BlitzMax readme, and did the following:<br><br>Copy the 'devcode.mod' folder and its contents into the 'mod' folder of your BlitzMax (Win32) installation.<br><br>Open BlitzMax.<br>Click 'Add Project' on the Home tab and select the 'devcode.mod' folder in your BlitzMax 'mod' folder.<br><br>Next, using the BMAX IDE I opened one of the sample JVODE BMAX programs that were included, I hit build and run.<br><br>I get a window that says:<br>Blitzmax Application<br>Compile Error<br>Can't find interface for module 'devcode.jvode'<br><br><br>The program start of the program looked like this:<br>' ###################################################################################################<br>' #										  JV-ODE Car Demo											#<br>' #									Code by Jim Williams (VIP3R)									#<br>' #								Devious Codeworks - Copyright © 2007								#<br>' ###################################################################################################<br><br>SuperStrict<br><br>Framework BRL.GLMax2D<br>Import BRL.Random<br>Import DevCode.JVODE<br>Import DevCode.JVODEOpenGL<br><br>Under the home tab I see devcode.mod with children jvode.mod. jvodeb3dloader.mod, and jvodeopengl.mod.<br><br>C:\Program Files\BlitzMaxDemo\mod\devcode.mod\jvode.mod<br><br>shows:<br>jvode.debug.win32.x86.a 221kb<br>jvode.debug.win32.x86.i 35kb<br>jvode.release.win32.x86.a 161kb<br>jvode.release.win32.x86.i 35kb<br><br>output:<br>Building CarDemo-MultipleSpace<br>Compiling:CarDemo-MultipleSpace.bmx<br>Compile Error: Can't find interface for module 'devcode.jvode'<br>[C:/Documents and Settings/HP_Administrator/Desktop/JV-ODE-V121-BlitzMax/JV-ODE Physics BlitzMax/CarDemo-MultipleSpace.bmx;11;1]<br>Build Error: failed to compile C:/Documents and Settings/HP_Administrator/Desktop/JV-ODE-V121-BlitzMax/JV-ODE Physics BlitzMax/CarDemo-MultipleSpace.bmx<br>Process complete<br><br>The link in your sig returns Internal Error.<br>8)<br><br>Not sure what more I should do. <br><br></td></tr></table><br>
<a name="762123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah gotcha, you're running the demo version of BlitzMax.<br><br>I don't know if JV-ODE will run with the demo version tbh. Everything in your mod folder looks ok, I'm guessing the compile problem is due to the old BlitzMax V1.12 demo as it has changed significantly since then.<br><br>I take it you're not logged into blitzmax.com? If you're logged into blitzbasic.com, you need to use that domain in the sig link instead. The thread is in the 'BlitzMax Module Tweaks' forum. <br><br></td></tr></table><br>
<a name="762588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Im using the blitz3d version.<br><br>It seems that I cant run 2 blitz programs on the same computer without the second blitz program locking up.<br>Presumably because of the dregisterODE function.<br>Is there an easy fix for this?<br><br>thanks <br><br></td></tr></table><br>
<a name="762601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've tried to recreate the problem here with two JV-ODE demos, both from the IDE and compiled EXEs. In both cases they're running fine without any lock ups. I've even tried running four EXEs simultaneously from separate locations, they run fine too, as to be expected they're a little slow but still no lock ups.<br><br>The register function shouldn't cause a problem, are you sure JV-ODE is the culprit? <br><br></td></tr></table><br>
<a name="762717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm having another problem. <br><br>When I connect 2 objects together, for example a drawer to the chest of drawers, if I click and move the chest then it moves slowly as it has a high mass, but if I click and drag a drawer (with a low mass) then the chest is also dragged along with the drawer as if it weighs nothing...<br><br>What could I be doing wrong? <br><br></td></tr></table><br>
<a name="762868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks for checking it out.<br>As soon as I comment out the include file it works normally so Im pretty sure Its the physics DLL.<br>Im using Win98 so maybe it interacts in a different way to WinXP. <br><br></td></tr></table><br>
<a name="762919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Chunkations: No problem. I'm not sure what would cause it to lock up, even on Win98, but I suspect it's due to memory conflicts and/or the Win98 OS Kernel32/User32 DLLs. I've managed to reproduce it in Virtual PC, there is a solution but it might not be suitable. You would need to rename the DLL (also in the decls) for the second application and create another EXE using the renamed library. It will then run both 'Test.exe + JV-ODE.dll' and 'Test2.exe + JV-ODE2.dll' simultaneously on Win98.<br><br>@JA2: If you can send me an example showing the problem I'll take a look at it for you. It might be due to the joint set up. <br><br></td></tr></table><br>
<a name="762926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok thanks, ill check it out <br><br></td></tr></table><br>
<a name="762927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, sent you an email with a quick demo attached. Hope I sent it to the right place, just checked your email addy in your profile and it's different :o <br><br></td></tr></table><br>
<a name="763030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks JA2, I've received the email and spotted the problem. It's related to the way you're applying forces based on an objects mass, I've replied explaining how to correct it. <br><br></td></tr></table><br>
<a name="763053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks VIP3R. It's now fixed so I'm back to breaking it ;) <br><br></td></tr></table><br>
<a name="763209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> On the tri-mesh demo, there seems to be a lot jittering between the meshes. I'm having a similar issue with my tri-meshes, especially with collisions, if I drop one on top of another then they kind of explode in opposite directions...<br><br>Is there a way around this? <br><br></td></tr></table><br>
<a name="763238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EmerGki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi VIP3R, I need to Reposition my Vehicles in my game, but, when I Try to do this, the vehicles go insane, jumping, rotating and etc...<br><br>I'm using the comands:<br><br>dBodySetRotation(ode\body,RotX#,RotY#,RotZ#)<br>dBodySetPosition(ode\body,PosX#,PosY#,PosZ#)<br><br><br>And other thing, How many cars the JV-ODE support in the game? Because I try to use 10 vehicles and the Physics time go to 6 or 7, and, when I try to use 20 vehicles, I receive the message "Stack Overflow" <br><br></td></tr></table><br>
<a name="763335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> @JA2: You can adjust the constraint force mixing to improve jitter problems like those. Try adding <i>dWorldSetCFM(World,1.0)</i> before the create light code in the 'Demo-Trimeshes' demo. You can also use the <i>dWorldSetContactSurfaceLayer(world,depth#)</i> function to adjust the collision depth to help improve it.<br><br>@EmerGki: Make sure you zero the forces on the vehicle/wheels/joints before moving them. It's easier to delete the car and create a new one at the new location.<br><br>There's no limit on the amount of cars you can use in JV-ODE, but there is a limit depending on your system specs, for example processing power and memory. A stack overflow is normally caused by too many objects overlapping when created, check you're not creating the cars in the same locations. I've tried 32 cars here and it runs fine, the physics time never goes higher than 3, but it's running on a powerful system with lots of memory. <br><br></td></tr></table><br>
<a name="763393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R:<br><br>I had a play with the CFM and the contactsurface like you suggested. It has stopped some of the explosion effect but I can't get it to an acceptable level. If you still have the code I sent you, it is the wheelsexample() that I'm having the problem with :(<br><br>I tried it using a box instead of a trimesh and it works perfectly. Is there an issue with colliding tri meshes?<br><br>I have even tried making different wheel models to test with but I get the same result. Applying the CFM and contactsurface settings to the demo stops the jittering tho... <br><br></td></tr></table><br>
<a name="763410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi JA2,<br><br>I don't keep other folks code so I no longer have the code you sent over unfortunately.<br><br>It's entirely possible that TriMesh to TriMesh collisions may still be unstable, the contributors working on ODE have only recently got them colliding properly. They're also notoriously slow, as I warned when they were added to JV-ODE. Anyone who knows physics engines well enough will tell you that triangle soup (TriMesh) collision algorithms are very slow when used in real time and that complex meshes should be replaced with primitive collision geometry (boxes, spheres, cylinders etc) instead. Most complex geometry can be approximated using several primitive geoms, vastly increasing performance. <br><br></td></tr></table><br>
<a name="763413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll try and work around the problem for now then. I think most items should be ok with a simpler collision primitive. Fingers crossed for more stable trimesh collisions in the future ;o) <br><br></td></tr></table><br>
<a name="763518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've made myself a function to make a ring of spheres using geom offset to replace the trimesh for my wheel model. Works great except that I always end up with one sphere in the center. This is the original geom that belongs to the ode type.<br><br>Is there a way to turn off collisions for a geom? <br><br></td></tr></table><br>
<a name="763623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> you can make a geom with a size of 0,0,0 <br><br></td></tr></table><br>
<a name="763645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> When using Geom Transforms you needed to use a geom size of 0,0,0.<br><br>When using Geom Offsets you can offset the first (original) geom. The same method is used to offset the car geom in the 'CarDemo-GeomOffset-Car' demo, which has only one geom contained within the body. <br><br></td></tr></table><br>
<a name="763704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome, thanks guys :) <br><br></td></tr></table><br>
<a name="763867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know that  dSetInternalSpaceCollideMode is used to turn off  /on collisions in the same space.<br><br>Is this just a global setting or can it be set that only certain spaces have it turned on or off ? <br><br></td></tr></table><br>
<a name="764018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's a global setting, if you need objects to collide you can place them into the top level space or a different sub-space. <br><br></td></tr></table><br>
<a name="764075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im just interested to know how/if people are using ODE for player movement.<br><br>Take for example you were moving the Zombie.  You would have to place a Sphere at his feet which isnt a problem, but how do you get the rest of his body to interact with the physics engine ?  You cant create a stretched box as obviously it cant roll. (well it can but it topples over)<br><br>Ive tried attaching a rectangle to the sphere using a joint then applying forces to keep it upright.  THis is proving nigh on impossible.<br><br>Viper (god bless him) sent me this link and suggestion :-<br><br><br>You can attach it to the sphere with a ball joint, but you would need to apply a small constant upwards force to keep it upright. Or, you could use a different joint (hinge/amotor) and use the joint motors to keep it upright. The car demos use joint motors to provide force and torque to the wheels, so use those for reference.<br> <br>Have a read of the following link too, it does a similar thing but with spring dampening and rays...<br> <br><a href="http://opende.sourceforge.net/wiki/index.php/HOWTO_upright_capsule" target="_blank">http://opende.sourceforge.net/wiki/index.php/HOWTO_upright_capsule</a><br><br><br>The other course Im thinking of using (which seems overkill) is to create a car base that a box geom will sit on, this will act as a trolley that can be pushed and pulled into position....... <br><br></td></tr></table><br>
<a name="764077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> @OvineByDesign:<br><br>Have a look on the last thread, Danny made an awesome ragdoll demo using an animated model :)<br><br>@Everybody:<br><br>Using the ramp demo for an example, if I change dBodySetRotation(ode\body,0,0,0) to dBodySetRotation(ode\body,0,45,0) for both ramp pieces then still they align perfectly but the joint axis is now incorrect.<br><br>What would be the best approach for setting joint anchors/axis based on a models rotation? <br><br></td></tr></table><br>
<a name="764086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's funny, both you guys are talking what I've been messing around with for the last two weeks :) Although with limited success to be honest...<br><br>@OBD: Yes, you can create a ragdoll setup. And switch between two modes:<br>1. Animation Mode: Where the bone-animation DRIVES the ode rigid bodies (so you have animation + proper collision detection)<br>2. Ragdoll Mode: Where you let the ODE simulator drive the rigid bodies - that in turn drive the bones.<br><br>When a character is walking you'll have it in Animation Mode, when it get's shot or clubbed on the head you detect that foreign collision and switch to ragdoll mode so the character collapses or is blown over..<br><br>But as JA2 mentioned, once you want your collapsed ragdoll to go back to animation mode, you'll have to reset all the rigid bodies and joint positions to match a model's "current state".<br>Setting the rigid bodies is easy (just position+rotate them equal to the bones), but I also have serious trouble re-setting a joint's axis when a model has been rotated, etc. <br>ESPECIALLY ""trying"" to restore the axis at such an angle that it's original lo/hi stop values are correct again!<br>And that's the thing I don't seem to be able to tackle. Too much math for my limited brain I guess..<br><br>Let's take a knee-joint (hinge) for example. The Thigh and Shin bones are at a certain angle from each other (in their default pose). The joint axis is in Global coordinates - as are the Lo/Hi stop values.<br>BUT as soon as you Attach a joint, it keeps the two rigid bodies 'relative' to their initial angles... <br><br>So if I set up a rig from default pose, that's no problem.<br>But if I want to re-rig it whilst the character is lying on the floor in a heap for example, I haven't got a clue how to deal with this.... (too many angles, objects, vectors vs eulers, etc.)<br>Does anyone understand what I'm saying here?! :) Let alone possibly have some hints?!<br><br>thanks,<br>D. <br><br></td></tr></table><br>
<a name="764092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> @JA2 - Thanks for the advice - never thought that demo was relivant - but it was !<br><br>The forcing of GEOM positioning works a treat for me (as Im primarily working in 2D).  <br><br>@Danny<br>As you've stated before, the idea of moving a body by forces is really the only way you can go with your problem.  Sounds like a fair bit of maths to me. <br><br></td></tr></table><br>
<a name="764097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> LOL<br><br>I'm having exactly the same kind of problem as the knee hinge example... I want to make a chest with a lid. Easy enough to set up the hinge joint as long as the chest hasn't been rotated yet :( <br><br></td></tr></table><br>
<a name="764100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi folks,<br><br>The only way I know of rigging a model with the correct joint angles is by rigging it while it's still in its initial position (default pose). Trying to re-rig it when it's in a different position (lying down etc) would be a nightmare, as you've probably discovered. Not sure whether it's even possible tbh, if it can be done then one man who might know is Ricky Smith who designed PaceMaker using JV-ODE.<br><br>@OvineByDesign: I'll experiment with the upright body problem for you as soon as I've got a spare few hours. If I have any luck I'll let you know ;) <br><br></td></tr></table><br>
<a name="764104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Vip3r<br>Thanks ,  the set position of the geom seems to be working tho'.  Would be nice to get it done properly.<br><br>The constant force up seems to work for stationary objects - but as soon as it moves thats when the motors would have to kick in. <br><br></td></tr></table><br>
<a name="764450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> @JA2, here's a little test I did trying to resolve 'rebuilding a rig' from an object's (chest/character) current state.<br>I tried figuring out the math's to solve the lo/hi stop values but ... no way josé...<br>But at least this workaround works...<br><br>It has a chest and a leg rig included which you can select and test...<br>Hit SPACEBAR to toggle between ragdoll &amp; animation mode, and ENTER to kick the object (in ragdoll mode).<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

;# FLEXY RIG - experiment.
;
; This is a test about being able to create &amp; destroy a rig at runtime WHILST preserving joint (lo/hi stop) constraints!
; When you create a joint to connect two bodies, their 'relative angle' is considered '0 degrees' to the lo/hi stops.
; But when re-building a rig when the object is in an odd position, this 'relative angle' between bodies has changed,
; therefor the lo&amp;hi stop values (in radians) need to be adjusted as well.
;
; Simple fact is that I have NOT got a clue how to resolve this (too much maths). But this experiment offers a cheesy but working solution.
; See RIG_createRagDoll for more info...

; NOTE: There is a know bug in here somewhere. When using the ENTER key to 'kick' the object whilst in ragdoll mode, could make it go
;       absolutely crazy; ie. start spinning, etc. like mad. Serious problem to which i have no solution yet...
;
; <a href="http://www.blitzbasic.com/Community/posts.php?topic=68198" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=68198</a>
;
;-Danny 

;--------------------------------------------------------------------------
;## GLOBALS &amp; TYPES
;----------------------------

Type node_body

	Field mesh				; blitz mesh
	Field w#,h#,d#			; body size: width / height / depth

	Field ox#,oy#,oz#		; original xyz position
	Field oxr#,oyr#,ozr#	; original xyz rotation
	
	Field cx#,cy#,cz#		; current xyz position
	Field cxr#,cyr#,czr#	; current xyz rotation
	
	;live handles
	Field body				; ode rigid body
	Field geom				; ode collision geometry
	Field parent			; body part's parent (optional)
	
End Type

Type node_joint
	Field bodyA.node_body	; first body to connect from
	Field bodyB.node_body	; second body to connect to

	Field lx#,ly#,lz#		; joint position in LOCAL coordinates, relative to body B (!)

	Field ax#,ay#,az#		; hinge axis (in absolute coordinates)
	Field lo#,hi#			; hinge lo/hi stops (in absolute coordinates)
		
	;live handles
	Field joint				; ode hinge-joint handle
	Field debugmesh			; to visualise the joint
End Type


Const RIG_mode_Ragdoll = 1		; In Ragdoll mode, the ODE simulator drives the rigid bodies
Const RIG_mode_Animation = 0	; In this mode, animation keyframes drive the rigid bodies.

Global RIG_MODE = RIG_MODE_Animation


Global camera, camerapivot

;--------------------------------------------------------------------------
;## Init App
;----------------------------


AppTitle "Flexy Rig - Experiment"

Include "JV-ODE.bb"

Graphics3D 800,600,32,2

Global World, Space, ContactGroup			; ode simulator

Init_ode()
Init_3D()

;get input
.askAgain
Cls
RenderWorld
Color 250,255,220
Locate 1,1
Print "Select object: "
Print " 1. Chest "
Print " 2. Chest with two lids"
Print " 3. Leg"
Print ""
num = Input$("use object: ")
FlushKeys
If (num &lt;0) Or (num&gt;3) Then Goto askAgain

init_object(num)

;Set initial state
;Rig_createRagdoll()
;RIG_MODE = rig_mode_ragdoll


Global trigger = MilliSecs()+3000

;## MAIN LOOP
;----------------------------

While Not KeyHit(1)
	
	;updates
	update_keyboard()
	update_camera()
	update_ode()

	;update the object pending current RIG MODE
	Select RIG_mode
	
		Case RIG_mode_ragdoll
			;ode Drives the bodies
			update_ode()
					
		Case RIG_mode_animation
			;animation driving the bodies
			update_anim()
			
	End Select

	;render
	UpdateWorld
	RenderWorld
	
	;osd
	Cls
	Color 255,255,000
	Text 5,  5, "Flexy Rig - experiment."
	Color 180,180,180
	Text 5, 30, "- use Mouse to control camera."
	Text 5, 45, "- use SPACE to toggle between ODE driven rig and ANIMATION driven rig."
	If rig_mode = rig_mode_ragdoll Then Text 5, 60, "- use ENTER to kick the object."
	Color 255,255,255
	If RIG_MODE = rig_mode_ragdoll
		mode$ = "ODE driven Object"
	Else
		mode$ = "ANIMATION driven Object"
	EndIf
	Text 5,80, "Current Mode: "+mode$
	
	;reveil
	Flip True

Wend

End

;--------------------------------------------------------------------------
;## FUNCTIONS

Function Init_ODE()

	World=dWorldCreate()
	Space=dHashSpaceCreate(0)
	ContactGroup=dJointGroupCreate(0)
	
	dWorldSetAutoDisableFlag(World,1)
	dWorldSetGravity(World,0,-0.98,0)
	dWorldSetERP(World, 0.75)
	
	dContactSetMaxContacts 10
	dContactSetMode(dContactBounce)
	dContactSetBounce(0.1)
	dContactSetMu(48)

End Function

;--------------------------------------------------------------------------

Function Init_3D()

	;create camera
	camerapivot = CreatePivot()
	camera = CreateCamera(camerapivot)
	PositionEntity camera, 1,1,-10
	CameraRange camera, 0.1, 100
	PointEntity camera, camerapivot
	CameraViewport camera, 0,100,GraphicsWidth(),GraphicsHeight()-100
	
	;create light
	Light=CreateLight()
	RotateEntity Light,45,-90,0
	LightColor Light,255,255,255
	AmbientLight 130,130,130

	;create simple floor
	dCreatePlane(Space,0,1,0,0)
	Plane=CreatePlane()
	EntityAlpha Plane,0.90
	PlaneTexture=CreateTexture(128,128,9)
	ClsColor 0,0,40
	Cls
	Color 110,150,200
	Rect 0,0,64,64,1
	Rect 64,64,64,64,1
	CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
	ScaleTexture PlaneTexture,2,2
	EntityTexture Plane,PlaneTexture,0,0

	;create world center
	tmp = CreateSphere(4)
	ScaleEntity tmp, 0.1, 0.025, 0.1
	EntityColor tmp, 0,0,0
	EntityFX tmp, 1
	
	;reset mouse
	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	FlushMouse
	
	;set viewport for text
	Viewport 0,0,GraphicsWidth(),100
	ClsColor 30,30,30
	Cls
	
End Function

;--------------------------------------------------------------------------

Function Init_object( number=2 )

;| creates a 2-part chest (with lid) and a hinge joint in between..

	Select number
		
		Case 1		; CHEST WITH LID
		
			chest	= create_object( 0, 1.25, 0,  0,0,0,  1, 0.5, 0.5,  250,250,250 )
			lid		= create_object( 0, 1.60, 0,  0,0,0,  1, 0.2, 0.5,  000,250,250, chest )
		 	hinge	= create_joint( chest, lid, 0, 1.50, 0.25,  1,0,0,  -1.0, 0.0)
		
		Case 2		; CHEST WITH TWO LIDS

			chest	= create_object( 0, 1.25, 0,  0,0,0,  1, 0.5, 0.5,  250,250,250 )
			lid1	= create_object( 0, 1.60, 0,  0,0,0,  1, 0.2, 0.5,  000,250,250, chest )
			lid2	= create_object( 0, 0.90, 0,  0,0,0,  1, 0.2, 0.5,  000,250,000, chest )
			
		 	hinge1	= create_joint( chest, lid1, 0, 1.50, 0.25,  1,0,0,  -1.0, 0.0)
		 	hinge2	= create_joint( chest, lid2, 0, 1.00,-0.25,  1,0,0,   0.0, 1.0)
		
		Case 3		; LEG (thigh, shin, foot)

			thigh	= create_object( 0, 3.0,  0.00,  0,0,0,  0.25, 0.5, 0.25,  250,100,100 )
			shin	= create_object( 0, 2.5,  0.00,  0,0,0,  0.25, 0.5, 0.25,  100,250,100, thigh )
			foot	= create_object( 0, 2.15, 0.40,  0,0,0,  0.35, 0.2, 0.80,  100,100,250, shin )
			
			knee	= create_joint( thigh, shin, 0,2.75,0, 1,0,0, -0.45, 0.0)
			ankle	= create_joint( shin, foot,  0,2.25,0, 1,0,0, -0.15, 0.15)
			
	End Select
			
End Function

;--------------------------------------------------------------------------

Function update_keyboard()

;[SPACE BAR] - toggles between RAGDOLL &amp; ANIMATION mode
;[ENTER] - kick the body (only works in ragdoll mode)

	;mode toggle
	If KeyHit(57) 

		;toggle rigging mode
		RIG_MODE = Not RIG_MODE

		;re-set rig
		If RIG_MODE = RIG_mode_ragdoll
			;create ragdoll from object's current 'pose', for ode simulator control
			Rig_createRagdoll()
			trigger = MilliSecs()+1500
		Else
			;discard ragdoll for free animation control
			Rig_removeRagdoll()
		End If
	EndIf

	;kick the object (in ragdoll mode)
	If KeyHit(28)
		force# = 20.0
		xf# = Rnd(force)-force/2
		zf# = Rnd(force)-force/2
		For b.node_body = Each node_body
			If b\body &lt;&gt; 0
				dBodySetLinearVel b\body,0,0,0
				dBodySetAngularVel b\body, 0,0,0
				dBodyAddForce b\body, xf,force,zf
				dBodyAddTorque b\body, Rnd(force/2),Rnd(force/2),Rnd(force/2)
			EndIf
		Next
	EndIf
	
End Function

;--------------------------------------------------------------------------

Function Update_ODE()

;| update ode simulator. And when in ragdoll mode, let ode simulator drive the rigid bodies

	
	;advance simulator
	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	;update rigid bodies (IF active)
	For body.node_body = Each node_body
		If body\body &lt;&gt; 0 Then
			RotateEntity body\mesh, dGeomGetPitch(body\geom), dGeomGetYaw(body\geom), dGeomGetRoll(body\geom)
			PositionEntity body\mesh, dGeomGetPositionX(body\geom), dGeomGetPositionY(body\geom), dGeomGetPositionZ(body\geom)
		EndIf
	Next
	
	;for debug purpose: Update the joint debugMesh to visualise the joint
	For joint.node_joint = Each node_joint
		If (joint\joint&lt;&gt;0) And (joint\debugMesh&lt;&gt;0)
			dJointGetHingeAxis(joint\joint)
			RotateEntity joint\debugmesh, 0,0,0, 1
			AlignToVector joint\debugMesh, dVectorX(),dVectorY(),dVectorZ(), 3, 1.0
			dJointGetHingeAnchor(joint\joint)
			PositionEntity joint\debugMesh, dVectorX(),dVectorY(),dVectorZ(), 1
		EndIf
	Next
	
End Function

;--------------------------------------------------------------------------

Function Update_Anim()

;| Let animation drive the rigid bodies (quick hack).

	ms# = Float(MilliSecs())
	
	x# = Sin(ms/10) * 3
	y# = Sin(ms/2) * 0.5 + 2.5
	z# = Cos(ms/30) * 2
	
	b.node_body = First node_body
	PositionEntity b\mesh, x#,y#,z#, 1
	TurnEntity b\mesh, 1,-1,2
	
End Function

;--------------------------------------------------------------------------

Function update_camera()

	;left/right mouse move for orbit
	TurnEntity camerapivot, 0, -MouseXSpeed()/5, 0
	
	;up/down mose move for altitude
	MoveEntity camera, 0,MouseYSpeed()*0.01, 0
	
	;mousewheel for zoom
	MoveEntity camera, 0,0,MouseZSpeed()*0.25
	
	;check
	If EntityY(camera,1) &lt; 0 Then PositionEntity camera, EntityX(camera,1),0,EntityZ(camera,1), 1
	If EntityZ(camera) &lt; 0.25 Then PositionEntity camera, EntityX(camera),EntityY(camera), 0.25, 0
	PointEntity camera, camerapivot
	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	
	;follow object
	b.node_body = First node_body
	If b&lt;&gt;Null Then
		PositionEntity camerapivot, EntityX(b\mesh,1),EntityY(b\mesh,1),EntityZ(b\mesh,1)
	EndIf
	
End Function

;--------------------------------------------------------------------------

Function create_object( x#,y#,z#, xr#,yr#, zr#, w#,h#,d#, r,g,b, parent = 0 )

;| Create a box w/ rigid body. At position X/Y/Z, rotated at XR/YR/ZR of size W/H/D

	;check for parent
	If parent &lt;&gt; 0
		parentBone.node_body = Object.node_body(parent)
		parent = parentBone\mesh
	EndIf
	
	body.node_body = New node_body
	body\mesh = CreateCube(parent)
	ScaleMesh body\mesh, w/2, h/2, d/2
	PositionEntity body\mesh, x,y,z, 1
	RotateEntity body\mesh, xr,yr,zr, 1
	EntityColor body\mesh, r,g,b
	EntityShininess body\mesh,0.7
	
	body\ox  = x
	body\oy	 = y
	body\oz	 = z
	body\oxr = xr
	body\oyr = yr
	body\ozr = zr
	body\w	 = w
	body\h	 = h
	body\d	 = d
	body\parent = parent
		
	;clear
	body\body = 0
	body\geom = 0

	Return Handle(body)
	
End Function

;--------------------------------------------------------------------------

Function create_joint( bodyAhandle, bodyBhandle, x#,y#,z#, ax#,ay#,az#, lo#, hi# )

;| Creates a joint between two bodies

	;access bodies
	bodyA.node_body = Object.node_body(bodyAHandle)
	bodyB.node_body = Object.node_body(bodyBHandle)

	;validate
	If bodyA = Null Then RuntimeError "burp"
	If bodyB = Null Then RuntimeError "barf"

	;create new joint	
	joint.node_joint = New node_joint
	joint\bodyA.node_body = bodyA
	joint\bodyB.node_body = bodyB
	joint\ax = ax
	joint\ay = ay
	joint\az = az
	joint\lo = lo
	joint\hi = hi
	
	;store joint's local position relative to body B
	joint\lx = x-EntityX(bodyA\mesh,1)
	joint\ly = y-EntityY(bodyA\mesh,1)
	joint\lz = z-EntityZ(bodyA\mesh,1)
	
	;clear
	joint\joint = 0	
	joint\debugmesh = CreateCylinder(6,True, 0)
	RotateMesh joint\debugmesh, 90,0,0
	ScaleEntity joint\debugmesh, 0.05, 0.05, 0.6
	EntityColor joint\debugmesh, 0,0,50
	EntityAlpha joint\debugmesh, 0.75
	EntityFX joint\debugmesh, 1
	
	
End Function

;==========================================================================

Function RIG_createRagdoll()

;| creates a rig from the object's current state. So that the ODE simulator can control it's rigid bodies.
;|
;| Note: chances are that the object's parts could be at angles that the hinge's joints are supposed 
;| 	     to prevent (ie. outside the lo/hi stop range), But that's not relevant for this experiment..
	
	;1. Store each body's current position &amp; rotation
	;2. Reset each body's original position &amp; rotation
	;3. Build rig
	;4. restore each rigged body's position &amp; rotation to what it was in step 1.	


	;1. Capture each body's current position &amp; rotation
	For body.node_body = Each node_body
		body\cx = EntityX(body\mesh,1)
		body\cy = EntityY(body\mesh,1)
		body\cz = EntityZ(body\mesh,1)

		body\cxr = EntityPitch(body\mesh,1)
		body\cyr = EntityYaw(body\mesh,1)
		body\czr = EntityRoll(body\mesh,1)
		
		;DETACH body from it's parent
		EntityParent body\mesh, 0, True
	Next

	;2. Reset each body's original position &amp; rotation
	For body.node_body = Each node_body
		PositionEntity body\mesh, body\ox, body\oy, body\oz
		RotateEntity body\mesh, body\oxr, body\oyr, body\ozr
	Next
		
	;3. Build rig
	For body.node_body = Each node_body
		
		;clear (if necesary)
		If body\geom &lt;&gt; 0 Then dGeomDestroy body\geom
		If body\body &lt;&gt; 0 Then dBodyDestroy body\body
		
		;create rigid body
		body\body = dBodyCreate(World)
		dBodySetRotation body\body, body\ox, body\oy, body\oz
		dBodySetPosition body\body, body\oxr,body\oyr,body\ozr
		
		;create collision geometry
		body\geom = dCreateBox(Space, body\w, body\h, body\d)
		dGeomSetBody body\geom, body\body
	Next

	;create joints
	For joint.node_joint = Each node_joint
	
		;clear (if necesary)
		If joint\joint &lt;&gt; 0 Then dJointDestroy joint\joint
		
		;create (hinge) joint
		joint\joint = dJointCreateHinge(World, 0)
		dJointAttach joint\joint, joint\bodyA\body, joint\bodyB\body
		TFormPoint joint\lx, joint\ly, joint\lz, joint\bodyA\mesh, 0
		dJointSetHingeAnchor joint\joint, TFormedX(),TFormedY(),TFormedZ()
		TFormVector joint\ax, joint\ay, joint\az, joint\bodyA\mesh, 0
		dJointSetHingeAxis joint\joint, TFormedX(), TFormedY(), TFormedZ()
		dJointSetHingeParam joint\joint, dParamLoStop, joint\lo * Pi
		dJointSetHingeParam joint\joint, dParamHiStop, joint\hi * Pi
	
		If joint\debugmesh &lt;&gt; 0 Then EntityColor joint\debugMesh, 255,0,0
		
	Next

	;4. restore each rigged body's position &amp; rotation to what it was in step 1.	
	For body.node_body = Each node_body
		dBodySetPosition body\body, body\cx, body\cy, body\cz
		dBodySetRotation body\body, body\cxr,body\cyr,body\czr
		dBodyEnable body\body
		dBodySetLinearVel body\body, 0,0,0
		dBodySetAngularVel body\body, 0,0,0
		;set mesh as well (for next joint loop)
		PositionEntity body\mesh, body\cx, body\cy, body\cz
		RotateEntity body\mesh, body\cxr,body\cyr,body\czr
	Next

	;note: Here in lies the trick, since the joints have been SETUP whilst bodies were in their 'original' positions,
	;	   this transformation will respect their respective lo-stop &amp; hi-stop constrains!
	For joint.node_joint = Each node_joint
		TFormPoint joint\lx, joint\ly, joint\lz, joint\bodyA\mesh, 0
		dJointSetHingeAnchor joint\joint, TFormedX(),TFormedY(),TFormedZ()
		TFormVector joint\ax, joint\ay, joint\az, joint\bodyA\mesh, 0
		dJointSetHingeAxis joint\joint, TFormedX(), TFormedY(), TFormedZ()
	Next
	
	DebugLog "rig created"
	
End Function

;--------------------------------------------------------------------------

Function RIG_removeRagdoll()

;| removes a rig
	
	;purge joints
	For joint.node_joint = Each node_joint
		If joint\joint &lt;&gt; 0 Then dJointDestroy joint\joint : joint\joint = 0
		If joint\debugmesh &lt;&gt; 0 Then EntityColor joint\debugmesh, 0,0,0
	Next
	
	;purge rigid bodies &amp; collision geometry
	For body.node_body = Each node_body
		;remove ode entities
		If body\geom &lt;&gt; 0 Then dGeomDestroy body\geom : body\geom = 0
		If body\body &lt;&gt; 0 Then dBodyDestroy body\body : body\body = 0
		;restore body part's parent
		If body\parent &lt;&gt; 0 Then EntityParent body\mesh, body\parent, True
	Next

	DebugLog "rig removed"

End Function

;=======================================================================
</textarea><br><br>Hope this helps,<br><br>D. <br><br></td></tr></table><br>
<a name="764455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey that's pretty cool. I see what you mean about the hi/lo stop values. After changing animation/ode driven modes a few times the meshes start to intersect.<br><br>I have kinda solved my chest problem. I just move the ode object after creating it and setting up the joints.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Function MoveODE (Model,PX#=0,PY#=0,PZ#=0,RX#=0,RY#=0,RZ#=0)

Local OE.ODE

For OE.ODE = Each ODE

	If OE\Mesh = Model

		dBodySetPosition OE\Body,dBodyGetPositionX(OE\Body)+PX,dBodyGetPositionY(OE\Body)+PY,dBodyGetPositionZ(OE\Body)+PZ
		dBodySetRotation OE\Body,dBodyGetPitch(OE\Body)+RX,dBodyGetYaw(OE\Body)+RY,dBodyGetRoll(OE\Body)+RZ
		dBodySetAngularVel OE\Body,0,0,0
		dBodySetLinearVel OE\Body,0,0,0

	EndIf

Next

End Function</textarea><br>Would it not be possible to record a meshes xyz position/rotation when you change mode, then return the mesh to 0,0,0, re-rig it, then move it back to where it was using the stored info? <br><br></td></tr></table><br>
<a name="764458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Would it not be possible to record a meshes xyz position/rotation when you change mode, then return the mesh to 0,0,0, re-rig it, then move it back to where it was using the stored info?"<br><br> That's exactly what the demo does :)))<br><br>What's different (than what I used to have) is that I can destroy a rig and re-create it only when it's needed. So characters/objects that are way off screen will have their rig purged to save overhead on the simulator..<br><br>d. <br><br></td></tr></table><br>
<a name="764836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> I feel I have to share my experience with a recent bug that I must have spend 4 hours trying to fix, just in case you come across it.<br><br>By setting dBodySetGravityMode() on a Geom seriously stuffs the engine in random places (usually in destroying Geom/Body)<br><br>So dont  use  dBodySetGravityMode() on GEOMS  else you'll waste hours debugging !!!!!! <br><br></td></tr></table><br>
<a name="764841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the tip OBD but could you eleborate a bit more?! I intend to use extensive use of dbodysetgravitymode and your comment surprises me a bit.<br>You'd think that disabling gravity in some cases should save ODE a couple cycles calculating..<br><br>thanks,<br>D. <br><br></td></tr></table><br>
<a name="764862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> To clarify I was using dBodySetGravityMode() on a Non-Body entity.........  which obviously is wrong <br><br></td></tr></table><br>
<a name="764979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> In other words, don't use the 'Body' functions on 'Geoms', they should only be used with an ODE Body!<br><br>OBD was doing this...<br><i>dBodySetGravityMode(ode\<b>geom</b>,0)</i><br><br>When it should have been...<br><i>dBodySetGravityMode(ode\<b>body</b>,0)</i> <br><br></td></tr></table><br>
<a name="765016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need some help with a bit of code...<br><br>In the rope demo:<br><br>dAreConnected(Sphere(1),Sphere(2)) returns true but dAreConnected(Sphere(1),Sphere(3)) returns false.<br><br>So, how can I loop through all of the ode objects and work out what is indirectly linked to what?? <br><br></td></tr></table><br>
<a name="765022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can cycle through your body/joints using the following functions...<br><br><i>dBodyGetNumJoints(body)<br>dBodyGetJoint(body,index)<br>dJointGetBody(joint,index)<br>dAreConnected(body1,body2)</i><br><br>The best way is to use an array or type 'beforehand' so that you don't have to iterate through loads of bodies and joints, thus wasting precious processing time.<br><br>For example, in the rope demo you know that all bodies in the Sphere(1...10) array are connected using joints in the Joint(1...10) array. If you disconnect any of the joints, set the joint array value to zero for that joint. Now iterate through the arrays until you hit zero, then you have your list of connected bodies both direct and indirect. <br><br></td></tr></table><br>
<a name="765042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lyon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi i have a problem with cylinder geom is can't collide with trimesh <br><br></td></tr></table><br>
<a name="765062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Post the code Lyon <br><br></td></tr></table><br>
<a name="765215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Lyon: The flat-ended cylinder geom does not collide with a TriMesh, you need to sphere wrap them for TriMesh collision to work (see the 'CarDemo-SphereWrapCylinder' demo). Or you can use capsules (capped cylinders) instead which do collide with a TriMesh.<br><br>[edit] What's wrong with these forums, that's the second time I've had to post the same reply. <br><br></td></tr></table><br>
<a name="765277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lyon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks.<br>i have an other question, how can i set get car speed in km\h if 1unit=1 meter? <br><br></td></tr></table><br>
<a name="765531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Speed = Distance Travelled / Time Taken<br><br>It's more of a general programming question tbh, you would probably get a more detailed and quicker answer in the general Blitz3D forum area. <br><br></td></tr></table><br>
<a name="766900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's been a couple beers since some old geezer tried to explain this to me at school, but:<br><br>"A BODY CAN NEVER FALL FASTER THAN GRAVITY" (when no other external forces apply)<br><br>That statement is correct, no?!<br><br>I'm trying to get deeper into forces, speed, etc. But this little test shows me that a body KEEPS ACCELERATING!<br>That can't be right, can it?! Have I made a silly mistake or missing something entirely?!??<br>I expect a free-falling object to accelerate to the speed of gravity, but never exceed that speed.<br><br>My shortest ODE proggy ever:  :)<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Include "JV-ODE.bb"

Graphics 800,600,0,2

gravity# = -0.98


World=dWorldCreate()
dWorldSetGravity(World,0,gravity,0)
body = dBodyCreate(world)
frames = 0
fps = 0
fstop = MilliSecs()+1000

While Not KeyHit(1)

	dWorldQuickStep(World,0.05)
	
	frames = frames + 1
	If MilliSecs()&gt;=fstop
		fps = frames
		frames = 0
		fstop = MilliSecs()+1000
	EndIf
	y# = dBodyGetPositionY(body)
	speed# = y#-yprev#
	yprev# = y#
	Cls
	Text 50,20, "FPS: "+fps
	Text 50,50, "Body's vertical velocity: "+speed#
	Text 50,110,"gravity = "+gravity
	Flip 1
Wend

End</textarea><br><br>Danny<br>p.s. giving the body mass doesn't seem to affect this outcome. <br><br></td></tr></table><br>
<a name="766931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> The speed of light would most likely be the upper limit. <br><br>If you continue to apply a force and object will continue to accelerate, unless acted upon by outside force, like friction. <br><br></td></tr></table><br>
<a name="766933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's normal for an object to accelerate as gravity pulls on it. I don't know what the 'old geezer' is talking about.<br><br>Certain factors can affect the acceleration like the strength of gravity force, the mass of the object and any drag resistance from stuff like air. I don't think ODE models air resistance so the drag would need to be implemented manually yourself.<br><br>But yes, as far as I'm aware objects accelerate when being pulled by gravity.<br><br>[edit] Cheers Wayne, beat me to it ;) <br><br></td></tr></table><br>
<a name="767108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok thanks. yes silly me. <br>I've done a little refresher course in the meantime ;)<br><br>As you said, it will continue to 'accelerate' (cumulative force) I thought it would sort of level out at 9.8 m/s<br>Shoult haf payd moor attention in skool ;) <br><br></td></tr></table><br>
<a name="767114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone had any luck using rays to position an object? I've had a look at the blitz max ray example but I can't get it to do what I want... <br><br>Just making a sphere float in the air by shooting rays downwards is all I need. <br><br></td></tr></table><br>
<a name="767155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> How far have you got so far ? What dont you understand about them ?<br><br>If you want things to float - why not disable gravity on the body, then apply force to it a ray to determine how far above the ground it is. <br><br></td></tr></table><br>
<a name="767176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I was reading about making a FPS character using a ray to keep it above the ground. I converted some of the blitz max example to blitz 3d. When I create a ray it just makes things bounce around. I'll continue to play about with it tho... I'm after something similar to a line pick straight down so I can walk my camera up and down stairs etc. <br><br></td></tr></table><br>
<a name="767296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to use the rays as a line pick, you should call the dSpaceCollide() and dJointGroupEmpty() functions separately without stepping the simulation, like the BlitzMax demo shows. Otherwise they will behave like any other physics object and react to gravity, impacts and forces etc. <br><br></td></tr></table><br>
<a name="767826"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> I create 1 main Space and 2 sub-space's like this:<pre class=code>PHX_Space=dHashSpaceCreate(0)
PHX_StaticSpace=dHashSpaceCreate(PHX_Space)
PHX_MotorSpace=dHashSpaceCreate(PHX_Space)</pre>PHX_Space = where I create my dynamic items.<br>PHX_StaticSpace = where I have my static trimesh level geometry.<br><br>If I understand correctly, then together with..<pre class=code>dSetInternalSpaceCollideMode 0</pre>..this should prevent my Static mesh's to collide with each other - whilst my dynamic bodies still collide properly with the Static mesh's...<br>Ok so far so good, this has been working well for some time.<br><br>But now I wish to add another space because I've got some wacky rig I wish to use to (litterally) drive characters around. So I build these geoms in a new subspace: PHX_MotorSpace.<br>The reason for this is that the current design I have forces me to intersect geometries. And since these will collide with each other, lots of nasty thing will happen which I don't want. That's the reason I put them in a new sub-space - with the idea that collision is not checked/performed 'within the same subspace'. _BUT_ the results don't seem to agree with that statement.<br><br>Am I wrong (again) - if this theory is correct I probably made some other daft coding error. But after 4 hours I give up. Anyone?<br><br>D. <br><br></td></tr></table><br>
<a name="767848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your theory is correct ;)<br><br>When you disable internal space collision with the <i>dSetInternalSpaceCollideMode(0)</i> function, no collisions will occur between objects within the same sub-space. They will only collide with objects in the top level space or objects in another sub-space.<br><br>So in your example, objects in MotorSpace will collide with objects in StaticSpace and Space, but those objects in MotorSpace will not collide with each other.<br><br>It's possible you've created the objects in the wrong space or sub-space by mistake, a common copy/paste error. Double check the spaces in the geom creation functions of your objects.<br><br>Another trick for avoiding collision with intersecting geometry is to add a fixed joint to them, as any objects which are directly jointed to each other will not collide regardless of the space setup.<br><br>If you're still stuck and you're not comfortable posting the code, feel free to send it to me via email and I'll take a look for you. <br><br></td></tr></table><br>
<a name="767874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for that (again) vip3r.<br><br>I'll try digging a bit deeper to see if I can fix my code. I considered the Joint solution but doesn't apply in this situation unfortunately.<br><br>It's not so much being uncomfortable posting my code, it's just the bits and pieces spread out over 66 modules that would make it a tad complex - if not useless - let alone if anyone could make sense of it :)<br>I like to think it's all nicely modular and structured but sometimes the obvious things don't seem to be that obvious at all ;)<br><br>But this brings me to another point; When reading over the ode docs before, they use an example where 2 cars with their own setup are 'placed' into seperated spaces. To optimise collision checking and skip a car checking against it's own parts.<br><br>Say you have a game with 30 odd cars crashing into each other. Do you have any insight if in that example it would be 'smart' splitting each up into it's own unique space? Or is there a trade-off where 'too many spaces' could backfire and counteract the advantage?!<br><br>I have no intention at this stage to do something like that, but would be interested to know if that could make a difference when dealing with larger/complex worlds?!<br><br>D. <br><br></td></tr></table><br>
<a name="767881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok wait a sec...<br>I double checked my code and both my objects ARE in the same sub-space. But the 'odd' behaviour I'm experiencing might not have to do with 'collision' as such.<br><br>It's too hard to explain (not completely sure about it myself) but it "seems" that the forces and angular velocitiy of one body ARE affected by the other body intersecting it.<br><br>When they DO intersect, I have a drag, and both fall through 'static space' objects eventually (internal struggle of some sort).<br>When they DON'T intersect (but still in their own motorSpace) then they behave fine together and in relation to outer space bodies :)<br><br>So even if this doesn't affect collision "behaviour" (they don't repel each other) I get the feeling that they DO interfear with each other's internal mechanics on the forces/velocity side!!<br><br>Aghk- forget about it; 5 minutes to install a proper workaround that'll do just fine ;)<br><br>D. <br><br></td></tr></table><br>
<a name="767913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> If there's no collision, there will be no physics response at all, so if the force/velocity of the objects are behaving oddly then I would examine any external forces being added manually (angular velocity damping etc).<br><br>There shouldn't be any performance disadvantages when using a sub-space per car, possibly a small performance gain if anything. <br><br></td></tr></table><br>
<a name="767996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you think that ODE will ever be changed so that SetInternalSpaceCollideMode() will turn off per sub-space ? <br><br></td></tr></table><br>
<a name="768023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bit o maths help needed.<br><br>Im trying to set the direction vector of the RAY.  Whats the easiest way of  translating an angle into a vector that can be used with dGeomRaySet() ? <br><br></td></tr></table><br>
<a name="768029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you can get the angle from a pivot or other b3d entity can use TformVector 0,0,1, pivot, 0 - to get a forward pointing vector for example.<br>If you got just got 3 variables holding angles then err... sorry left the kettle on.. <br><br></td></tr></table><br>
<a name="768037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah - unfortunately im in BlitzMax - so will need the maths function todo it ...<br><br>I shall have a look in the MiniB3D and see if its implemented in there...... <br><br></td></tr></table><br>
<a name="768091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> SetInternalSpaceCollideMode() is unique to JV-ODE.<br><br>It would be easy enough to implement per sub-space, but the reason it's not is because it would affect the performance during collision checking, even if sub-spaces are not used. <br><br></td></tr></table><br>
<a name="768097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is driving me crazy LOL<br><br>I have looked through all of these pages <a href="http://opende.sourceforge.net/wiki/index.php/HOWTO_upright_capsule" target="_blank">http://opende.sourceforge.net/wiki/index.php/HOWTO_upright_capsule</a> and spent a few <i>days</i> playing around with rays. I'm still none the wiser tho...<br><br>I'm trying to implement a ray casting straight down from my player/camera to keep it in position and so I can make it walk up and down stairs.<br><br>In the 'how to' section it mentions using the ray as a spring and dampening the forces but I have no idea how to do it...<br><br>Can anyone help me please? <br><br></td></tr></table><br>
<a name="768198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Ja2,<br><br>Sorry but I haven't played with rays yet so can't you help on that.<br><br>It's an interesting demo, but if you look how the player character moves up a ramp (or up the stairs) you can see it's intersecting (submerging) like crazy and slowly corrects itself!<br>I doubt you want something like that happening to a character with actual feet and legs!?!<br>I'm guessing that the ray either has a natural tendancy to 'get out of the collision' thus propelling it upwards (and adjusting to the ramp) - or in code it registers the collision depth and compensates with an upward force.<br><br>[EDIT] I don't know C++ but looking at the sourcecode (pplayer.cpp, lines 177-190) it clearly looks like he uses the ray (much line you'd do a LinePick) to check the height from the ground and if it's below ground to give it some upward force to correct....<br><br>Hope that helps,<br><br>Danny. <br><br></td></tr></table><br>
<a name="768290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Danny :)<br><br>I have looked through the demo source code but I don't know C++ either. I've also tried a simple linepick and then add force upwards which looks awful. I was even manually positioning the body which works ok until you collide with something. Feel like I've tried everything :(<br><br>Meanwhile, I have come across another problem... If I have an ODE body with more than 1 geom, then how can I test for collisions on all the connected geoms?<br><br>I'm adding sound effects when 2 geoms collide, but if the collided object has more than 1 geom, the sounds don't work... Any ideas? <br><br></td></tr></table><br>
<a name="768304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I imagine your situation correctly, you should store the handles to all geometries you use. Can you then not check their individual collisions with dGeom1CountCollision(geom) and dGeom2CountCollision(geom) ?!<br><br>I'm experimenting with a system loosely based on that "Sphere Demo Using Angular Velocities" by PhsyicParrot (see thread 7). In that I use a sphere for rolling the player. And only use it's position to place my player mesh and keep it upright.<br>I also force a box geom ABOVE the sphere (position is forced using bodySetPosition) which enables me to PUSH other objects out of the way - which is very cool.<br>BUT since that box's position is forced, it will simply 'pass through' any static collision geometry - which is pretty crap, really. Making the sphere the only object that prevents my player walking through static-walls. Which is good enough, but the sphere is of a small radius and no way coveres the full height of the player's body. Meaning if it would walk under a low bridge, it's torso would simply move THROUGH it :(<br>If that makes any sense...<br><br>What we really NEED is a function/routine that can PLACE any body ACCURATELY at a given XYZ position but internally uses forces (not velocity or dBodySetPosition), so that IT can collide with other bodies, and other bodies can collide into IT...<br>With that you might conclude that if a body did not arrive at the given XYZ coordinates then it must have been 'obstructed' in some way ie. collided with something else...<br>But I'm guessing such a function has to take into account things like mass, gravity, friction, AND the advance speed of the simulator (as a delta time). AND this probably only work on isolated bodies ie. not connected to any joints...<br><br>Pff... should have finished school.<br>Need more coffee...<br><br>D. <br><br></td></tr></table><br>
<a name="768316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> LOL it sounds like we're workin on pretty much the same thing...<br><br>I don't store all the geom handles I use, I made myself a GeomCage function that finds all of a models "Geom" children and automatically makes a box for each one, then joins them all together. I'll have a look at that tho. Maybe an array in the ODE type to store its geoms...<br><br>I was also using PhsyicParrot's demo as a basis for my FPS player control. It drags tho on the ground... Then I tried the forced body method to position the body at my cameras position and then just moved the camera as normal. It worked great except that it doesn't collide correctly. Makes other object explode and doesn't get moved by other objects...<br><br>I was going to post my code but we had a power cut a few hours back and I lost the past 4 days work. Guess it must have been in the middle of saving or something. After calling my computer a few rude names, I decided that it could have been worse. Now I get to try again with ray casting... I even had working soft bodies that I want to use for things like sacks, mattresses etc etc<br><br>It would be great if VIP3R could make us a JV-ODE function like you're suggestiong. I vote for a dFPSCreatePlayer() function ;o) <br><br></td></tr></table><br>
<a name="768324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gosh 4 days work gone sucks big time!<br><br>Yes I use angular velocity on the sphere to drive it.<br>Linear velocity will make it drive straight through walls. And using force makes it's behaviour too unpredictable (for me at least, cause I don't have the maths to sort it out physically correct :( )<br>But I do use SetForce to make it jump.<br><br>Right now I'm trying to sort out a formula that will take into account mass, sphere radius and the simulator timestep. So that it will run the SAME on any FPS! <br>Something I haven't been able to do with ODE before in any way, shape or form. <br>I know you should not use variable-timesteps in ode (and I'm not doing so) but it really makes things difficult to run the same on different systems in different circumstances.. Unless you lock your FPS to a set amount - but that's so 80's ;)<br><br>Curious to know how you will get along with the raycasting approach. I never touched it since it sounds too much like a pogo-stick to me - and I never got the hang of that either :D<br><br>Good luck to us both- <br><br></td></tr></table><br>
<a name="769126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> What could cause a MAV on the line:<br><br>dSpaceCollide (Space,World,ContactGroup)<br><br>I've just added sounds when my geoms collide and also made some objects breakable by removing the first ode object and making a few new ode objects in it's place.<br><br>Normally it works just fine but I'm having this occasional error pop up... <br><br></td></tr></table><br>
<a name="769137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> A MAV can occur in dSpaceCollide() for a multitude of reasons, it isn't necessarily collision related. It commonly means either you and/or the physics engine has tried to access an object (or its properties) that doesn't exist.<br><br>I'd suggest commenting out the stuff you've just added and gradually re-implement and test it at each stage until you find the culprit.<br><br>Check you're not accessing collision info for the sounds on any geom that has no collision count or no longer exists, that could possibly cause it.<br><br>It could also be due to accessing bodies, geoms and joints that no longer exist. <br><br></td></tr></table><br>
<a name="769146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the suggestions VIP3R :)<br><br>I think it's fixed now but it leads me to another question. When you delete an ode object, are the geoms and bodies automatically freed?<br><br>I ask because I was using dGeomDestroy and dBodyDestroy then deleting the ODE type... Now that I commented out the destroy commands, it works fine. It was definitely the deleting that broke it, tried your suggestion of commenting out all my new bits.<br><br>EDIT: Bugger, no it isn't fixed :( Wierd that sometimes it crashes but sometimes runs without any problems. Will keep on it... <br><br></td></tr></table><br>
<a name="769156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> JA2,<br><br>It's always best first to destroy every Geom you have, then the Body then the Joint then the ode type itself - in that order. I always do it manually to make sure it's all gone ;)<br><br>Like Vip3r said, when ODE crashes the debugger often gives a totally different program line (or none at all) than where the actual problem is, so don't necesarily trust that response, the problem might well be somewhere else.<br><br>Since you added sound effects, are you taking into account that ODE sometimes creates several 'contact points' (collision points) so if you let collisions TRIGGER a sound effect - to make sure you only play that soundfx ONCE (once for every object, and once every x milliseconds) - and not 'for every collision point'. Especially if you do not delete an object after it's first collision, it could trigger like dozens of soundfx in a single frame?!<br>MAYBE that's what's choking it?!<br>OR you're reading collision data when you've just deleted the geom/body ???<br><br>d. <br><br></td></tr></table><br>
<a name="769199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found it :)<br><br>dGeomTransformSetCleanup TransformGeom,1<br><br>I added an array into my ODE type called Geoms[]. Stores up to 99 Geoms per object. When I was deleting the ODE type and 'trying' to destroy each Geom in the array, I got the error. Removing the line above fixed it... Just curious tho, what does that line do??<br><br>Danny, thanks for the tips on sound/collisions. I put in a small delay using millisecs to stop it going crazy. Everything else seems to be going smoothly. Back up to where I was before I lost my work. Still got to fix my FPS camera tho... just like you said, it looks a bit like a pogo stick LOL <br><br></td></tr></table><br>
<a name="769313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> dGeomTransformSetCleanup performs an automatic cleanup of the geoms when the transform is deleted. It doesn't remove the collision data though leading to potential memory leaks. The reason it's causing the MAV would be due to deleting the geoms manually, then ODE tries to do it too and they're not there anymore. Danny highlighted a problem with this function in JV-ODE Physics Thread 8, about a third of the way down. Have a look at it if you can.<br><br>The solution to cleanup transform geoms and their data correctly is as follows...<br><br><i>First you -must- set the transform cleanup mode to zero (disable) for this to work correctly...<br><br><pre class=code>dGeomTransformSetCleanup TransformGeom,0</pre>Next, when you want to destroy the transform and parent geoms, you should do it in the following order...<br><br><pre class=code>dGeomDestroy GeomObject
dGeomDestroy TransformGeom
dGeomDestroy Geom
dBodyDestroy Body</pre>Now everything is cleaned up correctly and there's no memory leak.</i><br><br>I'd recommend switching over to Geom Offsets instead of Geom Transforms, as they're much easier to manage.<br><br>If you want to delete entire objects, it's best to delete them individually in the reverse order that they were created...<br><br><i>Joint(s) &gt; Geom(s) &gt; Body &gt; Type</i> <br><br></td></tr></table><br>
<a name="769435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JA2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just added those extra bits to my RemoveODE function. Everything seems good now. Before, when I was using dGeomTransformCleanup 1, when I deleted the object, I was still colliding with it... All fixed now tho.<br><br>Thanks VIP3R :) <br><br></td></tr></table><br>
<a name="773685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi sorry to jump in here, I'm not sure where else to post, first I'd like to say what a great wrapper this is, good work!<br><br>Here is my problem at the moment, I'm trying to integrate the ode engine within my game structure which is fully Object Orientated using BlitzMax, I can convert some of the simple examples which come with the demo, for example the cube creating example, but what I'm trying to do is convert the car demo, I can create the car bosy but I can't create the wheels, here is the code so far:<br><pre class=code>
' SuperCars -----------------------------

SuperStrict

Framework BRL.GLMax2D
Import BRL.Random
Import DevCode.JVODEDemo
Import DevCode.JVODEOpenGL

AppTitle:String="SuperCars"

SetGraphicsDriver GLMax2DDriver()

Graphics 800,600,0,0

Global entGeomList:TList=CreateList()

Global World:Int=dWorldCreate()
Global Space:Int=dHashSpaceCreate(0)
Global ContactGroup:Int=dJointGroupCreate(0)

' Car Type --------------------------------
Type TCar
	Field body:Int
	Field geom:Int
	Field mesh:Int
	Field rgb:Int[]
	Field scale:Float[]
	Field CarStartY:Int
	Field CMass:Float
	Field Car:Int
	
	Function Create:TCar()
		Local xp:Float
		Local zp:Float
		Local count:Int

		xp=Rand(-10,10)
		zp=Rand(-10,10)
	
		Local ode:TCar = New TCar
		ode.body=dBodyCreate(World)
		ode.Car = ode.body
		ode.CarStartY = 20
		ode.CMass = 200
		dBodySetAxisAngle(ode.body,0,0,0,0)
		dBodySetPosition(ode.body,0,ode.CarStartY,0)
		Local mass:Int = dMassCreate()
		dMassSetBoxTotal(mass,ode.CMass,3,1,4)
		dMassTranslate(mass,0,-1,0)
		dBodySetMass(ode.body,mass)
		dMassDestroy(mass)
		ode.geom=dCreateBox(Space,3.0,1.0,4.0)
		Local CGeom:Int = ode.geom
		dGeomSetBody(ode.geom,ode.body)
		ode.mesh=dBoxClass
		Local CMesh:Int = ode.mesh
		ode.rgb=[40,80,255]
		ode.scale=[3.0,1.0,4.0]
		
'		Local wheels:TWheel TWheel.Create(ode:TCar)    ' Create Wheels and pass the car
		ListAddLast(entGeomList,ode:TCar)
		
	End Function
	
	' Update Car --------------
	Method Update()
	
		glPushMatrix()

		glTranslatef(dGeomGetPositionX(geom),dGeomGetPositionY(geom),dGeomGetPositionZ(geom))
		dGeomGetAxisAngle(geom)
		glRotatef(dVectorW(),dVectorX(),dVectorY(),dVectorZ())

		SetDrawColour(rgb[0],rgb[1],rgb[2])

	' ### DrawSphere:		radius - slices - stacks
	' ### DrawCar:			xscale - yscale - zscale
	' ### DrawCylinder:		radiusb - radiust - length - slices - loops
	' ### DrawCapsule:		radiusb - radiust - length - slices - loops
	If mesh=dSphereClass Then DrawSphere(scale[0],14,14)
	If mesh=dBoxClass Then DrawCar(scale[0],scale[1],scale[2])
	If mesh=dCylinderClass Then DrawCylinder(scale[0],scale[1],scale[2],8,8)
	If mesh=dCapsuleClass Then DrawCapsule(scale[0],scale[1],scale[2],8,8)

	glPopMatrix()
	
	' Update Camera 
	UpdateCamera(0,3,-12,0,0,0,0)	' ### xpos - ypos - zpos - angle - rx - ry - rz

	Local PivotX:Float=Cos(dGeomGetYaw(geom)+90)+dGeomGetPositionX(geom)
	Local PivotY:Float=dGeomGetPositionY(geom)
	Local PivotZ:Float=Sin(dGeomGetYaw(geom)+90)+dGeomGetPositionZ(geom)

	gluLookAt(PivotX,PivotY,PivotZ,dGeomGetPositionX(geom),dGeomGetPositionY(geom),dGeomGetPositionZ(geom),0,1,0)

	End Method

End Type

' *************************
' Setup ODB ***************
' *************************

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)
dContactSetMode(dContactBounce)
dContactSetBounce(0.1)
dContactSetMu(48)

' Setup Scene

InitOpenGL(GL_SMOOTH)	' ### GL_SMOOTH - GL_FLAT

InitLight(-45,70,70)	' ### xpos - ypos - zpos

' Create plane

dCreatePlane(Space,0,1,0,0)

Local PTime:Int
Local Timer:Int
Local PhysicsTime:Float

Global alan:TCar=TCar.Create()

' MAIN LOOP ----------------------------------------

While Not AppTerminate() And Not KeyDown(KEY_ESCAPE)

	ClearScene()

	For Local p:TCar = EachIn entGeomList
	p.Update()
	Next
	
	SetDrawColour(230,230,240)	' ### red - green - blue
	DrawPlane()

	PTime=MilliSecs()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime=MilliSecs()-PTime

	EnableGLText(255,255,255)
	GLDrawText "JV-ent Version "+FixFloat(dGetVersion()),0,0
	GLDrawText "Physics Time:"+FixFloat(PhysicsTime),0,15
	GLDrawText "Demo Time:"+dDemoTime(),340,0
	If dDemoTime()=0 Then GLDrawText "*** TIME EXPIRED PLEASE RESTART DEMO ***",240,70

	Flip 1

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseode()

End
</pre><br>So as you can see I need a TWheel Type, but my attempts fail, when I run the code I recieve very nasty errors with no explaination, any help here would be greatly appreciated.  I have also added the TWheel Create() in the TPlayer Type, but I've ghosted it out.<br><br>Thank you. <br><br></td></tr></table><br>
<a name="773843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> The bit of code I need to see regarding the wheels you've 'ghosted out' :)<br><br>The Update method won't work like that, firstly the Update Camera section should be called before any drawing operations (Update Car). The UpdateCamera() function can only be called once for each Flip in the main loop.<br><br>I don't think the errors are likely due to adding the wheels, much more likely due to the way you've implemented the UpdateCam()/UpdateGeoms() functions from the original demo as a method.<br><br>Make sure you're code is executed in the same order as the demo. <br><br></td></tr></table><br>
<a name="773864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay I'll adjust the code and re-post.  I ghosted the TWeel call because I'm not sure how to create the TWheel Type. <br><br></td></tr></table><br>
<a name="773875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay here I have managed to create the car as a type and the Spheres and Capsules as Types, this is an example that it is working so far.  I will make my attempt to create the car's wheels now, this is where things turn nasty.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

Framework BRL.GLMax2D
Import BRL.Random
Import DevCode.JVODEDemo
Import DevCode.JVODEOpenGL

AppTitle:String="SuperCars"

SetGraphicsDriver GLMax2DDriver()

Graphics 800,600,0,0

Global entGeomList:TList=CreateList()

Global World:Int=dWorldCreate()
Global Space:Int=dHashSpaceCreate(0)
Global ContactGroup:Int=dJointGroupCreate(0)

Type TCar 		' Car Type --------------------------------
	Field body:Int
	Field geom:Int
	Field mesh:Int
	Field rgb:Int[]
	Field scale:Float[]
	Field CarStartY:Int
	Field CMass:Float
	Field Car:Int
	
	Function Create:TCar()
		Local xp:Float
		Local zp:Float
		Local count:Int

		xp=Rand(-10,10)
		zp=Rand(-10,10)
	
		Local ode:TCar = New TCar
		ode.body=dBodyCreate(World)
		ode.Car = ode.body
		ode.CarStartY = 20
		ode.CMass = 200
		dBodySetAxisAngle(ode.body,0,0,0,0)
		dBodySetPosition(ode.body,0,ode.CarStartY,0)
		Local mass:Int = dMassCreate()
		dMassSetBoxTotal(mass,ode.CMass,3,1,4)
		dMassTranslate(mass,0,-1,0)
		dBodySetMass(ode.body,mass)
		dMassDestroy(mass)
		ode.geom=dCreateBox(Space,3.0,1.0,4.0)
		Local CGeom:Int = ode.geom
		dGeomSetBody(ode.geom,ode.body)
		ode.mesh=dBoxClass
		Local CMesh:Int = ode.mesh
		ode.rgb=[40,80,255]
		ode.scale=[3.0,1.0,4.0]
		
'		Local wheels:TWheel TWheel.Create(ode:TCar)    ' Create Wheels and pass the car
		ListAddLast(entGeomList,ode:TCar)
		
	End Function
	
	Method Update() 'Update Car -----------------------------------
	
		' Update Camera 
		UpdateCamera(0,3,-12,0,0,0,0)	' ### xpos - ypos - zpos - angle - rx - ry - rz

		Local PivotX:Float=Cos(dGeomGetYaw(geom)+90)+dGeomGetPositionX(geom)
		Local PivotY:Float=dGeomGetPositionY(geom)
		Local PivotZ:Float=Sin(dGeomGetYaw(geom)+90)+dGeomGetPositionZ(geom)
	
		gluLookAt(PivotX,PivotY,PivotZ,dGeomGetPositionX(geom),dGeomGetPositionY(geom),dGeomGetPositionZ(geom),0,1,0)

		' Update Geoms
		glPushMatrix()

		glTranslatef(dGeomGetPositionX(geom),dGeomGetPositionY(geom),dGeomGetPositionZ(geom))
		dGeomGetAxisAngle(geom)
		glRotatef(dVectorW(),dVectorX(),dVectorY(),dVectorZ())

		SetDrawColour(rgb[0],rgb[1],rgb[2])

		' ### DrawSphere:		radius - slices - stacks
		' ### DrawCar:			xscale - yscale - zscale
		' ### DrawCylinder:		radiusb - radiust - length - slices - loops
		' ### DrawCapsule:		radiusb - radiust - length - slices - loops
		If mesh=dSphereClass Then DrawSphere(scale[0],14,14)
		If mesh=dBoxClass Then DrawCube(scale[0],scale[1],scale[2])
		If mesh=dCylinderClass Then DrawCylinder(scale[0],scale[1],scale[2],8,8)
		If mesh=dCapsuleClass Then DrawCapsule(scale[0],scale[1],scale[2],8,8)

		glPopMatrix()
	
	End Method

End Type

Type TCapsule Extends TCar ' Capsule Type -------------------------------

	
	Function Create:TCapsule()
		For Local capsules:Int = 1 To 20
		Local ode:TCapsule = New TCapsule
		ode.body = dBodyCreate(World)
		dBodySetAxisAngle(ode.body,90,1,0,0)
		dBodySetPosition(ode.body,Rand(-100,100),30,Rand(-100,100))
		ode.geom = dCreateCapsule(Space,1.0,8.0)
		dGeomSetBody(ode.geom,ode.body)
		ode.mesh = dCapsuleClass
		ode.rgb=[Rand(0,255),Rand(0,255),Rand(0,255)]
		ode.scale = [1.0,1.0,8.0]
		ListAddLast(entGeomList,ode:TCapsule)
		Next
	End Function
	
	Method Update() 'Update Capsule ---------------------------------
		' Update Geoms
		glPushMatrix()

		glTranslatef(dGeomGetPositionX(geom),dGeomGetPositionY(geom),dGeomGetPositionZ(geom))
		dGeomGetAxisAngle(geom)
		glRotatef(dVectorW(),dVectorX(),dVectorY(),dVectorZ())

		SetDrawColour(rgb[0],rgb[1],rgb[2])

		' ### DrawSphere:		radius - slices - stacks
		' ### DrawCar:			xscale - yscale - zscale
		' ### DrawCylinder:		radiusb - radiust - length - slices - loops
		' ### DrawCapsule:		radiusb - radiust - length - slices - loops
		If mesh=dSphereClass Then DrawSphere(scale[0],14,14)
		If mesh=dBoxClass Then DrawCube(scale[0],scale[1],scale[2])
		If mesh=dCylinderClass Then DrawCylinder(scale[0],scale[1],scale[2],8,8)
		If mesh=dCapsuleClass Then DrawCapsule(scale[0],scale[1],scale[2],8,8)

		glPopMatrix()
	
	End Method
End Type

Type TSphere Extends TCar  ' Sphere Type -------------------------------
	
	Function Create:TSphere()
		For Local sphere:Int = 1 To 20
		Local ode:TSphere = New TSphere
		ode.body = dBodyCreate(World)
		dBodySetAxisAngle(ode.body,0,0,0,0)
		dBodySetPosition(ode.body,Rand(-100,100),30,Rand(-100,100))
		ode.geom = dCreateSphere(Space,4.0)
		dGeomSetBody(ode.geom,ode.body)
		ode.mesh = dSphereClass
		ode.rgb=[Rand(0,255),Rand(0,255),Rand(0,255)]
		ode.scale = [4.0]
		ListAddLast(entGeomList,ode:TSphere)
		Next
	End Function
	
	Method Update()  '  Update Sphere --------------------------------
		
		' Update Geoms
		glPushMatrix()

		glTranslatef(dGeomGetPositionX(geom),dGeomGetPositionY(geom),dGeomGetPositionZ(geom))
		dGeomGetAxisAngle(geom)
		glRotatef(dVectorW(),dVectorX(),dVectorY(),dVectorZ())

		SetDrawColour(rgb[0],rgb[1],rgb[2])

		' ### DrawSphere:		radius - slices - stacks
		' ### DrawCar:			xscale - yscale - zscale
		' ### DrawCylinder:		radiusb - radiust - length - slices - loops
		' ### DrawCapsule:		radiusb - radiust - length - slices - loops
		If mesh=dSphereClass Then DrawSphere(scale[0],14,14)
		If mesh=dBoxClass Then DrawCube(scale[0],scale[1],scale[2])
		If mesh=dCylinderClass Then DrawCylinder(scale[0],scale[1],scale[2],8,8)
		If mesh=dCapsuleClass Then DrawCapsule(scale[0],scale[1],scale[2],8,8)

		glPopMatrix()

	End Method
End Type


' *************************
' Setup ODB ***************
' *************************

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)
dContactSetMode(dContactBounce)
dContactSetBounce(0.1)
dContactSetMu(48)

' Setup Scene

InitOpenGL(GL_SMOOTH)	' ### GL_SMOOTH - GL_FLAT

InitLight(-45,70,70)	' ### xpos - ypos - zpos

' Create plane

dCreatePlane(Space,0,1,0,0)

Local PTime:Int
Local Timer:Int
Local PhysicsTime:Float

' Create objects ---------------------------
Global alan:TCar=TCar.Create()
Global capsules:TCapsule=TCapsule.Create()
Global spheres:TSphere=TSphere.Create()

' MAIN LOOP ----------------------------------------

While Not AppTerminate() And Not KeyDown(KEY_ESCAPE)

	ClearScene()

	For Local p:TCar = EachIn entGeomList		'update car
	p.Update()
	Next
	For Local c:TCapsule = EachIn entGeomList	'update capsules
	c.Update()
	Next
	For Local s:TSphere = EachIn entGeomList	'update spheres
	s.Update()
	Next
	
	SetDrawColour(230,230,240)	' ### red - green - blue
	DrawPlane()

	PTime=MilliSecs()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime=MilliSecs()-PTime

	EnableGLText(255,255,255)
	GLDrawText "JV-ent Version "+FixFloat(dGetVersion()),0,0
	GLDrawText "Physics Time:"+FixFloat(PhysicsTime),0,15
	GLDrawText "Demo Time:"+dDemoTime(),340,0
	If dDemoTime()=0 Then GLDrawText "*** TIME EXPIRED PLEASE RESTART DEMO ***",240,70

	Flip 1

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseode()

End


</textarea> <br><br></td></tr></table><br>
<a name="773878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does this peice of code 'have to' run before the updates?  I think this is probably an obvious question :)<br><pre class=code>
dBodySetPosition(Wheel[1],-2,CarStartY-0.5,+2)
</pre> <br><br></td></tr></table><br>
<a name="773887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, that code sets the initial position of the wheel and must run before the updates.<br><br>I would highly recommend changing the Update() methods. It shouldn't be used for the drawing operations. Your using it as a method for each object which is inefficient and will lead to problems later on.<br><br>It would be better to add something like the following method for the Car type instead...<br><pre class=code>
Method Update() 'Update Car -----------------------------------

Local count:Int
Local angle:Float

For count=1 To 4
	dBodyEnable(Wheel[count])
Next

dBodyEnable(Car)

For count=1 To 4
	dJointSetHinge2Param(Joint[count],dParamVel2,Force)
	dJointSetHinge2Param(Joint[count],dParamFMax2,Torque)
Next

For count=1 To 2
	angle=Steer-dJointGetHinge2Angle1(Joint[count])
	dJointSetHinge2Param(Joint[count],dParamVel,angle)
	dJointSetHinge2Param(Joint[count],dParamFMax,400)
Next

End Method
</pre>...the other objects don't need methods at this stage.<br><br>I'm impressed with your determination, but I'd try something a little easier to get to grips with OOP programming. Learning the physics engine alone will need quite a steep learning curve. Adding learning OOP into the mixture will lead to frustration, confusion and lots of difficult debugging sessions.<br><br>Also keep in mind that you're using the built-in JV-ODE 3D Engine, which isn't advanced enough to use for your projects. It was only designed to run the JV-ODE demos.<br><br>[edit] Nearly forgot to mention, there's a dedicated BlitzMax JV-ODE Physics Thread in the 'BlitzMax Module Tweaks' forum area ;) <br><br></td></tr></table><br>
<a name="773891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> But you cant actually make a game without using Object Oriented Programming?  So what your saying is that all the issues I'm having is because it was never really designed for games?<br><br>I've just put the code together for creating the wheels and it simply crashes, as in the engine crashes.  Perhaps ODE isn't for me. <br><br></td></tr></table><br>
<a name="773928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also the code you have provided above to go into the car update is exactly what's crashing my code, did you try it? <br><br></td></tr></table><br>
<a name="773970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woah! This physics engine seems to be most populair. I have a question. Can i make a game like BestFriends of Retro64 (www.retro64.com) using this physics engine??<br><br>Can i also make a FPS with rag-doll features, breaking glass, tear clothing and slopes and stuff?<br><br>I have seen the new PhysX engine of AGEIA for Blitz3D. Is it better? <br><br></td></tr></table><br>
<a name="773999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Render</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> The PhysX wrapper it is better by amount of features. Im sure that this statement will be confirmed by everyone who has tried my wrapper in action. All the projects  that use PhysX SDK" are shown in this table <a href="http://rubux.swargo.com/?module=articles&amp;c=articles&amp;b=2&amp;a=1" target="_blank">http://rubux.swargo.com/?module=articles&amp;c=articles&amp;b=2&amp;a=1</a> <br><br></td></tr></table><br>
<a name="774143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> The best library isn't just about the features. More important is it's future and the support given by the people who worked on it.<br>With an attitude like yours I think I'll stay away from that Phisx for a while...<br><br>d. <br><br></td></tr></table><br>
<a name="774153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="774157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Render</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> PhysX engine of AGEIA already long time is used in games. These are such games as Gothic 3, Cellfactor, Tom Clancy's Splinter Cell: Double Agent, Unreal Tournament 3 and more others. PhysX has proved to be from the best side. Therefore my choice has stopped on AGEIA PhysX.<br><br>What physical engine is better, solving to you. <br><br></td></tr></table><br>
<a name="774164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OJay</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> would you please stop hijacking this thread?!? physx is free for non-commercial use only. if you can afford 50.000 bucks for a physics engine to make an indie game, then you're fine. everybody else will stay with ode/tokamak. period. <br><br></td></tr></table><br>
<a name="774166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Render</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;would you please stop hijacking this thread?!?<br><br>OK!<br><br><br>&gt;physx is free for non-commercial use only<br><br>It is old information. Read the License <a href="http://devsupport.ageia.com" target="_blank">http://devsupport.ageia.com</a> or <a href="http://www.gamasutra.com/php-bin/news_index.php?story=11801" target="_blank">http://www.gamasutra.com/php-bin/news_index.php?story=11801</a><br>Here speak about cost:<br>Costs<br>Free: <br>- Commercial &amp; non-commercial use on PC<br>- Must keep registration information currect<br>- Must agree to the EULA at the time of download (pops up, but is copied below)<br>- Available for Windows &amp; Linux (soon)<br>- No PhysX HW support requirement<br>- PS3 platform (through Sony pre-purchase)<br>- All platforms through some of our middleware partnerships, such as UE3, Gamebryo 2.2, and others<br><br>$50k per platform: <br>-Xbox 360 <br>- Fee may be waived at our discretion for multi-platform developers providing PC HW support<br>- Fee may be waived at our discretion for some Tools &amp; Middleware providers <br><br></td></tr></table><br>
<a name="774230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> It clearly says:<br>"Physics middleware creator and 'physics processing unit' hardware company Ageia has announced new licensing terms, allowing its PhysX SDK to be used and its runtime components distributed in all commercial and non-commercial PC projects for free."<br><br>Anyway, i want to know if JV-ODE is the way to go or not. So far i can only see a racing-car example.<br>Where are the demo's as they have it in PhysX? <br><br></td></tr></table><br>
<a name="774306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it has really good potential, but at the moment there is no examples on how to incorporate the code into your own game structures, or, you have to be a pro to figure it out. <br><br></td></tr></table><br>
<a name="774365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Render</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Let's discuss PhysX wrapper in a corresponding theme. Ok?<br>At wrapper there is a full documentation and 54 examples with sorce codes. You can them download in section "Files" of my site <a href="http://rubux.swargo.com" target="_blank">http://rubux.swargo.com</a> <br> I think it quite will suffice for studying PhysX wrapper. <br><br></td></tr></table><br>
<a name="774492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>But you cant actually make a game without using Object Oriented Programming?<br> <br></div><br>Hmm, I'm not sure how long you've been programming but OOP isn't vital for making anything. The method code was to give you an idea of what I was describing you should do with the methods, it wasn't intended to be usable. Have you any idea how long it would take to become familiar enough with other folks code before I could integrate ODE into it. The crashing problems you are experiencing are due to the way you've constructed your code and nothing to do with ODE. If you do the exact same thing with any other engine the same problems will occur. ODE can be implemented using OOP but you need to further understand both OOP and ODE before doing so. You clearly don't, I'm giving you sound advice in the posts above, take it. It simply isn't possible to design examples to cater for every feasible game structure, as most are custom designed and therefore unique.<br><br>@LevelTen Websites: Download the demo version of JV-ODE, there's a link in the top post of this thread. There are several demos including RagDolls etc that you can try out. Most engines including ODE are capable of the features you've mentioned.<br><br>@Render: If you want to discuss the PhysX wrapper further then please do... <b>but NOT in the JV-ODE thread!</b> Thank you. <br><br></td></tr></table><br>
<a name="774527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes you are right, I haven't been programming for very long, I am fairly new, but one thing I do know, the games I have written in B3D simply could not be done in any other way without be inefficient, the OOP method I was creating my games was vital.  eg. using a createPlayer function which is re-usable, an updatePlayer function, updateEnemy function which updates every enemy, without this it just wouldn't work, or not very well.  Anyway, I am mostly new with Blitzmax, and reading through tutorials I came to believe that oop in BMax was text book for making games??  Your way more advanced than me so I will take your advice, thanks. <br><br></td></tr></table><br>
<a name="774576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> OOP is fine, I'm not saying don't use it, only to get more familiar with it first ;)<br><br>Try recreating your car example, but instead of implementing the physics, only place the visible geometry objects in the code. Once you have a static scene working with all of the visible car components in place, then add the physics to the objects. You'll quickly discover whether the error exists in the 3D drawing section of the example or in the data management (globals, types, arrays etc) or elsewhere. For example, if you're not using data types with global scope to store the handles of the ODE wheel geometry, you will no longer have access to the objects and you'll get crashes/nightmares. <br><br></td></tr></table><br>
<a name="774775"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay I'll give that a go, I felt as if I'd tried everything, I was pretty much ripping my hair out :(  As far as Globals go the only Globals I'm using are environment.  What could be helpfull is some descriptions on all the variables so that I know 100% which Type each one needs to go into.  <br><br>Also, I'm not sure which type the SetupCar() and UpdateCar() functions needs to be setup in, because where you are using Global variables in everything you dont worry whether your going to be able to access them, hence why you have Wheel and Car being called in one of the functions, whereas I'm trying to set them up Types using Locals, I think this is what is going wrong.  I  need to understand the engine more so that I can make changes to it to work with oop. <br><br></td></tr></table><br>
<a name="774793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> verfum, you now talking about PhysX or JV-ODE? <br><br></td></tr></table><br>
<a name="774828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> No I'm talking about ODE, here is the function with both wheel and car variable calls, showing that you can't use it within one Type, i.e. it can't go into the car Type because of Wheel and can't go in Wheel type due to Car, well it's not straight forward anyway.<br><pre class=code>
		For count = 1 To 4
			ode.Joint[count]=dJointCreateHinge2(World,0)
			dJointAttach(ode.Joint[count],ode.Car,ode.Wheel[count])
								
	dJointSetHinge2Anchor(ode.Joint[count],dBodyGetPositionX(ode.Wheel[count]),dBodyGetPositionY(ode.Wheel[count]),dBodyGetPositionZ(ode.Wheel[count]))
			dJointSetHinge2Axis1(ode.Joint[count],0,1,0)
			dJointSetHinge2Axis2(ode.Joint[count],-1,0,0)
			dJointSetHinge2Param(ode.Joint[count],dParamSuspensionERP,0.8)
			dJointSetHinge2Param(ode.Joint[count],dParamSuspensionCFM,ode.SuspensionHS)
		If count&gt;2
			dJointSetHinge2Param(ode.Joint[count],dParamLoStop,0)
			dJointSetHinge2Param(ode.Joint[count],dParamHiStop,0)
		End If
		Next
</pre> <br><br></td></tr></table><br>
<a name="774849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Agent_J</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> See for yorself! who is who!<br>here are some tests I've made:<br>PhysX vs Newton vs ODE<br>www.blitzbasic.com/Community/posts.php?topic=68966 <br><br></td></tr></table><br>
<a name="774890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> @verfum: I thought you might be using local scopes, which would explain the crashing. All you need to remember with ODE is to use global scope with any handles you access (body/geom/joint etc), how you do it is entirely up to you. If you don't Blitz will send the wrong handle addresses to the ODE DLL and... boom.<br><br>@Agent_J: Nice work, except the speed comparison depends on the level of accuracy used, making it easy to 'influence' the results. For example, I could double or quadruple (or more) the speed of the ODE tests. You can probably do the same for the other engines too, so the speed comparison is meaningless in reality.<br><br>Also, collision groups are in ODE. In fact most of the 'No' labels are not entirely true as nearly all of them can be implemented. For example materials, cloth, magnets and water are all possible without much effort. <br><br></td></tr></table><br>
<a name="774900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZJP</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> The ONLY way for a newbee to choose a physic engine is.... EXAMPLES EXAMPLES AND EXAMPLES. Documentation and support are "welcomes" too. ;-) ;-)<br><br>JP <br><br></td></tr></table><br>
<a name="774913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes <br><br></td></tr></table><br>
<a name="774960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Render</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R,<br>  I see examples in archive. There DeltaTime stands it is almost identical in all engines. It is possible to assume, that the test for speed is exact (true).<br><br>  Then it is necessary to see at speed of work materials, cloth, magnets and water on all engines. Agent_J can make a tests? <br><br></td></tr></table><br>
<a name="774964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Agent_J</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;@Agent_J: Nice work, except the speed comparison depends on the level of accuracy used, making it easy to 'influence' the results. For example, I could double or quadruple (or more) the speed of the ODE tests. You can probably do the same for the other engines too, so the speed comparison is meaningless in reality.<br><br>  Well I set Delta Time, for it to be equal (lets say thats almost equal :)). <br>So the results of speed testing are correct. <br>As Delta Time has got almost the same meaning in each case.<br><br>&gt;Also, collision groups are in ODE. <br><br>Ok! Ill fix it :)<br><br>&gt;In fact most of the 'No' labels are not entirely true as nearly all of them can be implemented. For example materials, cloth, magnets and water are all possible without much effort.<br><br>Ridicules <br>I tried making rags with ODE and Newton.  What Ive got was very low productivity. With  PhysX wrapper the speed becomes  20 times faster on the rags calculation.<br> And it has got a lot of options (Thickness, Stretching Stiffness, Damping, Pressure, Friction, Bending, Tearable). Also the system of materials is much easy to use. <br>If only other  physic engines has got the same :)<br><br>See for yourself, but PhysX wrapper is my choiseand you know what thats nice choice :) <br><br></td></tr></table><br>
<a name="774967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Agent_J</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Render<br> Sorry I didn't see your request. <br>As for tests...in some time you will see the result <br><br></td></tr></table><br>
<a name="775118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Agent_J &amp; Render: No, you misunderstand about the timing.<br><br>I could double or quadruple (or more) the speed of the ODE tests, regardless of the Delta Time. For example, if you used a fixed update of 60fps and called the physics engine once per loop, I can still make the ODE engine run faster.<br><br>So, in the case of ODE (and possibly both of the other engines) the speed tests are not actually accurate. It all depends on the accuracy level of the physics engines. The collision speed can also be separately optimised (in ODE, I don't know about the others).<br><br>Btw, I'm not as biased as you may think, I like all three engines (ODE/Newton/PhysX). I happen to work mostly with ODE at the moment. The more choices available, the better for everybody. <br><br></td></tr></table><br>
<a name="775308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> @VIP3R:<br><br>Just bought your great DLL, I saw there's an example to use in 2D alike thing by limiting one dimension, is it possible to make it work with SpriteCandy or similar things?<br><br>BTW, when the corss platform/static BlitzMax version will be ready? ppIsaac can be used in BlitzMax/2D but it's not cross platform either. <br><br></td></tr></table><br>
<a name="775463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> Welcome yoko  :)<br><br>I've not used SpriteCandy before, but yes it should work ok with those type of libraries. Use a similar shape to the sprite for the ODE geometry and lock it into 2D with the 2D Plane joint. You need to update the sprite position and rotation to match the position and rotation of the ODE object it represents, then the sprites will 'follow' the ODE object.<br><br>There are no plans for a cross-platform BlitzMax version at the moment unfortunately, I'll be sure to post some news though if circumstances change. <br><br></td></tr></table><br>
<a name="776112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi<br>just a quick question,<br>what are the arguments for in the dcreateplane function?<br>its <br>dcreateplane(space,a,b,c,d)<br><br>I know what space is for but what about abcd?<br><br>also,<br>when drawing 2d bodies to the screen I noticed you had to add 400 to x-drawing position<br>and take away 580 from the y drawing position,<br>I just wondered how you managed to calculate this, because I wanted to change the resolution to 640,480, thanks <br><br></td></tr></table><br>
<a name="776354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's vector math used to define how a plane is rotated in relation to the gravity, abc are the normal vector of the plane and d is the dot product of abc. You're probably even more confused now ;)<br><br>The 2D coordinates and dimensions need to be calibrated depending on the resolution of the screen and also the distance of the objects on the z axis. The way I did it was to stack several objects, then adjust each value until they no longer overlap. The 400 and 580 values define the offsets of the screen drawing positions. For example, 400 is 800 divided by two (this is the center of the window at 800x600) and 580 sets the ground plane level (length of the window y axis minus 20). For 640x480 you can try using 320 (x) and 460 (y), that's 640/2=320 and 480-20=460. <br><br></td></tr></table><br>
<a name="777643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks,<br><br>I think Ill just keep the plane at 0,1,0 :) <br><br></td></tr></table><br>
<a name="780042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>JV-ODE V1.22 Update Released</b><br><br>Please check your inbox :)<br><br>Changed <i>dGeomTransformSetCleanup(geom,mode)</i> - to prevent potential memory leaks, mode 1 is no longer supported<br><br>To remain backwards compatible the above function can still be used, but it will silently return to 'mode 0' if an attempt to use 'mode 1' is made.<br><br>Added new demos:<br><i>Demo-Iceberg<br>Demo-Water</i><br><br>Please let me know if you experience any problems with the new update.<br><br>:) <br><br></td></tr></table><br>
<a name="780243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice water demos! <br><br></td></tr></table><br>
<a name="781880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >McSeb</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can someone talk some sense into me and explain what I'm doing wrong. I'm building a rope bridge by placing Boxes, each box is 0.9 wide and are spread 1 apart, in the space between them is where a hinge joint is anchored holding them together.<br><br>I'm using:<br>dContactSetMode(dContactApprox1+dContactBounce)<br>dContactSetBounce(0.1)<br>dContactSetMu(24)<br>dWorldSetERP(World,0.4)<br><br>Each plank has a mass of 1 and the whole thing is supported by a geom at each end suspending it.<br><br>My bridge works fine except that is twitches like crazy. If I drop something heavy on it, it goes down but then keeps twitching to the point where it will shake a heavy object off it. <br><br></td></tr></table><br>
<a name="781948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stopping the twitching should be as simple as tweaking a few settings.<br><br>The settings I would need to see are the hinge joint parameters you've used, ideally you need to post an example showing the problem. <br><br></td></tr></table><br>
<a name="781985"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> McSeb, try if NOT setting these two affects things for the better:<br>dContactSetMode(dContactApprox1+dContactBounce)<br>dContactSetBounce(0.1)<br><br>In general I have bad experiences with anything that has even a little 'bounce' set to it - especially with joints.<br><br>d. <br><br></td></tr></table><br>
<a name="782054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >McSeb</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I knocked together a little demo using the Cubes demo, I'm using Blitzmax:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

Framework BRL.GLMax2D
Import BRL.Random
Import DevCode.JVODE
Import DevCode.JVODEOpenGL

AppTitle:String="Rope Bridge"

SetGraphicsDriver GLMax2DDriver()

Graphics 800,600,0,0

Type ODEGeom
	Field body:Int
	Field geom:Int
	Field mesh:Int
	Field rgb:Int[]
	Field scale:Float[]
End Type

Global ODEGeomList:TList=CreateList()

' ### Setup ODE

Global World:Int=dWorldCreate()
Global Space:Int=dHashSpaceCreate(0)
Global ContactGroup:Int=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)

'********* These are set like this since this is how I'm using them **********
'In my app this yielded the best results for my other objects, I figure
'I can always use the dGeomContact.... to set individual settings for my bridge

	dContactSetMode(dContactApprox1+dContactBounce)
	dContactSetBounce(0.1)
	dContactSetMu(24)
	dWorldSetERP(World,0.4)
	dWorldSetAutoDisableFlag(World,1)
	dWorldSetAutoDisableLinearThreshold(World,0.08)
	dWorldSetAutoDisableAngularThreshold (World,0.08)
	dWorldSetAutoDisableSteps(World,0)
	dWorldSetAutoDisableTime(World,5)

	dWorldSetContactMaxCorrectingVel (World, 0.5)
	dWorldSetContactSurfaceLayer(World, 0.005)

'*********

' ### Setup Scene

InitOpenGL(GL_SMOOTH)	' ### GL_SMOOTH - GL_FLAT

InitLight(-45,70,70)	' ### xpos - ypos - zpos

' ### Create plane

dCreatePlane(Space,0,1,0,0)

Local PTime:Int
Local Timer:Int
Local PhysicsTime:Float

BuildBridge()

While Not AppTerminate() And Not KeyDown(KEY_ESCAPE)

	ClearScene()

	UpdateCamera(0,10,-15,30,1,0,0)	' ### xpos - ypos - zpos - angle - rx - ry - rz

	If MilliSecs()-Timer&gt;700
		AddObject()
		Timer=MilliSecs()
		End If

	UpdateGeoms()

	PTime=MilliSecs()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime=MilliSecs()-PTime

	EnableGLText(255,255,255)		' ### red - green - blue
	GLDrawText "JV-ODE Version "+FixFloat(dGetVersion()),0,0
	GLDrawText "Physics Time:"+FixFloat(PhysicsTime),0,15

	Flip 1

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

Function AddObject()

Local xp:Float
Local zp:Float
Local ode:ODEGeom

xp=Rand(-12,12)
zp=Rand(-5,5)

Local w:Float = Rnd(0.5,2)

ode:ODEGeom=New ODEGeom
ode.body=dBodyCreate(World)
dBodySetAxisAngle(ode.body,0,0,0,0)
dBodySetPosition(ode.body,xp,30,zp)
dBodySetAutoDisableFlag(ode.body,1)
ode.geom=dCreateBox(Space,w,w,w)
dGeomSetBody(ode.geom,ode.body)
ode.mesh=dBoxClass
ode.rgb=[Rand(0,255),Rand(0,255),Rand(0,255)]
ode.scale=[w,w,w]
ListAddLast(ODEGeomList,ode:ODEGeom)

End Function

Function BuildBridge()
	'It's messy, I knocked it together as a demo in half an hour
	
	Local Support1:ODEGeom = AddPiece(-10,2.5,0 , 0.9,5,3 , 0)
	Local Plank1:ODEGeom = AddPiece(-9,4.9,0 , 0.9,0.2,3)
	AddHinge(Support1,Plank1,-9.5,5,0)
	Local Plank2:ODEGeom = AddPiece(-8,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank1,Plank2,-8.5,5,0)
	Local Plank3:ODEGeom = AddPiece(-7,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank2,Plank3,-7.5,5,0)
	Local Plank4:ODEGeom = AddPiece(-6,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank3,Plank4,-6.5,5,0)
	Local Plank5:ODEGeom = AddPiece(-5,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank4,Plank5,-5.5,5,0)
	Local Plank6:ODEGeom = AddPiece(-4,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank5,Plank6,-4.5,5,0)
	Local Plank7:ODEGeom = AddPiece(-3,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank6,Plank7,-3.5,5,0)
	Local Plank8:ODEGeom = AddPiece(-2,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank7,Plank8,-2.5,5,0)
	Local Plank9:ODEGeom = AddPiece(-1,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank8,Plank9,-1.5,5,0)
	Local Plank10:ODEGeom = AddPiece(0,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank9,Plank10,-0.5,5,0)
	Local Plank11:ODEGeom = AddPiece(1,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank10,Plank11,0.5,5,0)
	Local Plank12:ODEGeom = AddPiece(2,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank11,Plank12,1.5,5,0)
	Local Plank13:ODEGeom = AddPiece(3,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank12,Plank13,2.5,5,0)
	Local Plank14:ODEGeom = AddPiece(4,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank13,Plank14,3.5,5,0)
	Local Plank15:ODEGeom = AddPiece(5,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank14,Plank15,4.5,5,0)
	Local Plank16:ODEGeom = AddPiece(6,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank15,Plank16,5.5,5,0)
	Local Plank17:ODEGeom = AddPiece(7,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank16,Plank17,6.5,5,0)
	Local Plank18:ODEGeom = AddPiece(8,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank17,Plank18,7.5,5,0)
	Local Plank19:ODEGeom = AddPiece(9,4.9,0 , 0.9,0.2,3)
	AddHinge(Plank18,Plank19,8.5,5,0)
	Local Support2:ODEGeom = AddPiece(10,2.5,0 , 0.9,5,3 , 0)
	AddHinge(Plank19,Support2,9.5,5,0)
	
End Function

Function AddPiece:ODEGeom(X:Float, Y:Float, Z:Float, Width:Float, Height:Float, Depth:Float, UseBody:Int=1)

	Local Obj:ODEGeom
	Obj:ODEGeom = New ODEGeom
	Obj.geom=dCreateBox(Space,Width,Height,Depth)
	If UseBody = 1 Then
		Obj.body=dBodyCreate(World)
		dBodySetAxisAngle(Obj.body,0,0,0,0)
		dBodySetPosition(Obj.body,X,Y,Z)
		dBodySetAutoDisableFlag(Obj.body,1)
		dGeomSetBody(Obj.geom,Obj.body)
	Else
		dGeomSetPosition(Obj.geom,X,Y,Z)
	EndIf
	Obj.mesh=dBoxClass
	Obj.rgb=[0,100,220]
	Obj.scale=[Width,Height,Depth]
	ListAddLast(ODEGeomList,Obj:ODEGeom)
	Return Obj
	
End Function

Function AddHinge:Int(Obj1:ODEGeom,Obj2:ODEGeom,AnchorX:Float,AnchorY:Float,AnchorZ:Float)
	Local AJoint:Int = dJointCreateHinge(World, 0)
	dJointAttach(AJoint, Obj1.body,Obj2.body)
	dJointSetHingeAnchor(AJoint, AnchorX, AnchorY, AnchorZ)
	dJointSetHingeAxis(AJoint, 0,0,1)
	Return AJoint
End Function

Function UpdateGeoms()

Local ode:ODEGeom

' ### Update Plane
SetDrawColour(230,230,240)	' ### red - green - blue
DrawPlane()

' ### Update Geoms
For ode:ODEGeom=EachIn ODEGeomList
	glPushMatrix()

	glTranslatef(dGeomGetPositionX(ode.geom),dGeomGetPositionY(ode.geom),dGeomGetPositionZ(ode.geom))
	dGeomGetAxisAngle(ode.geom)
	glRotatef(dVectorW(),dVectorX(),dVectorY(),dVectorZ())

	SetDrawColour(ode.rgb[0],ode.rgb[1],ode.rgb[2])

	' ### DrawSphere:		radius - slices - stacks
	' ### DrawCube:			xscale - yscale - zscale
	' ### DrawCylinder:		radiusb - radiust - length - slices - loops
	' ### DrawCapsule:		radiusb - radiust - length - slices - loops
	If ode.mesh=dSphereClass Then DrawSphere(ode.scale[0],14,14)
	If ode.mesh=dBoxClass Then DrawCube(ode.scale[0],ode.scale[1],ode.scale[2])
	If ode.mesh=dCylinderClass Then DrawCylinder(ode.scale[0],ode.scale[1],ode.scale[2],8,8)
	If ode.mesh=dCapsuleClass Then DrawCapsule(ode.scale[0],ode.scale[1],ode.scale[2],8,8)

	glPopMatrix()
Next

End Function
</textarea> <br><br></td></tr></table><br>
<a name="782436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks McSeb :)<br><br>Ok, firstly you should increase the World ERP from 0.4 to 0.8 to help correct the errors each step.<br><br>When bodies are attached to each other, they should have some 'mass'. If no mass is present, the bodies will be weightless and the slightest movement will cause them to jump around and jitter.<br><br>Add some mass to the planks and increase it until they stop jittering. You may need a mass value as high as 2000 for each plank before they stabilise.<br><br>Once the planks are stable you need to add/increase the mass of the boxes, or they will have no impact effect on the bridge. Try a mass value of 1000 to begin with.<br><br>Let me know if it helps or not ;) <br><br></td></tr></table><br>
<a name="790668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone done much work with RayCasting for collisions ?<br><br>I want to cast a ray and it only to collide with 1 hashspace, is this indeed possible ? <br><br></td></tr></table><br>
<a name="790697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> Replied to your email OBD<br><br>:) <br><br></td></tr></table><br>
<a name="796256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any function that can return the total force that's being applied to it from external Bodies ?<br><br><br>i.e. a stack of boxes, can you grab the force being applied to the box on the bottom of the stack ? <br><br></td></tr></table><br>
<a name="796478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, compression force, AFAIK there are no functions in the API for this purpose.<br><br>If the stacked boxes compress slightly, you could try measuring the distance between them or return the collision depth. Either could be useful to determine the amount of compression involved, giving some indication of the force. You may need to combine the mass/density with this info if the objects are of different sizes/weight. <br><br></td></tr></table><br>
<a name="798593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im having a major problem with objects penetrating others, thus making them stick together.<br><br>I am using 2D only and have a flat trimesh.  If I place a sphere on the trimesh it seems ok although moving the spehere across this sometimes bumps up and down - the trimesh is a perfectly flat surface.<br><br><br>Heres my setup code and main loop.  Im only using dBodyAddForce() no setting at all (as that completely screws the engine up)<br><br><pre class=code>

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)

dWorldSetERP(World,0.4)
dContactSetMode(dContactBounce + dContactSlip1)
dContactSetBounce(0.1)

dContactSetMu(40)

...
.

mainloop()

dSpaceCollide(Space,World,ContactGroup)
dWorldQuickStep(World,0.075)
dJointGroupEmpty(ContactGroup)
dSpaceCollide(Space,World,ContactGroup)
dWorldQuickStep(World,0.075)

...
.

</pre><br><br>Ive double checked my trimesh, in fact I reduced my trimesh further by welding verts together and eliminating any "gaps" between verts.<br><br>Im not using large units and my verts are of a similar small scale ( trimesh has verts every 16units,  the sphere im rolling is 12units)<br><br>Sometimes the sphere will just fall onto the trimesh and it will just penetrate -  other times its only when I drop another sphere on top of it.<br><br>Adding the extra dWorldQuickStep() helped a bit but it still penetrates<br><br><br><br>I have also dabbled with dWorldSetContactMaxCorrectingVel(World,1) and dWorldSetContactSurfaceLayer(World,1) but with little success.<br><br>Is there any other settings I can adjust ? or is there a problem with small scale trimesh ?<br><br>StuC <br><br></td></tr></table><br>
<a name="798680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> The scale of the sphere compared to the vert spacing is much too close. You can get away with much more spacing between the verts which will help with the bumps. You can also try using 'friction pyramid approximation 1' by setting the dContactApprox1 flag with dContactSetMode() to help with any bumps.<br><br>The problem though is the flat TriMesh. When the sphere rolls over the verts, ODE detects these as rigid edged areas causing the bump effect. TriMeshes aren't expected to be totally flat in ODE.<br><br>There are two things which would be better suited, either make the vert spacing much larger (even creating a TriMesh from a simple quad would be better), or create the flat area using a flat box instead of a TriMesh. Another way depending on how your simulation is set up, would be to use the ground plane as the flat area. <br><br></td></tr></table><br>
<a name="798685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, are you thinking of lowering the price of your wrapper any time soon? <br><br></td></tr></table><br>
<a name="798708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> Email me and we can discuss it further ;) <br><br></td></tr></table><br>
<a name="798784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;The scale of the sphere compared to the vert spacing is much too close<br><br>Surely its all just maths ?  I can see why large polys might cause a problem - but small ones ?<br><br>I already have the trimesh is made up of a series of quads that are using shared verts (so no gaps)<br><br>Just trying a box, and the same happens there too.  it all seems intermittant tho. <br><br></td></tr></table><br>
<a name="798801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's nothing to do with gaps, it's due to the triangle boundaries. When the sphere rolls over these shared verts it may be in contact with two triangles simultaneously, causing two contact joints being generated instead of one. When two contacts are made it tries to move in two different directions causing the bump.<br><br>If your TriMesh is made up of many smaller triangles/quads, then there are many more boundaries making the problem even worse.<br><br>Making the vert spacing much larger than the sphere means it is less likely to roll over a boundary, hence less chance of the bump effects.<br><br>Using a single quad or box means there is only one triangle boundary crossing diagonally across the quad. If the sphere crosses over this boundary it will still have the same effect, which is why it may seem intermittent.<br><br>To solve the problem, remove as many triangle boundaries as possible (make them larger). If you can make the quad large enough so that the sphere never contacts a boundary (so it stays within one triangle), then that will fix the problem completely. <br><br></td></tr></table><br>
<a name="798852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> The trimesh is a contour of the floor which is made of slopes and edges, I cant get rid of many more triangles :S<br><br>There are 2 triangles every 16 units, which doesn't seem alot to me.  heres a wireframe version of what Im using<br> <img src="http://baa.ovine.net/wire.png"><br><br>All verts are shared with no duplicates, and did I mention this is all in 2D ?.<br><br>Ok I understand about the bumping (which is only slight so I can live with it) but what can I try to fix the penetration issues ? <br><br>The penetration seems to happen when the main sphere is pushed by another.   As you can see (in prev post) Ive lowered the worldstep thinking that might have cured it (which it didnt), also im messing around with the MU setting which seems to correct it some but its still happening.<br><br>vip3r -&gt; thanks for the replies BTW<br><br>Chroma -&gt; just buy the thing, Vip3r has put alot of effort into the wrapper, help support it ;) <br><br></td></tr></table><br>
<a name="798861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm very odd, have you tried raising the ERP regarding the penetration issue?<br><br>If that doesn't help then ideally I'll need to see an example showing the problem, as I've never experienced the issue you're describing with those settings posted above.<br><br>If you can send me an example (with a mesh) via email, I'll look into it for you. <br><br></td></tr></table><br>
<a name="798907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> This gets stranger.  Once the sphere has penetrated I have put a debug that does a setposition to a height above where it is.  The sphere is reporting it has a linearforce but is stationary + adding force to it is ignored ?<br><br>I have issued a dWorldSetAutoDisableFlag(World,0) in case its turning itself off but its still stationary ? <br><br></td></tr></table><br>
<a name="799063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> You say it's in 2D, are you sure the sphere isn't snagging on some geometry? This would explain the forces being ignored too. The fact that you mention changing the friction helps, also leads me to believe this might be the case.<br><br>Again, it's very difficult to pinpoint the problem without actually seeing it. <br><br></td></tr></table><br>
<a name="799237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#140">[#140]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought it was snagging, but doing a setpositon to a place I know there is no geometry makes me think its not.<br><br>More experimenting had lead me to a possible solution.  Currently im slowing down the sphere by adding a force in the opposite direction (on in the x direction).  This value gets very small &lt; 0.00001.  If I cap the force to 0.01 the sticking has disappeared............. well it seems to have gone (fingers crossed)<br><br>The only down force I have is gravitiy (0.98).<br><br>I'll post you a demo if it continues to plauge me. <br><br></td></tr></table><br>
<a name="799378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#141">[#141]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, let me know ;) <br><br></td></tr></table><br>
<a name="799982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#142">[#142]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I'm the proud owner of the JV-ODE physics lib.  I got tired of messing around aimlessly in Tokamak.  The demos in this one are great and are what ultimately made me decide to purchase.<br><br>Congratz VIP3R, this is like the first or second app I've ever bought that was made by someone here on the blitz forum. <br><br></td></tr></table><br>
<a name="800026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#143">[#143]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Chroma, welcome aboard :) <br><br></td></tr></table><br>
<a name="800030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#144">[#144]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just gotta say - WOW! <br>I am very impressed with the wrapper. It took me some time to get a handle on a few things but its actually pretty easy to understand whats going on. I use the ODE users guide for most of the commands and your demos to see how you implemented a few things. Thanks for making things so much easier!<br><br>Dont spose there are any tutorials out there for frog brains like me? <br><br></td></tr></table><br>
<a name="800232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#145">[#145]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, you're welcome :)<br><br>There's an old tutorial located <a href="http://www.devcode.co.uk/misc/ODE-Tutorial.pdf" target="_blank">here</a><br><br>As mentioned it's old, so you need to update a couple of lines, for example ' <i>Include "ode.bb"</i> ' should be ' <i>Include "JV-ODE.bb"</i> ' etc. <br><br></td></tr></table><br>
<a name="800637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#146">[#146]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome tutorial.  You got anything else like that laying around? ;) <br><br></td></tr></table><br>
<a name="800711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#147">[#147]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately that's the only one I know of, but the older JV-ODE threads are full of useful tips, so be sure to have a quick read through them.<br><br>Don't forget to also browse through the JV-ODE Function Reference doc included with the wrapper for more details about the functions unique to JV-ODE.<br><br>If you get stuck, feel free to gimme a yell ;) <br><br></td></tr></table><br>
<a name="801981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#148">[#148]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi i would like to use a trimesh for my car chassis.<br>when I try it throws an error in the 'worldcollide' function.<br>When I put all objects in the space called 'space' nothing can collide but the trimesh function doesnt cause an error any more. <br><br></td></tr></table><br>
<a name="801996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#149">[#149]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ideally I'd need to see an example showing the problem, errors in dSpaceCollide() can be caused by lots of things, mostly mistakes in simulation setup.<br><br>If you're unable to post an example, feel free to send me a copy (including the mesh) and I'll take a look at it. <br><br></td></tr></table><br>
<a name="802052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#150">[#150]</a></td></tr></table></td></tr><tr ><td class="posttext"> is there a way to delete the mass on an object without deleting the body ? <br><br></td></tr></table><br>
<a name="802228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#151">[#151]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, create a new mass with a value of 1.0 (default mass), then add it to the body.<br><br>So if you had previously created some mass on a sphere body like this...<br><br><i>mass=dMassCreate()<br>dMassSetSphereTotal(mass,400.0,0.7)<br>dBodySetMass(ode\body,mass)<br>dMassDestroy(mass)</i><br><br>You can effectively remove it by doing the following on the same body...<br><br><i>mass=dMassCreate()<br>dMassSetSphereTotal(mass,1.0,0.7)<br>dBodySetMass(ode\body,mass)<br>dMassDestroy(mass)</i><br><br>The mass of a body can be updated at any time with the above method. <br><br></td></tr></table><br>
<a name="802237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#152">[#152]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi I created some geom transforms, a few boxes to represent a more complex object.<br>It all works fine but I cant seem to use dgeom1collisiongeom to see if it has collided with anything.Only the original geom works with this function. <br><br></td></tr></table><br>
<a name="802276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#153">[#153]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, firstly have a look at the Geom Offset demos. These are much easier to use than Geom Transforms but are essentially the same thing. You basically add more geoms in the same manner as the first one then offset their position, without creating a transform container each time.<br><br>Regarding the collision issue, you should also be checking  <i>dGeom2CollisionGeom(geom,index)</i> depending on the size of either object. The index is the collision number, it ranges from one up to a maximum returned by <i>dGeom2CountCollisions(geom)</i>. See the detailed collision demo to see both 'dGeom1...' and 'dGeom2...' being used.<br><br>It is possible to return the collision info on Geom Transforms too btw, so you can try accessing the 'dGeom2...' data now. In the long run though you'll be much better off with Geom Offsets. <br><br></td></tr></table><br>
<a name="802366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#154">[#154]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got it to work by using geom offset and geomcollision2!<br>thanks loads,youve been a great help <br><br></td></tr></table><br>
<a name="802591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#155">[#155]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the mass tip,  thought it was working like that but its best to ask :)<br><br><br>(2D)<br>Back to a recent problem I have - where a sphere is being pushed into the object its standing on.<br><br>It seems that having minute force on the X/Y pushes the sphere so it gets stuck.  Ive put a work around so that my dampening doesnt fall below  +/-0.1 which is working fine.<br><br>The problem that I have now is that if the sphere is being pushed by an object, I cant control the force so its adding minute forcex/y to the sphere and its getting stuck again.<br><br>Any ideas ? I shall get a demo done to demonstrate. (doing that might activate my brain cells and I may also see the solution) <br><br></td></tr></table><br>
<a name="802613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#156">[#156]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right as predicted ive spotted the quirk.  The sphere was at rest and I had dBodySetAutoDisableFlag(1) set.  When I was then trying to move the sphere by adding a force - I was expecting the engine to "un disable" it.<br><br>Obviously this isnt the case....  trust me to presume :S<br><br>For others if you are using AutoDisable you must reenable the body using "dBodyEnable()".<br><br>We live and learn dont we :) - least im happy again <br><br></td></tr></table><br>
<a name="802632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#157">[#157]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe, nice one :)<br><br>I'd imagine there's quite a few ODE users presumed that before now, it makes more sense to re-enable when a force is applied.<br><br>An ODE body that is auto-disabled does re-enable itself during a collision with another object, but not otherwise.<br><br>@Chunkations: No problem :) <br><br></td></tr></table><br>
<a name="802753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#158">[#158]</a></td></tr></table></td></tr><tr ><td class="posttext"> Man I am having problems with this. I have a car, but if I adjust the body or geom position and try to match up the hinge positions to it, it gets really whacked out, I've tried adjusting multiple parameters but I just cant seem to get it. Maybe if I understand the actual Hinge statements. It may help me out a bit. The following code was taken straight from the demo car code...<br><br>		dJointSetHinge2Anchor(Joint(count),dBodyGetPositionX(Wheel(count)),dBodyGetPositionY(Wheel(count)),dBodyGetPositionZ(Wheel(count)))<br>		dJointSetHinge2Axis1(Joint(count),0,1,0)<br>		dJointSetHinge2Axis2(Joint(count),-1,0,0)<br><br>The first part I understands attaches a hinge joint to the wheel. Its the set hinge axis that I cant really grasp. Im not seeing the picture of a hinge joint with the coordinates above attached to a wheel at all, its not making any sense to me.<br><br>Anyone care to help out on this one? Thanks. <br><br></td></tr></table><br>
<a name="802806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#159">[#159]</a></td></tr></table></td></tr><tr ><td class="posttext"> The <i>dJointSetHinge2Anchor()</i> function sets the anchor position of the hinge joint. The <i>dJointSetHinge2Axis1/2()</i> functions set which axis the hinge is allowed to rotate on.<br><br>Only the first function would normally need changing if you're changing the position of the car, but it's already set the same as the wheel position using the <i>dBodyGetPositionX/Y/Z()</i> functions.<br><br>What you actually need to change are the following (using the Car Demo for example)...<br><br><pre class=code>; ### Create car body
...
dBodySetPosition(ode\body,0,CarStartY,0)

; ### Create wheels
...
dBodySetPosition(Wheel(1),-2,CarStartY-0.5,+2)
dBodySetPosition(Wheel(2),+2,CarStartY-0.5,+2)
dBodySetPosition(Wheel(3),-2,CarStartY-0.5,-2)
dBodySetPosition(Wheel(4),+2,CarStartY-0.5,-2)</pre>...only change the positioning of the car and wheel bodies, the joint anchors will automatically be set to the same position as the wheels. <br><br></td></tr></table><br>
<a name="802915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#160">[#160]</a></td></tr></table></td></tr><tr ><td class="posttext"> I made a car that had to be bigger to match other models in my game, but it acts like a lumbering beast compared to the standard car that is in the demoes.<br>I had to increased the force to 4400 to get it to move forward at an acceptable speed and 10,000 force to get it to break.<br>I also had to increase the wheel friction greatly to get it to stop sliding about so much.<br><br>I also had to increase the torque to about 78 to get it to move.<br><br>The car that comes with the demoes has a lot of friction with the ground, is fast to accelerate and decelerate.<br>Any tips on getting the same performance out of a bigger car? <br><br></td></tr></table><br>
<a name="802961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#161">[#161]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might need to lower the mass values of your car and its wheels, it sounds like they're way too heavy. Make sure the car and wheels have a similar ratio compared to the demo, for example a huge 20 ton car with tiny skateboard wheels will handle like one.<br><br>The best way is to shrink the scale of everything else and make the visible mesh of the car roughly the same size as the one in the demo. <br><br></td></tr></table><br>
<a name="803051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#162">[#162]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the help there VIP3R, I have alot to learn still on the Axis thing, but I got my car rotated and moving properly. Thanks for the help and thanks again for the outstanding library! <br><br></td></tr></table><br>
<a name="803338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#163">[#163]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R that tutorial you have linked is pretty outdated huh? Im thinking that alot of the functions used in it have been replaced by new ones or outright deleted? Do you have any documentation specifically setup for JV-ODE that lists each function, what it does and an example of it? I'm finding that trying to alter any of the demo code to fit my needs just aint cutting it for me, prob cause I dont fully understand the functions, hehehehe. <br><br>Basically Im trying to place collidable meshes on a landscape .b3d model.<br><br>With JV-ODE you can create rigid bodys or movable bodys?<br>; ### ODE STATIC OBJECT (Red)<br>ode.ODEGeom=New ODEGeom<br>ode\geom=dCreateBox(Space,18,0.2,40)<br>dGeomSetRotation(ode\geom,-14,0,0)<br>dGeomSetPosition(ode\geom,-20,4.9,40)<br>ode\mesh=CreateCube()<br>ScaleMesh ode\mesh,9,0.1,20<br>RotateMesh ode\mesh,0,0,0<br>PositionMesh ode\mesh,0,0,0<br>EntityColor ode\mesh,255,0,0<br>EntityAlpha ode\mesh,1<br><br>dCreateBox(Space,18,0.2,40), will create a collision box with the dimensions listed?<br><br>dGeomSetRotation(ode\geom,-14,0,0), will rotate the collision box based on the x,y,z parameters.<br><br>dGeomSetPosition(ode\geom,-20,4.9,40), will place the collision box at the specified coordinates.<br><br>ode\mesh=CreateCube()<br>ScaleMesh ode\mesh,9,0.1,20<br>RotateMesh ode\mesh,0,0,0<br>PositionMesh ode\mesh,0,0,0<br>EntityColor ode\mesh,255,0,0<br>EntityAlpha ode\mesh,1<br>The above code will create a visible object, the geometry object created before hand will inherit the properties of the visible object?<br><br>I thought you had to create a body object, then a geometry object, then a mesh object?<br><br>You tell people to go through the previous posts to find the information that applies to what people are trying to find out, but there are literally hundreds of posts and previous threads that would have to be looked over, and much of that information is outdated also right? Or to ask questions here, which you do a fine job of answering, in a short amount of time. But a full document for the library would be a god send for little guys like me.<br><br>Thanks again.<br><br>(EDIT) - I apologize, I have looked at the JV-ode function ref before, but seemed to have missed the actual descriptions. Most people here have learned to ignore about 90% of what I say, you will too. <br><br></td></tr></table><br>
<a name="803480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#164">[#164]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks,<br><br>Im trying to code a 'reset car' function but the car goes crazy.<br>I tried setting all forces on the car to zero and placing it a few feet above the ground.<br>Had any luck with this kind of thing? <br><br></td></tr></table><br>
<a name="803485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#165">[#165]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>VIP3R that tutorial you have linked is pretty outdated huh? Im thinking that alot of the functions used in it have been replaced by new ones or outright deleted?<br> <br></div><br>Nope, all functions in the tutorial still work. You can copy and paste the tutorial programs and they will still run in V1.22 (latest version) of JV-ODE.<br><br>I don't remove any functions if I can help it, in order to remain backwards compatible with earlier versions of JV-ODE.<br><br><div class="quote"> <br>With JV-ODE you can create rigid bodys or movable bodys?<br> <br></div><br>ODE rigid bodies <i>are</i> movable bodies. You actually have either a 'rigid body + geom' or a 'static geom'. Which is why you're confusing the following...<br><br><div class="quote"> <br>I thought you had to create a body object, then a geometry object, then a mesh object?<br> <br></div><br>That is correct for all movable rigid bodies. A static geom however does not need a body, explaining why it's not there in the ramp code.<br><br><div class="quote"> <br>...there are literally hundreds of posts and previous threads that would have to be looked over, and much of that information is outdated also right?<br> <br></div><br>No, the vast majority is up to date. If you're looking for something specific, search for relevant keywords in the text of each thread. There's only nine threads, how hard can it be? :) <br><br></td></tr></table><br>
<a name="803492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#166">[#166]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Chunkations: Before moving it, make sure you reset the angular and linear velocities on the car (and wheels) with the following functions...<br><br><i>dBodySetLinearVel(body,x#,y#,z#)<br>dBodySetAngularVel(body,x#,y#,z#)</i> <br><br></td></tr></table><br>
<a name="803520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#167">[#167]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks<br>heres what I have so far:<br><br>dBodySetLinearVel(car,0,0,0)<br>dBodySetAngularVel(car,0,0,0) <br>For w=1 To 4<br>dBodySetLinearVel(wheel(w),0,0,0)<br>dBodySetAngularVel(wheel(w),0,0,0) <br>Next<br>dBodySetPosition(car,dBodyGetPositionx(car),5,dBodyGetPositionZ(car))<br><br>dBodySetRotation(car,0,0,0)<br><br>it still acts crazy though, any more ideas? <br><br></td></tr></table><br>
<a name="803525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#168">[#168]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, you are absolutely correct, I was a bit inflated with some beer last night. I have extensively looked over the tut you sent and it works great. I have also created a pdf with every JV-ODE thread to ease my searching pains and find information alot quicker without having to open all the threads in my browser.<br><br>Thanks to these docs and your help (and less beer), I'm getting a better grasp on the fundamentals of the library.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="803571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#169">[#169]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're welcome Xyle<br><br>@Chunkations: The code you posted should work ok. I suspect you might be using KeyHit() or JoyHit() to detect the 'Reset' button. Change it to use KeyDown() or JoyDown() instead, as the simulation needs to complete more than one time step during the reset routine. The car demo gets away with it because the reset process doesn't change the cars heading, it only flips it over.<br><br>Here's some code you can try in the car demo...<br><pre class=code>
If KeyDown(57)=1
	Force=0

	dBodySetAngularVel(Car,0,0,0)
	dBodySetLinearVel(Car,0,0,0)

	For count=1 To 4
		dBodySetAngularVel(Wheel(count),0,0,0)
		dBodySetLinearVel(Wheel(count),0,0,0)
	Next

	dBodySetPosition(Car,dBodyGetPositionX(Car),10,dBodyGetPositionZ(Car))
	dBodySetRotation(Car,0,0,0)
	End If
</pre> <br><br></td></tr></table><br>
<a name="803729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#170">[#170]</a></td></tr></table></td></tr><tr ><td class="posttext"> it worked<br>great!<br>how did you become such an expert?<br><br>thanks <br><br></td></tr></table><br>
<a name="803916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#171">[#171]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to lessen the bounce after jumping the car? Ok, answered myself on that one, Increasing the gravity value worked pretty good. Made those hard landings flip the car over less.<br><br>Im trying to also setup a flag to tell if car is colliding with anything. Im looking to setup a flag to tell if hes flying through the air or if hes on the ground, ramp, etc. I tried...<br><br>Text 10,110,"Collision: "+dGeom1CountCollisions(WGeom(1))<br><br>This tests if a wheel is in contact with anything, Which prints 1 when car is on the ground, but says 0 when hes driving up a ramp.<br><br>Thanks for any insight <br><br></td></tr></table><br>
<a name="804095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#172">[#172]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem Chunkations<br><br>@Xyle: You can try changing the suspension stiffness by modifying the 'SuspensionHS' value in the car demos, which can then be applied to your own code.<br><br>Regarding the collision flag, see the 'CarDemo-CCount' demo, it does exactly that. Remember to use both sets of collision functions (dGeom1... and dGeom2...) as the demo shows. <br><br></td></tr></table><br>
<a name="804403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#173">[#173]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, so far things are going outstanding thanks to your pointers and help there VIP3R. Im having trouble rotating the starting position of the car though. I can get the body rotated just fine, but when I move the car, the tires rotate all wrong. Im thinking there is something Im missing in the joint setup to make sure the joints are moving correctly.<br><br>If I do this...<br><pre class=code>
RotCar# = -90
dBodySetRotation(ode\body,0,RotCar,0)
and...
dBodySetRotation(ode\body,0,RotCar,0)
</pre><br><br>The car looks good, pointing the right way and all that, but when I accelerate the car, the whole car moves to the Positive Z while facing the Positive X and the tires rotate the same way.<br><br>Edit - I got the car rolling in the correct direction by altering these in SetupCar()...<br><pre class=code>
dJointSetHinge2Axis1(Joint(count),0,1,0)
dJointSetHinge2Axis2(Joint(count),0,0,1)
</pre><br><br>Now tire #1 and tire #2 still turn when the car is moved. I tried altering these in SetupCar()...<br><pre class=code>
If count = 1 Then dJointSetHinge2Param(Joint(count),dParamLoStop,0)
If count = 1 Then dJointSetHinge2Param(Joint(count),dParamHiStop,0)
If count = 3 Then dJointSetHinge2Param(Joint(count),dParamLoStop,0)
If count = 3 Then dJointSetHinge2Param(Joint(count),dParamHiStop,0)
</pre><br><br>and altering these settings in UpdateCar()...<br><pre class=code>
angle#=Steer-dJointGetHinge2Angle1(Joint(1))
dJointSetHinge2Param(Joint(1),dParamVel,angle)
dJointSetHinge2Param(Joint(1),dParamFMax,400)
	
angle#=Steer-dJointGetHinge2Angle1(Joint(3))
dJointSetHinge2Param(Joint(3),dParamVel,angle)
dJointSetHinge2Param(Joint(3),dParamFMax,400)
</pre><br>but the wheels dont steer properly.<br><br>Ill keep pluggin away, thanks again for the help. <br><br></td></tr></table><br>
<a name="804433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#174">[#174]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hang on, there's something not right about your rotation code if you need to adjust all of those joint setttings. They shouldn't need adjusting once initially set up.<br><br>If you try the reset code I posted earlier for Chunkations in the car demo, it shows the car can be rotated without affecting the wheel joints. See code 5 posts above ^ <br><br></td></tr></table><br>
<a name="804654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#175">[#175]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, thats strange, I tried Chunks recommended code before and changed some settings but it didnt work as I intended so I tried other things. Trying it again gives me the results I wanted. Thanks for the pointer VIP3R. <br><br></td></tr></table><br>
<a name="806800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#176">[#176]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, do you know how I can apply a force in the same direction that an entity is facing?<br><br>i dont mean relative forces, <br><br>for example, if I have 2 cars<br>i want to apply force to car#2 in the direction that car#1 is facing, like a force-push from star wars<br><br>also I want to make it so pressing down just stops the wheels turning instead of making the wheels spin backwards<br>I tried:<br>For count=1 To 4<br>dJointSetHinge2Param(Joint(count),dParamVel2,1)<br>Next<br>but nothing happened <br><br></td></tr></table><br>
<a name="806898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#177">[#177]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can apply a force to a body in any direction using the following functions...<br><br><i>dBodyAddForceAtPos(body,fx#,fy#,fz#,px#,py#,pz#)<br>dBodyAddForceAtRelPos(body,fx#,fy#,fz#,px#,py#,pz#)<br>dBodyAddRelForceAtPos(body,fx#,fy#,fz#,px#,py#,pz#)<br>dBodyAddRelForceAtRelPos(body,fx#,fy#,fz#,px#,py#,pz#)</i><br><br>You haven't posted any torque code so I'll assume there isn't any. You need to significantly increase the torque to stop the wheels, the following code will lock the wheels up solid (depending on mass)...<br><pre class=code>
For count=1 To 4
	dJointSetHinge2Param(Joint(count),dParamVel2,0)
	dJointSetHinge2Param(Joint(count),dParamFMax2,1000)
Next
</pre> <br><br></td></tr></table><br>
<a name="807075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#178">[#178]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks, <br>i had a look at the force commands but I cant work out how to turn the vector that car#1 is facing into the right parameters for the dbodyaddforce command,-for car#2<br><br>the torque command didnt work, if this works some cool skids could be made(!)<br><br>EDIT- I got the brakes to work by disabling the updatecar() function if stop isnt pressed <br><br></td></tr></table><br>
<a name="807149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#179">[#179]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's probably not a good idea to disable the UpdateCar() function, it's better to use it to control the force and torque from one single location in your code.<br><br>For example, adding the following code to the UpdateKeys() function in the car demo will lock all four wheels when the 'down' arrow key is pressed, without disabling the UpdateCar() function...<br><pre class=code>
If KeyDown(208)=1
	Force=0
	Torque=1000
	Else
	Torque=24
	End If
</pre> <br><br></td></tr></table><br>
<a name="807151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#180">[#180]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>THREAD 9 IS ABOUT TO CLOSE</b><br><br>Please continue on the new thread located <a href="/posts.php?topic=72220" target="_blank">here</a><br><br>Thanks :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
