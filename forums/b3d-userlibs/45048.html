<!DOCTYPE html><html lang="en" ><head ><title >JV-ODE Physics Thread 2</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >JV-ODE Physics Thread 2</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >JV-ODE Physics Thread 2</a><br><br>
<a name="501172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The JV-ODE user library contains almost all of the ODE functions wrapped inside a DLL.<br><br>The library can be used in any programming language that supports DLL's, including Blitz3D and BlitzPlus. The functions have been adapted to use euler angles (the same coordinate system as Blitz3D), however functions for accessing quaternion angles are also included. The download contains all of the necessary files to get you started, including some simple demos showing various ODE objects and TriMesh collisions.<br><br>To view more information and screenshots <a href="http://www.devcode.co.uk/jv-ode.html" target="_blank">click here</a>.<br><br>Options are now available to purchase the wrapper using either PayPal or Share*it.<br><br>The <b>restricted demo version</b> is now available for download <a href="http://www.devcode.co.uk/dload/JV-ODE-Physics-Demo.zip" target="_blank">here</a>.<br><br>Have Fun :)<br><br>Previous JV-ODE Threads: <a href="/posts.php?topic=43653" target="_blank">1</a><br>JV-ODE <a href="http://playerfactory.proboards25.com/" target="_blank">Player Factory</a> Forum<br><br>Useful Links: <a href="http://www.ode.org/" target="_blank">ODE.org Website</a> - <a href="http://www.ode.org/ode-latest-userguide.pdf" target="_blank">ODE User Guide (PDF)</a> - <a href="http://www.ode.org/ode-latest-userguide.html" target="_blank">ODE User Guide (HTML)</a> - <a href="http://q12.org/pipermail/ode/" target="_blank">ODE Archives</a> <br><br></td></tr></table><br>
<a name="501187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barton</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;&gt;Personally I would build both methods then test them fully to see if there are any issues with each one. Let us know how you get on with it :)<br><br>I have tested both methods much and both works equally well. I Using the JV-ODE on a couple of objects in my Game.<br><br>@all:<br>Which method would the others prefer ? :)<br><br>A) with new ODE_INIT/CLOSE (restart ode)...<br>B) only destroy bodys and geoms without closing the ODE...<br><br>...before reload the Level.<br><br>the question Which solution is last better,healthier and sure ?<br>I must make up a Method now. Then there is back none more. :) <br><br></td></tr></table><br>
<a name="501221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Viper - probably worth putting a link to the old thread up there ^^^ as I've locked the old one now. <br><br></td></tr></table><br>
<a name="501248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers Beaker, I've added the link - it completely slipped my mind ;)<br><br>@Barton: What kind of game are you working on? If you don't mind me asking ;) <br><br></td></tr></table><br>
<a name="501314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barton</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have installed both methods which one can choose over INI file now (ODE_RESET=0 or 1). If there should be problems, one can change it over. :))<br> <br><br>@VIPR: i working on a very big 3D-Action Shooter. :)<br><br>thanks to her great ODE-Wrapper the game makes a much better impression. :))<br>I tested all physics Engines, but JV-ODE is the best of all. Who does not use JV-ODE, much misses... :)<br><br>In addition, thank-beautifully at developers of the other Wrapper.(Freeware ODE,Tokamak Lib). I respect each hard work. These also surely will have her fan's.<br><br>For good such things I am always ready to pay!<br><br>I hope for further such master Tools/Libs of you all. :) <br><br></td></tr></table><br>
<a name="501375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe. Some good things going on here. Hopefully i will have a few hours soon to get Cygnus Car Engine v2 up to speed soon. Its not exactly difficult this time around :) <br><br></td></tr></table><br>
<a name="503011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just bought it... decided it was looking good now :) <br><br></td></tr></table><br>
<a name="503244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's the status with the Trimesh stuff? I've been away for few days and just want to check that I have not missed anything important. <br><br></td></tr></table><br>
<a name="503298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The wrapper is still on version 1.01, with that TriMesh issues if you don't use spheres for collisions.<br><br>After 4 hard months, I finally got holydays at work! I was really in need of some rest, and form tomorrow I'll be out until sunday. So if you purchase through PayPal, you won't receive the wrapper until sunday. This does not affect ShareIt sales.<br><br>After that, I'll have to reorganize my time. University, work, and coding can be a lot of things if you don't use your time correctly! <br><br></td></tr></table><br>
<a name="503302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Mustang,<br><br>Still working on it, you haven't missed anything ;)<br><br>As soon as I have more info on the TriMesh progress, I'll post it here. Tbh, both Jedive and myself have been up to our eyeballs in work lately, but I'm done now and I think Jedive will have a bit more time available soon too.<br><br>Those who've had 'Userlib function not found' errors on the demo version, I haven't forgotten you either - I'm still working on that too :)<br><br>More soon... <br><br></td></tr></table><br>
<a name="505745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EddieRay</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Which version of ODE is JV-ODE built against? <br><br></td></tr></table><br>
<a name="505779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> JV-ODE is built using the latest ODE code (Version 0.5) ;) <br><br></td></tr></table><br>
<a name="505782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone know what's up with the ODE website?  I haven't been able to access it for several days now.  Also, is there an ODE specific forum somewhere else?  Thanks. <br><br></td></tr></table><br>
<a name="505792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EddieRay</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you build the ODE library from source, or are you using one of the binary releases of 0.5?<br><br>Thanks,<br><br>Ed <br><br></td></tr></table><br>
<a name="505810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Home of ODE: <a href="http://www.ode.org/" target="_blank">http://www.ode.org/</a>  (shows as working)<br><br>Home of JV-ODE Wrapper: <a href="http://www.devcode.co.uk/jv-ode.html" target="_blank">http://www.devcode.co.uk/jv-ode.html</a>  (shows as working) <br><br></td></tr></table><br>
<a name="505877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> @chaduke: The ode.org website was down earlier giving 403 and 404 errors, but as Wayne says it's working ok now. There is another forum for JV-ODE at the <a href="http://playerfactory.proboards25.com/" target="_blank">Player Factory</a> :)<br><br>Btw, Wayne might be able to help with the setting forces issue, he knows his stuff. Are you a member at the Player Factory forum Wayne?<br><br>@EddieRay: I've compiled a test dll using the CVS releases but the JV-ODE full/demo dll's are compiled with the binary release, not certain about that though as Jedive obtained the original ODE code. <br><br></td></tr></table><br>
<a name="505934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> We need to get some posts going over at the playerfactory forums.  I just bought the wrapper a few days ago and have a ton of questions about using ODE in general as well as what's the best way to implement the different functions in Blitz.  <br><br>There's bound to be tons of people that want to learn how to use this well.  I'm kind of surprised the official ODE page doesn't have forums, but they have a mailing list and a wiki.<br><br>As of right now I basically know how to add primitives to my scene and add force to them.   I'd love to see examples (in Blitz) of the following:<br><br>Adding resistance to slow down the rotation and velocity of objects.<br><br>Collision detection with a bumpy terrain (it may be easier to just use Blitz's collision detection for this)<br><br>Skeletal animation and ragdoll functionality.<br><br>Simulating real world objects, like what are the best settings for gravity, elasticity, mass and density to create a realistic baseball, tennis ball, basketball, human body, etc.<br><br>Simulating spin effects as an object travels thru the air, like on a ping pong or tennis ball.  It appears that spin affects objects as they collide with each other or the ground but I'd also like to know how to increase or decrease this effect.  I'm assuming this is similar to how slippery the terrain is in a vehicle simulation. <br><br>As I continue to read the manual and experiment with things I'll post my results to the playerfactory forums and maybe create some short tutorials, but it would be great if other people have examples like this already that they can contribute. <br><br></td></tr></table><br>
<a name="505955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Expanded Spheres Demo<br><br>Features: Autodisable, Applying forces to push and pull spheres with the mouse, Selecting bodies and creating joints between them, Applying forces to attract and repulse. Linear and angular friction. <br><br>Were really just getting started with all the great stuff you can do with ODE. Check all the demos, be sure to check the other threads as well.<br><br>The following code should work well, you may have to provide a bmp, or comment out a little. <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #									   JV-ODE - Spheres Demo										#
; #									Code by Jim Williams (VIP3R)									#
; ###################################################################################################

AppTitle "JV-ODE - Spheres Mouse Shot Demo"

Global snd1, piv1


Include "ode.bb"

Graphics3D 800,600,0,2
;Graphics3D 1024,768,0,2

Dim connect(256) ; joints
Dim Obj(1)
Dim Ent(1)

Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

; ###################################################################################################

;snd1=Load3DSound("Bounce.wav")
;piv1=CreatePivot()

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)
Global p 

p=CreatePivot() ; Pivot at 0,0,0 ( supports Attract, and Explode )

s=0 ; New joint counter

dWorldSetGravity(World,0,-1,0)
dContactSetMode(dContactBounce + ContactSoftERP + dContactSoftCFM)
dContactSetMu(32)

; Autodisable bodies
dWorldSetAutoDisableFlag (World, 1)

; Increase to make bouncy
dContactSetBounce(0.3)

; Make contact surface soft
;dContactSetSoftERP(0.4)
;dContactSetSoftCFM(0.8)

smode=True

; ### Create light

;SetMousePtr()

ShowPointer

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000

;Correct camera distortion
CameraZoom camera, 1.5

;mic1=CreateListener(camera) ; Create listener, make it child of camera 

PositionEntity Camera,0,20,-50
RotateEntity Camera,30,0,0

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Mirror=CreateMirror()

; ###################################################################################################

While Not KeyHit(1)

	PTime=MilliSecs()
	
	
	
	dSpaceCollide(Space,World,ContactGroup)
	
	updatefriction
		
	dWorldQuickStep(World,0.15)
		
	dJointGroupEmpty(ContactGroup)
		
	
		
	If MilliSecs()-Timer&gt;700
		balls=balls+1
		If balls&lt;10 Then
				AddObject()
		End If
		Timer=MilliSecs()
	End If

	UpdateGeoms()

	PhysicsTime#=MilliSecs()-PTime

	UpdateWorld

	RenderWorld

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime
	Text 0,30,"A:Attract, E:Explode, M: Mode Select"
	
	; M - Selects Mode
	If KeyHit(50)&gt;0 Then
		smode=Not smode
	End If
	
	Select smode
	
		Case True
			Text 0,45,"Mode: Move bodies "
			Text 0,60,"LM:Push, RM:Pull "
	
		Case False
			Text 0,45,"Mode: Select bodies "
			Text 0,60,"LM:SetBallJoint, RM:Select Body"
			Text 0,75,obj(0)
			Text 0,90,obj(1)
	End Select
		
	
	
	Flip
	

Select smode

	Case True
		; Push on the ball based on the entitypicked vector
		If MouseDown(1) Then 
		
			CameraPick(camera, MouseX(), MouseY())
			
			If PickedEntity()&lt;&gt;0 Then
				EntityColor PickedEntity(),0,255,0
				For ode.ODEGeom=Each ODEGeom
					If ode\mesh=PickedEntity()
						dBodyEnable(ode\body) 
						k=-10
						dBodyAddForce ode\body,k*PickedNX#(),k*PickedNY#(),k*PickedNZ#()
						
						Exit
					End If
				Next
			End If
		End If
		
		; Pull on the ball based on the entitypicked vector
		If MouseDown(2) Then 
		
			CameraPick(camera, MouseX(), MouseY())
			
			If PickedEntity()&lt;&gt;0 Then
				EntityColor PickedEntity(),0,255,0
				For ode.ODEGeom=Each ODEGeom
					If ode\mesh=PickedEntity()
						dBodyEnable(ode\body) 
						k=10
						dBodyAddForce ode\body,k*PickedNX#(),k*PickedNY#(),k*PickedNZ#()
						
						Exit
					End If
				Next
			End If
		End If
		
	Case False
			
		If MouseHit(2) Then 
	
			CameraPick(camera, MouseX(), MouseY())
			
			If PickedEntity()&lt;&gt;0 Then
				EntityColor PickedEntity(),0,0,255
				For ode.ODEGeom=Each ODEGeom
					If ode\mesh=PickedEntity()
						ix=Not ix
						obj(ix)=ode\body
						ent(ix)=ode\mesh
						PositionEntity 	p,EntityX(ode\mesh),EntityY(ode\mesh),EntityZ(ode\mesh)
						Exit
					End If
				Next
			End If
		End If
		
		If MouseHit(1) And obj(0)&gt;0 And obj(1)&gt;0 Then 
			s=s+1
			connect(s)=dJointCreateBall (world,0)
			dJointAttach(connect(s),obj(0),obj(1))
			dJointSetBallAnchor(connect(s),dBodyGetPositionX(obj(0)),dBodyGetPositionY(obj(0)),dBodyGetPositionZ(obj(0)))
			dBodyEnable(obj(0))
			dBodyEnable(obj(1))
		End If
		
	
End Select

;(A)ttract 
If KeyDown(30) Then 
	For ode.ODEGeom=Each ODEGeom
		;Calc vector from ball to pivot
		PointEntity ode\mesh,p
		TFormVector 0,0,1,ode\mesh,0
		dBodyEnable(ode\body)
		k=10
		dBodyAddForce ode\body,k*TFormedX#(),k*TFormedY#(),k*TFormedZ#()
		
	Next
End If

;(E)xplode
If KeyDown(18) Then 
	For ode.ODEGeom=Each ODEGeom
		;Calc vector from ball to pivot
		PointEntity ode\mesh,p
		TFormVector 0,0,1,ode\mesh,0
		dBodyEnable(ode\body) 
		k=-10
		dBodyAddForce ode\body,k*TFormedX#(),k*TFormedY#(),k*TFormedZ#()
		
	Next
End If

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function AddObject()

xp=Rand(-8,8)
zp=Rand(-8,8)
ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,30,zp)
ode\geom=dCreateSphere(Space,3)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateSphere()
ScaleMesh ode\mesh,3,3,3
EntityColor ode\mesh,Rand(255),Rand(255),Rand(255)
EntityAlpha ode\mesh,1
EntityShininess ode\mesh,0.7

;Set Autodisable parms to your liking
	dBodySetAutoDisableFlag(ode\body,1)
	dBodySetAutoDisableAngularThreshold(ode\body,.05)
	dBodySetAutoDisableLinearThreshold(ode\body,.05)
	dBodySetAutoDisableSteps (ode\body, 1)

;Allow sphere to be picked
EntityPickMode ode\mesh,2

End Function

; ###################################################################################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
If dBodyIsEnabled(ode\body)
	RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
	PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
	EntityColor ode\mesh,0,255,0
Else
	EntityColor ode\mesh,255,0,0
End If
Next

End Function

; ###################################################################################################

Function AngularDamp(body,damp#)
  dBodyAddTorque body,dBodyGetAngularVelX(body)*-damp,dBodyGetAngularVelY(body)*-damp,dBodyGetAngularVelZ(body)*-damp
End Function

; ###################################################################################################

Function LinearDamp(body,damp#)
  dBodyAddForce body,dBodyGetLinearVelX(body)*-damp,dBodyGetLinearVelY(body)*-damp,dBodyGetLinearVelZ(body)*-damp
End Function

; ###################################################################################################

Function UpdateFriction()

For ode.ODEGeom=Each ODEGeom
	If dBodyIsEnabled(ode\body)
		numjoints=dBodyGetNumJoints(ode\body)
		If numjoints&gt;0 
		
			For joints=0 To numjoints-1
				joint=dBodyGetJoint(ode\body,joints)
				If dJointGetType(joint)=dJointTypeContact
					
					; Get linear velocity vector
			  		ax#=dBodyGetLinearVelX#(ode\body)
			  		ay#=dBodyGetLinearVelY#(ode\body)
				    az#=dBodyGetLinearVelZ#(ode\body)
					; Get Angular velocity vector
			  		bx#=dBodyGetAngularVelX#(ode\body)
			  		by#=dBodyGetAngularVelY#(ode\body)
					bz#=dBodyGetAngularVelZ#(ode\body)
			  		; Calculate magnitudes
					ForceA#=Sqr(ax*ax+ay*ay+az*az)
					ForceB#=Sqr(bx*bx+by*by+bz*bz)
					
					
					If ForceA&gt;.01
						LinearDamp(ode\body,.07)
					End If
					
	
					If ForceB&gt;.01
						AngularDamp(ode\body,.07)
					End If
					
				End If
			Next
		End If
	End If
Next

End Function

Function SetMousePtr()
MousePtr = LoadImage("c:\pointer.bmp")
MaskImage MousePtr,0,0,0
End Function
</textarea> <br><br></td></tr></table><br>
<a name="505957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> External forces like friction or lift need to be calculated.<br><br>Lots of effects are possible, look for more examples coming soon.<br><br>I was pleased to see Mark has tried some ODE and likes it. <br><br></td></tr></table><br>
<a name="505961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does ODE do convex hulls? <br><br></td></tr></table><br>
<a name="505991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not at the moment Pickles. It's a difficult problem to solve in ODE, partly due to the way ODE works internally. <br><br></td></tr></table><br>
<a name="506175"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EddieRay</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> One solution to the "trimesh collision problem" might be to just use B3D collision for that type of collision.  ODE is perfectly happy to work with an external collision system.  This is the way I've seen ODE used with Torque... basically, Torque has several complex types of geometry (terrain, shapes, interiors, water, etc.), and there is already code to do fast collision checking between the various types of geometry.  Likewise, B3D already has a collision system that can detect trimesh vs. &lt;whatever&gt; collision, without any added collision geometry objects.  I think the B3D collision commands even allow you to detect which surface and triangle has collided, and you can do collision normal calculations, etc., with that data.  I've never really used B3D collisions tho', so I may be missing some key detail that makes it unusable for this purpose...<br><br>Just a thought...<br><br>Ed <br><br></td></tr></table><br>
<a name="506550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> ~Eddie, true, but i can chop a couple of MS (hey, a MS is a MS) off when not using blitz collisions. Linepick is used to get that data in my current code and linepick is SLOW (just remming it out causes a visible updatetime drop..but of course, kills everything that needs it...)<br><br>I'm hoping theres a better way :P <br><br></td></tr></table><br>
<a name="508573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use Blitz3D Collisions with ODE, but you would need to pass lot of information to the dll, cause ODE uses a callback to implement this, and Blitz has no callback support.<br><br>You could make a big list with every contact information (each frame) and then pass it to ODE. Anyway the wrapper should be made to wait for this... <br><br></td></tr></table><br>
<a name="508610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vip3r and Jedive,<br><br>Can i use JV-ODE now on barrels and crates and so on ???<br>Would like to use it with the game iam working on..<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="508612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, you should be fine using it for those Alienforce :) <br><br></td></tr></table><br>
<a name="508646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vip3r,<br><br>I got version 1.01 is it the latest ?<br><br>Have been in the US so i havent have time to check my mails.<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="508716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, 1.01 is the latest version of the wrapper ;) <br><br></td></tr></table><br>
<a name="509990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PsychicParrot</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, well ... things have gone OK so far but I wonder if anyone knows how to do something like a corrector, where there would be forces to keep the car 'upright'??<br><br>I have a car model that I want to keep almost upright, but not totally ... I don't want it to be able to roll basically, but I do want it to be able to align to the terrain (so I can't just 'fix' the rotation to an upright pos if you see what I mean...)<br><br>Any thoughts? <br><br></td></tr></table><br>
<a name="510097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi PP,<br><br>Sounds like you want a similar effect to Need For Speed Hot Pursuit 2. One way to do this is to lower the center of gravity for the car using the translate mass function.<br><br>Experiment with the car demo (it contains this function). Try changing the 2nd parameter (Y-axis) on this line:<br>dMassTranslate(mass,0,-1,0)<br><br>The lower you set it, the harder it will be to roll the car. So you could try -10, -100 etc and see how it reacts.<br><br>There may be other ways too, but I'd try that first. <br><br></td></tr></table><br>
<a name="511704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PsychicParrot</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to update .. no luck yet .. lowering the centre of gravity seems to make it act freaky during jumps (kind of like a jelly on wheels, where the wheels are attached by wobbly jelly struts!) ... <br><br>I want to have a go at using forces to compensate for roll (so if it's leaning some on the x axis, apply a force to pull it back .. the only problem is that the forces will have to be relative to the angle AND the angular vel won't they? So that the car isn't 'stuck' in a upright pos, but gets limited in it's rotation by forces.<br><br>Urks! Lots of thinkin' to do!<br><br>Thanks, Viper! <br><br></td></tr></table><br>
<a name="511803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do not use translate mass. Use the geometry transform functions. They Work awesome!.<br><br>You encapsulate a box that is positioned at (0,+X,0), so the geometry is at 0,0,0, (with mass at 0,0,0) but with the encapsulation is collides with the geometry at 0,+x,0.<br><br>It is the best way! <br><br></td></tr></table><br>
<a name="512702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EddieRay</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Cygnus:  Hmmmm... I'm not sure why it should be slower to pass the collision contacts from B3D to ODE as opposed to having the wrapper do it in the same manner.  IIRC, the collision in ODE works very much like B3D - you call the collision code and get a list of "contacts"... then you have to feed these all into the "sim" each time step, and delete them after the physics calculations are done.  Using B3D collision, the process would be very much the same... you collect the collisions from B3D, feed them all into the "sim" before stepping, do the actual step, then delete all the "contacts".<br><br>Of course, one reason it might be slower is if the B3D collision code is slower... but from what I've seen, once you start using a trimesh or two, the ODE collision code seems very slow (to me at least).<br><br>Anyway... just some more thoughts on the issue... <br><br></td></tr></table><br>
<a name="513189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> The main difference is that ODE Collisions do not make a response. Instead, the contact joints make the response. In B3D, the collisions make the response automatic, and you can't change that. So there will be a big difference between both methods... <br><br></td></tr></table><br>
<a name="514719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do i use JV-ODE on my meshes ?? is it trimesh ??<br>I am thinking of things like statues etc... i cant get it to work.. has any one a short exemple ?!?! for crates and barrels for my own meshes i use dcreatebox and dcreateccylinder but what about objects likes statues,humans ???<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="514867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any news on the Trimesh Problem.... please ????<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="515174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jedive ?? Vip3r ?? :(<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="515339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wish wrapper source was distributed to paying customers, so we could customize and/or contribute changes back to the authors.<br><br>Statue = static trimesh and I would expect spheres to interact with it under the current wrapper. I'll try some different examples and see.<br><br>Post some code if you can. <br><br></td></tr></table><br>
<a name="515351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> My biggest problem right now is cylinders and boxes falling thrue my trimesh landscape.. have tryed to use spheres wrapped crates and barrels... but it just dont dont it for me... crates shall not roll away :)<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="515735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi fellas... sorry for the delay, I've had to go to Wales over the last few days to attend a family funeral :(<br><br>Jedive should've been around though, maybe he's busy with his university stuff again?<br><br>No news on the TriMesh this end yet I'm afraid, I still haven't heard from Jedive about this issue despite several requests :/<br><br>The problem isn't in the wrapper btw, it's in the <b>original</b> C++ ODE code, that's why it has been so difficult to nail. Just look on the ODE message boards and you'll see a great number of people are working on this TriMesh problem. Fixing it may involve rewriting part of the ODE library, which is a very difficult task - I'm sure you'ld agree.<br><br>Alienforce what you're doing with the sphere wrapped crates etc is the correct way to go in most cases I feel. If your crates are rolling you haven't set the joints correctly (or are using the wrong type of joint). You need to make sure you lock the joints, then the crate will stay put.<br><br>Something I've found whilst looking into the TriMesh problem is the loss of speed in the physics simulation when they're used. ALWAYS avoid use of TriMeshes where possible, they are a LOT slower than the primitives because of the amount of collision contacts it has to deal with during each time step.<br><br>As soon as I get some more info together on the TriMesh problem, I'll post it here right away...<br><br>Cheers <br><br></td></tr></table><br>
<a name="515769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really sorry to hear about funeral..<br><br>Thanks for your reply...<br><br>I keep on working with my sphereizedcrates ;)<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="515811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Alienforce ;)<br><br>I may make a demo soon showing something like that, I'll do some tests here and see what works best. <br><br></td></tr></table><br>
<a name="517098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any news ?<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="517136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> On what, the TriMesh issue?<br><br>Any luck yet with the sphere wrapped crates? <br><br></td></tr></table><br>
<a name="517254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PsychicParrot</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mainly targeted at Kurix for suggesting it ... ;) ... Using geometry transforms? I read through the ode manual and got all kinds of stuff I couldn't understand! Any chance of a little sample or something??<br><br>dGeomID dCreateGeomTransform (dSpaceID space)<br>dGeomTransformSetGeom (dGeomID g, dGeomID obj)<br>dGeomTransformGetGeom (dGeomID g)<br>dGeomTransformSetCleanup (dGeomID g, int mode)<br>dGeomTransformSetInfo (dGeomID g, int mode)<br><br>... what does it all mean?! :D <br><br></td></tr></table><br>
<a name="517470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hope the trimesh issue does get fixed, the main reason i bought it relies on them you see, And development seems slow at the mo.... Lets keep it up guys!!!! <br><br></td></tr></table><br>
<a name="518527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey PhychicParrot. Sorry for the Delay. I was not in home. Here is my code for a body of the car that raises the geometry, keeping the mass down:<br><br>Jugadores\body[1]=ODE_dBodyCreate()<br>ODE_dBodySetBoxMass(Jugadores\body[1],tamanochassisx,tamanochassisy/2.0,tamanochassisz,Masa1)<br>Jugadores\geom[1]=ODE_dCreateGeomTransform(space)<br>ODE_dGeomTransformSetCleanup(Jugadores\geom[1],1)<br>temp = ODE_dCreateBox(0,tamanochassisx,tamanochassisy/2.0,tamanochassisz)<br>ODE_dGeomSetPosition temp,0,AlturaModelo#,0<br>ODE_dGeomTransformSetGeom(Jugadores\geom[1],temp)<br>ODE_dGeomTransformSetInfo(Jugadores\geom[1],1)<br>ODE_dGeomSetBody Jugadores\geom[1],Jugadores\body[1]<br><br>Good Luck!<br><br>Now here goes the explanation. You make a geometrytransform object (think about it like only a new type of geometry). Then inside this geom you will insert a normal box geom, but with a special position (in my case "AlturaModelo#" in y coordinate). And then, you assign the body to the geomtransform geometry. So the object is really on 0,0,0 but the collision box is in (0,AlturaModelo,0).<br><br>So the result is "ALMOST" like translating the mass down. I say almost because the body is really on 0,0,0 so perhaps you will have some differences with joints positions, like suspension in the car. Anyway, it is a worthy way of doing it! <br><br></td></tr></table><br>
<a name="518528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> And for the trimesh problems. I am using my own version of the wrapper and i don't have any problems (i am almost finished my racing-rpg game). For what i've seen it is easy to wrap the trimesh functions, so i think jevide and vip3r have done it right.<br><br>So check your gravity values, quickstepsize, quickstep iterations, total mass, etc to be sure there is no too much interpenetration.<br><br>If you have too much speed for some body, the collision in ode doesn't work like in B3D. The object can pass through if there is no step in collision.<br><br>Cheers! <br><br></td></tr></table><br>
<a name="518553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> KuRiX.<br><br>Do you have some working trimesh code to share so i can see what iam doing wrong with JV-ODE ??<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="518570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well the code i use to make the trimesh working is the same that Vip3r made to work with the original arkon's wrapper. So i think the problem is with the jv-ode wrapper, not your b3d code... <br><br></td></tr></table><br>
<a name="518939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jedive &amp; Vip3r,<br><br>Just want to know if you are still working on the wrapper..<br>I absolute dont mean any harm or to be puschy....<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="518995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alien, if you can wait, wait while i try to finish my editor. I think it will help u a lot... <br><br></td></tr></table><br>
<a name="519013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's ok Alienforce  :)<br><br>Yep I'm still working on the wrapper, I haven't done much on it lately due to recent events.<br><br>I'm discussing the future of the wrapper with Jedive at the moment, I hope to have some more news very soon. I haven't fixed the TriMesh problem yet, so don't get too excited ;)<br><br>Looking forward to seeing your editor too KuRiX ;) <br><br></td></tr></table><br>
<a name="519022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Vip3r,<br><br>Kurix waiting like a kid on christmas. :)<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="519239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R:<br><br>Take example "JV-ODE - Spheres Demo" try to make boxes (my crate problem :) ) instead of spheres and make them not rollaway .. i am doing somting really wrong because my boxes just rolling away! Arghhhhh.. :) .. if you could help me because i think i am going nuts.... <br><br>Spherewrapped boxes - Correct, for trimesh use.<br>Tried to read about the joints you tipsed me about but no luck...<br><br>Sorry to bother you with this, but iam in the middle of a game and would like to use the ode. for my barrels and crates :)<br><br>Best,<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="519280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem Alienforce, I'll see what I can do :)<br><br>I've actually already got a sphere-wrapped cube (crate) sitting/rolling (without sliding) along on top of a TriMesh terrain. It isn't perfect yet though, sometimes when the cube comes to a standstill it kind of wobbles a bit. I need to experiment and optimise it a little more before I provide a demo. As soon as I have something which works well, I'll post it on this thread for everyone. The exact same method can be used for cylinders too. <br><br></td></tr></table><br>
<a name="519293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PsychicParrot</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Kurix - really appreciate it :) ..  I'll have a play and see if I can figure it out later, as on first read I got scrambled!!<br><br>Cheers <br><br></td></tr></table><br>
<a name="519324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Update on the sphere-wrapping tests...<br><br>I've got it working <b>very</b> well now  :)<br><br>This might be a worthwhile solution to the TriMesh&gt;Cubes/Cylinder collision issues, it's <b>that</b> good. Early tests suggest it's fast too, although the system I'm working on is flexible so the user can decide how complex the collisions are  :)<br><br>Should have a demo real soon... <br><br></td></tr></table><br>
<a name="519331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> post that bad boy<br>8) <br><br></td></tr></table><br>
<a name="519373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, here is the sphere wrapped cube demo I've been working on. It's a modified version of the TriMesh Car Demo, but instead of random spheres you have cubes rolling on the TriMesh.<br><br>You can customise the complexity of the wrapping by using the 3 different wrap types (simple/complex/full). Try changing the wrap type in this line of code:<br><b>SphereWrapCube(ode\body,10,8,8,8,0,1)</b><br>Parameters (Body,Mass,ScaleX,ScaleY,ScaleZ,WrapType,Alpha)<br>Wrap Types (0=Simple 1=Complex 2=Full)<br><br>You can also customise the data (at the bottom of the code) to control whether each individual sphere is added or not. It's a trade off between speed and accuracy, so experiment to see what works best for you.<br><br><b>Sphere Wrapped Cubes Demo</b><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #								  JV-ODE Sphere Wrapped Cubes Demo									#
; #									Code by Jim Williams (VIP3R)									#		#
; #						Feel free to use this code, any credit appreciated							#
; ###################################################################################################

AppTitle "JV-ODE Sphere Wrapped Cubes Demo"

Include "ode.bb"

Graphics3D 800,600,0,2

Global CMass#=200			; ### Car Mass
Global WMass#=8				; ### Wheel Mass

Global WorldERP#=1			; ### World Error Correction
Global WorldFriction#=64	; ### World Friction
Global HingeTorque#=24		; ### Hinge Torque
Global SuspensionHS#=0.01	; ### Hinge Suspension Hardness/Softness (Higher=Softer - Lower=Harder)

Global Speed#=0
Global Steer#=0

Global Car
Global CGeom
Global CMesh

Global CarStartY=40

Dim Wheel(4)
Dim WGeom(4)
Dim Joint(4)

Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

; ###################################################################################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-1,0)
dWorldSetERP(World,WorldERP)

dContactSetMode(dContactSlip1)
dContactSetMu(WorldFriction)

; ### Create car body

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
Car=ode\body
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,0,CarStartY,0)
mass=dMassCreate()
dMassSetBox(mass,1,3,1,4)
dMassSetBoxTotal(mass,CMass,3,1,4)
dMassTranslate(mass,0,-1,0)
dBodySetMass(ode\body,mass)
dMassDestroy(mass)
ode\geom=dCreateBox(Space,3,1,4)
CGeom=ode\geom
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
CMesh=ode\mesh
ScaleMesh ode\mesh,1.5,0.5,2
RotateMesh ode\mesh,0,0,0
PositionMesh ode\mesh,0,0,0
EntityColor ode\mesh,40,80,255
EntityAlpha ode\mesh,1

; ### Create wheels

For count=1 To 4
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	Wheel(count)=ode\body
	dBodySetRotation(ode\body,0,0,0)
	dBodySetPosition(ode\body,0,0,0)
	mass=dMassCreate()
	dMassSetSphere(mass,1,0.7)
	dMassSetSphereTotal(mass,WMass,0.7)
	dBodySetMass(ode\body,mass)
	dMassDestroy(mass)
	ode\geom=dCreateSphere(Space,0.7)
	WGeom(count)=ode\geom
	dGeomSetBody(ode\geom,ode\body)
	ode\mesh=CreateCylinder(8)
	ScaleMesh ode\mesh,0.7,0.25,0.7
	RotateMesh ode\mesh,0,0,90
	PositionMesh ode\mesh,0,0,0
	EntityColor ode\mesh,255,255,255
Next

dBodySetPosition(Wheel(1),-2,CarStartY-0.5,+2)
dBodySetPosition(Wheel(2),+2,CarStartY-0.5,+2)
dBodySetPosition(Wheel(3),-2,CarStartY-0.5,-2)
dBodySetPosition(Wheel(4),+2,CarStartY-0.5,-2)

; ### Create some objects

SeedRnd MilliSecs()

For cubes=1 To 20
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	dBodySetRotation(ode\body,0,0,0)
	dBodySetPosition(ode\body,Rnd(-100,100),44,Rnd(-100,100))
	ode\geom=dCreateBox(Space,8,8,8)
	dGeomSetBody(ode\geom,ode\body)
	SphereWrapCube(ode\body,10,8,8,8,0,1)	; ### (Body,Mass,ScaleX,ScaleY,ScaleZ,WrapType,Alpha)
	ode\mesh=CreateCube()
	ScaleMesh ode\mesh,4,4,4
	RotateMesh ode\mesh,0,0,0
	PositionMesh ode\mesh,0,0,0
	EntityColor ode\mesh,Rnd(255),Rnd(255),Rnd(255)
	EntityAlpha ode\mesh,0.8
	EntityShininess ode\mesh,0.7
Next

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global CameraPivot=CreatePivot(CMesh)
PositionEntity CameraPivot,0,2,-7

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Mirror=CreateMirror()

; ###################################################################################################

; ### CREATE TRIMESH

demomesh=LoadMesh("media\terrain.b3d")
ScaleMesh demomesh,1,0.7,1
trimesh=CreateTriMesh(demomesh)
dGeomSetRotation(trimesh,0,0,0)
dGeomSetPosition(trimesh,0,0.05,0)
RotateMesh demomesh,0,0,0
PositionMesh demomesh,0,0.05,0

EntityColor demomesh,255,255,255
EntityAlpha demomesh,1

demotexture=LoadTexture("media\terrain.png")
ScaleTexture demotexture,0.08,0.08
EntityTexture demomesh,demotexture

; ###################################################################################################

SetupCar()

While Not KeyHit(1)

	UpdateKeys()

	PTime=MilliSecs()

	UpdateCar()

	UpdateGeoms()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateCam()

	UpdateWorld

	RenderWorld

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime
	Text 0,30,"Car Speed:"+Speed
	Text 640,0,"A - Accelerate"
	Text 640,15,"Z - Brake/Reverse"
	Text 640,30,"Arrows - Steering"
	Text 640,45,"Space - Reset Car"

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function SetupCar()

For count=1 To 4
	Joint(count)=dJointCreateHinge2(World,0)
	dJointAttach(Joint(count),Car,Wheel(count))
	dJointSetHinge2Anchor(Joint(count),dBodyGetPositionX(Wheel(count)),dBodyGetPositionY(Wheel(count)),dBodyGetPositionZ(Wheel(count)))
	dJointSetHinge2Axis1(Joint(count),0,1,0)
	dJointSetHinge2Axis2(Joint(count),-1,0,0)
	dJointSetHinge2Param(Joint(count),dParamSuspensionERP,0.8)
	dJointSetHinge2Param(Joint(count),dParamSuspensionCFM,SuspensionHS)
	If count&gt;2
		dJointSetHinge2Param(Joint(count),dParamLoStop,0)
		dJointSetHinge2Param(Joint(count),dParamHiStop,0)
		End If
Next

Speed=0

End Function

; ###################################################################################################

Function UpdateKeys()

If KeyDown(30)=1
	Speed=Speed+0.08
	If Speed&gt;30 Then Speed=30
	End If

If KeyDown(44)=1
	Speed=Speed-0.1
	If Speed&lt;-10 Then Speed=-10
	If Speed&gt;0 Then Speed=Speed*0.97
	End If

If KeyDown(30)=0 And KeyDown(44)=0 Then Speed=Speed*0.99

If KeyDown(203)=1 Or KeyDown(205)=1
	If KeyDown(203)=1
		Steer=0.5
		Else
		Steer=-0.5
		End If
	Else
	Steer=0
	End If

If KeyHit(57)=1
	Speed=0
	dBodySetRotation(Car,0,0,0)
	End If

End Function

; ###################################################################################################

Function UpdateCar()

For count=1 To 4
	dBodyEnable(Wheel(count))
Next

dBodyEnable(Car)

For count=1 To 4
	dJointSetHinge2Param(Joint(count),dParamVel2,Speed)
	dJointSetHinge2Param(Joint(count),dParamFMax2,HingeTorque)
Next

For count=1 To 2
	angle#=Steer-dJointGetHinge2Angle1(Joint(count))
	dJointSetHinge2Param(Joint(count),dParamVel,angle)
	dJointSetHinge2Param(Joint(count),dParamFMax,400)
Next

End Function

; ###################################################################################################

Function UpdateCam()

PositionEntity CameraPivot,0,3,-12

camx#=EntityX(CameraPivot,1)-EntityX(Camera)
camy#=EntityY(CameraPivot,1)-EntityY(Camera)
camz#=EntityZ(CameraPivot,1)-EntityZ(Camera)

TranslateEntity Camera,camx*0.5,camy*0.5,camz*0.5

PointEntity Camera,CMesh

End Function

; ###################################################################################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
	PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
Next

End Function

; ###################################################################################################

Function CreateTriMesh(mesh)

tricount=0
vertcount=0

For count=1 To CountSurfaces(mesh)
	tricount=tricount+CountTriangles(GetSurface(mesh,count))
	vertcount=vertcount+CountVertices(GetSurface(mesh,count))
Next

offset=0
trioffset=0
vertoffset=0

tribank=CreateBank(tricount*3*4)
vertbank=CreateBank(vertcount*4*4)

For count=1 To CountSurfaces(mesh)
	surface=GetSurface(mesh,count)
	For vert=0 To CountVertices(surface)-1
		PokeFloat(vertbank,offset,VertexX(surface,vert))
		offset=offset+4
		PokeFloat(vertbank,offset,VertexY(surface,vert))
		offset=offset+4
		PokeFloat(vertbank,offset,VertexZ(surface,vert))
		offset=offset+8
	Next
	For tri=0 To CountTriangles(surface)-1
		For corner=0 To 2
			trivert=TriangleVertex(surface,tri,corner)+vertoffset
			PokeInt(tribank,trioffset,trivert)
			trioffset=trioffset+4
		Next
	Next
	vertoffset=vertoffset+CountVertices(surface)
Next

trimeshdata=dGeomTriMeshDataCreate()

dGeomTriMeshDataBuildSimple(trimeshdata,vertbank,vertcount,tribank,tricount*3)

Return dCreateTriMesh(Space,trimeshdata)

End Function

; ###################################################################################################

Function SphereWrapCube(cubebody,cubemass#,cubedx#,cubedy#,cubedz#,wraptype,alpha#)

; ### Wrap Type

; ### 0 = Simple (8 Spheres) - Faster but low accuracy
; ### 1 = Complex (14 Spheres) - Medium speed and accuracy
; ### 2 = Full Wrap (26 Spheres) - Slower but high accuracy

cubeox#=cubedx*0.333
cubeoy#=cubedy*0.333
cubeoz#=cubedz*0.333

If cubedx&lt;=cubedy And cubedx&lt;=cubedz Then sphereradius#=cubeox*0.5
If cubedy&lt;=cubedx And cubedy&lt;=cubedz Then sphereradius#=cubeoy*0.5
If cubedz&lt;=cubedx And cubedz&lt;=cubedy Then sphereradius#=cubeoz*0.5

mass=dMassCreate()
dMassSetBox(mass,1,cubedx,cubedy,cubedz)
dMassSetBoxTotal(mass,cubemass,cubedx,cubedy,cubedz)
dBodySetMass(cubebody,mass)
dMassDestroy(mass)

xcount=0
ycount=0
zcount=0

If wraptype=0 Then Restore SWCube
If wraptype=1 Then Restore SWCubeComplex
If wraptype=2 Then Restore SWCubeFull

For count=1 To 27
	Read cubeinfo
	If cubeinfo=1
		ode.ODEGeom=New ODEGeom
		ode\body=dBodyCreate(World)
		dBodySetRotation(ode\body,0,0,0)
		xp#=(dBodyGetPositionX(cubebody)-cubeox)+(xcount*cubeox)
		yp#=(dBodyGetPositionY(cubebody)-cubeoy)+(ycount*cubeoy)
		zp#=(dBodyGetPositionZ(cubebody)-cubeoz)+(zcount*cubeoz)
		dBodySetPosition(ode\body,xp,yp,zp)
		dBodySetAutoDisableFlag(ode\body,1)
		ode\geom=dCreateSphere(Space,sphereradius)
		dGeomSetBody(ode\geom,ode\body)
		ode\mesh=CreateSphere()
		ScaleMesh ode\mesh,sphereradius,sphereradius,sphereradius
		EntityColor ode\mesh,255,255,255
		EntityAlpha ode\mesh,alpha
		EntityShininess ode\mesh,0.7
		cubejoint=dJointCreateFixed(World,0)
		dJointAttach(cubejoint,cubebody,ode\body)
		dJointSetFixed(cubejoint)
		End If
	xcount=xcount+1
	If xcount&gt;2 Then xcount=0 : ycount=ycount+1
	If ycount&gt;2 Then ycount=0 : zcount=zcount+1
Next

End Function

; ###################################################################################################

; ### You can customise the complexity of the wrapping by adding your own data - 27 spheres in total

; ### 0 = No Sphere
; ### 1 = Sphere

.SWCube
Data 1,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,1

.SWCubeComplex
Data 1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1

.SWCubeFull
Data 1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1

; ###################################################################################################
</textarea><br><br>It should be easy enough to add to your existing code, all you need to do is call the SphereWrapCube() function when you create your cube. It isn't optimised for rectangles though, so you may need to adjust the sphere offsets for those.<br><br>Let me know if you need more info :)<br><br>[EDIT] I've slightly modified and reposted the above code. Also note that you <b>must</b> wrap the cube with zero rotation, you can rotate it normally <b>after</b> wrapping. <br><br></td></tr></table><br>
<a name="519394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> It works great!!! thanks VIP3R!!!!<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="519510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're welcome :) <br><br></td></tr></table><br>
<a name="519659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, cool VIP3R! Too bad that I'm not home during the coming weekend, so I will be able to test this next monday earliest... duh! <br><br></td></tr></table><br>
<a name="521552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>&gt;&gt;&gt; IMPORTANT ANNOUNCEMENT &lt;&lt;&lt;</b><br><br>As a few folks have recently noticed, progress on the JV-ODE wrapper has been a little on the slow side lately. Unfortunately, due to an increased workload at university and other time-consuming commitments, Jedive has been unable to spend much time working on the wrapper since the last update. As Jedive and myself were working as a team, this has made it very difficult to advance the wrapper.<br><br>So, as I hinted in an earlier post... over the last few days we've discussed the future of the wrapper at length. Jedive has decided that it would be a lot more beneficial for all users of JV-ODE if he discontinues work on the wrapper, as he currently has little or no time to spend working on it. He's very keen to see the wrapper continue to make progress on its new journey.<br><br>I'm sure you will join me in wishing him the best of luck with his university work/career and thank him for the great work he has put into the wrapper so far :)<br><br>What about the future of JV-ODE?<br><br>Well, I'm pleased to say that I'll be continuing work on the wrapper. I've been working constantly in the background recently - not only to address the few problems that the wrapper currently has, but also to get things back on course for eventual completion.<br><br>There are now three new demos dealing with 'sphere wrapping' of cubes, cylinders and capped cylinders. This enables these primitives to collide with the TriMesh and provides a decent work-around while the TriMesh problem is investigated further. Only the cube version has been publicly released so far, but the other two are now mostly complete and work really well.<br><br>The most exciting news is that I'll be working on the wrapper alongside another one of the many talented people here on the Blitz forums. He's well known and respected by many here, and will bring a lot of expertise to the table, which will help to give the wrapper a new lease of life and speed up development. I won't say who it is just yet as it isn't quite set in stone, but I trust you'll be as thrilled as I am to have him on board.<br><br>If anyone has any questions or suggestions, please feel free to post them here.<br><br>Thanks to all for your support of the JV-ODE wrapper :)<br><br>More news to come very soon... <br><br></td></tr></table><br>
<a name="521602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good work Jedive and dont study to much :)<br><br>And thanks Vip3r continue the work with the wrapper.<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="521613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good news, sort of - I can really understand that studying and such can take so (too) much time... good luck to you Jedive, and hopefully the JV#-ODE [insert the missing letter] will get 100% finished with the help of new blood. Thumbs up! <br><br></td></tr></table><br>
<a name="521715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool :)<br><br>I've had a few folks asking about the sphere wrapping demos, so here they all are...<br><br><b>Sphere Wrapped Cubes Demo</b><br>The code for this demo is posted up there ^^^ [7 posts up] ;)<br><br>The cylinder and capped cylinder demos are below using a similar method to the cube version. As with the cube version the complexity can be customised and all sphere wrapping must be performed with zero rotation. After the wrapping function is called you can rotate the cylinder normally.<br>Note: the cylinder length must be at least twice the radius for these algorithms to work correctly.<br><br><b>Sphere Wrapped Cylinders Demo</b><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #								JV-ODE Sphere Wrapped Cylinders Demo								#
; #									Code by Jim Williams (VIP3R)									#		#
; #						Feel free to use this code, any credit appreciated							#
; ###################################################################################################

AppTitle "JV-ODE Sphere Wrapped Cylinders Demo"

Include "ode.bb"

Graphics3D 800,600,0,2

Global CMass#=200			; ### Car Mass
Global WMass#=8				; ### Wheel Mass

Global WorldERP#=1			; ### World Error Correction
Global WorldFriction#=64	; ### World Friction
Global HingeTorque#=24		; ### Hinge Torque
Global SuspensionHS#=0.01	; ### Hinge Suspension Hardness/Softness (Higher=Softer - Lower=Harder)

Global Speed#=0
Global Steer#=0

Global Car
Global CGeom
Global CMesh

Global CarStartY=40

Dim Wheel(4)
Dim WGeom(4)
Dim Joint(4)

Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

; ###################################################################################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-1,0)
dWorldSetERP(World,WorldERP)

dContactSetMode(dContactSlip1)
dContactSetMu(WorldFriction)

; ### Create car body

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
Car=ode\body
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,0,CarStartY,0)
mass=dMassCreate()
dMassSetBox(mass,1,3,1,4)
dMassSetBoxTotal(mass,CMass,3,1,4)
dMassTranslate(mass,0,-1,0)
dBodySetMass(ode\body,mass)
dMassDestroy(mass)
ode\geom=dCreateBox(Space,3,1,4)
CGeom=ode\geom
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
CMesh=ode\mesh
ScaleMesh ode\mesh,1.5,0.5,2
RotateMesh ode\mesh,0,0,0
PositionMesh ode\mesh,0,0,0
EntityColor ode\mesh,40,80,255
EntityAlpha ode\mesh,1

; ### Create wheels

For count=1 To 4
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	Wheel(count)=ode\body
	dBodySetRotation(ode\body,0,0,0)
	dBodySetPosition(ode\body,0,0,0)
	mass=dMassCreate()
	dMassSetSphere(mass,1,0.7)
	dMassSetSphereTotal(mass,WMass,0.7)
	dBodySetMass(ode\body,mass)
	dMassDestroy(mass)
	ode\geom=dCreateSphere(Space,0.7)
	WGeom(count)=ode\geom
	dGeomSetBody(ode\geom,ode\body)
	ode\mesh=CreateCylinder(8)
	ScaleMesh ode\mesh,0.7,0.25,0.7
	RotateMesh ode\mesh,0,0,90
	PositionMesh ode\mesh,0,0,0
	EntityColor ode\mesh,255,255,255
Next

dBodySetPosition(Wheel(1),-2,CarStartY-0.5,+2)
dBodySetPosition(Wheel(2),+2,CarStartY-0.5,+2)
dBodySetPosition(Wheel(3),-2,CarStartY-0.5,-2)
dBodySetPosition(Wheel(4),+2,CarStartY-0.5,-2)

; ### Create some objects

SeedRnd MilliSecs()

For cylinders=1 To 20
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	dBodySetRotation(ode\body,0,0,0)
	dBodySetPosition(ode\body,Rnd(-100,100),44,Rnd(-100,100))
	ode\geom=dCreateCylinder(Space,2,18)
	dGeomSetBody(ode\geom,ode\body)
	SphereWrapCylinder(ode\body,10,2,18,0,1)	; ### (Body,Mass,Radius,Length,WrapType,Alpha)
	ode\mesh=CreateCylinder(8)
	ScaleMesh ode\mesh,2,9,2
	RotateMesh ode\mesh,0,0,0
	PositionMesh ode\mesh,0,0,0
	EntityColor ode\mesh,Rnd(255),Rnd(255),Rnd(255)
	EntityAlpha ode\mesh,0.8
	EntityShininess ode\mesh,0.7
Next

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global CameraPivot=CreatePivot(CMesh)
PositionEntity CameraPivot,0,2,-7

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Mirror=CreateMirror()

; ###################################################################################################

; ### CREATE TRIMESH

demomesh=LoadMesh("media\terrain.b3d")
ScaleMesh demomesh,1,0.7,1
trimesh=CreateTriMesh(demomesh)
dGeomSetRotation(trimesh,0,0,0)
dGeomSetPosition(trimesh,0,0.05,0)
RotateMesh demomesh,0,0,0
PositionMesh demomesh,0,0.05,0

EntityColor demomesh,255,255,255
EntityAlpha demomesh,1

demotexture=LoadTexture("media\terrain.png")
ScaleTexture demotexture,0.08,0.08
EntityTexture demomesh,demotexture

; ###################################################################################################

SetupCar()

While Not KeyHit(1)

	UpdateKeys()

	PTime=MilliSecs()

	UpdateCar()

	UpdateGeoms()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateCam()

	UpdateWorld

	RenderWorld

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime
	Text 0,30,"Car Speed:"+Speed
	Text 640,0,"A - Accelerate"
	Text 640,15,"Z - Brake/Reverse"
	Text 640,30,"Arrows - Steering"
	Text 640,45,"Space - Reset Car"

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function SetupCar()

For count=1 To 4
	Joint(count)=dJointCreateHinge2(World,0)
	dJointAttach(Joint(count),Car,Wheel(count))
	dJointSetHinge2Anchor(Joint(count),dBodyGetPositionX(Wheel(count)),dBodyGetPositionY(Wheel(count)),dBodyGetPositionZ(Wheel(count)))
	dJointSetHinge2Axis1(Joint(count),0,1,0)
	dJointSetHinge2Axis2(Joint(count),-1,0,0)
	dJointSetHinge2Param(Joint(count),dParamSuspensionERP,0.8)
	dJointSetHinge2Param(Joint(count),dParamSuspensionCFM,SuspensionHS)
	If count&gt;2
		dJointSetHinge2Param(Joint(count),dParamLoStop,0)
		dJointSetHinge2Param(Joint(count),dParamHiStop,0)
		End If
Next

Speed=0

End Function

; ###################################################################################################

Function UpdateKeys()

If KeyDown(30)=1
	Speed=Speed+0.08
	If Speed&gt;30 Then Speed=30
	End If

If KeyDown(44)=1
	Speed=Speed-0.1
	If Speed&lt;-10 Then Speed=-10
	If Speed&gt;0 Then Speed=Speed*0.97
	End If

If KeyDown(30)=0 And KeyDown(44)=0 Then Speed=Speed*0.99

If KeyDown(203)=1 Or KeyDown(205)=1
	If KeyDown(203)=1
		Steer=0.5
		Else
		Steer=-0.5
		End If
	Else
	Steer=0
	End If

If KeyHit(57)=1
	Speed=0
	dBodySetRotation(Car,0,0,0)
	End If

End Function

; ###################################################################################################

Function UpdateCar()

For count=1 To 4
	dBodyEnable(Wheel(count))
Next

dBodyEnable(Car)

For count=1 To 4
	dJointSetHinge2Param(Joint(count),dParamVel2,Speed)
	dJointSetHinge2Param(Joint(count),dParamFMax2,HingeTorque)
Next

For count=1 To 2
	angle#=Steer-dJointGetHinge2Angle1(Joint(count))
	dJointSetHinge2Param(Joint(count),dParamVel,angle)
	dJointSetHinge2Param(Joint(count),dParamFMax,400)
Next

End Function

; ###################################################################################################

Function UpdateCam()

PositionEntity CameraPivot,0,3,-12

camx#=EntityX(CameraPivot,1)-EntityX(Camera)
camy#=EntityY(CameraPivot,1)-EntityY(Camera)
camz#=EntityZ(CameraPivot,1)-EntityZ(Camera)

TranslateEntity Camera,camx*0.5,camy*0.5,camz*0.5

PointEntity Camera,CMesh

End Function

; ###################################################################################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
	PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
Next

End Function

; ###################################################################################################

Function CreateTriMesh(mesh)

tricount=0
vertcount=0

For count=1 To CountSurfaces(mesh)
	tricount=tricount+CountTriangles(GetSurface(mesh,count))
	vertcount=vertcount+CountVertices(GetSurface(mesh,count))
Next

offset=0
trioffset=0
vertoffset=0

tribank=CreateBank(tricount*3*4)
vertbank=CreateBank(vertcount*4*4)

For count=1 To CountSurfaces(mesh)
	surface=GetSurface(mesh,count)
	For vert=0 To CountVertices(surface)-1
		PokeFloat(vertbank,offset,VertexX(surface,vert))
		offset=offset+4
		PokeFloat(vertbank,offset,VertexY(surface,vert))
		offset=offset+4
		PokeFloat(vertbank,offset,VertexZ(surface,vert))
		offset=offset+8
	Next
	For tri=0 To CountTriangles(surface)-1
		For corner=0 To 2
			trivert=TriangleVertex(surface,tri,corner)+vertoffset
			PokeInt(tribank,trioffset,trivert)
			trioffset=trioffset+4
		Next
	Next
	vertoffset=vertoffset+CountVertices(surface)
Next

trimeshdata=dGeomTriMeshDataCreate()

dGeomTriMeshDataBuildSimple(trimeshdata,vertbank,vertcount,tribank,tricount*3)

Return dCreateTriMesh(Space,trimeshdata)

End Function

; ###################################################################################################

Function SphereWrapCylinder(cylbody,cylmass#,radius#,length#,wraptype,alpha#)

; ### Wrap Type

; ### 0 = Simple (2 Spheres) - Faster but low accuracy
; ### 1 = Complex (3+ Spheres) - Slower but high accuracy

If length&lt;radius*4 Then Return

massdirection=2		; ### 1 = X   2 = Y   3 = Z

mass=dMassCreate()
dMassSetCylinder(mass,1,massdirection,radius,length)
dMassSetCylinderTotal(mass,cylmass,massdirection,radius,length)
dBodySetMass(cylbody,mass)
dMassDestroy(mass)

If wraptype=0
	scount=2
	Else
	scount=Floor((length/2)/radius)
	End If

For count=1 To scount
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	dBodySetRotation(ode\body,0,0,0)
	xp#=dBodyGetPositionX(cylbody)
	If count=scount
		yp#=dBodyGetPositionY(cylbody)-(length/2)+radius
		Else
		If count=1
			yp#=dBodyGetPositionY(cylbody)+(length/2)-radius
			Else
			yp#=yp-(radius*2)
			End If
		End If
	zp#=dBodyGetPositionZ(cylbody)
	dBodySetPosition(ode\body,xp,yp,zp)
	dBodySetAutoDisableFlag(ode\body,1)
	ode\geom=dCreateSphere(Space,radius)
	dGeomSetBody(ode\geom,ode\body)
	ode\mesh=CreateSphere()
	ScaleMesh ode\mesh,radius,radius,radius
	EntityColor ode\mesh,255,255,255
	EntityAlpha ode\mesh,alpha
	EntityShininess ode\mesh,0.7
	cyljoint=dJointCreateFixed(World,0)
	dJointAttach(cyljoint,cylbody,ode\body)
	dJointSetFixed(cyljoint)
Next

End Function

; ###################################################################################################
</textarea><br><br><b>Sphere Wrapped Capped Cylinders Demo</b><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #								JV-ODE Sphere Wrapped CCylinders Demo								#
; #									Code by Jim Williams (VIP3R)									#		#
; #						Feel free to use this code, any credit appreciated							#
; ###################################################################################################

AppTitle "JV-ODE Sphere Wrapped CCylinders Demo"

Include "ode.bb"

Graphics3D 800,600,0,2

Global CMass#=200			; ### Car Mass
Global WMass#=8				; ### Wheel Mass

Global WorldERP#=1			; ### World Error Correction
Global WorldFriction#=64	; ### World Friction
Global HingeTorque#=24		; ### Hinge Torque
Global SuspensionHS#=0.01	; ### Hinge Suspension Hardness/Softness (Higher=Softer - Lower=Harder)

Global Speed#=0
Global Steer#=0

Global Car
Global CGeom
Global CMesh

Global CarStartY=40

Dim Wheel(4)
Dim WGeom(4)
Dim Joint(4)

Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

; ###################################################################################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-1,0)
dWorldSetERP(World,WorldERP)

dContactSetMode(dContactSlip1)
dContactSetMu(WorldFriction)

; ### Create car body

ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
Car=ode\body
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,0,CarStartY,0)
mass=dMassCreate()
dMassSetBox(mass,1,3,1,4)
dMassSetBoxTotal(mass,CMass,3,1,4)
dMassTranslate(mass,0,-1,0)
dBodySetMass(ode\body,mass)
dMassDestroy(mass)
ode\geom=dCreateBox(Space,3,1,4)
CGeom=ode\geom
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
CMesh=ode\mesh
ScaleMesh ode\mesh,1.5,0.5,2
RotateMesh ode\mesh,0,0,0
PositionMesh ode\mesh,0,0,0
EntityColor ode\mesh,40,80,255
EntityAlpha ode\mesh,1

; ### Create wheels

For count=1 To 4
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	Wheel(count)=ode\body
	dBodySetRotation(ode\body,0,0,0)
	dBodySetPosition(ode\body,0,0,0)
	mass=dMassCreate()
	dMassSetSphere(mass,1,0.7)
	dMassSetSphereTotal(mass,WMass,0.7)
	dBodySetMass(ode\body,mass)
	dMassDestroy(mass)
	ode\geom=dCreateSphere(Space,0.7)
	WGeom(count)=ode\geom
	dGeomSetBody(ode\geom,ode\body)
	ode\mesh=CreateCylinder(8)
	ScaleMesh ode\mesh,0.7,0.25,0.7
	RotateMesh ode\mesh,0,0,90
	PositionMesh ode\mesh,0,0,0
	EntityColor ode\mesh,255,255,255
Next

dBodySetPosition(Wheel(1),-2,CarStartY-0.5,+2)
dBodySetPosition(Wheel(2),+2,CarStartY-0.5,+2)
dBodySetPosition(Wheel(3),-2,CarStartY-0.5,-2)
dBodySetPosition(Wheel(4),+2,CarStartY-0.5,-2)

; ### Create some objects

SeedRnd MilliSecs()

For ccylinders=1 To 20
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	dBodySetRotation(ode\body,0,0,0)
	dBodySetPosition(ode\body,Rnd(-100,100),44,Rnd(-100,100))
	ode\geom=dCreateCCylinder(Space,2,14)
	dGeomSetBody(ode\geom,ode\body)
	SphereWrapCCylinder(ode\body,10,2,14,0,1)	; ### (Body,Mass,Radius,Length,WrapType,Alpha)
	ode\mesh=CreateCylinder(8)
	ScaleMesh ode\mesh,2,9,2	; &lt;&lt;&lt; ScaleY = Radius+(Length/2)
	RotateMesh ode\mesh,90,0,0	; &lt;&lt;&lt; Mesh X-Axis must be rotated 90 degrees to fix cylinder alignment
	PositionMesh ode\mesh,0,0,0
	EntityColor ode\mesh,Rnd(255),Rnd(255),Rnd(255)
	EntityAlpha ode\mesh,0.8
	EntityShininess ode\mesh,0.7
Next

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global CameraPivot=CreatePivot(CMesh)
PositionEntity CameraPivot,0,2,-7

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Mirror=CreateMirror()

; ###################################################################################################

; ### CREATE TRIMESH

demomesh=LoadMesh("media\terrain.b3d")
ScaleMesh demomesh,1,0.7,1
trimesh=CreateTriMesh(demomesh)
dGeomSetRotation(trimesh,0,0,0)
dGeomSetPosition(trimesh,0,0.05,0)
RotateMesh demomesh,0,0,0
PositionMesh demomesh,0,0.05,0

EntityColor demomesh,255,255,255
EntityAlpha demomesh,1

demotexture=LoadTexture("media\terrain.png")
ScaleTexture demotexture,0.08,0.08
EntityTexture demomesh,demotexture

; ###################################################################################################

SetupCar()

While Not KeyHit(1)

	UpdateKeys()

	PTime=MilliSecs()

	UpdateCar()

	UpdateGeoms()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateCam()

	UpdateWorld

	RenderWorld

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime
	Text 0,30,"Car Speed:"+Speed
	Text 640,0,"A - Accelerate"
	Text 640,15,"Z - Brake/Reverse"
	Text 640,30,"Arrows - Steering"
	Text 640,45,"Space - Reset Car"

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function SetupCar()

For count=1 To 4
	Joint(count)=dJointCreateHinge2(World,0)
	dJointAttach(Joint(count),Car,Wheel(count))
	dJointSetHinge2Anchor(Joint(count),dBodyGetPositionX(Wheel(count)),dBodyGetPositionY(Wheel(count)),dBodyGetPositionZ(Wheel(count)))
	dJointSetHinge2Axis1(Joint(count),0,1,0)
	dJointSetHinge2Axis2(Joint(count),-1,0,0)
	dJointSetHinge2Param(Joint(count),dParamSuspensionERP,0.8)
	dJointSetHinge2Param(Joint(count),dParamSuspensionCFM,SuspensionHS)
	If count&gt;2
		dJointSetHinge2Param(Joint(count),dParamLoStop,0)
		dJointSetHinge2Param(Joint(count),dParamHiStop,0)
		End If
Next

Speed=0

End Function

; ###################################################################################################

Function UpdateKeys()

If KeyDown(30)=1
	Speed=Speed+0.08
	If Speed&gt;30 Then Speed=30
	End If

If KeyDown(44)=1
	Speed=Speed-0.1
	If Speed&lt;-10 Then Speed=-10
	If Speed&gt;0 Then Speed=Speed*0.97
	End If

If KeyDown(30)=0 And KeyDown(44)=0 Then Speed=Speed*0.99

If KeyDown(203)=1 Or KeyDown(205)=1
	If KeyDown(203)=1
		Steer=0.5
		Else
		Steer=-0.5
		End If
	Else
	Steer=0
	End If

If KeyHit(57)=1
	Speed=0
	dBodySetRotation(Car,0,0,0)
	End If

End Function

; ###################################################################################################

Function UpdateCar()

For count=1 To 4
	dBodyEnable(Wheel(count))
Next

dBodyEnable(Car)

For count=1 To 4
	dJointSetHinge2Param(Joint(count),dParamVel2,Speed)
	dJointSetHinge2Param(Joint(count),dParamFMax2,HingeTorque)
Next

For count=1 To 2
	angle#=Steer-dJointGetHinge2Angle1(Joint(count))
	dJointSetHinge2Param(Joint(count),dParamVel,angle)
	dJointSetHinge2Param(Joint(count),dParamFMax,400)
Next

End Function

; ###################################################################################################

Function UpdateCam()

PositionEntity CameraPivot,0,3,-12

camx#=EntityX(CameraPivot,1)-EntityX(Camera)
camy#=EntityY(CameraPivot,1)-EntityY(Camera)
camz#=EntityZ(CameraPivot,1)-EntityZ(Camera)

TranslateEntity Camera,camx*0.5,camy*0.5,camz*0.5

PointEntity Camera,CMesh

End Function

; ###################################################################################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
	PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
Next

End Function

; ###################################################################################################

Function CreateTriMesh(mesh)

tricount=0
vertcount=0

For count=1 To CountSurfaces(mesh)
	tricount=tricount+CountTriangles(GetSurface(mesh,count))
	vertcount=vertcount+CountVertices(GetSurface(mesh,count))
Next

offset=0
trioffset=0
vertoffset=0

tribank=CreateBank(tricount*3*4)
vertbank=CreateBank(vertcount*4*4)

For count=1 To CountSurfaces(mesh)
	surface=GetSurface(mesh,count)
	For vert=0 To CountVertices(surface)-1
		PokeFloat(vertbank,offset,VertexX(surface,vert))
		offset=offset+4
		PokeFloat(vertbank,offset,VertexY(surface,vert))
		offset=offset+4
		PokeFloat(vertbank,offset,VertexZ(surface,vert))
		offset=offset+8
	Next
	For tri=0 To CountTriangles(surface)-1
		For corner=0 To 2
			trivert=TriangleVertex(surface,tri,corner)+vertoffset
			PokeInt(tribank,trioffset,trivert)
			trioffset=trioffset+4
		Next
	Next
	vertoffset=vertoffset+CountVertices(surface)
Next

trimeshdata=dGeomTriMeshDataCreate()

dGeomTriMeshDataBuildSimple(trimeshdata,vertbank,vertcount,tribank,tricount*3)

Return dCreateTriMesh(Space,trimeshdata)

End Function

; ###################################################################################################

Function SphereWrapCCylinder(ccylbody,ccylmass#,radius#,length#,wraptype,alpha#)

; ### Wrap Type

; ### 0 = Simple (2 Spheres) - Faster but low accuracy
; ### 1 = Complex (3+ Spheres) - Slower but high accuracy

If length&lt;radius*4 Then Return

massdirection=3		; ### 1 = X   2 = Y   3 = Z

mass=dMassCreate()
dMassSetCappedCylinder(mass,1,massdirection,radius,length)
dMassSetCappedCylinderTotal(mass,ccylmass,massdirection,radius,length)
dBodySetMass(ccylbody,mass)
dMassDestroy(mass)

If wraptype=0
	scount=2
	Else
	scount=Floor((length/2)/radius)+1
	End If

For count=1 To scount
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	dBodySetRotation(ode\body,0,0,0)
	xp#=dBodyGetPositionX(ccylbody)
	yp#=dBodyGetPositionY(ccylbody)
	If count=scount
		zp#=dBodyGetPositionZ(ccylbody)-(length/2)
		Else
		If count=1
			zp#=dBodyGetPositionZ(ccylbody)+(length/2)
			Else
			zp#=zp-(radius*2)
			End If
		End If
	dBodySetPosition(ode\body,xp,yp,zp)
	dBodySetAutoDisableFlag(ode\body,1)
	ode\geom=dCreateSphere(Space,radius)
	dGeomSetBody(ode\geom,ode\body)
	ode\mesh=CreateSphere()
	ScaleMesh ode\mesh,radius,radius,radius
	EntityColor ode\mesh,255,255,255
	EntityAlpha ode\mesh,alpha
	EntityShininess ode\mesh,0.7
	ccyljoint=dJointCreateFixed(World,0)
	dJointAttach(ccyljoint,ccylbody,ode\body)
	dJointSetFixed(ccyljoint)
Next

End Function

; ###################################################################################################
</textarea><br><br>I'm looking for some cool demos to bundle with the next update, so if you manage to create something that'll knock peoples socks off - let me know! :)<br><br>The ones I've really liked so far would be Wayne's excellent pull/push/select/force/friction demos and PsychicParrots great Angular Velocities demo, it would be great if we could make those demos official and include them with the library.<br><br>Btw, the sphere wrapped demos are still work in progress, so they may have changed a little when they make it into the next update. <br><br></td></tr></table><br>
<a name="521780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi guys.<br><br>As you may have noticed, I used to be a very active member of this community, but this situation has changed dramatically in the last months.<br><br>If everything goes well, I will graduate in History this year. If it does not go that well, I will graduate next year, but I'm doing all my best to finish it as soon as I can, because I am in desperate need of some time for myself. It's not only the University, is that I also work on the afternoon / evening 5 days each week, so I am under great pressure when the exams are near.<br><br>I think I'll continue until july or so in this situation. After that, some sunny days will come to feel happier, and to think about my projects. Have some ideas that I would like to develop in the near future, and I definitely love this so much to stop doing it!<br><br>Best wishes to Viper and his new teammate. <br><br></td></tr></table><br>
<a name="521801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Opcode</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi guys,<br><br>glad to hear that work on the wrapper will continue.<br><br><div class="quote"> If anyone has any questions or suggestions, please feel free to post them here. <br></div><br><br>I have a suggestion/request..i would like to see a simple(slimmed down) demo using the wrapper with a player character...(doesn't need to be anything complex, perhaps even a cube as a player character) showing physics with a few .b3d meshes.<br><br>I have not succeeded in getting this 'type' of demo working properly. What i would like to see would be something simple (for a similar style game such as max payne..i.e not a car game) where the player character can knock a few crates/objects around etc.<br><br>As said, doesn't need to be anything complex.:)<br><br>best,<br>Lee. <br><br></td></tr></table><br>
<a name="521890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> All the best Jedive, good luck and hope you get where you want to go in life!<br><br>At the same time, thanks to VIP3R and mystery partner for continuing development on this. <br><br>Is Kurix helping you? I noticed a screenshot in the gallery that seems to suggest he's working on a visual ODE editor, which is a GREAT idea. One of the biggest problems I find with ODE is gaining an understanding the effect of the variables and tweaking the positions of mass and so on. Visually it would be much more tactile and hence easier to create realistic physical response.<br><br>[edit] whoops - totally missed the Kurix ODE editor thread :) [/edit] <br><br></td></tr></table><br>
<a name="521896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am not in the JV-ODE project, i am working on my own. Anyway Vip3R has helped all us with his posts and his works (Thanks Viper!).<br><br>The Editor is almost finished, but do not uses the jv-ode wrapper. I have made my own wrapper based on the original Arkon's concept, easier to the novice user.<br><br>Cheers, KuRi. <br><br></td></tr></table><br>
<a name="522065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks fellas :)<br><br>@Opcode: Have you tried PsychicParrots demo, it sounds almost exactly like what you are looking for :)<br><br>Here it is...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; JV-ODE - Key Controlled Sphere Demo Using Angular Velocities
; Code by Jim Williams (VIP3R)
; Arrow key control by Jeff (PsychicParrot)

AppTitle "JV-ODE - Key Controlled sphere Demo"

Include "ode.bb"

Graphics3D 800,600,0,2

Type ODEGeom

	Field body
	Field geom
	Field mesh
	Field pivot ; To find direction vectors
	Field head  ; Just a stupid head to show which direction it's going in!
	Field inair ; To tell if player is on the ground or not!!
	
End Type

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetGravity(World,0,-1,0)
dContactSetMode(dContactBounce)
dContactSetBounce(0.2)
dContactSetMu(38)

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,0,20,-50
RotateEntity Camera,30,0,0

; ### Control vars

Global potato#=0 ; y rotation of thingy (rotater,rotato,potato!!)
Global spud#
Global fwd_key
Global back_key
Global left_key
Global right_key
Global jump_key

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0
EntityPickMode plane,2

Mirror=CreateMirror()

AddObject() ; Add our thingy to the world

While Not KeyHit(1)

	PTime=MilliSecs()

	; Update controls
	
	c.ODEGeom=First ODEGeom
	Getkeys(c)
	movethingy(c)
	lookforground(c)
	
	PointEntity (camera,c\mesh)
	
	UpdateGeoms()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.14)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateWorld

	RenderWorld

	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

Function getkeys(c.ODEGeom)

	fwd_key=False
	back_key=False
	left_key=False
	right_key=False
	jump_key=False

	If c\inair=False Then ; Only let player control 'thrust' when on the ground
	
		If KeyDown(200) Then fwd_key=True
		If KeyDown(208) Then back_key=True

	EndIf
	
		If KeyDown(205) Then left_key=True
		If KeyDown(203) Then right_key=True
		If KeyDown(57) Then jump_key=True

	;EndIf

End Function

Function lookforground(c.ODEGeom)

	If LinePick(EntityX(c\mesh,True),EntityY(c\mesh,True)+1,EntityZ(c\mesh,True),0,-4,0)&lt;&gt;0 Then ; Check for anything 'under' player
		c\inair=False
	  Else
		c\inair=True
	EndIf

End Function

Function movethingy(c.ODEGeom)

	If fwd_key=True Then
		spud=spud+.1
	EndIf

	If back_key=True Then
		spud=spud-.1
	EndIf
	
	If left_key=True Then
		potato=potato-2
	End If
	
	If right_key=True Then
		potato=potato+2
	End If

	If jump_key=True And c\inair=False Then		
		dBodyAddForce(c\body,0,16 ,0)		
	End If

	RotateEntity c\head,0,potato#,0
	
	; Add forward force

	TFormVector 0,0,spud,c\head,0
	
	vx# = dBodyGetAngularVelX(c\body) + TFormedX()
	vy# = dBodyGetAngularVelY(c\body) + TFormedY()
	vz# = dBodyGetAngularVelZ(c\body) + TFormedZ()

	damping#=.8
	dBodySetAngularVel(c\body,vx#*damping#,vy#*damping#,vz#*damping#)

	spud=spud*.9
	
End Function

Function AddObject()

xp=Rand(-8,8)
zp=Rand(-8,8)
ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,30,zp)
dBodySetAutoDisableFlag(ode\body,1)
ode\geom=dCreateSphere(Space,3)
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateSphere()
ScaleMesh ode\mesh,3,3,3
EntityColor ode\mesh,Rand(255),Rand(255),Rand(255)
EntityAlpha ode\mesh,1
EntityShininess ode\mesh,0.7
ode\head=CreateCube()

ScaleMesh ode\head,1.5,1.5,1.5

ode\pivot=CreatePivot() ; Create pivot to get direction vectors

End Function


Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	
		RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
		
		PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
		
		PositionEntity ode\head,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom)+4.5,dGeomGetPositionZ#(ode\geom)
	
Next

End Function
</textarea><br><br>If this isn't quite what you needed, let me know and I'll try to help you out ;) <br><br></td></tr></table><br>
<a name="522156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Opcode</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks VIP3R, i have just looked at PsychicParrots demo...though i get some strange results when running it.<br><br>The controls (forwards/backwards) freeze unless i press one of the movement keys as soon as the cube is on the ground.<br><br><div class="quote"> If this isn't quite what you needed, let me know and I'll try to help you out ;) <br></div> <br><br>To be honest, its not really what i'm looking for, if you could help out with a simple demo, that would be great :)<br><br>Cheers,<br>Lee.<br><br><a href="http://www.gamelab3d.com" target="_blank">Blitz-Backdrop</a><br><a href="http://www.michaelhartlef.de/html/features.html" target="_blank">IndeED Free IDE</a> <br><br></td></tr></table><br>
<a name="522162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The controls (forwards/backwards) freeze unless i press one of the movement keys as soon as the cube is on the ground.<br> <br></div><br>Ah, that's because PP left the auto-disable for the sphere switched on ;)<br><br>To fix that, comment out the following line of the AddObject() function or change the '1' to a '0'...<br><b>dBodySetAutoDisableFlag(ode\body,1)</b><br><br>I'll try my best to help you Lee, I need some specific details of exactly what you need first though. How does PP's demo differ from what you're after?... things like that will really help, or if you have any existing code that will help too. Feel free to email me the details (address in profile) <br><br></td></tr></table><br>
<a name="522344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Opcode</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks VIP3R, just sent you an e-mail a couple of minutes ago.<br><br>Cheers,<br>Lee.<br><br><a href="http://www.gamelab3d.com" target="_blank">Blitz-Backdrop</a><br><a href="http://www.michaelhartlef.de/html/features.html" target="_blank">IndeED Free IDE</a> <br><br></td></tr></table><br>
<a name="522348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers Lee, I've just received it. Let me take a look and I'll get back to you as soon as I can  ;) <br><br></td></tr></table><br>
<a name="525144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sah...weeeeet :D <br><br></td></tr></table><br>
<a name="526730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone successfully used an AMotor joint to constrain a ball joint ?<br>Is there a list anywhere of what joint parameters are valid for each joint type. The documentation lists all the parameters but does not mention which ones are valid for which joint type. An invalid joint parameter seems to be  just ignored.<br>Where is the best place to post questions - the forum on the Player Factory seems a bit dead.<br>Thanks in advance. <br><br></td></tr></table><br>
<a name="526741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Smiff,<br><br>Here is probably the best place to ask, like you say the Player Factory threads seem a bit quiet (well that's an understatement) ;)<br><br>I don't think there's a list detailing the parameters based on each joint type, but I'll see if I can find more info for you. I do know that any unused parameters are just ignored like you pointed out. Also, any parameters you don't specify a value for will use the default parameters.<br><br>One thing you could try is using the following function to return each default parameter...<br><b>dJointGetAMotorParam(joint,param)</b><br>...this may provide you with an idea of which parameters are applicable.<br><br>If I find any more info, I'll let you know ;) <br><br></td></tr></table><br>
<a name="526756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many Thanks - Good idea - I'll give it a try - Nice work on the wrapper by the way . <br><br></td></tr></table><br>
<a name="529208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> I notice Kurix has ODE trimesh and primitives working just fine. <br><br></td></tr></table><br>
<a name="530002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>TRIMESH PROBLEM FINALLY IDENTIFIED!</b><br><br>No wonder I couldn't fix it, I was looking in the wrong place. I was convinced it was related to the collision routines, but it's actually to do with the TriMesh creation itself, doh!<br><br>I can see where the problem lies now, so hopefully I should have a fix real soon.<br><br>I'm really sorry this has taken so long :(<br><br>PS. I feel like an idiot, somebody please shoot me :) <br><br></td></tr></table><br>
<a name="530012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>PS. I feel like an idiot, somebody please shoot me :) <br> <br></div><br><br>Okay, now where did I left my M41A pulse rifle... seriously, good job! Thanks for fixing it - I'm sure you will get loads of "thank you"s very soon. :) <br><br></td></tr></table><br>
<a name="530019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> COOL!!! VIP3R!!!!!!!!!!!!<br><br>When can we have the new files!!! Sooooooon please!!!!!<br><br>:)<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="530029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Once I've rebuilt the TriMesh construction code and tested it, within days all being well :)<br><br>The test code is currently working with spheres, cubes and capped cylinders on a simple quad. (Normal cylinders don't work, but they don't work in ODE itself either)<br><br>The fact that the spheres worked flawlessy is what threw me off, they shouldn't have been working either. But the collisions are less complex for those so that's probably why. <br><br></td></tr></table><br>
<a name="530093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great news bro!<br><br>I got some great stuff to build. <br><br></td></tr></table><br>
<a name="530512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> So is this problem with ODE then? If not, what about all those on the ODE forum saying they can't get it to work? I thought this was an official bug of ODE and not the wrapper!? <br><br>Anyway, very good news it's fixed. <br><br></td></tr></table><br>
<a name="530551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R- Is there any plans for a ODE editor ? :)<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="530783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> It doesn't look like a problem in the wrapper itself, but it's difficult to say for sure as I haven't managed to find a fix for the problem yet. Now that I can see where things are going wrong I'm confident I'll be able to sort it out though.<br><br>I can create a TriMesh that is one quad high and of any width, which works perfectly. The problem occurs immediately when you define the second line of quads, and gets worse for each line of quads added.<br><br>Imagine you have 9 quads in a mesh laid out as below:<br><br>12345678<br>9<br><br>The TriMesh works fine if you only define quads 1-8, but as soon as you define the first triangle of quad 9, the collision geometry of the TriMesh deforms. What you end up with is quads 2-8 still working correctly, but the top half of quad 1 and the bottom half of quad 9 fail. It's almost like instead of having quads 1 and 9, you have one quad halfway between the two.<br><br>The above scenario only affects cubes and capped cylinders, spheres are still able to work for some strange reason. It's very odd!<br><br>@Alienforce: I'm not sure yet tbh, the thing I don't like about editors is they produce code which you could find difficult to integrate into a project. I thought an editor would be an ideal little project for you fellas, weren't you working on one Wayne? Anyway, I need to get these issues fixed beforehand, maybe I'll think about it more when I've done those.<br><br>I'll keep you all updated of any developments :) <br><br></td></tr></table><br>
<a name="530981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, another news snippet...<br><br>The TriMesh vertice and indice data is definitely misaligned on each new line of quads, once I've got an algorithm worked out to re-align them it should be a simple job to correct it.<br><br>More soon ;) <br><br></td></tr></table><br>
<a name="531008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> woOOOOOOT! <br><br></td></tr></table><br>
<a name="531256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> For an editor, ideally you could just output a script of objects that a parser can load into Blitz and apply JV-ODE functions to build the scene. I thought the ODEEd could do this (custom output modes) but as the program's uselessly bugged I never really got to look at it! <br><br></td></tr></table><br>
<a name="531552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, <br>What are max contacts set at ? <br><br></td></tr></table><br>
<a name="531637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> 128 by default, but you can change it with dContactSetMaxContacts(max). <br><br></td></tr></table><br>
<a name="531661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, what Jedive said.<br><br>Cheers Jedive, good to see you :)<br><br>Oh well, back to the TriMesh debugging... <br><br></td></tr></table><br>
<a name="531772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vip3r said, "It doesn't look like a problem in the wrapper itself, but it's difficult to say for sure as I haven't managed to find a fix for the problem yet. Now that I can see where things are going wrong I'm confident I'll be able to sort it out though.<br><br>I can create a TriMesh that is one quad high and of any width, which works perfectly. The problem occurs immediately when you define the second line of quads, and gets worse for each line of quads added.<br><br>Imagine you have 9 quads in a mesh laid out as below:"<br><br>12345678<br>9<br><br>Does that mean you could make the mesh like a snake and continuous and it would work ?<br>12345678<br>gfedcba9<br>hijklmno <br><br></td></tr></table><br>
<a name="531783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm glad to see you've got your thinking cap on Wayne ;)<br><br>No, it wouldn't work like that either I'm afraid.<br><br>If you have the following sequence of quads...<br><br>12345678<br>_______9<br><br>_ = no quad<br><br>Quads 1 to 7 would work correctly, but the top half of quad 8 and the bottom of quad 9 would fail (except with spheres).<br><br>Any quad you define on the second row, will affect the quad directly above it in the first row, regardless of the order they're in.<br><br>Good suggestion though, keep 'em coming :) <br><br></td></tr></table><br>
<a name="531992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about this ?<br><br>10.5.1. Category and Collide Bitfields<br>Each geom has a ``category'' and ``collide'' bitfield that can be used to assist the space algorithms in determining which geoms should interact and which should not. Use of this feature is optional - by default geoms are considered to be capable of colliding with any other geom.<br><br>Each bit position in the bitfield represents a different category of object. The actual meaning of these categories (if any) is user defined. The category bitfield indicates which categories a geom is a member of. The collide bitfield indicates which categories the geom will collide with during collision detection.<br><br>A pair of geoms will be considered by dSpaceCollide and dSpaceCollide2 for passing to the callback only if one of them has a collide bit set that corresponds to a category bit in the other. The exact test is as follows:<br><br>  // test if geom o1 and geom o2 can collide<br>  cat1 = dGeomGetCategoryBits (o1);<br>  cat2 = dGeomGetCategoryBits (o2);<br>  col1 = dGeomGetCollideBits (o1);<br>  col2 = dGeomGetCollideBits (o2);<br>  if ((cat1 &amp; col2) || (cat2 &amp; col1)) {<br>    // call the callback with o1 and o2<br>  }<br>  else {<br>    // do nothing, o1 and o2 do not collide<br>  }<br><br>Note that only dSpaceCollide and dSpaceCollide2 use these bitfields, they are ignored by dCollide.<br><br>Typically a geom will belong only to a single category, so only one bit will be set in the category bitfield. The bitfields are guaranteed to be at least 32 bits wide, so the user is able to specify an arbitrary pattern of interactions for up to 32 objects. If there are more than 32 objects then some of them will obviously have to have the same category.<br><br>Sometimes the category field will contain multiple bits set, e.g. if the geom is a space them you may want to set the category to the union of all the geom categories that are contained. <br><br></td></tr></table><br>
<a name="532001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the suggestion Wayne :)<br><br>I'm not sure it will be necessary because...<br><br>I *might* have just cracked it!!!<br><br>I've just had spheres, cubes and cylinders colliding correctly with a mesh using a new concept of defining the TriMesh.<br><br>I'm pretty sure this is for real, so begin to get excited :)<br><br>More tests are needed, I'm going to try and apply the new method to the Trimesh car demo and see if I can get it to work with that. If that works then it's party time.<br><br>PS. Woot! <br><br></td></tr></table><br>
<a name="532014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woohoo ! thats the best news I've heard all day! I'm getting my party stuff ready now.. The good side to all this is you always learn more when you make mistakes.<br><br>8)<br><br>I'm trying out different physics editors and coming up with some concepts for a new one. <br><br>I like your clean coding style by the way, and really appreciate how close the wrapper stays true to ODE documentation.<br><br>Thanks for the effort. <br><br></td></tr></table><br>
<a name="532025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers mate, I find untidy code is too confusing :)<br><br>The odd thing is, the wrapper doesn't seem to be at fault, something else is causing this problem. Maybe the compiler? It wouldn't surprise me, I really hate C++.<br><br>I've also wrapped the full TriMesh build function that was giving MAV's before. It doesn't seem to give any benefits to the simple function though.<br><br>The full dGeomTriMeshDataBuild() function in the docs is obsolete now, I'm not sure when it was dropped but it looks like they've forgot to update them.<br><br>The new ones are dGeomTriMeshDataBuildSingle() and dGeomTriMeshDataBuildSingle1(). I've only wrapped the first one for now.<br><br>Anyway, I'd better get back to the grindstone... <br><br></td></tr></table><br>
<a name="532467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are there any demos with varying friction and restitution per object?<br><br>As I understand it, responses need to be created per collision, determning which objects have collided and creating the approproate response, unlike Tokamak where the engine has inbuilt friction and restitution. Collisions create joints, and one has to manual create responses, right? Wayne's old Sphere's Demo applies forces based on joints, but changing restitution doesn't create a bounce response.<br><br>Looking at the demos with JV-ODE I've been able to make the objects bouncy say, but haven't found how to create different materials like 'Ice' and 'Rubber' to apply to individual ojects.<br><br>Are there any such demos?<br><br>IS there anywhere describing JV-ODE's unique functions too, like dContactSetBounce()? Where can I read what this does and how to use it? It's not in the ODE .pdf. <br><br></td></tr></table><br>
<a name="532528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> C'mon matie :D I cant wait for the trimesh to be fixed... Its causing hell :) <br><br></td></tr></table><br>
<a name="532571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Are there any demos with varying friction and restitution per object?<br> <br></div><br>Not yet, but if you tell me exactly what you need I'll try to put one together for you.<br><br><div class="quote"> <br>As I understand it, responses need to be created per collision, determning which objects have collided and creating the approproate response, unlike Tokamak where the engine has inbuilt friction and restitution. Collisions create joints, and one has to manual create responses, right?<br> <br></div><br>ODE determines which geoms have collided during each time step, a contact joint is then applied to create the appropriate response. This is done automatically within the wrapper so you don't need to create a manual response. The process takes into account all contact settings like friction on each individual geom that has collided.<br><br><div class="quote"> <br>Looking at the demos with JV-ODE I've been able to make the objects bouncy say, but haven't found how to create different materials like 'Ice' and 'Rubber' to apply to individual ojects.<br> <br></div><br>It sounds like you're setting the global (or world) contact settings. JV-ODE allows you to set these contacts for each individual geom. For example, if you have 20 spheres, you can set 1 sphere to be bouncy and the other 19 to not bounce if you wish. You can set these using the Geom Contact Functions - see the ode.decls file for the list of functions.<br><br><div class="quote"> <br>IS there anywhere describing JV-ODE's unique functions too, like dContactSetBounce()? Where can I read what this does and how to use it? It's not in the ODE .pdf.<br> <br></div><br>Those functions allow you to manually set the default contact joint surface parameters used in the internal wrapper collision routines I mentioned above. They are described in section 7.3.7 of the PDF manual. For example, dContactSetBounce() would be used to set the default dContactBounce parameter of the contact joints.<br><br>@Cygnus: I'm doing my very best :) I would advise you sphere wrap stuff instead as the original ODE TriMesh doesn't handle cube and ccylinder collisions very well at all. They're also very slow in comparision. What do you need them working for, is it the car bodies when they overturn etc? If so, you'll find sphere wrapping the car body is the fastest solution. Let me know if you need any help with this :) <br><br></td></tr></table><br>
<a name="532604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R,<br><br>I found this article that may solve the trimesh collision problem.<br><br><a href="http://www.delta3d.org/forum/print.php?id=741&amp;forum=14" target="_blank">http://www.delta3d.org/forum/print.php?id=741&amp;forum=14</a> <br><br></td></tr></table><br>
<a name="532605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Shifty Geezer,<br>As soon as the trimesh is resolved I'll knock up a snowboard demo and have it react against the textures it goes over.<br><br>I'm thinking Snow, Ice, water, grass , dirt, pavement.<br><br>8) <br><br></td></tr></table><br>
<a name="532612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers for the article Wayne, I've read it and from what I understand they couldn't get collisions on a TriMesh at all because the TriMesh was being created at a completely different location in the world space. It was due to the mesh vertices information being misinterpreted by the ODE build process. I don't think that's applicable here because our TriMesh is located correctly, hence the spheres colliding properly. But I'll look into it anyway, thanks ;)<br><br>Did you try the TriMesh test demo I sent you btw?<br><br>It showed cubes, ccylinders and spheres all colliding correctly with the multiple TriMesh strips. The TriMesh used in that demo was made up of 4 vertices for every 2 triangles, whereas the terrain.b3d mesh included with JV-ODE has 6 vertices for every 2 triangles. If you change the CreateTriMesh function for the one included in the TriMesh car demo, you'll see the deformation of the collision areas which oddly don't affect the spheres. <br><br></td></tr></table><br>
<a name="532628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just realized I've only got version 1.0 here at work, maybe if you get a few min you can send me out version 1.01. I look forward to checking it out.<br><br>So your saying this new test does 4 vertices for every 2 triangles to form a quad. Each new quad is arranged like a checker board to form the mesh ? <br><br></td></tr></table><br>
<a name="532634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem, I'll send it for you shortly.<br><br>[edit] Ok, sent - check your inbox ;)<br><br>Yep, the test doesn't load a mesh, I've created one manually using 4 verts and 2 tris for each quad, then each quad is assembled like a checker board. This was to test if different mesh formats were affecting the TriMesh build process.<br><br>Give the test a whirl and let me know your thoughts on it :) <br><br></td></tr></table><br>
<a name="532642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would your routine be happy with 31 x 31 verts connected with triangles to form 32x32 quads. One would make multiple meshes like that for ode to form the landscape mesh. They would fit nicely into bounding boxes. Blitz3d meshes would be the same except each quad would have it's own four verts instead of sharing ( makes uv tile mapping easier ).<br><br>On a different note it drives me crazy that the other ODE wrapper appears to handle trimesh. <br><br>I know Mark has looked at ODE, and possibley BMAX will incorporate ODE. I wonder if any of these other experts would share their secrets.<br><br>* maybe when they say triangle soup they mean alphabet soup <br><br></td></tr></table><br>
<a name="532691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Would your routine be happy with 31 x 31 verts connected with triangles to form 32x32 quads.<br> <br></div><br>I'm not sure, you should be able to try it out by modifying the test I sent over. Create the mesh how you described, then work out the verts and tris for each strip and add the info to the CreateTriMesh function (vcount/tcount and vertrows).<br><br>I've compared the JV-ODE TriMesh source to the KODE TriMesh source (which KuRiX kindly supplied) but they're almost identical which means the problem must lie elsewhere. The only major difference I can see is the compiler used to make the dll. <br><br></td></tr></table><br>
<a name="532721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get dgeomcountcollisions not found <br><br></td></tr></table><br>
<a name="532731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you replace the ode.decls in the Blitz3D userlib folder? <br><br></td></tr></table><br>
<a name="532832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got the right decls in there now, off testing. <br><br></td></tr></table><br>
<a name="533047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the good news is I've sussed out how this engine works in the main. I can even create different masses for objects. Things I can't figure out...<br><br>1. Per object friction/restitution. I've used dGeomSetContactBounce() at object creation but it seems to make no difference<br><br>2. Centering COG. Best I can tell COG is placed in the corner of a cube (0,0,0), not the centre (x/2, y/2, z/2). There's a matric thing to define COG position, but it has interia values as well. What do these mean?<br><br>3. How does Mu and Restitution work? From college maths Mu is a frictional coeffecient ranging from 0.0 to 1.0 representating amount of energy lost, and likewise Restitution. Restitution seems to work right, but Mu doesn't, needing a value of 10.0 to get something reasonable once I add a bit of mass.<br><br>Also how do the different contact modes work (dContactBounce, dContactSlip1), the use of the functions dSetContactMotion1/2(), and what's the difference between Mu1, Mu2 etc. Why are there two versions of each function?<br><br>Anyway, I'll attached my test program here. What I'm hoping for (a system I used with Tokamak) is a definition of materials in a material type. I can create say ice=New Material and set it's properties for density, friction and restitution, and then whenever I create an object I can apply these settings to it.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">; # Introductory ODE code
; # By Shifty Geezer

Include "ode.bb"
Graphics3D 800,600,0,2

Type ODE_material
	Field friction#
	Field restitution#
	Field mass#
End Type

Type ODE_object
	; An ODEGeom object contains a body, collion geom, and pointer to Blitz mesh
	Field body
	Field geom
	Field mesh
	Field mat.ODE_material
	Field mass
End Type

; HOW ODE WORKS
; ODE divides physics objects into two components.
; There's the collision mesh which defines surfaces that can collide (geom)
; and a physical properties volume that defines centre of gravity, friction, resitution (bounce) etc. (body)

; Create ODE universe
; These lines establish the working environment for ODE
Global ODE_world=dWorldCreate()
Global ODE_space=dHashSpaceCreate(0)
Global ODE_contactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(ODE_world,1)			; Turn on auto disable
dWorldSetGravity(ODE_world,0,-3,0)			; Gravity in m/s/s
dWorldSetERP(ODE_world,0.2)						; Global 'error correction'

; Set default reaction to Bounce
;dContactSetMode(dBounce)
dContactSetMode(dContactBounce)
dContactSetBounce(0.50)

; Set default friction
dContactSetMu(10.0)

;# Create objects
SeedRnd(MilliSecs())

For n=0 To 20
	; Create ODE object to define object's properties
	obj.ODE_object=New ODE_object
	
	; Create a physics body and specify which world it occupies
	obj\body=dBodyCreate(ODE_world)
	
	; Positon and orientation of physics body
	dBodySetRotation(obj\body,Rnd(-30,30),Rnd(-30,30),Rnd(-30,30))
	dBodySetPosition(obj\body,Rnd(-30,30),40+Rnd(0,100),Rnd(-30,30))
	
	; Enable auto-disabling
	dBodySetAutoDisableFlag(obj\body,1)	
	
	; randomise sizes
	x#=3+Rnd(0,3)
	y#=3+Rnd(0,3)
	z#=3+Rnd(0,3)
	
	; Create collision geometry for the created physics body. This takes the position+orientation of the body
	obj\geom=dCreateBox(ODE_space,x,y,z)
	dGeomContactSetBounce(obj\geom,100)
	dGeomContactSetBounceVel(obj\geom,100)

	; Add collision geometry to out ODE object
	dGeomSetBody(obj\geom,obj\body)
	
	; Add mass to the object
	obj\mass=dMassCreate()
	dMassSetBox(obj\mass,Rnd(0.01,0.05),x,y,z)
	dBodySetMass(obj\body,obj\mass)
	dMassCenter(obj\geom)

	; Create visible mesh for Blitz to render
	obj\mesh=CreateCube()
	
	; Blitz uses double sizes compared to ODE, so lengths must be halved
	ScaleMesh obj\mesh,x/2,y/2,z/2
	EntityColor obj\mesh,Rnd(255),Rnd(255),Rnd(255)
Next	; boxes
	
; Static Ramp
; This follows the same lines as the object creation above
; However, we don't create an ODE body, only a collision mesh
; This means the mesh isn't influenced by physics interaction
; - it doesn't move by gravity or collisions
obj.ODE_object=New ODE_object
obj\geom=dCreateBox(ODE_space,80,20,80)
dGeomSetRotation(obj\geom,-15,0,0)
dGeomSetPosition(obj\geom,-0,10,0)

; Add visible Blitz mesh
obj\mesh=CreateCube()
ScaleMesh obj\mesh,40,10,40	; Mesh scale is half Geom scale
RotateMesh obj\mesh,0,0,0		; Don't worry about setting position as this is matched to
PositionMesh obj\mesh,0,0,0		; ODE Geom with update Geom

RotateEntity obj\mesh,dGeomGetPitch#(obj\geom),dGeomGetYaw#(obj\geom),dGeomGetRoll#(obj\geom)
PositionEntity obj\mesh,dGeomGetPositionX#(obj\geom),dGeomGetPositionY#(obj\geom),dGeomGetPositionZ#(obj\geom)

EntityColor obj\mesh,100,100,255
EntityAlpha obj\mesh,1

; Create a floor
; Creates an ODE floor in the specifed world collision space.
; The values define a unit vector for the direction of the plane
; In this case (0,1,0) is pointing straight up
dCreatePlane(ODE_space,0,1,0,0)
Plane=CreatePlane()	; Blitz mesh
EntityColor plane,120,120,120
	
; Blitz scene stuff, camera and lights. Very boring
;#Region Camera Lights
; ### Create light
light1=CreateLight()
RotateEntity light1,45,-90,0
LightColor light1,255,255,255
AmbientLight 130,130,130

; ### Create camera
pivot=CreatePivot()
pivot2=CreatePivot(pivot)
cam=CreateCamera(pivot2)
PositionEntity cam,0,10,-170
TurnEntity pivot,0,15,0
TurnEntity pivot2,25,0,0

;#End Region

While Not KeyHit(1)

	; UpdateGeoms() - convenient to put into a function but shown here in the main loop
	For ode.ODE_object=Each ODE_object
		If ode\body

			; If the ODE object has a defined body
			If dBodyIsEnabled(ode\body)

				;If body is enabled, position and orientate the visible mesh with the object's ODE geom and colour it green
				RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
				PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
				EntityColor ode\mesh,0,200,100
			Else

				; otherwise just colour it red to show it's disabled
				EntityColor ode\mesh,200,0,100
			End If
		End If
	Next

	; Perform collisions, supplying the world, space, and collision data
	dSpaceCollide(ODE_space,ODE_world,ODE_contactGroup)
	
	; Advance the simluation
	dWorldQuickStep(ODE_world,0.1)
	
	; Clear collion data
	dJointGroupEmpty(ODE_contactGroup)

	; Boring camera controls
	; Use cursor keys to rotate camera
	If KeyDown(203)
		TurnEntity pivot,0,1,0,0
	Else If KeyDown(205)
		TurnEntity pivot,0,-1,0,0
	EndIf
	If KeyDown(200)
		TurnEntity pivot2,1,0,0,0
	Else If KeyDown(208)
		TurnEntity pivot2,-1,0,0,0
	EndIf

	UpdateWorld
	RenderWorld

	Flip

Wend

; Destory all the ODE stuff
dJointGroupDestroy(ODE_contactGroup)
dSpaceDestroy(ODE_space)
dWorldDestroy(ODE_world)
dCloseODE()

End</textarea> <br><br></td></tr></table><br>
<a name="533050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>is it the car bodies when they overturn etc<br> <br></div><br><br>Nope, but spherewrapping would be excelent. WOuld it be as simple as adding spheres to the car body mesh at each relative corner, kind of forming a convex err.... thingy?... hull?<br><br>Thats how i'll do it i think. With the original ODE i managed to have a single sphere, ONE, to do every roof colision for every car, by repositioning it and using tformpoint to add the resultant force to the actual car body.<br><br>Pain in deh arse. hehe :)<br><br><br>actually i recon spherewrapping would be the way forward for me anyway. thabnks :D <br><br></td></tr></table><br>
<a name="533086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey Viper. While making some tests i have noticed that if the CCYLinder is on a different space than trimesh they do not collide properly, although spheres do.<br><br>Be sure to have all the geoms in the same space in your tests. <br><br></td></tr></table><br>
<a name="533089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Shifty Geezer: Hmm, you need to study the docs a little more me thinks ;)<br><br>1) It works ok, but you do need to use it correctly. Bounce restitution ranges from 0.0=no bounce to 1.0=max bounce. You have it set at 100 :S - look at section 7.3.7 of the docs for more info on the contact settings.<br><br>2) No, unless I'm mistaken the point of reference for the center of gravity is at the center of the geometry (0,0,0) not the corner. Check sections 9.2 and 10.7.1 of the docs for more info.<br><br>3) Yep, Mu is the coulomb friction coefficient but it ranges from 0.0=no friction to Infinity=max friction - not 0.0 to 1.0 - again check section 7.3.7 of the docs for more info.<br><br>Mu and Mu2, Slip1 and Slip2 etc represent two different contact directions if needed. Normally you only need one direction Mu, Slip1 etc. Yep, you guessed it, check section 7.3.7 of the docs for more info ;)<br><br>One more thing, you have the gravity set at -3, this is over 3 times the value of 'real' gravity. The real gravity setting would be -0.98 (rounded up).<br><br>Download the docs and have a good read, most of the answers you'll need can be found in there and it'll all make much more sense then. If you have any more questions please let me know, I'll be glad to help :)<br><br>@Cygnus: Yep, simply adding spheres where ever you need collision responses for the TriMesh on the car body would work fine. With those minis, you could probably create a large sphere in the center of the car, then one sphere on each corner.<br><br>The beauty of sphere wrapping is the level of control you have for speed vs collision resolution. Whereas standard TriMesh&gt;cube responses can be overkill for most situations.<br><br>Also, there is another major advantage... the cars won't accidently 'snag' on the terrain, whereas cube&gt;TriMesh collisions are prone to this problem.<br><br>Check up there ^^^ for the sphere-wrapping demos ;) <br><br></td></tr></table><br>
<a name="533093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> @KuRiX: Oh, crumbs... that could well be the problem, I'll look into it right away. Thanks very much for the suggestion, you're a diamond :) <br><br></td></tr></table><br>
<a name="533170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> We using op code tri collider ?<br><br><a href="http://q12.org/cgi-bin/wiki.pl?TriangleCollider" target="_blank">http://q12.org/cgi-bin/wiki.pl?TriangleCollider</a> <br><br></td></tr></table><br>
<a name="533176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R can we get dterrain in the oed dll and wrapper ?<br><br>Reply Quoting This MessageEdit Message NoahAdler    Member since: 4/22/2000  From: Lexington, United States<br>Posted - 2/11/2005 10:30:58 PM<br><br>For heightmapped terrains, ODE also offers a collider named dTerrain which essentially builds a terrain by using rays at the given point to push an object up. I've used this collider with great success, though some people prefer to use the trimesh for various reasons. This collider is offered in the 'contrib' directory of the ODE repository, and requires some (very slight) manually patching of the source.<br><br>//www.gamedev.net/community/forums/topic.asp?topic_id=300188 <br><br></td></tr></table><br>
<a name="533546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sweet. I dont think i need to kep 48 cars running so fast, so this may work :)<br><br><br>Thanks, <br><br></td></tr></table><br>
<a name="533584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> @VIP3R: Well, reading the docs isn't always good. For example, you tell me <br><br>"One more thing, you have the gravity set at -3, this is over 3 times the value of 'real' gravity. The real gravity setting would be -0.98 (rounded up)."<br><br>But the docs say "Set and get the worlds global gravity vector. The units are m/s/s, so Earths gravity vector would be (0,0,-9.81), assuming that +z is up. The default is no gravity, i.e. (0,0,0)."<br><br>I tried the manual's suggestion (0,-9,81,0) and it was too much, so just experimented to find something that looked right. Hence the manual was no help :D<br><br>Seriously though, I did read the docs, but before I had the full JV-ODE, so I haven't worked through it and need to take another look. A lot of stuff I thought it didn't have as it's not in the index (dContactBounce for example) but I see it's just buried in all the techno mumbo-jumbo and I'll work through it again.<br><br>There were some explerimental figures in my example so just ignore things like bounce=100!<br><br>For the Mass COG, I didn't understand the manual's definition exactly. I thought (cuboid) volumes start at (0,0,0) and end at (x,y,z), hence thought the COG was in the top corner. On closer inspection it suggests the COG is cetered at the centre of the body it's applied to.<br><br>Regards friction I think my maths was just too rusty to remember the limits ;)<br><br>"Normally you only need one direction Mu, Slip1 etc. Yep, you guessed it, check section 7.3.7 of the docs for more info ;)"<br><br>Thanks for the pointer. It seems Bounce includes friction responses too, as using just specifying dContactBounce for the world, Mu value still affects object sliding, so there's no need to specify Slip and Bounce contact types.<br><br>"If you have any more questions please let me know, I'll be glad to help :)"<br><br>A little experimenting and I see I can use dGeomContactSetBounce() and dGeomContactSetMu() AFTER calling dSpaceCollide(). I guess that creates the contacts and then one sets the properties for them. Presumably then to apply per object properties, one needs to sort through the contacts created from the dSpaceCollide() function. Won't this require considering both colliding surfaces' properties? And how does one differentiate between each contact?<br><br>I'm kinda talking here. I'll get back to my investigations, though if anyone has any pointers to make my life easiers, I wouldn't grumble! <br><br></td></tr></table><br>
<a name="533706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Wayne: Yep, we're using opcode tri collider. I'm not very comfortable with using dTerrain as it requires hacking part of the lib to get it working. I think it would be better to use the opcode tri collider (TriMesh), as hacking the lib may cause all sorts of collision problems elsewhere.<br><br>@Shifty Geezer: Apologies, it does say -9.81 in the docs. I found it was better to divide the gravity by 10 (-0.981) and multiply the mass by 10. This made the simulation more stable for me (less twitchy). You should be able to use dGeomContactSetBounce() etc at the point of creating the geom rather than after the dSpaceCollide function. The geom contact settings are averaged with the global world contact settings in the dSpaceCollide function. So both surface properties are considered within the function. ( i.e. SurfaceProperty=GeomContact+GlobalWorldContact/2 ) I would have had some demos showing this but most of my time has been used to address the TriMesh issues. I've also got plans to build some detailed collision demos too.<br><br>@KuRiX: Hmm, it looks like the TriMesh is created in the correct space, so that doesn't appear to be the problem either. I'll continue investigating though ;) <br><br></td></tr></table><br>
<a name="533711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> "@Shifty Geezer: You should be able to use dGeomContactSetBounce() etc at the point of creating the geom rather than after the dSpaceCollide function."<br><br>Okay. Having tried this I've got no results. I'll just wait 'til one of the boffs (you or Wayne et al) tackles the issue and shows me where I'm going wrong ;) <br><br></td></tr></table><br>
<a name="533756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reason you seem to get results from adding it after the dSpaceCollide function is because you're actually changing the ramp geom bounce (as it was the last geom created in your code). Try adding dGeomContactSetBounce(obj\geom,1) immediately after creating the ramp geom in your code and you'll see what I mean.<br><br>Try experimenting with the Demo-Rope.bb included with the wrapper and insert 'dGeomContactSetBounce(ode\geom,bounce)' into the AddObject() function using different values for the bounce (0.0 to 1.0) to see it working correctly. <br><br></td></tr></table><br>
<a name="533763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> At first I tried the dGeomSetContactBounce() after geom creation as you suggested and it had no effect - hence my confusion. But more experimentation has shown it works as it should EXCEPT on a plane - dCreatePlane(ODE_space,0,1,0,0).<br><br>Setting per object bounce to 1.0 has no bouncing when they land on a plane. Whereas global Bounce affect everything including plane. Which is where I couldn't fathom it as my tests were dropping objects onto a plane!<br><br>I've just found that rather than calling dCreatePlane(ODE_space,0,1,0,0) as it's used in the JV-ODE demos, I should assign it's results to a variable and I can handle it's geometry, so<br><br>ground_geom = dCreatePlane(ODE_space,0,1,0,0).<br>dGeomSetContactBounce(ground_geom, restituion) works.<br><br>Woohoo! <br><br></td></tr></table><br>
<a name="533773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ask Viper what the wrapper does when you set the bounce for 2 geoms that collide.Which one uses? <br><br></td></tr></table><br>
<a name="533829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Shifty Geezer: I had no idea you meant the plane, your test above drops boxes onto another box instead of the plane... hence my confusion too :)<br><br>As you've discovered you can treat the plane just like any other static geom. Anyway, glad you've got it working how you wanted now ;) Take note of the following though...<br><br>@KuRiX: Well, it *should* be using an average of both like this...<br>totalbounce = geom1bounce + geom2bounce / 2<br><br>BUT... there is a bug in the wrapper which I've spotted. V1.01 is doing this...<br>totalbounce = geom2bounce + geom2bounce / 2<br><br>Bah, nice one Jedive ;) (hehe only kidding)<br><br>It's already on my todo so expect it to be fixed in V1.02. <br><br></td></tr></table><br>
<a name="533845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> you mean: totalbounce = (geom1bounce + geom2bounce) / 2 <br><br></td></tr></table><br>
<a name="533852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I was talking in english not code...lol ;) <br><br></td></tr></table><br>
<a name="534229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> How far away are vs 1.02 ?<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="534238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, it has all been dependent on the TriMesh progress, but I'm having severe difficulties getting that problem resolved. I can't recompile the very latest CVS ODE source in Dev-C++, so that's giving me a real headache. So much in fact that I'm currently trying to rewrite the wrapper using VC++ instead which itself is a daunting task.<br><br>I need to do a few more experiments with the VC++ compiler first, but if it looks like the TriMesh (rebuild) could take a while I'm going to release V1.02 either at the end of next week or very soon after. The new update will contain a fix for the contacts bug mentioned above and I'll try and get some new demos in there too, like a detailed collisions demo. I'm going to look at the cylinder alignment problem too (in the known issues ^^). <br><br></td></tr></table><br>
<a name="534242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, Thanks for the info.<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="534260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe Kurix or Mark could compile it for you ?<br><br>lol<br><br>sorry, I know it must be flustrating. <br><br></td></tr></table><br>
<a name="534263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can send the latest csv ode .lib compiled to Viper. Do you want it? Send an email if so Viper! It is only 1.2MB <br><br></td></tr></table><br>
<a name="534265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey ViP3r,<br>Any chance you caould try making a demo using multiple spaces? I keep getting MAV's when stuff collides and I'm using spaces.<br><br>Thanks <br><br></td></tr></table><br>
<a name="534481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Wayne: The only way the lastest CVS stuff will compile properly with Dev-C++ is to hack the new ode lib files to make them compatible with the compiler. Mingw simply will not compile the new code, try it yourself if you like ;) - (KuRiX uses VC++ btw not Dev-C++)<br><br>I'll try to make a multiple space demo, no promises though.<br><br>@KuRiX: Thanks mate, I'll email you later :) <br><br></td></tr></table><br>
<a name="534486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> Multiple Space has sense if the callback is properly made. For example, the docs say that a good example is to have each car in one space. Suppose one car composed of the chassis (a box) and 4 wheels (spheres) joined with hinge2. <br><br>In the callback function normally there is a rule that if two bodies are joined by a joint then no collision is made. But, the wheels are not joined directly, so collision between wheels of the same car are checked (or at least its bounding boxes)!.<br><br>Then, you can put every car in a space, and that spaces into a parent space. Then in the callback check for collision between objects of different spaces. This creates a bounding box for every space, not checking for collisions if the bounding boxes are not near enough.<br><br>Anyway, the callback will check then for collisions in the same space, so the wheels will check collisions for the same car. In my racing game i have changed the collision callback, so objects in the same space are not checked. Although usually this is not a good idea.<br><br>So, in a general idea:<br><br>You create the main space.<br>SPACE = dHashSpaceCreate(0)<br><br>Then you create a subspace for every car (suppose 2):<br>space1 = dHashSpaceCreate(SPACE)<br>space2 = dHashSpaceCreate(SPACE)<br><br>Then:<br>CreateCar(1,space1)<br>CreateCar(2,space2)<br><br>And in the main loop:<br>dSpaceCollide(SPACE,world)<br>dWorldQuickStep(step)<br>etc...<br><br>But in this case the collision callback should be like:<br>void nearcallback(geom o1,geom o2, data)<br><br>if (dGeomisSpace(o1) || dGeomisSpace(o2))<br>  dSpaceCollide2(o1,o2);<br>  if (dGeomiSSpace(o1)) dSpaceCollide(o1);<br>  if (dGeomiSSpace(o2)) dSpaceCollide(o2);<br>else<br>{<br> // GENERATE CONTACT FOR o1 and o2<br>}<br><br>Ok? <br><br></td></tr></table><br>
<a name="534549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#140">[#140]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers for the info KuRiX, I'll have to check the wrapper source and see what it's doing (Jedive coded the multiple space stuff).<br><br>I'll be away from the computer from later today until Sunday 19th, so I'll get straight back onto it then. See you later all :) <br><br></td></tr></table><br>
<a name="534637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#141">[#141]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Kurix,<br>The code I used looked alot like what you posted above, but I used cubes instead of cars. I was getting a MAV when the collisions happened. I'll post the code a bit later ( it's on a different machine ).<br><br>VIP3R, I'm not a pro C programmer or I'd offer to help. I can read and write some C code. I'll leave the C code to you guys, unless you want me to look at the source. <br><br></td></tr></table><br>
<a name="536760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#142">[#142]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, I'm finding adding masses to objects problematic the moment cylinders are involved. I can create cubes with masses that work okay, and shere with masses that work okay, but cylinders do funny things. I can either have them colliding and falling okay, but bouncing like super-bouncy rubber, or they land more realistically but don't roll off the edge so much as 'drop off', floating in mid air until all of the cylinder is over the edge fo the object defore dropping.<br><br>Trying to recreate the problem in a simpler application is tricky - it shows some of these bugs but they're very intermittent, and I don't get the same suprt-bouncy objects (which I get even with every restitution set to zero)<br><br>Has anyone else had problems with cylinders? <br><br></td></tr></table><br>
<a name="536779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rhyolite</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#143">[#143]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try making the cylinders body into a sphere, but keep the collision geom as a cylinder. Also, do not use excessively different masses between joined bodies (eg. use 0.1 and 1.0 or 1 and 10 at most).<br><br>Maybe one of those helps,<br>Rhy :) <br><br></td></tr></table><br>
<a name="536849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#144">[#144]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't got any joined bodies (apart from contant joints, if that counts too?). I've read about the mass limitation suggestion though it doesn't seem to affect cubes/spheres. I've got different materials with different properties and objects of different sizes, and a large Gold block is going to weight a hell of a lot more than 10x a small wodden cube!! Do cylinders have a peculiar limitation?<br><br>Another unrelated point - How do you balance the settings between different platforms? On a 500 MHz K6 I used<br><br>.     dWorldSetGravity(ODE_world,0,-2,0)<br>.     dWorldSetERP(ODE_world,0.2)<br>.     dWorldSetCFM(ODE_world,0.0000001)<br>.     dWorldQuickStep(ODE_world,0.50)<br><br>with good results, but those same settings on my development PC (AthlonXP 2500) are insanely quick and the physics objects just pass straight through without colliding. Changing to...<br><br>.      dWorldQuickStep(ODE_world,0.015)<br><br>Works okay, but how can you set the ODE update speed according to system specs? Note I'm using tweened rendering...<br><br><pre class=code>For k=1 To ticks
		time=time+PERIOD
		If k=ticks Then
			CaptureWorld

			For ode.ODE_object=Each ODE_object
				If ode\body
					If dBodyIsEnabled(ode\body)
						RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
						PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
					End If
				End If
			Next
		EndIf
	
	Next</pre><br>Limiting the refresh rate to screen updates, I need to increase QuickStep timestep to get the same speed of objects, but that loses accuracy. <br><br></td></tr></table><br>
<a name="536858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rhyolite</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#145">[#145]</a></td></tr></table></td></tr><tr ><td class="posttext"> The shape of a physics body only effects mass distribution, so try changing your cylinder body to a sphere which is far more stable. You still keep your geom and mesh as a cylinder, so collides and looks the same and I bet you wont even notice the different body ;)<br><br>You need to use a fixed update rate, which should be independant to your screen refresh rate (ie. similar to delta timing or render tweening).<br><br>Rhy :) <br><br></td></tr></table><br>
<a name="537280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#146">[#146]</a></td></tr></table></td></tr><tr ><td class="posttext"> Smart thinking Rhyolite! That fixes the trouble with Cylinders passing through my shelf. They still bounce crazily though.<br><br>On more testing, using<br><br>.     dMassSetCylinder(v,obj\mat\density,X, radius,length)<br><br>where X = 0 causes the cylinders to pass through the shelf. Using X = 1 solves that. Mass obviously has some impact on collision responses. I think I really need one fo the experts to provide example 'different materials + objects' collision code before I can determine what works and what<br>doesn't. Just please be sure to add cylinders Wayne/VIP3R/et al!! <br><br></td></tr></table><br>
<a name="537732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#147">[#147]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick Update:<br><br>Nearly finished the new update, expect it to be released over the coming weekend sometime.<br><br>Fixes in V1.02 (so far)<br>Geom surface contact bug fixed<br>Multiple space MAV issue fixed<br>Userlib function not found issue resolved<br><br>New demos...<br>CarDemo - Detailed Collisions<br>CarDemo - Multiple Spaces<br>Demo - Geom Bounce<br>Demo - Geom Friction<br>Demo - Sphere Wrapped Capped Cylinders<br>Demo - Sphere Wrapped Cubes<br>Demo - Sphere Wrapped Cylinders<br><br>More soon... :) <br><br></td></tr></table><br>
<a name="537788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#148">[#148]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wayhay!!<br><br>How's the evil mesh bug going? <br><br></td></tr></table><br>
<a name="538091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#149">[#149]</a></td></tr></table></td></tr><tr ><td class="posttext"> Me again! I'm getting problems with using an external library of functions. I've got an include file with setup functions for ode objects and meshes. I declare global ODE_World, Space and so forth in this file.<br><br>In the main program I create the ode world (dWorldCreate() etc). I have an array of objects that when I create them accessing my included functions, they exist. I call my function ODE_Setup(), use 'a#=dGeomGetPositionX#(objects(0)\geom)' and get a value for the first ODE objects X position.<br><br>This is fine and dandy until I advance the simulation with dWorld(Quick)Step(). The moment I call this function, 'dGeomGetPositionX#(objects(0)\geom)' = NaN.<br>'Objects(0)\geom' exists, but it has no position or rotation.<br><br>This, unsurprisingly, leaves me confused! <br><br></td></tr></table><br>
<a name="538129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#150">[#150]</a></td></tr></table></td></tr><tr ><td class="posttext"> Outstanding VIP3R.<br><br>Post the troublesome code Shifty.<br><br>Trying to decide what physics engine to use makes me crazy. <br><br></td></tr></table><br>
<a name="538202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#151">[#151]</a></td></tr></table></td></tr><tr ><td class="posttext"> The 'evil mesh' bug is a &lt;enter expletive&gt; :)<br><br>The only two known bugs that remain are:<br> * The TriMesh cube/ccylinder bug - working on recompiling JV-ODE using the latest stable CVS releases, hopefully this will cure the problem.<br> * The capped cylinder alignment bug - haven't found a decent way to correct this from within the wrapper yet. Although it's <b>very</b> easily fixed from within the Blitz code using...<br>RotateMesh ode\mesh,90,0,0<br><br>Both of these bugs appear to be within the ODE source code somewhere, I've seen nothing wrong in the wrapper source code itself.<br><br>I'm going to release V1.02 before tackling these two bugs as I have no idea how long it will take to nail 'em. I trust you folks are ok with that?<br><br>I'll post as soon as it's ready ;) <br><br></td></tr></table><br>
<a name="538316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#152">[#152]</a></td></tr></table></td></tr><tr ><td class="posttext"> EDIT : Code deleted.<br><br>All my fault! I was using code copied from the main in the library, that referenced variables x,y,z which hadn't been created/assigned a value. This result in objects of size 0,0,0! <br><br></td></tr></table><br>
<a name="538436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#153">[#153]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>JV-ODE Physics Wrapper - Version 1.02 Released</b><br><br>Check your inbox for details :)<br><br>Hope you like it ;) <br><br></td></tr></table><br>
<a name="539067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#154">[#154]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whatya got new in 'ere? I cant play with it yet &gt;.&lt;<br><br><br><br>Gonna make Kurix's editor plug with this.... That should be fun for my newer projects :) <br><br></td></tr></table><br>
<a name="539278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#155">[#155]</a></td></tr></table></td></tr><tr ><td class="posttext"> Version 1.02<br><br>Fixed geom surface contact issue<br>Fixed multispace MAV issue<br>Fixed 'Userlib function not found' issue<br><br>Added dRegisterODE() function  - the DLL is now registered via the 'JV-ODE.bb' include file<br>Added dSetInternalSpaceCollideMode(mode) function  - enable or disable internal space collisions<br>Added dGetInternalSpaceCollideMode%() function  - get internal collide mode ( 0 = disabled   1 = enabled )<br>Added dGeomTriMeshDataBuildSingle() function  - alternative TriMesh function without normals<br>Added dGeomTriMeshDataBuildSingle1() function  - alternative TriMesh function with normals<br><br>Added Demo-GeomBounce  - how to setup bounce per geom<br>Added Demo-GeomFriction  - how to setup friction per geom<br>Added CarDemo-DetailedC  - an example of detailed collisions<br>Added CarDemo-MultipleSpace  - an example of multiple spaces<br>Added CarDemo-SphereWrapCCylinder  - capped cylinder to TriMesh collision workaround<br>Added CarDemo-SphereWrapCube  - cube to TriMesh collision workaround<br>Added CarDemo-SphereWrapCylinder  - cylinder to TriMesh collision workaround <br><br></td></tr></table><br>
<a name="539279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#156">[#156]</a></td></tr></table></td></tr><tr ><td class="posttext"> checking it out <br><br></td></tr></table><br>
<a name="539324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#157">[#157]</a></td></tr></table></td></tr><tr ><td class="posttext"> That function... dSetInternalSpaceCollideMode... i have seen it before somewhere... xDD <br><br></td></tr></table><br>
<a name="539332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#158">[#158]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, my feelings on that function are similar to yours KuRiX ;)<br><br>I don't see the need for internal sub-space collisions as well as global space collisions. I could have coded it with internal collisions switched off, but letting the user decide is definitely the best option. <br><br></td></tr></table><br>
<a name="539335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#159">[#159]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was only joking :D.<br><br>Yes, this is the better way.<br><br>How about the trimesh problem? nothing? I see that there are some people in the ode community having problems with ccylinder and box vs trimesh, and they are c++ coders!!! So i think that problem must be in the values of the parameters, not the wrapper.<br><br>The other day a friend sent me some .bb code with jv-ode functions to change it to kode + trimesh, and i changed the function names and i needed to change some cfm values to get it properly working...<br><br>Well, good luck! <br><br></td></tr></table><br>
<a name="539339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#160">[#160]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe, I know you were joking :)<br><br>I'm still looking at the TriMesh problem, it's possible that the parameters could be affecting the simulation. One way to tell would be to convert a working KODE TriMesh sample to JV-ODE using the same parameters etc. <br><br></td></tr></table><br>
<a name="540157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#161">[#161]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>JV-ODE TRIMESH FIXED!!!</b><br><br>The TriMesh problem has finally been fixed. ODE boxes and capped cylinders now collide PERFECTLY with a TriMesh!<br><br>JV-ODE V1.03 coming very soon...<br><br>Btw, <b>WOOT!</b> <br><br></td></tr></table><br>
<a name="540160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#162">[#162]</a></td></tr></table></td></tr><tr ><td class="posttext"> JIPPI!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br><br>Great work Vip3r!!!!!!!!!!!!!!!!!!!!!!!!<br><br>/ALienforce <br><br></td></tr></table><br>
<a name="540182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#163">[#163]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent news! And yes, have a WOOT on me :) <br><br></td></tr></table><br>
<a name="540184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PsychicParrot</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#164">[#164]</a></td></tr></table></td></tr><tr ><td class="posttext"> WOOOOOOOT!!!!! :D <br><br></td></tr></table><br>
<a name="540187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#165">[#165]</a></td></tr></table></td></tr><tr ><td class="posttext"> YYYAAAAAAAA   HOOOOOOOOOOOOOOOOOOOOOOOOOO! :D<br><br>Keep up the effort man!<br><br><br>What was the issue? <br><br></td></tr></table><br>
<a name="540188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#166">[#166]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers fellas :D<br><br><b>JV-ODE Physics Wrapper - Version 1.03 Released</b><br><br>Check your inbox for details :)<br><br>Party time! <br><br></td></tr></table><br>
<a name="540191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#167">[#167]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Cygnus: I'll reveal all as soon as I've finished updating everything ;) <br><br></td></tr></table><br>
<a name="540213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#168">[#168]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fantastic!! Well done indeedy!<br><br>BTW How efficient is is TriMesh collision? How much slower is collision with a Tri mesh cube to a normal ODE cube, and how does say a more complex mesh (five sided open box) compare with a collective of primitives (5 ODE Boxes arranged to form the same box)? <br><br></td></tr></table><br>
<a name="540214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#169">[#169]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have to say well done that was one obscure and nasty bug<br><br>cudos to VIP3R ! <br><br></td></tr></table><br>
<a name="540215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#170">[#170]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, the problem wasn't in the wrapper itself. It turned out to be the compiler as I'd suspected, the optimizations performed on the library were corrupting the opcode collision system. It only affects the mingw builds, what a nightmare!<br><br>Turns out the CVS builds had nothing to do with it.<br><br>I've sweat blood to get this working ;)<br><br><div class="quote"> <br>If you're updating from V1.00 or V1.01 please note:<br><br>* You need to replace the 'ode.decls' file with the new 'JV-ODE.decls' file in the Blitz3D userlibs folder.<br> <br>* You also need to replace the 'ode.bb' include file with the new 'JV-ODE.bb' include file, then change the includes in your source code to use "JV-ODE.bb" instead of "ode.bb".<br><br>* The CreateTriMesh() function is now contained within the 'JV-ODE.bb' include file and has a new space parameter - trimesh=CreateTriMesh(space,mesh)<br>You will need to remove any old CreateTriMesh() functions from your own source code.<br><br>* The new 'JV-ODE.bb' include file contains your registration code. Please keep this file confidential.<br> <br></div> <br><br></td></tr></table><br>
<a name="540221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#171">[#171]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Shifty Geezer: The box to TriMesh collisions should be the same speed as box to box collisions. Same goes for capped cylinders too. With 5 boxes forming an open box, the collisions will take 5x as long as a single box (for best results you should put them in their own space with internal space collide switched off). <br><br></td></tr></table><br>
<a name="540281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#172">[#172]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the heads up. Presumably the ODE community is errupting with joyous chanting now the origin of the bug is known? <br><br></td></tr></table><br>
<a name="540357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#173">[#173]</a></td></tr></table></td></tr><tr ><td class="posttext"> Erupts with joyous chanting!<br>   Time to Party !!<br>     *Band plays in the background*<br>         *fireworks exploding overhead*<br><br>V I P 3 R   Y O U   D A   M A N <br><br></td></tr></table><br>
<a name="540392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#174">[#174]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've now managed to optimize the wrapper without any side-effects.<br><br>I'll release another update in a few days, with a new smaller dll.<br><br>I may also add some 'all-in-one' functions to the include file, things like...<br>CreateODEBox(space,px#,py#,pz#,rx#,ry#,rz#,sx#,sy#,sz#,mass#)<br>...that kind of thing. Any suggestions on this? <br><br></td></tr></table><br>
<a name="540436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#175">[#175]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like the sound of all-in-one functions! For the lazy people out there *cough* myself *cough* <br><br></td></tr></table><br>
<a name="540542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#176">[#176]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I'm not using trimesh stuff, but I was hoping for a bit of advice.<br><br>I've been playing with the basic cubes demo to get the hang of ODE. I noticed that the cubes come to rest very quickly.<br><br>But when I change the scale of the cube (to make it flat like a CD case) they don't seem to fully settle, ie. they twitch a bit :)<br><br>How can I change it so after hitting the pile, they come to rest? thanks <br><br></td></tr></table><br>
<a name="540618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#177">[#177]</a></td></tr></table></td></tr><tr ><td class="posttext"> To avoid non stable boxes on the ground you can make soft surfaces by adjusting cfm and erp in the contact parameters. Try decreasing erp and increasing cfm.<br><br>For example:<br>CFM: 0.01<br>ERP: 0.4<br><br>There are lot of tweaking options in ode, this is only one.<br><br>Cheers, KuRi <br><br></td></tr></table><br>
<a name="540733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#178">[#178]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Caff : If you want all in one functions have a look at my tutorial that I posted up on this forum. Includes a .lib for defining materials and objects based on those materials, both mobile bodies and static scenery. eg.<br><br><pre class=code>Function create_Box(obj.ODE_object, x_pos#, y_pos#, z_pos#, width#, length#, depth#, x_rot#, y_rot#, z_rot#)</pre><br><br>@ VIP3R : Fantastic work! And the more functions, the merrier! My program is built on simple primitives with materials so I created a structure to support that. In my case my ODE_Object type also has a mat.material field for defining what it's made of. This is then really useful for including other things like magnetism. There's several different ways to approach the structure of a simulation and I don't know what the consensus would want. It could be worth dividing different constructor designs into different libraries. Maybe have some basic object construction functions, then have a more detailed system with full material support, and so on? <br><br></td></tr></table><br>
<a name="540940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#179">[#179]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I've had a good think about these 'all-in-one' functions. I'd prefer not to add them to the JV-ODE.bb include file, as this file should never be modified (the 'all-in-one' functions should be user definable really).<br><br>It might be a better idea to build a separate include file or for the user to build their own 'all-in-one' functions based on a tutorial for this exact purpose. What do you reckon Shifty Geezer, would you be able to make an 'all-in-one' function tutorial? I can find you some links to real world object properties (mass, bounce, friction etc).<br><br>@Caff: If you really need some simple functions like this, I can build you a few no problem. I'm just not sure prebuilt functions like this would be a good idea, it's very easy for the user to build them based on the demo code. Also, for your flat cube problem you can change the properties of each object to suit your needs. Try changing the erp, cfm and bounce properties using the geom contact functions...<br>dGeomContactSetMode(ode\geom,dContactBounce)<br>dGeomContactSetBounce(ode\geom,0.0) ; ### 0.0 to 1.0<br>dGeomContactSetSoftERP(ode\geom,0.0) ; ### 0.0 to 1.0<br>dGeomContactSetSoftCFM(ode\geom,0.0) ; ### 0.0 to 0.1+<br>...add them after creating each flat cube. <br><br></td></tr></table><br>
<a name="540946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#180">[#180]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll certainly make available my 'research' as my library develops for my own use. To add are external forces (particularly blowers and magnets), and some simple joint stuff like compound bodies (good old chair example). How efficient the library is...well, I can't rightly say! I keep thinking in terms of rigidly structured programming which I like, but Blitz isn't that rigid, and I get lost with all the globals and the like ;)<br><br>I do agree such constructor libraries are best kept seperate from the main ODE lib as they optional extras that don't link directly to features of the ODE system. <br><br></td></tr></table><br>
<a name="541374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#181">[#181]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys I'll give it a try and see how it looks. <br><br></td></tr></table><br>
<a name="541396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#182">[#182]</a></td></tr></table></td></tr><tr ><td class="posttext"> MARGINALLY IMPORTANT NOTICE : <br><br>I've just found that though Cubes And Capped Cylinders work with Mesh collision, normal cylinders do not. (Run Car+CCylinder demo but replace all references to 'CCylinder' and 'CappedCylinder' with just 'Cylinder') <br><br></td></tr></table><br>
<a name="541416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#183">[#183]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, CCylinders are rotated 90 degrees on X axis, whereas normal Cylinders aren't. <br><br></td></tr></table><br>
<a name="541417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#184">[#184]</a></td></tr></table></td></tr><tr ><td class="posttext"> Normal cylinders don't work with a TriMesh in any version of ODE, to date no-one has succeeded in getting them to work at all.<br><br>You need to use capped cylinders for the TriMesh instead.<br><br>[edit] The CCylinder 90 degrees on the X-Axis alignment is something which is designed that way in ODE, god knows why? I'll fix it if I can find a decent way of doing it but it's easiest to just rotate the mesh alignment. <br><br></td></tr></table><br>
<a name="541419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#185">[#185]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it appears true cylinders aren't fully supported in ODE, which means slight edge overlap for cylinders if using capped ones. Still, better than nothing ;) <br><br></td></tr></table><br>
<a name="541423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#186">[#186]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could try <b>cube</b> wrapping the ends of the capped cylinders which would help stop some of the penetration along the edges. Seems like overkill to me but it could be done. <br><br></td></tr></table><br>
<a name="541483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#187">[#187]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indeed, Cylinders aren't just not fully supported, they're down right buggy! There's a chance that if they combine end on end, two cylinders will vaporise each other. As example, open the Demo-CCylinders and replace the function AddObject() with<br><pre class=code>
Function AddObject()

xp=Rand(-5,5)
zp=Rand(-5,5)
ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
dBodySetRotation(ode\body,0,0,0)
dBodySetPosition(ode\body,xp,30,zp)
dBodySetAutoDisableFlag(ode\body,1)
;ode\geom=dCreateCylinder(Space,2,8)		; logs
ode\geom=dCreateCylinder(Space,8,2)		; coins
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCylinder(12)
;ScaleMesh ode\mesh,2,4,2						; logs
ScaleMesh ode\mesh,8,1,8							; coins

End Function</pre><br>If you run the program with the coins lines enabled, you get a clear view of this behaviour. Comment outs the coins and use the logs instead, and the vaporising cylinders are much less frequent. So only in end-on-end collision is it a problem, but a problem none the less.<br><br>Note : I only found this because by chance I tried the new mesh collisions with cylinders and when they didn't work, spent hours today trying to find the problems with my code. Ugh! <br><br></td></tr></table><br>
<a name="541489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#188">[#188]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you make cubes stack and NOT fall over, ?? <br><br></td></tr></table><br>
<a name="541506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#189">[#189]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Shifty Geezer: It's important to remember that the standard 'Cylinder' is <b>not</b> part of the original ODE library but is in fact an addition made by other contributors. This was added to JV-ODE as an extra, but it isn't very stable yet. The reason the cylinders disappear is due to faulty collision contact joints being created which actually send them off flying at high speed (they don't disappear, they just move real fast). There is now a 'Cylinder2' function available too which I shall examine and if stable enough include into the JV-ODE wrapper in the future. Capped Cylinders are the only 'official' ODE cylinder available at the moment. Obviously being relatively new to the library you wouldn't have known this ;)<br><br>@Slenkar: Think of it like you would real life, if you try to stack cubes by dropping them from pretty high up, they'll just start rocking and tumble eventually. In reality you would add each cube slightly higher than the one below it and so on. The same applies here, stack each cube carefully. You can of course stack all of them first by setting their positions <b>before</b> calling dWorldQuickStep(). Also, set the cubes contacts up with zero bounce, low to mid 'erp' and mid to high 'cfm' same as I mentioned to Caff about 10 posts up ^^^. If you're still having trouble feel free to let me know and I'll do my best to help ;) <br><br></td></tr></table><br>
<a name="541514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#190">[#190]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, just as Viper says the Cylinder Geom is not natively supported by ODE. There are two contributions for this. The most advanced is in the dcylinder2 of the ode source. This has dCylinder vs Trimesh support, or at least in theory because i have tested it with bad results.<br><br>And the dcylinder2 contribution is very hard to include in the original source, because the lack of good explanations on how to do it.<br><br>The Viper dll and my dll includes the dcylinder contribution, which is the only that can be used with some geoms with some real use.<br><br>You can download the demo for KODE EDITOR and see how the Boxed CCylinder works. They are really great for that purpose. The only limit is that the total length of the final cylinder must be at least of 2*radius of the original ccylinder, so there are come cylinders that cannot be represented, for example wheels.<br><br>Cheers, KuRi! <br><br></td></tr></table><br>
<a name="541526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#191">[#191]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R : Okay. Seeing it in the official .pdf docs I had no reason to think it wasn't a full component. Is there anywhere a newbie guide to what's really in/not in ODE? ;)<br><br>KuRiX : How are your boxed cylinders created, so that some can't be represented? It should technically be quite easy I'd have though.<br><br>Edit - of course, using capped cylinders the rounded ends are too big to represent a cylinder of higher radius:length ratio. <br><br></td></tr></table><br>
<a name="541533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#192">[#192]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I've not seen any docs which refer to non-ODE contributions separately.<br><br>There is a list of the non-official stuff here:<br><a href="http://cvs.sourceforge.net/viewcvs.py/opende/ode/contrib" target="_blank">http://cvs.sourceforge.net/viewcvs.py/opende/ode/contrib</a><br><br>The boxed cylinders KuRiX is talking about is what I was referring to when I mentioned cube wrapping the ends of the cylinders above ^^. You just attach a cube to each end of the cylinder in the exact same manner as shown in the Demo-SphereWrapCylinder.bb file. Just replace the spheres for cubes. The cubes will lie inside the cylinder body with the face of the cube meeting the edge of the cylinder.<br><br>This should prevent the faulty contacts generating, but it still won't collide with a TriMesh (apart from just the cubes themselves).<br><br>You can adjust the length of the cylinder to accommodate the cubes properly. But you are limited, the cylinder length must be twice as long as the radius. <br><br></td></tr></table><br>
<a name="541558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#193">[#193]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Viper, i was talking about boxed-ccylinder. So you can make it work with trimeshes too! <br><br></td></tr></table><br>
<a name="541574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#194">[#194]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried messing about with all those settings and still could not get it to work, please can you create a small demo? (of a cube stack)<br>Ive been trying for about 2 hours now <br><br></td></tr></table><br>
<a name="541873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#195">[#195]</a></td></tr></table></td></tr><tr ><td class="posttext"> @KuRiX: I think Shifty Geezer wanted to stack normal cylinders end on end without the faulty contacts. You can box both cylinders and capped cylinders, but like you say only capped cylinders will work with a TriMesh. Anyway, thanks for your input on this ;)<br><br>@Slenkar: Did you try the Demo-Rope.bb code? This code also shows boxes being stacked. If this demo isn't quite what you wanted, let me know what specific requirements you need and I'll build you a demo to show it, no problem ;) <br><br></td></tr></table><br>
<a name="541920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#196">[#196]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh, so its best to stack them in real time one-by-one <br><br></td></tr></table><br>
<a name="541922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#197">[#197]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R : dGeomContactSet...() don't appear to affect trimeshses. Indeed, neither do global Bounce and Mu values. Have Trimeshes got fixed parameters? <br><br></td></tr></table><br>
<a name="541929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#198">[#198]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, they use the global parameters. You must be using them wrong I think, they're working here.<br><br>Try this in the TriMesh demos...<br><br>dContactSetMode(dContactSlip1+dContactBounce) ; &lt;&lt;&lt; If you want to use bounce you must set the mode to use it<br><br>dContactSetBounce(0.95) ; &lt;&lt;&lt; add the global bounce<br><br>dContactSetMu(64) ; &lt;&lt;&lt; change the friction in the WorldFriction variable or directly with this<br><br>[edit] Btw, I'll create a new JV-ODE thread tomorrow when V1.04 is released, this thread is getting a bit long now ;) <br><br></td></tr></table><br>
<a name="542027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#199">[#199]</a></td></tr></table></td></tr><tr ><td class="posttext"> The ODE library has just received some new updates (including the compiler fix I'd mentioned to them) so I'll add these to the V1.04 update too. Providing they're stable of course ;)<br><br>Optimizations have been made in the following areas:<br><br>box&gt;TriMesh collision improved<br>sphere&gt;TriMesh collision improved<br>ccylinder&gt;TriMesh collision improved<br>quickstep performance improved<br><br>This is quite significant, there has been a flurry of activity over the last two days. Including a few words from the fella who created ODE. I haven't seen this much activity for months so it's quite exciting. The future looks bright for ODE :) <br><br></td></tr></table><br>
<a name="542153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#200">[#200]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>THIS THREAD IS ABOUT TO CLOSE!!!<br><br>PLEASE USE THE NEW THREAD LOCATED <a href="/posts.php?topic=48743" target="_blank">HERE</a><br><br>THANKS<br></b> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
