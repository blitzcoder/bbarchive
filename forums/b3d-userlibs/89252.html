<!DOCTYPE html><html lang="en" ><head ><title >JV-ODE Physics Thread 13</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >JV-ODE Physics Thread 13</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >JV-ODE Physics Thread 13</a><br><br>
<a name="1013517"></a>

<a name="1059026"></a>

<a name="1059267"></a>

<a name="1142284"></a>

<a name="1179778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Current JV-ODE Version: <b>1.32</b><br><br>Now available for <b>Blitz3D</b> &amp; <b>BlitzMax (Win32)</b><br><br>The JV-ODE Physics Wrapper is an advanced user library supporting almost all of the Open Dynamics Engine functions wrapped inside a DLL (Dynamic Link Library).<br><br>The library can be used with any programming language that supports DLL's, including Blitz3D and BlitzMax (Win32). The Euler rotation system in JV-ODE has been adapted to match the left-handed Euler rotation used in Blitz3D, however functions for accessing Quaternion and Axis Angle rotation systems are also included. The full versions contain all of the necessary files to get you started, including over 40 demos showing the various features found in ODE and a complete Function Reference document.<br><br>The BlitzMax (Win32) version also features a built-in 'bare-bones' OpenGL 3D engine module and B3D mesh loader module for demo purposes.<br><br>To view more information and screenshots <a href="http://jv-ode.devcode.co.uk/" target="_blank">click here</a>.<br><br>Options are now available to purchase the wrapper using either PayPal or Share*it.<br><br>The <b>Blitz3D</b> restricted demo version is now available for download <a href="http://jv-ode.devcode.co.uk/download/JV-ODE-Demo-Blitz3D.zip" target="_blank">here</a> (207KB)<br><br>The <b>BlitzMax (Win32)</b> restricted demo version is now available for download <a href="http://jv-ode.devcode.co.uk/download/JV-ODE-Demo-BlitzMax.zip" target="_blank">here</a> (376KB)<br><br>Have Fun :)<br><br>Previous JV-ODE Blitz3D Threads: <a href="/posts.php?topic=43653" target="_blank">1</a> <a href="/posts.php?topic=45048" target="_blank">2</a> <a href="/posts.php?topic=48743" target="_blank">3</a> <a href="/posts.php?topic=52572" target="_blank">4</a> <a href="/posts.php?topic=53490" target="_blank">5</a> <a href="/posts.php?topic=56209" target="_blank">6</a> <a href="/posts.php?topic=59001" target="_blank">7</a> <a href="/posts.php?topic=63898" target="_blank">8</a> <a href="/posts.php?topic=68198" target="_blank">9</a> <a href="/posts.php?topic=72220" target="_blank">10</a> <a href="/posts.php?topic=79489" target="_blank">11</a> <a href="/posts.php?topic=85346" target="_blank">12</a><br><br>Useful Links: <a href="http://www.ode.org/" target="_blank">ODE.org Website</a> - <a href="http://opende.sourceforge.net/wiki/" target="_blank">ODE Wiki</a> - <a href="http://www.ode.org/ode-latest-userguide.pdf" target="_blank">ODE User Guide (PDF)</a> - <a href="http://www.ode.org/ode-latest-userguide.html" target="_blank">ODE User Guide (HTML)</a> <br><br></td></tr></table><br>
<a name="1014026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I made a small alteration to the tower generation code to allow it to be placed anywhere dependant upon an array of x,y &amp; z co-ords.... I've just realised that it needs more modification before numerous towers can be invoked to stop duplicates of ODE bodies appearing.<br><br>[EDIT]Fixed the problem (my fault...) - I'd encapsulated the updatecubes within an If statement that needed a little modifying, happy dayz:-<br><br>The tower code posted at the end of the last thread is a great example of code that with a little manipulation will give the possibility of making brick walls that can be 'crashed through'. Cool.<br><br><br><img src="http://www.wishingwellsoftware.co.uk/wee1.jpg"><br><br><br>That asides, I've successfully created the tower block at the end of my first elevated blocks.<br><br>[EDIT] have simply equated the start of the tower block to offset vars from the start of the cars for the time being.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
If noOfTowers&gt;0
	
	Counter=1	
	
	For x=1 To Height*4 Step 4
		Cubo(x)=CreateCube()
		ScaleEntity Cubo(x),0.5,0.5,5	
		CuboBody(x)=dBodyCreate(World)	
		CuboGeom(x)=dCreateBox(Space,1,1,10)	;
		dGeomSetBody(CuboGeom(x),CuboBody(x))
		dBodySetPosition(CuboBody(x),-3+towerx(0),counter+towery(0),0+towerz(0))
		dGeomContactSetMu(CuboGeom(x),2)
		dBodyDisable(CuboBody(x))
		
		Cubo(x+1)=CreateCube()
		ScaleEntity Cubo(x+1),0.5,0.5,5	
		CuboBody(x+1)=dBodyCreate(World)	
		CuboGeom(x+1)=dCreateBox(Space,1,1,10)	
		dGeomSetBody(CuboGeom(x+1),CuboBody(x+1))
		dBodySetPosition(CuboBody(x+1),3+towerx(0),counter+towery(0),0+towerz(0))
		dGeomContactSetMu(CuboGeom(x+1),2)
		dBodyDisable(CuboBody(x+1))
		
		Cubo(x+2)=CreateCube()
		ScaleEntity Cubo(x+2),5,0.5,0.5	
		CuboBody(x+2)=dBodyCreate(World)	
		CuboGeom(x+2)=dCreateBox(Space,10,1,1)	
		dGeomSetBody(CuboGeom(x+2),CuboBody(x+2))
		dBodySetPosition(CuboBody(x+2),0+towerx(0),counter+1+towery(0),-3+towerz(0))
		dGeomContactSetMu(CuboGeom(x+2),2)
		dBodyDisable(CuboBody(x+2))
		
		Cubo(x+3)=CreateCube()
		ScaleEntity Cubo(x+3),5,0.5,0.5	
		CuboBody(x+3)=dBodyCreate(World)	
		CuboGeom(x+3)=dCreateBox(Space,10,1,1)	
		dGeomSetBody(CuboGeom(x+3),CuboBody(x+3))
		dBodySetPosition(CuboBody(x+3),0+towerx(0),counter+1+towery(0),3+towerz(0))
		dGeomContactSetMu(CuboGeom(x+3),2)
		dBodyDisable(CuboBody(x+3))
		
		Counter=Counter+2
	Next
	
	UpdateCubes()
	
	
	
	
	
EndIf


</textarea><br><br>[EDIT...text removed]  Just did this to relax after coding an object oriented 2D (boring!) knight program for college.  The concepts are interesting, however for sheer satisfaction you can't be Blitz 3D + JV-ODE &amp; a bit of devilish particle system code. <br><br></td></tr></table><br>
<a name="1014077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi!<br><br>i wrote 5 demos of using JV-ODE with a free world editor.<br>The idea is to place objects (nothing new) and then load the world (nothing new) but, with a lib i wrote, ode objects (body, geom, joint) are created based on the shape defined on the editor, position, scale, etc. <br><br>take a look<br><br><a href="http://sites.google.com/site/odriozolajuanignacio/juanodriozola/blitz3d" target="_blank">http://sites.google.com/site/odriozolajuanignacio/juanodriozola/blitz3d</a><br><br>comments are welcome<br><br>Juan <br><br></td></tr></table><br>
<a name="1014952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey all,<br><br>I was writing a demo, about joints, testing the Ball and Socket, the Hinge and the Slider joints. Just 2 cubes connected for each one of them. The problem is that until now, I always thought of static objects as being Geoms without Bodies. Thats basically one of the first things I learned. But then I got into a dilema. If for example, Im going to do a door:<br>1 - I would make a wall and a door<br>2 - I would connect them with 1 Hinge joint, and set the parameters.<br><br>The problem is, that the wall is a Static object, and the door is a Rigid Body. But I can only attach joints for two Bodies. So the wall would have to be a body too. Is there another way to solve this "problem"? and how I would make the Body remain static? (I have tryied to set the angular and linear velocity to 0 in the loop but it didnt really worked)<br><br>Now, you have been helping me, so let me try to share something with you too. Maybe you already know this site, but anyways:<br><a href="http://docs.taoframework.com/Tao.Ode/" target="_blank">http://docs.taoframework.com/Tao.Ode/</a><br><br>This website has lots of stuff related to ODE (and other libraries) and it has helped me a lot, you will find almost all the commands there, and some explanation too. If I could I would download it (was planning on recording ODE related stuff in a CD with the JV-ODE itself). If you find a way tell me :)<br><br>Cya <br><br></td></tr></table><br>
<a name="1014978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The solution is to attach the hinge joint between the door body and the 'world'. To specify the world, you use a zero value for the body parameter.<br><br>For example...<br><br><i>dJointAttach(HingeJoint,DoorBody,0)</i> <br><br></td></tr></table><br>
<a name="1015336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks VIP3R,<br><br>I have seen it before, on the RagDoll demo, but was not really sure how it worked. But for Sliders for example, how would I position the joint? I didnt found dJointSliderSetAnchor, which I understood as being the "position joint", only dJointSliderSetAxis, which I guess says the "rotation" of the Slider. Tell me if I understood it wrong, because I found out this by testing, and I might be.<br><br>But now more for curiosity, how do I keep a body static? Is there a way? Like, setting all the forces to 0 or something like that? Because as I tryied setting forces, and velocity to 0 and it didnt work.<br><br>Cya <br><br></td></tr></table><br>
<a name="1015411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> A joint anchor defines the 'pivot' position of the joint, this doesn't apply with the slider joint as it only extends and contracts.<br><br>To keep a rigid body static, you can add a fixed joint to connect the body to the 'world', locking it into place.<br><br>To cancel any forces on the body, you zero all forces, torque and velocity...<br><br><i>dBodySetForce(body,0,0,0)<br>dBodySetTorque(body,0,0,0)<br>dBodySetAngularVel(body,0,0,0)<br>dBodySetLinearVel(body,0,0,0)</i><br><br>You must do this every iteration before stepping the simulation though, calling them once will not work. <br><br></td></tr></table><br>
<a name="1018186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Folks. I've been running outa steam what with one thing and the other - if anyone wants the media assocaited with the following code I'll upload it with a list of links. The code to implement the two player racer (images A COUPLE OF POSTS UP) with a 3rd view is available here: please note, the code is designed to work with keyboard and a basic USB joypad at the moment:-<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #                                 JV-ODE Duo Demo, slightly mod'd                                 # 
; #                Make_game_board with ramps function by Mark Gormley (Blitzplotter)               #
; #           Split Screen function with Charrua's help &amp; Texturing with Malice's help              #
; #                            Original Code by Jim Williams (VIP3R)                                #
; #                            Devious Codeworks - Copyright © 2009                                 #
; ###################################################################################################

;v12 trying to build a wall function for cars to crash through.....
; running outa steam



Include "JV-ODE.bb"

Include "DevilParticleSystem.bb"

AppTitle "Race to cube 100, it is a long way back to cube 1."

;Graphics3D 1920,1200,0,1
Graphics3D 1280,1024,0,1


Global CMass#=185; ### Car Mass
Global WMass#=16.5	; ### Wheel Mass

Global WorldERP#=1.0			; ### World Error Correction
Global WorldFriction#=70.0		; ### World Friction

Global Torque#=24.0				; ### Joint Torque
Global SuspensionHS#=0.01		; ### Suspension Hardness/Softness (Higher=Softer - Lower=Harder)

Global tower_on = 0                                                                       

Global cam_range=700


Global Height

Height = 15

;Height=Input("Tower Height:")

Dim Cubo(Height*4)
Dim CuboGeom(Height*4)
Dim CuboBody(Height*4)

;Global towerx=0
;Global towery=0
;Global towerz=0

Dim Bricko(Height*4)
Dim BrickoGeom(Height*4)
Dim BrickoBody(Height*4)

Dim Sicko(Height*4)
Dim SickoGeom(Height*4)
Dim SickoBody(Height*4)

;making textured wheels

;ground_txt=mgloadtext("ground.bmp","bmp")


your_path$=("H:\TORTOISE\top_level_tort_check_ootski\UltimateUnwrapProjects")

truck_path$=(your_path$+"\Artic_Wheel\artic_wheel_4_afifth.b3d")



Dim truck_wheel(4)

;car1

truck_wheel(1)=LoadMesh(truck_path$)
truck_wheel(2)=LoadMesh(truck_path$)
truck_wheel(3)=LoadMesh(truck_path$)
truck_wheel(4)=LoadMesh(truck_path$)

;car2

truck_wheel(5)=LoadMesh(truck_path$)
truck_wheel(6)=LoadMesh(truck_path$)
truck_wheel(7)=LoadMesh(truck_path$)
truck_wheel(8)=LoadMesh(truck_path$)


;carmesh=LoadMesh("H:\TORTOISE\top_level_tort_check_ootski\UltimateUnwrapProjects\mycars\wheelarchbase4.b3d")
carmesh2=LoadMesh("H:\TORTOISE\top_level_tort_check_ootski\UltimateUnwrapProjects\mycars\clearwindow1.b3d")


carmesh=LoadMesh("H:\TORTOISE\top_level_tort_check_ootski\UltimateUnwrapProjects\mycars\clearwindow1.b3d")
;carmesh=LoadMesh("H:\TORTOISE\top_level_tort_check_ootski\UltimateUnwrapProjects\mycars\ppat_v2.b3d")

;need to load bmap:

Global pat_txt=LoadTexture("ppat_uvmap_3.bmp")

Global lookat=1

Dim Force#(2)
Dim Steer#(2)

Dim Car(2)
Dim CGeom(2)
Dim CMesh(2)


Global LOWFUEL = 400
Global MAXCONTROLTIME=1500

Global ControlTimer=800
Global SteeringTimer=0

Global CarStartX=1825
Global CarStartY=145
Global CarStartZ=300

;--------------------------------
;declare a put tower blocks here and there array

Global noOfTowers = 1

Dim towerx(10)
Dim towery(10)
Dim towerz(10)

towerx(0)=CarStartX+140
towery(0)=CarStartY-39
towerz(0)=CarStartZ

;bricko places:-

brick_on = 1

Dim Brickox(10)
Dim Brickoy(10)
Dim Brickoz(10)

Brickox(0)=CarStartX+140
Brickoy(0)=CarStartY-39
Brickoz(0)=CarStartZ+30

;sicko places:-

sicko_on = 1

Dim sickox(10)
Dim sickoy(10)
Dim sickoz(10)

sickox(0)=CarStartX+148
sickoy(0)=CarStartY-39
sickoz(0)=CarStartZ+15



;end towerz creation
;---------------------------------------------------------------------------

Dim Wheel(2,4)
Dim WGeom(2,4)
Dim Joint(2,4)

Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

Global funnelx=1.0
Global funnely=0.5
Global funnelz=0.5

Global funnelnum
Global carnum
Global doonce=1
;end exhaust globals

Global countcubes

Dim colorthis(1000)  ; needed to store the memory location of each ODE cube when it is created

;JOYPAD GLOBALS
Type joypad
	Field x1id
	Field y1id
	Field x2id
	Field y2id
	Field x1invert
	Field y1invert
	Field x2invert
	Field y2invert
End Type 

Dim j.joypad(3)

For port = 0 To 3
	j(port) = New joypad
	j(port)\x1id = 0
	j(port)\y1id = 0
	j(port)\x2id = 0
	j(port)\y2id = 0
	j(port)\x1invert = 1 ;toggles between 1 and -1 
	j(port)\y1invert = 1
	j(port)\x2invert = 1
	j(port)\y2invert = 1
Next 

readconfig()

; END JOYPAD GLOBALS

;=========================================================================

;load the sky:  note can Slow down drastically:-

;SKY
;Global sky = CreateCube(camera_pivot)
;FlipMesh sky
;ScaleEntity sky,3480,3480,3480
;PositionEntity sky, 0,50,0
;sky_tex = LoadTexture("sky.bmp")
;EntityTexture sky,sky_tex

; ###################################################################################################

; ### Setup ODE

dInitODE()

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)
dWorldSetERP(World,WorldERP)

;EntityTexture WorldERP, ground_txt   this fails giving up

dContactSetMode(dContactSlip1)
dContactSetMu(WorldFriction)

; ### add a terrain height map
;TERRAIN
Global terrain = LoadTerrain("height4.jpg")
TerrainDetail terrain,2500,True
ScaleEntity terrain, 6,30,6
PositionEntity terrain,-1000,0,-530
;ter_tex = LoadTexture("mossyground.bmp")
ter_tex = LoadTexture("ground_bmp_64.bmp")
EntityTexture terrain,ter_tex
EntityRadius terrain,0.2
EntityType terrain,SCENERY

dContactSetMode(dContactBounce)
dContactSetBounce(0.1)
dContactSetMu(48)

dContactSetMode(dContactSlip1)
dContactSetMu(WorldFriction)

;################################################################################
;create first 2 cars

For carID=1 To 2
	; ### Create Car Body
	
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	Car(carID)=ode\body
	;dBodySetPosition(ode\body,-10+(carID*10),CarStartY,0)
	dBodySetPosition(ode\body,CarStartX-10+(carID*10),CarStartY,CarStartZ)
	dBodySetRotation(ode\body,0,0,0)
	mass=dMassCreate()
	dMassSetBoxTotal(mass,CMass,3.2,2.0,4.5)
	dBodySetMass(ode\body,mass)
	dMassDestroy(mass)
	ode\geom=dCreateBox(Space,3.2,2.0,4.5)
	CGeom(carID)=ode\geom
	dGeomSetBody(ode\geom,ode\body)
	If carID=1 Then ode\mesh=carmesh
	If carID=2 Then ode\mesh=carmesh2
	;ode\mesh=CreateCube()
	CMesh(carID)=ode\mesh
	
	
	If carID=1
		;EntityTexture ode\mesh,pat_txt;  why fail?
		;ScaleMesh ode\mesh,1.2,0.5,1
		ScaleMesh ode\mesh,3,1.1,3
	Else
		;ScaleMesh ode\mesh,1.2,0.5,1
		ScaleMesh ode\mesh,3,1.1,3
	EndIf
	
	If carID=1
		EntityColor ode\mesh,40,80,255
	Else
		EntityColor ode\mesh,40,255,80
	End If
	
	; ### Create Wheels
	
	For count=1 To 4
		ode.ODEGeom=New ODEGeom
		ode\body=dBodyCreate(World)
		Wheel(carID,count)=ode\body
		dBodySetPosition(ode\body,0,0,0)
		dBodySetRotation(ode\body,0,0,90)
		mass=dMassCreate()
		dMassSetSphereTotal(mass,WMass,0.7)
		dBodySetMass(ode\body,mass)
		dMassDestroy(mass)
		ode\geom=dCreateSphere(Space,1.2)
		WGeom(carID,count)=ode\geom
		dGeomSetBody(ode\geom,ode\body)
		;ode\mesh=CreateCylinder()
		If carID=1
		ode\mesh=truck_wheel(count)  ;attempt at getting my New wheel in
                                 ;note had to add count as was only getting one wheel
	Else
		ode\mesh=truck_wheel(count+4)
	EndIf
	
		
	ScaleMesh ode\mesh,1.2,1.25,1.2
		;EntityColor ode\mesh,255,255,255
	Next
	
	wheelheight = 0.8
	
	wheelheightcar=wheelheight-.2
	
	
	dBodySetPosition(Wheel(carID,1),CarStartX-12+(carID*10),CarStartY-wheelheightcar,CarStartZ+2)
	dBodySetPosition(Wheel(carID,2),CarStartX-8+(carID*10),CarStartY-wheelheightcar,CarStartZ+2)
	dBodySetPosition(Wheel(carID,3),CarStartX-12+(carID*10),CarStartY-wheelheightcar,CarStartZ-2)
	dBodySetPosition(Wheel(carID,4),CarStartX-8+(carID*10),CarStartY-wheelheightcar,CarStartZ-2)
	
	;RotateEntity Car(CarID),0,180,0
	
	If carID = 1
	
		; ### Create funnel
		ode.ODEGeom=New ODEGeom
		ode\geom=dCreateCapsule(Space,0.5,3)
		dGeomSetBody(ode\geom,Car(1))
		;dgeomsetrotation(ode\geom,0,0,90)
		
		;dGeomSetOffsetPosition(ode\geom,0.8,1.9,1.5)
		dGeomSetOffsetPosition(ode\geom,0.8,2.2,1.5)
		
		ode\mesh=CreateCylinder()
		ScaleMesh ode\mesh,0.3,0.5,0.3
		EntityColor ode\mesh,40,80,255
		EntityAlpha ode\mesh,0.7
		funnelnum=ode\geom
		;funnel=ode\mesh
		;dBodySetPosition(funneltop,dBodyGetPositionX(ode\mesh),(dBodyGetPositionY(ode\mesh))+5,dBodyGetPositionZ(ode\mesh))
		
		funnelx=Float dBodyGetPositionX(Car(1))
		funnely=dBodyGetPositionY(Car(1))
		funnelz=dBodyGetPositionZ(Car(1))
	
	EndIf
	
	
Next

;end create 2 cars
;###############################################################################

; ### Create Objects

SeedRnd MilliSecs()

For spheres=1 To 10
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	dBodySetPosition(ode\body,Rand(10,1000),500,Rand(30,1000))
	dBodySetRotation(ode\body,0,0,0)
	ode\geom=dCreateSphere(Space,4)
	dGeomSetBody(ode\geom,ode\body)
	ode\mesh=CreateSphere()
	ScaleMesh ode\mesh,4,4,4
	EntityColor ode\mesh,Rand(0,255),255,Rand(0,200)
	EntityShininess ode\mesh,0.7
Next

For capsules=1 To 10
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	dBodySetPosition(ode\body,Rand(10,1000),130,Rand(30,1000))
	dBodySetRotation(ode\body,90,0,0)
	ode\geom=dCreateCapsule(Space,1,8)
	dGeomSetBody(ode\geom,ode\body)
	ode\mesh=CreateCylinder()
	ScaleMesh ode\mesh,1,5,1
	RotateMesh ode\mesh,90,0,0	; ### Align Blitz3D Cylinder To ODE Capsule
	EntityColor ode\mesh,Rand(0,255),Rand(0,255),Rand(0,255)
	EntityShininess ode\mesh,0.7
Next



;################################################################################
;collapsible towers

If tower_on = 1


Counter=1	

For x=1 To Height*4 Step 4
	Cubo(x)=CreateCube()
	ScaleEntity Cubo(x),0.5,0.5,5	
	CuboBody(x)=dBodyCreate(World)	
	CuboGeom(x)=dCreateBox(Space,1,1,10)	;
	dGeomSetBody(CuboGeom(x),CuboBody(x))
	dBodySetPosition(CuboBody(x),-3,counter,0)
	dGeomContactSetMu(CuboGeom(x),2)
	dBodyDisable(CuboBody(x))
	
	Cubo(x+1)=CreateCube()
	ScaleEntity Cubo(x+1),0.5,0.5,5	
	CuboBody(x+1)=dBodyCreate(World)	
	CuboGeom(x+1)=dCreateBox(Space,1,1,10)	
	dGeomSetBody(CuboGeom(x+1),CuboBody(x+1))
	dBodySetPosition(CuboBody(x+1),3,counter,0)
	dGeomContactSetMu(CuboGeom(x+1),2)
	dBodyDisable(CuboBody(x+1))
	
	Cubo(x+2)=CreateCube()
	ScaleEntity Cubo(x+2),5,0.5,0.5	
	CuboBody(x+2)=dBodyCreate(World)	
	CuboGeom(x+2)=dCreateBox(Space,10,1,1)	
	dGeomSetBody(CuboGeom(x+2),CuboBody(x+2))
	dBodySetPosition(CuboBody(x+2),0,counter+1,-3)
	dGeomContactSetMu(CuboGeom(x+2),2)
	dBodyDisable(CuboBody(x+2))
	
	Cubo(x+3)=CreateCube()
	ScaleEntity Cubo(x+3),5,0.5,0.5	
	CuboBody(x+3)=dBodyCreate(World)	
	CuboGeom(x+3)=dCreateBox(Space,10,1,1)	
	dGeomSetBody(CuboGeom(x+3),CuboBody(x+3))
	dBodySetPosition(CuboBody(x+3),0,counter+1,3)
	dGeomContactSetMu(CuboGeom(x+3),2)
	dBodyDisable(CuboBody(x+3))
	
	Counter=Counter+2
Next

UpdateCubes()


EndIf

If noOfTowers&gt;0
	
	Counter=1	
	
	For x=1 To Height*4 Step 4
		Cubo(x)=CreateCube()
		ScaleEntity Cubo(x),0.5,0.5,5	
		CuboBody(x)=dBodyCreate(World)	
		CuboGeom(x)=dCreateBox(Space,1,1,10)	;
		dGeomSetBody(CuboGeom(x),CuboBody(x))
		dBodySetPosition(CuboBody(x),-3+towerx(0),counter+towery(0),0+towerz(0))
		dGeomContactSetMu(CuboGeom(x),2)
		dBodyDisable(CuboBody(x))
		
		Cubo(x+1)=CreateCube()
		ScaleEntity Cubo(x+1),0.5,0.5,5	
		CuboBody(x+1)=dBodyCreate(World)	
		CuboGeom(x+1)=dCreateBox(Space,1,1,10)	
		dGeomSetBody(CuboGeom(x+1),CuboBody(x+1))
		dBodySetPosition(CuboBody(x+1),3+towerx(0),counter+towery(0),0+towerz(0))
		dGeomContactSetMu(CuboGeom(x+1),2)
		dBodyDisable(CuboBody(x+1))
		
		Cubo(x+2)=CreateCube()
		ScaleEntity Cubo(x+2),5,0.5,0.5	
		CuboBody(x+2)=dBodyCreate(World)	
		CuboGeom(x+2)=dCreateBox(Space,10,1,1)	
		dGeomSetBody(CuboGeom(x+2),CuboBody(x+2))
		dBodySetPosition(CuboBody(x+2),0+towerx(0),counter+1+towery(0),-3+towerz(0))
		dGeomContactSetMu(CuboGeom(x+2),2)
		dBodyDisable(CuboBody(x+2))
		
		Cubo(x+3)=CreateCube()
		ScaleEntity Cubo(x+3),5,0.5,0.5	
		CuboBody(x+3)=dBodyCreate(World)	
		CuboGeom(x+3)=dCreateBox(Space,10,1,1)	
		dGeomSetBody(CuboGeom(x+3),CuboBody(x+3))
		dBodySetPosition(CuboBody(x+3),0+towerx(0),counter+1+towery(0),3+towerz(0))
		dGeomContactSetMu(CuboGeom(x+3),2)
		dBodyDisable(CuboBody(x+3))
		
		Counter=Counter+2
	Next
	
	UpdateCubes()
	
EndIf


;end collapsible towers
;#############################################################################



;#############################################################################
;Brickos - walls at the end of levels

If brick_on = 1
	
	BrickoCounter=1	
	
	;note there is the possibility of 
	
	For x=1 To Height*4 Step 4
		Bricko(x)=CreateCube()
		ScaleEntity Bricko(x),0.5,0.5,5	
		BrickoBody(x)=dBodyCreate(World)	
		BrickoGeom(x)=dCreateBox(Space,1,1,10)	;
		dGeomSetBody(BrickoGeom(x),BrickoBody(x))
		dBodySetPosition(BrickoBody(x),-3+Brickox(0),BrickoCounter+Brickoy(0),0+Brickoz(0))
		dGeomContactSetMu(BrickoGeom(x),2)
		dBodyDisable(BrickoBody(x))
		
		Bricko(x+1)=CreateCube()
		ScaleEntity Bricko(x+1),0.5,0.5,5	
		BrickoBody(x+1)=dBodyCreate(World)	
		BrickoGeom(x+1)=dCreateBox(Space,1,1,10)	
		dGeomSetBody(BrickoGeom(x+1),BrickoBody(x+1))
		dBodySetPosition(BrickoBody(x+1),3+Brickox(0),BrickoCounter+Brickoy(0),0+Brickoz(0))
		dGeomContactSetMu(BrickoGeom(x+1),2)
		dBodyDisable(BrickoBody(x+1))
		
		Bricko(x+2)=CreateCube()
		ScaleEntity Bricko(x+2),5,0.5,0.5	
		BrickoBody(x+2)=dBodyCreate(World)	
		BrickoGeom(x+2)=dCreateBox(Space,10,1,1)	
		dGeomSetBody(BrickoGeom(x+2),BrickoBody(x+2))
		dBodySetPosition(BrickoBody(x+2),0+Brickox(0),BrickoCounter+1+Brickoy(0),-3+Brickoz(0))
		dGeomContactSetMu(BrickoGeom(x+2),2)
		dBodyDisable(BrickoBody(x+2))
		
		Bricko(x+3)=CreateCube()
		ScaleEntity Bricko(x+3),5,0.5,0.5	
		BrickoBody(x+3)=dBodyCreate(World)	
		BrickoGeom(x+3)=dCreateBox(Space,10,1,1)	
		dGeomSetBody(BrickoGeom(x+3),BrickoBody(x+3))
		dBodySetPosition(BrickoBody(x+3),0+Brickox(0),BrickoCounter+1+Brickoy(0),3+Brickoz(0))
		dGeomContactSetMu(BrickoGeom(x+3),2)
		dBodyDisable(BrickoBody(x+3))
		
		
		BrickoCounter=BrickoCounter+2
	Next
	
	UpdateBrickos()

EndIf

;
;#############################################################################


;#############################################################################
;Sickos - walls at the end of levels : read as tower 2

If sicko_on = 1
	
	SickoCounter=1	
	
	;note there is the possibility of 
	
	For x=1 To Height*4 Step 4
		Sicko(x)=CreateCube()
		ScaleEntity Sicko(x),0.5,0.5,5	
		SickoBody(x)=dBodyCreate(World)	
		SickoGeom(x)=dCreateBox(Space,1,1,10)	;
		dGeomSetBody(SickoGeom(x),SickoBody(x))
		dBodySetPosition(SickoBody(x),-3+sickox(0),SickoCounter+sickoy(0),0+sickoz(0))
		dGeomContactSetMu(SickoGeom(x),2)
		dBodyDisable(SickoBody(x))
		
		Sicko(x+1)=CreateCube()
		ScaleEntity Sicko(x+1),0.5,0.5,5	
		SickoBody(x+1)=dBodyCreate(World)	
		SickoGeom(x+1)=dCreateBox(Space,1,1,10)	
		dGeomSetBody(SickoGeom(x+1),SickoBody(x+1))
		dBodySetPosition(SickoBody(x+1),3+sickox(0),SickoCounter+sickoy(0),0+sickoz(0))
		dGeomContactSetMu(SickoGeom(x+1),2)
		dBodyDisable(SickoBody(x+1))
		
		Sicko(x+2)=CreateCube()
		ScaleEntity Sicko(x+2),5,0.5,0.5	
		SickoBody(x+2)=dBodyCreate(World)	
		SickoGeom(x+2)=dCreateBox(Space,10,1,1)	
		dGeomSetBody(SickoGeom(x+2),SickoBody(x+2))
		dBodySetPosition(SickoBody(x+2),0+sickox(0),SickoCounter+1+sickoy(0),-3+sickoz(0))
		dGeomContactSetMu(SickoGeom(x+2),2)
		dBodyDisable(SickoBody(x+2))
		
		Sicko(x+3)=CreateCube()
		ScaleEntity Sicko(x+3),5,0.5,0.5	
		SickoBody(x+3)=dBodyCreate(World)	
		SickoGeom(x+3)=dCreateBox(Space,10,1,1)	
		dGeomSetBody(SickoGeom(x+3),SickoBody(x+3))
		dBodySetPosition(SickoBody(x+3),0+sickox(0),SickoCounter+1+sickoy(0),3+sickoz(0))
		dGeomContactSetMu(SickoGeom(x+3),2)
		dBodyDisable(SickoBody(x+3))
		
		;EntityColor ode\mesh,Rand(0,255),255,Rand(0,200)
		;EntityShininess ode\mesh,0.7
		
		
		SickoCounter=SickoCounter+2
	Next
	
	UpdateSickos()
	
EndIf
;
;#############################################################################










; ### function call for game board, or stairs

make_game_board(10,10)  ;this will make steps 10 by 10 at the mo......
; NOTE:  you need to reduce the size of the cubes within the function before
;        increasing the arguments to the function to prevent stack overflows.


; ### Create Light

Global Light=CreateLight()
RotateEntity Light,50,-50,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create Camera

Global CameraPivot=CreatePivot()
Global Camera=CreateCamera(CameraPivot)
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1500


Global SecondCameraPivot=CreatePivot()
Global ThirdCameraPivot=CreatePivot()

Global SecondCamera=CreateCamera(SecondCameraPivot)
Global ThirdCamera=CreateCamera(ThirdCameraPivot)


CameraClsColor SecondCamera,0,0,0
CameraRange SecondCamera,1,3000

CameraClsColor ThirdCamera,0,0,0
CameraRange ThirdCamera,1,cam_range

;SplitScreen(Camera,SecondCamera,False)
SplitScreenthree(Camera,SecondCamera,ThirdCamera,False)


; ### Create Plane

dCreatePlane(Space,0,1,0,0)

Global Plane=CreatePlane()
EntityAlpha Plane,0.8

EntityTexture Plane,PlaneTexture()

CreateMirror()



;  ### moved particles to here so can ref cmesh

; #################################################################
;Cam = CreateCamera()


;Initialise particle system
InitParticles(Camera)

;Create a template with the following properties:
;the commands like SetEmitter...() will be explained soon!
template = CreateTemplate()
SetTemplateEmitterBlend(template, 1)
SetTemplateInterval(template, 1)
SetTemplateEmitterLifeTime(template, -1)
SetTemplateParticleLifeTime(template, 30, 45)
SetTemplateTexture(template, "Media\Smoke.png", 2, 1)
SetTemplateOffset(template, -.3, .3, -.3, .3, -.3, .3)
SetTemplateVelocity(template, -.01, .01, .1, .2, -.01, .01)
SetTemplateAlphaVel(template, True)
SetTemplateSize(template, 3, 3, .5, 1.5)
SetTemplateSizeVel(template, .01, 1.01)

;Set up an emitter
Global emitter = CreatePivot() ;The emitter can also be a mesh(don't have to be a pivot!)
SetEmitter(emitter, template) ;Sets the template which was created to this emitter pivot

; ### end particle code












; ###################################################################################################

; ### Blitz3D Static Object (White)

Global Blitz3DObject=CreateCube()
ScaleMesh Blitz3DObject,1,4,20
PositionEntity Blitz3DObject,10,5,40
RotateEntity Blitz3DObject,-10,8,4
EntityColor Blitz3DObject,255,255,255

; ### ODE Static Object (Blue)

ode.ODEGeom=New ODEGeom
ode\geom=dCreateBox(Space,2,8,40)
dGeomSetPosition(ode\geom,20,5,40)
dGeomSetRotation(ode\geom,-10,8,4)
ode\mesh=CreateCube()
ScaleMesh ode\mesh,1,4,20
EntityColor ode\mesh,0,100,200

; ### ODE Static Object (Red)

ode.ODEGeom=New ODEGeom
ode\geom=dCreateBox(Space,18,0.2,40)
dGeomSetPosition(ode\geom,30,4.9,-230)
dGeomSetRotation(ode\geom,-14,0,0)
ode\mesh=CreateCube()
ScaleMesh ode\mesh,9,0.1,20
EntityColor ode\mesh,200,0,100

; ### Static get on cube 1 again:

ode.ODEGeom=New ODEGeom
ode\geom=dCreateBox(Space,80,0.2,480)
dGeomSetPosition(ode\geom,130,58,50)
dGeomSetRotation(ode\geom,-14,0,0)
ode\mesh=CreateCube()
ScaleMesh ode\mesh,40,0.1,240
EntityColor ode\mesh,100,0,100




;####################################################################################################
; ;set up the 100 textures for use

; Create texture of size 256x256

Global FLAGS=1	;Malice				 			Added this because you need to specify the texture 
												;flags value Before how many frames. 1=colour And is the Default
tex=CreateTexture(256,256,FLAGS,100) ;Malice	This now gives the texture 100 frames

font=LoadFont("arial",96,1,0,0) 
SetFont font 
Color 0,0,0 

For countcubes=1 To 100
	
	;Malice										Moved the setbuffer and cls inside loop and removed duplicate for efficiency.
	; Draw text on texture 
	; Set buffer - texture buffer 
	;-Malice:									Added Second Parameter for frame reference (frames are counted from 0-99)
	SetBuffer TextureBuffer(tex,countcubes-1) 
	
	; Clear texture buffer with background white color 
	ClsColor 255,255,255 
	Cls 
	
	Text 0,80,"  "+countcubes : Color 255,125,255
	;Flip	-Malice								We don't need flip as we are only drawing to the texture buffer.
	
	;Malice										Again, added a second parameter for texture frame
	EntityTexture colorthis(countcubes),tex,countcubes-1		
Next

;	Malice										Setbuffer back to backbuffer OUTSIDE of loop for efficiency.
SetBuffer BackBuffer()

;end set up 100 frames of 1 texture
;#############################################################################################################


;reset the font

font=LoadFont("arial",12) 
SetFont font 
Color 255,255,255




SetupCars()

While Not KeyHit(1)
	
	
	UpdateKeysCar1()
	
	UpdateJoypadCar2()
	
	UpdateCars()
	
	UpdateGeoms()
	
	UpdateBrickos()
	
	UpdateSickos()
	
	If tower_on = 1 Or noOfTowers &gt; 0 Then
	
		UpdateCubes()
		
	EndIf
	
	UpdateParticles()
	
	PTime=MilliSecs()
	
	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)
	
	PhysicsTime#=MilliSecs()-PTime
	
	UpdateCam()
	
	RenderWorld
	
	
	Text 640,0,"Player 1:  A - Accelerate"
	Text 640,15,"Z - Brake/Reverse"
	Text 640,30,"Arrows - Steering"
	Text 640,45,"Space - Reset Blue Car"
	Text 640,60,"USB Joypad - Player 2"
	Text 640,75,"Enter - Reset Green Car"
	
	Text 0,80,"funnelx:"+funnelx
	Text 0,95,"funnely:"+funnely
	Text 0,110,"funnelz:"+funnelz
	
	
	
;	If ControlTimer &gt; LOWFUEL
;		Text 640,90,"Fuel Left:"+ControlTimer
;	Else
;		Text 300,100," LOW TIME LEFT, Control Transferring Soon"
;	End If
	
	Flip 1
	
Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

;=========================================================================


Function UpdateCam()
	
	caroney=4
	cartwoy=4
	
	PositionEntity Camera,0,caroney,-12
	PivotX#=Cos(EntityYaw(CMesh(1))-90)+EntityX(CMesh(1))
	PivotY#=EntityY(CMesh(1))
	PivotZ#=Sin(EntityYaw(CMesh(1))-90)+EntityZ(CMesh(1))
	PositionEntity CameraPivot,PivotX,PivotY,PivotZ
	PointEntity CameraPivot,CMesh(1)
	
	PositionEntity SecondCamera,0,cartwoy,-12
	PivotX#=Cos(EntityYaw(CMesh(2))-90)+EntityX(CMesh(2))
	PivotY#=EntityY(CMesh(2))
	PivotZ#=Sin(EntityYaw(CMesh(2))-90)+EntityZ(CMesh(2))
	PositionEntity SecondCameraPivot,PivotX,PivotY,PivotZ
	PointEntity SecondCameraPivot,CMesh(2)
	
	PositionEntity ThirdCamera,0,40,-80
	PivotX#=Cos(EntityYaw(CMesh(1))-90)+EntityX(CMesh(1))
	PivotY#=EntityY(CMesh(1))
	PivotZ#=Sin(EntityYaw(CMesh(1))-90)+EntityZ(CMesh(1))
	PositionEntity ThirdCameraPivot,PivotX,PivotY,PivotZ
	PointEntity ThirdCameraPivot,CMesh(2)
	
End Function

; #########################

; ###################################################################################################

Function UpdateGeoms()
	
	For ode.ODEGeom=Each ODEGeom
		PositionEntity ode\mesh,dGeomGetPositionX(ode\geom),dGeomGetPositionY(ode\geom),dGeomGetPositionZ(ode\geom)
		RotateEntity ode\mesh,dGeomGetPitch(ode\geom),dGeomGetYaw(ode\geom),dGeomGetRoll(ode\geom)
		
		;smoke
		If funnelnum=ode\geom
			PositionEntity emitter,dGeomGetPositionX(ode\geom),dGeomGetPositionY(ode\geom)+2.5,dGeomGetPositionZ(ode\geom)
		EndIf
		
	Next
	
End Function

; ###################################################################################################

Function make_game_board(x,y)
	
	;make some stairs - bit of an evolution of the static objects with the demo code with ODE
	;cubex = 60;  the width of a cube
	;cubey = 1.7;  the height of a cube
	;cubez = 20;  the zed of a cube
	
	cubex = 210; cubes 10  by 10
	cubey = 70
	cubez = 70
	
	Z_ROW_GAP = 500
	
	rotate_degrees = 0; rotate the cubes by {x} degrees
	
	SeedRnd (MilliSecs()) 
	
	For madsteps=1 To 10  ;note to generate a flat gameboard of 10 by 10 set this to 1 to 1
                          ;and pass 10,10 to the function	
		For cubeswide=1 To x
			
			;For cubeszed=1 To y
			For cubeszed=1 To 1
				
			;SeedRnd (MilliSecs()) 
				cred= Rand(1,250) 
				cgreen = Rand(1,250) 
				cblue = Rand(1,250) 
				
				countcubes=countcubes+1
				
			;add a cube
				ode.ODEGeom=New ODEGeom
				ode\geom=dCreateBox(Space,cubex,cubey,cubez)
				dGeomSetPosition(ode\geom,(cubeswide*cubex)-15,(cubey*madsteps),(((cubeszed*(cubez)+((x*cubez)*madsteps))/10)-260)+(Z_ROW_GAP*madsteps))
				dGeomSetRotation(ode\geom,rotate_degrees,0,0)
				ode\mesh=CreateCube()
				ScaleMesh ode\mesh,cubex/2,cubey/2,cubez/2
				EntityColor ode\mesh,cred,cgreen,cblue
				
				;store the mem location of each cube
				colorthis(countcubes)=ode\mesh
				
			Next
			
		Next
		
		;Add the ramps between rows - not the most efficient but it works....
		wred=100
		wgreen=100
		wblue=100
		
		If madsteps &gt; 2
			
			If  madsteps Mod 2 = 1
				ode.ODEGeom=New ODEGeom
				ode\geom=dCreateBox(Space,cubex,2,cubez*8)
				dGeomSetPosition(ode\geom,((2*cubex)-cubex),(cubey*madsteps)-3,(((cubeszed*(cubez)+(((x*cubez)*madsteps))/10)-260)+(Z_ROW_GAP*madsteps))-(Z_ROW_GAP-70))
				dGeomSetRotation(ode\geom,-8,0,0)
				ode\mesh=CreateCube()
				ScaleMesh ode\mesh,cubex/2,1,(cubez*8)/2
				EntityColor ode\mesh,cred,cgreen,cblue
				
				;add a brick wall at oppposite end of ramp 
				
				ode.ODEGeom=New ODEGeom
				ode\geom=dCreateBox(Space,cubex,24,4)
				dGeomSetPosition(ode\geom,((cubeswide*cubex)-cubex),(cubey*madsteps)-25,(((cubeszed*(cubez)+(((x*cubez)*madsteps))/10)-260)+(Z_ROW_GAP*madsteps))-670);-(Z_ROW_GAP-70))
				dGeomSetRotation(ode\geom,0,0,0)
				ode\mesh=CreateCube()
				ScaleMesh ode\mesh,cubex/2,12,2
				EntityColor ode\mesh,cred,cgreen,cblue
				
				
			EndIf
			
			
			
			
		EndIf
		
		
		If Not madsteps Mod 2 = 1
			ode.ODEGeom=New ODEGeom
			ode\geom=dCreateBox(Space,cubex,2,cubez*8)
			dGeomSetPosition(ode\geom,((cubeswide*cubex)-cubex),(cubey*madsteps)-3,(((cubeszed*(cubez)+(((x*cubez)*madsteps))/10)-260)+(Z_ROW_GAP*madsteps))-(Z_ROW_GAP-70))
			dGeomSetRotation(ode\geom,-8,0,0)
			ode\mesh=CreateCube()
			ScaleMesh ode\mesh,cubex/2,1,(cubez*8)/2
			EntityColor ode\mesh,cred,cgreen,cblue
			
			ode.ODEGeom=New ODEGeom
			ode\geom=dCreateBox(Space,cubex,24,4)
		;dGeomSetPosition(ode\geom,((2*cubex)-cubex),(cubey*madsteps)-3,(((cubeszed*(cubez)+(((x*cubez)*madsteps))/10)-260)+(Z_ROW_GAP*madsteps))-(Z_ROW_GAP-70))
			dGeomSetPosition(ode\geom,((2*cubex)-cubex),(cubey*madsteps)-25,(((cubeszed*(cubez)+(((x*cubez)*madsteps))/10)-260)+(Z_ROW_GAP*madsteps))-660);-(Z_ROW_GAP-70))
			dGeomSetRotation(ode\geom,0,0,0)
			ode\mesh=CreateCube()
			ScaleMesh ode\mesh,cubex/2,12,2
			EntityColor ode\mesh,cred,cgreen,cblue
			
			
		EndIf 
		
		
		;end add ramps
		
		;-----------------------------------------
		
		;Add the borders to each row:
		
		ode.ODEGeom=New ODEGeom
		ode\geom=dCreateBox(Space,cubex*7,4,2)
		dGeomSetPosition(ode\geom,((2*cubex)+cubex*3),(cubey*madsteps)+(cubey-33),(((cubeszed*(cubez)+(((x*cubez)*madsteps))/10)-97)+(Z_ROW_GAP*madsteps))-260)
		;dGeomSetRotation(ode\geom,-10,0,0)
		ode\mesh=CreateCube()
		ScaleMesh ode\mesh,cubex*3.5,2,1
		EntityColor ode\mesh,cred,cgreen,cblue
		
		ode.ODEGeom=New ODEGeom
		ode\geom=dCreateBox(Space,cubex*7,4,2)
		dGeomSetPosition(ode\geom,((2*cubex)+cubex*3),(cubey*madsteps)+(cubey-33),(((cubeszed*(cubez)+(((x*cubez)*madsteps))/10)-168)+(Z_ROW_GAP*madsteps))-260)
		;dGeomSetRotation(ode\geom,-10,0,0)
		ode\mesh=CreateCube()
		ScaleMesh ode\mesh,cubex*3.5,2,1
		EntityColor ode\mesh,cred,cgreen,cblue
		
		;------------------------------------------
		
	Next
	
End Function 

;############################################################################

Function mgloadtext(filename$, ident$)
	
; function can load file dependent on ident: bmp | b3d	
	
	If ident$="bmp"
		filehandle = ReadFile (filename$)
		If filehandle &lt;&gt; 0
			this=LoadTexture(filename$)
		Else
			Print "cannot locate " + filename$
			Print "Press any key"
			WaitKey()
			End
		EndIf
	Else If ident$="b3d"
		filehandle = ReadFile (filename$)
		If filehandle &lt;&gt; 0	
			this=LoadMesh(filename$)
		Else
			Print "cannot locate " + filename$
			Print "Press Any Key"
			WaitKey()	
			End
		EndIf
	Else 
		Print "unrecognised file type press any key."
		WaitKey()			
	EndIf
	Print filename$ + "Loaded"
	
	Return this
	
End Function




;#############################################################################
;2 Car functions:

Function SetupCars()
	
	For carID=1 To 2
		For count=1 To 4
			Joint(carID,count)=dJointCreateHinge2(World,0)
			dJointAttach(Joint(carID,count),Car(carID),Wheel(carID,count))
			dJointSetHinge2Anchor(Joint(carID,count),dBodyGetPositionX(Wheel(carID,count)),dBodyGetPositionY(Wheel(carID,count)),dBodyGetPositionZ(Wheel(carID,count)))
			dJointSetHinge2Axis1(Joint(carID,count),0,1,0)
			dJointSetHinge2Axis2(Joint(carID,count),-1,0,0)
			dJointSetHinge2Param(Joint(carID,count),dParamSuspensionERP,0.8)
			dJointSetHinge2Param(Joint(carID,count),dParamSuspensionCFM,SuspensionHS)
			If count&gt;2
				dJointSetHinge2Param(Joint(carID,count),dParamLoStop,0)
				dJointSetHinge2Param(Joint(carID,count),dParamHiStop,0)
			End If
		Next
	Next
	
End Function


;#############################################
;SplitScreen update keys &amp; joypad for 2nd car
;#############################################


Function UpdateKeysCar1()
	
	
	;If lookat=1
; ### Player Control - Car 1
	
	If KeyDown(30)=1
		Force(1)=Force(1)+0.08
		If Force(1)&gt;30 Then Force(1)=30
	End If
	
	If KeyDown(44)=1
		Force(1)=Force(1)-0.1
		If Force(1)&lt;-10 Then Force(1)=-10
		If Force(1)&gt;0 Then Force(1)=Force(1)*0.97
	End If
	
	If KeyDown(30)=0 And KeyDown(44)=0 Then Force(1)=Force(1)*0.99
	
	If KeyDown(203)=1 Or KeyDown(205)=1
		If KeyDown(203)=1
			Steer(1)=0.5
		Else
			Steer(1)=-0.5
		End If
	Else
		Steer(1)=0.0
	End If
	
	If KeyHit(57)=1
		Force(1)=0.0
		dBodySetRotation(Car(1),dGeomGetPitch(CGeom(1)),dGeomGetYaw(CGeom(1)),0)
	End If
	
End Function
; ###################################################################################################
Function UpdateJoypadCar2()
	
	;read in joypad status	
	X1_axis=MapAxis(j(Controller_port)\x1id,j(Controller_port)\x1invert)
	Y1_axis=MapAxis(j(Controller_port)\y1id,j(Controller_port)\y1invert)
	X2_axis=MapAxis(j(Controller_port)\x2id,j(Controller_port)\x2invert)
	Y2_axis=MapAxis(j(Controller_port)\y2id,j(Controller_port)\y2invert)
	
;If KeyDown(30)=1
	If Y1_Axis = -1
		Force(2)=Force(2)+0.08
		If Force(2)&gt;30 Then Force(2)=30
	End If
	
;If KeyDown(44)=1
	If Y1_Axis = 1
		Force(2)=Force(2)-0.1
		If Force(2)&lt;-10 Then Force(2)=-10
		If Force(2)&gt;0 Then Force(2)=Force(2)*0.97
	End If
	
;If KeyDown(30)=0 And KeyDown(44)=0 Then Force=Force*0.99
	If Y1_Axis = 0
		Force(2)=Force(2)*0.99
	EndIf
	
	;Force2=Force  ; truck2 debug
	
;If KeyDown(203)=1 Or KeyDown(205)=1
	If X2_Axis  = -1 Or X2_Axis = 1
		If X2_Axis=-1
			Steer(2)=0.5
		Else
			Steer(2)=-0.5
		End If
	Else
		Steer(2)=0
	End If
	
	If KeyHit(28)=1  ; enter to reset car 2
		Force(2)=0.0
		dBodySetRotation(Car(2),dGeomGetPitch(CGeom(2)),dGeomGetYaw(CGeom(2)),0)
	End If	
	
End Function
; ###################################################################################################

Function UpdateKeys(); invoke this function if you want to have alternate control via keyboard
	
	
	If lookat=1
; ### Player Control - Car 1
		
		If KeyDown(30)=1
			Force(1)=Force(1)+0.08
			If Force(1)&gt;30 Then Force(1)=30
		End If
		
		If KeyDown(44)=1
			Force(1)=Force(1)-0.1
			If Force(1)&lt;-10 Then Force(1)=-10
			If Force(1)&gt;0 Then Force(1)=Force(1)*0.97
		End If
		
		If KeyDown(30)=0 And KeyDown(44)=0 Then Force(1)=Force(1)*0.99
		
		If KeyDown(203)=1 Or KeyDown(205)=1
			If KeyDown(203)=1
				Steer(1)=0.5
			Else
				Steer(1)=-0.5
			End If
		Else
			Steer(1)=0.0
		End If
		
		If KeyHit(57)=1
			Force(1)=0.0
			dBodySetRotation(Car(1),dGeomGetPitch(CGeom(1)),dGeomGetYaw(CGeom(1)),0)
		End If
		
	Else
		
		If KeyDown(30)=1
			Force(2)=Force(2)+0.08
			If Force(2)&gt;30 Then Force(2)=30
		End If
		
		If KeyDown(44)=1
			Force(2)=Force(2)-0.1
			If Force(2)&lt;-10 Then Force(2)=-10
			If Force(2)&gt;0 Then Force(2)=Force(2)*0.97
		End If
		
		If KeyDown(30)=0 And KeyDown(44)=0 Then Force(2)=Force(2)*0.99
		
		If KeyDown(203)=1 Or KeyDown(205)=1
			If KeyDown(203)=1
				Steer(2)=0.5
			Else
				Steer(2)=-0.5
			End If
		Else
			Steer(2)=0.0
		End If
		
		If KeyHit(57)=1
			Force(2)=0.0
			dBodySetRotation(Car(2),dGeomGetPitch(CGeom(2)),dGeomGetYaw(CGeom(2)),0)
		End If
		
	EndIf
	
	
	
	ControlTimer=ControlTimer-1
	
	If ControlTimer&lt;=1
		ControlTimer=MAXCONTROLTIME
		If lookat=1
			lookat=0
		Else
			lookat=1
		EndIf
		
	EndIf
	
	
End Function

;=========================================================================


Function UpdateCars()
	
	For carID=1 To 2
		
		If carID = 1
			funnelx=dBodyGetPositionX(Car(1))
			funnely=dBodyGetPositionY(Car(1))
			funnelz=dBodyGetPositionZ(Car(1))
		EndIf
		
		
		
		
		For count=1 To 4
			dBodyEnable(Wheel(carID,count))
		Next
		
		dBodyEnable(Car(carID))
		
		For count=1 To 4
			dJointSetHinge2Param(Joint(carID,count),dParamVel2,Force(carID))
			dJointSetHinge2Param(Joint(carID,count),dParamFMax2,Torque)
		Next
		
		For count=1 To 2
			angle#=Steer(carID)-dJointGetHinge2Angle1(Joint(carID,count))
			dJointSetHinge2Param(Joint(carID,count),dParamVel,angle)
			dJointSetHinge2Param(Joint(carID,count),dParamFMax,400)
		Next
	Next
	
End Function

;#########################################################################


Function SplitScreen(Camera1,Camera2,VerticalSplit)
	If VerticalSplit Then
		CameraViewport Camera1,0,0,GraphicsWidth()/2,GraphicsHeight()
		CameraViewport Camera2,GraphicsWidth()/2,0,GraphicsWidth()/2,GraphicsHeight()
	Else
		CameraViewport Camera1,0,0,GraphicsWidth(),GraphicsHeight()/2
		CameraViewport Camera2,0,GraphicsHeight()/2,GraphicsWidth(),GraphicsHeight()/2
	End If
End Function



Function SplitScreenthree(Camera1,Camera2,Camera3,VerticalSplit)
	If VerticalSplit Then
		CameraViewport Camera1,0,0,GraphicsWidth()/2,GraphicsHeight()
		CameraViewport Camera2,GraphicsWidth()/2,0,GraphicsWidth()/2,GraphicsHeight()
	Else
		twothirdswidth=(GraphicsWidth()/3)*2
		onethirdwidth=GraphicsWidth()-twothirdswidth
		
		
		
		;CameraViewport Camera1,0,0,GraphicsWidth(),GraphicsHeight()/2
		CameraViewport Camera1,0,0,twothirdswidth,GraphicsHeight()/2
		;CameraViewport Camera2,0,GraphicsHeight()/2,GraphicsWidth(),GraphicsHeight()/2
		CameraViewport Camera2,0,GraphicsHeight()/2,twothirdswidth,GraphicsHeight()/2
		;CameraViewport Camera3,
		CameraViewport Camera3,twothirdswidth+10,0,onethirdwidth-10,GraphicsHeight()
		
	End If
End Function

; ###################################################################################################
; ###################################################################################################

;FUNCTIONS TO READ JOYPAD

Function readconfig()
	filename = ReadFile ("joypad.cfg")
	If filename &lt;&gt; 0
		For port = 0 To 3
			tmp = ReadLine (filename) ; skip this line in the file
			j(port)\x1id = ReadLine (filename)
			j(port)\y1id = ReadLine (filename)
			j(port)\x2id  = ReadLine (filename)
			j(port)\y2id = ReadLine (filename)
			j(port)\x1invert = ReadLine (filename)
			j(port)\y1invert = ReadLine (filename)
			j(port)\x2invert = ReadLine (filename)
			j(port)\y2invert = ReadLine (filename)
		Next 
		CloseFile (filename)
		info$ = "config file opened"
	Else
		info$ = "load failed, or no .cfg file present"
	EndIf 
End Function

Function readgraphicsmode()
	filename = ReadFile ("graphics.cfg")
	If filename &lt;&gt; 0
		
		tmp = ReadLine (filename) ; skip this line in the file
		x = ReadLine (filename) ;
		tmp = ReadLine (filename) ; skip this line in the file
		y = ReadLine (filename) ;
		tmp = ReadLine (filename) ; skip this line in the file
		depth = ReadLine (filename) ;
		tmp = ReadLine (filename) ; skip this line in the file
		modea = ReadLine (filename) ;
		
		CloseFile (filename)
		info$ = "graphics config file opened"+x +" "+y+" "+mode+" "+thisj
		Graphics3D x,y,depth,modea
		Print info$
	;WaitKey()
	Else
		info$ = "config load failed, or no .cfg file present, press any key"
		Print info$
		Graphics3D 800,600,32,0
		Print info$
		WaitKey()
	EndIf 	
End Function


Function UpdateSmoke(emitter)
	
	;PositionEntity emitter, Sin(MilliSecs() * .2) * 5, 5, 10 ;
	;PositionEntity emitter,0,1,1;move the emitter
	;PositionEntity emitter,dGeomGetPositionX(Car),dGeomGetPositionY(Car),dGeomGetPositionZ(Car)
	UpdateParticles() ;Updates the particles and the emitters
	;RenderWorld  in main loop
	;Flip         in main loop
	
End Function

Function UpdateSmoke2()
	
	;PositionEntity emitter, Sin(MilliSecs() * .2) * 5, 5, 10 ;
	;PositionEntity emitter,0,1,1;move the emitter
	;PositionEntity emitter,dGeomGetPositionX(Car),dGeomGetPositionY(Car),dGeomGetPositionZ(Car)
	UpdateParticles() ;Updates the particles and the emitters
	;RenderWorld  in main loop
	;Flip         in main loop
	
End Function

Function UpdateCubes()
	For x=1 To Height*4
		PositionEntity Cubo(x),dGeomGetPositionX(CuboGeom(x)),dGeomGetPositionY(CuboGeom(x)),dGeomGetPositionZ(CuboGeom(x))
		RotateEntity Cubo(x),dGeomGetPitch(CuboGeom(x)),dGeomGetYaw(CuboGeom(x)),dGeomGetRoll(CuboGeom(x))
	Next
End Function

Function UpdateBrickos()
	For x=1 To Height*4
		PositionEntity Bricko(x),dGeomGetPositionX(BrickoGeom(x)),dGeomGetPositionY(BrickoGeom(x)),dGeomGetPositionZ(BrickoGeom(x))
		RotateEntity Bricko(x),dGeomGetPitch(BrickoGeom(x)),dGeomGetYaw(BrickoGeom(x)),dGeomGetRoll(BrickoGeom(x))
	Next
End Function

Function UpdateSickos()
	For x=1 To Height*4
		PositionEntity Sicko(x),dGeomGetPositionX(SickoGeom(x)),dGeomGetPositionY(SickoGeom(x)),dGeomGetPositionZ(SickoGeom(x))
		RotateEntity Sicko(x),dGeomGetPitch(SickoGeom(x)),dGeomGetYaw(SickoGeom(x)),dGeomGetRoll(SickoGeom(x))
	Next
End Function

;======================
; detect input
;======================
Function MapAxis#( axis, invert )
	Select axis
		Case 1
			joy#=JoyX(Controller_port)
		Case 2
			joy#=JoyY(Controller_port)
		Case 3
			joy#=JoyZ(Controller_port)
		Case 4
			joy#=JoyPitch(Controller_port)/180
		Case 5
			joy#=JoyRoll(Controller_port)/180
		Case 6
			joy#=JoyYaw(Controller_port)/180
		Case 7
			joy#=JoyU(Controller_port)
		Case 8
			joy#=JoyV(Controller_port)
	End Select
	Return (joy# * invert)
End Function

;END FUNCTIONS TO READ JOYPAD

; ###################################################################################################



</textarea> <br><br></td></tr></table><br>
<a name="1018302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br><img src="http://sites.google.com/site/odriozolajuanignacio/awc_phisics.jpg"><br><br>i updated the awc world editor. <br>Joints and Phisics objects are displayed and managed better, but still working. There are some new features like wayPoints placement, export to b3d and lightmapping.<br><br><img src="http://sites.google.com/site/odriozolajuanignacio/awc_lightmap.jpg"><br><br><img src="http://sites.google.com/site/odriozolajuanignacio/awc_paths.jpg"><br><br><br><a href="http://blitzbasic.com/toolbox/toolbox.php?tool=247" target="_blank">http://blitzbasic.com/toolbox/toolbox.php?tool=247</a><br><br><br>Juan <br><br></td></tr></table><br>
<a name="1018343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Charrua, your editor is looking very impressive, the dots showing the path of the flying object looks interesting. <br><br></td></tr></table><br>
<a name="1018359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank's BlitzPlotter<br><br>the dots are simply WritePixelFast after RenderWorld, is a function of many included on Paths.bb, a Path Following System i recently place in the code archives.<br><br>The editor needs a way of enter/edit phiscs params, next week probably i update the editor with this capabilities.<br><br>The most important part is the "ode lib", "awc ode lib" is an interface to that lib, it receives the info from the editor and do call to "ode lib" wich is general purpose and may facilitate the work with ode.<br><br>"ode lib" has general purpose Ode routines. The one i think is very useful creates a Geom and Body from a blitz entity (oCreate()).<br>There are some Scale Diferences, 1.98 instead of 2.0 and 0.99 instead of 1-0 when creating Geoms. Slightly smaller than it should be, the purpose is that the blitz entity should be a door, but normally, doors has a small separation from floor. Any way if you need or think isn't necesary, change it.<br><br>Juan <br><br></td></tr></table><br>
<a name="1019476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Uber Jase</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seeing as the Physx wrapper seems dead I am looking for a new physics wrapper and this 1 looks great and well supported.  Just a few question though before I buy:)<br><br>Does the engine support boyancy? Has it got kenetic movement for stuff like machinary ect?<br><br>Oh, and is it easy to use like the Physx wrapper was?<br><br>Thanks:) <br><br></td></tr></table><br>
<a name="1019516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes it supports 'simple' buoyancy. Can you expand on the second question? I'm not quite sure what you mean.<br><br>I can't answer the third question as I've not used Physx, but you can try the free JV-ODE demo version to get a taster. <br><br></td></tr></table><br>
<a name="1020522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Urrrgh, this is making me bang my head against a wall. I'm trying to create a simple helicopter game, and I thought I could counterweight the helicopter with an invisible non-collidable geom underneath it, so that the player can't easily turn it upside down. Now, the geom is definitely there, but it's not having any effect on the motion of the chopper. I'm using AddForce to keep the chopper in the air, and dBodySetAngularVel to rotate the chopper. Now, I guess dBodySetAngularVel would overwrite any movement caused by the "weight", but when the user stops moving the mouse, dBodySetAngularVel stops being called, so I expected the chopper to auto-right itself.<br><br>I'm going about this the wrong way aren't I? <br><br></td></tr></table><br>
<a name="1020554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well you've got the right idea, but you've overlooked something. A geom is only used for collision geometry, so it does not have any weight. You need to add a body instead of a geom, you can then give this extra body some mass (weight). To connect the counterweight body to your helicopter body, you can use a fixed joint. <br><br></td></tr></table><br>
<a name="1020722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I see. That makes much more sense. Thanks, I'll give that a try! Not delved into joints yet, so this is sure to be <i>a lot of fun</i>. <br><br></td></tr></table><br>
<a name="1020769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> You will be glad to hear the fixed joint is relatively simple. After you've positioned the helicopter and counterweight bodies during your setup routine, you would then connect them like this...<br><br><i>FixedJoint=dJointCreateFixed(World,0)<br>dJointAttach(FixedJoint,HelicopterBody,CounterweightBody)</i> <br><br></td></tr></table><br>
<a name="1021255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >outsider</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br><br>Can I sell my JV-ODE lib copy? <br><br></td></tr></table><br>
<a name="1021300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes if you wish.<br><br>You will need to confirm the new owners details (via email) before they become a registered user though. <br><br></td></tr></table><br>
<a name="1021322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> May I do a question not so JV-ODE related?<br><br>VIP3R, I was looking at the Ragdoll-Zombie example, and I wondered which program did you use to edit the zombie model so it fitted in the demo. <br><br></td></tr></table><br>
<a name="1021327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure :)<br><br>It was the reverse, I made the demo fit the zombie model (the original Psionics3D version).<br><br>You will find some model/animation editing tools <a href="/topics.php?forum=83" target="_blank">here</a>. <br><br></td></tr></table><br>
<a name="1021336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You will be glad to hear the fixed joint is relatively simple. After you've positioned the helicopter and counterweight bodies during your setup routine, you would then connect them like this...<br><br>FixedJoint=dJointCreateFixed(World,0)<br>dJointAttach(FixedJoint,HelicopterBody,CounterweightBody) <br></div><br><br>Thanks, that confirms it, that's exactly what I'm doing. Unfortunately, I'm getting some very strange effects :(<br><br>After doing the above, I position HelicopterBody in the world, and yet it's height seems to be variable depending on the mass of the helicopter and/or the counterweight body. Which I <i>really</i> don't understand. Going to have to strip everything out to figure this out. Grrrr, I <i>hate</i> physics engines. Not your fault, I blame ODE! <br><br></td></tr></table><br>
<a name="1021381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you can post or send me some code I can take a look for you. <br><br></td></tr></table><br>
<a name="1021462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> That would be awesome, and very kind of you.<br><br>This is my routine for assembling the helicopter. If you like, I can just zip up and email you everything, it might make more sense that way. This function scans through all the loaded data to find joints, geoms and bodies for the actor specified in name$. The bodies are added and positioned first (with a "root" one being chosen as the "handle" of the whole thing), then the geoms are added to the bodies, then the joints are added last, and joined to the specified bodies.<br><pre class=code>
Type Actor
	Field aData.ActorData
	Field modelhandle%

	Field bodyRoot%
	Field bodies%[100]
	Field bodiesLayers$[100]
	Field bodiesIds$[100]
	Field geoms%[100]
	Field geomsLayers$[100]
	Field geomsIds$[100]
	Field joints%[100]
	Field mass%

	Field helperPivot%
End Type

Function Actor_new.Actor(name$)
this.actor=New Actor
this\aData.ActorData=ActorData_get(name$)

this\modelhandle% = CopyEntity(this\aData\modelhandle%)
CreateShadowCaster this\modelhandle%

i%=0
For cab.ActorBody=Each ActorBody
	If cab\aData=this\aData
		this\bodies[i%] = dBodyCreate(world)
		this\mass%=dMassCreate()
		If cab\bodyType$="box"
			dMassSetBoxTotal this\mass%, cab\mass#, cab\xsize#,cab\ysize#,cab\zsize#
		EndIf
		this\bodiesLayers[i%]=cab\layerName$
		this\bodiesIds[i%]=cab\id$
		dBodySetMass(this\bodies[i%],this\mass% )
		dBodySetPosition(this\bodies[i%],cab\xpos#,cab\ypos#,cab\zpos#)
		dBodySetRotation(this\bodies[i%],cab\xrot#,cab\yrot#,cab\zrot#)
		If cab\maxAngularSpeed#&lt;&gt;-1 dBodySetMaxAngularSpeed(this\bodies[i%],cab\maxAngularSpeed#):DebugLog "Set MAS"
		;dBodySetFiniteRotationMode(this\body%,1)
		If cab\root%=1
			this\bodyRoot%=this\bodies[i%]
			DebugLog "Root:"+i%+" "+cab\id$
		EndIf

		dBodyDisable(this\bodies[i%])		
		i%=i%+1
	EndIf
Next

i%=0
For cag.ActorGeom= Each ActorGeom
	If cag\aData=this\aData
		;If cag\geomSpace$=""
			spawnSpace=actorSpace
		;ElseIf cag\geomSpace$="voidWeight"
		;	spawnSpace=voidSpace
		;EndIf
		
		If cag\geomType$="box"
			this\geoms%[i%]=dCreateBox(spawnSpace,cag\xsize#,cag\ysize#,cag\zsize#)
		EndIf
		this\geomsLayers[i%]=cag\layerName$
		this\geomsIds[i%]=cag\id$
		For j%=0 To 99
			If this\bodiesLayers[j%]=this\geomsLayers[i%]
				dGeomSetBody this\geoms%[i%],this\bodies%[j%]
			EndIf
		Next
		dGeomSetOffsetPosition(this\geoms%[i%],cag\xpos#,cag\ypos#,cag\zpos#)

		;dGeomSetSurfaceSlip1(this\geoms%[i%],1)
		;dGeomSetSurfaceSlip2(this\geoms%[i%],1)
		;dGeomSetSurfaceMu(this\geoms%[i%],1)
		;dBodySetSurfaceBounce(this\geoms%[i%],0)
		i%=i%+1
	EndIf
Next

i%=0
For caj.ActorJoint=Each ActorJoint
	If caj\aData=this\aData
		joint1%=-1
		joint2%=-1
		For j%=0 To 99
			If this\bodiesIds$[j%]=caj\jointId1$
				For i%=0 To 99
					If this\bodiesIds$[i%]=caj\jointId2$
						joint1%=j%
						joint2%=i%
					EndIf
				Next
			EndIf
		Next
		If joint1%=-1 Or joint2%=-1 RuntimeError("Bad joint data in "+this\aData\name$+" ("+joint1%+" to "+joint2%+")")
		If caj\jointType$="fixed"
			this\joints%[i%]=dJointCreateFixed (world, 0);
			dJointAttach (this\joints%[i%], this\bodies[joint1%], this\bodies[joint2%]);
			;dJointSetFixed (this\joints%[i%])
			;DebugLog "Attached joint: "+joint1%+" to "+joint2%
			i%=i%+1
		EndIf
	EndIf
Next

For i%=0 To 99
	If this\bodies%[i%]&lt;&gt;0
		dBodySetLinearVel(this\bodies[i%],0,0,0)
		dBodySetAngularVel(this\bodies[i%],0,0,0)
		dBodyEnable(this\bodies%[i%])
	EndIf
Next


this\helperPivot%=CreatePivot()

Return this
End Function
</pre><br><br>And this is where I call the above, and then position it using the "root" one mentioned above.<br><br><pre class=code>
player.Actor=Actor_new("playerChopper")
dBodyDisable(player\bodyRoot%)
dBodySetPosition(player\bodyRoot%,0,200,0)
dBodyEnable(player\bodyRoot%)
</pre><br><br>I know for sure that the data being loaded is correct, so I'm kind of stumped about what the problem is. If this looks okay to you, then it must be in the code I'm using to apply force to the chopper. Somehow.<br><br>Thanks for looking, I appreciate it. <br><br></td></tr></table><br>
<a name="1021548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> It looks ok, it's a bit difficult to see if the joints are connecting between the correct bodies. I might need the entire code to check it fully.<br><br>Going back to the original issue, if the helicopter/counterweight increases, you will need to increase the forces too. If you're doing that and the joints are connecting the correct bodies, it might be caused by the ordering of the setup/run. For example, you may be stepping the simulation during the setup procedure when it should not be stepped until the setup is complete. This would cause the helicopter to start at different heights depending on the mass.<br><br>Send me the code via email if you like and I'll check it for you. <br><br></td></tr></table><br>
<a name="1021674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as I understand, I'm doing all that. Emailing you the code now. The above excerpt is from the Actors.bb file. wf.bb is the main file. Thanks again for taking the time to look at this. Currently, the numbers output on the debug log is the Y position of the helicopter. As you can see, at the beginnig it rapidly changes from what it should be to settle on a different value altogether.<br><br>I really hope I'm not just doing something dumb. <br><br></td></tr></table><br>
<a name="1021755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, got it.<br><br>Ok, what's happening was this... you created the helicopter body at ypos=0 and the counterweight body at ypos=-10, then before you step the simulation you change the helicopter body to ypos=200, expecting the counterweight to move to ypos=190. In actual fact the counterweight was still at -10 not 190, so when you stepped the sim, the fixed joint acted like an elastic band between the helicopter and counterweight. It pulled them both towards each other, thus lowering the height of the helicopter. The helicopter and counterweight also ended up at the same y position, instead of being separated by 10 units.<br><br>There was some important info I forgot about the fixed joint, the <i>dJointSetFixed(Joint)</i> function must be called after attaching the joint to maintain their relative positions, otherwise they will both be joined at their center.<br><br>To fix the code you need to do two things, first you must move the counterweight body as well as the helicopter body in 'wf.bb'...<br><br><i>player.Actor=Actor_new("playerChopper")<br>dBodyDisable(player\bodyRoot%)<br>dBodySetPosition(player\bodyRoot%,0,200,0)<br>dBodySetPosition(CountweightBody,0,190,0) ; &lt;&lt;&lt;&lt; HERE<br>dBodyEnable(player\bodyRoot%)</i><br><br>...otherwise you will get that elastic band effect.<br><br>Next, remove the comment here to maintain the relative positions in 'Actor.bb'...<br><br><i>;dJointSetFixed (this\joints%[i%])</i><br><br>It should work as expected once the above is done. <br><br></td></tr></table><br>
<a name="1021992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, yes, I was experimenting with the dJointSetFixed command, and commented it out when it didn't seem to be helping. I thought once they were joined via a joint, they'd all move as one.<br><br>Thanks very much (again!) for your assistance on this, I'll plug in this change when I'm in front of the code. <br><br></td></tr></table><br>
<a name="1022580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey VIP3R,<br>Im working on a project, and I was now starting to set up the physics, related to the character movement. But since Im going to use JV-ODE in the game it would be a little complicated to mix the Blitz native collision system with the JV-ODE one.<br>The thing is, using forces would be harder since the movement is based on a constant velocity. So I thought about using the command dBodySetLinearVel(). The problem is I need to apply a Relative Velocity, so it moves where it faces. But I didnt find any command like "dBodySetRelLinearVel()", only for forces.<br><br>And do you think this is the better way doing this? (Im asking because it would be better to use forces now them make everything on velocity and then have troubles in the future)<br><br>Thanks (:<br>Cya <br><br></td></tr></table><br>
<a name="1022619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Glenny-boy: You're welcome :)<br><br>There isn't a relative version of <i>dBodySetLinearVel()</i>, although it could be done if you work out how much velocity to apply to each axis (X/Y/Z).<br><br>I would recommend using forces instead. If you need to constantly apply/update the velocity, you will most likely have problems as it will override the physics responses. <br><br></td></tr></table><br>
<a name="1022667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't used JV-ODE for awhile, I've been using PhysX but I have both. I was wondering, are there any magnet/vehicle commands? <br><br></td></tr></table><br>
<a name="1022726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey VIP3R,<br><br>It really seems like its worth doing it with forces. But Im facing some problems. Im gonna focus on one of them that is being more complicated to me:<br><br>Im using a Sphere as a geometry to the character since I guess its faster then the other collision. For Y Axis rotation (with the mouse), Im using a variable that changes with the MouseXSpeed and then using "dBodySetRotation(0,Variable,0)" after then WorldStep for making the character face the direction. For making the movements Im just using "dBodyAddRelForce" and a constant force (still gonna work it). The problem is that it seens like the sphere is not responding to the Friction the way I was expecting. Seens like the accelleration gets harder because of the friction, but when its already moving it does not desaccellerate. Doesnt matter how bigger the Mu value is. I tested without the command "dBodySetRotation" and the ball start rolling (dur) but it seens like the issue is still there. However, if I use a Box instead of a sphere seens like it just respond better when the rotation command is not there.<br><br>Is there a problem about using dBodySetRotation for forcing some angule for a body while its reacting to the simulation?<br>For this character simulation is a sphere the best geom to use?<br><br>Sorry for asking too much<br><br>Cya (: <br><br></td></tr></table><br>
<a name="1022760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> @GIB3D: There are no 'built-in' functions for magnets/vehicles, both can be simulated but you will have to construct them yourself. There was a magnet demo in one of the older JV-ODE threads IIRC.<br><br>@ian caio: No problem, feel free to ask :)<br><br>Using <i>dBodySetRotation()</i> while the body is reacting will override the physics responses, in the same way as setting the velocity manually.<br><br>The following functions should only be used during the initial setup of an object, or when you wish to reset an object...<br><br><i>dBodySetPosition(body,x#,y#,z#)<br>dBodySetRotation(body,pitch#,yaw#,roll#)<br>dBodySetQuaternion(body,qw#,qx#,qy#,qz#)<br>dBodySetAxisAngle(body,angle#,rx#,ry#,rz#)<br>dBodySetLinearVel(body,x#,y#,z#)<br>dBodySetAngularVel(body,x#,y#,z#)</i><br><br>A sphere can work well for a character, it's better than using an upright capsule/ray IMO. There's a demo that might help you located <a href="/posts.php?topic=79489#909350" target="_blank">here</a>. <br><br></td></tr></table><br>
<a name="1023130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for the Demo VIP3R,<br>Its already helping a lot. Im gonna go make a sketch-up, of the way I want the character to behave in the physics, and change the demo until I get the final result. But Im getting a nice idea of how its supposed to work.<br><br>Also, thanks for the Fix on the JV-ODE Docs (only saw it a few minutes ago), its working perfectly.<br><br>By the way, I sent you an email (on your profile mail) (:<br><br>Cya <br><br></td></tr></table><br>
<a name="1023139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're welcome :) <br><br></td></tr></table><br>
<a name="1023593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, How can I specify the kinetic friction coefficient? I have saw that there are two commands: dContactSetMu and dContactSetMu2. Is that what Mu2 stands for? And is there a way to make a geometry not affected by friction without having to use dContactSetMu giving 0 as value? I have tryied using the command "dGeomContactSetMu" and giving zero as parameter, but it didnt seen to work.<br><br>Thanks,<br>Cya (: <br><br></td></tr></table><br>
<a name="1023624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, Mu sets the friction coefficient and Mu2 is used to set the friction coefficient in the perpendicular direction (if used, otherwise Mu sets both directions). There's more information in the official ODE user guide, see the 'contact' joint.<br><br>Using the <i>dGeomContact...()</i> functions allows you to set the friction per geom. If it wasn't working, you probably didn't set the geom contact mode for that geom...<br><br><i>dGeomContactSetMode(geom,dContactSlip1)</i><br><br>...you have to set the geom contact mode before the geom contact functions will work.<br><br>Look at the 'Demo-GeomFriction' demo, it shows how to set different friction values on individual geoms. <br><br></td></tr></table><br>
<a name="1023640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply,<br><br>I Guess I got it. Mu2 is for the X Axis friction of a geom.<br>I tryied to read about the Contact joints in the ODE User Guide, but didnt understand the modes really well.<br>After setting the Contact Mode I only have to set Mu to "0" for making the geom not affected by the friction?<br><br>I have read here, that ODE simulates friction another way. And that Mu does not correspond to the Friction Coefficient. Is this right?<br><br>Another question that has a little to do with that. If I dont create any mass, what is going to be the mass of the object?<br><br>Cya (: <br><br></td></tr></table><br>
<a name="1023708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been making some tests, and I guess I have the answer for a few of my own questions:<br><br>1 - For making the Geometry not affected by the friction, I had to use a value that neutralized the other Geometry Mu. For example, I made a wall with a value of <i>32Mu</i>. For making the other geometry dont react to the wall friction, I had to give a <i>-32Mu</i> value. It didnt seen to affect the friction with other geometries that had a Mu value under <i>32Mu</i>. Im just kind of confused about why is this necessary, But Im gonna try to read the UserGuide again, look for something about this.<br><br>2 - Yeah, Mu does not correspond to the Friction Coefficient. But I cant really explain why. Its on the UserGuide thought, Im just not getting it really well.<br><br>3 - If you dont create any mass, the standard mass is gonna be <i>1</i>:<br>Well, considering that the <b>stepsize#</b> parameter of the <b>dWorldStep</b> command means the time elapsed in seconds, using the formula <i>F=m*a</i> I realized that if there was no friction or collision, if I applied a force of <i>10N</i> in the Z direction, and <i>0.1</i> second was elapsed, the speed would be <i>1</i>. If you take those information and use the formula you will get that the mass is equivalent to <i>1</i>.<br><br>All of these answers were get with tests, so Im not pretty sure of some of them.<br><br>Cya<br><br>EDIT:<br>Just found something interesting. Seens like if you use the <b><i>dContactApprox1</i></b> contact mode it makes the Mu value an approximation to the Friction Coefficient. For Example, using this mode would make <i>0.5Mu</i> equivalent to the Columbus formula coefficient. Im just going to try to understand the ODE standard friction system. If I find something I post here. <br><br></td></tr></table><br>
<a name="1023765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I can see where the confusion is coming from.<br><br>From the ODE guide (Physics model - Friction Approximation)...<br><pre class=code>
The Coulomb friction model is a simple, but effective way to model friction at contact points.
It is a simple relationship between the normal and tangential forces present at a contact point
(see the contact joint section for a description of these forces). The rule is:

| fT | &lt;= mu * | fN |

where fN and fT are the normal and tangential force vectors respectively,
and mu is the friction coefficient (typically a number around 1.0).
</pre>Now, if you have two colliding objects, one with zero friction and the other with X amount of friction, the total friction is the mean of the two (0 + X / 2). This is the default contact surface mode behaviour in JV-ODE.<br><br>There are three contact surface modes in JV-ODE - mean, maximum and minimum, which can be used to change the way the contact properties like friction are used. Changing the contact surface mode will be global, it is not per geom. See the <i>dSetInternalContactSurfaceMode(mode)</i> function in the JV-ODE Function Reference for more information.<br><br>Using the <i>dContactApprox1</i> contact mode will use a different approximation to the default (constant-force-limit).<br><br>You can either customise the friction for the colliding objects so that the mean value results in zero. Or, you can change the contact surface mode to minimum, so that only the lowest value (zero) is used.<br><br>Regarding the mass question, you're correct, the default mass is 1. <br><br></td></tr></table><br>
<a name="1023855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Before I posted this I had readed the Friction Approximation section of the UserGuide, but as I said, I didnt understant it really well..<br><br>Seens like ODE is able to use 2 models of friction. In the first one the <i>Mu</i> means the maximum tangencial force that can be applied in the object. And its independent of the Normal. But when I use <i>Mu=32</i> I dont have to apply a <i>32N</i> or higher force in the object for moving it. So I guess its not as I think it is..<br><br>The second one seens to be the closest one to the Coloumb friction model.<br><br>Maybe I could use (<i>-dInifinity</i>) for the <i>Mu</i> value. That way a object <i>Mu</i> would never be lower then the main geometry <i>Mu</i>. Just dont know if this takes more processing time..<br><br>Thanks for answering,<br>Cya <br><br></td></tr></table><br>
<a name="1024309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> just in case some one is interested in:<br><br><a href="http://blitzbasic.com/Community/posts.php?topic=90118" target="_blank">http://blitzbasic.com/Community/posts.php?topic=90118</a><br><br>Juan <br><br></td></tr></table><br>
<a name="1025095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, i have some probrem with the ode physics.<br><br>i have a simple car simulation, one car, and one scenary.<br><br>i have this ode objets, 4 wheels, 4 joints and the carbody and the trimesh scenary.<br><br>some data of the scenary mesh<br>polys : 4005<br>Verts : 3280<br><br><pre class=code> 

Global terreno = LoadMesh("b3d\terreno.b3d")
Global terreno_ode = CreateTriMesh(Space,terreno)
dGeomContactSetMu(terreno_ode,200)

</pre><br><br>in my computers, the game work perfectly.<br>but in others computers, the car jump like crazy.<br><br>i have the same problems in the Simple Race time ago.<br><br>my teory is, in poor computers, maybe the ode crash becouse there is to many polys for the trimesh scenary??<br><br>i don't know...<br><br>i use the standar ode values from car demo.<br><br>regards!, Santiago <br><br></td></tr></table><br>
<a name="1025164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have anywhere near enough information tbh.<br><br>Is it different behaviour (cars jittery) only, or an actual crash or both?<br><br>What are the specs of the computers? (OS / CPU / GPU / Memory / Display Hz)<br><br>What type of timing are you using?<br><br>What type of physics stepping are you using? (WorldStep / QuickStep)<br><br>It is not likely that the TriMesh polycount is anything to do with it directly, but it may be linked to the type of space you use (HashSpace, SimpleSpace etc). <br><br></td></tr></table><br>
<a name="1025200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi :), i will post all information i have, and the loop code use for this game.<br><br>bad behaviour :   youtubevideo <a href="http://www.youtube.com/watch?v=HA8ylhLjoco" target="_blank">http://www.youtube.com/watch?v=HA8ylhLjoco</a><br>this video is accelerated becouse was record from a cellular phone<br><br>good behaviour : <a href="http://www.youtube.com/user/indiesoft#p/a/u/1/2dd3ZXIs2Ys" target="_blank">http://www.youtube.com/user/indiesoft#p/a/u/1/2dd3ZXIs2Ys</a><br><br><br>the car behaviour is no real, everytime a wheel touch the scenary, is like if the sceanary return with a big force the car.<br><br>specs of the computers : the game fail in SO : Vista on a HP and Compact computer, i don't have more data of the other computers. :(<br><br><pre class=code>

 Not KeyHit(1)
		
	
		
		
		update_mouse()
		update_cam()
		update_keys()
		UpdateCars()
		UpdateGeoms()
		update_rules()
		
		
		
		PTime=MilliSecs()
		dSpaceCollide(Space,World,ContactGroup)
		dWorldQuickStep(World,0.1)
		dJointGroupEmpty(ContactGroup)
		PhysicsTime#=MilliSecs()-PTime
		
		
	
	
	
	UpdateWorld()
	RenderWorld()
	
	
	text_2d()
	Flip()
		
Wend


</pre><br><br>if you wan't, i can send by mail a game copy to try, is only 8mb.<br>i test the game in all computers i have, no problems, but some people have this problem, maybe is the computer spects? <br><br></td></tr></table><br>
<a name="1025261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, are you using any timing to maintain a set framerate? (for example, delta timing etc)<br><br>Have you tried using different ODE spaces? HashSpace or SimpleSpace<br><br>I still don't have enough information to help at this point.<br><br>You can send the source code and media via email if you would like me to try it here, but <b>only</b> if you remove any third party library code (I do not have access to stuff like FastImage etc).<br><br>If I can't recreate the problem here, you will have to get the full specs of the problem computers. Vista on HP/Compaq is not enough info.<br><br>Btw, it looks excellent so far (as did Simple Race) :) <br><br></td></tr></table><br>
<a name="1025594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi...<br><br>i use 2 optiones, with frametween and without frametween, in booth is the same.<br><br>Have you tried using different ODE spaces? HashSpace or SimpleSpace - i don't know how :)<br><br><br>at the moment, the game fail only in windows vista. very strange...<br><br>now i upload the game to internet, you can download from <a href="http://www.indiesoft.com.ar/indieoffroad.html" target="_blank">http://www.indiesoft.com.ar/indieoffroad.html</a><br><br>please, tell me if you can reproude the fail. thanks! <br><br></td></tr></table><br>
<a name="1025716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> To change the ODE spaces you would do the following...<br><br>For HashSpace<br><br><i>Global Space=dHashSpaceCreate(0)</i><br><br>For SimpleSpace<br><br><i>Global Space=dSimpleSpaceCreate(0)</i><br><br>...and the same for all sub-spaces if you use them.<br><br>I'll take a look at the download later and let you know if I can reproduce it. <br><br></td></tr></table><br>
<a name="1025729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> i made a test, i use a flat scenary and the game works fine.<br><br>for some reason, the scenary is the problem.<br><br>but why in some computers work and in others works without problems?<br><br><br>--------------------------------------------------------<br><br>this happend in some computers.<br><br>in the same computers work with xp but in vista dosen't work<br><br><a href="http://www.youtube.com/watch?v=AGLfoCvNN1k" target="_blank">http://www.youtube.com/watch?v=AGLfoCvNN1k</a><br><br><a href="http://www.youtube.com/watch?v=k-TnqsJSTxM" target="_blank">http://www.youtube.com/watch?v=k-TnqsJSTxM</a> <br><br></td></tr></table><br>
<a name="1025756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi Vip3r.<br><br>maybe i found the problem...!!!! - EDIT (i wrong, the problem persist)<br><br>I use .b3d files, exporting with b3dpipeline in max9<br><br>i export the same scenary in .3ds file and the physic work perfect, and the same file in .b3d format fails in the physics.<br><br>now i load a .3ds for ode physics, hide scenary (WORKS!!!) (EDIT - only in a few computers)<br>and i load a .B3D for visible scenary.<br><br>this make any sense?, can be the b3dpipeline exporting strange b3d file?<br>this maybe is the same reason for the old simple race fails too.<br><br>if you want i can upload the .b3d file to recreate the physics problem<br><br>regards, Santiago. <br><br></td></tr></table><br>
<a name="1025783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, back to the begining again..<br><br>now i learn that is no mather if i use .3ds or .b3d files.<br><br>i am using max9 and b3d pipeline for export the files b3d, or max for .3ds export.<br><br>no i made a new test.<br><br>i use the CarDemo.bb and i load the 3d scenary, and the problem is also in the cardemo program.<br><br>i try with .b3d and .3ds file, and the problem appear in booth.<br><br>i upload the .b3d and .3ds file, plase tell me if you can try to know what happen..<br><br>i don't know why in some computers somethimes works perfectly.<br><br>i going to send you the link by mail<br><br>[CODE]<br>; ### Create Plane<br><br>;dCreatePlane(Space,0,1,0,0)<br><br>;Global Plane=CreatePlane()<br>;EntityAlpha Plane,0.8<br><br>;EntityTexture Plane,PlaneTexture()<br><br>Global terreno = LoadMesh("scenary\terreno.3ds")<br>terreno_ode = CreateTriMesh(Space,terreno)<br>dGeomContactSetMu(terreno_ode,200)[/CODE]<br><br>sometimes, the car works ok, until the blue body of car touch the scenary, thats make the car flys to the space. <br><br></td></tr></table><br>
<a name="1026003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for sending the mesh files Santiago.<br><br>Well, both meshes (3DS and B3D) work fine here on Windows Vista. I can drive the car all the way to the green arrow, when the car flips upside down and touches the mesh it rests normally.<br><br>From your description, it sounds like the simulation explodes when the ODE box touches the TriMesh. The most common cause of these kind of issues is faulty contacts being generated during a collision, sending the object flying off into the distance.<br><br>To help find the solution, you need to make a note of the following items on the affected machines...<br><br>CPU Type &amp; Speed (Intel / AMD etc)<br>RAM Speed &amp; Size<br>Windows Version (Including Service Pack Version / Localisation etc)<br><br>There must be a common factor on the affected machines, I would suggest you collect all of the above data on machines it works ok on and on machines it doesn't work on to see if there's a pattern.<br><br>The TriMesh construction is also very important, I have seen B3D meshes before which display normally, but do not work as a TriMesh. The TriMesh is built using the vertice and indice data only, and these must be ordered correctly. It's extremely difficult to debug and it's even worse when only certain machines show the problem. Exporting the mesh using different software or using a different method/pipeline could correct the issue. <br><br></td></tr></table><br>
<a name="1026007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, mine is one of the computers that fails is a <br><br>Laptop Toshiba L305<br><br>Windows Vista Home Basic, SP2<br><br>Intel Pentium Dual CPU T3400 @2.16 GHz, 2 GB RAM.<br><br>Juan <br><br></td></tr></table><br>
<a name="1026010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Charrua, that's very helpful.<br><br>It works ok on the following setup...<br><br>Windows Vista Business SP2<br>Intel Core 2 Duo 6400 CPU<br>2GB RAM <br><br></td></tr></table><br>
<a name="1026013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> In this machine, i have an xp emulated via VMWare, running that virtual machine, the game of Santiago run ok, so i discard CPU or hardware.<br><br>From vista, doing right click and setting on the properties windows the XP compatibility mode makes no sense. Running the app in administrator mode, the same. <br><br>I dont press a key, and a second or two after the initila screens, when appear the car, the wheels start to bounce all over the place with the car static on it's position.<br><br>really very strange<br><br>Juan <br><br></td></tr></table><br>
<a name="1026025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting, so it may not be related to the machine architecture.<br><br>Now we need to know which editions of Vista are affected. <br><br></td></tr></table><br>
<a name="1026063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> this is very interesting, look a group of scientists find a cure.<br><br>I want to add that in some occasions in my computer, making changes, eh could make it fail the same scenario.<br><br>my theory is the problem of mesh, the interpretation of the mesh and is also affected by the hard (as if it were fault tolerance)<br><br>in single race, I felt the same way, in the menu, the car falls on a plane.<br>sometimes it was the 3rd or 4th career, returning to the menu, crazy physics appeared again. then was like that depended on a memory load or something that was stored ... I also happened when he placed a lot of cars ..<br><br>4x4off in the case of road, I have a single car, and a stage, that's weird<br><br>Greetings! <br><br></td></tr></table><br>
<a name="1028811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi Vip3r, have you any news about the mesh problem?<br><br>regards!<br>Santiago <br><br></td></tr></table><br>
<a name="1028837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Santiago,<br><br>I can't reproduce the issue here and I haven't been provided with more information regarding the problematic operating systems.<br><br>There's not much else I can do other than to repeat the above suggestion...<br><br><div class="quote"> <br>Exporting the mesh using different software or using a different method/pipeline could correct the issue.<br> <br></div> <br><br></td></tr></table><br>
<a name="1028873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just implemented up to 10 collapsible towers within my platformer, thinking about a GUI front end to maybe allow the game player to choose where they want their towers and how big they want them - maybe even invoke a variable mass function to them, maybe associate the variable mass with a colour.<br><br>I am trying to invoke 10 'elevators' that will ease the pain of driving back round to the level/cube 1 ramp to get back on. So, I'll try and dig out my contact code to automate the movement of the 3d slimline cubes. <br><br></td></tr></table><br>
<a name="1029293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> If anyone's interested just made a quick installer for my little racing game which owes a lot to JV-ODE, in fact would have been nigh on impossible without it!<br><br>Installer here:-<br><br><a href="http://www.wishingwellsoftware.co.uk/carsetup.exe" target="_blank">Click here for installer</a> <br><br></td></tr></table><br>
<a name="1029620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> i uploaded an update of AWC with some minor changes:<br>now from the editor LowStop and HiStop can be read/set for joints and mass for bodies.<br>Documentation in pdf<br><br>Juan<br><br>bp, too much smoke for my nose!<br><br>Juan <br><br></td></tr></table><br>
<a name="1029677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Charrua, will try your new awc once i get home, heh heh, i know one of my cars is not to ozone friendly - it took me a 'little' while to implement the smoke effectively. <br><br></td></tr></table><br>
<a name="1031568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey all,<br><br>I have been trying to reach the character physics for a while, but still didnt got it right. For now I have been setting velocity manually trough Force functions, so if the player stopped pressing the movement buttons, the char would stop completely. The problem is that any external forces would be neutralized. So I got back from where I started, I thought it would be better to control the char with forces and let him stop with the Friction naturally, not manually with forces. But a few problems had showed up.<br>-The first one is that when the Z velocity equals to the X velocity the friction stop acting on the object, it keeps on moving. I kind found out it has something to do with the fact that Im keeping the rotation of the object neutral (<i>dBodySetRotation(Body,0,0,0)</i>). But I still dont know what that has to do with the friction not working in this direction.<br><br>-The second one is related to the Friction coefficient. Im using the dContactApprox1 flag, so the numbers of Mu are related to the Coulomb friction equation. When this value gets equals or over 1, it starts making small jumps as long as he speeds up. This also happens when I put a value equal/over 20 on the standard dContactMode flag. This is a obstacle because a bigger friction would mean the char to stop faster, but its being also a problem, because it wouldnt walk the way its supposed to. He would be giving small jumps.<br><br>If you need the source code for the tests I have been making, tell me, so I can organize the code better before.<br><br>A Last thing that has nothing to do with the Friction: I found in the JV-ODE commands some functions related to HeightMaps. Is it possible to use them on Blitz3D? I saw it needs some height map related data (which I dont know exactly what it is) and I dont know if its possible to get it throught Blitz3D normally. Is it?<br>Maybe if its not, there was some kind of hacking could be made to get this data, with some pointers. Lots of things are possible through Userlibs.<br><br>Cya <br><br></td></tr></table><br>
<a name="1031591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's something else you can try, go back to this point...<br><br><div class="quote"> <br>For now I have been setting velocity manually trough Force functions, so if the player stopped pressing the movement buttons, the char would stop completely. The problem is that any external forces would be neutralized.<br> <br></div><br>When the movement buttons are pressed, do what you were already doing. Now when the player stops pressing the movement buttons, stop applying forces so the character can be affected by external forces again.<br><br>From some of the recent discussions on the ODE mail list, it appears that the HeightField feature is broken, to the point where they are considering removing it until it's more stable. For this reason I would advise against using it for now. The data structure was specified using the greyscale values of the heightmap (see <a href="http://groups.google.com/group/ode-users/browse_thread/thread/cab2dea8d5e89d6c/6194768a80de9134?lnk=gst&amp;q=heightfield#6194768a80de9134" target="_blank">here</a>).<br><br>You can use other tools to generate a B3D mesh from a HeightMap (there may be something in the Blitz code archives that does this), then convert the B3D to TriMesh. The TriMesh included in the JV-ODE demos was created in this way. <br><br></td></tr></table><br>
<a name="1031632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey VIP3R,<br><br>Thanks for the answers,<br>So I guess its better to use Trimeshs instead of Heightmaps. Rather have a little more "trouble" to use them then to use a non-stable feature. Actually theres no trouble at all, just make the heightmap become a mesh.<br><br>About the Character physics, thats what Im planning doing. The problem is that I need something to stop the character walking when the movement buttons are not pressed. So instead of doing it manually (neutralizing the speed using forces, which neutralize external forces), I thought about using the ODE friction. But there were those problems I said before, about the friction value being too high, or the direction that makes the friction stop working. If I find out how to get over this its gonna be easier to implement the moving forces (:<br><br>Cya <br><br></td></tr></table><br>
<a name="1031764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> When the movement buttons are not pressed, can you keep applying the forces until the character stops, then stop applying them? Using friction to stop it is likely to lead to problems. Have you tried using the damping functions instead?<br><br>Here's some more info on character physics in ODE...<br><a href="http://opende.sourceforge.net/wiki/index.php/HOWTO_upright_capsule" target="_blank">http://opende.sourceforge.net/wiki/index.php/HOWTO_upright_capsule</a> <br><br></td></tr></table><br>
<a name="1038233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Caio</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey VIP3R,<br><br>First thank you a lot for the help, I finally got the character physics working the way I wanted it to work. I used Damping, but not the ODE Damping, a Damping formula. It worked perfectly. Im just working some small detail out, but for now they are not being problems. The basic is ready (:<br><br>Now I have a small question: If you create a plane with dCreatePlane() how would you destroy its geometry?<br><br>See ya <br><br></td></tr></table><br>
<a name="1038305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Ian,<br><br>Glad to hear it's working well.<br><br>To destroy the plane geometry, use the 'dGeomDestroy(geom)' function...<br><br><i>Global ODEPlane=dCreatePlane(Space,0,1,0,0)<br>...<br>dGeomDestroy(ODEPlane)</i> <br><br></td></tr></table><br>
<a name="1042954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Orso</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R Hello, I am interested in jv-ode ODE, but after watching many post do not know if you have c + +, for Blit SDK. You say: The library Can be used with That Supports Any programming language DLL's, Including Blitz3D and BlitzMax (Win32). <br><br></td></tr></table><br>
<a name="1043028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> JV-ODE will work with C++ or Blitz3DSDK. The full version contains an include file for use with C++.<br><br>The JV-ODE demos will only run with Blitz3D/BlitzMax, and would need to be converted to run in C++ with Blitz3DSDK.<br><br>If you need further information, please let me know. <br><br></td></tr></table><br>
<a name="1043134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Orso</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, perfect. I'll have to download and try <br><br></td></tr></table><br>
<a name="1043768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Orso</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi vip3r, <br>I've been playing with your library from the editor Blitz3D and well, everything works,<br>but when I opened my first project from dev-c + +, I get an error "(ODE INTERNAL ERROR 2) bad argument (s)". I know that 27 line failure, look at the code.<br><br>#include &lt;blitz3dsdk.h&gt;<br>#include "JV-ODE-include.c"<br><br>int World;<br>int Spacio;<br>int ContactGrup;<br>//..............................................................................<br>int main()<br>{<br>// ........init bb<br>	bbBeginBlitz3D();<br>	bbGraphics3D( 640, 480, 0, 2 );<br>	bbAmbientLight( 64, 64, 64);	<br>	BBEntity camera = bbCreateCamera();<br>	BBEntity light = bbCreateLight();<br>	BBEntity cube = bbCreateCube();<br>	bbPositionEntity( camera, 0, 10, -5 );<br>	bbRotateEntity( light, 90, 0, 0 );<br>	<br>//.......init jv-ode	<br>    dInitODE();<br>    World=dWorldCreate();<br>    dWorldSetAutoDisableFlag(World,1);//---- line 27 ----<br>       <br>//.....Program loop    <br>	while( !bbKeyHit( KEY_ESCAPE ) ) <br>    {<br>		bbUpdateWorld();<br>		bbRenderWorld();<br>		bbFlip();<br>	}<br>	<br>//......Dinit jv-ode<br>   	dWorldDestroy(World);<br>	dCloseODE();<br>	<br>	bbEndBlitz3D();<br>	return 0;<br>} <br><br></td></tr></table><br>
<a name="1043783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Orso,<br><br>I've emailed you regarding the above issue. The error is due to a missing DLL registration call. <br><br></td></tr></table><br>
<a name="1043788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Orso</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you, now is fine. <br><br></td></tr></table><br>
<a name="1046699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jeffmorris</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, How do I get JV-ODE Physics V1.32? I have JV-ODE Physics V1.27. <br><br></td></tr></table><br>
<a name="1046740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> You would have received an update email when each new version was released.<br><br>I've sent a download link for the latest version to your registered email address (the one you used to purchase it). <br><br></td></tr></table><br>
<a name="1046838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jeffmorris</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, Thanks for sending me JV-ODE Physics V1.32. I started using Blitz3D after trying to use 3D Game Studio. I was trying to create some kind of a driving simulator in a city. 3D Game Studio had problems with large 3D meshes. I modified the CarDemo code to load the 3D meshes and to let me use gamepad instead of keyboard. I have to use an invisible plane for physics because I don't know how to set up 3D meshes for physics. <br><br><pre class=code>
roads=LoadMesh("roads01.3ds")
RotateEntity roads,0,0,0
PositionEntity roads,0,0,0
brush=CreateBrush()
BrushColor brush,31,31,31
PaintMesh roads,brush
ground=LoadMesh("ground01.3ds")
RotateEntity ground,0,0,0
PositionEntity ground,0,0,0
brush=CreateBrush()
BrushColor brush,0,127,0
PaintMesh ground,brush
water=LoadMesh("water01.3ds")
RotateEntity water,0,0,0
PositionEntity water,0,0,0
brush=CreateBrush()
BrushColor brush,0,0,127
PaintMesh water,brush
</pre> <br><br></td></tr></table><br>
<a name="1046850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to create a TriMesh for each 3ds mesh, except the water mesh (unless you want that to collide). See the 'Create TriMesh' section of the TriMesh demos.<br><br>When using more than one mesh that could overlap / collide (like the ground and road), multiple spaces should be used. Create a sub-space of space, then place all TriMeshes (and the plane) into the sub-space. To prevent any meshes within the same sub-space from colliding with each other, you must disable internal space collisions using <i>dSetInternalSpaceCollideMode(0)</i>.<br><br>The above is shown in the demo 'CarDemo-TriMesh-X4' where four terrain meshes and a plane safely overlap, there is also a multiple space demo which will help. <br><br></td></tr></table><br>
<a name="1046986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jeffmorris</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried to modify the 'CarDemo-TriMesh-X4' code but the car falls through the green ground. The car stays on the roads. The 3D meshes don't overlap each other.<br><br><pre class=code>
;dCreatePlane(SceneSpace,0,1,0,0)
;Global Plane=CreatePlane()
;EntityAlpha Plane,0
;EntityTexture Plane,PlaneTexture()

TerrainMesh(1)=LoadMesh("ground01.3ds")
ScaleMesh TerrainMesh(1),1,1,1
EntityColor TerrainMesh(1),0,191,0
TriMesh(1)=CreateTriMesh(SceneSpace,TerrainMesh(1))
dGeomSetRotation(TriMesh(1),0,0,0)

TerrainMesh(2)=LoadMesh("roads01.3ds")
ScaleMesh TerrainMesh(2),1,1,1
EntityColor TerrainMesh(2),31,31,31
TriMesh(2)=CreateTriMesh(SceneSpace,TerrainMesh(2))
dGeomSetRotation(TriMesh(2),0,0,0)

TerrainMesh(3)=LoadMesh("water01.3ds")
ScaleMesh TerrainMesh(3),1,1,1
EntityColor TerrainMesh(3),0,127,127
TriMesh(3)=CreateTriMesh(SceneSpace,TerrainMesh(3))
dGeomSetRotation(TriMesh(3),0,0,0)

PositionEntity TerrainMesh(1),0,0,0
PositionEntity TerrainMesh(2),0,0,0
PositionEntity TerrainMesh(3),0,0,0

dGeomSetPosition(TriMesh(1),0,0,0)
dGeomSetPosition(TriMesh(2),0,0,0)
dGeomSetPosition(TriMesh(3),0,0,0)
</pre><br><br>If I try to disable internal space collisions using dSetInternalSpaceCollideMode(0), Blitz3D stops responding. <br><br></td></tr></table><br>
<a name="1046997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is the ground a simple single layer mesh?<br><br>It's unlikely that dSetInternalSpaceCollideMode(0) is causing B3D to stop responding, the problem may be elsewhere. If you can post the entire code (in a codebox), I'll take a look. <br><br></td></tr></table><br>
<a name="1047033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jeffmorris</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Include "JV-ODE.bb"
AppTitle "JV-ODE TriMesh Car Demo - TriMesh X4"
Graphics3D 1280,1024,1
Global CMass#=200.0
Global WMass#=14.0
Global WorldERP#=1.0
Global WorldFriction#=70.0
Global Torque#=24.0
Global SuspensionHS#=0.01
Global Force#=0.0
Global Steer#=0.0
Global Car
Global CGeom
Global CMesh
Global CarStartY=30
Dim Wheel(4)
Dim WGeom(4)
Dim Joint(4)
Dim TerrainMesh(3)
Dim TriMesh(3)
Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type
dInitODE()
Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global CarSpace=dHashSpaceCreate(Space)
Global SceneSpace=dHashSpaceCreate(Space)
Global ContactGroup=dJointGroupCreate(0)
dSetInternalSpaceCollideMode(0)
dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)
dWorldSetERP(World,WorldERP)
dContactSetMode(dContactSlip1)
dContactSetMu(WorldFriction)
ode.ODEGeom=New ODEGeom
ode\body=dBodyCreate(World)
Car=ode\body
dBodySetPosition(ode\body,0,CarStartY,0)
dBodySetRotation(ode\body,0,0,0)
mass=dMassCreate()
dMassSetBoxTotal(mass,CMass,3,1,4)
dBodySetMass(ode\body,mass)
dMassDestroy(mass)
ode\geom=dCreateBox(CarSpace,3,1,4)
CGeom=ode\geom
dGeomSetBody(ode\geom,ode\body)
ode\mesh=CreateCube()
CMesh=ode\mesh
ScaleMesh ode\mesh,1.5,0.5,2
EntityColor ode\mesh,0,0,191
For count=1 To 4
	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	Wheel(count)=ode\body
	dBodySetPosition(ode\body,0,0,0)
	dBodySetRotation(ode\body,0,0,90)
	mass=dMassCreate()
	dMassSetSphereTotal(mass,WMass,0.7)
	dBodySetMass(ode\body,mass)
	dMassDestroy(mass)
	ode\geom=dCreateSphere(CarSpace,0.7)
	WGeom(count)=ode\geom
	dGeomSetBody(ode\geom,ode\body)
	ode\mesh=CreateCylinder()
	ScaleMesh ode\mesh,0.7,0.25,0.7
	EntityColor ode\mesh,31,31,31
Next
dBodySetPosition(Wheel(1),-2,CarStartY-0.5,+2)
dBodySetPosition(Wheel(2),+2,CarStartY-0.5,+2)
dBodySetPosition(Wheel(3),-2,CarStartY-0.5,-2)
dBodySetPosition(Wheel(4),+2,CarStartY-0.5,-2)
Global Light=CreateLight()
RotateEntity Light,50,-50,0
LightColor Light,255,255,255
AmbientLight 130,130,130
Global CameraPivot=CreatePivot()
Global Camera=CreateCamera(CameraPivot)
CameraClsColor Camera,0,127,255
CameraRange Camera,1,1000

;dCreatePlane(SceneSpace,0,1,0,0)
;Global Plane=CreatePlane()
;EntityAlpha Plane,0
;EntityTexture Plane,PlaneTexture()

TerrainMesh(1)=LoadMesh("ground01.3ds")
ScaleMesh TerrainMesh(1),1,1,1
EntityColor TerrainMesh(1),0,191,0
TriMesh(1)=CreateTriMesh(SceneSpace,TerrainMesh(1))
dGeomSetRotation(TriMesh(1),0,0,0)

TerrainMesh(2)=LoadMesh("roads01.3ds")
ScaleMesh TerrainMesh(2),1,1,1
EntityColor TerrainMesh(2),31,31,31
TriMesh(2)=CreateTriMesh(SceneSpace,TerrainMesh(2))
dGeomSetRotation(TriMesh(2),0,0,0)

TerrainMesh(3)=LoadMesh("water01.3ds")
ScaleMesh TerrainMesh(3),1,1,1
EntityColor TerrainMesh(3),0,127,127
TriMesh(3)=CreateTriMesh(SceneSpace,TerrainMesh(3))
dGeomSetRotation(TriMesh(3),0,0,0)

PositionEntity TerrainMesh(1),0,0,0
PositionEntity TerrainMesh(2),0,0,0
PositionEntity TerrainMesh(3),0,0,0

dGeomSetPosition(TriMesh(1),0,0,0)
dGeomSetPosition(TriMesh(2),0,0,0)
dGeomSetPosition(TriMesh(3),0,0,0)

SetupCar()

While Not KeyHit(1)
	UpdateKeys()
	UpdateCar()
	UpdateGeoms()
	PTime=MilliSecs()
	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)
	PhysicsTime#=MilliSecs()-PTime
	UpdateCam()
	RenderWorld
	Text 0,0,"JV-ODE Version "+dGetVersion()
	Text 0,15,"Physics Time:"+PhysicsTime
	Text 0,50,"Force:"+Force
	Text 0,65,"Torque:"+Torque
	Text 640,0,"A - Accelerate"
	Text 640,15,"Z - Brake/Reverse"
	Text 640,30,"Arrows - Steering"
	Text 640,45,"Space - Reset Car"
	Flip 1
Wend
dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()
End
Function SetupCar()
For count=1 To 4
	Joint(count)=dJointCreateHinge2(World,0)
	dJointAttach(Joint(count),Car,Wheel(count))
	dJointSetHinge2Anchor(Joint(count),dBodyGetPositionX(Wheel(count)),dBodyGetPositionY(Wheel(count)),dBodyGetPositionZ(Wheel(count)))
	dJointSetHinge2Axis1(Joint(count),0,1,0)
	dJointSetHinge2Axis2(Joint(count),-1,0,0)
	dJointSetHinge2Param(Joint(count),dParamSuspensionERP,0.8)
	dJointSetHinge2Param(Joint(count),dParamSuspensionCFM,SuspensionHS)
	If count&gt;2
		dJointSetHinge2Param(Joint(count),dParamLoStop,0)
		dJointSetHinge2Param(Joint(count),dParamHiStop,0)
	End If
Next
End Function
Function UpdateKeys()

If KeyDown(30)=1
	Force=Force+0.08
	If Force&gt;30 Then Force=30
	End If
If KeyDown(44)=1
	Force=Force-0.1
	If Force&lt;-10 Then Force=-10
	If Force&gt;0 Then Force=Force*0.97
	End If
If KeyDown(30)=0 And KeyDown(44)=0 Then Force=Force*0.99
If KeyDown(203)=1 Or KeyDown(205)=1
	If KeyDown(203)=1
		Steer=0.5
		Else
		Steer=-0.5
		End If
	Else
	Steer=0.0
	End If
If KeyHit(57)=1
	Force=0.0
	dBodySetRotation(Car,dGeomGetPitch(CGeom),dGeomGetYaw(CGeom),0)
	End If
End Function
Function UpdateCar()
For count=1 To 4
	dBodyEnable(Wheel(count))
Next
dBodyEnable(Car)
For count=1 To 4
	dJointSetHinge2Param(Joint(count),dParamVel2,Force)
	dJointSetHinge2Param(Joint(count),dParamFMax2,Torque)
Next
For count=1 To 2
	angle#=Steer-dJointGetHinge2Angle1(Joint(count))
	dJointSetHinge2Param(Joint(count),dParamVel,angle)
	dJointSetHinge2Param(Joint(count),dParamFMax,400)
Next
End Function
Function UpdateCam()
PositionEntity Camera,0,3,-3
PivotX#=Cos(EntityYaw(CMesh)-90)+EntityX(CMesh)
PivotY#=EntityY(CMesh)
PivotZ#=Sin(EntityYaw(CMesh)-90)+EntityZ(CMesh)
PositionEntity CameraPivot,PivotX,PivotY,PivotZ
PointEntity CameraPivot,CMesh
End Function
Function UpdateGeoms()
For ode.ODEGeom=Each ODEGeom
	PositionEntity ode\mesh,dGeomGetPositionX(ode\geom),dGeomGetPositionY(ode\geom),dGeomGetPositionZ(ode\geom)
	RotateEntity ode\mesh,dGeomGetPitch(ode\geom),dGeomGetYaw(ode\geom),dGeomGetRoll(ode\geom)
Next
End Function
</pre><br><br>I created 3D meshes in either AutoCAD or 3DS MAX and exported them to 3DS files. <br><br></td></tr></table><br>
<a name="1047141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you edit your post to use a 'codebox' tag instead of 'code'?<br><br>The code you posted works fine with the JV-ODE demo meshes... LoadMesh("media\terrain.b3d")<br><br>Make sure your car isn't positioned inside/underneath the ground mesh and try each TriMesh individually to see if the problem is related to a particular mesh.<br><br>Let me know if you find anything. <br><br></td></tr></table><br>
<a name="1047182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jeffmorris</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, How can I send you the files so that you can check them you? <br><br></td></tr></table><br>
<a name="1047283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Zip them up and send them to the email address in my Blitz profile. Don't use any other compression than zip.<br><br>Don't forget the codebox edit. <br><br></td></tr></table><br>
<a name="1047299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jeffmorris</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried to send you E-mail message at the address listed in your profile but my E-Mail client told me that your E-Mail address doesn't exist. I went to your website and used one of your E-Mail addresses listed on your website. <br><br></td></tr></table><br>
<a name="1047302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, your problems are due to the design of your meshes.<br><br>For example, the following wireframe mesh is the JV-ODE demo terrain viewed from above...<br><br>[Edit] Images removed<br><br>Notice the continuous grid pattern of the mesh, with no holes etc.<br><br>Your meshes are like this (scaled down to 1/10th)...<br><br>[Edit] Images removed<br><br>The ground mesh doesn't work because it is made up of islands, it needs to be one continuous mesh. <br><br></td></tr></table><br>
<a name="1047343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jeffmorris</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> I may have to abandon Blitz3D for Unity game engine. <br><br></td></tr></table><br>
<a name="1053293"></a>

<a name="1053294"></a>

<a name="1053295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello I need some help. I am trying to create a rope from one point to another by using points defined by the player. I used the rope example and I just can't seem to find the formula that can find how many points are on a line for a set distance. Like this... <br><br><img src="http://i1007.photobucket.com/albums/af195/bucketlamp/visual1.jpg"><br><br>Thats all I really need, I know how to set up the rope itself.<br>And it is is 2D so no Z axis<br>Thanks for the help!<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1053335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well the rope demo simply moves the position by subtracting the sphere radius multiplied by two. The sphere radius is 4, so the next sphere would be positioned at 4 x 2 = 8 which is the sphere diameter.<br><br>The formula for finding how many points there are on a 2D line would be like this...<br>Total Points = Line Length / Distance Between Points <br><br></td></tr></table><br>
<a name="1057748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for the help on my last post by the way.<br><br>I am doing a project where you are a whale (Moby Dick) and you must destroy a ship while eating the crew as they fall into the water. I have seemed to work out the boat physics quite well but I do have a few questions.<br><br>How do I keep everything on a 2D plane?<br><br>What't the easiest way to detect collision force on the boat vs. ship without the water interfering? <br><br>Thanks for the help again! <br><br></td></tr></table><br>
<a name="1057944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>How do I keep everything on a 2D plane?<br> <br></div><br>If you mean lock one axis of the three and restrict it to two axis, you would connect every object to the world with a 2D joint. Have a look at the 2D spheres demo.<br><br>Do you mean ship vs whale? You can measure the collision depth with <i>dGeom1CollisionDepth(geom,index)</i> and <i>dGeom2CollisionDepth(geom,index)</i>. The water should have no effect other than physical response, for example buoyancy forces. The 'CarDemo-DetailedC' demo shows how to obtain detailed collision data. <br><br></td></tr></table><br>
<a name="1058477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I have the colisions but I have 1 more question, my world is centered around 0,0,10. The joint is at 0,0,0. I can't seem to find a way to position the joint, is this possible? <br><br></td></tr></table><br>
<a name="1058497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not possible to position/offset the 2D joint on the Z axis, if you create an object at 0,0,10 it will automatically pull the object back to 0,0,0.<br><br>The only solution is to move the world center to 0,0,0 and adjust the camera position. <br><br></td></tr></table><br>
<a name="1058806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aww alright, I wish I would of done that first instead of putting it off until last. Thank you for answering my questions <br><br></td></tr></table><br>
<a name="1066958"></a>

<a name="1066963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, I've incorporated Drak's NPC waypoint code into the twin car demo to provide homing missiles within the twin car demo, the code for which I've posted below the image of one of the cars being pounded by homing (ohh, alright, spheres):-<br><br><img src="http://www.wishingwellsoftware.co.uk/jvdrak.jpg"><br><br><br>If you want the codeboxes removing let me know :)<br><br>The main piece of code<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #										JV-ODE Twin Car Demo										#
; #									Code by Jim Williams (VIP3R)									#
; #								Devious Codeworks - Copyright © 2007								#
; #  Modified by Blitzplotter to include Drak's Waypoint example  -  for homing missiles            #
; ###################################################################################################

AppTitle "JV-ODE Twin Car Demo with Drak's waypoint example"

Include "JV-ODE.bb"

Include "include_drak.bb"

Graphics3D 800,600,0,2

Global CMass#=200			; ### Car Mass
Global WMass#=14			; ### Wheel Mass

Global WorldERP#=1			; ### World Error Correction
Global WorldFriction#=70	; ### World Friction

Global Torque#=24			; ### Joint Torque
Global SuspensionHS#=0.01	; ### Suspension Hardness/Softness (Higher=Softer - Lower=Harder)

Global CarAmount=2
Global ControlTimer=0
Global SteeringTimer=0

Dim Force#(CarAmount)
Dim Steer#(CarAmount)

Dim Car(CarAmount)
Dim CGeom(CarAmount)
Dim CMesh(CarAmount)

Global CarStartY=20

Dim Wheel(CarAmount,4)
Dim WGeom(CarAmount,4)
Dim Joint(CarAmount,4)

Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

; ###################################################################################################

; ### Setup ODE

Global carx#=1
Global cary#=1
Global carz#=1

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)
dWorldSetERP(World,WorldERP)

dContactSetMode(dContactSlip1)
dContactSetMu(WorldFriction)

For CarID=1 To 2

	; ### Create car body

	ode.ODEGeom=New ODEGeom
	ode\body=dBodyCreate(World)
	Car(CarID)=ode\body
	dBodySetRotation(ode\body,0,0,0)
	dBodySetPosition(ode\body,CarID*10,CarStartY,0)
	mass=dMassCreate()
	dMassSetBoxTotal(mass,CMass,3,1,4)
	dBodySetMass(ode\body,mass)
	dMassDestroy(mass)
	ode\geom=dCreateBox(Space,3,1,4)
	CGeom(CarID)=ode\geom
	dGeomSetBody(ode\geom,ode\body)
	ode\mesh=CreateCube()
	CMesh(CarID)=ode\mesh
	ScaleMesh ode\mesh,1.5,0.5,2
	RotateMesh ode\mesh,0,0,0
	PositionMesh ode\mesh,0,0,0
	If CarID=1
		EntityColor ode\mesh,40,80,255
		Else
		EntityColor ode\mesh,180,40,180
		End If
	EntityAlpha ode\mesh,1

	; ### Create wheels

	For count=1 To 4
		ode.ODEGeom=New ODEGeom
		ode\body=dBodyCreate(World)
		Wheel(CarID,count)=ode\body
		dBodySetRotation(ode\body,0,0,0)
		dBodySetPosition(ode\body,0,0,0)
		mass=dMassCreate()
		dMassSetSphereTotal(mass,WMass,0.7)
		dBodySetMass(ode\body,mass)
		dMassDestroy(mass)
		ode\geom=dCreateSphere(Space,0.7)
		WGeom(CarID,count)=ode\geom
		dGeomSetBody(ode\geom,ode\body)
		ode\mesh=CreateCylinder(8)
		ScaleMesh ode\mesh,0.7,0.25,0.7
		RotateMesh ode\mesh,0,0,90
		PositionMesh ode\mesh,0,0,0
		EntityColor ode\mesh,255,255,255
	Next

	dBodySetPosition(Wheel(CarID,1),(CarID*10)-2,CarStartY-0.5,+2)
	dBodySetPosition(Wheel(CarID,2),(CarID*10)+2,CarStartY-0.5,+2)
	dBodySetPosition(Wheel(CarID,3),(CarID*10)-2,CarStartY-0.5,-2)
	dBodySetPosition(Wheel(CarID,4),(CarID*10)+2,CarStartY-0.5,-2)

Next

; ### Create some objects

SeedRnd MilliSecs()

;For spheres=1 To 20
;	ode.ODEGeom=New ODEGeom
;	ode\body=dBodyCreate(World)
;	dBodySetRotation(ode\body,0,0,0)
;	dBodySetPosition(ode\body,Rnd(-100,100),30,Rnd(-100,100))
;	ode\geom=dCreateSphere(Space,4)
;	dGeomSetBody(ode\geom,ode\body)
;	ode\mesh=CreateSphere()
;	ScaleMesh ode\mesh,4,4,4
;	RotateMesh ode\mesh,0,0,0
;	PositionMesh ode\mesh,0,0,0
;	EntityColor ode\mesh,Rnd(255),Rnd(255),Rnd(255)
;	EntityAlpha ode\mesh,1
;	EntityShininess ode\mesh,0.7
;Next
;
;For capsules=1 To 20
;	ode.ODEGeom=New ODEGeom
;	ode\body=dBodyCreate(World)
;	dBodySetRotation(ode\body,90,0,0)
;	dBodySetPosition(ode\body,Rnd(-100,100),30,Rnd(-100,100))
;	ode\geom=dCreateCapsule(Space,1,8)
;	dGeomSetBody(ode\geom,ode\body)
;	ode\mesh=CreateCylinder(8)
;	ScaleMesh ode\mesh,1,5,1
;	RotateMesh ode\mesh,90,0,0	; &lt;&lt;&lt; Mesh X-Axis must be rotated 90 degrees to fix cylinder alignment
;	PositionMesh ode\mesh,0,0,0
;	EntityColor ode\mesh,Rnd(255),Rnd(255),Rnd(255)
;	EntityAlpha ode\mesh,1
;	EntityShininess ode\mesh,0.7
;Next

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global CameraPivot=CreatePivot(CMesh(1))
PositionEntity CameraPivot,0,2,-7

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Mirror=CreateMirror()

; ###################################################################################################

; ### BLITZ STATIC OBJECT (White)

blitzobject=CreateCube()
ScaleMesh blitzobject,1,4,20
RotateMesh blitzobject,-10,8,4
PositionMesh blitzobject,10,5,40

EntityColor blitzobject,255,255,255
EntityAlpha blitzobject,1

; ### ODE STATIC OBJECT (Blue)

;ode.ODEGeom=New ODEGeom
;ode\geom=dCreateBox(Space,2,8,40)
;dGeomSetRotation(ode\geom,-10,8,4)
;dGeomSetPosition(ode\geom,20,5,40)
;ode\mesh=CreateCube()
;ScaleMesh ode\mesh,1,4,20
;RotateMesh ode\mesh,0,0,0
;PositionMesh ode\mesh,0,0,0
;
;EntityColor ode\mesh,0,100,200
;EntityAlpha ode\mesh,1
;
;; ### ODE STATIC OBJECT (Red)
;
;ode.ODEGeom=New ODEGeom
;ode\geom=dCreateBox(Space,18,0.2,40)
;dGeomSetRotation(ode\geom,-14,0,0)
;dGeomSetPosition(ode\geom,-20,4.9,40)
;ode\mesh=CreateCube()
;ScaleMesh ode\mesh,9,0.1,20
;RotateMesh ode\mesh,0,0,0
;PositionMesh ode\mesh,0,0,0
;
;EntityColor ode\mesh,200,0,100
;EntityAlpha ode\mesh,1

; ###################################################################################################

SetupCar()



While Not KeyHit(1)

	UpdateKeys()
	
	;store the car1's position to tie drak's cube player to it
	carx#=dBodyGetPositionX#(Car(1))
	cary#=dBodyGetPositionY#(Car(1))+0.5; elevate the 'turret/player' slightly
	carz#=dBodyGetPositionZ#(Car(1))

	PTime=MilliSecs()

	UpdateCar()
	
	UpdateGeoms()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateCam()

	;UpdateWorld

	;RenderWorld
;
;	Text 0,0,"JV-ODE Version "+dGetVersion()
;	Text 0,15,"Physics Time:"+PhysicsTime
;	Text 0,50,"Force Car 1:"+Force(1)+" CARX IS:"+carx#
;	Text 0,65,"Force Car 2:"+Force(2)
;	Text 0,80,"Torque:"+Torque
;	Text 640,0,"A - Accelerate"
;	Text 640,15,"Z - Brake/Reverse"
;	Text 640,30,"Arrows - Steering"
;	Text 640,45,"Space - Reset Car"
;	
	;-------------------------------------------------------------------------------------------------------
;MAIN LOOP
;-------------------------------------------------------------------------------------------------------
	;While Not KeyHit(1)
	get_input()
		run_enemies()
		run_particles()
		check_hp()
		
		
		UpdateWorld
		RenderWorld
		
		gui()
		;Flip
		
	;Wend
;-------------------------------------------------------------------------------------------------------
;END MAIN LOOP
;-------------------------------------------------------------------------------------------------------
	

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function SetupCar()

For CarID=1 To 2
	For count=1 To 4
		Joint(CarID,count)=dJointCreateHinge2(World,0)
		dJointAttach(Joint(CarID,count),Car(CarID),Wheel(CarID,count))
		dJointSetHinge2Anchor(Joint(CarID,count),dBodyGetPositionX(Wheel(CarID,count)),dBodyGetPositionY(Wheel(CarID,count)),dBodyGetPositionZ(Wheel(CarID,count)))
		dJointSetHinge2Axis1(Joint(CarID,count),0,1,0)
		dJointSetHinge2Axis2(Joint(CarID,count),-1,0,0)
		dJointSetHinge2Param(Joint(CarID,count),dParamSuspensionERP,0.8)
		dJointSetHinge2Param(Joint(CarID,count),dParamSuspensionCFM,SuspensionHS)
		If count&gt;2
			dJointSetHinge2Param(Joint(CarID,count),dParamLoStop,0)
			dJointSetHinge2Param(Joint(CarID,count),dParamHiStop,0)
			End If
	Next
Force(CarID)=0
Next

End Function

; ###################################################################################################

Function UpdateKeys()

; ### Player Control For Car 1

If KeyDown(30)=1
	Force(1)=Force(1)+0.08
	If Force(1)&gt;30 Then Force(1)=30
	End If

If KeyDown(44)=1
	Force(1)=Force(1)-0.1
	If Force(1)&lt;-10 Then Force(1)=-10
	If Force(1)&gt;0 Then Force(1)=Force(1)*0.97
	End If

If KeyDown(30)=0 And KeyDown(44)=0 Then Force(1)=Force(1)*0.99

If KeyDown(203)=1 Or KeyDown(205)=1
	If KeyDown(203)=1
		Steer(1)=0.5
		Else
		Steer(1)=-0.5
		End If
	Else
	Steer(1)=0
	End If

If KeyHit(57)=1
	Force(1)=0
	dBodySetRotation(Car(1),dGeomGetPitch#(CGeom(1)),dGeomGetYaw#(CGeom(1)),0)
	End If

; ### Simple AI For Car 2

If ControlTimer&gt;100
	SeedRnd MilliSecs()
	AIKey=Rnd(100)

	If AIKey&lt;40
		Force(2)=Force(2)+0.8
		If Force(2)&gt;10 Then Force(2)=10
		End If

	If AIKey=&gt;40 Then Force(2)=Force(2)*0.99

	ControlTimer=0
	End If

If SteeringTimer&gt;100
	SeedRnd MilliSecs()
	AIKey=Rnd(100)

	Steer(2)=0
	If AIKey&lt;30 Then Steer(2)=0.5
	If AIKey&gt;70 Then Steer(2)=-0.5

	SteeringTimer=0
	End If

ControlTimer=ControlTimer+1
SteeringTimer=SteeringTimer+1

End Function

; ###################################################################################################

Function UpdateCar()

For CarID=1 To 2
	For count=1 To 4
		dBodyEnable(Wheel(CarID,count))
	Next

	dBodyEnable(Car(CarID))

	For count=1 To 4
		dJointSetHinge2Param(Joint(CarID,count),dParamVel2,Force(CarID))
		dJointSetHinge2Param(Joint(CarID,count),dParamFMax2,Torque)
	Next

	For count=1 To 2
		angle#=Steer(CarID)-dJointGetHinge2Angle1(Joint(CarID,count))
		dJointSetHinge2Param(Joint(CarID,count),dParamVel,angle)
		dJointSetHinge2Param(Joint(CarID,count),dParamFMax,400)
	Next
Next

End Function

; ###################################################################################################

Function UpdateCam()

;PositionEntity CameraPivot,0,3,-12
	
	PositionEntity CameraPivot,0,12,-36

camx#=EntityX(CameraPivot,1)-EntityX(Camera)
camy#=EntityY(CameraPivot,1)-EntityY(Camera)
camz#=EntityZ(CameraPivot,1)-EntityZ(Camera)

TranslateEntity Camera,camx*0.5,camy*0.5,camz*0.5

PointEntity Camera,CMesh(1)

End Function

; ###################################################################################################

Function UpdateGeoms()

For ode.ODEGeom=Each ODEGeom
	RotateEntity ode\mesh,dGeomGetPitch#(ode\geom),dGeomGetYaw#(ode\geom),dGeomGetRoll#(ode\geom)
	PositionEntity ode\mesh,dGeomGetPositionX#(ode\geom),dGeomGetPositionY#(ode\geom),dGeomGetPositionZ#(ode\geom)
Next

End Function

; ###################################################################################################


</textarea><br><br>Drak's slightly modified NPC waypoint code for inclusion, note you need it in the same directory as the above code to compile:-<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

;Waypoint Example By Drak, 3/8/2010
;Modified Slightly by BlitzPlotter for incorporating homing
;missiles into JV-ODE car demo

;************************************************************
;THIS PROGRAM WILL:											*
;Create a player mesh (a square)							*
;Create some enemies (some spheres)							*
;Make on-the-fly waypoints for the enemies to return to		*
;Return the enemies to the waypoints						*
;Also shows some some rudimentary AI						*
;Shows some very simple particle effects as well			*
;************************************************************

;AppTitle "Drak's Waypoint Example"

;-------------------------------------------------------------------------------------------------------
;INITIALIZATION
;-------------------------------------------------------------------------------------------------------
;Graphics3D 800,600
;Graphics3D 1024,768
;SetBuffer BackBuffer()
;SeedRnd MilliSecs()

Global player = CreateCube()	;create a cube for the player
EntityColor player, 0,100,200	;we'll make the player blue-ish

Global player_hp = 250			;give the player 50 hit points
Global player_alive = 1			;player is indeed alive

;Global camera = CreateCamera()	;create a camera
;PositionEntity camera, 0,40,0	;raise it up in the air
;RotateEntity camera, 90,0,0		;point it down




;-------------------------------------------------------------------------------------------------------
;TYPES
;-------------------------------------------------------------------------------------------------------
Type enemy
	Field mesh				;will hold the actual mesh
	Field return_waypoint	;will hold the handle of the return waypoint
	Field status			;holds a # referring to the enemies status
	Field speed#			;this will hold the speed of the enemy
End Type

Type particle				
	Field mesh				;holds mesh
	Field alpha#			;holds alpha
	Field speed_x#			;speed x
	Field speed_y#			;same
	Field speed_z#			;same...
	Field fade_speed#		;fade_speed
End Type

;-------------------------------------------------------------------------------------------------------
;LETS CREATE SOME PRIMITIVES TO USE LATER	
;-------------------------------------------------------------------------------------------------------

Global spark = CreateCube()
ScaleEntity spark, .25,.25,.25
EntityColor spark, 255,168,0
HideEntity spark

Global waypoint = CreateSphere()
ScaleEntity waypoint, .5,.5,.5
EntityColor waypoint, 0,200,0
HideEntity waypoint

;-------------------------------------------------------------------------------------------------------
;CREATE SOME ENEMIES
;-------------------------------------------------------------------------------------------------------
For num = 1 To 10
	e.enemy = New enemy				;new enemy
	e\mesh = CreateSphere(16)		;create a sphere and store it in e\mesh
	e\speed = .17					;set the speed of each enemy
	e\status = 1					;set status to 1
	;PositionEntity e\mesh, Rand(-20,20),2,Rand(-20,20)	;place the enemies randomly
	
	
	PositionEntity e\mesh, Rand(-50,50),2,Rand(-50,50)	;place the enemies randomly
	
	EntityAlpha e\mesh, .5
	;ScaleEntity e\mesh,4,4,4
Next

;-------------------------------------------------------------------------------------------------------
;MAIN LOOP
;;-------------------------------------------------------------------------------------------------------
;While Not KeyHit(1)
;	get_input()
;	run_enemies()
;	run_particles()
;	check_hp()
;	
;	
;	UpdateWorld
;	RenderWorld
;	
;	gui()
;	Flip
;	
;Wend
;;-------------------------------------------------------------------------------------------------------
;;END MAIN LOOP
;;-------------------------------------------------------------------------------------------------------


;-----------------------------------------------------------------------------------------------------
;FUNCTION GET_INPUT &lt;--- GRABS INPUT FOR THE PLAYER
;-----------------------------------------------------------------------------------------------------
Function get_input()
;	If player_alive = 1
;	;W key
;		If KeyDown(17) Then TranslateEntity player, 0,0,.15	;move it +z
;		
;	;A key
;		If KeyDown(30) Then TranslateEntity player, -.15,0,0;move it -x
;		
;	;S key
;		If KeyDown(31) Then TranslateEntity player, 0,0,-.15;move it -z
;		
;	;D key
;		If KeyDown(32) Then TranslateEntity player, .15,0,0 ;move it +x
;	End If 
	
	PositionEntity player,carx#,cary#,carz#   ;stick the player/turret? on top of the car
	
End Function 


;-----------------------------------------------------------------------------------------------------
;FUNCTION RUN_ENEMIES   &lt;---EXOCUTES ACTIONS FOR EACH ENEMY
;-----------------------------------------------------------------------------------------------------
Function run_enemies()
	For e.enemy = Each enemy	;for each enemy
		;regardless of case, the distance to the player must be known, so we'll check it here
		Local dist# = EntityDistance(e\mesh,player)
		Select e\status			;select it's status
				
			Case 1 ;ON GUARD
				EntityColor e\mesh, 200,200,0
				If dist# &lt;= 10		;if the distance is less than 15 or equal to it
					If player_alive = 1
						e\status = 2	;switch to state 2
					End If
				End If
				
			Case 2 ;DROP NEW WAYPOINT
				Local x# = EntityX(e\mesh)	;grab the enemies' coordinates
				Local y# = EntityY(e\mesh)
				Local z# = EntityZ(e\mesh)
				
						;place the waypoint at the location
				e\return_waypoint = CopyEntity(waypoint)
				PositionEntity e\return_waypoint,x#,y#,z#
				
				e\status = 3	;then switch to case 3, which is pursue
				
			Case 3 ;PURSUE THE PLAYER
				EntityColor e\mesh, 200,0,0	;red
				If dist# &lt; 4	;then attack!
					e\status = 4;change to attack
					Exit 		;exit the loop
				End If 
				
				If dist# &lt; 12	;first, check to see if we're 12 units away or less....
					PointEntity e\mesh, player		;point enemy at the player
					MoveEntity e\mesh, 0,0,e\speed	;then make the enemy move in the pointed direction
				Else
					e\status = 5	;set to status 5, which is return to waypoint
				End If 	
				
			Case 4 ;ATTACK
				player_hp = player_hp - 1	;take 1 hp from the player
				e\status = 5				;now return to the waypoint
				Local s_x# = EntityX(player)
				Local s_y# = EntityY(player)
				Local s_z# = EntityZ(player)
				Local num = Rand(3,8)
						;create some effects
				create_particles(num,s_x,s_y,s_z)
				
			Case 5
				EntityColor e\mesh, 200,0,200
				Local dist_home# = EntityDistance(e\mesh,e\return_waypoint)	;get the distance home
				If dist_home# &gt; 5							;If we're further than 10 away...
					PointEntity e\mesh, e\return_waypoint	;point at home waypoint
					MoveEntity e\mesh, 0,0,e\speed			;move them forward
				Else If dist_home# &lt;= 5
					FreeEntity e\return_waypoint			;get rid of the waypoint mesh
					e\status = 1							;and return to idle again
				End If
				
			Default
				e\status = 1	;if somehow e\status = anything else, we'll set it to 1
				
		End Select
	Next
End Function 

;-----------------------------------------------------------------------------------------------------
;GRAPHIC READOUTS   &lt;---This function prints readouts to the screen
;-----------------------------------------------------------------------------------------------------
Function gui()
	Text 0,0, "Use A-forwards, Z-backwards, &lt; - left, &gt; - right"
	Text 0,10,"Don't let the spheres touch you or you'll lose hitpoints."
	Text 0,20,"Remaining HP: " + player_hp
	
	;Text 0,50,"Force Car 1:"+Force(1)+" CARX IS:"+carx#   ;debug
	
	If player_alive = 0
		Text 350,290,"You are DEAD!"
	End If 
End Function 


;-----------------------------------------------------------------------------------------------------
;RUN PARTICLES	   &lt;---This function runs the particles if there are any
;-----------------------------------------------------------------------------------------------------
Function run_particles()
	For p.particle = Each particle
		p\alpha = p\alpha - p\fade_speed	;take fade speed from alpha
		EntityAlpha p\mesh, p\alpha			;set alpha to p\alpha
		If p\alpha &lt;= 0					;if alpha is &lt;= 0
			FreeEntity p\mesh			;free it
			Delete p				
			Exit						;exit the loop
		Else
			p\speed_y = p\speed_y - .01							;subtract from y speed
			MoveEntity p\mesh, p\speed_x, p\speed_y,p\speed_z	;move the particle
		End If
		
		
	Next
End Function  


;-----------------------------------------------------------------------------------------------------
;CREATE PARTICLES	&lt;--- THis is called when we need to create particles
;-----------------------------------------------------------------------------------------------------
Function create_particles(num,x#,y#,z#)
	For s = 1 To num
		p.particle = New particle
		p\mesh = CopyEntity(spark)
		p\speed_x# = Rnd(-.2,.2)
		p\speed_y# = Rnd(.3)
		p\speed_z# = Rnd(-.2,.2)
		p\alpha = 1
		p\fade_speed# = Rnd(.1)
		PositionEntity p\mesh, x,y,z
	Next
End Function 

;-----------------------------------------------------------------------------------------------------
;CHECK HP	&lt;---This checks the player's HEALTH each frame
;-----------------------------------------------------------------------------------------------------
Function check_hp()
	If player_hp &lt;= 0
		player_hp = 0
		If player_alive = 1
			Local s_x# = EntityX(player)
			Local s_y# = EntityY(player)
			Local s_z# = EntityZ(player)
			Local num = Rand(15)
		;create some effects
			create_particles(num,s_x,s_y,s_z)
			player_alive = 0
		End If
	End If 
End Function 

</textarea><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1067030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> The code boxes are fine ;)<br><br>You will need to initialise ODE with JV-ODE V1.27+ or you'll get an error.<br><br>To do this, add 'dInitODE()' before creating the ODE world...<br><br><pre class=code>
dInitODE()

Global World=dWorldCreate()
</pre> <br><br></td></tr></table><br>
<a name="1067037"></a>

<a name="1067038"></a>

<a name="1067039"></a>

<a name="1067040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aaaah, I suspect you have identified the root of my problem with getting JV-ODE to work on a new computer I bought. I initially started using JV-ODE on a 'mothballed' older computer, but did some parallel development on the wife's laptop on occasion. I've managed to compile on the wife's laptop for a while, but encountered problems getting JV-ODE to play on my newer 'main' computer.<br><br>I've quite a bit of JV-ODE on my various computers, and forgot about the subtle nuances which may've crept in due to my lack of version control. Thanks for pointing out what also may've been my hiccup on my newer computer.<br><br>I feel a 'tower defense' style game coming on... using (I think it was Devil's particle engine) the car(s) could have an increasing amount of smoke spewing from them until they cannot take any more &amp; the wheels fall off! Happy New Year.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1067241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Happy New Year BP :)<br><br>If you've got older versions of JV-ODE installed, don't forget to update the 'JV-ODE.decls' file in the Blitz3D userlibs folder when using the latest version of JV-ODE. <br><br></td></tr></table><br>
<a name="1067319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R<br><br>Hi, i'm testing my Blitz3D JV-ODE dll with xors3d and it seems to work!<br>is it ok to use it with xors3d?<br><br>Juan <br><br></td></tr></table><br>
<a name="1067354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, you can use JV-ODE with any 2D or 3D engines. <br><br></td></tr></table><br>
<a name="1067357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank's<br>always very fast and well supported!<br><br>Juan <br><br></td></tr></table><br>
<a name="1111302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a problem with the JV-ODE. I write at the moment a racing game, and I have a track as TriMesh. Unfortunately, there are always errors with the car, it suddenly jumps to infinity. I've tried the example with a heightmap as Trimesh, it went smoothly. You know what's wrong?<br><br>(Sry 4 the bad Google-translator-english but i cant write that good..)<br><br>regards, toeb <br><br></td></tr></table><br>
<a name="1111391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> Objects jump into infinity like that when something makes the simulation explode.<br><br>It can be caused by bad collision contacts (with the TriMesh), or a bad simulation setup.<br><br>If the car is stable on a plane (or a large flat cube), it will most likely be the track mesh at fault. To fix it you will need to clean up any imperfections in the mesh before it's converted to a TriMesh.<br><br>You could also replace it with the JV-ODE demo TriMesh to determine if it's the simulation setup or the mesh that's the root of the problem. <br><br></td></tr></table><br>
<a name="1111449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for your fast help up here. I just use the simplespace instead of the and HashSpace: It Works! (so far). But I got the same "bug" in the TriMesh demo. (BTW: in the demo "CarDemo - TriMesh - X4", i get everytime i touch my car with the spheres of MAV on "dSpaceCollide") <br><br></td></tr></table><br>
<a name="1111555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok now i have a new question. In the ODE-Guide they write:<br><div class="quote"> To model this in ODE set the tire-road contact parameters as follows: set friction direction 1 in the<br>direction that the tire is rolling in, and set the FDS slip coefficient in friction direction 2 to k v, where<br>v is the tire rolling velocity and k is a tire parameter that you can chose based on experimentation.<br>Note that FDS is quite separate from the sticking/slipping effects of Coulomb friction - both modes<br>can be used together at a single contact point. <br></div>(Page 36).<br><br>But how i can find out the direction the Tires are rolling in ? I tried to get it with "dBodyGetLinearVelX/Y/Z", but it doesnt work.<br><br>My code for Updating the Car:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">For tmpc = Each TCar
		For i = 0 To 3
			dBodyEnable( tmpc\phx_Wheel[i]\phx_Body )
		Next 
		dBodyEnable( tmpc\phx_Car\phx_Body )
		
		
		For i = 2 To 3
			dJointSetHinge2Param(tmpc\phx_Joint[i], dParamVel2, tmpc\force )
			dJointSetHinge2Param(tmpc\phx_Joint[i], dParamFMax2, 40.0 )
		Next
	
		
		For i = 0 To 1
			w# = tmpc\steer - dJointGetHinge2Angle1( tmpc\phx_Joint[i] )
			dJointSetHinge2Param( tmpc\phx_Joint[i], dParamVel, w )
			dJointSetHinge2Param( tmpc\phx_Joint[i], dParamFMax, 400 )
		Next
		
		For i = 0 To 3
			dGeomContactSetFDir1( tmpc\phx_Wheel[i]\phx_Geom, dBodyGetLinearVelX#(tmpc\phx_Wheel[i]\phx_Body), dBodyGetLinearVelY#(tmpc\phx_Wheel[i]\phx_Body), dBodyGetLinearVelZ#(tmpc\phx_Wheel[i]\phx_Body) )
			
			
			dGeomContactSetSlip2( tmpc\phx_Wheel[i]\phx_Geom, Sqr( dVectorX()*dVectorX() + dVectorY()*dVectorY() + dVectorZ()*dVectorZ() )*0.01 )
		Next 

		
	Next</textarea><br><br>I hope you can help me.<br><br>ToeB <br><br></td></tr></table><br>
<a name="1111633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to calculate the vector of the wheel direction and use that vector with the dGeomContactSetFDir1() function. If you're not familiar with vectors, you will need to look into 3D math. The code archives has some vector related math functions I believe.<br><br>dBodyGetLinearVelX/Y/Z is used to return the linear velocity, not a vector. <br><br></td></tr></table><br>
<a name="1111638"></a>

<a name="1111639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi<br><br>something like that is what i used, based on some code posted so far on this forums:<br><br>this code is executed for each wheel (count=0 to 3)<br><br><pre class=code>
If DirFric Then
	Local x_component#
	Local y_component#
	Local z_component#
	wheel_angle#=dGeomGetYaw(Auto\Rueda[count]\Geom)
				
	x_component#=Sin(wheel_angle#)*-1.0 
	y_component#=0.0
	z_component#=Sin(wheel_angle#+90.0)
				
	dGeomContactSetMu(Auto\Rueda[count]\Geom,100)
	dGeomContactSetMu2(Auto\Rueda[count]\Geom,10000)
								
	dGeomContactSetFDir1(Auto\Rueda[count]\Geom,x_component#,y_component#,z_component#)
	dGeomContactSetSlip1(Auto\Rueda[count]\Geom,0.001)
				
	Spin#=dJointGetHinge2Angle2Rate(Auto\Rueda[count]\joint)
	dGeomContactSetSlip2(Auto\Rueda[count]\Geom,0.001+(Abs(spin#)/20000))
				
End If

</pre><br><br>Juan<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1111654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh nice thanks ! That works pretty good! But one question: Whitch "Mu" or "Mu2" did you set to the Track ?<br><br>ToeB <br><br></td></tr></table><br>
<a name="1111658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi<br><br>look at:<br><a href="http://blitzbasic.com/Community/posts.php?topic=90169#1025809" target="_blank">http://blitzbasic.com/Community/posts.php?topic=90169#1025809</a><br><br>regards<br><br>btw it works on an horizontal plane (y component not evaluated)<br><br>Juan <br><br></td></tr></table><br>
<a name="1111829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Charrua, much appreciated :)<br><br><div class="quote"> <br>BTW: in the demo "CarDemo - TriMesh - X4", i get everytime i touch my car with the spheres of MAV on "dSpaceCollide"<br> <br></div><br>I wasn't sure if you meant the demo with your code added or not but I looked into it anyway. I haven't been able to recreate the issue here (no MAV) in the default TriMesh X4 demo (on Win7 64-bit), but there have been strange issues fixed by switching from Hash Spaces to Simple Spaces before. <br><br></td></tr></table><br>
<a name="1111853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> No i found out that the error was the incorrect setting up at the begining. So i set the Mode "Slip1" or "FDir1" without setting their Paramteters.. So it caused an Error ;)<br><br>Thank you all :) <br><br></td></tr></table><br>
<a name="1121033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have another question:<br>I bought the ODE-Wrapper for BlitzMax, and i want to use it with minib3d. But the problem is that i get an error everytime i use the TriMesh Function. My Code:<br><pre class=code>SuperStrict 

Import sidesign.minib3d
Import devcode.jvode
Include "include\minib3dODE.bmx"

Graphics3D( 800, 600, 32, 2 )

Type ODEGeom
	Field body:Int
	Field geom:Int
	Field mesh:TMesh
End Type

Global ODEGeomList:TList=CreateList()

' ###################################################################################################

' ### Setup ODE

dInitODE()

Global World:Int=dWorldCreate()
Global Space:Int=dHashSpaceCreate(0)
Global ContactGroup:Int=dJointGroupCreate(0)

dWorldSetAutoDisableFlag(World,1)
dWorldSetGravity(World,0,-0.98,0)
dWorldSetERP(World,0.03)
dContactSetMode(dContactBounce)
dContactSetBounce(0.4)
dContactSetMu(0.4)

' ### Create Light

Global Light:TLight=CreateLight()
PositionEntity Light,-40,70,-40
LightColor Light,255,255,255
AmbientLight 130,130,130

' ### Create Camera

Global Camera:TCamera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,0,50, -70
RotateEntity Camera,30,0,0

' ### Create Plane

dCreatePlane(Space,0,1,0,0)

Global Plane:TMesh=CreatePlane( 1000, 10 )
EntityAlpha Plane,0.8

'EntityTexture Plane,PlaneTexture


Local PTime:Int
Local Timer:Int
Local PhysicsTime:Float

While Not AppTerminate() And Not KeyDown(KEY_ESCAPE)

	If KeyHit(KEY_SPACE) Then 'MilliSecs()-Timer&gt;700
		If PhysicsTime&lt;10 Then AddObject()
		Timer=MilliSecs()
	End If

	UpdateGeoms()

	PTime=MilliSecs()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime=MilliSecs()-PTime

	RenderWorld

	'DrawText "JV-ODE Version "+FixFloat(dGetVersion()), 0, 0
	'DrawText "Physics Time:"+FixFloat(PhysicsTime), 0, 15

	Flip 1

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End


Function AddObject()

	Local xp:Float
	Local zp:Float
	Local ode:ODEGeom
	
	xp=Rand(-10,10)
	zp=Rand(-10,10)
	
	ode:ODEGeom=New ODEGeom
	ode.body=dBodyCreate(World)
	dBodySetPosition(ode.body,xp,30,zp)
	dBodySetRotation(ode.body,Rnd(360), Rnd(360), Rnd(360))
	dBodySetAngularVeL( ode.body, Rnd( -0.2, 0.2 ), Rnd( -0.2, 0.2 ), Rnd( -0.2, 0.2 ) )
	dBodySetAutoDisableFlag(ode.body,1)
	ode.mesh=LoadMesh("data\TestCar\Coll.b3d")
	ScaleMesh ode.mesh,2,2,2
	EntityColor ode.mesh,Rand(0,255),Rand(0,255),Rand(0,255)
	EntityShininess ode.mesh,0.7
	ode.geom=CreateMiniB3dTriMesh(Space,ode.mesh)
	dGeomSetBody(ode.geom,ode.body)
	ListAddLast(ODEGeomList,ode:ODEGeom)

End Function

' ###################################################################################################

Function UpdateGeoms()

	Local ode:ODEGeom
	
	For ode:ODEGeom=EachIn ODEGeomList
		PositionEntity ode.mesh,dGeomGetPositionX(ode.geom),dGeomGetPositionY(ode.geom),dGeomGetPositionZ(ode.geom)
		RotateEntity ode.mesh,dGeomGetPitch(ode.geom),dGeomGetYaw(ode.geom),dGeomGetRoll(ode.geom)
	Next

End Function


Function CreatePlane:TMesh( s:Float, uvscale:Float=1 )
	Local uv:Float = 1.0 / s * uvscale 
	Local mesh:TMesh = CreateMesh( )
	Local surf:TSurface = CreateSurface( mesh )
	Local v0:Int = AddVertex( surf, -s, 0, -s, 0, 1 )
	Local v1:Int = AddVertex( surf, -s, 0, +s, 0, 0 )
	Local v2:Int = AddVertex( surf, +s, 0, +s, 1, 0 )
	Local v3:Int = AddVertex( surf, +s, 0, -s, 1, 1 )
	AddTriangle( surf, v0, v1, v2 )
	AddTriangle( surf, v0, v2, v3 )
	
	
	Local tex:TTexture = LoadTexture( "data\Plane.png" )
	ScaleTexture( tex, uv, uv )
	EntityTexture( mesh, tex )
	
	Return mesh
End Function</pre><br><br>I hope you can help me ! <br><br></td></tr></table><br>
<a name="1121138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to include the CreateMiniB3dTriMesh() function code as it's in a separate file...<br><pre class=code>

Include "Function-CreateMiniB3DTriMesh.bmx"

</pre>The file is located in the JV-ODE misc folder. <br><br></td></tr></table><br>
<a name="1121143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes. The Function is in here (Just Renamed the "Function-CreateMiniB3DTriMesh.bmx") :<br><pre class=code>Include "include\minib3dODE.bmx"</pre> <br><br>I get this error in the dSpaceCollide- Function (Change the LoadMesh function into "CreateCube" or sth like that, start the program and hit space a few times.. <br><br></td></tr></table><br>
<a name="1121177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does it work with the 'torus.b3d' mesh included with JV-ODE?<br><br>What happens if you change the type of Space used? For example...<br><br><i>Global Space:Int=dSimpleSpaceCreate(0)</i><br><br>instead of...<br><br><i>Global Space:Int=dHashSpaceCreate(0)</i> <br><br></td></tr></table><br>
<a name="1121200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, the Sample works. But the Sample uses the JVODEOpenGl-Module as the Framework and not miniB3d. <br><br>SimpleSpace didnt work :( got the same error ! <br><br></td></tr></table><br>
<a name="1121210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> Btw: Is there any JV-ODE Version for Linux ? I just find win32 Versions!<br><br>Thank you <br><br></td></tr></table><br>
<a name="1121329"></a>

<a name="1121331"></a>

<a name="1121333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KronosUK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you have<br><br>Global TriBank:TBank<br>Global VertBank:TBank<br><br>in your file "minib3dODE.bmx" rem or delete those lines out.<br><br>It would appear each object created needs its own banks which makes sense i guess.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1121392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lol. I tried this, but i didnt work. Now i tried again, now it works oO<br><br>Thanks :D<br><br>But is there any Version for Linux or MaxOS ? <br><br></td></tr></table><br>
<a name="1121507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> JV-ODE is Windows only. <br><br></td></tr></table><br>
<a name="1121547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mhm ok. But you wrote the Wrapper, so you have the sourcecode. Is it possible to Compile this for Linux, isnt it ? <br><br></td></tr></table><br>
<a name="1121563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's technically possible, but not without a lot of extra work.<br><br>There are no plans for Linux or MacOS versions. <br><br></td></tr></table><br>
<a name="1121570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ToeB</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you can send me the code and i do this "extra work". Because i really need a Linux Version. I would only use this code for my Project!<br><br>Would be cool. Maybe u can write me an email?<br>tobias.hendricks@... <br><br></td></tr></table><br>
<a name="1121930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi ToeB, I sent the following reply to another member of your team via email earlier...<br><br>I made the decision long ago that a BlitzMax Linux/MacOS version of JV-ODE would not be developed. One key reason for this was the ever imminent arrival of Max3D, which was intended to have a cross platform ODE module incorporated into it, making the JV-ODE BlitzMax wrapper redundant the moment Max3D was released. When Max3D eventually did get released (ahem), the opportunity was long gone IMO.<br><br>I do not supply source code to commercial software. However, if you have the skills that would be necessary to get JV-ODE working on Linux/MacOS, then you have all that is needed to use ODE directly in BlitzMax as a C library (without the need for a wrapper). If you can find a download of the Max3D code, you might be able to use the ODE stuff in there too. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
